cscope 15 $HOME/Veritross/leveldb               0003271534
	@benchmarks/db_bench.cc

5 
	~<sys/ty³s.h
>

7 
	~<©omic
>

8 
	~<c¡dio
>

9 
	~<c¡dlib
>

11 
	~"Ëv–db/ÿche.h
"

12 
	~"Ëv–db/com·¿tÜ.h
"

13 
	~"Ëv–db/db.h
"

14 
	~"Ëv–db/’v.h
"

15 
	~"Ëv–db/f‹r_pŞicy.h
"

16 
	~"Ëv–db/wr™e_b©ch.h
"

17 
	~"pÜt/pÜt.h
"

18 
	~"ut/üc32c.h
"

19 
	~"ut/hi¡og¿m.h
"

20 
	~"ut/mu‹xlock.h
"

21 
	~"ut/¿ndom.h
"

22 
	~"ut/‹¡ut.h
"

47 cÚ¡ * 
	gFLAGS_b’chm¬ks
 =

68 
	gFLAGS_num
 = 1000000;

71 
	gFLAGS_»ads
 = -1;

74 
	gFLAGS_th»ads
 = 1;

77 
	gFLAGS_v®ue_size
 = 100;

81 
	gFLAGS_com´essiÚ_¿tio
 = 0.5;

84 
boŞ
 
	gFLAGS_hi¡og¿m
 = 
çl£
;

87 
boŞ
 
	gFLAGS_com·risÚs
 = 
çl£
;

91 
	gFLAGS_wr™e_bufãr_size
 = 0;

95 
	gFLAGS_max_fe_size
 = 0;

99 
	gFLAGS_block_size
 = 0;

103 
	gFLAGS_ÿche_size
 = -1;

106 
	gFLAGS_İ’_fes
 = 0;

110 
	gFLAGS_bloom_b™s
 = -1;

113 
	gFLAGS_key_´efix
 = 0;

118 
boŞ
 
	gFLAGS_u£_exi¡šg_db
 = 
çl£
;

121 
boŞ
 
	gFLAGS_»u£_logs
 = 
çl£
;

124 
boŞ
 
	gFLAGS_com´essiÚ
 = 
Œue
;

127 cÚ¡ * 
	gFLAGS_db
 = 
nuÎ±r
;

130 
	gFLAGS_z¡d_com´essiÚ_Ëv–
 = 1;

132 
Çme¥aû
 
	gËv–db
 {

134 
	gÇme¥aû
 {

135 
	gËv–db
::
Env
* 
g_’v
 = 
nuÎ±r
;

137 şas 
	cCouÁCom·¿tÜ
 : 
public
 
Com·¿tÜ
 {

138 
public
:

139 
CouÁCom·¿tÜ
(cÚ¡ 
Com·¿tÜ
* 
w¿µed
è: 
w¿µed_
(wrapped) {}

140 ~
CouÁCom·¿tÜ
(è
ov”ride
 {}

141 
Com·»
(cÚ¡ 
Sliû
& 
a
, cÚ¡ Sliû& 
b
ècÚ¡ 
	gov”ride
 {

142 
	gcouÁ_
.
ãtch_add
(1, 
¡d
::
memÜy_Üd”_»Ïxed
);

143  
	gw¿µed_
->
Com·»
(
a
, 
b
);

145 cÚ¡ * 
Name
(ècÚ¡ 
	gov”ride
 {  
	gw¿µed_
->Name(); }

146 
FšdShÜ‹¡S•¬©Ü
(
¡d
::
¡ršg
* 
¡¬t
,

147 cÚ¡ 
Sliû
& 
lim™
ècÚ¡ 
	gov”ride
 {

148 
	gw¿µed_
->
FšdShÜ‹¡S•¬©Ü
(
¡¬t
, 
lim™
);

151 
FšdShÜtSucûssÜ
(
¡d
::
¡ršg
* 
key
ècÚ¡ 
ov”ride
 {

152  
w¿µed_
->
FšdShÜtSucûssÜ
(
key
);

155 
size_t
 
com·risÚs
(ècÚ¡ {  
	gcouÁ_
.
lßd
(
¡d
::
memÜy_Üd”_»Ïxed
); }

157 
»£t
(è{ 
	gcouÁ_
.
¡Üe
(0, 
¡d
::
memÜy_Üd”_»Ïxed
); }

159 
	g´iv©e
:

160 
mubË
 
¡d
::
©omic
<
size_t
> 
couÁ_
{0};

161 cÚ¡ 
Com·¿tÜ
* cÚ¡ 
	gw¿µed_
;

165 şas 
	cRªdomG’”©Ü
 {

166 
	g´iv©e
:

167 
¡d
::
¡ršg
 
d©a_
;

168 
	gpos_
;

170 
	gpublic
:

171 
RªdomG’”©Ü
() {

175 
Rªdom
 
ºd
(301);

176 
	g¡d
::
¡ršg
 
p›û
;

177 
	gd©a_
.
size
() < 1048576) {

180 
	g‹¡
::
Com´essibËSŒšg
(&
ºd
, 
FLAGS_com´essiÚ_¿tio
, 100, &
p›û
);

181 
	gd©a_
.
­³nd
(
p›û
);

183 
	gpos_
 = 0;

186 
Sliû
 
G’”©e
(
size_t
 
Ën
) {

187 ià(
	gpos_
 + 
	gËn
 > 
	gd©a_
.
size
()) {

188 
	gpos_
 = 0;

189 
as£¹
(
Ën
 < 
d©a_
.
size
());

191 
	gpos_
 +ğ
Ën
;

192  
Sliû
(
d©a_
.
d©a
(è+ 
pos_
 - 
Ën
,†en);

196 şas 
	cKeyBufãr
 {

197 
	gpublic
:

198 
KeyBufãr
() {

199 
as£¹
(
FLAGS_key_´efix
 < (
bufãr_
));

200 
mem£t
(
bufãr_
, 'a', 
FLAGS_key_´efix
);

202 
	gKeyBufãr
& 
	gİ”©Ü
=(
KeyBufãr
& 
Ùh”
èğ
d–‘e
;

203 
KeyBufãr
(KeyBufãr& 
Ùh”
èğ
d–‘e
;

205 
S‘
(
k
) {

206 
	g¡d
::
¢´štf
(
bufãr_
 + 
FLAGS_key_´efix
,

207 (
bufãr_
è- 
FLAGS_key_´efix
, "%016d", 
k
);

210 
Sliû
 
¦iû
(ècÚ¡ {  Sliû(
bufãr_
, 
FLAGS_key_´efix
 + 16); }

212 
	g´iv©e
:

213 
bufãr_
[1024];

216 #ià
defšed
(
__lšux
)

217 
Sliû
 
TrimS·û
(Sliû 
s
) {

218 
size_t
 
	g¡¬t
 = 0;

219 
	g¡¬t
 < 
	gs
.
size
(è&& 
is¥aû
(
s
[
¡¬t
])) {

220 
	g¡¬t
++;

222 
size_t
 
	glim™
 = 
s
.
size
();

223 
	glim™
 > 
	g¡¬t
 && 
is¥aû
(
s
[
lim™
 - 1])) {

224 
	glim™
--;

226  
Sliû
(
s
.
d©a
(è+ 
¡¬t
, 
lim™
 - start);

230 
Aµ’dW™hS·û
(
¡d
::
¡ršg
* 
¡r
, 
Sliû
 
msg
) {

231 ià(
	gmsg
.
em±y
()) ;

232 ià(!
	g¡r
->
em±y
()) {

233 
	g¡r
->
push_back
(' ');

235 
	g¡r
->
­³nd
(
msg
.
d©a
(), msg.
size
());

238 şas 
	cSts
 {

239 
	g´iv©e
:

240 
¡¬t_
;

241 
	gfšish_
;

242 
	g£cÚds_
;

243 
	gdÚe_
;

244 
	gÃxt_»pÜt_
;

245 
št64_t
 
	gby‹s_
;

246 
	gÏ¡_İ_fšish_
;

247 
Hi¡og¿m
 
	ghi¡_
;

248 
	g¡d
::
¡ršg
 
mes§ge_
;

250 
	gpublic
:

251 
Sts
(è{ 
S¹
(); }

253 
S¹
() {

254 
	gÃxt_»pÜt_
 = 100;

255 
	ghi¡_
.
CË¬
();

256 
	gdÚe_
 = 0;

257 
	gby‹s_
 = 0;

258 
	g£cÚds_
 = 0;

259 
	gmes§ge_
.
ş—r
();

260 
	g¡¬t_
 = 
fšish_
 = 
Ï¡_İ_fšish_
 = 
g_’v
->
NowMiüos
();

263 
M”ge
(cÚ¡ 
Sts
& 
Ùh”
) {

264 
	ghi¡_
.
M”ge
(
Ùh”
.
hi¡_
);

265 
	gdÚe_
 +ğ
Ùh”
.
dÚe_
;

266 
	gby‹s_
 +ğ
Ùh”
.
by‹s_
;

267 
	g£cÚds_
 +ğ
Ùh”
.
£cÚds_
;

268 ià(
	gÙh”
.
	g¡¬t_
 < s¹_è¡¬t_ = 
Ùh”
.
¡¬t_
;

269 ià(
	gÙh”
.
	gfšish_
 > fšish_èfšish_ = 
Ùh”
.
fšish_
;

272 ià(
	gmes§ge_
.
em±y
()èmes§ge_ = 
Ùh”
.
mes§ge_
;

275 
Stİ
() {

276 
	gfšish_
 = 
g_’v
->
NowMiüos
();

277 
	g£cÚds_
 = (
fšish_
 - 
¡¬t_
) * 1e-6;

280 
AddMes§ge
(
Sliû
 
msg
è{ 
Aµ’dW™hS·û
(&
mes§ge_
, msg); }

282 
FšishedSšgËOp
() {

283 ià(
	gFLAGS_hi¡og¿m
) {

284 
	gnow
 = 
g_’v
->
NowMiüos
();

285 
	gmiüos
 = 
now
 - 
Ï¡_İ_fšish_
;

286 
	ghi¡_
.
Add
(
miüos
);

287 ià(
	gmiüos
 > 20000) {

288 
	g¡d
::
årštf
(
¡d”r
, "lÚg op: %.1àmiüos%30s\r", 
miüos
, "");

289 
	g¡d
::
fæush
(
¡d”r
);

291 
	gÏ¡_İ_fšish_
 = 
now
;

294 
	gdÚe_
++;

295 ià(
	gdÚe_
 >ğ
Ãxt_»pÜt_
) {

296 ià(
Ãxt_»pÜt_
 < 1000)

297 
Ãxt_»pÜt_
 += 100;

298 ià(
	gÃxt_»pÜt_
 < 5000)

299 
	gÃxt_»pÜt_
 += 500;

300 ià(
	gÃxt_»pÜt_
 < 10000)

301 
	gÃxt_»pÜt_
 += 1000;

302 ià(
	gÃxt_»pÜt_
 < 50000)

303 
	gÃxt_»pÜt_
 += 5000;

304 ià(
	gÃxt_»pÜt_
 < 100000)

305 
	gÃxt_»pÜt_
 += 10000;

306 ià(
	gÃxt_»pÜt_
 < 500000)

307 
	gÃxt_»pÜt_
 += 50000;

309 
	gÃxt_»pÜt_
 += 100000;

310 
	g¡d
::
årštf
(
¡d”r
, "... fšished %d ops%30s\r", 
dÚe_
, "");

311 
	g¡d
::
fæush
(
¡d”r
);

315 
AddBy‹s
(
št64_t
 
n
è{ 
	gby‹s_
 +=‚; }

317 
R•Üt
(cÚ¡ 
Sliû
& 
Çme
) {

320 ià(
	gdÚe_
 < 1) done_ = 1;

322 
	g¡d
::
¡ršg
 
exŒa
;

323 ià(
	gby‹s_
 > 0) {

326 
	g–­£d
 = (
fšish_
 - 
¡¬t_
) * 1e-6;

327 
	g¿‹
[100];

328 
	g¡d
::
¢´štf
(
¿‹
, (rate), "%6.1f MB/s",

329 (
by‹s_
 / 1048576.0è/ 
–­£d
);

330 
	gexŒa
 = 
¿‹
;

332 
Aµ’dW™hS·û
(&
exŒa
, 
mes§ge_
);

334 
	g¡d
::
årštf
(
¡dout
, "%-12s : %11.3f micros/op;%s%s\n",

335 
Çme
.
ToSŒšg
().
c_¡r
(), 
£cÚds_
 * 1e6 / 
dÚe_
,

336 (
exŒa
.
em±y
(è? "" : " "),ƒxŒa.
c_¡r
());

337 ià(
	gFLAGS_hi¡og¿m
) {

338 
	g¡d
::
årštf
(
¡dout
, "Microseconds…er op:\n%s\n",

339 
hi¡_
.
ToSŒšg
().
c_¡r
());

341 
	g¡d
::
fæush
(
¡dout
);

346 
	sSh¬edS‹
 {

347 
	gpÜt
::
Mu‹x
 
mu
;

348 
	gpÜt
::
CÚdV¬
 
cv
 
GUARDED_BY
(
mu
);

349 
tÙ®
 
GUARDED_BY
(
mu
);

357 
num_š™Ÿlized
 
GUARDED_BY
(
mu
);

358 
num_dÚe
 
GUARDED_BY
(
mu
);

359 
boŞ
 
¡¬t
 
GUARDED_BY
(
mu
);

361 
Sh¬edS‹
(
tÙ®
)

362 : 
cv
(&
mu
), 
tÙ®
ÑÙ®), 
num_š™Ÿlized
(0), 
num_dÚe
(0), 
¡¬t
(
çl£
) {}

366 
	sTh»adS‹
 {

367 
	gtid
;

368 
Rªdom
 
	g¿nd
;

369 
Sts
 
	g¡©s
;

370 
Sh¬edS‹
* 
	gsh¬ed
;

372 
Th»adS‹
(
šdex
, 
£ed
è: 
tid
(šdex), 
¿nd
(£ed), 
sh¬ed
(
nuÎ±r
) {}

375 
Com´ess
(

376 
Th»adS‹
* 
th»ad
, 
¡d
::
¡ršg
 
Çme
,

377 
¡d
::
funùiÚ
<
boŞ
(cÚ¡ *, 
size_t
, std::
¡ršg
*)> 
com´ess_func
) {

378 
RªdomG’”©Ü
 
g’
;

379 
Sliû
 
	gšput
 = 
g’
.
G’”©e
(
O±iÚs
().
block_size
);

380 
št64_t
 
	gby‹s
 = 0;

381 
št64_t
 
	g´oduûd
 = 0;

382 
boŞ
 
	gok
 = 
Œue
;

383 
	g¡d
::
¡ršg
 
com´es£d
;

384 
	gok
 && 
	gby‹s
 < 1024 * 1048576) {

385 
	gok
 = 
com´ess_func
(
šput
.
d©a
(), iÅut.
size
(), &
com´es£d
);

386 
	g´oduûd
 +ğ
com´es£d
.
size
();

387 
	gby‹s
 +ğ
šput
.
size
();

388 
	gth»ad
->
	g¡©s
.
FšishedSšgËOp
();

391 ià(!
	gok
) {

392 
	gth»ad
->
	g¡©s
.
AddMes§ge
("(" + 
Çme
 + " failure)");

394 
	gbuf
[100];

395 
	g¡d
::
¢´štf
(
buf
, (buf), "(output: %.1f%%)",

396 (
´oduûd
 * 100.0è/ 
by‹s
);

397 
	gth»ad
->
	g¡©s
.
AddMes§ge
(
buf
);

398 
	gth»ad
->
	g¡©s
.
AddBy‹s
(
by‹s
);

402 
Uncom´ess
(

403 
Th»adS‹
* 
th»ad
, 
¡d
::
¡ršg
 
Çme
,

404 
¡d
::
funùiÚ
<
boŞ
(cÚ¡ *, 
size_t
, std::
¡ršg
*)> 
com´ess_func
,

405 
¡d
::
funùiÚ
<
boŞ
(cÚ¡ *, 
size_t
, *)> 
uncom´ess_func
) {

406 
RªdomG’”©Ü
 
	gg’
;

407 
Sliû
 
	gšput
 = 
g’
.
G’”©e
(
O±iÚs
().
block_size
);

408 
	g¡d
::
¡ršg
 
com´es£d
;

409 
boŞ
 
	gok
 = 
com´ess_func
(
šput
.
d©a
(), iÅut.
size
(), &
com´es£d
);

410 
št64_t
 
	gby‹s
 = 0;

411 * 
	guncom´es£d
 = 
Ãw
 [
šput
.
size
()];

412 
	gok
 && 
	gby‹s
 < 1024 * 1048576) {

413 
	gok
 = 
uncom´ess_func
(
com´es£d
.
d©a
(), com´es£d.
size
(), 
uncom´es£d
);

414 
	gby‹s
 +ğ
šput
.
size
();

415 
	gth»ad
->
	g¡©s
.
FšishedSšgËOp
();

417 
	gd–‘e
[] 
	guncom´es£d
;

419 ià(!
	gok
) {

420 
	gth»ad
->
	g¡©s
.
AddMes§ge
("(" + 
Çme
 + " failure)");

422 
	gth»ad
->
	g¡©s
.
AddBy‹s
(
by‹s
);

428 şas 
	cB’chm¬k
 {

429 
	g´iv©e
:

430 
Cache
* 
ÿche_
;

431 cÚ¡ 
F‹rPŞicy
* 
	gf‹r_pŞicy_
;

432 
DB
* 
	gdb_
;

433 
	gnum_
;

434 
	gv®ue_size_
;

435 
	g’Œ›s_³r_b©ch_
;

436 
Wr™eO±iÚs
 
	gwr™e_İtiÚs_
;

437 
	g»ads_
;

438 
	gh—p_couÁ”_
;

439 
CouÁCom·¿tÜ
 
	gcouÁ_com·¿tÜ_
;

440 
	gtÙ®_th»ad_couÁ_
;

442 
PrštH—d”
() {

443 cÚ¡ 
	gkKeySize
 = 16 + 
FLAGS_key_´efix
;

444 
PrštEnvœÚm’t
();

445 
	g¡d
::
årštf
(
¡dout
, "Keys: %d by‹ —ch\n", 
kKeySize
);

446 
	g¡d
::
årštf
(

447 
¡dout
, "Values: %d bytesƒach (%d bytes‡fter compression)\n",

448 
FLAGS_v®ue_size
,

449 
¡©ic_ÿ¡
<>(
FLAGS_v®ue_size
 * 
FLAGS_com´essiÚ_¿tio
 + 0.5));

450 
	g¡d
::
årštf
(
¡dout
, "EÁr›s: %d\n", 
num_
);

451 
	g¡d
::
årštf
(
¡dout
, "RawSize: %.1f MB (estimated)\n",

452 ((
¡©ic_ÿ¡
<
št64_t
>(
kKeySize
 + 
FLAGS_v®ue_size
è* 
num_
) /

454 
	g¡d
::
årštf
(

455 
¡dout
, "FileSize: %.1f MB (estimated)\n",

456 (((
kKeySize
 + 
FLAGS_v®ue_size
 * 
FLAGS_com´essiÚ_¿tio
è* 
num_
) /

458 
PrštW¬nšgs
();

459 
	g¡d
::
årštf
(
¡dout
, "------------------------------------------------\n");

462 
PrštW¬nšgs
() {

463 #ià
defšed
(
__GNUC__
è&& !defšed(
__OPTIMIZE__
)

464 
	g¡d
::
årštf
(

465 
¡dout
,

468 #iâdeà
NDEBUG


469 
	g¡d
::
årštf
(

470 
¡dout
,

475 cÚ¡ 
	g‹xt
[] = "yyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy";

476 
	g¡d
::
¡ršg
 
com´es£d
;

477 ià(!
	gpÜt
::
SÇµy_Com´ess
(
‹xt
, Ñext), &
com´es£d
)) {

478 
	g¡d
::
årštf
(
¡dout
, "WARNING: Snappy compression is‚otƒnabled\n");

479 } ià(
	gcom´es£d
.
size
(è>ğ(
‹xt
)) {

480 
¡d
::
årštf
(
¡dout
, "WARNING: Snappy compression is‚otƒffective\n");

484 
PrštEnvœÚm’t
() {

485 
	g¡d
::
årštf
(
¡d”r
, "Lev–DB: v”siÚ %d.%d\n", 
kMajÜV”siÚ
,

486 
kMšÜV”siÚ
);

488 #ià
defšed
(
__lšux
)

489 
time_t
 
	gnow
 = 
time
(
nuÎ±r
);

490 
	g¡d
::
årštf
(
¡d”r
, "Date: %s",

491 
ùime
(&
now
));

493 
FILE
* 
	gıušfo
 = 
¡d
::
fİ’
("/proc/cpuinfo", "r");

494 ià(
	gıušfo
 !ğ
nuÎ±r
) {

495 
lše
[1000];

496 
	gnum_ıus
 = 0;

497 
	g¡d
::
¡ršg
 
ıu_ty³
;

498 
	g¡d
::
¡ršg
 
ÿche_size
;

499 
fg‘s
(
lše
, Öše), 
ıušfo
è!ğ
nuÎ±r
) {

500 cÚ¡ * 
£p
 = 
¡rchr
(
lše
, ':');

501 ià(
	g£p
 =ğ
nuÎ±r
) {

504 
Sliû
 
	gkey
 = 
TrimS·û
(Sliû(
lše
, 
£p
 - 1 -†ine));

505 
Sliû
 
	gv®
 = 
TrimS·û
(Sliû(
£p
 + 1));

506 ià(
	gkey
 == "model‚ame") {

507 ++
num_ıus
;

508 
	gıu_ty³
 = 
v®
.
ToSŒšg
();

509 } ià(
	gkey
 == "cache size") {

510 
ÿche_size
 = 
v®
.
ToSŒšg
();

513 
	g¡d
::
fşo£
(
ıušfo
);

514 
	g¡d
::
årštf
(
¡d”r
, "CPU: %d * %s\n", 
num_ıus
, 
ıu_ty³
.
c_¡r
());

515 
	g¡d
::
årštf
(
¡d”r
, "CPUCache: %s\n", 
ÿche_size
.
c_¡r
());

520 
	gpublic
:

521 
B’chm¬k
()

522 : 
ÿche_
(
FLAGS_ÿche_size
 >ğ0 ? 
NewLRUCache
(FLAGS_ÿche_sizeè: 
nuÎ±r
),

523 
f‹r_pŞicy_
(
FLAGS_bloom_b™s
 >= 0

524 ? 
NewBloomF‹rPŞicy
(
FLAGS_bloom_b™s
)

525 : 
nuÎ±r
),

526 
db_
(
nuÎ±r
),

527 
num_
(
FLAGS_num
),

528 
v®ue_size_
(
FLAGS_v®ue_size
),

529 
’Œ›s_³r_b©ch_
(1),

530 
»ads_
(
FLAGS_»ads
 < 0 ? 
FLAGS_num
 : FLAGS_reads),

531 
h—p_couÁ”_
(0),

532 
couÁ_com·¿tÜ_
(
By‹wi£Com·¿tÜ
()),

533 
tÙ®_th»ad_couÁ_
(0) {

534 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> 
fes
;

535 
	gg_’v
->
G‘Chd»n
(
FLAGS_db
, &
fes
);

536 
size_t
 
	gi
 = 0; i < 
	gfes
.
size
(); i++) {

537 ià(
Sliû
(
fes
[
i
]).
¡¬ts_w™h
("heap-")) {

538 
	gg_’v
->
RemoveFe
(
¡d
::
¡ršg
(
FLAGS_db
è+ "/" + 
fes
[
i
]);

541 ià(!
	gFLAGS_u£_exi¡šg_db
) {

542 
De¡royDB
(
FLAGS_db
, 
O±iÚs
());

546 ~
B’chm¬k
() {

547 
d–‘e
 
	gdb_
;

548 
d–‘e
 
	gÿche_
;

549 
d–‘e
 
	gf‹r_pŞicy_
;

552 
Run
() {

553 
PrštH—d”
();

554 
O³n
();

556 cÚ¡ * 
	gb’chm¬ks
 = 
FLAGS_b’chm¬ks
;

557 
	gb’chm¬ks
 !ğ
nuÎ±r
) {

558 cÚ¡ * 
£p
 = 
¡rchr
(
b’chm¬ks
, ',');

559 
Sliû
 
	gÇme
;

560 ià(
	g£p
 =ğ
nuÎ±r
) {

561 
Çme
 = 
b’chm¬ks
;

562 
	gb’chm¬ks
 = 
nuÎ±r
;

564 
	gÇme
 = 
Sliû
(
b’chm¬ks
, 
£p
 - benchmarks);

565 
	gb’chm¬ks
 = 
£p
 + 1;

569 
	gnum_
 = 
FLAGS_num
;

570 
	g»ads_
 = (
FLAGS_»ads
 < 0 ? 
FLAGS_num
 : FLAGS_reads);

571 
	gv®ue_size_
 = 
FLAGS_v®ue_size
;

572 
	g’Œ›s_³r_b©ch_
 = 1;

573 
	gwr™e_İtiÚs_
 = 
Wr™eO±iÚs
();

575 (
	gB’chm¬k
::*
m‘hod
)(
Th»adS‹
*èğ
nuÎ±r
;

576 
boŞ
 
	gäesh_db
 = 
çl£
;

577 
	gnum_th»ads
 = 
FLAGS_th»ads
;

579 ià(
	gÇme
 =ğ
Sliû
("open")) {

580 
m‘hod
 = &
B’chm¬k
::
O³nB’ch
;

581 
	gnum_
 /= 10000;

582 ià(
	gnum_
 < 1)‚um_ = 1;

583 } ià(
	gÇme
 =ğ
Sliû
("fillseq")) {

584 
äesh_db
 = 
Œue
;

585 
	gm‘hod
 = &
B’chm¬k
::
Wr™eSeq
;

586 } ià(
	gÇme
 =ğ
Sliû
("fillbatch")) {

587 
äesh_db
 = 
Œue
;

588 
	g’Œ›s_³r_b©ch_
 = 1000;

589 
	gm‘hod
 = &
B’chm¬k
::
Wr™eSeq
;

590 } ià(
	gÇme
 =ğ
Sliû
("fillrandom")) {

591 
äesh_db
 = 
Œue
;

592 
	gm‘hod
 = &
B’chm¬k
::
Wr™eRªdom
;

593 } ià(
	gÇme
 =ğ
Sliû
("overwrite")) {

594 
äesh_db
 = 
çl£
;

595 
	gm‘hod
 = &
B’chm¬k
::
Wr™eRªdom
;

596 } ià(
	gÇme
 =ğ
Sliû
("fillsync")) {

597 
äesh_db
 = 
Œue
;

598 
	gnum_
 /= 1000;

599 
	gwr™e_İtiÚs_
.
	gsync
 = 
Œue
;

600 
	gm‘hod
 = &
B’chm¬k
::
Wr™eRªdom
;

601 } ià(
	gÇme
 =ğ
Sliû
("fill100K")) {

602 
äesh_db
 = 
Œue
;

603 
	gnum_
 /= 1000;

604 
	gv®ue_size_
 = 100 * 1000;

605 
	gm‘hod
 = &
B’chm¬k
::
Wr™eRªdom
;

606 } ià(
	gÇme
 =ğ
Sliû
("readseq")) {

607 
m‘hod
 = &
B’chm¬k
::
R—dSequ’tŸl
;

608 } ià(
	gÇme
 =ğ
Sliû
("readreverse")) {

609 
m‘hod
 = &
B’chm¬k
::
R—dRev”£
;

610 } ià(
	gÇme
 =ğ
Sliû
("readrandom")) {

611 
m‘hod
 = &
B’chm¬k
::
R—dRªdom
;

612 } ià(
	gÇme
 =ğ
Sliû
("readmissing")) {

613 
m‘hod
 = &
B’chm¬k
::
R—dMissšg
;

614 } ià(
	gÇme
 =ğ
Sliû
("seekrandom")) {

615 
m‘hod
 = &
B’chm¬k
::
S“kRªdom
;

616 } ià(
	gÇme
 =ğ
Sliû
("seekordered")) {

617 
m‘hod
 = &
B’chm¬k
::
S“kOrd”ed
;

618 } ià(
	gÇme
 =ğ
Sliû
("readhot")) {

619 
m‘hod
 = &
B’chm¬k
::
R—dHÙ
;

620 } ià(
	gÇme
 =ğ
Sliû
("readrandomsmall")) {

621 
»ads_
 /= 1000;

622 
	gm‘hod
 = &
B’chm¬k
::
R—dRªdom
;

623 } ià(
	gÇme
 =ğ
Sliû
("deleteseq")) {

624 
m‘hod
 = &
B’chm¬k
::
D–‘eSeq
;

625 } ià(
	gÇme
 =ğ
Sliû
("deleterandom")) {

626 
m‘hod
 = &
B’chm¬k
::
D–‘eRªdom
;

627 } ià(
	gÇme
 =ğ
Sliû
("readwhilewriting")) {

628 
num_th»ads
++;

629 
	gm‘hod
 = &
B’chm¬k
::
R—dWheWr™šg
;

630 } ià(
	gÇme
 =ğ
Sliû
("compact")) {

631 
m‘hod
 = &
B’chm¬k
::
Com·ù
;

632 } ià(
	gÇme
 =ğ
Sliû
("crc32c")) {

633 
m‘hod
 = &
B’chm¬k
::
Crc32c
;

634 } ià(
	gÇme
 =ğ
Sliû
("snappycomp")) {

635 
m‘hod
 = &
B’chm¬k
::
SÇµyCom´ess
;

636 } ià(
	gÇme
 =ğ
Sliû
("snappyuncomp")) {

637 
m‘hod
 = &
B’chm¬k
::
SÇµyUncom´ess
;

638 } ià(
	gÇme
 =ğ
Sliû
("zstdcomp")) {

639 
m‘hod
 = &
B’chm¬k
::
Z¡dCom´ess
;

640 } ià(
	gÇme
 =ğ
Sliû
("zstduncomp")) {

641 
m‘hod
 = &
B’chm¬k
::
Z¡dUncom´ess
;

642 } ià(
	gÇme
 =ğ
Sliû
("heapprofile")) {

643 
H—pProfe
();

644 } ià(
	gÇme
 =ğ
Sliû
("stats")) {

645 
PrštSts
("leveldb.stats");

646 } ià(
	gÇme
 =ğ
Sliû
("sstables")) {

647 
PrštSts
("leveldb.sstables");

649 ià(!
	gÇme
.
em±y
()) {

650 
	g¡d
::
årštf
(
¡d”r
, "unknown benchmark '%s'\n",

651 
Çme
.
ToSŒšg
().
c_¡r
());

655 ià(
	gäesh_db
) {

656 ià(
	gFLAGS_u£_exi¡šg_db
) {

657 
	g¡d
::
årštf
(
¡dout
, "%-12s : skipped (--use_existing_db isrue)\n",

658 
Çme
.
ToSŒšg
().
c_¡r
());

659 
	gm‘hod
 = 
nuÎ±r
;

661 
d–‘e
 
	gdb_
;

662 
	gdb_
 = 
nuÎ±r
;

663 
De¡royDB
(
FLAGS_db
, 
O±iÚs
());

664 
O³n
();

668 ià(
	gm‘hod
 !ğ
nuÎ±r
) {

669 
RunB’chm¬k
(
num_th»ads
, 
Çme
, 
m‘hod
);

674 
	g´iv©e
:

675 
	sTh»adArg
 {

676 
B’chm¬k
* 
bm
;

677 
Sh¬edS‹
* 
	gsh¬ed
;

678 
Th»adS‹
* 
	gth»ad
;

679 (
	gB’chm¬k
::*
m‘hod
)(
Th»adS‹
*);

682 
Th»adBody
(* 
v
) {

683 
Th»adArg
* 
	g¬g
 = 
»š‹½»t_ÿ¡
<Th»adArg*>(
v
);

684 
Sh¬edS‹
* 
	gsh¬ed
 = 
¬g
->
sh¬ed
;

685 
Th»adS‹
* 
	gth»ad
 = 
¬g
->
th»ad
;

687 
Mu‹xLock
 
l
(&
sh¬ed
->
mu
);

688 
	gsh¬ed
->
	gnum_š™Ÿlized
++;

689 ià(
	gsh¬ed
->
	gnum_š™Ÿlized
 >ğ
sh¬ed
->
tÙ®
) {

690 
sh¬ed
->
cv
.
SigÇlAÎ
();

692 !
	gsh¬ed
->
	g¡¬t
) {

693 
	gsh¬ed
->
	gcv
.
Wa™
();

697 
	gth»ad
->
	g¡©s
.
S¹
();

698 (
	g¬g
->
	gbm
->*×rg->
	gm‘hod
))(
	gth»ad
);

699 
	gth»ad
->
	g¡©s
.
Stİ
();

702 
Mu‹xLock
 
l
(&
sh¬ed
->
mu
);

703 
	gsh¬ed
->
	gnum_dÚe
++;

704 ià(
	gsh¬ed
->
	gnum_dÚe
 >ğ
sh¬ed
->
tÙ®
) {

705 
sh¬ed
->
cv
.
SigÇlAÎ
();

710 
RunB’chm¬k
(
n
, 
Sliû
 
Çme
,

711 (
B’chm¬k
::*
m‘hod
)(
Th»adS‹
*)) {

712 
Sh¬edS‹
 
sh¬ed
(
n
);

714 
Th»adArg
* 
	g¬g
 = 
Ãw
 Th»adArg[
n
];

715 
	gi
 = 0; i < 
	gn
; i++) {

716 
	g¬g
[
i
].
	gbm
 = 
this
;

717 
	g¬g
[
i
].
	gm‘hod
 = 
m‘hod
;

718 
	g¬g
[
i
].
	gsh¬ed
 = &
sh¬ed
;

719 ++
	gtÙ®_th»ad_couÁ_
;

723 
	g¬g
[
i
].
	gth»ad
 = 
Ãw
 
Th»adS‹
(i, 1000 + 
tÙ®_th»ad_couÁ_
);

724 
	g¬g
[
i
].
	gth»ad
->
	gsh¬ed
 = &
sh¬ed
;

725 
	gg_’v
->
S¹Th»ad
(
Th»adBody
, &
¬g
[
i
]);

728 
	gsh¬ed
.
	gmu
.
Lock
();

729 
	gsh¬ed
.
	gnum_š™Ÿlized
 < 
	gn
) {

730 
	gsh¬ed
.
	gcv
.
Wa™
();

733 
	gsh¬ed
.
	g¡¬t
 = 
Œue
;

734 
	gsh¬ed
.
	gcv
.
SigÇlAÎ
();

735 
	gsh¬ed
.
	gnum_dÚe
 < 
	gn
) {

736 
	gsh¬ed
.
	gcv
.
Wa™
();

738 
	gsh¬ed
.
	gmu
.
UÆock
();

740 
	gi
 = 1; i < 
	gn
; i++) {

741 
	g¬g
[0].
	gth»ad
->
	g¡©s
.
M”ge
(
¬g
[
i
].
th»ad
->
¡©s
);

743 
	g¬g
[0].
	gth»ad
->
	g¡©s
.
R•Üt
(
Çme
);

744 ià(
	gFLAGS_com·risÚs
) {

745 
årštf
(
¡dout
, "Com·risÚs: %zu\n", 
couÁ_com·¿tÜ_
.
com·risÚs
());

746 
	gcouÁ_com·¿tÜ_
.
»£t
();

747 
fæush
(
¡dout
);

750 
	gi
 = 0; i < 
	gn
; i++) {

751 
d–‘e
 
	g¬g
[
i
].
	gth»ad
;

753 
	gd–‘e
[] 
	g¬g
;

756 
Crc32c
(
Th»adS‹
* 
th»ad
) {

758 cÚ¡ 
	gsize
 = 4096;

759 cÚ¡ * 
	gÏb–
 = "(4K…er op)";

760 
	g¡d
::
¡ršg
 
d©a
(
size
, 'x');

761 
št64_t
 
	gby‹s
 = 0;

762 
ušt32_t
 
	güc
 = 0;

763 
	gby‹s
 < 500 * 1048576) {

764 
	güc
 = 
üc32c
::
V®ue
(
d©a
.d©a(), 
size
);

765 
	gth»ad
->
	g¡©s
.
FšishedSšgËOp
();

766 
	gby‹s
 +ğ
size
;

769 
	g¡d
::
årštf
(
¡d”r
, "... crc=0x%x\r", 
¡©ic_ÿ¡
<>(
üc
));

771 
	gth»ad
->
	g¡©s
.
AddBy‹s
(
by‹s
);

772 
	gth»ad
->
	g¡©s
.
AddMes§ge
(
Ïb–
);

775 
SÇµyCom´ess
(
Th»adS‹
* 
th»ad
) {

776 
Com´ess
(
th»ad
, "¢­py", &
pÜt
::
SÇµy_Com´ess
);

779 
SÇµyUncom´ess
(
Th»adS‹
* 
th»ad
) {

780 
Uncom´ess
(
th»ad
, "¢­py", &
pÜt
::
SÇµy_Com´ess
,

781 &
pÜt
::
SÇµy_Uncom´ess
);

784 
Z¡dCom´ess
(
Th»adS‹
* 
th»ad
) {

785 
Com´ess
(
th»ad
, "zstd",

786 [](cÚ¡ * 
šput
, 
size_t
 
Ëngth
, 
¡d
::
¡ršg
* 
ouut
) {

787  
pÜt
::
Z¡d_Com´ess
(
FLAGS_z¡d_com´essiÚ_Ëv–
, 
šput
,

788 
Ëngth
, 
ouut
);

792 
Z¡dUncom´ess
(
Th»adS‹
* 
th»ad
) {

793 
Uncom´ess
(

794 
th»ad
, "zstd",

795 [](cÚ¡ * 
šput
, 
size_t
 
Ëngth
, 
¡d
::
¡ršg
* 
ouut
) {

796  
pÜt
::
Z¡d_Com´ess
(
FLAGS_z¡d_com´essiÚ_Ëv–
, 
šput
,

797 
Ëngth
, 
ouut
);

799 &
pÜt
::
Z¡d_Uncom´ess
);

802 
O³n
() {

803 
as£¹
(
db_
 =ğ
nuÎ±r
);

804 
O±iÚs
 
	gİtiÚs
;

805 
	gİtiÚs
.
	g’v
 = 
g_’v
;

806 
	gİtiÚs
.
	gü—‹_if_missšg
 = !
FLAGS_u£_exi¡šg_db
;

807 
	gİtiÚs
.
	gblock_ÿche
 = 
ÿche_
;

808 
	gİtiÚs
.
	gwr™e_bufãr_size
 = 
FLAGS_wr™e_bufãr_size
;

809 
	gİtiÚs
.
	gmax_fe_size
 = 
FLAGS_max_fe_size
;

810 
	gİtiÚs
.
	gblock_size
 = 
FLAGS_block_size
;

811 ià(
	gFLAGS_com·risÚs
) {

812 
	gİtiÚs
.
	gcom·¿tÜ
 = &
couÁ_com·¿tÜ_
;

814 
	gİtiÚs
.
	gmax_İ’_fes
 = 
FLAGS_İ’_fes
;

815 
	gİtiÚs
.
	gf‹r_pŞicy
 = 
f‹r_pŞicy_
;

816 
	gİtiÚs
.
	g»u£_logs
 = 
FLAGS_»u£_logs
;

817 
	gİtiÚs
.
	gcom´essiÚ
 =

818 
FLAGS_com´essiÚ
 ? 
kSÇµyCom´essiÚ
 : 
kNoCom´essiÚ
;

819 
Stus
 
	gs
 = 
DB
::
O³n
(
İtiÚs
, 
FLAGS_db
, &
db_
);

820 ià(!
	gs
.
ok
()) {

821 
	g¡d
::
årštf
(
¡d”r
, "İ’ƒ¼Ü: %s\n", 
s
.
ToSŒšg
().
c_¡r
());

822 
	g¡d
::
ex™
(1);

826 
O³nB’ch
(
Th»adS‹
* 
th»ad
) {

827 
	gi
 = 0; i < 
	gnum_
; i++) {

828 
d–‘e
 
	gdb_
;

829 
O³n
();

830 
	gth»ad
->
	g¡©s
.
FšishedSšgËOp
();

834 
Wr™eSeq
(
Th»adS‹
* 
th»ad
è{ 
DoWr™e
Ñh»ad, 
Œue
); }

836 
Wr™eRªdom
(
Th»adS‹
* 
th»ad
è{ 
DoWr™e
Ñh»ad, 
çl£
); }

838 
DoWr™e
(
Th»adS‹
* 
th»ad
, 
boŞ
 
£q
) {

839 ià(
	gnum_
 !ğ
FLAGS_num
) {

840 
msg
[100];

841 
	g¡d
::
¢´štf
(
msg
, (msg), "(%d ops)", 
num_
);

842 
	gth»ad
->
	g¡©s
.
AddMes§ge
(
msg
);

845 
RªdomG’”©Ü
 
	gg’
;

846 
Wr™eB©ch
 
	gb©ch
;

847 
Stus
 
	gs
;

848 
št64_t
 
	gby‹s
 = 0;

849 
KeyBufãr
 
	gkey
;

850 
	gi
 = 0; i < 
	gnum_
; i +ğ
’Œ›s_³r_b©ch_
) {

851 
b©ch
.
CË¬
();

852 
	gj
 = 0; j < 
	g’Œ›s_³r_b©ch_
; j++) {

853 cÚ¡ 
	gk
 = 
£q
 ? 
i
 + 
j
 : 
th»ad
->
¿nd
.
UnifÜm
(
FLAGS_num
);

854 
	gkey
.
S‘
(
k
);

855 
	gb©ch
.
Put
(
key
.
¦iû
(), 
g’
.
G’”©e
(
v®ue_size_
));

856 
	gby‹s
 +ğ
v®ue_size_
 + 
key
.
¦iû
().
size
();

857 
	gth»ad
->
	g¡©s
.
FšishedSšgËOp
();

859 
	gs
 = 
db_
->
Wr™e
(
wr™e_İtiÚs_
, &
b©ch
);

860 ià(!
	gs
.
ok
()) {

861 
	g¡d
::
årštf
(
¡d”r
, "puˆ”rÜ: %s\n", 
s
.
ToSŒšg
().
c_¡r
());

862 
	g¡d
::
ex™
(1);

865 
	gth»ad
->
	g¡©s
.
AddBy‹s
(
by‹s
);

868 
R—dSequ’tŸl
(
Th»adS‹
* 
th»ad
) {

869 
I‹¿tÜ
* 
	g™”
 = 
db_
->
NewI‹¿tÜ
(
R—dO±iÚs
());

870 
	gi
 = 0;

871 
št64_t
 
	gby‹s
 = 0;

872 
	g™”
->
S“kToFœ¡
(); 
	gi
 < 
	g»ads_
 && i‹r->
V®id
(); i‹r->
Next
()) {

873 
	gby‹s
 +ğ
™”
->
key
().
size
(è+ i‹r->
v®ue
().size();

874 
	gth»ad
->
	g¡©s
.
FšishedSšgËOp
();

875 ++
	gi
;

877 
d–‘e
 
	g™”
;

878 
	gth»ad
->
	g¡©s
.
AddBy‹s
(
by‹s
);

881 
R—dRev”£
(
Th»adS‹
* 
th»ad
) {

882 
I‹¿tÜ
* 
	g™”
 = 
db_
->
NewI‹¿tÜ
(
R—dO±iÚs
());

883 
	gi
 = 0;

884 
št64_t
 
	gby‹s
 = 0;

885 
	g™”
->
S“kToLa¡
(); 
	gi
 < 
	g»ads_
 && i‹r->
V®id
(); i‹r->
P»v
()) {

886 
	gby‹s
 +ğ
™”
->
key
().
size
(è+ i‹r->
v®ue
().size();

887 
	gth»ad
->
	g¡©s
.
FšishedSšgËOp
();

888 ++
	gi
;

890 
d–‘e
 
	g™”
;

891 
	gth»ad
->
	g¡©s
.
AddBy‹s
(
by‹s
);

894 
R—dRªdom
(
Th»adS‹
* 
th»ad
) {

895 
R—dO±iÚs
 
	gİtiÚs
;

896 
	g¡d
::
¡ršg
 
v®ue
;

897 
	gfound
 = 0;

898 
KeyBufãr
 
	gkey
;

899 
	gi
 = 0; i < 
	g»ads_
; i++) {

900 cÚ¡ 
	gk
 = 
th»ad
->
¿nd
.
UnifÜm
(
FLAGS_num
);

901 
	gkey
.
S‘
(
k
);

902 ià(
	gdb_
->
G‘
(
İtiÚs
, 
key
.
¦iû
(), &
v®ue
).
ok
()) {

903 
	gfound
++;

905 
	gth»ad
->
	g¡©s
.
FšishedSšgËOp
();

907 
	gmsg
[100];

908 
	g¡d
::
¢´štf
(
msg
, (msg), "(%d oà%d found)", 
found
, 
num_
);

909 
	gth»ad
->
	g¡©s
.
AddMes§ge
(
msg
);

912 
R—dMissšg
(
Th»adS‹
* 
th»ad
) {

913 
R—dO±iÚs
 
	gİtiÚs
;

914 
	g¡d
::
¡ršg
 
v®ue
;

915 
KeyBufãr
 
	gkey
;

916 
	gi
 = 0; i < 
	g»ads_
; i++) {

917 cÚ¡ 
	gk
 = 
th»ad
->
¿nd
.
UnifÜm
(
FLAGS_num
);

918 
	gkey
.
S‘
(
k
);

919 
Sliû
 
	gs
 = Sliû(
key
.
¦iû
().
d©a
(), key.¦iû().
size
() - 1);

920 
	gdb_
->
G‘
(
İtiÚs
, 
s
, &
v®ue
);

921 
	gth»ad
->
	g¡©s
.
FšishedSšgËOp
();

925 
R—dHÙ
(
Th»adS‹
* 
th»ad
) {

926 
R—dO±iÚs
 
	gİtiÚs
;

927 
	g¡d
::
¡ršg
 
v®ue
;

928 cÚ¡ 
	g¿nge
 = (
FLAGS_num
 + 99) / 100;

929 
KeyBufãr
 
	gkey
;

930 
	gi
 = 0; i < 
	g»ads_
; i++) {

931 cÚ¡ 
	gk
 = 
th»ad
->
¿nd
.
UnifÜm
(
¿nge
);

932 
	gkey
.
S‘
(
k
);

933 
	gdb_
->
G‘
(
İtiÚs
, 
key
.
¦iû
(), &
v®ue
);

934 
	gth»ad
->
	g¡©s
.
FšishedSšgËOp
();

938 
S“kRªdom
(
Th»adS‹
* 
th»ad
) {

939 
R—dO±iÚs
 
	gİtiÚs
;

940 
	gfound
 = 0;

941 
KeyBufãr
 
	gkey
;

942 
	gi
 = 0; i < 
	g»ads_
; i++) {

943 
I‹¿tÜ
* 
	g™”
 = 
db_
->
NewI‹¿tÜ
(
İtiÚs
);

944 cÚ¡ 
	gk
 = 
th»ad
->
¿nd
.
UnifÜm
(
FLAGS_num
);

945 
	gkey
.
S‘
(
k
);

946 
	g™”
->
S“k
(
key
.
¦iû
());

947 ià(
	g™”
->
V®id
(è&& i‹r->
key
(è=ğkey.
¦iû
()è
found
++;

948 
d–‘e
 
	g™”
;

949 
	gth»ad
->
	g¡©s
.
FšishedSšgËOp
();

951 
	gmsg
[100];

952 
¢´štf
(
msg
, (msg), "(%d oà%d found)", 
found
, 
num_
);

953 
	gth»ad
->
	g¡©s
.
AddMes§ge
(
msg
);

956 
S“kOrd”ed
(
Th»adS‹
* 
th»ad
) {

957 
R—dO±iÚs
 
	gİtiÚs
;

958 
I‹¿tÜ
* 
	g™”
 = 
db_
->
NewI‹¿tÜ
(
İtiÚs
);

959 
	gfound
 = 0;

960 
	gk
 = 0;

961 
KeyBufãr
 
	gkey
;

962 
	gi
 = 0; i < 
	g»ads_
; i++) {

963 
	gk
 = (
k
 + (
th»ad
->
¿nd
.
UnifÜm
(100))è% 
FLAGS_num
;

964 
	gkey
.
S‘
(
k
);

965 
	g™”
->
S“k
(
key
.
¦iû
());

966 ià(
	g™”
->
V®id
(è&& i‹r->
key
(è=ğkey.
¦iû
()è
found
++;

967 
	gth»ad
->
	g¡©s
.
FšishedSšgËOp
();

969 
d–‘e
 
	g™”
;

970 
	gmsg
[100];

971 
	g¡d
::
¢´štf
(
msg
, (msg), "(%d oà%d found)", 
found
, 
num_
);

972 
	gth»ad
->
	g¡©s
.
AddMes§ge
(
msg
);

975 
DoD–‘e
(
Th»adS‹
* 
th»ad
, 
boŞ
 
£q
) {

976 
RªdomG’”©Ü
 
	gg’
;

977 
Wr™eB©ch
 
	gb©ch
;

978 
Stus
 
	gs
;

979 
KeyBufãr
 
	gkey
;

980 
	gi
 = 0; i < 
	gnum_
; i +ğ
’Œ›s_³r_b©ch_
) {

981 
b©ch
.
CË¬
();

982 
	gj
 = 0; j < 
	g’Œ›s_³r_b©ch_
; j++) {

983 cÚ¡ 
	gk
 = 
£q
 ? 
i
 + 
j
 : (
th»ad
->
¿nd
.
UnifÜm
(
FLAGS_num
));

984 
	gkey
.
S‘
(
k
);

985 
	gb©ch
.
D–‘e
(
key
.
¦iû
());

986 
	gth»ad
->
	g¡©s
.
FšishedSšgËOp
();

988 
	gs
 = 
db_
->
Wr™e
(
wr™e_İtiÚs_
, &
b©ch
);

989 ià(!
	gs
.
ok
()) {

990 
	g¡d
::
årštf
(
¡d”r
, "d–ƒ¼Ü: %s\n", 
s
.
ToSŒšg
().
c_¡r
());

991 
	g¡d
::
ex™
(1);

996 
D–‘eSeq
(
Th»adS‹
* 
th»ad
è{ 
DoD–‘e
Ñh»ad, 
Œue
); }

998 
D–‘eRªdom
(
Th»adS‹
* 
th»ad
è{ 
DoD–‘e
Ñh»ad, 
çl£
); }

1000 
R—dWheWr™šg
(
Th»adS‹
* 
th»ad
) {

1001 ià(
	gth»ad
->
	gtid
 > 0) {

1002 
R—dRªdom
(
th»ad
);

1005 
RªdomG’”©Ü
 
	gg’
;

1006 
KeyBufãr
 
	gkey
;

1007 
	gŒue
) {

1009 
Mu‹xLock
 
l
(&
th»ad
->
sh¬ed
->
mu
);

1010 ià(
	gth»ad
->
	gsh¬ed
->
	gnum_dÚe
 + 1 >ğ
th»ad
->
sh¬ed
->
num_š™Ÿlized
) {

1016 cÚ¡ 
	gk
 = 
th»ad
->
¿nd
.
UnifÜm
(
FLAGS_num
);

1017 
	gkey
.
S‘
(
k
);

1018 
Stus
 
	gs
 =

1019 
db_
->
Put
(
wr™e_İtiÚs_
, 
key
.
¦iû
(), 
g’
.
G’”©e
(
v®ue_size_
));

1020 ià(!
	gs
.
ok
()) {

1021 
	g¡d
::
årštf
(
¡d”r
, "puˆ”rÜ: %s\n", 
s
.
ToSŒšg
().
c_¡r
());

1022 
	g¡d
::
ex™
(1);

1027 
	gth»ad
->
	g¡©s
.
S¹
();

1031 
Com·ù
(
Th»adS‹
* 
th»ad
è{ 
	gdb_
->
Com·ùRªge
(
nuÎ±r
,‚ullptr); }

1033 
PrštSts
(cÚ¡ * 
key
) {

1034 
	g¡d
::
¡ršg
 
¡©s
;

1035 ià(!
	gdb_
->
G‘Prİ”ty
(
key
, &
¡©s
)) {

1036 
	g¡©s
 = "(failed)";

1038 
	g¡d
::
årštf
(
¡dout
, "\n%s\n", 
¡©s
.
c_¡r
());

1041 
Wr™eToFe
(* 
¬g
, cÚ¡ * 
buf
, 
n
) {

1042 
	g»š‹½»t_ÿ¡
<
	gWr™abËFe
*>(
	g¬g
)->
Aµ’d
(
Sliû
(
buf
, 
n
));

1045 
H—pProfe
() {

1046 
	gâame
[100];

1047 
	g¡d
::
¢´štf
(
âame
, (âame), "%s/h—p-%04d", 
FLAGS_db
,

1048 ++
h—p_couÁ”_
);

1049 
Wr™abËFe
* 
	gfe
;

1050 
Stus
 
	gs
 = 
g_’v
->
NewWr™abËFe
(
âame
, &
fe
);

1051 ià(!
	gs
.
ok
()) {

1052 
	g¡d
::
årštf
(
¡d”r
, "%s\n", 
s
.
ToSŒšg
().
c_¡r
());

1055 
boŞ
 
	gok
 = 
pÜt
::
G‘H—pProfe
(
Wr™eToFe
, 
fe
);

1056 
d–‘e
 
	gfe
;

1057 ià(!
	gok
) {

1058 
	g¡d
::
årštf
(
¡d”r
, "heap…rofiling‚ot supported\n");

1059 
	gg_’v
->
RemoveFe
(
âame
);

1066 
	$maš
(
¬gc
, ** 
¬gv
) {

1067 
FLAGS_wr™e_bufãr_size
 = 
Ëv–db
::
	`O±iÚs
().
wr™e_bufãr_size
;

1068 
FLAGS_max_fe_size
 = 
Ëv–db
::
	`O±iÚs
().
max_fe_size
;

1069 
FLAGS_block_size
 = 
Ëv–db
::
	`O±iÚs
().
block_size
;

1070 
FLAGS_İ’_fes
 = 
Ëv–db
::
	`O±iÚs
().
max_İ’_fes
;

1071 
¡d
::
¡ršg
 
deçuÉ_db_·th
;

1073 
i
 = 1; i < 
¬gc
; i++) {

1074 
d
;

1075 
n
;

1076 
junk
;

1077 ià(
Ëv–db
::
	`Sliû
(
¬gv
[
i
]).
	`¡¬ts_w™h
("--benchmarks=")) {

1078 
FLAGS_b’chm¬ks
 = 
¬gv
[
i
] + 
	`¡¾’
("--benchmarks=");

1079 } ià(
	`ssÿnf
(
¬gv
[
i
], "--com´essiÚ_¿tio=%lf%c", &
d
, &
junk
) == 1) {

1080 
FLAGS_com´essiÚ_¿tio
 = 
d
;

1081 } ià(
	`ssÿnf
(
¬gv
[
i
], "--hi¡og¿m=%d%c", &
n
, &
junk
) == 1 &&

1082 (
n
 == 0 ||‚ == 1)) {

1083 
FLAGS_hi¡og¿m
 = 
n
;

1084 } ià(
	`ssÿnf
(
¬gv
[
i
], "--com·risÚs=%d%c", &
n
, &
junk
) == 1 &&

1085 (
n
 == 0 ||‚ == 1)) {

1086 
FLAGS_com·risÚs
 = 
n
;

1087 } ià(
	`ssÿnf
(
¬gv
[
i
], "--u£_exi¡šg_db=%d%c", &
n
, &
junk
) == 1 &&

1088 (
n
 == 0 ||‚ == 1)) {

1089 
FLAGS_u£_exi¡šg_db
 = 
n
;

1090 } ià(
	`ssÿnf
(
¬gv
[
i
], "--»u£_logs=%d%c", &
n
, &
junk
) == 1 &&

1091 (
n
 == 0 ||‚ == 1)) {

1092 
FLAGS_»u£_logs
 = 
n
;

1093 } ià(
	`ssÿnf
(
¬gv
[
i
], "--com´essiÚ=%d%c", &
n
, &
junk
) == 1 &&

1094 (
n
 == 0 ||‚ == 1)) {

1095 
FLAGS_com´essiÚ
 = 
n
;

1096 } ià(
	`ssÿnf
(
¬gv
[
i
], "--num=%d%c", &
n
, &
junk
) == 1) {

1097 
FLAGS_num
 = 
n
;

1098 } ià(
	`ssÿnf
(
¬gv
[
i
], "--»ads=%d%c", &
n
, &
junk
) == 1) {

1099 
FLAGS_»ads
 = 
n
;

1100 } ià(
	`ssÿnf
(
¬gv
[
i
], "--th»ads=%d%c", &
n
, &
junk
) == 1) {

1101 
FLAGS_th»ads
 = 
n
;

1102 } ià(
	`ssÿnf
(
¬gv
[
i
], "--v®ue_size=%d%c", &
n
, &
junk
) == 1) {

1103 
FLAGS_v®ue_size
 = 
n
;

1104 } ià(
	`ssÿnf
(
¬gv
[
i
], "--wr™e_bufãr_size=%d%c", &
n
, &
junk
) == 1) {

1105 
FLAGS_wr™e_bufãr_size
 = 
n
;

1106 } ià(
	`ssÿnf
(
¬gv
[
i
], "--max_fe_size=%d%c", &
n
, &
junk
) == 1) {

1107 
FLAGS_max_fe_size
 = 
n
;

1108 } ià(
	`ssÿnf
(
¬gv
[
i
], "--block_size=%d%c", &
n
, &
junk
) == 1) {

1109 
FLAGS_block_size
 = 
n
;

1110 } ià(
	`ssÿnf
(
¬gv
[
i
], "--key_´efix=%d%c", &
n
, &
junk
) == 1) {

1111 
FLAGS_key_´efix
 = 
n
;

1112 } ià(
	`ssÿnf
(
¬gv
[
i
], "--ÿche_size=%d%c", &
n
, &
junk
) == 1) {

1113 
FLAGS_ÿche_size
 = 
n
;

1114 } ià(
	`ssÿnf
(
¬gv
[
i
], "--bloom_b™s=%d%c", &
n
, &
junk
) == 1) {

1115 
FLAGS_bloom_b™s
 = 
n
;

1116 } ià(
	`ssÿnf
(
¬gv
[
i
], "--İ’_fes=%d%c", &
n
, &
junk
) == 1) {

1117 
FLAGS_İ’_fes
 = 
n
;

1118 } ià(
	`¡ºcmp
(
¬gv
[
i
], "--db=", 5) == 0) {

1119 
FLAGS_db
 = 
¬gv
[
i
] + 5;

1121 
¡d
::
	`årštf
(
¡d”r
, "Inv®id fÏg '%s'\n", 
¬gv
[
i
]);

1122 
¡d
::
	`ex™
(1);

1126 
Ëv–db
::
g_’v
 =†ev–db::
Env
::
	`DeçuÉ
();

1129 ià(
FLAGS_db
 =ğ
nuÎ±r
) {

1130 
Ëv–db
::
g_’v
->
	`G‘Te¡DœeùÜy
(&
deçuÉ_db_·th
);

1131 
deçuÉ_db_·th
 += "/dbbench";

1132 
FLAGS_db
 = 
deçuÉ_db_·th
.
	`c_¡r
();

1135 
Ëv–db
::
B’chm¬k
 
b’chm¬k
;

1136 
b’chm¬k
.
	`Run
();

1138 
	}
}

	@benchmarks/db_bench_log.cc

5 
	~<cš‰y³s
>

6 
	~<c¡dio
>

7 
	~<¡ršg
>

9 
	~"g‹¡/g‹¡.h
"

10 
	~"b’chm¬k/b’chm¬k.h
"

11 
	~"db/v”siÚ_£t.h
"

12 
	~"Ëv–db/com·¿tÜ.h
"

13 
	~"Ëv–db/db.h
"

14 
	~"Ëv–db/’v.h
"

15 
	~"Ëv–db/İtiÚs.h
"

16 
	~"pÜt/pÜt.h
"

17 
	~"ut/mu‹xlock.h
"

18 
	~"ut/‹¡ut.h
"

20 
Çme¥aû
 
	gËv–db
 {

22 
	gÇme¥aû
 {

24 
	g¡d
::
¡ršg
 
MakeKey
(
num
) {

25 
buf
[30];

26 
	g¡d
::
¢´štf
(
buf
, (buf), "%016u", 
num
);

27  
	g¡d
::
¡ršg
(
buf
);

30 
BM_LogAndAµly
(
b’chm¬k
::
S‹
& 
¡©e
) {

31 cÚ¡ 
num_ba£_fes
 = 
¡©e
.
¿nge
(0);

33 
	g¡d
::
¡ršg
 
dbÇme
 = 
‹¡šg
::
TempDœ
() + "leveldb_test_benchmark";

34 
De¡royDB
(
dbÇme
, 
O±iÚs
());

36 
DB
* 
	gdb
 = 
nuÎ±r
;

37 
O±iÚs
 
	gİts
;

38 
	gİts
.
	gü—‹_if_missšg
 = 
Œue
;

39 
Stus
 
	gs
 = 
DB
::
O³n
(
İts
, 
dbÇme
, &
db
);

40 
ASSERT_LEVELDB_OK
(
s
);

41 
ASSERT_TRUE
(
db
 !ğ
nuÎ±r
);

43 
d–‘e
 
	gdb
;

44 
	gdb
 = 
nuÎ±r
;

46 
Env
* 
	g’v
 = Env::
DeçuÉ
();

48 
	gpÜt
::
Mu‹x
 
mu
;

49 
Mu‹xLock
 
l
(&
mu
);

51 
IÁ”ÇlKeyCom·¿tÜ
 
cmp
(
By‹wi£Com·¿tÜ
());

52 
O±iÚs
 
	gİtiÚs
;

53 
V”siÚS‘
 
v£t
(
dbÇme
, &
İtiÚs
, 
nuÎ±r
, &
cmp
);

54 
boŞ
 
	g§ve_mªiã¡
;

55 
ASSERT_LEVELDB_OK
(
v£t
.
Recov”
(&
§ve_mªiã¡
));

56 
V”siÚEd™
 
	gvba£
;

57 
ušt64_t
 
	gâum
 = 1;

58 
	gi
 = 0; i < 
	gnum_ba£_fes
; i++) {

59 
IÁ”ÇlKey
 
¡¬t
(
MakeKey
(2 * 
âum
), 1, 
kTy³V®ue
);

60 
IÁ”ÇlKey
 
lim™
(
MakeKey
(2 * 
âum
 + 1), 1, 
kTy³D–‘iÚ
);

61 
	gvba£
.
AddFe
(2, 
âum
++, 1 , 
¡¬t
, 
lim™
);

63 
ASSERT_LEVELDB_OK
(
v£t
.
LogAndAµly
(&
vba£
, &
mu
));

65 
ušt64_t
 
	g¡¬t_miüos
 = 
’v
->
NowMiüos
();

67 autØ
	g¡
 : 
¡©e
) {

68 
V”siÚEd™
 
ved™
;

69 
	gved™
.
RemoveFe
(2, 
âum
);

70 
IÁ”ÇlKey
 
¡¬t
(
MakeKey
(2 * 
âum
), 1, 
kTy³V®ue
);

71 
IÁ”ÇlKey
 
lim™
(
MakeKey
(2 * 
âum
 + 1), 1, 
kTy³D–‘iÚ
);

72 
	gved™
.
AddFe
(2, 
âum
++, 1 , 
¡¬t
, 
lim™
);

73 
	gv£t
.
LogAndAµly
(&
ved™
, &
mu
);

76 
ušt64_t
 
	g¡İ_miüos
 = 
’v
->
NowMiüos
();

77 
	gus
 = 
¡İ_miüos
 - 
¡¬t_miüos
;

78 
	gbuf
[16];

79 
	g¡d
::
¢´štf
(
buf
, (buf), "%d", 
num_ba£_fes
);

80 
	g¡d
::
årštf
(
¡d”r
,

81 "BM_LogAndAµly/%-6  %8" 
PRIu64


83 
buf
, 
¡©e
.
™”©iÚs
(), 
us
, (()us) / state.iterations());

86 
BENCHMARK
(
BM_LogAndAµly
)->
Arg
(1)->Arg(100)->Arg(10000)->Arg(100000);

92 
BENCHMARK_MAIN
();

	@benchmarks/db_bench_sqlite3.cc

5 
	~<sql™e3.h
>

7 
	~<c¡dio
>

8 
	~<c¡dlib
>

10 
	~"ut/hi¡og¿m.h
"

11 
	~"ut/¿ndom.h
"

12 
	~"ut/‹¡ut.h
"

29 cÚ¡ * 
	gFLAGS_b’chm¬ks
 =

46 
	gFLAGS_num
 = 1000000;

49 
	gFLAGS_»ads
 = -1;

52 
	gFLAGS_v®ue_size
 = 100;

55 
boŞ
 
	gFLAGS_hi¡og¿m
 = 
çl£
;

59 
	gFLAGS_com´essiÚ_¿tio
 = 0.5;

62 
	gFLAGS_·ge_size
 = 1024;

66 
	gFLAGS_num_·ges
 = 4096;

71 
boŞ
 
	gFLAGS_u£_exi¡šg_db
 = 
çl£
;

74 
boŞ
 
	gFLAGS_u£_rowids
 = 
çl£
;

77 
boŞ
 
	gFLAGS_Œª§ùiÚ
 = 
Œue
;

80 
boŞ
 
	gFLAGS_WAL_’abËd
 = 
Œue
;

83 cÚ¡ * 
	gFLAGS_db
 = 
nuÎ±r
;

85 
šlše
 
	$ExecE¼ÜCheck
(
¡©us
, * 
”r_msg
) {

86 ià(
¡©us
 !ğ
SQLITE_OK
) {

87 
¡d
::
	`årštf
(
¡d”r
, "SQLƒ¼Ü: %s\n", 
”r_msg
);

88 
	`sql™e3_ä“
(
”r_msg
);

89 
¡d
::
	`ex™
(1);

91 
	}
}

93 
šlše
 
	$S‹pE¼ÜCheck
(
¡©us
) {

94 ià(
¡©us
 !ğ
SQLITE_DONE
) {

95 
¡d
::
	`årštf
(
¡d”r
, "SQL s‹°”rÜ: stu ğ%d\n", 
¡©us
);

96 
¡d
::
	`ex™
(1);

98 
	}
}

100 
šlše
 
	$E¼ÜCheck
(
¡©us
) {

101 ià(
¡©us
 !ğ
SQLITE_OK
) {

102 
¡d
::
	`årštf
(
¡d”r
, "sql™e3ƒ¼Ü: stu ğ%d\n", 
¡©us
);

103 
¡d
::
	`ex™
(1);

105 
	}
}

107 
šlše
 
	$W®Checkpošt
(
sql™e3
* 
db_
) {

109 ià(
FLAGS_WAL_’abËd
) {

110 
	`sql™e3_w®_checkpošt_v2
(
db_
, 
nuÎ±r
, 
SQLITE_CHECKPOINT_FULL
,‚ullptr,

111 
nuÎ±r
);

113 
	}
}

115 
Çme¥aû
 
	gËv–db
 {

118 
	gÇme¥aû
 {

119 şas 
	cRªdomG’”©Ü
 {

120 
	g´iv©e
:

121 
¡d
::
¡ršg
 
d©a_
;

122 
	gpos_
;

124 
	gpublic
:

125 
RªdomG’”©Ü
() {

129 
Rªdom
 
ºd
(301);

130 
	g¡d
::
¡ršg
 
p›û
;

131 
	gd©a_
.
size
() < 1048576) {

134 
	g‹¡
::
Com´essibËSŒšg
(&
ºd
, 
FLAGS_com´essiÚ_¿tio
, 100, &
p›û
);

135 
	gd©a_
.
­³nd
(
p›û
);

137 
	gpos_
 = 0;

140 
Sliû
 
G’”©e
(
Ën
) {

141 ià(
	gpos_
 + 
	gËn
 > 
	gd©a_
.
size
()) {

142 
	gpos_
 = 0;

143 
as£¹
(
Ën
 < 
d©a_
.
size
());

145 
	gpos_
 +ğ
Ën
;

146  
Sliû
(
d©a_
.
d©a
(è+ 
pos_
 - 
Ën
,†en);

150 
Sliû
 
TrimS·û
(Sliû 
s
) {

151 
	g¡¬t
 = 0;

152 
	g¡¬t
 < 
	gs
.
size
(è&& 
is¥aû
(
s
[
¡¬t
])) {

153 
	g¡¬t
++;

155 
	glim™
 = 
s
.
size
();

156 
	glim™
 > 
	g¡¬t
 && 
is¥aû
(
s
[
lim™
 - 1])) {

157 
	glim™
--;

159  
Sliû
(
s
.
d©a
(è+ 
¡¬t
, 
lim™
 - start);

164 şas 
	cB’chm¬k
 {

165 
	g´iv©e
:

166 
sql™e3
* 
db_
;

167 
	gdb_num_
;

168 
	gnum_
;

169 
	g»ads_
;

170 
	g¡¬t_
;

171 
	gÏ¡_İ_fšish_
;

172 
št64_t
 
	gby‹s_
;

173 
	g¡d
::
¡ršg
 
mes§ge_
;

174 
Hi¡og¿m
 
	ghi¡_
;

175 
RªdomG’”©Ü
 
	gg’_
;

176 
Rªdom
 
	g¿nd_
;

179 
	gdÚe_
;

180 
	gÃxt_»pÜt_
;

182 
PrštH—d”
() {

183 cÚ¡ 
	gkKeySize
 = 16;

184 
PrštEnvœÚm’t
();

185 
	g¡d
::
årštf
(
¡dout
, "Keys: %d by‹ —ch\n", 
kKeySize
);

186 
	g¡d
::
årštf
(
¡dout
, "V®ues: %d by‹ —ch\n", 
FLAGS_v®ue_size
);

187 
	g¡d
::
årštf
(
¡dout
, "EÁr›s: %d\n", 
num_
);

188 
	g¡d
::
årštf
(
¡dout
, "RawSize: %.1f MB (estimated)\n",

189 ((
¡©ic_ÿ¡
<
št64_t
>(
kKeySize
 + 
FLAGS_v®ue_size
è* 
num_
) /

191 
PrštW¬nšgs
();

192 
	g¡d
::
årštf
(
¡dout
, "------------------------------------------------\n");

195 
PrštW¬nšgs
() {

196 #ià
defšed
(
__GNUC__
è&& !defšed(
__OPTIMIZE__
)

197 
	g¡d
::
årštf
(

198 
¡dout
,

201 #iâdeà
NDEBUG


202 
	g¡d
::
årštf
(

203 
¡dout
,

208 
PrštEnvœÚm’t
() {

209 
	g¡d
::
årštf
(
¡d”r
, "SQL™e: v”siÚ %s\n", 
SQLITE_VERSION
);

211 #ià
defšed
(
__lšux
)

212 
time_t
 
	gnow
 = 
time
(
nuÎ±r
);

213 
	g¡d
::
årštf
(
¡d”r
, "Date: %s",

214 
ùime
(&
now
));

216 
FILE
* 
	gıušfo
 = 
¡d
::
fİ’
("/proc/cpuinfo", "r");

217 ià(
	gıušfo
 !ğ
nuÎ±r
) {

218 
lše
[1000];

219 
	gnum_ıus
 = 0;

220 
	g¡d
::
¡ršg
 
ıu_ty³
;

221 
	g¡d
::
¡ršg
 
ÿche_size
;

222 
fg‘s
(
lše
, Öše), 
ıušfo
è!ğ
nuÎ±r
) {

223 cÚ¡ * 
£p
 = 
¡rchr
(
lše
, ':');

224 ià(
	g£p
 =ğ
nuÎ±r
) {

227 
Sliû
 
	gkey
 = 
TrimS·û
(Sliû(
lše
, 
£p
 - 1 -†ine));

228 
Sliû
 
	gv®
 = 
TrimS·û
(Sliû(
£p
 + 1));

229 ià(
	gkey
 == "model‚ame") {

230 ++
num_ıus
;

231 
	gıu_ty³
 = 
v®
.
ToSŒšg
();

232 } ià(
	gkey
 == "cache size") {

233 
ÿche_size
 = 
v®
.
ToSŒšg
();

236 
	g¡d
::
fşo£
(
ıušfo
);

237 
	g¡d
::
årštf
(
¡d”r
, "CPU: %d * %s\n", 
num_ıus
, 
ıu_ty³
.
c_¡r
());

238 
	g¡d
::
årštf
(
¡d”r
, "CPUCache: %s\n", 
ÿche_size
.
c_¡r
());

243 
S¹
() {

244 
	g¡¬t_
 = 
Env
::
DeçuÉ
()->
NowMiüos
() * 1e-6;

245 
	gby‹s_
 = 0;

246 
	gmes§ge_
.
ş—r
();

247 
	gÏ¡_İ_fšish_
 = 
¡¬t_
;

248 
	ghi¡_
.
CË¬
();

249 
	gdÚe_
 = 0;

250 
	gÃxt_»pÜt_
 = 100;

253 
FšishedSšgËOp
() {

254 ià(
	gFLAGS_hi¡og¿m
) {

255 
	gnow
 = 
Env
::
DeçuÉ
()->
NowMiüos
() * 1e-6;

256 
	gmiüos
 = (
now
 - 
Ï¡_İ_fšish_
) * 1e6;

257 
	ghi¡_
.
Add
(
miüos
);

258 ià(
	gmiüos
 > 20000) {

259 
	g¡d
::
årštf
(
¡d”r
, "lÚg op: %.1àmiüos%30s\r", 
miüos
, "");

260 
	g¡d
::
fæush
(
¡d”r
);

262 
	gÏ¡_İ_fšish_
 = 
now
;

265 
	gdÚe_
++;

266 ià(
	gdÚe_
 >ğ
Ãxt_»pÜt_
) {

267 ià(
Ãxt_»pÜt_
 < 1000)

268 
Ãxt_»pÜt_
 += 100;

269 ià(
	gÃxt_»pÜt_
 < 5000)

270 
	gÃxt_»pÜt_
 += 500;

271 ià(
	gÃxt_»pÜt_
 < 10000)

272 
	gÃxt_»pÜt_
 += 1000;

273 ià(
	gÃxt_»pÜt_
 < 50000)

274 
	gÃxt_»pÜt_
 += 5000;

275 ià(
	gÃxt_»pÜt_
 < 100000)

276 
	gÃxt_»pÜt_
 += 10000;

277 ià(
	gÃxt_»pÜt_
 < 500000)

278 
	gÃxt_»pÜt_
 += 50000;

280 
	gÃxt_»pÜt_
 += 100000;

281 
	g¡d
::
årštf
(
¡d”r
, "... fšished %d ops%30s\r", 
dÚe_
, "");

282 
	g¡d
::
fæush
(
¡d”r
);

286 
Stİ
(cÚ¡ 
Sliû
& 
Çme
) {

287 
	gfšish
 = 
Env
::
DeçuÉ
()->
NowMiüos
() * 1e-6;

291 ià(
	gdÚe_
 < 1) done_ = 1;

293 ià(
	gby‹s_
 > 0) {

294 
	g¿‹
[100];

295 
	g¡d
::
¢´štf
(
¿‹
, (rate), "%6.1f MB/s",

296 (
by‹s_
 / 1048576.0è/ (
fšish
 - 
¡¬t_
));

297 ià(!
	gmes§ge_
.
em±y
()) {

298 
	gmes§ge_
 = 
¡d
::
¡ršg
(
¿‹
è+ " " + 
mes§ge_
;

300 
	gmes§ge_
 = 
¿‹
;

304 
	g¡d
::
årštf
(
¡dout
, "%-12s : %11.3f micros/op;%s%s\n",

305 
Çme
.
ToSŒšg
().
c_¡r
(), (
fšish
 - 
¡¬t_
è* 1e6 / 
dÚe_
,

306 (
mes§ge_
.
em±y
(è? "" : " "), mes§ge_.
c_¡r
());

307 ià(
	gFLAGS_hi¡og¿m
) {

308 
	g¡d
::
årštf
(
¡dout
, "Microseconds…er op:\n%s\n",

309 
hi¡_
.
ToSŒšg
().
c_¡r
());

311 
	g¡d
::
fæush
(
¡dout
);

314 
	gpublic
:

315 
	eOrd”
 { 
SEQUENTIAL
, 
	gRANDOM
 };

316 
	eDBS‹
 { 
	gFRESH
, 
	gEXISTING
 };

318 
B’chm¬k
()

319 : 
db_
(
nuÎ±r
),

320 
db_num_
(0),

321 
num_
(
FLAGS_num
),

322 
»ads_
(
FLAGS_»ads
 < 0 ? 
FLAGS_num
 : FLAGS_reads),

323 
by‹s_
(0),

324 
¿nd_
(301) {

325 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> 
fes
;

326 
	g¡d
::
¡ršg
 
‹¡_dœ
;

327 
	gEnv
::
DeçuÉ
()->
G‘Te¡DœeùÜy
(&
‹¡_dœ
);

328 
	gEnv
::
DeçuÉ
()->
G‘Chd»n
(
‹¡_dœ
, &
fes
);

329 ià(!
	gFLAGS_u£_exi¡šg_db
) {

330 
	gi
 = 0; i < 
	gfes
.
size
(); i++) {

331 ià(
Sliû
(
fes
[
i
]).
¡¬ts_w™h
("dbbench_sqlite3")) {

332 
	g¡d
::
¡ršg
 
fe_Çme
(
‹¡_dœ
);

333 
	gfe_Çme
 += "/";

334 
	gfe_Çme
 +ğ
fes
[
i
];

335 
	gEnv
::
DeçuÉ
()->
RemoveFe
(
fe_Çme
.
c_¡r
());

341 ~
B’chm¬k
() {

342 
	g¡©us
 = 
sql™e3_şo£
(
db_
);

343 
E¼ÜCheck
(
¡©us
);

346 
Run
() {

347 
PrštH—d”
();

348 
O³n
();

350 cÚ¡ * 
	gb’chm¬ks
 = 
FLAGS_b’chm¬ks
;

351 
	gb’chm¬ks
 !ğ
nuÎ±r
) {

352 cÚ¡ * 
£p
 = 
¡rchr
(
b’chm¬ks
, ',');

353 
Sliû
 
	gÇme
;

354 ià(
	g£p
 =ğ
nuÎ±r
) {

355 
Çme
 = 
b’chm¬ks
;

356 
	gb’chm¬ks
 = 
nuÎ±r
;

358 
	gÇme
 = 
Sliû
(
b’chm¬ks
, 
£p
 - benchmarks);

359 
	gb’chm¬ks
 = 
£p
 + 1;

362 
	gby‹s_
 = 0;

363 
S¹
();

365 
boŞ
 
	gknown
 = 
Œue
;

366 
boŞ
 
	gwr™e_sync
 = 
çl£
;

367 ià(
	gÇme
 =ğ
Sliû
("fillseq")) {

368 
Wr™e
(
wr™e_sync
, 
SEQUENTIAL
, 
FRESH
, 
num_
, 
FLAGS_v®ue_size
, 1);

369 
W®Checkpošt
(
db_
);

370 } ià(
	gÇme
 =ğ
Sliû
("fillseqbatch")) {

371 
Wr™e
(
wr™e_sync
, 
SEQUENTIAL
, 
FRESH
, 
num_
, 
FLAGS_v®ue_size
, 1000);

372 
W®Checkpošt
(
db_
);

373 } ià(
	gÇme
 =ğ
Sliû
("fillrandom")) {

374 
Wr™e
(
wr™e_sync
, 
RANDOM
, 
FRESH
, 
num_
, 
FLAGS_v®ue_size
, 1);

375 
W®Checkpošt
(
db_
);

376 } ià(
	gÇme
 =ğ
Sliû
("fillrandbatch")) {

377 
Wr™e
(
wr™e_sync
, 
RANDOM
, 
FRESH
, 
num_
, 
FLAGS_v®ue_size
, 1000);

378 
W®Checkpošt
(
db_
);

379 } ià(
	gÇme
 =ğ
Sliû
("overwrite")) {

380 
Wr™e
(
wr™e_sync
, 
RANDOM
, 
EXISTING
, 
num_
, 
FLAGS_v®ue_size
, 1);

381 
W®Checkpošt
(
db_
);

382 } ià(
	gÇme
 =ğ
Sliû
("overwritebatch")) {

383 
Wr™e
(
wr™e_sync
, 
RANDOM
, 
EXISTING
, 
num_
, 
FLAGS_v®ue_size
, 1000);

384 
W®Checkpošt
(
db_
);

385 } ià(
	gÇme
 =ğ
Sliû
("fillrandsync")) {

386 
wr™e_sync
 = 
Œue
;

387 
Wr™e
(
wr™e_sync
, 
RANDOM
, 
FRESH
, 
num_
 / 100, 
FLAGS_v®ue_size
, 1);

388 
W®Checkpošt
(
db_
);

389 } ià(
	gÇme
 =ğ
Sliû
("fillseqsync")) {

390 
wr™e_sync
 = 
Œue
;

391 
Wr™e
(
wr™e_sync
, 
SEQUENTIAL
, 
FRESH
, 
num_
 / 100, 
FLAGS_v®ue_size
, 1);

392 
W®Checkpošt
(
db_
);

393 } ià(
	gÇme
 =ğ
Sliû
("fillrand100K")) {

394 
Wr™e
(
wr™e_sync
, 
RANDOM
, 
FRESH
, 
num_
 / 1000, 100 * 1000, 1);

395 
W®Checkpošt
(
db_
);

396 } ià(
	gÇme
 =ğ
Sliû
("fillseq100K")) {

397 
Wr™e
(
wr™e_sync
, 
SEQUENTIAL
, 
FRESH
, 
num_
 / 1000, 100 * 1000, 1);

398 
W®Checkpošt
(
db_
);

399 } ià(
	gÇme
 =ğ
Sliû
("readseq")) {

400 
R—dSequ’tŸl
();

401 } ià(
	gÇme
 =ğ
Sliû
("readrandom")) {

402 
R—d
(
RANDOM
, 1);

403 } ià(
	gÇme
 =ğ
Sliû
("readrand100K")) {

404 
n
 = 
»ads_
;

405 
	g»ads_
 /= 1000;

406 
R—d
(
RANDOM
, 1);

407 
	g»ads_
 = 
n
;

409 
	gknown
 = 
çl£
;

410 ià(
	gÇme
 !ğ
Sliû
()) {

411 
¡d
::
årštf
(
¡d”r
, "unknown benchmark '%s'\n",

412 
Çme
.
ToSŒšg
().
c_¡r
());

415 ià(
	gknown
) {

416 
Stİ
(
Çme
);

421 
O³n
() {

422 
as£¹
(
db_
 =ğ
nuÎ±r
);

424 
	g¡©us
;

425 
	gfe_Çme
[100];

426 * 
	g”r_msg
 = 
nuÎ±r
;

427 
	gdb_num_
++;

430 
	g¡d
::
¡ršg
 
tmp_dœ
;

431 
	gEnv
::
DeçuÉ
()->
G‘Te¡DœeùÜy
(&
tmp_dœ
);

432 
	g¡d
::
¢´štf
(
fe_Çme
, (file_name), "%s/dbbench_sqlite3-%d.db",

433 
tmp_dœ
.
c_¡r
(), 
db_num_
);

434 
	g¡©us
 = 
sql™e3_İ’
(
fe_Çme
, &
db_
);

435 ià(
	g¡©us
) {

436 
	g¡d
::
årštf
(
¡d”r
, "İ’ƒ¼Ü: %s\n", 
sql™e3_”rmsg
(
db_
));

437 
	g¡d
::
ex™
(1);

441 
	gÿche_size
[100];

442 
	g¡d
::
¢´štf
(
ÿche_size
, (cache_size), "PRAGMA cache_size = %d",

443 
FLAGS_num_·ges
);

444 
	g¡©us
 = 
sql™e3_exec
(
db_
, 
ÿche_size
, 
nuÎ±r
,‚uÎ±r, &
”r_msg
);

445 
ExecE¼ÜCheck
(
¡©us
, 
”r_msg
);

448 ià(
	gFLAGS_·ge_size
 != 1024) {

449 
·ge_size
[100];

450 
	g¡d
::
¢´štf
(
·ge_size
, (page_size), "PRAGMA…age_size = %d",

451 
FLAGS_·ge_size
);

452 
	g¡©us
 = 
sql™e3_exec
(
db_
, 
·ge_size
, 
nuÎ±r
,‚uÎ±r, &
”r_msg
);

453 
ExecE¼ÜCheck
(
¡©us
, 
”r_msg
);

457 ià(
	gFLAGS_WAL_’abËd
) {

458 
	g¡d
::
¡ršg
 
WAL_¡mt
 = "PRAGMA journal_mode = WAL";

461 
	g¡d
::
¡ršg
 
WAL_checkpošt
 = "PRAGMA wal_autocheckpoint = 4096";

462 
	g¡©us
 = 
sql™e3_exec
(
db_
, 
WAL_¡mt
.
c_¡r
(), 
nuÎ±r
,‚uÎ±r, &
”r_msg
);

463 
ExecE¼ÜCheck
(
¡©us
, 
”r_msg
);

464 
	g¡©us
 =

465 
sql™e3_exec
(
db_
, 
WAL_checkpošt
.
c_¡r
(), 
nuÎ±r
,‚uÎ±r, &
”r_msg
);

466 
ExecE¼ÜCheck
(
¡©us
, 
”r_msg
);

470 
	g¡d
::
¡ršg
 
lockšg_¡mt
 = "PRAGMA†ocking_mode = EXCLUSIVE";

471 
	g¡d
::
¡ršg
 
ü—‹_¡mt
 =

473 ià(!
	gFLAGS_u£_rowids
è
	gü—‹_¡mt
 += " WITHOUT ROWID";

474 
	g¡d
::
¡ršg
 
¡mt_¬¿y
[] = {
lockšg_¡mt
, 
ü—‹_¡mt
};

475 
	g¡mt_¬¿y_Ëngth
 = (
¡mt_¬¿y
è/ (
¡d
::
¡ršg
);

476 
	gi
 = 0; i < 
	g¡mt_¬¿y_Ëngth
; i++) {

477 
	g¡©us
 =

478 
sql™e3_exec
(
db_
, 
¡mt_¬¿y
[
i
].
c_¡r
(), 
nuÎ±r
,‚uÎ±r, &
”r_msg
);

479 
ExecE¼ÜCheck
(
¡©us
, 
”r_msg
);

483 
Wr™e
(
boŞ
 
wr™e_sync
, 
Ord”
 
Üd”
, 
DBS‹
 
¡©e
, 
num_’Œ›s
,

484 
v®ue_size
, 
’Œ›s_³r_b©ch
) {

486 ià(
	g¡©e
 =ğ
FRESH
) {

487 ià(
FLAGS_u£_exi¡šg_db
) {

488 
mes§ge_
 = "skipping (--use_existing_db isrue)";

491 
sql™e3_şo£
(
db_
);

492 
	gdb_
 = 
nuÎ±r
;

493 
O³n
();

494 
S¹
();

497 ià(
	gnum_’Œ›s
 !ğ
num_
) {

498 
msg
[100];

499 
	g¡d
::
¢´štf
(
msg
, (msg), "(%d ops)", 
num_’Œ›s
);

500 
	gmes§ge_
 = 
msg
;

503 * 
	g”r_msg
 = 
nuÎ±r
;

504 
	g¡©us
;

506 
sql™e3_¡mt
 *
	g»¶aû_¡mt
, *
	gbegš_Œªs_¡mt
, *
	g’d_Œªs_¡mt
;

507 
	g¡d
::
¡ršg
 
»¶aû_¡r
 = "REPLACE INTOest (key, value) VALUES (?, ?)";

508 
	g¡d
::
¡ršg
 
begš_Œªs_¡r
 = "BEGIN TRANSACTION;";

509 
	g¡d
::
¡ršg
 
’d_Œªs_¡r
 = "END TRANSACTION;";

512 
	g¡d
::
¡ršg
 
sync_¡mt
 =

513 (
wr™e_sync
) ? "PRAGMA synchronous = FULL" : "PRAGMA synchronous = OFF";

514 
	g¡©us
 = 
sql™e3_exec
(
db_
, 
sync_¡mt
.
c_¡r
(), 
nuÎ±r
,‚uÎ±r, &
”r_msg
);

515 
ExecE¼ÜCheck
(
¡©us
, 
”r_msg
);

518 
	g¡©us
 = 
sql™e3_´•¬e_v2
(
db_
, 
»¶aû_¡r
.
c_¡r
(), -1, &
»¶aû_¡mt
,

519 
nuÎ±r
);

520 
E¼ÜCheck
(
¡©us
);

521 
	g¡©us
 = 
sql™e3_´•¬e_v2
(
db_
, 
begš_Œªs_¡r
.
c_¡r
(), -1,

522 &
begš_Œªs_¡mt
, 
nuÎ±r
);

523 
E¼ÜCheck
(
¡©us
);

524 
	g¡©us
 = 
sql™e3_´•¬e_v2
(
db_
, 
’d_Œªs_¡r
.
c_¡r
(), -1, &
’d_Œªs_¡mt
,

525 
nuÎ±r
);

526 
E¼ÜCheck
(
¡©us
);

528 
boŞ
 
	gŒª§ùiÚ
 = (
’Œ›s_³r_b©ch
 > 1);

529 
	gi
 = 0; i < 
	gnum_’Œ›s
; i +ğ
’Œ›s_³r_b©ch
) {

531 ià(
FLAGS_Œª§ùiÚ
 && 
Œª§ùiÚ
) {

532 
¡©us
 = 
sql™e3_¡•
(
begš_Œªs_¡mt
);

533 
S‹pE¼ÜCheck
(
¡©us
);

534 
	g¡©us
 = 
sql™e3_»£t
(
begš_Œªs_¡mt
);

535 
E¼ÜCheck
(
¡©us
);

539 
	gj
 = 0; j < 
	g’Œ›s_³r_b©ch
; j++) {

540 cÚ¡ * 
	gv®ue
 = 
g’_
.
G’”©e
(
v®ue_size
).
d©a
();

543 cÚ¡ 
	gk
 =

544 (
Üd”
 =ğ
SEQUENTIAL
è? 
i
 + 
j
 : (
¿nd_
.
Next
(è% 
num_’Œ›s
);

545 
	gkey
[100];

546 
	g¡d
::
¢´štf
(
key
, (key), "%016d", 
k
);

549 
	g¡©us
 = 
sql™e3_bšd_blob
(
»¶aû_¡mt
, 1, 
key
, 16, 
SQLITE_STATIC
);

550 
E¼ÜCheck
(
¡©us
);

551 
	g¡©us
 = 
sql™e3_bšd_blob
(
»¶aû_¡mt
, 2, 
v®ue
, 
v®ue_size
,

552 
SQLITE_STATIC
);

553 
E¼ÜCheck
(
¡©us
);

556 
	gby‹s_
 +ğ
v®ue_size
 + 
¡¾’
(
key
);

557 
	g¡©us
 = 
sql™e3_¡•
(
»¶aû_¡mt
);

558 
S‹pE¼ÜCheck
(
¡©us
);

561 
	g¡©us
 = 
sql™e3_ş—r_bšdšgs
(
»¶aû_¡mt
);

562 
E¼ÜCheck
(
¡©us
);

563 
	g¡©us
 = 
sql™e3_»£t
(
»¶aû_¡mt
);

564 
E¼ÜCheck
(
¡©us
);

566 
FšishedSšgËOp
();

570 ià(
	gFLAGS_Œª§ùiÚ
 && 
	gŒª§ùiÚ
) {

571 
	g¡©us
 = 
sql™e3_¡•
(
’d_Œªs_¡mt
);

572 
S‹pE¼ÜCheck
(
¡©us
);

573 
	g¡©us
 = 
sql™e3_»£t
(
’d_Œªs_¡mt
);

574 
E¼ÜCheck
(
¡©us
);

578 
	g¡©us
 = 
sql™e3_fš®ize
(
»¶aû_¡mt
);

579 
E¼ÜCheck
(
¡©us
);

580 
	g¡©us
 = 
sql™e3_fš®ize
(
begš_Œªs_¡mt
);

581 
E¼ÜCheck
(
¡©us
);

582 
	g¡©us
 = 
sql™e3_fš®ize
(
’d_Œªs_¡mt
);

583 
E¼ÜCheck
(
¡©us
);

586 
R—d
(
Ord”
 
Üd”
, 
’Œ›s_³r_b©ch
) {

587 
	g¡©us
;

588 
sql™e3_¡mt
 *
	g»ad_¡mt
, *
	gbegš_Œªs_¡mt
, *
	g’d_Œªs_¡mt
;

590 
	g¡d
::
¡ršg
 
»ad_¡r
 = "SELECT * FROMest WHERE key = ?";

591 
	g¡d
::
¡ršg
 
begš_Œªs_¡r
 = "BEGIN TRANSACTION;";

592 
	g¡d
::
¡ršg
 
’d_Œªs_¡r
 = "END TRANSACTION;";

595 
	g¡©us
 = 
sql™e3_´•¬e_v2
(
db_
, 
begš_Œªs_¡r
.
c_¡r
(), -1,

596 &
begš_Œªs_¡mt
, 
nuÎ±r
);

597 
E¼ÜCheck
(
¡©us
);

598 
	g¡©us
 = 
sql™e3_´•¬e_v2
(
db_
, 
’d_Œªs_¡r
.
c_¡r
(), -1, &
’d_Œªs_¡mt
,

599 
nuÎ±r
);

600 
E¼ÜCheck
(
¡©us
);

601 
	g¡©us
 = 
sql™e3_´•¬e_v2
(
db_
, 
»ad_¡r
.
c_¡r
(), -1, &
»ad_¡mt
, 
nuÎ±r
);

602 
E¼ÜCheck
(
¡©us
);

604 
boŞ
 
	gŒª§ùiÚ
 = (
’Œ›s_³r_b©ch
 > 1);

605 
	gi
 = 0; i < 
	g»ads_
; i +ğ
’Œ›s_³r_b©ch
) {

607 ià(
FLAGS_Œª§ùiÚ
 && 
Œª§ùiÚ
) {

608 
¡©us
 = 
sql™e3_¡•
(
begš_Œªs_¡mt
);

609 
S‹pE¼ÜCheck
(
¡©us
);

610 
	g¡©us
 = 
sql™e3_»£t
(
begš_Œªs_¡mt
);

611 
E¼ÜCheck
(
¡©us
);

615 
	gj
 = 0; j < 
	g’Œ›s_³r_b©ch
; j++) {

617 
	gkey
[100];

618 
	gk
 = (
Üd”
 =ğ
SEQUENTIAL
è? 
i
 + 
j
 : (
¿nd_
.
Next
(è% 
»ads_
);

619 
	g¡d
::
¢´štf
(
key
, (key), "%016d", 
k
);

622 
	g¡©us
 = 
sql™e3_bšd_blob
(
»ad_¡mt
, 1, 
key
, 16, 
SQLITE_STATIC
);

623 
E¼ÜCheck
(
¡©us
);

626 (
	g¡©us
 = 
sql™e3_¡•
(
»ad_¡mt
)è=ğ
SQLITE_ROW
) {

628 
S‹pE¼ÜCheck
(
¡©us
);

631 
	g¡©us
 = 
sql™e3_ş—r_bšdšgs
(
»ad_¡mt
);

632 
E¼ÜCheck
(
¡©us
);

633 
	g¡©us
 = 
sql™e3_»£t
(
»ad_¡mt
);

634 
E¼ÜCheck
(
¡©us
);

635 
FšishedSšgËOp
();

639 ià(
	gFLAGS_Œª§ùiÚ
 && 
	gŒª§ùiÚ
) {

640 
	g¡©us
 = 
sql™e3_¡•
(
’d_Œªs_¡mt
);

641 
S‹pE¼ÜCheck
(
¡©us
);

642 
	g¡©us
 = 
sql™e3_»£t
(
’d_Œªs_¡mt
);

643 
E¼ÜCheck
(
¡©us
);

647 
	g¡©us
 = 
sql™e3_fš®ize
(
»ad_¡mt
);

648 
E¼ÜCheck
(
¡©us
);

649 
	g¡©us
 = 
sql™e3_fš®ize
(
begš_Œªs_¡mt
);

650 
E¼ÜCheck
(
¡©us
);

651 
	g¡©us
 = 
sql™e3_fš®ize
(
’d_Œªs_¡mt
);

652 
E¼ÜCheck
(
¡©us
);

655 
R—dSequ’tŸl
() {

656 
	g¡©us
;

657 
sql™e3_¡mt
* 
	gpStmt
;

658 
	g¡d
::
¡ršg
 
»ad_¡r
 = "SELECT * FROMest ORDER BY key";

660 
	g¡©us
 = 
sql™e3_´•¬e_v2
(
db_
, 
»ad_¡r
.
c_¡r
(), -1, &
pStmt
, 
nuÎ±r
);

661 
E¼ÜCheck
(
¡©us
);

662 
	gi
 = 0; i < 
	g»ads_
 && 
	gSQLITE_ROW
 =ğ
sql™e3_¡•
(
pStmt
); i++) {

663 
	gby‹s_
 +ğ
sql™e3_cŞumn_by‹s
(
pStmt
, 1) + sqlite3_column_bytes(pStmt, 2);

664 
FšishedSšgËOp
();

667 
	g¡©us
 = 
sql™e3_fš®ize
(
pStmt
);

668 
E¼ÜCheck
(
¡©us
);

674 
	$maš
(
¬gc
, ** 
¬gv
) {

675 
¡d
::
¡ršg
 
deçuÉ_db_·th
;

676 
i
 = 1; i < 
¬gc
; i++) {

677 
d
;

678 
n
;

679 
junk
;

680 ià(
Ëv–db
::
	`Sliû
(
¬gv
[
i
]).
	`¡¬ts_w™h
("--benchmarks=")) {

681 
FLAGS_b’chm¬ks
 = 
¬gv
[
i
] + 
	`¡¾’
("--benchmarks=");

682 } ià(
	`ssÿnf
(
¬gv
[
i
], "--hi¡og¿m=%d%c", &
n
, &
junk
) == 1 &&

683 (
n
 == 0 ||‚ == 1)) {

684 
FLAGS_hi¡og¿m
 = 
n
;

685 } ià(
	`ssÿnf
(
¬gv
[
i
], "--com´essiÚ_¿tio=%lf%c", &
d
, &
junk
) == 1) {

686 
FLAGS_com´essiÚ_¿tio
 = 
d
;

687 } ià(
	`ssÿnf
(
¬gv
[
i
], "--u£_exi¡šg_db=%d%c", &
n
, &
junk
) == 1 &&

688 (
n
 == 0 ||‚ == 1)) {

689 
FLAGS_u£_exi¡šg_db
 = 
n
;

690 } ià(
	`ssÿnf
(
¬gv
[
i
], "--u£_rowids=%d%c", &
n
, &
junk
) == 1 &&

691 (
n
 == 0 ||‚ == 1)) {

692 
FLAGS_u£_rowids
 = 
n
;

693 } ià(
	`ssÿnf
(
¬gv
[
i
], "--num=%d%c", &
n
, &
junk
) == 1) {

694 
FLAGS_num
 = 
n
;

695 } ià(
	`ssÿnf
(
¬gv
[
i
], "--»ads=%d%c", &
n
, &
junk
) == 1) {

696 
FLAGS_»ads
 = 
n
;

697 } ià(
	`ssÿnf
(
¬gv
[
i
], "--v®ue_size=%d%c", &
n
, &
junk
) == 1) {

698 
FLAGS_v®ue_size
 = 
n
;

699 } ià(
Ëv–db
::
	`Sliû
(
¬gv
[
i
]) ==†eveldb::Slice("--no_transaction")) {

700 
FLAGS_Œª§ùiÚ
 = 
çl£
;

701 } ià(
	`ssÿnf
(
¬gv
[
i
], "--·ge_size=%d%c", &
n
, &
junk
) == 1) {

702 
FLAGS_·ge_size
 = 
n
;

703 } ià(
	`ssÿnf
(
¬gv
[
i
], "--num_·ges=%d%c", &
n
, &
junk
) == 1) {

704 
FLAGS_num_·ges
 = 
n
;

705 } ià(
	`ssÿnf
(
¬gv
[
i
], "--WAL_’abËd=%d%c", &
n
, &
junk
) == 1 &&

706 (
n
 == 0 ||‚ == 1)) {

707 
FLAGS_WAL_’abËd
 = 
n
;

708 } ià(
	`¡ºcmp
(
¬gv
[
i
], "--db=", 5) == 0) {

709 
FLAGS_db
 = 
¬gv
[
i
] + 5;

711 
¡d
::
	`årštf
(
¡d”r
, "Inv®id fÏg '%s'\n", 
¬gv
[
i
]);

712 
¡d
::
	`ex™
(1);

717 ià(
FLAGS_db
 =ğ
nuÎ±r
) {

718 
Ëv–db
::
Env
::
	`DeçuÉ
()->
	`G‘Te¡DœeùÜy
(&
deçuÉ_db_·th
);

719 
deçuÉ_db_·th
 += "/dbbench";

720 
FLAGS_db
 = 
deçuÉ_db_·th
.
	`c_¡r
();

723 
Ëv–db
::
B’chm¬k
 
b’chm¬k
;

724 
b’chm¬k
.
	`Run
();

726 
	}
}

	@benchmarks/db_bench_tree_db.cc

5 
	~<kıŞydb.h
>

7 
	~<c¡dio
>

8 
	~<c¡dlib
>

10 
	~"ut/hi¡og¿m.h
"

11 
	~"ut/¿ndom.h
"

12 
	~"ut/‹¡ut.h
"

28 cÚ¡ * 
	gFLAGS_b’chm¬ks
 =

42 
	gFLAGS_num
 = 1000000;

45 
	gFLAGS_»ads
 = -1;

48 
	gFLAGS_v®ue_size
 = 100;

52 
	gFLAGS_com´essiÚ_¿tio
 = 0.5;

55 
boŞ
 
	gFLAGS_hi¡og¿m
 = 
çl£
;

58 
	gFLAGS_ÿche_size
 = 4194304;

61 
	gFLAGS_·ge_size
 = 1024;

66 
boŞ
 
	gFLAGS_u£_exi¡šg_db
 = 
çl£
;

70 
boŞ
 
	gFLAGS_com´essiÚ
 = 
Œue
;

73 cÚ¡ * 
	gFLAGS_db
 = 
nuÎ±r
;

75 
šlše
 
	$DBSynchrÚize
(
kyÙoÿbš‘
::
T»eDB
* 
db_
) {

77 ià(!
db_
->
	`synchrÚize
()) {

78 
¡d
::
	`årštf
(
¡d”r
, "synchrÚiz”rÜ: %s\n", 
db_
->
	`”rÜ
().
	`Çme
());

80 
	}
}

82 
Çme¥aû
 
	gËv–db
 {

85 
	gÇme¥aû
 {

86 şas 
	cRªdomG’”©Ü
 {

87 
	g´iv©e
:

88 
¡d
::
¡ršg
 
d©a_
;

89 
	gpos_
;

91 
	gpublic
:

92 
RªdomG’”©Ü
() {

96 
Rªdom
 
ºd
(301);

97 
	g¡d
::
¡ršg
 
p›û
;

98 
	gd©a_
.
size
() < 1048576) {

101 
	g‹¡
::
Com´essibËSŒšg
(&
ºd
, 
FLAGS_com´essiÚ_¿tio
, 100, &
p›û
);

102 
	gd©a_
.
­³nd
(
p›û
);

104 
	gpos_
 = 0;

107 
Sliû
 
G’”©e
(
Ën
) {

108 ià(
	gpos_
 + 
	gËn
 > 
	gd©a_
.
size
()) {

109 
	gpos_
 = 0;

110 
as£¹
(
Ën
 < 
d©a_
.
size
());

112 
	gpos_
 +ğ
Ën
;

113  
Sliû
(
d©a_
.
d©a
(è+ 
pos_
 - 
Ën
,†en);

117 
Sliû
 
TrimS·û
(Sliû 
s
) {

118 
	g¡¬t
 = 0;

119 
	g¡¬t
 < 
	gs
.
size
(è&& 
is¥aû
(
s
[
¡¬t
])) {

120 
	g¡¬t
++;

122 
	glim™
 = 
s
.
size
();

123 
	glim™
 > 
	g¡¬t
 && 
is¥aû
(
s
[
lim™
 - 1])) {

124 
	glim™
--;

126  
Sliû
(
s
.
d©a
(è+ 
¡¬t
, 
lim™
 - start);

131 şas 
	cB’chm¬k
 {

132 
	g´iv©e
:

133 
kyÙoÿbš‘
::
T»eDB
* 
db_
;

134 
	gdb_num_
;

135 
	gnum_
;

136 
	g»ads_
;

137 
	g¡¬t_
;

138 
	gÏ¡_İ_fšish_
;

139 
št64_t
 
	gby‹s_
;

140 
	g¡d
::
¡ršg
 
mes§ge_
;

141 
Hi¡og¿m
 
	ghi¡_
;

142 
RªdomG’”©Ü
 
	gg’_
;

143 
Rªdom
 
	g¿nd_
;

144 
	gkyÙoÿbš‘
::
LZOCom´essÜ
<
kyÙoÿbš‘
::
LZO
::
RAW
> 
comp_
;

147 
	gdÚe_
;

148 
	gÃxt_»pÜt_
;

150 
PrštH—d”
() {

151 cÚ¡ 
	gkKeySize
 = 16;

152 
PrštEnvœÚm’t
();

153 
	g¡d
::
årštf
(
¡dout
, "Keys: %d by‹ —ch\n", 
kKeySize
);

154 
	g¡d
::
årštf
(

155 
¡dout
, "Values: %d bytesƒach (%d bytes‡fter compression)\n",

156 
FLAGS_v®ue_size
,

157 
¡©ic_ÿ¡
<>(
FLAGS_v®ue_size
 * 
FLAGS_com´essiÚ_¿tio
 + 0.5));

158 
	g¡d
::
årštf
(
¡dout
, "EÁr›s: %d\n", 
num_
);

159 
	g¡d
::
årštf
(
¡dout
, "RawSize: %.1f MB (estimated)\n",

160 ((
¡©ic_ÿ¡
<
št64_t
>(
kKeySize
 + 
FLAGS_v®ue_size
è* 
num_
) /

162 
	g¡d
::
årštf
(

163 
¡dout
, "FileSize: %.1f MB (estimated)\n",

164 (((
kKeySize
 + 
FLAGS_v®ue_size
 * 
FLAGS_com´essiÚ_¿tio
è* 
num_
) /

166 
PrštW¬nšgs
();

167 
	g¡d
::
årštf
(
¡dout
, "------------------------------------------------\n");

170 
PrštW¬nšgs
() {

171 #ià
defšed
(
__GNUC__
è&& !defšed(
__OPTIMIZE__
)

172 
	g¡d
::
årštf
(

173 
¡dout
,

176 #iâdeà
NDEBUG


177 
	g¡d
::
årštf
(

178 
¡dout
,

183 
PrštEnvœÚm’t
() {

184 
	g¡d
::
årštf
(

185 
¡d”r
, "Kyoto Cabinet: version %s,†ib ver %d,†ib„ev %d\n",

186 
kyÙoÿbš‘
::
VERSION
, kyÙoÿbš‘::
LIBVER
, kyÙoÿbš‘::
LIBREV
);

188 #ià
defšed
(
__lšux
)

189 
time_t
 
	gnow
 = 
time
(
nuÎ±r
);

190 
	g¡d
::
årštf
(
¡d”r
, "Date: %s",

191 
ùime
(&
now
));

193 
FILE
* 
	gıušfo
 = 
¡d
::
fİ’
("/proc/cpuinfo", "r");

194 ià(
	gıušfo
 !ğ
nuÎ±r
) {

195 
lše
[1000];

196 
	gnum_ıus
 = 0;

197 
	g¡d
::
¡ršg
 
ıu_ty³
;

198 
	g¡d
::
¡ršg
 
ÿche_size
;

199 
fg‘s
(
lše
, Öše), 
ıušfo
è!ğ
nuÎ±r
) {

200 cÚ¡ * 
£p
 = 
¡rchr
(
lše
, ':');

201 ià(
	g£p
 =ğ
nuÎ±r
) {

204 
Sliû
 
	gkey
 = 
TrimS·û
(Sliû(
lše
, 
£p
 - 1 -†ine));

205 
Sliû
 
	gv®
 = 
TrimS·û
(Sliû(
£p
 + 1));

206 ià(
	gkey
 == "model‚ame") {

207 ++
num_ıus
;

208 
	gıu_ty³
 = 
v®
.
ToSŒšg
();

209 } ià(
	gkey
 == "cache size") {

210 
ÿche_size
 = 
v®
.
ToSŒšg
();

213 
	g¡d
::
fşo£
(
ıušfo
);

214 
	g¡d
::
årštf
(
¡d”r
, "CPU: %d * %s\n", 
num_ıus
,

215 
ıu_ty³
.
c_¡r
());

216 
	g¡d
::
årštf
(
¡d”r
, "CPUCache: %s\n", 
ÿche_size
.
c_¡r
());

221 
S¹
() {

222 
	g¡¬t_
 = 
Env
::
DeçuÉ
()->
NowMiüos
() * 1e-6;

223 
	gby‹s_
 = 0;

224 
	gmes§ge_
.
ş—r
();

225 
	gÏ¡_İ_fšish_
 = 
¡¬t_
;

226 
	ghi¡_
.
CË¬
();

227 
	gdÚe_
 = 0;

228 
	gÃxt_»pÜt_
 = 100;

231 
FšishedSšgËOp
() {

232 ià(
	gFLAGS_hi¡og¿m
) {

233 
	gnow
 = 
Env
::
DeçuÉ
()->
NowMiüos
() * 1e-6;

234 
	gmiüos
 = (
now
 - 
Ï¡_İ_fšish_
) * 1e6;

235 
	ghi¡_
.
Add
(
miüos
);

236 ià(
	gmiüos
 > 20000) {

237 
	g¡d
::
årštf
(
¡d”r
, "lÚg op: %.1àmiüos%30s\r", 
miüos
, "");

238 
	g¡d
::
fæush
(
¡d”r
);

240 
	gÏ¡_İ_fšish_
 = 
now
;

243 
	gdÚe_
++;

244 ià(
	gdÚe_
 >ğ
Ãxt_»pÜt_
) {

245 ià(
Ãxt_»pÜt_
 < 1000)

246 
Ãxt_»pÜt_
 += 100;

247 ià(
	gÃxt_»pÜt_
 < 5000)

248 
	gÃxt_»pÜt_
 += 500;

249 ià(
	gÃxt_»pÜt_
 < 10000)

250 
	gÃxt_»pÜt_
 += 1000;

251 ià(
	gÃxt_»pÜt_
 < 50000)

252 
	gÃxt_»pÜt_
 += 5000;

253 ià(
	gÃxt_»pÜt_
 < 100000)

254 
	gÃxt_»pÜt_
 += 10000;

255 ià(
	gÃxt_»pÜt_
 < 500000)

256 
	gÃxt_»pÜt_
 += 50000;

258 
	gÃxt_»pÜt_
 += 100000;

259 
	g¡d
::
årštf
(
¡d”r
, "... fšished %d ops%30s\r", 
dÚe_
, "");

260 
	g¡d
::
fæush
(
¡d”r
);

264 
Stİ
(cÚ¡ 
Sliû
& 
Çme
) {

265 
	gfšish
 = 
Env
::
DeçuÉ
()->
NowMiüos
() * 1e-6;

269 ià(
	gdÚe_
 < 1) done_ = 1;

271 ià(
	gby‹s_
 > 0) {

272 
	g¿‹
[100];

273 
	g¡d
::
¢´štf
(
¿‹
, (rate), "%6.1f MB/s",

274 (
by‹s_
 / 1048576.0è/ (
fšish
 - 
¡¬t_
));

275 ià(!
	gmes§ge_
.
em±y
()) {

276 
	gmes§ge_
 = 
¡d
::
¡ršg
(
¿‹
è+ " " + 
mes§ge_
;

278 
	gmes§ge_
 = 
¿‹
;

282 
	g¡d
::
årštf
(
¡dout
, "%-12s : %11.3f micros/op;%s%s\n",

283 
Çme
.
ToSŒšg
().
c_¡r
(), (
fšish
 - 
¡¬t_
è* 1e6 / 
dÚe_
,

284 (
mes§ge_
.
em±y
(è? "" : " "), mes§ge_.
c_¡r
());

285 ià(
	gFLAGS_hi¡og¿m
) {

286 
	g¡d
::
årštf
(
¡dout
, "Microseconds…er op:\n%s\n",

287 
hi¡_
.
ToSŒšg
().
c_¡r
());

289 
	g¡d
::
fæush
(
¡dout
);

292 
	gpublic
:

293 
	eOrd”
 { 
SEQUENTIAL
, 
	gRANDOM
 };

294 
	eDBS‹
 { 
	gFRESH
, 
	gEXISTING
 };

296 
B’chm¬k
()

297 : 
db_
(
nuÎ±r
),

298 
num_
(
FLAGS_num
),

299 
»ads_
(
FLAGS_»ads
 < 0 ? 
FLAGS_num
 : FLAGS_reads),

300 
by‹s_
(0),

301 
¿nd_
(301) {

302 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> 
fes
;

303 
	g¡d
::
¡ršg
 
‹¡_dœ
;

304 
	gEnv
::
DeçuÉ
()->
G‘Te¡DœeùÜy
(&
‹¡_dœ
);

305 
	gEnv
::
DeçuÉ
()->
G‘Chd»n
(
‹¡_dœ
.
c_¡r
(), &
fes
);

306 ià(!
	gFLAGS_u£_exi¡šg_db
) {

307 
	gi
 = 0; i < 
	gfes
.
size
(); i++) {

308 ià(
Sliû
(
fes
[
i
]).
¡¬ts_w™h
("dbbench_polyDB")) {

309 
	g¡d
::
¡ršg
 
fe_Çme
(
‹¡_dœ
);

310 
	gfe_Çme
 += "/";

311 
	gfe_Çme
 +ğ
fes
[
i
];

312 
	gEnv
::
DeçuÉ
()->
RemoveFe
(
fe_Çme
.
c_¡r
());

318 ~
B’chm¬k
() {

319 ià(!
	gdb_
->
şo£
()) {

320 
	g¡d
::
årštf
(
¡d”r
, "şo£ƒ¼Ü: %s\n", 
db_
->
”rÜ
().
Çme
());

324 
Run
() {

325 
PrštH—d”
();

326 
O³n
(
çl£
);

328 cÚ¡ * 
	gb’chm¬ks
 = 
FLAGS_b’chm¬ks
;

329 
	gb’chm¬ks
 !ğ
nuÎ±r
) {

330 cÚ¡ * 
£p
 = 
¡rchr
(
b’chm¬ks
, ',');

331 
Sliû
 
	gÇme
;

332 ià(
	g£p
 =ğ
nuÎ±r
) {

333 
Çme
 = 
b’chm¬ks
;

334 
	gb’chm¬ks
 = 
nuÎ±r
;

336 
	gÇme
 = 
Sliû
(
b’chm¬ks
, 
£p
 - benchmarks);

337 
	gb’chm¬ks
 = 
£p
 + 1;

340 
S¹
();

342 
boŞ
 
	gknown
 = 
Œue
;

343 
boŞ
 
	gwr™e_sync
 = 
çl£
;

344 ià(
	gÇme
 =ğ
Sliû
("fillseq")) {

345 
Wr™e
(
wr™e_sync
, 
SEQUENTIAL
, 
FRESH
, 
num_
, 
FLAGS_v®ue_size
, 1);

346 
DBSynchrÚize
(
db_
);

347 } ià(
	gÇme
 =ğ
Sliû
("fillrandom")) {

348 
Wr™e
(
wr™e_sync
, 
RANDOM
, 
FRESH
, 
num_
, 
FLAGS_v®ue_size
, 1);

349 
DBSynchrÚize
(
db_
);

350 } ià(
	gÇme
 =ğ
Sliû
("overwrite")) {

351 
Wr™e
(
wr™e_sync
, 
RANDOM
, 
EXISTING
, 
num_
, 
FLAGS_v®ue_size
, 1);

352 
DBSynchrÚize
(
db_
);

353 } ià(
	gÇme
 =ğ
Sliû
("fillrandsync")) {

354 
wr™e_sync
 = 
Œue
;

355 
Wr™e
(
wr™e_sync
, 
RANDOM
, 
FRESH
, 
num_
 / 100, 
FLAGS_v®ue_size
, 1);

356 
DBSynchrÚize
(
db_
);

357 } ià(
	gÇme
 =ğ
Sliû
("fillseqsync")) {

358 
wr™e_sync
 = 
Œue
;

359 
Wr™e
(
wr™e_sync
, 
SEQUENTIAL
, 
FRESH
, 
num_
 / 100, 
FLAGS_v®ue_size
, 1);

360 
DBSynchrÚize
(
db_
);

361 } ià(
	gÇme
 =ğ
Sliû
("fillrand100K")) {

362 
Wr™e
(
wr™e_sync
, 
RANDOM
, 
FRESH
, 
num_
 / 1000, 100 * 1000, 1);

363 
DBSynchrÚize
(
db_
);

364 } ià(
	gÇme
 =ğ
Sliû
("fillseq100K")) {

365 
Wr™e
(
wr™e_sync
, 
SEQUENTIAL
, 
FRESH
, 
num_
 / 1000, 100 * 1000, 1);

366 
DBSynchrÚize
(
db_
);

367 } ià(
	gÇme
 =ğ
Sliû
("readseq")) {

368 
R—dSequ’tŸl
();

369 } ià(
	gÇme
 =ğ
Sliû
("readrandom")) {

370 
R—dRªdom
();

371 } ià(
	gÇme
 =ğ
Sliû
("readrand100K")) {

372 
n
 = 
»ads_
;

373 
	g»ads_
 /= 1000;

374 
R—dRªdom
();

375 
	g»ads_
 = 
n
;

376 } ià(
	gÇme
 =ğ
Sliû
("readseq100K")) {

377 
n
 = 
»ads_
;

378 
	g»ads_
 /= 1000;

379 
R—dSequ’tŸl
();

380 
	g»ads_
 = 
n
;

382 
	gknown
 = 
çl£
;

383 ià(
	gÇme
 !ğ
Sliû
()) {

384 
¡d
::
årštf
(
¡d”r
, "unknown benchmark '%s'\n",

385 
Çme
.
ToSŒšg
().
c_¡r
());

388 ià(
	gknown
) {

389 
Stİ
(
Çme
);

394 
	g´iv©e
:

395 
O³n
(
boŞ
 
sync
) {

396 
as£¹
(
db_
 =ğ
nuÎ±r
);

399 
	gdb_
 = 
Ãw
 
kyÙoÿbš‘
::
T»eDB
();

400 
	gfe_Çme
[100];

401 
	gdb_num_
++;

402 
	g¡d
::
¡ršg
 
‹¡_dœ
;

403 
	gEnv
::
DeçuÉ
()->
G‘Te¡DœeùÜy
(&
‹¡_dœ
);

404 
	g¡d
::
¢´štf
(
fe_Çme
, (file_name), "%s/dbbench_polyDB-%d.kct",

405 
‹¡_dœ
.
c_¡r
(), 
db_num_
);

408 
	gİ’_İtiÚs
 =

409 
kyÙoÿbš‘
::
PŞyDB
::
OWRITER
 | kyÙoÿbš‘::PŞyDB::
OCREATE
;

410 
	gtuÃ_İtiÚs
 =

411 
kyÙoÿbš‘
::
T»eDB
::
TSMALL
 | kyÙoÿbš‘::T»eDB::
TLINEAR
;

412 ià(
	gFLAGS_com´essiÚ
) {

413 
	gtuÃ_İtiÚs
 |ğ
kyÙoÿbš‘
::
T»eDB
::
TCOMPRESS
;

414 
	gdb_
->
tuÃ_com´essÜ
(&
comp_
);

416 
	gdb_
->
tuÃ_İtiÚs
(tune_options);

417 
	gdb_
->
tuÃ_·ge_ÿche
(
FLAGS_ÿche_size
);

418 
	gdb_
->
tuÃ_·ge
(
FLAGS_·ge_size
);

419 
	gdb_
->
tuÃ_m­
(256LL << 20);

420 ià(
	gsync
) {

421 
	gİ’_İtiÚs
 |ğ
kyÙoÿbš‘
::
PŞyDB
::
OAUTOSYNC
;

423 ià(!
	gdb_
->
İ’
(
fe_Çme
, 
İ’_İtiÚs
)) {

424 
	g¡d
::
årštf
(
¡d”r
, "İ’ƒ¼Ü: %s\n", 
db_
->
”rÜ
().
Çme
());

428 
Wr™e
(
boŞ
 
sync
, 
Ord”
 
Üd”
, 
DBS‹
 
¡©e
, 
num_’Œ›s
,

429 
v®ue_size
, 
’Œ›s_³r_b©ch
) {

431 ià(
	g¡©e
 =ğ
FRESH
) {

432 ià(
FLAGS_u£_exi¡šg_db
) {

433 
mes§ge_
 = "skipping (--use_existing_db isrue)";

436 
d–‘e
 
	gdb_
;

437 
	gdb_
 = 
nuÎ±r
;

438 
O³n
(
sync
);

439 
S¹
();

442 ià(
	gnum_’Œ›s
 !ğ
num_
) {

443 
msg
[100];

444 
	g¡d
::
¢´štf
(
msg
, (msg), "(%d ops)", 
num_’Œ›s
);

445 
	gmes§ge_
 = 
msg
;

449 
	gi
 = 0; i < 
	gnum_’Œ›s
; i++) {

450 cÚ¡ 
	gk
 = (
Üd”
 =ğ
SEQUENTIAL
è? 
i
 : (
¿nd_
.
Next
(è% 
num_’Œ›s
);

451 
	gkey
[100];

452 
	g¡d
::
¢´štf
(
key
, (key), "%016d", 
k
);

453 
	gby‹s_
 +ğ
v®ue_size
 + 
¡¾’
(
key
);

454 
	g¡d
::
¡ršg
 
ıp_key
 = 
key
;

455 ià(!
	gdb_
->
£t
(
ıp_key
, 
g’_
.
G’”©e
(
v®ue_size
).
ToSŒšg
())) {

456 
	g¡d
::
årštf
(
¡d”r
, "£ˆ”rÜ: %s\n", 
db_
->
”rÜ
().
Çme
());

458 
FšishedSšgËOp
();

462 
R—dSequ’tŸl
() {

463 
	gkyÙoÿbš‘
::
DB
::
CursÜ
* 
cur
 = 
db_
->
cursÜ
();

464 
	gcur
->
jump
();

465 
	g¡d
::
¡ršg
 
ckey
, 
	gcv®ue
;

466 
	gcur
->
g‘
(&
ckey
, &
cv®ue
, 
Œue
)) {

467 
	gby‹s_
 +ğ
ckey
.
size
(è+ 
cv®ue
.size();

468 
FšishedSšgËOp
();

470 
d–‘e
 
	gcur
;

473 
R—dRªdom
() {

474 
	g¡d
::
¡ršg
 
v®ue
;

475 
	gi
 = 0; i < 
	g»ads_
; i++) {

476 
	gkey
[100];

477 cÚ¡ 
	gk
 = 
¿nd_
.
Next
(è% 
»ads_
;

478 
	g¡d
::
¢´štf
(
key
, (key), "%016d", 
k
);

479 
	gdb_
->
g‘
(
key
, &
v®ue
);

480 
FšishedSšgËOp
();

487 
	$maš
(
¬gc
, ** 
¬gv
) {

488 
¡d
::
¡ršg
 
deçuÉ_db_·th
;

489 
i
 = 1; i < 
¬gc
; i++) {

490 
d
;

491 
n
;

492 
junk
;

493 ià(
Ëv–db
::
	`Sliû
(
¬gv
[
i
]).
	`¡¬ts_w™h
("--benchmarks=")) {

494 
FLAGS_b’chm¬ks
 = 
¬gv
[
i
] + 
	`¡¾’
("--benchmarks=");

495 } ià(
	`ssÿnf
(
¬gv
[
i
], "--com´essiÚ_¿tio=%lf%c", &
d
, &
junk
) == 1) {

496 
FLAGS_com´essiÚ_¿tio
 = 
d
;

497 } ià(
	`ssÿnf
(
¬gv
[
i
], "--hi¡og¿m=%d%c", &
n
, &
junk
) == 1 &&

498 (
n
 == 0 ||‚ == 1)) {

499 
FLAGS_hi¡og¿m
 = 
n
;

500 } ià(
	`ssÿnf
(
¬gv
[
i
], "--num=%d%c", &
n
, &
junk
) == 1) {

501 
FLAGS_num
 = 
n
;

502 } ià(
	`ssÿnf
(
¬gv
[
i
], "--»ads=%d%c", &
n
, &
junk
) == 1) {

503 
FLAGS_»ads
 = 
n
;

504 } ià(
	`ssÿnf
(
¬gv
[
i
], "--v®ue_size=%d%c", &
n
, &
junk
) == 1) {

505 
FLAGS_v®ue_size
 = 
n
;

506 } ià(
	`ssÿnf
(
¬gv
[
i
], "--ÿche_size=%d%c", &
n
, &
junk
) == 1) {

507 
FLAGS_ÿche_size
 = 
n
;

508 } ià(
	`ssÿnf
(
¬gv
[
i
], "--·ge_size=%d%c", &
n
, &
junk
) == 1) {

509 
FLAGS_·ge_size
 = 
n
;

510 } ià(
	`ssÿnf
(
¬gv
[
i
], "--com´essiÚ=%d%c", &
n
, &
junk
) == 1 &&

511 (
n
 == 0 ||‚ == 1)) {

512 
FLAGS_com´essiÚ
 = (
n
 =ğ1è? 
Œue
 : 
çl£
;

513 } ià(
	`¡ºcmp
(
¬gv
[
i
], "--db=", 5) == 0) {

514 
FLAGS_db
 = 
¬gv
[
i
] + 5;

516 
¡d
::
	`årštf
(
¡d”r
, "Inv®id fÏg '%s'\n", 
¬gv
[
i
]);

517 
¡d
::
	`ex™
(1);

522 ià(
FLAGS_db
 =ğ
nuÎ±r
) {

523 
Ëv–db
::
Env
::
	`DeçuÉ
()->
	`G‘Te¡DœeùÜy
(&
deçuÉ_db_·th
);

524 
deçuÉ_db_·th
 += "/dbbench";

525 
FLAGS_db
 = 
deçuÉ_db_·th
.
	`c_¡r
();

528 
Ëv–db
::
B’chm¬k
 
b’chm¬k
;

529 
b’chm¬k
.
	`Run
();

531 
	}
}

	@build/CMakeFiles/3.22.1/CompilerIdC/CMakeCCompilerId.c

1 #ifdeà
__ılu¥lus


5 #ià
defšed
(
__18CXX
)

6 
	#ID_VOID_MAIN


	)

8 #ià
defšed
(
__CLASSIC_C__
)

10 cÚ¡

	)

11 vŞ©e

	)

14 #ià!
defšed
(
__has_šşude
)

17 
	#__has_šşude
(
x
è0

	)

24 #ià
defšed
(
__INTEL_COMPILER
è|| defšed(
__ICC
)

25 
	#COMPILER_ID
 "IÁ–"

	)

26 #ià
defšed
(
_MSC_VER
)

27 
	#SIMULATE_ID
 "MSVC"

	)

29 #ià
defšed
(
__GNUC__
)

30 
	#SIMULATE_ID
 "GNU"

	)

34 #ià
__INTEL_COMPILER
 < 2021 || __INTEL_COMPILER == 202110 || __INTEL_COMPILER == 202111

35 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__INTEL_COMPILER
/100)

	)

36 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__INTEL_COMPILER
/10 % 10)

	)

37 #ià
defšed
(
__INTEL_COMPILER_UPDATE
)

38 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__INTEL_COMPILER_UPDATE
)

	)

40 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__INTEL_COMPILER
 % 10)

	)

43 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__INTEL_COMPILER
)

	)

44 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__INTEL_COMPILER_UPDATE
)

	)

47 
	#COMPILER_VERSION_PATCH
 
	`DEC
(0)

	)

49 #ià
defšed
(
__INTEL_COMPILER_BUILD_DATE
)

51 
	#COMPILER_VERSION_TWEAK
 
	`DEC
(
__INTEL_COMPILER_BUILD_DATE
)

	)

53 #ià
defšed
(
_MSC_VER
)

55 
	#SIMULATE_VERSION_MAJOR
 
	`DEC
(
_MSC_VER
 / 100)

	)

56 
	#SIMULATE_VERSION_MINOR
 
	`DEC
(
_MSC_VER
 % 100)

	)

58 #ià
defšed
(
__GNUC__
)

59 
	#SIMULATE_VERSION_MAJOR
 
	`DEC
(
__GNUC__
)

	)

60 #–ià
defšed
(
__GNUG__
)

61 
	#SIMULATE_VERSION_MAJOR
 
	`DEC
(
__GNUG__
)

	)

63 #ià
defšed
(
__GNUC_MINOR__
)

64 
	#SIMULATE_VERSION_MINOR
 
	`DEC
(
__GNUC_MINOR__
)

	)

66 #ià
defšed
(
__GNUC_PATCHLEVEL__
)

67 
	#SIMULATE_VERSION_PATCH
 
	`DEC
(
__GNUC_PATCHLEVEL__
)

	)

70 #–ià(
defšed
(
__şªg__
è&& defšed(
__INTEL_CLANG_COMPILER
)è|| defšed(
__INTEL_LLVM_COMPILER
)

71 
	#COMPILER_ID
 "IÁ–LLVM"

	)

72 #ià
defšed
(
_MSC_VER
)

73 
	#SIMULATE_ID
 "MSVC"

	)

75 #ià
defšed
(
__GNUC__
)

76 
	#SIMULATE_ID
 "GNU"

	)

82 #ià
__INTEL_LLVM_COMPILER
 < 1000000L

83 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__INTEL_LLVM_COMPILER
/100)

	)

84 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__INTEL_LLVM_COMPILER
/10 % 10)

	)

85 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__INTEL_LLVM_COMPILER
 % 10)

	)

87 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__INTEL_LLVM_COMPILER
/10000)

	)

88 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__INTEL_LLVM_COMPILER
/100 % 100)

	)

89 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__INTEL_LLVM_COMPILER
 % 100)

	)

91 #ià
defšed
(
_MSC_VER
)

93 
	#SIMULATE_VERSION_MAJOR
 
	`DEC
(
_MSC_VER
 / 100)

	)

94 
	#SIMULATE_VERSION_MINOR
 
	`DEC
(
_MSC_VER
 % 100)

	)

96 #ià
defšed
(
__GNUC__
)

97 
	#SIMULATE_VERSION_MAJOR
 
	`DEC
(
__GNUC__
)

	)

98 #–ià
defšed
(
__GNUG__
)

99 
	#SIMULATE_VERSION_MAJOR
 
	`DEC
(
__GNUG__
)

	)

101 #ià
defšed
(
__GNUC_MINOR__
)

102 
	#SIMULATE_VERSION_MINOR
 
	`DEC
(
__GNUC_MINOR__
)

	)

104 #ià
defšed
(
__GNUC_PATCHLEVEL__
)

105 
	#SIMULATE_VERSION_PATCH
 
	`DEC
(
__GNUC_PATCHLEVEL__
)

	)

108 #–ià
defšed
(
__PATHCC__
)

109 
	#COMPILER_ID
 "P©hSÿË"

	)

110 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__PATHCC__
)

	)

111 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__PATHCC_MINOR__
)

	)

112 #ià
defšed
(
__PATHCC_PATCHLEVEL__
)

113 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__PATHCC_PATCHLEVEL__
)

	)

116 #–ià
defšed
(
__BORLANDC__
è&& defšed(
__CODEGEARC_VERSION__
)

117 
	#COMPILER_ID
 "Emb¬ÿd”o"

	)

118 
	#COMPILER_VERSION_MAJOR
 
	`HEX
(
__CODEGEARC_VERSION__
>>24 & 0x00FF)

	)

119 
	#COMPILER_VERSION_MINOR
 
	`HEX
(
__CODEGEARC_VERSION__
>>16 & 0x00FF)

	)

120 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__CODEGEARC_VERSION__
 & 0xFFFF)

	)

122 #–ià
defšed
(
__BORLANDC__
)

123 
	#COMPILER_ID
 "BÜÏnd"

	)

125 
	#COMPILER_VERSION_MAJOR
 
	`HEX
(
__BORLANDC__
>>8)

	)

126 
	#COMPILER_VERSION_MINOR
 
	`HEX
(
__BORLANDC__
 & 0xFF)

	)

128 #–ià
defšed
(
__WATCOMC__
) && __WATCOMC__ < 1200

129 
	#COMPILER_ID
 "W©com"

	)

131 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__WATCOMC__
 / 100)

	)

132 
	#COMPILER_VERSION_MINOR
 
	`DEC
((
__WATCOMC__
 / 10è% 10)

	)

133 #ià(
__WATCOMC__
 % 10) > 0

134 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__WATCOMC__
 % 10)

	)

137 #–ià
defšed
(
__WATCOMC__
)

138 
	#COMPILER_ID
 "O³nW©com"

	)

140 
	#COMPILER_VERSION_MAJOR
 
	`DEC
((
__WATCOMC__
 - 1100è/ 100)

	)

141 
	#COMPILER_VERSION_MINOR
 
	`DEC
((
__WATCOMC__
 / 10è% 10)

	)

142 #ià(
__WATCOMC__
 % 10) > 0

143 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__WATCOMC__
 % 10)

	)

146 #–ià
defšed
(
__SUNPRO_C
)

147 
	#COMPILER_ID
 "SunPro"

	)

148 #ià
__SUNPRO_C
 >= 0x5100

150 
	#COMPILER_VERSION_MAJOR
 
	`HEX
(
__SUNPRO_C
>>12)

	)

151 
	#COMPILER_VERSION_MINOR
 
	`HEX
(
__SUNPRO_C
>>4 & 0xFF)

	)

152 
	#COMPILER_VERSION_PATCH
 
	`HEX
(
__SUNPRO_C
 & 0xF)

	)

155 
	#COMPILER_VERSION_MAJOR
 
	`HEX
(
__SUNPRO_C
>>8)

	)

156 
	#COMPILER_VERSION_MINOR
 
	`HEX
(
__SUNPRO_C
>>4 & 0xF)

	)

157 
	#COMPILER_VERSION_PATCH
 
	`HEX
(
__SUNPRO_C
 & 0xF)

	)

160 #–ià
defšed
(
__HP_cc
)

161 
	#COMPILER_ID
 "HP"

	)

163 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__HP_cc
/10000)

	)

164 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__HP_cc
/100 % 100)

	)

165 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__HP_cc
 % 100)

	)

167 #–ià
defšed
(
__DECC
)

168 
	#COMPILER_ID
 "Com·q"

	)

170 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__DECC_VER
/10000000)

	)

171 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__DECC_VER
/100000 % 100)

	)

172 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__DECC_VER
 % 10000)

	)

174 #–ià
defšed
(
__IBMC__
è&& defšed(
__COMPILER_VER__
)

175 
	#COMPILER_ID
 "zOS"

	)

177 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__IBMC__
/100)

	)

178 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__IBMC__
/10 % 10)

	)

179 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__IBMC__
 % 10)

	)

181 #–ià
defšed
(
__ibmxl__
è&& defšed(
__şªg__
)

182 
	#COMPILER_ID
 "XLCÏng"

	)

183 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__ibmxl_v”siÚ__
)

	)

184 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__ibmxl_»Ëa£__
)

	)

185 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__ibmxl_modifiÿtiÚ__
)

	)

186 
	#COMPILER_VERSION_TWEAK
 
	`DEC
(
__ibmxl_±f_fix_Ëv–__
)

	)

189 #–ià
defšed
(
__IBMC__
è&& !defšed(
__COMPILER_VER__
) && __IBMC__ >= 800

190 
	#COMPILER_ID
 "XL"

	)

192 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__IBMC__
/100)

	)

193 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__IBMC__
/10 % 10)

	)

194 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__IBMC__
 % 10)

	)

196 #–ià
defšed
(
__IBMC__
è&& !defšed(
__COMPILER_VER__
) && __IBMC__ < 800

197 
	#COMPILER_ID
 "Visu®Age"

	)

199 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__IBMC__
/100)

	)

200 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__IBMC__
/10 % 10)

	)

201 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__IBMC__
 % 10)

	)

203 #–ià
defšed
(
__NVCOMPILER
)

204 
	#COMPILER_ID
 "NVHPC"

	)

205 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__NVCOMPILER_MAJOR__
)

	)

206 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__NVCOMPILER_MINOR__
)

	)

207 #ià
defšed
(
__NVCOMPILER_PATCHLEVEL__
)

208 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__NVCOMPILER_PATCHLEVEL__
)

	)

211 #–ià
defšed
(
__PGI
)

212 
	#COMPILER_ID
 "PGI"

	)

213 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__PGIC__
)

	)

214 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__PGIC_MINOR__
)

	)

215 #ià
defšed
(
__PGIC_PATCHLEVEL__
)

216 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__PGIC_PATCHLEVEL__
)

	)

219 #–ià
defšed
(
_CRAYC
)

220 
	#COMPILER_ID
 "C¿y"

	)

221 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
_RELEASE_MAJOR
)

	)

222 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
_RELEASE_MINOR
)

	)

224 #–ià
defšed
(
__TI_COMPILER_VERSION__
)

225 
	#COMPILER_ID
 "TI"

	)

227 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__TI_COMPILER_VERSION__
/1000000)

	)

228 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__TI_COMPILER_VERSION__
/1000 % 1000)

	)

229 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__TI_COMPILER_VERSION__
 % 1000)

	)

231 #–ià
defšed
(
__CLANG_FUJITSU
)

232 
	#COMPILER_ID
 "Fuj™suCÏng"

	)

233 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__FCC_majÜ__
)

	)

234 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__FCC_mšÜ__
)

	)

235 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__FCC_·tchËv–__
)

	)

236 
	#COMPILER_VERSION_INTERNAL_STR
 
__şªg_v”siÚ__


	)

239 #–ià
defšed
(
__FUJITSU
)

240 
	#COMPILER_ID
 "Fuj™su"

	)

241 #ià
defšed
(
__FCC_v”siÚ__
)

242 
	#COMPILER_VERSION
 
__FCC_v”siÚ__


	)

243 #–ià
defšed
(
__FCC_majÜ__
)

244 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__FCC_majÜ__
)

	)

245 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__FCC_mšÜ__
)

	)

246 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__FCC_·tchËv–__
)

	)

248 #ià
defšed
(
__fcc_v”siÚ
)

249 
	#COMPILER_VERSION_INTERNAL
 
	`DEC
(
__fcc_v”siÚ
)

	)

250 #–ià
defšed
(
__FCC_VERSION
)

251 
	#COMPILER_VERSION_INTERNAL
 
	`DEC
(
__FCC_VERSION
)

	)

255 #–ià
defšed
(
__ghs__
)

256 
	#COMPILER_ID
 "GHS"

	)

258 #ifdeà
__GHS_VERSION_NUMBER


259 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__GHS_VERSION_NUMBER
 / 100)

	)

260 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__GHS_VERSION_NUMBER
 / 10 % 10)

	)

261 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__GHS_VERSION_NUMBER
 % 10)

	)

264 #–ià
defšed
(
__TINYC__
)

265 
	#COMPILER_ID
 "TšyCC"

	)

267 #–ià
defšed
(
__BCC__
)

268 
	#COMPILER_ID
 "Bruû"

	)

270 #–ià
defšed
(
__SCO_VERSION__
)

271 
	#COMPILER_ID
 "SCO"

	)

273 #–ià
defšed
(
__ARMCC_VERSION
è&& !defšed(
__şªg__
)

274 
	#COMPILER_ID
 "ARMCC"

	)

275 #ià
__ARMCC_VERSION
 >= 1000000

277 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__ARMCC_VERSION
/1000000)

	)

278 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__ARMCC_VERSION
/10000 % 100)

	)

279 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__ARMCC_VERSION
 % 10000)

	)

282 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__ARMCC_VERSION
/100000)

	)

283 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__ARMCC_VERSION
/10000 % 10)

	)

284 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__ARMCC_VERSION
 % 10000)

	)

288 #–ià
defšed
(
__şªg__
è&& defšed(
__­¶e_bud_v”siÚ__
)

289 
	#COMPILER_ID
 "AµËCÏng"

	)

290 #ià
defšed
(
_MSC_VER
)

291 
	#SIMULATE_ID
 "MSVC"

	)

293 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__şªg_majÜ__
)

	)

294 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__şªg_mšÜ__
)

	)

295 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__şªg_·tchËv–__
)

	)

296 #ià
defšed
(
_MSC_VER
)

298 
	#SIMULATE_VERSION_MAJOR
 
	`DEC
(
_MSC_VER
 / 100)

	)

299 
	#SIMULATE_VERSION_MINOR
 
	`DEC
(
_MSC_VER
 % 100)

	)

301 
	#COMPILER_VERSION_TWEAK
 
	`DEC
(
__­¶e_bud_v”siÚ__
)

	)

303 #–ià
defšed
(
__şªg__
è&& defšed(
__ARMCOMPILER_VERSION
)

304 
	#COMPILER_ID
 "ARMCÏng"

	)

305 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__ARMCOMPILER_VERSION
/1000000)

	)

306 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__ARMCOMPILER_VERSION
/10000 % 100)

	)

307 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__ARMCOMPILER_VERSION
 % 10000)

	)

308 
	#COMPILER_VERSION_INTERNAL
 
	`DEC
(
__ARMCOMPILER_VERSION
)

	)

310 #–ià
defšed
(
__şªg__
)

311 
	#COMPILER_ID
 "CÏng"

	)

312 #ià
defšed
(
_MSC_VER
)

313 
	#SIMULATE_ID
 "MSVC"

	)

315 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__şªg_majÜ__
)

	)

316 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__şªg_mšÜ__
)

	)

317 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__şªg_·tchËv–__
)

	)

318 #ià
defšed
(
_MSC_VER
)

320 
	#SIMULATE_VERSION_MAJOR
 
	`DEC
(
_MSC_VER
 / 100)

	)

321 
	#SIMULATE_VERSION_MINOR
 
	`DEC
(
_MSC_VER
 % 100)

	)

324 #–ià
defšed
(
__GNUC__
)

325 
	#COMPILER_ID
 "GNU"

	)

326 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__GNUC__
)

	)

327 #ià
defšed
(
__GNUC_MINOR__
)

328 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__GNUC_MINOR__
)

	)

330 #ià
defšed
(
__GNUC_PATCHLEVEL__
)

331 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__GNUC_PATCHLEVEL__
)

	)

334 #–ià
defšed
(
_MSC_VER
)

335 
	#COMPILER_ID
 "MSVC"

	)

337 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
_MSC_VER
 / 100)

	)

338 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
_MSC_VER
 % 100)

	)

339 #ià
defšed
(
_MSC_FULL_VER
)

340 #ià
_MSC_VER
 >= 1400

342 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
_MSC_FULL_VER
 % 100000)

	)

345 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
_MSC_FULL_VER
 % 10000)

	)

348 #ià
defšed
(
_MSC_BUILD
)

349 
	#COMPILER_VERSION_TWEAK
 
	`DEC
(
_MSC_BUILD
)

	)

352 #–ià
defšed
(
__VISUALDSPVERSION__
è|| defšed(
__ADSPBLACKFIN__
è|| defšed(
__ADSPTS__
è|| defšed(
__ADSP21000__
)

353 
	#COMPILER_ID
 "ADSP"

	)

354 #ià
defšed
(
__VISUALDSPVERSION__
)

356 
	#COMPILER_VERSION_MAJOR
 
	`HEX
(
__VISUALDSPVERSION__
>>24)

	)

357 
	#COMPILER_VERSION_MINOR
 
	`HEX
(
__VISUALDSPVERSION__
>>16 & 0xFF)

	)

358 
	#COMPILER_VERSION_PATCH
 
	`HEX
(
__VISUALDSPVERSION__
>>8 & 0xFF)

	)

361 #–ià
defšed
(
__IAR_SYSTEMS_ICC__
è|| defšed(
__IAR_SYSTEMS_ICC
)

362 
	#COMPILER_ID
 "IAR"

	)

363 #ià
defšed
(
__VER__
è&& defšed(
__ICCARM__
)

364 
	#COMPILER_VERSION_MAJOR
 
	`DEC
((
__VER__
è/ 1000000)

	)

365 
	#COMPILER_VERSION_MINOR
 
	`DEC
(((
__VER__
è/ 1000è% 1000)

	)

366 
	#COMPILER_VERSION_PATCH
 
	`DEC
((
__VER__
è% 1000)

	)

367 
	#COMPILER_VERSION_INTERNAL
 
	`DEC
(
__IAR_SYSTEMS_ICC__
)

	)

368 #–ià
defšed
(
__VER__
è&& (defšed(
__ICCAVR__
è|| defšed(
__ICCRX__
è|| defšed(
__ICCRH850__
è|| defšed(
__ICCRL78__
è|| defšed(
__ICC430__
è|| defšed(
__ICCRISCV__
è|| defšed(
__ICCV850__
è|| defšed(
__ICC8051__
è|| defšed(
__ICCSTM8__
))

369 
	#COMPILER_VERSION_MAJOR
 
	`DEC
((
__VER__
è/ 100)

	)

370 
	#COMPILER_VERSION_MINOR
 
	`DEC
((
__VER__
è- (((__VER__è/ 100)*100))

	)

371 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__SUBVERSION__
)

	)

372 
	#COMPILER_VERSION_INTERNAL
 
	`DEC
(
__IAR_SYSTEMS_ICC__
)

	)

375 #–ià
defšed
(
__SDCC_VERSION_MAJOR
è|| defšed(
SDCC
)

376 
	#COMPILER_ID
 "SDCC"

	)

377 #ià
defšed
(
__SDCC_VERSION_MAJOR
)

378 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__SDCC_VERSION_MAJOR
)

	)

379 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__SDCC_VERSION_MINOR
)

	)

380 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__SDCC_VERSION_PATCH
)

	)

383 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
SDCC
/100)

	)

384 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
SDCC
/10 % 10)

	)

385 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
SDCC
 % 10)

	)

392 #–ià
defšed
(
__hpux
è|| defšed(
__hpua
)

393 
	#COMPILER_ID
 "HP"

	)

396 
	#COMPILER_ID
 ""

	)

403 cÚ¡* 
	gšfo_comp”
 = "INFO" ":" "comp”[" 
COMPILER_ID
 "]";

404 #ifdeà
SIMULATE_ID


405 cÚ¡* 
	gšfo_simuÏ‹
 = "INFO" ":" "simuÏ‹[" 
SIMULATE_ID
 "]";

408 #ifdeà
__QNXNTO__


409 cÚ¡* 
	gqnxÁo
 = "INFO" ":" "qnxnto[]";

412 #ià
defšed
(
__CRAYXT_COMPUTE_LINUX_TARGET
)

413 cÚ¡ *
	gšfo_üay
 = "INFO" ":" "compiler_wrapper[CrayPrgEnv]";

416 
	#STRINGIFY_HELPER
(
X
è#X

	)

417 
	#STRINGIFY
(
X
è
	`STRINGIFY_HELPER
(X)

	)

420 #ià
defšed
(
__lšux
è|| defšed(
__lšux__
è|| defšed(
lšux
)

421 
	#PLATFORM_ID
 "Lšux"

	)

423 #–ià
defšed
(
__MSYS__
)

424 
	#PLATFORM_ID
 "MSYS"

	)

426 #–ià
defšed
(
__CYGWIN__
)

427 
	#PLATFORM_ID
 "Cygwš"

	)

429 #–ià
defšed
(
__MINGW32__
)

430 
	#PLATFORM_ID
 "MšGW"

	)

432 #–ià
defšed
(
__APPLE__
)

433 
	#PLATFORM_ID
 "D¬wš"

	)

435 #–ià
defšed
(
_WIN32
è|| defšed(
__WIN32__
è|| defšed(
WIN32
)

436 
	#PLATFORM_ID
 "Wšdows"

	)

438 #–ià
defšed
(
__F»eBSD__
è|| defšed(
__F»eBSD
)

439 
	#PLATFORM_ID
 "F»eBSD"

	)

441 #–ià
defšed
(
__N‘BSD__
è|| defšed(
__N‘BSD
)

442 
	#PLATFORM_ID
 "N‘BSD"

	)

444 #–ià
defšed
(
__O³nBSD__
è|| defšed(
__OPENBSD
)

445 
	#PLATFORM_ID
 "O³nBSD"

	)

447 #–ià
defšed
(
__sun
è|| defšed(
sun
)

448 
	#PLATFORM_ID
 "SunOS"

	)

450 #–ià
defšed
(
_AIX
è|| defšed(
__AIX
è|| defšed(
__AIX__
è|| defšed(
__aix
è|| defšed(
__aix__
)

451 
	#PLATFORM_ID
 "AIX"

	)

453 #–ià
defšed
(
__hpux
è|| defšed(
__hpux__
)

454 
	#PLATFORM_ID
 "HP-UX"

	)

456 #–ià
defšed
(
__HAIKU__
)

457 
	#PLATFORM_ID
 "Haiku"

	)

459 #–ià
defšed
(
__BeOS
è|| defšed(
__BEOS__
è|| defšed(
_BEOS
)

460 
	#PLATFORM_ID
 "BeOS"

	)

462 #–ià
defšed
(
__QNX__
è|| defšed(
__QNXNTO__
)

463 
	#PLATFORM_ID
 "QNX"

	)

465 #–ià
defšed
(
__Œu64
è|| defšed(
_Œu64
è|| defšed(
__TRU64__
)

466 
	#PLATFORM_ID
 "Tru64"

	)

468 #–ià
defšed
(
__riscos
è|| defšed(
__riscos__
)

469 
	#PLATFORM_ID
 "RISCos"

	)

471 #–ià
defšed
(
__sšix
è|| defšed(
__sšix__
è|| defšed(
__SINIX__
)

472 
	#PLATFORM_ID
 "SINIX"

	)

474 #–ià
defšed
(
__UNIX_SV__
)

475 
	#PLATFORM_ID
 "UNIX_SV"

	)

477 #–ià
defšed
(
__bsdos__
)

478 
	#PLATFORM_ID
 "BSDOS"

	)

480 #–ià
defšed
(
_MPRAS
è|| defšed(
MPRAS
)

481 
	#PLATFORM_ID
 "MP-RAS"

	)

483 #–ià
defšed
(
__osf
è|| defšed(
__osf__
)

484 
	#PLATFORM_ID
 "OSF1"

	)

486 #–ià
defšed
(
_SCO_SV
è|| defšed(
SCO_SV
è|| defšed(
sco_sv
)

487 
	#PLATFORM_ID
 "SCO_SV"

	)

489 #–ià
defšed
(
__uÉrix
è|| defšed(
__uÉrix__
è|| defšed(
_ULTRIX
)

490 
	#PLATFORM_ID
 "ULTRIX"

	)

492 #–ià
defšed
(
__XENIX__
è|| defšed(
_XENIX
è|| defšed(
XENIX
)

493 
	#PLATFORM_ID
 "X’ix"

	)

495 #–ià
defšed
(
__WATCOMC__
)

496 #ià
defšed
(
__LINUX__
)

497 
	#PLATFORM_ID
 "Lšux"

	)

499 #–ià
defšed
(
__DOS__
)

500 
	#PLATFORM_ID
 "DOS"

	)

502 #–ià
defšed
(
__OS2__
)

503 
	#PLATFORM_ID
 "OS2"

	)

505 #–ià
defšed
(
__WINDOWS__
)

506 
	#PLATFORM_ID
 "Wšdows3x"

	)

508 #–ià
defšed
(
__VXWORKS__
)

509 
	#PLATFORM_ID
 "VxWÜks"

	)

512 
	#PLATFORM_ID


	)

515 #–ià
defšed
(
__INTEGRITY
)

516 #ià
defšed
(
INT_178B
)

517 
	#PLATFORM_ID
 "IÁegr™y178"

	)

520 
	#PLATFORM_ID
 "IÁegr™y"

	)

524 
	#PLATFORM_ID


	)

533 #ià
defšed
(
_WIN32
è&& defšed(
_MSC_VER
)

534 #ià
defšed
(
_M_IA64
)

535 
	#ARCHITECTURE_ID
 "IA64"

	)

537 #–ià
defšed
(
_M_ARM64EC
)

538 
	#ARCHITECTURE_ID
 "ARM64EC"

	)

540 #–ià
defšed
(
_M_X64
è|| defšed(
_M_AMD64
)

541 
	#ARCHITECTURE_ID
 "x64"

	)

543 #–ià
defšed
(
_M_IX86
)

544 
	#ARCHITECTURE_ID
 "X86"

	)

546 #–ià
defšed
(
_M_ARM64
)

547 
	#ARCHITECTURE_ID
 "ARM64"

	)

549 #–ià
defšed
(
_M_ARM
)

550 #ià
_M_ARM
 == 4

551 
	#ARCHITECTURE_ID
 "ARMV4I"

	)

552 #–ià
_M_ARM
 == 5

553 
	#ARCHITECTURE_ID
 "ARMV5I"

	)

555 
	#ARCHITECTURE_ID
 "ARMV" 
	`STRINGIFY
(
_M_ARM
)

	)

558 #–ià
defšed
(
_M_MIPS
)

559 
	#ARCHITECTURE_ID
 "MIPS"

	)

561 #–ià
defšed
(
_M_SH
)

562 
	#ARCHITECTURE_ID
 "SHx"

	)

565 
	#ARCHITECTURE_ID
 ""

	)

568 #–ià
defšed
(
__WATCOMC__
)

569 #ià
defšed
(
_M_I86
)

570 
	#ARCHITECTURE_ID
 "I86"

	)

572 #–ià
defšed
(
_M_IX86
)

573 
	#ARCHITECTURE_ID
 "X86"

	)

576 
	#ARCHITECTURE_ID
 ""

	)

579 #–ià
defšed
(
__IAR_SYSTEMS_ICC__
è|| defšed(
__IAR_SYSTEMS_ICC
)

580 #ià
defšed
(
__ICCARM__
)

581 
	#ARCHITECTURE_ID
 "ARM"

	)

583 #–ià
defšed
(
__ICCRX__
)

584 
	#ARCHITECTURE_ID
 "RX"

	)

586 #–ià
defšed
(
__ICCRH850__
)

587 
	#ARCHITECTURE_ID
 "RH850"

	)

589 #–ià
defšed
(
__ICCRL78__
)

590 
	#ARCHITECTURE_ID
 "RL78"

	)

592 #–ià
defšed
(
__ICCRISCV__
)

593 
	#ARCHITECTURE_ID
 "RISCV"

	)

595 #–ià
defšed
(
__ICCAVR__
)

596 
	#ARCHITECTURE_ID
 "AVR"

	)

598 #–ià
defšed
(
__ICC430__
)

599 
	#ARCHITECTURE_ID
 "MSP430"

	)

601 #–ià
defšed
(
__ICCV850__
)

602 
	#ARCHITECTURE_ID
 "V850"

	)

604 #–ià
defšed
(
__ICC8051__
)

605 
	#ARCHITECTURE_ID
 "8051"

	)

607 #–ià
defšed
(
__ICCSTM8__
)

608 
	#ARCHITECTURE_ID
 "STM8"

	)

611 
	#ARCHITECTURE_ID
 ""

	)

614 #–ià
defšed
(
__ghs__
)

615 #ià
defšed
(
__PPC64__
)

616 
	#ARCHITECTURE_ID
 "PPC64"

	)

618 #–ià
defšed
(
__µc__
)

619 
	#ARCHITECTURE_ID
 "PPC"

	)

621 #–ià
defšed
(
__ARM__
)

622 
	#ARCHITECTURE_ID
 "ARM"

	)

624 #–ià
defšed
(
__x86_64__
)

625 
	#ARCHITECTURE_ID
 "x64"

	)

627 #–ià
defšed
(
__i386__
)

628 
	#ARCHITECTURE_ID
 "X86"

	)

631 
	#ARCHITECTURE_ID
 ""

	)

634 #–ià
defšed
(
__TI_COMPILER_VERSION__
)

635 #ià
defšed
(
__TI_ARM__
)

636 
	#ARCHITECTURE_ID
 "ARM"

	)

638 #–ià
defšed
(
__MSP430__
)

639 
	#ARCHITECTURE_ID
 "MSP430"

	)

641 #–ià
defšed
(
__TMS320C28XX__
)

642 
	#ARCHITECTURE_ID
 "TMS320C28x"

	)

644 #–ià
defšed
(
__TMS320C6X__
è|| defšed(
_TMS320C6X
)

645 
	#ARCHITECTURE_ID
 "TMS320C6x"

	)

648 
	#ARCHITECTURE_ID
 ""

	)

652 
	#ARCHITECTURE_ID


	)

656 
	#DEC
(
n
) \

657 ('0' + (((
n
) / 10000000)%10)), \

658 ('0' + (((
n
) / 1000000)%10)), \

659 ('0' + (((
n
) / 100000)%10)), \

660 ('0' + (((
n
) / 10000)%10)), \

661 ('0' + (((
n
) / 1000)%10)), \

662 ('0' + (((
n
) / 100)%10)), \

663 ('0' + (((
n
) / 10)%10)), \

664 ('0' + ((
n
è% 10))

	)

667 
	#HEX
(
n
) \

668 ('0' + ((
n
)>>28 & 0xF)), \

669 ('0' + ((
n
)>>24 & 0xF)), \

670 ('0' + ((
n
)>>20 & 0xF)), \

671 ('0' + ((
n
)>>16 & 0xF)), \

672 ('0' + ((
n
)>>12 & 0xF)), \

673 ('0' + ((
n
)>>8 & 0xF)), \

674 ('0' + ((
n
)>>4 & 0xF)), \

675 ('0' + ((
n
è& 0xF))

	)

678 #ifdeà
COMPILER_VERSION


679 cÚ¡* 
	gšfo_v”siÚ
 = "INFO" ":" "comp”_v”siÚ[" 
COMPILER_VERSION
 "]";

682 #–ià
defšed
(
COMPILER_VERSION_MAJOR
)

683 cÚ¡ 
	gšfo_v”siÚ
[] = {

686 
COMPILER_VERSION_MAJOR
,

687 #ifdeà
COMPILER_VERSION_MINOR


688 '.', 
COMPILER_VERSION_MINOR
,

689 #ifdeà
COMPILER_VERSION_PATCH


690 '.', 
COMPILER_VERSION_PATCH
,

691 #ifdeà
COMPILER_VERSION_TWEAK


692 '.', 
COMPILER_VERSION_TWEAK
,

700 #ifdeà
COMPILER_VERSION_INTERNAL


701 cÚ¡ 
	gšfo_v”siÚ_š‹º®
[] = {

705 
COMPILER_VERSION_INTERNAL
,']','\0'};

706 #–ià
defšed
(
COMPILER_VERSION_INTERNAL_STR
)

707 cÚ¡* 
	gšfo_v”siÚ_š‹º®
 = "INFO" ":" "comp”_v”siÚ_š‹º®[" 
COMPILER_VERSION_INTERNAL_STR
 "]";

711 #ifdeà
SIMULATE_VERSION_MAJOR


712 cÚ¡ 
	gšfo_simuÏ‹_v”siÚ
[] = {

715 
SIMULATE_VERSION_MAJOR
,

716 #ifdeà
SIMULATE_VERSION_MINOR


717 '.', 
SIMULATE_VERSION_MINOR
,

718 #ifdeà
SIMULATE_VERSION_PATCH


719 '.', 
SIMULATE_VERSION_PATCH
,

720 #ifdeà
SIMULATE_VERSION_TWEAK


721 '.', 
SIMULATE_VERSION_TWEAK
,

732 cÚ¡* 
	gšfo_¶©fÜm
 = "INFO" ":" "¶©fÜm[" 
PLATFORM_ID
 "]";

733 cÚ¡* 
	gšfo_¬ch
 = "INFO" ":" "¬ch[" 
ARCHITECTURE_ID
 "]";

737 #ià!
defšed
(
__STDC__
è&& !defšed(
__şªg__
)

738 #ià
defšed
(
_MSC_VER
è|| defšed(
__ibmxl__
è|| defšed(
__IBMC__
)

739 
	#C_VERSION
 "90"

	)

741 
	#C_VERSION


	)

743 #–ià
__STDC_VERSION__
 > 201710L

744 
	#C_VERSION
 "23"

	)

745 #–ià
__STDC_VERSION__
 >= 201710L

746 
	#C_VERSION
 "17"

	)

747 #–ià
__STDC_VERSION__
 >= 201000L

748 
	#C_VERSION
 "11"

	)

749 #–ià
__STDC_VERSION__
 >= 199901L

750 
	#C_VERSION
 "99"

	)

752 
	#C_VERSION
 "90"

	)

754 cÚ¡ * 
	gšfo_Ïnguage_¡ªd¬d_deçuÉ
 =

755 "INFO" ":" "¡ªd¬d_deçuÉ[" 
C_VERSION
 "]";

757 cÚ¡ * 
	gšfo_Ïnguage_ex‹nsiÚs_deçuÉ
 = "INFO" ":" "extensions_default["

759 #ià(
defšed
(
__şªg__
è|| defšed(
__GNUC__
) || \

760 
defšed
(
__TI_COMPILER_VERSION__
)) && \

761 !
defšed
(
__STRICT_ANSI__
è&& !defšed(
_MSC_VER
)

770 #ifdeà
ID_VOID_MAIN


771 
	$maš
(è{
	}
}

773 #ià
defšed
(
__CLASSIC_C__
)

774 
	$maš
(
¬gc
, 
¬gv
) argc; *argv[];

776 
	$maš
(
¬gc
, * 
¬gv
[])

779 
»quœe
 = 0;

780 
»quœe
 +ğ
šfo_comp”
[
¬gc
];

781 
»quœe
 +ğ
šfo_¶©fÜm
[
¬gc
];

782 
»quœe
 +ğ
šfo_¬ch
[
¬gc
];

783 #ifdeà
COMPILER_VERSION_MAJOR


784 
»quœe
 +ğ
šfo_v”siÚ
[
¬gc
];

786 #ifdeà
COMPILER_VERSION_INTERNAL


787 
»quœe
 +ğ
šfo_v”siÚ_š‹º®
[
¬gc
];

789 #ifdeà
SIMULATE_ID


790 
»quœe
 +ğ
šfo_simuÏ‹
[
¬gc
];

792 #ifdeà
SIMULATE_VERSION_MAJOR


793 
»quœe
 +ğ
šfo_simuÏ‹_v”siÚ
[
¬gc
];

795 #ià
	`defšed
(
__CRAYXT_COMPUTE_LINUX_TARGET
)

796 
»quœe
 +ğ
šfo_üay
[
¬gc
];

798 
»quœe
 +ğ
šfo_Ïnguage_¡ªd¬d_deçuÉ
[
¬gc
];

799 
»quœe
 +ğ
šfo_Ïnguage_ex‹nsiÚs_deçuÉ
[
¬gc
];

800 ()
¬gv
;

801  
»quœe
;

802 
	}
}

	@build/CMakeFiles/3.22.1/CompilerIdCXX/CMakeCXXCompilerId.cpp

4 #iâdeà
__ılu¥lus


8 #ià!
defšed
(
__has_šşude
)

11 
	#__has_šşude
(
x
è0

	)

18 #ià
defšed
(
__COMO__
)

19 
	#COMPILER_ID
 "Com—u"

	)

21 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__COMO_VERSION__
 / 100)

	)

22 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__COMO_VERSION__
 % 100)

	)

24 #–ià
defšed
(
__INTEL_COMPILER
è|| defšed(
__ICC
)

25 
	#COMPILER_ID
 "IÁ–"

	)

26 #ià
defšed
(
_MSC_VER
)

27 
	#SIMULATE_ID
 "MSVC"

	)

29 #ià
defšed
(
__GNUC__
)

30 
	#SIMULATE_ID
 "GNU"

	)

34 #ià
__INTEL_COMPILER
 < 2021 || __INTEL_COMPILER == 202110 || __INTEL_COMPILER == 202111

35 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__INTEL_COMPILER
/100)

	)

36 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__INTEL_COMPILER
/10 % 10)

	)

37 #ià
defšed
(
__INTEL_COMPILER_UPDATE
)

38 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__INTEL_COMPILER_UPDATE
)

	)

40 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__INTEL_COMPILER
 % 10)

	)

43 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__INTEL_COMPILER
)

	)

44 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__INTEL_COMPILER_UPDATE
)

	)

47 
	#COMPILER_VERSION_PATCH
 
	`DEC
(0)

	)

49 #ià
defšed
(
__INTEL_COMPILER_BUILD_DATE
)

51 
	#COMPILER_VERSION_TWEAK
 
	`DEC
(
__INTEL_COMPILER_BUILD_DATE
)

	)

53 #ià
defšed
(
_MSC_VER
)

55 
	#SIMULATE_VERSION_MAJOR
 
	`DEC
(
_MSC_VER
 / 100)

	)

56 
	#SIMULATE_VERSION_MINOR
 
	`DEC
(
_MSC_VER
 % 100)

	)

58 #ià
defšed
(
__GNUC__
)

59 
	#SIMULATE_VERSION_MAJOR
 
	`DEC
(
__GNUC__
)

	)

60 #–ià
defšed
(
__GNUG__
)

61 
	#SIMULATE_VERSION_MAJOR
 
	`DEC
(
__GNUG__
)

	)

63 #ià
defšed
(
__GNUC_MINOR__
)

64 
	#SIMULATE_VERSION_MINOR
 
	`DEC
(
__GNUC_MINOR__
)

	)

66 #ià
defšed
(
__GNUC_PATCHLEVEL__
)

67 
	#SIMULATE_VERSION_PATCH
 
	`DEC
(
__GNUC_PATCHLEVEL__
)

	)

70 #–ià(
defšed
(
__şªg__
è&& defšed(
__INTEL_CLANG_COMPILER
)è|| defšed(
__INTEL_LLVM_COMPILER
)

71 
	#COMPILER_ID
 "IÁ–LLVM"

	)

72 #ià
defšed
(
_MSC_VER
)

73 
	#SIMULATE_ID
 "MSVC"

	)

75 #ià
defšed
(
__GNUC__
)

76 
	#SIMULATE_ID
 "GNU"

	)

82 #ià
__INTEL_LLVM_COMPILER
 < 1000000L

83 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__INTEL_LLVM_COMPILER
/100)

	)

84 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__INTEL_LLVM_COMPILER
/10 % 10)

	)

85 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__INTEL_LLVM_COMPILER
 % 10)

	)

87 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__INTEL_LLVM_COMPILER
/10000)

	)

88 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__INTEL_LLVM_COMPILER
/100 % 100)

	)

89 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__INTEL_LLVM_COMPILER
 % 100)

	)

91 #ià
defšed
(
_MSC_VER
)

93 
	#SIMULATE_VERSION_MAJOR
 
	`DEC
(
_MSC_VER
 / 100)

	)

94 
	#SIMULATE_VERSION_MINOR
 
	`DEC
(
_MSC_VER
 % 100)

	)

96 #ià
defšed
(
__GNUC__
)

97 
	#SIMULATE_VERSION_MAJOR
 
	`DEC
(
__GNUC__
)

	)

98 #–ià
defšed
(
__GNUG__
)

99 
	#SIMULATE_VERSION_MAJOR
 
	`DEC
(
__GNUG__
)

	)

101 #ià
defšed
(
__GNUC_MINOR__
)

102 
	#SIMULATE_VERSION_MINOR
 
	`DEC
(
__GNUC_MINOR__
)

	)

104 #ià
defšed
(
__GNUC_PATCHLEVEL__
)

105 
	#SIMULATE_VERSION_PATCH
 
	`DEC
(
__GNUC_PATCHLEVEL__
)

	)

108 #–ià
defšed
(
__PATHCC__
)

109 
	#COMPILER_ID
 "P©hSÿË"

	)

110 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__PATHCC__
)

	)

111 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__PATHCC_MINOR__
)

	)

112 #ià
defšed
(
__PATHCC_PATCHLEVEL__
)

113 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__PATHCC_PATCHLEVEL__
)

	)

116 #–ià
defšed
(
__BORLANDC__
è&& defšed(
__CODEGEARC_VERSION__
)

117 
	#COMPILER_ID
 "Emb¬ÿd”o"

	)

118 
	#COMPILER_VERSION_MAJOR
 
	`HEX
(
__CODEGEARC_VERSION__
>>24 & 0x00FF)

	)

119 
	#COMPILER_VERSION_MINOR
 
	`HEX
(
__CODEGEARC_VERSION__
>>16 & 0x00FF)

	)

120 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__CODEGEARC_VERSION__
 & 0xFFFF)

	)

122 #–ià
defšed
(
__BORLANDC__
)

123 
	#COMPILER_ID
 "BÜÏnd"

	)

125 
	#COMPILER_VERSION_MAJOR
 
	`HEX
(
__BORLANDC__
>>8)

	)

126 
	#COMPILER_VERSION_MINOR
 
	`HEX
(
__BORLANDC__
 & 0xFF)

	)

128 #–ià
defšed
(
__WATCOMC__
) && __WATCOMC__ < 1200

129 
	#COMPILER_ID
 "W©com"

	)

131 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__WATCOMC__
 / 100)

	)

132 
	#COMPILER_VERSION_MINOR
 
	`DEC
((
__WATCOMC__
 / 10è% 10)

	)

133 #ià(
__WATCOMC__
 % 10) > 0

134 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__WATCOMC__
 % 10)

	)

137 #–ià
defšed
(
__WATCOMC__
)

138 
	#COMPILER_ID
 "O³nW©com"

	)

140 
	#COMPILER_VERSION_MAJOR
 
	`DEC
((
__WATCOMC__
 - 1100è/ 100)

	)

141 
	#COMPILER_VERSION_MINOR
 
	`DEC
((
__WATCOMC__
 / 10è% 10)

	)

142 #ià(
__WATCOMC__
 % 10) > 0

143 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__WATCOMC__
 % 10)

	)

146 #–ià
defšed
(
__SUNPRO_CC
)

147 
	#COMPILER_ID
 "SunPro"

	)

148 #ià
__SUNPRO_CC
 >= 0x5100

150 
	#COMPILER_VERSION_MAJOR
 
	`HEX
(
__SUNPRO_CC
>>12)

	)

151 
	#COMPILER_VERSION_MINOR
 
	`HEX
(
__SUNPRO_CC
>>4 & 0xFF)

	)

152 
	#COMPILER_VERSION_PATCH
 
	`HEX
(
__SUNPRO_CC
 & 0xF)

	)

155 
	#COMPILER_VERSION_MAJOR
 
	`HEX
(
__SUNPRO_CC
>>8)

	)

156 
	#COMPILER_VERSION_MINOR
 
	`HEX
(
__SUNPRO_CC
>>4 & 0xF)

	)

157 
	#COMPILER_VERSION_PATCH
 
	`HEX
(
__SUNPRO_CC
 & 0xF)

	)

160 #–ià
defšed
(
__HP_aCC
)

161 
	#COMPILER_ID
 "HP"

	)

163 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__HP_aCC
/10000)

	)

164 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__HP_aCC
/100 % 100)

	)

165 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__HP_aCC
 % 100)

	)

167 #–ià
defšed
(
__DECCXX
)

168 
	#COMPILER_ID
 "Com·q"

	)

170 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__DECCXX_VER
/10000000)

	)

171 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__DECCXX_VER
/100000 % 100)

	)

172 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__DECCXX_VER
 % 10000)

	)

174 #–ià
defšed
(
__IBMCPP__
è&& defšed(
__COMPILER_VER__
)

175 
	#COMPILER_ID
 "zOS"

	)

177 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__IBMCPP__
/100)

	)

178 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__IBMCPP__
/10 % 10)

	)

179 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__IBMCPP__
 % 10)

	)

181 #–ià
defšed
(
__ibmxl__
è&& defšed(
__şªg__
)

182 
	#COMPILER_ID
 "XLCÏng"

	)

183 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__ibmxl_v”siÚ__
)

	)

184 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__ibmxl_»Ëa£__
)

	)

185 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__ibmxl_modifiÿtiÚ__
)

	)

186 
	#COMPILER_VERSION_TWEAK
 
	`DEC
(
__ibmxl_±f_fix_Ëv–__
)

	)

189 #–ià
defšed
(
__IBMCPP__
è&& !defšed(
__COMPILER_VER__
) && __IBMCPP__ >= 800

190 
	#COMPILER_ID
 "XL"

	)

192 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__IBMCPP__
/100)

	)

193 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__IBMCPP__
/10 % 10)

	)

194 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__IBMCPP__
 % 10)

	)

196 #–ià
defšed
(
__IBMCPP__
è&& !defšed(
__COMPILER_VER__
) && __IBMCPP__ < 800

197 
	#COMPILER_ID
 "Visu®Age"

	)

199 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__IBMCPP__
/100)

	)

200 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__IBMCPP__
/10 % 10)

	)

201 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__IBMCPP__
 % 10)

	)

203 #–ià
defšed
(
__NVCOMPILER
)

204 
	#COMPILER_ID
 "NVHPC"

	)

205 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__NVCOMPILER_MAJOR__
)

	)

206 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__NVCOMPILER_MINOR__
)

	)

207 #ià
defšed
(
__NVCOMPILER_PATCHLEVEL__
)

208 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__NVCOMPILER_PATCHLEVEL__
)

	)

211 #–ià
defšed
(
__PGI
)

212 
	#COMPILER_ID
 "PGI"

	)

213 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__PGIC__
)

	)

214 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__PGIC_MINOR__
)

	)

215 #ià
defšed
(
__PGIC_PATCHLEVEL__
)

216 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__PGIC_PATCHLEVEL__
)

	)

219 #–ià
defšed
(
_CRAYC
)

220 
	#COMPILER_ID
 "C¿y"

	)

221 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
_RELEASE_MAJOR
)

	)

222 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
_RELEASE_MINOR
)

	)

224 #–ià
defšed
(
__TI_COMPILER_VERSION__
)

225 
	#COMPILER_ID
 "TI"

	)

227 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__TI_COMPILER_VERSION__
/1000000)

	)

228 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__TI_COMPILER_VERSION__
/1000 % 1000)

	)

229 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__TI_COMPILER_VERSION__
 % 1000)

	)

231 #–ià
defšed
(
__CLANG_FUJITSU
)

232 
	#COMPILER_ID
 "Fuj™suCÏng"

	)

233 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__FCC_majÜ__
)

	)

234 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__FCC_mšÜ__
)

	)

235 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__FCC_·tchËv–__
)

	)

236 
	#COMPILER_VERSION_INTERNAL_STR
 
__şªg_v”siÚ__


	)

239 #–ià
defšed
(
__FUJITSU
)

240 
	#COMPILER_ID
 "Fuj™su"

	)

241 #ià
defšed
(
__FCC_v”siÚ__
)

242 
	#COMPILER_VERSION
 
__FCC_v”siÚ__


	)

243 #–ià
defšed
(
__FCC_majÜ__
)

244 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__FCC_majÜ__
)

	)

245 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__FCC_mšÜ__
)

	)

246 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__FCC_·tchËv–__
)

	)

248 #ià
defšed
(
__fcc_v”siÚ
)

249 
	#COMPILER_VERSION_INTERNAL
 
	`DEC
(
__fcc_v”siÚ
)

	)

250 #–ià
defšed
(
__FCC_VERSION
)

251 
	#COMPILER_VERSION_INTERNAL
 
	`DEC
(
__FCC_VERSION
)

	)

255 #–ià
defšed
(
__ghs__
)

256 
	#COMPILER_ID
 "GHS"

	)

258 #ifdeà
__GHS_VERSION_NUMBER


259 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__GHS_VERSION_NUMBER
 / 100)

	)

260 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__GHS_VERSION_NUMBER
 / 10 % 10)

	)

261 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__GHS_VERSION_NUMBER
 % 10)

	)

264 #–ià
defšed
(
__SCO_VERSION__
)

265 
	#COMPILER_ID
 "SCO"

	)

267 #–ià
defšed
(
__ARMCC_VERSION
è&& !defšed(
__şªg__
)

268 
	#COMPILER_ID
 "ARMCC"

	)

269 #ià
__ARMCC_VERSION
 >= 1000000

271 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__ARMCC_VERSION
/1000000)

	)

272 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__ARMCC_VERSION
/10000 % 100)

	)

273 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__ARMCC_VERSION
 % 10000)

	)

276 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__ARMCC_VERSION
/100000)

	)

277 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__ARMCC_VERSION
/10000 % 10)

	)

278 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__ARMCC_VERSION
 % 10000)

	)

282 #–ià
defšed
(
__şªg__
è&& defšed(
__­¶e_bud_v”siÚ__
)

283 
	#COMPILER_ID
 "AµËCÏng"

	)

284 #ià
defšed
(
_MSC_VER
)

285 
	#SIMULATE_ID
 "MSVC"

	)

287 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__şªg_majÜ__
)

	)

288 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__şªg_mšÜ__
)

	)

289 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__şªg_·tchËv–__
)

	)

290 #ià
defšed
(
_MSC_VER
)

292 
	#SIMULATE_VERSION_MAJOR
 
	`DEC
(
_MSC_VER
 / 100)

	)

293 
	#SIMULATE_VERSION_MINOR
 
	`DEC
(
_MSC_VER
 % 100)

	)

295 
	#COMPILER_VERSION_TWEAK
 
	`DEC
(
__­¶e_bud_v”siÚ__
)

	)

297 #–ià
defšed
(
__şªg__
è&& defšed(
__ARMCOMPILER_VERSION
)

298 
	#COMPILER_ID
 "ARMCÏng"

	)

299 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__ARMCOMPILER_VERSION
/1000000)

	)

300 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__ARMCOMPILER_VERSION
/10000 % 100)

	)

301 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__ARMCOMPILER_VERSION
 % 10000)

	)

302 
	#COMPILER_VERSION_INTERNAL
 
	`DEC
(
__ARMCOMPILER_VERSION
)

	)

304 #–ià
defšed
(
__şªg__
)

305 
	#COMPILER_ID
 "CÏng"

	)

306 #ià
defšed
(
_MSC_VER
)

307 
	#SIMULATE_ID
 "MSVC"

	)

309 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__şªg_majÜ__
)

	)

310 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__şªg_mšÜ__
)

	)

311 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__şªg_·tchËv–__
)

	)

312 #ià
defšed
(
_MSC_VER
)

314 
	#SIMULATE_VERSION_MAJOR
 
	`DEC
(
_MSC_VER
 / 100)

	)

315 
	#SIMULATE_VERSION_MINOR
 
	`DEC
(
_MSC_VER
 % 100)

	)

318 #–ià
defšed
(
__GNUC__
è|| defšed(
__GNUG__
)

319 
	#COMPILER_ID
 "GNU"

	)

320 #ià
defšed
(
__GNUC__
)

321 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__GNUC__
)

	)

323 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
__GNUG__
)

	)

325 #ià
defšed
(
__GNUC_MINOR__
)

326 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
__GNUC_MINOR__
)

	)

328 #ià
defšed
(
__GNUC_PATCHLEVEL__
)

329 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__GNUC_PATCHLEVEL__
)

	)

332 #–ià
defšed
(
_MSC_VER
)

333 
	#COMPILER_ID
 "MSVC"

	)

335 
	#COMPILER_VERSION_MAJOR
 
	`DEC
(
_MSC_VER
 / 100)

	)

336 
	#COMPILER_VERSION_MINOR
 
	`DEC
(
_MSC_VER
 % 100)

	)

337 #ià
defšed
(
_MSC_FULL_VER
)

338 #ià
_MSC_VER
 >= 1400

340 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
_MSC_FULL_VER
 % 100000)

	)

343 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
_MSC_FULL_VER
 % 10000)

	)

346 #ià
defšed
(
_MSC_BUILD
)

347 
	#COMPILER_VERSION_TWEAK
 
	`DEC
(
_MSC_BUILD
)

	)

350 #–ià
defšed
(
__VISUALDSPVERSION__
è|| defšed(
__ADSPBLACKFIN__
è|| defšed(
__ADSPTS__
è|| defšed(
__ADSP21000__
)

351 
	#COMPILER_ID
 "ADSP"

	)

352 #ià
defšed
(
__VISUALDSPVERSION__
)

354 
	#COMPILER_VERSION_MAJOR
 
	`HEX
(
__VISUALDSPVERSION__
>>24)

	)

355 
	#COMPILER_VERSION_MINOR
 
	`HEX
(
__VISUALDSPVERSION__
>>16 & 0xFF)

	)

356 
	#COMPILER_VERSION_PATCH
 
	`HEX
(
__VISUALDSPVERSION__
>>8 & 0xFF)

	)

359 #–ià
defšed
(
__IAR_SYSTEMS_ICC__
è|| defšed(
__IAR_SYSTEMS_ICC
)

360 
	#COMPILER_ID
 "IAR"

	)

361 #ià
defšed
(
__VER__
è&& defšed(
__ICCARM__
)

362 
	#COMPILER_VERSION_MAJOR
 
	`DEC
((
__VER__
è/ 1000000)

	)

363 
	#COMPILER_VERSION_MINOR
 
	`DEC
(((
__VER__
è/ 1000è% 1000)

	)

364 
	#COMPILER_VERSION_PATCH
 
	`DEC
((
__VER__
è% 1000)

	)

365 
	#COMPILER_VERSION_INTERNAL
 
	`DEC
(
__IAR_SYSTEMS_ICC__
)

	)

366 #–ià
defšed
(
__VER__
è&& (defšed(
__ICCAVR__
è|| defšed(
__ICCRX__
è|| defšed(
__ICCRH850__
è|| defšed(
__ICCRL78__
è|| defšed(
__ICC430__
è|| defšed(
__ICCRISCV__
è|| defšed(
__ICCV850__
è|| defšed(
__ICC8051__
è|| defšed(
__ICCSTM8__
))

367 
	#COMPILER_VERSION_MAJOR
 
	`DEC
((
__VER__
è/ 100)

	)

368 
	#COMPILER_VERSION_MINOR
 
	`DEC
((
__VER__
è- (((__VER__è/ 100)*100))

	)

369 
	#COMPILER_VERSION_PATCH
 
	`DEC
(
__SUBVERSION__
)

	)

370 
	#COMPILER_VERSION_INTERNAL
 
	`DEC
(
__IAR_SYSTEMS_ICC__
)

	)

377 #–ià
defšed
(
__hpux
è|| defšed(
__hpua
)

378 
	#COMPILER_ID
 "HP"

	)

381 
	#COMPILER_ID
 ""

	)

388 cÚ¡* 
	gšfo_comp”
 = "INFO" ":" "comp”[" 
COMPILER_ID
 "]";

389 #ifdeà
SIMULATE_ID


390 cÚ¡* 
	gšfo_simuÏ‹
 = "INFO" ":" "simuÏ‹[" 
SIMULATE_ID
 "]";

393 #ifdeà
__QNXNTO__


394 cÚ¡* 
	gqnxÁo
 = "INFO" ":" "qnxnto[]";

397 #ià
defšed
(
__CRAYXT_COMPUTE_LINUX_TARGET
)

398 cÚ¡ *
	gšfo_üay
 = "INFO" ":" "compiler_wrapper[CrayPrgEnv]";

401 
	#STRINGIFY_HELPER
(
X
è#X

	)

402 
	#STRINGIFY
(
X
è
	`STRINGIFY_HELPER
(X)

	)

405 #ià
defšed
(
__lšux
è|| defšed(
__lšux__
è|| defšed(
lšux
)

406 
	#PLATFORM_ID
 "Lšux"

	)

408 #–ià
defšed
(
__MSYS__
)

409 
	#PLATFORM_ID
 "MSYS"

	)

411 #–ià
defšed
(
__CYGWIN__
)

412 
	#PLATFORM_ID
 "Cygwš"

	)

414 #–ià
defšed
(
__MINGW32__
)

415 
	#PLATFORM_ID
 "MšGW"

	)

417 #–ià
defšed
(
__APPLE__
)

418 
	#PLATFORM_ID
 "D¬wš"

	)

420 #–ià
defšed
(
_WIN32
è|| defšed(
__WIN32__
è|| defšed(
WIN32
)

421 
	#PLATFORM_ID
 "Wšdows"

	)

423 #–ià
defšed
(
__F»eBSD__
è|| defšed(
__F»eBSD
)

424 
	#PLATFORM_ID
 "F»eBSD"

	)

426 #–ià
defšed
(
__N‘BSD__
è|| defšed(
__N‘BSD
)

427 
	#PLATFORM_ID
 "N‘BSD"

	)

429 #–ià
defšed
(
__O³nBSD__
è|| defšed(
__OPENBSD
)

430 
	#PLATFORM_ID
 "O³nBSD"

	)

432 #–ià
defšed
(
__sun
è|| defšed(
sun
)

433 
	#PLATFORM_ID
 "SunOS"

	)

435 #–ià
defšed
(
_AIX
è|| defšed(
__AIX
è|| defšed(
__AIX__
è|| defšed(
__aix
è|| defšed(
__aix__
)

436 
	#PLATFORM_ID
 "AIX"

	)

438 #–ià
defšed
(
__hpux
è|| defšed(
__hpux__
)

439 
	#PLATFORM_ID
 "HP-UX"

	)

441 #–ià
defšed
(
__HAIKU__
)

442 
	#PLATFORM_ID
 "Haiku"

	)

444 #–ià
defšed
(
__BeOS
è|| defšed(
__BEOS__
è|| defšed(
_BEOS
)

445 
	#PLATFORM_ID
 "BeOS"

	)

447 #–ià
defšed
(
__QNX__
è|| defšed(
__QNXNTO__
)

448 
	#PLATFORM_ID
 "QNX"

	)

450 #–ià
defšed
(
__Œu64
è|| defšed(
_Œu64
è|| defšed(
__TRU64__
)

451 
	#PLATFORM_ID
 "Tru64"

	)

453 #–ià
defšed
(
__riscos
è|| defšed(
__riscos__
)

454 
	#PLATFORM_ID
 "RISCos"

	)

456 #–ià
defšed
(
__sšix
è|| defšed(
__sšix__
è|| defšed(
__SINIX__
)

457 
	#PLATFORM_ID
 "SINIX"

	)

459 #–ià
defšed
(
__UNIX_SV__
)

460 
	#PLATFORM_ID
 "UNIX_SV"

	)

462 #–ià
defšed
(
__bsdos__
)

463 
	#PLATFORM_ID
 "BSDOS"

	)

465 #–ià
defšed
(
_MPRAS
è|| defšed(
MPRAS
)

466 
	#PLATFORM_ID
 "MP-RAS"

	)

468 #–ià
defšed
(
__osf
è|| defšed(
__osf__
)

469 
	#PLATFORM_ID
 "OSF1"

	)

471 #–ià
defšed
(
_SCO_SV
è|| defšed(
SCO_SV
è|| defšed(
sco_sv
)

472 
	#PLATFORM_ID
 "SCO_SV"

	)

474 #–ià
defšed
(
__uÉrix
è|| defšed(
__uÉrix__
è|| defšed(
_ULTRIX
)

475 
	#PLATFORM_ID
 "ULTRIX"

	)

477 #–ià
defšed
(
__XENIX__
è|| defšed(
_XENIX
è|| defšed(
XENIX
)

478 
	#PLATFORM_ID
 "X’ix"

	)

480 #–ià
defšed
(
__WATCOMC__
)

481 #ià
defšed
(
__LINUX__
)

482 
	#PLATFORM_ID
 "Lšux"

	)

484 #–ià
defšed
(
__DOS__
)

485 
	#PLATFORM_ID
 "DOS"

	)

487 #–ià
defšed
(
__OS2__
)

488 
	#PLATFORM_ID
 "OS2"

	)

490 #–ià
defšed
(
__WINDOWS__
)

491 
	#PLATFORM_ID
 "Wšdows3x"

	)

493 #–ià
defšed
(
__VXWORKS__
)

494 
	#PLATFORM_ID
 "VxWÜks"

	)

497 
	#PLATFORM_ID


	)

500 #–ià
defšed
(
__INTEGRITY
)

501 #ià
defšed
(
INT_178B
)

502 
	#PLATFORM_ID
 "IÁegr™y178"

	)

505 
	#PLATFORM_ID
 "IÁegr™y"

	)

509 
	#PLATFORM_ID


	)

518 #ià
defšed
(
_WIN32
è&& defšed(
_MSC_VER
)

519 #ià
defšed
(
_M_IA64
)

520 
	#ARCHITECTURE_ID
 "IA64"

	)

522 #–ià
defšed
(
_M_ARM64EC
)

523 
	#ARCHITECTURE_ID
 "ARM64EC"

	)

525 #–ià
defšed
(
_M_X64
è|| defšed(
_M_AMD64
)

526 
	#ARCHITECTURE_ID
 "x64"

	)

528 #–ià
defšed
(
_M_IX86
)

529 
	#ARCHITECTURE_ID
 "X86"

	)

531 #–ià
defšed
(
_M_ARM64
)

532 
	#ARCHITECTURE_ID
 "ARM64"

	)

534 #–ià
defšed
(
_M_ARM
)

535 #ià
_M_ARM
 == 4

536 
	#ARCHITECTURE_ID
 "ARMV4I"

	)

537 #–ià
_M_ARM
 == 5

538 
	#ARCHITECTURE_ID
 "ARMV5I"

	)

540 
	#ARCHITECTURE_ID
 "ARMV" 
	`STRINGIFY
(
_M_ARM
)

	)

543 #–ià
defšed
(
_M_MIPS
)

544 
	#ARCHITECTURE_ID
 "MIPS"

	)

546 #–ià
defšed
(
_M_SH
)

547 
	#ARCHITECTURE_ID
 "SHx"

	)

550 
	#ARCHITECTURE_ID
 ""

	)

553 #–ià
defšed
(
__WATCOMC__
)

554 #ià
defšed
(
_M_I86
)

555 
	#ARCHITECTURE_ID
 "I86"

	)

557 #–ià
defšed
(
_M_IX86
)

558 
	#ARCHITECTURE_ID
 "X86"

	)

561 
	#ARCHITECTURE_ID
 ""

	)

564 #–ià
defšed
(
__IAR_SYSTEMS_ICC__
è|| defšed(
__IAR_SYSTEMS_ICC
)

565 #ià
defšed
(
__ICCARM__
)

566 
	#ARCHITECTURE_ID
 "ARM"

	)

568 #–ià
defšed
(
__ICCRX__
)

569 
	#ARCHITECTURE_ID
 "RX"

	)

571 #–ià
defšed
(
__ICCRH850__
)

572 
	#ARCHITECTURE_ID
 "RH850"

	)

574 #–ià
defšed
(
__ICCRL78__
)

575 
	#ARCHITECTURE_ID
 "RL78"

	)

577 #–ià
defšed
(
__ICCRISCV__
)

578 
	#ARCHITECTURE_ID
 "RISCV"

	)

580 #–ià
defšed
(
__ICCAVR__
)

581 
	#ARCHITECTURE_ID
 "AVR"

	)

583 #–ià
defšed
(
__ICC430__
)

584 
	#ARCHITECTURE_ID
 "MSP430"

	)

586 #–ià
defšed
(
__ICCV850__
)

587 
	#ARCHITECTURE_ID
 "V850"

	)

589 #–ià
defšed
(
__ICC8051__
)

590 
	#ARCHITECTURE_ID
 "8051"

	)

592 #–ià
defšed
(
__ICCSTM8__
)

593 
	#ARCHITECTURE_ID
 "STM8"

	)

596 
	#ARCHITECTURE_ID
 ""

	)

599 #–ià
defšed
(
__ghs__
)

600 #ià
defšed
(
__PPC64__
)

601 
	#ARCHITECTURE_ID
 "PPC64"

	)

603 #–ià
defšed
(
__µc__
)

604 
	#ARCHITECTURE_ID
 "PPC"

	)

606 #–ià
defšed
(
__ARM__
)

607 
	#ARCHITECTURE_ID
 "ARM"

	)

609 #–ià
defšed
(
__x86_64__
)

610 
	#ARCHITECTURE_ID
 "x64"

	)

612 #–ià
defšed
(
__i386__
)

613 
	#ARCHITECTURE_ID
 "X86"

	)

616 
	#ARCHITECTURE_ID
 ""

	)

619 #–ià
defšed
(
__TI_COMPILER_VERSION__
)

620 #ià
defšed
(
__TI_ARM__
)

621 
	#ARCHITECTURE_ID
 "ARM"

	)

623 #–ià
defšed
(
__MSP430__
)

624 
	#ARCHITECTURE_ID
 "MSP430"

	)

626 #–ià
defšed
(
__TMS320C28XX__
)

627 
	#ARCHITECTURE_ID
 "TMS320C28x"

	)

629 #–ià
defšed
(
__TMS320C6X__
è|| defšed(
_TMS320C6X
)

630 
	#ARCHITECTURE_ID
 "TMS320C6x"

	)

633 
	#ARCHITECTURE_ID
 ""

	)

637 
	#ARCHITECTURE_ID


	)

641 
	#DEC
(
n
) \

642 ('0' + (((
n
) / 10000000)%10)), \

643 ('0' + (((
n
) / 1000000)%10)), \

644 ('0' + (((
n
) / 100000)%10)), \

645 ('0' + (((
n
) / 10000)%10)), \

646 ('0' + (((
n
) / 1000)%10)), \

647 ('0' + (((
n
) / 100)%10)), \

648 ('0' + (((
n
) / 10)%10)), \

649 ('0' + ((
n
è% 10))

	)

652 
	#HEX
(
n
) \

653 ('0' + ((
n
)>>28 & 0xF)), \

654 ('0' + ((
n
)>>24 & 0xF)), \

655 ('0' + ((
n
)>>20 & 0xF)), \

656 ('0' + ((
n
)>>16 & 0xF)), \

657 ('0' + ((
n
)>>12 & 0xF)), \

658 ('0' + ((
n
)>>8 & 0xF)), \

659 ('0' + ((
n
)>>4 & 0xF)), \

660 ('0' + ((
n
è& 0xF))

	)

663 #ifdeà
COMPILER_VERSION


664 cÚ¡* 
	gšfo_v”siÚ
 = "INFO" ":" "comp”_v”siÚ[" 
COMPILER_VERSION
 "]";

667 #–ià
defšed
(
COMPILER_VERSION_MAJOR
)

668 cÚ¡ 
	gšfo_v”siÚ
[] = {

671 
COMPILER_VERSION_MAJOR
,

672 #ifdeà
COMPILER_VERSION_MINOR


673 '.', 
COMPILER_VERSION_MINOR
,

674 #ifdeà
COMPILER_VERSION_PATCH


675 '.', 
COMPILER_VERSION_PATCH
,

676 #ifdeà
COMPILER_VERSION_TWEAK


677 '.', 
COMPILER_VERSION_TWEAK
,

685 #ifdeà
COMPILER_VERSION_INTERNAL


686 cÚ¡ 
	gšfo_v”siÚ_š‹º®
[] = {

690 
COMPILER_VERSION_INTERNAL
,']','\0'};

691 #–ià
defšed
(
COMPILER_VERSION_INTERNAL_STR
)

692 cÚ¡* 
	gšfo_v”siÚ_š‹º®
 = "INFO" ":" "comp”_v”siÚ_š‹º®[" 
COMPILER_VERSION_INTERNAL_STR
 "]";

696 #ifdeà
SIMULATE_VERSION_MAJOR


697 cÚ¡ 
	gšfo_simuÏ‹_v”siÚ
[] = {

700 
SIMULATE_VERSION_MAJOR
,

701 #ifdeà
SIMULATE_VERSION_MINOR


702 '.', 
SIMULATE_VERSION_MINOR
,

703 #ifdeà
SIMULATE_VERSION_PATCH


704 '.', 
SIMULATE_VERSION_PATCH
,

705 #ifdeà
SIMULATE_VERSION_TWEAK


706 '.', 
SIMULATE_VERSION_TWEAK
,

717 cÚ¡* 
	gšfo_¶©fÜm
 = "INFO" ":" "¶©fÜm[" 
PLATFORM_ID
 "]";

718 cÚ¡* 
	gšfo_¬ch
 = "INFO" ":" "¬ch[" 
ARCHITECTURE_ID
 "]";

722 #ià
defšed
(
__INTEL_COMPILER
è&& defšed(
_MSVC_LANG
) && _MSVC_LANG < 201403L

723 #ià
defšed
(
__INTEL_CXX11_MODE__
)

724 #ià
defšed
(
__ıp_agg»g©e_nsdmi
)

725 
	#CXX_STD
 201402L

	)

727 
	#CXX_STD
 201103L

	)

730 
	#CXX_STD
 199711L

	)

732 #–ià
defšed
(
_MSC_VER
è&& defšed(
_MSVC_LANG
)

733 
	#CXX_STD
 
_MSVC_LANG


	)

735 
	#CXX_STD
 
__ılu¥lus


	)

738 cÚ¡ * 
	gšfo_Ïnguage_¡ªd¬d_deçuÉ
 = "INFO" ":" "standard_default["

739 #ià
CXX_STD
 > 202002L

741 #–ià
CXX_STD
 > 201703L

743 #–ià
CXX_STD
 >= 201703L

745 #–ià
CXX_STD
 >= 201402L

747 #–ià
CXX_STD
 >= 201103L

754 cÚ¡ * 
	gšfo_Ïnguage_ex‹nsiÚs_deçuÉ
 = "INFO" ":" "extensions_default["

756 #ià(
defšed
(
__şªg__
è|| defšed(
__GNUC__
) || \

757 
defšed
(
__TI_COMPILER_VERSION__
)) && \

758 !
defšed
(
__STRICT_ANSI__
è&& !defšed(
_MSC_VER
)

767 
	$maš
(
¬gc
, * 
¬gv
[])

769 
»quœe
 = 0;

770 
»quœe
 +ğ
šfo_comp”
[
¬gc
];

771 
»quœe
 +ğ
šfo_¶©fÜm
[
¬gc
];

772 #ifdeà
COMPILER_VERSION_MAJOR


773 
»quœe
 +ğ
šfo_v”siÚ
[
¬gc
];

775 #ifdeà
COMPILER_VERSION_INTERNAL


776 
»quœe
 +ğ
šfo_v”siÚ_š‹º®
[
¬gc
];

778 #ifdeà
SIMULATE_ID


779 
»quœe
 +ğ
šfo_simuÏ‹
[
¬gc
];

781 #ifdeà
SIMULATE_VERSION_MAJOR


782 
»quœe
 +ğ
šfo_simuÏ‹_v”siÚ
[
¬gc
];

784 #ià
	`defšed
(
__CRAYXT_COMPUTE_LINUX_TARGET
)

785 
»quœe
 +ğ
šfo_üay
[
¬gc
];

787 
»quœe
 +ğ
šfo_Ïnguage_¡ªd¬d_deçuÉ
[
¬gc
];

788 
»quœe
 +ğ
šfo_Ïnguage_ex‹nsiÚs_deçuÉ
[
¬gc
];

789 ()
¬gv
;

790  
»quœe
;

791 
	}
}

	@build/include/port/port_config.h

5 #iâdeà
STORAGE_LEVELDB_PORT_PORT_CONFIG_H_


6 
	#STORAGE_LEVELDB_PORT_PORT_CONFIG_H_


	)

9 #ià!
defšed
(
HAVE_FDATASYNC
)

10 
	#HAVE_FDATASYNC
 1

	)

14 #ià!
defšed
(
HAVE_FULLFSYNC
)

15 
	#HAVE_FULLFSYNC
 0

	)

19 #ià!
defšed
(
HAVE_O_CLOEXEC
)

20 
	#HAVE_O_CLOEXEC
 1

	)

24 #ià!
defšed
(
HAVE_CRC32C
)

25 
	#HAVE_CRC32C
 0

	)

29 #ià!
defšed
(
HAVE_SNAPPY
)

30 
	#HAVE_SNAPPY
 0

	)

34 #ià!
defšed
(
HAVE_Z¡d
)

35 
	#HAVE_ZSTD
 0

	)

	@db/autocompact_test.cc

5 
	~"g‹¡/g‹¡.h
"

6 
	~"db/db_im¶.h
"

7 
	~"Ëv–db/ÿche.h
"

8 
	~"Ëv–db/db.h
"

9 
	~"ut/‹¡ut.h
"

11 
Çme¥aû
 
	gËv–db
 {

13 şas 
	cAutoCom·ùTe¡
 : 
public
 
‹¡šg
::
Te¡
 {

14 
public
:

15 
AutoCom·ùTe¡
() {

16 
dbÇme_
 = 
‹¡šg
::
TempDœ
() + "autocompact_test";

17 
	gtšy_ÿche_
 = 
NewLRUCache
(100);

18 
	gİtiÚs_
.
	gblock_ÿche
 = 
tšy_ÿche_
;

19 
De¡royDB
(
dbÇme_
, 
İtiÚs_
);

20 
	gİtiÚs_
.
	gü—‹_if_missšg
 = 
Œue
;

21 
	gİtiÚs_
.
	gcom´essiÚ
 = 
kNoCom´essiÚ
;

22 
EXPECT_LEVELDB_OK
(
DB
::
O³n
(
İtiÚs_
, 
dbÇme_
, &
db_
));

25 ~
AutoCom·ùTe¡
() {

26 
d–‘e
 
	gdb_
;

27 
De¡royDB
(
dbÇme_
, 
O±iÚs
());

28 
d–‘e
 
	gtšy_ÿche_
;

31 
	g¡d
::
¡ršg
 
Key
(
i
) {

32 
buf
[100];

33 
	g¡d
::
¢´štf
(
buf
, (buf), "key%06d", 
i
);

34  
	g¡d
::
¡ršg
(
buf
);

37 
ušt64_t
 
Size
(cÚ¡ 
Sliû
& 
¡¬t
, cÚ¡ Sliû& 
lim™
) {

38 
Rªge
 
r
(
¡¬t
, 
lim™
);

39 
ušt64_t
 
	gsize
;

40 
	gdb_
->
G‘Aµroxim©eSizes
(&
r
, 1, &
size
);

41  
	gsize
;

44 
DoR—ds
(
n
);

46 
	g´iv©e
:

47 
¡d
::
¡ršg
 
dbÇme_
;

48 
Cache
* 
	gtšy_ÿche_
;

49 
O±iÚs
 
	gİtiÚs_
;

50 
DB
* 
	gdb_
;

53 cÚ¡ 
	gkV®ueSize
 = 200 * 1024;

54 cÚ¡ 
	gkTÙ®Size
 = 100 * 1024 * 1024;

55 cÚ¡ 
	gkCouÁ
 = 
kTÙ®Size
 / 
kV®ueSize
;

59 
	gAutoCom·ùTe¡
::
	$DoR—ds
(
n
) {

60 
¡d
::
¡ršg
 
	`v®ue
(
kV®ueSize
, 'x');

61 
DBIm¶
* 
dbi
 = 
»š‹½»t_ÿ¡
<DBIm¶*>(
db_
);

64 
i
 = 0; i < 
kCouÁ
; i++) {

65 
	`ASSERT_LEVELDB_OK
(
db_
->
	`Put
(
	`Wr™eO±iÚs
(), 
	`Key
(
i
), 
v®ue
));

67 
	`ASSERT_LEVELDB_OK
(
dbi
->
	`TEST_Com·ùMemTabË
());

70 
i
 = 0; i < 
kCouÁ
; i++) {

71 
	`ASSERT_LEVELDB_OK
(
db_
->
	`D–‘e
(
	`Wr™eO±iÚs
(), 
	`Key
(
i
)));

73 
	`ASSERT_LEVELDB_OK
(
dbi
->
	`TEST_Com·ùMemTabË
());

76 cÚ¡ 
št64_t
 
š™Ÿl_size
 = 
	`Size
(
	`Key
(0), Key(
n
));

77 cÚ¡ 
št64_t
 
š™Ÿl_Ùh”_size
 = 
	`Size
(
	`Key
(
n
), Key(
kCouÁ
));

80 
¡d
::
¡ršg
 
lim™_key
 = 
	`Key
(
n
);

81 
»ad
 = 0; 
Œue
;„ead++) {

82 
	`ASSERT_LT
(
»ad
, 100) << "Takingoo†ongo compact";

83 
I‹¿tÜ
* 
™”
 = 
db_
->
	`NewI‹¿tÜ
(
	`R—dO±iÚs
());

84 
™”
->
	`S“kToFœ¡
();

85 
™”
->
	`V®id
(è&& i‹r->
	`key
().
	`ToSŒšg
(è< 
lim™_key
; i‹r->
	`Next
()) {

88 
d–‘e
 
™”
;

90 
Env
::
	`DeçuÉ
()->
	`SË•FÜMiüo£cÚds
(1000000);

91 
ušt64_t
 
size
 = 
	`Size
(
	`Key
(0), Key(
n
));

92 
¡d
::
	`årštf
(
¡d”r
, "™” %3d => %7.3àMB [Ùh” %7.3àMB]\n", 
»ad
 + 1,

93 
size
 / 1048576.0, 
	`Size
(
	`Key
(
n
), Key(
kCouÁ
)) / 1048576.0);

94 ià(
size
 <ğ
š™Ÿl_size
 / 10) {

101 cÚ¡ 
št64_t
 
fš®_Ùh”_size
 = 
	`Size
(
	`Key
(
n
), Key(
kCouÁ
));

102 
	`ASSERT_LE
(
fš®_Ùh”_size
, 
š™Ÿl_Ùh”_size
 + 1048576);

103 
	`ASSERT_GE
(
fš®_Ùh”_size
, 
š™Ÿl_Ùh”_size
 / 5 - 1048576);

104 
	}
}

106 
	$TEST_F
(
AutoCom·ùTe¡
, 
R—dAÎ
è{ 
	`DoR—ds
(
kCouÁ
); 
	}
}

108 
	$TEST_F
(
AutoCom·ùTe¡
, 
R—dH®f
è{ 
	`DoR—ds
(
kCouÁ
 / 2); 
	}
}

	@db/builder.cc

5 
	~"db/bud”.h
"

7 
	~"db/dbfÜm©.h
"

8 
	~"db/f’ame.h
"

9 
	~"db/bË_ÿche.h
"

10 
	~"db/v”siÚ_ed™.h
"

11 
	~"Ëv–db/db.h
"

12 
	~"Ëv–db/’v.h
"

13 
	~"Ëv–db/™”©Ü.h
"

15 
Çme¥aû
 
	gËv–db
 {

17 
Stus
 
BudTabË
(cÚ¡ 
¡d
::
¡ršg
& 
dbÇme
, 
Env
* 
’v
, cÚ¡ 
O±iÚs
& 
İtiÚs
,

18 
TabËCache
* 
bË_ÿche
, 
I‹¿tÜ
* 
™”
, 
FeM‘aD©a
* 
m‘a
) {

19 
Stus
 
	gs
;

20 
	gm‘a
->
	gfe_size
 = 0;

21 
	g™”
->
S“kToFœ¡
();

23 
	g¡d
::
¡ršg
 
âame
 = 
TabËFeName
(
dbÇme
, 
m‘a
->
numb”
);

24 ià(
	g™”
->
V®id
()) {

25 
Wr™abËFe
* 
	gfe
;

26 
	gs
 = 
’v
->
NewWr™abËFe
(
âame
, &
fe
);

27 ià(!
	gs
.
ok
()) {

28  
	gs
;

31 
TabËBud”
* 
	gbud”
 = 
Ãw
 TabËBud”(
İtiÚs
, 
fe
);

32 
	gm‘a
->
	gsm®Ë¡
.
DecodeFrom
(
™”
->
key
());

33 
Sliû
 
	gkey
;

34 ; 
	g™”
->
V®id
(); i‹r->
Next
()) {

35 
	gkey
 = 
™”
->
key
();

36 
	gbud”
->
Add
(
key
, 
™”
->
v®ue
());

38 ià(!
	gkey
.
em±y
()) {

39 
	gm‘a
->
	gÏrge¡
.
DecodeFrom
(
key
);

43 
	gs
 = 
bud”
->
Fšish
();

44 ià(
	gs
.
ok
()) {

45 
	gm‘a
->
	gfe_size
 = 
bud”
->
FeSize
();

46 
as£¹
(
m‘a
->
fe_size
 > 0);

48 
d–‘e
 
	gbud”
;

51 ià(
	gs
.
ok
()) {

52 
	gs
 = 
fe
->
Sync
();

54 ià(
	gs
.
ok
()) {

55 
	gs
 = 
fe
->
Clo£
();

57 
d–‘e
 
	gfe
;

58 
	gfe
 = 
nuÎ±r
;

60 ià(
	gs
.
ok
()) {

62 
I‹¿tÜ
* 
	g™
 = 
bË_ÿche
->
NewI‹¿tÜ
(
R—dO±iÚs
(), 
m‘a
->
numb”
,

63 
m‘a
->
fe_size
);

64 
	gs
 = 
™
->
¡©us
();

65 
d–‘e
 
	g™
;

70 ià(!
	g™”
->
¡©us
().
ok
()) {

71 
	gs
 = 
™”
->
¡©us
();

74 ià(
	gs
.
ok
(è&& 
	gm‘a
->
	gfe_size
 > 0) {

77 
	g’v
->
RemoveFe
(
âame
);

79  
	gs
;

	@db/builder.h

5 #iâdeà
STORAGE_LEVELDB_DB_BUILDER_H_


6 
	#STORAGE_LEVELDB_DB_BUILDER_H_


	)

8 
	~"Ëv–db/¡©us.h
"

10 
Çme¥aû
 
	gËv–db
 {

12 
	gO±iÚs
;

13 
	gFeM‘aD©a
;

15 
şass
 
	gEnv
;

16 
şass
 
	gI‹¿tÜ
;

17 
şass
 
	gTabËCache
;

18 
şass
 
	gV”siÚEd™
;

25 
Stus
 
BudTabË
(cÚ¡ 
¡d
::
¡ršg
& 
dbÇme
, 
Env
* 
’v
, cÚ¡ 
O±iÚs
& 
İtiÚs
,

26 
TabËCache
* 
bË_ÿche
, 
I‹¿tÜ
* 
™”
, 
FeM‘aD©a
* 
m‘a
);

	@db/c.cc

5 
	~"Ëv–db/c.h
"

7 
	~<¡ršg.h
>

9 
	~<c¡dšt
>

10 
	~<c¡dlib
>

12 
	~"Ëv–db/ÿche.h
"

13 
	~"Ëv–db/com·¿tÜ.h
"

14 
	~"Ëv–db/db.h
"

15 
	~"Ëv–db/’v.h
"

16 
	~"Ëv–db/f‹r_pŞicy.h
"

17 
	~"Ëv–db/™”©Ü.h
"

18 
	~"Ëv–db/İtiÚs.h
"

19 
	~"Ëv–db/¡©us.h
"

20 
	~"Ëv–db/wr™e_b©ch.h
"

22 
usšg
 
	gËv–db
::
Cache
;

23 
usšg
 
	gËv–db
::
Com·¿tÜ
;

24 
usšg
 
	gËv–db
::
Com´essiÚTy³
;

25 
usšg
 
	gËv–db
::
DB
;

26 
usšg
 
	gËv–db
::
Env
;

27 
usšg
 
	gËv–db
::
FeLock
;

28 
usšg
 
	gËv–db
::
F‹rPŞicy
;

29 
usšg
 
	gËv–db
::
I‹¿tÜ
;

30 
usšg
 
	gËv–db
::
kMajÜV”siÚ
;

31 
usšg
 
	gËv–db
::
kMšÜV”siÚ
;

32 
usšg
 
	gËv–db
::
Logg”
;

33 
usšg
 
	gËv–db
::
NewBloomF‹rPŞicy
;

34 
usšg
 
	gËv–db
::
NewLRUCache
;

35 
usšg
 
	gËv–db
::
O±iÚs
;

36 
usšg
 
	gËv–db
::
RªdomAcûssFe
;

37 
usšg
 
	gËv–db
::
Rªge
;

38 
usšg
 
	gËv–db
::
R—dO±iÚs
;

39 
usšg
 
	gËv–db
::
Sequ’tŸlFe
;

40 
usšg
 
	gËv–db
::
Sliû
;

41 
usšg
 
	gËv–db
::
SÇpshÙ
;

42 
usšg
 
	gËv–db
::
Stus
;

43 
usšg
 
	gËv–db
::
Wr™abËFe
;

44 
usšg
 
	gËv–db
::
Wr™eB©ch
;

45 
usšg
 
	gËv–db
::
Wr™eO±iÚs
;

49 
	sËv–db_t
 {

50 
DB
* 
»p
;

52 
	sËv–db_™”©Ü_t
 {

53 
I‹¿tÜ
* 
»p
;

55 
	sËv–db_wr™eb©ch_t
 {

56 
Wr™eB©ch
 
»p
;

58 
	sËv–db_¢­shÙ_t
 {

59 cÚ¡ 
SÇpshÙ
* 
»p
;

61 
	sËv–db_»adİtiÚs_t
 {

62 
R—dO±iÚs
 
»p
;

64 
	sËv–db_wr™eİtiÚs_t
 {

65 
Wr™eO±iÚs
 
»p
;

67 
	sËv–db_İtiÚs_t
 {

68 
O±iÚs
 
»p
;

70 
	sËv–db_ÿche_t
 {

71 
Cache
* 
»p
;

73 
	sËv–db_£qfe_t
 {

74 
Sequ’tŸlFe
* 
»p
;

76 
	sËv–db_¿ndomfe_t
 {

77 
RªdomAcûssFe
* 
»p
;

79 
	sËv–db_wr™abËfe_t
 {

80 
Wr™abËFe
* 
»p
;

82 
	sËv–db_logg”_t
 {

83 
Logg”
* 
»p
;

85 
	sËv–db_f–ock_t
 {

86 
FeLock
* 
»p
;

89 
Ëv–db_com·¿tÜ_t
 : 
public
 
Com·¿tÜ
 {

90 ~
Ëv–db_com·¿tÜ_t
(è
ov”ride
 { (*
de¡ruùÜ_
)(
¡©e_
); }

92 
Com·»
(cÚ¡ 
Sliû
& 
a
, cÚ¡ Sliû& 
b
ècÚ¡ 
ov”ride
 {

93  (*
com·»_
)(
¡©e_
, 
a
.
d©a
(),‡.
size
(), 
b
.data(), b.size());

96 cÚ¡ * 
Name
(ècÚ¡ 
ov”ride
 {  (*
Çme_
)(
¡©e_
); }

99 
FšdShÜ‹¡S•¬©Ü
(
¡d
::
¡ršg
*, cÚ¡ 
Sliû
&ècÚ¡ 
ov”ride
 {}

100 
FšdShÜtSucûssÜ
(
¡d
::
¡ršg
* 
key
ècÚ¡ 
ov”ride
 {}

102 * 
¡©e_
;

103 (*
de¡ruùÜ_
)(*);

104 (*
com·»_
)(*, cÚ¡ * 
a
, 
size_t
 
®’
, cÚ¡ * 
b
,

105 
size_t
 
bËn
);

106 cÚ¡ * (*
Çme_
)(*);

109 
Ëv–db_f‹½Şicy_t
 : 
public
 
F‹rPŞicy
 {

110 ~
Ëv–db_f‹½Şicy_t
(è
ov”ride
 { (*
de¡ruùÜ_
)(
¡©e_
); }

112 cÚ¡ * 
Name
(ècÚ¡ 
ov”ride
 {  (*
Çme_
)(
¡©e_
); }

114 
C»©eF‹r
(cÚ¡ 
Sliû
* 
keys
, 
n
, 
¡d
::
¡ršg
* 
d¡
ècÚ¡ 
ov”ride
 {

115 
¡d
::
veùÜ
<cÚ¡ *> 
key_poš‹rs
(
n
);

116 
¡d
::
veùÜ
<
size_t
> 
key_sizes
(
n
);

117 
i
 = 0; i < 
n
; i++) {

118 
key_poš‹rs
[
i
] = 
keys
[i].
d©a
();

119 
key_sizes
[
i
] = 
keys
[i].
size
();

121 
size_t
 
Ën
;

122 * 
f‹r
 = (*
ü—‹_
)(
¡©e_
, &
key_poš‹rs
[0], &
key_sizes
[0], 
n
, &
Ën
);

123 
d¡
->
­³nd
(
f‹r
, 
Ën
);

124 
¡d
::
ä“
(
f‹r
);

127 
boŞ
 
KeyMayM©ch
(cÚ¡ 
Sliû
& 
key
, cÚ¡ Sliû& 
f‹r
ècÚ¡ 
ov”ride
 {

128  (*
key_m©ch_
)(
¡©e_
, 
key
.
d©a
(), key.
size
(), 
f‹r
.data(),

129 
f‹r
.
size
());

132 * 
¡©e_
;

133 (*
de¡ruùÜ_
)(*);

134 cÚ¡ * (*
Çme_
)(*);

135 * (*
ü—‹_
)(*, cÚ¡ * cÚ¡* 
key_¬¿y
,

136 cÚ¡ 
size_t
* 
key_Ëngth_¬¿y
, 
num_keys
,

137 
size_t
* 
f‹r_Ëngth
);

138 
ušt8_t
 (*
key_m©ch_
)(*, cÚ¡ * 
key
, 
size_t
 
Ëngth
,

139 cÚ¡ * 
f‹r
, 
size_t
 
f‹r_Ëngth
);

142 
	sËv–db_’v_t
 {

143 
Env
* 
»p
;

144 
boŞ
 
is_deçuÉ
;

147 
boŞ
 
SaveE¼Ü
(** 
”½Œ
, cÚ¡ 
Stus
& 
s
) {

148 
as£¹
(
”½Œ
 !ğ
nuÎ±r
);

149 ià(
s
.
ok
()) {

150  
çl£
;

151 } ià(*
”½Œ
 =ğ
nuÎ±r
) {

152 *
”½Œ
 = 
¡rdup
(
s
.
ToSŒšg
().
c_¡r
());

155 
¡d
::
ä“
(*
”½Œ
);

156 *
”½Œ
 = 
¡rdup
(
s
.
ToSŒšg
().
c_¡r
());

158  
Œue
;

161 * 
CİySŒšg
(cÚ¡ 
¡d
::
¡ršg
& 
¡r
) {

162 * 
»suÉ
 =

163 
»š‹½»t_ÿ¡
<*>(
¡d
::
m®loc
((è* 
¡r
.
size
()));

164 
¡d
::
memıy
(
»suÉ
, 
¡r
.
d©a
(), (è* sŒ.
size
());

165  
»suÉ
;

168 
Ëv–db_t
* 
Ëv–db_İ’
(cÚ¡ 
Ëv–db_İtiÚs_t
* 
İtiÚs
, cÚ¡ * 
Çme
,

169 ** 
”½Œ
) {

170 
DB
* 
db
;

171 ià(
SaveE¼Ü
(
”½Œ
, 
DB
::
O³n
(
İtiÚs
->
»p
, 
¡d
::
¡ršg
(
Çme
), &
db
))) {

172  
nuÎ±r
;

174 
Ëv–db_t
* 
»suÉ
 = 
Ãw
†eveldb_t;

175 
»suÉ
->
»p
 = 
db
;

176  
»suÉ
;

179 
Ëv–db_şo£
(
Ëv–db_t
* 
db
) {

180 
d–‘e
 
db
->
»p
;

181 
d–‘e
 
db
;

184 
Ëv–db_put
(
Ëv–db_t
* 
db
, cÚ¡ 
Ëv–db_wr™eİtiÚs_t
* 
İtiÚs
,

185 cÚ¡ * 
key
, 
size_t
 
keyËn
, cÚ¡ * 
v®
, size_ˆ
v®Ën
,

186 ** 
”½Œ
) {

187 
SaveE¼Ü
(
”½Œ
,

188 
db
->
»p
->
Put
(
İtiÚs
->»p, 
Sliû
(
key
, 
keyËn
), Sliû(
v®
, 
v®Ën
)));

191 
Ëv–db_d–‘e
(
Ëv–db_t
* 
db
, cÚ¡ 
Ëv–db_wr™eİtiÚs_t
* 
İtiÚs
,

192 cÚ¡ * 
key
, 
size_t
 
keyËn
, ** 
”½Œ
) {

193 
SaveE¼Ü
(
”½Œ
, 
db
->
»p
->
D–‘e
(
İtiÚs
->»p, 
Sliû
(
key
, 
keyËn
)));

196 
Ëv–db_wr™e
(
Ëv–db_t
* 
db
, cÚ¡ 
Ëv–db_wr™eİtiÚs_t
* 
İtiÚs
,

197 
Ëv–db_wr™eb©ch_t
* 
b©ch
, ** 
”½Œ
) {

198 
SaveE¼Ü
(
”½Œ
, 
db
->
»p
->
Wr™e
(
İtiÚs
->»p, &
b©ch
->rep));

201 * 
Ëv–db_g‘
(
Ëv–db_t
* 
db
, cÚ¡ 
Ëv–db_»adİtiÚs_t
* 
İtiÚs
,

202 cÚ¡ * 
key
, 
size_t
 
keyËn
, size_t* 
v®Ën
,

203 ** 
”½Œ
) {

204 * 
»suÉ
 = 
nuÎ±r
;

205 
¡d
::
¡ršg
 
tmp
;

206 
Stus
 
s
 = 
db
->
»p
->
G‘
(
İtiÚs
->»p, 
Sliû
(
key
, 
keyËn
), &
tmp
);

207 ià(
s
.
ok
()) {

208 *
v®Ën
 = 
tmp
.
size
();

209 
»suÉ
 = 
CİySŒšg
(
tmp
);

211 *
v®Ën
 = 0;

212 ià(!
s
.
IsNÙFound
()) {

213 
SaveE¼Ü
(
”½Œ
, 
s
);

216  
»suÉ
;

219 
Ëv–db_™”©Ü_t
* 
Ëv–db_ü—‹_™”©Ü
(

220 
Ëv–db_t
* 
db
, cÚ¡ 
Ëv–db_»adİtiÚs_t
* 
İtiÚs
) {

221 
Ëv–db_™”©Ü_t
* 
»suÉ
 = 
Ãw
†eveldb_iterator_t;

222 
»suÉ
->
»p
 = 
db
->»p->
NewI‹¿tÜ
(
İtiÚs
->rep);

223  
»suÉ
;

226 cÚ¡ 
Ëv–db_¢­shÙ_t
* 
Ëv–db_ü—‹_¢­shÙ
(
Ëv–db_t
* 
db
) {

227 
Ëv–db_¢­shÙ_t
* 
»suÉ
 = 
Ãw
†eveldb_snapshot_t;

228 
»suÉ
->
»p
 = 
db
->»p->
G‘SÇpshÙ
();

229  
»suÉ
;

232 
Ëv–db_»Ëa£_¢­shÙ
(
Ëv–db_t
* 
db
,

233 cÚ¡ 
Ëv–db_¢­shÙ_t
* 
¢­shÙ
) {

234 
db
->
»p
->
R–—£SÇpshÙ
(
¢­shÙ
->rep);

235 
d–‘e
 
¢­shÙ
;

238 * 
Ëv–db_´İ”ty_v®ue
(
Ëv–db_t
* 
db
, cÚ¡ * 
´İÇme
) {

239 
¡d
::
¡ršg
 
tmp
;

240 ià(
db
->
»p
->
G‘Prİ”ty
(
Sliû
(
´İÇme
), &
tmp
)) {

242  
¡rdup
(
tmp
.
c_¡r
());

244  
nuÎ±r
;

248 
Ëv–db_­´oxim©e_sizes
(
Ëv–db_t
* 
db
, 
num_¿nges
,

249 cÚ¡ * cÚ¡* 
¿nge_¡¬t_key
,

250 cÚ¡ 
size_t
* 
¿nge_¡¬t_key_Ën
,

251 cÚ¡ * cÚ¡* 
¿nge_lim™_key
,

252 cÚ¡ 
size_t
* 
¿nge_lim™_key_Ën
,

253 
ušt64_t
* 
sizes
) {

254 
Rªge
* 
¿nges
 = 
Ãw
 Rªge[
num_¿nges
];

255 
i
 = 0; i < 
num_¿nges
; i++) {

256 
¿nges
[
i
].
¡¬t
 = 
Sliû
(
¿nge_¡¬t_key
[i], 
¿nge_¡¬t_key_Ën
[i]);

257 
¿nges
[
i
].
lim™
 = 
Sliû
(
¿nge_lim™_key
[i], 
¿nge_lim™_key_Ën
[i]);

259 
db
->
»p
->
G‘Aµroxim©eSizes
(
¿nges
, 
num_¿nges
, 
sizes
);

260 
d–‘e
[] 
¿nges
;

263 
Ëv–db_com·ù_¿nge
(
Ëv–db_t
* 
db
, cÚ¡ * 
¡¬t_key
,

264 
size_t
 
¡¬t_key_Ën
, cÚ¡ * 
lim™_key
,

265 
size_t
 
lim™_key_Ën
) {

266 
Sliû
 
a
, 
b
;

267 
db
->
»p
->
Com·ùRªge
(

269 (
¡¬t_key
 ? (
a
 = 
Sliû
(¡¬t_key, 
¡¬t_key_Ën
), &aè: 
nuÎ±r
),

270 (
lim™_key
 ? (
b
 = 
Sliû
Öim™_key, 
lim™_key_Ën
), &bè: 
nuÎ±r
));

273 
Ëv–db_de¡roy_db
(cÚ¡ 
Ëv–db_İtiÚs_t
* 
İtiÚs
, cÚ¡ * 
Çme
,

274 ** 
”½Œ
) {

275 
SaveE¼Ü
(
”½Œ
, 
De¡royDB
(
Çme
, 
İtiÚs
->
»p
));

278 
Ëv–db_»·œ_db
(cÚ¡ 
Ëv–db_İtiÚs_t
* 
İtiÚs
, cÚ¡ * 
Çme
,

279 ** 
”½Œ
) {

280 
SaveE¼Ü
(
”½Œ
, 
R•aœDB
(
Çme
, 
İtiÚs
->
»p
));

283 
Ëv–db_™”_de¡roy
(
Ëv–db_™”©Ü_t
* 
™”
) {

284 
d–‘e
 
™”
->
»p
;

285 
d–‘e
 
™”
;

288 
ušt8_t
 
Ëv–db_™”_v®id
(cÚ¡ 
Ëv–db_™”©Ü_t
* 
™”
) {

289  
™”
->
»p
->
V®id
();

292 
Ëv–db_™”_£ek_to_fœ¡
(
Ëv–db_™”©Ü_t
* 
™”
) {

293 
™”
->
»p
->
S“kToFœ¡
();

296 
Ëv–db_™”_£ek_to_Ï¡
(
Ëv–db_™”©Ü_t
* 
™”
) {

297 
™”
->
»p
->
S“kToLa¡
();

300 
Ëv–db_™”_£ek
(
Ëv–db_™”©Ü_t
* 
™”
, cÚ¡ * 
k
, 
size_t
 
kËn
) {

301 
™”
->
»p
->
S“k
(
Sliû
(
k
, 
kËn
));

304 
Ëv–db_™”_Ãxt
(
Ëv–db_™”©Ü_t
* 
™”
è{ i‹r->
»p
->
Next
(); }

306 
Ëv–db_™”_´ev
(
Ëv–db_™”©Ü_t
* 
™”
è{ i‹r->
»p
->
P»v
(); }

308 cÚ¡ * 
Ëv–db_™”_key
(cÚ¡ 
Ëv–db_™”©Ü_t
* 
™”
, 
size_t
* 
kËn
) {

309 
Sliû
 
s
 = 
™”
->
»p
->
key
();

310 *
kËn
 = 
s
.
size
();

311  
s
.
d©a
();

314 cÚ¡ * 
Ëv–db_™”_v®ue
(cÚ¡ 
Ëv–db_™”©Ü_t
* 
™”
, 
size_t
* 
vËn
) {

315 
Sliû
 
s
 = 
™”
->
»p
->
v®ue
();

316 *
vËn
 = 
s
.
size
();

317  
s
.
d©a
();

320 
Ëv–db_™”_g‘_”rÜ
(cÚ¡ 
Ëv–db_™”©Ü_t
* 
™”
, ** 
”½Œ
) {

321 
SaveE¼Ü
(
”½Œ
, 
™”
->
»p
->
¡©us
());

324 
Ëv–db_wr™eb©ch_t
* 
Ëv–db_wr™eb©ch_ü—‹
() {

325  
Ãw
 
Ëv–db_wr™eb©ch_t
;

328 
Ëv–db_wr™eb©ch_de¡roy
(
Ëv–db_wr™eb©ch_t
* 
b
è{ 
d–‘e
 b; }

330 
Ëv–db_wr™eb©ch_ş—r
(
Ëv–db_wr™eb©ch_t
* 
b
è{ b->
»p
.
CË¬
(); }

332 
Ëv–db_wr™eb©ch_put
(
Ëv–db_wr™eb©ch_t
* 
b
, cÚ¡ * 
key
,

333 
size_t
 
kËn
, cÚ¡ * 
v®
, size_ˆ
vËn
) {

334 
b
->
»p
.
Put
(
Sliû
(
key
, 
kËn
), Sliû(
v®
, 
vËn
));

337 
Ëv–db_wr™eb©ch_d–‘e
(
Ëv–db_wr™eb©ch_t
* 
b
, cÚ¡ * 
key
,

338 
size_t
 
kËn
) {

339 
b
->
»p
.
D–‘e
(
Sliû
(
key
, 
kËn
));

342 
Ëv–db_wr™eb©ch_™”©e
(cÚ¡ 
Ëv–db_wr™eb©ch_t
* 
b
, * 
¡©e
,

343 (*
put
)(*, cÚ¡ * 
k
, 
size_t
 
kËn
,

344 cÚ¡ * 
v
, 
size_t
 
vËn
),

345 (*
d–‘ed
)(*, cÚ¡ * 
k
,

346 
size_t
 
kËn
)) {

347 şas 
	cH
 : 
public
 
Wr™eB©ch
::
HªdËr
 {

348 
public
:

349 * 
¡©e_
;

350 (*
put_
)(*, cÚ¡ * 
k
, 
size_t
 
kËn
, cÚ¡ * 
v
, size_ˆ
vËn
);

351 (*
d–‘ed_
)(*, cÚ¡ * 
k
, 
size_t
 
kËn
);

352 
Put
(cÚ¡ 
Sliû
& 
key
, cÚ¡ Sliû& 
v®ue
è
ov”ride
 {

353 (*
put_
)(
¡©e_
, 
key
.
d©a
(), key.
size
(), 
v®ue
.data(), value.size());

355 
D–‘e
(cÚ¡ 
Sliû
& 
key
è
ov”ride
 {

356 (*
d–‘ed_
)(
¡©e_
, 
key
.
d©a
(), key.
size
());

359 
H
 
hªdËr
;

360 
hªdËr
.
¡©e_
 = 
¡©e
;

361 
hªdËr
.
put_
 = 
put
;

362 
hªdËr
.
d–‘ed_
 = 
d–‘ed
;

363 
b
->
»p
.
I‹¿‹
(&
hªdËr
);

366 
	$Ëv–db_wr™eb©ch_­³nd
(
Ëv–db_wr™eb©ch_t
* 
de¡š©iÚ
,

367 cÚ¡ 
Ëv–db_wr™eb©ch_t
* 
sourû
) {

368 
de¡š©iÚ
->
»p
.
	`Aµ’d
(
sourû
->rep);

369 
	}
}

371 
Ëv–db_İtiÚs_t
* 
	$Ëv–db_İtiÚs_ü—‹
(è{  
Ãw
 
Ëv–db_İtiÚs_t
; 
	}
}

373 
	$Ëv–db_İtiÚs_de¡roy
(
Ëv–db_İtiÚs_t
* 
İtiÚs
è{ 
d–‘e
 o±iÚs; 
	}
}

375 
	$Ëv–db_İtiÚs_£t_com·¿tÜ
(
Ëv–db_İtiÚs_t
* 
İt
,

376 
Ëv–db_com·¿tÜ_t
* 
cmp
) {

377 
İt
->
»p
.
com·¿tÜ
 = 
cmp
;

378 
	}
}

380 
	$Ëv–db_İtiÚs_£t_f‹r_pŞicy
(
Ëv–db_İtiÚs_t
* 
İt
,

381 
Ëv–db_f‹½Şicy_t
* 
pŞicy
) {

382 
İt
->
»p
.
f‹r_pŞicy
 = 
pŞicy
;

383 
	}
}

385 
	$Ëv–db_İtiÚs_£t_ü—‹_if_missšg
(
Ëv–db_İtiÚs_t
* 
İt
, 
ušt8_t
 
v
) {

386 
İt
->
»p
.
ü—‹_if_missšg
 = 
v
;

387 
	}
}

389 
	$Ëv–db_İtiÚs_£t_”rÜ_if_exi¡s
(
Ëv–db_İtiÚs_t
* 
İt
, 
ušt8_t
 
v
) {

390 
İt
->
»p
.
”rÜ_if_exi¡s
 = 
v
;

391 
	}
}

393 
	$Ëv–db_İtiÚs_£t_·¿noid_checks
(
Ëv–db_İtiÚs_t
* 
İt
, 
ušt8_t
 
v
) {

394 
İt
->
»p
.
·¿noid_checks
 = 
v
;

395 
	}
}

397 
	$Ëv–db_İtiÚs_£t_’v
(
Ëv–db_İtiÚs_t
* 
İt
, 
Ëv–db_’v_t
* 
’v
) {

398 
İt
->
»p
.
’v
 = (’v ?ƒnv->»°: 
nuÎ±r
);

399 
	}
}

401 
	$Ëv–db_İtiÚs_£t_šfo_log
(
Ëv–db_İtiÚs_t
* 
İt
, 
Ëv–db_logg”_t
* 
l
) {

402 
İt
->
»p
.
šfo_log
 = (
l
 ?†->»°: 
nuÎ±r
);

403 
	}
}

405 
	$Ëv–db_İtiÚs_£t_wr™e_bufãr_size
(
Ëv–db_İtiÚs_t
* 
İt
, 
size_t
 
s
) {

406 
İt
->
»p
.
wr™e_bufãr_size
 = 
s
;

407 
	}
}

409 
	$Ëv–db_İtiÚs_£t_max_İ’_fes
(
Ëv–db_İtiÚs_t
* 
İt
, 
n
) {

410 
İt
->
»p
.
max_İ’_fes
 = 
n
;

411 
	}
}

413 
	$Ëv–db_İtiÚs_£t_ÿche
(
Ëv–db_İtiÚs_t
* 
İt
, 
Ëv–db_ÿche_t
* 
c
) {

414 
İt
->
»p
.
block_ÿche
 = 
c
->rep;

415 
	}
}

417 
	$Ëv–db_İtiÚs_£t_block_size
(
Ëv–db_İtiÚs_t
* 
İt
, 
size_t
 
s
) {

418 
İt
->
»p
.
block_size
 = 
s
;

419 
	}
}

421 
	$Ëv–db_İtiÚs_£t_block_»¡¬t_š‹rv®
(
Ëv–db_İtiÚs_t
* 
İt
, 
n
) {

422 
İt
->
»p
.
block_»¡¬t_š‹rv®
 = 
n
;

423 
	}
}

425 
	$Ëv–db_İtiÚs_£t_max_fe_size
(
Ëv–db_İtiÚs_t
* 
İt
, 
size_t
 
s
) {

426 
İt
->
»p
.
max_fe_size
 = 
s
;

427 
	}
}

429 
	$Ëv–db_İtiÚs_£t_com´essiÚ
(
Ëv–db_İtiÚs_t
* 
İt
, 
t
) {

430 
İt
->
»p
.
com´essiÚ
 = 
¡©ic_ÿ¡
<
Com´essiÚTy³
>(
t
);

431 
	}
}

433 
Ëv–db_com·¿tÜ_t
* 
	$Ëv–db_com·¿tÜ_ü—‹
(

434 * 
¡©e
, (*
de¡ruùÜ
)(*),

435 (*
com·»
)(*, cÚ¡ * 
a
, 
size_t
 
®’
, cÚ¡ * 
b
,

436 
size_t
 
bËn
),

437 cÚ¡ * (*
Çme
)(*)) {

438 
Ëv–db_com·¿tÜ_t
* 
»suÉ
 = 
Ãw
†eveldb_comparator_t;

439 
»suÉ
->
¡©e_
 = 
¡©e
;

440 
»suÉ
->
de¡ruùÜ_
 = 
de¡ruùÜ
;

441 
»suÉ
->
com·»_
 = 
com·»
;

442 
»suÉ
->
Çme_
 = 
Çme
;

443  
»suÉ
;

444 
	}
}

446 
	$Ëv–db_com·¿tÜ_de¡roy
(
Ëv–db_com·¿tÜ_t
* 
cmp
è{ 
d–‘e
 cmp; 
	}
}

448 
Ëv–db_f‹½Şicy_t
* 
	$Ëv–db_f‹½Şicy_ü—‹
(

449 * 
¡©e
, (*
de¡ruùÜ
)(*),

450 * (*
ü—‹_f‹r
)(*, cÚ¡ * cÚ¡* 
key_¬¿y
,

451 cÚ¡ 
size_t
* 
key_Ëngth_¬¿y
, 
num_keys
,

452 
size_t
* 
f‹r_Ëngth
),

453 
	$ušt8_t
 (*
key_may_m©ch
)(*, cÚ¡ * 
key
, 
size_t
 
Ëngth
,

454 cÚ¡ * 
f‹r
, 
size_t
 
f‹r_Ëngth
),

455 cÚ¡ * (*
Çme
)(*)) {

456 
Ëv–db_f‹½Şicy_t
* 
»suÉ
 = 
Ãw
†eveldb_filterpolicy_t;

457 
»suÉ
->
¡©e_
 = 
¡©e
;

458 
»suÉ
->
de¡ruùÜ_
 = 
de¡ruùÜ
;

459 
»suÉ
->
ü—‹_
 = 
ü—‹_f‹r
;

460 
»suÉ
->
key_m©ch_
 = 
key_may_m©ch
;

461 
»suÉ
->
Çme_
 = 
Çme
;

462  
»suÉ
;

463 
	}
}

465 
	$Ëv–db_f‹½Şicy_de¡roy
(
Ëv–db_f‹½Şicy_t
* 
f‹r
) {

466 
d–‘e
 
f‹r
;

467 
	}
}

469 
Ëv–db_f‹½Şicy_t
* 
	$Ëv–db_f‹½Şicy_ü—‹_bloom
(
b™s_³r_key
) {

473 
W¿µ”
 : 
public
 
Ëv–db_f‹½Şicy_t
 {

474 
	`DoNÙhšg
(*) {}

476 ~
	`W¿µ”
(è{ 
d–‘e
 
»p_
; }

477 cÚ¡ * 
	`Name
(ècÚ¡ {  
»p_
->Name(); }

478 
	`C»©eF‹r
(cÚ¡ 
Sliû
* 
keys
, 
n
, 
¡d
::
¡ršg
* 
d¡
) const {

479  
»p_
->
	`C»©eF‹r
(
keys
, 
n
, 
d¡
);

481 
boŞ
 
	`KeyMayM©ch
(cÚ¡ 
Sliû
& 
key
, cÚ¡ Sliû& 
f‹r
) const {

482  
»p_
->
	`KeyMayM©ch
(
key
, 
f‹r
);

485 cÚ¡ 
F‹rPŞicy
* 
»p_
;

487 
W¿µ”
* 
w¿µ”
 = 
Ãw
 Wrapper;

488 
w¿µ”
->
»p_
 = 
	`NewBloomF‹rPŞicy
(
b™s_³r_key
);

489 
w¿µ”
->
¡©e_
 = 
nuÎ±r
;

490 
w¿µ”
->
de¡ruùÜ_
 = &
W¿µ”
::
DoNÙhšg
;

491  
w¿µ”
;

492 
	}
}

494 
Ëv–db_»adİtiÚs_t
* 
	$Ëv–db_»adİtiÚs_ü—‹
() {

495  
Ãw
 
Ëv–db_»adİtiÚs_t
;

496 
	}
}

498 
	$Ëv–db_»adİtiÚs_de¡roy
(
Ëv–db_»adİtiÚs_t
* 
İt
è{ 
d–‘e
 o±; 
	}
}

500 
	$Ëv–db_»adİtiÚs_£t_v”ify_checksums
(
Ëv–db_»adİtiÚs_t
* 
İt
,

501 
ušt8_t
 
v
) {

502 
İt
->
»p
.
v”ify_checksums
 = 
v
;

503 
	}
}

505 
	$Ëv–db_»adİtiÚs_£t_fl_ÿche
(
Ëv–db_»adİtiÚs_t
* 
İt
, 
ušt8_t
 
v
) {

506 
İt
->
»p
.
fl_ÿche
 = 
v
;

507 
	}
}

509 
	$Ëv–db_»adİtiÚs_£t_¢­shÙ
(
Ëv–db_»adİtiÚs_t
* 
İt
,

510 cÚ¡ 
Ëv–db_¢­shÙ_t
* 
¢­
) {

511 
İt
->
»p
.
¢­shÙ
 = (
¢­
 ? sÇp->»°: 
nuÎ±r
);

512 
	}
}

514 
Ëv–db_wr™eİtiÚs_t
* 
	$Ëv–db_wr™eİtiÚs_ü—‹
() {

515  
Ãw
 
Ëv–db_wr™eİtiÚs_t
;

516 
	}
}

518 
	$Ëv–db_wr™eİtiÚs_de¡roy
(
Ëv–db_wr™eİtiÚs_t
* 
İt
è{ 
d–‘e
 o±; 
	}
}

520 
	$Ëv–db_wr™eİtiÚs_£t_sync
(
Ëv–db_wr™eİtiÚs_t
* 
İt
, 
ušt8_t
 
v
) {

521 
İt
->
»p
.
sync
 = 
v
;

522 
	}
}

524 
Ëv–db_ÿche_t
* 
	$Ëv–db_ÿche_ü—‹_Ìu
(
size_t
 
ÿ·c™y
) {

525 
Ëv–db_ÿche_t
* 
c
 = 
Ãw
†eveldb_cache_t;

526 
c
->
»p
 = 
	`NewLRUCache
(
ÿ·c™y
);

527  
c
;

528 
	}
}

530 
	$Ëv–db_ÿche_de¡roy
(
Ëv–db_ÿche_t
* 
ÿche
) {

531 
d–‘e
 
ÿche
->
»p
;

532 
d–‘e
 
ÿche
;

533 
	}
}

535 
Ëv–db_’v_t
* 
	$Ëv–db_ü—‹_deçuÉ_’v
() {

536 
Ëv–db_’v_t
* 
»suÉ
 = 
Ãw
†eveldb_env_t;

537 
»suÉ
->
»p
 = 
Env
::
	`DeçuÉ
();

538 
»suÉ
->
is_deçuÉ
 = 
Œue
;

539  
»suÉ
;

540 
	}
}

542 
	$Ëv–db_’v_de¡roy
(
Ëv–db_’v_t
* 
’v
) {

543 ià(!
’v
->
is_deçuÉ
è
d–‘e
ƒnv->
»p
;

544 
d–‘e
 
’v
;

545 
	}
}

547 * 
	$Ëv–db_’v_g‘_‹¡_dœeùÜy
(
Ëv–db_’v_t
* 
’v
) {

548 
¡d
::
¡ršg
 
»suÉ
;

549 ià(!
’v
->
»p
->
	`G‘Te¡DœeùÜy
(&
»suÉ
).
	`ok
()) {

550  
nuÎ±r
;

553 * 
bufãr
 = 
¡©ic_ÿ¡
<*>(
¡d
::
	`m®loc
(
»suÉ
.
	`size
() + 1));

554 
¡d
::
	`memıy
(
bufãr
, 
»suÉ
.
	`d©a
(),„esuÉ.
	`size
());

555 
bufãr
[
»suÉ
.
	`size
()] = '\0';

556  
bufãr
;

557 
	}
}

559 
	$Ëv–db_ä“
(* 
±r
è{ 
¡d
::
	`ä“
ÕŒ); 
	}
}

561 
	$Ëv–db_majÜ_v”siÚ
(è{  
kMajÜV”siÚ
; 
	}
}

563 
	$Ëv–db_mšÜ_v”siÚ
(è{  
kMšÜV”siÚ
; 
	}
}

	@db/c_test.c

5 
	~"Ëv–db/c.h
"

7 
	~<¡ddef.h
>

8 
	~<¡dio.h
>

9 
	~<¡dlib.h
>

10 
	~<¡ršg.h
>

12 cÚ¡ * 
	gpha£
 = "";

14 
	$S¹Pha£
(cÚ¡ * 
Çme
) {

15 
	`årštf
(
¡d”r
, "==ğTe¡ %s\n", 
Çme
);

16 
pha£
 = 
Çme
;

17 
	}
}

19 
	#CheckNoE¼Ü
(
”r
) \

20 ià((
”r
è!ğ
NULL
) { \

21 
	`årštf
(
¡d”r
, "%s:%d: %s: %s\n", 
__FILE__
, 
__LINE__
, 
pha£
, (
”r
)); \

22 
	`abÜt
(); \

23 }

	)

25 
	#CheckCÚd™iÚ
(
cÚd
) \

26 ià(!(
cÚd
)) { \

27 
	`årštf
(
¡d”r
, "%s:%d: %s: %s\n", 
__FILE__
, 
__LINE__
, 
pha£
, #cond); \

28 
	`abÜt
(); \

29 }

	)

31 
	$CheckEqu®
(cÚ¡ * 
ex³ùed
, cÚ¡ * 
v
, 
size_t
 
n
) {

32 ià(
ex³ùed
 =ğ
NULL
 && 
v
 == NULL) {

34 } ià(
ex³ùed
 !ğ
NULL
 && 
v
 !ğNULL && 
n
 =ğ
	`¡¾’
(expected) &&

35 
	`memcmp
(
ex³ùed
, 
v
, 
n
) == 0) {

39 
	`årštf
(
¡d”r
, "%s:ƒxpected '%s', got '%s'\n",

40 
pha£
,

41 (
ex³ùed
 ?ƒxpected : "(null)"),

42 (
v
 ? v : "(null"));

43 
	`abÜt
();

45 
	}
}

47 
	$F»e
(** 
±r
) {

48 ià(*
±r
) {

49 
	`ä“
(*
±r
);

50 *
±r
 = 
NULL
;

52 
	}
}

54 
	$CheckG‘
(

55 
Ëv–db_t
* 
db
,

56 cÚ¡ 
Ëv–db_»adİtiÚs_t
* 
İtiÚs
,

57 cÚ¡ * 
key
,

58 cÚ¡ * 
ex³ùed
) {

59 * 
”r
 = 
NULL
;

60 
size_t
 
v®_Ën
;

61 * 
v®
;

62 
v®
 = 
	`Ëv–db_g‘
(
db
, 
İtiÚs
, 
key
, 
	`¡¾’
(key), &
v®_Ën
, &
”r
);

63 
	`CheckNoE¼Ü
(
”r
);

64 
	`CheckEqu®
(
ex³ùed
, 
v®
, 
v®_Ën
);

65 
	`F»e
(&
v®
);

66 
	}
}

68 
	$CheckI‹r
(
Ëv–db_™”©Ü_t
* 
™”
,

69 cÚ¡ * 
key
, cÚ¡ * 
v®
) {

70 
size_t
 
Ën
;

71 cÚ¡ * 
¡r
;

72 
¡r
 = 
	`Ëv–db_™”_key
(
™”
, &
Ën
);

73 
	`CheckEqu®
(
key
, 
¡r
, 
Ën
);

74 
¡r
 = 
	`Ëv–db_™”_v®ue
(
™”
, &
Ën
);

75 
	`CheckEqu®
(
v®
, 
¡r
, 
Ën
);

76 
	}
}

79 
	$CheckPut
(* 
±r
,

80 cÚ¡ * 
k
, 
size_t
 
kËn
,

81 cÚ¡ * 
v
, 
size_t
 
vËn
) {

82 * 
¡©e
 = (*è
±r
;

83 
	`CheckCÚd™iÚ
(*
¡©e
 < 2);

84 *
¡©e
) {

86 
	`CheckEqu®
("b¬", 
k
, 
kËn
);

87 
	`CheckEqu®
("b", 
v
, 
vËn
);

90 
	`CheckEqu®
("box", 
k
, 
kËn
);

91 
	`CheckEqu®
("c", 
v
, 
vËn
);

94 (*
¡©e
)++;

95 
	}
}

98 
	$CheckD–
(* 
±r
, cÚ¡ * 
k
, 
size_t
 
kËn
) {

99 * 
¡©e
 = (*è
±r
;

100 
	`CheckCÚd™iÚ
(*
¡©e
 == 2);

101 
	`CheckEqu®
("b¬", 
k
, 
kËn
);

102 (*
¡©e
)++;

103 
	}
}

105 
	$CmpDe¡roy
(* 
¬g
è{ 
	}
}

107 
	$CmpCom·»
(* 
¬g
, cÚ¡ * 
a
, 
size_t
 
®’
,

108 cÚ¡ * 
b
, 
size_t
 
bËn
) {

109 
n
 = (
®’
 < 
bËn
) ?‡len : blen;

110 
r
 = 
	`memcmp
(
a
, 
b
, 
n
);

111 ià(
r
 == 0) {

112 ià(
®’
 < 
bËn
è
r
 = -1;

113 ià(
®’
 > 
bËn
è
r
 = +1;

115  
r
;

116 
	}
}

118 cÚ¡ * 
	$CmpName
(* 
¬g
) {

120 
	}
}

123 
ušt8_t
 
	gçke_f‹r_»suÉ
 = 1;

124 
	$F‹rDe¡roy
(* 
¬g
è{ 
	}
}

125 cÚ¡ * 
	$F‹rName
(* 
¬g
) {

127 
	}
}

128 * 
	$F‹rC»©e
(

129 * 
¬g
,

130 cÚ¡ * cÚ¡* 
key_¬¿y
, cÚ¡ 
size_t
* 
key_Ëngth_¬¿y
,

131 
num_keys
,

132 
size_t
* 
f‹r_Ëngth
) {

133 *
f‹r_Ëngth
 = 4;

134 * 
»suÉ
 = 
	`m®loc
(4);

135 
	`memıy
(
»suÉ
, "fake", 4);

136  
»suÉ
;

137 
	}
}

138 
ušt8_t
 
	$F‹rKeyM©ch
(* 
¬g
, cÚ¡ * 
key
, 
size_t
 
Ëngth
,

139 cÚ¡ * 
f‹r
, 
size_t
 
f‹r_Ëngth
) {

140 
	`CheckCÚd™iÚ
(
f‹r_Ëngth
 == 4);

141 
	`CheckCÚd™iÚ
(
	`memcmp
(
f‹r
, "fake", 4) == 0);

142  
çke_f‹r_»suÉ
;

143 
	}
}

145 
	$maš
(
¬gc
, ** 
¬gv
) {

146 
Ëv–db_t
* 
db
;

147 
Ëv–db_com·¿tÜ_t
* 
cmp
;

148 
Ëv–db_ÿche_t
* 
ÿche
;

149 
Ëv–db_’v_t
* 
’v
;

150 
Ëv–db_İtiÚs_t
* 
İtiÚs
;

151 
Ëv–db_»adİtiÚs_t
* 
rİtiÚs
;

152 
Ëv–db_wr™eİtiÚs_t
* 
wİtiÚs
;

153 * 
dbÇme
;

154 * 
”r
 = 
NULL
;

155 
run
 = -1;

157 
	`CheckCÚd™iÚ
(
	`Ëv–db_majÜ_v”siÚ
() >= 1);

158 
	`CheckCÚd™iÚ
(
	`Ëv–db_mšÜ_v”siÚ
() >= 1);

160 
	`S¹Pha£
("create_objects");

161 
cmp
 = 
	`Ëv–db_com·¿tÜ_ü—‹
(
NULL
, 
CmpDe¡roy
, 
CmpCom·»
, 
CmpName
);

162 
’v
 = 
	`Ëv–db_ü—‹_deçuÉ_’v
();

163 
ÿche
 = 
	`Ëv–db_ÿche_ü—‹_Ìu
(100000);

164 
dbÇme
 = 
	`Ëv–db_’v_g‘_‹¡_dœeùÜy
(
’v
);

165 
	`CheckCÚd™iÚ
(
dbÇme
 !ğ
NULL
);

167 
İtiÚs
 = 
	`Ëv–db_İtiÚs_ü—‹
();

168 
	`Ëv–db_İtiÚs_£t_com·¿tÜ
(
İtiÚs
, 
cmp
);

169 
	`Ëv–db_İtiÚs_£t_”rÜ_if_exi¡s
(
İtiÚs
, 1);

170 
	`Ëv–db_İtiÚs_£t_ÿche
(
İtiÚs
, 
ÿche
);

171 
	`Ëv–db_İtiÚs_£t_’v
(
İtiÚs
, 
’v
);

172 
	`Ëv–db_İtiÚs_£t_šfo_log
(
İtiÚs
, 
NULL
);

173 
	`Ëv–db_İtiÚs_£t_wr™e_bufãr_size
(
İtiÚs
, 100000);

174 
	`Ëv–db_İtiÚs_£t_·¿noid_checks
(
İtiÚs
, 1);

175 
	`Ëv–db_İtiÚs_£t_max_İ’_fes
(
İtiÚs
, 10);

176 
	`Ëv–db_İtiÚs_£t_block_size
(
İtiÚs
, 1024);

177 
	`Ëv–db_İtiÚs_£t_block_»¡¬t_š‹rv®
(
İtiÚs
, 8);

178 
	`Ëv–db_İtiÚs_£t_max_fe_size
(
İtiÚs
, 3 << 20);

179 
	`Ëv–db_İtiÚs_£t_com´essiÚ
(
İtiÚs
, 
Ëv–db_no_com´essiÚ
);

181 
rİtiÚs
 = 
	`Ëv–db_»adİtiÚs_ü—‹
();

182 
	`Ëv–db_»adİtiÚs_£t_v”ify_checksums
(
rİtiÚs
, 1);

183 
	`Ëv–db_»adİtiÚs_£t_fl_ÿche
(
rİtiÚs
, 0);

185 
wİtiÚs
 = 
	`Ëv–db_wr™eİtiÚs_ü—‹
();

186 
	`Ëv–db_wr™eİtiÚs_£t_sync
(
wİtiÚs
, 1);

188 
	`S¹Pha£
("destroy");

189 
	`Ëv–db_de¡roy_db
(
İtiÚs
, 
dbÇme
, &
”r
);

190 
	`F»e
(&
”r
);

192 
	`S¹Pha£
("open_error");

193 
db
 = 
	`Ëv–db_İ’
(
İtiÚs
, 
dbÇme
, &
”r
);

194 
	`CheckCÚd™iÚ
(
”r
 !ğ
NULL
);

195 
	`F»e
(&
”r
);

197 
	`S¹Pha£
("leveldb_free");

198 
db
 = 
	`Ëv–db_İ’
(
İtiÚs
, 
dbÇme
, &
”r
);

199 
	`CheckCÚd™iÚ
(
”r
 !ğ
NULL
);

200 
	`Ëv–db_ä“
(
”r
);

201 
”r
 = 
NULL
;

203 
	`S¹Pha£
("open");

204 
	`Ëv–db_İtiÚs_£t_ü—‹_if_missšg
(
İtiÚs
, 1);

205 
db
 = 
	`Ëv–db_İ’
(
İtiÚs
, 
dbÇme
, &
”r
);

206 
	`CheckNoE¼Ü
(
”r
);

207 
	`CheckG‘
(
db
, 
rİtiÚs
, "foo", 
NULL
);

209 
	`S¹Pha£
("put");

210 
	`Ëv–db_put
(
db
, 
wİtiÚs
, "foo", 3, "h–lo", 5, &
”r
);

211 
	`CheckNoE¼Ü
(
”r
);

212 
	`CheckG‘
(
db
, 
rİtiÚs
, "foo", "hello");

214 
	`S¹Pha£
("compactall");

215 
	`Ëv–db_com·ù_¿nge
(
db
, 
NULL
, 0, NULL, 0);

216 
	`CheckG‘
(
db
, 
rİtiÚs
, "foo", "hello");

218 
	`S¹Pha£
("compactrange");

219 
	`Ëv–db_com·ù_¿nge
(
db
, "a", 1, "z", 1);

220 
	`CheckG‘
(
db
, 
rİtiÚs
, "foo", "hello");

222 
	`S¹Pha£
("writebatch");

224 
Ëv–db_wr™eb©ch_t
* 
wb
 = 
	`Ëv–db_wr™eb©ch_ü—‹
();

225 
	`Ëv–db_wr™eb©ch_put
(
wb
, "foo", 3, "a", 1);

226 
	`Ëv–db_wr™eb©ch_ş—r
(
wb
);

227 
	`Ëv–db_wr™eb©ch_put
(
wb
, "bar", 3, "b", 1);

228 
	`Ëv–db_wr™eb©ch_put
(
wb
, "box", 3, "c", 1);

230 
Ëv–db_wr™eb©ch_t
* 
wb2
 = 
	`Ëv–db_wr™eb©ch_ü—‹
();

231 
	`Ëv–db_wr™eb©ch_d–‘e
(
wb2
, "bar", 3);

232 
	`Ëv–db_wr™eb©ch_­³nd
(
wb
, 
wb2
);

233 
	`Ëv–db_wr™eb©ch_de¡roy
(
wb2
);

235 
	`Ëv–db_wr™e
(
db
, 
wİtiÚs
, 
wb
, &
”r
);

236 
	`CheckNoE¼Ü
(
”r
);

237 
	`CheckG‘
(
db
, 
rİtiÚs
, "foo", "hello");

238 
	`CheckG‘
(
db
, 
rİtiÚs
, "b¬", 
NULL
);

239 
	`CheckG‘
(
db
, 
rİtiÚs
, "box", "c");

241 
pos
 = 0;

242 
	`Ëv–db_wr™eb©ch_™”©e
(
wb
, &
pos
, 
CheckPut
, 
CheckD–
);

243 
	`CheckCÚd™iÚ
(
pos
 == 3);

244 
	`Ëv–db_wr™eb©ch_de¡roy
(
wb
);

247 
	`S¹Pha£
("iter");

249 
Ëv–db_™”©Ü_t
* 
™”
 = 
	`Ëv–db_ü—‹_™”©Ü
(
db
, 
rİtiÚs
);

250 
	`CheckCÚd™iÚ
(!
	`Ëv–db_™”_v®id
(
™”
));

251 
	`Ëv–db_™”_£ek_to_fœ¡
(
™”
);

252 
	`CheckCÚd™iÚ
(
	`Ëv–db_™”_v®id
(
™”
));

253 
	`CheckI‹r
(
™”
, "box", "c");

254 
	`Ëv–db_™”_Ãxt
(
™”
);

255 
	`CheckI‹r
(
™”
, "foo", "hello");

256 
	`Ëv–db_™”_´ev
(
™”
);

257 
	`CheckI‹r
(
™”
, "box", "c");

258 
	`Ëv–db_™”_´ev
(
™”
);

259 
	`CheckCÚd™iÚ
(!
	`Ëv–db_™”_v®id
(
™”
));

260 
	`Ëv–db_™”_£ek_to_Ï¡
(
™”
);

261 
	`CheckI‹r
(
™”
, "foo", "hello");

262 
	`Ëv–db_™”_£ek
(
™”
, "b", 1);

263 
	`CheckI‹r
(
™”
, "box", "c");

264 
	`Ëv–db_™”_g‘_”rÜ
(
™”
, &
”r
);

265 
	`CheckNoE¼Ü
(
”r
);

266 
	`Ëv–db_™”_de¡roy
(
™”
);

269 
	`S¹Pha£
("approximate_sizes");

271 
i
;

272 
n
 = 20000;

273 
keybuf
[100];

274 
v®buf
[100];

275 
ušt64_t
 
sizes
[2];

276 cÚ¡ * 
¡¬t
[2] = { "a", "k00000000000000010000" };

277 
size_t
 
¡¬t_Ën
[2] = { 1, 21 };

278 cÚ¡ * 
lim™
[2] = { "k00000000000000010000", "z" };

279 
size_t
 
lim™_Ën
[2] = { 21, 1 };

280 
	`Ëv–db_wr™eİtiÚs_£t_sync
(
wİtiÚs
, 0);

281 
i
 = 0; i < 
n
; i++) {

282 
	`¢´štf
(
keybuf
, (keybuf), "k%020d", 
i
);

283 
	`¢´štf
(
v®buf
, (v®buf), "v%020d", 
i
);

284 
	`Ëv–db_put
(
db
, 
wİtiÚs
, 
keybuf
, 
	`¡¾’
(keybuf), 
v®buf
, strlen(valbuf),

285 &
”r
);

286 
	`CheckNoE¼Ü
(
”r
);

288 
	`Ëv–db_­´oxim©e_sizes
(
db
, 2, 
¡¬t
, 
¡¬t_Ën
, 
lim™
, 
lim™_Ën
, 
sizes
);

289 
	`CheckCÚd™iÚ
(
sizes
[0] > 0);

290 
	`CheckCÚd™iÚ
(
sizes
[1] > 0);

293 
	`S¹Pha£
("property");

295 * 
´İ
 = 
	`Ëv–db_´İ”ty_v®ue
(
db
, "nosuchprop");

296 
	`CheckCÚd™iÚ
(
´İ
 =ğ
NULL
);

297 
´İ
 = 
	`Ëv–db_´İ”ty_v®ue
(
db
, "leveldb.stats");

298 
	`CheckCÚd™iÚ
(
´İ
 !ğ
NULL
);

299 
	`F»e
(&
´İ
);

302 
	`S¹Pha£
("snapshot");

304 cÚ¡ 
Ëv–db_¢­shÙ_t
* 
¢­
;

305 
¢­
 = 
	`Ëv–db_ü—‹_¢­shÙ
(
db
);

306 
	`Ëv–db_d–‘e
(
db
, 
wİtiÚs
, "foo", 3, &
”r
);

307 
	`CheckNoE¼Ü
(
”r
);

308 
	`Ëv–db_»adİtiÚs_£t_¢­shÙ
(
rİtiÚs
, 
¢­
);

309 
	`CheckG‘
(
db
, 
rİtiÚs
, "foo", "hello");

310 
	`Ëv–db_»adİtiÚs_£t_¢­shÙ
(
rİtiÚs
, 
NULL
);

311 
	`CheckG‘
(
db
, 
rİtiÚs
, "foo", 
NULL
);

312 
	`Ëv–db_»Ëa£_¢­shÙ
(
db
, 
¢­
);

315 
	`S¹Pha£
("repair");

317 
	`Ëv–db_şo£
(
db
);

318 
	`Ëv–db_İtiÚs_£t_ü—‹_if_missšg
(
İtiÚs
, 0);

319 
	`Ëv–db_İtiÚs_£t_”rÜ_if_exi¡s
(
İtiÚs
, 0);

320 
	`Ëv–db_»·œ_db
(
İtiÚs
, 
dbÇme
, &
”r
);

321 
	`CheckNoE¼Ü
(
”r
);

322 
db
 = 
	`Ëv–db_İ’
(
İtiÚs
, 
dbÇme
, &
”r
);

323 
	`CheckNoE¼Ü
(
”r
);

324 
	`CheckG‘
(
db
, 
rİtiÚs
, "foo", 
NULL
);

325 
	`CheckG‘
(
db
, 
rİtiÚs
, "b¬", 
NULL
);

326 
	`CheckG‘
(
db
, 
rİtiÚs
, "box", "c");

327 
	`Ëv–db_İtiÚs_£t_ü—‹_if_missšg
(
İtiÚs
, 1);

328 
	`Ëv–db_İtiÚs_£t_”rÜ_if_exi¡s
(
İtiÚs
, 1);

331 
	`S¹Pha£
("filter");

332 
run
 = 0;„un < 2;„un++) {

334 
	`CheckNoE¼Ü
(
”r
);

335 
Ëv–db_f‹½Şicy_t
* 
pŞicy
;

336 ià(
run
 == 0) {

337 
pŞicy
 = 
	`Ëv–db_f‹½Şicy_ü—‹
(

338 
NULL
, 
F‹rDe¡roy
, 
F‹rC»©e
, 
F‹rKeyM©ch
, 
F‹rName
);

340 
pŞicy
 = 
	`Ëv–db_f‹½Şicy_ü—‹_bloom
(10);

344 
	`Ëv–db_şo£
(
db
);

345 
	`Ëv–db_de¡roy_db
(
İtiÚs
, 
dbÇme
, &
”r
);

346 
	`Ëv–db_İtiÚs_£t_f‹r_pŞicy
(
İtiÚs
, 
pŞicy
);

347 
db
 = 
	`Ëv–db_İ’
(
İtiÚs
, 
dbÇme
, &
”r
);

348 
	`CheckNoE¼Ü
(
”r
);

349 
	`Ëv–db_put
(
db
, 
wİtiÚs
, "foo", 3, "foov®ue", 8, &
”r
);

350 
	`CheckNoE¼Ü
(
”r
);

351 
	`Ëv–db_put
(
db
, 
wİtiÚs
, "b¬", 3, "b¬v®ue", 8, &
”r
);

352 
	`CheckNoE¼Ü
(
”r
);

353 
	`Ëv–db_com·ù_¿nge
(
db
, 
NULL
, 0, NULL, 0);

355 
çke_f‹r_»suÉ
 = 1;

356 
	`CheckG‘
(
db
, 
rİtiÚs
, "foo", "foovalue");

357 
	`CheckG‘
(
db
, 
rİtiÚs
, "bar", "barvalue");

358 ià(
pha£
 == 0) {

360 
çke_f‹r_»suÉ
 = 0;

361 
	`CheckG‘
(
db
, 
rİtiÚs
, "foo", 
NULL
);

362 
	`CheckG‘
(
db
, 
rİtiÚs
, "b¬", 
NULL
);

363 
çke_f‹r_»suÉ
 = 1;

365 
	`CheckG‘
(
db
, 
rİtiÚs
, "foo", "foovalue");

366 
	`CheckG‘
(
db
, 
rİtiÚs
, "bar", "barvalue");

368 
	`Ëv–db_İtiÚs_£t_f‹r_pŞicy
(
İtiÚs
, 
NULL
);

369 
	`Ëv–db_f‹½Şicy_de¡roy
(
pŞicy
);

372 
	`S¹Pha£
("cleanup");

373 
	`Ëv–db_şo£
(
db
);

374 
	`Ëv–db_İtiÚs_de¡roy
(
İtiÚs
);

375 
	`Ëv–db_»adİtiÚs_de¡roy
(
rİtiÚs
);

376 
	`Ëv–db_wr™eİtiÚs_de¡roy
(
wİtiÚs
);

377 
	`Ëv–db_ä“
(
dbÇme
);

378 
	`Ëv–db_ÿche_de¡roy
(
ÿche
);

379 
	`Ëv–db_com·¿tÜ_de¡roy
(
cmp
);

380 
	`Ëv–db_’v_de¡roy
(
’v
);

382 
	`årštf
(
¡d”r
, "PASS\n");

384 
	}
}

	@db/corruption_test.cc

5 
	~<sys/ty³s.h
>

7 
	~"g‹¡/g‹¡.h
"

8 
	~"db/db_im¶.h
"

9 
	~"db/f’ame.h
"

10 
	~"db/log_fÜm©.h
"

11 
	~"db/v”siÚ_£t.h
"

12 
	~"Ëv–db/ÿche.h
"

13 
	~"Ëv–db/db.h
"

14 
	~"Ëv–db/bË.h
"

15 
	~"Ëv–db/wr™e_b©ch.h
"

16 
	~"ut/loggšg.h
"

17 
	~"ut/‹¡ut.h
"

19 
Çme¥aû
 
	gËv–db
 {

21 cÚ¡ 
	gkV®ueSize
 = 1000;

23 şas 
	cCÜru±iÚTe¡
 : 
public
 
‹¡šg
::
Te¡
 {

24 
public
:

25 
CÜru±iÚTe¡
()

26 : 
db_
(
nuÎ±r
),

27 
dbÇme_
("/memenv/corruption_test"),

28 
tšy_ÿche_
(
NewLRUCache
(100)) {

29 
	gİtiÚs_
.
	g’v
 = &
’v_
;

30 
	gİtiÚs_
.
	gblock_ÿche
 = 
tšy_ÿche_
;

31 
De¡royDB
(
dbÇme_
, 
İtiÚs_
);

33 
	gİtiÚs_
.
	gü—‹_if_missšg
 = 
Œue
;

34 
Reİ’
();

35 
	gİtiÚs_
.
	gü—‹_if_missšg
 = 
çl£
;

38 ~
CÜru±iÚTe¡
() {

39 
d–‘e
 
	gdb_
;

40 
d–‘e
 
	gtšy_ÿche_
;

43 
Stus
 
TryReİ’
() {

44 
d–‘e
 
	gdb_
;

45 
	gdb_
 = 
nuÎ±r
;

46  
	gDB
::
O³n
(
İtiÚs_
, 
dbÇme_
, &
db_
);

49 
Reİ’
(è{ 
ASSERT_LEVELDB_OK
(
TryReİ’
()); }

51 
R•aœDB
() {

52 
d–‘e
 
	gdb_
;

53 
	gdb_
 = 
nuÎ±r
;

54 
ASSERT_LEVELDB_OK
(::
Ëv–db
::
R•aœDB
(
dbÇme_
, 
İtiÚs_
));

57 
Bud
(
n
) {

58 
	g¡d
::
¡ršg
 
key_¥aû
, 
	gv®ue_¥aû
;

59 
Wr™eB©ch
 
	gb©ch
;

60 
	gi
 = 0; i < 
	gn
; i++) {

62 
Sliû
 
	gkey
 = 
Key
(
i
, &
key_¥aû
);

63 
	gb©ch
.
CË¬
();

64 
	gb©ch
.
Put
(
key
, 
V®ue
(
i
, &
v®ue_¥aû
));

65 
Wr™eO±iÚs
 
	gİtiÚs
;

68 ià(
	gi
 =ğ
n
 - 1) {

69 
İtiÚs
.
sync
 = 
Œue
;

71 
ASSERT_LEVELDB_OK
(
db_
->
Wr™e
(
İtiÚs
, &
b©ch
));

75 
Check
(
mš_ex³ùed
, 
max_ex³ùed
) {

76 
	gÃxt_ex³ùed
 = 0;

77 
	gmis£d
 = 0;

78 
	gbad_keys
 = 0;

79 
	gbad_v®ues
 = 0;

80 
	gcÜ»ù
 = 0;

81 
	g¡d
::
¡ršg
 
v®ue_¥aû
;

82 
I‹¿tÜ
* 
	g™”
 = 
db_
->
NewI‹¿tÜ
(
R—dO±iÚs
());

83 
	g™”
->
S“kToFœ¡
(); i‹r->
V®id
(); i‹r->
Next
()) {

84 
ušt64_t
 
	gkey
;

85 
Sliû
 
š
(
™”
->
key
());

86 ià(
	gš
 =ğ"" || 
š
 == "~") {

90 ià(!
CÚsumeDecim®Numb”
(&
š
, &
key
è|| !
	gš
.
em±y
() ||

91 
	gkey
 < 
	gÃxt_ex³ùed
) {

92 
	gbad_keys
++;

95 
	gmis£d
 +ğ(
key
 - 
Ãxt_ex³ùed
);

96 
	gÃxt_ex³ùed
 = 
key
 + 1;

97 ià(
	g™”
->
v®ue
(è!ğ
V®ue
(
key
, &
v®ue_¥aû
)) {

98 
	gbad_v®ues
++;

100 
	gcÜ»ù
++;

103 
d–‘e
 
	g™”
;

105 
	g¡d
::
årštf
(

106 
¡d”r
,

108 
mš_ex³ùed
, 
max_ex³ùed
, 
cÜ»ù
, 
bad_keys
, 
bad_v®ues
, 
mis£d
);

109 
ASSERT_LE
(
mš_ex³ùed
, 
cÜ»ù
);

110 
ASSERT_GE
(
max_ex³ùed
, 
cÜ»ù
);

113 
CÜru±
(
FeTy³
 
f‘y³
, 
off£t
, 
by‹s_to_cÜru±
) {

115 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> 
f’ames
;

116 
ASSERT_LEVELDB_OK
(
’v_
.
rg‘
()->
G‘Chd»n
(
dbÇme_
, &
f’ames
));

117 
ušt64_t
 
	gnumb”
;

118 
FeTy³
 
	gty³
;

119 
	g¡d
::
¡ršg
 
âame
;

120 
	gpicked_numb”
 = -1;

121 
size_t
 
	gi
 = 0; i < 
	gf’ames
.
size
(); i++) {

122 ià(
P¬£FeName
(
f’ames
[
i
], &
numb”
, &
ty³
è&& 
	gty³
 =ğ
f‘y³
 &&

123 (
numb”
è> 
picked_numb”
) {

124 
âame
 = 
dbÇme_
 + "/" + 
f’ames
[
i
];

125 
	gpicked_numb”
 = 
numb”
;

128 
ASSERT_TRUE
(!
âame
.
em±y
()è<< 
	gf‘y³
;

130 
ušt64_t
 
	gfe_size
;

131 
ASSERT_LEVELDB_OK
(
’v_
.
rg‘
()->
G‘FeSize
(
âame
, &
fe_size
));

133 ià(
	goff£t
 < 0) {

135 ià(-
	goff£t
 > 
	gfe_size
) {

136 
	goff£t
 = 0;

138 
	goff£t
 = 
fe_size
 + 
off£t
;

141 ià(
	goff£t
 > 
	gfe_size
) {

142 
	goff£t
 = 
fe_size
;

144 ià(
	goff£t
 + 
	gby‹s_to_cÜru±
 > 
	gfe_size
) {

145 
	gby‹s_to_cÜru±
 = 
fe_size
 - 
off£t
;

149 
	g¡d
::
¡ršg
 
cÚ‹Ás
;

150 
Stus
 
	gs
 = 
R—dFeToSŒšg
(
’v_
.
rg‘
(), 
âame
, &
cÚ‹Ás
);

151 
ASSERT_TRUE
(
s
.
ok
()è<< 
	gs
.
ToSŒšg
();

152 
	gi
 = 0; i < 
	gby‹s_to_cÜru±
; i++) {

153 
	gcÚ‹Ás
[
i
 + 
off£t
] ^= 0x80;

155 
	gs
 = 
Wr™eSŒšgToFe
(
’v_
.
rg‘
(), 
cÚ‹Ás
, 
âame
);

156 
ASSERT_TRUE
(
s
.
ok
()è<< 
	gs
.
ToSŒšg
();

159 
Prİ”ty
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
) {

160 
¡d
::
¡ršg
 
´İ”ty
;

161 
	g»suÉ
;

162 ià(
	gdb_
->
G‘Prİ”ty
(
Çme
, &
´İ”ty
) &&

163 
ssÿnf
(
´İ”ty
.
c_¡r
(), "%d", &
»suÉ
) == 1) {

164  
»suÉ
;

171 
Sliû
 
Key
(
i
, 
¡d
::
¡ršg
* 
¡Üage
) {

172 
buf
[100];

173 
	g¡d
::
¢´štf
(
buf
, (buf), "%016d", 
i
);

174 
	g¡Üage
->
assign
(
buf
, 
¡¾’
(buf));

175  
Sliû
(*
¡Üage
);

179 
Sliû
 
V®ue
(
k
, 
¡d
::
¡ršg
* 
¡Üage
) {

180 
Rªdom
 
r
(
k
);

181  
	g‹¡
::
RªdomSŒšg
(&
r
, 
kV®ueSize
, 
¡Üage
);

184 
	g‹¡
::
E¼ÜEnv
 
’v_
;

185 
O±iÚs
 
	gİtiÚs_
;

186 
DB
* 
	gdb_
;

188 
	g´iv©e
:

189 
¡d
::
¡ršg
 
dbÇme_
;

190 
Cache
* 
	gtšy_ÿche_
;

193 
	$TEST_F
(
CÜru±iÚTe¡
, 
Recov”y
) {

194 
	`Bud
(100);

195 
	`Check
(100, 100);

196 
	`CÜru±
(
kLogFe
, 19, 1);

197 
	`CÜru±
(
kLogFe
, 
log
::
kBlockSize
 + 1000, 1);

198 
	`Reİ’
();

201 
	`Check
(36, 36);

202 
	}
}

204 
	$TEST_F
(
CÜru±iÚTe¡
, 
Recov”Wr™eE¼Ü
) {

205 
’v_
.
wr™abË_fe_”rÜ_
 = 
Œue
;

206 
Stus
 
s
 = 
	`TryReİ’
();

207 
	`ASSERT_TRUE
(!
s
.
	`ok
());

208 
	}
}

210 
	$TEST_F
(
CÜru±iÚTe¡
, 
NewFeE¼ÜDuršgWr™e
) {

212 
’v_
.
wr™abË_fe_”rÜ_
 = 
Œue
;

213 cÚ¡ 
num
 = 3 + (
	`O±iÚs
().
wr™e_bufãr_size
 / 
kV®ueSize
);

214 
¡d
::
¡ršg
 
v®ue_¡Üage
;

215 
Stus
 
s
;

216 
i
 = 0; 
s
.
	`ok
(è&& i < 
num
; i++) {

217 
Wr™eB©ch
 
b©ch
;

218 
b©ch
.
	`Put
("a", 
	`V®ue
(100, &
v®ue_¡Üage
));

219 
s
 = 
db_
->
	`Wr™e
(
	`Wr™eO±iÚs
(), &
b©ch
);

221 
	`ASSERT_TRUE
(!
s
.
	`ok
());

222 
	`ASSERT_GE
(
’v_
.
num_wr™abË_fe_”rÜs_
, 1);

223 
’v_
.
wr™abË_fe_”rÜ_
 = 
çl£
;

224 
	`Reİ’
();

225 
	}
}

227 
	$TEST_F
(
CÜru±iÚTe¡
, 
TabËFe
) {

228 
	`Bud
(100);

229 
DBIm¶
* 
dbi
 = 
»š‹½»t_ÿ¡
<DBIm¶*>(
db_
);

230 
dbi
->
	`TEST_Com·ùMemTabË
();

231 
dbi
->
	`TEST_Com·ùRªge
(0, 
nuÎ±r
,‚ullptr);

232 
dbi
->
	`TEST_Com·ùRªge
(1, 
nuÎ±r
,‚ullptr);

234 
	`CÜru±
(
kTabËFe
, 100, 1);

235 
	`Check
(90, 99);

236 
	}
}

238 
	$TEST_F
(
CÜru±iÚTe¡
, 
TabËFeR•aœ
) {

239 
İtiÚs_
.
block_size
 = 2 * 
kV®ueSize
;

240 
İtiÚs_
.
·¿noid_checks
 = 
Œue
;

241 
	`Reİ’
();

242 
	`Bud
(100);

243 
DBIm¶
* 
dbi
 = 
»š‹½»t_ÿ¡
<DBIm¶*>(
db_
);

244 
dbi
->
	`TEST_Com·ùMemTabË
();

245 
dbi
->
	`TEST_Com·ùRªge
(0, 
nuÎ±r
,‚ullptr);

246 
dbi
->
	`TEST_Com·ùRªge
(1, 
nuÎ±r
,‚ullptr);

248 
	`CÜru±
(
kTabËFe
, 100, 1);

249 
	`R•aœDB
();

250 
	`Reİ’
();

251 
	`Check
(95, 99);

252 
	}
}

254 
	$TEST_F
(
CÜru±iÚTe¡
, 
TabËFeIndexD©a
) {

255 
	`Bud
(10000);

256 
DBIm¶
* 
dbi
 = 
»š‹½»t_ÿ¡
<DBIm¶*>(
db_
);

257 
dbi
->
	`TEST_Com·ùMemTabË
();

259 
	`CÜru±
(
kTabËFe
, -2000, 500);

260 
	`Reİ’
();

261 
	`Check
(5000, 9999);

262 
	}
}

264 
	$TEST_F
(
CÜru±iÚTe¡
, 
MissšgDesütÜ
) {

265 
	`Bud
(1000);

266 
	`R•aœDB
();

267 
	`Reİ’
();

268 
	`Check
(1000, 1000);

269 
	}
}

271 
	$TEST_F
(
CÜru±iÚTe¡
, 
Sequ’ûNumb”Recov”y
) {

272 
	`ASSERT_LEVELDB_OK
(
db_
->
	`Put
(
	`Wr™eO±iÚs
(), "foo", "v1"));

273 
	`ASSERT_LEVELDB_OK
(
db_
->
	`Put
(
	`Wr™eO±iÚs
(), "foo", "v2"));

274 
	`ASSERT_LEVELDB_OK
(
db_
->
	`Put
(
	`Wr™eO±iÚs
(), "foo", "v3"));

275 
	`ASSERT_LEVELDB_OK
(
db_
->
	`Put
(
	`Wr™eO±iÚs
(), "foo", "v4"));

276 
	`ASSERT_LEVELDB_OK
(
db_
->
	`Put
(
	`Wr™eO±iÚs
(), "foo", "v5"));

277 
	`R•aœDB
();

278 
	`Reİ’
();

279 
¡d
::
¡ršg
 
v
;

280 
	`ASSERT_LEVELDB_OK
(
db_
->
	`G‘
(
	`R—dO±iÚs
(), "foo", &
v
));

281 
	`ASSERT_EQ
("v5", 
v
);

284 
	`ASSERT_LEVELDB_OK
(
db_
->
	`Put
(
	`Wr™eO±iÚs
(), "foo", "v6"));

285 
	`ASSERT_LEVELDB_OK
(
db_
->
	`G‘
(
	`R—dO±iÚs
(), "foo", &
v
));

286 
	`ASSERT_EQ
("v6", 
v
);

287 
	`Reİ’
();

288 
	`ASSERT_LEVELDB_OK
(
db_
->
	`G‘
(
	`R—dO±iÚs
(), "foo", &
v
));

289 
	`ASSERT_EQ
("v6", 
v
);

290 
	}
}

292 
	$TEST_F
(
CÜru±iÚTe¡
, 
CÜru±edDesütÜ
) {

293 
	`ASSERT_LEVELDB_OK
(
db_
->
	`Put
(
	`Wr™eO±iÚs
(), "foo", "hello"));

294 
DBIm¶
* 
dbi
 = 
»š‹½»t_ÿ¡
<DBIm¶*>(
db_
);

295 
dbi
->
	`TEST_Com·ùMemTabË
();

296 
dbi
->
	`TEST_Com·ùRªge
(0, 
nuÎ±r
,‚ullptr);

298 
	`CÜru±
(
kDesütÜFe
, 0, 1000);

299 
Stus
 
s
 = 
	`TryReİ’
();

300 
	`ASSERT_TRUE
(!
s
.
	`ok
());

302 
	`R•aœDB
();

303 
	`Reİ’
();

304 
¡d
::
¡ršg
 
v
;

305 
	`ASSERT_LEVELDB_OK
(
db_
->
	`G‘
(
	`R—dO±iÚs
(), "foo", &
v
));

306 
	`ASSERT_EQ
("h–lo", 
v
);

307 
	}
}

309 
	$TEST_F
(
CÜru±iÚTe¡
, 
Com·ùiÚIÅutE¼Ü
) {

310 
	`Bud
(10);

311 
DBIm¶
* 
dbi
 = 
»š‹½»t_ÿ¡
<DBIm¶*>(
db_
);

312 
dbi
->
	`TEST_Com·ùMemTabË
();

313 cÚ¡ 
Ï¡
 = 
cÚfig
::
kMaxMemCom·ùLev–
;

314 
	`ASSERT_EQ
(1, 
	`Prİ”ty
("Ëv–db.num-fes-©-Ëv–" + 
	`Numb”ToSŒšg
(
Ï¡
)));

316 
	`CÜru±
(
kTabËFe
, 100, 1);

317 
	`Check
(5, 9);

320 
	`Bud
(10000);

321 
	`Check
(10000, 10000);

322 
	}
}

324 
	$TEST_F
(
CÜru±iÚTe¡
, 
Com·ùiÚIÅutE¼ÜP¬ªoid
) {

325 
İtiÚs_
.
·¿noid_checks
 = 
Œue
;

326 
İtiÚs_
.
wr™e_bufãr_size
 = 512 << 10;

327 
	`Reİ’
();

328 
DBIm¶
* 
dbi
 = 
»š‹½»t_ÿ¡
<DBIm¶*>(
db_
);

331 
i
 = 0; i < 2; i++) {

332 
	`Bud
(10);

333 
dbi
->
	`TEST_Com·ùMemTabË
();

334 
	`CÜru±
(
kTabËFe
, 100, 1);

335 
’v_
.
	`SË•FÜMiüo£cÚds
(100000);

337 
dbi
->
	`Com·ùRªge
(
nuÎ±r
,‚ullptr);

340 
¡d
::
¡ršg
 
tmp1
, 
tmp2
;

341 
Stus
 
s
 = 
db_
->
	`Put
(
	`Wr™eO±iÚs
(), 
	`Key
(5, &
tmp1
), 
	`V®ue
(5, &
tmp2
));

342 
	`ASSERT_TRUE
(!
s
.
	`ok
()) << "write did‚ot fail in corrupted…aranoid db";

343 
	}
}

345 
	$TEST_F
(
CÜru±iÚTe¡
, 
UÄ–©edKeys
) {

346 
	`Bud
(10);

347 
DBIm¶
* 
dbi
 = 
»š‹½»t_ÿ¡
<DBIm¶*>(
db_
);

348 
dbi
->
	`TEST_Com·ùMemTabË
();

349 
	`CÜru±
(
kTabËFe
, 100, 1);

351 
¡d
::
¡ršg
 
tmp1
, 
tmp2
;

352 
	`ASSERT_LEVELDB_OK
(

353 
db_
->
	`Put
(
	`Wr™eO±iÚs
(), 
	`Key
(1000, &
tmp1
), 
	`V®ue
(1000, &
tmp2
)));

354 
¡d
::
¡ršg
 
v
;

355 
	`ASSERT_LEVELDB_OK
(
db_
->
	`G‘
(
	`R—dO±iÚs
(), 
	`Key
(1000, &
tmp1
), &
v
));

356 
	`ASSERT_EQ
(
	`V®ue
(1000, &
tmp2
).
	`ToSŒšg
(), 
v
);

357 
dbi
->
	`TEST_Com·ùMemTabË
();

358 
	`ASSERT_LEVELDB_OK
(
db_
->
	`G‘
(
	`R—dO±iÚs
(), 
	`Key
(1000, &
tmp1
), &
v
));

359 
	`ASSERT_EQ
(
	`V®ue
(1000, &
tmp2
).
	`ToSŒšg
(), 
v
);

360 
	}
}

	@db/db_impl.cc

5 
	~"db/db_im¶.h
"

7 
	~<®gÜ™hm
>

8 
	~<©omic
>

9 
	~<c¡dšt
>

10 
	~<c¡dio
>

11 
	~<£t
>

12 
	~<¡ršg
>

13 
	~<veùÜ
>

15 
	~"db/bud”.h
"

16 
	~"db/db_™”.h
"

17 
	~"db/dbfÜm©.h
"

18 
	~"db/f’ame.h
"

19 
	~"db/log_»ad”.h
"

20 
	~"db/log_wr™”.h
"

21 
	~"db/membË.h
"

22 
	~"db/bË_ÿche.h
"

23 
	~"db/v”siÚ_£t.h
"

24 
	~"db/wr™e_b©ch_š‹º®.h
"

25 
	~"Ëv–db/db.h
"

26 
	~"Ëv–db/’v.h
"

27 
	~"Ëv–db/¡©us.h
"

28 
	~"Ëv–db/bË.h
"

29 
	~"Ëv–db/bË_bud”.h
"

30 
	~"pÜt/pÜt.h
"

31 
	~"bË/block.h
"

32 
	~"bË/m”g”.h
"

33 
	~"bË/two_Ëv–_™”©Ü.h
"

34 
	~"ut/codšg.h
"

35 
	~"ut/loggšg.h
"

36 
	~"ut/mu‹xlock.h
"

38 
Çme¥aû
 
	gËv–db
 {

40 cÚ¡ 
	gkNumNÚTabËCacheFes
 = 10;

43 
	gDBIm¶
::
Wr™”
 {

44 
ex¶ic™
 
Wr™”
(
pÜt
::
Mu‹x
* 
mu
)

45 : 
b©ch
(
nuÎ±r
), 
sync
(
çl£
), 
dÚe
(çl£), 
cv
(
mu
) {}

47 
Stus
 
	g¡©us
;

48 
Wr™eB©ch
* 
	gb©ch
;

49 
boŞ
 
	gsync
;

50 
boŞ
 
	gdÚe
;

51 
	gpÜt
::
CÚdV¬
 
cv
;

54 
	gDBIm¶
::
Com·ùiÚS‹
 {

56 
	sOuut
 {

57 
ušt64_t
 
numb”
;

58 
ušt64_t
 
	gfe_size
;

59 
IÁ”ÇlKey
 
	gsm®Ë¡
, 
	gÏrge¡
;

62 
Ouut
* 
cu¼’t_ouut
(è{  &
	gouuts
[
ouuts
.
size
() - 1]; }

64 
ex¶ic™
 
Com·ùiÚS‹
(
Com·ùiÚ
* 
c
)

65 : 
com·ùiÚ
(
c
),

66 
sm®Ë¡_¢­shÙ
(0),

67 
outfe
(
nuÎ±r
),

68 
bud”
(
nuÎ±r
),

69 
tÙ®_by‹s
(0) {}

71 
Com·ùiÚ
* cÚ¡ 
	gcom·ùiÚ
;

77 
Sequ’ûNumb”
 
	gsm®Ë¡_¢­shÙ
;

79 
	g¡d
::
veùÜ
<
Ouut
> 
ouuts
;

82 
Wr™abËFe
* 
	goutfe
;

83 
TabËBud”
* 
	gbud”
;

85 
ušt64_t
 
	gtÙ®_by‹s
;

89 
	g‹m¶©e
 <
şass
 
	gT
, cÏs 
	gV
>

90 
ClToRªge
(
T
* 
±r
, 
V
 
mšv®ue
, V 
maxv®ue
) {

91 ià(
	g¡©ic_ÿ¡
<
	gV
>(*
	g±r
è> 
	gmaxv®ue
è*±¸ğ
maxv®ue
;

92 ià(
	g¡©ic_ÿ¡
<
	gV
>(*
	g±r
è< 
	gmšv®ue
è*±¸ğ
mšv®ue
;

94 
O±iÚs
 
Sª™izeO±iÚs
(cÚ¡ 
¡d
::
¡ršg
& 
dbÇme
,

95 cÚ¡ 
IÁ”ÇlKeyCom·¿tÜ
* 
icmp
,

96 cÚ¡ 
IÁ”ÇlF‹rPŞicy
* 
Şicy
,

97 cÚ¡ 
O±iÚs
& 
¤c
) {

98 
O±iÚs
 
	g»suÉ
 = 
¤c
;

99 
	g»suÉ
.
	gcom·¿tÜ
 = 
icmp
;

100 
	g»suÉ
.
	gf‹r_pŞicy
 = (
¤c
.
f‹r_pŞicy
 !ğ
nuÎ±r
è? 
Şicy
 :‚ullptr;

101 
ClToRªge
(&
»suÉ
.
max_İ’_fes
, 64 + 
kNumNÚTabËCacheFes
, 50000);

102 
ClToRªge
(&
»suÉ
.
wr™e_bufãr_size
, 64 << 10, 1 << 30);

103 
ClToRªge
(&
»suÉ
.
max_fe_size
, 1 << 20, 1 << 30);

104 
ClToRªge
(&
»suÉ
.
block_size
, 1 << 10, 4 << 20);

105 ià(
	g»suÉ
.
	gšfo_log
 =ğ
nuÎ±r
) {

107 
¤c
.
’v
->
C»©eDœ
(
dbÇme
);

108 
	g¤c
.
	g’v
->
R’ameFe
(
InfoLogFeName
(
dbÇme
), 
OldInfoLogFeName
(dbname));

109 
Stus
 
	gs
 = 
¤c
.
’v
->
NewLogg”
(
InfoLogFeName
(
dbÇme
), &
»suÉ
.
šfo_log
);

110 ià(!
	gs
.
ok
()) {

112 
	g»suÉ
.
	gšfo_log
 = 
nuÎ±r
;

115 ià(
	g»suÉ
.
	gblock_ÿche
 =ğ
nuÎ±r
) {

116 
»suÉ
.
block_ÿche
 = 
NewLRUCache
(8 << 20);

118  
	g»suÉ
;

121 
TabËCacheSize
(cÚ¡ 
O±iÚs
& 
§n™ized_İtiÚs
) {

123  
	g§n™ized_İtiÚs
.
	gmax_İ’_fes
 - 
	gkNumNÚTabËCacheFes
;

126 
	gDBIm¶
::
DBIm¶
(cÚ¡ 
O±iÚs
& 
¿w_İtiÚs
, cÚ¡ 
¡d
::
¡ršg
& 
dbÇme
)

127 : 
’v_
(
¿w_İtiÚs
.
’v
),

128 
š‹º®_com·¿tÜ_
(
¿w_İtiÚs
.
com·¿tÜ
),

129 
š‹º®_f‹r_pŞicy_
(
¿w_İtiÚs
.
f‹r_pŞicy
),

130 
İtiÚs_
(
Sª™izeO±iÚs
(
dbÇme
, &
š‹º®_com·¿tÜ_
,

131 &
š‹º®_f‹r_pŞicy_
, 
¿w_İtiÚs
)),

132 
owns_šfo_log_
(
İtiÚs_
.
šfo_log
 !ğ
¿w_İtiÚs
.info_log),

133 
owns_ÿche_
(
İtiÚs_
.
block_ÿche
 !ğ
¿w_İtiÚs
.block_cache),

134 
dbÇme_
(
dbÇme
),

135 
bË_ÿche_
(
Ãw
 
TabËCache
(
dbÇme_
, 
İtiÚs_
, 
TabËCacheSize
(options_))),

136 
db_lock_
(
nuÎ±r
),

137 
shu‰šg_down_
(
çl£
),

138 
background_wÜk_fšished_sigÇl_
(&
mu‹x_
),

139 
mem_
(
nuÎ±r
),

140 
imm_
(
nuÎ±r
),

141 
has_imm_
(
çl£
),

142 
logfe_
(
nuÎ±r
),

143 
logfe_numb”_
(0),

144 
log_
(
nuÎ±r
),

145 
£ed_
(0),

146 
tmp_b©ch_
(
Ãw
 
Wr™eB©ch
),

147 
background_com·ùiÚ_scheduËd_
(
çl£
),

148 
mªu®_com·ùiÚ_
(
nuÎ±r
),

149 
v”siÚs_
(
Ãw
 
V”siÚS‘
(
dbÇme_
, &
İtiÚs_
, 
bË_ÿche_
,

150 &
š‹º®_com·¿tÜ_
)) {}

152 
	gDBIm¶
::~
DBIm¶
() {

154 
mu‹x_
.
Lock
();

155 
	gshu‰šg_down_
.
¡Üe
(
Œue
, 
¡d
::
memÜy_Üd”_»Ëa£
);

156 
	gbackground_com·ùiÚ_scheduËd_
) {

157 
	gbackground_wÜk_fšished_sigÇl_
.
Wa™
();

159 
	gmu‹x_
.
UÆock
();

161 ià(
	gdb_lock_
 !ğ
nuÎ±r
) {

162 
’v_
->
UÆockFe
(
db_lock_
);

165 
d–‘e
 
	gv”siÚs_
;

166 ià(
	gmem_
 !ğ
nuÎ±r
è
mem_
->
UÄef
();

167 ià(
	gimm_
 !ğ
nuÎ±r
è
imm_
->
UÄef
();

168 
d–‘e
 
	gtmp_b©ch_
;

169 
d–‘e
 
	glog_
;

170 
d–‘e
 
	glogfe_
;

171 
d–‘e
 
	gbË_ÿche_
;

173 ià(
	gowns_šfo_log_
) {

174 
d–‘e
 
	gİtiÚs_
.
	gšfo_log
;

176 ià(
	gowns_ÿche_
) {

177 
d–‘e
 
	gİtiÚs_
.
	gblock_ÿche
;

181 
Stus
 
	gDBIm¶
::
NewDB
() {

182 
V”siÚEd™
 
Ãw_db
;

183 
	gÃw_db
.
S‘Com·¿tÜName
(
u£r_com·¿tÜ
()->
Name
());

184 
	gÃw_db
.
S‘LogNumb”
(0);

185 
	gÃw_db
.
S‘NextFe
(2);

186 
	gÃw_db
.
S‘La¡Sequ’û
(0);

188 cÚ¡ 
	g¡d
::
¡ršg
 
mªiã¡
 = 
DesütÜFeName
(
dbÇme_
, 1);

189 
Wr™abËFe
* 
	gfe
;

190 
Stus
 
	gs
 = 
’v_
->
NewWr™abËFe
(
mªiã¡
, &
fe
);

191 ià(!
	gs
.
ok
()) {

192  
	gs
;

195 
	glog
::
Wr™”
 
log
(
fe
);

196 
	g¡d
::
¡ršg
 
»cÜd
;

197 
	gÃw_db
.
EncodeTo
(&
»cÜd
);

198 
	gs
 = 
log
.
AddRecÜd
(
»cÜd
);

199 ià(
	gs
.
ok
()) {

200 
	gs
 = 
fe
->
Sync
();

202 ià(
	gs
.
ok
()) {

203 
	gs
 = 
fe
->
Clo£
();

206 
d–‘e
 
	gfe
;

207 ià(
	gs
.
ok
()) {

209 
	gs
 = 
S‘Cu¼’tFe
(
’v_
, 
dbÇme_
, 1);

211 
	g’v_
->
RemoveFe
(
mªiã¡
);

213  
	gs
;

216 
	gDBIm¶
::
MaybeIgnÜeE¼Ü
(
Stus
* 
s
) const {

217 ià(
s
->
ok
(è|| 
İtiÚs_
.
·¿noid_checks
) {

220 
Log
(
İtiÚs_
.
šfo_log
, "IgnÜšgƒ¼Ü %s", 
s
->
ToSŒšg
().
c_¡r
());

221 *
	gs
 = 
Stus
::
OK
();

225 
	gDBIm¶
::
RemoveObsŞ‘eFes
() {

226 
mu‹x_
.
As£¹H–d
();

228 ià(!
	gbg_”rÜ_
.
ok
()) {

235 
	g¡d
::
£t
<
ušt64_t
> 
live
 = 
³ndšg_ouuts_
;

236 
	gv”siÚs_
->
AddLiveFes
(&
live
);

238 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> 
f’ames
;

239 
	g’v_
->
G‘Chd»n
(
dbÇme_
, &
f’ames
);

240 
ušt64_t
 
	gnumb”
;

241 
FeTy³
 
	gty³
;

242 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> 
fes_to_d–‘e
;

243 
	g¡d
::
¡ršg
& 
f’ame
 : 
f’ames
) {

244 ià(
P¬£FeName
(
f’ame
, &
numb”
, &
ty³
)) {

245 
boŞ
 
	gk“p
 = 
Œue
;

246 
	gty³
) {

247 
	gkLogFe
:

248 
k“p
 = ((
numb”
 >ğ
v”siÚs_
->
LogNumb”
()) ||

249 (
numb”
 =ğ
v”siÚs_
->
P»vLogNumb”
()));

251 
	gkDesütÜFe
:

254 
k“p
 = (
numb”
 >ğ
v”siÚs_
->
Mªiã¡FeNumb”
());

256 
	gkTabËFe
:

257 
k“p
 = (
live
.
fšd
(
numb”
è!ğlive.
’d
());

259 
	gkTempFe
:

262 
k“p
 = (
live
.
fšd
(
numb”
è!ğlive.
’d
());

264 
	gkCu¼’tFe
:

265 
kDBLockFe
:

266 
kInfoLogFe
:

267 
k“p
 = 
Œue
;

271 ià(!
	gk“p
) {

272 
	gfes_to_d–‘e
.
push_back
(
¡d
::
move
(
f’ame
));

273 ià(
	gty³
 =ğ
kTabËFe
) {

274 
bË_ÿche_
->
Eviù
(
numb”
);

276 
Log
(
İtiÚs_
.
šfo_log
, "D–‘ty³=%d #%Îd\n", 
¡©ic_ÿ¡
<>(
ty³
),

277 
¡©ic_ÿ¡
<>(
numb”
));

285 
	gmu‹x_
.
UÆock
();

286 cÚ¡ 
	g¡d
::
¡ršg
& 
f’ame
 : 
fes_to_d–‘e
) {

287 
’v_
->
RemoveFe
(
dbÇme_
 + "/" + 
f’ame
);

289 
	gmu‹x_
.
Lock
();

292 
Stus
 
	gDBIm¶
::
Recov”
(
V”siÚEd™
* 
ed™
, 
boŞ
* 
§ve_mªiã¡
) {

293 
	gmu‹x_
.
As£¹H–d
();

298 
	g’v_
->
C»©eDœ
(
dbÇme_
);

299 
as£¹
(
db_lock_
 =ğ
nuÎ±r
);

300 
Stus
 
	gs
 = 
’v_
->
LockFe
(
LockFeName
(
dbÇme_
), &
db_lock_
);

301 ià(!
	gs
.
ok
()) {

302  
	gs
;

305 ià(!
	g’v_
->
FeExi¡s
(
Cu¼’tFeName
(
dbÇme_
))) {

306 ià(
	gİtiÚs_
.
	gü—‹_if_missšg
) {

307 
Log
(
İtiÚs_
.
šfo_log
, "Creating DB %s since it was missing.",

308 
dbÇme_
.
c_¡r
());

309 
	gs
 = 
NewDB
();

310 ià(!
	gs
.
ok
()) {

311  
	gs
;

314  
	gStus
::
Inv®idArgum’t
(

315 
dbÇme_
, "does‚otƒxist (create_if_missing is false)");

318 ià(
	gİtiÚs_
.
	g”rÜ_if_exi¡s
) {

319  
	gStus
::
Inv®idArgum’t
(
dbÇme_
,

324 
	gs
 = 
v”siÚs_
->
Recov”
(
§ve_mªiã¡
);

325 ià(!
	gs
.
ok
()) {

326  
	gs
;

328 
Sequ’ûNumb”
 
max_£qu’û
(0);

337 cÚ¡ 
ušt64_t
 
	gmš_log
 = 
v”siÚs_
->
LogNumb”
();

338 cÚ¡ 
ušt64_t
 
	g´ev_log
 = 
v”siÚs_
->
P»vLogNumb”
();

339 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> 
f’ames
;

340 
	gs
 = 
’v_
->
G‘Chd»n
(
dbÇme_
, &
f’ames
);

341 ià(!
	gs
.
ok
()) {

342  
	gs
;

344 
	g¡d
::
£t
<
ušt64_t
> 
ex³ùed
;

345 
	gv”siÚs_
->
AddLiveFes
(&
ex³ùed
);

346 
ušt64_t
 
	gnumb”
;

347 
FeTy³
 
	gty³
;

348 
	g¡d
::
veùÜ
<
ušt64_t
> 
logs
;

349 
size_t
 
	gi
 = 0; i < 
	gf’ames
.
size
(); i++) {

350 ià(
P¬£FeName
(
f’ames
[
i
], &
numb”
, &
ty³
)) {

351 
	gex³ùed
.
”a£
(
numb”
);

352 ià(
	gty³
 =ğ
kLogFe
 && ((
numb”
 >ğ
mš_log
è|| (numb” =ğ
´ev_log
)))

353 
logs
.
push_back
(
numb”
);

356 ià(!
	gex³ùed
.
em±y
()) {

357 
	gbuf
[50];

358 
	g¡d
::
¢´štf
(
buf
, (buf), "%d missing files;ƒ.g.",

359 
¡©ic_ÿ¡
<>(
ex³ùed
.
size
()));

360  
	gStus
::
CÜru±iÚ
(
buf
, 
TabËFeName
(
dbÇme_
, *(
ex³ùed
.
begš
())));

364 
	g¡d
::
sÜt
(
logs
.
begš
(),†ogs.
’d
());

365 
size_t
 
	gi
 = 0; i < 
	glogs
.
size
(); i++) {

366 
	gs
 = 
Recov”LogFe
(
logs
[
i
], (˜=ğlogs.
size
(è- 1), 
§ve_mªiã¡
, 
ed™
,

367 &
max_£qu’û
);

368 ià(!
	gs
.
ok
()) {

369  
	gs
;

375 
	gv”siÚs_
->
M¬kFeNumb”U£d
(
logs
[
i
]);

378 ià(
	gv”siÚs_
->
La¡Sequ’û
(è< 
	gmax_£qu’û
) {

379 
	gv”siÚs_
->
S‘La¡Sequ’û
(
max_£qu’û
);

382  
	gStus
::
OK
();

385 
Stus
 
	gDBIm¶
::
Recov”LogFe
(
ušt64_t
 
log_numb”
, 
boŞ
 
Ï¡_log
,

386 
boŞ
* 
§ve_mªiã¡
, 
V”siÚEd™
* 
ed™
,

387 
Sequ’ûNumb”
* 
max_£qu’û
) {

388 
	gLogR•Ü‹r
 : 
public
 
log
::
R—d”
::
R•Ü‹r
 {

389 
Env
* 
’v
;

390 
Logg”
* 
	gšfo_log
;

391 cÚ¡ * 
	gâame
;

392 
Stus
* 
	g¡©us
;

393 
CÜru±iÚ
(
size_t
 
by‹s
, cÚ¡ 
Stus
& 
s
è
	gov”ride
 {

394 
Log
(
šfo_log
, "%s%s: dropping %d bytes; %s",

395 (
this
->
¡©us
 =ğ
nuÎ±r
 ? "(ignÜšgƒ¼Üè" : ""), 
âame
,

396 
¡©ic_ÿ¡
<>(
by‹s
), 
s
.
ToSŒšg
().
c_¡r
());

397 ià(
	gthis
->
	g¡©us
 !ğ
nuÎ±r
 && 
this
->
¡©us
->
ok
()è*this->¡©u ğ
s
;

401 
	gmu‹x_
.
As£¹H–d
();

404 
	g¡d
::
¡ršg
 
âame
 = 
LogFeName
(
dbÇme_
, 
log_numb”
);

405 
Sequ’tŸlFe
* 
	gfe
;

406 
Stus
 
	g¡©us
 = 
’v_
->
NewSequ’tŸlFe
(
âame
, &
fe
);

407 ià(!
	g¡©us
.
ok
()) {

408 
MaybeIgnÜeE¼Ü
(&
¡©us
);

409  
	g¡©us
;

413 
LogR•Ü‹r
 
	g»pÜ‹r
;

414 
	g»pÜ‹r
.
	g’v
 = 
’v_
;

415 
	g»pÜ‹r
.
	gšfo_log
 = 
İtiÚs_
.
šfo_log
;

416 
	g»pÜ‹r
.
	gâame
 = 
âame
.
c_¡r
();

417 
	g»pÜ‹r
.
	g¡©us
 = (
İtiÚs_
.
·¿noid_checks
 ? &
¡©us
 : 
nuÎ±r
);

422 
	glog
::
R—d”
 
»ad”
(
fe
, &
»pÜ‹r
, 
Œue
 , 0 );

423 
Log
(
İtiÚs_
.
šfo_log
, "Recovering†og #%llu",

424 ()
log_numb”
);

427 
	g¡d
::
¡ršg
 
sü©ch
;

428 
Sliû
 
	g»cÜd
;

429 
Wr™eB©ch
 
	gb©ch
;

430 
	gcom·ùiÚs
 = 0;

431 
MemTabË
* 
	gmem
 = 
nuÎ±r
;

432 
	g»ad”
.
R—dRecÜd
(&
»cÜd
, &
sü©ch
è&& 
	g¡©us
.
ok
()) {

433 ià(
	g»cÜd
.
size
() < 12) {

434 
	g»pÜ‹r
.
CÜru±iÚ
(
»cÜd
.
size
(),

435 
Stus
::
CÜru±iÚ
("log„ecordoo small"));

438 
	gWr™eB©chIÁ”Çl
::
S‘CÚ‹Ás
(&
b©ch
, 
»cÜd
);

440 ià(
	gmem
 =ğ
nuÎ±r
) {

441 
mem
 = 
Ãw
 
MemTabË
(
š‹º®_com·¿tÜ_
);

442 
	gmem
->
Ref
();

444 
	g¡©us
 = 
Wr™eB©chIÁ”Çl
::
In£¹IÁo
(&
b©ch
, 
mem
);

445 
MaybeIgnÜeE¼Ü
(&
¡©us
);

446 ià(!
	g¡©us
.
ok
()) {

449 cÚ¡ 
Sequ’ûNumb”
 
	gÏ¡_£q
 = 
Wr™eB©chIÁ”Çl
::
Sequ’û
(&
b©ch
) +

450 
Wr™eB©chIÁ”Çl
::
CouÁ
(&
b©ch
) - 1;

451 ià(
	gÏ¡_£q
 > *
	gmax_£qu’û
) {

452 *
	gmax_£qu’û
 = 
Ï¡_£q
;

455 ià(
	gmem
->
Aµroxim©eMemÜyU§ge
(è> 
	gİtiÚs_
.
	gwr™e_bufãr_size
) {

456 
	gcom·ùiÚs
++;

457 *
	g§ve_mªiã¡
 = 
Œue
;

458 
	g¡©us
 = 
Wr™eLev–0TabË
(
mem
, 
ed™
, 
nuÎ±r
);

459 
	gmem
->
UÄef
();

460 
	gmem
 = 
nuÎ±r
;

461 ià(!
	g¡©us
.
ok
()) {

469 
d–‘e
 
	gfe
;

472 ià(
	g¡©us
.
ok
(è&& 
	gİtiÚs_
.
	g»u£_logs
 && 
	gÏ¡_log
 && 
	gcom·ùiÚs
 == 0) {

473 
as£¹
(
logfe_
 =ğ
nuÎ±r
);

474 
as£¹
(
log_
 =ğ
nuÎ±r
);

475 
as£¹
(
mem_
 =ğ
nuÎ±r
);

476 
ušt64_t
 
	glfe_size
;

477 ià(
	g’v_
->
G‘FeSize
(
âame
, &
lfe_size
).
ok
() &&

478 
	g’v_
->
NewAµ’dabËFe
(
âame
, &
logfe_
).
ok
()) {

479 
Log
(
İtiÚs_
.
šfo_log
, "Reusšg old†og % \n", 
âame
.
c_¡r
());

480 
	glog_
 = 
Ãw
 
log
::
Wr™”
(
logfe_
, 
lfe_size
);

481 
	glogfe_numb”_
 = 
log_numb”
;

482 ià(
	gmem
 !ğ
nuÎ±r
) {

483 
mem_
 = 
mem
;

484 
	gmem
 = 
nuÎ±r
;

487 
	gmem_
 = 
Ãw
 
MemTabË
(
š‹º®_com·¿tÜ_
);

488 
	gmem_
->
Ref
();

493 ià(
	gmem
 !ğ
nuÎ±r
) {

495 ià(
¡©us
.
ok
()) {

496 *
§ve_mªiã¡
 = 
Œue
;

497 
	g¡©us
 = 
Wr™eLev–0TabË
(
mem
, 
ed™
, 
nuÎ±r
);

499 
	gmem
->
UÄef
();

502  
	g¡©us
;

505 
Stus
 
	gDBIm¶
::
Wr™eLev–0TabË
(
MemTabË
* 
mem
, 
V”siÚEd™
* 
ed™
,

506 
V”siÚ
* 
ba£
) {

507 
	gmu‹x_
.
As£¹H–d
();

508 cÚ¡ 
ušt64_t
 
	g¡¬t_miüos
 = 
’v_
->
NowMiüos
();

509 
FeM‘aD©a
 
	gm‘a
;

510 
	gm‘a
.
	gnumb”
 = 
v”siÚs_
->
NewFeNumb”
();

511 
	g³ndšg_ouuts_
.
š£¹
(
m‘a
.
numb”
);

512 
I‹¿tÜ
* 
	g™”
 = 
mem
->
NewI‹¿tÜ
();

513 
Log
(
İtiÚs_
.
šfo_log
, "Level-0able #%llu: started",

514 ()
m‘a
.
numb”
);

516 
Stus
 
	gs
;

518 
	gmu‹x_
.
UÆock
();

519 
	gs
 = 
BudTabË
(
dbÇme_
, 
’v_
, 
İtiÚs_
, 
bË_ÿche_
, 
™”
, &
m‘a
);

520 
	gmu‹x_
.
Lock
();

523 
Log
(
İtiÚs_
.
šfo_log
, "Level-0able #%llu: %lld bytes %s",

524 ()
m‘a
.
numb”
, ()m‘a.
fe_size
,

525 
s
.
ToSŒšg
().
c_¡r
());

526 
d–‘e
 
	g™”
;

527 
	g³ndšg_ouuts_
.
”a£
(
m‘a
.
numb”
);

531 
	gËv–
 = 0;

532 ià(
	gs
.
ok
(è&& 
	gm‘a
.
	gfe_size
 > 0) {

533 cÚ¡ 
Sliû
 
	gmš_u£r_key
 = 
m‘a
.
sm®Ë¡
.
u£r_key
();

534 cÚ¡ 
Sliû
 
	gmax_u£r_key
 = 
m‘a
.
Ïrge¡
.
u£r_key
();

535 ià(
	gba£
 !ğ
nuÎ±r
) {

536 
Ëv–
 = 
ba£
->
PickLev–FÜMemTabËOuut
(
mš_u£r_key
, 
max_u£r_key
);

538 
	ged™
->
AddFe
(
Ëv–
, 
m‘a
.
numb”
, m‘a.
fe_size
, m‘a.
sm®Ë¡
,

539 
m‘a
.
Ïrge¡
);

542 
Com·ùiÚSts
 
	g¡©s
;

543 
	g¡©s
.
	gmiüos
 = 
’v_
->
NowMiüos
(è- 
¡¬t_miüos
;

544 
	g¡©s
.
	gby‹s_wr™‹n
 = 
m‘a
.
fe_size
;

545 
	g¡©s_
[
Ëv–
].
Add
(
¡©s
);

546  
	gs
;

549 
	gDBIm¶
::
Com·ùMemTabË
() {

550 
mu‹x_
.
As£¹H–d
();

551 
as£¹
(
imm_
 !ğ
nuÎ±r
);

554 
V”siÚEd™
 
	ged™
;

555 
V”siÚ
* 
	gba£
 = 
v”siÚs_
->
cu¼’t
();

556 
	gba£
->
Ref
();

557 
Stus
 
	gs
 = 
Wr™eLev–0TabË
(
imm_
, &
ed™
, 
ba£
);

558 
	gba£
->
UÄef
();

560 ià(
	gs
.
ok
(è&& 
	gshu‰šg_down_
.
lßd
(
¡d
::
memÜy_Üd”_acquœe
)) {

561 
s
 = 
Stus
::
IOE¼Ü
("Deleting DB during memtable compaction");

565 ià(
	gs
.
ok
()) {

566 
	ged™
.
S‘P»vLogNumb”
(0);

567 
	ged™
.
S‘LogNumb”
(
logfe_numb”_
);

568 
	gs
 = 
v”siÚs_
->
LogAndAµly
(&
ed™
, &
mu‹x_
);

571 ià(
	gs
.
ok
()) {

573 
	gimm_
->
UÄef
();

574 
	gimm_
 = 
nuÎ±r
;

575 
	ghas_imm_
.
¡Üe
(
çl£
, 
¡d
::
memÜy_Üd”_»Ëa£
);

576 
RemoveObsŞ‘eFes
();

578 
RecÜdBackgroundE¼Ü
(
s
);

582 
	gDBIm¶
::
Com·ùRªge
(cÚ¡ 
Sliû
* 
begš
, cÚ¡ Sliû* 
’d
) {

583 
	gmax_Ëv–_w™h_fes
 = 1;

585 
Mu‹xLock
 
l
(&
mu‹x_
);

586 
V”siÚ
* 
	gba£
 = 
v”siÚs_
->
cu¼’t
();

587 
	gËv–
 = 1;†ev– < 
	gcÚfig
::
kNumLev–s
;†evel++) {

588 ià(
	gba£
->
Ov”ÏpInLev–
(
Ëv–
, 
begš
, 
’d
)) {

589 
	gmax_Ëv–_w™h_fes
 = 
Ëv–
;

593 
TEST_Com·ùMemTabË
();

594 
	gËv–
 = 0;†ev– < 
	gmax_Ëv–_w™h_fes
;†evel++) {

595 
TEST_Com·ùRªge
(
Ëv–
, 
begš
, 
’d
);

599 
	gDBIm¶
::
TEST_Com·ùRªge
(
Ëv–
, cÚ¡ 
Sliû
* 
begš
,

600 cÚ¡ 
Sliû
* 
’d
) {

601 
as£¹
(
Ëv–
 >= 0);

602 
as£¹
(
Ëv–
 + 1 < 
cÚfig
::
kNumLev–s
);

604 
IÁ”ÇlKey
 
	gbegš_¡Üage
, 
	g’d_¡Üage
;

606 
Mªu®Com·ùiÚ
 
	gmªu®
;

607 
	gmªu®
.
	gËv–
 = 
Ëv–
;

608 
	gmªu®
.
	gdÚe
 = 
çl£
;

609 ià(
	gbegš
 =ğ
nuÎ±r
) {

610 
mªu®
.
begš
 = 
nuÎ±r
;

612 
	gbegš_¡Üage
 = 
IÁ”ÇlKey
(*
begš
, 
kMaxSequ’ûNumb”
, 
kV®ueTy³FÜS“k
);

613 
	gmªu®
.
	gbegš
 = &
begš_¡Üage
;

615 ià(
	g’d
 =ğ
nuÎ±r
) {

616 
mªu®
.
’d
 = 
nuÎ±r
;

618 
	g’d_¡Üage
 = 
IÁ”ÇlKey
(*
’d
, 0, 
¡©ic_ÿ¡
<
V®ueTy³
>(0));

619 
	gmªu®
.
	g’d
 = &
’d_¡Üage
;

622 
Mu‹xLock
 
l
(&
mu‹x_
);

623 !
	gmªu®
.
	gdÚe
 && !
	gshu‰šg_down_
.
lßd
(
¡d
::
memÜy_Üd”_acquœe
) &&

624 
bg_”rÜ_
.
ok
()) {

625 ià(
mªu®_com·ùiÚ_
 =ğ
nuÎ±r
) {

626 
mªu®_com·ùiÚ_
 = &
mªu®
;

627 
MaybeScheduËCom·ùiÚ
();

629 
	gbackground_wÜk_fšished_sigÇl_
.
Wa™
();

632 ià(
	gmªu®_com·ùiÚ_
 =ğ&
mªu®
) {

634 
mªu®_com·ùiÚ_
 = 
nuÎ±r
;

638 
Stus
 
	gDBIm¶
::
TEST_Com·ùMemTabË
() {

640 
Stus
 
s
 = 
Wr™e
(
Wr™eO±iÚs
(), 
nuÎ±r
);

641 ià(
	gs
.
ok
()) {

643 
Mu‹xLock
 
l
(&
mu‹x_
);

644 
	gimm_
 !ğ
nuÎ±r
 && 
bg_”rÜ_
.
ok
()) {

645 
background_wÜk_fšished_sigÇl_
.
Wa™
();

647 ià(
	gimm_
 !ğ
nuÎ±r
) {

648 
s
 = 
bg_”rÜ_
;

651  
	gs
;

654 
	gDBIm¶
::
RecÜdBackgroundE¼Ü
(cÚ¡ 
Stus
& 
s
) {

655 
mu‹x_
.
As£¹H–d
();

656 ià(
	gbg_”rÜ_
.
ok
()) {

657 
	gbg_”rÜ_
 = 
s
;

658 
	gbackground_wÜk_fšished_sigÇl_
.
SigÇlAÎ
();

662 
	gDBIm¶
::
MaybeScheduËCom·ùiÚ
() {

663 
mu‹x_
.
As£¹H–d
();

664 ià(
	gbackground_com·ùiÚ_scheduËd_
) {

666 } ià(
	gshu‰šg_down_
.
lßd
(
¡d
::
memÜy_Üd”_acquœe
)) {

668 } ià(!
bg_”rÜ_
.
ok
()) {

670 } ià(
imm_
 =ğ
nuÎ±r
 && 
mªu®_com·ùiÚ_
 ==‚ullptr &&

671 !
v”siÚs_
->
N“dsCom·ùiÚ
()) {

674 
background_com·ùiÚ_scheduËd_
 = 
Œue
;

675 
	g’v_
->
ScheduË
(&
DBIm¶
::
BGWÜk
, 
this
);

679 
	gDBIm¶
::
BGWÜk
(* 
db
) {

680 
»š‹½»t_ÿ¡
<
DBIm¶
*>(
db
)->
BackgroundC®l
();

683 
	gDBIm¶
::
BackgroundC®l
() {

684 
Mu‹xLock
 
l
(&
mu‹x_
);

685 
as£¹
(
background_com·ùiÚ_scheduËd_
);

686 ià(
	gshu‰šg_down_
.
lßd
(
¡d
::
memÜy_Üd”_acquœe
)) {

688 } ià(!
bg_”rÜ_
.
ok
()) {

691 
BackgroundCom·ùiÚ
();

694 
	gbackground_com·ùiÚ_scheduËd_
 = 
çl£
;

698 
MaybeScheduËCom·ùiÚ
();

699 
	gbackground_wÜk_fšished_sigÇl_
.
SigÇlAÎ
();

702 
	gDBIm¶
::
BackgroundCom·ùiÚ
() {

703 
mu‹x_
.
As£¹H–d
();

705 ià(
	gimm_
 !ğ
nuÎ±r
) {

706 
Com·ùMemTabË
();

710 
Com·ùiÚ
* 
	gc
;

711 
boŞ
 
	gis_mªu®
 = (
mªu®_com·ùiÚ_
 !ğ
nuÎ±r
);

712 
IÁ”ÇlKey
 
	gmªu®_’d
;

713 ià(
	gis_mªu®
) {

714 
Mªu®Com·ùiÚ
* 
	gm
 = 
mªu®_com·ùiÚ_
;

715 
	gc
 = 
v”siÚs_
->
Com·ùRªge
(
m
->
Ëv–
, m->
begš
, m->
’d
);

716 
	gm
->
	gdÚe
 = (
c
 =ğ
nuÎ±r
);

717 ià(
	gc
 !ğ
nuÎ±r
) {

718 
mªu®_’d
 = 
c
->
šput
(0, c->
num_šput_fes
(0è- 1)->
	gÏrge¡
;

720 
Log
(
İtiÚs_
.
šfo_log
,

722 
m
->
Ëv–
, (m->
begš
 ? m->begš->
DebugSŒšg
().
c_¡r
() : "(begin)"),

723 (
m
->
’d
 ? m->’d->
DebugSŒšg
().
c_¡r
() : "(end)"),

724 (
m
->
dÚe
 ? "Ónd)" : 
mªu®_’d
.
DebugSŒšg
().
c_¡r
()));

726 
	gc
 = 
v”siÚs_
->
PickCom·ùiÚ
();

729 
Stus
 
	g¡©us
;

730 ià(
	gc
 =ğ
nuÎ±r
) {

732 } ià(!
is_mªu®
 && 
c
->
IsTrivŸlMove
()) {

734 
as£¹
(
c
->
num_šput_fes
(0) == 1);

735 
FeM‘aD©a
* 
	gf
 = 
c
->
šput
(0, 0);

736 
	gc
->
ed™
()->
RemoveFe
(
c
->
Ëv–
(), 
f
->
numb”
);

737 
	gc
->
ed™
()->
AddFe
(
c
->
Ëv–
(è+ 1, 
f
->
numb”
, f->
fe_size
, f->
sm®Ë¡
,

738 
f
->
Ïrge¡
);

739 
	g¡©us
 = 
v”siÚs_
->
LogAndAµly
(
c
->
ed™
(), &
mu‹x_
);

740 ià(!
	g¡©us
.
ok
()) {

741 
RecÜdBackgroundE¼Ü
(
¡©us
);

743 
	gV”siÚS‘
::
Lev–Summ¬yStÜage
 
tmp
;

744 
Log
(
İtiÚs_
.
šfo_log
, "Moved #%lldo†evel-%d %lld bytes %s: %s\n",

745 
¡©ic_ÿ¡
<>(
f
->
numb”
), 
c
->
Ëv–
() + 1,

746 
¡©ic_ÿ¡
<>(
f
->
fe_size
),

747 
¡©us
.
ToSŒšg
().
c_¡r
(), 
v”siÚs_
->
Lev–Summ¬y
(&
tmp
));

749 
Com·ùiÚS‹
* 
	gcom·ù
 = 
Ãw
 Com·ùiÚS‹(
c
);

750 
	g¡©us
 = 
DoCom·ùiÚWÜk
(
com·ù
);

751 ià(!
	g¡©us
.
ok
()) {

752 
RecÜdBackgroundE¼Ü
(
¡©us
);

754 
CËªupCom·ùiÚ
(
com·ù
);

755 
	gc
->
R–—£IÅuts
();

756 
RemoveObsŞ‘eFes
();

758 
d–‘e
 
	gc
;

760 ià(
	g¡©us
.
ok
()) {

762 } ià(
	gshu‰šg_down_
.
lßd
(
¡d
::
memÜy_Üd”_acquœe
)) {

765 
Log
(
İtiÚs_
.
šfo_log
, "Com·ùiÚƒ¼Ü: %s", 
¡©us
.
ToSŒšg
().
c_¡r
());

768 ià(
	gis_mªu®
) {

769 
Mªu®Com·ùiÚ
* 
	gm
 = 
mªu®_com·ùiÚ_
;

770 ià(!
	g¡©us
.
ok
()) {

771 
	gm
->
	gdÚe
 = 
Œue
;

773 ià(!
	gm
->
	gdÚe
) {

776 
	gm
->
	gtmp_¡Üage
 = 
mªu®_’d
;

777 
	gm
->
	gbegš
 = &
m
->
tmp_¡Üage
;

779 
	gmªu®_com·ùiÚ_
 = 
nuÎ±r
;

783 
	gDBIm¶
::
CËªupCom·ùiÚ
(
Com·ùiÚS‹
* 
com·ù
) {

784 
mu‹x_
.
As£¹H–d
();

785 ià(
	gcom·ù
->
	gbud”
 !ğ
nuÎ±r
) {

787 
com·ù
->
bud”
->
AbªdÚ
();

788 
d–‘e
 
	gcom·ù
->
	gbud”
;

790 
as£¹
(
com·ù
->
outfe
 =ğ
nuÎ±r
);

792 
d–‘e
 
	gcom·ù
->
	goutfe
;

793 
size_t
 
	gi
 = 0; i < 
	gcom·ù
->
	gouuts
.
size
(); i++) {

794 cÚ¡ 
	gCom·ùiÚS‹
::
Ouut
& 
out
 = 
com·ù
->
ouuts
[
i
];

795 
	g³ndšg_ouuts_
.
”a£
(
out
.
numb”
);

797 
d–‘e
 
	gcom·ù
;

800 
Stus
 
	gDBIm¶
::
O³nCom·ùiÚOuutFe
(
Com·ùiÚS‹
* 
com·ù
) {

801 
as£¹
(
com·ù
 !ğ
nuÎ±r
);

802 
as£¹
(
com·ù
->
bud”
 =ğ
nuÎ±r
);

803 
ušt64_t
 
	gfe_numb”
;

805 
	gmu‹x_
.
Lock
();

806 
	gfe_numb”
 = 
v”siÚs_
->
NewFeNumb”
();

807 
	g³ndšg_ouuts_
.
š£¹
(
fe_numb”
);

808 
	gCom·ùiÚS‹
::
Ouut
 
out
;

809 
	gout
.
	gnumb”
 = 
fe_numb”
;

810 
	gout
.
	gsm®Ë¡
.
CË¬
();

811 
	gout
.
	gÏrge¡
.
CË¬
();

812 
	gcom·ù
->
	gouuts
.
push_back
(
out
);

813 
	gmu‹x_
.
UÆock
();

817 
	g¡d
::
¡ršg
 
âame
 = 
TabËFeName
(
dbÇme_
, 
fe_numb”
);

818 
Stus
 
	gs
 = 
’v_
->
NewWr™abËFe
(
âame
, &
com·ù
->
outfe
);

819 ià(
	gs
.
ok
()) {

820 
	gcom·ù
->
	gbud”
 = 
Ãw
 
TabËBud”
(
İtiÚs_
, 
com·ù
->
outfe
);

822  
	gs
;

825 
Stus
 
	gDBIm¶
::
FšishCom·ùiÚOuutFe
(
Com·ùiÚS‹
* 
com·ù
,

826 
I‹¿tÜ
* 
šput
) {

827 
as£¹
(
com·ù
 !ğ
nuÎ±r
);

828 
as£¹
(
com·ù
->
outfe
 !ğ
nuÎ±r
);

829 
as£¹
(
com·ù
->
bud”
 !ğ
nuÎ±r
);

831 cÚ¡ 
ušt64_t
 
	gouut_numb”
 = 
com·ù
->
cu¼’t_ouut
()->
numb”
;

832 
as£¹
(
ouut_numb”
 != 0);

835 
Stus
 
	gs
 = 
šput
->
¡©us
();

836 cÚ¡ 
ušt64_t
 
	gcu¼’t_’Œ›s
 = 
com·ù
->
bud”
->
NumEÁr›s
();

837 ià(
	gs
.
ok
()) {

838 
	gs
 = 
com·ù
->
bud”
->
Fšish
();

840 
	gcom·ù
->
	gbud”
->
AbªdÚ
();

842 cÚ¡ 
ušt64_t
 
	gcu¼’t_by‹s
 = 
com·ù
->
bud”
->
FeSize
();

843 
	gcom·ù
->
cu¼’t_ouut
()->
	gfe_size
 = 
cu¼’t_by‹s
;

844 
	gcom·ù
->
	gtÙ®_by‹s
 +ğ
cu¼’t_by‹s
;

845 
d–‘e
 
	gcom·ù
->
	gbud”
;

846 
	gcom·ù
->
	gbud”
 = 
nuÎ±r
;

849 ià(
	gs
.
ok
()) {

850 
	gs
 = 
com·ù
->
outfe
->
Sync
();

852 ià(
	gs
.
ok
()) {

853 
	gs
 = 
com·ù
->
outfe
->
Clo£
();

855 
d–‘e
 
	gcom·ù
->
	goutfe
;

856 
	gcom·ù
->
	goutfe
 = 
nuÎ±r
;

858 ià(
	gs
.
ok
(è&& 
	gcu¼’t_’Œ›s
 > 0) {

860 
I‹¿tÜ
* 
	g™”
 =

861 
bË_ÿche_
->
NewI‹¿tÜ
(
R—dO±iÚs
(), 
ouut_numb”
, 
cu¼’t_by‹s
);

862 
	gs
 = 
™”
->
¡©us
();

863 
d–‘e
 
	g™”
;

864 ià(
	gs
.
ok
()) {

865 
Log
(
İtiÚs_
.
šfo_log
, "Generatedable #%llu@%d: %lld keys, %lld bytes",

866 ()
ouut_numb”
, 
com·ù
->
com·ùiÚ
->
Ëv–
(),

867 ()
cu¼’t_’Œ›s
,

868 ()
cu¼’t_by‹s
);

871  
	gs
;

874 
Stus
 
	gDBIm¶
::
In¡®lCom·ùiÚResuÉs
(
Com·ùiÚS‹
* 
com·ù
) {

875 
mu‹x_
.
As£¹H–d
();

876 
Log
(
İtiÚs_
.
šfo_log
, "Compacted %d@%d + %d@%d files => %lld bytes",

877 
com·ù
->
com·ùiÚ
->
num_šput_fes
(0), com·ù->com·ùiÚ->
Ëv–
(),

878 
com·ù
->
com·ùiÚ
->
num_šput_fes
(1), com·ù->com·ùiÚ->
Ëv–
() + 1,

879 
¡©ic_ÿ¡
<>(
com·ù
->
tÙ®_by‹s
));

882 
	gcom·ù
->
	gcom·ùiÚ
->
AddIÅutD–‘iÚs
(
com·ù
->
com·ùiÚ
->
ed™
());

883 cÚ¡ 
	gËv–
 = 
com·ù
->
com·ùiÚ
->
Ëv–
();

884 
size_t
 
	gi
 = 0; i < 
	gcom·ù
->
	gouuts
.
size
(); i++) {

885 cÚ¡ 
	gCom·ùiÚS‹
::
Ouut
& 
out
 = 
com·ù
->
ouuts
[
i
];

886 
	gcom·ù
->
	gcom·ùiÚ
->
ed™
()->
AddFe
(
Ëv–
 + 1, 
out
.
numb”
, out.
fe_size
,

887 
out
.
sm®Ë¡
, out.
Ïrge¡
);

889  
	gv”siÚs_
->
LogAndAµly
(
com·ù
->
com·ùiÚ
->
ed™
(), &
mu‹x_
);

892 
Stus
 
	gDBIm¶
::
DoCom·ùiÚWÜk
(
Com·ùiÚS‹
* 
com·ù
) {

893 cÚ¡ 
ušt64_t
 
¡¬t_miüos
 = 
’v_
->
NowMiüos
();

894 
št64_t
 
	gimm_miüos
 = 0;

896 
Log
(
İtiÚs_
.
šfo_log
, "Compacting %d@%d + %d@%d files",

897 
com·ù
->
com·ùiÚ
->
num_šput_fes
(0), com·ù->com·ùiÚ->
Ëv–
(),

898 
com·ù
->
com·ùiÚ
->
num_šput_fes
(1),

899 
com·ù
->
com·ùiÚ
->
Ëv–
() + 1);

901 
as£¹
(
v”siÚs_
->
NumLev–Fes
(
com·ù
->
com·ùiÚ
->
Ëv–
()) > 0);

902 
as£¹
(
com·ù
->
bud”
 =ğ
nuÎ±r
);

903 
as£¹
(
com·ù
->
outfe
 =ğ
nuÎ±r
);

904 ià(
	g¢­shÙs_
.
em±y
()) {

905 
	gcom·ù
->
	gsm®Ë¡_¢­shÙ
 = 
v”siÚs_
->
La¡Sequ’û
();

907 
	gcom·ù
->
	gsm®Ë¡_¢­shÙ
 = 
¢­shÙs_
.
Şde¡
()->
£qu’û_numb”
();

910 
I‹¿tÜ
* 
	gšput
 = 
v”siÚs_
->
MakeIÅutI‹¿tÜ
(
com·ù
->
com·ùiÚ
);

913 
	gmu‹x_
.
UÆock
();

915 
	gšput
->
S“kToFœ¡
();

916 
Stus
 
	g¡©us
;

917 
P¬£dIÁ”ÇlKey
 
	gikey
;

918 
	g¡d
::
¡ršg
 
cu¼’t_u£r_key
;

919 
boŞ
 
	ghas_cu¼’t_u£r_key
 = 
çl£
;

920 
Sequ’ûNumb”
 
	gÏ¡_£qu’û_fÜ_key
 = 
kMaxSequ’ûNumb”
;

921 
	gšput
->
V®id
(è&& !
	gshu‰šg_down_
.
lßd
(
¡d
::
memÜy_Üd”_acquœe
)) {

923 ià(
has_imm_
.
lßd
(
¡d
::
memÜy_Üd”_»Ïxed
)) {

924 cÚ¡ 
ušt64_t
 
imm_¡¬t
 = 
’v_
->
NowMiüos
();

925 
	gmu‹x_
.
Lock
();

926 ià(
	gimm_
 !ğ
nuÎ±r
) {

927 
Com·ùMemTabË
();

929 
	gbackground_wÜk_fšished_sigÇl_
.
SigÇlAÎ
();

931 
	gmu‹x_
.
UÆock
();

932 
	gimm_miüos
 +ğ(
’v_
->
NowMiüos
(è- 
imm_¡¬t
);

935 
Sliû
 
	gkey
 = 
šput
->
key
();

936 ià(
	gcom·ù
->
	gcom·ùiÚ
->
ShouldStİBefÜe
(
key
) &&

937 
	gcom·ù
->
	gbud”
 !ğ
nuÎ±r
) {

938 
¡©us
 = 
FšishCom·ùiÚOuutFe
(
com·ù
, 
šput
);

939 ià(!
	g¡©us
.
ok
()) {

945 
boŞ
 
	gdrİ
 = 
çl£
;

946 ià(!
P¬£IÁ”ÇlKey
(
key
, &
ikey
)) {

948 
	gcu¼’t_u£r_key
.
ş—r
();

949 
	ghas_cu¼’t_u£r_key
 = 
çl£
;

950 
	gÏ¡_£qu’û_fÜ_key
 = 
kMaxSequ’ûNumb”
;

952 ià(!
	ghas_cu¼’t_u£r_key
 ||

953 
u£r_com·¿tÜ
()->
Com·»
(
ikey
.
u£r_key
, 
Sliû
(
cu¼’t_u£r_key
)) !=

956 
cu¼’t_u£r_key
.
assign
(
ikey
.
u£r_key
.
d©a
(), ikey.u£r_key.
size
());

957 
	ghas_cu¼’t_u£r_key
 = 
Œue
;

958 
	gÏ¡_£qu’û_fÜ_key
 = 
kMaxSequ’ûNumb”
;

961 ià(
	gÏ¡_£qu’û_fÜ_key
 <ğ
com·ù
->
sm®Ë¡_¢­shÙ
) {

963 
drİ
 = 
Œue
;

964 } ià(
	gikey
.
	gty³
 =ğ
kTy³D–‘iÚ
 &&

965 
ikey
.
£qu’û
 <ğ
com·ù
->
sm®Ë¡_¢­shÙ
 &&

966 
com·ù
->
com·ùiÚ
->
IsBa£Lev–FÜKey
(
ikey
.
u£r_key
)) {

974 
drİ
 = 
Œue
;

977 
	gÏ¡_£qu’û_fÜ_key
 = 
ikey
.
£qu’û
;

980 
Log
(
İtiÚs_
.
šfo_log
,

983 
ikey
.
u£r_key
.
ToSŒšg
().
c_¡r
(),

984 ()
ikey
.
£qu’û
, ikey.
ty³
, 
kTy³V®ue
, 
drİ
,

985 
com·ù
->
com·ùiÚ
->
IsBa£Lev–FÜKey
(
ikey
.
u£r_key
),

986 ()
Ï¡_£qu’û_fÜ_key
, ()
com·ù
->
sm®Ë¡_¢­shÙ
);

989 ià(!
	gdrİ
) {

991 ià(
	gcom·ù
->
	gbud”
 =ğ
nuÎ±r
) {

992 
¡©us
 = 
O³nCom·ùiÚOuutFe
(
com·ù
);

993 ià(!
	g¡©us
.
ok
()) {

997 ià(
	gcom·ù
->
	gbud”
->
NumEÁr›s
() == 0) {

998 
com·ù
->
cu¼’t_ouut
()->
sm®Ë¡
.
DecodeFrom
(
key
);

1000 
	gcom·ù
->
cu¼’t_ouut
()->
	gÏrge¡
.
DecodeFrom
(
key
);

1001 
	gcom·ù
->
	gbud”
->
Add
(
key
, 
šput
->
v®ue
());

1004 ià(
	gcom·ù
->
	gbud”
->
FeSize
() >=

1005 
com·ù
->
com·ùiÚ
->
MaxOuutFeSize
()) {

1006 
¡©us
 = 
FšishCom·ùiÚOuutFe
(
com·ù
, 
šput
);

1007 ià(!
	g¡©us
.
ok
()) {

1013 
	gšput
->
Next
();

1016 ià(
	g¡©us
.
ok
(è&& 
	gshu‰šg_down_
.
lßd
(
¡d
::
memÜy_Üd”_acquœe
)) {

1017 
¡©us
 = 
Stus
::
IOE¼Ü
("Deleting DB during compaction");

1019 ià(
	g¡©us
.
ok
(è&& 
	gcom·ù
->
	gbud”
 !ğ
nuÎ±r
) {

1020 
¡©us
 = 
FšishCom·ùiÚOuutFe
(
com·ù
, 
šput
);

1022 ià(
	g¡©us
.
ok
()) {

1023 
	g¡©us
 = 
šput
->
¡©us
();

1025 
d–‘e
 
	gšput
;

1026 
	gšput
 = 
nuÎ±r
;

1028 
Com·ùiÚSts
 
	g¡©s
;

1029 
	g¡©s
.
	gmiüos
 = 
’v_
->
NowMiüos
(è- 
¡¬t_miüos
 - 
imm_miüos
;

1030 
	gwhich
 = 0; which < 2; which++) {

1031 
	gi
 = 0; i < 
	gcom·ù
->
	gcom·ùiÚ
->
num_šput_fes
(
which
); i++) {

1032 
	g¡©s
.
	gby‹s_»ad
 +ğ
com·ù
->
com·ùiÚ
->
šput
(
which
, 
i
)->
	gfe_size
;

1035 
size_t
 
	gi
 = 0; i < 
	gcom·ù
->
	gouuts
.
size
(); i++) {

1036 
	g¡©s
.
	gby‹s_wr™‹n
 +ğ
com·ù
->
ouuts
[
i
].
fe_size
;

1039 
	gmu‹x_
.
Lock
();

1040 
	g¡©s_
[
com·ù
->
com·ùiÚ
->
Ëv–
(è+ 1].
Add
(
¡©s
);

1042 ià(
	g¡©us
.
ok
()) {

1043 
	g¡©us
 = 
In¡®lCom·ùiÚResuÉs
(
com·ù
);

1045 ià(!
	g¡©us
.
ok
()) {

1046 
RecÜdBackgroundE¼Ü
(
¡©us
);

1048 
	gV”siÚS‘
::
Lev–Summ¬yStÜage
 
tmp
;

1049 
Log
(
İtiÚs_
.
šfo_log
, "com·ùedo: %s", 
v”siÚs_
->
Lev–Summ¬y
(&
tmp
));

1050  
	g¡©us
;

1053 
	gÇme¥aû
 {

1055 
	sI‹rS‹
 {

1056 
	gpÜt
::
Mu‹x
* cÚ¡ 
mu
;

1057 
V”siÚ
* cÚ¡ 
v”siÚ
 
GUARDED_BY
(
mu
);

1058 
MemTabË
* cÚ¡ 
mem
 
GUARDED_BY
(
mu
);

1059 
MemTabË
* cÚ¡ 
imm
 
GUARDED_BY
(
mu
);

1061 
I‹rS‹
(
pÜt
::
Mu‹x
* 
mu‹x
, 
MemTabË
* 
mem
, MemTabË* 
imm
, 
V”siÚ
* 
v”siÚ
)

1062 : 
mu
(
mu‹x
), 
v”siÚ
(v”siÚ), 
mem
(mem), 
imm
(imm) {}

1065 
CËªupI‹¿tÜS‹
(* 
¬g1
, * 
¬g2
) {

1066 
I‹rS‹
* 
	g¡©e
 = 
»š‹½»t_ÿ¡
<I‹rS‹*>(
¬g1
);

1067 
	g¡©e
->
	gmu
->
Lock
();

1068 
	g¡©e
->
	gmem
->
UÄef
();

1069 ià(
	g¡©e
->
	gimm
 !ğ
nuÎ±r
è
¡©e
->
imm
->
UÄef
();

1070 
	g¡©e
->
	gv”siÚ
->
UÄef
();

1071 
	g¡©e
->
	gmu
->
UÆock
();

1072 
d–‘e
 
	g¡©e
;

1077 
I‹¿tÜ
* 
	gDBIm¶
::
NewIÁ”ÇlI‹¿tÜ
(cÚ¡ 
R—dO±iÚs
& 
İtiÚs
,

1078 
Sequ’ûNumb”
* 
Ï‹¡_¢­shÙ
,

1079 
ušt32_t
* 
£ed
) {

1080 
	gmu‹x_
.
Lock
();

1081 *
	gÏ‹¡_¢­shÙ
 = 
v”siÚs_
->
La¡Sequ’û
();

1084 
	g¡d
::
veùÜ
<
I‹¿tÜ
*> 
li¡
;

1085 
	gli¡
.
push_back
(
mem_
->
NewI‹¿tÜ
());

1086 
	gmem_
->
Ref
();

1087 ià(
	gimm_
 !ğ
nuÎ±r
) {

1088 
li¡
.
push_back
(
imm_
->
NewI‹¿tÜ
());

1089 
	gimm_
->
Ref
();

1091 
	gv”siÚs_
->
cu¼’t
()->
AddI‹¿tÜs
(
İtiÚs
, &
li¡
);

1092 
I‹¿tÜ
* 
	gš‹º®_™”
 =

1093 
NewM”gšgI‹¿tÜ
(&
š‹º®_com·¿tÜ_
, &
li¡
[0],†i¡.
size
());

1094 
	gv”siÚs_
->
cu¼’t
()->
Ref
();

1096 
I‹rS‹
* 
	gş—nup
 = 
Ãw
 I‹rS‹(&
mu‹x_
, 
mem_
, 
imm_
, 
v”siÚs_
->
cu¼’t
());

1097 
	gš‹º®_™”
->
Regi¡”CËªup
(
CËªupI‹¿tÜS‹
, 
ş—nup
, 
nuÎ±r
);

1099 *
	g£ed
 = ++
£ed_
;

1100 
	gmu‹x_
.
UÆock
();

1101  
	gš‹º®_™”
;

1104 
I‹¿tÜ
* 
	gDBIm¶
::
TEST_NewIÁ”ÇlI‹¿tÜ
() {

1105 
Sequ’ûNumb”
 
ignÜed
;

1106 
ušt32_t
 
	gignÜed_£ed
;

1107  
NewIÁ”ÇlI‹¿tÜ
(
R—dO±iÚs
(), &
ignÜed
, &
ignÜed_£ed
);

1110 
št64_t
 
	gDBIm¶
::
TEST_MaxNextLev–Ov”ÏµšgBy‹s
() {

1111 
Mu‹xLock
 
l
(&
mu‹x_
);

1112  
	gv”siÚs_
->
MaxNextLev–Ov”ÏµšgBy‹s
();

1115 
Stus
 
	gDBIm¶
::
G‘
(cÚ¡ 
R—dO±iÚs
& 
İtiÚs
, cÚ¡ 
Sliû
& 
key
,

1116 
¡d
::
¡ršg
* 
v®ue
) {

1117 
Stus
 
s
;

1118 
Mu‹xLock
 
l
(&
mu‹x_
);

1119 
Sequ’ûNumb”
 
	g¢­shÙ
;

1120 ià(
	gİtiÚs
.
	g¢­shÙ
 !ğ
nuÎ±r
) {

1121 
¢­shÙ
 =

1122 
¡©ic_ÿ¡
<cÚ¡ 
SÇpshÙIm¶
*>(
İtiÚs
.
¢­shÙ
)->
£qu’û_numb”
();

1124 
	g¢­shÙ
 = 
v”siÚs_
->
La¡Sequ’û
();

1127 
MemTabË
* 
	gmem
 = 
mem_
;

1128 
MemTabË
* 
	gimm
 = 
imm_
;

1129 
V”siÚ
* 
	gcu¼’t
 = 
v”siÚs_
->
cu¼’t
();

1130 
	gmem
->
Ref
();

1131 ià(
	gimm
 !ğ
nuÎ±r
è
imm
->
Ref
();

1132 
	gcu¼’t
->
Ref
();

1134 
boŞ
 
	ghave_¡©_upd©e
 = 
çl£
;

1135 
	gV”siÚ
::
G‘Sts
 
¡©s
;

1139 
	gmu‹x_
.
UÆock
();

1141 
LookupKey
 
lkey
(
key
, 
¢­shÙ
);

1142 ià(
	gmem
->
G‘
(
lkey
, 
v®ue
, &
s
)) {

1144 } ià(
	gimm
 !ğ
nuÎ±r
 && 
imm
->
G‘
(
lkey
, 
v®ue
, &
s
)) {

1147 
	gs
 = 
cu¼’t
->
G‘
(
İtiÚs
, 
lkey
, 
v®ue
, &
¡©s
);

1148 
	ghave_¡©_upd©e
 = 
Œue
;

1150 
	gmu‹x_
.
Lock
();

1153 ià(
	ghave_¡©_upd©e
 && 
	gcu¼’t
->
Upd©eSts
(
¡©s
)) {

1154 
MaybeScheduËCom·ùiÚ
();

1156 
	gmem
->
UÄef
();

1157 ià(
	gimm
 !ğ
nuÎ±r
è
imm
->
UÄef
();

1158 
	gcu¼’t
->
UÄef
();

1159  
	gs
;

1162 
I‹¿tÜ
* 
	gDBIm¶
::
NewI‹¿tÜ
(cÚ¡ 
R—dO±iÚs
& 
İtiÚs
) {

1163 
Sequ’ûNumb”
 
Ï‹¡_¢­shÙ
;

1164 
ušt32_t
 
	g£ed
;

1165 
I‹¿tÜ
* 
	g™”
 = 
NewIÁ”ÇlI‹¿tÜ
(
İtiÚs
, &
Ï‹¡_¢­shÙ
, &
£ed
);

1166  
NewDBI‹¿tÜ
(
this
, 
u£r_com·¿tÜ
(), 
™”
,

1167 (
İtiÚs
.
¢­shÙ
 !ğ
nuÎ±r


1168 ? 
¡©ic_ÿ¡
<cÚ¡ 
SÇpshÙIm¶
*>(
İtiÚs
.
¢­shÙ
)

1169 ->
£qu’û_numb”
()

1170 : 
Ï‹¡_¢­shÙ
),

1171 
£ed
);

1174 
	gDBIm¶
::
RecÜdR—dSam¶e
(
Sliû
 
key
) {

1175 
Mu‹xLock
 
l
(&
mu‹x_
);

1176 ià(
	gv”siÚs_
->
cu¼’t
()->
RecÜdR—dSam¶e
(
key
)) {

1177 
MaybeScheduËCom·ùiÚ
();

1181 cÚ¡ 
SÇpshÙ
* 
	gDBIm¶
::
G‘SÇpshÙ
() {

1182 
Mu‹xLock
 
l
(&
mu‹x_
);

1183  
	g¢­shÙs_
.
New
(
v”siÚs_
->
La¡Sequ’û
());

1186 
	gDBIm¶
::
R–—£SÇpshÙ
(cÚ¡ 
SÇpshÙ
* 
¢­shÙ
) {

1187 
Mu‹xLock
 
l
(&
mu‹x_
);

1188 
	g¢­shÙs_
.
D–‘e
(
¡©ic_ÿ¡
<cÚ¡ 
SÇpshÙIm¶
*>(
¢­shÙ
));

1192 
Stus
 
	gDBIm¶
::
Put
(cÚ¡ 
Wr™eO±iÚs
& 
o
, cÚ¡ 
Sliû
& 
key
, cÚ¡ Sliû& 
v®
) {

1193  
	gDB
::
Put
(
o
, 
key
, 
v®
);

1196 
Stus
 
	gDBIm¶
::
D–‘e
(cÚ¡ 
Wr™eO±iÚs
& 
İtiÚs
, cÚ¡ 
Sliû
& 
key
) {

1197  
	gDB
::
D–‘e
(
İtiÚs
, 
key
);

1200 
Stus
 
	gDBIm¶
::
Wr™e
(cÚ¡ 
Wr™eO±iÚs
& 
İtiÚs
, 
Wr™eB©ch
* 
upd©es
) {

1201 
Wr™”
 
w
(&
mu‹x_
);

1202 
	gw
.
	gb©ch
 = 
upd©es
;

1203 
	gw
.
	gsync
 = 
İtiÚs
.
sync
;

1204 
	gw
.
	gdÚe
 = 
çl£
;

1206 
Mu‹xLock
 
l
(&
mu‹x_
);

1207 
	gwr™”s_
.
push_back
(&
w
);

1208 !
	gw
.
	gdÚe
 && &w !ğ
wr™”s_
.
äÚt
()) {

1209 
w
.
cv
.
Wa™
();

1211 ià(
	gw
.
	gdÚe
) {

1212  
	gw
.
	g¡©us
;

1216 
Stus
 
	g¡©us
 = 
MakeRoomFÜWr™e
(
upd©es
 =ğ
nuÎ±r
);

1217 
ušt64_t
 
	gÏ¡_£qu’û
 = 
v”siÚs_
->
La¡Sequ’û
();

1218 
Wr™”
* 
	gÏ¡_wr™”
 = &
w
;

1219 ià(
	g¡©us
.
ok
(è&& 
	gupd©es
 !ğ
nuÎ±r
) {

1220 
Wr™eB©ch
* 
wr™e_b©ch
 = 
BudB©chGroup
(&
Ï¡_wr™”
);

1221 
	gWr™eB©chIÁ”Çl
::
S‘Sequ’û
(
wr™e_b©ch
, 
Ï¡_£qu’û
 + 1);

1222 
	gÏ¡_£qu’û
 +ğ
Wr™eB©chIÁ”Çl
::
CouÁ
(
wr™e_b©ch
);

1229 
	gmu‹x_
.
UÆock
();

1230 
	g¡©us
 = 
log_
->
AddRecÜd
(
Wr™eB©chIÁ”Çl
::
CÚ‹Ás
(
wr™e_b©ch
));

1231 
boŞ
 
	gsync_”rÜ
 = 
çl£
;

1232 ià(
	g¡©us
.
ok
(è&& 
	gİtiÚs
.
	gsync
) {

1233 
	g¡©us
 = 
logfe_
->
Sync
();

1234 ià(!
	g¡©us
.
ok
()) {

1235 
	gsync_”rÜ
 = 
Œue
;

1238 ià(
	g¡©us
.
ok
()) {

1239 
	g¡©us
 = 
Wr™eB©chIÁ”Çl
::
In£¹IÁo
(
wr™e_b©ch
, 
mem_
);

1241 
	gmu‹x_
.
Lock
();

1242 ià(
	gsync_”rÜ
) {

1246 
RecÜdBackgroundE¼Ü
(
¡©us
);

1249 ià(
	gwr™e_b©ch
 =ğ
tmp_b©ch_
ètmp_b©ch_->
CË¬
();

1251 
	gv”siÚs_
->
S‘La¡Sequ’û
(
Ï¡_£qu’û
);

1254 
	gŒue
) {

1255 
Wr™”
* 
	g»ady
 = 
wr™”s_
.
äÚt
();

1256 
	gwr™”s_
.
pİ_äÚt
();

1257 ià(
	g»ady
 !ğ&
w
) {

1258 
»ady
->
¡©us
 = status;

1259 
	g»ady
->
	gdÚe
 = 
Œue
;

1260 
	g»ady
->
	gcv
.
SigÇl
();

1262 ià(
	g»ady
 =ğ
Ï¡_wr™”
) ;

1266 ià(!
	gwr™”s_
.
em±y
()) {

1267 
	gwr™”s_
.
äÚt
()->
	gcv
.
SigÇl
();

1270  
	g¡©us
;

1275 
Wr™eB©ch
* 
	gDBIm¶
::
BudB©chGroup
(
Wr™”
** 
Ï¡_wr™”
) {

1276 
mu‹x_
.
As£¹H–d
();

1277 
as£¹
(!
wr™”s_
.
em±y
());

1278 
Wr™”
* 
	gfœ¡
 = 
wr™”s_
.
äÚt
();

1279 
Wr™eB©ch
* 
	g»suÉ
 = 
fœ¡
->
b©ch
;

1280 
as£¹
(
»suÉ
 !ğ
nuÎ±r
);

1282 
size_t
 
	gsize
 = 
Wr™eB©chIÁ”Çl
::
By‹Size
(
fœ¡
->
b©ch
);

1287 
size_t
 
	gmax_size
 = 1 << 20;

1288 ià(
	gsize
 <= (128 << 10)) {

1289 
max_size
 = 
size
 + (128 << 10);

1292 *
	gÏ¡_wr™”
 = 
fœ¡
;

1293 
	g¡d
::
deque
<
Wr™”
*>::
™”©Ü
 
™”
 = 
wr™”s_
.
begš
();

1294 ++
	g™”
;

1295 ; 
	g™”
 !ğ
wr™”s_
.
’d
(); ++iter) {

1296 
Wr™”
* 
	gw
 = *
™”
;

1297 ià(
	gw
->
	gsync
 && !
	gfœ¡
->sync) {

1302 ià(
	gw
->
	gb©ch
 !ğ
nuÎ±r
) {

1303 
size
 +ğ
Wr™eB©chIÁ”Çl
::
By‹Size
(
w
->
b©ch
);

1304 ià(
	gsize
 > 
	gmax_size
) {

1310 ià(
	g»suÉ
 =ğ
fœ¡
->
b©ch
) {

1312 
»suÉ
 = 
tmp_b©ch_
;

1313 
as£¹
(
Wr™eB©chIÁ”Çl
::
CouÁ
(
»suÉ
) == 0);

1314 
	gWr™eB©chIÁ”Çl
::
Aµ’d
(
»suÉ
, 
fœ¡
->
b©ch
);

1316 
	gWr™eB©chIÁ”Çl
::
Aµ’d
(
»suÉ
, 
w
->
b©ch
);

1318 *
	gÏ¡_wr™”
 = 
w
;

1320  
	g»suÉ
;

1325 
Stus
 
	gDBIm¶
::
MakeRoomFÜWr™e
(
boŞ
 
fÜû
) {

1326 
mu‹x_
.
As£¹H–d
();

1327 
as£¹
(!
wr™”s_
.
em±y
());

1328 
boŞ
 
	g®low_d–ay
 = !
fÜû
;

1329 
Stus
 
	gs
;

1330 
	gŒue
) {

1331 ià(!
	gbg_”rÜ_
.
ok
()) {

1333 
	gs
 = 
bg_”rÜ_
;

1335 } ià(
	g®low_d–ay
 && 
	gv”siÚs_
->
NumLev–Fes
(0) >=

1336 
cÚfig
::
kL0_SlowdownWr™esTrigg”
) {

1343 
mu‹x_
.
UÆock
();

1344 
	g’v_
->
SË•FÜMiüo£cÚds
(1000);

1345 
	g®low_d–ay
 = 
çl£
;

1346 
	gmu‹x_
.
Lock
();

1347 } ià(!
	gfÜû
 &&

1348 (
	gmem_
->
Aµroxim©eMemÜyU§ge
(è<ğ
İtiÚs_
.
wr™e_bufãr_size
)) {

1351 } ià(
	gimm_
 !ğ
nuÎ±r
) {

1354 
Log
(
İtiÚs_
.
šfo_log
, "Current memtable full; waiting...\n");

1355 
	gbackground_wÜk_fšished_sigÇl_
.
Wa™
();

1356 } ià(
	gv”siÚs_
->
NumLev–Fes
(0è>ğ
cÚfig
::
kL0_StİWr™esTrigg”
) {

1358 
Log
(
İtiÚs_
.
šfo_log
, "Too many L0 files; waiting...\n");

1359 
	gbackground_wÜk_fšished_sigÇl_
.
Wa™
();

1362 
as£¹
(
v”siÚs_
->
P»vLogNumb”
() == 0);

1363 
ušt64_t
 
	gÃw_log_numb”
 = 
v”siÚs_
->
NewFeNumb”
();

1364 
Wr™abËFe
* 
	glfe
 = 
nuÎ±r
;

1365 
	gs
 = 
’v_
->
NewWr™abËFe
(
LogFeName
(
dbÇme_
, 
Ãw_log_numb”
), &
lfe
);

1366 ià(!
	gs
.
ok
()) {

1368 
	gv”siÚs_
->
Reu£FeNumb”
(
Ãw_log_numb”
);

1372 
d–‘e
 
	glog_
;

1374 
	gs
 = 
logfe_
->
Clo£
();

1375 ià(!
	gs
.
ok
()) {

1383 
RecÜdBackgroundE¼Ü
(
s
);

1385 
d–‘e
 
	glogfe_
;

1387 
	glogfe_
 = 
lfe
;

1388 
	glogfe_numb”_
 = 
Ãw_log_numb”
;

1389 
	glog_
 = 
Ãw
 
log
::
Wr™”
(
lfe
);

1390 
	gimm_
 = 
mem_
;

1391 
	ghas_imm_
.
¡Üe
(
Œue
, 
¡d
::
memÜy_Üd”_»Ëa£
);

1392 
	gmem_
 = 
Ãw
 
MemTabË
(
š‹º®_com·¿tÜ_
);

1393 
	gmem_
->
Ref
();

1394 
	gfÜû
 = 
çl£
;

1395 
MaybeScheduËCom·ùiÚ
();

1398  
	gs
;

1401 
boŞ
 
	gDBIm¶
::
G‘Prİ”ty
(cÚ¡ 
Sliû
& 
´İ”ty
, 
¡d
::
¡ršg
* 
v®ue
) {

1402 
v®ue
->
ş—r
();

1404 
Mu‹xLock
 
l
(&
mu‹x_
);

1405 
Sliû
 
	gš
 = 
´İ”ty
;

1406 
Sliû
 
´efix
("leveldb.");

1407 ià(!
	gš
.
¡¬ts_w™h
(
´efix
)è 
	gçl£
;

1408 
	gš
.
»move_´efix
(
´efix
.
size
());

1410 ià(
	gš
.
¡¬ts_w™h
("num-files-at-level")) {

1411 
	gš
.
»move_´efix
(
¡¾’
("num-files-at-level"));

1412 
ušt64_t
 
	gËv–
;

1413 
boŞ
 
	gok
 = 
CÚsumeDecim®Numb”
(&
š
, &
Ëv–
è&& 
	gš
.
em±y
();

1414 ià(!
	gok
 || 
	gËv–
 >ğ
cÚfig
::
kNumLev–s
) {

1415  
çl£
;

1417 
	gbuf
[100];

1418 
	g¡d
::
¢´štf
(
buf
, (buf), "%d",

1419 
v”siÚs_
->
NumLev–Fes
(
¡©ic_ÿ¡
<>(
Ëv–
)));

1420 *
	gv®ue
 = 
buf
;

1421  
	gŒue
;

1423 } ià(
	gš
 == "stats") {

1424 
buf
[200];

1425 
	g¡d
::
¢´štf
(
buf
, (buf),

1429 
	gv®ue
->
­³nd
(
buf
);

1430 
	gËv–
 = 0;†ev– < 
	gcÚfig
::
kNumLev–s
;†evel++) {

1431 
	gfes
 = 
v”siÚs_
->
NumLev–Fes
(
Ëv–
);

1432 ià(
	g¡©s_
[
Ëv–
].
	gmiüos
 > 0 || 
	gfes
 > 0) {

1433 
	g¡d
::
¢´štf
(
buf
, (buf), "%3d %8d %8.0f %9.0f %8.0f %9.0f\n",

1434 
Ëv–
, 
fes
, 
v”siÚs_
->
NumLev–By‹s
(level) / 1048576.0,

1435 
¡©s_
[
Ëv–
].
miüos
 / 1e6,

1436 
¡©s_
[
Ëv–
].
by‹s_»ad
 / 1048576.0,

1437 
¡©s_
[
Ëv–
].
by‹s_wr™‹n
 / 1048576.0);

1438 
	gv®ue
->
­³nd
(
buf
);

1441  
	gŒue
;

1442 } ià(
	gš
 == "sstables") {

1443 *
v®ue
 = 
v”siÚs_
->
cu¼’t
()->
DebugSŒšg
();

1444  
	gŒue
;

1445 } ià(
	gš
 == "approximate-memory-usage") {

1446 
size_t
 
tÙ®_u§ge
 = 
İtiÚs_
.
block_ÿche
->
TÙ®Ch¬ge
();

1447 ià(
	gmem_
) {

1448 
	gtÙ®_u§ge
 +ğ
mem_
->
Aµroxim©eMemÜyU§ge
();

1450 ià(
	gimm_
) {

1451 
	gtÙ®_u§ge
 +ğ
imm_
->
Aµroxim©eMemÜyU§ge
();

1453 
	gbuf
[50];

1454 
	g¡d
::
¢´štf
(
buf
, (buf), "%llu",

1455 
¡©ic_ÿ¡
<>(
tÙ®_u§ge
));

1456 
	gv®ue
->
­³nd
(
buf
);

1457  
	gŒue
;

1460  
	gçl£
;

1463 
	gDBIm¶
::
G‘Aµroxim©eSizes
(cÚ¡ 
Rªge
* 
¿nge
, 
n
, 
ušt64_t
* 
sizes
) {

1465 
Mu‹xLock
 
l
(&
mu‹x_
);

1466 
V”siÚ
* 
	gv
 = 
v”siÚs_
->
cu¼’t
();

1467 
	gv
->
Ref
();

1469 
	gi
 = 0; i < 
	gn
; i++) {

1471 
IÁ”ÇlKey
 
k1
(
¿nge
[
i
].
¡¬t
, 
kMaxSequ’ûNumb”
, 
kV®ueTy³FÜS“k
);

1472 
IÁ”ÇlKey
 
k2
(
¿nge
[
i
].
lim™
, 
kMaxSequ’ûNumb”
, 
kV®ueTy³FÜS“k
);

1473 
ušt64_t
 
	g¡¬t
 = 
v”siÚs_
->
Aµroxim©eOff£tOf
(
v
, 
k1
);

1474 
ušt64_t
 
	glim™
 = 
v”siÚs_
->
Aµroxim©eOff£tOf
(
v
, 
k2
);

1475 
	gsizes
[
i
] = (
lim™
 >ğ
¡¬t
 ?†imit - start : 0);

1478 
	gv
->
UÄef
();

1483 
Stus
 
	gDB
::
Put
(cÚ¡ 
Wr™eO±iÚs
& 
İt
, cÚ¡ 
Sliû
& 
key
, cÚ¡ Sliû& 
v®ue
) {

1484 
Wr™eB©ch
 
	gb©ch
;

1485 
	gb©ch
.
Put
(
key
, 
v®ue
);

1486  
Wr™e
(
İt
, &
b©ch
);

1489 
Stus
 
	gDB
::
D–‘e
(cÚ¡ 
Wr™eO±iÚs
& 
İt
, cÚ¡ 
Sliû
& 
key
) {

1490 
Wr™eB©ch
 
	gb©ch
;

1491 
	gb©ch
.
D–‘e
(
key
);

1492  
Wr™e
(
İt
, &
b©ch
);

1495 
	gDB
::~
DB
() = ;

1497 
Stus
 
	gDB
::
O³n
(cÚ¡ 
O±iÚs
& 
İtiÚs
, cÚ¡ 
¡d
::
¡ršg
& 
dbÇme
, 
DB
** 
db±r
) {

1498 *
	gdb±r
 = 
nuÎ±r
;

1500 
DBIm¶
* 
	gim¶
 = 
Ãw
 DBIm¶(
İtiÚs
, 
dbÇme
);

1501 
	gim¶
->
	gmu‹x_
.
Lock
();

1502 
V”siÚEd™
 
	ged™
;

1504 
boŞ
 
	g§ve_mªiã¡
 = 
çl£
;

1505 
Stus
 
	gs
 = 
im¶
->
Recov”
(&
ed™
, &
§ve_mªiã¡
);

1506 ià(
	gs
.
ok
(è&& 
	gim¶
->
	gmem_
 =ğ
nuÎ±r
) {

1508 
ušt64_t
 
Ãw_log_numb”
 = 
im¶
->
v”siÚs_
->
NewFeNumb”
();

1509 
Wr™abËFe
* 
	glfe
;

1510 
	gs
 = 
İtiÚs
.
’v
->
NewWr™abËFe
(
LogFeName
(
dbÇme
, 
Ãw_log_numb”
),

1511 &
lfe
);

1512 ià(
	gs
.
ok
()) {

1513 
	ged™
.
S‘LogNumb”
(
Ãw_log_numb”
);

1514 
	gim¶
->
	glogfe_
 = 
lfe
;

1515 
	gim¶
->
	glogfe_numb”_
 = 
Ãw_log_numb”
;

1516 
	gim¶
->
	glog_
 = 
Ãw
 
log
::
Wr™”
(
lfe
);

1517 
	gim¶
->
	gmem_
 = 
Ãw
 
MemTabË
(
im¶
->
š‹º®_com·¿tÜ_
);

1518 
	gim¶
->
	gmem_
->
Ref
();

1521 ià(
	gs
.
ok
(è&& 
	g§ve_mªiã¡
) {

1522 
	ged™
.
S‘P»vLogNumb”
(0);

1523 
	ged™
.
S‘LogNumb”
(
im¶
->
logfe_numb”_
);

1524 
	gs
 = 
im¶
->
v”siÚs_
->
LogAndAµly
(&
ed™
, &im¶->
mu‹x_
);

1526 ià(
	gs
.
ok
()) {

1527 
	gim¶
->
RemoveObsŞ‘eFes
();

1528 
	gim¶
->
MaybeScheduËCom·ùiÚ
();

1530 
	gim¶
->
	gmu‹x_
.
UÆock
();

1531 ià(
	gs
.
ok
()) {

1532 
as£¹
(
im¶
->
mem_
 !ğ
nuÎ±r
);

1533 *
	gdb±r
 = 
im¶
;

1535 
d–‘e
 
	gim¶
;

1537  
	gs
;

1540 
	gSÇpshÙ
::~
SÇpshÙ
() = ;

1542 
Stus
 
De¡royDB
(cÚ¡ 
¡d
::
¡ršg
& 
dbÇme
, cÚ¡ 
O±iÚs
& 
İtiÚs
) {

1543 
Env
* 
	g’v
 = 
İtiÚs
.
’v
;

1544 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> 
f’ames
;

1545 
Stus
 
	g»suÉ
 = 
’v
->
G‘Chd»n
(
dbÇme
, &
f’ames
);

1546 ià(!
	g»suÉ
.
ok
()) {

1548  
	gStus
::
OK
();

1551 
FeLock
* 
	glock
;

1552 cÚ¡ 
	g¡d
::
¡ršg
 
lockÇme
 = 
LockFeName
(
dbÇme
);

1553 
	g»suÉ
 = 
’v
->
LockFe
(
lockÇme
, &
lock
);

1554 ià(
	g»suÉ
.
ok
()) {

1555 
ušt64_t
 
	gnumb”
;

1556 
FeTy³
 
	gty³
;

1557 
size_t
 
	gi
 = 0; i < 
	gf’ames
.
size
(); i++) {

1558 ià(
P¬£FeName
(
f’ames
[
i
], &
numb”
, &
ty³
) &&

1559 
	gty³
 !ğ
kDBLockFe
) {

1560 
Stus
 
d–
 = 
’v
->
RemoveFe
(
dbÇme
 + "/" + 
f’ames
[
i
]);

1561 ià(
	g»suÉ
.
ok
(è&& !
	gd–
.ok()) {

1562 
	g»suÉ
 = 
d–
;

1566 
	g’v
->
UÆockFe
(
lock
);

1567 
	g’v
->
RemoveFe
(
lockÇme
);

1568 
	g’v
->
RemoveDœ
(
dbÇme
);

1570  
	g»suÉ
;

	@db/db_impl.h

5 #iâdeà
STORAGE_LEVELDB_DB_DB_IMPL_H_


6 
	#STORAGE_LEVELDB_DB_DB_IMPL_H_


	)

8 
	~<©omic
>

9 
	~<deque
>

10 
	~<£t
>

11 
	~<¡ršg
>

13 
	~"db/dbfÜm©.h
"

14 
	~"db/log_wr™”.h
"

15 
	~"db/¢­shÙ.h
"

16 
	~"Ëv–db/db.h
"

17 
	~"Ëv–db/’v.h
"

18 
	~"pÜt/pÜt.h
"

19 
	~"pÜt/th»ad_ªnÙ©iÚs.h
"

21 
Çme¥aû
 
	gËv–db
 {

23 
şass
 
	gMemTabË
;

24 
şass
 
	gTabËCache
;

25 
şass
 
	gV”siÚ
;

26 
şass
 
	gV”siÚEd™
;

27 
şass
 
	gV”siÚS‘
;

29 şas 
	cDBIm¶
 : 
public
 
DB
 {

30 
public
:

31 
DBIm¶
(cÚ¡ 
O±iÚs
& 
İtiÚs
, cÚ¡ 
¡d
::
¡ršg
& 
dbÇme
);

33 
DBIm¶
(cÚ¡ DBIm¶&èğ
d–‘e
;

34 
	gDBIm¶
& 
	gİ”©Ü
=(cÚ¡ 
DBIm¶
&èğ
d–‘e
;

36 ~
DBIm¶
(è
	gov”ride
;

39 
Stus
 
Put
(cÚ¡ 
Wr™eO±iÚs
&, cÚ¡ 
Sliû
& 
key
,

40 cÚ¡ 
Sliû
& 
v®ue
è
	gov”ride
;

41 
Stus
 
D–‘e
(cÚ¡ 
Wr™eO±iÚs
&, cÚ¡ 
Sliû
& 
key
è
	gov”ride
;

42 
Stus
 
Wr™e
(cÚ¡ 
Wr™eO±iÚs
& 
İtiÚs
, 
Wr™eB©ch
* 
upd©es
è
	gov”ride
;

43 
Stus
 
G‘
(cÚ¡ 
R—dO±iÚs
& 
İtiÚs
, cÚ¡ 
Sliû
& 
key
,

44 
¡d
::
¡ršg
* 
v®ue
è
ov”ride
;

45 
I‹¿tÜ
* 
NewI‹¿tÜ
(cÚ¡ 
R—dO±iÚs
&è
	gov”ride
;

46 cÚ¡ 
SÇpshÙ
* 
G‘SÇpshÙ
(è
	gov”ride
;

47 
R–—£SÇpshÙ
(cÚ¡ 
SÇpshÙ
* 
¢­shÙ
è
	gov”ride
;

48 
boŞ
 
G‘Prİ”ty
(cÚ¡ 
Sliû
& 
´İ”ty
, 
¡d
::
¡ršg
* 
v®ue
è
ov”ride
;

49 
G‘Aµroxim©eSizes
(cÚ¡ 
Rªge
* 
¿nge
, 
n
, 
ušt64_t
* 
sizes
è
	gov”ride
;

50 
Com·ùRªge
(cÚ¡ 
Sliû
* 
begš
, cÚ¡ Sliû* 
’d
è
	gov”ride
;

55 
TEST_Com·ùRªge
(
Ëv–
, cÚ¡ 
Sliû
* 
begš
, cÚ¡ Sliû* 
’d
);

58 
Stus
 
TEST_Com·ùMemTabË
();

63 
I‹¿tÜ
* 
TEST_NewIÁ”ÇlI‹¿tÜ
();

67 
št64_t
 
TEST_MaxNextLev–Ov”ÏµšgBy‹s
();

72 
RecÜdR—dSam¶e
(
Sliû
 
key
);

74 
	g´iv©e
:

75 
ä›nd
 
şass
 
DB
;

76 
	gCom·ùiÚS‹
;

77 
	gWr™”
;

80 
	sMªu®Com·ùiÚ
 {

81 
	gËv–
;

82 
boŞ
 
	gdÚe
;

83 cÚ¡ 
IÁ”ÇlKey
* 
	gbegš
;

84 cÚ¡ 
IÁ”ÇlKey
* 
	g’d
;

85 
IÁ”ÇlKey
 
	gtmp_¡Üage
;

90 
	sCom·ùiÚSts
 {

91 
Com·ùiÚSts
(è: 
miüos
(0), 
by‹s_»ad
(0), 
by‹s_wr™‹n
(0) {}

93 
Add
(cÚ¡ 
Com·ùiÚSts
& 
c
) {

94 
	gthis
->
	gmiüos
 +ğ
c
.
miüos
;

95 
	gthis
->
	gby‹s_»ad
 +ğ
c
.
by‹s_»ad
;

96 
	gthis
->
	gby‹s_wr™‹n
 +ğ
c
.
by‹s_wr™‹n
;

99 
št64_t
 
	gmiüos
;

100 
št64_t
 
	gby‹s_»ad
;

101 
št64_t
 
	gby‹s_wr™‹n
;

104 
I‹¿tÜ
* 
NewIÁ”ÇlI‹¿tÜ
(cÚ¡ 
R—dO±iÚs
&,

105 
Sequ’ûNumb”
* 
Ï‹¡_¢­shÙ
,

106 
ušt32_t
* 
£ed
);

108 
Stus
 
NewDB
();

113 
Stus
 
Recov”
(
V”siÚEd™
* 
ed™
, 
boŞ
* 
§ve_mªiã¡
)

114 
EXCLUSIVE_LOCKS_REQUIRED
(
mu‹x_
);

116 
MaybeIgnÜeE¼Ü
(
Stus
* 
s
) const;

119 
RemoveObsŞ‘eFes
(è
EXCLUSIVE_LOCKS_REQUIRED
(
mu‹x_
);

124 
Com·ùMemTabË
(è
EXCLUSIVE_LOCKS_REQUIRED
(
mu‹x_
);

126 
Stus
 
Recov”LogFe
(
ušt64_t
 
log_numb”
, 
boŞ
 
Ï¡_log
, boŞ* 
§ve_mªiã¡
,

127 
V”siÚEd™
* 
ed™
, 
Sequ’ûNumb”
* 
max_£qu’û
)

128 
EXCLUSIVE_LOCKS_REQUIRED
(
mu‹x_
);

130 
Stus
 
Wr™eLev–0TabË
(
MemTabË
* 
mem
, 
V”siÚEd™
* 
ed™
, 
V”siÚ
* 
ba£
)

131 
EXCLUSIVE_LOCKS_REQUIRED
(
mu‹x_
);

133 
Stus
 
MakeRoomFÜWr™e
(
boŞ
 
fÜû
 )

134 
EXCLUSIVE_LOCKS_REQUIRED
(
mu‹x_
);

135 
Wr™eB©ch
* 
BudB©chGroup
(
Wr™”
** 
Ï¡_wr™”
)

136 
EXCLUSIVE_LOCKS_REQUIRED
(
mu‹x_
);

138 
RecÜdBackgroundE¼Ü
(cÚ¡ 
Stus
& 
s
);

140 
MaybeScheduËCom·ùiÚ
(è
EXCLUSIVE_LOCKS_REQUIRED
(
mu‹x_
);

141 
BGWÜk
(* 
db
);

142 
BackgroundC®l
();

143 
BackgroundCom·ùiÚ
(è
EXCLUSIVE_LOCKS_REQUIRED
(
mu‹x_
);

144 
CËªupCom·ùiÚ
(
Com·ùiÚS‹
* 
com·ù
)

145 
EXCLUSIVE_LOCKS_REQUIRED
(
mu‹x_
);

146 
Stus
 
DoCom·ùiÚWÜk
(
Com·ùiÚS‹
* 
com·ù
)

147 
EXCLUSIVE_LOCKS_REQUIRED
(
mu‹x_
);

149 
Stus
 
O³nCom·ùiÚOuutFe
(
Com·ùiÚS‹
* 
com·ù
);

150 
Stus
 
FšishCom·ùiÚOuutFe
(
Com·ùiÚS‹
* 
com·ù
, 
I‹¿tÜ
* 
šput
);

151 
Stus
 
In¡®lCom·ùiÚResuÉs
(
Com·ùiÚS‹
* 
com·ù
)

152 
EXCLUSIVE_LOCKS_REQUIRED
(
mu‹x_
);

154 cÚ¡ 
Com·¿tÜ
* 
u£r_com·¿tÜ
() const {

155  
	gš‹º®_com·¿tÜ_
.
u£r_com·¿tÜ
();

159 
Env
* cÚ¡ 
	g’v_
;

160 cÚ¡ 
IÁ”ÇlKeyCom·¿tÜ
 
	gš‹º®_com·¿tÜ_
;

161 cÚ¡ 
IÁ”ÇlF‹rPŞicy
 
	gš‹º®_f‹r_pŞicy_
;

162 cÚ¡ 
O±iÚs
 
	gİtiÚs_
;

163 cÚ¡ 
boŞ
 
	gowns_šfo_log_
;

164 cÚ¡ 
boŞ
 
	gowns_ÿche_
;

165 cÚ¡ 
	g¡d
::
¡ršg
 
dbÇme_
;

168 
TabËCache
* cÚ¡ 
	gbË_ÿche_
;

171 
FeLock
* 
	gdb_lock_
;

174 
	gpÜt
::
Mu‹x
 
mu‹x_
;

175 
	g¡d
::
©omic
<
boŞ
> 
shu‰šg_down_
;

176 
	gpÜt
::
CÚdV¬
 
background_wÜk_fšished_sigÇl_
 
GUARDED_BY
(
mu‹x_
);

177 
MemTabË
* 
	gmem_
;

178 
MemTabË
* 
imm_
 
GUARDED_BY
(
mu‹x_
);

179 
	g¡d
::
©omic
<
boŞ
> 
has_imm_
;

180 
Wr™abËFe
* 
	glogfe_
;

181 
ušt64_t
 
logfe_numb”_
 
GUARDED_BY
(
mu‹x_
);

182 
	glog
::
Wr™”
* 
log_
;

183 
ušt32_t
 
£ed_
 
GUARDED_BY
(
mu‹x_
);

186 
	g¡d
::
deque
<
Wr™”
*> 
wr™”s_
 
GUARDED_BY
(
mu‹x_
);

187 
Wr™eB©ch
* 
tmp_b©ch_
 
GUARDED_BY
(
mu‹x_
);

189 
SÇpshÙLi¡
 
¢­shÙs_
 
GUARDED_BY
(
mu‹x_
);

193 
	g¡d
::
£t
<
ušt64_t
> 
³ndšg_ouuts_
 
GUARDED_BY
(
mu‹x_
);

196 
boŞ
 
background_com·ùiÚ_scheduËd_
 
GUARDED_BY
(
mu‹x_
);

198 
Mªu®Com·ùiÚ
* 
mªu®_com·ùiÚ_
 
GUARDED_BY
(
mu‹x_
);

200 
V”siÚS‘
* cÚ¡ 
v”siÚs_
 
GUARDED_BY
(
mu‹x_
);

203 
Stus
 
bg_”rÜ_
 
GUARDED_BY
(
mu‹x_
);

205 
Com·ùiÚSts
 
	g¡©s_
[
cÚfig
::
kNumLev–s
] 
GUARDED_BY
(
mu‹x_
);

210 
O±iÚs
 
Sª™izeO±iÚs
(cÚ¡ 
¡d
::
¡ršg
& 
db
,

211 cÚ¡ 
IÁ”ÇlKeyCom·¿tÜ
* 
icmp
,

212 cÚ¡ 
IÁ”ÇlF‹rPŞicy
* 
Şicy
,

213 cÚ¡ 
O±iÚs
& 
¤c
);

	@db/db_iter.cc

5 
	~"db/db_™”.h
"

7 
	~"db/db_im¶.h
"

8 
	~"db/dbfÜm©.h
"

9 
	~"db/f’ame.h
"

10 
	~"Ëv–db/’v.h
"

11 
	~"Ëv–db/™”©Ü.h
"

12 
	~"pÜt/pÜt.h
"

13 
	~"ut/loggšg.h
"

14 
	~"ut/mu‹xlock.h
"

15 
	~"ut/¿ndom.h
"

17 
Çme¥aû
 
	gËv–db
 {

20 
DumpIÁ”ÇlI‹r
(
I‹¿tÜ
* 
™”
) {

21 
	g™”
->
S“kToFœ¡
(); i‹r->
V®id
(); i‹r->
Next
()) {

22 
P¬£dIÁ”ÇlKey
 
	gk
;

23 ià(!
P¬£IÁ”ÇlKey
(
™”
->
key
(), &
k
)) {

24 
	g¡d
::
årštf
(
¡d”r
, "CÜru± '%s'\n", 
Esÿ³SŒšg
(
™”
->
key
()).
c_¡r
());

26 
	g¡d
::
årštf
(
¡d”r
, "@ '%s'\n", 
k
.
DebugSŒšg
().
c_¡r
());

32 
	gÇme¥aû
 {

39 şas 
	cDBI‹r
 : 
public
 
I‹¿tÜ
 {

40 
public
:

46 
	eDœeùiÚ
 { 
kFÜw¬d
, 
	gkRev”£
 };

48 
DBI‹r
(
DBIm¶
* 
db
, cÚ¡ 
Com·¿tÜ
* 
cmp
, 
I‹¿tÜ
* 
™”
, 
Sequ’ûNumb”
 
s
,

49 
ušt32_t
 
£ed
)

50 : 
db_
(
db
),

51 
u£r_com·¿tÜ_
(
cmp
),

52 
™”_
(
™”
),

53 
£qu’û_
(
s
),

54 
dœeùiÚ_
(
kFÜw¬d
),

55 
v®id_
(
çl£
),

56 
ºd_
(
£ed
),

57 
by‹s_uÁ_»ad_§m¶šg_
(
RªdomCom·ùiÚP”iod
()) {}

59 
DBI‹r
(cÚ¡ DBI‹r&èğ
d–‘e
;

60 
	gDBI‹r
& 
	gİ”©Ü
=(cÚ¡ 
DBI‹r
&èğ
d–‘e
;

62 ~
DBI‹r
(è
	gov”ride
 { 
d–‘e
 
	g™”_
; }

63 
boŞ
 
V®id
(ècÚ¡ 
	gov”ride
 {  
	gv®id_
; }

64 
Sliû
 
key
(ècÚ¡ 
	gov”ride
 {

65 
as£¹
(
v®id_
);

66  (
	gdœeùiÚ_
 =ğ
kFÜw¬d
è? 
ExŒaùU£rKey
(
™”_
->
key
()è: 
§ved_key_
;

68 
Sliû
 
v®ue
(ècÚ¡ 
	gov”ride
 {

69 
as£¹
(
v®id_
);

70  (
	gdœeùiÚ_
 =ğ
kFÜw¬d
è? 
™”_
->
v®ue
(è: 
§ved_v®ue_
;

72 
Stus
 
¡©us
(ècÚ¡ 
	gov”ride
 {

73 ià(
	g¡©us_
.
ok
()) {

74  
	g™”_
->
¡©us
();

76  
	g¡©us_
;

80 
Next
(è
	gov”ride
;

81 
P»v
(è
	gov”ride
;

82 
S“k
(cÚ¡ 
Sliû
& 
rg‘
è
	gov”ride
;

83 
S“kToFœ¡
(è
	gov”ride
;

84 
S“kToLa¡
(è
	gov”ride
;

86 
	g´iv©e
:

87 
FšdNextU£rEÁry
(
boŞ
 
skpšg
, 
¡d
::
¡ršg
* 
sk
);

88 
FšdP»vU£rEÁry
();

89 
boŞ
 
P¬£Key
(
P¬£dIÁ”ÇlKey
* 
key
);

91 
šlše
 
SaveKey
(cÚ¡ 
Sliû
& 
k
, 
¡d
::
¡ršg
* 
d¡
) {

92 
d¡
->
assign
(
k
.
d©a
(), k.
size
());

95 
šlše
 
CË¬SavedV®ue
() {

96 ià(
	g§ved_v®ue_
.
ÿ·c™y
() > 1048576) {

97 
	g¡d
::
¡ršg
 
em±y
;

98 
sw­
(
em±y
, 
§ved_v®ue_
);

100 
	g§ved_v®ue_
.
ş—r
();

105 
size_t
 
RªdomCom·ùiÚP”iod
() {

106  
	gºd_
.
UnifÜm
(2 * 
cÚfig
::
kR—dBy‹sP”iod
);

109 
DBIm¶
* 
	gdb_
;

110 cÚ¡ 
Com·¿tÜ
* cÚ¡ 
	gu£r_com·¿tÜ_
;

111 
I‹¿tÜ
* cÚ¡ 
	g™”_
;

112 
Sequ’ûNumb”
 cÚ¡ 
	g£qu’û_
;

113 
Stus
 
	g¡©us_
;

114 
	g¡d
::
¡ršg
 
§ved_key_
;

115 
	g¡d
::
¡ršg
 
§ved_v®ue_
;

116 
DœeùiÚ
 
	gdœeùiÚ_
;

117 
boŞ
 
	gv®id_
;

118 
Rªdom
 
	gºd_
;

119 
size_t
 
	gby‹s_uÁ_»ad_§m¶šg_
;

122 
šlše
 
boŞ
 
	gDBI‹r
::
P¬£Key
(
P¬£dIÁ”ÇlKey
* 
ikey
) {

123 
Sliû
 
k
 = 
™”_
->
key
();

125 
size_t
 
	gby‹s_»ad
 = 
k
.
size
(è+ 
™”_
->
v®ue
().size();

126 
	gby‹s_uÁ_»ad_§m¶šg_
 < 
	gby‹s_»ad
) {

127 
	gby‹s_uÁ_»ad_§m¶šg_
 +ğ
RªdomCom·ùiÚP”iod
();

128 
	gdb_
->
RecÜdR—dSam¶e
(
k
);

130 
as£¹
(
by‹s_uÁ_»ad_§m¶šg_
 >ğ
by‹s_»ad
);

131 
	gby‹s_uÁ_»ad_§m¶šg_
 -ğ
by‹s_»ad
;

133 ià(!
P¬£IÁ”ÇlKey
(
k
, 
ikey
)) {

134 
	g¡©us_
 = 
Stus
::
CÜru±iÚ
("corrupted internal key in DBIter");

135  
	gçl£
;

137  
	gŒue
;

141 
	gDBI‹r
::
Next
() {

142 
as£¹
(
v®id_
);

144 ià(
	gdœeùiÚ_
 =ğ
kRev”£
) {

145 
dœeùiÚ_
 = 
kFÜw¬d
;

149 ià(!
	g™”_
->
V®id
()) {

150 
	g™”_
->
S“kToFœ¡
();

152 
	g™”_
->
Next
();

154 ià(!
	g™”_
->
V®id
()) {

155 
	gv®id_
 = 
çl£
;

156 
	g§ved_key_
.
ş—r
();

162 
SaveKey
(
ExŒaùU£rKey
(
™”_
->
key
()), &
§ved_key_
);

166 
	g™”_
->
Next
();

167 ià(!
	g™”_
->
V®id
()) {

168 
	gv®id_
 = 
çl£
;

169 
	g§ved_key_
.
ş—r
();

174 
FšdNextU£rEÁry
(
Œue
, &
§ved_key_
);

177 
	gDBI‹r
::
FšdNextU£rEÁry
(
boŞ
 
skpšg
, 
¡d
::
¡ršg
* 
sk
) {

179 
as£¹
(
™”_
->
V®id
());

180 
as£¹
(
dœeùiÚ_
 =ğ
kFÜw¬d
);

182 
P¬£dIÁ”ÇlKey
 
	gikey
;

183 ià(
P¬£Key
(&
ikey
è&& 
	gikey
.
	g£qu’û
 <ğ
£qu’û_
) {

184 
ikey
.
ty³
) {

185 
kTy³D–‘iÚ
:

188 
SaveKey
(
ikey
.
u£r_key
, 
sk
);

189 
	gskpšg
 = 
Œue
;

191 
	gkTy³V®ue
:

192 ià(
skpšg
 &&

193 
u£r_com·¿tÜ_
->
Com·»
(
ikey
.
u£r_key
, *
sk
) <= 0) {

196 
v®id_
 = 
Œue
;

197 
	g§ved_key_
.
ş—r
();

203 
	g™”_
->
Next
();

204 } 
	g™”_
->
V®id
());

205 
	g§ved_key_
.
ş—r
();

206 
	gv®id_
 = 
çl£
;

209 
	gDBI‹r
::
P»v
() {

210 
as£¹
(
v®id_
);

212 ià(
	gdœeùiÚ_
 =ğ
kFÜw¬d
) {

215 
as£¹
(
™”_
->
V®id
());

216 
SaveKey
(
ExŒaùU£rKey
(
™”_
->
key
()), &
§ved_key_
);

217 
	gŒue
) {

218 
	g™”_
->
P»v
();

219 ià(!
	g™”_
->
V®id
()) {

220 
	gv®id_
 = 
çl£
;

221 
	g§ved_key_
.
ş—r
();

222 
CË¬SavedV®ue
();

225 ià(
	gu£r_com·¿tÜ_
->
Com·»
(
ExŒaùU£rKey
(
™”_
->
key
()), 
§ved_key_
) <

230 
	gdœeùiÚ_
 = 
kRev”£
;

233 
FšdP»vU£rEÁry
();

236 
	gDBI‹r
::
FšdP»vU£rEÁry
() {

237 
as£¹
(
dœeùiÚ_
 =ğ
kRev”£
);

239 
V®ueTy³
 
	gv®ue_ty³
 = 
kTy³D–‘iÚ
;

240 ià(
	g™”_
->
V®id
()) {

242 
P¬£dIÁ”ÇlKey
 
	gikey
;

243 ià(
P¬£Key
(&
ikey
è&& 
	gikey
.
	g£qu’û
 <ğ
£qu’û_
) {

244 ià((
v®ue_ty³
 !ğ
kTy³D–‘iÚ
) &&

245 
u£r_com·¿tÜ_
->
Com·»
(
ikey
.
u£r_key
, 
§ved_key_
) < 0) {

249 
	gv®ue_ty³
 = 
ikey
.
ty³
;

250 ià(
	gv®ue_ty³
 =ğ
kTy³D–‘iÚ
) {

251 
§ved_key_
.
ş—r
();

252 
CË¬SavedV®ue
();

254 
Sliû
 
	g¿w_v®ue
 = 
™”_
->
v®ue
();

255 ià(
	g§ved_v®ue_
.
ÿ·c™y
(è> 
	g¿w_v®ue
.
size
() + 1048576) {

256 
	g¡d
::
¡ršg
 
em±y
;

257 
sw­
(
em±y
, 
§ved_v®ue_
);

259 
SaveKey
(
ExŒaùU£rKey
(
™”_
->
key
()), &
§ved_key_
);

260 
	g§ved_v®ue_
.
assign
(
¿w_v®ue
.
d©a
(),„aw_v®ue.
size
());

263 
	g™”_
->
P»v
();

264 } 
	g™”_
->
V®id
());

267 ià(
	gv®ue_ty³
 =ğ
kTy³D–‘iÚ
) {

269 
v®id_
 = 
çl£
;

270 
	g§ved_key_
.
ş—r
();

271 
CË¬SavedV®ue
();

272 
	gdœeùiÚ_
 = 
kFÜw¬d
;

274 
	gv®id_
 = 
Œue
;

278 
	gDBI‹r
::
S“k
(cÚ¡ 
Sliû
& 
rg‘
) {

279 
dœeùiÚ_
 = 
kFÜw¬d
;

280 
CË¬SavedV®ue
();

281 
	g§ved_key_
.
ş—r
();

282 
Aµ’dIÁ”ÇlKey
(&
§ved_key_
,

283 
P¬£dIÁ”ÇlKey
(
rg‘
, 
£qu’û_
, 
kV®ueTy³FÜS“k
));

284 
	g™”_
->
S“k
(
§ved_key_
);

285 ià(
	g™”_
->
V®id
()) {

286 
FšdNextU£rEÁry
(
çl£
, &
§ved_key_
 );

288 
	gv®id_
 = 
çl£
;

292 
	gDBI‹r
::
S“kToFœ¡
() {

293 
dœeùiÚ_
 = 
kFÜw¬d
;

294 
CË¬SavedV®ue
();

295 
	g™”_
->
S“kToFœ¡
();

296 ià(
	g™”_
->
V®id
()) {

297 
FšdNextU£rEÁry
(
çl£
, &
§ved_key_
 );

299 
	gv®id_
 = 
çl£
;

303 
	gDBI‹r
::
S“kToLa¡
() {

304 
dœeùiÚ_
 = 
kRev”£
;

305 
CË¬SavedV®ue
();

306 
	g™”_
->
S“kToLa¡
();

307 
FšdP»vU£rEÁry
();

312 
I‹¿tÜ
* 
	$NewDBI‹¿tÜ
(
DBIm¶
* 
db
, cÚ¡ 
Com·¿tÜ
* 
u£r_key_com·¿tÜ
,

313 
I‹¿tÜ
* 
š‹º®_™”
, 
Sequ’ûNumb”
 
£qu’û
,

314 
ušt32_t
 
£ed
) {

315  
Ãw
 
	`DBI‹r
(
db
, 
u£r_key_com·¿tÜ
, 
š‹º®_™”
, 
£qu’û
, 
£ed
);

316 
	}
}

	@db/db_iter.h

5 #iâdeà
STORAGE_LEVELDB_DB_DB_ITER_H_


6 
	#STORAGE_LEVELDB_DB_DB_ITER_H_


	)

8 
	~<c¡dšt
>

10 
	~"db/dbfÜm©.h
"

11 
	~"Ëv–db/db.h
"

13 
Çme¥aû
 
	gËv–db
 {

15 
şass
 
	gDBIm¶
;

20 
I‹¿tÜ
* 
NewDBI‹¿tÜ
(
DBIm¶
* 
db
, cÚ¡ 
Com·¿tÜ
* 
u£r_key_com·¿tÜ
,

21 
I‹¿tÜ
* 
š‹º®_™”
, 
Sequ’ûNumb”
 
£qu’û
,

22 
ušt32_t
 
£ed
);

	@db/db_test.cc

5 
	~"Ëv–db/db.h
"

7 
	~<©omic
>

8 
	~<cš‰y³s
>

9 
	~<¡ršg
>

11 
	~"g‹¡/g‹¡.h
"

12 
	~"db/db_im¶.h
"

13 
	~"db/f’ame.h
"

14 
	~"db/v”siÚ_£t.h
"

15 
	~"db/wr™e_b©ch_š‹º®.h
"

16 
	~"Ëv–db/ÿche.h
"

17 
	~"Ëv–db/’v.h
"

18 
	~"Ëv–db/f‹r_pŞicy.h
"

19 
	~"Ëv–db/bË.h
"

20 
	~"pÜt/pÜt.h
"

21 
	~"pÜt/th»ad_ªnÙ©iÚs.h
"

22 
	~"ut/hash.h
"

23 
	~"ut/loggšg.h
"

24 
	~"ut/mu‹xlock.h
"

25 
	~"ut/‹¡ut.h
"

27 
Çme¥aû
 
	gËv–db
 {

29 
	g¡d
::
¡ršg
 
RªdomSŒšg
(
Rªdom
* 
ºd
, 
Ën
) {

30 
	g¡d
::
¡ršg
 
r
;

31 
	g‹¡
::
RªdomSŒšg
(
ºd
, 
Ën
, &
r
);

32  
	gr
;

35 
	g¡d
::
¡ršg
 
RªdomKey
(
Rªdom
* 
ºd
) {

36 
Ën
 =

37 (
ºd
->
OÃIn
(3) ? 1

38 : (
ºd
->
OÃIn
(100è?„nd->
Skewed
(10è:„nd->
UnifÜm
(10)));

39  
	g‹¡
::
RªdomKey
(
ºd
, 
Ën
);

42 
	gÇme¥aû
 {

43 şas 
	cAtomicCouÁ”
 {

44 
	gpublic
:

45 
AtomicCouÁ”
(è: 
couÁ_
(0) {}

46 
Inüem’t
(è{ 
Inüem’tBy
(1); }

47 
Inüem’tBy
(
couÁ
è
LOCKS_EXCLUDED
(
mu_
) {

48 
Mu‹xLock
 
l
(&
mu_
);

49 
	gcouÁ_
 +ğ
couÁ
;

51 
R—d
(è
LOCKS_EXCLUDED
(
mu_
) {

52 
Mu‹xLock
 
l
(&
mu_
);

53  
	gcouÁ_
;

55 
Re£t
(è
LOCKS_EXCLUDED
(
mu_
) {

56 
Mu‹xLock
 
l
(&
mu_
);

57 
	gcouÁ_
 = 0;

60 
	g´iv©e
:

61 
pÜt
::
Mu‹x
 
mu_
;

62 
couÁ_
 
GUARDED_BY
(
mu_
);

65 
D–ayMli£cÚds
(
mlis
) {

66 
	gEnv
::
DeçuÉ
()->
SË•FÜMiüo£cÚds
(
mlis
 * 1000);

69 
boŞ
 
IsLdbFe
(cÚ¡ 
¡d
::
¡ršg
& 
f
) {

70  
¡r¡r
(
f
.
c_¡r
(), ".ldb"è!ğ
nuÎ±r
;

73 
boŞ
 
IsLogFe
(cÚ¡ 
¡d
::
¡ršg
& 
f
) {

74  
¡r¡r
(
f
.
c_¡r
(), ".log"è!ğ
nuÎ±r
;

77 
boŞ
 
IsMªiã¡Fe
(cÚ¡ 
¡d
::
¡ršg
& 
f
) {

78  
¡r¡r
(
f
.
c_¡r
(), "MANIFEST"è!ğ
nuÎ±r
;

84 şas 
	cTe¡Env
 : 
public
 
EnvW¿µ”
 {

85 
public
:

86 
ex¶ic™
 
Te¡Env
(
Env
* 
ba£
è: 
EnvW¿µ”
(ba£), 
ignÜe_dÙ_fes_
(
çl£
) {}

88 
S‘IgnÜeDÙFes
(
boŞ
 
ignÜed
è{ 
	gignÜe_dÙ_fes_
 = ignored; }

90 
Stus
 
G‘Chd»n
(cÚ¡ 
¡d
::
¡ršg
& 
dœ
,

91 
¡d
::
veùÜ
<¡d::
¡ršg
>* 
»suÉ
è
ov”ride
 {

92 
Stus
 
s
 = 
rg‘
()->
G‘Chd»n
(
dœ
, 
»suÉ
);

93 ià(!
	gs
.
ok
(è|| !
	gignÜe_dÙ_fes_
) {

94  
	gs
;

97 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
>::
™”©Ü
 
™
 = 
»suÉ
->
begš
();

98 
	g™
 !ğ
»suÉ
->
’d
()) {

99 ià((*
™
 == ".") || (*it == "..")) {

100 
™
 = 
»suÉ
->
”a£
(it);

102 ++
	g™
;

106  
	gs
;

109 
	g´iv©e
:

110 
boŞ
 
ignÜe_dÙ_fes_
;

114 şas 
	cS³cŸlEnv
 : 
public
 
EnvW¿µ”
 {

115 
public
:

121 
¡d
::
©omic
<
boŞ
> 
d–ay_d©a_sync_
;

124 
	g¡d
::
©omic
<
boŞ
> 
d©a_sync_”rÜ_
;

127 
	g¡d
::
©omic
<
boŞ
> 
no_¥aû_
;

130 
	g¡d
::
©omic
<
boŞ
> 
nÚ_wr™abË_
;

133 
	g¡d
::
©omic
<
boŞ
> 
mªiã¡_sync_”rÜ_
;

136 
	g¡d
::
©omic
<
boŞ
> 
mªiã¡_wr™e_”rÜ_
;

139 
	g¡d
::
©omic
<
boŞ
> 
log_fe_şo£_
;

141 
boŞ
 
	gcouÁ_¿ndom_»ads_
;

142 
AtomicCouÁ”
 
	g¿ndom_»ad_couÁ”_
;

144 
ex¶ic™
 
S³cŸlEnv
(
Env
* 
ba£
)

145 : 
EnvW¿µ”
(
ba£
),

146 
d–ay_d©a_sync_
(
çl£
),

147 
d©a_sync_”rÜ_
(
çl£
),

148 
no_¥aû_
(
çl£
),

149 
nÚ_wr™abË_
(
çl£
),

150 
mªiã¡_sync_”rÜ_
(
çl£
),

151 
mªiã¡_wr™e_”rÜ_
(
çl£
),

152 
log_fe_şo£_
(
çl£
),

153 
couÁ_¿ndom_»ads_
(
çl£
) {}

155 
Stus
 
NewWr™abËFe
(cÚ¡ 
¡d
::
¡ršg
& 
f
, 
Wr™abËFe
** 
r
) {

156 şas 
	cD©aFe
 : 
public
 
Wr™abËFe
 {

157 
´iv©e
:

158 
S³cŸlEnv
* cÚ¡ 
’v_
;

159 
Wr™abËFe
* cÚ¡ 
	gba£_
;

160 cÚ¡ 
	g¡d
::
¡ršg
 
âame_
;

162 
	gpublic
:

163 
D©aFe
(
S³cŸlEnv
* 
’v
, 
Wr™abËFe
* 
ba£
, cÚ¡ 
¡d
::
¡ršg
& 
âame
)

164 : 
’v_
(
’v
), 
ba£_
(
ba£
), 
âame_
(
âame
) {}

166 ~
D©aFe
(è{ 
d–‘e
 
	gba£_
; }

167 
Stus
 
Aµ’d
(cÚ¡ 
Sliû
& 
d©a
) {

168 ià(
	g’v_
->
	gno_¥aû_
.
lßd
(
¡d
::
memÜy_Üd”_acquœe
)) {

170  
Stus
::
OK
();

172  
	gba£_
->
Aµ’d
(
d©a
);

175 
Stus
 
Clo£
() {

176 
Stus
 
	gs
 = 
ba£_
->
Clo£
();

177 ià(
	gs
.
ok
(è&& 
IsLogFe
(
âame_
) &&

178 
	g’v_
->
	glog_fe_şo£_
.
lßd
(
¡d
::
memÜy_Üd”_acquœe
)) {

179 
s
 = 
Stus
::
IOE¼Ü
("simulated†og file Closeƒrror");

181  
	gs
;

183 
Stus
 
Flush
(è{  
	gba£_
->Flush(); }

184 
Stus
 
Sync
() {

185 ià(
	g’v_
->
	gd©a_sync_”rÜ_
.
lßd
(
¡d
::
memÜy_Üd”_acquœe
)) {

186  
Stus
::
IOE¼Ü
("simulated data syncƒrror");

188 
	g’v_
->
	gd–ay_d©a_sync_
.
lßd
(
¡d
::
memÜy_Üd”_acquœe
)) {

189 
D–ayMli£cÚds
(100);

191  
	gba£_
->
Sync
();

194 şas 
	cMªiã¡Fe
 : 
public
 
Wr™abËFe
 {

195 
´iv©e
:

196 
S³cŸlEnv
* 
’v_
;

197 
Wr™abËFe
* 
	gba£_
;

199 
	gpublic
:

200 
Mªiã¡Fe
(
S³cŸlEnv
* 
’v
, 
Wr™abËFe
* 
b
è: 
’v_
Ónv), 
ba£_
(b) {}

201 ~
Mªiã¡Fe
(è{ 
d–‘e
 
	gba£_
; }

202 
Stus
 
Aµ’d
(cÚ¡ 
Sliû
& 
d©a
) {

203 ià(
	g’v_
->
	gmªiã¡_wr™e_”rÜ_
.
lßd
(
¡d
::
memÜy_Üd”_acquœe
)) {

204  
Stus
::
IOE¼Ü
("simulated writerƒrror");

206  
	gba£_
->
Aµ’d
(
d©a
);

209 
Stus
 
Clo£
(è{  
	gba£_
->Close(); }

210 
Stus
 
Flush
(è{  
	gba£_
->Flush(); }

211 
Stus
 
Sync
() {

212 ià(
	g’v_
->
	gmªiã¡_sync_”rÜ_
.
lßd
(
¡d
::
memÜy_Üd”_acquœe
)) {

213  
Stus
::
IOE¼Ü
("simulated syncƒrror");

215  
	gba£_
->
Sync
();

220 ià(
	gnÚ_wr™abË_
.
lßd
(
¡d
::
memÜy_Üd”_acquœe
)) {

221  
Stus
::
IOE¼Ü
("simulated writeƒrror");

224 
Stus
 
	gs
 = 
rg‘
()->
NewWr™abËFe
(
f
, 
r
);

225 ià(
	gs
.
ok
()) {

226 ià(
IsLdbFe
(
f
è|| 
IsLogFe
(f)) {

227 *
	gr
 = 
Ãw
 
D©aFe
(
this
, *
r
, 
f
);

228 } ià(
IsMªiã¡Fe
(
f
)) {

229 *
	gr
 = 
Ãw
 
Mªiã¡Fe
(
this
, *
r
);

232  
	gs
;

235 
Stus
 
NewRªdomAcûssFe
(cÚ¡ 
¡d
::
¡ršg
& 
f
, 
RªdomAcûssFe
** 
r
) {

236 şas 
	cCouÁšgFe
 : 
public
 
RªdomAcûssFe
 {

237 
´iv©e
:

238 
RªdomAcûssFe
* 
rg‘_
;

239 
AtomicCouÁ”
* 
	gcouÁ”_
;

241 
	gpublic
:

242 
CouÁšgFe
(
RªdomAcûssFe
* 
rg‘
, 
AtomicCouÁ”
* 
couÁ”
)

243 : 
rg‘_
(
rg‘
), 
couÁ”_
(
couÁ”
) {}

244 ~
CouÁšgFe
(è
	gov”ride
 { 
d–‘e
 
	grg‘_
; }

245 
Stus
 
R—d
(
ušt64_t
 
off£t
, 
size_t
 
n
, 
Sliû
* 
»suÉ
,

246 * 
sü©ch
ècÚ¡ 
	gov”ride
 {

247 
	gcouÁ”_
->
Inüem’t
();

248  
	grg‘_
->
R—d
(
off£t
, 
n
, 
»suÉ
, 
sü©ch
);

252 
Stus
 
	gs
 = 
rg‘
()->
NewRªdomAcûssFe
(
f
, 
r
);

253 ià(
	gs
.
ok
(è&& 
	gcouÁ_¿ndom_»ads_
) {

254 *
	gr
 = 
Ãw
 
CouÁšgFe
(*
r
, &
¿ndom_»ad_couÁ”_
);

256  
	gs
;

260 şas 
	cDBTe¡
 : 
public
 
‹¡šg
::
Te¡
 {

261 
public
:

262 
¡d
::
¡ršg
 
dbÇme_
;

263 
S³cŸlEnv
* 
	g’v_
;

264 
DB
* 
	gdb_
;

266 
O±iÚs
 
	gÏ¡_İtiÚs_
;

268 
DBTe¡
(è: 
’v_
(
Ãw
 
S³cŸlEnv
(
Env
::
DeçuÉ
())), 
İtiÚ_cÚfig_
(
kDeçuÉ
) {

269 
	gf‹r_pŞicy_
 = 
NewBloomF‹rPŞicy
(10);

270 
	gdbÇme_
 = 
‹¡šg
::
TempDœ
() + "db_test";

271 
De¡royDB
(
dbÇme_
, 
O±iÚs
());

272 
	gdb_
 = 
nuÎ±r
;

273 
Reİ’
();

276 ~
DBTe¡
() {

277 
d–‘e
 
	gdb_
;

278 
De¡royDB
(
dbÇme_
, 
O±iÚs
());

279 
d–‘e
 
	g’v_
;

280 
d–‘e
 
	gf‹r_pŞicy_
;

285 
boŞ
 
ChªgeO±iÚs
() {

286 
	gİtiÚ_cÚfig_
++;

287 ià(
	gİtiÚ_cÚfig_
 >ğ
kEnd
) {

288  
çl£
;

290 
De¡royAndReİ’
();

291  
	gŒue
;

296 
O±iÚs
 
Cu¼’tO±iÚs
() {

297 
O±iÚs
 
	gİtiÚs
;

298 
	gİtiÚs
.
	g»u£_logs
 = 
çl£
;

299 
	gİtiÚ_cÚfig_
) {

300 
	gkReu£
:

301 
İtiÚs
.
»u£_logs
 = 
Œue
;

303 
	gkF‹r
:

304 
İtiÚs
.
f‹r_pŞicy
 = 
f‹r_pŞicy_
;

306 
	gkUncom´es£d
:

307 
İtiÚs
.
com´essiÚ
 = 
kNoCom´essiÚ
;

312  
	gİtiÚs
;

315 
DBIm¶
* 
dbfuÎ
(è{  
	g»š‹½»t_ÿ¡
<
	gDBIm¶
*>(
	gdb_
); }

317 
Reİ’
(
O±iÚs
* 
İtiÚs
 = 
nuÎ±r
) {

318 
ASSERT_LEVELDB_OK
(
TryReİ’
(
İtiÚs
));

321 
Clo£
() {

322 
d–‘e
 
	gdb_
;

323 
	gdb_
 = 
nuÎ±r
;

326 
De¡royAndReİ’
(
O±iÚs
* 
İtiÚs
 = 
nuÎ±r
) {

327 
d–‘e
 
db_
;

328 
	gdb_
 = 
nuÎ±r
;

329 
De¡royDB
(
dbÇme_
, 
O±iÚs
());

330 
ASSERT_LEVELDB_OK
(
TryReİ’
(
İtiÚs
));

333 
Stus
 
TryReİ’
(
O±iÚs
* 
İtiÚs
) {

334 
d–‘e
 
	gdb_
;

335 
	gdb_
 = 
nuÎ±r
;

336 
O±iÚs
 
	gİts
;

337 ià(
	gİtiÚs
 !ğ
nuÎ±r
) {

338 
İts
 = *
İtiÚs
;

340 
	gİts
 = 
Cu¼’tO±iÚs
();

341 
	gİts
.
	gü—‹_if_missšg
 = 
Œue
;

343 
	gÏ¡_İtiÚs_
 = 
İts
;

345  
	gDB
::
O³n
(
İts
, 
dbÇme_
, &
db_
);

348 
Stus
 
Put
(cÚ¡ 
¡d
::
¡ršg
& 
k
, cÚ¡ std::¡ršg& 
v
) {

349  
db_
->
Put
(
Wr™eO±iÚs
(), 
k
, 
v
);

352 
Stus
 
D–‘e
(cÚ¡ 
¡d
::
¡ršg
& 
k
è{  
db_
->D–‘e(
Wr™eO±iÚs
(), k); }

354 
	g¡d
::
¡ršg
 
G‘
(cÚ¡ 
¡d
::¡ršg& 
k
, cÚ¡ 
SÇpshÙ
* 
¢­shÙ
 = 
nuÎ±r
) {

355 
R—dO±iÚs
 
İtiÚs
;

356 
	gİtiÚs
.
	g¢­shÙ
 = 
¢­shÙ
;

357 
	g¡d
::
¡ršg
 
»suÉ
;

358 
Stus
 
	gs
 = 
db_
->
G‘
(
İtiÚs
, 
k
, &
»suÉ
);

359 ià(
	gs
.
IsNÙFound
()) {

360 
	g»suÉ
 = "NOT_FOUND";

361 } ià(!
	gs
.
ok
()) {

362 
	g»suÉ
 = 
s
.
ToSŒšg
();

364  
	g»suÉ
;

369 
	g¡d
::
¡ršg
 
CÚ‹Ás
() {

370 
¡d
::
veùÜ
<¡d::
¡ršg
> 
fÜw¬d
;

371 
	g¡d
::
¡ršg
 
»suÉ
;

372 
I‹¿tÜ
* 
	g™”
 = 
db_
->
NewI‹¿tÜ
(
R—dO±iÚs
());

373 
	g™”
->
S“kToFœ¡
(); i‹r->
V®id
(); i‹r->
Next
()) {

374 
	g¡d
::
¡ršg
 
s
 = 
I‹rStus
(
™”
);

375 
	g»suÉ
.
push_back
('(');

376 
	g»suÉ
.
­³nd
(
s
);

377 
	g»suÉ
.
push_back
(')');

378 
	gfÜw¬d
.
push_back
(
s
);

382 
size_t
 
	gm©ched
 = 0;

383 
	g™”
->
S“kToLa¡
(); i‹r->
V®id
(); i‹r->
P»v
()) {

384 
EXPECT_LT
(
m©ched
, 
fÜw¬d
.
size
());

385 
EXPECT_EQ
(
I‹rStus
(
™”
), 
fÜw¬d
[fÜw¬d.
size
(è- 
m©ched
 - 1]);

386 
	gm©ched
++;

388 
EXPECT_EQ
(
m©ched
, 
fÜw¬d
.
size
());

390 
d–‘e
 
	g™”
;

391  
	g»suÉ
;

394 
	g¡d
::
¡ršg
 
AÎEÁr›sFÜ
(cÚ¡ 
Sliû
& 
u£r_key
) {

395 
I‹¿tÜ
* 
™”
 = 
dbfuÎ
()->
TEST_NewIÁ”ÇlI‹¿tÜ
();

396 
IÁ”ÇlKey
 
rg‘
(
u£r_key
, 
kMaxSequ’ûNumb”
, 
kTy³V®ue
);

397 
	g™”
->
S“k
(
rg‘
.
Encode
());

398 
	g¡d
::
¡ršg
 
»suÉ
;

399 ià(!
	g™”
->
¡©us
().
ok
()) {

400 
	g»suÉ
 = 
™”
->
¡©us
().
ToSŒšg
();

402 
	g»suÉ
 = "[ ";

403 
boŞ
 
	gfœ¡
 = 
Œue
;

404 
	g™”
->
V®id
()) {

405 
P¬£dIÁ”ÇlKey
 
	gikey
;

406 ià(!
P¬£IÁ”ÇlKey
(
™”
->
key
(), &
ikey
)) {

407 
	g»suÉ
 += "CORRUPTED";

409 ià(
	gÏ¡_İtiÚs_
.
	gcom·¿tÜ
->
Com·»
(
ikey
.
u£r_key
, user_key) != 0) {

412 ià(!
	gfœ¡
) {

413 
	g»suÉ
 += ", ";

415 
	gfœ¡
 = 
çl£
;

416 
	gikey
.
	gty³
) {

417 
	gkTy³V®ue
:

418 
»suÉ
 +ğ
™”
->
v®ue
().
ToSŒšg
();

420 
	gkTy³D–‘iÚ
:

421 
»suÉ
 += "DEL";

425 
	g™”
->
Next
();

427 ià(!
	gfœ¡
) {

428 
	g»suÉ
 += " ";

430 
	g»suÉ
 += "]";

432 
d–‘e
 
	g™”
;

433  
	g»suÉ
;

436 
NumTabËFesAtLev–
(
Ëv–
) {

437 
	g¡d
::
¡ršg
 
´İ”ty
;

438 
EXPECT_TRUE
(
db_
->
G‘Prİ”ty
(

439 "Ëv–db.num-fes-©-Ëv–" + 
Numb”ToSŒšg
(
Ëv–
), &
´İ”ty
));

440  
	g¡d
::
¡oi
(
´İ”ty
);

443 
TÙ®TabËFes
() {

444 
	g»suÉ
 = 0;

445 
	gËv–
 = 0;†ev– < 
	gcÚfig
::
kNumLev–s
;†evel++) {

446 
	g»suÉ
 +ğ
NumTabËFesAtLev–
(
Ëv–
);

448  
	g»suÉ
;

452 
	g¡d
::
¡ršg
 
FesP”Lev–
() {

453 
¡d
::
¡ršg
 
»suÉ
;

454 
	gÏ¡_nÚ_z”o_off£t
 = 0;

455 
	gËv–
 = 0;†ev– < 
	gcÚfig
::
kNumLev–s
;†evel++) {

456 
	gf
 = 
NumTabËFesAtLev–
(
Ëv–
);

457 
	gbuf
[100];

458 
	g¡d
::
¢´štf
(
buf
, (buf), "%s%d", (
Ëv–
 ? "," : ""), 
f
);

459 
	g»suÉ
 +ğ
buf
;

460 ià(
	gf
 > 0) {

461 
	gÏ¡_nÚ_z”o_off£t
 = 
»suÉ
.
size
();

464 
	g»suÉ
.
»size
(
Ï¡_nÚ_z”o_off£t
);

465  
	g»suÉ
;

468 
CouÁFes
() {

469 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> 
fes
;

470 
	g’v_
->
G‘Chd»n
(
dbÇme_
, &
fes
);

471  
	g¡©ic_ÿ¡
<>(
	gfes
.
size
());

474 
ušt64_t
 
Size
(cÚ¡ 
Sliû
& 
¡¬t
, cÚ¡ Sliû& 
lim™
) {

475 
Rªge
 
r
(
¡¬t
, 
lim™
);

476 
ušt64_t
 
	gsize
;

477 
	gdb_
->
G‘Aµroxim©eSizes
(&
r
, 1, &
size
);

478  
	gsize
;

481 
Com·ù
(cÚ¡ 
Sliû
& 
¡¬t
, cÚ¡ Sliû& 
lim™
) {

482 
	gdb_
->
Com·ùRªge
(&
¡¬t
, &
lim™
);

487 
MakeTabËs
(
n
, cÚ¡ 
¡d
::
¡ršg
& 
sm®l_key
,

488 cÚ¡ 
¡d
::
¡ršg
& 
Ïrge_key
) {

489 
i
 = 0; 
	gi
 < 
	gn
; i++) {

490 
Put
(
sm®l_key
, "begin");

491 
Put
(
Ïrge_key
, "end");

492 
dbfuÎ
()->
TEST_Com·ùMemTabË
();

498 
FlLev–s
(cÚ¡ 
¡d
::
¡ršg
& 
sm®Ë¡
, cÚ¡ std::¡ršg& 
Ïrge¡
) {

499 
MakeTabËs
(
cÚfig
::
kNumLev–s
, 
sm®Ë¡
, 
Ïrge¡
);

502 
DumpFeCouÁs
(cÚ¡ * 
Ïb–
) {

503 
	g¡d
::
årštf
(
¡d”r
, "---\n%s:\n", 
Ïb–
);

504 
	g¡d
::
årštf
(

505 
¡d”r
, "maxoverlap: %lld\n",

506 
¡©ic_ÿ¡
<>(
dbfuÎ
()->
TEST_MaxNextLev–Ov”ÏµšgBy‹s
()));

507 
	gËv–
 = 0;†ev– < 
	gcÚfig
::
kNumLev–s
;†evel++) {

508 
	gnum
 = 
NumTabËFesAtLev–
(
Ëv–
);

509 ià(
	gnum
 > 0) {

510 
	g¡d
::
årštf
(
¡d”r
, "†ev– %3d : %d fes\n", 
Ëv–
, 
num
);

515 
	g¡d
::
¡ršg
 
DumpSSTabËLi¡
() {

516 
¡d
::
¡ršg
 
´İ”ty
;

517 
	gdb_
->
G‘Prİ”ty
("Ëv–db.s¡abËs", &
´İ”ty
);

518  
	g´İ”ty
;

521 
	g¡d
::
¡ršg
 
I‹rStus
(
I‹¿tÜ
* 
™”
) {

522 
¡d
::
¡ršg
 
»suÉ
;

523 ià(
	g™”
->
V®id
()) {

524 
	g»suÉ
 = 
™”
->
key
().
ToSŒšg
(è+ "->" + i‹r->
v®ue
().ToString();

526 
	g»suÉ
 = "(invalid)";

528  
	g»suÉ
;

531 
boŞ
 
D–‘eAnSSTFe
() {

532 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> 
f’ames
;

533 
EXPECT_LEVELDB_OK
(
’v_
->
G‘Chd»n
(
dbÇme_
, &
f’ames
));

534 
ušt64_t
 
	gnumb”
;

535 
FeTy³
 
	gty³
;

536 
size_t
 
	gi
 = 0; i < 
	gf’ames
.
size
(); i++) {

537 ià(
P¬£FeName
(
f’ames
[
i
], &
numb”
, &
ty³
è&& 
	gty³
 =ğ
kTabËFe
) {

538 
EXPECT_LEVELDB_OK
(
’v_
->
RemoveFe
(
TabËFeName
(
dbÇme_
, 
numb”
)));

539  
	gŒue
;

542  
	gçl£
;

546 
R’ameLDBToSST
() {

547 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> 
f’ames
;

548 
EXPECT_LEVELDB_OK
(
’v_
->
G‘Chd»n
(
dbÇme_
, &
f’ames
));

549 
ušt64_t
 
	gnumb”
;

550 
FeTy³
 
	gty³
;

551 
	gfes_»Çmed
 = 0;

552 
size_t
 
	gi
 = 0; i < 
	gf’ames
.
size
(); i++) {

553 ià(
P¬£FeName
(
f’ames
[
i
], &
numb”
, &
ty³
è&& 
	gty³
 =ğ
kTabËFe
) {

554 cÚ¡ 
¡d
::
¡ršg
 
äom
 = 
TabËFeName
(
dbÇme_
, 
numb”
);

555 cÚ¡ 
	g¡d
::
¡ršg
 
to
 = 
SSTTabËFeName
(
dbÇme_
, 
numb”
);

556 
EXPECT_LEVELDB_OK
(
’v_
->
R’ameFe
(
äom
, 
to
));

557 
	gfes_»Çmed
++;

560  
	gfes_»Çmed
;

563 
	g´iv©e
:

565 
	eO±iÚCÚfig
 { 
kDeçuÉ
, 
	gkReu£
, 
	gkF‹r
, 
	gkUncom´es£d
, 
	gkEnd
 };

567 cÚ¡ 
F‹rPŞicy
* 
	gf‹r_pŞicy_
;

568 
	gİtiÚ_cÚfig_
;

571 
	$TEST_F
(
DBTe¡
, 
Em±y
) {

573 
	`ASSERT_TRUE
(
db_
 !ğ
nuÎ±r
);

574 
	`ASSERT_EQ
("NOT_FOUND", 
	`G‘
("foo"));

575 } 
	`ChªgeO±iÚs
());

576 
	}
}

578 
	$TEST_F
(
DBTe¡
, 
Em±yKey
) {

580 
	`ASSERT_LEVELDB_OK
(
	`Put
("", "v1"));

581 
	`ASSERT_EQ
("v1", 
	`G‘
(""));

582 
	`ASSERT_LEVELDB_OK
(
	`Put
("", "v2"));

583 
	`ASSERT_EQ
("v2", 
	`G‘
(""));

584 } 
	`ChªgeO±iÚs
());

585 
	}
}

587 
	$TEST_F
(
DBTe¡
, 
Em±yV®ue
) {

589 
	`ASSERT_LEVELDB_OK
(
	`Put
("key", "v1"));

590 
	`ASSERT_EQ
("v1", 
	`G‘
("key"));

591 
	`ASSERT_LEVELDB_OK
(
	`Put
("key", ""));

592 
	`ASSERT_EQ
("", 
	`G‘
("key"));

593 
	`ASSERT_LEVELDB_OK
(
	`Put
("key", "v2"));

594 
	`ASSERT_EQ
("v2", 
	`G‘
("key"));

595 } 
	`ChªgeO±iÚs
());

596 
	}
}

598 
	$TEST_F
(
DBTe¡
, 
R—dWr™e
) {

600 
	`ASSERT_LEVELDB_OK
(
	`Put
("foo", "v1"));

601 
	`ASSERT_EQ
("v1", 
	`G‘
("foo"));

602 
	`ASSERT_LEVELDB_OK
(
	`Put
("bar", "v2"));

603 
	`ASSERT_LEVELDB_OK
(
	`Put
("foo", "v3"));

604 
	`ASSERT_EQ
("v3", 
	`G‘
("foo"));

605 
	`ASSERT_EQ
("v2", 
	`G‘
("bar"));

606 } 
	`ChªgeO±iÚs
());

607 
	}
}

609 
	$TEST_F
(
DBTe¡
, 
PutD–‘eG‘
) {

611 
	`ASSERT_LEVELDB_OK
(
db_
->
	`Put
(
	`Wr™eO±iÚs
(), "foo", "v1"));

612 
	`ASSERT_EQ
("v1", 
	`G‘
("foo"));

613 
	`ASSERT_LEVELDB_OK
(
db_
->
	`Put
(
	`Wr™eO±iÚs
(), "foo", "v2"));

614 
	`ASSERT_EQ
("v2", 
	`G‘
("foo"));

615 
	`ASSERT_LEVELDB_OK
(
db_
->
	`D–‘e
(
	`Wr™eO±iÚs
(), "foo"));

616 
	`ASSERT_EQ
("NOT_FOUND", 
	`G‘
("foo"));

617 } 
	`ChªgeO±iÚs
());

618 
	}
}

620 
	$TEST_F
(
DBTe¡
, 
G‘FromImmubËLay”
) {

622 
O±iÚs
 
İtiÚs
 = 
	`Cu¼’tO±iÚs
();

623 
İtiÚs
.
’v
 = 
’v_
;

624 
İtiÚs
.
wr™e_bufãr_size
 = 100000;

625 
	`Reİ’
(&
İtiÚs
);

627 
	`ASSERT_LEVELDB_OK
(
	`Put
("foo", "v1"));

628 
	`ASSERT_EQ
("v1", 
	`G‘
("foo"));

631 
’v_
->
d–ay_d©a_sync_
.
	`¡Üe
(
Œue
, 
¡d
::
memÜy_Üd”_»Ëa£
);

632 
	`Put
("k1", 
¡d
::
	`¡ršg
(100000, 'x'));

633 
	`Put
("k2", 
¡d
::
	`¡ršg
(100000, 'y'));

634 
	`ASSERT_EQ
("v1", 
	`G‘
("foo"));

636 
’v_
->
d–ay_d©a_sync_
.
	`¡Üe
(
çl£
, 
¡d
::
memÜy_Üd”_»Ëa£
);

637 } 
	`ChªgeO±iÚs
());

638 
	}
}

640 
	$TEST_F
(
DBTe¡
, 
G‘FromV”siÚs
) {

642 
	`ASSERT_LEVELDB_OK
(
	`Put
("foo", "v1"));

643 
	`dbfuÎ
()->
	`TEST_Com·ùMemTabË
();

644 
	`ASSERT_EQ
("v1", 
	`G‘
("foo"));

645 } 
	`ChªgeO±iÚs
());

646 
	}
}

648 
	$TEST_F
(
DBTe¡
, 
G‘MemU§ge
) {

650 
	`ASSERT_LEVELDB_OK
(
	`Put
("foo", "v1"));

651 
¡d
::
¡ršg
 
v®
;

652 
	`ASSERT_TRUE
(
db_
->
	`G‘Prİ”ty
("Ëv–db.­´oxim©e-memÜy-u§ge", &
v®
));

653 
mem_u§ge
 = 
¡d
::
	`¡oi
(
v®
);

654 
	`ASSERT_GT
(
mem_u§ge
, 0);

655 
	`ASSERT_LT
(
mem_u§ge
, 5 * 1024 * 1024);

656 } 
	`ChªgeO±iÚs
());

657 
	}
}

659 
	$TEST_F
(
DBTe¡
, 
G‘SÇpshÙ
) {

662 
i
 = 0; i < 2; i++) {

663 
¡d
::
¡ršg
 
key
 = (
i
 =ğ0è? std::
	`¡ršg
("foo") : std::string(200, 'x');

664 
	`ASSERT_LEVELDB_OK
(
	`Put
(
key
, "v1"));

665 cÚ¡ 
SÇpshÙ
* 
s1
 = 
db_
->
	`G‘SÇpshÙ
();

666 
	`ASSERT_LEVELDB_OK
(
	`Put
(
key
, "v2"));

667 
	`ASSERT_EQ
("v2", 
	`G‘
(
key
));

668 
	`ASSERT_EQ
("v1", 
	`G‘
(
key
, 
s1
));

669 
	`dbfuÎ
()->
	`TEST_Com·ùMemTabË
();

670 
	`ASSERT_EQ
("v2", 
	`G‘
(
key
));

671 
	`ASSERT_EQ
("v1", 
	`G‘
(
key
, 
s1
));

672 
db_
->
	`R–—£SÇpshÙ
(
s1
);

674 } 
	`ChªgeO±iÚs
());

675 
	}
}

677 
	$TEST_F
(
DBTe¡
, 
G‘Id’tiÿlSÇpshÙs
) {

680 
i
 = 0; i < 2; i++) {

681 
¡d
::
¡ršg
 
key
 = (
i
 =ğ0è? std::
	`¡ršg
("foo") : std::string(200, 'x');

682 
	`ASSERT_LEVELDB_OK
(
	`Put
(
key
, "v1"));

683 cÚ¡ 
SÇpshÙ
* 
s1
 = 
db_
->
	`G‘SÇpshÙ
();

684 cÚ¡ 
SÇpshÙ
* 
s2
 = 
db_
->
	`G‘SÇpshÙ
();

685 cÚ¡ 
SÇpshÙ
* 
s3
 = 
db_
->
	`G‘SÇpshÙ
();

686 
	`ASSERT_LEVELDB_OK
(
	`Put
(
key
, "v2"));

687 
	`ASSERT_EQ
("v2", 
	`G‘
(
key
));

688 
	`ASSERT_EQ
("v1", 
	`G‘
(
key
, 
s1
));

689 
	`ASSERT_EQ
("v1", 
	`G‘
(
key
, 
s2
));

690 
	`ASSERT_EQ
("v1", 
	`G‘
(
key
, 
s3
));

691 
db_
->
	`R–—£SÇpshÙ
(
s1
);

692 
	`dbfuÎ
()->
	`TEST_Com·ùMemTabË
();

693 
	`ASSERT_EQ
("v2", 
	`G‘
(
key
));

694 
	`ASSERT_EQ
("v1", 
	`G‘
(
key
, 
s2
));

695 
db_
->
	`R–—£SÇpshÙ
(
s2
);

696 
	`ASSERT_EQ
("v1", 
	`G‘
(
key
, 
s3
));

697 
db_
->
	`R–—£SÇpshÙ
(
s3
);

699 } 
	`ChªgeO±iÚs
());

700 
	}
}

702 
	$TEST_F
(
DBTe¡
, 
I‹¿‹Ov”Em±ySÇpshÙ
) {

704 cÚ¡ 
SÇpshÙ
* 
¢­shÙ
 = 
db_
->
	`G‘SÇpshÙ
();

705 
R—dO±iÚs
 
»ad_İtiÚs
;

706 
»ad_İtiÚs
.
¢­shÙ
 = snapshot;

707 
	`ASSERT_LEVELDB_OK
(
	`Put
("foo", "v1"));

708 
	`ASSERT_LEVELDB_OK
(
	`Put
("foo", "v2"));

710 
I‹¿tÜ
* 
™”©Ü1
 = 
db_
->
	`NewI‹¿tÜ
(
»ad_İtiÚs
);

711 
™”©Ü1
->
	`S“kToFœ¡
();

712 
	`ASSERT_TRUE
(!
™”©Ü1
->
	`V®id
());

713 
d–‘e
 
™”©Ü1
;

715 
	`dbfuÎ
()->
	`TEST_Com·ùMemTabË
();

717 
I‹¿tÜ
* 
™”©Ü2
 = 
db_
->
	`NewI‹¿tÜ
(
»ad_İtiÚs
);

718 
™”©Ü2
->
	`S“kToFœ¡
();

719 
	`ASSERT_TRUE
(!
™”©Ü2
->
	`V®id
());

720 
d–‘e
 
™”©Ü2
;

722 
db_
->
	`R–—£SÇpshÙ
(
¢­shÙ
);

723 } 
	`ChªgeO±iÚs
());

724 
	}
}

726 
	$TEST_F
(
DBTe¡
, 
G‘Lev–0Ord”šg
) {

732 
	`ASSERT_LEVELDB_OK
(
	`Put
("bar", "b"));

733 
	`ASSERT_LEVELDB_OK
(
	`Put
("foo", "v1"));

734 
	`dbfuÎ
()->
	`TEST_Com·ùMemTabË
();

735 
	`ASSERT_LEVELDB_OK
(
	`Put
("foo", "v2"));

736 
	`dbfuÎ
()->
	`TEST_Com·ùMemTabË
();

737 
	`ASSERT_EQ
("v2", 
	`G‘
("foo"));

738 } 
	`ChªgeO±iÚs
());

739 
	}
}

741 
	$TEST_F
(
DBTe¡
, 
G‘Ord”edByLev–s
) {

743 
	`ASSERT_LEVELDB_OK
(
	`Put
("foo", "v1"));

744 
	`Com·ù
("a", "z");

745 
	`ASSERT_EQ
("v1", 
	`G‘
("foo"));

746 
	`ASSERT_LEVELDB_OK
(
	`Put
("foo", "v2"));

747 
	`ASSERT_EQ
("v2", 
	`G‘
("foo"));

748 
	`dbfuÎ
()->
	`TEST_Com·ùMemTabË
();

749 
	`ASSERT_EQ
("v2", 
	`G‘
("foo"));

750 } 
	`ChªgeO±iÚs
());

751 
	}
}

753 
	$TEST_F
(
DBTe¡
, 
G‘PicksCÜ»ùFe
) {

756 
	`ASSERT_LEVELDB_OK
(
	`Put
("a", "va"));

757 
	`Com·ù
("a", "b");

758 
	`ASSERT_LEVELDB_OK
(
	`Put
("x", "vx"));

759 
	`Com·ù
("x", "y");

760 
	`ASSERT_LEVELDB_OK
(
	`Put
("f", "vf"));

761 
	`Com·ù
("f", "g");

762 
	`ASSERT_EQ
("va", 
	`G‘
("a"));

763 
	`ASSERT_EQ
("vf", 
	`G‘
("f"));

764 
	`ASSERT_EQ
("vx", 
	`G‘
("x"));

765 } 
	`ChªgeO±iÚs
());

766 
	}
}

768 
	$TEST_F
(
DBTe¡
, 
G‘EncouÁ”sEm±yLev–
) {

779 
com·ùiÚ_couÁ
 = 0;

780 
	`NumTabËFesAtLev–
(0) == 0 || NumTableFilesAtLevel(2) == 0) {

781 
	`ASSERT_LE
(
com·ùiÚ_couÁ
, 100) << "could‚ot fill†evels 0‡nd 2";

782 
com·ùiÚ_couÁ
++;

783 
	`Put
("a", "begin");

784 
	`Put
("z", "end");

785 
	`dbfuÎ
()->
	`TEST_Com·ùMemTabË
();

789 
	`dbfuÎ
()->
	`TEST_Com·ùRªge
(1, 
nuÎ±r
,‚ullptr);

790 
	`ASSERT_EQ
(
	`NumTabËFesAtLev–
(0), 1);

791 
	`ASSERT_EQ
(
	`NumTabËFesAtLev–
(1), 0);

792 
	`ASSERT_EQ
(
	`NumTabËFesAtLev–
(2), 1);

795 
i
 = 0; i < 1000; i++) {

796 
	`ASSERT_EQ
("NOT_FOUND", 
	`G‘
("missing"));

800 
	`D–ayMli£cÚds
(1000);

802 
	`ASSERT_EQ
(
	`NumTabËFesAtLev–
(0), 0);

803 } 
	`ChªgeO±iÚs
());

804 
	}
}

806 
	$TEST_F
(
DBTe¡
, 
I‹rEm±y
) {

807 
I‹¿tÜ
* 
™”
 = 
db_
->
	`NewI‹¿tÜ
(
	`R—dO±iÚs
());

809 
™”
->
	`S“kToFœ¡
();

810 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "(invalid)");

812 
™”
->
	`S“kToLa¡
();

813 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "(invalid)");

815 
™”
->
	`S“k
("foo");

816 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "(invalid)");

818 
d–‘e
 
™”
;

819 
	}
}

821 
	$TEST_F
(
DBTe¡
, 
I‹rSšgË
) {

822 
	`ASSERT_LEVELDB_OK
(
	`Put
("a", "va"));

823 
I‹¿tÜ
* 
™”
 = 
db_
->
	`NewI‹¿tÜ
(
	`R—dO±iÚs
());

825 
™”
->
	`S“kToFœ¡
();

826 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "a->va");

827 
™”
->
	`Next
();

828 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "(invalid)");

829 
™”
->
	`S“kToFœ¡
();

830 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "a->va");

831 
™”
->
	`P»v
();

832 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "(invalid)");

834 
™”
->
	`S“kToLa¡
();

835 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "a->va");

836 
™”
->
	`Next
();

837 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "(invalid)");

838 
™”
->
	`S“kToLa¡
();

839 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "a->va");

840 
™”
->
	`P»v
();

841 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "(invalid)");

843 
™”
->
	`S“k
("");

844 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "a->va");

845 
™”
->
	`Next
();

846 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "(invalid)");

848 
™”
->
	`S“k
("a");

849 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "a->va");

850 
™”
->
	`Next
();

851 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "(invalid)");

853 
™”
->
	`S“k
("b");

854 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "(invalid)");

856 
d–‘e
 
™”
;

857 
	}
}

859 
	$TEST_F
(
DBTe¡
, 
I‹rMuÉi
) {

860 
	`ASSERT_LEVELDB_OK
(
	`Put
("a", "va"));

861 
	`ASSERT_LEVELDB_OK
(
	`Put
("b", "vb"));

862 
	`ASSERT_LEVELDB_OK
(
	`Put
("c", "vc"));

863 
I‹¿tÜ
* 
™”
 = 
db_
->
	`NewI‹¿tÜ
(
	`R—dO±iÚs
());

865 
™”
->
	`S“kToFœ¡
();

866 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "a->va");

867 
™”
->
	`Next
();

868 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "b->vb");

869 
™”
->
	`Next
();

870 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "c->vc");

871 
™”
->
	`Next
();

872 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "(invalid)");

873 
™”
->
	`S“kToFœ¡
();

874 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "a->va");

875 
™”
->
	`P»v
();

876 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "(invalid)");

878 
™”
->
	`S“kToLa¡
();

879 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "c->vc");

880 
™”
->
	`P»v
();

881 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "b->vb");

882 
™”
->
	`P»v
();

883 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "a->va");

884 
™”
->
	`P»v
();

885 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "(invalid)");

886 
™”
->
	`S“kToLa¡
();

887 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "c->vc");

888 
™”
->
	`Next
();

889 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "(invalid)");

891 
™”
->
	`S“k
("");

892 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "a->va");

893 
™”
->
	`S“k
("a");

894 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "a->va");

895 
™”
->
	`S“k
("ax");

896 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "b->vb");

897 
™”
->
	`S“k
("b");

898 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "b->vb");

899 
™”
->
	`S“k
("z");

900 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "(invalid)");

903 
™”
->
	`S“kToLa¡
();

904 
™”
->
	`P»v
();

905 
™”
->
	`P»v
();

906 
™”
->
	`Next
();

907 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "b->vb");

910 
™”
->
	`S“kToFœ¡
();

911 
™”
->
	`Next
();

912 
™”
->
	`Next
();

913 
™”
->
	`P»v
();

914 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "b->vb");

917 
	`ASSERT_LEVELDB_OK
(
	`Put
("a", "va2"));

918 
	`ASSERT_LEVELDB_OK
(
	`Put
("a2", "va3"));

919 
	`ASSERT_LEVELDB_OK
(
	`Put
("b", "vb2"));

920 
	`ASSERT_LEVELDB_OK
(
	`Put
("c", "vc2"));

921 
	`ASSERT_LEVELDB_OK
(
	`D–‘e
("b"));

922 
™”
->
	`S“kToFœ¡
();

923 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "a->va");

924 
™”
->
	`Next
();

925 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "b->vb");

926 
™”
->
	`Next
();

927 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "c->vc");

928 
™”
->
	`Next
();

929 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "(invalid)");

930 
™”
->
	`S“kToLa¡
();

931 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "c->vc");

932 
™”
->
	`P»v
();

933 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "b->vb");

934 
™”
->
	`P»v
();

935 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "a->va");

936 
™”
->
	`P»v
();

937 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "(invalid)");

939 
d–‘e
 
™”
;

940 
	}
}

942 
	$TEST_F
(
DBTe¡
, 
I‹rSm®lAndL¬geMix
) {

943 
	`ASSERT_LEVELDB_OK
(
	`Put
("a", "va"));

944 
	`ASSERT_LEVELDB_OK
(
	`Put
("b", 
¡d
::
	`¡ršg
(100000, 'b')));

945 
	`ASSERT_LEVELDB_OK
(
	`Put
("c", "vc"));

946 
	`ASSERT_LEVELDB_OK
(
	`Put
("d", 
¡d
::
	`¡ršg
(100000, 'd')));

947 
	`ASSERT_LEVELDB_OK
(
	`Put
("e", 
¡d
::
	`¡ršg
(100000, 'e')));

949 
I‹¿tÜ
* 
™”
 = 
db_
->
	`NewI‹¿tÜ
(
	`R—dO±iÚs
());

951 
™”
->
	`S“kToFœ¡
();

952 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "a->va");

953 
™”
->
	`Next
();

954 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "b->" + 
¡d
::
	`¡ršg
(100000, 'b'));

955 
™”
->
	`Next
();

956 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "c->vc");

957 
™”
->
	`Next
();

958 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "d->" + 
¡d
::
	`¡ršg
(100000, 'd'));

959 
™”
->
	`Next
();

960 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "e->" + 
¡d
::
	`¡ršg
(100000, 'e'));

961 
™”
->
	`Next
();

962 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "(invalid)");

964 
™”
->
	`S“kToLa¡
();

965 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "e->" + 
¡d
::
	`¡ršg
(100000, 'e'));

966 
™”
->
	`P»v
();

967 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "d->" + 
¡d
::
	`¡ršg
(100000, 'd'));

968 
™”
->
	`P»v
();

969 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "c->vc");

970 
™”
->
	`P»v
();

971 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "b->" + 
¡d
::
	`¡ršg
(100000, 'b'));

972 
™”
->
	`P»v
();

973 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "a->va");

974 
™”
->
	`P»v
();

975 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "(invalid)");

977 
d–‘e
 
™”
;

978 
	}
}

980 
	$TEST_F
(
DBTe¡
, 
I‹rMuÉiW™hD–‘e
) {

982 
	`ASSERT_LEVELDB_OK
(
	`Put
("a", "va"));

983 
	`ASSERT_LEVELDB_OK
(
	`Put
("b", "vb"));

984 
	`ASSERT_LEVELDB_OK
(
	`Put
("c", "vc"));

985 
	`ASSERT_LEVELDB_OK
(
	`D–‘e
("b"));

986 
	`ASSERT_EQ
("NOT_FOUND", 
	`G‘
("b"));

988 
I‹¿tÜ
* 
™”
 = 
db_
->
	`NewI‹¿tÜ
(
	`R—dO±iÚs
());

989 
™”
->
	`S“k
("c");

990 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "c->vc");

991 
™”
->
	`P»v
();

992 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "a->va");

993 
d–‘e
 
™”
;

994 } 
	`ChªgeO±iÚs
());

995 
	}
}

997 
	$TEST_F
(
DBTe¡
, 
I‹rMuÉiW™hD–‘eAndCom·ùiÚ
) {

999 
	`ASSERT_LEVELDB_OK
(
	`Put
("b", "vb"));

1000 
	`ASSERT_LEVELDB_OK
(
	`Put
("c", "vc"));

1001 
	`ASSERT_LEVELDB_OK
(
	`Put
("a", "va"));

1002 
	`dbfuÎ
()->
	`TEST_Com·ùMemTabË
();

1003 
	`ASSERT_LEVELDB_OK
(
	`D–‘e
("b"));

1004 
	`ASSERT_EQ
("NOT_FOUND", 
	`G‘
("b"));

1006 
I‹¿tÜ
* 
™”
 = 
db_
->
	`NewI‹¿tÜ
(
	`R—dO±iÚs
());

1007 
™”
->
	`S“k
("c");

1008 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "c->vc");

1009 
™”
->
	`P»v
();

1010 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "a->va");

1011 
™”
->
	`S“k
("b");

1012 
	`ASSERT_EQ
(
	`I‹rStus
(
™”
), "c->vc");

1013 
d–‘e
 
™”
;

1014 } 
	`ChªgeO±iÚs
());

1015 
	}
}

1017 
	$TEST_F
(
DBTe¡
, 
Recov”
) {

1019 
	`ASSERT_LEVELDB_OK
(
	`Put
("foo", "v1"));

1020 
	`ASSERT_LEVELDB_OK
(
	`Put
("baz", "v5"));

1022 
	`Reİ’
();

1023 
	`ASSERT_EQ
("v1", 
	`G‘
("foo"));

1025 
	`ASSERT_EQ
("v1", 
	`G‘
("foo"));

1026 
	`ASSERT_EQ
("v5", 
	`G‘
("baz"));

1027 
	`ASSERT_LEVELDB_OK
(
	`Put
("bar", "v2"));

1028 
	`ASSERT_LEVELDB_OK
(
	`Put
("foo", "v3"));

1030 
	`Reİ’
();

1031 
	`ASSERT_EQ
("v3", 
	`G‘
("foo"));

1032 
	`ASSERT_LEVELDB_OK
(
	`Put
("foo", "v4"));

1033 
	`ASSERT_EQ
("v4", 
	`G‘
("foo"));

1034 
	`ASSERT_EQ
("v2", 
	`G‘
("bar"));

1035 
	`ASSERT_EQ
("v5", 
	`G‘
("baz"));

1036 } 
	`ChªgeO±iÚs
());

1037 
	}
}

1039 
	$TEST_F
(
DBTe¡
, 
Recov”yW™hEm±yLog
) {

1041 
	`ASSERT_LEVELDB_OK
(
	`Put
("foo", "v1"));

1042 
	`ASSERT_LEVELDB_OK
(
	`Put
("foo", "v2"));

1043 
	`Reİ’
();

1044 
	`Reİ’
();

1045 
	`ASSERT_LEVELDB_OK
(
	`Put
("foo", "v3"));

1046 
	`Reİ’
();

1047 
	`ASSERT_EQ
("v3", 
	`G‘
("foo"));

1048 } 
	`ChªgeO±iÚs
());

1049 
	}
}

1053 
	$TEST_F
(
DBTe¡
, 
Recov”DuršgMembËCom·ùiÚ
) {

1055 
O±iÚs
 
İtiÚs
 = 
	`Cu¼’tO±iÚs
();

1056 
İtiÚs
.
’v
 = 
’v_
;

1057 
İtiÚs
.
wr™e_bufãr_size
 = 1000000;

1058 
	`Reİ’
(&
İtiÚs
);

1061 
	`ASSERT_LEVELDB_OK
(
	`Put
("foo", "v1"));

1062 
	`ASSERT_LEVELDB_OK
(

1063 
	`Put
("big1", 
¡d
::
	`¡ršg
(10000000, 'x')));

1064 
	`ASSERT_LEVELDB_OK
(

1065 
	`Put
("big2", 
¡d
::
	`¡ršg
(1000, 'y')));

1066 
	`ASSERT_LEVELDB_OK
(
	`Put
("bar", "v2"));

1068 
	`Reİ’
(&
İtiÚs
);

1069 
	`ASSERT_EQ
("v1", 
	`G‘
("foo"));

1070 
	`ASSERT_EQ
("v2", 
	`G‘
("bar"));

1071 
	`ASSERT_EQ
(
¡d
::
	`¡ršg
(10000000, 'x'), 
	`G‘
("big1"));

1072 
	`ASSERT_EQ
(
¡d
::
	`¡ršg
(1000, 'y'), 
	`G‘
("big2"));

1073 } 
	`ChªgeO±iÚs
());

1074 
	}
}

1076 
	g¡d
::
¡ršg
 
	$Key
(
i
) {

1077 
buf
[100];

1078 
¡d
::
	`¢´štf
(
buf
, (buf), "key%06d", 
i
);

1079  
¡d
::
	`¡ršg
(
buf
);

1080 
	}
}

1082 
	$TEST_F
(
DBTe¡
, 
MšÜCom·ùiÚsH­³n
) {

1083 
O±iÚs
 
İtiÚs
 = 
	`Cu¼’tO±iÚs
();

1084 
İtiÚs
.
wr™e_bufãr_size
 = 10000;

1085 
	`Reİ’
(&
İtiÚs
);

1087 cÚ¡ 
N
 = 500;

1089 
¡¬tšg_num_bËs
 = 
	`TÙ®TabËFes
();

1090 
i
 = 0; i < 
N
; i++) {

1091 
	`ASSERT_LEVELDB_OK
(
	`Put
(
	`Key
(
i
), Key(iè+ 
¡d
::
	`¡ršg
(1000, 'v')));

1093 
’dšg_num_bËs
 = 
	`TÙ®TabËFes
();

1094 
	`ASSERT_GT
(
’dšg_num_bËs
, 
¡¬tšg_num_bËs
);

1096 
i
 = 0; i < 
N
; i++) {

1097 
	`ASSERT_EQ
(
	`Key
(
i
è+ 
¡d
::
	`¡ršg
(1000, 'v'), 
	`G‘
(Key(i)));

1100 
	`Reİ’
();

1102 
i
 = 0; i < 
N
; i++) {

1103 
	`ASSERT_EQ
(
	`Key
(
i
è+ 
¡d
::
	`¡ršg
(1000, 'v'), 
	`G‘
(Key(i)));

1105 
	}
}

1107 
	$TEST_F
(
DBTe¡
, 
Recov”W™hL¬geLog
) {

1109 
O±iÚs
 
İtiÚs
 = 
	`Cu¼’tO±iÚs
();

1110 
	`Reİ’
(&
İtiÚs
);

1111 
	`ASSERT_LEVELDB_OK
(
	`Put
("big1", 
¡d
::
	`¡ršg
(200000, '1')));

1112 
	`ASSERT_LEVELDB_OK
(
	`Put
("big2", 
¡d
::
	`¡ršg
(200000, '2')));

1113 
	`ASSERT_LEVELDB_OK
(
	`Put
("sm®l3", 
¡d
::
	`¡ršg
(10, '3')));

1114 
	`ASSERT_LEVELDB_OK
(
	`Put
("sm®l4", 
¡d
::
	`¡ršg
(10, '4')));

1115 
	`ASSERT_EQ
(
	`NumTabËFesAtLev–
(0), 0);

1120 
O±iÚs
 
İtiÚs
 = 
	`Cu¼’tO±iÚs
();

1121 
İtiÚs
.
wr™e_bufãr_size
 = 100000;

1122 
	`Reİ’
(&
İtiÚs
);

1123 
	`ASSERT_EQ
(
	`NumTabËFesAtLev–
(0), 3);

1124 
	`ASSERT_EQ
(
¡d
::
	`¡ršg
(200000, '1'), 
	`G‘
("big1"));

1125 
	`ASSERT_EQ
(
¡d
::
	`¡ršg
(200000, '2'), 
	`G‘
("big2"));

1126 
	`ASSERT_EQ
(
¡d
::
	`¡ršg
(10, '3'), 
	`G‘
("small3"));

1127 
	`ASSERT_EQ
(
¡d
::
	`¡ršg
(10, '4'), 
	`G‘
("small4"));

1128 
	`ASSERT_GT
(
	`NumTabËFesAtLev–
(0), 1);

1129 
	}
}

1131 
	$TEST_F
(
DBTe¡
, 
Com·ùiÚsG’”©eMuÉËFes
) {

1132 
O±iÚs
 
İtiÚs
 = 
	`Cu¼’tO±iÚs
();

1133 
İtiÚs
.
wr™e_bufãr_size
 = 100000000;

1134 
	`Reİ’
(&
İtiÚs
);

1136 
Rªdom
 
	`ºd
(301);

1139 
	`ASSERT_EQ
(
	`NumTabËFesAtLev–
(0), 0);

1140 
¡d
::
veùÜ
<¡d::
¡ršg
> 
v®ues
;

1141 
i
 = 0; i < 80; i++) {

1142 
v®ues
.
	`push_back
(
	`RªdomSŒšg
(&
ºd
, 100000));

1143 
	`ASSERT_LEVELDB_OK
(
	`Put
(
	`Key
(
i
), 
v®ues
[i]));

1147 
	`Reİ’
(&
İtiÚs
);

1148 
	`dbfuÎ
()->
	`TEST_Com·ùRªge
(0, 
nuÎ±r
,‚ullptr);

1150 
	`ASSERT_EQ
(
	`NumTabËFesAtLev–
(0), 0);

1151 
	`ASSERT_GT
(
	`NumTabËFesAtLev–
(1), 1);

1152 
i
 = 0; i < 80; i++) {

1153 
	`ASSERT_EQ
(
	`G‘
(
	`Key
(
i
)), 
v®ues
[i]);

1155 
	}
}

1157 
	$TEST_F
(
DBTe¡
, 
R•—‹dWr™esToSameKey
) {

1158 
O±iÚs
 
İtiÚs
 = 
	`Cu¼’tO±iÚs
();

1159 
İtiÚs
.
’v
 = 
’v_
;

1160 
İtiÚs
.
wr™e_bufãr_size
 = 100000;

1161 
	`Reİ’
(&
İtiÚs
);

1165 cÚ¡ 
kMaxFes
 = 
cÚfig
::
kNumLev–s
 + cÚfig::
kL0_StİWr™esTrigg”
;

1167 
Rªdom
 
	`ºd
(301);

1168 
¡d
::
¡ršg
 
v®ue
 = 
	`RªdomSŒšg
(&
ºd
, 2 * 
İtiÚs
.
wr™e_bufãr_size
);

1169 
i
 = 0; i < 5 * 
kMaxFes
; i++) {

1170 
	`Put
("key", 
v®ue
);

1171 
	`ASSERT_LE
(
	`TÙ®TabËFes
(), 
kMaxFes
);

1172 
¡d
::
	`årštf
(
¡d”r
, "aá” %d: %d fes\n", 
i
 + 1, 
	`TÙ®TabËFes
());

1174 
	}
}

1176 
	$TEST_F
(
DBTe¡
, 
S·r£M”ge
) {

1177 
O±iÚs
 
İtiÚs
 = 
	`Cu¼’tO±iÚs
();

1178 
İtiÚs
.
com´essiÚ
 = 
kNoCom´essiÚ
;

1179 
	`Reİ’
(&
İtiÚs
);

1181 
	`FlLev–s
("A", "Z");

1189 cÚ¡ 
¡d
::
¡ršg
 
	`v®ue
(1000, 'x');

1190 
	`Put
("A", "va");

1192 
i
 = 0; i < 100000; i++) {

1193 
key
[100];

1194 
¡d
::
	`¢´štf
(
key
, (key), "B%010d", 
i
);

1195 
	`Put
(
key
, 
v®ue
);

1197 
	`Put
("C", "vc");

1198 
	`dbfuÎ
()->
	`TEST_Com·ùMemTabË
();

1199 
	`dbfuÎ
()->
	`TEST_Com·ùRªge
(0, 
nuÎ±r
,‚ullptr);

1202 
	`Put
("A", "va2");

1203 
	`Put
("B100", "bvalue2");

1204 
	`Put
("C", "vc2");

1205 
	`dbfuÎ
()->
	`TEST_Com·ùMemTabË
();

1209 
	`ASSERT_LE
(
	`dbfuÎ
()->
	`TEST_MaxNextLev–Ov”ÏµšgBy‹s
(), 20 * 1048576);

1210 
	`dbfuÎ
()->
	`TEST_Com·ùRªge
(0, 
nuÎ±r
,‚ullptr);

1211 
	`ASSERT_LE
(
	`dbfuÎ
()->
	`TEST_MaxNextLev–Ov”ÏµšgBy‹s
(), 20 * 1048576);

1212 
	`dbfuÎ
()->
	`TEST_Com·ùRªge
(1, 
nuÎ±r
,‚ullptr);

1213 
	`ASSERT_LE
(
	`dbfuÎ
()->
	`TEST_MaxNextLev–Ov”ÏµšgBy‹s
(), 20 * 1048576);

1214 
	}
}

1216 
boŞ
 
	$B‘w“n
(
ušt64_t
 
v®
, ušt64_ˆ
low
, ušt64_ˆ
high
) {

1217 
boŞ
 
»suÉ
 = (
v®
 >ğ
low
è&& (v® <ğ
high
);

1218 ià(!
»suÉ
) {

1219 
¡d
::
	`årštf
(
¡d”r
, "Value %llu is‚ot in„ange [%llu, %llu]\n",

1220 ()(
v®
), ()(
low
),

1221 ()(
high
));

1223  
»suÉ
;

1224 
	}
}

1226 
	$TEST_F
(
DBTe¡
, 
Aµroxim©eSizes
) {

1228 
O±iÚs
 
İtiÚs
 = 
	`Cu¼’tO±iÚs
();

1229 
İtiÚs
.
wr™e_bufãr_size
 = 100000000;

1230 
İtiÚs
.
com´essiÚ
 = 
kNoCom´essiÚ
;

1231 
	`De¡royAndReİ’
();

1233 
	`ASSERT_TRUE
(
	`B‘w“n
(
	`Size
("", "xyz"), 0, 0));

1234 
	`Reİ’
(&
İtiÚs
);

1235 
	`ASSERT_TRUE
(
	`B‘w“n
(
	`Size
("", "xyz"), 0, 0));

1238 
	`ASSERT_EQ
(
	`NumTabËFesAtLev–
(0), 0);

1239 cÚ¡ 
N
 = 80;

1240 cÚ¡ 
S1
 = 100000;

1241 cÚ¡ 
S2
 = 105000;

1242 
Rªdom
 
	`ºd
(301);

1243 
i
 = 0; i < 
N
; i++) {

1244 
	`ASSERT_LEVELDB_OK
(
	`Put
(
	`Key
(
i
), 
	`RªdomSŒšg
(&
ºd
, 
S1
)));

1248 
	`ASSERT_TRUE
(
	`B‘w“n
(
	`Size
("", 
	`Key
(50)), 0, 0));

1250 ià(
İtiÚs
.
»u£_logs
) {

1253 
	`Reİ’
(&
İtiÚs
);

1254 
	`ASSERT_TRUE
(
	`B‘w“n
(
	`Size
("", 
	`Key
(50)), 0, 0));

1259 
run
 = 0;„un < 3;„un++) {

1260 
	`Reİ’
(&
İtiÚs
);

1262 
com·ù_¡¬t
 = 0; com·ù_¡¬ˆ< 
N
; compact_start += 10) {

1263 
i
 = 0; i < 
N
; i += 10) {

1264 
	`ASSERT_TRUE
(
	`B‘w“n
(
	`Size
("", 
	`Key
(
i
)), 
S1
 * i, 
S2
 * i));

1265 
	`ASSERT_TRUE
(
	`B‘w“n
(
	`Size
("", 
	`Key
(
i
è+ ".suffix"), 
S1
 * (i + 1),

1266 
S2
 * (
i
 + 1)));

1267 
	`ASSERT_TRUE
(
	`B‘w“n
(
	`Size
(
	`Key
(
i
), Key(˜+ 10)), 
S1
 * 10, 
S2
 * 10));

1269 
	`ASSERT_TRUE
(
	`B‘w“n
(
	`Size
("", 
	`Key
(50)), 
S1
 * 50, 
S2
 * 50));

1270 
	`ASSERT_TRUE
(
	`B‘w“n
(
	`Size
("", 
	`Key
(50è+ ".suffix"), 
S1
 * 50, 
S2
 * 50));

1272 
¡d
::
¡ršg
 
c¡¬t_¡r
 = 
	`Key
(
com·ù_¡¬t
);

1273 
¡d
::
¡ršg
 
ûnd_¡r
 = 
	`Key
(
com·ù_¡¬t
 + 9);

1274 
Sliû
 
c¡¬t
 = 
c¡¬t_¡r
;

1275 
Sliû
 
ûnd
 = 
ûnd_¡r
;

1276 
	`dbfuÎ
()->
	`TEST_Com·ùRªge
(0, &
c¡¬t
, &
ûnd
);

1279 
	`ASSERT_EQ
(
	`NumTabËFesAtLev–
(0), 0);

1280 
	`ASSERT_GT
(
	`NumTabËFesAtLev–
(1), 0);

1282 } 
	`ChªgeO±iÚs
());

1283 
	}
}

1285 
	$TEST_F
(
DBTe¡
, 
Aµroxim©eSizes_MixOfSm®lAndL¬ge
) {

1287 
O±iÚs
 
İtiÚs
 = 
	`Cu¼’tO±iÚs
();

1288 
İtiÚs
.
com´essiÚ
 = 
kNoCom´essiÚ
;

1289 
	`Reİ’
();

1291 
Rªdom
 
	`ºd
(301);

1292 
¡d
::
¡ršg
 
big1
 = 
	`RªdomSŒšg
(&
ºd
, 100000);

1293 
	`ASSERT_LEVELDB_OK
(
	`Put
(
	`Key
(0), 
	`RªdomSŒšg
(&
ºd
, 10000)));

1294 
	`ASSERT_LEVELDB_OK
(
	`Put
(
	`Key
(1), 
	`RªdomSŒšg
(&
ºd
, 10000)));

1295 
	`ASSERT_LEVELDB_OK
(
	`Put
(
	`Key
(2), 
big1
));

1296 
	`ASSERT_LEVELDB_OK
(
	`Put
(
	`Key
(3), 
	`RªdomSŒšg
(&
ºd
, 10000)));

1297 
	`ASSERT_LEVELDB_OK
(
	`Put
(
	`Key
(4), 
big1
));

1298 
	`ASSERT_LEVELDB_OK
(
	`Put
(
	`Key
(5), 
	`RªdomSŒšg
(&
ºd
, 10000)));

1299 
	`ASSERT_LEVELDB_OK
(
	`Put
(
	`Key
(6), 
	`RªdomSŒšg
(&
ºd
, 300000)));

1300 
	`ASSERT_LEVELDB_OK
(
	`Put
(
	`Key
(7), 
	`RªdomSŒšg
(&
ºd
, 10000)));

1302 ià(
İtiÚs
.
»u£_logs
) {

1304 
	`ASSERT_LEVELDB_OK
(
	`dbfuÎ
()->
	`TEST_Com·ùMemTabË
());

1308 
run
 = 0;„un < 3;„un++) {

1309 
	`Reİ’
(&
İtiÚs
);

1311 
	`ASSERT_TRUE
(
	`B‘w“n
(
	`Size
("", 
	`Key
(0)), 0, 0));

1312 
	`ASSERT_TRUE
(
	`B‘w“n
(
	`Size
("", 
	`Key
(1)), 10000, 11000));

1313 
	`ASSERT_TRUE
(
	`B‘w“n
(
	`Size
("", 
	`Key
(2)), 20000, 21000));

1314 
	`ASSERT_TRUE
(
	`B‘w“n
(
	`Size
("", 
	`Key
(3)), 120000, 121000));

1315 
	`ASSERT_TRUE
(
	`B‘w“n
(
	`Size
("", 
	`Key
(4)), 130000, 131000));

1316 
	`ASSERT_TRUE
(
	`B‘w“n
(
	`Size
("", 
	`Key
(5)), 230000, 231000));

1317 
	`ASSERT_TRUE
(
	`B‘w“n
(
	`Size
("", 
	`Key
(6)), 240000, 241000));

1318 
	`ASSERT_TRUE
(
	`B‘w“n
(
	`Size
("", 
	`Key
(7)), 540000, 541000));

1319 
	`ASSERT_TRUE
(
	`B‘w“n
(
	`Size
("", 
	`Key
(8)), 550000, 560000));

1321 
	`ASSERT_TRUE
(
	`B‘w“n
(
	`Size
(
	`Key
(3), Key(5)), 110000, 111000));

1323 
	`dbfuÎ
()->
	`TEST_Com·ùRªge
(0, 
nuÎ±r
,‚ullptr);

1325 } 
	`ChªgeO±iÚs
());

1326 
	}
}

1328 
	$TEST_F
(
DBTe¡
, 
I‹¿tÜPšsRef
) {

1329 
	`Put
("foo", "hello");

1332 
I‹¿tÜ
* 
™”
 = 
db_
->
	`NewI‹¿tÜ
(
	`R—dO±iÚs
());

1335 
	`Put
("foo", "newvalue1");

1336 
i
 = 0; i < 100; i++) {

1337 
	`ASSERT_LEVELDB_OK
(

1338 
	`Put
(
	`Key
(
i
), Key(iè+ 
¡d
::
	`¡ršg
(100000, 'v')));

1340 
	`Put
("foo", "newvalue2");

1342 
™”
->
	`S“kToFœ¡
();

1343 
	`ASSERT_TRUE
(
™”
->
	`V®id
());

1344 
	`ASSERT_EQ
("foo", 
™”
->
	`key
().
	`ToSŒšg
());

1345 
	`ASSERT_EQ
("h–lo", 
™”
->
	`v®ue
().
	`ToSŒšg
());

1346 
™”
->
	`Next
();

1347 
	`ASSERT_TRUE
(!
™”
->
	`V®id
());

1348 
d–‘e
 
™”
;

1349 
	}
}

1351 
	$TEST_F
(
DBTe¡
, 
SÇpshÙ
) {

1353 
	`Put
("foo", "v1");

1354 cÚ¡ 
SÇpshÙ
* 
s1
 = 
db_
->
	`G‘SÇpshÙ
();

1355 
	`Put
("foo", "v2");

1356 cÚ¡ 
SÇpshÙ
* 
s2
 = 
db_
->
	`G‘SÇpshÙ
();

1357 
	`Put
("foo", "v3");

1358 cÚ¡ 
SÇpshÙ
* 
s3
 = 
db_
->
	`G‘SÇpshÙ
();

1360 
	`Put
("foo", "v4");

1361 
	`ASSERT_EQ
("v1", 
	`G‘
("foo", 
s1
));

1362 
	`ASSERT_EQ
("v2", 
	`G‘
("foo", 
s2
));

1363 
	`ASSERT_EQ
("v3", 
	`G‘
("foo", 
s3
));

1364 
	`ASSERT_EQ
("v4", 
	`G‘
("foo"));

1366 
db_
->
	`R–—£SÇpshÙ
(
s3
);

1367 
	`ASSERT_EQ
("v1", 
	`G‘
("foo", 
s1
));

1368 
	`ASSERT_EQ
("v2", 
	`G‘
("foo", 
s2
));

1369 
	`ASSERT_EQ
("v4", 
	`G‘
("foo"));

1371 
db_
->
	`R–—£SÇpshÙ
(
s1
);

1372 
	`ASSERT_EQ
("v2", 
	`G‘
("foo", 
s2
));

1373 
	`ASSERT_EQ
("v4", 
	`G‘
("foo"));

1375 
db_
->
	`R–—£SÇpshÙ
(
s2
);

1376 
	`ASSERT_EQ
("v4", 
	`G‘
("foo"));

1377 } 
	`ChªgeO±iÚs
());

1378 
	}
}

1380 
	$TEST_F
(
DBTe¡
, 
Hidd’V®uesA»Removed
) {

1382 
Rªdom
 
	`ºd
(301);

1383 
	`FlLev–s
("a", "z");

1385 
¡d
::
¡ršg
 
big
 = 
	`RªdomSŒšg
(&
ºd
, 50000);

1386 
	`Put
("foo", 
big
);

1387 
	`Put
("pastfoo", "v");

1388 cÚ¡ 
SÇpshÙ
* 
¢­shÙ
 = 
db_
->
	`G‘SÇpshÙ
();

1389 
	`Put
("foo", "tiny");

1390 
	`Put
("pastfoo2", "v2");

1392 
	`ASSERT_LEVELDB_OK
(
	`dbfuÎ
()->
	`TEST_Com·ùMemTabË
());

1393 
	`ASSERT_GT
(
	`NumTabËFesAtLev–
(0), 0);

1395 
	`ASSERT_EQ
(
big
, 
	`G‘
("foo", 
¢­shÙ
));

1396 
	`ASSERT_TRUE
(
	`B‘w“n
(
	`Size
("", "pastfoo"), 50000, 60000));

1397 
db_
->
	`R–—£SÇpshÙ
(
¢­shÙ
);

1398 
	`ASSERT_EQ
(
	`AÎEÁr›sFÜ
("foo"), "[šy, " + 
big
 + " ]");

1399 
Sliû
 
	`x
("x");

1400 
	`dbfuÎ
()->
	`TEST_Com·ùRªge
(0, 
nuÎ±r
, &
x
);

1401 
	`ASSERT_EQ
(
	`AÎEÁr›sFÜ
("foo"), "[iny ]");

1402 
	`ASSERT_EQ
(
	`NumTabËFesAtLev–
(0), 0);

1403 
	`ASSERT_GE
(
	`NumTabËFesAtLev–
(1), 1);

1404 
	`dbfuÎ
()->
	`TEST_Com·ùRªge
(1, 
nuÎ±r
, &
x
);

1405 
	`ASSERT_EQ
(
	`AÎEÁr›sFÜ
("foo"), "[iny ]");

1407 
	`ASSERT_TRUE
(
	`B‘w“n
(
	`Size
("", "pastfoo"), 0, 1000));

1408 } 
	`ChªgeO±iÚs
());

1409 
	}
}

1411 
	$TEST_F
(
DBTe¡
, 
D–‘iÚM¬k”s1
) {

1412 
	`Put
("foo", "v1");

1413 
	`ASSERT_LEVELDB_OK
(
	`dbfuÎ
()->
	`TEST_Com·ùMemTabË
());

1414 cÚ¡ 
Ï¡
 = 
cÚfig
::
kMaxMemCom·ùLev–
;

1415 
	`ASSERT_EQ
(
	`NumTabËFesAtLev–
(
Ï¡
), 1);

1418 
	`Put
("a", "begin");

1419 
	`Put
("z", "end");

1420 
	`dbfuÎ
()->
	`TEST_Com·ùMemTabË
();

1421 
	`ASSERT_EQ
(
	`NumTabËFesAtLev–
(
Ï¡
), 1);

1422 
	`ASSERT_EQ
(
	`NumTabËFesAtLev–
(
Ï¡
 - 1), 1);

1424 
	`D–‘e
("foo");

1425 
	`Put
("foo", "v2");

1426 
	`ASSERT_EQ
(
	`AÎEÁr›sFÜ
("foo"), "[ v2, DEL, v1 ]");

1427 
	`ASSERT_LEVELDB_OK
(
	`dbfuÎ
()->
	`TEST_Com·ùMemTabË
());

1428 
	`ASSERT_EQ
(
	`AÎEÁr›sFÜ
("foo"), "[ v2, DEL, v1 ]");

1429 
Sliû
 
	`z
("z");

1430 
	`dbfuÎ
()->
	`TEST_Com·ùRªge
(
Ï¡
 - 2, 
nuÎ±r
, &
z
);

1433 
	`ASSERT_EQ
(
	`AÎEÁr›sFÜ
("foo"), "[ v2, v1 ]");

1434 
	`dbfuÎ
()->
	`TEST_Com·ùRªge
(
Ï¡
 - 1, 
nuÎ±r
,‚ullptr);

1437 
	`ASSERT_EQ
(
	`AÎEÁr›sFÜ
("foo"), "[ v2 ]");

1438 
	}
}

1440 
	$TEST_F
(
DBTe¡
, 
D–‘iÚM¬k”s2
) {

1441 
	`Put
("foo", "v1");

1442 
	`ASSERT_LEVELDB_OK
(
	`dbfuÎ
()->
	`TEST_Com·ùMemTabË
());

1443 cÚ¡ 
Ï¡
 = 
cÚfig
::
kMaxMemCom·ùLev–
;

1444 
	`ASSERT_EQ
(
	`NumTabËFesAtLev–
(
Ï¡
), 1);

1447 
	`Put
("a", "begin");

1448 
	`Put
("z", "end");

1449 
	`dbfuÎ
()->
	`TEST_Com·ùMemTabË
();

1450 
	`ASSERT_EQ
(
	`NumTabËFesAtLev–
(
Ï¡
), 1);

1451 
	`ASSERT_EQ
(
	`NumTabËFesAtLev–
(
Ï¡
 - 1), 1);

1453 
	`D–‘e
("foo");

1454 
	`ASSERT_EQ
(
	`AÎEÁr›sFÜ
("foo"), "[ DEL, v1 ]");

1455 
	`ASSERT_LEVELDB_OK
(
	`dbfuÎ
()->
	`TEST_Com·ùMemTabË
());

1456 
	`ASSERT_EQ
(
	`AÎEÁr›sFÜ
("foo"), "[ DEL, v1 ]");

1457 
	`dbfuÎ
()->
	`TEST_Com·ùRªge
(
Ï¡
 - 2, 
nuÎ±r
,‚ullptr);

1459 
	`ASSERT_EQ
(
	`AÎEÁr›sFÜ
("foo"), "[ DEL, v1 ]");

1460 
	`dbfuÎ
()->
	`TEST_Com·ùRªge
(
Ï¡
 - 1, 
nuÎ±r
,‚ullptr);

1463 
	`ASSERT_EQ
(
	`AÎEÁr›sFÜ
("foo"), "[ ]");

1464 
	}
}

1466 
	$TEST_F
(
DBTe¡
, 
Ov”ÏpInLev–0
) {

1468 
	`ASSERT_EQ
(
cÚfig
::
kMaxMemCom·ùLev–
, 2) << "Fixesto match config";

1472 
	`ASSERT_LEVELDB_OK
(
	`Put
("100", "v100"));

1473 
	`ASSERT_LEVELDB_OK
(
	`Put
("999", "v999"));

1474 
	`dbfuÎ
()->
	`TEST_Com·ùMemTabË
();

1475 
	`ASSERT_LEVELDB_OK
(
	`D–‘e
("100"));

1476 
	`ASSERT_LEVELDB_OK
(
	`D–‘e
("999"));

1477 
	`dbfuÎ
()->
	`TEST_Com·ùMemTabË
();

1478 
	`ASSERT_EQ
("0,1,1", 
	`FesP”Lev–
());

1484 
	`ASSERT_LEVELDB_OK
(
	`Put
("300", "v300"));

1485 
	`ASSERT_LEVELDB_OK
(
	`Put
("500", "v500"));

1486 
	`dbfuÎ
()->
	`TEST_Com·ùMemTabË
();

1487 
	`ASSERT_LEVELDB_OK
(
	`Put
("200", "v200"));

1488 
	`ASSERT_LEVELDB_OK
(
	`Put
("600", "v600"));

1489 
	`ASSERT_LEVELDB_OK
(
	`Put
("900", "v900"));

1490 
	`dbfuÎ
()->
	`TEST_Com·ùMemTabË
();

1491 
	`ASSERT_EQ
("2,1,1", 
	`FesP”Lev–
());

1494 
	`dbfuÎ
()->
	`TEST_Com·ùRªge
(1, 
nuÎ±r
,‚ullptr);

1495 
	`dbfuÎ
()->
	`TEST_Com·ùRªge
(2, 
nuÎ±r
,‚ullptr);

1496 
	`ASSERT_EQ
("2", 
	`FesP”Lev–
());

1501 
	`ASSERT_LEVELDB_OK
(
	`D–‘e
("600"));

1502 
	`dbfuÎ
()->
	`TEST_Com·ùMemTabË
();

1503 
	`ASSERT_EQ
("3", 
	`FesP”Lev–
());

1504 
	`ASSERT_EQ
("NOT_FOUND", 
	`G‘
("600"));

1505 } 
	`ChªgeO±iÚs
());

1506 
	}
}

1508 
	$TEST_F
(
DBTe¡
, 
L0_Com·ùiÚBug_Issue44_a
) {

1509 
	`Reİ’
();

1510 
	`ASSERT_LEVELDB_OK
(
	`Put
("b", "v"));

1511 
	`Reİ’
();

1512 
	`ASSERT_LEVELDB_OK
(
	`D–‘e
("b"));

1513 
	`ASSERT_LEVELDB_OK
(
	`D–‘e
("a"));

1514 
	`Reİ’
();

1515 
	`ASSERT_LEVELDB_OK
(
	`D–‘e
("a"));

1516 
	`Reİ’
();

1517 
	`ASSERT_LEVELDB_OK
(
	`Put
("a", "v"));

1518 
	`Reİ’
();

1519 
	`Reİ’
();

1520 
	`ASSERT_EQ
("×->v)", 
	`CÚ‹Ás
());

1521 
	`D–ayMli£cÚds
(1000);

1522 
	`ASSERT_EQ
("×->v)", 
	`CÚ‹Ás
());

1523 
	}
}

1525 
	$TEST_F
(
DBTe¡
, 
L0_Com·ùiÚBug_Issue44_b
) {

1526 
	`Reİ’
();

1527 
	`Put
("", "");

1528 
	`Reİ’
();

1529 
	`D–‘e
("e");

1530 
	`Put
("", "");

1531 
	`Reİ’
();

1532 
	`Put
("c", "cv");

1533 
	`Reİ’
();

1534 
	`Put
("", "");

1535 
	`Reİ’
();

1536 
	`Put
("", "");

1537 
	`D–ayMli£cÚds
(1000);

1538 
	`Reİ’
();

1539 
	`Put
("d", "dv");

1540 
	`Reİ’
();

1541 
	`Put
("", "");

1542 
	`Reİ’
();

1543 
	`D–‘e
("d");

1544 
	`D–‘e
("b");

1545 
	`Reİ’
();

1546 
	`ASSERT_EQ
("(->)(c->cv)", 
	`CÚ‹Ás
());

1547 
	`D–ayMli£cÚds
(1000);

1548 
	`ASSERT_EQ
("(->)(c->cv)", 
	`CÚ‹Ás
());

1549 
	}
}

1551 
	$TEST_F
(
DBTe¡
, 
Fæush_Issue474
) {

1552 cÚ¡ 
kNum
 = 100000;

1553 
Rªdom
 
	`ºd
(
‹¡
::
	`RªdomS“d
());

1554 
i
 = 0; i < 
kNum
; i++) {

1555 
¡d
::
	`fæush
(
nuÎ±r
);

1556 
	`ASSERT_LEVELDB_OK
(
	`Put
(
	`RªdomKey
(&
ºd
), 
	`RªdomSŒšg
(&rnd, 100)));

1558 
	}
}

1560 
	$TEST_F
(
DBTe¡
, 
Com·¿tÜCheck
) {

1561 şas 
	cNewCom·¿tÜ
 : 
public
 
Com·¿tÜ
 {

1562 
public
:

1563 cÚ¡ * 
	`Name
(ècÚ¡ 
ov”ride
 {  "leveldb.NewComparator"; }

1564 
	`Com·»
(cÚ¡ 
Sliû
& 
a
, cÚ¡ Sliû& 
b
ècÚ¡ 
ov”ride
 {

1565  
	`By‹wi£Com·¿tÜ
()->
	`Com·»
(
a
, 
b
);

1567 
	`FšdShÜ‹¡S•¬©Ü
(
¡d
::
¡ršg
* 
s
, cÚ¡ 
Sliû
& 
l
ècÚ¡ 
ov”ride
 {

1568 
	`By‹wi£Com·¿tÜ
()->
	`FšdShÜ‹¡S•¬©Ü
(
s
, 
l
);

1570 
	`FšdShÜtSucûssÜ
(
¡d
::
¡ršg
* 
key
ècÚ¡ 
ov”ride
 {

1571 
	`By‹wi£Com·¿tÜ
()->
	`FšdShÜtSucûssÜ
(
key
);

1574 
NewCom·¿tÜ
 
cmp
;

1575 
O±iÚs
 
Ãw_İtiÚs
 = 
	`Cu¼’tO±iÚs
();

1576 
Ãw_İtiÚs
.
com·¿tÜ
 = &
cmp
;

1577 
Stus
 
s
 = 
	`TryReİ’
(&
Ãw_İtiÚs
);

1578 
	`ASSERT_TRUE
(!
s
.
	`ok
());

1579 
	`ASSERT_TRUE
(
s
.
	`ToSŒšg
().
	`fšd
("com·¿tÜ"è!ğ
¡d
::
¡ršg
::
Åos
)

1580 << 
s
.
	`ToSŒšg
();

1581 
	}
}

1583 
	$TEST_F
(
DBTe¡
, 
Cu¡omCom·¿tÜ
) {

1584 şas 
	cNumb”Com·¿tÜ
 : 
public
 
Com·¿tÜ
 {

1585 
public
:

1586 cÚ¡ * 
	`Name
(ècÚ¡ 
ov”ride
 {  "test.NumberComparator"; }

1587 
	`Com·»
(cÚ¡ 
Sliû
& 
a
, cÚ¡ Sliû& 
b
ècÚ¡ 
ov”ride
 {

1588  
	`ToNumb”
(
a
è- ToNumb”(
b
);

1590 
	`FšdShÜ‹¡S•¬©Ü
(
¡d
::
¡ršg
* 
s
, cÚ¡ 
Sliû
& 
l
ècÚ¡ 
ov”ride
 {

1591 
	`ToNumb”
(*
s
);

1592 
	`ToNumb”
(
l
);

1594 
	`FšdShÜtSucûssÜ
(
¡d
::
¡ršg
* 
key
ècÚ¡ 
ov”ride
 {

1595 
	`ToNumb”
(*
key
);

1598 
´iv©e
:

1599 
	`ToNumb”
(cÚ¡ 
Sliû
& 
x
) {

1601 
	`EXPECT_TRUE
(
x
.
	`size
() >= 2 && x[0] == '[' && x[x.size() - 1] == ']')

1602 << 
	`Esÿ³SŒšg
(
x
);

1603 
v®
;

1604 
ignÜed
;

1605 
	`EXPECT_TRUE
(
	`ssÿnf
(
x
.
	`ToSŒšg
().
	`c_¡r
(), "[%i]%c", &
v®
, &
ignÜed
) == 1)

1606 << 
	`Esÿ³SŒšg
(
x
);

1607  
v®
;

1610 
Numb”Com·¿tÜ
 
cmp
;

1611 
O±iÚs
 
Ãw_İtiÚs
 = 
	`Cu¼’tO±iÚs
();

1612 
Ãw_İtiÚs
.
ü—‹_if_missšg
 = 
Œue
;

1613 
Ãw_İtiÚs
.
com·¿tÜ
 = &
cmp
;

1614 
Ãw_İtiÚs
.
f‹r_pŞicy
 = 
nuÎ±r
;

1615 
Ãw_İtiÚs
.
wr™e_bufãr_size
 = 1000;

1616 
	`De¡royAndReİ’
(&
Ãw_İtiÚs
);

1617 
	`ASSERT_LEVELDB_OK
(
	`Put
("[10]", "ten"));

1618 
	`ASSERT_LEVELDB_OK
(
	`Put
("[0x14]", "twenty"));

1619 
i
 = 0; i < 2; i++) {

1620 
	`ASSERT_EQ
("‹n", 
	`G‘
("[10]"));

1621 
	`ASSERT_EQ
("‹n", 
	`G‘
("[0xa]"));

1622 
	`ASSERT_EQ
("tw’ty", 
	`G‘
("[20]"));

1623 
	`ASSERT_EQ
("tw’ty", 
	`G‘
("[0x14]"));

1624 
	`ASSERT_EQ
("NOT_FOUND", 
	`G‘
("[15]"));

1625 
	`ASSERT_EQ
("NOT_FOUND", 
	`G‘
("[0xf]"));

1626 
	`Com·ù
("[0]", "[9999]");

1629 
run
 = 0;„un < 2;„un++) {

1630 
i
 = 0; i < 1000; i++) {

1631 
buf
[100];

1632 
¡d
::
	`¢´štf
(
buf
, (buf), "[%d]", 
i
 * 10);

1633 
	`ASSERT_LEVELDB_OK
(
	`Put
(
buf
, buf));

1635 
	`Com·ù
("[0]", "[1000000]");

1637 
	}
}

1639 
	$TEST_F
(
DBTe¡
, 
Mªu®Com·ùiÚ
) {

1640 
	`ASSERT_EQ
(
cÚfig
::
kMaxMemCom·ùLev–
, 2)

1643 
	`MakeTabËs
(3, "p", "q");

1644 
	`ASSERT_EQ
("1,1,1", 
	`FesP”Lev–
());

1647 
	`Com·ù
("", "c");

1648 
	`ASSERT_EQ
("1,1,1", 
	`FesP”Lev–
());

1651 
	`Com·ù
("r", "z");

1652 
	`ASSERT_EQ
("1,1,1", 
	`FesP”Lev–
());

1655 
	`Com·ù
("p1", "p9");

1656 
	`ASSERT_EQ
("0,0,1", 
	`FesP”Lev–
());

1659 
	`MakeTabËs
(3, "c", "e");

1660 
	`ASSERT_EQ
("1,1,2", 
	`FesP”Lev–
());

1663 
	`Com·ù
("b", "f");

1664 
	`ASSERT_EQ
("0,0,2", 
	`FesP”Lev–
());

1667 
	`MakeTabËs
(1, "a", "z");

1668 
	`ASSERT_EQ
("0,1,2", 
	`FesP”Lev–
());

1669 
db_
->
	`Com·ùRªge
(
nuÎ±r
,‚ullptr);

1670 
	`ASSERT_EQ
("0,0,1", 
	`FesP”Lev–
());

1671 
	}
}

1673 
	$TEST_F
(
DBTe¡
, 
DBO³n_O±iÚs
) {

1674 
¡d
::
¡ršg
 
dbÇme
 = 
‹¡šg
::
	`TempDœ
() + "db_options_test";

1675 
	`De¡royDB
(
dbÇme
, 
	`O±iÚs
());

1678 
DB
* 
db
 = 
nuÎ±r
;

1679 
O±iÚs
 
İts
;

1680 
İts
.
ü—‹_if_missšg
 = 
çl£
;

1681 
Stus
 
s
 = 
DB
::
	`O³n
(
İts
, 
dbÇme
, &
db
);

1682 
	`ASSERT_TRUE
(
	`¡r¡r
(
s
.
	`ToSŒšg
().
	`c_¡r
(), "dÛ nÙƒxi¡"è!ğ
nuÎ±r
);

1683 
	`ASSERT_TRUE
(
db
 =ğ
nuÎ±r
);

1686 
İts
.
ü—‹_if_missšg
 = 
Œue
;

1687 
s
 = 
DB
::
	`O³n
(
İts
, 
dbÇme
, &
db
);

1688 
	`ASSERT_LEVELDB_OK
(
s
);

1689 
	`ASSERT_TRUE
(
db
 !ğ
nuÎ±r
);

1691 
d–‘e
 
db
;

1692 
db
 = 
nuÎ±r
;

1695 
İts
.
ü—‹_if_missšg
 = 
çl£
;

1696 
İts
.
”rÜ_if_exi¡s
 = 
Œue
;

1697 
s
 = 
DB
::
	`O³n
(
İts
, 
dbÇme
, &
db
);

1698 
	`ASSERT_TRUE
(
	`¡r¡r
(
s
.
	`ToSŒšg
().
	`c_¡r
(), "exi¡s"è!ğ
nuÎ±r
);

1699 
	`ASSERT_TRUE
(
db
 =ğ
nuÎ±r
);

1702 
İts
.
ü—‹_if_missšg
 = 
Œue
;

1703 
İts
.
”rÜ_if_exi¡s
 = 
çl£
;

1704 
s
 = 
DB
::
	`O³n
(
İts
, 
dbÇme
, &
db
);

1705 
	`ASSERT_LEVELDB_OK
(
s
);

1706 
	`ASSERT_TRUE
(
db
 !ğ
nuÎ±r
);

1708 
d–‘e
 
db
;

1709 
db
 = 
nuÎ±r
;

1710 
	}
}

1712 
	$TEST_F
(
DBTe¡
, 
De¡royEm±yDœ
) {

1713 
¡d
::
¡ršg
 
dbÇme
 = 
‹¡šg
::
	`TempDœ
() + "db_empty_dir";

1714 
Te¡Env
 
	`’v
(
Env
::
	`DeçuÉ
());

1715 
’v
.
	`RemoveDœ
(
dbÇme
);

1716 
	`ASSERT_TRUE
(!
’v
.
	`FeExi¡s
(
dbÇme
));

1718 
O±iÚs
 
İts
;

1719 
İts
.
’v
 = &env;

1721 
	`ASSERT_LEVELDB_OK
(
’v
.
	`C»©eDœ
(
dbÇme
));

1722 
	`ASSERT_TRUE
(
’v
.
	`FeExi¡s
(
dbÇme
));

1723 
¡d
::
veùÜ
<¡d::
¡ršg
> 
chd»n
;

1724 
	`ASSERT_LEVELDB_OK
(
’v
.
	`G‘Chd»n
(
dbÇme
, &
chd»n
));

1725 #ià
	`defšed
(
LEVELDB_PLATFORM_CHROMIUM
)

1728 
	`ASSERT_EQ
(0, 
chd»n
.
	`size
());

1731 
	`ASSERT_EQ
(2, 
chd»n
.
	`size
());

1733 
	`ASSERT_LEVELDB_OK
(
	`De¡royDB
(
dbÇme
, 
İts
));

1734 
	`ASSERT_TRUE
(!
’v
.
	`FeExi¡s
(
dbÇme
));

1737 
’v
.
	`S‘IgnÜeDÙFes
(
Œue
);

1738 
	`ASSERT_LEVELDB_OK
(
’v
.
	`C»©eDœ
(
dbÇme
));

1739 
	`ASSERT_TRUE
(
’v
.
	`FeExi¡s
(
dbÇme
));

1740 
	`ASSERT_LEVELDB_OK
(
’v
.
	`G‘Chd»n
(
dbÇme
, &
chd»n
));

1741 
	`ASSERT_EQ
(0, 
chd»n
.
	`size
());

1742 
	`ASSERT_LEVELDB_OK
(
	`De¡royDB
(
dbÇme
, 
İts
));

1743 
	`ASSERT_TRUE
(!
’v
.
	`FeExi¡s
(
dbÇme
));

1744 
	}
}

1746 
	$TEST_F
(
DBTe¡
, 
De¡royO³nDB
) {

1747 
¡d
::
¡ršg
 
dbÇme
 = 
‹¡šg
::
	`TempDœ
() + "open_db_dir";

1748 
’v_
->
	`RemoveDœ
(
dbÇme
);

1749 
	`ASSERT_TRUE
(!
’v_
->
	`FeExi¡s
(
dbÇme
));

1751 
O±iÚs
 
İts
;

1752 
İts
.
ü—‹_if_missšg
 = 
Œue
;

1753 
DB
* 
db
 = 
nuÎ±r
;

1754 
	`ASSERT_LEVELDB_OK
(
DB
::
	`O³n
(
İts
, 
dbÇme
, &
db
));

1755 
	`ASSERT_TRUE
(
db
 !ğ
nuÎ±r
);

1758 
	`ASSERT_TRUE
(
’v_
->
	`FeExi¡s
(
dbÇme
));

1759 
	`ASSERT_TRUE
(!
	`De¡royDB
(
dbÇme
, 
	`O±iÚs
()).
	`ok
());

1760 
	`ASSERT_TRUE
(
’v_
->
	`FeExi¡s
(
dbÇme
));

1762 
d–‘e
 
db
;

1763 
db
 = 
nuÎ±r
;

1766 
	`ASSERT_LEVELDB_OK
(
	`De¡royDB
(
dbÇme
, 
	`O±iÚs
()));

1767 
	`ASSERT_TRUE
(!
’v_
->
	`FeExi¡s
(
dbÇme
));

1768 
	}
}

1770 
	$TEST_F
(
DBTe¡
, 
Lockšg
) {

1771 
DB
* 
db2
 = 
nuÎ±r
;

1772 
Stus
 
s
 = 
DB
::
	`O³n
(
	`Cu¼’tO±iÚs
(), 
dbÇme_
, &
db2
);

1773 
	`ASSERT_TRUE
(!
s
.
	`ok
()) << "Locking did‚ot…revent„e-opening db";

1774 
	}
}

1777 
	$TEST_F
(
DBTe¡
, 
NoS·û
) {

1778 
O±iÚs
 
İtiÚs
 = 
	`Cu¼’tO±iÚs
();

1779 
İtiÚs
.
’v
 = 
’v_
;

1780 
	`Reİ’
(&
İtiÚs
);

1782 
	`ASSERT_LEVELDB_OK
(
	`Put
("foo", "v1"));

1783 
	`ASSERT_EQ
("v1", 
	`G‘
("foo"));

1784 
	`Com·ù
("a", "z");

1785 cÚ¡ 
num_fes
 = 
	`CouÁFes
();

1787 
’v_
->
no_¥aû_
.
	`¡Üe
(
Œue
, 
¡d
::
memÜy_Üd”_»Ëa£
);

1788 
i
 = 0; i < 10; i++) {

1789 
Ëv–
 = 0;†ev– < 
cÚfig
::
kNumLev–s
 - 1;†evel++) {

1790 
	`dbfuÎ
()->
	`TEST_Com·ùRªge
(
Ëv–
, 
nuÎ±r
,‚ullptr);

1793 
’v_
->
no_¥aû_
.
	`¡Üe
(
çl£
, 
¡d
::
memÜy_Üd”_»Ëa£
);

1794 
	`ASSERT_LT
(
	`CouÁFes
(), 
num_fes
 + 3);

1795 
	}
}

1797 
	$TEST_F
(
DBTe¡
, 
NÚWr™abËFeSy¡em
) {

1798 
O±iÚs
 
İtiÚs
 = 
	`Cu¼’tO±iÚs
();

1799 
İtiÚs
.
wr™e_bufãr_size
 = 1000;

1800 
İtiÚs
.
’v
 = 
’v_
;

1801 
	`Reİ’
(&
İtiÚs
);

1802 
	`ASSERT_LEVELDB_OK
(
	`Put
("foo", "v1"));

1804 
’v_
->
nÚ_wr™abË_
.
	`¡Üe
(
Œue
, 
¡d
::
memÜy_Üd”_»Ëa£
);

1805 
¡d
::
¡ršg
 
	`big
(100000, 'x');

1806 
”rÜs
 = 0;

1807 
i
 = 0; i < 20; i++) {

1808 
¡d
::
	`årštf
(
¡d”r
, "™” %d;ƒ¼Ü %d\n", 
i
, 
”rÜs
);

1809 ià(!
	`Put
("foo", 
big
).
	`ok
()) {

1810 
”rÜs
++;

1811 
	`D–ayMli£cÚds
(100);

1814 
	`ASSERT_GT
(
”rÜs
, 0);

1815 
’v_
->
nÚ_wr™abË_
.
	`¡Üe
(
çl£
, 
¡d
::
memÜy_Üd”_»Ëa£
);

1816 
	}
}

1818 
	$TEST_F
(
DBTe¡
, 
Wr™eSyncE¼Ü
) {

1822 
O±iÚs
 
İtiÚs
 = 
	`Cu¼’tO±iÚs
();

1823 
İtiÚs
.
’v
 = 
’v_
;

1824 
	`Reİ’
(&
İtiÚs
);

1825 
’v_
->
d©a_sync_”rÜ_
.
	`¡Üe
(
Œue
, 
¡d
::
memÜy_Üd”_»Ëa£
);

1828 
Wr™eO±iÚs
 
w
;

1829 
	`ASSERT_LEVELDB_OK
(
db_
->
	`Put
(
w
, "k1", "v1"));

1830 
	`ASSERT_EQ
("v1", 
	`G‘
("k1"));

1833 
w
.
sync
 = 
Œue
;

1834 
	`ASSERT_TRUE
(!
db_
->
	`Put
(
w
, "k2", "v2").
	`ok
());

1835 
	`ASSERT_EQ
("v1", 
	`G‘
("k1"));

1836 
	`ASSERT_EQ
("NOT_FOUND", 
	`G‘
("k2"));

1839 
’v_
->
d©a_sync_”rÜ_
.
	`¡Üe
(
çl£
, 
¡d
::
memÜy_Üd”_»Ëa£
);

1842 
w
.
sync
 = 
çl£
;

1843 
	`ASSERT_TRUE
(!
db_
->
	`Put
(
w
, "k3", "v3").
	`ok
());

1844 
	`ASSERT_EQ
("v1", 
	`G‘
("k1"));

1845 
	`ASSERT_EQ
("NOT_FOUND", 
	`G‘
("k2"));

1846 
	`ASSERT_EQ
("NOT_FOUND", 
	`G‘
("k3"));

1847 
	}
}

1849 
	$TEST_F
(
DBTe¡
, 
Mªiã¡Wr™eE¼Ü
) {

1858 
™”
 = 0; iter < 2; iter++) {

1859 
¡d
::
©omic
<
boŞ
>* 
”rÜ_ty³
 = (
™”
 =ğ0è? &
’v_
->
mªiã¡_sync_”rÜ_


1860 : &
’v_
->
mªiã¡_wr™e_”rÜ_
;

1863 
O±iÚs
 
İtiÚs
 = 
	`Cu¼’tO±iÚs
();

1864 
İtiÚs
.
’v
 = 
’v_
;

1865 
İtiÚs
.
ü—‹_if_missšg
 = 
Œue
;

1866 
İtiÚs
.
”rÜ_if_exi¡s
 = 
çl£
;

1867 
	`De¡royAndReİ’
(&
İtiÚs
);

1868 
	`ASSERT_LEVELDB_OK
(
	`Put
("foo", "bar"));

1869 
	`ASSERT_EQ
("b¬", 
	`G‘
("foo"));

1872 
	`dbfuÎ
()->
	`TEST_Com·ùMemTabË
();

1873 
	`ASSERT_EQ
("b¬", 
	`G‘
("foo"));

1874 cÚ¡ 
Ï¡
 = 
cÚfig
::
kMaxMemCom·ùLev–
;

1875 
	`ASSERT_EQ
(
	`NumTabËFesAtLev–
(
Ï¡
), 1);

1878 
”rÜ_ty³
->
	`¡Üe
(
Œue
, 
¡d
::
memÜy_Üd”_»Ëa£
);

1879 
	`dbfuÎ
()->
	`TEST_Com·ùRªge
(
Ï¡
, 
nuÎ±r
,‚ullptr);

1880 
	`ASSERT_EQ
("b¬", 
	`G‘
("foo"));

1883 
”rÜ_ty³
->
	`¡Üe
(
çl£
, 
¡d
::
memÜy_Üd”_»Ëa£
);

1884 
	`Reİ’
(&
İtiÚs
);

1885 
	`ASSERT_EQ
("b¬", 
	`G‘
("foo"));

1887 
	}
}

1889 
	$TEST_F
(
DBTe¡
, 
MissšgSSTFe
) {

1890 
	`ASSERT_LEVELDB_OK
(
	`Put
("foo", "bar"));

1891 
	`ASSERT_EQ
("b¬", 
	`G‘
("foo"));

1894 
	`dbfuÎ
()->
	`TEST_Com·ùMemTabË
();

1895 
	`ASSERT_EQ
("b¬", 
	`G‘
("foo"));

1897 
	`Clo£
();

1898 
	`ASSERT_TRUE
(
	`D–‘eAnSSTFe
());

1899 
O±iÚs
 
İtiÚs
 = 
	`Cu¼’tO±iÚs
();

1900 
İtiÚs
.
·¿noid_checks
 = 
Œue
;

1901 
Stus
 
s
 = 
	`TryReİ’
(&
İtiÚs
);

1902 
	`ASSERT_TRUE
(!
s
.
	`ok
());

1903 
	`ASSERT_TRUE
(
s
.
	`ToSŒšg
().
	`fšd
("issšg"è!ğ
¡d
::
¡ršg
::
Åos
) << s.ToString();

1904 
	}
}

1906 
	$TEST_F
(
DBTe¡
, 
StlR—dSST
) {

1907 
	`ASSERT_LEVELDB_OK
(
	`Put
("foo", "bar"));

1908 
	`ASSERT_EQ
("b¬", 
	`G‘
("foo"));

1911 
	`dbfuÎ
()->
	`TEST_Com·ùMemTabË
();

1912 
	`ASSERT_EQ
("b¬", 
	`G‘
("foo"));

1913 
	`Clo£
();

1914 
	`ASSERT_GT
(
	`R’ameLDBToSST
(), 0);

1915 
O±iÚs
 
İtiÚs
 = 
	`Cu¼’tO±iÚs
();

1916 
İtiÚs
.
·¿noid_checks
 = 
Œue
;

1917 
Stus
 
s
 = 
	`TryReİ’
(&
İtiÚs
);

1918 
	`ASSERT_TRUE
(
s
.
	`ok
());

1919 
	`ASSERT_EQ
("b¬", 
	`G‘
("foo"));

1920 
	}
}

1922 
	$TEST_F
(
DBTe¡
, 
FesD–‘edAá”Com·ùiÚ
) {

1923 
	`ASSERT_LEVELDB_OK
(
	`Put
("foo", "v2"));

1924 
	`Com·ù
("a", "z");

1925 cÚ¡ 
num_fes
 = 
	`CouÁFes
();

1926 
i
 = 0; i < 10; i++) {

1927 
	`ASSERT_LEVELDB_OK
(
	`Put
("foo", "v2"));

1928 
	`Com·ù
("a", "z");

1930 
	`ASSERT_EQ
(
	`CouÁFes
(), 
num_fes
);

1931 
	}
}

1933 
	$TEST_F
(
DBTe¡
, 
BloomF‹r
) {

1934 
’v_
->
couÁ_¿ndom_»ads_
 = 
Œue
;

1935 
O±iÚs
 
İtiÚs
 = 
	`Cu¼’tO±iÚs
();

1936 
İtiÚs
.
’v
 = 
’v_
;

1937 
İtiÚs
.
block_ÿche
 = 
	`NewLRUCache
(0);

1938 
İtiÚs
.
f‹r_pŞicy
 = 
	`NewBloomF‹rPŞicy
(10);

1939 
	`Reİ’
(&
İtiÚs
);

1942 cÚ¡ 
N
 = 10000;

1943 
i
 = 0; i < 
N
; i++) {

1944 
	`ASSERT_LEVELDB_OK
(
	`Put
(
	`Key
(
i
), Key(i)));

1946 
	`Com·ù
("a", "z");

1947 
i
 = 0; i < 
N
; i += 100) {

1948 
	`ASSERT_LEVELDB_OK
(
	`Put
(
	`Key
(
i
), Key(i)));

1950 
	`dbfuÎ
()->
	`TEST_Com·ùMemTabË
();

1953 
’v_
->
d–ay_d©a_sync_
.
	`¡Üe
(
Œue
, 
¡d
::
memÜy_Üd”_»Ëa£
);

1956 
’v_
->
¿ndom_»ad_couÁ”_
.
	`Re£t
();

1957 
i
 = 0; i < 
N
; i++) {

1958 
	`ASSERT_EQ
(
	`Key
(
i
), 
	`G‘
(Key(i)));

1960 
»ads
 = 
’v_
->
¿ndom_»ad_couÁ”_
.
	`R—d
();

1961 
¡d
::
	`årštf
(
¡d”r
, "%d…»£Á => %d„—ds\n", 
N
, 
»ads
);

1962 
	`ASSERT_GE
(
»ads
, 
N
);

1963 
	`ASSERT_LE
(
»ads
, 
N
 + 2 * N / 100);

1966 
’v_
->
¿ndom_»ad_couÁ”_
.
	`Re£t
();

1967 
i
 = 0; i < 
N
; i++) {

1968 
	`ASSERT_EQ
("NOT_FOUND", 
	`G‘
(
	`Key
(
i
) + ".missing"));

1970 
»ads
 = 
’v_
->
¿ndom_»ad_couÁ”_
.
	`R—d
();

1971 
¡d
::
	`årštf
(
¡d”r
, "%d missšg => %d„—ds\n", 
N
, 
»ads
);

1972 
	`ASSERT_LE
(
»ads
, 3 * 
N
 / 100);

1974 
’v_
->
d–ay_d©a_sync_
.
	`¡Üe
(
çl£
, 
¡d
::
memÜy_Üd”_»Ëa£
);

1975 
	`Clo£
();

1976 
d–‘e
 
İtiÚs
.
block_ÿche
;

1977 
d–‘e
 
İtiÚs
.
f‹r_pŞicy
;

1978 
	}
}

1980 
	$TEST_F
(
DBTe¡
, 
LogClo£E¼Ü
) {

1983 cÚ¡ 
kV®ueSize
 = 20000;

1984 cÚ¡ 
kWr™eCouÁ
 = 10;

1985 cÚ¡ 
kWr™eBufãrSize
 = (
kV®ueSize
 * 
kWr™eCouÁ
) / 2;

1987 
O±iÚs
 
İtiÚs
 = 
	`Cu¼’tO±iÚs
();

1988 
İtiÚs
.
’v
 = 
’v_
;

1989 
İtiÚs
.
wr™e_bufãr_size
 = 
kWr™eBufãrSize
;

1990 
	`Reİ’
(&
İtiÚs
);

1991 
’v_
->
log_fe_şo£_
.
	`¡Üe
(
Œue
, 
¡d
::
memÜy_Üd”_»Ëa£
);

1993 
¡d
::
¡ršg
 
	`v®ue
(
kV®ueSize
, 'x');

1994 
Stus
 
s
;

1995 
i
 = 0; i < 
kWr™eCouÁ
 && 
s
.
	`ok
(); i++) {

1996 
s
 = 
	`Put
(
	`Key
(
i
), 
v®ue
);

1998 
	`ASSERT_TRUE
(!
s
.
	`ok
()) << "succeededƒven‡fter†og file Close failure";

2001 
s
 = 
	`Put
("hello", "world");

2002 
	`ASSERT_TRUE
(!
s
.
	`ok
()) << "write succeeded‡fter†og file Close failure";

2004 
’v_
->
log_fe_şo£_
.
	`¡Üe
(
çl£
, 
¡d
::
memÜy_Üd”_»Ëa£
);

2005 
	}
}

2008 
	gÇme¥aû
 {

2010 cÚ¡ 
	gkNumTh»ads
 = 4;

2011 cÚ¡ 
	gkTe¡SecÚds
 = 10;

2012 cÚ¡ 
	gkNumKeys
 = 1000;

2014 
	sMTS‹
 {

2015 
DBTe¡
* 
	g‹¡
;

2016 
	g¡d
::
©omic
<
boŞ
> 
¡İ
;

2017 
	g¡d
::
©omic
<> 
couÁ”
[
kNumTh»ads
];

2018 
	g¡d
::
©omic
<
boŞ
> 
th»ad_dÚe
[
kNumTh»ads
];

2021 
	sMTTh»ad
 {

2022 
MTS‹
* 
	g¡©e
;

2023 
	gid
;

2026 
MTTh»adBody
(* 
¬g
) {

2027 
MTTh»ad
* 
	gt
 = 
»š‹½»t_ÿ¡
<MTTh»ad*>(
¬g
);

2028 
	gid
 = 
t
->
id
;

2029 
DB
* 
	gdb
 = 
t
->
¡©e
->
‹¡
->
db_
;

2030 
	gcouÁ”
 = 0;

2031 
	g¡d
::
årštf
(
¡d”r
, "... s¹šgh»ad %d\n", 
id
);

2032 
Rªdom
 
ºd
(1000 + 
id
);

2033 
	g¡d
::
¡ršg
 
v®ue
;

2034 
	gv®buf
[1500];

2035 !
	gt
->
	g¡©e
->
	g¡İ
.
lßd
(
¡d
::
memÜy_Üd”_acquœe
)) {

2036 
t
->
¡©e
->
couÁ”
[
id
].
¡Üe
(couÁ”, 
¡d
::
memÜy_Üd”_»Ëa£
);

2038 
	gkey
 = 
ºd
.
UnifÜm
(
kNumKeys
);

2039 
	gkeybuf
[20];

2040 
	g¡d
::
¢´štf
(
keybuf
, (keybuf), "%016d", 
key
);

2042 ià(
	gºd
.
OÃIn
(2)) {

2045 
	g¡d
::
¢´štf
(
v®buf
, (v®buf), "%d.%d.%-1000d", 
key
, 
id
,

2046 
¡©ic_ÿ¡
<>(
couÁ”
));

2047 
ASSERT_LEVELDB_OK
(
db
->
Put
(
Wr™eO±iÚs
(), 
Sliû
(
keybuf
), Sliû(
v®buf
)));

2050 
Stus
 
	gs
 = 
db
->
G‘
(
R—dO±iÚs
(), 
Sliû
(
keybuf
), &
v®ue
);

2051 ià(
	gs
.
IsNÙFound
()) {

2055 
ASSERT_LEVELDB_OK
(
s
);

2056 
	gk
, 
	gw
, 
	gc
;

2057 
ASSERT_EQ
(3, 
ssÿnf
(
v®ue
.
c_¡r
(), "%d.%d.%d", &
k
, &
w
, &
c
)è<< 
	gv®ue
;

2058 
ASSERT_EQ
(
k
, 
key
);

2059 
ASSERT_GE
(
w
, 0);

2060 
ASSERT_LT
(
w
, 
kNumTh»ads
);

2061 
ASSERT_LE
(
c
, 
t
->
¡©e
->
couÁ”
[
w
].
lßd
(
¡d
::
memÜy_Üd”_acquœe
));

2064 
	gcouÁ”
++;

2066 
	gt
->
	g¡©e
->
	gth»ad_dÚe
[
id
].
¡Üe
(
Œue
, 
¡d
::
memÜy_Üd”_»Ëa£
);

2067 
	g¡d
::
årštf
(
¡d”r
, "... stİpšgh»ad %d‡á” %d ops\n", 
id
, 
couÁ”
);

2072 
	$TEST_F
(
DBTe¡
, 
MuÉiTh»aded
) {

2075 
MTS‹
 
mt
;

2076 
mt
.
‹¡
 = 
this
;

2077 
mt
.
¡İ
.
	`¡Üe
(
çl£
, 
¡d
::
memÜy_Üd”_»Ëa£
);

2078 
id
 = 0; id < 
kNumTh»ads
; id++) {

2079 
mt
.
couÁ”
[
id
].
	`¡Üe
(
çl£
, 
¡d
::
memÜy_Üd”_»Ëa£
);

2080 
mt
.
th»ad_dÚe
[
id
].
	`¡Üe
(
çl£
, 
¡d
::
memÜy_Üd”_»Ëa£
);

2084 
MTTh»ad
 
th»ad
[
kNumTh»ads
];

2085 
id
 = 0; id < 
kNumTh»ads
; id++) {

2086 
th»ad
[
id
].
¡©e
 = &
mt
;

2087 
th»ad
[
id
].id = id;

2088 
’v_
->
	`S¹Th»ad
(
MTTh»adBody
, &
th»ad
[
id
]);

2092 
	`D–ayMli£cÚds
(
kTe¡SecÚds
 * 1000);

2095 
mt
.
¡İ
.
	`¡Üe
(
Œue
, 
¡d
::
memÜy_Üd”_»Ëa£
);

2096 
id
 = 0; id < 
kNumTh»ads
; id++) {

2097 !
mt
.
th»ad_dÚe
[
id
].
	`lßd
(
¡d
::
memÜy_Üd”_acquœe
)) {

2098 
	`D–ayMli£cÚds
(100);

2101 } 
	`ChªgeO±iÚs
());

2102 
	}
}

2104 
	gÇme¥aû
 {

2105 
	g¡d
::
	tm­
<
	t¡d
::
	t¡ršg
, std::¡ršg> 
	tKVM­
;

2108 şas 
	cMod–DB
 : 
public
 
DB
 {

2109 
public
:

2110 şas 
	cMod–SÇpshÙ
 : 
public
 
SÇpshÙ
 {

2111 
public
:

2112 
KVM­
 
m­_
;

2115 
ex¶ic™
 
Mod–DB
(cÚ¡ 
O±iÚs
& 
İtiÚs
è: 
İtiÚs_
(options) {}

2116 ~
Mod–DB
(è
ov”ride
 = ;

2117 
Stus
 
Put
(cÚ¡ 
Wr™eO±iÚs
& 
o
, cÚ¡ 
Sliû
& 
k
, cÚ¡ Sliû& 
v
è
	gov”ride
 {

2118  
	gDB
::
Put
(
o
, 
k
, 
v
);

2120 
Stus
 
D–‘e
(cÚ¡ 
Wr™eO±iÚs
& 
o
, cÚ¡ 
Sliû
& 
key
è
	gov”ride
 {

2121  
	gDB
::
D–‘e
(
o
, 
key
);

2123 
Stus
 
G‘
(cÚ¡ 
R—dO±iÚs
& 
İtiÚs
, cÚ¡ 
Sliû
& 
key
,

2124 
¡d
::
¡ršg
* 
v®ue
è
ov”ride
 {

2125 
as£¹
(
çl£
);

2126  
	gStus
::
NÙFound
(
key
);

2128 
I‹¿tÜ
* 
NewI‹¿tÜ
(cÚ¡ 
R—dO±iÚs
& 
İtiÚs
è
	gov”ride
 {

2129 ià(
	gİtiÚs
.
	g¢­shÙ
 =ğ
nuÎ±r
) {

2130 
KVM­
* 
§ved
 = 
Ãw
 KVMap;

2131 *
	g§ved
 = 
m­_
;

2132  
Ãw
 
Mod–I‹r
(
§ved
, 
Œue
);

2134 cÚ¡ 
KVM­
* 
	g¢­shÙ_¡©e
 =

2135 &(
»š‹½»t_ÿ¡
<cÚ¡ 
Mod–SÇpshÙ
*>(
İtiÚs
.
¢­shÙ
)->
m­_
);

2136  
Ãw
 
Mod–I‹r
(
¢­shÙ_¡©e
, 
çl£
);

2139 cÚ¡ 
SÇpshÙ
* 
G‘SÇpshÙ
(è
	gov”ride
 {

2140 
Mod–SÇpshÙ
* 
	g¢­shÙ
 = 
Ãw
 ModelSnapshot;

2141 
	g¢­shÙ
->
	gm­_
 = 
m­_
;

2142  
	g¢­shÙ
;

2145 
R–—£SÇpshÙ
(cÚ¡ 
SÇpshÙ
* 
¢­shÙ
è
	gov”ride
 {

2146 
d–‘e
 
	g»š‹½»t_ÿ¡
<cÚ¡ 
	gMod–SÇpshÙ
*>(
	g¢­shÙ
);

2148 
Stus
 
Wr™e
(cÚ¡ 
Wr™eO±iÚs
& 
İtiÚs
, 
Wr™eB©ch
* 
b©ch
è
	gov”ride
 {

2149 şas 
	cHªdËr
 : 
public
 
Wr™eB©ch
::
HªdËr
 {

2150 
public
:

2151 
KVM­
* 
m­_
;

2152 
Put
(cÚ¡ 
Sliû
& 
key
, cÚ¡ Sliû& 
v®ue
è
	gov”ride
 {

2153 (*
	gm­_
)[
key
.
ToSŒšg
()] = 
v®ue
.ToString();

2155 
D–‘e
(cÚ¡ 
Sliû
& 
key
è
	gov”ride
 { 
	gm­_
->
”a£
(key.
ToSŒšg
()); }

2157 
HªdËr
 
	ghªdËr
;

2158 
	ghªdËr
.
	gm­_
 = &
m­_
;

2159  
	gb©ch
->
I‹¿‹
(&
hªdËr
);

2162 
boŞ
 
G‘Prİ”ty
(cÚ¡ 
Sliû
& 
´İ”ty
, 
¡d
::
¡ršg
* 
v®ue
è
ov”ride
 {

2163  
çl£
;

2165 
G‘Aµroxim©eSizes
(cÚ¡ 
Rªge
* 
r
, 
n
, 
ušt64_t
* 
sizes
è
	gov”ride
 {

2166 
	gi
 = 0; i < 
	gn
; i++) {

2167 
	gsizes
[
i
] = 0;

2170 
Com·ùRªge
(cÚ¡ 
Sliû
* 
¡¬t
, cÚ¡ Sliû* 
’d
è
	gov”ride
 {}

2172 
	g´iv©e
:

2173 şas 
	cMod–I‹r
 : 
public
 
I‹¿tÜ
 {

2174 
public
:

2175 
Mod–I‹r
(cÚ¡ 
KVM­
* 
m­
, 
boŞ
 
owÃd
)

2176 : 
m­_
(
m­
), 
owÃd_
(
owÃd
), 
™”_
(m­_->
’d
()) {}

2177 ~
Mod–I‹r
(è
	gov”ride
 {

2178 ià(
	gowÃd_
è
d–‘e
 
	gm­_
;

2180 
boŞ
 
V®id
(ècÚ¡ 
	gov”ride
 {  
	g™”_
 !ğ
m­_
->
’d
(); }

2181 
S“kToFœ¡
(è
	gov”ride
 { 
	g™”_
 = 
m­_
->
begš
(); }

2182 
S“kToLa¡
(è
	gov”ride
 {

2183 ià(
	gm­_
->
em±y
()) {

2184 
	g™”_
 = 
m­_
->
’d
();

2186 
	g™”_
 = 
m­_
->
fšd
(m­_->
rbegš
()->
fœ¡
);

2189 
S“k
(cÚ¡ 
Sliû
& 
k
è
	gov”ride
 {

2190 
	g™”_
 = 
m­_
->
low”_bound
(
k
.
ToSŒšg
());

2192 
Next
(è
	gov”ride
 { ++
	g™”_
; }

2193 
P»v
(è
	gov”ride
 { --
	g™”_
; }

2194 
Sliû
 
key
(ècÚ¡ 
	gov”ride
 {  
	g™”_
->
	gfœ¡
; }

2195 
Sliû
 
v®ue
(ècÚ¡ 
	gov”ride
 {  
	g™”_
->
	g£cÚd
; }

2196 
Stus
 
¡©us
(ècÚ¡ 
	gov”ride
 {  
	gStus
::
OK
(); }

2198 
	g´iv©e
:

2199 cÚ¡ 
KVM­
* cÚ¡ 
m­_
;

2200 cÚ¡ 
boŞ
 
	gowÃd_
;

2201 
	gKVM­
::
cÚ¡_™”©Ü
 
™”_
;

2203 cÚ¡ 
O±iÚs
 
	gİtiÚs_
;

2204 
KVM­
 
	gm­_
;

2207 
boŞ
 
	$Com·»I‹¿tÜs
(
¡•
, 
DB
* 
mod–
, DB* 
db
,

2208 cÚ¡ 
SÇpshÙ
* 
mod–_¢­
,

2209 cÚ¡ 
SÇpshÙ
* 
db_¢­
) {

2210 
R—dO±iÚs
 
İtiÚs
;

2211 
İtiÚs
.
¢­shÙ
 = 
mod–_¢­
;

2212 
I‹¿tÜ
* 
m™”
 = 
mod–
->
	`NewI‹¿tÜ
(
İtiÚs
);

2213 
İtiÚs
.
¢­shÙ
 = 
db_¢­
;

2214 
I‹¿tÜ
* 
db™”
 = 
db
->
	`NewI‹¿tÜ
(
İtiÚs
);

2215 
boŞ
 
ok
 = 
Œue
;

2216 
couÁ
 = 0;

2217 
¡d
::
veùÜ
<¡d::
¡ršg
> 
£ek_keys
;

2220 
m™”
->
	`S“kToFœ¡
(), 
db™”
->SeekToFirst();

2221 
ok
 && 
m™”
->
	`V®id
(è&& 
db™”
->V®id(); m™”->
	`Next
(), dbiter->Next()) {

2222 
couÁ
++;

2223 ià(
m™”
->
	`key
().
	`com·»
(
db™”
->key()) != 0) {

2224 
¡d
::
	`årštf
(
¡d”r
, "¡• %d: Key mism©ch: '%s' vs. '%s'\n", 
¡•
,

2225 
	`Esÿ³SŒšg
(
m™”
->
	`key
()).
	`c_¡r
(),

2226 
	`Esÿ³SŒšg
(
db™”
->
	`key
()).
	`c_¡r
());

2227 
ok
 = 
çl£
;

2231 ià(
m™”
->
	`v®ue
().
	`com·»
(
db™”
->value()) != 0) {

2232 
¡d
::
	`årštf
(
¡d”r
,

2234 
¡•
, 
	`Esÿ³SŒšg
(
m™”
->
	`key
()).
	`c_¡r
(),

2235 
	`Esÿ³SŒšg
(
m™”
->
	`v®ue
()).
	`c_¡r
(),

2236 
	`Esÿ³SŒšg
(
m™”
->
	`v®ue
()).
	`c_¡r
());

2237 
ok
 = 
çl£
;

2241 ià(
couÁ
 % 10 == 0) {

2242 
£ek_keys
.
	`push_back
(
m™”
->
	`key
().
	`ToSŒšg
());

2246 ià(
ok
) {

2247 ià(
m™”
->
	`V®id
(è!ğ
db™”
->Valid()) {

2248 
¡d
::
	`årštf
(
¡d”r
, "step %d: Mismatch‡tƒnd of iterators: %d vs. %d\n",

2249 
¡•
, 
m™”
->
	`V®id
(), 
db™”
->Valid());

2250 
ok
 = 
çl£
;

2254 ià(
ok
) {

2256 autØ
k™”
 = 
£ek_keys
.
	`begš
(); 
ok
 && k™” !ğ£ek_keys.
	`’d
();

2257 ++
k™”
) {

2258 
m™”
->
	`S“k
(*
k™”
);

2259 
db™”
->
	`S“k
(*
k™”
);

2260 ià(!
m™”
->
	`V®id
(è|| !
db™”
->Valid()) {

2261 
¡d
::
	`årštf
(
¡d”r
, "step %d: Seek iterators invalid: %d vs. %d\n",

2262 
¡•
, 
m™”
->
	`V®id
(), 
db™”
->Valid());

2263 
ok
 = 
çl£
;

2265 ià(
m™”
->
	`key
().
	`com·»
(
db™”
->key()) != 0) {

2266 
¡d
::
	`årštf
(
¡d”r
, "step %d: Seek key mismatch: '%s' vs. '%s'\n",

2267 
¡•
, 
	`Esÿ³SŒšg
(
m™”
->
	`key
()).
	`c_¡r
(),

2268 
	`Esÿ³SŒšg
(
db™”
->
	`key
()).
	`c_¡r
());

2269 
ok
 = 
çl£
;

2273 ià(
m™”
->
	`v®ue
().
	`com·»
(
db™”
->value()) != 0) {

2274 
¡d
::
	`årštf
(

2275 
¡d”r
,

2276 "¡• %d: S“k v®umism©ch fÜ key '%s': '%s' vs. '%s'\n", 
¡•
,

2277 
	`Esÿ³SŒšg
(
m™”
->
	`key
()).
	`c_¡r
(),

2278 
	`Esÿ³SŒšg
(
m™”
->
	`v®ue
()).
	`c_¡r
(),

2279 
	`Esÿ³SŒšg
(
m™”
->
	`v®ue
()).
	`c_¡r
());

2280 
ok
 = 
çl£
;

2286 
¡d
::
	`årštf
(
¡d”r
, "%dƒÁr› com·»d: ok=%d\n", 
couÁ
, 
ok
);

2287 
d–‘e
 
m™”
;

2288 
d–‘e
 
db™”
;

2289  
ok
;

2290 
	}
}

2292 
	$TEST_F
(
DBTe¡
, 
Rªdomized
) {

2293 
Rªdom
 
	`ºd
(
‹¡
::
	`RªdomS“d
());

2295 
Mod–DB
 
	`mod–
(
	`Cu¼’tO±iÚs
());

2296 cÚ¡ 
N
 = 10000;

2297 cÚ¡ 
SÇpshÙ
* 
mod–_¢­
 = 
nuÎ±r
;

2298 cÚ¡ 
SÇpshÙ
* 
db_¢­
 = 
nuÎ±r
;

2299 
¡d
::
¡ršg
 
k
, 
v
;

2300 
¡•
 = 0; s‹°< 
N
; step++) {

2301 ià(
¡•
 % 100 == 0) {

2302 
¡d
::
	`årštf
(
¡d”r
, "S‹°%d oà%d\n", 
¡•
, 
N
);

2305 
p
 = 
ºd
.
	`UnifÜm
(100);

2306 ià(
p
 < 45) {

2307 
k
 = 
	`RªdomKey
(&
ºd
);

2308 
v
 = 
	`RªdomSŒšg
(

2309 &
ºd
,„nd.
	`OÃIn
(20è? 100 +„nd.
	`UnifÜm
(100) :„nd.Uniform(8));

2310 
	`ASSERT_LEVELDB_OK
(
mod–
.
	`Put
(
	`Wr™eO±iÚs
(), 
k
, 
v
));

2311 
	`ASSERT_LEVELDB_OK
(
db_
->
	`Put
(
	`Wr™eO±iÚs
(), 
k
, 
v
));

2313 } ià(
p
 < 90) {

2314 
k
 = 
	`RªdomKey
(&
ºd
);

2315 
	`ASSERT_LEVELDB_OK
(
mod–
.
	`D–‘e
(
	`Wr™eO±iÚs
(), 
k
));

2316 
	`ASSERT_LEVELDB_OK
(
db_
->
	`D–‘e
(
	`Wr™eO±iÚs
(), 
k
));

2319 
Wr™eB©ch
 
b
;

2320 cÚ¡ 
num
 = 
ºd
.
	`UnifÜm
(8);

2321 
i
 = 0; i < 
num
; i++) {

2322 ià(
i
 =ğ0 || !
ºd
.
	`OÃIn
(10)) {

2323 
k
 = 
	`RªdomKey
(&
ºd
);

2328 ià(
ºd
.
	`OÃIn
(2)) {

2329 
v
 = 
	`RªdomSŒšg
(&
ºd
,„nd.
	`UnifÜm
(10));

2330 
b
.
	`Put
(
k
, 
v
);

2332 
b
.
	`D–‘e
(
k
);

2335 
	`ASSERT_LEVELDB_OK
(
mod–
.
	`Wr™e
(
	`Wr™eO±iÚs
(), &
b
));

2336 
	`ASSERT_LEVELDB_OK
(
db_
->
	`Wr™e
(
	`Wr™eO±iÚs
(), &
b
));

2339 ià((
¡•
 % 100) == 0) {

2340 
	`ASSERT_TRUE
(
	`Com·»I‹¿tÜs
(
¡•
, &
mod–
, 
db_
, 
nuÎ±r
,‚ullptr));

2341 
	`ASSERT_TRUE
(
	`Com·»I‹¿tÜs
(
¡•
, &
mod–
, 
db_
, 
mod–_¢­
, 
db_¢­
));

2345 ià(
mod–_¢­
 !ğ
nuÎ±r
è
mod–
.
	`R–—£SÇpshÙ
(model_snap);

2346 ià(
db_¢­
 !ğ
nuÎ±r
è
db_
->
	`R–—£SÇpshÙ
(db_snap);

2348 
	`Reİ’
();

2349 
	`ASSERT_TRUE
(
	`Com·»I‹¿tÜs
(
¡•
, &
mod–
, 
db_
, 
nuÎ±r
,‚ullptr));

2351 
mod–_¢­
 = 
mod–
.
	`G‘SÇpshÙ
();

2352 
db_¢­
 = 
db_
->
	`G‘SÇpshÙ
();

2355 ià(
mod–_¢­
 !ğ
nuÎ±r
è
mod–
.
	`R–—£SÇpshÙ
(model_snap);

2356 ià(
db_¢­
 !ğ
nuÎ±r
è
db_
->
	`R–—£SÇpshÙ
(db_snap);

2357 } 
	`ChªgeO±iÚs
());

2358 
	}
}

	@db/dbformat.cc

5 
	~"db/dbfÜm©.h
"

7 
	~<c¡dio
>

8 
	~<s¡»am
>

10 
	~"pÜt/pÜt.h
"

11 
	~"ut/codšg.h
"

13 
Çme¥aû
 
	gËv–db
 {

15 
ušt64_t
 
PackSequ’ûAndTy³
(ušt64_ˆ
£q
, 
V®ueTy³
 
t
) {

16 
as£¹
(
£q
 <ğ
kMaxSequ’ûNumb”
);

17 
as£¹
(
t
 <ğ
kV®ueTy³FÜS“k
);

18  (
	g£q
 << 8è| 
	gt
;

21 
Aµ’dIÁ”ÇlKey
(
¡d
::
¡ršg
* 
»suÉ
, cÚ¡ 
P¬£dIÁ”ÇlKey
& 
key
) {

22 
	g»suÉ
->
­³nd
(
key
.
u£r_key
.
d©a
(), key.u£r_key.
size
());

23 
PutFixed64
(
»suÉ
, 
PackSequ’ûAndTy³
(
key
.
£qu’û
, key.
ty³
));

26 
	g¡d
::
¡ršg
 
P¬£dIÁ”ÇlKey
::
DebugSŒšg
() const {

27 
¡d
::
o¡ršg¡»am
 
ss
;

28 
	gss
 << '\'' << 
Esÿ³SŒšg
(
u£r_key
.
ToSŒšg
()è<< "' @ " << 
	g£qu’û
 << " : "

29 << 
	g¡©ic_ÿ¡
<>(
	gty³
);

30  
	gss
.
¡r
();

33 
	g¡d
::
¡ršg
 
IÁ”ÇlKey
::
DebugSŒšg
() const {

34 
P¬£dIÁ”ÇlKey
 
·r£d
;

35 ià(
P¬£IÁ”ÇlKey
(
»p_
, &
·r£d
)) {

36  
	g·r£d
.
DebugSŒšg
();

38 
	g¡d
::
o¡ršg¡»am
 
ss
;

39 
	gss
 << "(bad)" << 
Esÿ³SŒšg
(
»p_
);

40  
	gss
.
¡r
();

43 cÚ¡ * 
	gIÁ”ÇlKeyCom·¿tÜ
::
Name
() const {

47 
	gIÁ”ÇlKeyCom·¿tÜ
::
Com·»
(cÚ¡ 
Sliû
& 
akey
, cÚ¡ Sliû& 
bkey
) const {

52 
	gr
 = 
u£r_com·¿tÜ_
->
Com·»
(
ExŒaùU£rKey
(
akey
), ExŒaùU£rKey(
bkey
));

53 ià(
	gr
 == 0) {

54 cÚ¡ 
ušt64_t
 
ªum
 = 
DecodeFixed64
(
akey
.
d©a
(è+‡key.
size
() - 8);

55 cÚ¡ 
ušt64_t
 
	gbnum
 = 
DecodeFixed64
(
bkey
.
d©a
(è+ bkey.
size
() - 8);

56 ià(
	gªum
 > 
	gbnum
) {

57 
	gr
 = -1;

58 } ià(
	gªum
 < 
	gbnum
) {

59 
	gr
 = +1;

62  
	gr
;

65 
	gIÁ”ÇlKeyCom·¿tÜ
::
FšdShÜ‹¡S•¬©Ü
(
¡d
::
¡ršg
* 
¡¬t
,

66 cÚ¡ 
Sliû
& 
lim™
) const {

68 
Sliû
 
	gu£r_¡¬t
 = 
ExŒaùU£rKey
(*
¡¬t
);

69 
Sliû
 
	gu£r_lim™
 = 
ExŒaùU£rKey
(
lim™
);

70 
	g¡d
::
¡ršg
 
tmp
(
u£r_¡¬t
.
d©a
(), u£r_¡¬t.
size
());

71 
	gu£r_com·¿tÜ_
->
FšdShÜ‹¡S•¬©Ü
(&
tmp
, 
u£r_lim™
);

72 ià(
	gtmp
.
size
(è< 
	gu£r_¡¬t
.size() &&

73 
	gu£r_com·¿tÜ_
->
Com·»
(
u£r_¡¬t
, 
tmp
) < 0) {

76 
PutFixed64
(&
tmp
,

77 
PackSequ’ûAndTy³
(
kMaxSequ’ûNumb”
, 
kV®ueTy³FÜS“k
));

78 
as£¹
(
this
->
Com·»
(*
¡¬t
, 
tmp
) < 0);

79 
as£¹
(
this
->
Com·»
(
tmp
, 
lim™
) < 0);

80 
	g¡¬t
->
sw­
(
tmp
);

84 
	gIÁ”ÇlKeyCom·¿tÜ
::
FšdShÜtSucûssÜ
(
¡d
::
¡ršg
* 
key
) const {

85 
Sliû
 
u£r_key
 = 
ExŒaùU£rKey
(*
key
);

86 
	g¡d
::
¡ršg
 
tmp
(
u£r_key
.
d©a
(), u£r_key.
size
());

87 
	gu£r_com·¿tÜ_
->
FšdShÜtSucûssÜ
(&
tmp
);

88 ià(
	gtmp
.
size
(è< 
	gu£r_key
.size() &&

89 
	gu£r_com·¿tÜ_
->
Com·»
(
u£r_key
, 
tmp
) < 0) {

92 
PutFixed64
(&
tmp
,

93 
PackSequ’ûAndTy³
(
kMaxSequ’ûNumb”
, 
kV®ueTy³FÜS“k
));

94 
as£¹
(
this
->
Com·»
(*
key
, 
tmp
) < 0);

95 
	gkey
->
sw­
(
tmp
);

99 cÚ¡ * 
	gIÁ”ÇlF‹rPŞicy
::
Name
(ècÚ¡ {  
u£r_pŞicy_
->Name(); }

101 
	gIÁ”ÇlF‹rPŞicy
::
C»©eF‹r
(cÚ¡ 
Sliû
* 
keys
, 
n
,

102 
¡d
::
¡ršg
* 
d¡
) const {

105 
Sliû
* 
mkey
 = 
cÚ¡_ÿ¡
<Sliû*>(
keys
);

106 
	gi
 = 0; i < 
	gn
; i++) {

107 
	gmkey
[
i
] = 
ExŒaùU£rKey
(
keys
[i]);

110 
	gu£r_pŞicy_
->
C»©eF‹r
(
keys
, 
n
, 
d¡
);

113 
boŞ
 
	gIÁ”ÇlF‹rPŞicy
::
KeyMayM©ch
(cÚ¡ 
Sliû
& 
key
, cÚ¡ Sliû& 
f
) const {

114  
	gu£r_pŞicy_
->
KeyMayM©ch
(
ExŒaùU£rKey
(
key
), 
f
);

117 
	gLookupKey
::
LookupKey
(cÚ¡ 
Sliû
& 
u£r_key
, 
Sequ’ûNumb”
 
s
) {

118 
size_t
 
	gusize
 = 
u£r_key
.
size
();

119 
size_t
 
	gÃeded
 = 
usize
 + 13;

120 * 
	gd¡
;

121 ià(
	gÃeded
 <ğ(
¥aû_
)) {

122 
d¡
 = 
¥aû_
;

124 
	gd¡
 = 
Ãw
 [
Ãeded
];

126 
	g¡¬t_
 = 
d¡
;

127 
	gd¡
 = 
EncodeV¬št32
(
d¡
, 
usize
 + 8);

128 
	gk¡¬t_
 = 
d¡
;

129 
	g¡d
::
memıy
(
d¡
, 
u£r_key
.
d©a
(), 
usize
);

130 
	gd¡
 +ğ
usize
;

131 
EncodeFixed64
(
d¡
, 
PackSequ’ûAndTy³
(
s
, 
kV®ueTy³FÜS“k
));

132 
	gd¡
 += 8;

133 
	g’d_
 = 
d¡
;

	@db/dbformat.h

5 #iâdeà
STORAGE_LEVELDB_DB_DBFORMAT_H_


6 
	#STORAGE_LEVELDB_DB_DBFORMAT_H_


	)

8 
	~<c¡ddef
>

9 
	~<c¡dšt
>

10 
	~<¡ršg
>

12 
	~"Ëv–db/com·¿tÜ.h
"

13 
	~"Ëv–db/db.h
"

14 
	~"Ëv–db/f‹r_pŞicy.h
"

15 
	~"Ëv–db/¦iû.h
"

16 
	~"Ëv–db/bË_bud”.h
"

17 
	~"ut/codšg.h
"

18 
	~"ut/loggšg.h
"

20 
Çme¥aû
 
	gËv–db
 {

24 
Çme¥aû
 
	gcÚfig
 {

25 cÚ¡ 
	gkNumLev–s
 = 7;

28 cÚ¡ 
	gkL0_Com·ùiÚTrigg”
 = 4;

31 cÚ¡ 
	gkL0_SlowdownWr™esTrigg”
 = 8;

34 cÚ¡ 
	gkL0_StİWr™esTrigg”
 = 12;

42 cÚ¡ 
	gkMaxMemCom·ùLev–
 = 2;

45 cÚ¡ 
	gkR—dBy‹sP”iod
 = 1048576;

49 
şass
 
	gIÁ”ÇlKey
;

54 
	eV®ueTy³
 { 
	gkTy³D–‘iÚ
 = 0x0, 
	gkTy³V®ue
 = 0x1 };

61 cÚ¡ 
V®ueTy³
 
	gkV®ueTy³FÜS“k
 = 
kTy³V®ue
;

63 
ušt64_t
 
	tSequ’ûNumb”
;

67 cÚ¡ 
Sequ’ûNumb”
 
	gkMaxSequ’ûNumb”
 = ((0x1ull << 56) - 1);

69 
	sP¬£dIÁ”ÇlKey
 {

70 
Sliû
 
	gu£r_key
;

71 
Sequ’ûNumb”
 
	g£qu’û
;

72 
V®ueTy³
 
	gty³
;

74 
P¬£dIÁ”ÇlKey
() {}

75 
P¬£dIÁ”ÇlKey
(cÚ¡ 
Sliû
& 
u
, cÚ¡ 
Sequ’ûNumb”
& 
£q
, 
V®ueTy³
 
t
)

76 : 
u£r_key
(
u
), 
£qu’û
(
£q
), 
ty³
(
t
) {}

77 
	g¡d
::
¡ršg
 
DebugSŒšg
() const;

81 
šlše
 
size_t
 
IÁ”ÇlKeyEncodšgL’gth
(cÚ¡ 
P¬£dIÁ”ÇlKey
& 
key
) {

82  
	gkey
.
	gu£r_key
.
size
() + 8;

86 
Aµ’dIÁ”ÇlKey
(
¡d
::
¡ršg
* 
»suÉ
, cÚ¡ 
P¬£dIÁ”ÇlKey
& 
key
);

92 
boŞ
 
P¬£IÁ”ÇlKey
(cÚ¡ 
Sliû
& 
š‹º®_key
, 
P¬£dIÁ”ÇlKey
* 
»suÉ
);

95 
šlše
 
Sliû
 
ExŒaùU£rKey
(cÚ¡ Sliû& 
š‹º®_key
) {

96 
as£¹
(
š‹º®_key
.
size
() >= 8);

97  
Sliû
(
š‹º®_key
.
d©a
(), iÁ”Çl_key.
size
() - 8);

102 şas 
	cIÁ”ÇlKeyCom·¿tÜ
 : 
public
 
Com·¿tÜ
 {

103 
´iv©e
:

104 cÚ¡ 
Com·¿tÜ
* 
u£r_com·¿tÜ_
;

106 
	gpublic
:

107 
ex¶ic™
 
IÁ”ÇlKeyCom·¿tÜ
(cÚ¡ 
Com·¿tÜ
* 
c
è: 
u£r_com·¿tÜ_
(c) {}

108 cÚ¡ * 
Name
(ècÚ¡ 
ov”ride
;

109 
Com·»
(cÚ¡ 
Sliû
& 
a
, cÚ¡ Sliû& 
b
ècÚ¡ 
	gov”ride
;

110 
FšdShÜ‹¡S•¬©Ü
(
¡d
::
¡ršg
* 
¡¬t
,

111 cÚ¡ 
Sliû
& 
lim™
ècÚ¡ 
	gov”ride
;

112 
FšdShÜtSucûssÜ
(
¡d
::
¡ršg
* 
key
ècÚ¡ 
ov”ride
;

114 cÚ¡ 
Com·¿tÜ
* 
u£r_com·¿tÜ
(ècÚ¡ {  
	gu£r_com·¿tÜ_
; }

116 
Com·»
(cÚ¡ 
IÁ”ÇlKey
& 
a
, cÚ¡ IÁ”ÇlKey& 
b
) const;

120 şas 
	cIÁ”ÇlF‹rPŞicy
 : 
public
 
F‹rPŞicy
 {

121 
´iv©e
:

122 cÚ¡ 
F‹rPŞicy
* cÚ¡ 
u£r_pŞicy_
;

124 
	gpublic
:

125 
ex¶ic™
 
IÁ”ÇlF‹rPŞicy
(cÚ¡ 
F‹rPŞicy
* 
p
è: 
u£r_pŞicy_
(p) {}

126 cÚ¡ * 
Name
(ècÚ¡ 
ov”ride
;

127 
C»©eF‹r
(cÚ¡ 
Sliû
* 
keys
, 
n
, 
¡d
::
¡ršg
* 
d¡
ècÚ¡ 
ov”ride
;

128 
boŞ
 
KeyMayM©ch
(cÚ¡ 
Sliû
& 
key
, cÚ¡ Sliû& 
f‹r
ècÚ¡ 
	gov”ride
;

134 şas 
	cIÁ”ÇlKey
 {

135 
	g´iv©e
:

136 
¡d
::
¡ršg
 
»p_
;

138 
	gpublic
:

139 
IÁ”ÇlKey
() {}

140 
IÁ”ÇlKey
(cÚ¡ 
Sliû
& 
u£r_key
, 
Sequ’ûNumb”
 
s
, 
V®ueTy³
 
t
) {

141 
Aµ’dIÁ”ÇlKey
(&
»p_
, 
P¬£dIÁ”ÇlKey
(
u£r_key
, 
s
, 
t
));

144 
boŞ
 
DecodeFrom
(cÚ¡ 
Sliû
& 
s
) {

145 
	g»p_
.
assign
(
s
.
d©a
(), s.
size
());

146  !
	g»p_
.
em±y
();

149 
Sliû
 
Encode
() const {

150 
as£¹
(!
»p_
.
em±y
());

151  
	g»p_
;

154 
Sliû
 
u£r_key
(ècÚ¡ {  
ExŒaùU£rKey
(
»p_
); }

156 
S‘From
(cÚ¡ 
P¬£dIÁ”ÇlKey
& 
p
) {

157 
	g»p_
.
ş—r
();

158 
Aµ’dIÁ”ÇlKey
(&
»p_
, 
p
);

161 
CË¬
(è{ 
	g»p_
.
ş—r
(); }

163 
	g¡d
::
¡ršg
 
DebugSŒšg
() const;

166 
šlše
 
	gIÁ”ÇlKeyCom·¿tÜ
::
	$Com·»
(cÚ¡ 
IÁ”ÇlKey
& 
a
,

167 cÚ¡ 
IÁ”ÇlKey
& 
b
) const {

168  
	`Com·»
(
a
.
	`Encode
(), 
b
.Encode());

169 
	}
}

171 
šlše
 
boŞ
 
	$P¬£IÁ”ÇlKey
(cÚ¡ 
Sliû
& 
š‹º®_key
,

172 
P¬£dIÁ”ÇlKey
* 
»suÉ
) {

173 cÚ¡ 
size_t
 
n
 = 
š‹º®_key
.
	`size
();

174 ià(
n
 < 8è 
çl£
;

175 
ušt64_t
 
num
 = 
	`DecodeFixed64
(
š‹º®_key
.
	`d©a
(è+ 
n
 - 8);

176 
ušt8_t
 
c
 = 
num
 & 0xff;

177 
»suÉ
->
£qu’û
 = 
num
 >> 8;

178 
»suÉ
->
ty³
 = 
¡©ic_ÿ¡
<
V®ueTy³
>(
c
);

179 
»suÉ
->
u£r_key
 = 
	`Sliû
(
š‹º®_key
.
	`d©a
(), 
n
 - 8);

180  (
c
 <ğ
¡©ic_ÿ¡
<
ušt8_t
>(
kTy³V®ue
));

181 
	}
}

184 şas 
	cLookupKey
 {

185 
	gpublic
:

188 
LookupKey
(cÚ¡ 
Sliû
& 
u£r_key
, 
Sequ’ûNumb”
 
£qu’û
);

190 
LookupKey
(cÚ¡ LookupKey&èğ
d–‘e
;

191 
	gLookupKey
& 
	gİ”©Ü
=(cÚ¡ 
LookupKey
&èğ
d–‘e
;

193 ~
LookupKey
();

196 
Sliû
 
membË_key
(ècÚ¡ {  Sliû(
¡¬t_
, 
’d_
 - start_); }

199 
Sliû
 
š‹º®_key
(ècÚ¡ {  Sliû(
k¡¬t_
, 
’d_
 - kstart_); }

202 
Sliû
 
u£r_key
(ècÚ¡ {  Sliû(
k¡¬t_
, 
’d_
 - kstart_ - 8); }

204 
	g´iv©e
:

212 cÚ¡ * 
¡¬t_
;

213 cÚ¡ * 
	gk¡¬t_
;

214 cÚ¡ * 
	g’d_
;

215 
	g¥aû_
[200];

218 
šlše
 
	gLookupKey
::~
	$LookupKey
() {

219 ià(
¡¬t_
 !ğ
¥aû_
è
d–‘e
[] start_;

220 
	}
}

	@db/dbformat_test.cc

5 
	~"db/dbfÜm©.h
"

7 
	~"g‹¡/g‹¡.h
"

8 
	~"ut/loggšg.h
"

10 
Çme¥aû
 
	gËv–db
 {

12 
	g¡d
::
¡ršg
 
IKey
(cÚ¡ 
¡d
::¡ršg& 
u£r_key
, 
ušt64_t
 
£q
,

13 
V®ueTy³
 
vt
) {

14 
	g¡d
::
¡ršg
 
’coded
;

15 
Aµ’dIÁ”ÇlKey
(&
’coded
, 
P¬£dIÁ”ÇlKey
(
u£r_key
, 
£q
, 
vt
));

16  
	g’coded
;

19 
	g¡d
::
¡ršg
 
ShÜ‹n
(cÚ¡ 
¡d
::¡ršg& 
s
, cÚ¡ std::¡ršg& 
l
) {

20 
¡d
::
¡ršg
 
»suÉ
 = 
s
;

21 
IÁ”ÇlKeyCom·¿tÜ
(
By‹wi£Com·¿tÜ
()).
FšdShÜ‹¡S•¬©Ü
(&
»suÉ
, 
l
);

22  
	g»suÉ
;

25 
	g¡d
::
¡ršg
 
ShÜtSucûssÜ
(cÚ¡ 
¡d
::¡ršg& 
s
) {

26 
¡d
::
¡ršg
 
»suÉ
 = 
s
;

27 
IÁ”ÇlKeyCom·¿tÜ
(
By‹wi£Com·¿tÜ
()).
FšdShÜtSucûssÜ
(&
»suÉ
);

28  
	g»suÉ
;

31 
Te¡Key
(cÚ¡ 
¡d
::
¡ršg
& 
key
, 
ušt64_t
 
£q
, 
V®ueTy³
 
vt
) {

32 
	g¡d
::
¡ršg
 
’coded
 = 
IKey
(
key
, 
£q
, 
vt
);

34 
Sliû
 
š
(
’coded
);

35 
P¬£dIÁ”ÇlKey
 
decoded
("", 0, 
kTy³V®ue
);

37 
ASSERT_TRUE
(
P¬£IÁ”ÇlKey
(
š
, &
decoded
));

38 
ASSERT_EQ
(
key
, 
decoded
.
u£r_key
.
ToSŒšg
());

39 
ASSERT_EQ
(
£q
, 
decoded
.
£qu’û
);

40 
ASSERT_EQ
(
vt
, 
decoded
.
ty³
);

42 
ASSERT_TRUE
(!
P¬£IÁ”ÇlKey
(
Sliû
("b¬"), &
decoded
));

45 
TEST
(
FÜm©Te¡
, 
IÁ”ÇlKey_EncodeDecode
) {

46 cÚ¡ * 
	gkeys
[] = {"", "k", "hello", "longggggggggggggggggggggg"};

47 cÚ¡ 
ušt64_t
 
	g£q
[] = {1,

59 
	gk
 = 0; k < (
	gkeys
) / (keys[0]); k++) {

60 
	gs
 = 0; s < (
	g£q
) / (seq[0]); s++) {

61 
Te¡Key
(
keys
[
k
], 
£q
[
s
], 
kTy³V®ue
);

62 
Te¡Key
("h–lo", 1, 
kTy³D–‘iÚ
);

67 
TEST
(
FÜm©Te¡
, 
IÁ”ÇlKey_DecodeFromEm±y
) {

68 
IÁ”ÇlKey
 
	gš‹º®_key
;

70 
ASSERT_TRUE
(!
š‹º®_key
.
DecodeFrom
(""));

73 
TEST
(
FÜm©Te¡
, 
IÁ”ÇlKeyShÜtS•¬©Ü
) {

75 
ASSERT_EQ
(
IKey
("foo", 100, 
kTy³V®ue
),

76 
ShÜ‹n
(
IKey
("foo", 100, 
kTy³V®ue
), IKey("foo", 99, kTypeValue)));

77 
ASSERT_EQ
(

78 
IKey
("foo", 100, 
kTy³V®ue
),

79 
ShÜ‹n
(
IKey
("foo", 100, 
kTy³V®ue
), IKey("foo", 101, kTypeValue)));

80 
ASSERT_EQ
(

81 
IKey
("foo", 100, 
kTy³V®ue
),

82 
ShÜ‹n
(
IKey
("foo", 100, 
kTy³V®ue
), IKey("foo", 100, kTypeValue)));

83 
ASSERT_EQ
(

84 
IKey
("foo", 100, 
kTy³V®ue
),

85 
ShÜ‹n
(
IKey
("foo", 100, 
kTy³V®ue
), IKey("foo", 100, 
kTy³D–‘iÚ
)));

88 
ASSERT_EQ
(
IKey
("foo", 100, 
kTy³V®ue
),

89 
ShÜ‹n
(
IKey
("foo", 100, 
kTy³V®ue
), IKey("bar", 99, kTypeValue)));

92 
ASSERT_EQ
(

93 
IKey
("g", 
kMaxSequ’ûNumb”
, 
kV®ueTy³FÜS“k
),

94 
ShÜ‹n
(
IKey
("foo", 100, 
kTy³V®ue
), IKey("hello", 200, kTypeValue)));

97 
ASSERT_EQ
(

98 
IKey
("foo", 100, 
kTy³V®ue
),

99 
ShÜ‹n
(
IKey
("foo", 100, 
kTy³V®ue
), IKey("foobar", 200, kTypeValue)));

102 
ASSERT_EQ
(

103 
IKey
("foob¬", 100, 
kTy³V®ue
),

104 
ShÜ‹n
(
IKey
("foob¬", 100, 
kTy³V®ue
), IKey("foo", 200, kTypeValue)));

107 
TEST
(
FÜm©Te¡
, 
IÁ”ÇlKeyShÜ‹¡SucûssÜ
) {

108 
ASSERT_EQ
(
IKey
("g", 
kMaxSequ’ûNumb”
, 
kV®ueTy³FÜS“k
),

109 
ShÜtSucûssÜ
(
IKey
("foo", 100, 
kTy³V®ue
)));

110 
ASSERT_EQ
(
IKey
("\xff\xff", 100, 
kTy³V®ue
),

111 
ShÜtSucûssÜ
(
IKey
("\xff\xff", 100, 
kTy³V®ue
)));

114 
TEST
(
FÜm©Te¡
, 
P¬£dIÁ”ÇlKeyDebugSŒšg
) {

115 
P¬£dIÁ”ÇlKey
 
key
("Th\"key\" iÀ'sšgË quÙes'", 42, 
kTy³V®ue
);

117 
ASSERT_EQ
("'Th\"key\" iÀ'sšgË quÙes'' @ 42 : 1", 
key
.
DebugSŒšg
());

120 
TEST
(
FÜm©Te¡
, 
IÁ”ÇlKeyDebugSŒšg
) {

121 
IÁ”ÇlKey
 
key
("Th\"key\" iÀ'sšgË quÙes'", 42, 
kTy³V®ue
);

122 
ASSERT_EQ
("'Th\"key\" iÀ'sšgË quÙes'' @ 42 : 1", 
key
.
DebugSŒšg
());

124 
IÁ”ÇlKey
 
	gšv®id_key
;

125 
ASSERT_EQ
("(bad)", 
šv®id_key
.
DebugSŒšg
());

	@db/dumpfile.cc

5 
	~"Ëv–db/dumpfe.h
"

7 
	~<c¡dio
>

9 
	~"db/dbfÜm©.h
"

10 
	~"db/f’ame.h
"

11 
	~"db/log_»ad”.h
"

12 
	~"db/v”siÚ_ed™.h
"

13 
	~"db/wr™e_b©ch_š‹º®.h
"

14 
	~"Ëv–db/’v.h
"

15 
	~"Ëv–db/™”©Ü.h
"

16 
	~"Ëv–db/İtiÚs.h
"

17 
	~"Ëv–db/¡©us.h
"

18 
	~"Ëv–db/bË.h
"

19 
	~"Ëv–db/wr™e_b©ch.h
"

20 
	~"ut/loggšg.h
"

22 
Çme¥aû
 
	gËv–db
 {

24 
	gÇme¥aû
 {

26 
boŞ
 
GuessTy³
(cÚ¡ 
¡d
::
¡ršg
& 
âame
, 
FeTy³
* 
ty³
) {

27 
size_t
 
	gpos
 = 
âame
.
rfšd
('/');

28 
	g¡d
::
¡ršg
 
ba£Çme
;

29 ià(
	gpos
 =ğ
¡d
::
¡ršg
::
Åos
) {

30 
ba£Çme
 = 
âame
;

32 
	gba£Çme
 = 
¡d
::
¡ršg
(
âame
.
d©a
(è+ 
pos
 + 1, fÇme.
size
() -…os - 1);

34 
ušt64_t
 
	gignÜed
;

35  
P¬£FeName
(
ba£Çme
, &
ignÜed
, 
ty³
);

39 şas 
	cCÜru±iÚR•Ü‹r
 : 
public
 
log
::
R—d”
::
R•Ü‹r
 {

40 
public
:

41 
CÜru±iÚ
(
size_t
 
by‹s
, cÚ¡ 
Stus
& 
¡©us
è
	gov”ride
 {

42 
	g¡d
::
¡ršg
 
r
 = "corruption: ";

43 
Aµ’dNumb”To
(&
r
, 
by‹s
);

44 
	gr
 += " bytes; ";

45 
	gr
 +ğ
¡©us
.
ToSŒšg
();

46 
	gr
.
push_back
('\n');

47 
	gd¡_
->
Aµ’d
(
r
);

50 
Wr™abËFe
* 
	gd¡_
;

54 
Stus
 
PrštLogCÚ‹Ás
(
Env
* 
’v
, cÚ¡ 
¡d
::
¡ršg
& 
âame
,

55 (*
func
)(
ušt64_t
, 
Sliû
, 
Wr™abËFe
*),

56 
Wr™abËFe
* 
d¡
) {

57 
Sequ’tŸlFe
* 
	gfe
;

58 
Stus
 
	gs
 = 
’v
->
NewSequ’tŸlFe
(
âame
, &
fe
);

59 ià(!
	gs
.
ok
()) {

60  
	gs
;

62 
CÜru±iÚR•Ü‹r
 
	g»pÜ‹r
;

63 
	g»pÜ‹r
.
	gd¡_
 = 
d¡
;

64 
	glog
::
R—d”
 
»ad”
(
fe
, &
»pÜ‹r
, 
Œue
, 0);

65 
Sliû
 
	g»cÜd
;

66 
	g¡d
::
¡ršg
 
sü©ch
;

67 
	g»ad”
.
R—dRecÜd
(&
»cÜd
, &
sü©ch
)) {

68 (*
	gfunc
)(
	g»ad”
.
La¡RecÜdOff£t
(), 
	g»cÜd
, 
	gd¡
);

70 
d–‘e
 
	gfe
;

71  
	gStus
::
OK
();

75 şas 
	cWr™eB©chI‹mPrš‹r
 : 
public
 
Wr™eB©ch
::
HªdËr
 {

76 
public
:

77 
Put
(cÚ¡ 
Sliû
& 
key
, cÚ¡ Sliû& 
v®ue
è
	gov”ride
 {

78 
	g¡d
::
¡ršg
 
r
 = "…ut '";

79 
Aµ’dEsÿ³dSŒšgTo
(&
r
, 
key
);

80 
	gr
 += "' '";

81 
Aµ’dEsÿ³dSŒšgTo
(&
r
, 
v®ue
);

82 
	gr
 += "'\n";

83 
	gd¡_
->
Aµ’d
(
r
);

85 
D–‘e
(cÚ¡ 
Sliû
& 
key
è
	gov”ride
 {

86 
	g¡d
::
¡ršg
 
r
 = " del '";

87 
Aµ’dEsÿ³dSŒšgTo
(&
r
, 
key
);

88 
	gr
 += "'\n";

89 
	gd¡_
->
Aµ’d
(
r
);

92 
Wr™abËFe
* 
	gd¡_
;

97 
Wr™eB©chPrš‹r
(
ušt64_t
 
pos
, 
Sliû
 
»cÜd
, 
Wr™abËFe
* 
d¡
) {

98 
	g¡d
::
¡ršg
 
r
 = "--- offset ";

99 
Aµ’dNumb”To
(&
r
, 
pos
);

100 
	gr
 += "; ";

101 ià(
	g»cÜd
.
size
() < 12) {

102 
	gr
 += "log„ecord†ength ";

103 
Aµ’dNumb”To
(&
r
, 
»cÜd
.
size
());

104 
	gr
 += " isoo small\n";

105 
	gd¡
->
Aµ’d
(
r
);

108 
Wr™eB©ch
 
	gb©ch
;

109 
	gWr™eB©chIÁ”Çl
::
S‘CÚ‹Ás
(&
b©ch
, 
»cÜd
);

110 
	gr
 += "sequence ";

111 
Aµ’dNumb”To
(&
r
, 
Wr™eB©chIÁ”Çl
::
Sequ’û
(&
b©ch
));

112 
	gr
.
push_back
('\n');

113 
	gd¡
->
Aµ’d
(
r
);

114 
Wr™eB©chI‹mPrš‹r
 
	gb©ch_™em_´š‹r
;

115 
	gb©ch_™em_´š‹r
.
	gd¡_
 = 
d¡
;

116 
Stus
 
	gs
 = 
b©ch
.
I‹¿‹
(&
b©ch_™em_´š‹r
);

117 ià(!
	gs
.
ok
()) {

118 
	gd¡
->
Aµ’d
("ƒ¼Ü: " + 
s
.
ToSŒšg
() + "\n");

122 
Stus
 
DumpLog
(
Env
* 
’v
, cÚ¡ 
¡d
::
¡ršg
& 
âame
, 
Wr™abËFe
* 
d¡
) {

123  
PrštLogCÚ‹Ás
(
’v
, 
âame
, 
Wr™eB©chPrš‹r
, 
d¡
);

128 
V”siÚEd™Prš‹r
(
ušt64_t
 
pos
, 
Sliû
 
»cÜd
, 
Wr™abËFe
* 
d¡
) {

129 
	g¡d
::
¡ršg
 
r
 = "--- offset ";

130 
Aµ’dNumb”To
(&
r
, 
pos
);

131 
	gr
 += "; ";

132 
V”siÚEd™
 
	ged™
;

133 
Stus
 
	gs
 = 
ed™
.
DecodeFrom
(
»cÜd
);

134 ià(!
	gs
.
ok
()) {

135 
	gr
 +ğ
s
.
ToSŒšg
();

136 
	gr
.
push_back
('\n');

138 
	gr
 +ğ
ed™
.
DebugSŒšg
();

140 
	gd¡
->
Aµ’d
(
r
);

143 
Stus
 
DumpDesütÜ
(
Env
* 
’v
, cÚ¡ 
¡d
::
¡ršg
& 
âame
, 
Wr™abËFe
* 
d¡
) {

144  
PrštLogCÚ‹Ás
(
’v
, 
âame
, 
V”siÚEd™Prš‹r
, 
d¡
);

147 
Stus
 
DumpTabË
(
Env
* 
’v
, cÚ¡ 
¡d
::
¡ršg
& 
âame
, 
Wr™abËFe
* 
d¡
) {

148 
ušt64_t
 
	gfe_size
;

149 
RªdomAcûssFe
* 
	gfe
 = 
nuÎ±r
;

150 
TabË
* 
	gbË
 = 
nuÎ±r
;

151 
Stus
 
	gs
 = 
’v
->
G‘FeSize
(
âame
, &
fe_size
);

152 ià(
	gs
.
ok
()) {

153 
	gs
 = 
’v
->
NewRªdomAcûssFe
(
âame
, &
fe
);

155 ià(
	gs
.
ok
()) {

160 
	gs
 = 
TabË
::
O³n
(
O±iÚs
(), 
fe
, 
fe_size
, &
bË
);

162 ià(!
	gs
.
ok
()) {

163 
d–‘e
 
	gbË
;

164 
d–‘e
 
	gfe
;

165  
	gs
;

168 
R—dO±iÚs
 
	gro
;

169 
	gro
.
	gfl_ÿche
 = 
çl£
;

170 
I‹¿tÜ
* 
	g™”
 = 
bË
->
NewI‹¿tÜ
(
ro
);

171 
	g¡d
::
¡ršg
 
r
;

172 
	g™”
->
S“kToFœ¡
(); i‹r->
V®id
(); i‹r->
Next
()) {

173 
	gr
.
ş—r
();

174 
P¬£dIÁ”ÇlKey
 
	gkey
;

175 ià(!
P¬£IÁ”ÇlKey
(
™”
->
key
(), &key)) {

176 
	gr
 = "badkey '";

177 
Aµ’dEsÿ³dSŒšgTo
(&
r
, 
™”
->
key
());

178 
	gr
 += "' => '";

179 
Aµ’dEsÿ³dSŒšgTo
(&
r
, 
™”
->
v®ue
());

180 
	gr
 += "'\n";

181 
	gd¡
->
Aµ’d
(
r
);

183 
	gr
 = "'";

184 
Aµ’dEsÿ³dSŒšgTo
(&
r
, 
key
.
u£r_key
);

185 
	gr
 += "' @ ";

186 
Aµ’dNumb”To
(&
r
, 
key
.
£qu’û
);

187 
	gr
 += " : ";

188 ià(
	gkey
.
	gty³
 =ğ
kTy³D–‘iÚ
) {

189 
r
 += "del";

190 } ià(
	gkey
.
	gty³
 =ğ
kTy³V®ue
) {

191 
r
 += "val";

193 
Aµ’dNumb”To
(&
r
, 
key
.
ty³
);

195 
	gr
 += " => '";

196 
Aµ’dEsÿ³dSŒšgTo
(&
r
, 
™”
->
v®ue
());

197 
	gr
 += "'\n";

198 
	gd¡
->
Aµ’d
(
r
);

201 
	gs
 = 
™”
->
¡©us
();

202 ià(!
	gs
.
ok
()) {

203 
	gd¡
->
Aµ’d
("™”©Üƒ¼Ü: " + 
s
.
ToSŒšg
() + "\n");

206 
d–‘e
 
	g™”
;

207 
d–‘e
 
	gbË
;

208 
d–‘e
 
	gfe
;

209  
	gStus
::
OK
();

214 
Stus
 
	$DumpFe
(
Env
* 
’v
, cÚ¡ 
¡d
::
¡ršg
& 
âame
, 
Wr™abËFe
* 
d¡
) {

215 
FeTy³
 
áy³
;

216 ià(!
	`GuessTy³
(
âame
, &
áy³
)) {

217  
Stus
::
	`Inv®idArgum’t
(
âame
 + ": unknown fileype");

219 
áy³
) {

220 
kLogFe
:

221  
	`DumpLog
(
’v
, 
âame
, 
d¡
);

222 
kDesütÜFe
:

223  
	`DumpDesütÜ
(
’v
, 
âame
, 
d¡
);

224 
kTabËFe
:

225  
	`DumpTabË
(
’v
, 
âame
, 
d¡
);

229  
Stus
::
	`Inv®idArgum’t
(
âame
 + ":‚ot‡ dump-able fileype");

230 
	}
}

	@db/fault_injection_test.cc

9 
	~<m­
>

10 
	~<£t
>

12 
	~"g‹¡/g‹¡.h
"

13 
	~"db/db_im¶.h
"

14 
	~"db/f’ame.h
"

15 
	~"db/log_fÜm©.h
"

16 
	~"db/v”siÚ_£t.h
"

17 
	~"Ëv–db/ÿche.h
"

18 
	~"Ëv–db/db.h
"

19 
	~"Ëv–db/’v.h
"

20 
	~"Ëv–db/bË.h
"

21 
	~"Ëv–db/wr™e_b©ch.h
"

22 
	~"pÜt/pÜt.h
"

23 
	~"pÜt/th»ad_ªnÙ©iÚs.h
"

24 
	~"ut/loggšg.h
"

25 
	~"ut/mu‹xlock.h
"

26 
	~"ut/‹¡ut.h
"

28 
Çme¥aû
 
	gËv–db
 {

30 cÚ¡ 
	gkV®ueSize
 = 1000;

31 cÚ¡ 
	gkMaxNumV®ues
 = 2000;

32 cÚ¡ 
size_t
 
	gkNumI‹¿tiÚs
 = 3;

34 
şass
 
	gFauÉInjeùiÚTe¡Env
;

36 
	gÇme¥aû
 {

39 
	g¡d
::
¡ršg
 
G‘DœName
(cÚ¡ 
¡d
::¡ršg& 
f’ame
) {

40 
size_t
 
found
 = 
f’ame
.
fšd_Ï¡_of
("/\\");

41 ià(
	gfound
 =ğ
¡d
::
¡ršg
::
Åos
) {

44  
	gf’ame
.
sub¡r
(0, 
found
);

48 
Stus
 
SyncDœ
(cÚ¡ 
¡d
::
¡ršg
& 
dœ
) {

50  
Stus
::
OK
();

54 
Stus
 
Trunÿ‹
(cÚ¡ 
¡d
::
¡ršg
& 
f’ame
, 
ušt64_t
 
Ëngth
) {

55 
	gËv–db
::
Env
* 
’v
 = 
Ëv–db
::Env::
DeçuÉ
();

57 
Sequ’tŸlFe
* 
	gÜig_fe
;

58 
Stus
 
	gs
 = 
’v
->
NewSequ’tŸlFe
(
f’ame
, &
Üig_fe
);

59 ià(!
	gs
.
ok
())  s;

61 * 
	gsü©ch
 = 
Ãw
 [
Ëngth
];

62 
	gËv–db
::
Sliû
 
»suÉ
;

63 
	gs
 = 
Üig_fe
->
R—d
(
Ëngth
, &
»suÉ
, 
sü©ch
);

64 
d–‘e
 
	gÜig_fe
;

65 ià(
	gs
.
ok
()) {

66 
	g¡d
::
¡ršg
 
tmp_Çme
 = 
G‘DœName
(
f’ame
) + "/truncate.tmp";

67 
Wr™abËFe
* 
	gtmp_fe
;

68 
	gs
 = 
’v
->
NewWr™abËFe
(
tmp_Çme
, &
tmp_fe
);

69 ià(
	gs
.
ok
()) {

70 
	gs
 = 
tmp_fe
->
Aµ’d
(
»suÉ
);

71 
d–‘e
 
	gtmp_fe
;

72 ià(
	gs
.
ok
()) {

73 
	gs
 = 
’v
->
R’ameFe
(
tmp_Çme
, 
f’ame
);

75 
	g’v
->
RemoveFe
(
tmp_Çme
);

80 
	gd–‘e
[] 
	gsü©ch
;

82  
	gs
;

85 
	sFeS‹
 {

86 
	g¡d
::
¡ršg
 
f’ame_
;

87 
št64_t
 
	gpos_
;

88 
št64_t
 
	gpos_©_Ï¡_sync_
;

89 
št64_t
 
	gpos_©_Ï¡_æush_
;

91 
FeS‹
(cÚ¡ 
¡d
::
¡ršg
& 
f’ame
)

92 : 
f’ame_
(
f’ame
),

93 
pos_
(-1),

94 
pos_©_Ï¡_sync_
(-1),

95 
pos_©_Ï¡_æush_
(-1) {}

97 
FeS‹
(è: 
pos_
(-1), 
pos_©_Ï¡_sync_
(-1), 
pos_©_Ï¡_æush_
(-1) {}

99 
boŞ
 
IsFuÎySynûd
(ècÚ¡ {  
	gpos_
 <ğ0 || 
pos_
 =ğ
pos_©_Ï¡_sync_
; }

101 
Stus
 
DrİUnsynûdD©a
() const;

108 şas 
	cTe¡Wr™abËFe
 : 
public
 
Wr™abËFe
 {

109 
public
:

110 
Te¡Wr™abËFe
(cÚ¡ 
FeS‹
& 
¡©e
, 
Wr™abËFe
* 
f
,

111 
FauÉInjeùiÚTe¡Env
* 
’v
);

112 ~
Te¡Wr™abËFe
(è
	gov”ride
;

113 
Stus
 
Aµ’d
(cÚ¡ 
Sliû
& 
d©a
è
	gov”ride
;

114 
Stus
 
Clo£
(è
	gov”ride
;

115 
Stus
 
Flush
(è
	gov”ride
;

116 
Stus
 
Sync
(è
	gov”ride
;

118 
	g´iv©e
:

119 
FeS‹
 
¡©e_
;

120 
Wr™abËFe
* 
	grg‘_
;

121 
boŞ
 
	gwr™abË_fe_İ’ed_
;

122 
FauÉInjeùiÚTe¡Env
* 
	g’v_
;

124 
Stus
 
SyncP¬’t
();

127 şas 
	cFauÉInjeùiÚTe¡Env
 : 
public
 
EnvW¿µ”
 {

128 
public
:

129 
FauÉInjeùiÚTe¡Env
()

130 : 
EnvW¿µ”
(
Env
::
DeçuÉ
()), 
fesy¡em_aùive_
(
Œue
) {}

131 ~
FauÉInjeùiÚTe¡Env
(è
	gov”ride
 = ;

132 
Stus
 
NewWr™abËFe
(cÚ¡ 
¡d
::
¡ršg
& 
âame
,

133 
Wr™abËFe
** 
»suÉ
è
	gov”ride
;

134 
Stus
 
NewAµ’dabËFe
(cÚ¡ 
¡d
::
¡ršg
& 
âame
,

135 
Wr™abËFe
** 
»suÉ
è
	gov”ride
;

136 
Stus
 
RemoveFe
(cÚ¡ 
¡d
::
¡ršg
& 
f
è
ov”ride
;

137 
Stus
 
R’ameFe
(cÚ¡ 
¡d
::
¡ršg
& 
s
, cÚ¡ std::¡ršg& 
t
è
ov”ride
;

139 
Wr™abËFeClo£d
(cÚ¡ 
FeS‹
& 
¡©e
);

140 
Stus
 
DrİUnsynûdFeD©a
();

141 
Stus
 
RemoveFesC»©edAá”La¡DœSync
();

142 
DœWasSynûd
();

143 
boŞ
 
IsFeC»©edSšûLa¡DœSync
(cÚ¡ 
¡d
::
¡ršg
& 
f’ame
);

144 
Re£tS‹
();

145 
UÁ¿ckFe
(cÚ¡ 
¡d
::
¡ršg
& 
f
);

150 
boŞ
 
IsFesy¡emAùive
(è
LOCKS_EXCLUDED
(
mu‹x_
) {

151 
Mu‹xLock
 
l
(&
mu‹x_
);

152  
	gfesy¡em_aùive_
;

154 
S‘Fesy¡emAùive
(
boŞ
 
aùive
è
LOCKS_EXCLUDED
(
mu‹x_
) {

155 
Mu‹xLock
 
l
(&
mu‹x_
);

156 
	gfesy¡em_aùive_
 = 
aùive
;

159 
	g´iv©e
:

160 
pÜt
::
Mu‹x
 
mu‹x_
;

161 
	g¡d
::
m­
<
¡d
::
¡ršg
, 
	gFeS‹
> 
db_fe_¡©e_
 
GUARDED_BY
(
mu‹x_
);

162 
	g¡d
::
£t
<
¡d
::
¡ršg
> 
Ãw_fes_sšû_Ï¡_dœ_sync_
 
GUARDED_BY
(
mu‹x_
);

163 
boŞ
 
fesy¡em_aùive_
 
GUARDED_BY
(
mu‹x_
);

166 
	gTe¡Wr™abËFe
::
	$Te¡Wr™abËFe
(cÚ¡ 
FeS‹
& 
¡©e
, 
Wr™abËFe
* 
f
,

167 
FauÉInjeùiÚTe¡Env
* 
’v
)

168 : 
	`¡©e_
(
¡©e
), 
	`rg‘_
(
f
), 
	`wr™abË_fe_İ’ed_
(
Œue
), 
	$’v_
(
’v
) {

169 
	`as£¹
(
f
 !ğ
nuÎ±r
);

170 
	}
}

172 
	gTe¡Wr™abËFe
::~
	$Te¡Wr™abËFe
() {

173 ià(
wr™abË_fe_İ’ed_
) {

174 
	`Clo£
();

176 
d–‘e
 
rg‘_
;

177 
	}
}

179 
Stus
 
	gTe¡Wr™abËFe
::
	$Aµ’d
(cÚ¡ 
Sliû
& 
d©a
) {

180 
Stus
 
s
 = 
rg‘_
->
	`Aµ’d
(
d©a
);

181 ià(
s
.
	`ok
(è&& 
’v_
->
	`IsFesy¡emAùive
()) {

182 
¡©e_
.
pos_
 +ğ
d©a
.
	`size
();

184  
s
;

185 
	}
}

187 
Stus
 
	gTe¡Wr™abËFe
::
	$Clo£
() {

188 
wr™abË_fe_İ’ed_
 = 
çl£
;

189 
Stus
 
s
 = 
rg‘_
->
	`Clo£
();

190 ià(
s
.
	`ok
()) {

191 
’v_
->
	`Wr™abËFeClo£d
(
¡©e_
);

193  
s
;

194 
	}
}

196 
Stus
 
	gTe¡Wr™abËFe
::
	$Flush
() {

197 
Stus
 
s
 = 
rg‘_
->
	`Flush
();

198 ià(
s
.
	`ok
(è&& 
’v_
->
	`IsFesy¡emAùive
()) {

199 
¡©e_
.
pos_©_Ï¡_æush_
 = s‹_.
pos_
;

201  
s
;

202 
	}
}

204 
Stus
 
	gTe¡Wr™abËFe
::
	$SyncP¬’t
() {

205 
Stus
 
s
 = 
	`SyncDœ
(
	`G‘DœName
(
¡©e_
.
f’ame_
));

206 ià(
s
.
	`ok
()) {

207 
’v_
->
	`DœWasSynûd
();

209  
s
;

210 
	}
}

212 
Stus
 
	gTe¡Wr™abËFe
::
	$Sync
() {

213 ià(!
’v_
->
	`IsFesy¡emAùive
()) {

214  
Stus
::
	`OK
();

217 
Stus
 
s
 = 
rg‘_
->
	`Sync
();

218 ià(
s
.
	`ok
()) {

219 
¡©e_
.
pos_©_Ï¡_sync_
 = s‹_.
pos_
;

221 ià(
’v_
->
	`IsFeC»©edSšûLa¡DœSync
(
¡©e_
.
f’ame_
)) {

222 
Stus
 
ps
 = 
	`SyncP¬’t
();

223 ià(
s
.
	`ok
(è&& !
ps
.ok()) {

224 
s
 = 
ps
;

227  
s
;

228 
	}
}

230 
Stus
 
	gFauÉInjeùiÚTe¡Env
::
	$NewWr™abËFe
(cÚ¡ 
¡d
::
¡ršg
& 
âame
,

231 
Wr™abËFe
** 
»suÉ
) {

232 
Wr™abËFe
* 
aùu®_wr™abË_fe
;

233 
Stus
 
s
 = 
	`rg‘
()->
	`NewWr™abËFe
(
âame
, &
aùu®_wr™abË_fe
);

234 ià(
s
.
	`ok
()) {

235 
FeS‹
 
	`¡©e
(
âame
);

236 
¡©e
.
pos_
 = 0;

237 *
»suÉ
 = 
Ãw
 
	`Te¡Wr™abËFe
(
¡©e
, 
aùu®_wr™abË_fe
, 
this
);

241 
	`UÁ¿ckFe
(
âame
);

242 
Mu‹xLock
 
	`l
(&
mu‹x_
);

243 
Ãw_fes_sšû_Ï¡_dœ_sync_
.
	`š£¹
(
âame
);

245  
s
;

246 
	}
}

248 
Stus
 
	gFauÉInjeùiÚTe¡Env
::
	$NewAµ’dabËFe
(cÚ¡ 
¡d
::
¡ršg
& 
âame
,

249 
Wr™abËFe
** 
»suÉ
) {

250 
Wr™abËFe
* 
aùu®_wr™abË_fe
;

251 
Stus
 
s
 = 
	`rg‘
()->
	`NewAµ’dabËFe
(
âame
, &
aùu®_wr™abË_fe
);

252 ià(
s
.
	`ok
()) {

253 
FeS‹
 
	`¡©e
(
âame
);

254 
¡©e
.
pos_
 = 0;

256 
Mu‹xLock
 
	`l
(&
mu‹x_
);

257 ià(
db_fe_¡©e_
.
	`couÁ
(
âame
) == 0) {

258 
Ãw_fes_sšû_Ï¡_dœ_sync_
.
	`š£¹
(
âame
);

260 
¡©e
 = 
db_fe_¡©e_
[
âame
];

263 *
»suÉ
 = 
Ãw
 
	`Te¡Wr™abËFe
(
¡©e
, 
aùu®_wr™abË_fe
, 
this
);

265  
s
;

266 
	}
}

268 
Stus
 
	gFauÉInjeùiÚTe¡Env
::
	$DrİUnsynûdFeD©a
() {

269 
Stus
 
s
;

270 
Mu‹xLock
 
	`l
(&
mu‹x_
);

271 cÚ¡‡uto& 
kvp
 : 
db_fe_¡©e_
) {

272 ià(!
s
.
	`ok
()) {

275 cÚ¡ 
FeS‹
& 
¡©e
 = 
kvp
.
£cÚd
;

276 ià(!
¡©e
.
	`IsFuÎySynûd
()) {

277 
s
 = 
¡©e
.
	`DrİUnsynûdD©a
();

280  
s
;

281 
	}
}

283 
	gFauÉInjeùiÚTe¡Env
::
	$DœWasSynûd
() {

284 
Mu‹xLock
 
	`l
(&
mu‹x_
);

285 
Ãw_fes_sšû_Ï¡_dœ_sync_
.
	`ş—r
();

286 
	}
}

288 
boŞ
 
	gFauÉInjeùiÚTe¡Env
::
	$IsFeC»©edSšûLa¡DœSync
(

289 cÚ¡ 
¡d
::
¡ršg
& 
f’ame
) {

290 
Mu‹xLock
 
	`l
(&
mu‹x_
);

291  
Ãw_fes_sšû_Ï¡_dœ_sync_
.
	`fšd
(
f’ame
) !=

292 
Ãw_fes_sšû_Ï¡_dœ_sync_
.
	`’d
();

293 
	}
}

295 
	gFauÉInjeùiÚTe¡Env
::
	$UÁ¿ckFe
(cÚ¡ 
¡d
::
¡ršg
& 
f
) {

296 
Mu‹xLock
 
	`l
(&
mu‹x_
);

297 
db_fe_¡©e_
.
	`”a£
(
f
);

298 
Ãw_fes_sšû_Ï¡_dœ_sync_
.
	`”a£
(
f
);

299 
	}
}

301 
Stus
 
	gFauÉInjeùiÚTe¡Env
::
	$RemoveFe
(cÚ¡ 
¡d
::
¡ršg
& 
f
) {

302 
Stus
 
s
 = 
EnvW¿µ”
::
	`RemoveFe
(
f
);

303 
	`EXPECT_LEVELDB_OK
(
s
);

304 ià(
s
.
	`ok
()) {

305 
	`UÁ¿ckFe
(
f
);

307  
s
;

308 
	}
}

310 
Stus
 
	gFauÉInjeùiÚTe¡Env
::
	$R’ameFe
(cÚ¡ 
¡d
::
¡ršg
& 
s
,

311 cÚ¡ 
¡d
::
¡ršg
& 
t
) {

312 
Stus
 
»t
 = 
EnvW¿µ”
::
	`R’ameFe
(
s
, 
t
);

314 ià(
»t
.
	`ok
()) {

315 
Mu‹xLock
 
	`l
(&
mu‹x_
);

316 ià(
db_fe_¡©e_
.
	`fšd
(
s
è!ğdb_fe_¡©e_.
	`’d
()) {

317 
db_fe_¡©e_
[
t
] = db_fe_¡©e_[
s
];

318 
db_fe_¡©e_
.
	`”a£
(
s
);

321 ià(
Ãw_fes_sšû_Ï¡_dœ_sync_
.
	`”a£
(
s
) != 0) {

322 
	`as£¹
(
Ãw_fes_sšû_Ï¡_dœ_sync_
.
	`fšd
(
t
) ==

323 
Ãw_fes_sšû_Ï¡_dœ_sync_
.
	`’d
());

324 
Ãw_fes_sšû_Ï¡_dœ_sync_
.
	`š£¹
(
t
);

328  
»t
;

329 
	}
}

331 
	gFauÉInjeùiÚTe¡Env
::
	$Re£tS‹
() {

335 
	`S‘Fesy¡emAùive
(
Œue
);

336 
	}
}

338 
Stus
 
	gFauÉInjeùiÚTe¡Env
::
	$RemoveFesC»©edAá”La¡DœSync
() {

340 
mu‹x_
.
	`Lock
();

341 
¡d
::
£t
<¡d::
¡ršg
> 
	`Ãw_fes
(
Ãw_fes_sšû_Ï¡_dœ_sync_
.
	`begš
(),

342 
Ãw_fes_sšû_Ï¡_dœ_sync_
.
	`’d
());

343 
mu‹x_
.
	`UÆock
();

344 
Stus
 
¡©us
;

345 cÚ¡‡uto& 
Ãw_fe
 : 
Ãw_fes
) {

346 
Stus
 
»move_¡©us
 = 
	`RemoveFe
(
Ãw_fe
);

347 ià(!
»move_¡©us
.
	`ok
(è&& 
¡©us
.ok()) {

348 
¡©us
 = 
¡d
::
	`move
(
»move_¡©us
);

351  
¡©us
;

352 
	}
}

354 
	gFauÉInjeùiÚTe¡Env
::
	$Wr™abËFeClo£d
(cÚ¡ 
FeS‹
& 
¡©e
) {

355 
Mu‹xLock
 
	`l
(&
mu‹x_
);

356 
db_fe_¡©e_
[
¡©e
.
f’ame_
] = state;

357 
	}
}

359 
Stus
 
	gFeS‹
::
	$DrİUnsynûdD©a
() const {

360 
št64_t
 
sync_pos
 = 
pos_©_Ï¡_sync_
 == -1 ? 0 :…os_at_last_sync_;

361  
	`Trunÿ‹
(
f’ame_
, 
sync_pos
);

362 
	}
}

364 şas 
	cFauÉInjeùiÚTe¡
 : 
public
 
‹¡šg
::
Te¡
 {

365 
public
:

366 
	eEx³ùedV”ifResuÉ
 { 
VAL_EXPECT_NO_ERROR
, 
	gVAL_EXPECT_ERROR
 };

367 
	eRe£tM‘hod
 { 
	gRESET_DROP_UNSYNCED_DATA
, 
	gRESET_DELETE_UNSYNCED_FILES
 };

369 
FauÉInjeùiÚTe¡Env
* 
	g’v_
;

370 
	g¡d
::
¡ršg
 
dbÇme_
;

371 
Cache
* 
	gtšy_ÿche_
;

372 
O±iÚs
 
	gİtiÚs_
;

373 
DB
* 
	gdb_
;

375 
FauÉInjeùiÚTe¡
()

376 : 
’v_
(
Ãw
 
FauÉInjeùiÚTe¡Env
),

377 
tšy_ÿche_
(
NewLRUCache
(100)),

378 
db_
(
nuÎ±r
) {

379 
	gdbÇme_
 = 
‹¡šg
::
TempDœ
() + "fault_test";

380 
De¡royDB
(
dbÇme_
, 
O±iÚs
());

381 
	gİtiÚs_
.
	g»u£_logs
 = 
Œue
;

382 
	gİtiÚs_
.
	g’v
 = 
’v_
;

383 
	gİtiÚs_
.
	g·¿noid_checks
 = 
Œue
;

384 
	gİtiÚs_
.
	gblock_ÿche
 = 
tšy_ÿche_
;

385 
	gİtiÚs_
.
	gü—‹_if_missšg
 = 
Œue
;

388 ~
FauÉInjeùiÚTe¡
() {

389 
Clo£DB
();

390 
De¡royDB
(
dbÇme_
, 
O±iÚs
());

391 
d–‘e
 
	gtšy_ÿche_
;

392 
d–‘e
 
	g’v_
;

395 
Reu£Logs
(
boŞ
 
»u£
è{ 
	gİtiÚs_
.
	g»u£_logs
 =„euse; }

397 
Bud
(
¡¬t_idx
, 
num_v®s
) {

398 
	g¡d
::
¡ršg
 
key_¥aû
, 
	gv®ue_¥aû
;

399 
Wr™eB©ch
 
	gb©ch
;

400 
	gi
 = 
¡¬t_idx
; i < 
	g¡¬t_idx
 + 
	gnum_v®s
; i++) {

401 
Sliû
 
	gkey
 = 
Key
(
i
, &
key_¥aû
);

402 
	gb©ch
.
CË¬
();

403 
	gb©ch
.
Put
(
key
, 
V®ue
(
i
, &
v®ue_¥aû
));

404 
Wr™eO±iÚs
 
	gİtiÚs
;

405 
ASSERT_LEVELDB_OK
(
db_
->
Wr™e
(
İtiÚs
, &
b©ch
));

409 
Stus
 
R—dV®ue
(
i
, 
¡d
::
¡ršg
* 
v®
) const {

410 
¡d
::
¡ršg
 
key_¥aû
, 
	gv®ue_¥aû
;

411 
Sliû
 
	gkey
 = 
Key
(
i
, &
key_¥aû
);

412 
V®ue
(
i
, &
v®ue_¥aû
);

413 
R—dO±iÚs
 
	gİtiÚs
;

414  
	gdb_
->
G‘
(
İtiÚs
, 
key
, 
v®
);

417 
Stus
 
V”ify
(
¡¬t_idx
, 
num_v®s
,

418 
Ex³ùedV”ifResuÉ
 
ex³ùed
) const {

419 
	g¡d
::
¡ršg
 
v®
;

420 
	g¡d
::
¡ršg
 
v®ue_¥aû
;

421 
Stus
 
	gs
;

422 
	gi
 = 
¡¬t_idx
; i < 
	g¡¬t_idx
 + 
	gnum_v®s
 && 
	gs
.
ok
(); i++) {

423 
V®ue
(
i
, &
v®ue_¥aû
);

424 
	gs
 = 
R—dV®ue
(
i
, &
v®
);

425 ià(
	gex³ùed
 =ğ
VAL_EXPECT_NO_ERROR
) {

426 ià(
s
.
ok
()) {

427 
EXPECT_EQ
(
v®ue_¥aû
, 
v®
);

429 } ià(
	gs
.
ok
()) {

430 
	g¡d
::
årštf
(
¡d”r
, "Ex³ùed‡À”rÜ‡ˆ%d, buˆwa OK\n", 
i
);

431 
	gs
 = 
Stus
::
IOE¼Ü
(
dbÇme_
, "Expected valueƒrror:");

433 
	gs
 = 
Stus
::
OK
();

436  
	gs
;

440 
Sliû
 
Key
(
i
, 
¡d
::
¡ršg
* 
¡Üage
) const {

441 
buf
[100];

442 
	g¡d
::
¢´štf
(
buf
, (buf), "%016d", 
i
);

443 
	g¡Üage
->
assign
(
buf
, 
¡¾’
(buf));

444  
Sliû
(*
¡Üage
);

448 
Sliû
 
V®ue
(
k
, 
¡d
::
¡ršg
* 
¡Üage
) const {

449 
Rªdom
 
r
(
k
);

450  
	g‹¡
::
RªdomSŒšg
(&
r
, 
kV®ueSize
, 
¡Üage
);

453 
Stus
 
O³nDB
() {

454 
d–‘e
 
	gdb_
;

455 
	gdb_
 = 
nuÎ±r
;

456 
	g’v_
->
Re£tS‹
();

457  
	gDB
::
O³n
(
İtiÚs_
, 
dbÇme_
, &
db_
);

460 
Clo£DB
() {

461 
d–‘e
 
	gdb_
;

462 
	gdb_
 = 
nuÎ±r
;

465 
D–‘eAÎD©a
() {

466 
I‹¿tÜ
* 
	g™”
 = 
db_
->
NewI‹¿tÜ
(
R—dO±iÚs
());

467 
	g™”
->
S“kToFœ¡
(); i‹r->
V®id
(); i‹r->
Next
()) {

468 
ASSERT_LEVELDB_OK
(
db_
->
D–‘e
(
Wr™eO±iÚs
(), 
™”
->
key
()));

471 
d–‘e
 
	g™”
;

474 
Re£tDBS‹
(
Re£tM‘hod
 
»£t_m‘hod
) {

475 
	g»£t_m‘hod
) {

476 
	gRESET_DROP_UNSYNCED_DATA
:

477 
ASSERT_LEVELDB_OK
(
’v_
->
DrİUnsynûdFeD©a
());

479 
	gRESET_DELETE_UNSYNCED_FILES
:

480 
ASSERT_LEVELDB_OK
(
’v_
->
RemoveFesC»©edAá”La¡DœSync
());

483 
as£¹
(
çl£
);

487 
P¬tŸlCom·ùTe¡P»FauÉ
(
num_´e_sync
, 
num_po¡_sync
) {

488 
D–‘eAÎD©a
();

489 
Bud
(0, 
num_´e_sync
);

490 
	gdb_
->
Com·ùRªge
(
nuÎ±r
,‚ullptr);

491 
Bud
(
num_´e_sync
, 
num_po¡_sync
);

494 
P¬tŸlCom·ùTe¡Reİ’W™hFauÉ
(
Re£tM‘hod
 
»£t_m‘hod
,

495 
num_´e_sync
, 
num_po¡_sync
) {

496 
	g’v_
->
S‘Fesy¡emAùive
(
çl£
);

497 
Clo£DB
();

498 
Re£tDBS‹
(
»£t_m‘hod
);

499 
ASSERT_LEVELDB_OK
(
O³nDB
());

500 
ASSERT_LEVELDB_OK
(

501 
V”ify
(0, 
num_´e_sync
, 
FauÉInjeùiÚTe¡
::
VAL_EXPECT_NO_ERROR
));

502 
ASSERT_LEVELDB_OK
(
V”ify
(
num_´e_sync
, 
num_po¡_sync
,

503 
FauÉInjeùiÚTe¡
::
VAL_EXPECT_ERROR
));

506 
NoWr™eTe¡P»FauÉ
() {}

508 
NoWr™eTe¡Reİ’W™hFauÉ
(
Re£tM‘hod
 
»£t_m‘hod
) {

509 
Clo£DB
();

510 
Re£tDBS‹
(
»£t_m‘hod
);

511 
ASSERT_LEVELDB_OK
(
O³nDB
());

514 
DoTe¡
() {

515 
Rªdom
 
ºd
(0);

516 
ASSERT_LEVELDB_OK
(
O³nDB
());

517 
size_t
 
	gidx
 = 0; idx < 
	gkNumI‹¿tiÚs
; idx++) {

518 
	gnum_´e_sync
 = 
ºd
.
UnifÜm
(
kMaxNumV®ues
);

519 
	gnum_po¡_sync
 = 
ºd
.
UnifÜm
(
kMaxNumV®ues
);

521 
P¬tŸlCom·ùTe¡P»FauÉ
(
num_´e_sync
, 
num_po¡_sync
);

522 
P¬tŸlCom·ùTe¡Reİ’W™hFauÉ
(
RESET_DROP_UNSYNCED_DATA
, 
num_´e_sync
,

523 
num_po¡_sync
);

525 
NoWr™eTe¡P»FauÉ
();

526 
NoWr™eTe¡Reİ’W™hFauÉ
(
RESET_DROP_UNSYNCED_DATA
);

528 
P¬tŸlCom·ùTe¡P»FauÉ
(
num_´e_sync
, 
num_po¡_sync
);

531 
P¬tŸlCom·ùTe¡Reİ’W™hFauÉ
(
RESET_DELETE_UNSYNCED_FILES
,

532 
num_´e_sync
 + 
num_po¡_sync
, 0);

534 
NoWr™eTe¡P»FauÉ
();

535 
NoWr™eTe¡Reİ’W™hFauÉ
(
RESET_DELETE_UNSYNCED_FILES
);

540 
	$TEST_F
(
FauÉInjeùiÚTe¡
, 
FauÉTe¡NoLogReu£
) {

541 
	`Reu£Logs
(
çl£
);

542 
	`DoTe¡
();

543 
	}
}

545 
	$TEST_F
(
FauÉInjeùiÚTe¡
, 
FauÉTe¡W™hLogReu£
) {

546 
	`Reu£Logs
(
Œue
);

547 
	`DoTe¡
();

548 
	}
}

	@db/filename.cc

5 
	~"db/f’ame.h
"

7 
	~<ÿs£¹
>

8 
	~<c¡dio
>

10 
	~"db/dbfÜm©.h
"

11 
	~"Ëv–db/’v.h
"

12 
	~"ut/loggšg.h
"

14 
Çme¥aû
 
	gËv–db
 {

17 
Stus
 
Wr™eSŒšgToFeSync
(
Env
* 
’v
, cÚ¡ 
Sliû
& 
d©a
,

18 cÚ¡ 
¡d
::
¡ršg
& 
âame
);

20 
	g¡d
::
¡ršg
 
MakeFeName
(cÚ¡ 
¡d
::¡ršg& 
dbÇme
, 
ušt64_t
 
numb”
,

21 cÚ¡ * 
suffix
) {

22 
	gbuf
[100];

23 
	g¡d
::
¢´štf
(
buf
, (buf), "/%06llu.%s",

24 
¡©ic_ÿ¡
<>(
numb”
), 
suffix
);

25  
	gdbÇme
 + 
	gbuf
;

28 
	g¡d
::
¡ršg
 
LogFeName
(cÚ¡ 
¡d
::¡ršg& 
dbÇme
, 
ušt64_t
 
numb”
) {

29 
as£¹
(
numb”
 > 0);

30  
MakeFeName
(
dbÇme
, 
numb”
, "log");

33 
	g¡d
::
¡ršg
 
TabËFeName
(cÚ¡ 
¡d
::¡ršg& 
dbÇme
, 
ušt64_t
 
numb”
) {

34 
as£¹
(
numb”
 > 0);

35  
MakeFeName
(
dbÇme
, 
numb”
, "ldb");

38 
	g¡d
::
¡ršg
 
SSTTabËFeName
(cÚ¡ 
¡d
::¡ršg& 
dbÇme
, 
ušt64_t
 
numb”
) {

39 
as£¹
(
numb”
 > 0);

40  
MakeFeName
(
dbÇme
, 
numb”
, "sst");

43 
	g¡d
::
¡ršg
 
DesütÜFeName
(cÚ¡ 
¡d
::¡ršg& 
dbÇme
, 
ušt64_t
 
numb”
) {

44 
as£¹
(
numb”
 > 0);

45 
	gbuf
[100];

46 
	g¡d
::
¢´štf
(
buf
, (buf), "/MANIFEST-%06llu",

47 
¡©ic_ÿ¡
<>(
numb”
));

48  
	gdbÇme
 + 
	gbuf
;

51 
	g¡d
::
¡ršg
 
Cu¼’tFeName
(cÚ¡ 
¡d
::¡ršg& 
dbÇme
) {

52  
dbÇme
 + "/CURRENT";

55 
	g¡d
::
¡ršg
 
LockFeName
(cÚ¡ 
¡d
::¡ršg& 
dbÇme
) {  dbname + "/LOCK"; }

57 
	g¡d
::
¡ršg
 
TempFeName
(cÚ¡ 
¡d
::¡ršg& 
dbÇme
, 
ušt64_t
 
numb”
) {

58 
as£¹
(
numb”
 > 0);

59  
MakeFeName
(
dbÇme
, 
numb”
, "dbtmp");

62 
	g¡d
::
¡ršg
 
InfoLogFeName
(cÚ¡ 
¡d
::¡ršg& 
dbÇme
) {

63  
dbÇme
 + "/LOG";

67 
	g¡d
::
¡ršg
 
OldInfoLogFeName
(cÚ¡ 
¡d
::¡ršg& 
dbÇme
) {

68  
dbÇme
 + "/LOG.old";

78 
boŞ
 
P¬£FeName
(cÚ¡ 
¡d
::
¡ršg
& 
f’ame
, 
ušt64_t
* 
numb”
,

79 
FeTy³
* 
ty³
) {

80 
Sliû
 
»¡
(
f’ame
);

81 ià(
	g»¡
 == "CURRENT") {

82 *
numb”
 = 0;

83 *
	gty³
 = 
kCu¼’tFe
;

84 } ià(
	g»¡
 == "LOCK") {

85 *
numb”
 = 0;

86 *
	gty³
 = 
kDBLockFe
;

87 } ià(
	g»¡
 =ğ"LOG" || 
»¡
 == "LOG.old") {

88 *
numb”
 = 0;

89 *
	gty³
 = 
kInfoLogFe
;

90 } ià(
	g»¡
.
¡¬ts_w™h
("MANIFEST-")) {

91 
	g»¡
.
»move_´efix
(
¡¾’
("MANIFEST-"));

92 
ušt64_t
 
	gnum
;

93 ià(!
CÚsumeDecim®Numb”
(&
»¡
, &
num
)) {

94  
	gçl£
;

96 ià(!
	g»¡
.
em±y
()) {

97  
	gçl£
;

99 *
	gty³
 = 
kDesütÜFe
;

100 *
	gnumb”
 = 
num
;

104 
ušt64_t
 
	gnum
;

105 ià(!
CÚsumeDecim®Numb”
(&
»¡
, &
num
)) {

106  
	gçl£
;

108 
Sliû
 
	gsuffix
 = 
»¡
;

109 ià(
	gsuffix
 =ğ
Sliû
(".log")) {

110 *
ty³
 = 
kLogFe
;

111 } ià(
	gsuffix
 =ğ
Sliû
(".s¡"è|| 
suffix
 == Slice(".ldb")) {

112 *
ty³
 = 
kTabËFe
;

113 } ià(
	gsuffix
 =ğ
Sliû
(".dbtmp")) {

114 *
ty³
 = 
kTempFe
;

116  
	gçl£
;

118 *
	gnumb”
 = 
num
;

120  
	gŒue
;

123 
Stus
 
S‘Cu¼’tFe
(
Env
* 
’v
, cÚ¡ 
¡d
::
¡ršg
& 
dbÇme
,

124 
ušt64_t
 
desütÜ_numb”
) {

126 
	g¡d
::
¡ršg
 
mªiã¡
 = 
DesütÜFeName
(
dbÇme
, 
desütÜ_numb”
);

127 
Sliû
 
	gcÚ‹Ás
 = 
mªiã¡
;

128 
as£¹
(
cÚ‹Ás
.
¡¬ts_w™h
(
dbÇme
 + "/"));

129 
	gcÚ‹Ás
.
»move_´efix
(
dbÇme
.
size
() + 1);

130 
	g¡d
::
¡ršg
 
tmp
 = 
TempFeName
(
dbÇme
, 
desütÜ_numb”
);

131 
Stus
 
	gs
 = 
Wr™eSŒšgToFeSync
(
’v
, 
cÚ‹Ás
.
ToSŒšg
(è+ "\n", 
tmp
);

132 ià(
	gs
.
ok
()) {

133 
	gs
 = 
’v
->
R’ameFe
(
tmp
, 
Cu¼’tFeName
(
dbÇme
));

135 ià(!
	gs
.
ok
()) {

136 
	g’v
->
RemoveFe
(
tmp
);

138  
	gs
;

	@db/filename.h

7 #iâdeà
STORAGE_LEVELDB_DB_FILENAME_H_


8 
	#STORAGE_LEVELDB_DB_FILENAME_H_


	)

10 
	~<c¡dšt
>

11 
	~<¡ršg
>

13 
	~"Ëv–db/¦iû.h
"

14 
	~"Ëv–db/¡©us.h
"

15 
	~"pÜt/pÜt.h
"

17 
Çme¥aû
 
	gËv–db
 {

19 
şass
 
	gEnv
;

21 
	eFeTy³
 {

22 
	gkLogFe
,

23 
	gkDBLockFe
,

24 
	gkTabËFe
,

25 
	gkDesütÜFe
,

26 
	gkCu¼’tFe
,

27 
	gkTempFe
,

28 
	gkInfoLogFe


34 
	g¡d
::
¡ršg
 
LogFeName
(cÚ¡ 
¡d
::¡ršg& 
dbÇme
, 
ušt64_t
 
numb”
);

39 
	g¡d
::
¡ršg
 
TabËFeName
(cÚ¡ 
¡d
::¡ršg& 
dbÇme
, 
ušt64_t
 
numb”
);

44 
	g¡d
::
¡ršg
 
SSTTabËFeName
(cÚ¡ 
¡d
::¡ršg& 
dbÇme
, 
ušt64_t
 
numb”
);

49 
	g¡d
::
¡ršg
 
DesütÜFeName
(cÚ¡ 
¡d
::¡ršg& 
dbÇme
, 
ušt64_t
 
numb”
);

54 
	g¡d
::
¡ršg
 
Cu¼’tFeName
(cÚ¡ 
¡d
::¡ršg& 
dbÇme
);

58 
	g¡d
::
¡ršg
 
LockFeName
(cÚ¡ 
¡d
::¡ršg& 
dbÇme
);

62 
	g¡d
::
¡ršg
 
TempFeName
(cÚ¡ 
¡d
::¡ršg& 
dbÇme
, 
ušt64_t
 
numb”
);

65 
	g¡d
::
¡ršg
 
InfoLogFeName
(cÚ¡ 
¡d
::¡ršg& 
dbÇme
);

68 
	g¡d
::
¡ršg
 
OldInfoLogFeName
(cÚ¡ 
¡d
::¡ršg& 
dbÇme
);

73 
boŞ
 
P¬£FeName
(cÚ¡ 
¡d
::
¡ršg
& 
f’ame
, 
ušt64_t
* 
numb”
,

74 
FeTy³
* 
ty³
);

78 
Stus
 
S‘Cu¼’tFe
(
Env
* 
’v
, cÚ¡ 
¡d
::
¡ršg
& 
dbÇme
,

79 
ušt64_t
 
desütÜ_numb”
);

	@db/filename_test.cc

5 
	~"db/f’ame.h
"

7 
	~"g‹¡/g‹¡.h
"

8 
	~"db/dbfÜm©.h
"

9 
	~"pÜt/pÜt.h
"

10 
	~"ut/loggšg.h
"

12 
Çme¥aû
 
	gËv–db
 {

14 
TEST
(
FeNameTe¡
, 
P¬£
) {

15 
Sliû
 
	gdb
;

16 
FeTy³
 
	gty³
;

17 
ušt64_t
 
	gnumb”
;

21 cÚ¡ * 
	gâame
;

22 
ušt64_t
 
	gnumb”
;

23 
FeTy³
 
	gty³
;

24 } 
	gÿ£s
[] = {

25 {"100.log", 100, 
kLogFe
},

26 {"0.log", 0, 
kLogFe
},

27 {"0.s¡", 0, 
kTabËFe
},

28 {"0.ldb", 0, 
kTabËFe
},

29 {"CURRENT", 0, 
kCu¼’tFe
},

30 {"LOCK", 0, 
kDBLockFe
},

31 {"MANIFEST-2", 2, 
kDesütÜFe
},

32 {"MANIFEST-7", 7, 
kDesütÜFe
},

33 {"LOG", 0, 
kInfoLogFe
},

34 {"LOG.Şd", 0, 
kInfoLogFe
},

35 {"18446744073709551615.log", 18446744073709551615uÎ, 
kLogFe
},

37 
	gi
 = 0; i < (
	gÿ£s
) / (cases[0]); i++) {

38 
	g¡d
::
¡ršg
 
f
 = 
ÿ£s
[
i
].
âame
;

39 
ASSERT_TRUE
(
P¬£FeName
(
f
, &
numb”
, &
ty³
)è<< 
	gf
;

40 
ASSERT_EQ
(
ÿ£s
[
i
].
ty³
,y³è<< 
	gf
;

41 
ASSERT_EQ
(
ÿ£s
[
i
].
numb”
,‚umb”è<< 
	gf
;

45 cÚ¡ * 
	g”rÜs
[] = {"",

67 
	gi
 = 0; i < (
	g”rÜs
) / (errors[0]); i++) {

68 
	g¡d
::
¡ršg
 
f
 = 
”rÜs
[
i
];

69 
ASSERT_TRUE
(!
P¬£FeName
(
f
, &
numb”
, &
ty³
)è<< 
	gf
;

73 
TEST
(
FeNameTe¡
, 
CÚ¡ruùiÚ
) {

74 
ušt64_t
 
	gnumb”
;

75 
FeTy³
 
	gty³
;

76 
	g¡d
::
¡ršg
 
âame
;

78 
	gâame
 = 
Cu¼’tFeName
("foo");

79 
ASSERT_EQ
("foo/", 
¡d
::
¡ršg
(
âame
.
d©a
(), 4));

80 
ASSERT_TRUE
(
P¬£FeName
(
âame
.
c_¡r
(è+ 4, &
numb”
, &
ty³
));

81 
ASSERT_EQ
(0, 
numb”
);

82 
ASSERT_EQ
(
kCu¼’tFe
, 
ty³
);

84 
	gâame
 = 
LockFeName
("foo");

85 
ASSERT_EQ
("foo/", 
¡d
::
¡ršg
(
âame
.
d©a
(), 4));

86 
ASSERT_TRUE
(
P¬£FeName
(
âame
.
c_¡r
(è+ 4, &
numb”
, &
ty³
));

87 
ASSERT_EQ
(0, 
numb”
);

88 
ASSERT_EQ
(
kDBLockFe
, 
ty³
);

90 
	gâame
 = 
LogFeName
("foo", 192);

91 
ASSERT_EQ
("foo/", 
¡d
::
¡ršg
(
âame
.
d©a
(), 4));

92 
ASSERT_TRUE
(
P¬£FeName
(
âame
.
c_¡r
(è+ 4, &
numb”
, &
ty³
));

93 
ASSERT_EQ
(192, 
numb”
);

94 
ASSERT_EQ
(
kLogFe
, 
ty³
);

96 
	gâame
 = 
TabËFeName
("bar", 200);

97 
ASSERT_EQ
("b¬/", 
¡d
::
¡ršg
(
âame
.
d©a
(), 4));

98 
ASSERT_TRUE
(
P¬£FeName
(
âame
.
c_¡r
(è+ 4, &
numb”
, &
ty³
));

99 
ASSERT_EQ
(200, 
numb”
);

100 
ASSERT_EQ
(
kTabËFe
, 
ty³
);

102 
	gâame
 = 
DesütÜFeName
("bar", 100);

103 
ASSERT_EQ
("b¬/", 
¡d
::
¡ršg
(
âame
.
d©a
(), 4));

104 
ASSERT_TRUE
(
P¬£FeName
(
âame
.
c_¡r
(è+ 4, &
numb”
, &
ty³
));

105 
ASSERT_EQ
(100, 
numb”
);

106 
ASSERT_EQ
(
kDesütÜFe
, 
ty³
);

108 
	gâame
 = 
TempFeName
("tmp", 999);

109 
ASSERT_EQ
("tmp/", 
¡d
::
¡ršg
(
âame
.
d©a
(), 4));

110 
ASSERT_TRUE
(
P¬£FeName
(
âame
.
c_¡r
(è+ 4, &
numb”
, &
ty³
));

111 
ASSERT_EQ
(999, 
numb”
);

112 
ASSERT_EQ
(
kTempFe
, 
ty³
);

114 
	gâame
 = 
InfoLogFeName
("foo");

115 
ASSERT_EQ
("foo/", 
¡d
::
¡ršg
(
âame
.
d©a
(), 4));

116 
ASSERT_TRUE
(
P¬£FeName
(
âame
.
c_¡r
(è+ 4, &
numb”
, &
ty³
));

117 
ASSERT_EQ
(0, 
numb”
);

118 
ASSERT_EQ
(
kInfoLogFe
, 
ty³
);

120 
	gâame
 = 
OldInfoLogFeName
("foo");

121 
ASSERT_EQ
("foo/", 
¡d
::
¡ršg
(
âame
.
d©a
(), 4));

122 
ASSERT_TRUE
(
P¬£FeName
(
âame
.
c_¡r
(è+ 4, &
numb”
, &
ty³
));

123 
ASSERT_EQ
(0, 
numb”
);

124 
ASSERT_EQ
(
kInfoLogFe
, 
ty³
);

	@db/leveldbutil.cc

5 
	~<c¡dio
>

7 
	~"Ëv–db/dumpfe.h
"

8 
	~"Ëv–db/’v.h
"

9 
	~"Ëv–db/¡©us.h
"

11 
Çme¥aû
 
	gËv–db
 {

12 
	gÇme¥aû
 {

14 şas 
	cStdoutPrš‹r
 : 
public
 
Wr™abËFe
 {

15 
public
:

16 
Stus
 
Aµ’d
(cÚ¡ 
Sliû
& 
d©a
è
ov”ride
 {

17 
fwr™e
(
d©a
.d©a(), 1, d©a.
size
(), 
¡dout
);

18  
	gStus
::
OK
();

20 
Stus
 
Clo£
(è
	gov”ride
 {  
	gStus
::
OK
(); }

21 
Stus
 
Flush
(è
	gov”ride
 {  
	gStus
::
OK
(); }

22 
Stus
 
Sync
(è
	gov”ride
 {  
	gStus
::
OK
(); }

25 
boŞ
 
HªdËDumpCommªd
(
Env
* 
’v
, ** 
fes
, 
num
) {

26 
StdoutPrš‹r
 
	g´š‹r
;

27 
boŞ
 
	gok
 = 
Œue
;

28 
	gi
 = 0; i < 
	gnum
; i++) {

29 
Stus
 
	gs
 = 
DumpFe
(
’v
, 
fes
[
i
], &
´š‹r
);

30 ià(!
	gs
.
ok
()) {

31 
	g¡d
::
årštf
(
¡d”r
, "%s\n", 
s
.
ToSŒšg
().
c_¡r
());

32 
	gok
 = 
çl£
;

35  
	gok
;

41 
	$U§ge
() {

42 
¡d
::
	`årštf
(

43 
¡d”r
,

46 
	}
}

48 
	$maš
(
¬gc
, ** 
¬gv
) {

49 
Ëv–db
::
Env
* 
’v
 =†ev–db::Env::
	`DeçuÉ
();

50 
boŞ
 
ok
 = 
Œue
;

51 ià(
¬gc
 < 2) {

52 
	`U§ge
();

53 
ok
 = 
çl£
;

55 
¡d
::
¡ršg
 
commªd
 = 
¬gv
[1];

56 ià(
commªd
 == "dump") {

57 
ok
 = 
Ëv–db
::
	`HªdËDumpCommªd
(
’v
, 
¬gv
 + 2, 
¬gc
 - 2);

59 
	`U§ge
();

60 
ok
 = 
çl£
;

63  (
ok
 ? 0 : 1);

64 
	}
}

	@db/log_format.h

8 #iâdeà
STORAGE_LEVELDB_DB_LOG_FORMAT_H_


9 
	#STORAGE_LEVELDB_DB_LOG_FORMAT_H_


	)

11 
Çme¥aû
 
	gËv–db
 {

12 
Çme¥aû
 
	glog
 {

14 
	eRecÜdTy³
 {

16 
	gkZ”oTy³
 = 0,

18 
	gkFuÎTy³
 = 1,

21 
	gkFœ¡Ty³
 = 2,

22 
	gkMiddËTy³
 = 3,

23 
	gkLa¡Ty³
 = 4

25 cÚ¡ 
	gkMaxRecÜdTy³
 = 
kLa¡Ty³
;

27 cÚ¡ 
	gkBlockSize
 = 32768;

30 cÚ¡ 
	gkH—d”Size
 = 4 + 2 + 1;

	@db/log_reader.cc

5 
	~"db/log_»ad”.h
"

7 
	~<c¡dio
>

9 
	~"Ëv–db/’v.h
"

10 
	~"ut/codšg.h
"

11 
	~"ut/üc32c.h
"

13 
Çme¥aû
 
	gËv–db
 {

14 
Çme¥aû
 
	glog
 {

16 
	gR—d”
::
R•Ü‹r
::~Reporter() = ;

18 
	gR—d”
::
R—d”
(
Sequ’tŸlFe
* 
fe
, 
R•Ü‹r
* 
»pÜ‹r
, 
boŞ
 
checksum
,

19 
ušt64_t
 
š™Ÿl_off£t
)

20 : 
fe_
(
fe
),

21 
»pÜ‹r_
(
»pÜ‹r
),

22 
checksum_
(
checksum
),

23 
backšg_¡Üe_
(
Ãw
 [
kBlockSize
]),

24 
bufãr_
(),

25 
eof_
(
çl£
),

26 
Ï¡_»cÜd_off£t_
(0),

27 
’d_of_bufãr_off£t_
(0),

28 
š™Ÿl_off£t_
(
š™Ÿl_off£t
),

29 
»syncšg_
(
š™Ÿl_off£t
 > 0) {}

31 
	gR—d”
::~
R—d”
(è{ 
d–‘e
[] 
backšg_¡Üe_
; }

33 
boŞ
 
	gR—d”
::
SkToIn™ŸlBlock
() {

34 cÚ¡ 
size_t
 
off£t_š_block
 = 
š™Ÿl_off£t_
 % 
kBlockSize
;

35 
ušt64_t
 
	gblock_¡¬t_loÿtiÚ
 = 
š™Ÿl_off£t_
 - 
off£t_š_block
;

38 ià(
	goff£t_š_block
 > 
	gkBlockSize
 - 6) {

39 
	gblock_¡¬t_loÿtiÚ
 +ğ
kBlockSize
;

42 
	g’d_of_bufãr_off£t_
 = 
block_¡¬t_loÿtiÚ
;

45 ià(
	gblock_¡¬t_loÿtiÚ
 > 0) {

46 
Stus
 
	gsk_¡©us
 = 
fe_
->
Sk
(
block_¡¬t_loÿtiÚ
);

47 ià(!
	gsk_¡©us
.
ok
()) {

48 
R•ÜtDrİ
(
block_¡¬t_loÿtiÚ
, 
sk_¡©us
);

49  
	gçl£
;

53  
	gŒue
;

56 
boŞ
 
	gR—d”
::
R—dRecÜd
(
Sliû
* 
»cÜd
, 
¡d
::
¡ršg
* 
sü©ch
) {

57 ià(
Ï¡_»cÜd_off£t_
 < 
š™Ÿl_off£t_
) {

58 ià(!
SkToIn™ŸlBlock
()) {

59  
çl£
;

63 
	gsü©ch
->
ş—r
();

64 
	g»cÜd
->
ş—r
();

65 
boŞ
 
	gš_äagm’‹d_»cÜd
 = 
çl£
;

68 
ušt64_t
 
	g´o¥eùive_»cÜd_off£t
 = 0;

70 
Sliû
 
	gäagm’t
;

71 
	gŒue
) {

72 cÚ¡ 
	g»cÜd_ty³
 = 
R—dPhysiÿlRecÜd
(&
äagm’t
);

77 
ušt64_t
 
	gphysiÿl_»cÜd_off£t
 =

78 
’d_of_bufãr_off£t_
 - 
bufãr_
.
size
(è- 
kH—d”Size
 - 
äagm’t
.size();

80 ià(
	g»syncšg_
) {

81 ià(
	g»cÜd_ty³
 =ğ
kMiddËTy³
) {

83 } ià(
	g»cÜd_ty³
 =ğ
kLa¡Ty³
) {

84 
»syncšg_
 = 
çl£
;

87 
	g»syncšg_
 = 
çl£
;

91 
	g»cÜd_ty³
) {

92 
	gkFuÎTy³
:

93 ià(
š_äagm’‹d_»cÜd
) {

98 ià(!
sü©ch
->
em±y
()) {

99 
R•ÜtCÜru±iÚ
(
sü©ch
->
size
(), "partial„ecord withoutƒnd(1)");

102 
	g´o¥eùive_»cÜd_off£t
 = 
physiÿl_»cÜd_off£t
;

103 
	gsü©ch
->
ş—r
();

104 *
	g»cÜd
 = 
äagm’t
;

105 
	gÏ¡_»cÜd_off£t_
 = 
´o¥eùive_»cÜd_off£t
;

106  
	gŒue
;

108 
	gkFœ¡Ty³
:

109 ià(
š_äagm’‹d_»cÜd
) {

114 ià(!
sü©ch
->
em±y
()) {

115 
R•ÜtCÜru±iÚ
(
sü©ch
->
size
(), "partial„ecord withoutƒnd(2)");

118 
	g´o¥eùive_»cÜd_off£t
 = 
physiÿl_»cÜd_off£t
;

119 
	gsü©ch
->
assign
(
äagm’t
.
d©a
(), f¿gm’t.
size
());

120 
	gš_äagm’‹d_»cÜd
 = 
Œue
;

123 
	gkMiddËTy³
:

124 ià(!
š_äagm’‹d_»cÜd
) {

125 
R•ÜtCÜru±iÚ
(
äagm’t
.
size
(),

128 
	gsü©ch
->
­³nd
(
äagm’t
.
d©a
(), f¿gm’t.
size
());

132 
	gkLa¡Ty³
:

133 ià(!
š_äagm’‹d_»cÜd
) {

134 
R•ÜtCÜru±iÚ
(
äagm’t
.
size
(),

137 
	gsü©ch
->
­³nd
(
äagm’t
.
d©a
(), f¿gm’t.
size
());

138 *
	g»cÜd
 = 
Sliû
(*
sü©ch
);

139 
	gÏ¡_»cÜd_off£t_
 = 
´o¥eùive_»cÜd_off£t
;

140  
	gŒue
;

144 
	gkEof
:

145 ià(
š_äagm’‹d_»cÜd
) {

149 
sü©ch
->
ş—r
();

151  
	gçl£
;

153 
	gkBadRecÜd
:

154 ià(
š_äagm’‹d_»cÜd
) {

155 
R•ÜtCÜru±iÚ
(
sü©ch
->
size
(), "error in middle of„ecord");

156 
	gš_äagm’‹d_»cÜd
 = 
çl£
;

157 
	gsü©ch
->
ş—r
();

162 
buf
[40];

163 
	g¡d
::
¢´štf
(
buf
, (buf), "unknowÀ»cÜdy³ %u", 
»cÜd_ty³
);

164 
R•ÜtCÜru±iÚ
(

165 (
äagm’t
.
size
(è+ (
š_äagm’‹d_»cÜd
 ? 
sü©ch
->size() : 0)),

166 
buf
);

167 
	gš_äagm’‹d_»cÜd
 = 
çl£
;

168 
	gsü©ch
->
ş—r
();

173  
	gçl£
;

176 
ušt64_t
 
	gR—d”
::
La¡RecÜdOff£t
(è{  
Ï¡_»cÜd_off£t_
; }

178 
	gR—d”
::
R•ÜtCÜru±iÚ
(
ušt64_t
 
by‹s
, cÚ¡ * 
»asÚ
) {

179 
R•ÜtDrİ
(
by‹s
, 
Stus
::
CÜru±iÚ
(
»asÚ
));

182 
	gR—d”
::
R•ÜtDrİ
(
ušt64_t
 
by‹s
, cÚ¡ 
Stus
& 
»asÚ
) {

183 ià(
	g»pÜ‹r_
 !ğ
nuÎ±r
 &&

184 
’d_of_bufãr_off£t_
 - 
bufãr_
.
size
(è- 
by‹s
 >ğ
š™Ÿl_off£t_
) {

185 
»pÜ‹r_
->
CÜru±iÚ
(
¡©ic_ÿ¡
<
size_t
>(
by‹s
), 
»asÚ
);

189 
	gR—d”
::
R—dPhysiÿlRecÜd
(
Sliû
* 
»suÉ
) {

190 
Œue
) {

191 ià(
bufãr_
.
size
(è< 
kH—d”Size
) {

192 ià(!
eof_
) {

194 
bufãr_
.
ş—r
();

195 
Stus
 
	g¡©us
 = 
fe_
->
R—d
(
kBlockSize
, &
bufãr_
, 
backšg_¡Üe_
);

196 
	g’d_of_bufãr_off£t_
 +ğ
bufãr_
.
size
();

197 ià(!
	g¡©us
.
ok
()) {

198 
	gbufãr_
.
ş—r
();

199 
R•ÜtDrİ
(
kBlockSize
, 
¡©us
);

200 
	geof_
 = 
Œue
;

201  
	gkEof
;

202 } ià(
	gbufãr_
.
size
(è< 
	gkBlockSize
) {

203 
	geof_
 = 
Œue
;

211 
	gbufãr_
.
ş—r
();

212  
	gkEof
;

217 cÚ¡ * 
	gh—d”
 = 
bufãr_
.
d©a
();

218 cÚ¡ 
ušt32_t
 
	ga
 = 
¡©ic_ÿ¡
<ušt32_t>(
h—d”
[4]) & 0xff;

219 cÚ¡ 
ušt32_t
 
	gb
 = 
¡©ic_ÿ¡
<ušt32_t>(
h—d”
[5]) & 0xff;

220 cÚ¡ 
	gty³
 = 
h—d”
[6];

221 cÚ¡ 
ušt32_t
 
	gËngth
 = 
a
 | (
b
 << 8);

222 ià(
	gkH—d”Size
 + 
	gËngth
 > 
	gbufãr_
.
size
()) {

223 
size_t
 
	gdrİ_size
 = 
bufãr_
.
size
();

224 
	gbufãr_
.
ş—r
();

225 ià(!
	geof_
) {

226 
R•ÜtCÜru±iÚ
(
drİ_size
, "bad„ecord†ength");

227  
	gkBadRecÜd
;

232  
	gkEof
;

235 ià(
	gty³
 =ğ
kZ”oTy³
 && 
Ëngth
 == 0) {

239 
bufãr_
.
ş—r
();

240  
	gkBadRecÜd
;

244 ià(
	gchecksum_
) {

245 
ušt32_t
 
	gex³ùed_üc
 = 
üc32c
::
Unmask
(
DecodeFixed32
(
h—d”
));

246 
ušt32_t
 
	gaùu®_üc
 = 
üc32c
::
V®ue
(
h—d”
 + 6, 1 + 
Ëngth
);

247 ià(
	gaùu®_üc
 !ğ
ex³ùed_üc
) {

252 
size_t
 
drİ_size
 = 
bufãr_
.
size
();

253 
	gbufãr_
.
ş—r
();

254 
R•ÜtCÜru±iÚ
(
drİ_size
, "checksum mismatch");

255  
	gkBadRecÜd
;

259 
	gbufãr_
.
»move_´efix
(
kH—d”Size
 + 
Ëngth
);

262 ià(
	g’d_of_bufãr_off£t_
 - 
	gbufãr_
.
size
(è- 
	gkH—d”Size
 - 
	gËngth
 <

263 
	gš™Ÿl_off£t_
) {

264 
	g»suÉ
->
ş—r
();

265  
	gkBadRecÜd
;

268 *
	g»suÉ
 = 
Sliû
(
h—d”
 + 
kH—d”Size
, 
Ëngth
);

269  
	gty³
;

	@db/log_reader.h

5 #iâdeà
STORAGE_LEVELDB_DB_LOG_READER_H_


6 
	#STORAGE_LEVELDB_DB_LOG_READER_H_


	)

8 
	~<c¡dšt
>

10 
	~"db/log_fÜm©.h
"

11 
	~"Ëv–db/¦iû.h
"

12 
	~"Ëv–db/¡©us.h
"

14 
Çme¥aû
 
	gËv–db
 {

16 
şass
 
	gSequ’tŸlFe
;

18 
Çme¥aû
 
	glog
 {

20 şas 
	cR—d”
 {

21 
	gpublic
:

23 şas 
	cR•Ü‹r
 {

24 
public
:

25 
vœtu®
 ~
R•Ü‹r
();

29 
vœtu®
 
CÜru±iÚ
(
size_t
 
by‹s
, cÚ¡ 
Stus
& 
¡©us
) = 0;

43 
R—d”
(
Sequ’tŸlFe
* 
fe
, 
R•Ü‹r
* 
»pÜ‹r
, 
boŞ
 
checksum
,

44 
ušt64_t
 
š™Ÿl_off£t
);

46 
R—d”
(cÚ¡ R—d”&èğ
d–‘e
;

47 
	gR—d”
& 
	gİ”©Ü
=(cÚ¡ 
R—d”
&èğ
d–‘e
;

49 ~
R—d”
();

56 
boŞ
 
R—dRecÜd
(
Sliû
* 
»cÜd
, 
¡d
::
¡ršg
* 
sü©ch
);

61 
ušt64_t
 
La¡RecÜdOff£t
();

63 
	g´iv©e
:

66 
kEof
 = 
kMaxRecÜdTy³
 + 1,

72 
	gkBadRecÜd
 = 
kMaxRecÜdTy³
 + 2

78 
boŞ
 
SkToIn™ŸlBlock
();

81 
R—dPhysiÿlRecÜd
(
Sliû
* 
»suÉ
);

85 
R•ÜtCÜru±iÚ
(
ušt64_t
 
by‹s
, cÚ¡ * 
»asÚ
);

86 
R•ÜtDrİ
(
ušt64_t
 
by‹s
, cÚ¡ 
Stus
& 
»asÚ
);

88 
Sequ’tŸlFe
* cÚ¡ 
	gfe_
;

89 
R•Ü‹r
* cÚ¡ 
	g»pÜ‹r_
;

90 
boŞ
 cÚ¡ 
	gchecksum_
;

91 * cÚ¡ 
	gbackšg_¡Üe_
;

92 
Sliû
 
	gbufãr_
;

93 
boŞ
 
	geof_
;

96 
ušt64_t
 
	gÏ¡_»cÜd_off£t_
;

98 
ušt64_t
 
	g’d_of_bufãr_off£t_
;

101 
ušt64_t
 cÚ¡ 
	gš™Ÿl_off£t_
;

106 
boŞ
 
	g»syncšg_
;

	@db/log_test.cc

5 
	~"g‹¡/g‹¡.h
"

6 
	~"db/log_»ad”.h
"

7 
	~"db/log_wr™”.h
"

8 
	~"Ëv–db/’v.h
"

9 
	~"ut/codšg.h
"

10 
	~"ut/üc32c.h
"

11 
	~"ut/¿ndom.h
"

13 
Çme¥aû
 
	gËv–db
 {

14 
Çme¥aû
 
	glog
 {

18 
	g¡d
::
¡ršg
 
BigSŒšg
(cÚ¡ 
¡d
::¡ršg& 
·¹Ÿl_¡ršg
, 
size_t
 
n
) {

19 
	g¡d
::
¡ršg
 
»suÉ
;

20 
	g»suÉ
.
size
(è< 
	gn
) {

21 
	g»suÉ
.
­³nd
(
·¹Ÿl_¡ršg
);

23 
	g»suÉ
.
»size
(
n
);

24  
	g»suÉ
;

28 
	g¡d
::
¡ršg
 
Numb”SŒšg
(
n
) {

29 
buf
[50];

30 
	g¡d
::
¢´štf
(
buf
, (buf), "%d.", 
n
);

31  
	g¡d
::
¡ršg
(
buf
);

35 
	g¡d
::
¡ršg
 
RªdomSkewedSŒšg
(
i
, 
Rªdom
* 
ºd
) {

36  
BigSŒšg
(
Numb”SŒšg
(
i
), 
ºd
->
Skewed
(17));

39 şas 
	cLogTe¡
 : 
public
 
‹¡šg
::
Te¡
 {

40 
public
:

41 
LogTe¡
()

42 : 
»adšg_
(
çl£
),

43 
wr™”_
(
Ãw
 
Wr™”
(&
de¡_
)),

44 
»ad”_
(
Ãw
 
R—d”
(&
sourû_
, &
»pÜt_
, 
Œue
 ,

47 ~
LogTe¡
() {

48 
d–‘e
 
	gwr™”_
;

49 
d–‘e
 
	g»ad”_
;

52 
Reİ’FÜAµ’d
() {

53 
d–‘e
 
	gwr™”_
;

54 
	gwr™”_
 = 
Ãw
 
Wr™”
(&
de¡_
, de¡_.
cÚ‹Ás_
.
size
());

57 
Wr™e
(cÚ¡ 
¡d
::
¡ršg
& 
msg
) {

58 
ASSERT_TRUE
(!
»adšg_
) << "Write()‡fter startingo„ead";

59 
	gwr™”_
->
AddRecÜd
(
Sliû
(
msg
));

62 
size_t
 
Wr™‹nBy‹s
(ècÚ¡ {  
	gde¡_
.
	gcÚ‹Ás_
.
size
(); }

64 
	g¡d
::
¡ršg
 
R—d
() {

65 ià(!
»adšg_
) {

66 
»adšg_
 = 
Œue
;

67 
	gsourû_
.
	gcÚ‹Ás_
 = 
Sliû
(
de¡_
.
cÚ‹Ás_
);

69 
	g¡d
::
¡ršg
 
sü©ch
;

70 
Sliû
 
	g»cÜd
;

71 ià(
	g»ad”_
->
R—dRecÜd
(&
»cÜd
, &
sü©ch
)) {

72  
	g»cÜd
.
ToSŒšg
();

78 
Inüem’tBy‹
(
off£t
, 
d–
) {

79 
	gde¡_
.
	gcÚ‹Ás_
[
off£t
] +ğ
d–
;

82 
S‘By‹
(
off£t
, 
Ãw_by‹
) {

83 
	gde¡_
.
	gcÚ‹Ás_
[
off£t
] = 
Ãw_by‹
;

86 
ShrškSize
(
by‹s
) {

87 
	gde¡_
.
	gcÚ‹Ás_
.
»size
(
de¡_
.
cÚ‹Ás_
.
size
(è- 
by‹s
);

90 
FixChecksum
(
h—d”_off£t
, 
Ën
) {

92 
ušt32_t
 
	güc
 = 
üc32c
::
V®ue
(&
de¡_
.
cÚ‹Ás_
[
h—d”_off£t
 + 6], 1 + 
Ën
);

93 
	güc
 = 
üc32c
::
Mask
(
üc
);

94 
EncodeFixed32
(&
de¡_
.
cÚ‹Ás_
[
h—d”_off£t
], 
üc
);

97 
FÜûE¼Ü
(è{ 
	gsourû_
.
	gfÜû_”rÜ_
 = 
Œue
; }

99 
size_t
 
Drİ³dBy‹s
(ècÚ¡ {  
	g»pÜt_
.
	gdrİ³d_by‹s_
; }

101 
	g¡d
::
¡ršg
 
R•ÜtMes§ge
(ècÚ¡ {  
»pÜt_
.
mes§ge_
; }

104 
	g¡d
::
¡ršg
 
M©chE¼Ü
(cÚ¡ 
¡d
::¡ršg& 
msg
) const {

105 ià(
»pÜt_
.
mes§ge_
.
fšd
(
msg
è=ğ
¡d
::
¡ršg
::
Åos
) {

106  
»pÜt_
.
mes§ge_
;

112 
Wr™eIn™ŸlOff£tLog
() {

113 
	gi
 = 0; i < 
	gnum_š™Ÿl_off£t_»cÜds_
; i++) {

114 
	g¡d
::
¡ršg
 
»cÜd
(
š™Ÿl_off£t_»cÜd_sizes_
[
i
],

115 
¡©ic_ÿ¡
<>('a' + 
i
));

116 
Wr™e
(
»cÜd
);

120 
S¹R—dšgAt
(
ušt64_t
 
š™Ÿl_off£t
) {

121 
d–‘e
 
	g»ad”_
;

122 
	g»ad”_
 = 
Ãw
 
R—d”
(&
sourû_
, &
»pÜt_
, 
Œue
 , 
š™Ÿl_off£t
);

125 
CheckOff£tPa¡EndR‘uºsNoRecÜds
(
ušt64_t
 
off£t_·¡_’d
) {

126 
Wr™eIn™ŸlOff£tLog
();

127 
	g»adšg_
 = 
Œue
;

128 
	gsourû_
.
	gcÚ‹Ás_
 = 
Sliû
(
de¡_
.
cÚ‹Ás_
);

129 
R—d”
* 
	goff£t_»ad”
 = 
Ãw
 R—d”(&
sourû_
, &
»pÜt_
, 
Œue
 ,

130 
Wr™‹nBy‹s
(è+ 
off£t_·¡_’d
);

131 
Sliû
 
	g»cÜd
;

132 
	g¡d
::
¡ršg
 
sü©ch
;

133 
ASSERT_TRUE
(!
off£t_»ad”
->
R—dRecÜd
(&
»cÜd
, &
sü©ch
));

134 
d–‘e
 
	goff£t_»ad”
;

137 
CheckIn™ŸlOff£tRecÜd
(
ušt64_t
 
š™Ÿl_off£t
,

138 
ex³ùed_»cÜd_off£t
) {

139 
Wr™eIn™ŸlOff£tLog
();

140 
	g»adšg_
 = 
Œue
;

141 
	gsourû_
.
	gcÚ‹Ás_
 = 
Sliû
(
de¡_
.
cÚ‹Ás_
);

142 
R—d”
* 
	goff£t_»ad”
 =

143 
Ãw
 
R—d”
(&
sourû_
, &
»pÜt_
, 
Œue
 , 
š™Ÿl_off£t
);

146 
ASSERT_LT
(
ex³ùed_»cÜd_off£t
, 
num_š™Ÿl_off£t_»cÜds_
);

147 ; 
	gex³ùed_»cÜd_off£t
 < 
	gnum_š™Ÿl_off£t_»cÜds_
;

148 ++
	gex³ùed_»cÜd_off£t
) {

149 
Sliû
 
	g»cÜd
;

150 
	g¡d
::
¡ršg
 
sü©ch
;

151 
ASSERT_TRUE
(
off£t_»ad”
->
R—dRecÜd
(&
»cÜd
, &
sü©ch
));

152 
ASSERT_EQ
(
š™Ÿl_off£t_»cÜd_sizes_
[
ex³ùed_»cÜd_off£t
],

153 
»cÜd
.
size
());

154 
ASSERT_EQ
(
š™Ÿl_off£t_Ï¡_»cÜd_off£ts_
[
ex³ùed_»cÜd_off£t
],

155 
off£t_»ad”
->
La¡RecÜdOff£t
());

156 
ASSERT_EQ
(()('a' + 
ex³ùed_»cÜd_off£t
), 
»cÜd
.
d©a
()[0]);

158 
d–‘e
 
	goff£t_»ad”
;

161 
	g´iv©e
:

162 şas 
	cSŒšgDe¡
 : 
public
 
Wr™abËFe
 {

163 
public
:

164 
Stus
 
Clo£
(è
ov”ride
 {  Stus::
OK
(); }

165 
Stus
 
Flush
(è
	gov”ride
 {  
	gStus
::
OK
(); }

166 
Stus
 
Sync
(è
	gov”ride
 {  
	gStus
::
OK
(); }

167 
Stus
 
Aµ’d
(cÚ¡ 
Sliû
& 
¦iû
è
	gov”ride
 {

168 
	gcÚ‹Ás_
.
­³nd
(
¦iû
.
d©a
(), sliû.
size
());

169  
	gStus
::
OK
();

172 
	g¡d
::
¡ršg
 
cÚ‹Ás_
;

175 şas 
	cSŒšgSourû
 : 
public
 
Sequ’tŸlFe
 {

176 
public
:

177 
SŒšgSourû
(è: 
fÜû_”rÜ_
(
çl£
), 
»tuºed_·¹Ÿl_
(false) {}

179 
Stus
 
R—d
(
size_t
 
n
, 
Sliû
* 
»suÉ
, * 
sü©ch
è
	gov”ride
 {

180 
EXPECT_TRUE
(!
»tuºed_·¹Ÿl_
) << "must‚ot Read()‡fterƒof/error";

182 ià(
	gfÜû_”rÜ_
) {

183 
	gfÜû_”rÜ_
 = 
çl£
;

184 
	g»tuºed_·¹Ÿl_
 = 
Œue
;

185  
	gStus
::
CÜru±iÚ
("readƒrror");

188 ià(
	gcÚ‹Ás_
.
size
(è< 
	gn
) {

189 
	gn
 = 
cÚ‹Ás_
.
size
();

190 
	g»tuºed_·¹Ÿl_
 = 
Œue
;

192 *
	g»suÉ
 = 
Sliû
(
cÚ‹Ás_
.
d©a
(), 
n
);

193 
	gcÚ‹Ás_
.
»move_´efix
(
n
);

194  
	gStus
::
OK
();

197 
Stus
 
Sk
(
ušt64_t
 
n
è
	gov”ride
 {

198 ià(
	gn
 > 
	gcÚ‹Ás_
.
size
()) {

199 
	gcÚ‹Ás_
.
ş—r
();

200  
	gStus
::
NÙFound
("in-memory file skipped…astƒnd");

203 
	gcÚ‹Ás_
.
»move_´efix
(
n
);

205  
	gStus
::
OK
();

208 
Sliû
 
	gcÚ‹Ás_
;

209 
boŞ
 
	gfÜû_”rÜ_
;

210 
boŞ
 
	g»tuºed_·¹Ÿl_
;

213 şas 
	cR•ÜtCŞËùÜ
 : 
public
 
R—d”
::
R•Ü‹r
 {

214 
public
:

215 
R•ÜtCŞËùÜ
(è: 
drİ³d_by‹s_
(0) {}

216 
CÜru±iÚ
(
size_t
 
by‹s
, cÚ¡ 
Stus
& 
¡©us
è
	gov”ride
 {

217 
	gdrİ³d_by‹s_
 +ğ
by‹s
;

218 
	gmes§ge_
.
­³nd
(
¡©us
.
ToSŒšg
());

221 
size_t
 
	gdrİ³d_by‹s_
;

222 
	g¡d
::
¡ršg
 
mes§ge_
;

226 
size_t
 
	gš™Ÿl_off£t_»cÜd_sizes_
[];

227 
ušt64_t
 
	gš™Ÿl_off£t_Ï¡_»cÜd_off£ts_
[];

228 
	gnum_š™Ÿl_off£t_»cÜds_
;

230 
SŒšgDe¡
 
	gde¡_
;

231 
SŒšgSourû
 
	gsourû_
;

232 
R•ÜtCŞËùÜ
 
	g»pÜt_
;

233 
boŞ
 
	g»adšg_
;

234 
Wr™”
* 
	gwr™”_
;

235 
R—d”
* 
	g»ad”_
;

238 
size_t
 
	gLogTe¡
::
š™Ÿl_off£t_»cÜd_sizes_
[] = {

241 2 * 
log
::
kBlockSize
 - 1000,

244 
log
::
kBlockSize
 - 
kH—d”Size
,

247 
ušt64_t
 
	gLogTe¡
::
š™Ÿl_off£t_Ï¡_»cÜd_off£ts_
[] = {

249 
kH—d”Size
 + 10000,

250 2 * (
kH—d”Size
 + 10000),

251 2 * (
kH—d”Size
 + 10000è+ (2 * 
log
::
kBlockSize
 - 1000) + 3 * kHeaderSize,

252 2 * (
kH—d”Size
 + 10000è+ (2 * 
log
::
kBlockSize
 - 1000) + 3 * kHeaderSize +

253 
kH—d”Size
 + 1,

254 3 * 
log
::
kBlockSize
,

258 
	gLogTe¡
::
num_š™Ÿl_off£t_»cÜds_
 =

259 (
LogTe¡
::
š™Ÿl_off£t_Ï¡_»cÜd_off£ts_
è/ (
ušt64_t
);

261 
TEST_F
(
LogTe¡
, 
Em±y
è{ 
ASSERT_EQ
("EOF", 
R—d
()); }

263 
TEST_F
(
LogTe¡
, 
R—dWr™e
) {

264 
Wr™e
("foo");

265 
Wr™e
("bar");

266 
Wr™e
("");

267 
Wr™e
("xxxx");

268 
ASSERT_EQ
("foo", 
R—d
());

269 
ASSERT_EQ
("b¬", 
R—d
());

270 
ASSERT_EQ
("", 
R—d
());

271 
ASSERT_EQ
("xxxx", 
R—d
());

272 
ASSERT_EQ
("EOF", 
R—d
());

273 
ASSERT_EQ
("EOF", 
R—d
());

276 
TEST_F
(
LogTe¡
, 
MªyBlocks
) {

277 
	gi
 = 0; i < 100000; i++) {

278 
Wr™e
(
Numb”SŒšg
(
i
));

280 
	gi
 = 0; i < 100000; i++) {

281 
ASSERT_EQ
(
Numb”SŒšg
(
i
), 
R—d
());

283 
ASSERT_EQ
("EOF", 
R—d
());

286 
TEST_F
(
LogTe¡
, 
F¿gm’tiÚ
) {

287 
Wr™e
("small");

288 
Wr™e
(
BigSŒšg
("medium", 50000));

289 
Wr™e
(
BigSŒšg
("large", 100000));

290 
ASSERT_EQ
("sm®l", 
R—d
());

291 
ASSERT_EQ
(
BigSŒšg
("medium", 50000), 
R—d
());

292 
ASSERT_EQ
(
BigSŒšg
("Ïrge", 100000), 
R—d
());

293 
ASSERT_EQ
("EOF", 
R—d
());

296 
TEST_F
(
LogTe¡
, 
M¬gš®T¿”
) {

298 cÚ¡ 
	gn
 = 
kBlockSize
 - 2 * 
kH—d”Size
;

299 
Wr™e
(
BigSŒšg
("foo", 
n
));

300 
ASSERT_EQ
(
kBlockSize
 - 
kH—d”Size
, 
Wr™‹nBy‹s
());

301 
Wr™e
("");

302 
Wr™e
("bar");

303 
ASSERT_EQ
(
BigSŒšg
("foo", 
n
), 
R—d
());

304 
ASSERT_EQ
("", 
R—d
());

305 
ASSERT_EQ
("b¬", 
R—d
());

306 
ASSERT_EQ
("EOF", 
R—d
());

309 
TEST_F
(
LogTe¡
, 
M¬gš®T¿”2
) {

311 cÚ¡ 
	gn
 = 
kBlockSize
 - 2 * 
kH—d”Size
;

312 
Wr™e
(
BigSŒšg
("foo", 
n
));

313 
ASSERT_EQ
(
kBlockSize
 - 
kH—d”Size
, 
Wr™‹nBy‹s
());

314 
Wr™e
("bar");

315 
ASSERT_EQ
(
BigSŒšg
("foo", 
n
), 
R—d
());

316 
ASSERT_EQ
("b¬", 
R—d
());

317 
ASSERT_EQ
("EOF", 
R—d
());

318 
ASSERT_EQ
(0, 
Drİ³dBy‹s
());

319 
ASSERT_EQ
("", 
R•ÜtMes§ge
());

322 
TEST_F
(
LogTe¡
, 
ShÜtT¿”
) {

323 cÚ¡ 
	gn
 = 
kBlockSize
 - 2 * 
kH—d”Size
 + 4;

324 
Wr™e
(
BigSŒšg
("foo", 
n
));

325 
ASSERT_EQ
(
kBlockSize
 - 
kH—d”Size
 + 4, 
Wr™‹nBy‹s
());

326 
Wr™e
("");

327 
Wr™e
("bar");

328 
ASSERT_EQ
(
BigSŒšg
("foo", 
n
), 
R—d
());

329 
ASSERT_EQ
("", 
R—d
());

330 
ASSERT_EQ
("b¬", 
R—d
());

331 
ASSERT_EQ
("EOF", 
R—d
());

334 
TEST_F
(
LogTe¡
, 
AligÃdEof
) {

335 cÚ¡ 
	gn
 = 
kBlockSize
 - 2 * 
kH—d”Size
 + 4;

336 
Wr™e
(
BigSŒšg
("foo", 
n
));

337 
ASSERT_EQ
(
kBlockSize
 - 
kH—d”Size
 + 4, 
Wr™‹nBy‹s
());

338 
ASSERT_EQ
(
BigSŒšg
("foo", 
n
), 
R—d
());

339 
ASSERT_EQ
("EOF", 
R—d
());

342 
TEST_F
(
LogTe¡
, 
O³nFÜAµ’d
) {

343 
Wr™e
("hello");

344 
Reİ’FÜAµ’d
();

345 
Wr™e
("world");

346 
ASSERT_EQ
("h–lo", 
R—d
());

347 
ASSERT_EQ
("wÜld", 
R—d
());

348 
ASSERT_EQ
("EOF", 
R—d
());

351 
TEST_F
(
LogTe¡
, 
RªdomR—d
) {

352 cÚ¡ 
	gN
 = 500;

353 
Rªdom
 
wr™e_ºd
(301);

354 
	gi
 = 0; i < 
	gN
; i++) {

355 
Wr™e
(
RªdomSkewedSŒšg
(
i
, &
wr™e_ºd
));

357 
Rªdom
 
»ad_ºd
(301);

358 
	gi
 = 0; i < 
	gN
; i++) {

359 
ASSERT_EQ
(
RªdomSkewedSŒšg
(
i
, &
»ad_ºd
), 
R—d
());

361 
ASSERT_EQ
("EOF", 
R—d
());

366 
TEST_F
(
LogTe¡
, 
R—dE¼Ü
) {

367 
Wr™e
("foo");

368 
FÜûE¼Ü
();

369 
ASSERT_EQ
("EOF", 
R—d
());

370 
ASSERT_EQ
(
kBlockSize
, 
Drİ³dBy‹s
());

371 
ASSERT_EQ
("OK", 
M©chE¼Ü
("readƒrror"));

374 
TEST_F
(
LogTe¡
, 
BadRecÜdTy³
) {

375 
Wr™e
("foo");

377 
Inüem’tBy‹
(6, 100);

378 
FixChecksum
(0, 3);

379 
ASSERT_EQ
("EOF", 
R—d
());

380 
ASSERT_EQ
(3, 
Drİ³dBy‹s
());

381 
ASSERT_EQ
("OK", 
M©chE¼Ü
("unknown„ecordype"));

384 
TEST_F
(
LogTe¡
, 
Trunÿ‹dT¿šgRecÜdIsIgnÜed
) {

385 
Wr™e
("foo");

386 
ShrškSize
(4);

387 
ASSERT_EQ
("EOF", 
R—d
());

389 
ASSERT_EQ
(0, 
Drİ³dBy‹s
());

390 
ASSERT_EQ
("", 
R•ÜtMes§ge
());

393 
TEST_F
(
LogTe¡
, 
BadL’gth
) {

394 cÚ¡ 
	gkPaylßdSize
 = 
kBlockSize
 - 
kH—d”Size
;

395 
Wr™e
(
BigSŒšg
("b¬", 
kPaylßdSize
));

396 
Wr™e
("foo");

398 
Inüem’tBy‹
(4, 1);

399 
ASSERT_EQ
("foo", 
R—d
());

400 
ASSERT_EQ
(
kBlockSize
, 
Drİ³dBy‹s
());

401 
ASSERT_EQ
("OK", 
M©chE¼Ü
("bad„ecord†ength"));

404 
TEST_F
(
LogTe¡
, 
BadL’gthAtEndIsIgnÜed
) {

405 
Wr™e
("foo");

406 
ShrškSize
(1);

407 
ASSERT_EQ
("EOF", 
R—d
());

408 
ASSERT_EQ
(0, 
Drİ³dBy‹s
());

409 
ASSERT_EQ
("", 
R•ÜtMes§ge
());

412 
TEST_F
(
LogTe¡
, 
ChecksumMism©ch
) {

413 
Wr™e
("foo");

414 
Inüem’tBy‹
(0, 10);

415 
ASSERT_EQ
("EOF", 
R—d
());

416 
ASSERT_EQ
(10, 
Drİ³dBy‹s
());

417 
ASSERT_EQ
("OK", 
M©chE¼Ü
("checksum mismatch"));

420 
TEST_F
(
LogTe¡
, 
UÃx³ùedMiddËTy³
) {

421 
Wr™e
("foo");

422 
S‘By‹
(6, 
kMiddËTy³
);

423 
FixChecksum
(0, 3);

424 
ASSERT_EQ
("EOF", 
R—d
());

425 
ASSERT_EQ
(3, 
Drİ³dBy‹s
());

426 
ASSERT_EQ
("OK", 
M©chE¼Ü
("missing start"));

429 
TEST_F
(
LogTe¡
, 
UÃx³ùedLa¡Ty³
) {

430 
Wr™e
("foo");

431 
S‘By‹
(6, 
kLa¡Ty³
);

432 
FixChecksum
(0, 3);

433 
ASSERT_EQ
("EOF", 
R—d
());

434 
ASSERT_EQ
(3, 
Drİ³dBy‹s
());

435 
ASSERT_EQ
("OK", 
M©chE¼Ü
("missing start"));

438 
TEST_F
(
LogTe¡
, 
UÃx³ùedFuÎTy³
) {

439 
Wr™e
("foo");

440 
Wr™e
("bar");

441 
S‘By‹
(6, 
kFœ¡Ty³
);

442 
FixChecksum
(0, 3);

443 
ASSERT_EQ
("b¬", 
R—d
());

444 
ASSERT_EQ
("EOF", 
R—d
());

445 
ASSERT_EQ
(3, 
Drİ³dBy‹s
());

446 
ASSERT_EQ
("OK", 
M©chE¼Ü
("partial„ecord withoutƒnd"));

449 
TEST_F
(
LogTe¡
, 
UÃx³ùedFœ¡Ty³
) {

450 
Wr™e
("foo");

451 
Wr™e
(
BigSŒšg
("bar", 100000));

452 
S‘By‹
(6, 
kFœ¡Ty³
);

453 
FixChecksum
(0, 3);

454 
ASSERT_EQ
(
BigSŒšg
("b¬", 100000), 
R—d
());

455 
ASSERT_EQ
("EOF", 
R—d
());

456 
ASSERT_EQ
(3, 
Drİ³dBy‹s
());

457 
ASSERT_EQ
("OK", 
M©chE¼Ü
("partial„ecord withoutƒnd"));

460 
TEST_F
(
LogTe¡
, 
MissšgLa¡IsIgnÜed
) {

461 
Wr™e
(
BigSŒšg
("b¬", 
kBlockSize
));

463 
ShrškSize
(14);

464 
ASSERT_EQ
("EOF", 
R—d
());

465 
ASSERT_EQ
("", 
R•ÜtMes§ge
());

466 
ASSERT_EQ
(0, 
Drİ³dBy‹s
());

469 
TEST_F
(
LogTe¡
, 
P¬tŸlLa¡IsIgnÜed
) {

470 
Wr™e
(
BigSŒšg
("b¬", 
kBlockSize
));

472 
ShrškSize
(1);

473 
ASSERT_EQ
("EOF", 
R—d
());

474 
ASSERT_EQ
("", 
R•ÜtMes§ge
());

475 
ASSERT_EQ
(0, 
Drİ³dBy‹s
());

478 
TEST_F
(
LogTe¡
, 
SkIÁoMuÉiRecÜd
) {

484 
Wr™e
(
BigSŒšg
("foo", 3 * 
kBlockSize
));

485 
Wr™e
("correct");

486 
S¹R—dšgAt
(
kBlockSize
);

488 
ASSERT_EQ
("cÜ»ù", 
R—d
());

489 
ASSERT_EQ
("", 
R•ÜtMes§ge
());

490 
ASSERT_EQ
(0, 
Drİ³dBy‹s
());

491 
ASSERT_EQ
("EOF", 
R—d
());

494 
TEST_F
(
LogTe¡
, 
E¼ÜJošsRecÜds
) {

501 
Wr™e
(
BigSŒšg
("foo", 
kBlockSize
));

502 
Wr™e
(
BigSŒšg
("b¬", 
kBlockSize
));

503 
Wr™e
("correct");

506 
	goff£t
 = 
kBlockSize
; off£ˆ< 2 * 
	gkBlockSize
; offset++) {

507 
S‘By‹
(
off£t
, 'x');

510 
ASSERT_EQ
("cÜ»ù", 
R—d
());

511 
ASSERT_EQ
("EOF", 
R—d
());

512 cÚ¡ 
size_t
 
	gdrİ³d
 = 
Drİ³dBy‹s
();

513 
ASSERT_LE
(
drİ³d
, 2 * 
kBlockSize
 + 100);

514 
ASSERT_GE
(
drİ³d
, 2 * 
kBlockSize
);

517 
TEST_F
(
LogTe¡
, 
R—dS¹
è{ 
CheckIn™ŸlOff£tRecÜd
(0, 0); }

519 
TEST_F
(
LogTe¡
, 
R—dSecÚdOÃOff
è{ 
CheckIn™ŸlOff£tRecÜd
(1, 1); }

521 
TEST_F
(
LogTe¡
, 
R—dSecÚdT’Thou§nd
è{ 
CheckIn™ŸlOff£tRecÜd
(10000, 1); }

523 
TEST_F
(
LogTe¡
, 
R—dSecÚdS¹
è{ 
CheckIn™ŸlOff£tRecÜd
(10007, 1); }

525 
TEST_F
(
LogTe¡
, 
R—dThœdOÃOff
è{ 
CheckIn™ŸlOff£tRecÜd
(10008, 2); }

527 
TEST_F
(
LogTe¡
, 
R—dThœdS¹
è{ 
CheckIn™ŸlOff£tRecÜd
(20014, 2); }

529 
TEST_F
(
LogTe¡
, 
R—dFou¹hOÃOff
è{ 
CheckIn™ŸlOff£tRecÜd
(20015, 3); }

531 
TEST_F
(
LogTe¡
, 
R—dFou¹hFœ¡BlockT¿”
) {

532 
CheckIn™ŸlOff£tRecÜd
(
log
::
kBlockSize
 - 4, 3);

535 
TEST_F
(
LogTe¡
, 
R—dFou¹hMiddËBlock
) {

536 
CheckIn™ŸlOff£tRecÜd
(
log
::
kBlockSize
 + 1, 3);

539 
TEST_F
(
LogTe¡
, 
R—dFou¹hLa¡Block
) {

540 
CheckIn™ŸlOff£tRecÜd
(2 * 
log
::
kBlockSize
 + 1, 3);

543 
TEST_F
(
LogTe¡
, 
R—dFou¹hS¹
) {

544 
CheckIn™ŸlOff£tRecÜd
(

545 2 * (
kH—d”Size
 + 1000è+ (2 * 
log
::
kBlockSize
 - 1000) + 3 * kHeaderSize,

549 
TEST_F
(
LogTe¡
, 
R—dIn™ŸlOff£tIÁoBlockPaddšg
) {

550 
CheckIn™ŸlOff£tRecÜd
(3 * 
log
::
kBlockSize
 - 3, 5);

553 
TEST_F
(
LogTe¡
, 
R—dEnd
è{ 
CheckOff£tPa¡EndR‘uºsNoRecÜds
(0); }

555 
TEST_F
(
LogTe¡
, 
R—dPa¡End
è{ 
CheckOff£tPa¡EndR‘uºsNoRecÜds
(5); }

	@db/log_writer.cc

5 
	~"db/log_wr™”.h
"

7 
	~<c¡dšt
>

9 
	~"Ëv–db/’v.h
"

10 
	~"ut/codšg.h
"

11 
	~"ut/üc32c.h
"

13 
Çme¥aû
 
	gËv–db
 {

14 
Çme¥aû
 
	glog
 {

16 
In™Ty³Crc
(
ušt32_t
* 
ty³_üc
) {

17 
	gi
 = 0; i <ğ
kMaxRecÜdTy³
; i++) {

18 
	gt
 = 
¡©ic_ÿ¡
<>(
i
);

19 
	gty³_üc
[
i
] = 
üc32c
::
V®ue
(&
t
, 1);

23 
	gWr™”
::
Wr™”
(
Wr™abËFe
* 
de¡
è: 
de¡_
(de¡), 
block_off£t_
(0) {

24 
In™Ty³Crc
(
ty³_üc_
);

27 
	gWr™”
::
Wr™”
(
Wr™abËFe
* 
de¡
, 
ušt64_t
 
de¡_Ëngth
)

28 : 
de¡_
(
de¡
), 
block_off£t_
(
de¡_Ëngth
 % 
kBlockSize
) {

29 
In™Ty³Crc
(
ty³_üc_
);

32 
	gWr™”
::~
Wr™”
() = ;

34 
Stus
 
	gWr™”
::
AddRecÜd
(cÚ¡ 
Sliû
& 
¦iû
) {

35 cÚ¡ * 
±r
 = 
¦iû
.
d©a
();

36 
size_t
 
	gËá
 = 
¦iû
.
size
();

41 
Stus
 
	gs
;

42 
boŞ
 
	gbegš
 = 
Œue
;

44 cÚ¡ 
	gËáov”
 = 
kBlockSize
 - 
block_off£t_
;

45 
as£¹
(
Ëáov”
 >= 0);

46 ià(
	gËáov”
 < 
	gkH—d”Size
) {

48 ià(
	gËáov”
 > 0) {

50 
¡©ic_as£¹
(
kH—d”Size
 == 7, "");

51 
	gde¡_
->
Aµ’d
(
Sliû
("\x00\x00\x00\x00\x00\x00", 
Ëáov”
));

53 
	gblock_off£t_
 = 0;

57 
as£¹
(
kBlockSize
 - 
block_off£t_
 - 
kH—d”Size
 >= 0);

59 cÚ¡ 
size_t
 
	gava
 = 
kBlockSize
 - 
block_off£t_
 - 
kH—d”Size
;

60 cÚ¡ 
size_t
 
	gäagm’t_Ëngth
 = (
Ëá
 < 
ava
) ?†eft :‡vail;

62 
RecÜdTy³
 
	gty³
;

63 cÚ¡ 
boŞ
 
	g’d
 = (
Ëá
 =ğ
äagm’t_Ëngth
);

64 ià(
	gbegš
 && 
	g’d
) {

65 
	gty³
 = 
kFuÎTy³
;

66 } ià(
	gbegš
) {

67 
	gty³
 = 
kFœ¡Ty³
;

68 } ià(
	g’d
) {

69 
	gty³
 = 
kLa¡Ty³
;

71 
	gty³
 = 
kMiddËTy³
;

74 
	gs
 = 
Em™PhysiÿlRecÜd
(
ty³
, 
±r
, 
äagm’t_Ëngth
);

75 
	g±r
 +ğ
äagm’t_Ëngth
;

76 
	gËá
 -ğ
äagm’t_Ëngth
;

77 
	gbegš
 = 
çl£
;

78 } 
	gs
.
ok
(è&& 
	gËá
 > 0);

79  
	gs
;

82 
Stus
 
	gWr™”
::
Em™PhysiÿlRecÜd
(
RecÜdTy³
 
t
, cÚ¡ * 
±r
,

83 
size_t
 
Ëngth
) {

84 
as£¹
(
Ëngth
 <= 0xffff);

85 
as£¹
(
block_off£t_
 + 
kH—d”Size
 + 
Ëngth
 <ğ
kBlockSize
);

88 
	gbuf
[
kH—d”Size
];

89 
	gbuf
[4] = 
¡©ic_ÿ¡
<>(
Ëngth
 & 0xff);

90 
	gbuf
[5] = 
¡©ic_ÿ¡
<>(
Ëngth
 >> 8);

91 
	gbuf
[6] = 
¡©ic_ÿ¡
<>(
t
);

94 
ušt32_t
 
	güc
 = 
üc32c
::
Ex‹nd
(
ty³_üc_
[
t
], 
±r
, 
Ëngth
);

95 
	güc
 = 
üc32c
::
Mask
(
üc
);

96 
EncodeFixed32
(
buf
, 
üc
);

99 
Stus
 
	gs
 = 
de¡_
->
Aµ’d
(
Sliû
(
buf
, 
kH—d”Size
));

100 ià(
	gs
.
ok
()) {

101 
	gs
 = 
de¡_
->
Aµ’d
(
Sliû
(
±r
, 
Ëngth
));

102 ià(
	gs
.
ok
()) {

103 
	gs
 = 
de¡_
->
Flush
();

106 
	gblock_off£t_
 +ğ
kH—d”Size
 + 
Ëngth
;

107  
	gs
;

	@db/log_writer.h

5 #iâdeà
STORAGE_LEVELDB_DB_LOG_WRITER_H_


6 
	#STORAGE_LEVELDB_DB_LOG_WRITER_H_


	)

8 
	~<c¡dšt
>

10 
	~"db/log_fÜm©.h
"

11 
	~"Ëv–db/¦iû.h
"

12 
	~"Ëv–db/¡©us.h
"

14 
Çme¥aû
 
	gËv–db
 {

16 
şass
 
	gWr™abËFe
;

18 
Çme¥aû
 
	glog
 {

20 şas 
	cWr™”
 {

21 
	gpublic
:

25 
ex¶ic™
 
Wr™”
(
Wr™abËFe
* 
de¡
);

30 
Wr™”
(
Wr™abËFe
* 
de¡
, 
ušt64_t
 
de¡_Ëngth
);

32 
Wr™”
(cÚ¡ Wr™”&èğ
d–‘e
;

33 
	gWr™”
& 
	gİ”©Ü
=(cÚ¡ 
Wr™”
&èğ
d–‘e
;

35 ~
Wr™”
();

37 
Stus
 
AddRecÜd
(cÚ¡ 
Sliû
& 
¦iû
);

39 
	g´iv©e
:

40 
Stus
 
Em™PhysiÿlRecÜd
(
RecÜdTy³
 
ty³
, cÚ¡ * 
±r
, 
size_t
 
Ëngth
);

42 
Wr™abËFe
* 
	gde¡_
;

43 
	gblock_off£t_
;

48 
ušt32_t
 
	gty³_üc_
[
kMaxRecÜdTy³
 + 1];

	@db/memtable.cc

5 
	~"db/membË.h
"

6 
	~"db/dbfÜm©.h
"

7 
	~"Ëv–db/com·¿tÜ.h
"

8 
	~"Ëv–db/’v.h
"

9 
	~"Ëv–db/™”©Ü.h
"

10 
	~"ut/codšg.h
"

12 
Çme¥aû
 
	gËv–db
 {

14 
Sliû
 
G‘L’gthP»fixedSliû
(cÚ¡ * 
d©a
) {

15 
ušt32_t
 
	gËn
;

16 cÚ¡ * 
	gp
 = 
d©a
;

17 
	gp
 = 
G‘V¬št32PŒ
(
p
,… + 5, &
Ën
);

18  
Sliû
(
p
, 
Ën
);

21 
	gMemTabË
::
MemTabË
(cÚ¡ 
IÁ”ÇlKeyCom·¿tÜ
& 
com·¿tÜ
)

22 : 
com·¿tÜ_
(
com·¿tÜ
), 
»fs_
(0), 
bË_
(com·¿tÜ_, &
¬’a_
) {}

24 
	gMemTabË
::~
MemTabË
(è{ 
as£¹
(
»fs_
 == 0); }

26 
size_t
 
	gMemTabË
::
Aµroxim©eMemÜyU§ge
(è{  
¬’a_
.
MemÜyU§ge
(); }

28 
	gMemTabË
::
KeyCom·¿tÜ
::
İ”©Ü
()(cÚ¡ * 
­Œ
,

29 cÚ¡ * 
	gb±r
) const {

31 
Sliû
 
	ga
 = 
G‘L’gthP»fixedSliû
(
­Œ
);

32 
Sliû
 
	gb
 = 
G‘L’gthP»fixedSliû
(
b±r
);

33  
	gcom·¿tÜ
.
Com·»
(
a
, 
b
);

39 cÚ¡ * 
EncodeKey
(
¡d
::
¡ršg
* 
sü©ch
, cÚ¡ 
Sliû
& 
rg‘
) {

40 
	gsü©ch
->
ş—r
();

41 
PutV¬št32
(
sü©ch
, 
rg‘
.
size
());

42 
	gsü©ch
->
­³nd
(
rg‘
.
d©a
(),¬g‘.
size
());

43  
	gsü©ch
->
d©a
();

46 şas 
	cMemTabËI‹¿tÜ
 : 
public
 
I‹¿tÜ
 {

47 
public
:

48 
ex¶ic™
 
MemTabËI‹¿tÜ
(
MemTabË
::
TabË
* 
bË
è: 
™”_
(table) {}

50 
MemTabËI‹¿tÜ
(cÚ¡ MemTabËI‹¿tÜ&èğ
d–‘e
;

51 
	gMemTabËI‹¿tÜ
& 
	gİ”©Ü
=(cÚ¡ 
MemTabËI‹¿tÜ
&èğ
d–‘e
;

53 ~
MemTabËI‹¿tÜ
(è
	gov”ride
 = ;

55 
boŞ
 
V®id
(ècÚ¡ 
	gov”ride
 {  
	g™”_
.Valid(); }

56 
S“k
(cÚ¡ 
Sliû
& 
k
è
	gov”ride
 { 
	g™”_
.S“k(
EncodeKey
(&
tmp_
, k)); }

57 
S“kToFœ¡
(è
	gov”ride
 { 
	g™”_
.SeekToFirst(); }

58 
S“kToLa¡
(è
	gov”ride
 { 
	g™”_
.SeekToLast(); }

59 
Next
(è
	gov”ride
 { 
	g™”_
.Next(); }

60 
P»v
(è
	gov”ride
 { 
	g™”_
.Prev(); }

61 
Sliû
 
key
(ècÚ¡ 
	gov”ride
 {  
G‘L’gthP»fixedSliû
(
™”_
.key()); }

62 
Sliû
 
v®ue
(ècÚ¡ 
	gov”ride
 {

63 
Sliû
 
	gkey_¦iû
 = 
G‘L’gthP»fixedSliû
(
™”_
.
key
());

64  
G‘L’gthP»fixedSliû
(
key_¦iû
.
d©a
(è+ key_¦iû.
size
());

67 
Stus
 
¡©us
(ècÚ¡ 
	gov”ride
 {  
	gStus
::
OK
(); }

69 
	g´iv©e
:

70 
MemTabË
::
TabË
::
I‹¿tÜ
 
™”_
;

71 
	g¡d
::
¡ršg
 
tmp_
;

74 
I‹¿tÜ
* 
	gMemTabË
::
	$NewI‹¿tÜ
(è{  
Ãw
 
	`MemTabËI‹¿tÜ
(&
bË_
); 
	}
}

76 
	gMemTabË
::
	$Add
(
Sequ’ûNumb”
 
s
, 
V®ueTy³
 
ty³
, cÚ¡ 
Sliû
& 
key
,

77 cÚ¡ 
Sliû
& 
v®ue
) {

84 
size_t
 
key_size
 = 
key
.
	`size
();

85 
size_t
 
v®_size
 = 
v®ue
.
	`size
();

86 
size_t
 
š‹º®_key_size
 = 
key_size
 + 8;

87 cÚ¡ 
size_t
 
’coded_Ën
 = 
	`V¬štL’gth
(
š‹º®_key_size
) +

88 
š‹º®_key_size
 + 
	`V¬štL’gth
(
v®_size
) +

89 
v®_size
;

90 * 
buf
 = 
¬’a_
.
	`AÎoÿ‹
(
’coded_Ën
);

91 * 
p
 = 
	`EncodeV¬št32
(
buf
, 
š‹º®_key_size
);

92 
¡d
::
	`memıy
(
p
, 
key
.
	`d©a
(), 
key_size
);

93 
p
 +ğ
key_size
;

94 
	`EncodeFixed64
(
p
, (
s
 << 8è| 
ty³
);

95 
p
 += 8;

96 
p
 = 
	`EncodeV¬št32
Õ, 
v®_size
);

97 
¡d
::
	`memıy
(
p
, 
v®ue
.
	`d©a
(), 
v®_size
);

98 
	`as£¹
(
p
 + 
v®_size
 =ğ
buf
 + 
’coded_Ën
);

99 
bË_
.
	`In£¹
(
buf
);

100 
	}
}

102 
boŞ
 
	gMemTabË
::
	$G‘
(cÚ¡ 
LookupKey
& 
key
, 
¡d
::
¡ršg
* 
v®ue
, 
Stus
* 
s
) {

103 
Sliû
 
memkey
 = 
key
.
	`membË_key
();

104 
TabË
::
I‹¿tÜ
 
	`™”
(&
bË_
);

105 
™”
.
	`S“k
(
memkey
.
	`d©a
());

106 ià(
™”
.
	`V®id
()) {

116 cÚ¡ * 
’Œy
 = 
™”
.
	`key
();

117 
ušt32_t
 
key_Ëngth
;

118 cÚ¡ * 
key_±r
 = 
	`G‘V¬št32PŒ
(
’Œy
,ƒÁry + 5, &
key_Ëngth
);

119 ià(
com·¿tÜ_
.
com·¿tÜ
.
	`u£r_com·¿tÜ
()->
	`Com·»
(

120 
	`Sliû
(
key_±r
, 
key_Ëngth
 - 8), 
key
.
	`u£r_key
()) == 0) {

122 cÚ¡ 
ušt64_t
 
g
 = 
	`DecodeFixed64
(
key_±r
 + 
key_Ëngth
 - 8);

123 
¡©ic_ÿ¡
<
V®ueTy³
>(
g
 & 0xff)) {

124 
kTy³V®ue
: {

125 
Sliû
 
v
 = 
	`G‘L’gthP»fixedSliû
(
key_±r
 + 
key_Ëngth
);

126 
v®ue
->
	`assign
(
v
.
	`d©a
(), v.
	`size
());

127  
Œue
;

129 
kTy³D–‘iÚ
:

130 *
s
 = 
Stus
::
	`NÙFound
(
	`Sliû
());

131  
Œue
;

135  
çl£
;

136 
	}
}

	@db/memtable.h

5 #iâdeà
STORAGE_LEVELDB_DB_MEMTABLE_H_


6 
	#STORAGE_LEVELDB_DB_MEMTABLE_H_


	)

8 
	~<¡ršg
>

10 
	~"db/dbfÜm©.h
"

11 
	~"db/skli¡.h
"

12 
	~"Ëv–db/db.h
"

13 
	~"ut/¬’a.h
"

15 
Çme¥aû
 
	gËv–db
 {

17 
şass
 
	gIÁ”ÇlKeyCom·¿tÜ
;

18 
şass
 
	gMemTabËI‹¿tÜ
;

20 şas 
	cMemTabË
 {

21 
	gpublic
:

24 
ex¶ic™
 
MemTabË
(cÚ¡ 
IÁ”ÇlKeyCom·¿tÜ
& 
com·¿tÜ
);

26 
MemTabË
(cÚ¡ MemTabË&èğ
d–‘e
;

27 
	gMemTabË
& 
	gİ”©Ü
=(cÚ¡ 
MemTabË
&èğ
d–‘e
;

30 
Ref
(è{ ++
	g»fs_
; }

33 
UÄef
() {

34 --
	g»fs_
;

35 
as£¹
(
»fs_
 >= 0);

36 ià(
	g»fs_
 <= 0) {

37 
d–‘e
 
this
;

43 
size_t
 
Aµroxim©eMemÜyU§ge
();

51 
I‹¿tÜ
* 
NewI‹¿tÜ
();

56 
Add
(
Sequ’ûNumb”
 
£q
, 
V®ueTy³
 
ty³
, cÚ¡ 
Sliû
& 
key
,

57 cÚ¡ 
Sliû
& 
v®ue
);

63 
boŞ
 
G‘
(cÚ¡ 
LookupKey
& 
key
, 
¡d
::
¡ršg
* 
v®ue
, 
Stus
* 
s
);

65 
	g´iv©e
:

66 
ä›nd
 
şass
 
MemTabËI‹¿tÜ
;

67 
ä›nd
 
şass
 
	gMemTabËBackw¬dI‹¿tÜ
;

69 
	sKeyCom·¿tÜ
 {

70 cÚ¡ 
IÁ”ÇlKeyCom·¿tÜ
 
	gcom·¿tÜ
;

71 
ex¶ic™
 
KeyCom·¿tÜ
(cÚ¡ 
IÁ”ÇlKeyCom·¿tÜ
& 
c
è: 
com·¿tÜ
(c) {}

72 
İ”©Ü
()(cÚ¡ * 
a
, cÚ¡ * 
	gb
) const;

75 
	gSkLi¡
<cÚ¡ *, 
	tKeyCom·¿tÜ
> 
	tTabË
;

77 ~
MemTabË
();

79 
KeyCom·¿tÜ
 
	gcom·¿tÜ_
;

80 
	g»fs_
;

81 
A»Ç
 
	g¬’a_
;

82 
TabË
 
	gbË_
;

	@db/recovery_test.cc

5 
	~"g‹¡/g‹¡.h
"

6 
	~"db/db_im¶.h
"

7 
	~"db/f’ame.h
"

8 
	~"db/v”siÚ_£t.h
"

9 
	~"db/wr™e_b©ch_š‹º®.h
"

10 
	~"Ëv–db/db.h
"

11 
	~"Ëv–db/’v.h
"

12 
	~"Ëv–db/wr™e_b©ch.h
"

13 
	~"ut/loggšg.h
"

14 
	~"ut/‹¡ut.h
"

16 
Çme¥aû
 
	gËv–db
 {

18 şas 
	cRecov”yTe¡
 : 
public
 
‹¡šg
::
Te¡
 {

19 
public
:

20 
Recov”yTe¡
(è: 
’v_
(
Env
::
DeçuÉ
()), 
db_
(
nuÎ±r
) {

21 
	gdbÇme_
 = 
‹¡šg
::
TempDœ
() + "recovery_test";

22 
De¡royDB
(
dbÇme_
, 
O±iÚs
());

23 
O³n
();

26 ~
Recov”yTe¡
() {

27 
Clo£
();

28 
De¡royDB
(
dbÇme_
, 
O±iÚs
());

31 
DBIm¶
* 
dbfuÎ
(ècÚ¡ {  
	g»š‹½»t_ÿ¡
<
	gDBIm¶
*>(
	gdb_
); }

32 
Env
* 
’v
(ècÚ¡ {  
	g’v_
; }

34 
boŞ
 
CªAµ’d
() {

35 
Wr™abËFe
* 
	gtmp
;

36 
Stus
 
	gs
 = 
’v_
->
NewAµ’dabËFe
(
Cu¼’tFeName
(
dbÇme_
), &
tmp
);

37 
d–‘e
 
	gtmp
;

38 ià(
	gs
.
IsNÙSuµÜ‹dE¼Ü
()) {

39  
	gçl£
;

41  
	gŒue
;

45 
Clo£
() {

46 
d–‘e
 
	gdb_
;

47 
	gdb_
 = 
nuÎ±r
;

50 
Stus
 
O³nW™hStus
(
O±iÚs
* 
İtiÚs
 = 
nuÎ±r
) {

51 
Clo£
();

52 
O±iÚs
 
	gİts
;

53 ià(
	gİtiÚs
 !ğ
nuÎ±r
) {

54 
İts
 = *
İtiÚs
;

56 
	gİts
.
	g»u£_logs
 = 
Œue
;

57 
	gİts
.
	gü—‹_if_missšg
 = 
Œue
;

59 ià(
	gİts
.
	g’v
 =ğ
nuÎ±r
) {

60 
İts
.
’v
 = 
’v_
;

62  
	gDB
::
O³n
(
İts
, 
dbÇme_
, &
db_
);

65 
O³n
(
O±iÚs
* 
İtiÚs
 = 
nuÎ±r
) {

66 
ASSERT_LEVELDB_OK
(
O³nW™hStus
(
İtiÚs
));

67 
ASSERT_EQ
(1, 
NumLogs
());

70 
Stus
 
Put
(cÚ¡ 
¡d
::
¡ršg
& 
k
, cÚ¡ std::¡ršg& 
v
) {

71  
db_
->
Put
(
Wr™eO±iÚs
(), 
k
, 
v
);

74 
	g¡d
::
¡ršg
 
G‘
(cÚ¡ 
¡d
::¡ršg& 
k
, cÚ¡ 
SÇpshÙ
* 
¢­shÙ
 = 
nuÎ±r
) {

75 
¡d
::
¡ršg
 
»suÉ
;

76 
Stus
 
	gs
 = 
db_
->
G‘
(
R—dO±iÚs
(), 
k
, &
»suÉ
);

77 ià(
	gs
.
IsNÙFound
()) {

78 
	g»suÉ
 = "NOT_FOUND";

79 } ià(!
	gs
.
ok
()) {

80 
	g»suÉ
 = 
s
.
ToSŒšg
();

82  
	g»suÉ
;

85 
	g¡d
::
¡ršg
 
Mªiã¡FeName
() {

86 
¡d
::
¡ršg
 
cu¼’t
;

87 
EXPECT_LEVELDB_OK
(

88 
R—dFeToSŒšg
(
’v_
, 
Cu¼’tFeName
(
dbÇme_
), &
cu¼’t
));

89 
size_t
 
	gËn
 = 
cu¼’t
.
size
();

90 ià(
	gËn
 > 0 && 
	gcu¼’t
[
Ën
 - 1] == '\n') {

91 
cu¼’t
.
»size
(
Ën
 - 1);

93  
	gdbÇme_
 + "/" + 
	gcu¼’t
;

96 
	g¡d
::
¡ršg
 
LogName
(
ušt64_t
 
numb”
è{  
LogFeName
(
dbÇme_
,‚umber); }

98 
size_t
 
RemoveLogFes
() {

101 
Clo£
();

102 
	g¡d
::
veùÜ
<
ušt64_t
> 
logs
 = 
G‘Fes
(
kLogFe
);

103 
size_t
 
	gi
 = 0; i < 
	glogs
.
size
(); i++) {

104 
EXPECT_LEVELDB_OK
(
’v_
->
RemoveFe
(
LogName
(
logs
[
i
]))) << LogName(logs[i]);

106  
	glogs
.
size
();

109 
RemoveMªiã¡Fe
() {

110 
ASSERT_LEVELDB_OK
(
’v_
->
RemoveFe
(
Mªiã¡FeName
()));

113 
ušt64_t
 
Fœ¡LogFe
(è{  
G‘Fes
(
kLogFe
)[0]; }

115 
	g¡d
::
veùÜ
<
ušt64_t
> 
G‘Fes
(
FeTy³
 
t
) {

116 
¡d
::
veùÜ
<¡d::
¡ršg
> 
f’ames
;

117 
EXPECT_LEVELDB_OK
(
’v_
->
G‘Chd»n
(
dbÇme_
, &
f’ames
));

118 
	g¡d
::
veùÜ
<
ušt64_t
> 
»suÉ
;

119 
size_t
 
	gi
 = 0; i < 
	gf’ames
.
size
(); i++) {

120 
ušt64_t
 
	gnumb”
;

121 
FeTy³
 
	gty³
;

122 ià(
P¬£FeName
(
f’ames
[
i
], &
numb”
, &
ty³
è&& 
	gty³
 =ğ
t
) {

123 
»suÉ
.
push_back
(
numb”
);

126  
	g»suÉ
;

129 
NumLogs
(è{  
G‘Fes
(
kLogFe
).
size
(); }

131 
NumTabËs
(è{  
G‘Fes
(
kTabËFe
).
size
(); }

133 
ušt64_t
 
FeSize
(cÚ¡ 
¡d
::
¡ršg
& 
âame
) {

134 
ušt64_t
 
»suÉ
;

135 
EXPECT_LEVELDB_OK
(
’v_
->
G‘FeSize
(
âame
, &
»suÉ
)è<< 
	gâame
;

136  
	g»suÉ
;

139 
Com·ùMemTabË
(è{ 
dbfuÎ
()->
TEST_Com·ùMemTabË
(); }

142 
MakeLogFe
(
ušt64_t
 
lognum
, 
Sequ’ûNumb”
 
£q
, 
Sliû
 
key
, Sliû 
v®
) {

143 
	g¡d
::
¡ršg
 
âame
 = 
LogFeName
(
dbÇme_
, 
lognum
);

144 
Wr™abËFe
* 
	gfe
;

145 
ASSERT_LEVELDB_OK
(
’v_
->
NewWr™abËFe
(
âame
, &
fe
));

146 
	glog
::
Wr™”
 
wr™”
(
fe
);

147 
Wr™eB©ch
 
	gb©ch
;

148 
	gb©ch
.
Put
(
key
, 
v®
);

149 
	gWr™eB©chIÁ”Çl
::
S‘Sequ’û
(&
b©ch
, 
£q
);

150 
ASSERT_LEVELDB_OK
(
wr™”
.
AddRecÜd
(
Wr™eB©chIÁ”Çl
::
CÚ‹Ás
(&
b©ch
)));

151 
ASSERT_LEVELDB_OK
(
fe
->
Flush
());

152 
d–‘e
 
	gfe
;

155 
	g´iv©e
:

156 
¡d
::
¡ršg
 
dbÇme_
;

157 
Env
* 
	g’v_
;

158 
DB
* 
	gdb_
;

161 
	$TEST_F
(
Recov”yTe¡
, 
Mªiã¡Reu£d
) {

162 ià(!
	`CªAµ’d
()) {

163 
¡d
::
	`årštf
(
¡d”r
,

167 
	`ASSERT_LEVELDB_OK
(
	`Put
("foo", "bar"));

168 
	`Clo£
();

169 
¡d
::
¡ršg
 
Şd_mªiã¡
 = 
	`Mªiã¡FeName
();

170 
	`O³n
();

171 
	`ASSERT_EQ
(
Şd_mªiã¡
, 
	`Mªiã¡FeName
());

172 
	`ASSERT_EQ
("b¬", 
	`G‘
("foo"));

173 
	`O³n
();

174 
	`ASSERT_EQ
(
Şd_mªiã¡
, 
	`Mªiã¡FeName
());

175 
	`ASSERT_EQ
("b¬", 
	`G‘
("foo"));

176 
	}
}

178 
	$TEST_F
(
Recov”yTe¡
, 
L¬geMªiã¡Com·ùed
) {

179 ià(!
	`CªAµ’d
()) {

180 
¡d
::
	`årštf
(
¡d”r
,

184 
	`ASSERT_LEVELDB_OK
(
	`Put
("foo", "bar"));

185 
	`Clo£
();

186 
¡d
::
¡ršg
 
Şd_mªiã¡
 = 
	`Mªiã¡FeName
();

190 
ušt64_t
 
Ën
 = 
	`FeSize
(
Şd_mªiã¡
);

191 
Wr™abËFe
* 
fe
;

192 
	`ASSERT_LEVELDB_OK
(
	`’v
()->
	`NewAµ’dabËFe
(
Şd_mªiã¡
, &
fe
));

193 
¡d
::
¡ršg
 
	`z”Ûs
(3 * 1048576 - 
¡©ic_ÿ¡
<
size_t
>(
Ën
), 0);

194 
	`ASSERT_LEVELDB_OK
(
fe
->
	`Aµ’d
(
z”Ûs
));

195 
	`ASSERT_LEVELDB_OK
(
fe
->
	`Flush
());

196 
d–‘e
 
fe
;

199 
	`O³n
();

200 
¡d
::
¡ršg
 
Ãw_mªiã¡
 = 
	`Mªiã¡FeName
();

201 
	`ASSERT_NE
(
Şd_mªiã¡
, 
Ãw_mªiã¡
);

202 
	`ASSERT_GT
(10000, 
	`FeSize
(
Ãw_mªiã¡
));

203 
	`ASSERT_EQ
("b¬", 
	`G‘
("foo"));

205 
	`O³n
();

206 
	`ASSERT_EQ
(
Ãw_mªiã¡
, 
	`Mªiã¡FeName
());

207 
	`ASSERT_EQ
("b¬", 
	`G‘
("foo"));

208 
	}
}

210 
	$TEST_F
(
Recov”yTe¡
, 
NoLogFes
) {

211 
	`ASSERT_LEVELDB_OK
(
	`Put
("foo", "bar"));

212 
	`ASSERT_EQ
(1, 
	`RemoveLogFes
());

213 
	`O³n
();

214 
	`ASSERT_EQ
("NOT_FOUND", 
	`G‘
("foo"));

215 
	`O³n
();

216 
	`ASSERT_EQ
("NOT_FOUND", 
	`G‘
("foo"));

217 
	}
}

219 
	$TEST_F
(
Recov”yTe¡
, 
LogFeReu£
) {

220 ià(!
	`CªAµ’d
()) {

221 
¡d
::
	`årštf
(
¡d”r
,

225 
i
 = 0; i < 2; i++) {

226 
	`ASSERT_LEVELDB_OK
(
	`Put
("foo", "bar"));

227 ià(
i
 == 0) {

229 
	`Com·ùMemTabË
();

231 
	`Clo£
();

232 
	`ASSERT_EQ
(1, 
	`NumLogs
());

233 
ušt64_t
 
numb”
 = 
	`Fœ¡LogFe
();

234 ià(
i
 == 0) {

235 
	`ASSERT_EQ
(0, 
	`FeSize
(
	`LogName
(
numb”
)));

237 
	`ASSERT_LT
(0, 
	`FeSize
(
	`LogName
(
numb”
)));

239 
	`O³n
();

240 
	`ASSERT_EQ
(1, 
	`NumLogs
());

241 
	`ASSERT_EQ
(
numb”
, 
	`Fœ¡LogFe
()) << "did‚ot„euse†og file";

242 
	`ASSERT_EQ
("b¬", 
	`G‘
("foo"));

243 
	`O³n
();

244 
	`ASSERT_EQ
(1, 
	`NumLogs
());

245 
	`ASSERT_EQ
(
numb”
, 
	`Fœ¡LogFe
()) << "did‚ot„euse†og file";

246 
	`ASSERT_EQ
("b¬", 
	`G‘
("foo"));

248 
	}
}

250 
	$TEST_F
(
Recov”yTe¡
, 
MuÉËMemTabËs
) {

252 cÚ¡ 
kNum
 = 1000;

253 
i
 = 0; i < 
kNum
; i++) {

254 
buf
[100];

255 
¡d
::
	`¢´štf
(
buf
, (buf), "%050d", 
i
);

256 
	`ASSERT_LEVELDB_OK
(
	`Put
(
buf
, buf));

258 
	`ASSERT_EQ
(0, 
	`NumTabËs
());

259 
	`Clo£
();

260 
	`ASSERT_EQ
(0, 
	`NumTabËs
());

261 
	`ASSERT_EQ
(1, 
	`NumLogs
());

262 
ušt64_t
 
Şd_log_fe
 = 
	`Fœ¡LogFe
();

265 
O±iÚs
 
İt
;

266 
İt
.
»u£_logs
 = 
Œue
;

267 
İt
.
wr™e_bufãr_size
 = (
kNum
 * 100) / 2;

268 
	`O³n
(&
İt
);

269 
	`ASSERT_LE
(2, 
	`NumTabËs
());

270 
	`ASSERT_EQ
(1, 
	`NumLogs
());

271 
	`ASSERT_NE
(
Şd_log_fe
, 
	`Fœ¡LogFe
()) << "must‚ot„euse†og";

272 
i
 = 0; i < 
kNum
; i++) {

273 
buf
[100];

274 
¡d
::
	`¢´štf
(
buf
, (buf), "%050d", 
i
);

275 
	`ASSERT_EQ
(
buf
, 
	`G‘
(buf));

277 
	}
}

279 
	$TEST_F
(
Recov”yTe¡
, 
MuÉËLogFes
) {

280 
	`ASSERT_LEVELDB_OK
(
	`Put
("foo", "bar"));

281 
	`Clo£
();

282 
	`ASSERT_EQ
(1, 
	`NumLogs
());

285 
ušt64_t
 
Şd_log
 = 
	`Fœ¡LogFe
();

286 
	`MakeLogFe
(
Şd_log
 + 1, 1000, "hello", "world");

287 
	`MakeLogFe
(
Şd_log
 + 2, 1001, "hi", "there");

288 
	`MakeLogFe
(
Şd_log
 + 3, 1002, "foo", "bar2");

291 
	`O³n
();

292 
	`ASSERT_LE
(1, 
	`NumTabËs
());

293 
	`ASSERT_EQ
(1, 
	`NumLogs
());

294 
ušt64_t
 
Ãw_log
 = 
	`Fœ¡LogFe
();

295 
	`ASSERT_LE
(
Şd_log
 + 3, 
Ãw_log
);

296 
	`ASSERT_EQ
("b¬2", 
	`G‘
("foo"));

297 
	`ASSERT_EQ
("wÜld", 
	`G‘
("hello"));

298 
	`ASSERT_EQ
("th”e", 
	`G‘
("hi"));

301 
	`O³n
();

302 
	`ASSERT_LE
(1, 
	`NumTabËs
());

303 
	`ASSERT_EQ
(1, 
	`NumLogs
());

304 ià(
	`CªAµ’d
()) {

305 
	`ASSERT_EQ
(
Ãw_log
, 
	`Fœ¡LogFe
());

307 
	`ASSERT_EQ
("b¬2", 
	`G‘
("foo"));

308 
	`ASSERT_EQ
("wÜld", 
	`G‘
("hello"));

309 
	`ASSERT_EQ
("th”e", 
	`G‘
("hi"));

312 
	`Clo£
();

313 
	`MakeLogFe
(
Şd_log
 + 1, 2000, "hello", "stale write");

314 
	`O³n
();

315 
	`ASSERT_LE
(1, 
	`NumTabËs
());

316 
	`ASSERT_EQ
(1, 
	`NumLogs
());

317 ià(
	`CªAµ’d
()) {

318 
	`ASSERT_EQ
(
Ãw_log
, 
	`Fœ¡LogFe
());

320 
	`ASSERT_EQ
("b¬2", 
	`G‘
("foo"));

321 
	`ASSERT_EQ
("wÜld", 
	`G‘
("hello"));

322 
	`ASSERT_EQ
("th”e", 
	`G‘
("hi"));

323 
	}
}

325 
	$TEST_F
(
Recov”yTe¡
, 
Mªiã¡Missšg
) {

326 
	`ASSERT_LEVELDB_OK
(
	`Put
("foo", "bar"));

327 
	`Clo£
();

328 
	`RemoveMªiã¡Fe
();

330 
Stus
 
¡©us
 = 
	`O³nW™hStus
();

331 #ià
	`defšed
(
LEVELDB_PLATFORM_CHROMIUM
)

333 
	`ASSERT_TRUE
(
¡©us
.
	`IsIOE¼Ü
());

335 
	`ASSERT_TRUE
(
¡©us
.
	`IsCÜru±iÚ
());

337 
	}
}

	@db/repair.cc

27 
	~"db/bud”.h
"

28 
	~"db/db_im¶.h
"

29 
	~"db/dbfÜm©.h
"

30 
	~"db/f’ame.h
"

31 
	~"db/log_»ad”.h
"

32 
	~"db/log_wr™”.h
"

33 
	~"db/membË.h
"

34 
	~"db/bË_ÿche.h
"

35 
	~"db/v”siÚ_ed™.h
"

36 
	~"db/wr™e_b©ch_š‹º®.h
"

37 
	~"Ëv–db/com·¿tÜ.h
"

38 
	~"Ëv–db/db.h
"

39 
	~"Ëv–db/’v.h
"

41 
Çme¥aû
 
	gËv–db
 {

43 
	gÇme¥aû
 {

45 şas 
	cR•aœ”
 {

46 
	gpublic
:

47 
R•aœ”
(cÚ¡ 
¡d
::
¡ršg
& 
dbÇme
, cÚ¡ 
O±iÚs
& 
İtiÚs
)

48 : 
dbÇme_
(
dbÇme
),

49 
’v_
(
İtiÚs
.
’v
),

50 
icmp_
(
İtiÚs
.
com·¿tÜ
),

51 
Şicy_
(
İtiÚs
.
f‹r_pŞicy
),

52 
İtiÚs_
(
Sª™izeO±iÚs
(
dbÇme
, &
icmp_
, &
Şicy_
, 
İtiÚs
)),

53 
owns_šfo_log_
(
İtiÚs_
.
šfo_log
 !ğ
İtiÚs
.info_log),

54 
owns_ÿche_
(
İtiÚs_
.
block_ÿche
 !ğ
İtiÚs
.block_cache),

55 
Ãxt_fe_numb”_
(1) {

57 
	gbË_ÿche_
 = 
Ãw
 
TabËCache
(
dbÇme_
, 
İtiÚs_
, 10);

60 ~
R•aœ”
() {

61 
d–‘e
 
	gbË_ÿche_
;

62 ià(
	gowns_šfo_log_
) {

63 
d–‘e
 
	gİtiÚs_
.
	gšfo_log
;

65 ià(
	gowns_ÿche_
) {

66 
d–‘e
 
	gİtiÚs_
.
	gblock_ÿche
;

70 
Stus
 
Run
() {

71 
Stus
 
	g¡©us
 = 
FšdFes
();

72 ià(
	g¡©us
.
ok
()) {

73 
CÚv”tLogFesToTabËs
();

74 
ExŒaùM‘aD©a
();

75 
	g¡©us
 = 
Wr™eDesütÜ
();

77 ià(
	g¡©us
.
ok
()) {

78 
	gby‹s
 = 0;

79 
size_t
 
	gi
 = 0; i < 
	gbËs_
.
size
(); i++) {

80 
	gby‹s
 +ğ
bËs_
[
i
].
m‘a
.
fe_size
;

82 
Log
(
İtiÚs_
.
šfo_log
,

87 
dbÇme_
.
c_¡r
(), 
¡©ic_ÿ¡
<>(
bËs_
.
size
()), 
by‹s
);

89  
	g¡©us
;

92 
	g´iv©e
:

93 
	sTabËInfo
 {

94 
FeM‘aD©a
 
m‘a
;

95 
Sequ’ûNumb”
 
	gmax_£qu’û
;

98 
Stus
 
FšdFes
() {

99 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> 
f’ames
;

100 
Stus
 
	g¡©us
 = 
’v_
->
G‘Chd»n
(
dbÇme_
, &
f’ames
);

101 ià(!
	g¡©us
.
ok
()) {

102  
	g¡©us
;

104 ià(
	gf’ames
.
em±y
()) {

105  
	gStus
::
IOE¼Ü
(
dbÇme_
, "repair found‚o files");

108 
ušt64_t
 
	gnumb”
;

109 
FeTy³
 
	gty³
;

110 
size_t
 
	gi
 = 0; i < 
	gf’ames
.
size
(); i++) {

111 ià(
P¬£FeName
(
f’ames
[
i
], &
numb”
, &
ty³
)) {

112 ià(
	gty³
 =ğ
kDesütÜFe
) {

113 
mªiã¡s_
.
push_back
(
f’ames
[
i
]);

115 ià(
	gnumb”
 + 1 > 
	gÃxt_fe_numb”_
) {

116 
	gÃxt_fe_numb”_
 = 
numb”
 + 1;

118 ià(
	gty³
 =ğ
kLogFe
) {

119 
logs_
.
push_back
(
numb”
);

120 } ià(
	gty³
 =ğ
kTabËFe
) {

121 
bË_numb”s_
.
push_back
(
numb”
);

128  
	g¡©us
;

131 
CÚv”tLogFesToTabËs
() {

132 
size_t
 
	gi
 = 0; i < 
	glogs_
.
size
(); i++) {

133 
	g¡d
::
¡ršg
 
logÇme
 = 
LogFeName
(
dbÇme_
, 
logs_
[
i
]);

134 
Stus
 
	g¡©us
 = 
CÚv”tLogToTabË
(
logs_
[
i
]);

135 ià(!
	g¡©us
.
ok
()) {

136 
Log
(
İtiÚs_
.
šfo_log
, "Log #%llu: ignoring conversionƒrror: %s",

137 ()
logs_
[
i
], 
¡©us
.
ToSŒšg
().
c_¡r
());

139 
ArchiveFe
(
logÇme
);

143 
Stus
 
CÚv”tLogToTabË
(
ušt64_t
 
log
) {

144 
	gLogR•Ü‹r
 : 
public
 
log
::
R—d”
::
R•Ü‹r
 {

145 
Env
* 
’v
;

146 
Logg”
* 
	gšfo_log
;

147 
ušt64_t
 
	glognum
;

148 
CÜru±iÚ
(
size_t
 
by‹s
, cÚ¡ 
Stus
& 
s
è
	gov”ride
 {

150 
Log
(
šfo_log
, "Log #%llu: dropping %d bytes; %s",

151 ()
lognum
, 
¡©ic_ÿ¡
<>(
by‹s
),

152 
s
.
ToSŒšg
().
c_¡r
());

157 
	g¡d
::
¡ršg
 
logÇme
 = 
LogFeName
(
dbÇme_
, 
log
);

158 
Sequ’tŸlFe
* 
	glfe
;

159 
Stus
 
	g¡©us
 = 
’v_
->
NewSequ’tŸlFe
(
logÇme
, &
lfe
);

160 ià(!
	g¡©us
.
ok
()) {

161  
	g¡©us
;

165 
LogR•Ü‹r
 
	g»pÜ‹r
;

166 
	g»pÜ‹r
.
	g’v
 = 
’v_
;

167 
	g»pÜ‹r
.
	gšfo_log
 = 
İtiÚs_
.
šfo_log
;

168 
	g»pÜ‹r
.
	glognum
 = 
log
;

173 
	glog
::
R—d”
 
»ad”
(
lfe
, &
»pÜ‹r
, 
çl£
 ,

177 
	g¡d
::
¡ršg
 
sü©ch
;

178 
Sliû
 
	g»cÜd
;

179 
Wr™eB©ch
 
	gb©ch
;

180 
MemTabË
* 
	gmem
 = 
Ãw
 MemTabË(
icmp_
);

181 
	gmem
->
Ref
();

182 
	gcouÁ”
 = 0;

183 
	g»ad”
.
R—dRecÜd
(&
»cÜd
, &
sü©ch
)) {

184 ià(
	g»cÜd
.
size
() < 12) {

185 
	g»pÜ‹r
.
CÜru±iÚ
(
»cÜd
.
size
(),

186 
Stus
::
CÜru±iÚ
("log„ecordoo small"));

189 
	gWr™eB©chIÁ”Çl
::
S‘CÚ‹Ás
(&
b©ch
, 
»cÜd
);

190 
	g¡©us
 = 
Wr™eB©chIÁ”Çl
::
In£¹IÁo
(&
b©ch
, 
mem
);

191 ià(
	g¡©us
.
ok
()) {

192 
	gcouÁ”
 +ğ
Wr™eB©chIÁ”Çl
::
CouÁ
(&
b©ch
);

194 
Log
(
İtiÚs_
.
šfo_log
, "Log #%llu: ignoring %s",

195 ()
log
, 
¡©us
.
ToSŒšg
().
c_¡r
());

196 
	g¡©us
 = 
Stus
::
OK
();

199 
d–‘e
 
	glfe
;

203 
FeM‘aD©a
 
	gm‘a
;

204 
	gm‘a
.
	gnumb”
 = 
Ãxt_fe_numb”_
++;

205 
I‹¿tÜ
* 
	g™”
 = 
mem
->
NewI‹¿tÜ
();

206 
	g¡©us
 = 
BudTabË
(
dbÇme_
, 
’v_
, 
İtiÚs_
, 
bË_ÿche_
, 
™”
, &
m‘a
);

207 
d–‘e
 
	g™”
;

208 
	gmem
->
UÄef
();

209 
	gmem
 = 
nuÎ±r
;

210 ià(
	g¡©us
.
ok
()) {

211 ià(
	gm‘a
.
	gfe_size
 > 0) {

212 
	gbË_numb”s_
.
push_back
(
m‘a
.
numb”
);

215 
Log
(
İtiÚs_
.
šfo_log
, "Log #%llu: %d ops savedo Table #%llu %s",

216 ()
log
, 
couÁ”
, ()
m‘a
.
numb”
,

217 
¡©us
.
ToSŒšg
().
c_¡r
());

218  
	g¡©us
;

221 
ExŒaùM‘aD©a
() {

222 
size_t
 
	gi
 = 0; i < 
	gbË_numb”s_
.
size
(); i++) {

223 
SÿnTabË
(
bË_numb”s_
[
i
]);

227 
I‹¿tÜ
* 
NewTabËI‹¿tÜ
(cÚ¡ 
FeM‘aD©a
& 
m‘a
) {

230 
R—dO±iÚs
 
	gr
;

231 
	gr
.
	gv”ify_checksums
 = 
İtiÚs_
.
·¿noid_checks
;

232  
	gbË_ÿche_
->
NewI‹¿tÜ
(
r
, 
m‘a
.
numb”
, m‘a.
fe_size
);

235 
SÿnTabË
(
ušt64_t
 
numb”
) {

236 
TabËInfo
 
	gt
;

237 
	gt
.
	gm‘a
.
	gnumb”
 = 
numb”
;

238 
	g¡d
::
¡ršg
 
âame
 = 
TabËFeName
(
dbÇme_
, 
numb”
);

239 
Stus
 
	g¡©us
 = 
’v_
->
G‘FeSize
(
âame
, &
t
.
m‘a
.
fe_size
);

240 ià(!
	g¡©us
.
ok
()) {

242 
	gâame
 = 
SSTTabËFeName
(
dbÇme_
, 
numb”
);

243 
Stus
 
	gs2
 = 
’v_
->
G‘FeSize
(
âame
, &
t
.
m‘a
.
fe_size
);

244 ià(
	gs2
.
ok
()) {

245 
	g¡©us
 = 
Stus
::
OK
();

248 ià(!
	g¡©us
.
ok
()) {

249 
ArchiveFe
(
TabËFeName
(
dbÇme_
, 
numb”
));

250 
ArchiveFe
(
SSTTabËFeName
(
dbÇme_
, 
numb”
));

251 
Log
(
İtiÚs_
.
šfo_log
, "Table #%llu: dropped: %s",

252 ()
t
.
m‘a
.
numb”
, 
¡©us
.
ToSŒšg
().
c_¡r
());

257 
	gcouÁ”
 = 0;

258 
I‹¿tÜ
* 
	g™”
 = 
NewTabËI‹¿tÜ
(
t
.
m‘a
);

259 
boŞ
 
	gem±y
 = 
Œue
;

260 
P¬£dIÁ”ÇlKey
 
	g·r£d
;

261 
	gt
.
	gmax_£qu’û
 = 0;

262 
	g™”
->
S“kToFœ¡
(); i‹r->
V®id
(); i‹r->
Next
()) {

263 
Sliû
 
	gkey
 = 
™”
->
key
();

264 ià(!
P¬£IÁ”ÇlKey
(
key
, &
·r£d
)) {

265 
Log
(
İtiÚs_
.
šfo_log
, "Table #%llu: unparsable key %s",

266 ()
t
.
m‘a
.
numb”
, 
Esÿ³SŒšg
(
key
).
c_¡r
());

270 
	gcouÁ”
++;

271 ià(
	gem±y
) {

272 
	gem±y
 = 
çl£
;

273 
	gt
.
	gm‘a
.
	gsm®Ë¡
.
DecodeFrom
(
key
);

275 
	gt
.
	gm‘a
.
	gÏrge¡
.
DecodeFrom
(
key
);

276 ià(
	g·r£d
.
	g£qu’û
 > 
	gt
.
	gmax_£qu’û
) {

277 
	gt
.
	gmax_£qu’û
 = 
·r£d
.
£qu’û
;

280 ià(!
	g™”
->
¡©us
().
ok
()) {

281 
	g¡©us
 = 
™”
->
¡©us
();

283 
d–‘e
 
	g™”
;

284 
Log
(
İtiÚs_
.
šfo_log
, "Table #%llu: %dƒntries %s",

285 ()
t
.
m‘a
.
numb”
, 
couÁ”
, 
¡©us
.
ToSŒšg
().
c_¡r
());

287 ià(
	g¡©us
.
ok
()) {

288 
	gbËs_
.
push_back
(
t
);

290 
R•aœTabË
(
âame
, 
t
);

294 
R•aœTabË
(cÚ¡ 
¡d
::
¡ršg
& 
¤c
, 
TabËInfo
 
t
) {

299 
	g¡d
::
¡ršg
 
cİy
 = 
TabËFeName
(
dbÇme_
, 
Ãxt_fe_numb”_
++);

300 
Wr™abËFe
* 
	gfe
;

301 
Stus
 
	gs
 = 
’v_
->
NewWr™abËFe
(
cİy
, &
fe
);

302 ià(!
	gs
.
ok
()) {

305 
TabËBud”
* 
	gbud”
 = 
Ãw
 TabËBud”(
İtiÚs_
, 
fe
);

308 
I‹¿tÜ
* 
	g™”
 = 
NewTabËI‹¿tÜ
(
t
.
m‘a
);

309 
	gcouÁ”
 = 0;

310 
	g™”
->
S“kToFœ¡
(); i‹r->
V®id
(); i‹r->
Next
()) {

311 
	gbud”
->
Add
(
™”
->
key
(), i‹r->
v®ue
());

312 
	gcouÁ”
++;

314 
d–‘e
 
	g™”
;

316 
ArchiveFe
(
¤c
);

317 ià(
	gcouÁ”
 == 0) {

318 
bud”
->
AbªdÚ
();

320 
	gs
 = 
bud”
->
Fšish
();

321 ià(
	gs
.
ok
()) {

322 
	gt
.
	gm‘a
.
	gfe_size
 = 
bud”
->
FeSize
();

325 
d–‘e
 
	gbud”
;

326 
	gbud”
 = 
nuÎ±r
;

328 ià(
	gs
.
ok
()) {

329 
	gs
 = 
fe
->
Clo£
();

331 
d–‘e
 
	gfe
;

332 
	gfe
 = 
nuÎ±r
;

334 ià(
	gcouÁ”
 > 0 && 
	gs
.
ok
()) {

335 
	g¡d
::
¡ršg
 
Üig
 = 
TabËFeName
(
dbÇme_
, 
t
.
m‘a
.
numb”
);

336 
	gs
 = 
’v_
->
R’ameFe
(
cİy
, 
Üig
);

337 ià(
	gs
.
ok
()) {

338 
Log
(
İtiÚs_
.
šfo_log
, "Table #%llu: %dƒntries„epaired",

339 ()
t
.
m‘a
.
numb”
, 
couÁ”
);

340 
	gbËs_
.
push_back
(
t
);

343 ià(!
	gs
.
ok
()) {

344 
	g’v_
->
RemoveFe
(
cİy
);

348 
Stus
 
Wr™eDesütÜ
() {

349 
	g¡d
::
¡ršg
 
tmp
 = 
TempFeName
(
dbÇme_
, 1);

350 
Wr™abËFe
* 
	gfe
;

351 
Stus
 
	g¡©us
 = 
’v_
->
NewWr™abËFe
(
tmp
, &
fe
);

352 ià(!
	g¡©us
.
ok
()) {

353  
	g¡©us
;

356 
Sequ’ûNumb”
 
	gmax_£qu’û
 = 0;

357 
size_t
 
	gi
 = 0; i < 
	gbËs_
.
size
(); i++) {

358 ià(
	gmax_£qu’û
 < 
	gbËs_
[
i
].max_sequence) {

359 
	gmax_£qu’û
 = 
bËs_
[
i
].
max_£qu’û
;

363 
	ged™_
.
S‘Com·¿tÜName
(
icmp_
.
u£r_com·¿tÜ
()->
Name
());

364 
	ged™_
.
S‘LogNumb”
(0);

365 
	ged™_
.
S‘NextFe
(
Ãxt_fe_numb”_
);

366 
	ged™_
.
S‘La¡Sequ’û
(
max_£qu’û
);

368 
size_t
 
	gi
 = 0; i < 
	gbËs_
.
size
(); i++) {

370 cÚ¡ 
	gTabËInfo
& 
	gt
 = 
bËs_
[
i
];

371 
	ged™_
.
AddFe
(0, 
t
.
m‘a
.
numb”
,.m‘a.
fe_size
,.m‘a.
sm®Ë¡
,

372 
t
.
m‘a
.
Ïrge¡
);

378 
	glog
::
Wr™”
 
log
(
fe
);

379 
	g¡d
::
¡ršg
 
»cÜd
;

380 
	ged™_
.
EncodeTo
(&
»cÜd
);

381 
	g¡©us
 = 
log
.
AddRecÜd
(
»cÜd
);

383 ià(
	g¡©us
.
ok
()) {

384 
	g¡©us
 = 
fe
->
Clo£
();

386 
d–‘e
 
	gfe
;

387 
	gfe
 = 
nuÎ±r
;

389 ià(!
	g¡©us
.
ok
()) {

390 
	g’v_
->
RemoveFe
(
tmp
);

393 
size_t
 
	gi
 = 0; i < 
	gmªiã¡s_
.
size
(); i++) {

394 
ArchiveFe
(
dbÇme_
 + "/" + 
mªiã¡s_
[
i
]);

398 
	g¡©us
 = 
’v_
->
R’ameFe
(
tmp
, 
DesütÜFeName
(
dbÇme_
, 1));

399 ià(
	g¡©us
.
ok
()) {

400 
	g¡©us
 = 
S‘Cu¼’tFe
(
’v_
, 
dbÇme_
, 1);

402 
	g’v_
->
RemoveFe
(
tmp
);

405  
	g¡©us
;

408 
ArchiveFe
(cÚ¡ 
¡d
::
¡ršg
& 
âame
) {

413 cÚ¡ * 
¦ash
 = 
¡¼chr
(
âame
.
c_¡r
(), '/');

414 
	g¡d
::
¡ršg
 
Ãw_dœ
;

415 ià(
	g¦ash
 !ğ
nuÎ±r
) {

416 
Ãw_dœ
.
assign
(
âame
.
d©a
(), 
¦ash
 - fname.data());

418 
	gÃw_dœ
.
­³nd
("/lost");

419 
	g’v_
->
C»©eDœ
(
Ãw_dœ
);

420 
	g¡d
::
¡ršg
 
Ãw_fe
 = 
Ãw_dœ
;

421 
	gÃw_fe
.
­³nd
("/");

422 
	gÃw_fe
.
­³nd
((
¦ash
 =ğ
nuÎ±r
è? 
âame
.
c_¡r
() : slash + 1);

423 
Stus
 
	gs
 = 
’v_
->
R’ameFe
(
âame
, 
Ãw_fe
);

424 
Log
(
İtiÚs_
.
šfo_log
, "Archivšg %s: %s\n", 
âame
.
c_¡r
(),

425 
s
.
ToSŒšg
().
c_¡r
());

428 cÚ¡ 
	g¡d
::
¡ršg
 
dbÇme_
;

429 
Env
* cÚ¡ 
	g’v_
;

430 
IÁ”ÇlKeyCom·¿tÜ
 cÚ¡ 
	gicmp_
;

431 
IÁ”ÇlF‹rPŞicy
 cÚ¡ 
	gŞicy_
;

432 cÚ¡ 
O±iÚs
 
	gİtiÚs_
;

433 
boŞ
 
	gowns_šfo_log_
;

434 
boŞ
 
	gowns_ÿche_
;

435 
TabËCache
* 
	gbË_ÿche_
;

436 
V”siÚEd™
 
	ged™_
;

438 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> 
mªiã¡s_
;

439 
	g¡d
::
veùÜ
<
ušt64_t
> 
bË_numb”s_
;

440 
	g¡d
::
veùÜ
<
ušt64_t
> 
logs_
;

441 
	g¡d
::
veùÜ
<
TabËInfo
> 
bËs_
;

442 
ušt64_t
 
	gÃxt_fe_numb”_
;

446 
Stus
 
	$R•aœDB
(cÚ¡ 
¡d
::
¡ršg
& 
dbÇme
, cÚ¡ 
O±iÚs
& 
İtiÚs
) {

447 
R•aœ”
 
	`»·œ”
(
dbÇme
, 
İtiÚs
);

448  
»·œ”
.
	`Run
();

449 
	}
}

	@db/skiplist.h

5 #iâdeà
STORAGE_LEVELDB_DB_SKIPLIST_H_


6 
	#STORAGE_LEVELDB_DB_SKIPLIST_H_


	)

30 
	~<©omic
>

31 
	~<ÿs£¹
>

32 
	~<c¡dlib
>

34 
	~"ut/¬’a.h
"

35 
	~"ut/¿ndom.h
"

37 
Çme¥aû
 
	gËv–db
 {

39 
	g‹m¶©e
 <
ty³Çme
 
	gKey
, 
şass
 
	gCom·¿tÜ
>

40 şas 
	cSkLi¡
 {

41 
	g´iv©e
:

42 
Node
;

44 
	gpublic
:

48 
ex¶ic™
 
SkLi¡
(
Com·¿tÜ
 
cmp
, 
A»Ç
* 
¬’a
);

50 
SkLi¡
(cÚ¡ SkLi¡&èğ
d–‘e
;

51 
	gSkLi¡
& 
	gİ”©Ü
=(cÚ¡ 
SkLi¡
&èğ
d–‘e
;

55 
In£¹
(cÚ¡ 
Key
& 
key
);

58 
boŞ
 
CÚšs
(cÚ¡ 
Key
& 
key
) const;

61 şas 
	cI‹¿tÜ
 {

62 
	gpublic
:

65 
ex¶ic™
 
I‹¿tÜ
(cÚ¡ 
SkLi¡
* 
li¡
);

68 
boŞ
 
V®id
() const;

72 cÚ¡ 
	gKey
& 
key
() const;

76 
Next
();

80 
P»v
();

83 
S“k
(cÚ¡ 
Key
& 
rg‘
);

87 
S“kToFœ¡
();

91 
S“kToLa¡
();

93 
	g´iv©e
:

94 cÚ¡ 
SkLi¡
* 
li¡_
;

95 
Node
* 
	gnode_
;

99 
	g´iv©e
:

100 ’um { 
kMaxHeight
 = 12 };

102 
šlše
 
G‘MaxHeight
() const {

103  
	gmax_height_
.
lßd
(
¡d
::
memÜy_Üd”_»Ïxed
);

106 
Node
* 
NewNode
(cÚ¡ 
Key
& 
key
, 
height
);

107 
RªdomHeight
();

108 
boŞ
 
Equ®
(cÚ¡ 
Key
& 
a
, cÚ¡ Key& 
b
ècÚ¡ {  (
com·»_
(a, b) == 0); }

111 
boŞ
 
KeyIsAá”Node
(cÚ¡ 
Key
& 
key
, 
Node
* 
n
) const;

118 
Node
* 
FšdG»©”OrEqu®
(cÚ¡ 
Key
& 
key
, Node** 
´ev
) const;

122 
Node
* 
FšdLessThª
(cÚ¡ 
Key
& 
key
) const;

126 
Node
* 
FšdLa¡
() const;

129 
Com·¿tÜ
 cÚ¡ 
	gcom·»_
;

130 
A»Ç
* cÚ¡ 
	g¬’a_
;

132 
Node
* cÚ¡ 
	gh—d_
;

136 
	g¡d
::
©omic
<> 
max_height_
;

139 
Rªdom
 
	gºd_
;

143 
	g‹m¶©e
 <
ty³Çme
 
	gKey
, 
şass
 
	gCom·¿tÜ
>

144 
	gSkLi¡
<
	gKey
, 
	gCom·¿tÜ
>::
Node
 {

145 
ex¶ic™
 
Node
(cÚ¡ 
Key
& 
k
è: 
key
(k) {}

147 
Key
 cÚ¡ 
key
;

151 
Node
* 
Next
(
n
) {

152 
as£¹
(
n
 >= 0);

155  
	gÃxt_
[
n
].
lßd
(
¡d
::
memÜy_Üd”_acquœe
);

157 
S‘Next
(
n
, 
Node
* 
x
) {

158 
as£¹
(
n
 >= 0);

161 
	gÃxt_
[
n
].
¡Üe
(
x
, 
¡d
::
memÜy_Üd”_»Ëa£
);

165 
Node
* 
NoB¬r›r_Next
(
n
) {

166 
as£¹
(
n
 >= 0);

167  
	gÃxt_
[
n
].
lßd
(
¡d
::
memÜy_Üd”_»Ïxed
);

169 
NoB¬r›r_S‘Next
(
n
, 
Node
* 
x
) {

170 
as£¹
(
n
 >= 0);

171 
	gÃxt_
[
n
].
¡Üe
(
x
, 
¡d
::
memÜy_Üd”_»Ïxed
);

174 
	g´iv©e
:

176 
¡d
::
©omic
<
Node
*> 
Ãxt_
[1];

179 
	g‹m¶©e
 <
ty³Çme
 
	gKey
, 
şass
 
	gCom·¿tÜ
>

180 
ty³Çme
 
	gSkLi¡
<
	gKey
, 
	gCom·¿tÜ
>::
Node
* 
SkLi¡
<
Key
, Com·¿tÜ>::
	$NewNode
(

181 cÚ¡ 
Key
& 
key
, 
height
) {

182 * cÚ¡ 
node_memÜy
 = 
¬’a_
->
	`AÎoÿ‹AligÃd
(

183 (
Node
è+ (
¡d
::
©omic
<Node*>è* (
height
 - 1));

184  
	`Ãw
 (
node_memÜy
è
	`Node
(
key
);

185 
	}
}

187 
	g‹m¶©e
 <
ty³Çme
 
	gKey
, 
şass
 
	gCom·¿tÜ
>

188 
šlše
 
	gSkLi¡
<
	gKey
, 
	gCom·¿tÜ
>::
I‹¿tÜ
::
	$I‹¿tÜ
(cÚ¡ 
SkLi¡
* 
li¡
) {

189 
li¡_
 = 
li¡
;

190 
node_
 = 
nuÎ±r
;

191 
	}
}

193 
	g‹m¶©e
 <
ty³Çme
 
	gKey
, 
şass
 
	gCom·¿tÜ
>

194 
šlše
 
boŞ
 
	gSkLi¡
<
	gKey
, 
	gCom·¿tÜ
>::
I‹¿tÜ
::
	$V®id
() const {

195  
node_
 !ğ
nuÎ±r
;

196 
	}
}

198 
	g‹m¶©e
 <
ty³Çme
 
	gKey
, 
şass
 
	gCom·¿tÜ
>

199 
šlše
 cÚ¡ 
	gKey
& 
	gSkLi¡
<Key, 
	gCom·¿tÜ
>::
I‹¿tÜ
::
	$key
() const {

200 
	`as£¹
(
	`V®id
());

201  
node_
->
key
;

202 
	}
}

204 
	g‹m¶©e
 <
ty³Çme
 
	gKey
, 
şass
 
	gCom·¿tÜ
>

205 
šlše
 
	gSkLi¡
<
	gKey
, 
	gCom·¿tÜ
>::
I‹¿tÜ
::
	$Next
() {

206 
	`as£¹
(
	`V®id
());

207 
node_
 =‚ode_->
	`Next
(0);

208 
	}
}

210 
	g‹m¶©e
 <
ty³Çme
 
	gKey
, 
şass
 
	gCom·¿tÜ
>

211 
šlše
 
	gSkLi¡
<
	gKey
, 
	gCom·¿tÜ
>::
I‹¿tÜ
::
	$P»v
() {

214 
	`as£¹
(
	`V®id
());

215 
node_
 = 
li¡_
->
	`FšdLessThª
Òode_->
key
);

216 ià(
node_
 =ğ
li¡_
->
h—d_
) {

217 
node_
 = 
nuÎ±r
;

219 
	}
}

221 
	g‹m¶©e
 <
ty³Çme
 
	gKey
, 
şass
 
	gCom·¿tÜ
>

222 
šlše
 
	gSkLi¡
<
	gKey
, 
	gCom·¿tÜ
>::
I‹¿tÜ
::
	$S“k
(cÚ¡ 
Key
& 
rg‘
) {

223 
node_
 = 
li¡_
->
	`FšdG»©”OrEqu®
(
rg‘
, 
nuÎ±r
);

224 
	}
}

226 
	g‹m¶©e
 <
ty³Çme
 
	gKey
, 
şass
 
	gCom·¿tÜ
>

227 
šlše
 
	gSkLi¡
<
	gKey
, 
	gCom·¿tÜ
>::
I‹¿tÜ
::
	$S“kToFœ¡
() {

228 
node_
 = 
li¡_
->
h—d_
->
	`Next
(0);

229 
	}
}

231 
	g‹m¶©e
 <
ty³Çme
 
	gKey
, 
şass
 
	gCom·¿tÜ
>

232 
šlše
 
	gSkLi¡
<
	gKey
, 
	gCom·¿tÜ
>::
I‹¿tÜ
::
	$S“kToLa¡
() {

233 
node_
 = 
li¡_
->
	`FšdLa¡
();

234 ià(
node_
 =ğ
li¡_
->
h—d_
) {

235 
node_
 = 
nuÎ±r
;

237 
	}
}

239 
	g‹m¶©e
 <
ty³Çme
 
	gKey
, 
şass
 
	gCom·¿tÜ
>

240 
	gSkLi¡
<
	gKey
, 
	gCom·¿tÜ
>::
	$RªdomHeight
() {

242 cÚ¡ 
kB¿nchšg
 = 4;

243 
height
 = 1;

244 
height
 < 
kMaxHeight
 && 
ºd_
.
	`OÃIn
(
kB¿nchšg
)) {

245 
height
++;

247 
	`as£¹
(
height
 > 0);

248 
	`as£¹
(
height
 <ğ
kMaxHeight
);

249  
height
;

250 
	}
}

252 
	g‹m¶©e
 <
ty³Çme
 
	gKey
, 
şass
 
	gCom·¿tÜ
>

253 
boŞ
 
	gSkLi¡
<
	gKey
, 
	gCom·¿tÜ
>::
	$KeyIsAá”Node
(cÚ¡ 
Key
& 
key
, 
Node
* 
n
) const {

255  (
n
 !ğ
nuÎ±r
è&& (
	`com·»_
Ò->
key
, key) < 0);

256 
	}
}

258 
	g‹m¶©e
 <
ty³Çme
 
	gKey
, 
şass
 
	gCom·¿tÜ
>

259 
ty³Çme
 
	gSkLi¡
<
	gKey
, 
	gCom·¿tÜ
>::
Node
*

260 
SkLi¡
<
Key
, 
	gCom·¿tÜ
>::
	$FšdG»©”OrEqu®
(cÚ¡ 
Key
& 
key
,

261 
Node
** 
´ev
) const {

262 
Node
* 
x
 = 
h—d_
;

263 
Ëv–
 = 
	`G‘MaxHeight
() - 1;

264 
Œue
) {

265 
Node
* 
Ãxt
 = 
x
->
	`Next
(
Ëv–
);

266 ià(
	`KeyIsAá”Node
(
key
, 
Ãxt
)) {

268 
x
 = 
Ãxt
;

270 ià(
´ev
 !ğ
nuÎ±r
è´ev[
Ëv–
] = 
x
;

271 ià(
Ëv–
 == 0) {

272  
Ãxt
;

275 
Ëv–
--;

279 
	}
}

281 
	g‹m¶©e
 <
ty³Çme
 
	gKey
, 
şass
 
	gCom·¿tÜ
>

282 
ty³Çme
 
	gSkLi¡
<
	gKey
, 
	gCom·¿tÜ
>::
Node
*

283 
SkLi¡
<
Key
, 
	gCom·¿tÜ
>::
	$FšdLessThª
(cÚ¡ 
Key
& 
key
) const {

284 
Node
* 
x
 = 
h—d_
;

285 
Ëv–
 = 
	`G‘MaxHeight
() - 1;

286 
Œue
) {

287 
	`as£¹
(
x
 =ğ
h—d_
 || 
	`com·»_
(x->
key
, key) < 0);

288 
Node
* 
Ãxt
 = 
x
->
	`Next
(
Ëv–
);

289 ià(
Ãxt
 =ğ
nuÎ±r
 || 
	`com·»_
Òext->
key
, key) >= 0) {

290 ià(
Ëv–
 == 0) {

291  
x
;

294 
Ëv–
--;

297 
x
 = 
Ãxt
;

300 
	}
}

302 
	g‹m¶©e
 <
ty³Çme
 
	gKey
, 
şass
 
	gCom·¿tÜ
>

303 
ty³Çme
 
	gSkLi¡
<
	gKey
, 
	gCom·¿tÜ
>::
Node
* 
SkLi¡
<
Key
, Com·¿tÜ>::
	$FšdLa¡
()

305 
Node
* 
x
 = 
h—d_
;

306 
Ëv–
 = 
	`G‘MaxHeight
() - 1;

307 
Œue
) {

308 
Node
* 
Ãxt
 = 
x
->
	`Next
(
Ëv–
);

309 ià(
Ãxt
 =ğ
nuÎ±r
) {

310 ià(
Ëv–
 == 0) {

311  
x
;

314 
Ëv–
--;

317 
x
 = 
Ãxt
;

320 
	}
}

322 
	g‹m¶©e
 <
ty³Çme
 
	gKey
, 
şass
 
	gCom·¿tÜ
>

323 
	gSkLi¡
<
	gKey
, 
	gCom·¿tÜ
>::
	$SkLi¡
(
Com·¿tÜ
 
cmp
, 
A»Ç
* 
¬’a
)

324 : 
	`com·»_
(
cmp
),

325 
	`¬’a_
(
¬’a
),

326 
	`h—d_
(
	`NewNode
(0 , 
kMaxHeight
)),

327 
	`max_height_
(1),

328 
	$ºd_
(0xdeadbeef) {

329 
i
 = 0; i < 
kMaxHeight
; i++) {

330 
h—d_
->
	`S‘Next
(
i
, 
nuÎ±r
);

332 
	}
}

334 
	g‹m¶©e
 <
ty³Çme
 
	gKey
, 
şass
 
	gCom·¿tÜ
>

335 
	gSkLi¡
<
	gKey
, 
	gCom·¿tÜ
>::
	$In£¹
(cÚ¡ 
Key
& 
key
) {

338 
Node
* 
´ev
[
kMaxHeight
];

339 
Node
* 
x
 = 
	`FšdG»©”OrEqu®
(
key
, 
´ev
);

342 
	`as£¹
(
x
 =ğ
nuÎ±r
 || !
	`Equ®
(
key
, x->key));

344 
height
 = 
	`RªdomHeight
();

345 ià(
height
 > 
	`G‘MaxHeight
()) {

346 
i
 = 
	`G‘MaxHeight
(); i < 
height
; i++) {

347 
´ev
[
i
] = 
h—d_
;

356 
max_height_
.
	`¡Üe
(
height
, 
¡d
::
memÜy_Üd”_»Ïxed
);

359 
x
 = 
	`NewNode
(
key
, 
height
);

360 
i
 = 0; i < 
height
; i++) {

363 
x
->
	`NoB¬r›r_S‘Next
(
i
, 
´ev
[i]->
	`NoB¬r›r_Next
(i));

364 
´ev
[
i
]->
	`S‘Next
(i, 
x
);

366 
	}
}

368 
	g‹m¶©e
 <
ty³Çme
 
	gKey
, 
şass
 
	gCom·¿tÜ
>

369 
boŞ
 
	gSkLi¡
<
	gKey
, 
	gCom·¿tÜ
>::
	$CÚšs
(cÚ¡ 
Key
& 
key
) const {

370 
Node
* 
x
 = 
	`FšdG»©”OrEqu®
(
key
, 
nuÎ±r
);

371 ià(
x
 !ğ
nuÎ±r
 && 
	`Equ®
(
key
, x->key)) {

372  
Œue
;

374  
çl£
;

376 
	}
}

	@db/skiplist_test.cc

5 
	~"db/skli¡.h
"

7 
	~<©omic
>

8 
	~<£t
>

10 
	~"g‹¡/g‹¡.h
"

11 
	~"Ëv–db/’v.h
"

12 
	~"pÜt/pÜt.h
"

13 
	~"pÜt/th»ad_ªnÙ©iÚs.h
"

14 
	~"ut/¬’a.h
"

15 
	~"ut/hash.h
"

16 
	~"ut/¿ndom.h
"

17 
	~"ut/‹¡ut.h
"

19 
Çme¥aû
 
	gËv–db
 {

21 
ušt64_t
 
	tKey
;

23 
	sCom·¿tÜ
 {

24 
İ”©Ü
()(cÚ¡ 
	gKey
& 
	ga
, cÚ¡ Key& 
	gb
) const {

25 ià(
	ga
 < 
	gb
) {

27 } ià(
	ga
 > 
	gb
) {

35 
TEST
(
SkTe¡
, 
Em±y
) {

36 
A»Ç
 
	g¬’a
;

37 
Com·¿tÜ
 
	gcmp
;

38 
	gSkLi¡
<
	gKey
, 
	gCom·¿tÜ
> 
li¡
(
cmp
, &
¬’a
);

39 
ASSERT_TRUE
(!
li¡
.
CÚšs
(10));

41 
	gSkLi¡
<
	gKey
, 
	gCom·¿tÜ
>::
I‹¿tÜ
 
™”
(&
li¡
);

42 
ASSERT_TRUE
(!
™”
.
V®id
());

43 
	g™”
.
S“kToFœ¡
();

44 
ASSERT_TRUE
(!
™”
.
V®id
());

45 
	g™”
.
S“k
(100);

46 
ASSERT_TRUE
(!
™”
.
V®id
());

47 
	g™”
.
S“kToLa¡
();

48 
ASSERT_TRUE
(!
™”
.
V®id
());

51 
TEST
(
SkTe¡
, 
In£¹AndLookup
) {

52 cÚ¡ 
	gN
 = 2000;

53 cÚ¡ 
	gR
 = 5000;

54 
Rªdom
 
ºd
(1000);

55 
	g¡d
::
£t
<
Key
> 
keys
;

56 
A»Ç
 
	g¬’a
;

57 
Com·¿tÜ
 
	gcmp
;

58 
	gSkLi¡
<
	gKey
, 
	gCom·¿tÜ
> 
li¡
(
cmp
, &
¬’a
);

59 
	gi
 = 0; i < 
	gN
; i++) {

60 
Key
 
	gkey
 = 
ºd
.
Next
(è% 
R
;

61 ià(
	gkeys
.
š£¹
(
key
).
	g£cÚd
) {

62 
	gli¡
.
In£¹
(
key
);

66 
	gi
 = 0; i < 
	gR
; i++) {

67 ià(
	gli¡
.
CÚšs
(
i
)) {

68 
ASSERT_EQ
(
keys
.
couÁ
(
i
), 1);

70 
ASSERT_EQ
(
keys
.
couÁ
(
i
), 0);

76 
	gSkLi¡
<
	gKey
, 
	gCom·¿tÜ
>::
I‹¿tÜ
 
™”
(&
li¡
);

77 
ASSERT_TRUE
(!
™”
.
V®id
());

79 
	g™”
.
S“k
(0);

80 
ASSERT_TRUE
(
™”
.
V®id
());

81 
ASSERT_EQ
(*(
keys
.
begš
()), 
™”
.
key
());

83 
	g™”
.
S“kToFœ¡
();

84 
ASSERT_TRUE
(
™”
.
V®id
());

85 
ASSERT_EQ
(*(
keys
.
begš
()), 
™”
.
key
());

87 
	g™”
.
S“kToLa¡
();

88 
ASSERT_TRUE
(
™”
.
V®id
());

89 
ASSERT_EQ
(*(
keys
.
rbegš
()), 
™”
.
key
());

93 
	gi
 = 0; i < 
	gR
; i++) {

94 
	gSkLi¡
<
	gKey
, 
	gCom·¿tÜ
>::
I‹¿tÜ
 
™”
(&
li¡
);

95 
	g™”
.
S“k
(
i
);

98 
	g¡d
::
£t
<
Key
>::
™”©Ü
 
mod–_™”
 = 
keys
.
low”_bound
(
i
);

99 
	gj
 = 0; j < 3; j++) {

100 ià(
	gmod–_™”
 =ğ
keys
.
’d
()) {

101 
ASSERT_TRUE
(!
™”
.
V®id
());

104 
ASSERT_TRUE
(
™”
.
V®id
());

105 
ASSERT_EQ
(*
mod–_™”
, 
™”
.
key
());

106 ++
	gmod–_™”
;

107 
	g™”
.
Next
();

114 
	gSkLi¡
<
	gKey
, 
	gCom·¿tÜ
>::
I‹¿tÜ
 
™”
(&
li¡
);

115 
	g™”
.
S“kToLa¡
();

118 
	g¡d
::
£t
<
Key
>::
»v”£_™”©Ü
 
mod–_™”
 = 
keys
.
rbegš
();

119 
	gmod–_™”
 !ğ
keys
.
»nd
(); ++model_iter) {

120 
ASSERT_TRUE
(
™”
.
V®id
());

121 
ASSERT_EQ
(*
mod–_™”
, 
™”
.
key
());

122 
	g™”
.
P»v
();

124 
ASSERT_TRUE
(!
™”
.
V®id
());

152 şas 
	cCÚcu¼’tTe¡
 {

153 
	g´iv©e
:

154 
cÚ¡ex´
 
ušt32_t
 
K
 = 4;

156 
ušt64_t
 
key
(
Key
 keyè{  (
	gkey
 >> 40); }

157 
ušt64_t
 
g’
(
Key
 
key
è{  (
	gkey
 >> 8) & 0xffffffffu; }

158 
ušt64_t
 
hash
(
Key
 
key
è{  
	gkey
 & 0xff; }

160 
ušt64_t
 
HashNumb”s
(ušt64_ˆ
k
, ušt64_ˆ
g
) {

161 
ušt64_t
 
	gd©a
[2] = {
k
, 
g
};

162  
Hash
(
»š‹½»t_ÿ¡
<*>(
d©a
), (data), 0);

165 
Key
 
MakeKey
(
ušt64_t
 
k
, ušt64_ˆ
g
) {

166 
¡©ic_as£¹
((
Key
è=ğ(
ušt64_t
), "");

167 
as£¹
(
k
 <ğ
K
);

168 
as£¹
(
g
 <= 0xffffffffu);

169  ((
	gk
 << 40è| (
	gg
 << 8è| (
HashNumb”s
(
k
, 
g
) & 0xff));

172 
boŞ
 
IsV®idKey
(
Key
 
k
) {

173  
hash
(
k
è=ğ(
HashNumb”s
(
key
(k), 
g’
(k)) & 0xff);

176 
Key
 
RªdomT¬g‘
(
Rªdom
* 
ºd
) {

177 
	gºd
->
Next
() % 10) {

180  
MakeKey
(0, 0);

183  
MakeKey
(
K
, 0);

186  
MakeKey
(
ºd
->
Next
(è% 
K
, 0);

191 
	sS‹
 {

192 
	g¡d
::
©omic
<> 
g’”©iÚ
[
K
];

193 
S‘
(
k
, 
v
) {

194 
	gg’”©iÚ
[
k
].
¡Üe
(
v
, 
¡d
::
memÜy_Üd”_»Ëa£
);

196 
G‘
(
k
è{  
	gg’”©iÚ
[k].
lßd
(
¡d
::
memÜy_Üd”_acquœe
); }

198 
S‹
() {

199 
	gk
 = 0; k < 
	gK
; k++) {

200 
S‘
(
k
, 0);

206 
S‹
 
	gcu¼’t_
;

208 
A»Ç
 
	g¬’a_
;

212 
	gSkLi¡
<
	gKey
, 
	gCom·¿tÜ
> 
	gli¡_
;

214 
	gpublic
:

215 
CÚcu¼’tTe¡
(è: 
li¡_
(
Com·¿tÜ
(), &
¬’a_
) {}

218 
Wr™eS‹p
(
Rªdom
* 
ºd
) {

219 cÚ¡ 
ušt32_t
 
	gk
 = 
ºd
->
Next
(è% 
K
;

220 cÚ¡ 
šŒ_t
 
	gg
 = 
cu¼’t_
.
G‘
(
k
) + 1;

221 cÚ¡ 
Key
 
	gkey
 = 
MakeKey
(
k
, 
g
);

222 
	gli¡_
.
In£¹
(
key
);

223 
	gcu¼’t_
.
S‘
(
k
, 
g
);

226 
R—dS‹p
(
Rªdom
* 
ºd
) {

228 
S‹
 
	gš™Ÿl_¡©e
;

229 
	gk
 = 0; k < 
	gK
; k++) {

230 
	gš™Ÿl_¡©e
.
S‘
(
k
, 
cu¼’t_
.
G‘
(k));

233 
Key
 
	gpos
 = 
RªdomT¬g‘
(
ºd
);

234 
	gSkLi¡
<
	gKey
, 
	gCom·¿tÜ
>::
I‹¿tÜ
 
™”
(&
li¡_
);

235 
	g™”
.
S“k
(
pos
);

236 
	gŒue
) {

237 
Key
 
	gcu¼’t
;

238 ià(!
	g™”
.
V®id
()) {

239 
	gcu¼’t
 = 
MakeKey
(
K
, 0);

241 
	gcu¼’t
 = 
™”
.
key
();

242 
ASSERT_TRUE
(
IsV®idKey
(
cu¼’t
)è<< 
	gcu¼’t
;

244 
ASSERT_LE
(
pos
, 
cu¼’t
) << "should‚ot go backwards";

248 
	gpos
 < 
	gcu¼’t
) {

249 
ASSERT_LT
(
key
(
pos
), 
K
è<< 
	gpos
;

253 
ASSERT_TRUE
((
g’
(
pos
) == 0) ||

254 (
g’
(
pos
è> 
¡©ic_ÿ¡
<
Key
>(
š™Ÿl_¡©e
.
G‘
(
key
(pos)))))

255 << "key: " << 
key
(
pos
è<< "; g’: " << 
g’
(pos)

256 << "; in™g’: " << 
š™Ÿl_¡©e
.
G‘
(
key
(
pos
));

259 ià(
key
(
pos
è< key(
cu¼’t
)) {

260 
	gpos
 = 
MakeKey
(
key
(
pos
) + 1, 0);

262 
	gpos
 = 
MakeKey
(
key
(
pos
), 
g’
(pos) + 1);

266 ià(!
	g™”
.
V®id
()) {

270 ià(
	gºd
->
Next
() % 2) {

271 
	g™”
.
Next
();

272 
	gpos
 = 
MakeKey
(
key
(
pos
), 
g’
(pos) + 1);

274 
Key
 
	gÃw_rg‘
 = 
RªdomT¬g‘
(
ºd
);

275 ià(
	gÃw_rg‘
 > 
	gpos
) {

276 
	gpos
 = 
Ãw_rg‘
;

277 
	g™”
.
S“k
(
Ãw_rg‘
);

285 
cÚ¡ex´
 
ušt32_t
 
	gCÚcu¼’tTe¡
::
K
;

289 
	$TEST
(
SkTe¡
, 
CÚcu¼’tW™houtTh»ads
) {

290 
CÚcu¼’tTe¡
 
‹¡
;

291 
Rªdom
 
	`ºd
(
‹¡
::
	`RªdomS“d
());

292 
i
 = 0; i < 10000; i++) {

293 
‹¡
.
	`R—dS‹p
(&
ºd
);

294 
‹¡
.
	`Wr™eS‹p
(&
ºd
);

296 
	}
}

298 şas 
	cTe¡S‹
 {

299 
	gpublic
:

300 
CÚcu¼’tTe¡
 
t_
;

301 
	g£ed_
;

302 
	g¡d
::
©omic
<
boŞ
> 
qu™_æag_
;

304 
	eR—d”S‹
 { 
	gSTARTING
, 
	gRUNNING
, 
	gDONE
 };

306 
ex¶ic™
 
Te¡S‹
(
s
)

307 : 
£ed_
(
s
), 
qu™_æag_
(
çl£
), 
¡©e_
(
STARTING
), 
¡©e_cv_
(&
mu_
) {}

309 
Wa™
(
R—d”S‹
 
s
è
LOCKS_EXCLUDED
(
mu_
) {

310 
	gmu_
.
Lock
();

311 
	g¡©e_
 !ğ
s
) {

312 
¡©e_cv_
.
Wa™
();

314 
	gmu_
.
UÆock
();

317 
Chªge
(
R—d”S‹
 
s
è
LOCKS_EXCLUDED
(
mu_
) {

318 
	gmu_
.
Lock
();

319 
	g¡©e_
 = 
s
;

320 
	g¡©e_cv_
.
SigÇl
();

321 
	gmu_
.
UÆock
();

324 
	g´iv©e
:

325 
pÜt
::
Mu‹x
 
mu_
;

326 
R—d”S‹
 
¡©e_
 
GUARDED_BY
(
mu_
);

327 
	gpÜt
::
CÚdV¬
 
¡©e_cv_
 
GUARDED_BY
(
mu_
);

330 
	$CÚcu¼’tR—d”
(* 
¬g
) {

331 
Te¡S‹
* 
¡©e
 = 
»š‹½»t_ÿ¡
<Te¡S‹*>(
¬g
);

332 
Rªdom
 
	`ºd
(
¡©e
->
£ed_
);

333 
št64_t
 
»ads
 = 0;

334 
¡©e
->
	`Chªge
(
Te¡S‹
::
RUNNING
);

335 !
¡©e
->
qu™_æag_
.
	`lßd
(
¡d
::
memÜy_Üd”_acquœe
)) {

336 
¡©e
->
t_
.
	`R—dS‹p
(&
ºd
);

337 ++
»ads
;

339 
¡©e
->
	`Chªge
(
Te¡S‹
::
DONE
);

340 
	}
}

342 
	$RunCÚcu¼’t
(
run
) {

343 cÚ¡ 
£ed
 = 
‹¡
::
	`RªdomS“d
(è+ (
run
 * 100);

344 
Rªdom
 
	`ºd
(
£ed
);

345 cÚ¡ 
N
 = 1000;

346 cÚ¡ 
kSize
 = 1000;

347 
i
 = 0; i < 
N
; i++) {

348 ià((
i
 % 100) == 0) {

349 
¡d
::
	`årštf
(
¡d”r
, "RuÀ%d oà%d\n", 
i
, 
N
);

351 
Te¡S‹
 
	`¡©e
(
£ed
 + 1);

352 
Env
::
	`DeçuÉ
()->
	`ScheduË
(
CÚcu¼’tR—d”
, &
¡©e
);

353 
¡©e
.
	`Wa™
(
Te¡S‹
::
RUNNING
);

354 
i
 = 0; i < 
kSize
; i++) {

355 
¡©e
.
t_
.
	`Wr™eS‹p
(&
ºd
);

357 
¡©e
.
qu™_æag_
.
	`¡Üe
(
Œue
, 
¡d
::
memÜy_Üd”_»Ëa£
);

358 
¡©e
.
	`Wa™
(
Te¡S‹
::
DONE
);

360 
	}
}

362 
	$TEST
(
SkTe¡
, 
CÚcu¼’t1
è{ 
	`RunCÚcu¼’t
(1); 
	}
}

363 
	$TEST
(
SkTe¡
, 
CÚcu¼’t2
è{ 
	`RunCÚcu¼’t
(2); 
	}
}

364 
	$TEST
(
SkTe¡
, 
CÚcu¼’t3
è{ 
	`RunCÚcu¼’t
(3); 
	}
}

365 
	$TEST
(
SkTe¡
, 
CÚcu¼’t4
è{ 
	`RunCÚcu¼’t
(4); 
	}
}

366 
	$TEST
(
SkTe¡
, 
CÚcu¼’t5
è{ 
	`RunCÚcu¼’t
(5); 
	}
}

	@db/snapshot.h

5 #iâdeà
STORAGE_LEVELDB_DB_SNAPSHOT_H_


6 
	#STORAGE_LEVELDB_DB_SNAPSHOT_H_


	)

8 
	~"db/dbfÜm©.h
"

9 
	~"Ëv–db/db.h
"

11 
Çme¥aû
 
	gËv–db
 {

13 
şass
 
	gSÇpshÙLi¡
;

17 şas 
	cSÇpshÙIm¶
 : 
public
 
SÇpshÙ
 {

18 
public
:

19 
SÇpshÙIm¶
(
Sequ’ûNumb”
 
£qu’û_numb”
)

20 : 
£qu’û_numb”_
(
£qu’û_numb”
) {}

22 
Sequ’ûNumb”
 
£qu’û_numb”
(ècÚ¡ {  
£qu’û_numb”_
; }

24 
	g´iv©e
:

25 
ä›nd
 
şass
 
SÇpshÙLi¡
;

29 
SÇpshÙIm¶
* 
	g´ev_
;

30 
SÇpshÙIm¶
* 
	gÃxt_
;

32 cÚ¡ 
Sequ’ûNumb”
 
	g£qu’û_numb”_
;

34 #ià!
defšed
(
NDEBUG
)

35 
SÇpshÙLi¡
* 
	gli¡_
 = 
nuÎ±r
;

39 şas 
	cSÇpshÙLi¡
 {

40 
	gpublic
:

41 
SÇpshÙLi¡
(è: 
h—d_
(0) {

42 
h—d_
.
´ev_
 = &head_;

43 
	gh—d_
.
	gÃxt_
 = &
h—d_
;

46 
boŞ
 
em±y
(ècÚ¡ {  
	gh—d_
.
	gÃxt_
 =ğ&
h—d_
; }

47 
SÇpshÙIm¶
* 
Şde¡
() const {

48 
as£¹
(!
em±y
());

49  
	gh—d_
.
	gÃxt_
;

51 
SÇpshÙIm¶
* 
Ãwe¡
() const {

52 
as£¹
(!
em±y
());

53  
	gh—d_
.
	g´ev_
;

57 
SÇpshÙIm¶
* 
New
(
Sequ’ûNumb”
 
£qu’û_numb”
) {

58 
as£¹
(
em±y
(è|| 
Ãwe¡
()->
£qu’û_numb”_
 <ğ
£qu’û_numb”
);

60 
SÇpshÙIm¶
* 
	g¢­shÙ
 = 
Ãw
 SÇpshÙIm¶(
£qu’û_numb”
);

62 #ià!
defšed
(
NDEBUG
)

63 
	g¢­shÙ
->
	gli¡_
 = 
this
;

65 
	g¢­shÙ
->
	gÃxt_
 = &
h—d_
;

66 
	g¢­shÙ
->
	g´ev_
 = 
h—d_
.
´ev_
;

67 
	g¢­shÙ
->
	g´ev_
->
	gÃxt_
 = 
¢­shÙ
;

68 
	g¢­shÙ
->
	gÃxt_
->
	g´ev_
 = 
¢­shÙ
;

69  
	g¢­shÙ
;

79 
D–‘e
(cÚ¡ 
SÇpshÙIm¶
* 
¢­shÙ
) {

80 #ià!
defšed
(
NDEBUG
)

81 
as£¹
(
¢­shÙ
->
li¡_
 =ğ
this
);

83 
	g¢­shÙ
->
	g´ev_
->
	gÃxt_
 = 
¢­shÙ
->
Ãxt_
;

84 
	g¢­shÙ
->
	gÃxt_
->
	g´ev_
 = 
¢­shÙ
->
´ev_
;

85 
d–‘e
 
	g¢­shÙ
;

88 
	g´iv©e
:

90 
SÇpshÙIm¶
 
h—d_
;

	@db/table_cache.cc

5 
	~"db/bË_ÿche.h
"

7 
	~"db/f’ame.h
"

8 
	~"Ëv–db/’v.h
"

9 
	~"Ëv–db/bË.h
"

10 
	~"ut/codšg.h
"

12 
Çme¥aû
 
	gËv–db
 {

14 
	sTabËAndFe
 {

15 
RªdomAcûssFe
* 
	gfe
;

16 
TabË
* 
	gbË
;

19 
D–‘eEÁry
(cÚ¡ 
Sliû
& 
key
, * 
v®ue
) {

20 
TabËAndFe
* 
	gtf
 = 
»š‹½»t_ÿ¡
<TabËAndFe*>(
v®ue
);

21 
d–‘e
 
	gtf
->
	gbË
;

22 
d–‘e
 
	gtf
->
	gfe
;

23 
d–‘e
 
	gtf
;

26 
UÄefEÁry
(* 
¬g1
, * 
¬g2
) {

27 
Cache
* 
	gÿche
 = 
»š‹½»t_ÿ¡
<Cache*>(
¬g1
);

28 
	gCache
::
HªdË
* 
h
 = 
»š‹½»t_ÿ¡
<
Cache
::HªdË*>(
¬g2
);

29 
	gÿche
->
R–—£
(
h
);

32 
	gTabËCache
::
TabËCache
(cÚ¡ 
¡d
::
¡ršg
& 
dbÇme
, cÚ¡ 
O±iÚs
& 
İtiÚs
,

33 
’Œ›s
)

34 : 
’v_
(
İtiÚs
.
’v
),

35 
dbÇme_
(
dbÇme
),

36 
İtiÚs_
(
İtiÚs
),

37 
ÿche_
(
NewLRUCache
(
’Œ›s
)) {}

39 
	gTabËCache
::~
TabËCache
(è{ 
d–‘e
 
ÿche_
; }

41 
Stus
 
	gTabËCache
::
FšdTabË
(
ušt64_t
 
fe_numb”
, ušt64_ˆ
fe_size
,

42 
Cache
::
HªdË
** 
hªdË
) {

43 
Stus
 
s
;

44 
	gbuf
[(
fe_numb”
)];

45 
EncodeFixed64
(
buf
, 
fe_numb”
);

46 
Sliû
 
key
(
buf
, (buf));

47 *
	ghªdË
 = 
ÿche_
->
Lookup
(
key
);

48 ià(*
	ghªdË
 =ğ
nuÎ±r
) {

49 
¡d
::
¡ršg
 
âame
 = 
TabËFeName
(
dbÇme_
, 
fe_numb”
);

50 
RªdomAcûssFe
* 
	gfe
 = 
nuÎ±r
;

51 
TabË
* 
	gbË
 = 
nuÎ±r
;

52 
	gs
 = 
’v_
->
NewRªdomAcûssFe
(
âame
, &
fe
);

53 ià(!
	gs
.
ok
()) {

54 
	g¡d
::
¡ršg
 
Şd_âame
 = 
SSTTabËFeName
(
dbÇme_
, 
fe_numb”
);

55 ià(
	g’v_
->
NewRªdomAcûssFe
(
Şd_âame
, &
fe
).
ok
()) {

56 
	gs
 = 
Stus
::
OK
();

59 ià(
	gs
.
ok
()) {

60 
	gs
 = 
TabË
::
O³n
(
İtiÚs_
, 
fe
, 
fe_size
, &
bË
);

63 ià(!
	gs
.
ok
()) {

64 
as£¹
(
bË
 =ğ
nuÎ±r
);

65 
d–‘e
 
	gfe
;

69 
TabËAndFe
* 
	gtf
 = 
Ãw
 TableAndFile;

70 
	gtf
->
	gfe
 = 
fe
;

71 
	gtf
->
	gbË
 = 
bË
;

72 *
	ghªdË
 = 
ÿche_
->
In£¹
(
key
, 
tf
, 1, &
D–‘eEÁry
);

75  
	gs
;

78 
I‹¿tÜ
* 
	gTabËCache
::
NewI‹¿tÜ
(cÚ¡ 
R—dO±iÚs
& 
İtiÚs
,

79 
ušt64_t
 
fe_numb”
, ušt64_ˆ
fe_size
,

80 
TabË
** 
bË±r
) {

81 ià(
	gbË±r
 !ğ
nuÎ±r
) {

82 *
bË±r
 = 
nuÎ±r
;

85 
	gCache
::
HªdË
* 
hªdË
 = 
nuÎ±r
;

86 
Stus
 
	gs
 = 
FšdTabË
(
fe_numb”
, 
fe_size
, &
hªdË
);

87 ià(!
	gs
.
ok
()) {

88  
NewE¼ÜI‹¿tÜ
(
s
);

91 
TabË
* 
	gbË
 = 
»š‹½»t_ÿ¡
<
TabËAndFe
*>(
ÿche_
->
V®ue
(
hªdË
))->
bË
;

92 
I‹¿tÜ
* 
	g»suÉ
 = 
bË
->
NewI‹¿tÜ
(
İtiÚs
);

93 
	g»suÉ
->
Regi¡”CËªup
(&
UÄefEÁry
, 
ÿche_
, 
hªdË
);

94 ià(
	gbË±r
 !ğ
nuÎ±r
) {

95 *
bË±r
 = 
bË
;

97  
	g»suÉ
;

100 
Stus
 
	gTabËCache
::
G‘
(cÚ¡ 
R—dO±iÚs
& 
İtiÚs
, 
ušt64_t
 
fe_numb”
,

101 
ušt64_t
 
fe_size
, cÚ¡ 
Sliû
& 
k
, * 
¬g
,

102 (*
hªdË_»suÉ
)(*, cÚ¡ 
Sliû
&,

103 cÚ¡ 
Sliû
&)) {

104 
	gCache
::
HªdË
* 
hªdË
 = 
nuÎ±r
;

105 
Stus
 
	gs
 = 
FšdTabË
(
fe_numb”
, 
fe_size
, &
hªdË
);

106 ià(
	gs
.
ok
()) {

107 
TabË
* 
	gt
 = 
»š‹½»t_ÿ¡
<
TabËAndFe
*>(
ÿche_
->
V®ue
(
hªdË
))->
bË
;

108 
	gs
 = 
t
->
IÁ”ÇlG‘
(
İtiÚs
, 
k
, 
¬g
, 
hªdË_»suÉ
);

109 
	gÿche_
->
R–—£
(
hªdË
);

111  
	gs
;

114 
	gTabËCache
::
Eviù
(
ušt64_t
 
fe_numb”
) {

115 
buf
[(
fe_numb”
)];

116 
EncodeFixed64
(
buf
, 
fe_numb”
);

117 
	gÿche_
->
E¿£
(
Sliû
(
buf
, (buf)));

	@db/table_cache.h

7 #iâdeà
STORAGE_LEVELDB_DB_TABLE_CACHE_H_


8 
	#STORAGE_LEVELDB_DB_TABLE_CACHE_H_


	)

10 
	~<c¡dšt
>

11 
	~<¡ršg
>

13 
	~"db/dbfÜm©.h
"

14 
	~"Ëv–db/ÿche.h
"

15 
	~"Ëv–db/bË.h
"

16 
	~"pÜt/pÜt.h
"

18 
Çme¥aû
 
	gËv–db
 {

20 
şass
 
	gEnv
;

22 şas 
	cTabËCache
 {

23 
	gpublic
:

24 
TabËCache
(cÚ¡ 
¡d
::
¡ršg
& 
dbÇme
, cÚ¡ 
O±iÚs
& 
İtiÚs
, 
’Œ›s
);

26 
TabËCache
(cÚ¡ TabËCache&èğ
d–‘e
;

27 
	gTabËCache
& 
	gİ”©Ü
=(cÚ¡ 
TabËCache
&èğ
d–‘e
;

29 ~
TabËCache
();

38 
I‹¿tÜ
* 
NewI‹¿tÜ
(cÚ¡ 
R—dO±iÚs
& 
İtiÚs
, 
ušt64_t
 
fe_numb”
,

39 
ušt64_t
 
fe_size
, 
TabË
** 
bË±r
 = 
nuÎ±r
);

43 
Stus
 
G‘
(cÚ¡ 
R—dO±iÚs
& 
İtiÚs
, 
ušt64_t
 
fe_numb”
,

44 
ušt64_t
 
fe_size
, cÚ¡ 
Sliû
& 
k
, * 
¬g
,

45 (*
hªdË_»suÉ
)(*, cÚ¡ 
Sliû
&, const Slice&));

48 
Eviù
(
ušt64_t
 
fe_numb”
);

50 
	g´iv©e
:

51 
Stus
 
FšdTabË
(
ušt64_t
 
fe_numb”
, ušt64_ˆ
fe_size
, 
Cache
::
HªdË
**);

53 
Env
* cÚ¡ 
	g’v_
;

54 cÚ¡ 
	g¡d
::
¡ršg
 
dbÇme_
;

55 cÚ¡ 
	gO±iÚs
& 
	gİtiÚs_
;

56 
Cache
* 
	gÿche_
;

	@db/version_edit.cc

5 
	~"db/v”siÚ_ed™.h
"

7 
	~"db/v”siÚ_£t.h
"

8 
	~"ut/codšg.h
"

10 
Çme¥aû
 
	gËv–db
 {

14 
	eTag
 {

15 
	gkCom·¿tÜ
 = 1,

16 
	gkLogNumb”
 = 2,

17 
	gkNextFeNumb”
 = 3,

18 
	gkLa¡Sequ’û
 = 4,

19 
	gkCom·ùPoš‹r
 = 5,

20 
	gkD–‘edFe
 = 6,

21 
	gkNewFe
 = 7,

23 
	gkP»vLogNumb”
 = 9

26 
	gV”siÚEd™
::
CË¬
() {

27 
com·¿tÜ_
.
ş—r
();

28 
	glog_numb”_
 = 0;

29 
	g´ev_log_numb”_
 = 0;

30 
	gÏ¡_£qu’û_
 = 0;

31 
	gÃxt_fe_numb”_
 = 0;

32 
	ghas_com·¿tÜ_
 = 
çl£
;

33 
	ghas_log_numb”_
 = 
çl£
;

34 
	ghas_´ev_log_numb”_
 = 
çl£
;

35 
	ghas_Ãxt_fe_numb”_
 = 
çl£
;

36 
	ghas_Ï¡_£qu’û_
 = 
çl£
;

37 
	gcom·ù_poš‹rs_
.
ş—r
();

38 
	gd–‘ed_fes_
.
ş—r
();

39 
	gÃw_fes_
.
ş—r
();

42 
	gV”siÚEd™
::
EncodeTo
(
¡d
::
¡ršg
* 
d¡
) const {

43 ià(
has_com·¿tÜ_
) {

44 
PutV¬št32
(
d¡
, 
kCom·¿tÜ
);

45 
PutL’gthP»fixedSliû
(
d¡
, 
com·¿tÜ_
);

47 ià(
	ghas_log_numb”_
) {

48 
PutV¬št32
(
d¡
, 
kLogNumb”
);

49 
PutV¬št64
(
d¡
, 
log_numb”_
);

51 ià(
	ghas_´ev_log_numb”_
) {

52 
PutV¬št32
(
d¡
, 
kP»vLogNumb”
);

53 
PutV¬št64
(
d¡
, 
´ev_log_numb”_
);

55 ià(
	ghas_Ãxt_fe_numb”_
) {

56 
PutV¬št32
(
d¡
, 
kNextFeNumb”
);

57 
PutV¬št64
(
d¡
, 
Ãxt_fe_numb”_
);

59 ià(
	ghas_Ï¡_£qu’û_
) {

60 
PutV¬št32
(
d¡
, 
kLa¡Sequ’û
);

61 
PutV¬št64
(
d¡
, 
Ï¡_£qu’û_
);

64 
size_t
 
	gi
 = 0; i < 
	gcom·ù_poš‹rs_
.
size
(); i++) {

65 
PutV¬št32
(
d¡
, 
kCom·ùPoš‹r
);

66 
PutV¬št32
(
d¡
, 
com·ù_poš‹rs_
[
i
].
fœ¡
);

67 
PutL’gthP»fixedSliû
(
d¡
, 
com·ù_poš‹rs_
[
i
].
£cÚd
.
Encode
());

70 cÚ¡‡uto& 
	gd–‘ed_fe_kvp
 : 
d–‘ed_fes_
) {

71 
PutV¬št32
(
d¡
, 
kD–‘edFe
);

72 
PutV¬št32
(
d¡
, 
d–‘ed_fe_kvp
.
fœ¡
);

73 
PutV¬št64
(
d¡
, 
d–‘ed_fe_kvp
.
£cÚd
);

76 
size_t
 
	gi
 = 0; i < 
	gÃw_fes_
.
size
(); i++) {

77 cÚ¡ 
	gFeM‘aD©a
& 
	gf
 = 
Ãw_fes_
[
i
].
£cÚd
;

78 
PutV¬št32
(
d¡
, 
kNewFe
);

79 
PutV¬št32
(
d¡
, 
Ãw_fes_
[
i
].
fœ¡
);

80 
PutV¬št64
(
d¡
, 
f
.
numb”
);

81 
PutV¬št64
(
d¡
, 
f
.
fe_size
);

82 
PutL’gthP»fixedSliû
(
d¡
, 
f
.
sm®Ë¡
.
Encode
());

83 
PutL’gthP»fixedSliû
(
d¡
, 
f
.
Ïrge¡
.
Encode
());

87 
boŞ
 
G‘IÁ”ÇlKey
(
Sliû
* 
šput
, 
IÁ”ÇlKey
* 
d¡
) {

88 
Sliû
 
	g¡r
;

89 ià(
G‘L’gthP»fixedSliû
(
šput
, &
¡r
)) {

90  
	gd¡
->
DecodeFrom
(
¡r
);

92  
	gçl£
;

96 
boŞ
 
G‘Lev–
(
Sliû
* 
šput
, * 
Ëv–
) {

97 
ušt32_t
 
	gv
;

98 ià(
G‘V¬št32
(
šput
, &
v
è&& 
	gv
 < 
	gcÚfig
::
kNumLev–s
) {

99 *
Ëv–
 = 
v
;

100  
	gŒue
;

102  
	gçl£
;

106 
Stus
 
	gV”siÚEd™
::
DecodeFrom
(cÚ¡ 
Sliû
& 
¤c
) {

107 
CË¬
();

108 
Sliû
 
	gšput
 = 
¤c
;

109 cÚ¡ * 
	gmsg
 = 
nuÎ±r
;

110 
ušt32_t
 
	gg
;

113 
	gËv–
;

114 
ušt64_t
 
	gnumb”
;

115 
FeM‘aD©a
 
	gf
;

116 
Sliû
 
	g¡r
;

117 
IÁ”ÇlKey
 
	gkey
;

119 
	gmsg
 =ğ
nuÎ±r
 && 
G‘V¬št32
(&
šput
, &
g
)) {

120 
	gg
) {

121 
	gkCom·¿tÜ
:

122 ià(
G‘L’gthP»fixedSliû
(&
šput
, &
¡r
)) {

123 
	gcom·¿tÜ_
 = 
¡r
.
ToSŒšg
();

124 
	ghas_com·¿tÜ_
 = 
Œue
;

126 
	gmsg
 = "comparator‚ame";

130 
	gkLogNumb”
:

131 ià(
G‘V¬št64
(&
šput
, &
log_numb”_
)) {

132 
	ghas_log_numb”_
 = 
Œue
;

134 
	gmsg
 = "log‚umber";

138 
	gkP»vLogNumb”
:

139 ià(
G‘V¬št64
(&
šput
, &
´ev_log_numb”_
)) {

140 
	ghas_´ev_log_numb”_
 = 
Œue
;

142 
	gmsg
 = "previous†og‚umber";

146 
	gkNextFeNumb”
:

147 ià(
G‘V¬št64
(&
šput
, &
Ãxt_fe_numb”_
)) {

148 
	ghas_Ãxt_fe_numb”_
 = 
Œue
;

150 
	gmsg
 = "next file‚umber";

154 
	gkLa¡Sequ’û
:

155 ià(
G‘V¬št64
(&
šput
, &
Ï¡_£qu’û_
)) {

156 
	ghas_Ï¡_£qu’û_
 = 
Œue
;

158 
	gmsg
 = "last sequence‚umber";

162 
	gkCom·ùPoš‹r
:

163 ià(
G‘Lev–
(&
šput
, &
Ëv–
è&& 
G‘IÁ”ÇlKey
(&šput, &
key
)) {

164 
	gcom·ù_poš‹rs_
.
push_back
(
¡d
::
make_·œ
(
Ëv–
, 
key
));

166 
	gmsg
 = "compaction…ointer";

170 
	gkD–‘edFe
:

171 ià(
G‘Lev–
(&
šput
, &
Ëv–
è&& 
G‘V¬št64
(&šput, &
numb”
)) {

172 
	gd–‘ed_fes_
.
š£¹
(
¡d
::
make_·œ
(
Ëv–
, 
numb”
));

174 
	gmsg
 = "deleted file";

178 
	gkNewFe
:

179 ià(
G‘Lev–
(&
šput
, &
Ëv–
è&& 
G‘V¬št64
(&šput, &
f
.
numb”
) &&

180 
G‘V¬št64
(&
šput
, &
f
.
fe_size
) &&

181 
G‘IÁ”ÇlKey
(&
šput
, &
f
.
sm®Ë¡
) &&

182 
G‘IÁ”ÇlKey
(&
šput
, &
f
.
Ïrge¡
)) {

183 
	gÃw_fes_
.
push_back
(
¡d
::
make_·œ
(
Ëv–
, 
f
));

185 
	gmsg
 = "new-fileƒntry";

190 
msg
 = "unknownag";

195 ià(
	gmsg
 =ğ
nuÎ±r
 && !
šput
.
em±y
()) {

196 
msg
 = "invalidag";

199 
Stus
 
	g»suÉ
;

200 ià(
	gmsg
 !ğ
nuÎ±r
) {

201 
»suÉ
 = 
Stus
::
CÜru±iÚ
("V”siÚEd™", 
msg
);

203  
	g»suÉ
;

206 
	g¡d
::
¡ršg
 
V”siÚEd™
::
DebugSŒšg
() const {

207 
¡d
::
¡ršg
 
r
;

208 
	gr
.
­³nd
("VersionEdit {");

209 ià(
	ghas_com·¿tÜ_
) {

210 
	gr
.
­³nd
("\n Comparator: ");

211 
	gr
.
­³nd
(
com·¿tÜ_
);

213 ià(
	ghas_log_numb”_
) {

214 
	gr
.
­³nd
("\n LogNumber: ");

215 
Aµ’dNumb”To
(&
r
, 
log_numb”_
);

217 ià(
	ghas_´ev_log_numb”_
) {

218 
	gr
.
­³nd
("\n PrevLogNumber: ");

219 
Aµ’dNumb”To
(&
r
, 
´ev_log_numb”_
);

221 ià(
	ghas_Ãxt_fe_numb”_
) {

222 
	gr
.
­³nd
("\n NextFile: ");

223 
Aµ’dNumb”To
(&
r
, 
Ãxt_fe_numb”_
);

225 ià(
	ghas_Ï¡_£qu’û_
) {

226 
	gr
.
­³nd
("\n LastSeq: ");

227 
Aµ’dNumb”To
(&
r
, 
Ï¡_£qu’û_
);

229 
size_t
 
	gi
 = 0; i < 
	gcom·ù_poš‹rs_
.
size
(); i++) {

230 
	gr
.
­³nd
("\n CompactPointer: ");

231 
Aµ’dNumb”To
(&
r
, 
com·ù_poš‹rs_
[
i
].
fœ¡
);

232 
	gr
.
­³nd
(" ");

233 
	gr
.
­³nd
(
com·ù_poš‹rs_
[
i
].
£cÚd
.
DebugSŒšg
());

235 cÚ¡‡uto& 
	gd–‘ed_fes_kvp
 : 
d–‘ed_fes_
) {

236 
r
.
­³nd
("\n RemoveFile: ");

237 
Aµ’dNumb”To
(&
r
, 
d–‘ed_fes_kvp
.
fœ¡
);

238 
	gr
.
­³nd
(" ");

239 
Aµ’dNumb”To
(&
r
, 
d–‘ed_fes_kvp
.
£cÚd
);

241 
size_t
 
	gi
 = 0; i < 
	gÃw_fes_
.
size
(); i++) {

242 cÚ¡ 
	gFeM‘aD©a
& 
	gf
 = 
Ãw_fes_
[
i
].
£cÚd
;

243 
	gr
.
­³nd
("\n AddFile: ");

244 
Aµ’dNumb”To
(&
r
, 
Ãw_fes_
[
i
].
fœ¡
);

245 
	gr
.
­³nd
(" ");

246 
Aµ’dNumb”To
(&
r
, 
f
.
numb”
);

247 
	gr
.
­³nd
(" ");

248 
Aµ’dNumb”To
(&
r
, 
f
.
fe_size
);

249 
	gr
.
­³nd
(" ");

250 
	gr
.
­³nd
(
f
.
sm®Ë¡
.
DebugSŒšg
());

251 
	gr
.
­³nd
(" .. ");

252 
	gr
.
­³nd
(
f
.
Ïrge¡
.
DebugSŒšg
());

254 
	gr
.
­³nd
("\n}\n");

255  
	gr
;

	@db/version_edit.h

5 #iâdeà
STORAGE_LEVELDB_DB_VERSION_EDIT_H_


6 
	#STORAGE_LEVELDB_DB_VERSION_EDIT_H_


	)

8 
	~<£t
>

9 
	~<ut™y
>

10 
	~<veùÜ
>

12 
	~"db/dbfÜm©.h
"

14 
Çme¥aû
 
	gËv–db
 {

16 
şass
 
	gV”siÚS‘
;

18 
	sFeM‘aD©a
 {

19 
FeM‘aD©a
(è: 
»fs
(0), 
®lowed_£eks
(1 << 30), 
fe_size
(0) {}

21 
	g»fs
;

22 
	g®lowed_£eks
;

23 
ušt64_t
 
	gnumb”
;

24 
ušt64_t
 
	gfe_size
;

25 
IÁ”ÇlKey
 
	gsm®Ë¡
;

26 
IÁ”ÇlKey
 
	gÏrge¡
;

29 şas 
	cV”siÚEd™
 {

30 
	gpublic
:

31 
V”siÚEd™
(è{ 
CË¬
(); }

32 ~
V”siÚEd™
() = ;

34 
CË¬
();

36 
S‘Com·¿tÜName
(cÚ¡ 
Sliû
& 
Çme
) {

37 
	ghas_com·¿tÜ_
 = 
Œue
;

38 
	gcom·¿tÜ_
 = 
Çme
.
ToSŒšg
();

40 
S‘LogNumb”
(
ušt64_t
 
num
) {

41 
	ghas_log_numb”_
 = 
Œue
;

42 
	glog_numb”_
 = 
num
;

44 
S‘P»vLogNumb”
(
ušt64_t
 
num
) {

45 
	ghas_´ev_log_numb”_
 = 
Œue
;

46 
	g´ev_log_numb”_
 = 
num
;

48 
S‘NextFe
(
ušt64_t
 
num
) {

49 
	ghas_Ãxt_fe_numb”_
 = 
Œue
;

50 
	gÃxt_fe_numb”_
 = 
num
;

52 
S‘La¡Sequ’û
(
Sequ’ûNumb”
 
£q
) {

53 
	ghas_Ï¡_£qu’û_
 = 
Œue
;

54 
	gÏ¡_£qu’û_
 = 
£q
;

56 
S‘Com·ùPoš‹r
(
Ëv–
, cÚ¡ 
IÁ”ÇlKey
& 
key
) {

57 
	gcom·ù_poš‹rs_
.
push_back
(
¡d
::
make_·œ
(
Ëv–
, 
key
));

63 
AddFe
(
Ëv–
, 
ušt64_t
 
fe
, ušt64_ˆ
fe_size
,

64 cÚ¡ 
IÁ”ÇlKey
& 
sm®Ë¡
, cÚ¡ IÁ”ÇlKey& 
Ïrge¡
) {

65 
FeM‘aD©a
 
	gf
;

66 
	gf
.
	gnumb”
 = 
fe
;

67 
	gf
.
	gfe_size
 = 
fe_size
;

68 
	gf
.
	gsm®Ë¡
 = 
sm®Ë¡
;

69 
	gf
.
	gÏrge¡
 = 
Ïrge¡
;

70 
	gÃw_fes_
.
push_back
(
¡d
::
make_·œ
(
Ëv–
, 
f
));

74 
RemoveFe
(
Ëv–
, 
ušt64_t
 
fe
) {

75 
	gd–‘ed_fes_
.
š£¹
(
¡d
::
make_·œ
(
Ëv–
, 
fe
));

78 
EncodeTo
(
¡d
::
¡ršg
* 
d¡
) const;

79 
Stus
 
DecodeFrom
(cÚ¡ 
Sliû
& 
¤c
);

81 
	g¡d
::
¡ršg
 
DebugSŒšg
() const;

83 
	g´iv©e
:

84 
ä›nd
 
şass
 
V”siÚS‘
;

86 
	g¡d
::
	t£t
<
	t¡d
::
	t·œ
<, 
	tušt64_t
>> 
	tD–‘edFeS‘
;

88 
	g¡d
::
¡ršg
 
com·¿tÜ_
;

89 
ušt64_t
 
	glog_numb”_
;

90 
ušt64_t
 
	g´ev_log_numb”_
;

91 
ušt64_t
 
	gÃxt_fe_numb”_
;

92 
Sequ’ûNumb”
 
	gÏ¡_£qu’û_
;

93 
boŞ
 
	ghas_com·¿tÜ_
;

94 
boŞ
 
	ghas_log_numb”_
;

95 
boŞ
 
	ghas_´ev_log_numb”_
;

96 
boŞ
 
	ghas_Ãxt_fe_numb”_
;

97 
boŞ
 
	ghas_Ï¡_£qu’û_
;

99 
	g¡d
::
veùÜ
<
¡d
::
·œ
<, 
	gIÁ”ÇlKey
>> 
	gcom·ù_poš‹rs_
;

100 
D–‘edFeS‘
 
	gd–‘ed_fes_
;

101 
	g¡d
::
veùÜ
<
¡d
::
·œ
<, 
	gFeM‘aD©a
>> 
	gÃw_fes_
;

	@db/version_edit_test.cc

5 
	~"db/v”siÚ_ed™.h
"

7 
	~"g‹¡/g‹¡.h
"

9 
Çme¥aû
 
	gËv–db
 {

11 
Te¡EncodeDecode
(cÚ¡ 
V”siÚEd™
& 
ed™
) {

12 
	g¡d
::
¡ršg
 
’coded
, 
	g’coded2
;

13 
	ged™
.
EncodeTo
(&
’coded
);

14 
V”siÚEd™
 
	g·r£d
;

15 
Stus
 
	gs
 = 
·r£d
.
DecodeFrom
(
’coded
);

16 
ASSERT_TRUE
(
s
.
ok
()è<< 
	gs
.
ToSŒšg
();

17 
	g·r£d
.
EncodeTo
(&
’coded2
);

18 
ASSERT_EQ
(
’coded
, 
’coded2
);

21 
TEST
(
V”siÚEd™Te¡
, 
EncodeDecode
) {

22 cÚ¡ 
ušt64_t
 
	gkBig
 = 1ull << 50;

24 
V”siÚEd™
 
	ged™
;

25 
	gi
 = 0; i < 4; i++) {

26 
Te¡EncodeDecode
(
ed™
);

27 
	ged™
.
AddFe
(3, 
kBig
 + 300 + 
i
, kBig + 400 + i,

28 
IÁ”ÇlKey
("foo", 
kBig
 + 500 + 
i
, 
kTy³V®ue
),

29 
IÁ”ÇlKey
("zoo", 
kBig
 + 600 + 
i
, 
kTy³D–‘iÚ
));

30 
	ged™
.
RemoveFe
(4, 
kBig
 + 700 + 
i
);

31 
	ged™
.
S‘Com·ùPoš‹r
(
i
, 
IÁ”ÇlKey
("x", 
kBig
 + 900 + i, 
kTy³V®ue
));

34 
	ged™
.
S‘Com·¿tÜName
("foo");

35 
	ged™
.
S‘LogNumb”
(
kBig
 + 100);

36 
	ged™
.
S‘NextFe
(
kBig
 + 200);

37 
	ged™
.
S‘La¡Sequ’û
(
kBig
 + 1000);

38 
Te¡EncodeDecode
(
ed™
);

	@db/version_set.cc

5 
	~"db/v”siÚ_£t.h
"

7 
	~<®gÜ™hm
>

8 
	~<c¡dio
>

10 
	~"db/f’ame.h
"

11 
	~"db/log_»ad”.h
"

12 
	~"db/log_wr™”.h
"

13 
	~"db/membË.h
"

14 
	~"db/bË_ÿche.h
"

15 
	~"Ëv–db/’v.h
"

16 
	~"Ëv–db/bË_bud”.h
"

17 
	~"bË/m”g”.h
"

18 
	~"bË/two_Ëv–_™”©Ü.h
"

19 
	~"ut/codšg.h
"

20 
	~"ut/loggšg.h
"

22 
Çme¥aû
 
	gËv–db
 {

24 
size_t
 
T¬g‘FeSize
(cÚ¡ 
O±iÚs
* 
İtiÚs
) {

25  
	gİtiÚs
->
	gmax_fe_size
;

30 
št64_t
 
MaxG¿ndP¬’tOv”ÏpBy‹s
(cÚ¡ 
O±iÚs
* 
İtiÚs
) {

31  10 * 
T¬g‘FeSize
(
İtiÚs
);

37 
št64_t
 
Ex·ndedCom·ùiÚBy‹SizeLim™
(cÚ¡ 
O±iÚs
* 
İtiÚs
) {

38  25 * 
T¬g‘FeSize
(
İtiÚs
);

41 
MaxBy‹sFÜLev–
(cÚ¡ 
O±iÚs
* 
İtiÚs
, 
Ëv–
) {

46 
	g»suÉ
 = 10. * 1048576.0;

47 
	gËv–
 > 1) {

48 
	g»suÉ
 *= 10;

49 
	gËv–
--;

51  
	g»suÉ
;

54 
ušt64_t
 
MaxFeSizeFÜLev–
(cÚ¡ 
O±iÚs
* 
İtiÚs
, 
Ëv–
) {

56  
T¬g‘FeSize
(
İtiÚs
);

59 
št64_t
 
TÙ®FeSize
(cÚ¡ 
¡d
::
veùÜ
<
FeM‘aD©a
*>& 
fes
) {

60 
št64_t
 
sum
 = 0;

61 
size_t
 
	gi
 = 0; i < 
	gfes
.
size
(); i++) {

62 
	gsum
 +ğ
fes
[
i
]->
fe_size
;

64  
	gsum
;

67 
	gV”siÚ
::~
V”siÚ
() {

68 
as£¹
(
»fs_
 == 0);

71 
	g´ev_
->
	gÃxt_
 = 
Ãxt_
;

72 
	gÃxt_
->
	g´ev_
 = 
´ev_
;

75 
	gËv–
 = 0;†ev– < 
	gcÚfig
::
kNumLev–s
;†evel++) {

76 
size_t
 
	gi
 = 0; i < 
	gfes_
[
Ëv–
].
size
(); i++) {

77 
FeM‘aD©a
* 
	gf
 = 
fes_
[
Ëv–
][
i
];

78 
as£¹
(
f
->
»fs
 > 0);

79 
	gf
->
	g»fs
--;

80 ià(
	gf
->
	g»fs
 <= 0) {

81 
d–‘e
 
f
;

87 
FšdFe
(cÚ¡ 
IÁ”ÇlKeyCom·¿tÜ
& 
icmp
,

88 cÚ¡ 
¡d
::
veùÜ
<
FeM‘aD©a
*>& 
fes
, cÚ¡ 
Sliû
& 
key
) {

89 
ušt32_t
 
	gËá
 = 0;

90 
ušt32_t
 
	gright
 = 
fes
.
size
();

91 
	gËá
 < 
	gright
) {

92 
ušt32_t
 
	gmid
 = (
Ëá
 + 
right
) / 2;

93 cÚ¡ 
FeM‘aD©a
* 
	gf
 = 
fes
[
mid
];

94 ià(
	gicmp
.
	gIÁ”ÇlKeyCom·¿tÜ
::
Com·»
(
f
->
Ïrge¡
.
Encode
(), 
key
) < 0) {

97 
	gËá
 = 
mid
 + 1;

101 
	gright
 = 
mid
;

104  
	gright
;

107 
boŞ
 
Aá”Fe
(cÚ¡ 
Com·¿tÜ
* 
ucmp
, cÚ¡ 
Sliû
* 
u£r_key
,

108 cÚ¡ 
FeM‘aD©a
* 
f
) {

110  (
	gu£r_key
 !ğ
nuÎ±r
 &&

111 
ucmp
->
Com·»
(*
u£r_key
, 
f
->
Ïrge¡
.user_key()) > 0);

114 
boŞ
 
BefÜeFe
(cÚ¡ 
Com·¿tÜ
* 
ucmp
, cÚ¡ 
Sliû
* 
u£r_key
,

115 cÚ¡ 
FeM‘aD©a
* 
f
) {

117  (
	gu£r_key
 !ğ
nuÎ±r
 &&

118 
ucmp
->
Com·»
(*
u£r_key
, 
f
->
sm®Ë¡
.user_key()) < 0);

121 
boŞ
 
SomeFeOv”ÏpsRªge
(cÚ¡ 
IÁ”ÇlKeyCom·¿tÜ
& 
icmp
,

122 
boŞ
 
disjošt_sÜ‹d_fes
,

123 cÚ¡ 
¡d
::
veùÜ
<
FeM‘aD©a
*>& 
fes
,

124 cÚ¡ 
Sliû
* 
sm®Ë¡_u£r_key
,

125 cÚ¡ 
Sliû
* 
Ïrge¡_u£r_key
) {

126 cÚ¡ 
Com·¿tÜ
* 
	gucmp
 = 
icmp
.
u£r_com·¿tÜ
();

127 ià(!
	gdisjošt_sÜ‹d_fes
) {

129 
size_t
 
	gi
 = 0; i < 
	gfes
.
size
(); i++) {

130 cÚ¡ 
FeM‘aD©a
* 
	gf
 = 
fes
[
i
];

131 ià(
Aá”Fe
(
ucmp
, 
sm®Ë¡_u£r_key
, 
f
) ||

132 
BefÜeFe
(
ucmp
, 
Ïrge¡_u£r_key
, 
f
)) {

135  
	gŒue
;

138  
	gçl£
;

142 
ušt32_t
 
	gšdex
 = 0;

143 ià(
	gsm®Ë¡_u£r_key
 !ğ
nuÎ±r
) {

145 
IÁ”ÇlKey
 
sm®l_key
(*
sm®Ë¡_u£r_key
, 
kMaxSequ’ûNumb”
,

146 
kV®ueTy³FÜS“k
);

147 
	gšdex
 = 
FšdFe
(
icmp
, 
fes
, 
sm®l_key
.
Encode
());

150 ià(
	gšdex
 >ğ
fes
.
size
()) {

152  
çl£
;

155  !
BefÜeFe
(
ucmp
, 
Ïrge¡_u£r_key
, 
fes
[
šdex
]);

163 şas 
	cV”siÚ
::
Lev–FeNumI‹¿tÜ
 : 
public
 
I‹¿tÜ
 {

164 
public
:

165 
Lev–FeNumI‹¿tÜ
(cÚ¡ 
IÁ”ÇlKeyCom·¿tÜ
& 
icmp
,

166 cÚ¡ 
¡d
::
veùÜ
<
FeM‘aD©a
*>* 
æi¡
)

167 : 
icmp_
(
icmp
), 
æi¡_
(
æi¡
), 
šdex_
(æi¡->
size
()) {

169 
boŞ
 
V®id
(ècÚ¡ 
	gov”ride
 {  
	gšdex_
 < 
	gæi¡_
->
size
(); }

170 
S“k
(cÚ¡ 
Sliû
& 
rg‘
è
	gov”ride
 {

171 
	gšdex_
 = 
FšdFe
(
icmp_
, *
æi¡_
, 
rg‘
);

173 
S“kToFœ¡
(è
	gov”ride
 { 
	gšdex_
 = 0; }

174 
S“kToLa¡
(è
	gov”ride
 {

175 
	gšdex_
 = 
æi¡_
->
em±y
(è? 0 : fli¡_->
size
() - 1;

177 
Next
(è
	gov”ride
 {

178 
as£¹
(
V®id
());

179 
	gšdex_
++;

181 
P»v
(è
	gov”ride
 {

182 
as£¹
(
V®id
());

183 ià(
	gšdex_
 == 0) {

184 
šdex_
 = 
æi¡_
->
size
();

186 
	gšdex_
--;

189 
Sliû
 
key
(ècÚ¡ 
	gov”ride
 {

190 
as£¹
(
V®id
());

191  (*
	gæi¡_
)[
šdex_
]->
	gÏrge¡
.
Encode
();

193 
Sliû
 
v®ue
(ècÚ¡ 
	gov”ride
 {

194 
as£¹
(
V®id
());

195 
EncodeFixed64
(
v®ue_buf_
, (*
æi¡_
)[
šdex_
]->
numb”
);

196 
EncodeFixed64
(
v®ue_buf_
 + 8, (*
æi¡_
)[
šdex_
]->
fe_size
);

197  
Sliû
(
v®ue_buf_
, (value_buf_));

199 
Stus
 
¡©us
(ècÚ¡ 
	gov”ride
 {  
	gStus
::
OK
(); }

201 
	g´iv©e
:

202 cÚ¡ 
IÁ”ÇlKeyCom·¿tÜ
 
icmp_
;

203 cÚ¡ 
	g¡d
::
veùÜ
<
FeM‘aD©a
*>* cÚ¡ 
æi¡_
;

204 
ušt32_t
 
	gšdex_
;

207 
mubË
 
	gv®ue_buf_
[16];

210 
I‹¿tÜ
* 
	$G‘FeI‹¿tÜ
(* 
¬g
, cÚ¡ 
R—dO±iÚs
& 
İtiÚs
,

211 cÚ¡ 
Sliû
& 
fe_v®ue
) {

212 
TabËCache
* 
ÿche
 = 
»š‹½»t_ÿ¡
<TabËCache*>(
¬g
);

213 ià(
fe_v®ue
.
	`size
() != 16) {

214  
	`NewE¼ÜI‹¿tÜ
(

215 
Stus
::
	`CÜru±iÚ
("FileReader invoked with unexpected value"));

217  
ÿche
->
	`NewI‹¿tÜ
(
İtiÚs
, 
	`DecodeFixed64
(
fe_v®ue
.
	`d©a
()),

218 
	`DecodeFixed64
(
fe_v®ue
.
	`d©a
() + 8));

220 
	}
}

222 
I‹¿tÜ
* 
	gV”siÚ
::
	$NewCÚÿ‹ÇtšgI‹¿tÜ
(cÚ¡ 
R—dO±iÚs
& 
İtiÚs
,

223 
Ëv–
) const {

224  
	`NewTwoLev–I‹¿tÜ
(

225 
Ãw
 
	`Lev–FeNumI‹¿tÜ
(
v£t_
->
icmp_
, &
fes_
[
Ëv–
]), &
G‘FeI‹¿tÜ
,

226 
v£t_
->
bË_ÿche_
, 
İtiÚs
);

227 
	}
}

229 
	gV”siÚ
::
AddI‹¿tÜs
(cÚ¡ 
R—dO±iÚs
& 
İtiÚs
,

230 
¡d
::
veùÜ
<
I‹¿tÜ
*>* 
™”s
) {

232 
size_t
 
i
 = 0; 
	gi
 < 
	gfes_
[0].
size
(); i++) {

233 
	g™”s
->
push_back
(
v£t_
->
bË_ÿche_
->
NewI‹¿tÜ
(

234 
İtiÚs
, 
fes_
[0][
i
]->
numb”
, fes_[0][i]->
fe_size
));

240 
	gËv–
 = 1;†ev– < 
	gcÚfig
::
kNumLev–s
;†evel++) {

241 ià(!
	gfes_
[
Ëv–
].
em±y
()) {

242 
	g™”s
->
push_back
(
NewCÚÿ‹ÇtšgI‹¿tÜ
(
İtiÚs
, 
Ëv–
));

248 
	gÇme¥aû
 {

249 
	eSav”S‹
 {

250 
	gkNÙFound
,

251 
	gkFound
,

252 
	gkD–‘ed
,

253 
	gkCÜru±
,

255 
	sSav”
 {

256 
Sav”S‹
 
	g¡©e
;

257 cÚ¡ 
Com·¿tÜ
* 
	gucmp
;

258 
Sliû
 
	gu£r_key
;

259 
	g¡d
::
¡ršg
* 
v®ue
;

262 
	$SaveV®ue
(* 
¬g
, cÚ¡ 
Sliû
& 
ikey
, cÚ¡ Sliû& 
v
) {

263 
Sav”
* 
s
 = 
»š‹½»t_ÿ¡
<Sav”*>(
¬g
);

264 
P¬£dIÁ”ÇlKey
 
·r£d_key
;

265 ià(!
	`P¬£IÁ”ÇlKey
(
ikey
, &
·r£d_key
)) {

266 
s
->
¡©e
 = 
kCÜru±
;

268 ià(
s
->
ucmp
->
	`Com·»
(
·r£d_key
.
u£r_key
, s->user_key) == 0) {

269 
s
->
¡©e
 = (
·r£d_key
.
ty³
 =ğ
kTy³V®ue
è? 
kFound
 : 
kD–‘ed
;

270 ià(
s
->
¡©e
 =ğ
kFound
) {

271 
s
->
v®ue
->
	`assign
(
v
.
	`d©a
(), v.
	`size
());

275 
	}
}

277 
boŞ
 
	$Newe¡Fœ¡
(
FeM‘aD©a
* 
a
, FeM‘aD©a* 
b
) {

278  
a
->
numb”
 > 
b
->number;

279 
	}
}

281 
	gV”siÚ
::
	$FÜEachOv”Ïµšg
(
Sliû
 
u£r_key
, Sliû 
š‹º®_key
, * 
¬g
,

282 
	$boŞ
 (*
func
)(*, , 
FeM‘aD©a
*)) {

283 cÚ¡ 
Com·¿tÜ
* 
ucmp
 = 
v£t_
->
icmp_
.
	`u£r_com·¿tÜ
();

286 
¡d
::
veùÜ
<
FeM‘aD©a
*> 
tmp
;

287 
tmp
.
	`»£rve
(
fes_
[0].
	`size
());

288 
ušt32_t
 
i
 = 0; i < 
fes_
[0].
	`size
(); i++) {

289 
FeM‘aD©a
* 
f
 = 
fes_
[0][
i
];

290 ià(
ucmp
->
	`Com·»
(
u£r_key
, 
f
->
sm®Ë¡
.
	`u£r_key
()) >= 0 &&

291 
ucmp
->
	`Com·»
(
u£r_key
, 
f
->
Ïrge¡
.
	`u£r_key
()) <= 0) {

292 
tmp
.
	`push_back
(
f
);

295 ià(!
tmp
.
	`em±y
()) {

296 
¡d
::
	`sÜt
(
tmp
.
	`begš
(),mp.
	`’d
(), 
Newe¡Fœ¡
);

297 
ušt32_t
 
i
 = 0; i < 
tmp
.
	`size
(); i++) {

298 ià(!(*
func
)(
¬g
, 0, 
tmp
[
i
])) {

305 
Ëv–
 = 1;†ev– < 
cÚfig
::
kNumLev–s
;†evel++) {

306 
size_t
 
num_fes
 = 
fes_
[
Ëv–
].
	`size
();

307 ià(
num_fes
 == 0) ;

310 
ušt32_t
 
šdex
 = 
	`FšdFe
(
v£t_
->
icmp_
, 
fes_
[
Ëv–
], 
š‹º®_key
);

311 ià(
šdex
 < 
num_fes
) {

312 
FeM‘aD©a
* 
f
 = 
fes_
[
Ëv–
][
šdex
];

313 ià(
ucmp
->
	`Com·»
(
u£r_key
, 
f
->
sm®Ë¡
.
	`u£r_key
()) < 0) {

316 ià(!(*
func
)(
¬g
, 
Ëv–
, 
f
)) {

322 
	}
}

324 
Stus
 
	gV”siÚ
::
	$G‘
(cÚ¡ 
R—dO±iÚs
& 
İtiÚs
, cÚ¡ 
LookupKey
& 
k
,

325 
¡d
::
¡ršg
* 
v®ue
, 
G‘Sts
* 
¡©s
) {

326 
¡©s
->
£ek_fe
 = 
nuÎ±r
;

327 
¡©s
->
£ek_fe_Ëv–
 = -1;

329 
	sS‹
 {

330 
Sav”
 
§v”
;

331 
G‘Sts
* 
¡©s
;

332 cÚ¡ 
R—dO±iÚs
* 
İtiÚs
;

333 
Sliû
 
ikey
;

334 
FeM‘aD©a
* 
Ï¡_fe_»ad
;

335 
Ï¡_fe_»ad_Ëv–
;

337 
V”siÚS‘
* 
v£t
;

338 
Stus
 
s
;

339 
boŞ
 
found
;

341 
boŞ
 
	`M©ch
(* 
¬g
, 
Ëv–
, 
FeM‘aD©a
* 
f
) {

342 
S‹
* 
¡©e
 = 
»š‹½»t_ÿ¡
<S‹*>(
¬g
);

344 ià(
¡©e
->
¡©s
->
£ek_fe
 =ğ
nuÎ±r
 &&

345 
¡©e
->
Ï¡_fe_»ad
 !ğ
nuÎ±r
) {

347 
¡©e
->
¡©s
->
£ek_fe
 = s‹->
Ï¡_fe_»ad
;

348 
¡©e
->
¡©s
->
£ek_fe_Ëv–
 = s‹->
Ï¡_fe_»ad_Ëv–
;

351 
¡©e
->
Ï¡_fe_»ad
 = 
f
;

352 
¡©e
->
Ï¡_fe_»ad_Ëv–
 = 
Ëv–
;

354 
¡©e
->
s
 = s‹->
v£t
->
bË_ÿche_
->
	`G‘
(*¡©e->
İtiÚs
, 
f
->
numb”
,

355 
f
->
fe_size
, 
¡©e
->
ikey
,

356 &
¡©e
->
§v”
, 
SaveV®ue
);

357 ià(!
¡©e
->
s
.
	`ok
()) {

358 
¡©e
->
found
 = 
Œue
;

359  
çl£
;

361 
¡©e
->
§v”
.state) {

362 
kNÙFound
:

363  
Œue
;

364 
kFound
:

365 
¡©e
->
found
 = 
Œue
;

366  
çl£
;

367 
kD–‘ed
:

368  
çl£
;

369 
kCÜru±
:

370 
¡©e
->
s
 =

371 
Stus
::
	`CÜru±iÚ
("cÜru±ed key fÜ ", 
¡©e
->
§v”
.
u£r_key
);

372 
¡©e
->
found
 = 
Œue
;

373  
çl£
;

378  
çl£
;

382 
S‹
 
¡©e
;

383 
¡©e
.
found
 = 
çl£
;

384 
¡©e
.
¡©s
 = stats;

385 
¡©e
.
Ï¡_fe_»ad
 = 
nuÎ±r
;

386 
¡©e
.
Ï¡_fe_»ad_Ëv–
 = -1;

388 
¡©e
.
İtiÚs
 = &options;

389 
¡©e
.
ikey
 = 
k
.
	`š‹º®_key
();

390 
¡©e
.
v£t
 = 
v£t_
;

392 
¡©e
.
§v”
.¡©ğ
kNÙFound
;

393 
¡©e
.
§v”
.
ucmp
 = 
v£t_
->
icmp_
.
	`u£r_com·¿tÜ
();

394 
¡©e
.
§v”
.
u£r_key
 = 
k
.
	`u£r_key
();

395 
¡©e
.
§v”
.
v®ue
 = value;

397 
	`FÜEachOv”Ïµšg
(
¡©e
.
§v”
.
u£r_key
, s‹.
ikey
, &¡©e, &
S‹
::
M©ch
);

399  
¡©e
.
found
 ? s‹.
s
 : 
Stus
::
	`NÙFound
(
	`Sliû
());

400 
	}
}

402 
boŞ
 
	gV”siÚ
::
	$Upd©eSts
(cÚ¡ 
G‘Sts
& 
¡©s
) {

403 
FeM‘aD©a
* 
f
 = 
¡©s
.
£ek_fe
;

404 ià(
f
 !ğ
nuÎ±r
) {

405 
f
->
®lowed_£eks
--;

406 ià(
f
->
®lowed_£eks
 <ğ0 && 
fe_to_com·ù_
 =ğ
nuÎ±r
) {

407 
fe_to_com·ù_
 = 
f
;

408 
fe_to_com·ù_Ëv–_
 = 
¡©s
.
£ek_fe_Ëv–
;

409  
Œue
;

412  
çl£
;

413 
	}
}

415 
boŞ
 
	gV”siÚ
::
	$RecÜdR—dSam¶e
(
Sliû
 
š‹º®_key
) {

416 
P¬£dIÁ”ÇlKey
 
ikey
;

417 ià(!
	`P¬£IÁ”ÇlKey
(
š‹º®_key
, &
ikey
)) {

418  
çl£
;

421 
	sS‹
 {

422 
G‘Sts
 
¡©s
;

423 
m©ches
;

425 
boŞ
 
	`M©ch
(* 
¬g
, 
Ëv–
, 
FeM‘aD©a
* 
f
) {

426 
S‹
* 
¡©e
 = 
»š‹½»t_ÿ¡
<S‹*>(
¬g
);

427 
¡©e
->
m©ches
++;

428 ià(
¡©e
->
m©ches
 == 1) {

430 
¡©e
->
¡©s
.
£ek_fe
 = 
f
;

431 
¡©e
->
¡©s
.
£ek_fe_Ëv–
 = 
Ëv–
;

434  
¡©e
->
m©ches
 < 2;

438 
S‹
 
¡©e
;

439 
¡©e
.
m©ches
 = 0;

440 
	`FÜEachOv”Ïµšg
(
ikey
.
u£r_key
, 
š‹º®_key
, &
¡©e
, &
S‹
::
M©ch
);

446 ià(
¡©e
.
m©ches
 >= 2) {

448  
	`Upd©eSts
(
¡©e
.
¡©s
);

450  
çl£
;

451 
	}
}

453 
	gV”siÚ
::
	$Ref
(è{ ++
»fs_
; 
	}
}

455 
	gV”siÚ
::
	$UÄef
() {

456 
	`as£¹
(
this
 !ğ&
v£t_
->
dummy_v”siÚs_
);

457 
	`as£¹
(
»fs_
 >= 1);

458 --
»fs_
;

459 ià(
»fs_
 == 0) {

460 
d–‘e
 
this
;

462 
	}
}

464 
boŞ
 
	gV”siÚ
::
	$Ov”ÏpInLev–
(
Ëv–
, cÚ¡ 
Sliû
* 
sm®Ë¡_u£r_key
,

465 cÚ¡ 
Sliû
* 
Ïrge¡_u£r_key
) {

466  
	`SomeFeOv”ÏpsRªge
(
v£t_
->
icmp_
, (
Ëv–
 > 0), 
fes_
[level],

467 
sm®Ë¡_u£r_key
, 
Ïrge¡_u£r_key
);

468 
	}
}

470 
	gV”siÚ
::
	$PickLev–FÜMemTabËOuut
(cÚ¡ 
Sliû
& 
sm®Ë¡_u£r_key
,

471 cÚ¡ 
Sliû
& 
Ïrge¡_u£r_key
) {

472 
Ëv–
 = 0;

473 ià(!
	`Ov”ÏpInLev–
(0, &
sm®Ë¡_u£r_key
, &
Ïrge¡_u£r_key
)) {

476 
IÁ”ÇlKey
 
	`¡¬t
(
sm®Ë¡_u£r_key
, 
kMaxSequ’ûNumb”
, 
kV®ueTy³FÜS“k
);

477 
IÁ”ÇlKey
 
	`lim™
(
Ïrge¡_u£r_key
, 0, 
¡©ic_ÿ¡
<
V®ueTy³
>(0));

478 
¡d
::
veùÜ
<
FeM‘aD©a
*> 
ov”Ïps
;

479 
Ëv–
 < 
cÚfig
::
kMaxMemCom·ùLev–
) {

480 ià(
	`Ov”ÏpInLev–
(
Ëv–
 + 1, &
sm®Ë¡_u£r_key
, &
Ïrge¡_u£r_key
)) {

483 ià(
Ëv–
 + 2 < 
cÚfig
::
kNumLev–s
) {

485 
	`G‘Ov”ÏµšgIÅuts
(
Ëv–
 + 2, &
¡¬t
, &
lim™
, &
ov”Ïps
);

486 cÚ¡ 
št64_t
 
sum
 = 
	`TÙ®FeSize
(
ov”Ïps
);

487 ià(
sum
 > 
	`MaxG¿ndP¬’tOv”ÏpBy‹s
(
v£t_
->
İtiÚs_
)) {

491 
Ëv–
++;

494  
Ëv–
;

495 
	}
}

498 
	gV”siÚ
::
G‘Ov”ÏµšgIÅuts
(
Ëv–
, cÚ¡ 
IÁ”ÇlKey
* 
begš
,

499 cÚ¡ 
IÁ”ÇlKey
* 
’d
,

500 
¡d
::
veùÜ
<
FeM‘aD©a
*>* 
šputs
) {

501 
as£¹
(
Ëv–
 >= 0);

502 
as£¹
(
Ëv–
 < 
cÚfig
::
kNumLev–s
);

503 
	gšputs
->
ş—r
();

504 
Sliû
 
	gu£r_begš
, 
	gu£r_’d
;

505 ià(
	gbegš
 !ğ
nuÎ±r
) {

506 
u£r_begš
 = 
begš
->
u£r_key
();

508 ià(
	g’d
 !ğ
nuÎ±r
) {

509 
u£r_’d
 = 
’d
->
u£r_key
();

511 cÚ¡ 
Com·¿tÜ
* 
	gu£r_cmp
 = 
v£t_
->
icmp_
.
u£r_com·¿tÜ
();

512 
size_t
 
	gi
 = 0; i < 
	gfes_
[
Ëv–
].
size
();) {

513 
FeM‘aD©a
* 
	gf
 = 
fes_
[
Ëv–
][
i
++];

514 cÚ¡ 
Sliû
 
	gfe_¡¬t
 = 
f
->
sm®Ë¡
.
u£r_key
();

515 cÚ¡ 
Sliû
 
	gfe_lim™
 = 
f
->
Ïrge¡
.
u£r_key
();

516 ià(
	gbegš
 !ğ
nuÎ±r
 && 
u£r_cmp
->
Com·»
(
fe_lim™
, 
u£r_begš
) < 0) {

518 } ià(
	g’d
 !ğ
nuÎ±r
 && 
u£r_cmp
->
Com·»
(
fe_¡¬t
, 
u£r_’d
) > 0) {

521 
	gšputs
->
push_back
(
f
);

522 ià(
	gËv–
 == 0) {

525 ià(
begš
 !ğ
nuÎ±r
 && 
u£r_cmp
->
Com·»
(
fe_¡¬t
, 
u£r_begš
) < 0) {

526 
	gu£r_begš
 = 
fe_¡¬t
;

527 
	gšputs
->
ş—r
();

528 
	gi
 = 0;

529 } ià(
	g’d
 !ğ
nuÎ±r
 &&

530 
u£r_cmp
->
Com·»
(
fe_lim™
, 
u£r_’d
) > 0) {

531 
	gu£r_’d
 = 
fe_lim™
;

532 
	gšputs
->
ş—r
();

533 
	gi
 = 0;

540 
	g¡d
::
¡ršg
 
V”siÚ
::
	$DebugSŒšg
() const {

541 
¡d
::
¡ršg
 
r
;

542 
Ëv–
 = 0;†ev– < 
cÚfig
::
kNumLev–s
;†evel++) {

547 
r
.
	`­³nd
("---†evel ");

548 
	`Aµ’dNumb”To
(&
r
, 
Ëv–
);

549 
r
.
	`­³nd
(" ---\n");

550 cÚ¡ 
¡d
::
veùÜ
<
FeM‘aD©a
*>& 
fes
 = 
fes_
[
Ëv–
];

551 
size_t
 
i
 = 0; i < 
fes
.
	`size
(); i++) {

552 
r
.
	`push_back
(' ');

553 
	`Aµ’dNumb”To
(&
r
, 
fes
[
i
]->
numb”
);

554 
r
.
	`push_back
(':');

555 
	`Aµ’dNumb”To
(&
r
, 
fes
[
i
]->
fe_size
);

556 
r
.
	`­³nd
("[");

557 
r
.
	`­³nd
(
fes
[
i
]->
sm®Ë¡
.
	`DebugSŒšg
());

558 
r
.
	`­³nd
(" .. ");

559 
r
.
	`­³nd
(
fes
[
i
]->
Ïrge¡
.
	`DebugSŒšg
());

560 
r
.
	`­³nd
("]\n");

563  
r
;

564 
	}
}

569 şas 
	cV”siÚS‘
::
Bud”
 {

570 
´iv©e
:

572 
	sBySm®Ë¡Key
 {

573 cÚ¡ 
IÁ”ÇlKeyCom·¿tÜ
* 
š‹º®_com·¿tÜ
;

575 
boŞ
 
İ”©Ü
()(
FeM‘aD©a
* 
	gf1
, FeM‘aD©a* 
	gf2
) const {

576 
	gr
 = 
š‹º®_com·¿tÜ
->
Com·»
(
f1
->
sm®Ë¡
, 
f2
->smallest);

577 ià(
	gr
 != 0) {

578  (
r
 < 0);

581  (
	gf1
->
	gnumb”
 < 
	gf2
->number);

586 
	g¡d
::
	t£t
<
	tFeM‘aD©a
*, 
	tBySm®Ë¡Key
> 
	tFeS‘
;

587 
	sLev–S‹
 {

588 
	g¡d
::
£t
<
ušt64_t
> 
d–‘ed_fes
;

589 
FeS‘
* 
	gadded_fes
;

592 
V”siÚS‘
* 
	gv£t_
;

593 
V”siÚ
* 
	gba£_
;

594 
Lev–S‹
 
	gËv–s_
[
cÚfig
::
kNumLev–s
];

596 
	gpublic
:

598 
Bud”
(
V”siÚS‘
* 
v£t
, 
V”siÚ
* 
ba£
è: 
v£t_
(v£t), 
ba£_
(base) {

599 
	gba£_
->
Ref
();

600 
BySm®Ë¡Key
 
	gcmp
;

601 
	gcmp
.
	gš‹º®_com·¿tÜ
 = &
v£t_
->
icmp_
;

602 
	gËv–
 = 0;†ev– < 
	gcÚfig
::
kNumLev–s
;†evel++) {

603 
	gËv–s_
[
Ëv–
].
	gadded_fes
 = 
Ãw
 
FeS‘
(
cmp
);

607 ~
Bud”
() {

608 
	gËv–
 = 0;†ev– < 
	gcÚfig
::
kNumLev–s
;†evel++) {

609 cÚ¡ 
FeS‘
* 
	gadded
 = 
Ëv–s_
[
Ëv–
].
added_fes
;

610 
	g¡d
::
veùÜ
<
FeM‘aD©a
*> 
to_uÄef
;

611 
	gto_uÄef
.
»£rve
(
added
->
size
());

612 
	gFeS‘
::
cÚ¡_™”©Ü
 
™
 = 
added
->
begš
(); 
	g™
 !ğadded->
’d
();

613 ++
	g™
) {

614 
	gto_uÄef
.
push_back
(*
™
);

616 
d–‘e
 
	gadded
;

617 
ušt32_t
 
	gi
 = 0; i < 
	gto_uÄef
.
size
(); i++) {

618 
FeM‘aD©a
* 
	gf
 = 
to_uÄef
[
i
];

619 
	gf
->
	g»fs
--;

620 ià(
	gf
->
	g»fs
 <= 0) {

621 
d–‘e
 
f
;

625 
	gba£_
->
UÄef
();

629 
Aµly
(cÚ¡ 
V”siÚEd™
* 
ed™
) {

631 
size_t
 
	gi
 = 0; i < 
	ged™
->
	gcom·ù_poš‹rs_
.
size
(); i++) {

632 cÚ¡ 
	gËv–
 = 
ed™
->
com·ù_poš‹rs_
[
i
].
fœ¡
;

633 
	gv£t_
->
	gcom·ù_poš‹r_
[
Ëv–
] =

634 
ed™
->
com·ù_poš‹rs_
[
i
].
£cÚd
.
Encode
().
ToSŒšg
();

638 cÚ¡‡uto& 
	gd–‘ed_fe_£t_kvp
 : 
ed™
->
d–‘ed_fes_
) {

639 cÚ¡ 
Ëv–
 = 
d–‘ed_fe_£t_kvp
.
fœ¡
;

640 cÚ¡ 
ušt64_t
 
	gnumb”
 = 
d–‘ed_fe_£t_kvp
.
£cÚd
;

641 
	gËv–s_
[
Ëv–
].
	gd–‘ed_fes
.
š£¹
(
numb”
);

645 
size_t
 
	gi
 = 0; i < 
	ged™
->
	gÃw_fes_
.
size
(); i++) {

646 cÚ¡ 
	gËv–
 = 
ed™
->
Ãw_fes_
[
i
].
fœ¡
;

647 
FeM‘aD©a
* 
	gf
 = 
Ãw
 FeM‘aD©a(
ed™
->
Ãw_fes_
[
i
].
£cÚd
);

648 
	gf
->
	g»fs
 = 1;

663 
	gf
->
	g®lowed_£eks
 = 
¡©ic_ÿ¡
<>((
f
->
fe_size
 / 16384U));

664 ià(
	gf
->
	g®lowed_£eks
 < 100) f->allowed_seeks = 100;

666 
	gËv–s_
[
Ëv–
].
	gd–‘ed_fes
.
”a£
(
f
->
numb”
);

667 
	gËv–s_
[
Ëv–
].
	gadded_fes
->
š£¹
(
f
);

672 
SaveTo
(
V”siÚ
* 
v
) {

673 
BySm®Ë¡Key
 
	gcmp
;

674 
	gcmp
.
	gš‹º®_com·¿tÜ
 = &
v£t_
->
icmp_
;

675 
	gËv–
 = 0;†ev– < 
	gcÚfig
::
kNumLev–s
;†evel++) {

678 cÚ¡ 
	g¡d
::
veùÜ
<
FeM‘aD©a
*>& 
ba£_fes
 = 
ba£_
->
fes_
[
Ëv–
];

679 
	g¡d
::
veùÜ
<
FeM‘aD©a
*>::
cÚ¡_™”©Ü
 
ba£_™”
 = 
ba£_fes
.
begš
();

680 
	g¡d
::
veùÜ
<
FeM‘aD©a
*>::
cÚ¡_™”©Ü
 
ba£_’d
 = 
ba£_fes
.
’d
();

681 cÚ¡ 
FeS‘
* 
	gadded_fes
 = 
Ëv–s_
[
Ëv–
].
added_fes
;

682 
	gv
->
	gfes_
[
Ëv–
].
»£rve
(
ba£_fes
.
size
(è+ 
added_fes
->size());

683 cÚ¡‡uto& 
	gadded_fe
 : *
added_fes
) {

685 
¡d
::
veùÜ
<
FeM‘aD©a
*>::
cÚ¡_™”©Ü
 
bpos
 =

686 
¡d
::
uµ”_bound
(
ba£_™”
, 
ba£_’d
, 
added_fe
, 
cmp
);

687 
	gba£_™”
 !ğ
bpos
; ++base_iter) {

688 
MaybeAddFe
(
v
, 
Ëv–
, *
ba£_™”
);

691 
MaybeAddFe
(
v
, 
Ëv–
, 
added_fe
);

695 ; 
	gba£_™”
 !ğ
ba£_’d
; ++base_iter) {

696 
MaybeAddFe
(
v
, 
Ëv–
, *
ba£_™”
);

699 #iâdeà
NDEBUG


701 ià(
	gËv–
 > 0) {

702 
ušt32_t
 
	gi
 = 1; i < 
	gv
->
	gfes_
[
Ëv–
].
size
(); i++) {

703 cÚ¡ 
	gIÁ”ÇlKey
& 
	g´ev_’d
 = 
v
->
fes_
[
Ëv–
][
i
 - 1]->
Ïrge¡
;

704 cÚ¡ 
	gIÁ”ÇlKey
& 
	gthis_begš
 = 
v
->
fes_
[
Ëv–
][
i
]->
sm®Ë¡
;

705 ià(
	gv£t_
->
	gicmp_
.
Com·»
(
´ev_’d
, 
this_begš
) >= 0) {

706 
¡d
::
årštf
(
¡d”r
, "overlapping„anges in same†evel %s vs. %s\n",

707 
´ev_’d
.
DebugSŒšg
().
c_¡r
(),

708 
this_begš
.
DebugSŒšg
().
c_¡r
());

709 
	g¡d
::
abÜt
();

717 
MaybeAddFe
(
V”siÚ
* 
v
, 
Ëv–
, 
FeM‘aD©a
* 
f
) {

718 ià(
	gËv–s_
[
Ëv–
].
	gd–‘ed_fes
.
couÁ
(
f
->
numb”
) > 0) {

721 
	g¡d
::
veùÜ
<
FeM‘aD©a
*>* 
fes
 = &
v
->
fes_
[
Ëv–
];

722 ià(
	gËv–
 > 0 && !
	gfes
->
em±y
()) {

724 
as£¹
(
v£t_
->
icmp_
.
Com·»
((*
fes
)[fes->
size
(è- 1]->
Ïrge¡
,

725 
f
->
sm®Ë¡
) < 0);

727 
	gf
->
	g»fs
++;

728 
	gfes
->
push_back
(
f
);

733 
	gV”siÚS‘
::
	$V”siÚS‘
(cÚ¡ 
¡d
::
¡ršg
& 
dbÇme
, cÚ¡ 
O±iÚs
* 
İtiÚs
,

734 
TabËCache
* 
bË_ÿche
,

735 cÚ¡ 
IÁ”ÇlKeyCom·¿tÜ
* 
cmp
)

736 : 
	`’v_
(
İtiÚs
->
’v
),

737 
	`dbÇme_
(
dbÇme
),

738 
	`İtiÚs_
(
İtiÚs
),

739 
	`bË_ÿche_
(
bË_ÿche
),

740 
	`icmp_
(*
cmp
),

741 
	`Ãxt_fe_numb”_
(2),

742 
	`mªiã¡_fe_numb”_
(0),

743 
	`Ï¡_£qu’û_
(0),

744 
	`log_numb”_
(0),

745 
	`´ev_log_numb”_
(0),

746 
	`desütÜ_fe_
(
nuÎ±r
),

747 
	`desütÜ_log_
(
nuÎ±r
),

748 
	`dummy_v”siÚs_
(
this
),

749 
	$cu¼’t_
(
nuÎ±r
) {

750 
	`Aµ’dV”siÚ
(
Ãw
 
	`V”siÚ
(
this
));

751 
	}
}

753 
	gV”siÚS‘
::~
	$V”siÚS‘
() {

754 
cu¼’t_
->
	`UÄef
();

755 
	`as£¹
(
dummy_v”siÚs_
.
Ãxt_
 == &dummy_versions_);

756 
d–‘e
 
desütÜ_log_
;

757 
d–‘e
 
desütÜ_fe_
;

758 
	}
}

760 
	gV”siÚS‘
::
	$Aµ’dV”siÚ
(
V”siÚ
* 
v
) {

762 
	`as£¹
(
v
->
»fs_
 == 0);

763 
	`as£¹
(
v
 !ğ
cu¼’t_
);

764 ià(
cu¼’t_
 !ğ
nuÎ±r
) {

765 
cu¼’t_
->
	`UÄef
();

767 
cu¼’t_
 = 
v
;

768 
v
->
	`Ref
();

771 
v
->
´ev_
 = 
dummy_v”siÚs_
.prev_;

772 
v
->
Ãxt_
 = &
dummy_v”siÚs_
;

773 
v
->
´ev_
->
Ãxt_
 = v;

774 
v
->
Ãxt_
->
´ev_
 = v;

775 
	}
}

777 
Stus
 
	gV”siÚS‘
::
	$LogAndAµly
(
V”siÚEd™
* 
ed™
, 
pÜt
::
Mu‹x
* 
mu
) {

778 ià(
ed™
->
has_log_numb”_
) {

779 
	`as£¹
(
ed™
->
log_numb”_
 >=†og_number_);

780 
	`as£¹
(
ed™
->
log_numb”_
 < 
Ãxt_fe_numb”_
);

782 
ed™
->
	`S‘LogNumb”
(
log_numb”_
);

785 ià(!
ed™
->
has_´ev_log_numb”_
) {

786 
ed™
->
	`S‘P»vLogNumb”
(
´ev_log_numb”_
);

789 
ed™
->
	`S‘NextFe
(
Ãxt_fe_numb”_
);

790 
ed™
->
	`S‘La¡Sequ’û
(
Ï¡_£qu’û_
);

792 
V”siÚ
* 
v
 = 
Ãw
 
	`V”siÚ
(
this
);

794 
Bud”
 
	`bud”
(
this
, 
cu¼’t_
);

795 
bud”
.
	`Aµly
(
ed™
);

796 
bud”
.
	`SaveTo
(
v
);

798 
	`Fš®ize
(
v
);

802 
¡d
::
¡ršg
 
Ãw_mªiã¡_fe
;

803 
Stus
 
s
;

804 ià(
desütÜ_log_
 =ğ
nuÎ±r
) {

807 
	`as£¹
(
desütÜ_fe_
 =ğ
nuÎ±r
);

808 
Ãw_mªiã¡_fe
 = 
	`DesütÜFeName
(
dbÇme_
, 
mªiã¡_fe_numb”_
);

809 
s
 = 
’v_
->
	`NewWr™abËFe
(
Ãw_mªiã¡_fe
, &
desütÜ_fe_
);

810 ià(
s
.
	`ok
()) {

811 
desütÜ_log_
 = 
Ãw
 
log
::
	`Wr™”
(
desütÜ_fe_
);

812 
s
 = 
	`Wr™eSÇpshÙ
(
desütÜ_log_
);

818 
mu
->
	`UÆock
();

821 ià(
s
.
	`ok
()) {

822 
¡d
::
¡ršg
 
»cÜd
;

823 
ed™
->
	`EncodeTo
(&
»cÜd
);

824 
s
 = 
desütÜ_log_
->
	`AddRecÜd
(
»cÜd
);

825 ià(
s
.
	`ok
()) {

826 
s
 = 
desütÜ_fe_
->
	`Sync
();

828 ià(!
s
.
	`ok
()) {

829 
	`Log
(
İtiÚs_
->
šfo_log
, "MANIFEST wr™e: %s\n", 
s
.
	`ToSŒšg
().
	`c_¡r
());

835 ià(
s
.
	`ok
(è&& !
Ãw_mªiã¡_fe
.
	`em±y
()) {

836 
s
 = 
	`S‘Cu¼’tFe
(
’v_
, 
dbÇme_
, 
mªiã¡_fe_numb”_
);

839 
mu
->
	`Lock
();

843 ià(
s
.
	`ok
()) {

844 
	`Aµ’dV”siÚ
(
v
);

845 
log_numb”_
 = 
ed™
->log_number_;

846 
´ev_log_numb”_
 = 
ed™
->prev_log_number_;

848 
d–‘e
 
v
;

849 ià(!
Ãw_mªiã¡_fe
.
	`em±y
()) {

850 
d–‘e
 
desütÜ_log_
;

851 
d–‘e
 
desütÜ_fe_
;

852 
desütÜ_log_
 = 
nuÎ±r
;

853 
desütÜ_fe_
 = 
nuÎ±r
;

854 
’v_
->
	`RemoveFe
(
Ãw_mªiã¡_fe
);

858  
s
;

859 
	}
}

861 
Stus
 
	gV”siÚS‘
::
	$Recov”
(
boŞ
* 
§ve_mªiã¡
) {

862 
LogR•Ü‹r
 : 
public
 
log
::
R—d”
::
R•Ü‹r
 {

863 
Stus
* 
¡©us
;

864 
	`CÜru±iÚ
(
size_t
 
by‹s
, cÚ¡ 
Stus
& 
s
è
ov”ride
 {

865 ià(
this
->
¡©us
->
	`ok
()è*this->¡©u ğ
s
;

870 
¡d
::
¡ršg
 
cu¼’t
;

871 
Stus
 
s
 = 
	`R—dFeToSŒšg
(
’v_
, 
	`Cu¼’tFeName
(
dbÇme_
), &
cu¼’t
);

872 ià(!
s
.
	`ok
()) {

873  
s
;

875 ià(
cu¼’t
.
	`em±y
(è|| cu¼’t[cu¼’t.
	`size
() - 1] != '\n') {

876  
Stus
::
	`CÜru±iÚ
("CURRENT file does‚otƒnd with‚ewline");

878 
cu¼’t
.
	`»size
(cu¼’t.
	`size
() - 1);

880 
¡d
::
¡ršg
 
dsúame
 = 
dbÇme_
 + "/" + 
cu¼’t
;

881 
Sequ’tŸlFe
* 
fe
;

882 
s
 = 
’v_
->
	`NewSequ’tŸlFe
(
dsúame
, &
fe
);

883 ià(!
s
.
	`ok
()) {

884 ià(
s
.
	`IsNÙFound
()) {

885  
Stus
::
	`CÜru±iÚ
("CURRENT…ointso‡‚on-existent file",

886 
s
.
	`ToSŒšg
());

888  
s
;

891 
boŞ
 
have_log_numb”
 = 
çl£
;

892 
boŞ
 
have_´ev_log_numb”
 = 
çl£
;

893 
boŞ
 
have_Ãxt_fe
 = 
çl£
;

894 
boŞ
 
have_Ï¡_£qu’û
 = 
çl£
;

895 
ušt64_t
 
Ãxt_fe
 = 0;

896 
ušt64_t
 
Ï¡_£qu’û
 = 0;

897 
ušt64_t
 
log_numb”
 = 0;

898 
ušt64_t
 
´ev_log_numb”
 = 0;

899 
Bud”
 
	`bud”
(
this
, 
cu¼’t_
);

900 
»ad_»cÜds
 = 0;

903 
LogR•Ü‹r
 
»pÜ‹r
;

904 
»pÜ‹r
.
¡©us
 = &
s
;

905 
log
::
R—d”
 
	`»ad”
(
fe
, &
»pÜ‹r
, 
Œue
 ,

907 
Sliû
 
»cÜd
;

908 
¡d
::
¡ršg
 
sü©ch
;

909 
»ad”
.
	`R—dRecÜd
(&
»cÜd
, &
sü©ch
è&& 
s
.
	`ok
()) {

910 ++
»ad_»cÜds
;

911 
V”siÚEd™
 
ed™
;

912 
s
 = 
ed™
.
	`DecodeFrom
(
»cÜd
);

913 ià(
s
.
	`ok
()) {

914 ià(
ed™
.
has_com·¿tÜ_
 &&

915 
ed™
.
com·¿tÜ_
 !ğ
icmp_
.
	`u£r_com·¿tÜ
()->
	`Name
()) {

916 
s
 = 
Stus
::
	`Inv®idArgum’t
(

917 
ed™
.
com·¿tÜ_
 + " does‚ot matchƒxisting comparator ",

918 
icmp_
.
	`u£r_com·¿tÜ
()->
	`Name
());

922 ià(
s
.
	`ok
()) {

923 
bud”
.
	`Aµly
(&
ed™
);

926 ià(
ed™
.
has_log_numb”_
) {

927 
log_numb”
 = 
ed™
.
log_numb”_
;

928 
have_log_numb”
 = 
Œue
;

931 ià(
ed™
.
has_´ev_log_numb”_
) {

932 
´ev_log_numb”
 = 
ed™
.
´ev_log_numb”_
;

933 
have_´ev_log_numb”
 = 
Œue
;

936 ià(
ed™
.
has_Ãxt_fe_numb”_
) {

937 
Ãxt_fe
 = 
ed™
.
Ãxt_fe_numb”_
;

938 
have_Ãxt_fe
 = 
Œue
;

941 ià(
ed™
.
has_Ï¡_£qu’û_
) {

942 
Ï¡_£qu’û
 = 
ed™
.
Ï¡_£qu’û_
;

943 
have_Ï¡_£qu’û
 = 
Œue
;

947 
d–‘e
 
fe
;

948 
fe
 = 
nuÎ±r
;

950 ià(
s
.
	`ok
()) {

951 ià(!
have_Ãxt_fe
) {

952 
s
 = 
Stus
::
	`CÜru±iÚ
("no meta-nextfileƒntry in descriptor");

953 } ià(!
have_log_numb”
) {

954 
s
 = 
Stus
::
	`CÜru±iÚ
("no meta-lognumberƒntry in descriptor");

955 } ià(!
have_Ï¡_£qu’û
) {

956 
s
 = 
Stus
::
	`CÜru±iÚ
("no†ast-sequence-numberƒntry in descriptor");

959 ià(!
have_´ev_log_numb”
) {

960 
´ev_log_numb”
 = 0;

963 
	`M¬kFeNumb”U£d
(
´ev_log_numb”
);

964 
	`M¬kFeNumb”U£d
(
log_numb”
);

967 ià(
s
.
	`ok
()) {

968 
V”siÚ
* 
v
 = 
Ãw
 
	`V”siÚ
(
this
);

969 
bud”
.
	`SaveTo
(
v
);

971 
	`Fš®ize
(
v
);

972 
	`Aµ’dV”siÚ
(
v
);

973 
mªiã¡_fe_numb”_
 = 
Ãxt_fe
;

974 
Ãxt_fe_numb”_
 = 
Ãxt_fe
 + 1;

975 
Ï¡_£qu’û_
 = 
Ï¡_£qu’û
;

976 
log_numb”_
 = 
log_numb”
;

977 
´ev_log_numb”_
 = 
´ev_log_numb”
;

980 ià(
	`Reu£Mªiã¡
(
dsúame
, 
cu¼’t
)) {

983 *
§ve_mªiã¡
 = 
Œue
;

986 
¡d
::
¡ršg
 
”rÜ
 = 
s
.
	`ToSŒšg
();

987 
	`Log
(
İtiÚs_
->
šfo_log
, "Error„ecovering version set with %d„ecords: %s",

988 
»ad_»cÜds
, 
”rÜ
.
	`c_¡r
());

991  
s
;

992 
	}
}

994 
boŞ
 
	gV”siÚS‘
::
	$Reu£Mªiã¡
(cÚ¡ 
¡d
::
¡ršg
& 
dsúame
,

995 cÚ¡ 
¡d
::
¡ršg
& 
dscba£
) {

996 ià(!
İtiÚs_
->
»u£_logs
) {

997  
çl£
;

999 
FeTy³
 
mªiã¡_ty³
;

1000 
ušt64_t
 
mªiã¡_numb”
;

1001 
ušt64_t
 
mªiã¡_size
;

1002 ià(!
	`P¬£FeName
(
dscba£
, &
mªiã¡_numb”
, &
mªiã¡_ty³
) ||

1003 
mªiã¡_ty³
 !ğ
kDesütÜFe
 ||

1004 !
’v_
->
	`G‘FeSize
(
dsúame
, &
mªiã¡_size
).
	`ok
() ||

1006 
mªiã¡_size
 >ğ
	`T¬g‘FeSize
(
İtiÚs_
)) {

1007  
çl£
;

1010 
	`as£¹
(
desütÜ_fe_
 =ğ
nuÎ±r
);

1011 
	`as£¹
(
desütÜ_log_
 =ğ
nuÎ±r
);

1012 
Stus
 
r
 = 
’v_
->
	`NewAµ’dabËFe
(
dsúame
, &
desütÜ_fe_
);

1013 ià(!
r
.
	`ok
()) {

1014 
	`Log
(
İtiÚs_
->
šfo_log
, "Reu£ MANIFEST: %s\n", 
r
.
	`ToSŒšg
().
	`c_¡r
());

1015 
	`as£¹
(
desütÜ_fe_
 =ğ
nuÎ±r
);

1016  
çl£
;

1019 
	`Log
(
İtiÚs_
->
šfo_log
, "Reusšg MANIFEST %s\n", 
dsúame
.
	`c_¡r
());

1020 
desütÜ_log_
 = 
Ãw
 
log
::
	`Wr™”
(
desütÜ_fe_
, 
mªiã¡_size
);

1021 
mªiã¡_fe_numb”_
 = 
mªiã¡_numb”
;

1022  
Œue
;

1023 
	}
}

1025 
	gV”siÚS‘
::
	$M¬kFeNumb”U£d
(
ušt64_t
 
numb”
) {

1026 ià(
Ãxt_fe_numb”_
 <ğ
numb”
) {

1027 
Ãxt_fe_numb”_
 = 
numb”
 + 1;

1029 
	}
}

1031 
	gV”siÚS‘
::
	$Fš®ize
(
V”siÚ
* 
v
) {

1033 
be¡_Ëv–
 = -1;

1034 
be¡_scÜe
 = -1;

1036 
Ëv–
 = 0;†ev– < 
cÚfig
::
kNumLev–s
 - 1;†evel++) {

1037 
scÜe
;

1038 ià(
Ëv–
 == 0) {

1050 
scÜe
 = 
v
->
fes_
[
Ëv–
].
	`size
() /

1051 
¡©ic_ÿ¡
<>(
cÚfig
::
kL0_Com·ùiÚTrigg”
);

1054 cÚ¡ 
ušt64_t
 
Ëv–_by‹s
 = 
	`TÙ®FeSize
(
v
->
fes_
[
Ëv–
]);

1055 
scÜe
 =

1056 
¡©ic_ÿ¡
<>(
Ëv–_by‹s
è/ 
	`MaxBy‹sFÜLev–
(
İtiÚs_
, 
Ëv–
);

1059 ià(
scÜe
 > 
be¡_scÜe
) {

1060 
be¡_Ëv–
 = 
Ëv–
;

1061 
be¡_scÜe
 = 
scÜe
;

1065 
v
->
com·ùiÚ_Ëv–_
 = 
be¡_Ëv–
;

1066 
v
->
com·ùiÚ_scÜe_
 = 
be¡_scÜe
;

1067 
	}
}

1069 
Stus
 
	gV”siÚS‘
::
	$Wr™eSÇpshÙ
(
log
::
Wr™”
*†og) {

1073 
V”siÚEd™
 
ed™
;

1074 
ed™
.
	`S‘Com·¿tÜName
(
icmp_
.
	`u£r_com·¿tÜ
()->
	`Name
());

1077 
Ëv–
 = 0;†ev– < 
cÚfig
::
kNumLev–s
;†evel++) {

1078 ià(!
com·ù_poš‹r_
[
Ëv–
].
	`em±y
()) {

1079 
IÁ”ÇlKey
 
key
;

1080 
key
.
	`DecodeFrom
(
com·ù_poš‹r_
[
Ëv–
]);

1081 
ed™
.
	`S‘Com·ùPoš‹r
(
Ëv–
, 
key
);

1086 
Ëv–
 = 0;†ev– < 
cÚfig
::
kNumLev–s
;†evel++) {

1087 cÚ¡ 
¡d
::
veùÜ
<
FeM‘aD©a
*>& 
fes
 = 
cu¼’t_
->
fes_
[
Ëv–
];

1088 
size_t
 
i
 = 0; i < 
fes
.
	`size
(); i++) {

1089 cÚ¡ 
FeM‘aD©a
* 
f
 = 
fes
[
i
];

1090 
ed™
.
	`AddFe
(
Ëv–
, 
f
->
numb”
, f->
fe_size
, f->
sm®Ë¡
, f->
Ïrge¡
);

1094 
¡d
::
¡ršg
 
»cÜd
;

1095 
ed™
.
	`EncodeTo
(&
»cÜd
);

1096  
log
->
	`AddRecÜd
(
»cÜd
);

1097 
	}
}

1099 
	gV”siÚS‘
::
	$NumLev–Fes
(
Ëv–
) const {

1100 
	`as£¹
(
Ëv–
 >= 0);

1101 
	`as£¹
(
Ëv–
 < 
cÚfig
::
kNumLev–s
);

1102  
cu¼’t_
->
fes_
[
Ëv–
].
	`size
();

1103 
	}
}

1105 cÚ¡ * 
	gV”siÚS‘
::
	$Lev–Summ¬y
(
Lev–Summ¬yStÜage
* 
sü©ch
) const {

1107 
	`¡©ic_as£¹
(
cÚfig
::
kNumLev–s
 == 7, "");

1108 
¡d
::
	`¢´štf
(

1109 
sü©ch
->
bufãr
, (scratch->buffer), "files[ %d %d %d %d %d %d %d ]",

1110 (
cu¼’t_
->
fes_
[0].
	`size
()), (current_->files_[1].size()),

1111 (
cu¼’t_
->
fes_
[2].
	`size
()), (current_->files_[3].size()),

1112 (
cu¼’t_
->
fes_
[4].
	`size
()), (current_->files_[5].size()),

1113 (
cu¼’t_
->
fes_
[6].
	`size
()));

1114  
sü©ch
->
bufãr
;

1115 
	}
}

1117 
ušt64_t
 
	gV”siÚS‘
::
	$Aµroxim©eOff£tOf
(
V”siÚ
* 
v
, cÚ¡ 
IÁ”ÇlKey
& 
ikey
) {

1118 
ušt64_t
 
»suÉ
 = 0;

1119 
Ëv–
 = 0;†ev– < 
cÚfig
::
kNumLev–s
;†evel++) {

1120 cÚ¡ 
¡d
::
veùÜ
<
FeM‘aD©a
*>& 
fes
 = 
v
->
fes_
[
Ëv–
];

1121 
size_t
 
i
 = 0; i < 
fes
.
	`size
(); i++) {

1122 ià(
icmp_
.
	`Com·»
(
fes
[
i
]->
Ïrge¡
, 
ikey
) <= 0) {

1124 
»suÉ
 +ğ
fes
[
i
]->
fe_size
;

1125 } ià(
icmp_
.
	`Com·»
(
fes
[
i
]->
sm®Ë¡
, 
ikey
) > 0) {

1127 ià(
Ëv–
 > 0) {

1136 
TabË
* 
bË±r
;

1137 
I‹¿tÜ
* 
™”
 = 
bË_ÿche_
->
	`NewI‹¿tÜ
(

1138 
	`R—dO±iÚs
(), 
fes
[
i
]->
numb”
, fes[i]->
fe_size
, &
bË±r
);

1139 ià(
bË±r
 !ğ
nuÎ±r
) {

1140 
»suÉ
 +ğ
bË±r
->
	`Aµroxim©eOff£tOf
(
ikey
.
	`Encode
());

1142 
d–‘e
 
™”
;

1146  
»suÉ
;

1147 
	}
}

1149 
	gV”siÚS‘
::
AddLiveFes
(
¡d
::
£t
<
ušt64_t
>* 
live
) {

1150 
V”siÚ
* 
v
 = 
dummy_v”siÚs_
.
Ãxt_
; 
	gv
 != &dummy_versions_;

1151 
	gv
 = 
v
->
Ãxt_
) {

1152 
Ëv–
 = 0; 
	gËv–
 < 
	gcÚfig
::
kNumLev–s
;†evel++) {

1153 cÚ¡ 
	g¡d
::
veùÜ
<
FeM‘aD©a
*>& 
fes
 = 
v
->
fes_
[
Ëv–
];

1154 
size_t
 
	gi
 = 0; i < 
	gfes
.
size
(); i++) {

1155 
	glive
->
š£¹
(
fes
[
i
]->
numb”
);

1161 
št64_t
 
	gV”siÚS‘
::
	$NumLev–By‹s
(
Ëv–
) const {

1162 
	`as£¹
(
Ëv–
 >= 0);

1163 
	`as£¹
(
Ëv–
 < 
cÚfig
::
kNumLev–s
);

1164  
	`TÙ®FeSize
(
cu¼’t_
->
fes_
[
Ëv–
]);

1165 
	}
}

1167 
št64_t
 
	gV”siÚS‘
::
	$MaxNextLev–Ov”ÏµšgBy‹s
() {

1168 
št64_t
 
»suÉ
 = 0;

1169 
¡d
::
veùÜ
<
FeM‘aD©a
*> 
ov”Ïps
;

1170 
Ëv–
 = 1;†ev– < 
cÚfig
::
kNumLev–s
 - 1;†evel++) {

1171 
size_t
 
i
 = 0; i < 
cu¼’t_
->
fes_
[
Ëv–
].
	`size
(); i++) {

1172 cÚ¡ 
FeM‘aD©a
* 
f
 = 
cu¼’t_
->
fes_
[
Ëv–
][
i
];

1173 
cu¼’t_
->
	`G‘Ov”ÏµšgIÅuts
(
Ëv–
 + 1, &
f
->
sm®Ë¡
, &f->
Ïrge¡
,

1174 &
ov”Ïps
);

1175 cÚ¡ 
št64_t
 
sum
 = 
	`TÙ®FeSize
(
ov”Ïps
);

1176 ià(
sum
 > 
»suÉ
) {

1177 
»suÉ
 = 
sum
;

1181  
»suÉ
;

1182 
	}
}

1187 
	gV”siÚS‘
::
G‘Rªge
(cÚ¡ 
¡d
::
veùÜ
<
FeM‘aD©a
*>& 
šputs
,

1188 
IÁ”ÇlKey
* 
sm®Ë¡
, IÁ”ÇlKey* 
Ïrge¡
) {

1189 
as£¹
(!
šputs
.
em±y
());

1190 
	gsm®Ë¡
->
CË¬
();

1191 
	gÏrge¡
->
CË¬
();

1192 
size_t
 
	gi
 = 0; i < 
	gšputs
.
size
(); i++) {

1193 
FeM‘aD©a
* 
	gf
 = 
šputs
[
i
];

1194 ià(
	gi
 == 0) {

1195 *
sm®Ë¡
 = 
f
->smallest;

1196 *
	gÏrge¡
 = 
f
->
Ïrge¡
;

1198 ià(
	gicmp_
.
Com·»
(
f
->
sm®Ë¡
, *smallest) < 0) {

1199 *
	gsm®Ë¡
 = 
f
->
sm®Ë¡
;

1201 ià(
	gicmp_
.
Com·»
(
f
->
Ïrge¡
, *largest) > 0) {

1202 *
	gÏrge¡
 = 
f
->
Ïrge¡
;

1211 
	gV”siÚS‘
::
G‘Rªge2
(cÚ¡ 
¡d
::
veùÜ
<
FeM‘aD©a
*>& 
šputs1
,

1212 cÚ¡ 
¡d
::
veùÜ
<
FeM‘aD©a
*>& 
šputs2
,

1213 
IÁ”ÇlKey
* 
sm®Ë¡
, IÁ”ÇlKey* 
Ïrge¡
) {

1214 
	g¡d
::
veùÜ
<
FeM‘aD©a
*> 
®l
 = 
šputs1
;

1215 
	g®l
.
š£¹
(
®l
.
’d
(), 
šputs2
.
begš
(), inputs2.end());

1216 
G‘Rªge
(
®l
, 
sm®Ë¡
, 
Ïrge¡
);

1219 
I‹¿tÜ
* 
	gV”siÚS‘
::
	$MakeIÅutI‹¿tÜ
(
Com·ùiÚ
* 
c
) {

1220 
R—dO±iÚs
 
İtiÚs
;

1221 
İtiÚs
.
v”ify_checksums
 = 
İtiÚs_
->
·¿noid_checks
;

1222 
İtiÚs
.
fl_ÿche
 = 
çl£
;

1227 cÚ¡ 
¥aû
 = (
c
->
	`Ëv–
(è=ğ0 ? c->
šputs_
[0].
	`size
() + 1 : 2);

1228 
I‹¿tÜ
** 
li¡
 = 
Ãw
 I‹¿tÜ*[
¥aû
];

1229 
num
 = 0;

1230 
which
 = 0; which < 2; which++) {

1231 ià(!
c
->
šputs_
[
which
].
	`em±y
()) {

1232 ià(
c
->
	`Ëv–
(è+ 
which
 == 0) {

1233 cÚ¡ 
¡d
::
veùÜ
<
FeM‘aD©a
*>& 
fes
 = 
c
->
šputs_
[
which
];

1234 
size_t
 
i
 = 0; i < 
fes
.
	`size
(); i++) {

1235 
li¡
[
num
++] = 
bË_ÿche_
->
	`NewI‹¿tÜ
(
İtiÚs
, 
fes
[
i
]->
numb”
,

1236 
fes
[
i
]->
fe_size
);

1240 
li¡
[
num
++] = 
	`NewTwoLev–I‹¿tÜ
(

1241 
Ãw
 
V”siÚ
::
	`Lev–FeNumI‹¿tÜ
(
icmp_
, &
c
->
šputs_
[
which
]),

1242 &
G‘FeI‹¿tÜ
, 
bË_ÿche_
, 
İtiÚs
);

1246 
	`as£¹
(
num
 <ğ
¥aû
);

1247 
I‹¿tÜ
* 
»suÉ
 = 
	`NewM”gšgI‹¿tÜ
(&
icmp_
, 
li¡
, 
num
);

1248 
d–‘e
[] 
li¡
;

1249  
»suÉ
;

1250 
	}
}

1252 
Com·ùiÚ
* 
	gV”siÚS‘
::
	$PickCom·ùiÚ
() {

1253 
Com·ùiÚ
* 
c
;

1254 
Ëv–
;

1258 cÚ¡ 
boŞ
 
size_com·ùiÚ
 = (
cu¼’t_
->
com·ùiÚ_scÜe_
 >= 1);

1259 cÚ¡ 
boŞ
 
£ek_com·ùiÚ
 = (
cu¼’t_
->
fe_to_com·ù_
 !ğ
nuÎ±r
);

1260 ià(
size_com·ùiÚ
) {

1261 
Ëv–
 = 
cu¼’t_
->
com·ùiÚ_Ëv–_
;

1262 
	`as£¹
(
Ëv–
 >= 0);

1263 
	`as£¹
(
Ëv–
 + 1 < 
cÚfig
::
kNumLev–s
);

1264 
c
 = 
Ãw
 
	`Com·ùiÚ
(
İtiÚs_
, 
Ëv–
);

1267 
size_t
 
i
 = 0; i < 
cu¼’t_
->
fes_
[
Ëv–
].
	`size
(); i++) {

1268 
FeM‘aD©a
* 
f
 = 
cu¼’t_
->
fes_
[
Ëv–
][
i
];

1269 ià(
com·ù_poš‹r_
[
Ëv–
].
	`em±y
() ||

1270 
icmp_
.
	`Com·»
(
f
->
Ïrge¡
.
	`Encode
(), 
com·ù_poš‹r_
[
Ëv–
]) > 0) {

1271 
c
->
šputs_
[0].
	`push_back
(
f
);

1275 ià(
c
->
šputs_
[0].
	`em±y
()) {

1277 
c
->
šputs_
[0].
	`push_back
(
cu¼’t_
->
fes_
[
Ëv–
][0]);

1279 } ià(
£ek_com·ùiÚ
) {

1280 
Ëv–
 = 
cu¼’t_
->
fe_to_com·ù_Ëv–_
;

1281 
c
 = 
Ãw
 
	`Com·ùiÚ
(
İtiÚs_
, 
Ëv–
);

1282 
c
->
šputs_
[0].
	`push_back
(
cu¼’t_
->
fe_to_com·ù_
);

1284  
nuÎ±r
;

1287 
c
->
šput_v”siÚ_
 = 
cu¼’t_
;

1288 
c
->
šput_v”siÚ_
->
	`Ref
();

1291 ià(
Ëv–
 == 0) {

1292 
IÁ”ÇlKey
 
sm®Ë¡
, 
Ïrge¡
;

1293 
	`G‘Rªge
(
c
->
šputs_
[0], &
sm®Ë¡
, &
Ïrge¡
);

1297 
cu¼’t_
->
	`G‘Ov”ÏµšgIÅuts
(0, &
sm®Ë¡
, &
Ïrge¡
, &
c
->
šputs_
[0]);

1298 
	`as£¹
(!
c
->
šputs_
[0].
	`em±y
());

1301 
	`S‘upOth”IÅuts
(
c
);

1303  
c
;

1304 
	}
}

1308 
boŞ
 
FšdL¬ge¡Key
(cÚ¡ 
IÁ”ÇlKeyCom·¿tÜ
& 
icmp
,

1309 cÚ¡ 
¡d
::
veùÜ
<
FeM‘aD©a
*>& 
fes
,

1310 
IÁ”ÇlKey
* 
Ïrge¡_key
) {

1311 ià(
	gfes
.
em±y
()) {

1312  
	gçl£
;

1314 *
	gÏrge¡_key
 = 
fes
[0]->
Ïrge¡
;

1315 
size_t
 
	gi
 = 1; i < 
	gfes
.
size
(); ++i) {

1316 
FeM‘aD©a
* 
	gf
 = 
fes
[
i
];

1317 ià(
	gicmp
.
Com·»
(
f
->
Ïrge¡
, *
Ïrge¡_key
) > 0) {

1318 *
	gÏrge¡_key
 = 
f
->
Ïrge¡
;

1321  
	gŒue
;

1326 
FeM‘aD©a
* 
FšdSm®Ë¡Bound¬yFe
(

1327 cÚ¡ 
IÁ”ÇlKeyCom·¿tÜ
& 
icmp
,

1328 cÚ¡ 
¡d
::
veùÜ
<
FeM‘aD©a
*>& 
Ëv–_fes
,

1329 cÚ¡ 
IÁ”ÇlKey
& 
Ïrge¡_key
) {

1330 cÚ¡ 
Com·¿tÜ
* 
	gu£r_cmp
 = 
icmp
.
u£r_com·¿tÜ
();

1331 
FeM‘aD©a
* 
	gsm®Ë¡_bound¬y_fe
 = 
nuÎ±r
;

1332 
size_t
 
	gi
 = 0; i < 
	gËv–_fes
.
size
(); ++i) {

1333 
FeM‘aD©a
* 
	gf
 = 
Ëv–_fes
[
i
];

1334 ià(
	gicmp
.
Com·»
(
f
->
sm®Ë¡
, 
Ïrge¡_key
) > 0 &&

1335 
	gu£r_cmp
->
Com·»
(
f
->
sm®Ë¡
.
u£r_key
(), 
Ïrge¡_key
.user_key()) ==

1337 ià(
sm®Ë¡_bound¬y_fe
 =ğ
nuÎ±r
 ||

1338 
icmp
.
Com·»
(
f
->
sm®Ë¡
, 
sm®Ë¡_bound¬y_fe
->smallest) < 0) {

1339 
	gsm®Ë¡_bound¬y_fe
 = 
f
;

1343  
	gsm®Ë¡_bound¬y_fe
;

1360 
AddBound¬yIÅuts
(cÚ¡ 
IÁ”ÇlKeyCom·¿tÜ
& 
icmp
,

1361 cÚ¡ 
¡d
::
veùÜ
<
FeM‘aD©a
*>& 
Ëv–_fes
,

1362 
¡d
::
veùÜ
<
FeM‘aD©a
*>* 
com·ùiÚ_fes
) {

1363 
IÁ”ÇlKey
 
Ïrge¡_key
;

1366 ià(!
FšdL¬ge¡Key
(
icmp
, *
com·ùiÚ_fes
, &
Ïrge¡_key
)) {

1370 
boŞ
 
	gcÚtšue_£¬chšg
 = 
Œue
;

1371 
	gcÚtšue_£¬chšg
) {

1372 
FeM‘aD©a
* 
	gsm®Ë¡_bound¬y_fe
 =

1373 
FšdSm®Ë¡Bound¬yFe
(
icmp
, 
Ëv–_fes
, 
Ïrge¡_key
);

1376 ià(
	gsm®Ë¡_bound¬y_fe
 !ğ
NULL
) {

1377 
com·ùiÚ_fes
->
push_back
(
sm®Ë¡_bound¬y_fe
);

1378 
	gÏrge¡_key
 = 
sm®Ë¡_bound¬y_fe
->
Ïrge¡
;

1380 
	gcÚtšue_£¬chšg
 = 
çl£
;

1385 
	gV”siÚS‘
::
	$S‘upOth”IÅuts
(
Com·ùiÚ
* 
c
) {

1386 cÚ¡ 
Ëv–
 = 
c
->
	`Ëv–
();

1387 
IÁ”ÇlKey
 
sm®Ë¡
, 
Ïrge¡
;

1389 
	`AddBound¬yIÅuts
(
icmp_
, 
cu¼’t_
->
fes_
[
Ëv–
], &
c
->
šputs_
[0]);

1390 
	`G‘Rªge
(
c
->
šputs_
[0], &
sm®Ë¡
, &
Ïrge¡
);

1392 
cu¼’t_
->
	`G‘Ov”ÏµšgIÅuts
(
Ëv–
 + 1, &
sm®Ë¡
, &
Ïrge¡
,

1393 &
c
->
šputs_
[1]);

1394 
	`AddBound¬yIÅuts
(
icmp_
, 
cu¼’t_
->
fes_
[
Ëv–
 + 1], &
c
->
šputs_
[1]);

1397 
IÁ”ÇlKey
 
®l_¡¬t
, 
®l_lim™
;

1398 
	`G‘Rªge2
(
c
->
šputs_
[0], c->šputs_[1], &
®l_¡¬t
, &
®l_lim™
);

1402 ià(!
c
->
šputs_
[1].
	`em±y
()) {

1403 
¡d
::
veùÜ
<
FeM‘aD©a
*> 
ex·nded0
;

1404 
cu¼’t_
->
	`G‘Ov”ÏµšgIÅuts
(
Ëv–
, &
®l_¡¬t
, &
®l_lim™
, &
ex·nded0
);

1405 
	`AddBound¬yIÅuts
(
icmp_
, 
cu¼’t_
->
fes_
[
Ëv–
], &
ex·nded0
);

1406 cÚ¡ 
št64_t
 
šputs0_size
 = 
	`TÙ®FeSize
(
c
->
šputs_
[0]);

1407 cÚ¡ 
št64_t
 
šputs1_size
 = 
	`TÙ®FeSize
(
c
->
šputs_
[1]);

1408 cÚ¡ 
št64_t
 
ex·nded0_size
 = 
	`TÙ®FeSize
(
ex·nded0
);

1409 ià(
ex·nded0
.
	`size
(è> 
c
->
šputs_
[0].size() &&

1410 
šputs1_size
 + 
ex·nded0_size
 <

1411 
	`Ex·ndedCom·ùiÚBy‹SizeLim™
(
İtiÚs_
)) {

1412 
IÁ”ÇlKey
 
Ãw_¡¬t
, 
Ãw_lim™
;

1413 
	`G‘Rªge
(
ex·nded0
, &
Ãw_¡¬t
, &
Ãw_lim™
);

1414 
¡d
::
veùÜ
<
FeM‘aD©a
*> 
ex·nded1
;

1415 
cu¼’t_
->
	`G‘Ov”ÏµšgIÅuts
(
Ëv–
 + 1, &
Ãw_¡¬t
, &
Ãw_lim™
,

1416 &
ex·nded1
);

1417 
	`AddBound¬yIÅuts
(
icmp_
, 
cu¼’t_
->
fes_
[
Ëv–
 + 1], &
ex·nded1
);

1418 ià(
ex·nded1
.
	`size
(è=ğ
c
->
šputs_
[1].size()) {

1419 
	`Log
(
İtiÚs_
->
šfo_log
,

1421 
Ëv–
, (
c
->
šputs_
[0].
	`size
()), (c->inputs_[1].size()),

1422 (
šputs0_size
), (
šputs1_size
), (
ex·nded0
.
	`size
()),

1423 (
ex·nded1
.
	`size
()), (
ex·nded0_size
), (
šputs1_size
));

1424 
sm®Ë¡
 = 
Ãw_¡¬t
;

1425 
Ïrge¡
 = 
Ãw_lim™
;

1426 
c
->
šputs_
[0] = 
ex·nded0
;

1427 
c
->
šputs_
[1] = 
ex·nded1
;

1428 
	`G‘Rªge2
(
c
->
šputs_
[0], c->šputs_[1], &
®l_¡¬t
, &
®l_lim™
);

1435 ià(
Ëv–
 + 2 < 
cÚfig
::
kNumLev–s
) {

1436 
cu¼’t_
->
	`G‘Ov”ÏµšgIÅuts
(
Ëv–
 + 2, &
®l_¡¬t
, &
®l_lim™
,

1437 &
c
->
g¿nd·»Ás_
);

1444 
com·ù_poš‹r_
[
Ëv–
] = 
Ïrge¡
.
	`Encode
().
	`ToSŒšg
();

1445 
c
->
ed™_
.
	`S‘Com·ùPoš‹r
(
Ëv–
, 
Ïrge¡
);

1446 
	}
}

1448 
Com·ùiÚ
* 
	gV”siÚS‘
::
	$Com·ùRªge
(
Ëv–
, cÚ¡ 
IÁ”ÇlKey
* 
begš
,

1449 cÚ¡ 
IÁ”ÇlKey
* 
’d
) {

1450 
¡d
::
veùÜ
<
FeM‘aD©a
*> 
šputs
;

1451 
cu¼’t_
->
	`G‘Ov”ÏµšgIÅuts
(
Ëv–
, 
begš
, 
’d
, &
šputs
);

1452 ià(
šputs
.
	`em±y
()) {

1453  
nuÎ±r
;

1460 ià(
Ëv–
 > 0) {

1461 cÚ¡ 
ušt64_t
 
lim™
 = 
	`MaxFeSizeFÜLev–
(
İtiÚs_
, 
Ëv–
);

1462 
ušt64_t
 
tÙ®
 = 0;

1463 
size_t
 
i
 = 0; i < 
šputs
.
	`size
(); i++) {

1464 
ušt64_t
 
s
 = 
šputs
[
i
]->
fe_size
;

1465 
tÙ®
 +ğ
s
;

1466 ià(
tÙ®
 >ğ
lim™
) {

1467 
šputs
.
	`»size
(
i
 + 1);

1473 
Com·ùiÚ
* 
c
 = 
Ãw
 
	`Com·ùiÚ
(
İtiÚs_
, 
Ëv–
);

1474 
c
->
šput_v”siÚ_
 = 
cu¼’t_
;

1475 
c
->
šput_v”siÚ_
->
	`Ref
();

1476 
c
->
šputs_
[0] = 
šputs
;

1477 
	`S‘upOth”IÅuts
(
c
);

1478  
c
;

1479 
	}
}

1481 
	gCom·ùiÚ
::
	$Com·ùiÚ
(cÚ¡ 
O±iÚs
* 
İtiÚs
, 
Ëv–
)

1482 : 
	`Ëv–_
(
Ëv–
),

1483 
	`max_ouut_fe_size_
(
	`MaxFeSizeFÜLev–
(
İtiÚs
, 
Ëv–
)),

1484 
	`šput_v”siÚ_
(
nuÎ±r
),

1485 
	`g¿nd·»Á_šdex_
(0),

1486 
	`£’_key_
(
çl£
),

1487 
	$ov”Ïµed_by‹s_
(0) {

1488 
i
 = 0; i < 
cÚfig
::
kNumLev–s
; i++) {

1489 
Ëv–_±rs_
[
i
] = 0;

1491 
	}
}

1493 
	gCom·ùiÚ
::~
	$Com·ùiÚ
() {

1494 ià(
šput_v”siÚ_
 !ğ
nuÎ±r
) {

1495 
šput_v”siÚ_
->
	`UÄef
();

1497 
	}
}

1499 
boŞ
 
	gCom·ùiÚ
::
	$IsTrivŸlMove
() const {

1500 cÚ¡ 
V”siÚS‘
* 
v£t
 = 
šput_v”siÚ_
->
v£t_
;

1504  (
	`num_šput_fes
(0) == 1 &&‚um_input_files(1) == 0 &&

1505 
	`TÙ®FeSize
(
g¿nd·»Ás_
) <=

1506 
	`MaxG¿ndP¬’tOv”ÏpBy‹s
(
v£t
->
İtiÚs_
));

1507 
	}
}

1509 
	gCom·ùiÚ
::
	$AddIÅutD–‘iÚs
(
V”siÚEd™
* 
ed™
) {

1510 
which
 = 0; which < 2; which++) {

1511 
size_t
 
i
 = 0; i < 
šputs_
[
which
].
	`size
(); i++) {

1512 
ed™
->
	`RemoveFe
(
Ëv–_
 + 
which
, 
šputs_
[which][
i
]->
numb”
);

1515 
	}
}

1517 
boŞ
 
	gCom·ùiÚ
::
	$IsBa£Lev–FÜKey
(cÚ¡ 
Sliû
& 
u£r_key
) {

1519 cÚ¡ 
Com·¿tÜ
* 
u£r_cmp
 = 
šput_v”siÚ_
->
v£t_
->
icmp_
.
	`u£r_com·¿tÜ
();

1520 
lvl
 = 
Ëv–_
 + 2;†vÈ< 
cÚfig
::
kNumLev–s
;†vl++) {

1521 cÚ¡ 
¡d
::
veùÜ
<
FeM‘aD©a
*>& 
fes
 = 
šput_v”siÚ_
->
fes_
[
lvl
];

1522 
Ëv–_±rs_
[
lvl
] < 
fes
.
	`size
()) {

1523 
FeM‘aD©a
* 
f
 = 
fes
[
Ëv–_±rs_
[
lvl
]];

1524 ià(
u£r_cmp
->
	`Com·»
(
u£r_key
, 
f
->
Ïrge¡
.
	`u£r_key
()) <= 0) {

1526 ià(
u£r_cmp
->
	`Com·»
(
u£r_key
, 
f
->
sm®Ë¡
.
	`u£r_key
()) >= 0) {

1528  
çl£
;

1532 
Ëv–_±rs_
[
lvl
]++;

1535  
Œue
;

1536 
	}
}

1538 
boŞ
 
	gCom·ùiÚ
::
	$ShouldStİBefÜe
(cÚ¡ 
Sliû
& 
š‹º®_key
) {

1539 cÚ¡ 
V”siÚS‘
* 
v£t
 = 
šput_v”siÚ_
->
v£t_
;

1541 cÚ¡ 
IÁ”ÇlKeyCom·¿tÜ
* 
icmp
 = &
v£t
->
icmp_
;

1542 
g¿nd·»Á_šdex_
 < 
g¿nd·»Ás_
.
	`size
() &&

1543 
icmp
->
	`Com·»
(
š‹º®_key
,

1544 
g¿nd·»Ás_
[
g¿nd·»Á_šdex_
]->
Ïrge¡
.
	`Encode
()) >

1546 ià(
£’_key_
) {

1547 
ov”Ïµed_by‹s_
 +ğ
g¿nd·»Ás_
[
g¿nd·»Á_šdex_
]->
fe_size
;

1549 
g¿nd·»Á_šdex_
++;

1551 
£’_key_
 = 
Œue
;

1553 ià(
ov”Ïµed_by‹s_
 > 
	`MaxG¿ndP¬’tOv”ÏpBy‹s
(
v£t
->
İtiÚs_
)) {

1555 
ov”Ïµed_by‹s_
 = 0;

1556  
Œue
;

1558  
çl£
;

1560 
	}
}

1562 
	gCom·ùiÚ
::
	$R–—£IÅuts
() {

1563 ià(
šput_v”siÚ_
 !ğ
nuÎ±r
) {

1564 
šput_v”siÚ_
->
	`UÄef
();

1565 
šput_v”siÚ_
 = 
nuÎ±r
;

1567 
	}
}

	@db/version_set.h

15 #iâdeà
STORAGE_LEVELDB_DB_VERSION_SET_H_


16 
	#STORAGE_LEVELDB_DB_VERSION_SET_H_


	)

18 
	~<m­
>

19 
	~<£t
>

20 
	~<veùÜ
>

22 
	~"db/dbfÜm©.h
"

23 
	~"db/v”siÚ_ed™.h
"

24 
	~"pÜt/pÜt.h
"

25 
	~"pÜt/th»ad_ªnÙ©iÚs.h
"

27 
Çme¥aû
 
	gËv–db
 {

29 
Çme¥aû
 
	glog
 {

30 
şass
 
	gWr™”
;

33 
şass
 
	gCom·ùiÚ
;

34 
şass
 
	gI‹¿tÜ
;

35 
şass
 
	gMemTabË
;

36 
şass
 
	gTabËBud”
;

37 
şass
 
	gTabËCache
;

38 
şass
 
	gV”siÚ
;

39 
şass
 
	gV”siÚS‘
;

40 
şass
 
	gWr™abËFe
;

45 
FšdFe
(cÚ¡ 
IÁ”ÇlKeyCom·¿tÜ
& 
icmp
,

46 cÚ¡ 
¡d
::
veùÜ
<
FeM‘aD©a
*>& 
fes
, cÚ¡ 
Sliû
& 
key
);

54 
boŞ
 
SomeFeOv”ÏpsRªge
(cÚ¡ 
IÁ”ÇlKeyCom·¿tÜ
& 
icmp
,

55 
boŞ
 
disjošt_sÜ‹d_fes
,

56 cÚ¡ 
¡d
::
veùÜ
<
FeM‘aD©a
*>& 
fes
,

57 cÚ¡ 
Sliû
* 
sm®Ë¡_u£r_key
,

58 cÚ¡ 
Sliû
* 
Ïrge¡_u£r_key
);

60 şas 
	cV”siÚ
 {

61 
	gpublic
:

62 
	sG‘Sts
 {

63 
FeM‘aD©a
* 
£ek_fe
;

64 
	g£ek_fe_Ëv–
;

70 
AddI‹¿tÜs
(cÚ¡ 
R—dO±iÚs
&, 
¡d
::
veùÜ
<
I‹¿tÜ
*>* 
™”s
);

75 
Stus
 
G‘
(cÚ¡ 
R—dO±iÚs
&, cÚ¡ 
LookupKey
& 
key
, 
¡d
::
¡ršg
* 
v®
,

76 
G‘Sts
* 
¡©s
);

81 
boŞ
 
Upd©eSts
(cÚ¡ 
G‘Sts
& 
¡©s
);

87 
boŞ
 
RecÜdR—dSam¶e
(
Sliû
 
key
);

91 
Ref
();

92 
UÄef
();

94 
G‘Ov”ÏµšgIÅuts
(

95 
Ëv–
,

96 cÚ¡ 
IÁ”ÇlKey
* 
begš
,

97 cÚ¡ 
IÁ”ÇlKey
* 
’d
,

98 
¡d
::
veùÜ
<
FeM‘aD©a
*>* 
šputs
);

104 
boŞ
 
Ov”ÏpInLev–
(
Ëv–
, cÚ¡ 
Sliû
* 
sm®Ë¡_u£r_key
,

105 cÚ¡ 
Sliû
* 
Ïrge¡_u£r_key
);

109 
PickLev–FÜMemTabËOuut
(cÚ¡ 
Sliû
& 
sm®Ë¡_u£r_key
,

110 cÚ¡ 
Sliû
& 
Ïrge¡_u£r_key
);

112 
NumFes
(
Ëv–
ècÚ¡ {  
	gfes_
[Ëv–].
size
(); }

115 
	g¡d
::
¡ršg
 
DebugSŒšg
() const;

117 
	g´iv©e
:

118 
ä›nd
 
şass
 
Com·ùiÚ
;

119 
ä›nd
 
şass
 
	gV”siÚS‘
;

121 
şass
 
	gLev–FeNumI‹¿tÜ
;

123 
ex¶ic™
 
V”siÚ
(
V”siÚS‘
* 
v£t
)

124 : 
v£t_
(
v£t
),

125 
Ãxt_
(
this
),

126 
´ev_
(
this
),

127 
»fs_
(0),

128 
fe_to_com·ù_
(
nuÎ±r
),

129 
fe_to_com·ù_Ëv–_
(-1),

130 
com·ùiÚ_scÜe_
(-1),

131 
com·ùiÚ_Ëv–_
(-1) {}

133 
V”siÚ
(cÚ¡ V”siÚ&èğ
d–‘e
;

134 
	gV”siÚ
& 
	gİ”©Ü
=(cÚ¡ 
V”siÚ
&èğ
d–‘e
;

136 ~
V”siÚ
();

138 
I‹¿tÜ
* 
NewCÚÿ‹ÇtšgI‹¿tÜ
(cÚ¡ 
R—dO±iÚs
&, 
Ëv–
) const;

145 
FÜEachOv”Ïµšg
(
Sliû
 
u£r_key
, Sliû 
š‹º®_key
, * 
¬g
,

146 
boŞ
 (*
func
)(*, , 
FeM‘aD©a
*));

148 
V”siÚS‘
* 
	gv£t_
;

149 
V”siÚ
* 
	gÃxt_
;

150 
V”siÚ
* 
	g´ev_
;

151 
	g»fs_
;

154 
	g¡d
::
veùÜ
<
FeM‘aD©a
*> 
fes_
[
cÚfig
::
kNumLev–s
];

157 
FeM‘aD©a
* 
	gfe_to_com·ù_
;

158 
	gfe_to_com·ù_Ëv–_
;

163 
	gcom·ùiÚ_scÜe_
;

164 
	gcom·ùiÚ_Ëv–_
;

167 şas 
	cV”siÚS‘
 {

168 
	gpublic
:

169 
V”siÚS‘
(cÚ¡ 
¡d
::
¡ršg
& 
dbÇme
, cÚ¡ 
O±iÚs
* 
İtiÚs
,

170 
TabËCache
* 
bË_ÿche
, cÚ¡ 
IÁ”ÇlKeyCom·¿tÜ
*);

171 
V”siÚS‘
(cÚ¡ V”siÚS‘&èğ
d–‘e
;

172 
	gV”siÚS‘
& 
	gİ”©Ü
=(cÚ¡ 
V”siÚS‘
&èğ
d–‘e
;

174 ~
V”siÚS‘
();

181 
Stus
 
LogAndAµly
(
V”siÚEd™
* 
ed™
, 
pÜt
::
Mu‹x
* 
mu
)

182 
EXCLUSIVE_LOCKS_REQUIRED
(
mu
);

185 
Stus
 
Recov”
(
boŞ
* 
§ve_mªiã¡
);

188 
V”siÚ
* 
cu¼’t
(ècÚ¡ {  
	gcu¼’t_
; }

191 
ušt64_t
 
Mªiã¡FeNumb”
(ècÚ¡ {  
	gmªiã¡_fe_numb”_
; }

194 
ušt64_t
 
NewFeNumb”
(è{  
	gÃxt_fe_numb”_
++; }

199 
Reu£FeNumb”
(
ušt64_t
 
fe_numb”
) {

200 ià(
	gÃxt_fe_numb”_
 =ğ
fe_numb”
 + 1) {

201 
Ãxt_fe_numb”_
 = 
fe_numb”
;

206 
NumLev–Fes
(
Ëv–
) const;

209 
št64_t
 
NumLev–By‹s
(
Ëv–
) const;

212 
ušt64_t
 
La¡Sequ’û
(ècÚ¡ {  
	gÏ¡_£qu’û_
; }

215 
S‘La¡Sequ’û
(
ušt64_t
 
s
) {

216 
as£¹
(
s
 >ğ
Ï¡_£qu’û_
);

217 
	gÏ¡_£qu’û_
 = 
s
;

221 
M¬kFeNumb”U£d
(
ušt64_t
 
numb”
);

224 
ušt64_t
 
LogNumb”
(ècÚ¡ {  
	glog_numb”_
; }

228 
ušt64_t
 
P»vLogNumb”
(ècÚ¡ {  
	g´ev_log_numb”_
; }

234 
Com·ùiÚ
* 
PickCom·ùiÚ
();

240 
Com·ùiÚ
* 
Com·ùRªge
(
Ëv–
, cÚ¡ 
IÁ”ÇlKey
* 
begš
,

241 cÚ¡ 
IÁ”ÇlKey
* 
’d
);

245 
št64_t
 
MaxNextLev–Ov”ÏµšgBy‹s
();

249 
I‹¿tÜ
* 
MakeIÅutI‹¿tÜ
(
Com·ùiÚ
* 
c
);

252 
boŞ
 
N“dsCom·ùiÚ
() const {

253 
V”siÚ
* 
	gv
 = 
cu¼’t_
;

254  (
	gv
->
	gcom·ùiÚ_scÜe_
 >ğ1è|| (
v
->
fe_to_com·ù_
 !ğ
nuÎ±r
);

259 
AddLiveFes
(
¡d
::
£t
<
ušt64_t
>* 
live
);

263 
ušt64_t
 
Aµroxim©eOff£tOf
(
V”siÚ
* 
v
, cÚ¡ 
IÁ”ÇlKey
& 
key
);

267 
	sLev–Summ¬yStÜage
 {

268 
	gbufãr
[100];

270 cÚ¡ * 
Lev–Summ¬y
(
Lev–Summ¬yStÜage
* 
sü©ch
) const;

272 
	g´iv©e
:

273 
şass
 
Bud”
;

275 
ä›nd
 
şass
 
	gCom·ùiÚ
;

276 
ä›nd
 
şass
 
	gV”siÚ
;

278 
boŞ
 
Reu£Mªiã¡
(cÚ¡ 
¡d
::
¡ršg
& 
dsúame
, cÚ¡ std::¡ršg& 
dscba£
);

280 
Fš®ize
(
V”siÚ
* 
v
);

282 
G‘Rªge
(cÚ¡ 
¡d
::
veùÜ
<
FeM‘aD©a
*>& 
šputs
, 
IÁ”ÇlKey
* 
sm®Ë¡
,

283 
IÁ”ÇlKey
* 
Ïrge¡
);

285 
G‘Rªge2
(cÚ¡ 
¡d
::
veùÜ
<
FeM‘aD©a
*>& 
šputs1
,

286 cÚ¡ 
¡d
::
veùÜ
<
FeM‘aD©a
*>& 
šputs2
,

287 
IÁ”ÇlKey
* 
sm®Ë¡
, IÁ”ÇlKey* 
Ïrge¡
);

289 
S‘upOth”IÅuts
(
Com·ùiÚ
* 
c
);

292 
Stus
 
Wr™eSÇpshÙ
(
log
::
Wr™”
*†og);

294 
Aµ’dV”siÚ
(
V”siÚ
* 
v
);

296 
Env
* cÚ¡ 
	g’v_
;

297 cÚ¡ 
	g¡d
::
¡ršg
 
dbÇme_
;

298 cÚ¡ 
O±iÚs
* cÚ¡ 
	gİtiÚs_
;

299 
TabËCache
* cÚ¡ 
	gbË_ÿche_
;

300 cÚ¡ 
IÁ”ÇlKeyCom·¿tÜ
 
	gicmp_
;

301 
ušt64_t
 
	gÃxt_fe_numb”_
;

302 
ušt64_t
 
	gmªiã¡_fe_numb”_
;

303 
ušt64_t
 
	gÏ¡_£qu’û_
;

304 
ušt64_t
 
	glog_numb”_
;

305 
ušt64_t
 
	g´ev_log_numb”_
;

308 
Wr™abËFe
* 
	gdesütÜ_fe_
;

309 
	glog
::
Wr™”
* 
desütÜ_log_
;

310 
V”siÚ
 
	gdummy_v”siÚs_
;

311 
V”siÚ
* 
	gcu¼’t_
;

315 
	g¡d
::
¡ršg
 
com·ù_poš‹r_
[
cÚfig
::
kNumLev–s
];

319 şas 
	cCom·ùiÚ
 {

320 
	gpublic
:

321 ~
Com·ùiÚ
();

325 
Ëv–
(ècÚ¡ {  
	gËv–_
; }

329 
V”siÚEd™
* 
ed™
(è{  &
	ged™_
; }

332 
num_šput_fes
(
which
ècÚ¡ {  
	gšputs_
[which].
size
(); }

335 
FeM‘aD©a
* 
šput
(
which
, 
i
ècÚ¡ {  
	gšputs_
[which][i]; }

338 
ušt64_t
 
MaxOuutFeSize
(ècÚ¡ {  
	gmax_ouut_fe_size_
; }

342 
boŞ
 
IsTrivŸlMove
() const;

345 
AddIÅutD–‘iÚs
(
V”siÚEd™
* 
ed™
);

350 
boŞ
 
IsBa£Lev–FÜKey
(cÚ¡ 
Sliû
& 
u£r_key
);

354 
boŞ
 
ShouldStİBefÜe
(cÚ¡ 
Sliû
& 
š‹º®_key
);

358 
R–—£IÅuts
();

360 
	g´iv©e
:

361 
ä›nd
 
şass
 
V”siÚ
;

362 
ä›nd
 
şass
 
	gV”siÚS‘
;

364 
Com·ùiÚ
(cÚ¡ 
O±iÚs
* 
İtiÚs
, 
Ëv–
);

366 
	gËv–_
;

367 
ušt64_t
 
	gmax_ouut_fe_size_
;

368 
V”siÚ
* 
	gšput_v”siÚ_
;

369 
V”siÚEd™
 
	ged™_
;

372 
	g¡d
::
veùÜ
<
FeM‘aD©a
*> 
šputs_
[2];

376 
	g¡d
::
veùÜ
<
FeM‘aD©a
*> 
g¿nd·»Ás_
;

377 
size_t
 
	gg¿nd·»Á_šdex_
;

378 
boŞ
 
	g£’_key_
;

379 
št64_t
 
	gov”Ïµed_by‹s_
;

388 
size_t
 
	gËv–_±rs_
[
cÚfig
::
kNumLev–s
];

	@db/version_set_test.cc

5 
	~"db/v”siÚ_£t.h
"

7 
	~"g‹¡/g‹¡.h
"

8 
	~"ut/loggšg.h
"

9 
	~"ut/‹¡ut.h
"

11 
Çme¥aû
 
	gËv–db
 {

13 şas 
	cFšdFeTe¡
 : 
public
 
‹¡šg
::
Te¡
 {

14 
public
:

15 
FšdFeTe¡
(è: 
disjošt_sÜ‹d_fes_
(
Œue
) {}

17 ~
FšdFeTe¡
() {

18 
i
 = 0; 
	gi
 < 
	gfes_
.
size
(); i++) {

19 
d–‘e
 
	gfes_
[
i
];

23 
Add
(cÚ¡ * 
sm®Ë¡
, cÚ¡ * 
Ïrge¡
,

24 
Sequ’ûNumb”
 
sm®Ë¡_£q
 = 100,

25 
Sequ’ûNumb”
 
Ïrge¡_£q
 = 100) {

26 
FeM‘aD©a
* 
f
 = 
Ãw
 FileMetaData;

27 
	gf
->
	gnumb”
 = 
fes_
.
size
() + 1;

28 
	gf
->
	gsm®Ë¡
 = 
IÁ”ÇlKey
(
sm®Ë¡
, 
sm®Ë¡_£q
, 
kTy³V®ue
);

29 
	gf
->
	gÏrge¡
 = 
IÁ”ÇlKey
(
Ïrge¡
, 
Ïrge¡_£q
, 
kTy³V®ue
);

30 
	gfes_
.
push_back
(
f
);

33 
Fšd
(cÚ¡ * 
key
) {

34 
IÁ”ÇlKey
 
rg‘
(
key
, 100, 
kTy³V®ue
);

35 
IÁ”ÇlKeyCom·¿tÜ
 
cmp
(
By‹wi£Com·¿tÜ
());

36  
FšdFe
(
cmp
, 
fes_
, 
rg‘
.
Encode
());

39 
boŞ
 
Ov”Ïps
(cÚ¡ * 
sm®Ë¡
, cÚ¡ * 
Ïrge¡
) {

40 
IÁ”ÇlKeyCom·¿tÜ
 
cmp
(
By‹wi£Com·¿tÜ
());

41 
Sliû
 
s
(
sm®Ë¡
 !ğ
nuÎ±r
 ? smallest : "");

42 
Sliû
 
l
(
Ïrge¡
 !ğ
nuÎ±r
 ?†argest : "");

43  
SomeFeOv”ÏpsRªge
(
cmp
, 
disjošt_sÜ‹d_fes_
, 
fes_
,

44 (
sm®Ë¡
 !ğ
nuÎ±r
 ? &
s
 :‚ullptr),

45 (
Ïrge¡
 !ğ
nuÎ±r
 ? &
l
 :‚ullptr));

48 
boŞ
 
	gdisjošt_sÜ‹d_fes_
;

50 
	g´iv©e
:

51 
¡d
::
veùÜ
<
FeM‘aD©a
*> 
fes_
;

54 
	$TEST_F
(
FšdFeTe¡
, 
Em±y
) {

55 
	`ASSERT_EQ
(0, 
	`Fšd
("foo"));

56 
	`ASSERT_TRUE
(!
	`Ov”Ïps
("a", "z"));

57 
	`ASSERT_TRUE
(!
	`Ov”Ïps
(
nuÎ±r
, "z"));

58 
	`ASSERT_TRUE
(!
	`Ov”Ïps
("a", 
nuÎ±r
));

59 
	`ASSERT_TRUE
(!
	`Ov”Ïps
(
nuÎ±r
,‚ullptr));

60 
	}
}

62 
	$TEST_F
(
FšdFeTe¡
, 
SšgË
) {

63 
	`Add
("p", "q");

64 
	`ASSERT_EQ
(0, 
	`Fšd
("a"));

65 
	`ASSERT_EQ
(0, 
	`Fšd
("p"));

66 
	`ASSERT_EQ
(0, 
	`Fšd
("p1"));

67 
	`ASSERT_EQ
(0, 
	`Fšd
("q"));

68 
	`ASSERT_EQ
(1, 
	`Fšd
("q1"));

69 
	`ASSERT_EQ
(1, 
	`Fšd
("z"));

71 
	`ASSERT_TRUE
(!
	`Ov”Ïps
("a", "b"));

72 
	`ASSERT_TRUE
(!
	`Ov”Ïps
("z1", "z2"));

73 
	`ASSERT_TRUE
(
	`Ov”Ïps
("a", "p"));

74 
	`ASSERT_TRUE
(
	`Ov”Ïps
("a", "q"));

75 
	`ASSERT_TRUE
(
	`Ov”Ïps
("a", "z"));

76 
	`ASSERT_TRUE
(
	`Ov”Ïps
("p", "p1"));

77 
	`ASSERT_TRUE
(
	`Ov”Ïps
("p", "q"));

78 
	`ASSERT_TRUE
(
	`Ov”Ïps
("p", "z"));

79 
	`ASSERT_TRUE
(
	`Ov”Ïps
("p1", "p2"));

80 
	`ASSERT_TRUE
(
	`Ov”Ïps
("p1", "z"));

81 
	`ASSERT_TRUE
(
	`Ov”Ïps
("q", "q"));

82 
	`ASSERT_TRUE
(
	`Ov”Ïps
("q", "q1"));

84 
	`ASSERT_TRUE
(!
	`Ov”Ïps
(
nuÎ±r
, "j"));

85 
	`ASSERT_TRUE
(!
	`Ov”Ïps
("r", 
nuÎ±r
));

86 
	`ASSERT_TRUE
(
	`Ov”Ïps
(
nuÎ±r
, "p"));

87 
	`ASSERT_TRUE
(
	`Ov”Ïps
(
nuÎ±r
, "p1"));

88 
	`ASSERT_TRUE
(
	`Ov”Ïps
("q", 
nuÎ±r
));

89 
	`ASSERT_TRUE
(
	`Ov”Ïps
(
nuÎ±r
,‚ullptr));

90 
	}
}

92 
	$TEST_F
(
FšdFeTe¡
, 
MuÉË
) {

93 
	`Add
("150", "200");

94 
	`Add
("200", "250");

95 
	`Add
("300", "350");

96 
	`Add
("400", "450");

97 
	`ASSERT_EQ
(0, 
	`Fšd
("100"));

98 
	`ASSERT_EQ
(0, 
	`Fšd
("150"));

99 
	`ASSERT_EQ
(0, 
	`Fšd
("151"));

100 
	`ASSERT_EQ
(0, 
	`Fšd
("199"));

101 
	`ASSERT_EQ
(0, 
	`Fšd
("200"));

102 
	`ASSERT_EQ
(1, 
	`Fšd
("201"));

103 
	`ASSERT_EQ
(1, 
	`Fšd
("249"));

104 
	`ASSERT_EQ
(1, 
	`Fšd
("250"));

105 
	`ASSERT_EQ
(2, 
	`Fšd
("251"));

106 
	`ASSERT_EQ
(2, 
	`Fšd
("299"));

107 
	`ASSERT_EQ
(2, 
	`Fšd
("300"));

108 
	`ASSERT_EQ
(2, 
	`Fšd
("349"));

109 
	`ASSERT_EQ
(2, 
	`Fšd
("350"));

110 
	`ASSERT_EQ
(3, 
	`Fšd
("351"));

111 
	`ASSERT_EQ
(3, 
	`Fšd
("400"));

112 
	`ASSERT_EQ
(3, 
	`Fšd
("450"));

113 
	`ASSERT_EQ
(4, 
	`Fšd
("451"));

115 
	`ASSERT_TRUE
(!
	`Ov”Ïps
("100", "149"));

116 
	`ASSERT_TRUE
(!
	`Ov”Ïps
("251", "299"));

117 
	`ASSERT_TRUE
(!
	`Ov”Ïps
("451", "500"));

118 
	`ASSERT_TRUE
(!
	`Ov”Ïps
("351", "399"));

120 
	`ASSERT_TRUE
(
	`Ov”Ïps
("100", "150"));

121 
	`ASSERT_TRUE
(
	`Ov”Ïps
("100", "200"));

122 
	`ASSERT_TRUE
(
	`Ov”Ïps
("100", "300"));

123 
	`ASSERT_TRUE
(
	`Ov”Ïps
("100", "400"));

124 
	`ASSERT_TRUE
(
	`Ov”Ïps
("100", "500"));

125 
	`ASSERT_TRUE
(
	`Ov”Ïps
("375", "400"));

126 
	`ASSERT_TRUE
(
	`Ov”Ïps
("450", "450"));

127 
	`ASSERT_TRUE
(
	`Ov”Ïps
("450", "500"));

128 
	}
}

130 
	$TEST_F
(
FšdFeTe¡
, 
MuÉËNuÎBound¬›s
) {

131 
	`Add
("150", "200");

132 
	`Add
("200", "250");

133 
	`Add
("300", "350");

134 
	`Add
("400", "450");

135 
	`ASSERT_TRUE
(!
	`Ov”Ïps
(
nuÎ±r
, "149"));

136 
	`ASSERT_TRUE
(!
	`Ov”Ïps
("451", 
nuÎ±r
));

137 
	`ASSERT_TRUE
(
	`Ov”Ïps
(
nuÎ±r
,‚ullptr));

138 
	`ASSERT_TRUE
(
	`Ov”Ïps
(
nuÎ±r
, "150"));

139 
	`ASSERT_TRUE
(
	`Ov”Ïps
(
nuÎ±r
, "199"));

140 
	`ASSERT_TRUE
(
	`Ov”Ïps
(
nuÎ±r
, "200"));

141 
	`ASSERT_TRUE
(
	`Ov”Ïps
(
nuÎ±r
, "201"));

142 
	`ASSERT_TRUE
(
	`Ov”Ïps
(
nuÎ±r
, "400"));

143 
	`ASSERT_TRUE
(
	`Ov”Ïps
(
nuÎ±r
, "800"));

144 
	`ASSERT_TRUE
(
	`Ov”Ïps
("100", 
nuÎ±r
));

145 
	`ASSERT_TRUE
(
	`Ov”Ïps
("200", 
nuÎ±r
));

146 
	`ASSERT_TRUE
(
	`Ov”Ïps
("449", 
nuÎ±r
));

147 
	`ASSERT_TRUE
(
	`Ov”Ïps
("450", 
nuÎ±r
));

148 
	}
}

150 
	$TEST_F
(
FšdFeTe¡
, 
Ov”ÏpSequ’ûChecks
) {

151 
	`Add
("200", "200", 5000, 3000);

152 
	`ASSERT_TRUE
(!
	`Ov”Ïps
("199", "199"));

153 
	`ASSERT_TRUE
(!
	`Ov”Ïps
("201", "300"));

154 
	`ASSERT_TRUE
(
	`Ov”Ïps
("200", "200"));

155 
	`ASSERT_TRUE
(
	`Ov”Ïps
("190", "200"));

156 
	`ASSERT_TRUE
(
	`Ov”Ïps
("200", "210"));

157 
	}
}

159 
	$TEST_F
(
FšdFeTe¡
, 
Ov”ÏµšgFes
) {

160 
	`Add
("150", "600");

161 
	`Add
("400", "500");

162 
disjošt_sÜ‹d_fes_
 = 
çl£
;

163 
	`ASSERT_TRUE
(!
	`Ov”Ïps
("100", "149"));

164 
	`ASSERT_TRUE
(!
	`Ov”Ïps
("601", "700"));

165 
	`ASSERT_TRUE
(
	`Ov”Ïps
("100", "150"));

166 
	`ASSERT_TRUE
(
	`Ov”Ïps
("100", "200"));

167 
	`ASSERT_TRUE
(
	`Ov”Ïps
("100", "300"));

168 
	`ASSERT_TRUE
(
	`Ov”Ïps
("100", "400"));

169 
	`ASSERT_TRUE
(
	`Ov”Ïps
("100", "500"));

170 
	`ASSERT_TRUE
(
	`Ov”Ïps
("375", "400"));

171 
	`ASSERT_TRUE
(
	`Ov”Ïps
("450", "450"));

172 
	`ASSERT_TRUE
(
	`Ov”Ïps
("450", "500"));

173 
	`ASSERT_TRUE
(
	`Ov”Ïps
("450", "700"));

174 
	`ASSERT_TRUE
(
	`Ov”Ïps
("600", "700"));

175 
	}
}

177 
AddBound¬yIÅuts
(cÚ¡ 
IÁ”ÇlKeyCom·¿tÜ
& 
icmp
,

178 cÚ¡ 
¡d
::
veùÜ
<
FeM‘aD©a
*>& 
Ëv–_fes
,

179 
¡d
::
veùÜ
<
FeM‘aD©a
*>* 
com·ùiÚ_fes
);

181 şas 
	cAddBound¬yIÅutsTe¡
 : 
public
 
‹¡šg
::
Te¡
 {

182 
public
:

183 
¡d
::
veùÜ
<
FeM‘aD©a
*> 
Ëv–_fes_
;

184 
	g¡d
::
veùÜ
<
FeM‘aD©a
*> 
com·ùiÚ_fes_
;

185 
	g¡d
::
veùÜ
<
FeM‘aD©a
*> 
®l_fes_
;

186 
IÁ”ÇlKeyCom·¿tÜ
 
	gicmp_
;

188 
AddBound¬yIÅutsTe¡
(è: 
icmp_
(
By‹wi£Com·¿tÜ
()) {}

190 ~
AddBound¬yIÅutsTe¡
() {

191 
size_t
 
i
 = 0; 
	gi
 < 
	g®l_fes_
.
size
(); ++i) {

192 
d–‘e
 
	g®l_fes_
[
i
];

194 
	g®l_fes_
.
ş—r
();

197 
FeM‘aD©a
* 
C»©eFeM‘aD©a
(
ušt64_t
 
numb”
, 
IÁ”ÇlKey
 
sm®Ë¡
,

198 
IÁ”ÇlKey
 
Ïrge¡
) {

199 
FeM‘aD©a
* 
	gf
 = 
Ãw
 FileMetaData();

200 
	gf
->
	gnumb”
 = 
numb”
;

201 
	gf
->
	gsm®Ë¡
 = 
sm®Ë¡
;

202 
	gf
->
	gÏrge¡
 = 
Ïrge¡
;

203 
	g®l_fes_
.
push_back
(
f
);

204  
	gf
;

208 
	$TEST_F
(
AddBound¬yIÅutsTe¡
, 
Te¡Em±yFeS‘s
) {

209 
	`AddBound¬yIÅuts
(
icmp_
, 
Ëv–_fes_
, &
com·ùiÚ_fes_
);

210 
	`ASSERT_TRUE
(
com·ùiÚ_fes_
.
	`em±y
());

211 
	`ASSERT_TRUE
(
Ëv–_fes_
.
	`em±y
());

212 
	}
}

214 
	$TEST_F
(
AddBound¬yIÅutsTe¡
, 
Te¡Em±yLev–Fes
) {

215 
FeM‘aD©a
* 
f1
 =

216 
	`C»©eFeM‘aD©a
(1, 
	`IÁ”ÇlKey
("100", 2, 
kTy³V®ue
),

217 
	`IÁ”ÇlKey
(IÁ”ÇlKey("100", 1, 
kTy³V®ue
)));

218 
com·ùiÚ_fes_
.
	`push_back
(
f1
);

220 
	`AddBound¬yIÅuts
(
icmp_
, 
Ëv–_fes_
, &
com·ùiÚ_fes_
);

221 
	`ASSERT_EQ
(1, 
com·ùiÚ_fes_
.
	`size
());

222 
	`ASSERT_EQ
(
f1
, 
com·ùiÚ_fes_
[0]);

223 
	`ASSERT_TRUE
(
Ëv–_fes_
.
	`em±y
());

224 
	}
}

226 
	$TEST_F
(
AddBound¬yIÅutsTe¡
, 
Te¡Em±yCom·ùiÚFes
) {

227 
FeM‘aD©a
* 
f1
 =

228 
	`C»©eFeM‘aD©a
(1, 
	`IÁ”ÇlKey
("100", 2, 
kTy³V®ue
),

229 
	`IÁ”ÇlKey
(IÁ”ÇlKey("100", 1, 
kTy³V®ue
)));

230 
Ëv–_fes_
.
	`push_back
(
f1
);

232 
	`AddBound¬yIÅuts
(
icmp_
, 
Ëv–_fes_
, &
com·ùiÚ_fes_
);

233 
	`ASSERT_TRUE
(
com·ùiÚ_fes_
.
	`em±y
());

234 
	`ASSERT_EQ
(1, 
Ëv–_fes_
.
	`size
());

235 
	`ASSERT_EQ
(
f1
, 
Ëv–_fes_
[0]);

236 
	}
}

238 
	$TEST_F
(
AddBound¬yIÅutsTe¡
, 
Te¡NoBound¬yFes
) {

239 
FeM‘aD©a
* 
f1
 =

240 
	`C»©eFeM‘aD©a
(1, 
	`IÁ”ÇlKey
("100", 2, 
kTy³V®ue
),

241 
	`IÁ”ÇlKey
(IÁ”ÇlKey("100", 1, 
kTy³V®ue
)));

242 
FeM‘aD©a
* 
f2
 =

243 
	`C»©eFeM‘aD©a
(1, 
	`IÁ”ÇlKey
("200", 2, 
kTy³V®ue
),

244 
	`IÁ”ÇlKey
(IÁ”ÇlKey("200", 1, 
kTy³V®ue
)));

245 
FeM‘aD©a
* 
f3
 =

246 
	`C»©eFeM‘aD©a
(1, 
	`IÁ”ÇlKey
("300", 2, 
kTy³V®ue
),

247 
	`IÁ”ÇlKey
(IÁ”ÇlKey("300", 1, 
kTy³V®ue
)));

249 
Ëv–_fes_
.
	`push_back
(
f3
);

250 
Ëv–_fes_
.
	`push_back
(
f2
);

251 
Ëv–_fes_
.
	`push_back
(
f1
);

252 
com·ùiÚ_fes_
.
	`push_back
(
f2
);

253 
com·ùiÚ_fes_
.
	`push_back
(
f3
);

255 
	`AddBound¬yIÅuts
(
icmp_
, 
Ëv–_fes_
, &
com·ùiÚ_fes_
);

256 
	`ASSERT_EQ
(2, 
com·ùiÚ_fes_
.
	`size
());

257 
	}
}

259 
	$TEST_F
(
AddBound¬yIÅutsTe¡
, 
Te¡OÃBound¬yFes
) {

260 
FeM‘aD©a
* 
f1
 =

261 
	`C»©eFeM‘aD©a
(1, 
	`IÁ”ÇlKey
("100", 3, 
kTy³V®ue
),

262 
	`IÁ”ÇlKey
(IÁ”ÇlKey("100", 2, 
kTy³V®ue
)));

263 
FeM‘aD©a
* 
f2
 =

264 
	`C»©eFeM‘aD©a
(1, 
	`IÁ”ÇlKey
("100", 1, 
kTy³V®ue
),

265 
	`IÁ”ÇlKey
(IÁ”ÇlKey("200", 3, 
kTy³V®ue
)));

266 
FeM‘aD©a
* 
f3
 =

267 
	`C»©eFeM‘aD©a
(1, 
	`IÁ”ÇlKey
("300", 2, 
kTy³V®ue
),

268 
	`IÁ”ÇlKey
(IÁ”ÇlKey("300", 1, 
kTy³V®ue
)));

270 
Ëv–_fes_
.
	`push_back
(
f3
);

271 
Ëv–_fes_
.
	`push_back
(
f2
);

272 
Ëv–_fes_
.
	`push_back
(
f1
);

273 
com·ùiÚ_fes_
.
	`push_back
(
f1
);

275 
	`AddBound¬yIÅuts
(
icmp_
, 
Ëv–_fes_
, &
com·ùiÚ_fes_
);

276 
	`ASSERT_EQ
(2, 
com·ùiÚ_fes_
.
	`size
());

277 
	`ASSERT_EQ
(
f1
, 
com·ùiÚ_fes_
[0]);

278 
	`ASSERT_EQ
(
f2
, 
com·ùiÚ_fes_
[1]);

279 
	}
}

281 
	$TEST_F
(
AddBound¬yIÅutsTe¡
, 
Te¡TwoBound¬yFes
) {

282 
FeM‘aD©a
* 
f1
 =

283 
	`C»©eFeM‘aD©a
(1, 
	`IÁ”ÇlKey
("100", 6, 
kTy³V®ue
),

284 
	`IÁ”ÇlKey
(IÁ”ÇlKey("100", 5, 
kTy³V®ue
)));

285 
FeM‘aD©a
* 
f2
 =

286 
	`C»©eFeM‘aD©a
(1, 
	`IÁ”ÇlKey
("100", 2, 
kTy³V®ue
),

287 
	`IÁ”ÇlKey
(IÁ”ÇlKey("300", 1, 
kTy³V®ue
)));

288 
FeM‘aD©a
* 
f3
 =

289 
	`C»©eFeM‘aD©a
(1, 
	`IÁ”ÇlKey
("100", 4, 
kTy³V®ue
),

290 
	`IÁ”ÇlKey
(IÁ”ÇlKey("100", 3, 
kTy³V®ue
)));

292 
Ëv–_fes_
.
	`push_back
(
f2
);

293 
Ëv–_fes_
.
	`push_back
(
f3
);

294 
Ëv–_fes_
.
	`push_back
(
f1
);

295 
com·ùiÚ_fes_
.
	`push_back
(
f1
);

297 
	`AddBound¬yIÅuts
(
icmp_
, 
Ëv–_fes_
, &
com·ùiÚ_fes_
);

298 
	`ASSERT_EQ
(3, 
com·ùiÚ_fes_
.
	`size
());

299 
	`ASSERT_EQ
(
f1
, 
com·ùiÚ_fes_
[0]);

300 
	`ASSERT_EQ
(
f3
, 
com·ùiÚ_fes_
[1]);

301 
	`ASSERT_EQ
(
f2
, 
com·ùiÚ_fes_
[2]);

302 
	}
}

304 
	$TEST_F
(
AddBound¬yIÅutsTe¡
, 
Te¡DisjošFePoš‹rs
) {

305 
FeM‘aD©a
* 
f1
 =

306 
	`C»©eFeM‘aD©a
(1, 
	`IÁ”ÇlKey
("100", 6, 
kTy³V®ue
),

307 
	`IÁ”ÇlKey
(IÁ”ÇlKey("100", 5, 
kTy³V®ue
)));

308 
FeM‘aD©a
* 
f2
 =

309 
	`C»©eFeM‘aD©a
(1, 
	`IÁ”ÇlKey
("100", 6, 
kTy³V®ue
),

310 
	`IÁ”ÇlKey
(IÁ”ÇlKey("100", 5, 
kTy³V®ue
)));

311 
FeM‘aD©a
* 
f3
 =

312 
	`C»©eFeM‘aD©a
(1, 
	`IÁ”ÇlKey
("100", 2, 
kTy³V®ue
),

313 
	`IÁ”ÇlKey
(IÁ”ÇlKey("300", 1, 
kTy³V®ue
)));

314 
FeM‘aD©a
* 
f4
 =

315 
	`C»©eFeM‘aD©a
(1, 
	`IÁ”ÇlKey
("100", 4, 
kTy³V®ue
),

316 
	`IÁ”ÇlKey
(IÁ”ÇlKey("100", 3, 
kTy³V®ue
)));

318 
Ëv–_fes_
.
	`push_back
(
f2
);

319 
Ëv–_fes_
.
	`push_back
(
f3
);

320 
Ëv–_fes_
.
	`push_back
(
f4
);

322 
com·ùiÚ_fes_
.
	`push_back
(
f1
);

324 
	`AddBound¬yIÅuts
(
icmp_
, 
Ëv–_fes_
, &
com·ùiÚ_fes_
);

325 
	`ASSERT_EQ
(3, 
com·ùiÚ_fes_
.
	`size
());

326 
	`ASSERT_EQ
(
f1
, 
com·ùiÚ_fes_
[0]);

327 
	`ASSERT_EQ
(
f4
, 
com·ùiÚ_fes_
[1]);

328 
	`ASSERT_EQ
(
f3
, 
com·ùiÚ_fes_
[2]);

329 
	}
}

	@db/write_batch.cc

16 
	~"Ëv–db/wr™e_b©ch.h
"

18 
	~"db/dbfÜm©.h
"

19 
	~"db/membË.h
"

20 
	~"db/wr™e_b©ch_š‹º®.h
"

21 
	~"Ëv–db/db.h
"

22 
	~"ut/codšg.h
"

24 
Çme¥aû
 
	gËv–db
 {

27 cÚ¡ 
size_t
 
	gkH—d”
 = 12;

29 
	gWr™eB©ch
::
Wr™eB©ch
(è{ 
CË¬
(); }

31 
	gWr™eB©ch
::~
Wr™eB©ch
() = ;

33 
	gWr™eB©ch
::
HªdËr
::~Handler() = ;

35 
	gWr™eB©ch
::
CË¬
() {

36 
»p_
.
ş—r
();

37 
	g»p_
.
»size
(
kH—d”
);

40 
size_t
 
	gWr™eB©ch
::
Aµroxim©eSize
(ècÚ¡ {  
»p_
.
size
(); }

42 
Stus
 
	gWr™eB©ch
::
I‹¿‹
(
HªdËr
* 
hªdËr
) const {

43 
Sliû
 
šput
(
»p_
);

44 ià(
	gšput
.
size
(è< 
	gkH—d”
) {

45  
	gStus
::
CÜru±iÚ
("malformed WriteBatch (too small)");

48 
	gšput
.
»move_´efix
(
kH—d”
);

49 
Sliû
 
	gkey
, 
	gv®ue
;

50 
	gfound
 = 0;

51 !
	gšput
.
em±y
()) {

52 
	gfound
++;

53 
	gg
 = 
šput
[0];

54 
	gšput
.
»move_´efix
(1);

55 
	gg
) {

56 
	gkTy³V®ue
:

57 ià(
G‘L’gthP»fixedSliû
(&
šput
, &
key
) &&

58 
G‘L’gthP»fixedSliû
(&
šput
, &
v®ue
)) {

59 
	ghªdËr
->
Put
(
key
, 
v®ue
);

61  
	gStus
::
CÜru±iÚ
("bad WriteBatch Put");

64 
	gkTy³D–‘iÚ
:

65 ià(
G‘L’gthP»fixedSliû
(&
šput
, &
key
)) {

66 
	ghªdËr
->
D–‘e
(
key
);

68  
	gStus
::
CÜru±iÚ
("bad WriteBatch Delete");

72  
Stus
::
CÜru±iÚ
("unknown WriteBatchag");

75 ià(
	gfound
 !ğ
Wr™eB©chIÁ”Çl
::
CouÁ
(
this
)) {

76  
Stus
::
CÜru±iÚ
("WriteBatch has wrong count");

78  
	gStus
::
OK
();

82 
	gWr™eB©chIÁ”Çl
::
CouÁ
(cÚ¡ 
Wr™eB©ch
* 
b
) {

83  
DecodeFixed32
(
b
->
»p_
.
d©a
() + 8);

86 
	gWr™eB©chIÁ”Çl
::
S‘CouÁ
(
Wr™eB©ch
* 
b
, 
n
) {

87 
EncodeFixed32
(&
b
->
»p_
[8], 
n
);

90 
Sequ’ûNumb”
 
	gWr™eB©chIÁ”Çl
::
Sequ’û
(cÚ¡ 
Wr™eB©ch
* 
b
) {

91  
Sequ’ûNumb”
(
DecodeFixed64
(
b
->
»p_
.
d©a
()));

94 
	gWr™eB©chIÁ”Çl
::
S‘Sequ’û
(
Wr™eB©ch
* 
b
, 
Sequ’ûNumb”
 
£q
) {

95 
EncodeFixed64
(&
b
->
»p_
[0], 
£q
);

98 
	gWr™eB©ch
::
Put
(cÚ¡ 
Sliû
& 
key
, cÚ¡ Sliû& 
v®ue
) {

99 
	gWr™eB©chIÁ”Çl
::
S‘CouÁ
(
this
, 
Wr™eB©chIÁ”Çl
::
CouÁ
(this) + 1);

100 
	g»p_
.
push_back
(
¡©ic_ÿ¡
<>(
kTy³V®ue
));

101 
PutL’gthP»fixedSliû
(&
»p_
, 
key
);

102 
PutL’gthP»fixedSliû
(&
»p_
, 
v®ue
);

105 
	gWr™eB©ch
::
D–‘e
(cÚ¡ 
Sliû
& 
key
) {

106 
Wr™eB©chIÁ”Çl
::
S‘CouÁ
(
this
, Wr™eB©chIÁ”Çl::
CouÁ
(this) + 1);

107 
	g»p_
.
push_back
(
¡©ic_ÿ¡
<>(
kTy³D–‘iÚ
));

108 
PutL’gthP»fixedSliû
(&
»p_
, 
key
);

111 
	gWr™eB©ch
::
Aµ’d
(cÚ¡ 
Wr™eB©ch
& 
sourû
) {

112 
Wr™eB©chIÁ”Çl
::
Aµ’d
(
this
, &
sourû
);

115 
	gÇme¥aû
 {

116 şas 
	cMemTabËIn£¹”
 : 
public
 
Wr™eB©ch
::
HªdËr
 {

117 
public
:

118 
Sequ’ûNumb”
 
£qu’û_
;

119 
MemTabË
* 
	gmem_
;

121 
Put
(cÚ¡ 
Sliû
& 
key
, cÚ¡ Sliû& 
v®ue
è
	gov”ride
 {

122 
	gmem_
->
Add
(
£qu’û_
, 
kTy³V®ue
, 
key
, 
v®ue
);

123 
	g£qu’û_
++;

125 
D–‘e
(cÚ¡ 
Sliû
& 
key
è
	gov”ride
 {

126 
	gmem_
->
Add
(
£qu’û_
, 
kTy³D–‘iÚ
, 
key
, 
Sliû
());

127 
	g£qu’û_
++;

132 
Stus
 
	gWr™eB©chIÁ”Çl
::
	$In£¹IÁo
(cÚ¡ 
Wr™eB©ch
* 
b
, 
MemTabË
* 
membË
) {

133 
MemTabËIn£¹”
 
š£¹”
;

134 
š£¹”
.
£qu’û_
 = 
Wr™eB©chIÁ”Çl
::
	`Sequ’û
(
b
);

135 
š£¹”
.
mem_
 = 
membË
;

136  
b
->
	`I‹¿‹
(&
š£¹”
);

137 
	}
}

139 
	gWr™eB©chIÁ”Çl
::
	$S‘CÚ‹Ás
(
Wr™eB©ch
* 
b
, cÚ¡ 
Sliû
& 
cÚ‹Ás
) {

140 
	`as£¹
(
cÚ‹Ás
.
	`size
(è>ğ
kH—d”
);

141 
b
->
»p_
.
	`assign
(
cÚ‹Ás
.
	`d©a
(), cÚ‹Ás.
	`size
());

142 
	}
}

144 
	gWr™eB©chIÁ”Çl
::
	$Aµ’d
(
Wr™eB©ch
* 
d¡
, cÚ¡ Wr™eB©ch* 
¤c
) {

145 
	`S‘CouÁ
(
d¡
, 
	`CouÁ
(d¡è+ CouÁ(
¤c
));

146 
	`as£¹
(
¤c
->
»p_
.
	`size
(è>ğ
kH—d”
);

147 
d¡
->
»p_
.
	`­³nd
(
¤c
->»p_.
	`d©a
(è+ 
kH—d”
, src->»p_.
	`size
() - kHeader);

148 
	}
}

	@db/write_batch_internal.h

5 #iâdeà
STORAGE_LEVELDB_DB_WRITE_BATCH_INTERNAL_H_


6 
	#STORAGE_LEVELDB_DB_WRITE_BATCH_INTERNAL_H_


	)

8 
	~"db/dbfÜm©.h
"

9 
	~"Ëv–db/wr™e_b©ch.h
"

11 
Çme¥aû
 
	gËv–db
 {

13 
şass
 
	gMemTabË
;

17 şas 
	cWr™eB©chIÁ”Çl
 {

18 
	gpublic
:

20 
CouÁ
(cÚ¡ 
Wr™eB©ch
* 
b©ch
);

23 
S‘CouÁ
(
Wr™eB©ch
* 
b©ch
, 
n
);

26 
Sequ’ûNumb”
 
Sequ’û
(cÚ¡ 
Wr™eB©ch
* 
b©ch
);

30 
S‘Sequ’û
(
Wr™eB©ch
* 
b©ch
, 
Sequ’ûNumb”
 
£q
);

32 
Sliû
 
CÚ‹Ás
(cÚ¡ 
Wr™eB©ch
* 
b©ch
è{  Sliû(b©ch->
»p_
); }

34 
size_t
 
By‹Size
(cÚ¡ 
Wr™eB©ch
* 
b©ch
è{  
	gb©ch
->
	g»p_
.
size
(); }

36 
S‘CÚ‹Ás
(
Wr™eB©ch
* 
b©ch
, cÚ¡ 
Sliû
& 
cÚ‹Ás
);

38 
Stus
 
In£¹IÁo
(cÚ¡ 
Wr™eB©ch
* 
b©ch
, 
MemTabË
* 
membË
);

40 
Aµ’d
(
Wr™eB©ch
* 
d¡
, cÚ¡ Wr™eB©ch* 
¤c
);

	@db/write_batch_test.cc

5 
	~"g‹¡/g‹¡.h
"

6 
	~"db/membË.h
"

7 
	~"db/wr™e_b©ch_š‹º®.h
"

8 
	~"Ëv–db/db.h
"

9 
	~"Ëv–db/’v.h
"

10 
	~"ut/loggšg.h
"

12 
Çme¥aû
 
	gËv–db
 {

14 
	g¡d
::
¡ršg
 
PrštCÚ‹Ás
(
Wr™eB©ch
* 
b
) {

15 
IÁ”ÇlKeyCom·¿tÜ
 
cmp
(
By‹wi£Com·¿tÜ
());

16 
MemTabË
* 
	gmem
 = 
Ãw
 MemTabË(
cmp
);

17 
	gmem
->
Ref
();

18 
	g¡d
::
¡ršg
 
¡©e
;

19 
Stus
 
	gs
 = 
Wr™eB©chIÁ”Çl
::
In£¹IÁo
(
b
, 
mem
);

20 
	gcouÁ
 = 0;

21 
I‹¿tÜ
* 
	g™”
 = 
mem
->
NewI‹¿tÜ
();

22 
	g™”
->
S“kToFœ¡
(); i‹r->
V®id
(); i‹r->
Next
()) {

23 
P¬£dIÁ”ÇlKey
 
	gikey
;

24 
EXPECT_TRUE
(
P¬£IÁ”ÇlKey
(
™”
->
key
(), &
ikey
));

25 
	gikey
.
	gty³
) {

26 
	gkTy³V®ue
:

27 
¡©e
.
­³nd
("Put(");

28 
	g¡©e
.
­³nd
(
ikey
.
u£r_key
.
ToSŒšg
());

29 
	g¡©e
.
­³nd
(", ");

30 
	g¡©e
.
­³nd
(
™”
->
v®ue
().
ToSŒšg
());

31 
	g¡©e
.
­³nd
(")");

32 
	gcouÁ
++;

34 
	gkTy³D–‘iÚ
:

35 
¡©e
.
­³nd
("Delete(");

36 
	g¡©e
.
­³nd
(
ikey
.
u£r_key
.
ToSŒšg
());

37 
	g¡©e
.
­³nd
(")");

38 
	gcouÁ
++;

41 
	g¡©e
.
­³nd
("@");

42 
	g¡©e
.
­³nd
(
Numb”ToSŒšg
(
ikey
.
£qu’û
));

44 
d–‘e
 
	g™”
;

45 ià(!
	gs
.
ok
()) {

46 
	g¡©e
.
­³nd
("ParseError()");

47 } ià(
	gcouÁ
 !ğ
Wr™eB©chIÁ”Çl
::
CouÁ
(
b
)) {

48 
¡©e
.
­³nd
("CountMismatch()");

50 
	gmem
->
UÄef
();

51  
	g¡©e
;

54 
TEST
(
Wr™eB©chTe¡
, 
Em±y
) {

55 
Wr™eB©ch
 
	gb©ch
;

56 
ASSERT_EQ
("", 
PrštCÚ‹Ás
(&
b©ch
));

57 
ASSERT_EQ
(0, 
Wr™eB©chIÁ”Çl
::
CouÁ
(&
b©ch
));

60 
TEST
(
Wr™eB©chTe¡
, 
MuÉË
) {

61 
Wr™eB©ch
 
	gb©ch
;

62 
	gb©ch
.
Put
(
Sliû
("foo"), Slice("bar"));

63 
	gb©ch
.
D–‘e
(
Sliû
("box"));

64 
	gb©ch
.
Put
(
Sliû
("baz"), Slice("boo"));

65 
	gWr™eB©chIÁ”Çl
::
S‘Sequ’û
(&
b©ch
, 100);

66 
ASSERT_EQ
(100, 
Wr™eB©chIÁ”Çl
::
Sequ’û
(&
b©ch
));

67 
ASSERT_EQ
(3, 
Wr™eB©chIÁ”Çl
::
CouÁ
(&
b©ch
));

68 
ASSERT_EQ
(

72 
PrštCÚ‹Ás
(&
b©ch
));

75 
TEST
(
Wr™eB©chTe¡
, 
CÜru±iÚ
) {

76 
Wr™eB©ch
 
	gb©ch
;

77 
	gb©ch
.
Put
(
Sliû
("foo"), Slice("bar"));

78 
	gb©ch
.
D–‘e
(
Sliû
("box"));

79 
	gWr™eB©chIÁ”Çl
::
S‘Sequ’û
(&
b©ch
, 200);

80 
Sliû
 
	gcÚ‹Ás
 = 
Wr™eB©chIÁ”Çl
::
CÚ‹Ás
(&
b©ch
);

81 
	gWr™eB©chIÁ”Çl
::
S‘CÚ‹Ás
(&
b©ch
,

82 
Sliû
(
cÚ‹Ás
.
d©a
(), cÚ‹Ás.
size
() - 1));

83 
ASSERT_EQ
(

86 
PrštCÚ‹Ás
(&
b©ch
));

89 
TEST
(
Wr™eB©chTe¡
, 
Aµ’d
) {

90 
Wr™eB©ch
 
	gb1
, 
	gb2
;

91 
	gWr™eB©chIÁ”Çl
::
S‘Sequ’û
(&
b1
, 200);

92 
	gWr™eB©chIÁ”Çl
::
S‘Sequ’û
(&
b2
, 300);

93 
	gb1
.
Aµ’d
(
b2
);

94 
ASSERT_EQ
("", 
PrštCÚ‹Ás
(&
b1
));

95 
	gb2
.
Put
("a", "va");

96 
	gb1
.
Aµ’d
(
b2
);

97 
ASSERT_EQ
("Put×, va)@200", 
PrštCÚ‹Ás
(&
b1
));

98 
	gb2
.
CË¬
();

99 
	gb2
.
Put
("b", "vb");

100 
	gb1
.
Aµ’d
(
b2
);

101 
ASSERT_EQ
(

104 
PrštCÚ‹Ás
(&
b1
));

105 
	gb2
.
D–‘e
("foo");

106 
	gb1
.
Aµ’d
(
b2
);

107 
ASSERT_EQ
(

112 
PrštCÚ‹Ás
(&
b1
));

115 
TEST
(
Wr™eB©chTe¡
, 
Aµroxim©eSize
) {

116 
Wr™eB©ch
 
	gb©ch
;

117 
size_t
 
	gem±y_size
 = 
b©ch
.
Aµroxim©eSize
();

119 
	gb©ch
.
Put
(
Sliû
("foo"), Slice("bar"));

120 
size_t
 
	gÚe_key_size
 = 
b©ch
.
Aµroxim©eSize
();

121 
ASSERT_LT
(
em±y_size
, 
Úe_key_size
);

123 
	gb©ch
.
Put
(
Sliû
("baz"), Slice("boo"));

124 
size_t
 
	gtwo_keys_size
 = 
b©ch
.
Aµroxim©eSize
();

125 
ASSERT_LT
(
Úe_key_size
, 
two_keys_size
);

127 
	gb©ch
.
D–‘e
(
Sliû
("box"));

128 
size_t
 
	gpo¡_d–‘e_size
 = 
b©ch
.
Aµroxim©eSize
();

129 
ASSERT_LT
(
two_keys_size
, 
po¡_d–‘e_size
);

	@helpers/memenv/memenv.cc

5 
	~"h–³rs/mem’v/mem’v.h
"

7 
	~<c¡ršg
>

8 
	~<lim™s
>

9 
	~<m­
>

10 
	~<¡ršg
>

11 
	~<veùÜ
>

13 
	~"Ëv–db/’v.h
"

14 
	~"Ëv–db/¡©us.h
"

15 
	~"pÜt/pÜt.h
"

16 
	~"pÜt/th»ad_ªnÙ©iÚs.h
"

17 
	~"ut/mu‹xlock.h
"

19 
Çme¥aû
 
	gËv–db
 {

21 
	gÇme¥aû
 {

23 şas 
	cFeS‹
 {

24 
	gpublic
:

27 
FeS‹
(è: 
»fs_
(0), 
size_
(0) {}

30 
FeS‹
(cÚ¡ FeS‹&èğ
d–‘e
;

31 
	gFeS‹
& 
	gİ”©Ü
=(cÚ¡ 
FeS‹
&èğ
d–‘e
;

34 
Ref
() {

35 
Mu‹xLock
 
lock
(&
»fs_mu‹x_
);

36 ++
	g»fs_
;

40 
UÄef
() {

41 
boŞ
 
	gdo_d–‘e
 = 
çl£
;

44 
Mu‹xLock
 
lock
(&
»fs_mu‹x_
);

45 --
	g»fs_
;

46 
as£¹
(
»fs_
 >= 0);

47 ià(
	g»fs_
 <= 0) {

48 
do_d–‘e
 = 
Œue
;

52 ià(
	gdo_d–‘e
) {

53 
d–‘e
 
	gthis
;

57 
ušt64_t
 
Size
() const {

58 
Mu‹xLock
 
lock
(&
blocks_mu‹x_
);

59  
	gsize_
;

62 
Trunÿ‹
() {

63 
Mu‹xLock
 
lock
(&
blocks_mu‹x_
);

64 *& 
	gblock
 : 
blocks_
) {

65 
d–‘e
[] 
block
;

67 
	gblocks_
.
ş—r
();

68 
	gsize_
 = 0;

71 
Stus
 
R—d
(
ušt64_t
 
off£t
, 
size_t
 
n
, 
Sliû
* 
»suÉ
, * 
sü©ch
) const {

72 
Mu‹xLock
 
lock
(&
blocks_mu‹x_
);

73 ià(
	goff£t
 > 
	gsize_
) {

74  
	gStus
::
IOE¼Ü
("Offset greaterhan file size.");

76 cÚ¡ 
ušt64_t
 
	gavaabË
 = 
size_
 - 
off£t
;

77 ià(
	gn
 > 
	gavaabË
) {

78 
	gn
 = 
¡©ic_ÿ¡
<
size_t
>(
avaabË
);

80 ià(
	gn
 == 0) {

81 *
»suÉ
 = 
Sliû
();

82  
	gStus
::
OK
();

85 
as£¹
(
off£t
 / 
kBlockSize
 <ğ
¡d
::
num”ic_lim™s
<
size_t
>::
max
());

86 
size_t
 
	gblock
 = 
¡©ic_ÿ¡
<size_t>(
off£t
 / 
kBlockSize
);

87 
size_t
 
	gblock_off£t
 = 
off£t
 % 
kBlockSize
;

88 
size_t
 
	gby‹s_to_cİy
 = 
n
;

89 * 
	gd¡
 = 
sü©ch
;

91 
	gby‹s_to_cİy
 > 0) {

92 
size_t
 
	gava
 = 
kBlockSize
 - 
block_off£t
;

93 ià(
	gava
 > 
	gby‹s_to_cİy
) {

94 
	gava
 = 
by‹s_to_cİy
;

96 
	g¡d
::
memıy
(
d¡
, 
blocks_
[
block
] + 
block_off£t
, 
ava
);

98 
	gby‹s_to_cİy
 -ğ
ava
;

99 
	gd¡
 +ğ
ava
;

100 
	gblock
++;

101 
	gblock_off£t
 = 0;

104 *
	g»suÉ
 = 
Sliû
(
sü©ch
, 
n
);

105  
	gStus
::
OK
();

108 
Stus
 
Aµ’d
(cÚ¡ 
Sliû
& 
d©a
) {

109 cÚ¡ * 
	g¤c
 = 
d©a
.data();

110 
size_t
 
	g¤c_Ën
 = 
d©a
.
size
();

112 
Mu‹xLock
 
lock
(&
blocks_mu‹x_
);

113 
	g¤c_Ën
 > 0) {

114 
size_t
 
	gava
;

115 
size_t
 
	goff£t
 = 
size_
 % 
kBlockSize
;

117 ià(
	goff£t
 != 0) {

119 
ava
 = 
kBlockSize
 - 
off£t
;

122 
	gblocks_
.
push_back
(
Ãw
 [
kBlockSize
]);

123 
	gava
 = 
kBlockSize
;

126 ià(
	gava
 > 
	g¤c_Ën
) {

127 
	gava
 = 
¤c_Ën
;

129 
	g¡d
::
memıy
(
blocks_
.
back
(è+ 
off£t
, 
¤c
, 
ava
);

130 
	g¤c_Ën
 -ğ
ava
;

131 
	g¤c
 +ğ
ava
;

132 
	gsize_
 +ğ
ava
;

135  
	gStus
::
OK
();

138 
	g´iv©e
:

139 ’um { 
kBlockSize
 = 8 * 1024 };

142 ~
FeS‹
(è{ 
Trunÿ‹
(); }

144 
	gpÜt
::
Mu‹x
 
»fs_mu‹x_
;

145 
»fs_
 
GUARDED_BY
(
»fs_mu‹x_
);

147 
mubË
 
	gpÜt
::
Mu‹x
 
blocks_mu‹x_
;

148 
	g¡d
::
veùÜ
<*> 
blocks_
 
GUARDED_BY
(
blocks_mu‹x_
);

149 
ušt64_t
 
size_
 
GUARDED_BY
(
blocks_mu‹x_
);

152 şas 
	cSequ’tŸlFeIm¶
 : 
public
 
Sequ’tŸlFe
 {

153 
public
:

154 
ex¶ic™
 
Sequ’tŸlFeIm¶
(
FeS‹
* 
fe
è: 
fe_
(fe), 
pos_
(0) {

155 
	gfe_
->
Ref
();

158 ~
Sequ’tŸlFeIm¶
(è
	gov”ride
 { 
	gfe_
->
UÄef
(); }

160 
Stus
 
R—d
(
size_t
 
n
, 
Sliû
* 
»suÉ
, * 
sü©ch
è
	gov”ride
 {

161 
Stus
 
	gs
 = 
fe_
->
R—d
(
pos_
, 
n
, 
»suÉ
, 
sü©ch
);

162 ià(
	gs
.
ok
()) {

163 
	gpos_
 +ğ
»suÉ
->
size
();

165  
	gs
;

168 
Stus
 
Sk
(
ušt64_t
 
n
è
	gov”ride
 {

169 ià(
	gpos_
 > 
	gfe_
->
Size
()) {

170  
	gStus
::
IOE¼Ü
("pos_ > file_->Size()");

172 cÚ¡ 
ušt64_t
 
	gavaabË
 = 
fe_
->
Size
(è- 
pos_
;

173 ià(
	gn
 > 
	gavaabË
) {

174 
	gn
 = 
avaabË
;

176 
	gpos_
 +ğ
n
;

177  
	gStus
::
OK
();

180 
	g´iv©e
:

181 
FeS‹
* 
fe_
;

182 
ušt64_t
 
	gpos_
;

185 şas 
	cRªdomAcûssFeIm¶
 : 
public
 
RªdomAcûssFe
 {

186 
public
:

187 
ex¶ic™
 
RªdomAcûssFeIm¶
(
FeS‹
* 
fe
è: 
fe_
(feè{ fe_->
Ref
(); }

189 ~
RªdomAcûssFeIm¶
(è
	gov”ride
 { 
	gfe_
->
UÄef
(); }

191 
Stus
 
R—d
(
ušt64_t
 
off£t
, 
size_t
 
n
, 
Sliû
* 
»suÉ
,

192 * 
sü©ch
ècÚ¡ 
	gov”ride
 {

193  
	gfe_
->
R—d
(
off£t
, 
n
, 
»suÉ
, 
sü©ch
);

196 
	g´iv©e
:

197 
FeS‹
* 
fe_
;

200 şas 
	cWr™abËFeIm¶
 : 
public
 
Wr™abËFe
 {

201 
public
:

202 
Wr™abËFeIm¶
(
FeS‹
* 
fe
è: 
fe_
(feè{ fe_->
Ref
(); }

204 ~
Wr™abËFeIm¶
(è
	gov”ride
 { 
	gfe_
->
UÄef
(); }

206 
Stus
 
Aµ’d
(cÚ¡ 
Sliû
& 
d©a
è
	gov”ride
 {  
	gfe_
->Append(data); }

208 
Stus
 
Clo£
(è
	gov”ride
 {  
	gStus
::
OK
(); }

209 
Stus
 
Flush
(è
	gov”ride
 {  
	gStus
::
OK
(); }

210 
Stus
 
Sync
(è
	gov”ride
 {  
	gStus
::
OK
(); }

212 
	g´iv©e
:

213 
FeS‹
* 
fe_
;

216 şas 
	cNoOpLogg”
 : 
public
 
Logg”
 {

217 
public
:

218 
Logv
(cÚ¡ * 
fÜm©
, 
¡d
::
va_li¡
 
­
è
ov”ride
 {}

221 şas 
	cInMemÜyEnv
 : 
public
 
EnvW¿µ”
 {

222 
public
:

223 
ex¶ic™
 
InMemÜyEnv
(
Env
* 
ba£_’v
è: 
EnvW¿µ”
(base_env) {}

225 ~
InMemÜyEnv
(è
ov”ride
 {

226 cÚ¡‡uto& 
kvp
 : 
fe_m­_
) {

227 
kvp
.
£cÚd
->
UÄef
();

232 
Stus
 
NewSequ’tŸlFe
(cÚ¡ 
¡d
::
¡ršg
& 
âame
,

233 
Sequ’tŸlFe
** 
»suÉ
è
	gov”ride
 {

234 
Mu‹xLock
 
lock
(&
mu‹x_
);

235 ià(
	gfe_m­_
.
fšd
(
âame
è=ğ
fe_m­_
.
’d
()) {

236 *
»suÉ
 = 
nuÎ±r
;

237  
	gStus
::
IOE¼Ü
(
âame
, "File‚ot found");

240 *
	g»suÉ
 = 
Ãw
 
Sequ’tŸlFeIm¶
(
fe_m­_
[
âame
]);

241  
	gStus
::
OK
();

244 
Stus
 
NewRªdomAcûssFe
(cÚ¡ 
¡d
::
¡ršg
& 
âame
,

245 
RªdomAcûssFe
** 
»suÉ
è
	gov”ride
 {

246 
Mu‹xLock
 
lock
(&
mu‹x_
);

247 ià(
	gfe_m­_
.
fšd
(
âame
è=ğ
fe_m­_
.
’d
()) {

248 *
»suÉ
 = 
nuÎ±r
;

249  
	gStus
::
IOE¼Ü
(
âame
, "File‚ot found");

252 *
	g»suÉ
 = 
Ãw
 
RªdomAcûssFeIm¶
(
fe_m­_
[
âame
]);

253  
	gStus
::
OK
();

256 
Stus
 
NewWr™abËFe
(cÚ¡ 
¡d
::
¡ršg
& 
âame
,

257 
Wr™abËFe
** 
»suÉ
è
	gov”ride
 {

258 
Mu‹xLock
 
lock
(&
mu‹x_
);

259 
	gFeSy¡em
::
™”©Ü
 
™
 = 
fe_m­_
.
fšd
(
âame
);

261 
FeS‹
* 
	gfe
;

262 ià(
	g™
 =ğ
fe_m­_
.
’d
()) {

264 
fe
 = 
Ãw
 
FeS‹
();

265 
	gfe
->
Ref
();

266 
	gfe_m­_
[
âame
] = 
fe
;

268 
	gfe
 = 
™
->
£cÚd
;

269 
	gfe
->
Trunÿ‹
();

272 *
	g»suÉ
 = 
Ãw
 
Wr™abËFeIm¶
(
fe
);

273  
	gStus
::
OK
();

276 
Stus
 
NewAµ’dabËFe
(cÚ¡ 
¡d
::
¡ršg
& 
âame
,

277 
Wr™abËFe
** 
»suÉ
è
	gov”ride
 {

278 
Mu‹xLock
 
lock
(&
mu‹x_
);

279 
FeS‹
** 
	g¥Œ
 = &
fe_m­_
[
âame
];

280 
FeS‹
* 
	gfe
 = *
¥Œ
;

281 ià(
	gfe
 =ğ
nuÎ±r
) {

282 
fe
 = 
Ãw
 
FeS‹
();

283 
	gfe
->
Ref
();

285 *
	g»suÉ
 = 
Ãw
 
Wr™abËFeIm¶
(
fe
);

286  
	gStus
::
OK
();

289 
boŞ
 
FeExi¡s
(cÚ¡ 
¡d
::
¡ršg
& 
âame
è
ov”ride
 {

290 
Mu‹xLock
 
lock
(&
mu‹x_
);

291  
	gfe_m­_
.
fšd
(
âame
è!ğ
fe_m­_
.
’d
();

294 
Stus
 
G‘Chd»n
(cÚ¡ 
¡d
::
¡ršg
& 
dœ
,

295 
¡d
::
veùÜ
<¡d::
¡ršg
>* 
»suÉ
è
ov”ride
 {

296 
Mu‹xLock
 
lock
(&
mu‹x_
);

297 
	g»suÉ
->
ş—r
();

299 cÚ¡‡uto& 
	gkvp
 : 
fe_m­_
) {

300 cÚ¡ 
¡d
::
¡ršg
& 
f’ame
 = 
kvp
.
fœ¡
;

302 ià(
	gf’ame
.
size
(è>ğ
dœ
.size(è+ 1 && 
f’ame
[dir.size()] == '/' &&

303 
Sliû
(
f’ame
).
¡¬ts_w™h
(Sliû(
dœ
))) {

304 
»suÉ
->
push_back
(
f’ame
.
sub¡r
(
dœ
.
size
() + 1));

308  
	gStus
::
OK
();

311 
RemoveFeIÁ”Çl
(cÚ¡ 
¡d
::
¡ršg
& 
âame
)

312 
EXCLUSIVE_LOCKS_REQUIRED
(
mu‹x_
) {

313 ià(
fe_m­_
.
fšd
(
âame
è=ğfe_m­_.
’d
()) {

317 
	gfe_m­_
[
âame
]->
UÄef
();

318 
	gfe_m­_
.
”a£
(
âame
);

321 
Stus
 
RemoveFe
(cÚ¡ 
¡d
::
¡ršg
& 
âame
è
ov”ride
 {

322 
Mu‹xLock
 
lock
(&
mu‹x_
);

323 ià(
	gfe_m­_
.
fšd
(
âame
è=ğ
fe_m­_
.
’d
()) {

324  
Stus
::
IOE¼Ü
(
âame
, "File‚ot found");

327 
RemoveFeIÁ”Çl
(
âame
);

328  
	gStus
::
OK
();

331 
Stus
 
C»©eDœ
(cÚ¡ 
¡d
::
¡ršg
& 
dœÇme
è
ov”ride
 {  Stus::
OK
(); }

333 
Stus
 
RemoveDœ
(cÚ¡ 
¡d
::
¡ršg
& 
dœÇme
è
ov”ride
 {  Stus::
OK
(); }

335 
Stus
 
G‘FeSize
(cÚ¡ 
¡d
::
¡ršg
& 
âame
, 
ušt64_t
* 
fe_size
è
	gov”ride
 {

336 
Mu‹xLock
 
lock
(&
mu‹x_
);

337 ià(
	gfe_m­_
.
fšd
(
âame
è=ğ
fe_m­_
.
’d
()) {

338  
Stus
::
IOE¼Ü
(
âame
, "File‚ot found");

341 *
	gfe_size
 = 
fe_m­_
[
âame
]->
Size
();

342  
	gStus
::
OK
();

345 
Stus
 
R’ameFe
(cÚ¡ 
¡d
::
¡ršg
& 
¤c
,

346 cÚ¡ 
¡d
::
¡ršg
& 
rg‘
è
ov”ride
 {

347 
Mu‹xLock
 
lock
(&
mu‹x_
);

348 ià(
	gfe_m­_
.
fšd
(
¤c
è=ğ
fe_m­_
.
’d
()) {

349  
Stus
::
IOE¼Ü
(
¤c
, "File‚ot found");

352 
RemoveFeIÁ”Çl
(
rg‘
);

353 
	gfe_m­_
[
rg‘
] = 
fe_m­_
[
¤c
];

354 
	gfe_m­_
.
”a£
(
¤c
);

355  
	gStus
::
OK
();

358 
Stus
 
LockFe
(cÚ¡ 
¡d
::
¡ršg
& 
âame
, 
FeLock
** 
lock
è
	gov”ride
 {

359 *
	glock
 = 
Ãw
 
FeLock
;

360  
	gStus
::
OK
();

363 
Stus
 
UÆockFe
(
FeLock
* 
lock
è
	gov”ride
 {

364 
d–‘e
 
	glock
;

365  
	gStus
::
OK
();

368 
Stus
 
G‘Te¡DœeùÜy
(
¡d
::
¡ršg
* 
·th
è
ov”ride
 {

369 *
·th
 = "/test";

370  
	gStus
::
OK
();

373 
Stus
 
NewLogg”
(cÚ¡ 
¡d
::
¡ršg
& 
âame
, 
Logg”
** 
»suÉ
è
	gov”ride
 {

374 *
	g»suÉ
 = 
Ãw
 
NoOpLogg”
;

375  
	gStus
::
OK
();

378 
	g´iv©e
:

380 
¡d
::
	tm­
<
	t¡d
::
	t¡ršg
, 
	tFeS‹
*> 
	tFeSy¡em
;

382 
	gpÜt
::
Mu‹x
 
mu‹x_
;

383 
FeSy¡em
 
fe_m­_
 
GUARDED_BY
(
mu‹x_
);

388 
Env
* 
	$NewMemEnv
(
Env
* 
ba£_’v
è{  
Ãw
 
	`InMemÜyEnv
(ba£_’v); 
	}
}

	@helpers/memenv/memenv.h

5 #iâdeà
STORAGE_LEVELDB_HELPERS_MEMENV_MEMENV_H_


6 
	#STORAGE_LEVELDB_HELPERS_MEMENV_MEMENV_H_


	)

8 
	~"Ëv–db/expÜt.h
"

10 
Çme¥aû
 
	gËv–db
 {

12 
şass
 
	gEnv
;

18 
LEVELDB_EXPORT
 
Env
* 
NewMemEnv
(Env* 
ba£_’v
);

	@helpers/memenv/memenv_test.cc

5 
	~"h–³rs/mem’v/mem’v.h
"

7 
	~<¡ršg
>

8 
	~<veùÜ
>

10 
	~"g‹¡/g‹¡.h
"

11 
	~"db/db_im¶.h
"

12 
	~"Ëv–db/db.h
"

13 
	~"Ëv–db/’v.h
"

14 
	~"ut/‹¡ut.h
"

16 
Çme¥aû
 
	gËv–db
 {

18 şas 
	cMemEnvTe¡
 : 
public
 
‹¡šg
::
Te¡
 {

19 
public
:

20 
MemEnvTe¡
(è: 
’v_
(
NewMemEnv
(
Env
::
DeçuÉ
())) {}

21 ~
MemEnvTe¡
(è{ 
d–‘e
 
’v_
; }

23 
Env
* 
	g’v_
;

26 
	$TEST_F
(
MemEnvTe¡
, 
Basics
) {

27 
ušt64_t
 
fe_size
;

28 
Wr™abËFe
* 
wr™abË_fe
;

29 
¡d
::
veùÜ
<¡d::
¡ršg
> 
chd»n
;

31 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`C»©eDœ
("/dir"));

34 
	`ASSERT_TRUE
(!
’v_
->
	`FeExi¡s
("/dir/non_existent"));

35 
	`ASSERT_TRUE
(!
’v_
->
	`G‘FeSize
("/dœ/nÚ_exi¡’t", &
fe_size
).
	`ok
());

36 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`G‘Chd»n
("/dœ", &
chd»n
));

37 
	`ASSERT_EQ
(0, 
chd»n
.
	`size
());

40 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`NewWr™abËFe
("/dœ/f", &
wr™abË_fe
));

41 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`G‘FeSize
("/dœ/f", &
fe_size
));

42 
	`ASSERT_EQ
(0, 
fe_size
);

43 
d–‘e
 
wr™abË_fe
;

46 
	`ASSERT_TRUE
(
’v_
->
	`FeExi¡s
("/dir/f"));

47 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`G‘FeSize
("/dœ/f", &
fe_size
));

48 
	`ASSERT_EQ
(0, 
fe_size
);

49 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`G‘Chd»n
("/dœ", &
chd»n
));

50 
	`ASSERT_EQ
(1, 
chd»n
.
	`size
());

51 
	`ASSERT_EQ
("f", 
chd»n
[0]);

54 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`NewWr™abËFe
("/dœ/f", &
wr™abË_fe
));

55 
	`ASSERT_LEVELDB_OK
(
wr™abË_fe
->
	`Aµ’d
("abc"));

56 
d–‘e
 
wr™abË_fe
;

59 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`NewAµ’dabËFe
("/dœ/f", &
wr™abË_fe
));

60 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`G‘FeSize
("/dœ/f", &
fe_size
));

61 
	`ASSERT_EQ
(3, 
fe_size
);

62 
	`ASSERT_LEVELDB_OK
(
wr™abË_fe
->
	`Aµ’d
("hello"));

63 
d–‘e
 
wr™abË_fe
;

66 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`G‘FeSize
("/dœ/f", &
fe_size
));

67 
	`ASSERT_EQ
(8, 
fe_size
);

70 
	`ASSERT_TRUE
(!
’v_
->
	`R’ameFe
("/dœ/nÚ_exi¡’t", "/dœ/g").
	`ok
());

71 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`R’ameFe
("/dir/f", "/dir/g"));

72 
	`ASSERT_TRUE
(!
’v_
->
	`FeExi¡s
("/dir/f"));

73 
	`ASSERT_TRUE
(
’v_
->
	`FeExi¡s
("/dir/g"));

74 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`G‘FeSize
("/dœ/g", &
fe_size
));

75 
	`ASSERT_EQ
(8, 
fe_size
);

78 
Sequ’tŸlFe
* 
£q_fe
;

79 
RªdomAcûssFe
* 
¿nd_fe
;

80 
	`ASSERT_TRUE
(!
’v_
->
	`NewSequ’tŸlFe
("/dœ/nÚ_exi¡’t", &
£q_fe
).
	`ok
());

81 
	`ASSERT_TRUE
(!
£q_fe
);

82 
	`ASSERT_TRUE
(!
’v_
->
	`NewRªdomAcûssFe
("/dœ/nÚ_exi¡’t", &
¿nd_fe
).
	`ok
());

83 
	`ASSERT_TRUE
(!
¿nd_fe
);

86 
	`ASSERT_TRUE
(!
’v_
->
	`RemoveFe
("/dœ/nÚ_exi¡’t").
	`ok
());

87 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`RemoveFe
("/dir/g"));

88 
	`ASSERT_TRUE
(!
’v_
->
	`FeExi¡s
("/dir/g"));

89 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`G‘Chd»n
("/dœ", &
chd»n
));

90 
	`ASSERT_EQ
(0, 
chd»n
.
	`size
());

91 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`RemoveDœ
("/dir"));

92 
	}
}

94 
	$TEST_F
(
MemEnvTe¡
, 
R—dWr™e
) {

95 
Wr™abËFe
* 
wr™abË_fe
;

96 
Sequ’tŸlFe
* 
£q_fe
;

97 
RªdomAcûssFe
* 
¿nd_fe
;

98 
Sliû
 
»suÉ
;

99 
sü©ch
[100];

101 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`C»©eDœ
("/dir"));

103 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`NewWr™abËFe
("/dœ/f", &
wr™abË_fe
));

104 
	`ASSERT_LEVELDB_OK
(
wr™abË_fe
->
	`Aµ’d
("hello "));

105 
	`ASSERT_LEVELDB_OK
(
wr™abË_fe
->
	`Aµ’d
("world"));

106 
d–‘e
 
wr™abË_fe
;

109 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`NewSequ’tŸlFe
("/dœ/f", &
£q_fe
));

110 
	`ASSERT_LEVELDB_OK
(
£q_fe
->
	`R—d
(5, &
»suÉ
, 
sü©ch
));

111 
	`ASSERT_EQ
(0, 
»suÉ
.
	`com·»
("hello"));

112 
	`ASSERT_LEVELDB_OK
(
£q_fe
->
	`Sk
(1));

113 
	`ASSERT_LEVELDB_OK
(
£q_fe
->
	`R—d
(1000, &
»suÉ
, 
sü©ch
));

114 
	`ASSERT_EQ
(0, 
»suÉ
.
	`com·»
("world"));

115 
	`ASSERT_LEVELDB_OK
(

116 
£q_fe
->
	`R—d
(1000, &
»suÉ
, 
sü©ch
));

117 
	`ASSERT_EQ
(0, 
»suÉ
.
	`size
());

118 
	`ASSERT_LEVELDB_OK
(
£q_fe
->
	`Sk
(100));

119 
	`ASSERT_LEVELDB_OK
(
£q_fe
->
	`R—d
(1000, &
»suÉ
, 
sü©ch
));

120 
	`ASSERT_EQ
(0, 
»suÉ
.
	`size
());

121 
d–‘e
 
£q_fe
;

124 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`NewRªdomAcûssFe
("/dœ/f", &
¿nd_fe
));

125 
	`ASSERT_LEVELDB_OK
(
¿nd_fe
->
	`R—d
(6, 5, &
»suÉ
, 
sü©ch
));

126 
	`ASSERT_EQ
(0, 
»suÉ
.
	`com·»
("world"));

127 
	`ASSERT_LEVELDB_OK
(
¿nd_fe
->
	`R—d
(0, 5, &
»suÉ
, 
sü©ch
));

128 
	`ASSERT_EQ
(0, 
»suÉ
.
	`com·»
("hello"));

129 
	`ASSERT_LEVELDB_OK
(
¿nd_fe
->
	`R—d
(10, 100, &
»suÉ
, 
sü©ch
));

130 
	`ASSERT_EQ
(0, 
»suÉ
.
	`com·»
("d"));

133 
	`ASSERT_TRUE
(!
¿nd_fe
->
	`R—d
(1000, 5, &
»suÉ
, 
sü©ch
).
	`ok
());

134 
d–‘e
 
¿nd_fe
;

135 
	}
}

137 
	$TEST_F
(
MemEnvTe¡
, 
Locks
) {

138 
FeLock
* 
lock
;

141 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`LockFe
("somfe", &
lock
));

142 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`UÆockFe
(
lock
));

143 
	}
}

145 
	$TEST_F
(
MemEnvTe¡
, 
Misc
) {

146 
¡d
::
¡ršg
 
‹¡_dœ
;

147 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`G‘Te¡DœeùÜy
(&
‹¡_dœ
));

148 
	`ASSERT_TRUE
(!
‹¡_dœ
.
	`em±y
());

150 
Wr™abËFe
* 
wr™abË_fe
;

151 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`NewWr™abËFe
("/a/b", &
wr™abË_fe
));

154 
	`ASSERT_LEVELDB_OK
(
wr™abË_fe
->
	`Sync
());

155 
	`ASSERT_LEVELDB_OK
(
wr™abË_fe
->
	`Flush
());

156 
	`ASSERT_LEVELDB_OK
(
wr™abË_fe
->
	`Clo£
());

157 
d–‘e
 
wr™abË_fe
;

158 
	}
}

160 
	$TEST_F
(
MemEnvTe¡
, 
L¬geWr™e
) {

161 cÚ¡ 
size_t
 
kWr™eSize
 = 300 * 1024;

162 * 
sü©ch
 = 
Ãw
 [
kWr™eSize
 * 2];

164 
¡d
::
¡ršg
 
wr™e_d©a
;

165 
size_t
 
i
 = 0; i < 
kWr™eSize
; ++i) {

166 
wr™e_d©a
.
	`­³nd
(1, 
¡©ic_ÿ¡
<>(
i
));

169 
Wr™abËFe
* 
wr™abË_fe
;

170 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`NewWr™abËFe
("/dœ/f", &
wr™abË_fe
));

171 
	`ASSERT_LEVELDB_OK
(
wr™abË_fe
->
	`Aµ’d
("foo"));

172 
	`ASSERT_LEVELDB_OK
(
wr™abË_fe
->
	`Aµ’d
(
wr™e_d©a
));

173 
d–‘e
 
wr™abË_fe
;

175 
Sequ’tŸlFe
* 
£q_fe
;

176 
Sliû
 
»suÉ
;

177 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`NewSequ’tŸlFe
("/dœ/f", &
£q_fe
));

178 
	`ASSERT_LEVELDB_OK
(
£q_fe
->
	`R—d
(3, &
»suÉ
, 
sü©ch
));

179 
	`ASSERT_EQ
(0, 
»suÉ
.
	`com·»
("foo"));

181 
size_t
 
»ad
 = 0;

182 
¡d
::
¡ršg
 
»ad_d©a
;

183 
»ad
 < 
kWr™eSize
) {

184 
	`ASSERT_LEVELDB_OK
(
£q_fe
->
	`R—d
(
kWr™eSize
 - 
»ad
, &
»suÉ
, 
sü©ch
));

185 
»ad_d©a
.
	`­³nd
(
»suÉ
.
	`d©a
(),„esuÉ.
	`size
());

186 
»ad
 +ğ
»suÉ
.
	`size
();

188 
	`ASSERT_TRUE
(
wr™e_d©a
 =ğ
»ad_d©a
);

189 
d–‘e
 
£q_fe
;

190 
d–‘e
[] 
sü©ch
;

191 
	}
}

193 
	$TEST_F
(
MemEnvTe¡
, 
Ov”wr™eO³nFe
) {

194 cÚ¡ 
kWr™e1D©a
[] = "Write #1 data";

195 cÚ¡ 
size_t
 
kFeD©aL’
 = (
kWr™e1D©a
) - 1;

196 cÚ¡ 
¡d
::
¡ršg
 
kTe¡FeName
 = 
‹¡šg
::
	`TempDœ
() + "leveldb-TestFile.dat";

198 
	`ASSERT_LEVELDB_OK
(
	`Wr™eSŒšgToFe
(
’v_
, 
kWr™e1D©a
, 
kTe¡FeName
));

200 
RªdomAcûssFe
* 
¿nd_fe
;

201 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`NewRªdomAcûssFe
(
kTe¡FeName
, &
¿nd_fe
));

203 cÚ¡ 
kWr™e2D©a
[] = "Write #2 data";

204 
	`ASSERT_LEVELDB_OK
(
	`Wr™eSŒšgToFe
(
’v_
, 
kWr™e2D©a
, 
kTe¡FeName
));

208 
Sliû
 
»suÉ
;

209 
sü©ch
[
kFeD©aL’
];

210 
	`ASSERT_LEVELDB_OK
(
¿nd_fe
->
	`R—d
(0, 
kFeD©aL’
, &
»suÉ
, 
sü©ch
));

211 
	`ASSERT_EQ
(0, 
»suÉ
.
	`com·»
(
kWr™e2D©a
));

213 
d–‘e
 
¿nd_fe
;

214 
	}
}

216 
	$TEST_F
(
MemEnvTe¡
, 
DBTe¡
) {

217 
O±iÚs
 
İtiÚs
;

218 
İtiÚs
.
ü—‹_if_missšg
 = 
Œue
;

219 
İtiÚs
.
’v
 = 
’v_
;

220 
DB
* 
db
;

222 cÚ¡ 
Sliû
 
keys
[] = {
	`Sliû
("aaa"), Slice("bbb"), Slice("ccc")};

223 cÚ¡ 
Sliû
 
v®s
[] = {
	`Sliû
("foo"), Slice("bar"), Slice("baz")};

225 
	`ASSERT_LEVELDB_OK
(
DB
::
	`O³n
(
İtiÚs
, "/dœ/db", &
db
));

226 
size_t
 
i
 = 0; i < 3; ++i) {

227 
	`ASSERT_LEVELDB_OK
(
db
->
	`Put
(
	`Wr™eO±iÚs
(), 
keys
[
i
], 
v®s
[i]));

230 
size_t
 
i
 = 0; i < 3; ++i) {

231 
¡d
::
¡ršg
 
»s
;

232 
	`ASSERT_LEVELDB_OK
(
db
->
	`G‘
(
	`R—dO±iÚs
(), 
keys
[
i
], &
»s
));

233 
	`ASSERT_TRUE
(
»s
 =ğ
v®s
[
i
]);

236 
I‹¿tÜ
* 
™”©Ü
 = 
db
->
	`NewI‹¿tÜ
(
	`R—dO±iÚs
());

237 
™”©Ü
->
	`S“kToFœ¡
();

238 
size_t
 
i
 = 0; i < 3; ++i) {

239 
	`ASSERT_TRUE
(
™”©Ü
->
	`V®id
());

240 
	`ASSERT_TRUE
(
keys
[
i
] =ğ
™”©Ü
->
	`key
());

241 
	`ASSERT_TRUE
(
v®s
[
i
] =ğ
™”©Ü
->
	`v®ue
());

242 
™”©Ü
->
	`Next
();

244 
	`ASSERT_TRUE
(!
™”©Ü
->
	`V®id
());

245 
d–‘e
 
™”©Ü
;

247 
DBIm¶
* 
dbi
 = 
»š‹½»t_ÿ¡
<DBIm¶*>(
db
);

248 
	`ASSERT_LEVELDB_OK
(
dbi
->
	`TEST_Com·ùMemTabË
());

250 
size_t
 
i
 = 0; i < 3; ++i) {

251 
¡d
::
¡ršg
 
»s
;

252 
	`ASSERT_LEVELDB_OK
(
db
->
	`G‘
(
	`R—dO±iÚs
(), 
keys
[
i
], &
»s
));

253 
	`ASSERT_TRUE
(
»s
 =ğ
v®s
[
i
]);

256 
d–‘e
 
db
;

257 
	}
}

	@include/leveldb/c.h

40 #iâdeà
STORAGE_LEVELDB_INCLUDE_C_H_


41 
	#STORAGE_LEVELDB_INCLUDE_C_H_


	)

43 
	~<¡d¬g.h
>

44 
	~<¡ddef.h
>

45 
	~<¡dšt.h
>

47 
	~"Ëv–db/expÜt.h
"

49 #ifdeà
__ılu¥lus


55 
Ëv–db_t
 
	tËv–db_t
;

56 
Ëv–db_ÿche_t
 
	tËv–db_ÿche_t
;

57 
Ëv–db_com·¿tÜ_t
 
	tËv–db_com·¿tÜ_t
;

58 
Ëv–db_’v_t
 
	tËv–db_’v_t
;

59 
Ëv–db_f–ock_t
 
	tËv–db_f–ock_t
;

60 
Ëv–db_f‹½Şicy_t
 
	tËv–db_f‹½Şicy_t
;

61 
Ëv–db_™”©Ü_t
 
	tËv–db_™”©Ü_t
;

62 
Ëv–db_logg”_t
 
	tËv–db_logg”_t
;

63 
Ëv–db_İtiÚs_t
 
	tËv–db_İtiÚs_t
;

64 
Ëv–db_¿ndomfe_t
 
	tËv–db_¿ndomfe_t
;

65 
Ëv–db_»adİtiÚs_t
 
	tËv–db_»adİtiÚs_t
;

66 
Ëv–db_£qfe_t
 
	tËv–db_£qfe_t
;

67 
Ëv–db_¢­shÙ_t
 
	tËv–db_¢­shÙ_t
;

68 
Ëv–db_wr™abËfe_t
 
	tËv–db_wr™abËfe_t
;

69 
Ëv–db_wr™eb©ch_t
 
	tËv–db_wr™eb©ch_t
;

70 
Ëv–db_wr™eİtiÚs_t
 
	tËv–db_wr™eİtiÚs_t
;

74 
LEVELDB_EXPORT
 
Ëv–db_t
* 
Ëv–db_İ’
(cÚ¡ 
Ëv–db_İtiÚs_t
* 
İtiÚs
,

75 cÚ¡ * 
Çme
, ** 
”½Œ
);

77 
LEVELDB_EXPORT
 
Ëv–db_şo£
(
Ëv–db_t
* 
db
);

79 
LEVELDB_EXPORT
 
Ëv–db_put
(
Ëv–db_t
* 
db
,

80 cÚ¡ 
Ëv–db_wr™eİtiÚs_t
* 
İtiÚs
,

81 cÚ¡ * 
key
, 
size_t
 
keyËn
, cÚ¡ * 
v®
,

82 
size_t
 
v®Ën
, ** 
”½Œ
);

84 
LEVELDB_EXPORT
 
Ëv–db_d–‘e
(
Ëv–db_t
* 
db
,

85 cÚ¡ 
Ëv–db_wr™eİtiÚs_t
* 
İtiÚs
,

86 cÚ¡ * 
key
, 
size_t
 
keyËn
,

87 ** 
”½Œ
);

89 
LEVELDB_EXPORT
 
Ëv–db_wr™e
(
Ëv–db_t
* 
db
,

90 cÚ¡ 
Ëv–db_wr™eİtiÚs_t
* 
İtiÚs
,

91 
Ëv–db_wr™eb©ch_t
* 
b©ch
, ** 
”½Œ
);

95 
LEVELDB_EXPORT
 * 
Ëv–db_g‘
(
Ëv–db_t
* 
db
,

96 cÚ¡ 
Ëv–db_»adİtiÚs_t
* 
İtiÚs
,

97 cÚ¡ * 
key
, 
size_t
 
keyËn
, size_t* 
v®Ën
,

98 ** 
”½Œ
);

100 
LEVELDB_EXPORT
 
Ëv–db_™”©Ü_t
* 
Ëv–db_ü—‹_™”©Ü
(

101 
Ëv–db_t
* 
db
, cÚ¡ 
Ëv–db_»adİtiÚs_t
* 
İtiÚs
);

103 
LEVELDB_EXPORT
 cÚ¡ 
Ëv–db_¢­shÙ_t
* 
Ëv–db_ü—‹_¢­shÙ
(
Ëv–db_t
* 
db
);

105 
LEVELDB_EXPORT
 
Ëv–db_»Ëa£_¢­shÙ
(

106 
Ëv–db_t
* 
db
, cÚ¡ 
Ëv–db_¢­shÙ_t
* 
¢­shÙ
);

110 
LEVELDB_EXPORT
 * 
Ëv–db_´İ”ty_v®ue
(
Ëv–db_t
* 
db
,

111 cÚ¡ * 
´İÇme
);

113 
LEVELDB_EXPORT
 
Ëv–db_­´oxim©e_sizes
(

114 
Ëv–db_t
* 
db
, 
num_¿nges
, cÚ¡ * cÚ¡* 
¿nge_¡¬t_key
,

115 cÚ¡ 
size_t
* 
¿nge_¡¬t_key_Ën
, cÚ¡ * cÚ¡* 
¿nge_lim™_key
,

116 cÚ¡ 
size_t
* 
¿nge_lim™_key_Ën
, 
ušt64_t
* 
sizes
);

118 
LEVELDB_EXPORT
 
Ëv–db_com·ù_¿nge
(
Ëv–db_t
* 
db
, cÚ¡ * 
¡¬t_key
,

119 
size_t
 
¡¬t_key_Ën
,

120 cÚ¡ * 
lim™_key
,

121 
size_t
 
lim™_key_Ën
);

125 
LEVELDB_EXPORT
 
Ëv–db_de¡roy_db
(cÚ¡ 
Ëv–db_İtiÚs_t
* 
İtiÚs
,

126 cÚ¡ * 
Çme
, ** 
”½Œ
);

128 
LEVELDB_EXPORT
 
Ëv–db_»·œ_db
(cÚ¡ 
Ëv–db_İtiÚs_t
* 
İtiÚs
,

129 cÚ¡ * 
Çme
, ** 
”½Œ
);

133 
LEVELDB_EXPORT
 
Ëv–db_™”_de¡roy
(
Ëv–db_™”©Ü_t
*);

134 
LEVELDB_EXPORT
 
ušt8_t
 
Ëv–db_™”_v®id
(cÚ¡ 
Ëv–db_™”©Ü_t
*);

135 
LEVELDB_EXPORT
 
Ëv–db_™”_£ek_to_fœ¡
(
Ëv–db_™”©Ü_t
*);

136 
LEVELDB_EXPORT
 
Ëv–db_™”_£ek_to_Ï¡
(
Ëv–db_™”©Ü_t
*);

137 
LEVELDB_EXPORT
 
Ëv–db_™”_£ek
(
Ëv–db_™”©Ü_t
*, cÚ¡ * 
k
,

138 
size_t
 
kËn
);

139 
LEVELDB_EXPORT
 
Ëv–db_™”_Ãxt
(
Ëv–db_™”©Ü_t
*);

140 
LEVELDB_EXPORT
 
Ëv–db_™”_´ev
(
Ëv–db_™”©Ü_t
*);

141 
LEVELDB_EXPORT
 cÚ¡ * 
Ëv–db_™”_key
(cÚ¡ 
Ëv–db_™”©Ü_t
*,

142 
size_t
* 
kËn
);

143 
LEVELDB_EXPORT
 cÚ¡ * 
Ëv–db_™”_v®ue
(cÚ¡ 
Ëv–db_™”©Ü_t
*,

144 
size_t
* 
vËn
);

145 
LEVELDB_EXPORT
 
Ëv–db_™”_g‘_”rÜ
(cÚ¡ 
Ëv–db_™”©Ü_t
*,

146 ** 
”½Œ
);

150 
LEVELDB_EXPORT
 
Ëv–db_wr™eb©ch_t
* 
Ëv–db_wr™eb©ch_ü—‹
();

151 
LEVELDB_EXPORT
 
Ëv–db_wr™eb©ch_de¡roy
(
Ëv–db_wr™eb©ch_t
*);

152 
LEVELDB_EXPORT
 
Ëv–db_wr™eb©ch_ş—r
(
Ëv–db_wr™eb©ch_t
*);

153 
LEVELDB_EXPORT
 
Ëv–db_wr™eb©ch_put
(
Ëv–db_wr™eb©ch_t
*,

154 cÚ¡ * 
key
, 
size_t
 
kËn
,

155 cÚ¡ * 
v®
, 
size_t
 
vËn
);

156 
LEVELDB_EXPORT
 
Ëv–db_wr™eb©ch_d–‘e
(
Ëv–db_wr™eb©ch_t
*,

157 cÚ¡ * 
key
, 
size_t
 
kËn
);

158 
LEVELDB_EXPORT
 
Ëv–db_wr™eb©ch_™”©e
(

159 cÚ¡ 
Ëv–db_wr™eb©ch_t
*, * 
¡©e
,

160 (*
put
)(*, cÚ¡ * 
k
, 
size_t
 
kËn
, cÚ¡ * 
v
, size_ˆ
vËn
),

161 (*
d–‘ed
)(*, cÚ¡ * 
k
, 
size_t
 
kËn
));

162 
LEVELDB_EXPORT
 
Ëv–db_wr™eb©ch_­³nd
(

163 
Ëv–db_wr™eb©ch_t
* 
de¡š©iÚ
, cÚ¡†ev–db_wr™eb©ch_t* 
sourû
);

167 
LEVELDB_EXPORT
 
Ëv–db_İtiÚs_t
* 
Ëv–db_İtiÚs_ü—‹
();

168 
LEVELDB_EXPORT
 
Ëv–db_İtiÚs_de¡roy
(
Ëv–db_İtiÚs_t
*);

169 
LEVELDB_EXPORT
 
Ëv–db_İtiÚs_£t_com·¿tÜ
(
Ëv–db_İtiÚs_t
*,

170 
Ëv–db_com·¿tÜ_t
*);

171 
LEVELDB_EXPORT
 
Ëv–db_İtiÚs_£t_f‹r_pŞicy
(
Ëv–db_İtiÚs_t
*,

172 
Ëv–db_f‹½Şicy_t
*);

173 
LEVELDB_EXPORT
 
Ëv–db_İtiÚs_£t_ü—‹_if_missšg
(
Ëv–db_İtiÚs_t
*,

174 
ušt8_t
);

175 
LEVELDB_EXPORT
 
Ëv–db_İtiÚs_£t_”rÜ_if_exi¡s
(
Ëv–db_İtiÚs_t
*,

176 
ušt8_t
);

177 
LEVELDB_EXPORT
 
Ëv–db_İtiÚs_£t_·¿noid_checks
(
Ëv–db_İtiÚs_t
*,

178 
ušt8_t
);

179 
LEVELDB_EXPORT
 
Ëv–db_İtiÚs_£t_’v
(
Ëv–db_İtiÚs_t
*, 
Ëv–db_’v_t
*);

180 
LEVELDB_EXPORT
 
Ëv–db_İtiÚs_£t_šfo_log
(
Ëv–db_İtiÚs_t
*,

181 
Ëv–db_logg”_t
*);

182 
LEVELDB_EXPORT
 
Ëv–db_İtiÚs_£t_wr™e_bufãr_size
(
Ëv–db_İtiÚs_t
*,

183 
size_t
);

184 
LEVELDB_EXPORT
 
Ëv–db_İtiÚs_£t_max_İ’_fes
(
Ëv–db_İtiÚs_t
*, );

185 
LEVELDB_EXPORT
 
Ëv–db_İtiÚs_£t_ÿche
(
Ëv–db_İtiÚs_t
*,

186 
Ëv–db_ÿche_t
*);

187 
LEVELDB_EXPORT
 
Ëv–db_İtiÚs_£t_block_size
(
Ëv–db_İtiÚs_t
*, 
size_t
);

188 
LEVELDB_EXPORT
 
Ëv–db_İtiÚs_£t_block_»¡¬t_š‹rv®
(

189 
Ëv–db_İtiÚs_t
*, );

190 
LEVELDB_EXPORT
 
Ëv–db_İtiÚs_£t_max_fe_size
(
Ëv–db_İtiÚs_t
*,

191 
size_t
);

193 ’um { 
Ëv–db_no_com´essiÚ
 = 0, 
Ëv–db_¢­py_com´essiÚ
 = 1 };

194 
LEVELDB_EXPORT
 
Ëv–db_İtiÚs_£t_com´essiÚ
(
Ëv–db_İtiÚs_t
*, );

198 
LEVELDB_EXPORT
 
Ëv–db_com·¿tÜ_t
* 
Ëv–db_com·¿tÜ_ü—‹
(

199 * 
¡©e
, (*
de¡ruùÜ
)(*),

200 (*
com·»
)(*, cÚ¡ * 
a
, 
size_t
 
®’
, cÚ¡ * 
b
,

201 
size_t
 
bËn
),

202 cÚ¡ * (*
Çme
)(*));

203 
LEVELDB_EXPORT
 
Ëv–db_com·¿tÜ_de¡roy
(
Ëv–db_com·¿tÜ_t
*);

207 
LEVELDB_EXPORT
 
Ëv–db_f‹½Şicy_t
* 
Ëv–db_f‹½Şicy_ü—‹
(

208 * 
¡©e
, (*
de¡ruùÜ
)(*),

209 * (*
ü—‹_f‹r
)(*, cÚ¡ * cÚ¡* 
key_¬¿y
,

210 cÚ¡ 
size_t
* 
key_Ëngth_¬¿y
, 
num_keys
,

211 
size_t
* 
f‹r_Ëngth
),

212 
ušt8_t
 (*
key_may_m©ch
)(*, cÚ¡ * 
key
, 
size_t
 
Ëngth
,

213 cÚ¡ * 
f‹r
, 
size_t
 
f‹r_Ëngth
),

214 cÚ¡ * (*
Çme
)(*));

215 
LEVELDB_EXPORT
 
Ëv–db_f‹½Şicy_de¡roy
(
Ëv–db_f‹½Şicy_t
*);

217 
LEVELDB_EXPORT
 
Ëv–db_f‹½Şicy_t
* 
Ëv–db_f‹½Şicy_ü—‹_bloom
(

218 
b™s_³r_key
);

222 
LEVELDB_EXPORT
 
Ëv–db_»adİtiÚs_t
* 
Ëv–db_»adİtiÚs_ü—‹
();

223 
LEVELDB_EXPORT
 
Ëv–db_»adİtiÚs_de¡roy
(
Ëv–db_»adİtiÚs_t
*);

224 
LEVELDB_EXPORT
 
Ëv–db_»adİtiÚs_£t_v”ify_checksums
(

225 
Ëv–db_»adİtiÚs_t
*, 
ušt8_t
);

226 
LEVELDB_EXPORT
 
Ëv–db_»adİtiÚs_£t_fl_ÿche
(
Ëv–db_»adİtiÚs_t
*,

227 
ušt8_t
);

228 
LEVELDB_EXPORT
 
Ëv–db_»adİtiÚs_£t_¢­shÙ
(
Ëv–db_»adİtiÚs_t
*,

229 cÚ¡ 
Ëv–db_¢­shÙ_t
*);

233 
LEVELDB_EXPORT
 
Ëv–db_wr™eİtiÚs_t
* 
Ëv–db_wr™eİtiÚs_ü—‹
();

234 
LEVELDB_EXPORT
 
Ëv–db_wr™eİtiÚs_de¡roy
(
Ëv–db_wr™eİtiÚs_t
*);

235 
LEVELDB_EXPORT
 
Ëv–db_wr™eİtiÚs_£t_sync
(
Ëv–db_wr™eİtiÚs_t
*,

236 
ušt8_t
);

240 
LEVELDB_EXPORT
 
Ëv–db_ÿche_t
* 
Ëv–db_ÿche_ü—‹_Ìu
(
size_t
 
ÿ·c™y
);

241 
LEVELDB_EXPORT
 
Ëv–db_ÿche_de¡roy
(
Ëv–db_ÿche_t
* 
ÿche
);

245 
LEVELDB_EXPORT
 
Ëv–db_’v_t
* 
Ëv–db_ü—‹_deçuÉ_’v
();

246 
LEVELDB_EXPORT
 
Ëv–db_’v_de¡roy
(
Ëv–db_’v_t
*);

249 
LEVELDB_EXPORT
 * 
Ëv–db_’v_g‘_‹¡_dœeùÜy
(
Ëv–db_’v_t
*);

258 
LEVELDB_EXPORT
 
Ëv–db_ä“
(* 
±r
);

261 
LEVELDB_EXPORT
 
Ëv–db_majÜ_v”siÚ
();

264 
LEVELDB_EXPORT
 
Ëv–db_mšÜ_v”siÚ
();

266 #ifdeà
__ılu¥lus


	@include/leveldb/cache.h

18 #iâdeà
STORAGE_LEVELDB_INCLUDE_CACHE_H_


19 
	#STORAGE_LEVELDB_INCLUDE_CACHE_H_


	)

21 
	~<c¡dšt
>

23 
	~"Ëv–db/expÜt.h
"

24 
	~"Ëv–db/¦iû.h
"

26 
Çme¥aû
 
	gËv–db
 {

28 
şass
 
LEVELDB_EXPORT
 
	gCache
;

32 
LEVELDB_EXPORT
 
Cache
* 
NewLRUCache
(
size_t
 
ÿ·c™y
);

34 şas 
	cLEVELDB_EXPORT
 
	gCache
 {

35 
	gpublic
:

36 
Cache
() = ;

38 
Cache
(cÚ¡ Cache&èğ
d–‘e
;

39 
	gCache
& 
	gİ”©Ü
=(cÚ¡ 
Cache
&èğ
d–‘e
;

43 
	gvœtu®
 ~
Cache
();

46 
	sHªdË
 {};

57 
vœtu®
 
HªdË
* 
In£¹
(cÚ¡ 
Sliû
& 
key
, * 
v®ue
, 
size_t
 
ch¬ge
,

58 (*
d–‘”
)(cÚ¡ 
Sliû
& 
key
, * 
v®ue
)) = 0;

65 
vœtu®
 
HªdË
* 
Lookup
(cÚ¡ 
Sliû
& 
key
) = 0;

70 
vœtu®
 
R–—£
(
HªdË
* 
hªdË
) = 0;

76 
vœtu®
 * 
V®ue
(
HªdË
* 
hªdË
) = 0;

81 
vœtu®
 
E¿£
(cÚ¡ 
Sliû
& 
key
) = 0;

87 
vœtu®
 
ušt64_t
 
NewId
() = 0;

94 
vœtu®
 
PruÃ
() {}

98 
vœtu®
 
size_t
 
TÙ®Ch¬ge
() const = 0;

	@include/leveldb/comparator.h

5 #iâdeà
STORAGE_LEVELDB_INCLUDE_COMPARATOR_H_


6 
	#STORAGE_LEVELDB_INCLUDE_COMPARATOR_H_


	)

8 
	~<¡ršg
>

10 
	~"Ëv–db/expÜt.h
"

12 
Çme¥aû
 
	gËv–db
 {

14 
şass
 
	gSliû
;

20 şas 
	cLEVELDB_EXPORT
 
	gCom·¿tÜ
 {

21 
	gpublic
:

22 
vœtu®
 ~
Com·¿tÜ
();

28 
vœtu®
 
Com·»
(cÚ¡ 
Sliû
& 
a
, cÚ¡ Sliû& 
b
) const = 0;

40 
vœtu®
 cÚ¡ * 
Name
() const = 0;

48 
vœtu®
 
FšdShÜ‹¡S•¬©Ü
(
¡d
::
¡ršg
* 
¡¬t
,

49 cÚ¡ 
Sliû
& 
lim™
) const = 0;

54 
vœtu®
 
FšdShÜtSucûssÜ
(
¡d
::
¡ršg
* 
key
) const = 0;

60 
LEVELDB_EXPORT
 cÚ¡ 
Com·¿tÜ
* 
By‹wi£Com·¿tÜ
();

	@include/leveldb/db.h

5 #iâdeà
STORAGE_LEVELDB_INCLUDE_DB_H_


6 
	#STORAGE_LEVELDB_INCLUDE_DB_H_


	)

8 
	~<c¡dšt
>

9 
	~<c¡dio
>

11 
	~"Ëv–db/expÜt.h
"

12 
	~"Ëv–db/™”©Ü.h
"

13 
	~"Ëv–db/İtiÚs.h
"

15 
Çme¥aû
 
	gËv–db
 {

18 cÚ¡ 
	gkMajÜV”siÚ
 = 1;

19 cÚ¡ 
	gkMšÜV”siÚ
 = 23;

21 
	gO±iÚs
;

22 
	gR—dO±iÚs
;

23 
	gWr™eO±iÚs
;

24 
şass
 
	gWr™eB©ch
;

29 şas 
	cLEVELDB_EXPORT
 
	gSÇpshÙ
 {

30 
	g´Ùeùed
:

31 
vœtu®
 ~
SÇpshÙ
();

35 
LEVELDB_EXPORT
 
	gRªge
 {

36 
Rªge
() = ;

37 
Rªge
(cÚ¡ 
Sliû
& 
s
, cÚ¡ Sliû& 
l
è: 
¡¬t
(s), 
lim™
(l) {}

39 
Sliû
 
	g¡¬t
;

40 
Sliû
 
	glim™
;

46 şas 
	cLEVELDB_EXPORT
 
	gDB
 {

47 
	gpublic
:

53 
Stus
 
O³n
(cÚ¡ 
O±iÚs
& 
İtiÚs
, cÚ¡ 
¡d
::
¡ršg
& 
Çme
,

54 
DB
** 
db±r
);

56 
DB
() = ;

58 
DB
(cÚ¡ DB&èğ
d–‘e
;

59 
	gDB
& 
	gİ”©Ü
=(cÚ¡ 
DB
&èğ
d–‘e
;

61 
	gvœtu®
 ~
DB
();

66 
vœtu®
 
Stus
 
Put
(cÚ¡ 
Wr™eO±iÚs
& 
İtiÚs
, cÚ¡ 
Sliû
& 
key
,

67 cÚ¡ 
Sliû
& 
v®ue
) = 0;

73 
vœtu®
 
Stus
 
D–‘e
(cÚ¡ 
Wr™eO±iÚs
& 
İtiÚs
, cÚ¡ 
Sliû
& 
key
) = 0;

78 
vœtu®
 
Stus
 
Wr™e
(cÚ¡ 
Wr™eO±iÚs
& 
İtiÚs
, 
Wr™eB©ch
* 
upd©es
) = 0;

87 
vœtu®
 
Stus
 
G‘
(cÚ¡ 
R—dO±iÚs
& 
İtiÚs
, cÚ¡ 
Sliû
& 
key
,

88 
¡d
::
¡ršg
* 
v®ue
) = 0;

96 
vœtu®
 
I‹¿tÜ
* 
NewI‹¿tÜ
(cÚ¡ 
R—dO±iÚs
& 
İtiÚs
) = 0;

102 
vœtu®
 cÚ¡ 
SÇpshÙ
* 
G‘SÇpshÙ
() = 0;

106 
vœtu®
 
R–—£SÇpshÙ
(cÚ¡ 
SÇpshÙ
* 
¢­shÙ
) = 0;

124 
vœtu®
 
boŞ
 
G‘Prİ”ty
(cÚ¡ 
Sliû
& 
´İ”ty
, 
¡d
::
¡ršg
* 
v®ue
) = 0;

134 
vœtu®
 
G‘Aµroxim©eSizes
(cÚ¡ 
Rªge
* 
¿nge
, 
n
,

135 
ušt64_t
* 
sizes
) = 0;

147 
vœtu®
 
Com·ùRªge
(cÚ¡ 
Sliû
* 
begš
, cÚ¡ Sliû* 
’d
) = 0;

155 
LEVELDB_EXPORT
 
Stus
 
De¡royDB
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
,

156 cÚ¡ 
O±iÚs
& 
İtiÚs
);

162 
LEVELDB_EXPORT
 
Stus
 
R•aœDB
(cÚ¡ 
¡d
::
¡ršg
& 
dbÇme
,

163 cÚ¡ 
O±iÚs
& 
İtiÚs
);

	@include/leveldb/dumpfile.h

5 #iâdeà
STORAGE_LEVELDB_INCLUDE_DUMPFILE_H_


6 
	#STORAGE_LEVELDB_INCLUDE_DUMPFILE_H_


	)

8 
	~<¡ršg
>

10 
	~"Ëv–db/’v.h
"

11 
	~"Ëv–db/expÜt.h
"

12 
	~"Ëv–db/¡©us.h
"

14 
Çme¥aû
 
	gËv–db
 {

23 
LEVELDB_EXPORT
 
Stus
 
DumpFe
(
Env
* 
’v
, cÚ¡ 
¡d
::
¡ršg
& 
âame
,

24 
Wr™abËFe
* 
d¡
);

	@include/leveldb/env.h

13 #iâdeà
STORAGE_LEVELDB_INCLUDE_ENV_H_


14 
	#STORAGE_LEVELDB_INCLUDE_ENV_H_


	)

16 
	~<c¡d¬g
>

17 
	~<c¡dšt
>

18 
	~<¡ršg
>

19 
	~<veùÜ
>

21 
	~"Ëv–db/expÜt.h
"

22 
	~"Ëv–db/¡©us.h
"

25 #ià
defšed
(
_WIN32
)

36 #ià
defšed
(
D–‘eFe
)

37 #undeà
D–‘eFe


38 
	#LEVELDB_DELETEFILE_UNDEFINED


	)

42 
Çme¥aû
 
	gËv–db
 {

44 
şass
 
	gFeLock
;

45 
şass
 
	gLogg”
;

46 
şass
 
	gRªdomAcûssFe
;

47 
şass
 
	gSequ’tŸlFe
;

48 
şass
 
	gSliû
;

49 
şass
 
	gWr™abËFe
;

51 şas 
	cLEVELDB_EXPORT
 
	gEnv
 {

52 
	gpublic
:

53 
Env
();

55 
Env
(cÚ¡ Env&èğ
d–‘e
;

56 
	gEnv
& 
	gİ”©Ü
=(cÚ¡ 
Env
&èğ
d–‘e
;

58 
	gvœtu®
 ~
Env
();

65 
Env
* 
DeçuÉ
();

74 
vœtu®
 
Stus
 
NewSequ’tŸlFe
(cÚ¡ 
¡d
::
¡ršg
& 
âame
,

75 
Sequ’tŸlFe
** 
»suÉ
) = 0;

85 
vœtu®
 
Stus
 
NewRªdomAcûssFe
(cÚ¡ 
¡d
::
¡ršg
& 
âame
,

86 
RªdomAcûssFe
** 
»suÉ
) = 0;

95 
vœtu®
 
Stus
 
NewWr™abËFe
(cÚ¡ 
¡d
::
¡ršg
& 
âame
,

96 
Wr™abËFe
** 
»suÉ
) = 0;

110 
vœtu®
 
Stus
 
NewAµ’dabËFe
(cÚ¡ 
¡d
::
¡ršg
& 
âame
,

111 
Wr™abËFe
** 
»suÉ
);

114 
vœtu®
 
boŞ
 
FeExi¡s
(cÚ¡ 
¡d
::
¡ršg
& 
âame
) = 0;

119 
vœtu®
 
Stus
 
G‘Chd»n
(cÚ¡ 
¡d
::
¡ršg
& 
dœ
,

120 
¡d
::
veùÜ
<¡d::
¡ršg
>* 
»suÉ
) = 0;

130 
vœtu®
 
Stus
 
RemoveFe
(cÚ¡ 
¡d
::
¡ršg
& 
âame
);

139 
vœtu®
 
Stus
 
D–‘eFe
(cÚ¡ 
¡d
::
¡ršg
& 
âame
);

142 
vœtu®
 
Stus
 
C»©eDœ
(cÚ¡ 
¡d
::
¡ršg
& 
dœÇme
) = 0;

153 
vœtu®
 
Stus
 
RemoveDœ
(cÚ¡ 
¡d
::
¡ršg
& 
dœÇme
);

162 
vœtu®
 
Stus
 
D–‘eDœ
(cÚ¡ 
¡d
::
¡ršg
& 
dœÇme
);

165 
vœtu®
 
Stus
 
G‘FeSize
(cÚ¡ 
¡d
::
¡ršg
& 
âame
, 
ušt64_t
* 
fe_size
) = 0;

168 
vœtu®
 
Stus
 
R’ameFe
(cÚ¡ 
¡d
::
¡ršg
& 
¤c
,

169 cÚ¡ 
¡d
::
¡ršg
& 
rg‘
) = 0;

185 
vœtu®
 
Stus
 
LockFe
(cÚ¡ 
¡d
::
¡ršg
& 
âame
, 
FeLock
** 
lock
) = 0;

190 
vœtu®
 
Stus
 
UÆockFe
(
FeLock
* 
lock
) = 0;

198 
vœtu®
 
ScheduË
((*
funùiÚ
)(* 
¬g
), *‡rg) = 0;

202 
vœtu®
 
S¹Th»ad
((*
funùiÚ
)(* 
¬g
), *‡rg) = 0;

208 
vœtu®
 
Stus
 
G‘Te¡DœeùÜy
(
¡d
::
¡ršg
* 
·th
) = 0;

211 
vœtu®
 
Stus
 
NewLogg”
(cÚ¡ 
¡d
::
¡ršg
& 
âame
, 
Logg”
** 
»suÉ
) = 0;

215 
vœtu®
 
ušt64_t
 
NowMiüos
() = 0;

218 
vœtu®
 
SË•FÜMiüo£cÚds
(
miüos
) = 0;

222 şas 
	cLEVELDB_EXPORT
 
	gSequ’tŸlFe
 {

223 
	gpublic
:

224 
Sequ’tŸlFe
() = ;

226 
Sequ’tŸlFe
(cÚ¡ Sequ’tŸlFe&èğ
d–‘e
;

227 
	gSequ’tŸlFe
& 
	gİ”©Ü
=(cÚ¡ 
Sequ’tŸlFe
&èğ
d–‘e
;

229 
	gvœtu®
 ~
Sequ’tŸlFe
();

239 
vœtu®
 
Stus
 
R—d
(
size_t
 
n
, 
Sliû
* 
»suÉ
, * 
sü©ch
) = 0;

248 
vœtu®
 
Stus
 
Sk
(
ušt64_t
 
n
) = 0;

252 şas 
	cLEVELDB_EXPORT
 
	gRªdomAcûssFe
 {

253 
	gpublic
:

254 
RªdomAcûssFe
() = ;

256 
RªdomAcûssFe
(cÚ¡ RªdomAcûssFe&èğ
d–‘e
;

257 
	gRªdomAcûssFe
& 
	gİ”©Ü
=(cÚ¡ 
RªdomAcûssFe
&èğ
d–‘e
;

259 
	gvœtu®
 ~
RªdomAcûssFe
();

270 
vœtu®
 
Stus
 
R—d
(
ušt64_t
 
off£t
, 
size_t
 
n
, 
Sliû
* 
»suÉ
,

271 * 
sü©ch
) const = 0;

277 şas 
	cLEVELDB_EXPORT
 
	gWr™abËFe
 {

278 
	gpublic
:

279 
Wr™abËFe
() = ;

281 
Wr™abËFe
(cÚ¡ Wr™abËFe&èğ
d–‘e
;

282 
	gWr™abËFe
& 
	gİ”©Ü
=(cÚ¡ 
Wr™abËFe
&èğ
d–‘e
;

284 
	gvœtu®
 ~
Wr™abËFe
();

286 
vœtu®
 
Stus
 
Aµ’d
(cÚ¡ 
Sliû
& 
d©a
) = 0;

287 
vœtu®
 
Stus
 
Clo£
() = 0;

288 
vœtu®
 
Stus
 
Flush
() = 0;

289 
vœtu®
 
Stus
 
Sync
() = 0;

293 şas 
	cLEVELDB_EXPORT
 
	gLogg”
 {

294 
	gpublic
:

295 
Logg”
() = ;

297 
Logg”
(cÚ¡ Logg”&èğ
d–‘e
;

298 
	gLogg”
& 
	gİ”©Ü
=(cÚ¡ 
Logg”
&èğ
d–‘e
;

300 
	gvœtu®
 ~
Logg”
();

303 
vœtu®
 
Logv
(cÚ¡ * 
fÜm©
, 
¡d
::
va_li¡
 
­
) = 0;

307 şas 
	cLEVELDB_EXPORT
 
	gFeLock
 {

308 
	gpublic
:

309 
FeLock
() = ;

311 
FeLock
(cÚ¡ FeLock&èğ
d–‘e
;

312 
	gFeLock
& 
	gİ”©Ü
=(cÚ¡ 
FeLock
&èğ
d–‘e
;

314 
	gvœtu®
 ~
FeLock
();

318 
	$Log
(
Logg”
* 
šfo_log
, cÚ¡ * 
fÜm©
, ...)

319 #ià
	`defšed
(
__GNUC__
è|| 
	$defšed
(
__şªg__
)

320 
	`__©Œibu‹__
((
	$__fÜm©__
(
__´štf__
, 2, 3)))

325 
LEVELDB_EXPORT
 
Stus
 
	`Wr™eSŒšgToFe
(
Env
* 
’v
, cÚ¡ 
Sliû
& 
d©a
,

326 cÚ¡ 
¡d
::
¡ršg
& 
âame
);

329 
LEVELDB_EXPORT
 
Stus
 
	`R—dFeToSŒšg
(
Env
* 
’v
, cÚ¡ 
¡d
::
¡ršg
& 
âame
,

330 
¡d
::
¡ršg
* 
d©a
);

335 şas 
	cLEVELDB_EXPORT
 
EnvW¿µ”
 : 
public
 
Env
 {

336 
public
:

338 
ex¶ic™
 
	`EnvW¿µ”
(
Env
* 
t
è: 
	`rg‘_
(t) {}

339 
vœtu®
 ~
	`EnvW¿µ”
();

342 
Env
* 
	`rg‘
(ècÚ¡ {  
rg‘_
; }

345 
Stus
 
	`NewSequ’tŸlFe
(cÚ¡ 
¡d
::
¡ršg
& 
f
, 
Sequ’tŸlFe
** 
r
è
ov”ride
 {

346  
rg‘_
->
	`NewSequ’tŸlFe
(
f
, 
r
);

348 
Stus
 
	`NewRªdomAcûssFe
(cÚ¡ 
¡d
::
¡ršg
& 
f
,

349 
RªdomAcûssFe
** 
r
è
ov”ride
 {

350  
rg‘_
->
	`NewRªdomAcûssFe
(
f
, 
r
);

352 
Stus
 
	`NewWr™abËFe
(cÚ¡ 
¡d
::
¡ršg
& 
f
, 
Wr™abËFe
** 
r
è
ov”ride
 {

353  
rg‘_
->
	`NewWr™abËFe
(
f
, 
r
);

355 
Stus
 
	`NewAµ’dabËFe
(cÚ¡ 
¡d
::
¡ršg
& 
f
, 
Wr™abËFe
** 
r
è
ov”ride
 {

356  
rg‘_
->
	`NewAµ’dabËFe
(
f
, 
r
);

358 
boŞ
 
	`FeExi¡s
(cÚ¡ 
¡d
::
¡ršg
& 
f
è
ov”ride
 {

359  
rg‘_
->
	`FeExi¡s
(
f
);

361 
Stus
 
	`G‘Chd»n
(cÚ¡ 
¡d
::
¡ršg
& 
dœ
,

362 
¡d
::
veùÜ
<¡d::
¡ršg
>* 
r
è
ov”ride
 {

363  
rg‘_
->
	`G‘Chd»n
(
dœ
, 
r
);

365 
Stus
 
	`RemoveFe
(cÚ¡ 
¡d
::
¡ršg
& 
f
è
ov”ride
 {

366  
rg‘_
->
	`RemoveFe
(
f
);

368 
Stus
 
	`C»©eDœ
(cÚ¡ 
¡d
::
¡ršg
& 
d
è
ov”ride
 {

369  
rg‘_
->
	`C»©eDœ
(
d
);

371 
Stus
 
	`RemoveDœ
(cÚ¡ 
¡d
::
¡ršg
& 
d
è
ov”ride
 {

372  
rg‘_
->
	`RemoveDœ
(
d
);

374 
Stus
 
	`G‘FeSize
(cÚ¡ 
¡d
::
¡ršg
& 
f
, 
ušt64_t
* 
s
è
ov”ride
 {

375  
rg‘_
->
	`G‘FeSize
(
f
, 
s
);

377 
Stus
 
	`R’ameFe
(cÚ¡ 
¡d
::
¡ršg
& 
s
, cÚ¡ std::¡ršg& 
t
è
ov”ride
 {

378  
rg‘_
->
	`R’ameFe
(
s
, 
t
);

380 
Stus
 
	`LockFe
(cÚ¡ 
¡d
::
¡ršg
& 
f
, 
FeLock
** 
l
è
ov”ride
 {

381  
rg‘_
->
	`LockFe
(
f
, 
l
);

383 
Stus
 
	`UÆockFe
(
FeLock
* 
l
è
ov”ride
 {  
rg‘_
->UnlockFile(l); }

384 
	`ScheduË
((*
f
)(*), * 
a
è
ov”ride
 {

385  
rg‘_
->
	`ScheduË
(
f
, 
a
);

387 
	`S¹Th»ad
((*
f
)(*), * 
a
è
ov”ride
 {

388  
rg‘_
->
	`S¹Th»ad
(
f
, 
a
);

390 
Stus
 
	`G‘Te¡DœeùÜy
(
¡d
::
¡ršg
* 
·th
è
ov”ride
 {

391  
rg‘_
->
	`G‘Te¡DœeùÜy
(
·th
);

393 
Stus
 
	`NewLogg”
(cÚ¡ 
¡d
::
¡ršg
& 
âame
, 
Logg”
** 
»suÉ
è
ov”ride
 {

394  
rg‘_
->
	`NewLogg”
(
âame
, 
»suÉ
);

396 
ušt64_t
 
	`NowMiüos
(è
ov”ride
 {  
rg‘_
->NowMicros(); }

397 
	`SË•FÜMiüo£cÚds
(
miüos
è
ov”ride
 {

398 
rg‘_
->
	`SË•FÜMiüo£cÚds
(
miüos
);

401 
´iv©e
:

402 
Env
* 
rg‘_
;

403 
	}
};

409 #ià
defšed
(
_WIN32
è&& defšed(
LEVELDB_DELETEFILE_UNDEFINED
)

410 #ià
defšed
(
UNICODE
)

411 
	#D–‘eFe
 
D–‘eFeW


	)

413 
	#D–‘eFe
 
D–‘eFeA


	)

	@include/leveldb/export.h

5 #iâdeà
STORAGE_LEVELDB_INCLUDE_EXPORT_H_


6 
	#STORAGE_LEVELDB_INCLUDE_EXPORT_H_


	)

8 #ià!
defšed
(
LEVELDB_EXPORT
)

10 #ià
defšed
(
LEVELDB_SHARED_LIBRARY
)

11 #ià
defšed
(
_WIN32
)

13 #ià
defšed
(
LEVELDB_COMPILE_LIBRARY
)

14 
	#LEVELDB_EXPORT
 
	`__deş¥ec
(
dÎexpÜt
)

	)

16 
	#LEVELDB_EXPORT
 
	`__deş¥ec
(
dÎimpÜt
)

	)

20 #ià
defšed
(
LEVELDB_COMPILE_LIBRARY
)

21 
	#LEVELDB_EXPORT
 
	`__©Œibu‹__
((
	`visib™y
("deçuÉ")))

	)

23 
	#LEVELDB_EXPORT


	)

28 
	#LEVELDB_EXPORT


	)

	@include/leveldb/filter_policy.h

16 #iâdeà
STORAGE_LEVELDB_INCLUDE_FILTER_POLICY_H_


17 
	#STORAGE_LEVELDB_INCLUDE_FILTER_POLICY_H_


	)

19 
	~<¡ršg
>

21 
	~"Ëv–db/expÜt.h
"

23 
Çme¥aû
 
	gËv–db
 {

25 
şass
 
	gSliû
;

27 şas 
	cLEVELDB_EXPORT
 
	gF‹rPŞicy
 {

28 
	gpublic
:

29 
vœtu®
 ~
F‹rPŞicy
();

35 
vœtu®
 cÚ¡ * 
Name
() const = 0;

43 
vœtu®
 
C»©eF‹r
(cÚ¡ 
Sliû
* 
keys
, 
n
,

44 
¡d
::
¡ršg
* 
d¡
) const = 0;

51 
vœtu®
 
boŞ
 
KeyMayM©ch
(cÚ¡ 
Sliû
& 
key
, cÚ¡ Sliû& 
f‹r
) const = 0;

68 
LEVELDB_EXPORT
 cÚ¡ 
F‹rPŞicy
* 
NewBloomF‹rPŞicy
(
b™s_³r_key
);

	@include/leveldb/iterator.h

15 #iâdeà
STORAGE_LEVELDB_INCLUDE_ITERATOR_H_


16 
	#STORAGE_LEVELDB_INCLUDE_ITERATOR_H_


	)

18 
	~"Ëv–db/expÜt.h
"

19 
	~"Ëv–db/¦iû.h
"

20 
	~"Ëv–db/¡©us.h
"

22 
Çme¥aû
 
	gËv–db
 {

24 şas 
	cLEVELDB_EXPORT
 
	gI‹¿tÜ
 {

25 
	gpublic
:

26 
I‹¿tÜ
();

28 
I‹¿tÜ
(cÚ¡ I‹¿tÜ&èğ
d–‘e
;

29 
	gI‹¿tÜ
& 
	gİ”©Ü
=(cÚ¡ 
I‹¿tÜ
&èğ
d–‘e
;

31 
	gvœtu®
 ~
I‹¿tÜ
();

35 
vœtu®
 
boŞ
 
V®id
() const = 0;

39 
vœtu®
 
S“kToFœ¡
() = 0;

43 
vœtu®
 
S“kToLa¡
() = 0;

48 
vœtu®
 
S“k
(cÚ¡ 
Sliû
& 
rg‘
) = 0;

53 
vœtu®
 
Next
() = 0;

58 
vœtu®
 
P»v
() = 0;

64 
vœtu®
 
Sliû
 
key
() const = 0;

70 
vœtu®
 
Sliû
 
v®ue
() const = 0;

73 
vœtu®
 
Stus
 
¡©us
() const = 0;

80 
usšg
 
	gCËªupFunùiÚ
 = (*)(* 
¬g1
, * 
	g¬g2
);

81 
Regi¡”CËªup
(
CËªupFunùiÚ
 
funùiÚ
, * 
¬g1
, * 
¬g2
);

83 
	g´iv©e
:

86 
	sCËªupNode
 {

88 
boŞ
 
IsEm±y
(ècÚ¡ {  
funùiÚ
 =ğ
nuÎ±r
; }

90 
Run
() {

91 
as£¹
(
funùiÚ
 !ğ
nuÎ±r
);

92 (*
	gfunùiÚ
)(
	g¬g1
, 
	g¬g2
);

96 
CËªupFunùiÚ
 
	gfunùiÚ
;

97 * 
	g¬g1
;

98 * 
	g¬g2
;

99 
CËªupNode
* 
	gÃxt
;

101 
CËªupNode
 
	gş—nup_h—d_
;

105 
LEVELDB_EXPORT
 
I‹¿tÜ
* 
NewEm±yI‹¿tÜ
();

108 
LEVELDB_EXPORT
 
I‹¿tÜ
* 
NewE¼ÜI‹¿tÜ
(cÚ¡ 
Stus
& 
¡©us
);

	@include/leveldb/options.h

5 #iâdeà
STORAGE_LEVELDB_INCLUDE_OPTIONS_H_


6 
	#STORAGE_LEVELDB_INCLUDE_OPTIONS_H_


	)

8 
	~<c¡ddef
>

10 
	~"Ëv–db/expÜt.h
"

12 
Çme¥aû
 
	gËv–db
 {

14 
şass
 
	gCache
;

15 
şass
 
	gCom·¿tÜ
;

16 
şass
 
	gEnv
;

17 
şass
 
	gF‹rPŞicy
;

18 
şass
 
	gLogg”
;

19 
şass
 
	gSÇpshÙ
;

25 
	eCom´essiÚTy³
 {

28 
	gkNoCom´essiÚ
 = 0x0,

29 
	gkSÇµyCom´essiÚ
 = 0x1,

30 
	gkZ¡dCom´essiÚ
 = 0x2,

34 
LEVELDB_EXPORT
 
	gO±iÚs
 {

36 
O±iÚs
();

47 cÚ¡ 
Com·¿tÜ
* 
	gcom·¿tÜ
;

50 
boŞ
 
	gü—‹_if_missšg
 = 
çl£
;

53 
boŞ
 
	g”rÜ_if_exi¡s
 = 
çl£
;

60 
boŞ
 
	g·¿noid_checks
 = 
çl£
;

65 
Env
* 
	g’v
;

70 
Logg”
* 
	gšfo_log
 = 
nuÎ±r
;

83 
size_t
 
	gwr™e_bufãr_size
 = 4 * 1024 * 1024;

88 
	gmax_İ’_fes
 = 1000;

95 
Cache
* 
	gblock_ÿche
 = 
nuÎ±r
;

101 
size_t
 
	gblock_size
 = 4 * 1024;

106 
	gblock_»¡¬t_š‹rv®
 = 16;

116 
size_t
 
	gmax_fe_size
 = 2 * 1024 * 1024;

132 
Com´essiÚTy³
 
	gcom´essiÚ
 = 
kSÇµyCom´essiÚ
;

136 
	gz¡d_com´essiÚ_Ëv–
 = 1;

142 
boŞ
 
	g»u£_logs
 = 
çl£
;

147 cÚ¡ 
F‹rPŞicy
* 
	gf‹r_pŞicy
 = 
nuÎ±r
;

151 
LEVELDB_EXPORT
 
	gR—dO±iÚs
 {

154 
boŞ
 
	gv”ify_checksums
 = 
çl£
;

158 
boŞ
 
	gfl_ÿche
 = 
Œue
;

164 cÚ¡ 
SÇpshÙ
* 
	g¢­shÙ
 = 
nuÎ±r
;

168 
LEVELDB_EXPORT
 
	gWr™eO±iÚs
 {

169 
Wr™eO±iÚs
() = ;

185 
boŞ
 
	gsync
 = 
çl£
;

	@include/leveldb/slice.h

15 #iâdeà
STORAGE_LEVELDB_INCLUDE_SLICE_H_


16 
	#STORAGE_LEVELDB_INCLUDE_SLICE_H_


	)

18 
	~<ÿs£¹
>

19 
	~<c¡ddef
>

20 
	~<c¡ršg
>

21 
	~<¡ršg
>

23 
	~"Ëv–db/expÜt.h
"

25 
Çme¥aû
 
	gËv–db
 {

27 şas 
	cLEVELDB_EXPORT
 
	gSliû
 {

28 
	gpublic
:

30 
Sliû
(è: 
d©a_
(""), 
size_
(0) {}

33 
Sliû
(cÚ¡ * 
d
, 
size_t
 
n
è: 
d©a_
(d), 
size_
(n) {}

36 
Sliû
(cÚ¡ 
¡d
::
¡ršg
& 
s
è: 
d©a_
(s.
d©a
()), 
size_
(s.
size
()) {}

39 
Sliû
(cÚ¡ * 
s
è: 
d©a_
(s), 
size_
(
¡¾’
(s)) {}

42 
Sliû
(const Slice&) = ;

43 
	gSliû
& 
	gİ”©Ü
=(cÚ¡ 
Sliû
&) = ;

46 cÚ¡ * 
d©a
(ècÚ¡ {  
	gd©a_
; }

49 
size_t
 
size
(ècÚ¡ {  
	gsize_
; }

52 
boŞ
 
em±y
(ècÚ¡ {  
	gsize_
 == 0; }

56 
	gİ”©Ü
[](
size_t
 
	gn
) const {

57 
as£¹
(
n
 < 
size
());

58  
	gd©a_
[
n
];

62 
ş—r
() {

63 
	gd©a_
 = "";

64 
	gsize_
 = 0;

68 
»move_´efix
(
size_t
 
n
) {

69 
as£¹
(
n
 <ğ
size
());

70 
	gd©a_
 +ğ
n
;

71 
	gsize_
 -ğ
n
;

75 
	g¡d
::
¡ršg
 
ToSŒšg
(ècÚ¡ {  
¡d
::¡ršg(
d©a_
, 
size_
); }

81 
com·»
(cÚ¡ 
Sliû
& 
b
) const;

84 
boŞ
 
¡¬ts_w™h
(cÚ¡ 
Sliû
& 
x
) const {

85  ((
	gsize_
 >ğ
x
.
size_
è&& (
memcmp
(
d©a_
, x.data_, x.size_) == 0));

88 
	g´iv©e
:

89 cÚ¡ * 
d©a_
;

90 
size_t
 
	gsize_
;

93 
šlše
 
boŞ
 
	gİ”©Ü
==(cÚ¡ 
Sliû
& 
x
, cÚ¡ 
	gSliû
& 
	gy
) {

94  ((
	gx
.
size
(è=ğ
y
.size()) &&

95 (
memcmp
(
x
.
d©a
(), 
y
.d©a(), x.
size
()) == 0));

98 
šlše
 
boŞ
 
	gİ”©Ü
!=(cÚ¡ 
Sliû
& 
x
, cÚ¡ 
	gSliû
& 
	gy
è{  !(
	gx
 =ğ
y
); }

100 
šlše
 
	gSliû
::
	$com·»
(cÚ¡ 
Sliû
& 
b
) const {

101 cÚ¡ 
size_t
 
mš_Ën
 = (
size_
 < 
b
.size_) ? size_ : b.size_;

102 
r
 = 
	`memcmp
(
d©a_
, 
b
.d©a_, 
mš_Ën
);

103 ià(
r
 == 0) {

104 ià(
size_
 < 
b
.size_)

105 
r
 = -1;

106 ià(
size_
 > 
b
.size_)

107 
r
 = +1;

109  
r
;

110 
	}
}

	@include/leveldb/status.h

13 #iâdeà
STORAGE_LEVELDB_INCLUDE_STATUS_H_


14 
	#STORAGE_LEVELDB_INCLUDE_STATUS_H_


	)

16 
	~<®gÜ™hm
>

17 
	~<¡ršg
>

19 
	~"Ëv–db/expÜt.h
"

20 
	~"Ëv–db/¦iû.h
"

22 
Çme¥aû
 
	gËv–db
 {

24 şas 
	cLEVELDB_EXPORT
 
	gStus
 {

25 
	gpublic
:

27 
Stus
(è
nÛxû±
 : 
¡©e_
(
nuÎ±r
) {}

28 ~
Stus
(è{ 
d–‘e
[] 
¡©e_
; }

30 
Stus
(cÚ¡ Stus& 
rhs
);

31 
	gStus
& 
	gİ”©Ü
=(cÚ¡ 
Stus
& 
rhs
);

33 
Stus
(Stus&& 
rhs
è
	gnÛxû±
 : 
¡©e_
Ôhs.¡©e_è{„hs.¡©e_ = 
nuÎ±r
; }

34 
	gStus
& 
	gİ”©Ü
=(
Stus
&& 
rhs
è
nÛxû±
;

37 
Stus
 
OK
() {  Status(); }

40 
Stus
 
NÙFound
(cÚ¡ 
Sliû
& 
msg
, cÚ¡ Sliû& 
msg2
 = Slice()) {

41  
Stus
(
kNÙFound
, 
msg
, 
msg2
);

43 
Stus
 
CÜru±iÚ
(cÚ¡ 
Sliû
& 
msg
, cÚ¡ Sliû& 
msg2
 = Slice()) {

44  
Stus
(
kCÜru±iÚ
, 
msg
, 
msg2
);

46 
Stus
 
NÙSuµÜ‹d
(cÚ¡ 
Sliû
& 
msg
, cÚ¡ Sliû& 
msg2
 = Slice()) {

47  
Stus
(
kNÙSuµÜ‹d
, 
msg
, 
msg2
);

49 
Stus
 
Inv®idArgum’t
(cÚ¡ 
Sliû
& 
msg
, cÚ¡ Sliû& 
msg2
 = Slice()) {

50  
Stus
(
kInv®idArgum’t
, 
msg
, 
msg2
);

52 
Stus
 
IOE¼Ü
(cÚ¡ 
Sliû
& 
msg
, cÚ¡ Sliû& 
msg2
 = Slice()) {

53  
Stus
(
kIOE¼Ü
, 
msg
, 
msg2
);

57 
boŞ
 
ok
(ècÚ¡ {  (
	g¡©e_
 =ğ
nuÎ±r
); }

60 
boŞ
 
IsNÙFound
(ècÚ¡ {  
code
(è=ğ
kNÙFound
; }

63 
boŞ
 
IsCÜru±iÚ
(ècÚ¡ {  
code
(è=ğ
kCÜru±iÚ
; }

66 
boŞ
 
IsIOE¼Ü
(ècÚ¡ {  
code
(è=ğ
kIOE¼Ü
; }

69 
boŞ
 
IsNÙSuµÜ‹dE¼Ü
(ècÚ¡ {  
code
(è=ğ
kNÙSuµÜ‹d
; }

72 
boŞ
 
IsInv®idArgum’t
(ècÚ¡ {  
code
(è=ğ
kInv®idArgum’t
; }

76 
	g¡d
::
¡ršg
 
ToSŒšg
() const;

78 
	g´iv©e
:

79 
	eCode
 {

80 
kOk
 = 0,

81 
	gkNÙFound
 = 1,

82 
	gkCÜru±iÚ
 = 2,

83 
	gkNÙSuµÜ‹d
 = 3,

84 
	gkInv®idArgum’t
 = 4,

85 
	gkIOE¼Ü
 = 5

88 
Code
 
code
() const {

89  (
	g¡©e_
 =ğ
nuÎ±r
è? 
kOk
 : 
¡©ic_ÿ¡
<
Code
>(
¡©e_
[4]);

92 
Stus
(
Code
 
code
, cÚ¡ 
Sliû
& 
msg
, cÚ¡ Sliû& 
msg2
);

93 cÚ¡ * 
CİyS‹
(cÚ¡ * 
s
);

100 cÚ¡ * 
	g¡©e_
;

103 
šlše
 
	gStus
::
	$Stus
(cÚ¡ 
Stus
& 
rhs
) {

104 
¡©e_
 = (
rhs
.¡©e_ =ğ
nuÎ±r
è?‚uÎ±¸: 
	`CİyS‹
(rhs.state_);

105 
	}
}

106 
šlše
 
	gStus
& Stus::
İ”©Ü
=(cÚ¡ 
Stus
& 
rhs
) {

109 ià(
¡©e_
 !ğ
rhs
.state_) {

110 
d–‘e
[] 
¡©e_
;

111 
	g¡©e_
 = (
rhs
.
¡©e_
 =ğ
nuÎ±r
è?‚uÎ±¸: 
CİyS‹
(rhs.state_);

113  *
	gthis
;

115 
šlše
 
	gStus
& Stus::
İ”©Ü
=(
Stus
&& 
rhs
è
nÛxû±
 {

116 
¡d
::
sw­
(
¡©e_
, 
rhs
.state_);

117  *
	gthis
;

	@include/leveldb/table.h

5 #iâdeà
STORAGE_LEVELDB_INCLUDE_TABLE_H_


6 
	#STORAGE_LEVELDB_INCLUDE_TABLE_H_


	)

8 
	~<c¡dšt
>

10 
	~"Ëv–db/expÜt.h
"

11 
	~"Ëv–db/™”©Ü.h
"

13 
Çme¥aû
 
	gËv–db
 {

15 
şass
 
	gBlock
;

16 
şass
 
	gBlockHªdË
;

17 
şass
 
	gFoÙ”
;

18 
	gO±iÚs
;

19 
şass
 
	gRªdomAcûssFe
;

20 
	gR—dO±iÚs
;

21 
şass
 
	gTabËCache
;

26 şas 
	cLEVELDB_EXPORT
 
	gTabË
 {

27 
	gpublic
:

40 
Stus
 
O³n
(cÚ¡ 
O±iÚs
& 
İtiÚs
, 
RªdomAcûssFe
* 
fe
,

41 
ušt64_t
 
fe_size
, 
TabË
** 
bË
);

43 
TabË
(cÚ¡ TabË&èğ
d–‘e
;

44 
	gTabË
& 
	gİ”©Ü
=(cÚ¡ 
TabË
&èğ
d–‘e
;

46 ~
TabË
();

51 
I‹¿tÜ
* 
NewI‹¿tÜ
(cÚ¡ 
R—dO±iÚs
&) const;

59 
ušt64_t
 
Aµroxim©eOff£tOf
(cÚ¡ 
Sliû
& 
key
) const;

61 
	g´iv©e
:

62 
ä›nd
 
şass
 
TabËCache
;

63 
	gR•
;

65 
I‹¿tÜ
* 
BlockR—d”
(*, cÚ¡ 
R—dO±iÚs
&, cÚ¡ 
Sliû
&);

67 
ex¶ic™
 
TabË
(
R•
* 
»p
è: 
»p_
(rep) {}

72 
Stus
 
IÁ”ÇlG‘
(cÚ¡ 
R—dO±iÚs
&, cÚ¡ 
Sliû
& 
key
, * 
¬g
,

73 (*
hªdË_»suÉ
)(* 
¬g
, cÚ¡ 
Sliû
& 
k
,

74 cÚ¡ 
Sliû
& 
v
));

76 
R—dM‘a
(cÚ¡ 
FoÙ”
& 
foÙ”
);

77 
R—dF‹r
(cÚ¡ 
Sliû
& 
f‹r_hªdË_v®ue
);

79 
R•
* cÚ¡ 
	g»p_
;

	@include/leveldb/table_builder.h

13 #iâdeà
STORAGE_LEVELDB_INCLUDE_TABLE_BUILDER_H_


14 
	#STORAGE_LEVELDB_INCLUDE_TABLE_BUILDER_H_


	)

16 
	~<c¡dšt
>

18 
	~"Ëv–db/expÜt.h
"

19 
	~"Ëv–db/İtiÚs.h
"

20 
	~"Ëv–db/¡©us.h
"

22 
Çme¥aû
 
	gËv–db
 {

24 
şass
 
	gBlockBud”
;

25 
şass
 
	gBlockHªdË
;

26 
şass
 
	gWr™abËFe
;

28 şas 
	cLEVELDB_EXPORT
 
	gTabËBud”
 {

29 
	gpublic
:

33 
TabËBud”
(cÚ¡ 
O±iÚs
& 
İtiÚs
, 
Wr™abËFe
* 
fe
);

35 
TabËBud”
(cÚ¡ TabËBud”&èğ
d–‘e
;

36 
	gTabËBud”
& 
	gİ”©Ü
=(cÚ¡ 
TabËBud”
&èğ
d–‘e
;

39 ~
TabËBud”
();

47 
Stus
 
ChªgeO±iÚs
(cÚ¡ 
O±iÚs
& 
İtiÚs
);

52 
Add
(cÚ¡ 
Sliû
& 
key
, cÚ¡ Sliû& 
v®ue
);

58 
Flush
();

61 
Stus
 
¡©us
() const;

66 
Stus
 
Fšish
();

73 
AbªdÚ
();

76 
ušt64_t
 
NumEÁr›s
() const;

80 
ušt64_t
 
FeSize
() const;

82 
	g´iv©e
:

83 
boŞ
 
ok
(ècÚ¡ {  
¡©us
().ok(); }

84 
Wr™eBlock
(
BlockBud”
* 
block
, 
BlockHªdË
* 
hªdË
);

85 
Wr™eRawBlock
(cÚ¡ 
Sliû
& 
d©a
, 
Com´essiÚTy³
, 
BlockHªdË
* 
hªdË
);

87 
	gR•
;

88 
R•
* 
	g»p_
;

	@include/leveldb/write_batch.h

21 #iâdeà
STORAGE_LEVELDB_INCLUDE_WRITE_BATCH_H_


22 
	#STORAGE_LEVELDB_INCLUDE_WRITE_BATCH_H_


	)

24 
	~<¡ršg
>

26 
	~"Ëv–db/expÜt.h
"

27 
	~"Ëv–db/¡©us.h
"

29 
Çme¥aû
 
	gËv–db
 {

31 
şass
 
	gSliû
;

33 şas 
	cLEVELDB_EXPORT
 
	gWr™eB©ch
 {

34 
	gpublic
:

35 şas 
	cLEVELDB_EXPORT
 
HªdËr
 {

36 
public
:

37 
vœtu®
 ~
HªdËr
();

38 
vœtu®
 
Put
(cÚ¡ 
Sliû
& 
key
, cÚ¡ Sliû& 
v®ue
) = 0;

39 
vœtu®
 
D–‘e
(cÚ¡ 
Sliû
& 
key
) = 0;

42 
Wr™eB©ch
();

45 
Wr™eB©ch
(const WriteBatch&) = ;

46 
	gWr™eB©ch
& 
	gİ”©Ü
=(cÚ¡ 
Wr™eB©ch
&) = ;

48 ~
Wr™eB©ch
();

51 
Put
(cÚ¡ 
Sliû
& 
key
, cÚ¡ Sliû& 
v®ue
);

54 
D–‘e
(cÚ¡ 
Sliû
& 
key
);

57 
CË¬
();

63 
size_t
 
Aµroxim©eSize
() const;

70 
Aµ’d
(cÚ¡ 
Wr™eB©ch
& 
sourû
);

73 
Stus
 
I‹¿‹
(
HªdËr
* 
hªdËr
) const;

75 
	g´iv©e
:

76 
ä›nd
 
şass
 
Wr™eB©chIÁ”Çl
;

78 
	g¡d
::
¡ršg
 
»p_
;

	@issues/issue178_test.cc

6 
	~<c¡dlib
>

7 
	~<io¡»am
>

8 
	~<s¡»am
>

10 
	~"g‹¡/g‹¡.h
"

11 
	~"Ëv–db/db.h
"

12 
	~"Ëv–db/wr™e_b©ch.h
"

13 
	~"ut/‹¡ut.h
"

15 
	gÇme¥aû
 {

17 cÚ¡ 
	gkNumKeys
 = 1100000;

19 
	g¡d
::
¡ršg
 
Key1
(
i
) {

20 
buf
[100];

21 
	g¡d
::
¢´štf
(
buf
, (buf), "my_key_%d", 
i
);

22  
	gbuf
;

25 
	g¡d
::
¡ršg
 
Key2
(
i
è{  
Key1
(i) + "_xxx"; }

27 
TEST
(
Issue178
, 
Te¡
) {

29 
	g¡d
::
¡ršg
 
db·th
 = 
‹¡šg
::
TempDœ
() + "leveldb_cbug_test";

30 
De¡royDB
(
db·th
, 
Ëv–db
::
O±iÚs
());

35 
	gËv–db
::
DB
* 
db
;

36 
	gËv–db
::
O±iÚs
 
db_İtiÚs
;

37 
	gdb_İtiÚs
.
	gü—‹_if_missšg
 = 
Œue
;

38 
	gdb_İtiÚs
.
	gcom´essiÚ
 = 
Ëv–db
::
kNoCom´essiÚ
;

39 
ASSERT_LEVELDB_OK
(
Ëv–db
::
DB
::
O³n
(
db_İtiÚs
, 
db·th
, &
db
));

42 
	gËv–db
::
Wr™eB©ch
 
b©ch
;

43 
size_t
 
	gi
 = 0; i < 
	gkNumKeys
; i++) {

44 
	gb©ch
.
Put
(
Key1
(
i
), "value for„ange 1 key");

46 
ASSERT_LEVELDB_OK
(
db
->
Wr™e
(
Ëv–db
::
Wr™eO±iÚs
(), &
b©ch
));

49 
	gb©ch
.
CË¬
();

50 
size_t
 
	gi
 = 0; i < 
	gkNumKeys
; i++) {

51 
	gb©ch
.
Put
(
Key2
(
i
), "value for„ange 2 key");

53 
ASSERT_LEVELDB_OK
(
db
->
Wr™e
(
Ëv–db
::
Wr™eO±iÚs
(), &
b©ch
));

56 
	gb©ch
.
CË¬
();

57 
size_t
 
	gi
 = 0; i < 
	gkNumKeys
; i++) {

58 
	gb©ch
.
D–‘e
(
Key2
(
i
));

60 
ASSERT_LEVELDB_OK
(
db
->
Wr™e
(
Ëv–db
::
Wr™eO±iÚs
(), &
b©ch
));

63 
	g¡d
::
¡ršg
 
¡¬t_key
 = 
Key1
(0);

64 
	g¡d
::
¡ršg
 
’d_key
 = 
Key1
(
kNumKeys
 - 1);

65 
	gËv–db
::
Sliû
 
Ëa¡
(
¡¬t_key
.
d©a
(), s¹_key.
size
());

66 
	gËv–db
::
Sliû
 
g»©e¡
(
’d_key
.
d©a
(),ƒnd_key.
size
());

69 
	gdb
->
Com·ùRªge
(&
Ëa¡
, &
g»©e¡
);

72 
	gËv–db
::
I‹¿tÜ
* 
™”
 = 
db
->
NewI‹¿tÜ
(
Ëv–db
::
R—dO±iÚs
());

73 
size_t
 
	gnum_keys
 = 0;

74 
	g™”
->
S“kToFœ¡
(); i‹r->
V®id
(); i‹r->
Next
()) {

75 
	gnum_keys
++;

77 
d–‘e
 
	g™”
;

78 
ASSERT_EQ
(
kNumKeys
, 
num_keys
) << "Bad‚umber of keys";

81 
d–‘e
 
	gdb
;

82 
De¡royDB
(
db·th
, 
Ëv–db
::
O±iÚs
());

	@issues/issue200_test.cc

9 
	~"g‹¡/g‹¡.h
"

10 
	~"Ëv–db/db.h
"

11 
	~"ut/‹¡ut.h
"

13 
Çme¥aû
 
	gËv–db
 {

15 
TEST
(
Issue200
, 
Te¡
) {

17 
	g¡d
::
¡ršg
 
db·th
 = 
‹¡šg
::
TempDœ
() + "leveldb_issue200_test";

18 
De¡royDB
(
db·th
, 
O±iÚs
());

20 
DB
* 
	gdb
;

21 
O±iÚs
 
	gİtiÚs
;

22 
	gİtiÚs
.
	gü—‹_if_missšg
 = 
Œue
;

23 
ASSERT_LEVELDB_OK
(
DB
::
O³n
(
İtiÚs
, 
db·th
, &
db
));

25 
Wr™eO±iÚs
 
	gwr™e_İtiÚs
;

26 
ASSERT_LEVELDB_OK
(
db
->
Put
(
wr™e_İtiÚs
, "1", "b"));

27 
ASSERT_LEVELDB_OK
(
db
->
Put
(
wr™e_İtiÚs
, "2", "c"));

28 
ASSERT_LEVELDB_OK
(
db
->
Put
(
wr™e_İtiÚs
, "3", "d"));

29 
ASSERT_LEVELDB_OK
(
db
->
Put
(
wr™e_İtiÚs
, "4", "e"));

30 
ASSERT_LEVELDB_OK
(
db
->
Put
(
wr™e_İtiÚs
, "5", "f"));

32 
R—dO±iÚs
 
	g»ad_İtiÚs
;

33 
I‹¿tÜ
* 
	g™”
 = 
db
->
NewI‹¿tÜ
(
»ad_İtiÚs
);

36 
ASSERT_LEVELDB_OK
(
db
->
Put
(
wr™e_İtiÚs
, "25", "cd"));

38 
	g™”
->
S“k
("5");

39 
ASSERT_EQ
(
™”
->
key
().
ToSŒšg
(), "5");

40 
	g™”
->
P»v
();

41 
ASSERT_EQ
(
™”
->
key
().
ToSŒšg
(), "4");

42 
	g™”
->
P»v
();

43 
ASSERT_EQ
(
™”
->
key
().
ToSŒšg
(), "3");

44 
	g™”
->
Next
();

45 
ASSERT_EQ
(
™”
->
key
().
ToSŒšg
(), "4");

46 
	g™”
->
Next
();

47 
ASSERT_EQ
(
™”
->
key
().
ToSŒšg
(), "5");

49 
d–‘e
 
	g™”
;

50 
d–‘e
 
	gdb
;

51 
De¡royDB
(
db·th
, 
İtiÚs
);

	@issues/issue320_test.cc

5 
	~<c¡dšt
>

6 
	~<c¡dlib
>

7 
	~<io¡»am
>

8 
	~<memÜy
>

9 
	~<¡ršg
>

10 
	~<veùÜ
>

12 
	~"g‹¡/g‹¡.h
"

13 
	~"Ëv–db/db.h
"

14 
	~"Ëv–db/wr™e_b©ch.h
"

15 
	~"ut/‹¡ut.h
"

17 
Çme¥aû
 
	gËv–db
 {

19 
	gÇme¥aû
 {

22 
G’”©eRªdomNumb”
(
max
è{  
	g¡d
::
¿nd
() % max; }

24 
	g¡d
::
¡ršg
 
C»©eRªdomSŒšg
(
št32_t
 
šdex
) {

25 cÚ¡ 
size_t
 
Ën
 = 1024;

26 
	gby‹s
[
Ën
];

27 
size_t
 
	gi
 = 0;

28 
	gi
 < 8) {

29 
	gby‹s
[
i
] = 'a' + ((
šdex
 >> (4 * i)) & 0xf);

30 ++
	gi
;

32 
	gi
 < (
	gby‹s
)) {

33 
	gby‹s
[
i
] = 'a' + 
G’”©eRªdomNumb”
(26);

34 ++
	gi
;

36  
	g¡d
::
¡ršg
(
by‹s
, (bytes));

41 
TEST
(
Issue320
, 
Te¡
) {

42 
	g¡d
::
¤ªd
(0);

44 
boŞ
 
	gd–‘e_befÜe_put
 = 
çl£
;

45 
boŞ
 
	gk“p_¢­shÙs
 = 
Œue
;

47 
	g¡d
::
veùÜ
<
¡d
::
unique_±r
<¡d::
·œ
<¡d::
¡ršg
, std::¡ršg>>> 
‹¡_m­
(

49 
	g¡d
::
veùÜ
<
SÇpshÙ
 cÚ¡*> 
¢­shÙs
(100, 
nuÎ±r
);

51 
DB
* 
	gdb
;

52 
O±iÚs
 
	gİtiÚs
;

53 
	gİtiÚs
.
	gü—‹_if_missšg
 = 
Œue
;

55 
	g¡d
::
¡ršg
 
db·th
 = 
‹¡šg
::
TempDœ
() + "leveldb_issue320_test";

56 
ASSERT_LEVELDB_OK
(
DB
::
O³n
(
İtiÚs
, 
db·th
, &
db
));

58 
ušt32_t
 
	grg‘_size
 = 10000;

59 
ušt32_t
 
	gnum_™ems
 = 0;

60 
ušt32_t
 
	gcouÁ
 = 0;

61 
	g¡d
::
¡ršg
 
key
;

62 
	g¡d
::
¡ršg
 
v®ue
, 
	gŞd_v®ue
;

64 
Wr™eO±iÚs
 
	gwr™eO±iÚs
;

65 
R—dO±iÚs
 
	g»adO±iÚs
;

66 
	gcouÁ
 < 200000) {

67 ià((++
	gcouÁ
 % 1000) == 0) {

68 
¡d
::
cout
 << "couÁ: " << 
couÁ
 << std::
’dl
;

71 
	gšdex
 = 
G’”©eRªdomNumb”
(
‹¡_m­
.
size
());

72 
Wr™eB©ch
 
	gb©ch
;

74 ià(
	g‹¡_m­
[
šdex
] =ğ
nuÎ±r
) {

75 
num_™ems
++;

76 
	g‹¡_m­
[
šdex
].
»£t
(
Ãw
 
¡d
::
·œ
<¡d::
¡ršg
, std::string>(

77 
C»©eRªdomSŒšg
(
šdex
), CreateRandomString(index)));

78 
	gb©ch
.
Put
(
‹¡_m­
[
šdex
]->
fœ¡
,e¡_m­[šdex]->
£cÚd
);

80 
ASSERT_LEVELDB_OK
(

81 
db
->
G‘
(
»adO±iÚs
, 
‹¡_m­
[
šdex
]->
fœ¡
, &
Şd_v®ue
));

82 ià(
	gŞd_v®ue
 !ğ
‹¡_m­
[
šdex
]->
£cÚd
) {

83 
¡d
::
cout
 << "ERROR incÜ»ù v®u»tuºed by G‘" << std::
’dl
;

84 
	g¡d
::
cout
 << " couÁ=" << 
couÁ
 << 
¡d
::
’dl
;

85 
	g¡d
::
cout
 << " old v®ue=" << 
Şd_v®ue
 << 
¡d
::
’dl
;

86 
	g¡d
::
cout
 << "e¡_m­[šdex]->£cÚd=" << 
‹¡_m­
[
šdex
]->
£cÚd


87 << 
¡d
::
’dl
;

88 
	g¡d
::
cout
 << "e¡_m­[šdex]->fœ¡=" << 
‹¡_m­
[
šdex
]->
fœ¡


89 << 
¡d
::
’dl
;

90 
	g¡d
::
cout
 << " index=" << 
šdex
 << 
¡d
::
’dl
;

91 
ASSERT_EQ
(
Şd_v®ue
, 
‹¡_m­
[
šdex
]->
£cÚd
);

94 ià(
	gnum_™ems
 >ğ
rg‘_size
 && 
G’”©eRªdomNumb”
(100) > 30) {

95 
b©ch
.
D–‘e
(
‹¡_m­
[
šdex
]->
fœ¡
);

96 
	g‹¡_m­
[
šdex
] = 
nuÎ±r
;

97 --
	gnum_™ems
;

99 
	g‹¡_m­
[
šdex
]->
	g£cÚd
 = 
C»©eRªdomSŒšg
(index);

100 ià(
	gd–‘e_befÜe_put
è
	gb©ch
.
D–‘e
(
‹¡_m­
[
šdex
]->
fœ¡
);

101 
	gb©ch
.
Put
(
‹¡_m­
[
šdex
]->
fœ¡
,e¡_m­[šdex]->
£cÚd
);

105 
ASSERT_LEVELDB_OK
(
db
->
Wr™e
(
wr™eO±iÚs
, &
b©ch
));

107 ià(
	gk“p_¢­shÙs
 && 
G’”©eRªdomNumb”
(10) == 0) {

108 
i
 = 
G’”©eRªdomNumb”
(
¢­shÙs
.
size
());

109 ià(
	g¢­shÙs
[
i
] !ğ
nuÎ±r
) {

110 
db
->
R–—£SÇpshÙ
(
¢­shÙs
[
i
]);

112 
	g¢­shÙs
[
i
] = 
db
->
G‘SÇpshÙ
();

116 
SÇpshÙ
 cÚ¡* 
	g¢­shÙ
 : 
¢­shÙs
) {

117 ià(
¢­shÙ
) {

118 
db
->
R–—£SÇpshÙ
(
¢­shÙ
);

122 
d–‘e
 
	gdb
;

123 
De¡royDB
(
db·th
, 
İtiÚs
);

	@port/port.h

5 #iâdeà
STORAGE_LEVELDB_PORT_PORT_H_


6 
	#STORAGE_LEVELDB_PORT_PORT_H_


	)

8 
	~<¡ršg.h
>

13 #ià
defšed
(
LEVELDB_PLATFORM_POSIX
è|| defšed(
LEVELDB_PLATFORM_WINDOWS
)

14 
	~"pÜt/pÜt_¡dcxx.h
"

15 #–ià
defšed
(
LEVELDB_PLATFORM_CHROMIUM
)

16 
	~"pÜt/pÜt_chromium.h
"

	@port/port_example.h

10 #iâdeà
STORAGE_LEVELDB_PORT_PORT_EXAMPLE_H_


11 
	#STORAGE_LEVELDB_PORT_PORT_EXAMPLE_H_


	)

13 
	~"pÜt/th»ad_ªnÙ©iÚs.h
"

15 
Çme¥aû
 
	gËv–db
 {

16 
Çme¥aû
 
	gpÜt
 {

24 şas 
	cLOCKABLE
 
	gMu‹x
 {

25 
	gpublic
:

26 
Mu‹x
();

27 ~
Mu‹x
();

31 
Lock
(è
EXCLUSIVE_LOCK_FUNCTION
();

35 
UÆock
(è
UNLOCK_FUNCTION
();

40 
As£¹H–d
(è
ASSERT_EXCLUSIVE_LOCK
();

43 şas 
	cCÚdV¬
 {

44 
	gpublic
:

45 
ex¶ic™
 
CÚdV¬
(
Mu‹x
* 
mu
);

46 ~
CÚdV¬
();

52 
Wa™
();

55 
SigÇl
();

58 
SigÇlAÎ
();

65 
boŞ
 
SÇµy_Com´ess
(cÚ¡ * 
šput
, 
size_t
 
šput_Ëngth
,

66 
¡d
::
¡ršg
* 
ouut
);

71 
boŞ
 
SÇµy_G‘Uncom´es£dL’gth
(cÚ¡ * 
šput
, 
size_t
 
Ëngth
,

72 
size_t
* 
»suÉ
);

81 
boŞ
 
SÇµy_Uncom´ess
(cÚ¡ * 
šput_d©a
, 
size_t
 
šput_Ëngth
,

82 * 
ouut
);

86 
boŞ
 
Z¡d_Com´ess
(
Ëv–
, cÚ¡ * 
šput
, 
size_t
 
šput_Ëngth
,

87 
¡d
::
¡ršg
* 
ouut
);

92 
boŞ
 
Z¡d_G‘Uncom´es£dL’gth
(cÚ¡ * 
šput
, 
size_t
 
Ëngth
,

93 
size_t
* 
»suÉ
);

102 
boŞ
 
Z¡d_Uncom´ess
(cÚ¡ * 
šput_d©a
, 
size_t
 
šput_Ëngth
, * 
ouut
);

109 
boŞ
 
G‘H—pProfe
((*
func
)(*, cÚ¡ *, ), * 
¬g
);

115 
ušt32_t
 
AcûË¿‹dCRC32C
(ušt32_ˆ
üc
, cÚ¡ * 
buf
, 
size_t
 
size
);

	@port/port_stdcxx.h

5 #iâdeà
STORAGE_LEVELDB_PORT_PORT_STDCXX_H_


6 
	#STORAGE_LEVELDB_PORT_PORT_STDCXX_H_


	)

11 #ià
defšed
(
LEVELDB_HAS_PORT_CONFIG_H
)

13 #ià
LEVELDB_HAS_PORT_CONFIG_H


14 
	~"pÜt/pÜt_cÚfig.h
"

17 #–ià
defšed
(
__has_šşude
)

19 #ià
__has_šşude
("port/port_config.h")

20 
	~"pÜt/pÜt_cÚfig.h
"

25 #ià
HAVE_CRC32C


26 
	~<üc32c/üc32c.h
>

28 #ià
HAVE_SNAPPY


29 
	~<¢­py.h
>

31 #ià
HAVE_ZSTD


32 
	#ZSTD_STATIC_LINKING_ONLY


33 
	~<z¡d.h
>

	)

36 
	~<ÿs£¹
>

37 
	~<cÚd™iÚ_v¬ŸbË
>

38 
	~<c¡ddef
>

39 
	~<c¡dšt
>

40 
	~<mu‹x
>

41 
	~<¡ršg
>

43 
	~"pÜt/th»ad_ªnÙ©iÚs.h
"

45 
Çme¥aû
 
	gËv–db
 {

46 
Çme¥aû
 
	gpÜt
 {

48 
şass
 
	gCÚdV¬
;

51 şas 
	cLOCKABLE
 
	gMu‹x
 {

52 
	gpublic
:

53 
Mu‹x
() = ;

54 ~
Mu‹x
() = ;

56 
Mu‹x
(cÚ¡ Mu‹x&èğ
d–‘e
;

57 
	gMu‹x
& 
	gİ”©Ü
=(cÚ¡ 
Mu‹x
&èğ
d–‘e
;

59 
Lock
(è
EXCLUSIVE_LOCK_FUNCTION
(è{ 
	gmu_
.
lock
(); }

60 
UÆock
(è
UNLOCK_FUNCTION
(è{ 
	gmu_
.
uÆock
(); }

61 
As£¹H–d
(è
ASSERT_EXCLUSIVE_LOCK
() {}

63 
	g´iv©e
:

64 
ä›nd
 
şass
 
CÚdV¬
;

65 
	g¡d
::
mu‹x
 
mu_
;

69 şas 
	cCÚdV¬
 {

70 
	gpublic
:

71 
ex¶ic™
 
CÚdV¬
(
Mu‹x
* 
mu
è: 
mu_
(muè{ 
as£¹
(mu !ğ
nuÎ±r
); }

72 ~
CÚdV¬
() = ;

74 
CÚdV¬
(cÚ¡ CÚdV¬&èğ
d–‘e
;

75 
	gCÚdV¬
& 
	gİ”©Ü
=(cÚ¡ 
CÚdV¬
&èğ
d–‘e
;

77 
Wa™
() {

78 
	g¡d
::
unique_lock
<
¡d
::
mu‹x
> 
lock
(
mu_
->mu_, std::
adİt_lock
);

79 
	gcv_
.
wa™
(
lock
);

80 
	glock
.
»Ëa£
();

82 
SigÇl
(è{ 
	gcv_
.
nÙify_Úe
(); }

83 
SigÇlAÎ
(è{ 
	gcv_
.
nÙify_®l
(); }

85 
	g´iv©e
:

86 
¡d
::
cÚd™iÚ_v¬ŸbË
 
cv_
;

87 
Mu‹x
* cÚ¡ 
	gmu_
;

90 
šlše
 
boŞ
 
SÇµy_Com´ess
(cÚ¡ * 
šput
, 
size_t
 
Ëngth
,

91 
¡d
::
¡ršg
* 
ouut
) {

92 #ià
HAVE_SNAPPY


93 
ouut
->
»size
(
¢­py
::
MaxCom´es£dL’gth
(
Ëngth
));

94 
size_t
 
	gou’
;

95 
	g¢­py
::
RawCom´ess
(
šput
, 
Ëngth
, &(*
ouut
)[0], &
ou’
);

96 
	gouut
->
»size
(
ou’
);

97  
	gŒue
;

100 ()
	gšput
;

101 ()
	gËngth
;

102 ()
	gouut
;

105  
	gçl£
;

108 
šlše
 
boŞ
 
SÇµy_G‘Uncom´es£dL’gth
(cÚ¡ * 
šput
, 
size_t
 
Ëngth
,

109 
size_t
* 
»suÉ
) {

110 #ià
HAVE_SNAPPY


111  
	g¢­py
::
G‘Uncom´es£dL’gth
(
šput
, 
Ëngth
, 
»suÉ
);

114 ()
	gšput
;

115 ()
	gËngth
;

116 ()
	g»suÉ
;

117  
	gçl£
;

121 
šlše
 
boŞ
 
SÇµy_Uncom´ess
(cÚ¡ * 
šput
, 
size_t
 
Ëngth
, * 
ouut
) {

122 #ià
HAVE_SNAPPY


123  
	g¢­py
::
RawUncom´ess
(
šput
, 
Ëngth
, 
ouut
);

126 ()
	gšput
;

127 ()
	gËngth
;

128 ()
	gouut
;

129  
	gçl£
;

133 
šlše
 
boŞ
 
Z¡d_Com´ess
(
Ëv–
, cÚ¡ * 
šput
, 
size_t
 
Ëngth
,

134 
¡d
::
¡ršg
* 
ouut
) {

135 #ià
HAVE_ZSTD


137 
size_t
 
ou’
 = 
ZSTD_com´essBound
(
Ëngth
);

138 ià(
ZSTD_isE¼Ü
(
ou’
)) {

139  
	gçl£
;

141 
	gouut
->
»size
(
ou’
);

142 
ZSTD_CCtx
* 
	gùx
 = 
ZSTD_ü—‹CCtx
();

143 
ZSTD_com´essiÚP¬am‘”s
 
	g·¿m‘”s
 =

144 
ZSTD_g‘CP¬ams
(
Ëv–
, 
¡d
::
max
(
Ëngth
, 
size_t
{1}), 0);

145 
ZSTD_CCtx_£tCP¬ams
(
ùx
, 
·¿m‘”s
);

146 
	gou’
 = 
ZSTD_com´ess2
(
ùx
, &(*
ouut
)[0], ouut->
size
(), 
šput
, 
Ëngth
);

147 
ZSTD_ä“CCtx
(
ùx
);

148 ià(
ZSTD_isE¼Ü
(
ou’
)) {

149  
	gçl£
;

151 
	gouut
->
»size
(
ou’
);

152  
	gŒue
;

155 ()
	gËv–
;

156 ()
	gšput
;

157 ()
	gËngth
;

158 ()
	gouut
;

159  
	gçl£
;

163 
šlše
 
boŞ
 
Z¡d_G‘Uncom´es£dL’gth
(cÚ¡ * 
šput
, 
size_t
 
Ëngth
,

164 
size_t
* 
»suÉ
) {

165 #ià
HAVE_ZSTD


166 
size_t
 
	gsize
 = 
ZSTD_g‘F¿meCÚ‹ÁSize
(
šput
, 
Ëngth
);

167 ià(
	gsize
 =ğ0è 
çl£
;

168 *
	g»suÉ
 = 
size
;

169  
	gŒue
;

172 ()
	gšput
;

173 ()
	gËngth
;

174 ()
	g»suÉ
;

175  
	gçl£
;

179 
šlše
 
boŞ
 
Z¡d_Uncom´ess
(cÚ¡ * 
šput
, 
size_t
 
Ëngth
, * 
ouut
) {

180 #ià
HAVE_ZSTD


181 
size_t
 
	gou’
;

182 ià(!
Z¡d_G‘Uncom´es£dL’gth
(
šput
, 
Ëngth
, &
ou’
)) {

183  
	gçl£
;

185 
ZSTD_DCtx
* 
	gùx
 = 
ZSTD_ü—‹DCtx
();

186 
	gou’
 = 
ZSTD_decom´essDCtx
(
ùx
, 
ouut
, 
ou’
, 
šput
, 
Ëngth
);

187 
ZSTD_ä“DCtx
(
ùx
);

188 ià(
ZSTD_isE¼Ü
(
ou’
)) {

189  
	gçl£
;

191  
	gŒue
;

194 ()
	gšput
;

195 ()
	gËngth
;

196 ()
	gouut
;

197  
	gçl£
;

201 
šlše
 
boŞ
 
G‘H—pProfe
((*
func
)(*, cÚ¡ *, ), * 
¬g
) {

203 ()
	gfunc
;

204 ()
	g¬g
;

205  
	gçl£
;

208 
šlše
 
ušt32_t
 
AcûË¿‹dCRC32C
(ušt32_ˆ
üc
, cÚ¡ * 
buf
, 
size_t
 
size
) {

209 #ià
HAVE_CRC32C


210  ::
üc32c
::
Ex‹nd
(
üc
, 
»š‹½»t_ÿ¡
<cÚ¡ 
ušt8_t
*>(
buf
), 
size
);

213 ()
	güc
;

214 ()
	gbuf
;

215 ()
	gsize
;

	@port/thread_annotations.h

5 #iâdeà
STORAGE_LEVELDB_PORT_THREAD_ANNOTATIONS_H_


6 
	#STORAGE_LEVELDB_PORT_THREAD_ANNOTATIONS_H_


	)

12 #ià!
defšed
(
THREAD_ANNOTATION_ATTRIBUTE__
)

14 #ià
defšed
(
__şªg__
)

16 
	#THREAD_ANNOTATION_ATTRIBUTE__
(
x
è
	`__©Œibu‹__
((x))

	)

18 
	#THREAD_ANNOTATION_ATTRIBUTE__
(
x
)

20 

	)

23 #iâdeà
GUARDED_BY


24 
	#GUARDED_BY
(
x
è
	`THREAD_ANNOTATION_ATTRIBUTE__
(
	`gu¬ded_by
(x))

	)

27 #iâdeà
PT_GUARDED_BY


28 
	#PT_GUARDED_BY
(
x
è
	`THREAD_ANNOTATION_ATTRIBUTE__
(
	`±_gu¬ded_by
(x))

	)

31 #iâdeà
ACQUIRED_AFTER


32 
	#ACQUIRED_AFTER
(...) \

33 
	`THREAD_ANNOTATION_ATTRIBUTE__
(
	`acquœed_aá”
(
__VA_ARGS__
))

	)

36 #iâdeà
ACQUIRED_BEFORE


37 
	#ACQUIRED_BEFORE
(...) \

38 
	`THREAD_ANNOTATION_ATTRIBUTE__
(
	`acquœed_befÜe
(
__VA_ARGS__
))

	)

41 #iâdeà
EXCLUSIVE_LOCKS_REQUIRED


42 
	#EXCLUSIVE_LOCKS_REQUIRED
(...) \

43 
	`THREAD_ANNOTATION_ATTRIBUTE__
(
	`exşusive_locks_»quœed
(
__VA_ARGS__
))

	)

46 #iâdeà
SHARED_LOCKS_REQUIRED


47 
	#SHARED_LOCKS_REQUIRED
(...) \

48 
	`THREAD_ANNOTATION_ATTRIBUTE__
(
	`sh¬ed_locks_»quœed
(
__VA_ARGS__
))

	)

51 #iâdeà
LOCKS_EXCLUDED


52 
	#LOCKS_EXCLUDED
(...) \

53 
	`THREAD_ANNOTATION_ATTRIBUTE__
(
	`locks_exşuded
(
__VA_ARGS__
))

	)

56 #iâdeà
LOCK_RETURNED


57 
	#LOCK_RETURNED
(
x
è
	`THREAD_ANNOTATION_ATTRIBUTE__
(
	`lock_»tuºed
(x))

	)

60 #iâdeà
LOCKABLE


61 
	#LOCKABLE
 
	`THREAD_ANNOTATION_ATTRIBUTE__
(
lockabË
)

	)

64 #iâdeà
SCOPED_LOCKABLE


65 
	#SCOPED_LOCKABLE
 
	`THREAD_ANNOTATION_ATTRIBUTE__
(
scİed_lockabË
)

	)

68 #iâdeà
EXCLUSIVE_LOCK_FUNCTION


69 
	#EXCLUSIVE_LOCK_FUNCTION
(...) \

70 
	`THREAD_ANNOTATION_ATTRIBUTE__
(
	`exşusive_lock_funùiÚ
(
__VA_ARGS__
))

	)

73 #iâdeà
SHARED_LOCK_FUNCTION


74 
	#SHARED_LOCK_FUNCTION
(...) \

75 
	`THREAD_ANNOTATION_ATTRIBUTE__
(
	`sh¬ed_lock_funùiÚ
(
__VA_ARGS__
))

	)

78 #iâdeà
EXCLUSIVE_TRYLOCK_FUNCTION


79 
	#EXCLUSIVE_TRYLOCK_FUNCTION
(...) \

80 
	`THREAD_ANNOTATION_ATTRIBUTE__
(
	`exşusive_Œylock_funùiÚ
(
__VA_ARGS__
))

	)

83 #iâdeà
SHARED_TRYLOCK_FUNCTION


84 
	#SHARED_TRYLOCK_FUNCTION
(...) \

85 
	`THREAD_ANNOTATION_ATTRIBUTE__
(
	`sh¬ed_Œylock_funùiÚ
(
__VA_ARGS__
))

	)

88 #iâdeà
UNLOCK_FUNCTION


89 
	#UNLOCK_FUNCTION
(...) \

90 
	`THREAD_ANNOTATION_ATTRIBUTE__
(
	`uÆock_funùiÚ
(
__VA_ARGS__
))

	)

93 #iâdeà
NO_THREAD_SAFETY_ANALYSIS


94 
	#NO_THREAD_SAFETY_ANALYSIS
 \

95 
	`THREAD_ANNOTATION_ATTRIBUTE__
(
no_th»ad_§ãty_ª®ysis
)

	)

98 #iâdeà
ASSERT_EXCLUSIVE_LOCK


99 
	#ASSERT_EXCLUSIVE_LOCK
(...) \

100 
	`THREAD_ANNOTATION_ATTRIBUTE__
(
	`as£¹_exşusive_lock
(
__VA_ARGS__
))

	)

103 #iâdeà
ASSERT_SHARED_LOCK


104 
	#ASSERT_SHARED_LOCK
(...) \

105 
	`THREAD_ANNOTATION_ATTRIBUTE__
(
	`as£¹_sh¬ed_lock
(
__VA_ARGS__
))

	)

	@table/block.cc

7 
	~"bË/block.h
"

9 
	~<®gÜ™hm
>

10 
	~<c¡dšt
>

11 
	~<veùÜ
>

13 
	~"Ëv–db/com·¿tÜ.h
"

14 
	~"bË/fÜm©.h
"

15 
	~"ut/codšg.h
"

16 
	~"ut/loggšg.h
"

18 
Çme¥aû
 
	gËv–db
 {

20 
šlše
 
ušt32_t
 
	gBlock
::
NumRe¡¬ts
() const {

21 
as£¹
(
size_
 >ğ(
ušt32_t
));

22  
DecodeFixed32
(
d©a_
 + 
size_
 - (
ušt32_t
));

25 
	gBlock
::
Block
(cÚ¡ 
BlockCÚ‹Ás
& 
cÚ‹Ás
)

26 : 
d©a_
(
cÚ‹Ás
.
d©a
.data()),

27 
size_
(
cÚ‹Ás
.
d©a
.
size
()),

28 
owÃd_
(
cÚ‹Ás
.
h—p_®loÿ‹d
) {

29 ià(
	gsize_
 < (
	gušt32_t
)) {

30 
	gsize_
 = 0;

32 
size_t
 
	gmax_»¡¬ts_®lowed
 = (
size_
 - (
ušt32_t
)) / (uint32_t);

33 ià(
NumRe¡¬ts
(è> 
	gmax_»¡¬ts_®lowed
) {

35 
	gsize_
 = 0;

37 
	g»¡¬t_off£t_
 = 
size_
 - (1 + 
NumRe¡¬ts
()è* (
ušt32_t
);

42 
	gBlock
::~
Block
() {

43 ià(
owÃd_
) {

44 
d–‘e
[] 
d©a_
;

55 
šlše
 cÚ¡ * 
DecodeEÁry
(cÚ¡ * 
p
, cÚ¡ * 
lim™
,

56 
ušt32_t
* 
sh¬ed
, ušt32_t* 
nÚ_sh¬ed
,

57 
ušt32_t
* 
v®ue_Ëngth
) {

58 ià(
	glim™
 - 
	gp
 < 3è 
	gnuÎ±r
;

59 *
	gsh¬ed
 = 
»š‹½»t_ÿ¡
<cÚ¡ 
ušt8_t
*>(
p
)[0];

60 *
	gnÚ_sh¬ed
 = 
»š‹½»t_ÿ¡
<cÚ¡ 
ušt8_t
*>(
p
)[1];

61 *
	gv®ue_Ëngth
 = 
»š‹½»t_ÿ¡
<cÚ¡ 
ušt8_t
*>(
p
)[2];

62 ià((*
	gsh¬ed
 | *
	gnÚ_sh¬ed
 | *
	gv®ue_Ëngth
) < 128) {

64 
	gp
 += 3;

66 ià((
	gp
 = 
G‘V¬št32PŒ
(
p
, 
lim™
, 
sh¬ed
)è=ğ
nuÎ±r
) ‚ullptr;

67 ià((
	gp
 = 
G‘V¬št32PŒ
(
p
, 
lim™
, 
nÚ_sh¬ed
)è=ğ
nuÎ±r
) ‚ullptr;

68 ià((
	gp
 = 
G‘V¬št32PŒ
(
p
, 
lim™
, 
v®ue_Ëngth
)è=ğ
nuÎ±r
) ‚ullptr;

71 ià(
	g¡©ic_ÿ¡
<
	gušt32_t
>(
	glim™
 - 
	gp
è< (*
	gnÚ_sh¬ed
 + *
	gv®ue_Ëngth
)) {

72  
	gnuÎ±r
;

74  
	gp
;

77 şas 
	cBlock
::
I‹r
 : 
public
 
I‹¿tÜ
 {

78 
´iv©e
:

79 cÚ¡ 
Com·¿tÜ
* cÚ¡ 
com·¿tÜ_
;

80 cÚ¡ * cÚ¡ 
	gd©a_
;

81 
ušt32_t
 cÚ¡ 
	g»¡¬ts_
;

82 
ušt32_t
 cÚ¡ 
	gnum_»¡¬ts_
;

85 
ušt32_t
 
	gcu¼’t_
;

86 
ušt32_t
 
	g»¡¬t_šdex_
;

87 
	g¡d
::
¡ršg
 
key_
;

88 
Sliû
 
	gv®ue_
;

89 
Stus
 
	g¡©us_
;

91 
šlše
 
Com·»
(cÚ¡ 
Sliû
& 
a
, cÚ¡ Sliû& 
b
) const {

92  
	gcom·¿tÜ_
->
Com·»
(
a
, 
b
);

96 
šlše
 
ušt32_t
 
NextEÁryOff£t
() const {

97  (
	gv®ue_
.
d©a
(è+ v®ue_.
size
()è- 
	gd©a_
;

100 
ušt32_t
 
G‘Re¡¬tPošt
(ušt32_ˆ
šdex
) {

101 
as£¹
(
šdex
 < 
num_»¡¬ts_
);

102  
DecodeFixed32
(
d©a_
 + 
»¡¬ts_
 + 
šdex
 * (
ušt32_t
));

105 
S“kToRe¡¬tPošt
(
ušt32_t
 
šdex
) {

106 
	gkey_
.
ş—r
();

107 
	g»¡¬t_šdex_
 = 
šdex
;

111 
ušt32_t
 
	goff£t
 = 
G‘Re¡¬tPošt
(
šdex
);

112 
	gv®ue_
 = 
Sliû
(
d©a_
 + 
off£t
, 0);

115 
	gpublic
:

116 
I‹r
(cÚ¡ 
Com·¿tÜ
* 
com·¿tÜ
, cÚ¡ * 
d©a
, 
ušt32_t
 
»¡¬ts
,

117 
ušt32_t
 
num_»¡¬ts
)

118 : 
com·¿tÜ_
(
com·¿tÜ
),

119 
d©a_
(
d©a
),

120 
»¡¬ts_
(
»¡¬ts
),

121 
num_»¡¬ts_
(
num_»¡¬ts
),

122 
cu¼’t_
(
»¡¬ts_
),

123 
»¡¬t_šdex_
(
num_»¡¬ts_
) {

124 
as£¹
(
num_»¡¬ts_
 > 0);

127 
boŞ
 
V®id
(ècÚ¡ 
	gov”ride
 {  
	gcu¼’t_
 < 
	g»¡¬ts_
; }

128 
Stus
 
¡©us
(ècÚ¡ 
	gov”ride
 {  
	g¡©us_
; }

129 
Sliû
 
key
(ècÚ¡ 
	gov”ride
 {

130 
as£¹
(
V®id
());

131  
	gkey_
;

133 
Sliû
 
v®ue
(ècÚ¡ 
	gov”ride
 {

134 
as£¹
(
V®id
());

135  
	gv®ue_
;

138 
Next
(è
	gov”ride
 {

139 
as£¹
(
V®id
());

140 
P¬£NextKey
();

143 
P»v
(è
	gov”ride
 {

144 
as£¹
(
V®id
());

147 cÚ¡ 
ušt32_t
 
	gÜigš®
 = 
cu¼’t_
;

148 
G‘Re¡¬tPošt
(
»¡¬t_šdex_
è>ğ
Üigš®
) {

149 ià(
»¡¬t_šdex_
 == 0) {

151 
cu¼’t_
 = 
»¡¬ts_
;

152 
	g»¡¬t_šdex_
 = 
num_»¡¬ts_
;

155 
	g»¡¬t_šdex_
--;

158 
S“kToRe¡¬tPošt
(
»¡¬t_šdex_
);

161 } 
P¬£NextKey
(è&& 
NextEÁryOff£t
(è< 
	gÜigš®
);

164 
S“k
(cÚ¡ 
Sliû
& 
rg‘
è
	gov”ride
 {

167 
ušt32_t
 
	gËá
 = 0;

168 
ušt32_t
 
	gright
 = 
num_»¡¬ts_
 - 1;

169 
	gcu¼’t_key_com·»
 = 0;

171 ià(
V®id
()) {

175 
	gcu¼’t_key_com·»
 = 
Com·»
(
key_
, 
rg‘
);

176 ià(
	gcu¼’t_key_com·»
 < 0) {

178 
	gËá
 = 
»¡¬t_šdex_
;

179 } ià(
	gcu¼’t_key_com·»
 > 0) {

180 
	gright
 = 
»¡¬t_šdex_
;

187 
	gËá
 < 
	gright
) {

188 
ušt32_t
 
	gmid
 = (
Ëá
 + 
right
 + 1) / 2;

189 
ušt32_t
 
	g»giÚ_off£t
 = 
G‘Re¡¬tPošt
(
mid
);

190 
ušt32_t
 
	gsh¬ed
, 
	gnÚ_sh¬ed
, 
	gv®ue_Ëngth
;

191 cÚ¡ * 
	gkey_±r
 =

192 
DecodeEÁry
(
d©a_
 + 
»giÚ_off£t
, d©a_ + 
»¡¬ts_
, &
sh¬ed
,

193 &
nÚ_sh¬ed
, &
v®ue_Ëngth
);

194 ià(
	gkey_±r
 =ğ
nuÎ±r
 || (
sh¬ed
 != 0)) {

195 
CÜru±iÚE¼Ü
();

198 
Sliû
 
mid_key
(
key_±r
, 
nÚ_sh¬ed
);

199 ià(
Com·»
(
mid_key
, 
rg‘
) < 0) {

202 
	gËá
 = 
mid
;

206 
	gright
 = 
mid
 - 1;

213 
as£¹
(
cu¼’t_key_com·»
 =ğ0 || 
V®id
());

214 
boŞ
 
	gsk_£ek
 = 
Ëá
 =ğ
»¡¬t_šdex_
 && 
cu¼’t_key_com·»
 < 0;

215 ià(!
	gsk_£ek
) {

216 
S“kToRe¡¬tPošt
(
Ëá
);

219 
	gŒue
) {

220 ià(!
P¬£NextKey
()) {

223 ià(
Com·»
(
key_
, 
rg‘
) >= 0) {

229 
S“kToFœ¡
(è
	gov”ride
 {

230 
S“kToRe¡¬tPošt
(0);

231 
P¬£NextKey
();

234 
S“kToLa¡
(è
	gov”ride
 {

235 
S“kToRe¡¬tPošt
(
num_»¡¬ts_
 - 1);

236 
P¬£NextKey
(è&& 
NextEÁryOff£t
(è< 
	g»¡¬ts_
) {

241 
	g´iv©e
:

242 
CÜru±iÚE¼Ü
() {

243 
cu¼’t_
 = 
»¡¬ts_
;

244 
	g»¡¬t_šdex_
 = 
num_»¡¬ts_
;

245 
	g¡©us_
 = 
Stus
::
CÜru±iÚ
("badƒntry in block");

246 
	gkey_
.
ş—r
();

247 
	gv®ue_
.
ş—r
();

250 
boŞ
 
P¬£NextKey
() {

251 
	gcu¼’t_
 = 
NextEÁryOff£t
();

252 cÚ¡ * 
	gp
 = 
d©a_
 + 
cu¼’t_
;

253 cÚ¡ * 
	glim™
 = 
d©a_
 + 
»¡¬ts_
;

254 ià(
	gp
 >ğ
lim™
) {

256 
cu¼’t_
 = 
»¡¬ts_
;

257 
	g»¡¬t_šdex_
 = 
num_»¡¬ts_
;

258  
	gçl£
;

262 
ušt32_t
 
	gsh¬ed
, 
	gnÚ_sh¬ed
, 
	gv®ue_Ëngth
;

263 
	gp
 = 
DecodeEÁry
(
p
, 
lim™
, &
sh¬ed
, &
nÚ_sh¬ed
, &
v®ue_Ëngth
);

264 ià(
	gp
 =ğ
nuÎ±r
 || 
key_
.
size
(è< 
sh¬ed
) {

265 
CÜru±iÚE¼Ü
();

266  
	gçl£
;

268 
	gkey_
.
»size
(
sh¬ed
);

269 
	gkey_
.
­³nd
(
p
, 
nÚ_sh¬ed
);

270 
	gv®ue_
 = 
Sliû
(
p
 + 
nÚ_sh¬ed
, 
v®ue_Ëngth
);

271 
	g»¡¬t_šdex_
 + 1 < 
	gnum_»¡¬ts_
 &&

272 
G‘Re¡¬tPošt
(
»¡¬t_šdex_
 + 1è< 
	gcu¼’t_
) {

273 ++
	g»¡¬t_šdex_
;

275  
	gŒue
;

280 
I‹¿tÜ
* 
	gBlock
::
	$NewI‹¿tÜ
(cÚ¡ 
Com·¿tÜ
* 
com·¿tÜ
) {

281 ià(
size_
 < (
ušt32_t
)) {

282  
	`NewE¼ÜI‹¿tÜ
(
Stus
::
	`CÜru±iÚ
("bad block contents"));

284 cÚ¡ 
ušt32_t
 
num_»¡¬ts
 = 
	`NumRe¡¬ts
();

285 ià(
num_»¡¬ts
 == 0) {

286  
	`NewEm±yI‹¿tÜ
();

288  
Ãw
 
	`I‹r
(
com·¿tÜ
, 
d©a_
, 
»¡¬t_off£t_
, 
num_»¡¬ts
);

290 
	}
}

	@table/block.h

5 #iâdeà
STORAGE_LEVELDB_TABLE_BLOCK_H_


6 
	#STORAGE_LEVELDB_TABLE_BLOCK_H_


	)

8 
	~<c¡ddef
>

9 
	~<c¡dšt
>

11 
	~"Ëv–db/™”©Ü.h
"

13 
Çme¥aû
 
	gËv–db
 {

15 
	gBlockCÚ‹Ás
;

16 
şass
 
	gCom·¿tÜ
;

18 şas 
	cBlock
 {

19 
	gpublic
:

21 
ex¶ic™
 
Block
(cÚ¡ 
BlockCÚ‹Ás
& 
cÚ‹Ás
);

23 
Block
(cÚ¡ Block&èğ
d–‘e
;

24 
	gBlock
& 
	gİ”©Ü
=(cÚ¡ 
Block
&èğ
d–‘e
;

26 ~
Block
();

28 
size_t
 
size
(ècÚ¡ {  
	gsize_
; }

29 
I‹¿tÜ
* 
NewI‹¿tÜ
(cÚ¡ 
Com·¿tÜ
* 
com·¿tÜ
);

31 
	g´iv©e
:

32 
şass
 
I‹r
;

34 
ušt32_t
 
NumRe¡¬ts
() const;

36 cÚ¡ * 
	gd©a_
;

37 
size_t
 
	gsize_
;

38 
ušt32_t
 
	g»¡¬t_off£t_
;

39 
boŞ
 
	gowÃd_
;

	@table/block_builder.cc

29 
	~"bË/block_bud”.h
"

31 
	~<®gÜ™hm
>

32 
	~<ÿs£¹
>

34 
	~"Ëv–db/com·¿tÜ.h
"

35 
	~"Ëv–db/İtiÚs.h
"

36 
	~"ut/codšg.h
"

38 
Çme¥aû
 
	gËv–db
 {

40 
	gBlockBud”
::
BlockBud”
(cÚ¡ 
O±iÚs
* 
İtiÚs
)

41 : 
İtiÚs_
(
İtiÚs
), 
»¡¬ts_
(), 
couÁ”_
(0), 
fšished_
(
çl£
) {

42 
as£¹
(
İtiÚs
->
block_»¡¬t_š‹rv®
 >= 1);

43 
	g»¡¬ts_
.
push_back
(0);

46 
	gBlockBud”
::
Re£t
() {

47 
bufãr_
.
ş—r
();

48 
	g»¡¬ts_
.
ş—r
();

49 
	g»¡¬ts_
.
push_back
(0);

50 
	gcouÁ”_
 = 0;

51 
	gfšished_
 = 
çl£
;

52 
	gÏ¡_key_
.
ş—r
();

55 
size_t
 
	gBlockBud”
::
Cu¼’tSizeE¡im©e
() const {

56  (
bufãr_
.
size
() +

57 
»¡¬ts_
.
size
(è* (
ušt32_t
) +

58 (
ušt32_t
));

61 
Sliû
 
	gBlockBud”
::
Fšish
() {

63 
size_t
 
i
 = 0; 
	gi
 < 
	g»¡¬ts_
.
size
(); i++) {

64 
PutFixed32
(&
bufãr_
, 
»¡¬ts_
[
i
]);

66 
PutFixed32
(&
bufãr_
, 
»¡¬ts_
.
size
());

67 
	gfšished_
 = 
Œue
;

68  
Sliû
(
bufãr_
);

71 
	gBlockBud”
::
Add
(cÚ¡ 
Sliû
& 
key
, cÚ¡ Sliû& 
v®ue
) {

72 
Sliû
 
Ï¡_key_p›û
(
Ï¡_key_
);

73 
as£¹
(!
fšished_
);

74 
as£¹
(
couÁ”_
 <ğ
İtiÚs_
->
block_»¡¬t_š‹rv®
);

75 
as£¹
(
bufãr_
.
em±y
()

76 || 
İtiÚs_
->
com·¿tÜ
->
Com·»
(
key
, 
Ï¡_key_p›û
) > 0);

77 
size_t
 
	gsh¬ed
 = 0;

78 ià(
	gcouÁ”_
 < 
	gİtiÚs_
->
	gblock_»¡¬t_š‹rv®
) {

80 cÚ¡ 
size_t
 
	gmš_Ëngth
 = 
¡d
::
mš
(
Ï¡_key_p›û
.
size
(), 
key
.size());

81 (
	gsh¬ed
 < 
	gmš_Ëngth
è&& (
	gÏ¡_key_p›û
[
sh¬ed
] =ğ
key
[shared])) {

82 
sh¬ed
++;

86 
	g»¡¬ts_
.
push_back
(
bufãr_
.
size
());

87 
	gcouÁ”_
 = 0;

89 cÚ¡ 
size_t
 
	gnÚ_sh¬ed
 = 
key
.
size
(è- 
sh¬ed
;

92 
PutV¬št32
(&
bufãr_
, 
sh¬ed
);

93 
PutV¬št32
(&
bufãr_
, 
nÚ_sh¬ed
);

94 
PutV¬št32
(&
bufãr_
, 
v®ue
.
size
());

97 
	gbufãr_
.
­³nd
(
key
.
d©a
(è+ 
sh¬ed
, 
nÚ_sh¬ed
);

98 
	gbufãr_
.
­³nd
(
v®ue
.
d©a
(), v®ue.
size
());

101 
	gÏ¡_key_
.
»size
(
sh¬ed
);

102 
	gÏ¡_key_
.
­³nd
(
key
.
d©a
(è+ 
sh¬ed
, 
nÚ_sh¬ed
);

103 
as£¹
(
Sliû
(
Ï¡_key_
è=ğ
key
);

104 
	gcouÁ”_
++;

	@table/block_builder.h

5 #iâdeà
STORAGE_LEVELDB_TABLE_BLOCK_BUILDER_H_


6 
	#STORAGE_LEVELDB_TABLE_BLOCK_BUILDER_H_


	)

8 
	~<c¡dšt
>

9 
	~<veùÜ
>

11 
	~"Ëv–db/¦iû.h
"

13 
Çme¥aû
 
	gËv–db
 {

15 
	gO±iÚs
;

17 şas 
	cBlockBud”
 {

18 
	gpublic
:

19 
ex¶ic™
 
BlockBud”
(cÚ¡ 
O±iÚs
* 
İtiÚs
);

21 
BlockBud”
(cÚ¡ BlockBud”&èğ
d–‘e
;

22 
	gBlockBud”
& 
	gİ”©Ü
=(cÚ¡ 
BlockBud”
&èğ
d–‘e
;

25 
Re£t
();

29 
Add
(cÚ¡ 
Sliû
& 
key
, cÚ¡ Sliû& 
v®ue
);

34 
Sliû
 
Fšish
();

38 
size_t
 
Cu¼’tSizeE¡im©e
() const;

41 
boŞ
 
em±y
(ècÚ¡ {  
	gbufãr_
.empty(); }

43 
	g´iv©e
:

44 cÚ¡ 
O±iÚs
* 
İtiÚs_
;

45 
	g¡d
::
¡ršg
 
bufãr_
;

46 
	g¡d
::
veùÜ
<
ušt32_t
> 
»¡¬ts_
;

47 
	gcouÁ”_
;

48 
boŞ
 
	gfšished_
;

49 
	g¡d
::
¡ršg
 
Ï¡_key_
;

	@table/filter_block.cc

5 
	~"bË/f‹r_block.h
"

7 
	~"Ëv–db/f‹r_pŞicy.h
"

8 
	~"ut/codšg.h
"

10 
Çme¥aû
 
	gËv–db
 {

15 cÚ¡ 
size_t
 
	gkF‹rBa£Lg
 = 11;

16 cÚ¡ 
size_t
 
	gkF‹rBa£
 = 1 << 
kF‹rBa£Lg
;

18 
	gF‹rBlockBud”
::
F‹rBlockBud”
(cÚ¡ 
F‹rPŞicy
* 
pŞicy
)

19 : 
pŞicy_
(
pŞicy
) {}

21 
F‹rBlockBud”
::
S¹Block
(
ušt64_t
 
block_off£t
) {

22 
ušt64_t
 
f‹r_šdex
 = (
block_off£t
 / 
kF‹rBa£
);

23 
as£¹
(
f‹r_šdex
 >ğ
f‹r_off£ts_
.
size
());

24 
	gf‹r_šdex
 > 
	gf‹r_off£ts_
.
size
()) {

25 
G’”©eF‹r
();

29 
	gF‹rBlockBud”
::
AddKey
(cÚ¡ 
Sliû
& 
key
) {

30 
Sliû
 
k
 = 
key
;

31 
	g¡¬t_
.
push_back
(
keys_
.
size
());

32 
	gkeys_
.
­³nd
(
k
.
d©a
(), k.
size
());

35 
Sliû
 
	gF‹rBlockBud”
::
Fšish
() {

36 ià(!
¡¬t_
.
em±y
()) {

37 
G’”©eF‹r
();

41 cÚ¡ 
ušt32_t
 
	g¬¿y_off£t
 = 
»suÉ_
.
size
();

42 
size_t
 
	gi
 = 0; i < 
	gf‹r_off£ts_
.
size
(); i++) {

43 
PutFixed32
(&
»suÉ_
, 
f‹r_off£ts_
[
i
]);

46 
PutFixed32
(&
»suÉ_
, 
¬¿y_off£t
);

47 
	g»suÉ_
.
push_back
(
kF‹rBa£Lg
);

48  
Sliû
(
»suÉ_
);

51 
	gF‹rBlockBud”
::
G’”©eF‹r
() {

52 cÚ¡ 
size_t
 
num_keys
 = 
¡¬t_
.
size
();

53 ià(
	gnum_keys
 == 0) {

55 
f‹r_off£ts_
.
push_back
(
»suÉ_
.
size
());

60 
	g¡¬t_
.
push_back
(
keys_
.
size
());

61 
	gtmp_keys_
.
»size
(
num_keys
);

62 
size_t
 
	gi
 = 0; i < 
	gnum_keys
; i++) {

63 cÚ¡ * 
	gba£
 = 
keys_
.
d©a
(è+ 
¡¬t_
[
i
];

64 
size_t
 
	gËngth
 = 
¡¬t_
[
i
 + 1] - start_[i];

65 
	gtmp_keys_
[
i
] = 
Sliû
(
ba£
, 
Ëngth
);

69 
	gf‹r_off£ts_
.
push_back
(
»suÉ_
.
size
());

70 
	gpŞicy_
->
C»©eF‹r
(&
tmp_keys_
[0], 
¡©ic_ÿ¡
<>(
num_keys
), &
»suÉ_
);

72 
	gtmp_keys_
.
ş—r
();

73 
	gkeys_
.
ş—r
();

74 
	g¡¬t_
.
ş—r
();

77 
	gF‹rBlockR—d”
::
F‹rBlockR—d”
(cÚ¡ 
F‹rPŞicy
* 
pŞicy
,

78 cÚ¡ 
Sliû
& 
cÚ‹Ás
)

79 : 
pŞicy_
(
pŞicy
), 
d©a_
(
nuÎ±r
), 
off£t_
ÒuÎ±r), 
num_
(0), 
ba£_lg_
(0) {

80 
size_t
 
	gn
 = 
cÚ‹Ás
.
size
();

81 ià(
	gn
 < 5) ;

82 
	gba£_lg_
 = 
cÚ‹Ás
[
n
 - 1];

83 
ušt32_t
 
	gÏ¡_wÜd
 = 
DecodeFixed32
(
cÚ‹Ás
.
d©a
(è+ 
n
 - 5);

84 ià(
	gÏ¡_wÜd
 > 
	gn
 - 5) ;

85 
	gd©a_
 = 
cÚ‹Ás
.
d©a
();

86 
	goff£t_
 = 
d©a_
 + 
Ï¡_wÜd
;

87 
	gnum_
 = (
n
 - 5 - 
Ï¡_wÜd
) / 4;

90 
boŞ
 
	gF‹rBlockR—d”
::
KeyMayM©ch
(
ušt64_t
 
block_off£t
, cÚ¡ 
Sliû
& 
key
) {

91 
ušt64_t
 
	gšdex
 = 
block_off£t
 >> 
ba£_lg_
;

92 ià(
	gšdex
 < 
	gnum_
) {

93 
ušt32_t
 
	g¡¬t
 = 
DecodeFixed32
(
off£t_
 + 
šdex
 * 4);

94 
ušt32_t
 
	glim™
 = 
DecodeFixed32
(
off£t_
 + 
šdex
 * 4 + 4);

95 ià(
	g¡¬t
 <ğ
lim™
 &&†im™ <ğ
¡©ic_ÿ¡
<
size_t
>(
off£t_
 - 
d©a_
)) {

96 
Sliû
 
f‹r
 = Sliû(
d©a_
 + 
¡¬t
, 
lim™
 - start);

97  
	gpŞicy_
->
KeyMayM©ch
(
key
, 
f‹r
);

98 } ià(
	g¡¬t
 =ğ
lim™
) {

100  
çl£
;

103  
	gŒue
;

	@table/filter_block.h

9 #iâdeà
STORAGE_LEVELDB_TABLE_FILTER_BLOCK_H_


10 
	#STORAGE_LEVELDB_TABLE_FILTER_BLOCK_H_


	)

12 
	~<c¡ddef
>

13 
	~<c¡dšt
>

14 
	~<¡ršg
>

15 
	~<veùÜ
>

17 
	~"Ëv–db/¦iû.h
"

18 
	~"ut/hash.h
"

20 
Çme¥aû
 
	gËv–db
 {

22 
şass
 
	gF‹rPŞicy
;

30 şas 
	cF‹rBlockBud”
 {

31 
	gpublic
:

32 
ex¶ic™
 
F‹rBlockBud”
(cÚ¡ 
F‹rPŞicy
*);

34 
F‹rBlockBud”
(cÚ¡ F‹rBlockBud”&èğ
d–‘e
;

35 
	gF‹rBlockBud”
& 
	gİ”©Ü
=(cÚ¡ 
F‹rBlockBud”
&èğ
d–‘e
;

37 
S¹Block
(
ušt64_t
 
block_off£t
);

38 
AddKey
(cÚ¡ 
Sliû
& 
key
);

39 
Sliû
 
Fšish
();

41 
	g´iv©e
:

42 
G’”©eF‹r
();

44 cÚ¡ 
F‹rPŞicy
* 
	gpŞicy_
;

45 
	g¡d
::
¡ršg
 
keys_
;

46 
	g¡d
::
veùÜ
<
size_t
> 
¡¬t_
;

47 
	g¡d
::
¡ršg
 
»suÉ_
;

48 
	g¡d
::
veùÜ
<
Sliû
> 
tmp_keys_
;

49 
	g¡d
::
veùÜ
<
ušt32_t
> 
f‹r_off£ts_
;

52 şas 
	cF‹rBlockR—d”
 {

53 
	gpublic
:

55 
F‹rBlockR—d”
(cÚ¡ 
F‹rPŞicy
* 
pŞicy
, cÚ¡ 
Sliû
& 
cÚ‹Ás
);

56 
boŞ
 
KeyMayM©ch
(
ušt64_t
 
block_off£t
, cÚ¡ 
Sliû
& 
key
);

58 
	g´iv©e
:

59 cÚ¡ 
F‹rPŞicy
* 
pŞicy_
;

60 cÚ¡ * 
	gd©a_
;

61 cÚ¡ * 
	goff£t_
;

62 
size_t
 
	gnum_
;

63 
size_t
 
	gba£_lg_
;

	@table/filter_block_test.cc

5 
	~"bË/f‹r_block.h
"

7 
	~"g‹¡/g‹¡.h
"

8 
	~"Ëv–db/f‹r_pŞicy.h
"

9 
	~"ut/codšg.h
"

10 
	~"ut/hash.h
"

11 
	~"ut/loggšg.h
"

12 
	~"ut/‹¡ut.h
"

14 
Çme¥aû
 
	gËv–db
 {

17 şas 
	cTe¡HashF‹r
 : 
public
 
F‹rPŞicy
 {

18 
public
:

19 cÚ¡ * 
Name
(ècÚ¡ 
ov”ride
 {  "TestHashFilter"; }

21 
C»©eF‹r
(cÚ¡ 
Sliû
* 
keys
, 
n
, 
¡d
::
¡ršg
* 
d¡
ècÚ¡ 
ov”ride
 {

22 
i
 = 0; 
	gi
 < 
	gn
; i++) {

23 
ušt32_t
 
	gh
 = 
Hash
(
keys
[
i
].
d©a
(), keys[i].
size
(), 1);

24 
PutFixed32
(
d¡
, 
h
);

28 
boŞ
 
KeyMayM©ch
(cÚ¡ 
Sliû
& 
key
, cÚ¡ Sliû& 
f‹r
ècÚ¡ 
	gov”ride
 {

29 
ušt32_t
 
	gh
 = 
Hash
(
key
.
d©a
(), key.
size
(), 1);

30 
size_t
 
	gi
 = 0; i + 4 <ğ
f‹r
.
size
(); i += 4) {

31 ià(
h
 =ğ
DecodeFixed32
(
f‹r
.
d©a
(è+ 
i
)) {

32  
Œue
;

35  
	gçl£
;

39 şas 
	cF‹rBlockTe¡
 : 
public
 
‹¡šg
::
Te¡
 {

40 
public
:

41 
Te¡HashF‹r
 
pŞicy_
;

44 
	$TEST_F
(
F‹rBlockTe¡
, 
Em±yBud”
) {

45 
F‹rBlockBud”
 
	`bud”
(&
pŞicy_
);

46 
Sliû
 
block
 = 
bud”
.
	`Fšish
();

47 
	`ASSERT_EQ
("\\x00\\x00\\x00\\x00\\x0b", 
	`Esÿ³SŒšg
(
block
));

48 
F‹rBlockR—d”
 
	`»ad”
(&
pŞicy_
, 
block
);

49 
	`ASSERT_TRUE
(
»ad”
.
	`KeyMayM©ch
(0, "foo"));

50 
	`ASSERT_TRUE
(
»ad”
.
	`KeyMayM©ch
(100000, "foo"));

51 
	}
}

53 
	$TEST_F
(
F‹rBlockTe¡
, 
SšgËChunk
) {

54 
F‹rBlockBud”
 
	`bud”
(&
pŞicy_
);

55 
bud”
.
	`S¹Block
(100);

56 
bud”
.
	`AddKey
("foo");

57 
bud”
.
	`AddKey
("bar");

58 
bud”
.
	`AddKey
("box");

59 
bud”
.
	`S¹Block
(200);

60 
bud”
.
	`AddKey
("box");

61 
bud”
.
	`S¹Block
(300);

62 
bud”
.
	`AddKey
("hello");

63 
Sliû
 
block
 = 
bud”
.
	`Fšish
();

64 
F‹rBlockR—d”
 
	`»ad”
(&
pŞicy_
, 
block
);

65 
	`ASSERT_TRUE
(
»ad”
.
	`KeyMayM©ch
(100, "foo"));

66 
	`ASSERT_TRUE
(
»ad”
.
	`KeyMayM©ch
(100, "bar"));

67 
	`ASSERT_TRUE
(
»ad”
.
	`KeyMayM©ch
(100, "box"));

68 
	`ASSERT_TRUE
(
»ad”
.
	`KeyMayM©ch
(100, "hello"));

69 
	`ASSERT_TRUE
(
»ad”
.
	`KeyMayM©ch
(100, "foo"));

70 
	`ASSERT_TRUE
(!
»ad”
.
	`KeyMayM©ch
(100, "missing"));

71 
	`ASSERT_TRUE
(!
»ad”
.
	`KeyMayM©ch
(100, "other"));

72 
	}
}

74 
	$TEST_F
(
F‹rBlockTe¡
, 
MuÉiChunk
) {

75 
F‹rBlockBud”
 
	`bud”
(&
pŞicy_
);

78 
bud”
.
	`S¹Block
(0);

79 
bud”
.
	`AddKey
("foo");

80 
bud”
.
	`S¹Block
(2000);

81 
bud”
.
	`AddKey
("bar");

84 
bud”
.
	`S¹Block
(3100);

85 
bud”
.
	`AddKey
("box");

90 
bud”
.
	`S¹Block
(9000);

91 
bud”
.
	`AddKey
("box");

92 
bud”
.
	`AddKey
("hello");

94 
Sliû
 
block
 = 
bud”
.
	`Fšish
();

95 
F‹rBlockR—d”
 
	`»ad”
(&
pŞicy_
, 
block
);

98 
	`ASSERT_TRUE
(
»ad”
.
	`KeyMayM©ch
(0, "foo"));

99 
	`ASSERT_TRUE
(
»ad”
.
	`KeyMayM©ch
(2000, "bar"));

100 
	`ASSERT_TRUE
(!
»ad”
.
	`KeyMayM©ch
(0, "box"));

101 
	`ASSERT_TRUE
(!
»ad”
.
	`KeyMayM©ch
(0, "hello"));

104 
	`ASSERT_TRUE
(
»ad”
.
	`KeyMayM©ch
(3100, "box"));

105 
	`ASSERT_TRUE
(!
»ad”
.
	`KeyMayM©ch
(3100, "foo"));

106 
	`ASSERT_TRUE
(!
»ad”
.
	`KeyMayM©ch
(3100, "bar"));

107 
	`ASSERT_TRUE
(!
»ad”
.
	`KeyMayM©ch
(3100, "hello"));

110 
	`ASSERT_TRUE
(!
»ad”
.
	`KeyMayM©ch
(4100, "foo"));

111 
	`ASSERT_TRUE
(!
»ad”
.
	`KeyMayM©ch
(4100, "bar"));

112 
	`ASSERT_TRUE
(!
»ad”
.
	`KeyMayM©ch
(4100, "box"));

113 
	`ASSERT_TRUE
(!
»ad”
.
	`KeyMayM©ch
(4100, "hello"));

116 
	`ASSERT_TRUE
(
»ad”
.
	`KeyMayM©ch
(9000, "box"));

117 
	`ASSERT_TRUE
(
»ad”
.
	`KeyMayM©ch
(9000, "hello"));

118 
	`ASSERT_TRUE
(!
»ad”
.
	`KeyMayM©ch
(9000, "foo"));

119 
	`ASSERT_TRUE
(!
»ad”
.
	`KeyMayM©ch
(9000, "bar"));

120 
	}
}

	@table/format.cc

5 
	~"bË/fÜm©.h
"

7 
	~"Ëv–db/’v.h
"

8 
	~"Ëv–db/İtiÚs.h
"

9 
	~"pÜt/pÜt.h
"

10 
	~"bË/block.h
"

11 
	~"ut/codšg.h
"

12 
	~"ut/üc32c.h
"

14 
Çme¥aû
 
	gËv–db
 {

16 
	gBlockHªdË
::
EncodeTo
(
¡d
::
¡ršg
* 
d¡
) const {

18 
as£¹
(
off£t_
 !ğ~
¡©ic_ÿ¡
<
ušt64_t
>(0));

19 
as£¹
(
size_
 !ğ~
¡©ic_ÿ¡
<
ušt64_t
>(0));

20 
PutV¬št64
(
d¡
, 
off£t_
);

21 
PutV¬št64
(
d¡
, 
size_
);

24 
Stus
 
	gBlockHªdË
::
DecodeFrom
(
Sliû
* 
šput
) {

25 ià(
G‘V¬št64
(
šput
, &
off£t_
è&& G‘V¬št64(šput, &
size_
)) {

26  
	gStus
::
OK
();

28  
	gStus
::
CÜru±iÚ
("bad block handle");

32 
	gFoÙ”
::
EncodeTo
(
¡d
::
¡ršg
* 
d¡
) const {

33 cÚ¡ 
size_t
 
Üigš®_size
 = 
d¡
->
size
();

34 
	gm‘ašdex_hªdË_
.
EncodeTo
(
d¡
);

35 
	gšdex_hªdË_
.
EncodeTo
(
d¡
);

36 
	gd¡
->
»size
(2 * 
BlockHªdË
::
kMaxEncodedL’gth
);

37 
PutFixed32
(
d¡
, 
¡©ic_ÿ¡
<
ušt32_t
>(
kTabËMagicNumb”
 & 0xffffffffu));

38 
PutFixed32
(
d¡
, 
¡©ic_ÿ¡
<
ušt32_t
>(
kTabËMagicNumb”
 >> 32));

39 
as£¹
(
d¡
->
size
(è=ğ
Üigš®_size
 + 
kEncodedL’gth
);

40 ()
	gÜigš®_size
;

43 
Stus
 
	gFoÙ”
::
DecodeFrom
(
Sliû
* 
šput
) {

44 ià(
šput
->
size
(è< 
kEncodedL’gth
) {

45  
Stus
::
CÜru±iÚ
("not‡n sstable (footeroo short)");

48 cÚ¡ * 
	gmagic_±r
 = 
šput
->
d©a
(è+ 
kEncodedL’gth
 - 8;

49 cÚ¡ 
ušt32_t
 
	gmagic_lo
 = 
DecodeFixed32
(
magic_±r
);

50 cÚ¡ 
ušt32_t
 
	gmagic_hi
 = 
DecodeFixed32
(
magic_±r
 + 4);

51 cÚ¡ 
ušt64_t
 
	gmagic
 = ((
¡©ic_ÿ¡
<ušt64_t>(
magic_hi
) << 32) |

52 (
¡©ic_ÿ¡
<
ušt64_t
>(
magic_lo
)));

53 ià(
	gmagic
 !ğ
kTabËMagicNumb”
) {

54  
Stus
::
CÜru±iÚ
("not‡n sstable (bad magic‚umber)");

57 
Stus
 
	g»suÉ
 = 
m‘ašdex_hªdË_
.
DecodeFrom
(
šput
);

58 ià(
	g»suÉ
.
ok
()) {

59 
	g»suÉ
 = 
šdex_hªdË_
.
DecodeFrom
(
šput
);

61 ià(
	g»suÉ
.
ok
()) {

63 cÚ¡ * 
	g’d
 = 
magic_±r
 + 8;

64 *
	gšput
 = 
Sliû
(
’d
, 
šput
->
d©a
(è+ iÅut->
size
() -ƒnd);

66  
	g»suÉ
;

69 
Stus
 
R—dBlock
(
RªdomAcûssFe
* 
fe
, cÚ¡ 
R—dO±iÚs
& 
İtiÚs
,

70 cÚ¡ 
BlockHªdË
& 
hªdË
, 
BlockCÚ‹Ás
* 
»suÉ
) {

71 
	g»suÉ
->
	gd©a
 = 
Sliû
();

72 
	g»suÉ
->
	gÿchabË
 = 
çl£
;

73 
	g»suÉ
->
	gh—p_®loÿ‹d
 = 
çl£
;

77 
size_t
 
	gn
 = 
¡©ic_ÿ¡
<size_t>(
hªdË
.
size
());

78 * 
	gbuf
 = 
Ãw
 [
n
 + 
kBlockT¿”Size
];

79 
Sliû
 
	gcÚ‹Ás
;

80 
Stus
 
	gs
 = 
fe
->
R—d
(
hªdË
.
off£t
(), 
n
 + 
kBlockT¿”Size
, &
cÚ‹Ás
, 
buf
);

81 ià(!
	gs
.
ok
()) {

82 
	gd–‘e
[] 
	gbuf
;

83  
	gs
;

85 ià(
	gcÚ‹Ás
.
size
(è!ğ
n
 + 
kBlockT¿”Size
) {

86 
d–‘e
[] 
buf
;

87  
	gStus
::
CÜru±iÚ
("truncated block„ead");

91 cÚ¡ * 
	gd©a
 = 
cÚ‹Ás
.
d©a
();

92 ià(
	gİtiÚs
.
	gv”ify_checksums
) {

93 cÚ¡ 
ušt32_t
 
	güc
 = 
üc32c
::
Unmask
(
DecodeFixed32
(
d©a
 + 
n
 + 1));

94 cÚ¡ 
ušt32_t
 
	gaùu®
 = 
üc32c
::
V®ue
(
d©a
, 
n
 + 1);

95 ià(
	gaùu®
 !ğ
üc
) {

96 
d–‘e
[] 
buf
;

97 
	gs
 = 
Stus
::
CÜru±iÚ
("block checksum mismatch");

98  
	gs
;

102 
	gd©a
[
n
]) {

103 
	gkNoCom´essiÚ
:

104 ià(
d©a
 !ğ
buf
) {

108 
d–‘e
[] 
buf
;

109 
	g»suÉ
->
	gd©a
 = 
Sliû
(
d©a
, 
n
);

110 
	g»suÉ
->
	gh—p_®loÿ‹d
 = 
çl£
;

111 
	g»suÉ
->
	gÿchabË
 = 
çl£
;

113 
	g»suÉ
->
	gd©a
 = 
Sliû
(
buf
, 
n
);

114 
	g»suÉ
->
	gh—p_®loÿ‹d
 = 
Œue
;

115 
	g»suÉ
->
	gÿchabË
 = 
Œue
;

120 
	gkSÇµyCom´essiÚ
: {

121 
size_t
 
uËngth
 = 0;

122 ià(!
	gpÜt
::
SÇµy_G‘Uncom´es£dL’gth
(
d©a
, 
n
, &
uËngth
)) {

123 
	gd–‘e
[] 
	gbuf
;

124  
	gStus
::
CÜru±iÚ
("corrupted snappy compressed block†ength");

126 * 
	gubuf
 = 
Ãw
 [
uËngth
];

127 ià(!
	gpÜt
::
SÇµy_Uncom´ess
(
d©a
, 
n
, 
ubuf
)) {

128 
	gd–‘e
[] 
	gbuf
;

129 
	gd–‘e
[] 
	gubuf
;

130  
	gStus
::
CÜru±iÚ
("corrupted snappy compressed block contents");

132 
	gd–‘e
[] 
	gbuf
;

133 
	g»suÉ
->
	gd©a
 = 
Sliû
(
ubuf
, 
uËngth
);

134 
	g»suÉ
->
	gh—p_®loÿ‹d
 = 
Œue
;

135 
	g»suÉ
->
	gÿchabË
 = 
Œue
;

138 
	gkZ¡dCom´essiÚ
: {

139 
size_t
 
uËngth
 = 0;

140 ià(!
	gpÜt
::
Z¡d_G‘Uncom´es£dL’gth
(
d©a
, 
n
, &
uËngth
)) {

141 
	gd–‘e
[] 
	gbuf
;

142  
	gStus
::
CÜru±iÚ
("corrupted zstd compressed block†ength");

144 * 
	gubuf
 = 
Ãw
 [
uËngth
];

145 ià(!
	gpÜt
::
Z¡d_Uncom´ess
(
d©a
, 
n
, 
ubuf
)) {

146 
	gd–‘e
[] 
	gbuf
;

147 
	gd–‘e
[] 
	gubuf
;

148  
	gStus
::
CÜru±iÚ
("corrupted zstd compressed block contents");

150 
	gd–‘e
[] 
	gbuf
;

151 
	g»suÉ
->
	gd©a
 = 
Sliû
(
ubuf
, 
uËngth
);

152 
	g»suÉ
->
	gh—p_®loÿ‹d
 = 
Œue
;

153 
	g»suÉ
->
	gÿchabË
 = 
Œue
;

157 
d–‘e
[] 
buf
;

158  
	gStus
::
CÜru±iÚ
("bad blockype");

161  
	gStus
::
OK
();

	@table/format.h

5 #iâdeà
STORAGE_LEVELDB_TABLE_FORMAT_H_


6 
	#STORAGE_LEVELDB_TABLE_FORMAT_H_


	)

8 
	~<c¡dšt
>

9 
	~<¡ršg
>

11 
	~"Ëv–db/¦iû.h
"

12 
	~"Ëv–db/¡©us.h
"

13 
	~"Ëv–db/bË_bud”.h
"

15 
Çme¥aû
 
	gËv–db
 {

17 
şass
 
	gBlock
;

18 
şass
 
	gRªdomAcûssFe
;

19 
	gR—dO±iÚs
;

23 şas 
	cBlockHªdË
 {

24 
	gpublic
:

26 ’um { 
kMaxEncodedL’gth
 = 10 + 10 };

28 
BlockHªdË
();

31 
ušt64_t
 
off£t
(ècÚ¡ {  
	goff£t_
; }

32 
£t_off£t
(
ušt64_t
 
off£t
è{ 
	goff£t_
 = offset; }

35 
ušt64_t
 
size
(ècÚ¡ {  
	gsize_
; }

36 
£t_size
(
ušt64_t
 
size
è{ 
	gsize_
 = size; }

38 
EncodeTo
(
¡d
::
¡ršg
* 
d¡
) const;

39 
Stus
 
DecodeFrom
(
Sliû
* 
šput
);

41 
	g´iv©e
:

42 
ušt64_t
 
off£t_
;

43 
ušt64_t
 
	gsize_
;

48 şas 
	cFoÙ”
 {

49 
	gpublic
:

53 ’um { 
kEncodedL’gth
 = 2 * 
BlockHªdË
::
kMaxEncodedL’gth
 + 8 };

55 
FoÙ”
() = ;

58 cÚ¡ 
	gBlockHªdË
& 
m‘ašdex_hªdË
(ècÚ¡ {  
	gm‘ašdex_hªdË_
; }

59 
£t_m‘ašdex_hªdË
(cÚ¡ 
BlockHªdË
& 
h
è{ 
	gm‘ašdex_hªdË_
 = h; }

62 cÚ¡ 
	gBlockHªdË
& 
šdex_hªdË
(ècÚ¡ {  
	gšdex_hªdË_
; }

63 
£t_šdex_hªdË
(cÚ¡ 
BlockHªdË
& 
h
è{ 
	gšdex_hªdË_
 = h; }

65 
EncodeTo
(
¡d
::
¡ršg
* 
d¡
) const;

66 
Stus
 
DecodeFrom
(
Sliû
* 
šput
);

68 
	g´iv©e
:

69 
BlockHªdË
 
m‘ašdex_hªdË_
;

70 
BlockHªdË
 
	gšdex_hªdË_
;

76 cÚ¡ 
ušt64_t
 
	gkTabËMagicNumb”
 = 0xdb4775248b80fb57ull;

79 cÚ¡ 
size_t
 
	gkBlockT¿”Size
 = 5;

81 
	sBlockCÚ‹Ás
 {

82 
Sliû
 
	gd©a
;

83 
boŞ
 
	gÿchabË
;

84 
boŞ
 
	gh—p_®loÿ‹d
;

89 
Stus
 
R—dBlock
(
RªdomAcûssFe
* 
fe
, cÚ¡ 
R—dO±iÚs
& 
İtiÚs
,

90 cÚ¡ 
BlockHªdË
& 
hªdË
, 
BlockCÚ‹Ás
* 
»suÉ
);

94 
šlše
 
	gBlockHªdË
::
	$BlockHªdË
()

95 : 
	`off£t_
(~
¡©ic_ÿ¡
<
ušt64_t
>(0)), 
	`size_
(~¡©ic_ÿ¡<ušt64_t>(0)è{
	}
}

	@table/iterator.cc

5 
	~"Ëv–db/™”©Ü.h
"

7 
Çme¥aû
 
	gËv–db
 {

9 
	gI‹¿tÜ
::
I‹¿tÜ
() {

10 
ş—nup_h—d_
.
funùiÚ
 = 
nuÎ±r
;

11 
	gş—nup_h—d_
.
	gÃxt
 = 
nuÎ±r
;

14 
	gI‹¿tÜ
::~
I‹¿tÜ
() {

15 ià(!
ş—nup_h—d_
.
IsEm±y
()) {

16 
ş—nup_h—d_
.
Run
();

17 
CËªupNode
* 
	gnode
 = 
ş—nup_h—d_
.
Ãxt
;‚od!ğ
nuÎ±r
;) {

18 
	gnode
->
Run
();

19 
CËªupNode
* 
	gÃxt_node
 = 
node
->
Ãxt
;

20 
d–‘e
 
	gnode
;

21 
	gnode
 = 
Ãxt_node
;

26 
	gI‹¿tÜ
::
Regi¡”CËªup
(
CËªupFunùiÚ
 
func
, * 
¬g1
, * 
¬g2
) {

27 
as£¹
(
func
 !ğ
nuÎ±r
);

28 
CËªupNode
* 
	gnode
;

29 ià(
	gş—nup_h—d_
.
IsEm±y
()) {

30 
	gnode
 = &
ş—nup_h—d_
;

32 
	gnode
 = 
Ãw
 
CËªupNode
();

33 
	gnode
->
	gÃxt
 = 
ş—nup_h—d_
.
Ãxt
;

34 
	gş—nup_h—d_
.
	gÃxt
 = 
node
;

36 
	gnode
->
	gfunùiÚ
 = 
func
;

37 
	gnode
->
	g¬g1
 = 
¬g1
;

38 
	gnode
->
	g¬g2
 = 
¬g2
;

41 
	gÇme¥aû
 {

43 şas 
	cEm±yI‹¿tÜ
 : 
public
 
I‹¿tÜ
 {

44 
public
:

45 
Em±yI‹¿tÜ
(cÚ¡ 
Stus
& 
s
è: 
¡©us_
(s) {}

46 ~
Em±yI‹¿tÜ
(è
ov”ride
 = ;

48 
boŞ
 
V®id
(ècÚ¡ 
	gov”ride
 {  
	gçl£
; }

49 
S“k
(cÚ¡ 
Sliû
& 
rg‘
è
	gov”ride
 {}

50 
S“kToFœ¡
(è
	gov”ride
 {}

51 
S“kToLa¡
(è
	gov”ride
 {}

52 
Next
(è
	gov”ride
 { 
as£¹
(
çl£
); }

53 
P»v
(è
	gov”ride
 { 
as£¹
(
çl£
); }

54 
Sliû
 
key
(ècÚ¡ 
	gov”ride
 {

55 
as£¹
(
çl£
);

56  
Sliû
();

58 
Sliû
 
v®ue
(ècÚ¡ 
	gov”ride
 {

59 
as£¹
(
çl£
);

60  
Sliû
();

62 
Stus
 
¡©us
(ècÚ¡ 
	gov”ride
 {  
	g¡©us_
; }

64 
	g´iv©e
:

65 
Stus
 
¡©us_
;

70 
I‹¿tÜ
* 
	$NewEm±yI‹¿tÜ
(è{  
Ãw
 
	`Em±yI‹¿tÜ
(
Stus
::
	`OK
()); 
	}
}

72 
I‹¿tÜ
* 
	$NewE¼ÜI‹¿tÜ
(cÚ¡ 
Stus
& 
¡©us
) {

73  
Ãw
 
	`Em±yI‹¿tÜ
(
¡©us
);

74 
	}
}

	@table/iterator_wrapper.h

5 #iâdeà
STORAGE_LEVELDB_TABLE_ITERATOR_WRAPPER_H_


6 
	#STORAGE_LEVELDB_TABLE_ITERATOR_WRAPPER_H_


	)

8 
	~"Ëv–db/™”©Ü.h
"

9 
	~"Ëv–db/¦iû.h
"

11 
Çme¥aû
 
	gËv–db
 {

17 şas 
	cI‹¿tÜW¿µ”
 {

18 
	gpublic
:

19 
I‹¿tÜW¿µ”
(è: 
™”_
(
nuÎ±r
), 
v®id_
(
çl£
) {}

20 
ex¶ic™
 
I‹¿tÜW¿µ”
(
I‹¿tÜ
* 
™”
è: 
™”_
(
nuÎ±r
è{ 
S‘
(iter); }

21 ~
I‹¿tÜW¿µ”
(è{ 
d–‘e
 
	g™”_
; }

22 
I‹¿tÜ
* 
™”
(ècÚ¡ {  
	g™”_
; }

26 
S‘
(
I‹¿tÜ
* 
™”
) {

27 
d–‘e
 
	g™”_
;

28 
	g™”_
 = 
™”
;

29 ià(
	g™”_
 =ğ
nuÎ±r
) {

30 
v®id_
 = 
çl£
;

32 
Upd©e
();

37 
boŞ
 
V®id
(ècÚ¡ {  
	gv®id_
; }

38 
Sliû
 
key
() const {

39 
as£¹
(
V®id
());

40  
	gkey_
;

42 
Sliû
 
v®ue
() const {

43 
as£¹
(
V®id
());

44  
	g™”_
->
v®ue
();

47 
Stus
 
¡©us
() const {

48 
as£¹
(
™”_
);

49  
	g™”_
->
¡©us
();

51 
Next
() {

52 
as£¹
(
™”_
);

53 
	g™”_
->
Next
();

54 
Upd©e
();

56 
P»v
() {

57 
as£¹
(
™”_
);

58 
	g™”_
->
P»v
();

59 
Upd©e
();

61 
S“k
(cÚ¡ 
Sliû
& 
k
) {

62 
as£¹
(
™”_
);

63 
	g™”_
->
S“k
(
k
);

64 
Upd©e
();

66 
S“kToFœ¡
() {

67 
as£¹
(
™”_
);

68 
	g™”_
->
S“kToFœ¡
();

69 
Upd©e
();

71 
S“kToLa¡
() {

72 
as£¹
(
™”_
);

73 
	g™”_
->
S“kToLa¡
();

74 
Upd©e
();

77 
	g´iv©e
:

78 
Upd©e
() {

79 
v®id_
 = 
™”_
->
V®id
();

80 ià(
	gv®id_
) {

81 
	gkey_
 = 
™”_
->
key
();

85 
I‹¿tÜ
* 
	g™”_
;

86 
boŞ
 
	gv®id_
;

87 
Sliû
 
	gkey_
;

	@table/merger.cc

5 
	~"bË/m”g”.h
"

7 
	~"Ëv–db/com·¿tÜ.h
"

8 
	~"Ëv–db/™”©Ü.h
"

9 
	~"bË/™”©Ü_w¿µ”.h
"

11 
Çme¥aû
 
	gËv–db
 {

13 
	gÇme¥aû
 {

14 şas 
	cM”gšgI‹¿tÜ
 : 
public
 
I‹¿tÜ
 {

15 
public
:

16 
M”gšgI‹¿tÜ
(cÚ¡ 
Com·¿tÜ
* 
com·¿tÜ
, 
I‹¿tÜ
** 
chd»n
, 
n
)

17 : 
com·¿tÜ_
(
com·¿tÜ
),

18 
chd»n_
(
Ãw
 
I‹¿tÜW¿µ”
[
n
]),

19 
n_
(
n
),

20 
cu¼’t_
(
nuÎ±r
),

21 
dœeùiÚ_
(
kFÜw¬d
) {

22 
	gi
 = 0; i < 
	gn
; i++) {

23 
	gchd»n_
[
i
].
S‘
(
chd»n
[i]);

27 ~
M”gšgI‹¿tÜ
(è
	gov”ride
 { 
	gd–‘e
[] 
	gchd»n_
; }

29 
boŞ
 
V®id
(ècÚ¡ 
	gov”ride
 {  (
	gcu¼’t_
 !ğ
nuÎ±r
); }

31 
S“kToFœ¡
(è
	gov”ride
 {

32 
	gi
 = 0; i < 
	gn_
; i++) {

33 
	gchd»n_
[
i
].
S“kToFœ¡
();

35 
FšdSm®Ë¡
();

36 
	gdœeùiÚ_
 = 
kFÜw¬d
;

39 
S“kToLa¡
(è
	gov”ride
 {

40 
	gi
 = 0; i < 
	gn_
; i++) {

41 
	gchd»n_
[
i
].
S“kToLa¡
();

43 
FšdL¬ge¡
();

44 
	gdœeùiÚ_
 = 
kRev”£
;

47 
S“k
(cÚ¡ 
Sliû
& 
rg‘
è
	gov”ride
 {

48 
	gi
 = 0; i < 
	gn_
; i++) {

49 
	gchd»n_
[
i
].
S“k
(
rg‘
);

51 
FšdSm®Ë¡
();

52 
	gdœeùiÚ_
 = 
kFÜw¬d
;

55 
Next
(è
	gov”ride
 {

56 
as£¹
(
V®id
());

63 ià(
	gdœeùiÚ_
 !ğ
kFÜw¬d
) {

64 
i
 = 0; 
	gi
 < 
	gn_
; i++) {

65 
I‹¿tÜW¿µ”
* 
	gchd
 = &
chd»n_
[
i
];

66 ià(
	gchd
 !ğ
cu¼’t_
) {

67 
chd
->
S“k
(
key
());

68 ià(
	gchd
->
V®id
() &&

69 
	gcom·¿tÜ_
->
Com·»
(
key
(), 
chd
->key()) == 0) {

70 
chd
->
Next
();

74 
	gdœeùiÚ_
 = 
kFÜw¬d
;

77 
	gcu¼’t_
->
Next
();

78 
FšdSm®Ë¡
();

81 
P»v
(è
	gov”ride
 {

82 
as£¹
(
V®id
());

89 ià(
	gdœeùiÚ_
 !ğ
kRev”£
) {

90 
i
 = 0; 
	gi
 < 
	gn_
; i++) {

91 
I‹¿tÜW¿µ”
* 
	gchd
 = &
chd»n_
[
i
];

92 ià(
	gchd
 !ğ
cu¼’t_
) {

93 
chd
->
S“k
(
key
());

94 ià(
	gchd
->
V®id
()) {

96 
	gchd
->
P»v
();

99 
	gchd
->
S“kToLa¡
();

103 
	gdœeùiÚ_
 = 
kRev”£
;

106 
	gcu¼’t_
->
P»v
();

107 
FšdL¬ge¡
();

110 
Sliû
 
key
(ècÚ¡ 
	gov”ride
 {

111 
as£¹
(
V®id
());

112  
	gcu¼’t_
->
key
();

115 
Sliû
 
v®ue
(ècÚ¡ 
	gov”ride
 {

116 
as£¹
(
V®id
());

117  
	gcu¼’t_
->
v®ue
();

120 
Stus
 
¡©us
(ècÚ¡ 
	gov”ride
 {

121 
Stus
 
	g¡©us
;

122 
	gi
 = 0; i < 
	gn_
; i++) {

123 
	g¡©us
 = 
chd»n_
[
i
].
¡©us
();

124 ià(!
	g¡©us
.
ok
()) {

128  
	g¡©us
;

131 
	g´iv©e
:

133 
	eDœeùiÚ
 { 
kFÜw¬d
, 
	gkRev”£
 };

135 
FšdSm®Ë¡
();

136 
FšdL¬ge¡
();

141 cÚ¡ 
Com·¿tÜ
* 
	gcom·¿tÜ_
;

142 
I‹¿tÜW¿µ”
* 
	gchd»n_
;

143 
	gn_
;

144 
I‹¿tÜW¿µ”
* 
	gcu¼’t_
;

145 
DœeùiÚ
 
	gdœeùiÚ_
;

148 
	gM”gšgI‹¿tÜ
::
FšdSm®Ë¡
() {

149 
I‹¿tÜW¿µ”
* 
sm®Ë¡
 = 
nuÎ±r
;

150 
	gi
 = 0; i < 
	gn_
; i++) {

151 
I‹¿tÜW¿µ”
* 
	gchd
 = &
chd»n_
[
i
];

152 ià(
	gchd
->
V®id
()) {

153 ià(
	gsm®Ë¡
 =ğ
nuÎ±r
) {

154 
sm®Ë¡
 = 
chd
;

155 } ià(
	gcom·¿tÜ_
->
Com·»
(
chd
->
key
(), 
sm®Ë¡
->key()) < 0) {

156 
	gsm®Ë¡
 = 
chd
;

160 
	gcu¼’t_
 = 
sm®Ë¡
;

163 
	gM”gšgI‹¿tÜ
::
FšdL¬ge¡
() {

164 
I‹¿tÜW¿µ”
* 
Ïrge¡
 = 
nuÎ±r
;

165 
	gi
 = 
n_
 - 1; i >= 0; i--) {

166 
I‹¿tÜW¿µ”
* 
	gchd
 = &
chd»n_
[
i
];

167 ià(
	gchd
->
V®id
()) {

168 ià(
	gÏrge¡
 =ğ
nuÎ±r
) {

169 
Ïrge¡
 = 
chd
;

170 } ià(
	gcom·¿tÜ_
->
Com·»
(
chd
->
key
(), 
Ïrge¡
->key()) > 0) {

171 
	gÏrge¡
 = 
chd
;

175 
	gcu¼’t_
 = 
Ïrge¡
;

179 
I‹¿tÜ
* 
	$NewM”gšgI‹¿tÜ
(cÚ¡ 
Com·¿tÜ
* 
com·¿tÜ
, 
I‹¿tÜ
** 
chd»n
,

180 
n
) {

181 
	`as£¹
(
n
 >= 0);

182 ià(
n
 == 0) {

183  
	`NewEm±yI‹¿tÜ
();

184 } ià(
n
 == 1) {

185  
chd»n
[0];

187  
Ãw
 
	`M”gšgI‹¿tÜ
(
com·¿tÜ
, 
chd»n
, 
n
);

189 
	}
}

	@table/merger.h

5 #iâdeà
STORAGE_LEVELDB_TABLE_MERGER_H_


6 
	#STORAGE_LEVELDB_TABLE_MERGER_H_


	)

8 
Çme¥aû
 
	gËv–db
 {

10 
şass
 
	gCom·¿tÜ
;

11 
şass
 
	gI‹¿tÜ
;

21 
I‹¿tÜ
* 
NewM”gšgI‹¿tÜ
(cÚ¡ 
Com·¿tÜ
* 
com·¿tÜ
, I‹¿tÜ** 
chd»n
,

22 
n
);

	@table/table.cc

5 
	~"Ëv–db/bË.h
"

7 
	~"Ëv–db/ÿche.h
"

8 
	~"Ëv–db/com·¿tÜ.h
"

9 
	~"Ëv–db/’v.h
"

10 
	~"Ëv–db/f‹r_pŞicy.h
"

11 
	~"Ëv–db/İtiÚs.h
"

12 
	~"bË/block.h
"

13 
	~"bË/f‹r_block.h
"

14 
	~"bË/fÜm©.h
"

15 
	~"bË/two_Ëv–_™”©Ü.h
"

16 
	~"ut/codšg.h
"

18 
Çme¥aû
 
	gËv–db
 {

20 
	gTabË
::
R•
 {

21 ~
R•
() {

22 
d–‘e
 
f‹r
;

23 
	gd–‘e
[] 
	gf‹r_d©a
;

24 
d–‘e
 
	gšdex_block
;

27 
O±iÚs
 
	gİtiÚs
;

28 
Stus
 
	g¡©us
;

29 
RªdomAcûssFe
* 
	gfe
;

30 
ušt64_t
 
	gÿche_id
;

31 
F‹rBlockR—d”
* 
	gf‹r
;

32 cÚ¡ * 
	gf‹r_d©a
;

34 
BlockHªdË
 
	gm‘ašdex_hªdË
;

35 
Block
* 
	gšdex_block
;

38 
Stus
 
	gTabË
::
O³n
(cÚ¡ 
O±iÚs
& 
İtiÚs
, 
RªdomAcûssFe
* 
fe
,

39 
ušt64_t
 
size
, 
TabË
** 
bË
) {

40 *
	gbË
 = 
nuÎ±r
;

41 ià(
	gsize
 < 
	gFoÙ”
::
kEncodedL’gth
) {

42  
Stus
::
CÜru±iÚ
("file isoo shorto be‡n sstable");

45 
	gfoÙ”_¥aû
[
FoÙ”
::
kEncodedL’gth
];

46 
Sliû
 
	gfoÙ”_šput
;

47 
Stus
 
	gs
 = 
fe
->
R—d
(
size
 - 
FoÙ”
::
kEncodedL’gth
, Footer::kEncodedLength,

48 &
foÙ”_šput
, 
foÙ”_¥aû
);

49 ià(!
	gs
.
ok
())  s;

51 
FoÙ”
 
	gfoÙ”
;

52 
	gs
 = 
foÙ”
.
DecodeFrom
(&
foÙ”_šput
);

53 ià(!
	gs
.
ok
())  s;

56 
BlockCÚ‹Ás
 
	gšdex_block_cÚ‹Ás
;

57 
R—dO±iÚs
 
	gİt
;

58 ià(
	gİtiÚs
.
	g·¿noid_checks
) {

59 
	gİt
.
	gv”ify_checksums
 = 
Œue
;

61 
	gs
 = 
R—dBlock
(
fe
, 
İt
, 
foÙ”
.
šdex_hªdË
(), &
šdex_block_cÚ‹Ás
);

63 ià(
	gs
.
ok
()) {

66 
Block
* 
	gšdex_block
 = 
Ãw
 Block(
šdex_block_cÚ‹Ás
);

67 
R•
* 
	g»p
 = 
Ãw
 
TabË
::Rep;

68 
	g»p
->
	gİtiÚs
 = 
İtiÚs
;

69 
	g»p
->
	gfe
 = 
fe
;

70 
	g»p
->
	gm‘ašdex_hªdË
 = 
foÙ”
.
m‘ašdex_hªdË
();

71 
	g»p
->
	gšdex_block
 = 
šdex_block
;

72 
	g»p
->
	gÿche_id
 = (
İtiÚs
.
block_ÿche
 ? o±iÚs.block_ÿche->
NewId
() : 0);

73 
	g»p
->
	gf‹r_d©a
 = 
nuÎ±r
;

74 
	g»p
->
	gf‹r
 = 
nuÎ±r
;

75 *
	gbË
 = 
Ãw
 
TabË
(
»p
);

76 (*
	gbË
)->
R—dM‘a
(
foÙ”
);

79  
	gs
;

82 
	gTabË
::
R—dM‘a
(cÚ¡ 
FoÙ”
& 
foÙ”
) {

83 ià(
»p_
->
İtiÚs
.
f‹r_pŞicy
 =ğ
nuÎ±r
) {

89 
R—dO±iÚs
 
	gİt
;

90 ià(
	g»p_
->
	gİtiÚs
.
	g·¿noid_checks
) {

91 
	gİt
.
	gv”ify_checksums
 = 
Œue
;

93 
BlockCÚ‹Ás
 
	gcÚ‹Ás
;

94 ià(!
R—dBlock
(
»p_
->
fe
, 
İt
, 
foÙ”
.
m‘ašdex_hªdË
(), &
cÚ‹Ás
).
ok
()) {

98 
Block
* 
	gm‘a
 = 
Ãw
 Block(
cÚ‹Ás
);

100 
I‹¿tÜ
* 
	g™”
 = 
m‘a
->
NewI‹¿tÜ
(
By‹wi£Com·¿tÜ
());

101 
	g¡d
::
¡ršg
 
key
 = "filter.";

102 
	gkey
.
­³nd
(
»p_
->
İtiÚs
.
f‹r_pŞicy
->
Name
());

103 
	g™”
->
S“k
(
key
);

104 ià(
	g™”
->
V®id
(è&& i‹r->
key
(è=ğ
Sliû
(key)) {

105 
R—dF‹r
(
™”
->
v®ue
());

107 
d–‘e
 
	g™”
;

108 
d–‘e
 
	gm‘a
;

111 
	gTabË
::
R—dF‹r
(cÚ¡ 
Sliû
& 
f‹r_hªdË_v®ue
) {

112 
Sliû
 
v
 = 
f‹r_hªdË_v®ue
;

113 
BlockHªdË
 
	gf‹r_hªdË
;

114 ià(!
	gf‹r_hªdË
.
DecodeFrom
(&
v
).
ok
()) {

120 
R—dO±iÚs
 
	gİt
;

121 ià(
	g»p_
->
	gİtiÚs
.
	g·¿noid_checks
) {

122 
	gİt
.
	gv”ify_checksums
 = 
Œue
;

124 
BlockCÚ‹Ás
 
	gblock
;

125 ià(!
R—dBlock
(
»p_
->
fe
, 
İt
, 
f‹r_hªdË
, &
block
).
ok
()) {

128 ià(
	gblock
.
	gh—p_®loÿ‹d
) {

129 
	g»p_
->
	gf‹r_d©a
 = 
block
.
d©a
.data();

131 
	g»p_
->
	gf‹r
 = 
Ãw
 
F‹rBlockR—d”
(
»p_
->
İtiÚs
.
f‹r_pŞicy
, 
block
.
d©a
);

134 
	gTabË
::~
TabË
(è{ 
d–‘e
 
»p_
; }

136 
D–‘eBlock
(* 
¬g
, * 
ignÜed
) {

137 
d–‘e
 
	g»š‹½»t_ÿ¡
<
	gBlock
*>(
	g¬g
);

140 
D–‘eCachedBlock
(cÚ¡ 
Sliû
& 
key
, * 
v®ue
) {

141 
Block
* 
	gblock
 = 
»š‹½»t_ÿ¡
<Block*>(
v®ue
);

142 
d–‘e
 
	gblock
;

145 
R–—£Block
(* 
¬g
, * 
h
) {

146 
Cache
* 
	gÿche
 = 
»š‹½»t_ÿ¡
<Cache*>(
¬g
);

147 
	gCache
::
HªdË
* 
hªdË
 = 
»š‹½»t_ÿ¡
<
Cache
::HªdË*>(
h
);

148 
	gÿche
->
R–—£
(
hªdË
);

153 
I‹¿tÜ
* 
	gTabË
::
BlockR—d”
(* 
¬g
, cÚ¡ 
R—dO±iÚs
& 
İtiÚs
,

154 cÚ¡ 
Sliû
& 
šdex_v®ue
) {

155 
TabË
* 
	gbË
 = 
»š‹½»t_ÿ¡
<TabË*>(
¬g
);

156 
Cache
* 
	gblock_ÿche
 = 
bË
->
»p_
->
İtiÚs
.
block_ÿche
;

157 
Block
* 
	gblock
 = 
nuÎ±r
;

158 
	gCache
::
HªdË
* 
ÿche_hªdË
 = 
nuÎ±r
;

160 
BlockHªdË
 
	ghªdË
;

161 
Sliû
 
	gšput
 = 
šdex_v®ue
;

162 
Stus
 
	gs
 = 
hªdË
.
DecodeFrom
(&
šput
);

166 ià(
	gs
.
ok
()) {

167 
BlockCÚ‹Ás
 
	gcÚ‹Ás
;

168 ià(
	gblock_ÿche
 !ğ
nuÎ±r
) {

169 
ÿche_key_bufãr
[16];

170 
EncodeFixed64
(
ÿche_key_bufãr
, 
bË
->
»p_
->
ÿche_id
);

171 
EncodeFixed64
(
ÿche_key_bufãr
 + 8, 
hªdË
.
off£t
());

172 
Sliû
 
key
(
ÿche_key_bufãr
, (cache_key_buffer));

173 
	gÿche_hªdË
 = 
block_ÿche
->
Lookup
(
key
);

174 ià(
	gÿche_hªdË
 !ğ
nuÎ±r
) {

175 
block
 = 
»š‹½»t_ÿ¡
<
Block
*>(
block_ÿche
->
V®ue
(
ÿche_hªdË
));

177 
	gs
 = 
R—dBlock
(
bË
->
»p_
->
fe
, 
İtiÚs
, 
hªdË
, &
cÚ‹Ás
);

178 ià(
	gs
.
ok
()) {

179 
	gblock
 = 
Ãw
 
Block
(
cÚ‹Ás
);

180 ià(
	gcÚ‹Ás
.
	gÿchabË
 && 
	gİtiÚs
.
	gfl_ÿche
) {

181 
	gÿche_hªdË
 = 
block_ÿche
->
In£¹
(
key
, 
block
, block->
size
(),

182 &
D–‘eCachedBlock
);

187 
	gs
 = 
R—dBlock
(
bË
->
»p_
->
fe
, 
İtiÚs
, 
hªdË
, &
cÚ‹Ás
);

188 ià(
	gs
.
ok
()) {

189 
	gblock
 = 
Ãw
 
Block
(
cÚ‹Ás
);

194 
I‹¿tÜ
* 
	g™”
;

195 ià(
	gblock
 !ğ
nuÎ±r
) {

196 
™”
 = 
block
->
NewI‹¿tÜ
(
bË
->
»p_
->
İtiÚs
.
com·¿tÜ
);

197 ià(
	gÿche_hªdË
 =ğ
nuÎ±r
) {

198 
™”
->
Regi¡”CËªup
(&
D–‘eBlock
, 
block
, 
nuÎ±r
);

200 
	g™”
->
Regi¡”CËªup
(&
R–—£Block
, 
block_ÿche
, 
ÿche_hªdË
);

203 
	g™”
 = 
NewE¼ÜI‹¿tÜ
(
s
);

205  
	g™”
;

208 
I‹¿tÜ
* 
	gTabË
::
NewI‹¿tÜ
(cÚ¡ 
R—dO±iÚs
& 
İtiÚs
) const {

209  
NewTwoLev–I‹¿tÜ
(

210 
»p_
->
šdex_block
->
NewI‹¿tÜ
Ô•_->
İtiÚs
.
com·¿tÜ
),

211 &
TabË
::
BlockR—d”
, 
cÚ¡_ÿ¡
<TabË*>(
this
), 
İtiÚs
);

214 
Stus
 
	gTabË
::
IÁ”ÇlG‘
(cÚ¡ 
R—dO±iÚs
& 
İtiÚs
, cÚ¡ 
Sliû
& 
k
, * 
¬g
,

215 (*
hªdË_»suÉ
)(*, cÚ¡ 
Sliû
&,

216 cÚ¡ 
Sliû
&)) {

217 
Stus
 
	gs
;

218 
I‹¿tÜ
* 
	gi™”
 = 
»p_
->
šdex_block
->
NewI‹¿tÜ
Ô•_->
İtiÚs
.
com·¿tÜ
);

219 
	gi™”
->
S“k
(
k
);

220 ià(
	gi™”
->
V®id
()) {

221 
Sliû
 
	ghªdË_v®ue
 = 
i™”
->
v®ue
();

222 
F‹rBlockR—d”
* 
	gf‹r
 = 
»p_
->
f‹r
;

223 
BlockHªdË
 
	ghªdË
;

224 ià(
	gf‹r
 !ğ
nuÎ±r
 && 
hªdË
.
DecodeFrom
(&
hªdË_v®ue
).
ok
() &&

225 !
f‹r
->
KeyMayM©ch
(
hªdË
.
off£t
(), 
k
)) {

228 
I‹¿tÜ
* 
	gblock_™”
 = 
BlockR—d”
(
this
, 
İtiÚs
, 
i™”
->
v®ue
());

229 
	gblock_™”
->
S“k
(
k
);

230 ià(
	gblock_™”
->
V®id
()) {

231 (*
	ghªdË_»suÉ
)(
	g¬g
, 
	gblock_™”
->
key
(), block_™”->
v®ue
());

233 
	gs
 = 
block_™”
->
¡©us
();

234 
d–‘e
 
	gblock_™”
;

237 ià(
	gs
.
ok
()) {

238 
	gs
 = 
i™”
->
¡©us
();

240 
d–‘e
 
	gi™”
;

241  
	gs
;

244 
ušt64_t
 
	gTabË
::
Aµroxim©eOff£tOf
(cÚ¡ 
Sliû
& 
key
) const {

245 
I‹¿tÜ
* 
šdex_™”
 =

246 
»p_
->
šdex_block
->
NewI‹¿tÜ
Ô•_->
İtiÚs
.
com·¿tÜ
);

247 
	gšdex_™”
->
S“k
(
key
);

248 
ušt64_t
 
	g»suÉ
;

249 ià(
	gšdex_™”
->
V®id
()) {

250 
BlockHªdË
 
	ghªdË
;

251 
Sliû
 
	gšput
 = 
šdex_™”
->
v®ue
();

252 
Stus
 
	gs
 = 
hªdË
.
DecodeFrom
(&
šput
);

253 ià(
	gs
.
ok
()) {

254 
	g»suÉ
 = 
hªdË
.
off£t
();

259 
	g»suÉ
 = 
»p_
->
m‘ašdex_hªdË
.
off£t
();

265 
	g»suÉ
 = 
»p_
->
m‘ašdex_hªdË
.
off£t
();

267 
d–‘e
 
	gšdex_™”
;

268  
	g»suÉ
;

	@table/table_builder.cc

5 
	~"Ëv–db/bË_bud”.h
"

7 
	~<ÿs£¹
>

9 
	~"Ëv–db/com·¿tÜ.h
"

10 
	~"Ëv–db/’v.h
"

11 
	~"Ëv–db/f‹r_pŞicy.h
"

12 
	~"Ëv–db/İtiÚs.h
"

13 
	~"bË/block_bud”.h
"

14 
	~"bË/f‹r_block.h
"

15 
	~"bË/fÜm©.h
"

16 
	~"ut/codšg.h
"

17 
	~"ut/üc32c.h
"

19 
Çme¥aû
 
	gËv–db
 {

21 
	gTabËBud”
::
R•
 {

22 
R•
(cÚ¡ 
O±iÚs
& 
İt
, 
Wr™abËFe
* 
f
)

23 : 
İtiÚs
(
İt
),

24 
šdex_block_İtiÚs
(
İt
),

25 
fe
(
f
),

26 
off£t
(0),

27 
d©a_block
(&
İtiÚs
),

28 
šdex_block
(&
šdex_block_İtiÚs
),

29 
num_’Œ›s
(0),

30 
şo£d
(
çl£
),

31 
f‹r_block
(
İt
.
f‹r_pŞicy
 =ğ
nuÎ±r


32 ? 
nuÎ±r


33 : 
Ãw
 
F‹rBlockBud”
(
İt
.
f‹r_pŞicy
)),

34 
³ndšg_šdex_’Œy
(
çl£
) {

35 
	gšdex_block_İtiÚs
.
	gblock_»¡¬t_š‹rv®
 = 1;

38 
O±iÚs
 
	gİtiÚs
;

39 
O±iÚs
 
	gšdex_block_İtiÚs
;

40 
Wr™abËFe
* 
	gfe
;

41 
ušt64_t
 
	goff£t
;

42 
Stus
 
	g¡©us
;

43 
BlockBud”
 
	gd©a_block
;

44 
BlockBud”
 
	gšdex_block
;

45 
	g¡d
::
¡ršg
 
Ï¡_key
;

46 
št64_t
 
	gnum_’Œ›s
;

47 
boŞ
 
	gşo£d
;

48 
F‹rBlockBud”
* 
	gf‹r_block
;

59 
boŞ
 
	g³ndšg_šdex_’Œy
;

60 
BlockHªdË
 
	g³ndšg_hªdË
;

62 
	g¡d
::
¡ršg
 
com´es£d_ouut
;

65 
	gTabËBud”
::
TabËBud”
(cÚ¡ 
O±iÚs
& 
İtiÚs
, 
Wr™abËFe
* 
fe
)

66 : 
»p_
(
Ãw
 
R•
(
İtiÚs
, 
fe
)) {

67 ià(
	g»p_
->
	gf‹r_block
 !ğ
nuÎ±r
) {

68 
»p_
->
f‹r_block
->
S¹Block
(0);

72 
	gTabËBud”
::~
TabËBud”
() {

73 
as£¹
(
»p_
->
şo£d
);

74 
d–‘e
 
	g»p_
->
	gf‹r_block
;

75 
d–‘e
 
	g»p_
;

78 
Stus
 
	gTabËBud”
::
ChªgeO±iÚs
(cÚ¡ 
O±iÚs
& 
İtiÚs
) {

82 ià(
İtiÚs
.
com·¿tÜ
 !ğ
»p_
->options.comparator) {

83  
Stus
::
Inv®idArgum’t
("changing comparator while buildingable");

88 
	g»p_
->
	gİtiÚs
 = 
İtiÚs
;

89 
	g»p_
->
	gšdex_block_İtiÚs
 = 
İtiÚs
;

90 
	g»p_
->
	gšdex_block_İtiÚs
.
	gblock_»¡¬t_š‹rv®
 = 1;

91  
	gStus
::
OK
();

94 
	gTabËBud”
::
Add
(cÚ¡ 
Sliû
& 
key
, cÚ¡ Sliû& 
v®ue
) {

95 
R•
* 
	gr
 = 
»p_
;

96 
as£¹
(!
r
->
şo£d
);

97 ià(!
ok
()) ;

98 ià(
	gr
->
	gnum_’Œ›s
 > 0) {

99 
as£¹
(
r
->
İtiÚs
.
com·¿tÜ
->
Com·»
(
key
, 
Sliû
Ô->
Ï¡_key
)) > 0);

102 ià(
	gr
->
	g³ndšg_šdex_’Œy
) {

103 
as£¹
(
r
->
d©a_block
.
em±y
());

104 
	gr
->
	gİtiÚs
.
	gcom·¿tÜ
->
FšdShÜ‹¡S•¬©Ü
(&
r
->
Ï¡_key
, 
key
);

105 
	g¡d
::
¡ršg
 
hªdË_’codšg
;

106 
	gr
->
	g³ndšg_hªdË
.
EncodeTo
(&
hªdË_’codšg
);

107 
	gr
->
	gšdex_block
.
Add
(
r
->
Ï¡_key
, 
Sliû
(
hªdË_’codšg
));

108 
	gr
->
	g³ndšg_šdex_’Œy
 = 
çl£
;

111 ià(
	gr
->
	gf‹r_block
 !ğ
nuÎ±r
) {

112 
r
->
f‹r_block
->
AddKey
(
key
);

115 
	gr
->
	gÏ¡_key
.
assign
(
key
.
d©a
(), key.
size
());

116 
	gr
->
	gnum_’Œ›s
++;

117 
	gr
->
	gd©a_block
.
Add
(
key
, 
v®ue
);

119 cÚ¡ 
size_t
 
	ge¡im©ed_block_size
 = 
r
->
d©a_block
.
Cu¼’tSizeE¡im©e
();

120 ià(
	ge¡im©ed_block_size
 >ğ
r
->
İtiÚs
.
block_size
) {

121 
Flush
();

125 
	gTabËBud”
::
Flush
() {

126 
R•
* 
r
 = 
»p_
;

127 
as£¹
(!
r
->
şo£d
);

128 ià(!
ok
()) ;

129 ià(
	gr
->
	gd©a_block
.
em±y
()) ;

130 
as£¹
(!
r
->
³ndšg_šdex_’Œy
);

131 
Wr™eBlock
(&
r
->
d©a_block
, &r->
³ndšg_hªdË
);

132 ià(
ok
()) {

133 
	gr
->
	g³ndšg_šdex_’Œy
 = 
Œue
;

134 
	gr
->
	g¡©us
 = 
r
->
fe
->
Flush
();

136 ià(
	gr
->
	gf‹r_block
 !ğ
nuÎ±r
) {

137 
r
->
f‹r_block
->
S¹Block
Ô->
off£t
);

141 
	gTabËBud”
::
Wr™eBlock
(
BlockBud”
* 
block
, 
BlockHªdË
* 
hªdË
) {

146 
as£¹
(
ok
());

147 
R•
* 
	gr
 = 
»p_
;

148 
Sliû
 
	g¿w
 = 
block
->
Fšish
();

150 
Sliû
 
	gblock_cÚ‹Ás
;

151 
Com´essiÚTy³
 
	gty³
 = 
r
->
İtiÚs
.
com´essiÚ
;

153 
	gty³
) {

154 
	gkNoCom´essiÚ
:

155 
block_cÚ‹Ás
 = 
¿w
;

158 
	gkSÇµyCom´essiÚ
: {

159 
¡d
::
¡ršg
* 
com´es£d
 = &
r
->
com´es£d_ouut
;

160 ià(
	gpÜt
::
SÇµy_Com´ess
(
¿w
.
d©a
(),„aw.
size
(), 
com´es£d
) &&

161 
	gcom´es£d
->
size
(è< 
	g¿w
.size() - (raw.size() / 8u)) {

162 
	gblock_cÚ‹Ás
 = *
com´es£d
;

166 
	gblock_cÚ‹Ás
 = 
¿w
;

167 
	gty³
 = 
kNoCom´essiÚ
;

172 
	gkZ¡dCom´essiÚ
: {

173 
¡d
::
¡ršg
* 
com´es£d
 = &
r
->
com´es£d_ouut
;

174 ià(
	gpÜt
::
Z¡d_Com´ess
(
r
->
İtiÚs
.
z¡d_com´essiÚ_Ëv–
, 
¿w
.
d©a
(),

175 
¿w
.
size
(), 
com´es£d
) &&

176 
	gcom´es£d
->
size
(è< 
	g¿w
.size() - (raw.size() / 8u)) {

177 
	gblock_cÚ‹Ás
 = *
com´es£d
;

181 
	gblock_cÚ‹Ás
 = 
¿w
;

182 
	gty³
 = 
kNoCom´essiÚ
;

187 
Wr™eRawBlock
(
block_cÚ‹Ás
, 
ty³
, 
hªdË
);

188 
	gr
->
	gcom´es£d_ouut
.
ş—r
();

189 
	gblock
->
Re£t
();

192 
	gTabËBud”
::
Wr™eRawBlock
(cÚ¡ 
Sliû
& 
block_cÚ‹Ás
,

193 
Com´essiÚTy³
 
ty³
, 
BlockHªdË
* 
hªdË
) {

194 
R•
* 
	gr
 = 
»p_
;

195 
	ghªdË
->
£t_off£t
(
r
->
off£t
);

196 
	ghªdË
->
£t_size
(
block_cÚ‹Ás
.
size
());

197 
	gr
->
	g¡©us
 = 
r
->
fe
->
Aµ’d
(
block_cÚ‹Ás
);

198 ià(
	gr
->
	g¡©us
.
ok
()) {

199 
	gŒa”
[
kBlockT¿”Size
];

200 
	gŒa”
[0] = 
ty³
;

201 
ušt32_t
 
	güc
 = 
üc32c
::
V®ue
(
block_cÚ‹Ás
.
d©a
(), block_cÚ‹Ás.
size
());

202 
	güc
 = 
üc32c
::
Ex‹nd
(
üc
, 
Œa”
, 1);

203 
EncodeFixed32
(
Œa”
 + 1, 
üc32c
::
Mask
(
üc
));

204 
	gr
->
	g¡©us
 = 
r
->
fe
->
Aµ’d
(
Sliû
(
Œa”
, 
kBlockT¿”Size
));

205 ià(
	gr
->
	g¡©us
.
ok
()) {

206 
	gr
->
	goff£t
 +ğ
block_cÚ‹Ás
.
size
(è+ 
kBlockT¿”Size
;

211 
Stus
 
	gTabËBud”
::
¡©us
(ècÚ¡ {  
»p_
->status; }

213 
Stus
 
	gTabËBud”
::
Fšish
() {

214 
R•
* 
r
 = 
»p_
;

215 
Flush
();

216 
as£¹
(!
r
->
şo£d
);

217 
	gr
->
	gşo£d
 = 
Œue
;

219 
BlockHªdË
 
	gf‹r_block_hªdË
, 
	gm‘ašdex_block_hªdË
, 
	gšdex_block_hªdË
;

222 ià(
ok
(è&& 
	gr
->
	gf‹r_block
 !ğ
nuÎ±r
) {

223 
Wr™eRawBlock
(
r
->
f‹r_block
->
Fšish
(), 
kNoCom´essiÚ
,

224 &
f‹r_block_hªdË
);

228 ià(
ok
()) {

229 
BlockBud”
 
m‘a_šdex_block
(&
r
->
İtiÚs
);

230 ià(
	gr
->
	gf‹r_block
 !ğ
nuÎ±r
) {

232 
¡d
::
¡ršg
 
key
 = "filter.";

233 
	gkey
.
­³nd
(
r
->
İtiÚs
.
f‹r_pŞicy
->
Name
());

234 
	g¡d
::
¡ršg
 
hªdË_’codšg
;

235 
	gf‹r_block_hªdË
.
EncodeTo
(&
hªdË_’codšg
);

236 
	gm‘a_šdex_block
.
Add
(
key
, 
hªdË_’codšg
);

240 
Wr™eBlock
(&
m‘a_šdex_block
, &
m‘ašdex_block_hªdË
);

244 ià(
ok
()) {

245 ià(
	gr
->
	g³ndšg_šdex_’Œy
) {

246 
	gr
->
	gİtiÚs
.
	gcom·¿tÜ
->
FšdShÜtSucûssÜ
(&
r
->
Ï¡_key
);

247 
	g¡d
::
¡ršg
 
hªdË_’codšg
;

248 
	gr
->
	g³ndšg_hªdË
.
EncodeTo
(&
hªdË_’codšg
);

249 
	gr
->
	gšdex_block
.
Add
(
r
->
Ï¡_key
, 
Sliû
(
hªdË_’codšg
));

250 
	gr
->
	g³ndšg_šdex_’Œy
 = 
çl£
;

252 
Wr™eBlock
(&
r
->
šdex_block
, &
šdex_block_hªdË
);

256 ià(
ok
()) {

257 
FoÙ”
 
	gfoÙ”
;

258 
	gfoÙ”
.
£t_m‘ašdex_hªdË
(
m‘ašdex_block_hªdË
);

259 
	gfoÙ”
.
£t_šdex_hªdË
(
šdex_block_hªdË
);

260 
	g¡d
::
¡ršg
 
foÙ”_’codšg
;

261 
	gfoÙ”
.
EncodeTo
(&
foÙ”_’codšg
);

262 
	gr
->
	g¡©us
 = 
r
->
fe
->
Aµ’d
(
foÙ”_’codšg
);

263 ià(
	gr
->
	g¡©us
.
ok
()) {

264 
	gr
->
	goff£t
 +ğ
foÙ”_’codšg
.
size
();

267  
	gr
->
	g¡©us
;

270 
	gTabËBud”
::
AbªdÚ
() {

271 
R•
* 
r
 = 
»p_
;

272 
as£¹
(!
r
->
şo£d
);

273 
	gr
->
	gşo£d
 = 
Œue
;

276 
ušt64_t
 
	gTabËBud”
::
NumEÁr›s
(ècÚ¡ {  
»p_
->
num_’Œ›s
; }

278 
ušt64_t
 
	gTabËBud”
::
FeSize
(ècÚ¡ {  
»p_
->
off£t
; }

	@table/table_test.cc

5 
	~"Ëv–db/bË.h
"

7 
	~<m­
>

8 
	~<¡ršg
>

10 
	~"g‹¡/g‹¡.h
"

11 
	~"db/dbfÜm©.h
"

12 
	~"db/membË.h
"

13 
	~"db/wr™e_b©ch_š‹º®.h
"

14 
	~"Ëv–db/db.h
"

15 
	~"Ëv–db/’v.h
"

16 
	~"Ëv–db/™”©Ü.h
"

17 
	~"Ëv–db/İtiÚs.h
"

18 
	~"Ëv–db/bË_bud”.h
"

19 
	~"bË/block.h
"

20 
	~"bË/block_bud”.h
"

21 
	~"bË/fÜm©.h
"

22 
	~"ut/¿ndom.h
"

23 
	~"ut/‹¡ut.h
"

25 
Çme¥aû
 
	gËv–db
 {

29 
	g¡d
::
¡ršg
 
Rev”£
(cÚ¡ 
Sliû
& 
key
) {

30 
¡d
::
¡ršg
 
¡r
(
key
.
ToSŒšg
());

31 
	g¡d
::
¡ršg
 
»v
("");

32 
	g¡d
::
¡ršg
::
»v”£_™”©Ü
 
r™
 = 
¡r
.
rbegš
(); 
	gr™
 !ğ¡r.
»nd
();

33 ++
	gr™
) {

34 
	g»v
.
push_back
(*
r™
);

36  
	g»v
;

39 
	gÇme¥aû
 {

40 şas 
	cRev”£KeyCom·¿tÜ
 : 
public
 
Com·¿tÜ
 {

41 
public
:

42 cÚ¡ * 
Name
(ècÚ¡ 
ov”ride
 {

46 
Com·»
(cÚ¡ 
Sliû
& 
a
, cÚ¡ Sliû& 
b
ècÚ¡ 
	gov”ride
 {

47  
By‹wi£Com·¿tÜ
()->
Com·»
(
Rev”£
(
a
), Rev”£(
b
));

50 
FšdShÜ‹¡S•¬©Ü
(
¡d
::
¡ršg
* 
¡¬t
,

51 cÚ¡ 
Sliû
& 
lim™
ècÚ¡ 
	gov”ride
 {

52 
	g¡d
::
¡ršg
 
s
 = 
Rev”£
(*
¡¬t
);

53 
	g¡d
::
¡ršg
 
l
 = 
Rev”£
(
lim™
);

54 
By‹wi£Com·¿tÜ
()->
FšdShÜ‹¡S•¬©Ü
(&
s
, 
l
);

55 *
	g¡¬t
 = 
Rev”£
(
s
);

58 
FšdShÜtSucûssÜ
(
¡d
::
¡ršg
* 
key
ècÚ¡ 
ov”ride
 {

59 
¡d
::
¡ršg
 
s
 = 
Rev”£
(*
key
);

60 
By‹wi£Com·¿tÜ
()->
FšdShÜtSucûssÜ
(&
s
);

61 *
	gkey
 = 
Rev”£
(
s
);

65 
Rev”£KeyCom·¿tÜ
 
	g»v”£_key_com·¿tÜ
;

67 
	$Inüem’t
(cÚ¡ 
Com·¿tÜ
* 
cmp
, 
¡d
::
¡ršg
* 
key
) {

68 ià(
cmp
 =ğ
	`By‹wi£Com·¿tÜ
()) {

69 
key
->
	`push_back
('\0');

71 
	`as£¹
(
cmp
 =ğ&
»v”£_key_com·¿tÜ
);

72 
¡d
::
¡ršg
 
»v
 = 
	`Rev”£
(*
key
);

73 
»v
.
	`push_back
('\0');

74 *
key
 = 
	`Rev”£
(
»v
);

76 
	}
}

79 
	gÇme¥aû
 {

80 
	sSTLLessThª
 {

81 cÚ¡ 
Com·¿tÜ
* 
	gcmp
;

83 
STLLessThª
(è: 
cmp
(
By‹wi£Com·¿tÜ
()) {}

84 
STLLessThª
(cÚ¡ 
Com·¿tÜ
* 
c
è: 
cmp
(c) {}

85 
boŞ
 
İ”©Ü
()(cÚ¡ 
¡d
::
¡ršg
& 
a
, cÚ¡ 
	g¡d
::¡ršg& 
b
) const {

86  
cmp
->
Com·»
(
Sliû
(
a
), Sliû(
b
)) < 0;

91 şas 
	cSŒšgSšk
 : 
public
 
Wr™abËFe
 {

92 
public
:

93 ~
SŒšgSšk
(è
ov”ride
 = ;

95 cÚ¡ 
	g¡d
::
¡ršg
& 
cÚ‹Ás
(ècÚ¡ {  
cÚ‹Ás_
; }

97 
Stus
 
Clo£
(è
	gov”ride
 {  
	gStus
::
OK
(); }

98 
Stus
 
Flush
(è
	gov”ride
 {  
	gStus
::
OK
(); }

99 
Stus
 
Sync
(è
	gov”ride
 {  
	gStus
::
OK
(); }

101 
Stus
 
Aµ’d
(cÚ¡ 
Sliû
& 
d©a
è
	gov”ride
 {

102 
	gcÚ‹Ás_
.
­³nd
(
d©a
.d©a(), d©a.
size
());

103  
	gStus
::
OK
();

106 
	g´iv©e
:

107 
¡d
::
¡ršg
 
cÚ‹Ás_
;

110 şas 
	cSŒšgSourû
 : 
public
 
RªdomAcûssFe
 {

111 
public
:

112 
SŒšgSourû
(cÚ¡ 
Sliû
& 
cÚ‹Ás
)

113 : 
cÚ‹Ás_
(
cÚ‹Ás
.
d©a
(), cÚ‹Ás.
size
()) {}

115 ~
SŒšgSourû
(è
	gov”ride
 = ;

117 
ušt64_t
 
Size
(ècÚ¡ {  
	gcÚ‹Ás_
.
size
(); }

119 
Stus
 
R—d
(
ušt64_t
 
off£t
, 
size_t
 
n
, 
Sliû
* 
»suÉ
,

120 * 
sü©ch
ècÚ¡ 
	gov”ride
 {

121 ià(
	goff£t
 >ğ
cÚ‹Ás_
.
size
()) {

122  
Stus
::
Inv®idArgum’t
("invalid Read offset");

124 ià(
	goff£t
 + 
	gn
 > 
	gcÚ‹Ás_
.
size
()) {

125 
	gn
 = 
cÚ‹Ás_
.
size
(è- 
off£t
;

127 
	g¡d
::
memıy
(
sü©ch
, &
cÚ‹Ás_
[
off£t
], 
n
);

128 *
	g»suÉ
 = 
Sliû
(
sü©ch
, 
n
);

129  
	gStus
::
OK
();

132 
	g´iv©e
:

133 
¡d
::
¡ršg
 
cÚ‹Ás_
;

136 
	g¡d
::
	tm­
<
	t¡d
::
	t¡ršg
, std::¡ršg, 
	tSTLLessThª
> 
	tKVM­
;

140 şas 
	cCÚ¡ruùÜ
 {

141 
	gpublic
:

142 
ex¶ic™
 
CÚ¡ruùÜ
(cÚ¡ 
Com·¿tÜ
* 
cmp
è: 
d©a_
(
STLLessThª
(cmp)) {}

143 
vœtu®
 ~
CÚ¡ruùÜ
() = ;

145 
Add
(cÚ¡ 
¡d
::
¡ršg
& 
key
, cÚ¡ 
Sliû
& 
v®ue
) {

146 
	gd©a_
[
key
] = 
v®ue
.
ToSŒšg
();

152 
Fšish
(cÚ¡ 
O±iÚs
& 
İtiÚs
, 
¡d
::
veùÜ
<¡d::
¡ršg
>* 
keys
,

153 
KVM­
* 
kvm­
) {

154 *
	gkvm­
 = 
d©a_
;

155 
	gkeys
->
ş—r
();

156 cÚ¡‡uto& 
	gkvp
 : 
d©a_
) {

157 
keys
->
push_back
(
kvp
.
fœ¡
);

159 
	gd©a_
.
ş—r
();

160 
Stus
 
	gs
 = 
FšishIm¶
(
İtiÚs
, *
kvm­
);

161 
ASSERT_TRUE
(
s
.
ok
()è<< 
	gs
.
ToSŒšg
();

165 
vœtu®
 
Stus
 
FšishIm¶
(cÚ¡ 
O±iÚs
& 
İtiÚs
, cÚ¡ 
KVM­
& 
d©a
) = 0;

167 
vœtu®
 
I‹¿tÜ
* 
NewI‹¿tÜ
() const = 0;

169 cÚ¡ 
	gKVM­
& 
d©a
(ècÚ¡ {  
	gd©a_
; }

171 
vœtu®
 
DB
* 
db
(ècÚ¡ {  
	gnuÎ±r
; }

173 
	g´iv©e
:

174 
KVM­
 
d©a_
;

177 şas 
	cBlockCÚ¡ruùÜ
 : 
public
 
CÚ¡ruùÜ
 {

178 
public
:

179 
ex¶ic™
 
BlockCÚ¡ruùÜ
(cÚ¡ 
Com·¿tÜ
* 
cmp
)

180 : 
CÚ¡ruùÜ
(
cmp
), 
com·¿tÜ_
(cmp), 
block_
(
nuÎ±r
) {}

181 ~
BlockCÚ¡ruùÜ
(è
	gov”ride
 { 
d–‘e
 
	gblock_
; }

182 
Stus
 
FšishIm¶
(cÚ¡ 
O±iÚs
& 
İtiÚs
, cÚ¡ 
KVM­
& 
d©a
è
	gov”ride
 {

183 
d–‘e
 
	gblock_
;

184 
	gblock_
 = 
nuÎ±r
;

185 
BlockBud”
 
bud”
(&
İtiÚs
);

187 cÚ¡‡uto& 
	gkvp
 : 
d©a
) {

188 
bud”
.
Add
(
kvp
.
fœ¡
, kvp.
£cÚd
);

191 
	gd©a_
 = 
bud”
.
Fšish
().
ToSŒšg
();

192 
BlockCÚ‹Ás
 
	gcÚ‹Ás
;

193 
	gcÚ‹Ás
.
	gd©a
 = 
d©a_
;

194 
	gcÚ‹Ás
.
	gÿchabË
 = 
çl£
;

195 
	gcÚ‹Ás
.
	gh—p_®loÿ‹d
 = 
çl£
;

196 
	gblock_
 = 
Ãw
 
Block
(
cÚ‹Ás
);

197  
	gStus
::
OK
();

199 
I‹¿tÜ
* 
NewI‹¿tÜ
(ècÚ¡ 
	gov”ride
 {

200  
	gblock_
->
NewI‹¿tÜ
(
com·¿tÜ_
);

203 
	g´iv©e
:

204 cÚ¡ 
Com·¿tÜ
* cÚ¡ 
com·¿tÜ_
;

205 
	g¡d
::
¡ršg
 
d©a_
;

206 
Block
* 
	gblock_
;

208 
BlockCÚ¡ruùÜ
();

211 şas 
	cTabËCÚ¡ruùÜ
 : 
public
 
CÚ¡ruùÜ
 {

212 
public
:

213 
TabËCÚ¡ruùÜ
(cÚ¡ 
Com·¿tÜ
* 
cmp
)

214 : 
CÚ¡ruùÜ
(
cmp
), 
sourû_
(
nuÎ±r
), 
bË_
(nullptr) {}

215 ~
TabËCÚ¡ruùÜ
(è
	gov”ride
 { 
Re£t
(); }

216 
Stus
 
FšishIm¶
(cÚ¡ 
O±iÚs
& 
İtiÚs
, cÚ¡ 
KVM­
& 
d©a
è
	gov”ride
 {

217 
Re£t
();

218 
SŒšgSšk
 
	gsšk
;

219 
TabËBud”
 
bud”
(
İtiÚs
, &
sšk
);

221 cÚ¡‡uto& 
	gkvp
 : 
d©a
) {

222 
bud”
.
Add
(
kvp
.
fœ¡
, kvp.
£cÚd
);

223 
EXPECT_LEVELDB_OK
(
bud”
.
¡©us
());

225 
Stus
 
	gs
 = 
bud”
.
Fšish
();

226 
EXPECT_LEVELDB_OK
(
s
);

228 
EXPECT_EQ
(
sšk
.
cÚ‹Ás
().
size
(), 
bud”
.
FeSize
());

231 
	gsourû_
 = 
Ãw
 
SŒšgSourû
(
sšk
.
cÚ‹Ás
());

232 
O±iÚs
 
	gbË_İtiÚs
;

233 
	gbË_İtiÚs
.
	gcom·¿tÜ
 = 
İtiÚs
.
com·¿tÜ
;

234  
	gTabË
::
O³n
(
bË_İtiÚs
, 
sourû_
, 
sšk
.
cÚ‹Ás
().
size
(), &
bË_
);

237 
I‹¿tÜ
* 
NewI‹¿tÜ
(ècÚ¡ 
	gov”ride
 {

238  
	gbË_
->
NewI‹¿tÜ
(
R—dO±iÚs
());

241 
ušt64_t
 
Aµroxim©eOff£tOf
(cÚ¡ 
Sliû
& 
key
) const {

242  
	gbË_
->
Aµroxim©eOff£tOf
(
key
);

245 
	g´iv©e
:

246 
Re£t
() {

247 
d–‘e
 
bË_
;

248 
d–‘e
 
	gsourû_
;

249 
	gbË_
 = 
nuÎ±r
;

250 
	gsourû_
 = 
nuÎ±r
;

253 
SŒšgSourû
* 
	gsourû_
;

254 
TabË
* 
	gbË_
;

256 
TabËCÚ¡ruùÜ
();

260 şas 
	cKeyCÚv”tšgI‹¿tÜ
 : 
public
 
I‹¿tÜ
 {

261 
public
:

262 
ex¶ic™
 
KeyCÚv”tšgI‹¿tÜ
(
I‹¿tÜ
* 
™”
è: 
™”_
(iter) {}

264 
KeyCÚv”tšgI‹¿tÜ
(cÚ¡ KeyCÚv”tšgI‹¿tÜ&èğ
d–‘e
;

265 
	gKeyCÚv”tšgI‹¿tÜ
& 
	gİ”©Ü
=(cÚ¡ 
KeyCÚv”tšgI‹¿tÜ
&èğ
d–‘e
;

267 ~
KeyCÚv”tšgI‹¿tÜ
(è
	gov”ride
 { 
d–‘e
 
	g™”_
; }

269 
boŞ
 
V®id
(ècÚ¡ 
	gov”ride
 {  
	g™”_
->Valid(); }

270 
S“k
(cÚ¡ 
Sliû
& 
rg‘
è
	gov”ride
 {

271 
P¬£dIÁ”ÇlKey
 
ikey
(
rg‘
, 
kMaxSequ’ûNumb”
, 
kTy³V®ue
);

272 
	g¡d
::
¡ršg
 
’coded
;

273 
Aµ’dIÁ”ÇlKey
(&
’coded
, 
ikey
);

274 
	g™”_
->
S“k
(
’coded
);

276 
S“kToFœ¡
(è
	gov”ride
 { 
	g™”_
->SeekToFirst(); }

277 
S“kToLa¡
(è
	gov”ride
 { 
	g™”_
->SeekToLast(); }

278 
Next
(è
	gov”ride
 { 
	g™”_
->Next(); }

279 
P»v
(è
	gov”ride
 { 
	g™”_
->Prev(); }

281 
Sliû
 
key
(ècÚ¡ 
	gov”ride
 {

282 
as£¹
(
V®id
());

283 
P¬£dIÁ”ÇlKey
 
	gkey
;

284 ià(!
P¬£IÁ”ÇlKey
(
™”_
->
key
(), &key)) {

285 
	g¡©us_
 = 
Stus
::
CÜru±iÚ
("malformed internal key");

286  
Sliû
("corrupted key");

288  
	gkey
.
	gu£r_key
;

291 
Sliû
 
v®ue
(ècÚ¡ 
	gov”ride
 {  
	g™”_
->value(); }

292 
Stus
 
¡©us
(ècÚ¡ 
	gov”ride
 {

293  
	g¡©us_
.
ok
(è? 
	g™”_
->
¡©us
(è: 
¡©us_
;

296 
	g´iv©e
:

297 
mubË
 
Stus
 
¡©us_
;

298 
I‹¿tÜ
* 
	g™”_
;

301 şas 
	cMemTabËCÚ¡ruùÜ
 : 
public
 
CÚ¡ruùÜ
 {

302 
public
:

303 
ex¶ic™
 
MemTabËCÚ¡ruùÜ
(cÚ¡ 
Com·¿tÜ
* 
cmp
)

304 : 
CÚ¡ruùÜ
(
cmp
), 
š‹º®_com·¿tÜ_
(cmp) {

305 
	gmembË_
 = 
Ãw
 
MemTabË
(
š‹º®_com·¿tÜ_
);

306 
	gmembË_
->
Ref
();

308 ~
MemTabËCÚ¡ruùÜ
(è
	gov”ride
 { 
	gmembË_
->
UÄef
(); }

309 
Stus
 
FšishIm¶
(cÚ¡ 
O±iÚs
& 
İtiÚs
, cÚ¡ 
KVM­
& 
d©a
è
	gov”ride
 {

310 
	gmembË_
->
UÄef
();

311 
	gmembË_
 = 
Ãw
 
MemTabË
(
š‹º®_com·¿tÜ_
);

312 
	gmembË_
->
Ref
();

313 
	g£q
 = 1;

314 cÚ¡‡uto& 
	gkvp
 : 
d©a
) {

315 
membË_
->
Add
(
£q
, 
kTy³V®ue
, 
kvp
.
fœ¡
, kvp.
£cÚd
);

316 
	g£q
++;

318  
	gStus
::
OK
();

320 
I‹¿tÜ
* 
NewI‹¿tÜ
(ècÚ¡ 
	gov”ride
 {

321  
Ãw
 
KeyCÚv”tšgI‹¿tÜ
(
membË_
->
NewI‹¿tÜ
());

324 
	g´iv©e
:

325 cÚ¡ 
IÁ”ÇlKeyCom·¿tÜ
 
š‹º®_com·¿tÜ_
;

326 
MemTabË
* 
	gmembË_
;

329 şas 
	cDBCÚ¡ruùÜ
 : 
public
 
CÚ¡ruùÜ
 {

330 
public
:

331 
ex¶ic™
 
DBCÚ¡ruùÜ
(cÚ¡ 
Com·¿tÜ
* 
cmp
)

332 : 
CÚ¡ruùÜ
(
cmp
), 
com·¿tÜ_
(cmp) {

333 
	gdb_
 = 
nuÎ±r
;

334 
NewDB
();

336 ~
DBCÚ¡ruùÜ
(è
	gov”ride
 { 
d–‘e
 
	gdb_
; }

337 
Stus
 
FšishIm¶
(cÚ¡ 
O±iÚs
& 
İtiÚs
, cÚ¡ 
KVM­
& 
d©a
è
	gov”ride
 {

338 
d–‘e
 
	gdb_
;

339 
	gdb_
 = 
nuÎ±r
;

340 
NewDB
();

341 cÚ¡‡uto& 
	gkvp
 : 
d©a
) {

342 
Wr™eB©ch
 
b©ch
;

343 
	gb©ch
.
Put
(
kvp
.
fœ¡
, kvp.
£cÚd
);

344 
EXPECT_TRUE
(
db_
->
Wr™e
(
Wr™eO±iÚs
(), &
b©ch
).
ok
());

346  
	gStus
::
OK
();

348 
I‹¿tÜ
* 
NewI‹¿tÜ
(ècÚ¡ 
	gov”ride
 {

349  
	gdb_
->
NewI‹¿tÜ
(
R—dO±iÚs
());

352 
DB
* 
db
(ècÚ¡ 
	gov”ride
 {  
	gdb_
; }

354 
	g´iv©e
:

355 
NewDB
() {

356 
¡d
::
¡ršg
 
Çme
 = 
‹¡šg
::
TempDœ
() + "table_testdb";

358 
O±iÚs
 
	gİtiÚs
;

359 
	gİtiÚs
.
	gcom·¿tÜ
 = 
com·¿tÜ_
;

360 
Stus
 
	g¡©us
 = 
De¡royDB
(
Çme
, 
İtiÚs
);

361 
ASSERT_TRUE
(
¡©us
.
ok
()è<< 
	g¡©us
.
ToSŒšg
();

363 
	gİtiÚs
.
	gü—‹_if_missšg
 = 
Œue
;

364 
	gİtiÚs
.
	g”rÜ_if_exi¡s
 = 
Œue
;

365 
	gİtiÚs
.
	gwr™e_bufãr_size
 = 10000;

366 
	g¡©us
 = 
DB
::
O³n
(
İtiÚs
, 
Çme
, &
db_
);

367 
ASSERT_TRUE
(
¡©us
.
ok
()è<< 
	g¡©us
.
ToSŒšg
();

370 cÚ¡ 
Com·¿tÜ
* cÚ¡ 
	gcom·¿tÜ_
;

371 
DB
* 
	gdb_
;

374 
	eTe¡Ty³
 { 
	gTABLE_TEST
, 
	gBLOCK_TEST
, 
	gMEMTABLE_TEST
, 
	gDB_TEST
 };

376 
	sTe¡Args
 {

377 
Te¡Ty³
 
	gty³
;

378 
boŞ
 
	g»v”£_com·»
;

379 
	g»¡¬t_š‹rv®
;

382 cÚ¡ 
Te¡Args
 
	gkTe¡ArgLi¡
[] = {

383 {
TABLE_TEST
, 
çl£
, 16},

384 {
TABLE_TEST
, 
çl£
, 1},

385 {
TABLE_TEST
, 
çl£
, 1024},

386 {
TABLE_TEST
, 
Œue
, 16},

387 {
TABLE_TEST
, 
Œue
, 1},

388 {
TABLE_TEST
, 
Œue
, 1024},

390 {
BLOCK_TEST
, 
çl£
, 16},

391 {
BLOCK_TEST
, 
çl£
, 1},

392 {
BLOCK_TEST
, 
çl£
, 1024},

393 {
BLOCK_TEST
, 
Œue
, 16},

394 {
BLOCK_TEST
, 
Œue
, 1},

395 {
BLOCK_TEST
, 
Œue
, 1024},

398 {
MEMTABLE_TEST
, 
çl£
, 16},

399 {
MEMTABLE_TEST
, 
Œue
, 16},

402 {
DB_TEST
, 
çl£
, 16},

403 {
DB_TEST
, 
Œue
, 16},

405 cÚ¡ 
	gkNumTe¡Args
 = (
kTe¡ArgLi¡
) / (kTestArgList[0]);

407 şas 
	cH¬Ãss
 : 
public
 
‹¡šg
::
Te¡
 {

408 
public
:

409 
H¬Ãss
(è: 
cÚ¡ruùÜ_
(
nuÎ±r
) {}

411 
In™
(cÚ¡ 
Te¡Args
& 
¬gs
) {

412 
d–‘e
 
cÚ¡ruùÜ_
;

413 
	gcÚ¡ruùÜ_
 = 
nuÎ±r
;

414 
	gİtiÚs_
 = 
O±iÚs
();

416 
	gİtiÚs_
.
	gblock_»¡¬t_š‹rv®
 = 
¬gs
.
»¡¬t_š‹rv®
;

419 
	gİtiÚs_
.
	gblock_size
 = 256;

420 ià(
	g¬gs
.
	g»v”£_com·»
) {

421 
	gİtiÚs_
.
	gcom·¿tÜ
 = &
»v”£_key_com·¿tÜ
;

423 
	g¬gs
.
	gty³
) {

424 
	gTABLE_TEST
:

425 
cÚ¡ruùÜ_
 = 
Ãw
 
TabËCÚ¡ruùÜ
(
İtiÚs_
.
com·¿tÜ
);

427 
	gBLOCK_TEST
:

428 
cÚ¡ruùÜ_
 = 
Ãw
 
BlockCÚ¡ruùÜ
(
İtiÚs_
.
com·¿tÜ
);

430 
	gMEMTABLE_TEST
:

431 
cÚ¡ruùÜ_
 = 
Ãw
 
MemTabËCÚ¡ruùÜ
(
İtiÚs_
.
com·¿tÜ
);

433 
	gDB_TEST
:

434 
cÚ¡ruùÜ_
 = 
Ãw
 
DBCÚ¡ruùÜ
(
İtiÚs_
.
com·¿tÜ
);

439 ~
H¬Ãss
(è{ 
d–‘e
 
	gcÚ¡ruùÜ_
; }

441 
Add
(cÚ¡ 
¡d
::
¡ršg
& 
key
, cÚ¡ std::¡ršg& 
v®ue
) {

442 
cÚ¡ruùÜ_
->
Add
(
key
, 
v®ue
);

445 
Te¡
(
Rªdom
* 
ºd
) {

446 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> 
keys
;

447 
KVM­
 
	gd©a
;

448 
	gcÚ¡ruùÜ_
->
Fšish
(
İtiÚs_
, &
keys
, &
d©a
);

450 
Te¡FÜw¬dSÿn
(
keys
, 
d©a
);

451 
Te¡Backw¬dSÿn
(
keys
, 
d©a
);

452 
Te¡RªdomAcûss
(
ºd
, 
keys
, 
d©a
);

455 
Te¡FÜw¬dSÿn
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
>& 
keys
,

456 cÚ¡ 
KVM­
& 
d©a
) {

457 
I‹¿tÜ
* 
	g™”
 = 
cÚ¡ruùÜ_
->
NewI‹¿tÜ
();

458 
ASSERT_TRUE
(!
™”
->
V®id
());

459 
	g™”
->
S“kToFœ¡
();

460 
	gKVM­
::
cÚ¡_™”©Ü
 
mod–_™”
 = 
d©a
.
begš
();

461 
	gmod–_™”
 !ğ
d©a
.
’d
(); ++model_iter) {

462 
ASSERT_EQ
(
ToSŒšg
(
d©a
, 
mod–_™”
), ToSŒšg(
™”
));

463 
	g™”
->
Next
();

465 
ASSERT_TRUE
(!
™”
->
V®id
());

466 
d–‘e
 
	g™”
;

469 
Te¡Backw¬dSÿn
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
>& 
keys
,

470 cÚ¡ 
KVM­
& 
d©a
) {

471 
I‹¿tÜ
* 
	g™”
 = 
cÚ¡ruùÜ_
->
NewI‹¿tÜ
();

472 
ASSERT_TRUE
(!
™”
->
V®id
());

473 
	g™”
->
S“kToLa¡
();

474 
	gKVM­
::
cÚ¡_»v”£_™”©Ü
 
mod–_™”
 = 
d©a
.
rbegš
();

475 
	gmod–_™”
 !ğ
d©a
.
»nd
(); ++model_iter) {

476 
ASSERT_EQ
(
ToSŒšg
(
d©a
, 
mod–_™”
), ToSŒšg(
™”
));

477 
	g™”
->
P»v
();

479 
ASSERT_TRUE
(!
™”
->
V®id
());

480 
d–‘e
 
	g™”
;

483 
Te¡RªdomAcûss
(
Rªdom
* 
ºd
, cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
>& 
keys
,

484 cÚ¡ 
KVM­
& 
d©a
) {

485 cÚ¡ 
boŞ
 
	gkV”bo£
 = 
çl£
;

486 
I‹¿tÜ
* 
	g™”
 = 
cÚ¡ruùÜ_
->
NewI‹¿tÜ
();

487 
ASSERT_TRUE
(!
™”
->
V®id
());

488 
	gKVM­
::
cÚ¡_™”©Ü
 
mod–_™”
 = 
d©a
.
begš
();

489 ià(
	gkV”bo£
è
	g¡d
::
årštf
(
¡d”r
, "---\n");

490 
	gi
 = 0; i < 200; i++) {

491 cÚ¡ 
	gtoss
 = 
ºd
->
UnifÜm
(5);

492 
	gtoss
) {

494 ià(
™”
->
V®id
()) {

495 ià(
kV”bo£
è
¡d
::
årštf
(
¡d”r
, "Next\n");

496 
	g™”
->
Next
();

497 ++
	gmod–_™”
;

498 
ASSERT_EQ
(
ToSŒšg
(
d©a
, 
mod–_™”
), ToSŒšg(
™”
));

504 ià(
kV”bo£
è
¡d
::
årštf
(
¡d”r
, "SeekToFirst\n");

505 
	g™”
->
S“kToFœ¡
();

506 
	gmod–_™”
 = 
d©a
.
begš
();

507 
ASSERT_EQ
(
ToSŒšg
(
d©a
, 
mod–_™”
), ToSŒšg(
™”
));

512 
¡d
::
¡ršg
 
key
 = 
PickRªdomKey
(
ºd
, 
keys
);

513 
	gmod–_™”
 = 
d©a
.
low”_bound
(
key
);

514 ià(
	gkV”bo£
)

515 
	g¡d
::
årštf
(
¡d”r
, "S“k '%s'\n", 
Esÿ³SŒšg
(
key
).
c_¡r
());

516 
	g™”
->
S“k
(
Sliû
(
key
));

517 
ASSERT_EQ
(
ToSŒšg
(
d©a
, 
mod–_™”
), ToSŒšg(
™”
));

522 ià(
™”
->
V®id
()) {

523 ià(
kV”bo£
è
¡d
::
årštf
(
¡d”r
, "Prev\n");

524 
	g™”
->
P»v
();

525 ià(
	gmod–_™”
 =ğ
d©a
.
begš
()) {

526 
mod–_™”
 = 
d©a
.
’d
();

528 --
	gmod–_™”
;

530 
ASSERT_EQ
(
ToSŒšg
(
d©a
, 
mod–_™”
), ToSŒšg(
™”
));

536 ià(
kV”bo£
è
¡d
::
årštf
(
¡d”r
, "SeekToLast\n");

537 
	g™”
->
S“kToLa¡
();

538 ià(
	gkeys
.
em±y
()) {

539 
	gmod–_™”
 = 
d©a
.
’d
();

541 
	g¡d
::
¡ršg
 
Ï¡
 = 
d©a
.
rbegš
()->
fœ¡
;

542 
	gmod–_™”
 = 
d©a
.
low”_bound
(
Ï¡
);

544 
ASSERT_EQ
(
ToSŒšg
(
d©a
, 
mod–_™”
), ToSŒšg(
™”
));

549 
d–‘e
 
	g™”
;

552 
	g¡d
::
¡ršg
 
ToSŒšg
(cÚ¡ 
KVM­
& 
d©a
, cÚ¡ KVM­::
cÚ¡_™”©Ü
& 
™
) {

553 ià(
™
 =ğ
d©a
.
’d
()) {

556  "'" + 
	g™
->
	gfœ¡
 + "->" + it->
	g£cÚd
 + "'";

560 
	g¡d
::
¡ršg
 
ToSŒšg
(cÚ¡ 
KVM­
& 
d©a
,

561 cÚ¡ 
KVM­
::
cÚ¡_»v”£_™”©Ü
& 
™
) {

562 ià(
™
 =ğ
d©a
.
»nd
()) {

565  "'" + 
	g™
->
	gfœ¡
 + "->" + it->
	g£cÚd
 + "'";

569 
	g¡d
::
¡ršg
 
ToSŒšg
(cÚ¡ 
I‹¿tÜ
* 
™
) {

570 ià(!
™
->
V®id
()) {

573  "'" + 
	g™
->
key
().
ToSŒšg
(è+ "->" + it->
v®ue
().ToString() + "'";

577 
	g¡d
::
¡ršg
 
PickRªdomKey
(
Rªdom
* 
ºd
, cÚ¡ 
¡d
::
veùÜ
<¡d::¡ršg>& 
keys
) {

578 ià(
keys
.
em±y
()) {

581 cÚ¡ 
	gšdex
 = 
ºd
->
UnifÜm
(
keys
.
size
());

582 
	g¡d
::
¡ršg
 
»suÉ
 = 
keys
[
šdex
];

583 
	gºd
->
UnifÜm
(3)) {

589 ià(!
»suÉ
.
em±y
(è&&„esuÉ[»suÉ.
size
() - 1] > '\0') {

590 
»suÉ
[»suÉ.
size
() - 1]--;

596 
Inüem’t
(
İtiÚs_
.
com·¿tÜ
, &
»suÉ
);

600  
	g»suÉ
;

605 
DB
* 
db
(ècÚ¡ {  
	gcÚ¡ruùÜ_
->db(); }

607 
	g´iv©e
:

608 
O±iÚs
 
İtiÚs_
;

609 
CÚ¡ruùÜ
* 
	gcÚ¡ruùÜ_
;

613 
	$TEST_F
(
H¬Ãss
, 
Em±y
) {

614 
i
 = 0; i < 
kNumTe¡Args
; i++) {

615 
	`In™
(
kTe¡ArgLi¡
[
i
]);

616 
Rªdom
 
	`ºd
(
‹¡
::
	`RªdomS“d
() + 1);

617 
	`Te¡
(&
ºd
);

619 
	}
}

624 
	$TEST_F
(
H¬Ãss
, 
Z”oRe¡¬tPoštsInBlock
) {

625 
d©a
[(
ušt32_t
)];

626 
	`mem£t
(
d©a
, 0, (data));

627 
BlockCÚ‹Ás
 
cÚ‹Ás
;

628 
cÚ‹Ás
.
d©a
 = 
	`Sliû
(data, (data));

629 
cÚ‹Ás
.
ÿchabË
 = 
çl£
;

630 
cÚ‹Ás
.
h—p_®loÿ‹d
 = 
çl£
;

631 
Block
 
	`block
(
cÚ‹Ás
);

632 
I‹¿tÜ
* 
™”
 = 
block
.
	`NewI‹¿tÜ
(
	`By‹wi£Com·¿tÜ
());

633 
™”
->
	`S“kToFœ¡
();

634 
	`ASSERT_TRUE
(!
™”
->
	`V®id
());

635 
™”
->
	`S“kToLa¡
();

636 
	`ASSERT_TRUE
(!
™”
->
	`V®id
());

637 
™”
->
	`S“k
("foo");

638 
	`ASSERT_TRUE
(!
™”
->
	`V®id
());

639 
d–‘e
 
™”
;

640 
	}
}

643 
	$TEST_F
(
H¬Ãss
, 
Sim¶eEm±yKey
) {

644 
i
 = 0; i < 
kNumTe¡Args
; i++) {

645 
	`In™
(
kTe¡ArgLi¡
[
i
]);

646 
Rªdom
 
	`ºd
(
‹¡
::
	`RªdomS“d
() + 1);

647 
	`Add
("", "v");

648 
	`Te¡
(&
ºd
);

650 
	}
}

652 
	$TEST_F
(
H¬Ãss
, 
Sim¶eSšgË
) {

653 
i
 = 0; i < 
kNumTe¡Args
; i++) {

654 
	`In™
(
kTe¡ArgLi¡
[
i
]);

655 
Rªdom
 
	`ºd
(
‹¡
::
	`RªdomS“d
() + 2);

656 
	`Add
("abc", "v");

657 
	`Te¡
(&
ºd
);

659 
	}
}

661 
	$TEST_F
(
H¬Ãss
, 
Sim¶eMuÉi
) {

662 
i
 = 0; i < 
kNumTe¡Args
; i++) {

663 
	`In™
(
kTe¡ArgLi¡
[
i
]);

664 
Rªdom
 
	`ºd
(
‹¡
::
	`RªdomS“d
() + 3);

665 
	`Add
("abc", "v");

666 
	`Add
("abcd", "v");

667 
	`Add
("ac", "v2");

668 
	`Te¡
(&
ºd
);

670 
	}
}

672 
	$TEST_F
(
H¬Ãss
, 
Sim¶eS³cŸlKey
) {

673 
i
 = 0; i < 
kNumTe¡Args
; i++) {

674 
	`In™
(
kTe¡ArgLi¡
[
i
]);

675 
Rªdom
 
	`ºd
(
‹¡
::
	`RªdomS“d
() + 4);

676 
	`Add
("\xff\xff", "v3");

677 
	`Te¡
(&
ºd
);

679 
	}
}

681 
	$TEST_F
(
H¬Ãss
, 
Rªdomized
) {

682 
i
 = 0; i < 
kNumTe¡Args
; i++) {

683 
	`In™
(
kTe¡ArgLi¡
[
i
]);

684 
Rªdom
 
	`ºd
(
‹¡
::
	`RªdomS“d
() + 5);

685 
num_’Œ›s
 = 0;‚um_entries < 2000;

686 
num_’Œ›s
 += (num_entries < 50 ? 1 : 200)) {

687 ià((
num_’Œ›s
 % 10) == 0) {

688 
¡d
::
	`årštf
(
¡d”r
, "ÿ£ %d oà%d:‚um_’Œ› ğ%d\n", (
i
 + 1),

689 (
kNumTe¡Args
), 
num_’Œ›s
);

691 
e
 = 0;ƒ < 
num_’Œ›s
;ƒ++) {

692 
¡d
::
¡ršg
 
v
;

693 
	`Add
(
‹¡
::
	`RªdomKey
(&
ºd
,„nd.
	`Skewed
(4)),

694 
‹¡
::
	`RªdomSŒšg
(&
ºd
,„nd.
	`Skewed
(5), &
v
).
	`ToSŒšg
());

696 
	`Te¡
(&
ºd
);

699 
	}
}

701 
	$TEST_F
(
H¬Ãss
, 
RªdomizedLÚgDB
) {

702 
Rªdom
 
	`ºd
(
‹¡
::
	`RªdomS“d
());

703 
Te¡Args
 
¬gs
 = {
DB_TEST
, 
çl£
, 16};

704 
	`In™
(
¬gs
);

705 
num_’Œ›s
 = 100000;

706 
e
 = 0;ƒ < 
num_’Œ›s
;ƒ++) {

707 
¡d
::
¡ršg
 
v
;

708 
	`Add
(
‹¡
::
	`RªdomKey
(&
ºd
,„nd.
	`Skewed
(4)),

709 
‹¡
::
	`RªdomSŒšg
(&
ºd
,„nd.
	`Skewed
(5), &
v
).
	`ToSŒšg
());

711 
	`Te¡
(&
ºd
);

714 
fes
 = 0;

715 
Ëv–
 = 0;†ev– < 
cÚfig
::
kNumLev–s
;†evel++) {

716 
¡d
::
¡ršg
 
v®ue
;

717 
Çme
[100];

718 
¡d
::
	`¢´štf
(
Çme
, Òame), "Ëv–db.num-fes-©-Ëv–%d", 
Ëv–
);

719 
	`ASSERT_TRUE
(
	`db
()->
	`G‘Prİ”ty
(
Çme
, &
v®ue
));

720 
fes
 +ğ
	`©oi
(
v®ue
.
	`c_¡r
());

722 
	`ASSERT_GT
(
fes
, 0);

723 
	}
}

725 
	$TEST
(
MemTabËTe¡
, 
Sim¶e
) {

726 
IÁ”ÇlKeyCom·¿tÜ
 
	`cmp
(
	`By‹wi£Com·¿tÜ
());

727 
MemTabË
* 
membË
 = 
Ãw
 
	`MemTabË
(
cmp
);

728 
membË
->
	`Ref
();

729 
Wr™eB©ch
 
b©ch
;

730 
Wr™eB©chIÁ”Çl
::
	`S‘Sequ’û
(&
b©ch
, 100);

731 
b©ch
.
	`Put
(
¡d
::
	`¡ršg
("k1"), std::string("v1"));

732 
b©ch
.
	`Put
(
¡d
::
	`¡ršg
("k2"), std::string("v2"));

733 
b©ch
.
	`Put
(
¡d
::
	`¡ršg
("k3"), std::string("v3"));

734 
b©ch
.
	`Put
(
¡d
::
	`¡ršg
("largekey"), std::string("vlarge"));

735 
	`ASSERT_TRUE
(
Wr™eB©chIÁ”Çl
::
	`In£¹IÁo
(&
b©ch
, 
membË
).
	`ok
());

737 
I‹¿tÜ
* 
™”
 = 
membË
->
	`NewI‹¿tÜ
();

738 
™”
->
	`S“kToFœ¡
();

739 
™”
->
	`V®id
()) {

740 
¡d
::
	`årštf
(
¡d”r
, "key: '%s' -> '%s'\n", 
™”
->
	`key
().
	`ToSŒšg
().
	`c_¡r
(),

741 
™”
->
	`v®ue
().
	`ToSŒšg
().
	`c_¡r
());

742 
™”
->
	`Next
();

745 
d–‘e
 
™”
;

746 
membË
->
	`UÄef
();

747 
	}
}

749 
boŞ
 
	$B‘w“n
(
ušt64_t
 
v®
, ušt64_ˆ
low
, ušt64_ˆ
high
) {

750 
boŞ
 
»suÉ
 = (
v®
 >ğ
low
è&& (v® <ğ
high
);

751 ià(!
»suÉ
) {

752 
¡d
::
	`årštf
(
¡d”r
, "Value %llu is‚ot in„ange [%llu, %llu]\n",

753 ()(
v®
), ()(
low
),

754 ()(
high
));

756  
»suÉ
;

757 
	}
}

759 
	$TEST
(
TabËTe¡
, 
Aµroxim©eOff£tOfPÏš
) {

760 
TabËCÚ¡ruùÜ
 
	`c
(
	`By‹wi£Com·¿tÜ
());

761 
c
.
	`Add
("k01", "hello");

762 
c
.
	`Add
("k02", "hello2");

763 
c
.
	`Add
("k03", 
¡d
::
	`¡ršg
(10000, 'x'));

764 
c
.
	`Add
("k04", 
¡d
::
	`¡ršg
(200000, 'x'));

765 
c
.
	`Add
("k05", 
¡d
::
	`¡ršg
(300000, 'x'));

766 
c
.
	`Add
("k06", "hello3");

767 
c
.
	`Add
("k07", 
¡d
::
	`¡ršg
(100000, 'x'));

768 
¡d
::
veùÜ
<¡d::
¡ršg
> 
keys
;

769 
KVM­
 
kvm­
;

770 
O±iÚs
 
İtiÚs
;

771 
İtiÚs
.
block_size
 = 1024;

772 
İtiÚs
.
com´essiÚ
 = 
kNoCom´essiÚ
;

773 
c
.
	`Fšish
(
İtiÚs
, &
keys
, &
kvm­
);

775 
	`ASSERT_TRUE
(
	`B‘w“n
(
c
.
	`Aµroxim©eOff£tOf
("abc"), 0, 0));

776 
	`ASSERT_TRUE
(
	`B‘w“n
(
c
.
	`Aµroxim©eOff£tOf
("k01"), 0, 0));

777 
	`ASSERT_TRUE
(
	`B‘w“n
(
c
.
	`Aµroxim©eOff£tOf
("k01a"), 0, 0));

778 
	`ASSERT_TRUE
(
	`B‘w“n
(
c
.
	`Aµroxim©eOff£tOf
("k02"), 0, 0));

779 
	`ASSERT_TRUE
(
	`B‘w“n
(
c
.
	`Aµroxim©eOff£tOf
("k03"), 0, 0));

780 
	`ASSERT_TRUE
(
	`B‘w“n
(
c
.
	`Aµroxim©eOff£tOf
("k04"), 10000, 11000));

781 
	`ASSERT_TRUE
(
	`B‘w“n
(
c
.
	`Aµroxim©eOff£tOf
("k04a"), 210000, 211000));

782 
	`ASSERT_TRUE
(
	`B‘w“n
(
c
.
	`Aµroxim©eOff£tOf
("k05"), 210000, 211000));

783 
	`ASSERT_TRUE
(
	`B‘w“n
(
c
.
	`Aµroxim©eOff£tOf
("k06"), 510000, 511000));

784 
	`ASSERT_TRUE
(
	`B‘w“n
(
c
.
	`Aµroxim©eOff£tOf
("k07"), 510000, 511000));

785 
	`ASSERT_TRUE
(
	`B‘w“n
(
c
.
	`Aµroxim©eOff£tOf
("xyz"), 610000, 612000));

786 
	}
}

788 
boŞ
 
	$Com´essiÚSuµÜ‹d
(
Com´essiÚTy³
 
ty³
) {

789 
¡d
::
¡ršg
 
out
;

790 
Sliû
 
š
 = "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa";

791 ià(
ty³
 =ğ
kSÇµyCom´essiÚ
) {

792  
pÜt
::
	`SÇµy_Com´ess
(
š
.
	`d©a
(), in.
	`size
(), &
out
);

793 } ià(
ty³
 =ğ
kZ¡dCom´essiÚ
) {

794  
pÜt
::
	`Z¡d_Com´ess
Ğ1, 
š
.
	`d©a
(), in.
	`size
(), &
out
);

796  
çl£
;

797 
	}
}

799 
şass
 
	gCom´essiÚTabËTe¡


800 : 
public
 ::
‹¡šg
::
Te¡W™hP¬am
<
¡d
::
tu¶e
<
Com´essiÚTy³
>> {};

802 
INSTANTIATE_TEST_SUITE_P
(
Com´essiÚTe¡s
, 
Com´essiÚTabËTe¡
,

803 ::
‹¡šg
::
V®ues
(
kSÇµyCom´essiÚ
,

804 
kZ¡dCom´essiÚ
));

806 
	$TEST_P
(
Com´essiÚTabËTe¡
, 
Aµroxim©eOff£tOfCom´es£d
) {

807 
Com´essiÚTy³
 
ty³
 = ::
‹¡šg
::
g‘
<0>(
	`G‘P¬am
());

808 ià(!
	`Com´essiÚSuµÜ‹d
(
ty³
)) {

809 
	`GTEST_SKIP
(è<< "skpšg com´essiÚe¡: " << 
ty³
;

812 
Rªdom
 
	`ºd
(301);

813 
TabËCÚ¡ruùÜ
 
	`c
(
	`By‹wi£Com·¿tÜ
());

814 
¡d
::
¡ršg
 
tmp
;

815 
c
.
	`Add
("k01", "hello");

816 
c
.
	`Add
("k02", 
‹¡
::
	`Com´essibËSŒšg
(&
ºd
, 0.25, 10000, &
tmp
));

817 
c
.
	`Add
("k03", "hello3");

818 
c
.
	`Add
("k04", 
‹¡
::
	`Com´essibËSŒšg
(&
ºd
, 0.25, 10000, &
tmp
));

819 
¡d
::
veùÜ
<¡d::
¡ršg
> 
keys
;

820 
KVM­
 
kvm­
;

821 
O±iÚs
 
İtiÚs
;

822 
İtiÚs
.
block_size
 = 1024;

823 
İtiÚs
.
com´essiÚ
 = 
ty³
;

824 
c
.
	`Fšish
(
İtiÚs
, &
keys
, &
kvm­
);

827 cÚ¡ 
kSlİ
 = 1000;

828 cÚ¡ 
ex³ùed
 = 2500;

829 cÚ¡ 
mš_z
 = 
ex³ùed
 - 
kSlİ
;

830 cÚ¡ 
max_z
 = 
ex³ùed
 + 
kSlİ
;

832 
	`ASSERT_TRUE
(
	`B‘w“n
(
c
.
	`Aµroxim©eOff£tOf
("abc"), 0, 
kSlİ
));

833 
	`ASSERT_TRUE
(
	`B‘w“n
(
c
.
	`Aµroxim©eOff£tOf
("k01"), 0, 
kSlİ
));

834 
	`ASSERT_TRUE
(
	`B‘w“n
(
c
.
	`Aµroxim©eOff£tOf
("k02"), 0, 
kSlİ
));

836 
	`ASSERT_TRUE
(
	`B‘w“n
(
c
.
	`Aµroxim©eOff£tOf
("k03"), 
mš_z
, 
max_z
));

837 
	`ASSERT_TRUE
(
	`B‘w“n
(
c
.
	`Aµroxim©eOff£tOf
("k04"), 
mš_z
, 
max_z
));

839 
	`ASSERT_TRUE
(
	`B‘w“n
(
c
.
	`Aµroxim©eOff£tOf
("xyz"), 2 * 
mš_z
, 2 * 
max_z
));

840 
	}
}

	@table/two_level_iterator.cc

5 
	~"bË/two_Ëv–_™”©Ü.h
"

7 
	~"Ëv–db/bË.h
"

8 
	~"bË/block.h
"

9 
	~"bË/fÜm©.h
"

10 
	~"bË/™”©Ü_w¿µ”.h
"

12 
Çme¥aû
 
	gËv–db
 {

14 
	gÇme¥aû
 {

16 
	gI‹¿tÜ
* (*
	tBlockFunùiÚ
)(*, cÚ¡ 
	tR—dO±iÚs
&, cÚ¡ 
	tSliû
&);

18 şas 
	cTwoLev–I‹¿tÜ
 : 
public
 
I‹¿tÜ
 {

19 
public
:

20 
TwoLev–I‹¿tÜ
(
I‹¿tÜ
* 
šdex_™”
, 
BlockFunùiÚ
 
block_funùiÚ
,

21 * 
¬g
, cÚ¡ 
R—dO±iÚs
& 
İtiÚs
);

23 ~
TwoLev–I‹¿tÜ
(è
	gov”ride
;

25 
S“k
(cÚ¡ 
Sliû
& 
rg‘
è
	gov”ride
;

26 
S“kToFœ¡
(è
	gov”ride
;

27 
S“kToLa¡
(è
	gov”ride
;

28 
Next
(è
	gov”ride
;

29 
P»v
(è
	gov”ride
;

31 
boŞ
 
V®id
(ècÚ¡ 
	gov”ride
 {  
	gd©a_™”_
.Valid(); }

32 
Sliû
 
key
(ècÚ¡ 
	gov”ride
 {

33 
as£¹
(
V®id
());

34  
	gd©a_™”_
.
key
();

36 
Sliû
 
v®ue
(ècÚ¡ 
	gov”ride
 {

37 
as£¹
(
V®id
());

38  
	gd©a_™”_
.
v®ue
();

40 
Stus
 
¡©us
(ècÚ¡ 
	gov”ride
 {

42 ià(!
	gšdex_™”_
.
¡©us
().
ok
()) {

43  
	gšdex_™”_
.
¡©us
();

44 } ià(
	gd©a_™”_
.
™”
(è!ğ
nuÎ±r
 && !
d©a_™”_
.
¡©us
().
ok
()) {

45  
d©a_™”_
.
¡©us
();

47  
	g¡©us_
;

51 
	g´iv©e
:

52 
SaveE¼Ü
(cÚ¡ 
Stus
& 
s
) {

53 ià(
¡©us_
.
ok
(è&& !
s
.ok()) status_ = s;

55 
SkEm±yD©aBlocksFÜw¬d
();

56 
SkEm±yD©aBlocksBackw¬d
();

57 
S‘D©aI‹¿tÜ
(
I‹¿tÜ
* 
d©a_™”
);

58 
In™D©aBlock
();

60 
BlockFunùiÚ
 
	gblock_funùiÚ_
;

61 * 
	g¬g_
;

62 cÚ¡ 
R—dO±iÚs
 
	gİtiÚs_
;

63 
Stus
 
	g¡©us_
;

64 
I‹¿tÜW¿µ”
 
	gšdex_™”_
;

65 
I‹¿tÜW¿µ”
 
	gd©a_™”_
;

68 
	g¡d
::
¡ršg
 
d©a_block_hªdË_
;

71 
	gTwoLev–I‹¿tÜ
::
TwoLev–I‹¿tÜ
(
I‹¿tÜ
* 
šdex_™”
,

72 
BlockFunùiÚ
 
block_funùiÚ
, * 
¬g
,

73 cÚ¡ 
R—dO±iÚs
& 
İtiÚs
)

74 : 
block_funùiÚ_
(
block_funùiÚ
),

75 
¬g_
(
¬g
),

76 
İtiÚs_
(
İtiÚs
),

77 
šdex_™”_
(
šdex_™”
),

78 
d©a_™”_
(
nuÎ±r
) {}

80 
	gTwoLev–I‹¿tÜ
::~
TwoLev–I‹¿tÜ
() = ;

82 
	gTwoLev–I‹¿tÜ
::
S“k
(cÚ¡ 
Sliû
& 
rg‘
) {

83 
šdex_™”_
.
S“k
(
rg‘
);

84 
In™D©aBlock
();

85 ià(
	gd©a_™”_
.
™”
(è!ğ
nuÎ±r
è
d©a_™”_
.
S“k
(
rg‘
);

86 
SkEm±yD©aBlocksFÜw¬d
();

89 
	gTwoLev–I‹¿tÜ
::
S“kToFœ¡
() {

90 
šdex_™”_
.
S“kToFœ¡
();

91 
In™D©aBlock
();

92 ià(
	gd©a_™”_
.
™”
(è!ğ
nuÎ±r
è
d©a_™”_
.
S“kToFœ¡
();

93 
SkEm±yD©aBlocksFÜw¬d
();

96 
	gTwoLev–I‹¿tÜ
::
S“kToLa¡
() {

97 
šdex_™”_
.
S“kToLa¡
();

98 
In™D©aBlock
();

99 ià(
	gd©a_™”_
.
™”
(è!ğ
nuÎ±r
è
d©a_™”_
.
S“kToLa¡
();

100 
SkEm±yD©aBlocksBackw¬d
();

103 
	gTwoLev–I‹¿tÜ
::
Next
() {

104 
as£¹
(
V®id
());

105 
	gd©a_™”_
.
Next
();

106 
SkEm±yD©aBlocksFÜw¬d
();

109 
	gTwoLev–I‹¿tÜ
::
P»v
() {

110 
as£¹
(
V®id
());

111 
	gd©a_™”_
.
P»v
();

112 
SkEm±yD©aBlocksBackw¬d
();

115 
	gTwoLev–I‹¿tÜ
::
SkEm±yD©aBlocksFÜw¬d
() {

116 
d©a_™”_
.
™”
(è=ğ
nuÎ±r
 || !d©a_™”_.
V®id
()) {

118 ià(!
šdex_™”_
.
V®id
()) {

119 
S‘D©aI‹¿tÜ
(
nuÎ±r
);

122 
	gšdex_™”_
.
Next
();

123 
In™D©aBlock
();

124 ià(
	gd©a_™”_
.
™”
(è!ğ
nuÎ±r
è
d©a_™”_
.
S“kToFœ¡
();

128 
	gTwoLev–I‹¿tÜ
::
SkEm±yD©aBlocksBackw¬d
() {

129 
d©a_™”_
.
™”
(è=ğ
nuÎ±r
 || !d©a_™”_.
V®id
()) {

131 ià(!
šdex_™”_
.
V®id
()) {

132 
S‘D©aI‹¿tÜ
(
nuÎ±r
);

135 
	gšdex_™”_
.
P»v
();

136 
In™D©aBlock
();

137 ià(
	gd©a_™”_
.
™”
(è!ğ
nuÎ±r
è
d©a_™”_
.
S“kToLa¡
();

141 
	gTwoLev–I‹¿tÜ
::
S‘D©aI‹¿tÜ
(
I‹¿tÜ
* 
d©a_™”
) {

142 ià(
d©a_™”_
.
™”
(è!ğ
nuÎ±r
è
SaveE¼Ü
(d©a_™”_.
¡©us
());

143 
	gd©a_™”_
.
S‘
(
d©a_™”
);

146 
	gTwoLev–I‹¿tÜ
::
In™D©aBlock
() {

147 ià(!
šdex_™”_
.
V®id
()) {

148 
S‘D©aI‹¿tÜ
(
nuÎ±r
);

150 
Sliû
 
	ghªdË
 = 
šdex_™”_
.
v®ue
();

151 ià(
	gd©a_™”_
.
™”
(è!ğ
nuÎ±r
 &&

152 
hªdË
.
com·»
(
d©a_block_hªdË_
) == 0) {

156 
I‹¿tÜ
* 
™”
 = (*
block_funùiÚ_
)(
¬g_
, 
	gİtiÚs_
, 
	ghªdË
);

157 
	gd©a_block_hªdË_
.
assign
(
hªdË
.
d©a
(), hªdË.
size
());

158 
S‘D©aI‹¿tÜ
(
™”
);

165 
I‹¿tÜ
* 
	$NewTwoLev–I‹¿tÜ
(
I‹¿tÜ
* 
šdex_™”
,

166 
BlockFunùiÚ
 
block_funùiÚ
, * 
¬g
,

167 cÚ¡ 
R—dO±iÚs
& 
İtiÚs
) {

168  
Ãw
 
	`TwoLev–I‹¿tÜ
(
šdex_™”
, 
block_funùiÚ
, 
¬g
, 
İtiÚs
);

169 
	}
}

	@table/two_level_iterator.h

5 #iâdeà
STORAGE_LEVELDB_TABLE_TWO_LEVEL_ITERATOR_H_


6 
	#STORAGE_LEVELDB_TABLE_TWO_LEVEL_ITERATOR_H_


	)

8 
	~"Ëv–db/™”©Ü.h
"

10 
Çme¥aû
 
	gËv–db
 {

12 
	gR—dO±iÚs
;

23 
I‹¿tÜ
* 
NewTwoLev–I‹¿tÜ
(

24 
I‹¿tÜ
* 
šdex_™”
,

25 
I‹¿tÜ
* (*
block_funùiÚ
)(* 
¬g
, cÚ¡ 
R—dO±iÚs
& 
İtiÚs
,

26 cÚ¡ 
Sliû
& 
šdex_v®ue
),

27 * 
¬g
, cÚ¡ 
R—dO±iÚs
& 
İtiÚs
);

	@third_party/benchmark/bindings/python/google_benchmark/benchmark.cc

3 
	~"b’chm¬k/b’chm¬k.h
"

5 
	~"Çnobšd/Çnobšd.h
"

6 
	~"Çnobšd/İ”©Üs.h
"

7 
	~"Çnobšd/¡l/bšd_m­.h
"

8 
	~"Çnobšd/¡l/¡ršg.h
"

9 
	~"Çnobšd/¡l/veùÜ.h
"

11 
NB_MAKE_OPAQUE
(
b’chm¬k
::
U£rCouÁ”s
);

13 
	gÇme¥aû
 {

14 
Çme¥aû
 
	gnb
 = 
Çnobšd
;

16 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> 
In™Ÿlize
(cÚ¡ std::veùÜ<¡d::¡ršg>& 
¬gv
) {

20 
¡d
::
¡ršg
 
execubË_Çme
(
¬gv
[0]);

21 
	g¡d
::
veùÜ
<*> 
±rs
;

22 
	g±rs
.
»£rve
(
¬gv
.
size
());

23 auto& 
	g¬g
 : 
¬gv
) {

24 
±rs
.
push_back
(
cÚ¡_ÿ¡
<*>(
¬g
.
c_¡r
()));

26 
	g±rs
[0] = 
cÚ¡_ÿ¡
<*>(
execubË_Çme
.
c_¡r
());

27 
	g¬gc
 = 
¡©ic_ÿ¡
<>(
¬gv
.
size
());

28 
	gb’chm¬k
::
In™Ÿlize
(&
¬gc
, 
±rs
.
d©a
());

29 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> 
»maššg_¬gv
;

30 
	g»maššg_¬gv
.
»£rve
(
¬gc
);

31 
	gi
 = 0; i < 
	g¬gc
; ++i) {

32 
	g»maššg_¬gv
.
em¶aû_back
(
±rs
[
i
]);

34  
	g»maššg_¬gv
;

37 
	gb’chm¬k
::
š‹º®
::
B’chm¬k
* 
Regi¡”B’chm¬k
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
,

38 
nb
::
ÿÎabË
 
f
) {

39  
b’chm¬k
::
Regi¡”B’chm¬k
(

40 
Çme
, [
f
](
b’chm¬k
::
S‹
& 
¡©e
) { f(&state); });

43 
NB_MODULE
(
_b’chm¬k
, 
m
) {

45 
usšg
 
	gb’chm¬k
::
TimeUn™
;

46 
	gnb
::
’um_
<
TimeUn™
>(
m
, "TimeUnit")

47 .
v®ue
("kNªo£cÚd", 
TimeUn™
::
kNªo£cÚd
)

48 .
v®ue
("kMiüo£cÚd", 
TimeUn™
::
kMiüo£cÚd
)

49 .
v®ue
("kMli£cÚd", 
TimeUn™
::
kMli£cÚd
)

50 .
v®ue
("kSecÚd", 
TimeUn™
::
kSecÚd
)

51 .
expÜt_v®ues
();

53 
usšg
 
	gb’chm¬k
::
BigO
;

54 
	gnb
::
’um_
<
BigO
>(
m
, "BigO")

55 .
v®ue
("oNÚe", 
BigO
::
oNÚe
)

56 .
v®ue
("o1", 
BigO
::
o1
)

57 .
v®ue
("oN", 
BigO
::
oN
)

58 .
v®ue
("oNSqu¬ed", 
BigO
::
oNSqu¬ed
)

59 .
v®ue
("oNCubed", 
BigO
::
oNCubed
)

60 .
v®ue
("oLogN", 
BigO
::
oLogN
)

61 .
v®ue
("oNLogN", 
BigO
::
oNLogN
)

62 .
v®ue
("oAuto", 
BigO
::
oAuto
)

63 .
v®ue
("oLambda", 
BigO
::
oLambda
)

64 .
expÜt_v®ues
();

66 
usšg
 
	gb’chm¬k
::
š‹º®
::
B’chm¬k
;

67 
	gnb
::
şass_
<
B’chm¬k
>(
m
, "Benchmark")

76 .
def
("un™", &
B’chm¬k
::
Un™
, 
nb
::
rv_pŞicy
::
»ã»nû
)

77 .
def
("¬g", &
B’chm¬k
::
Arg
, 
nb
::
rv_pŞicy
::
»ã»nû
)

78 .
def
("¬gs", &
B’chm¬k
::
Args
, 
nb
::
rv_pŞicy
::
»ã»nû
)

79 .
def
("¿nge", &
B’chm¬k
::
Rªge
, 
nb
::
rv_pŞicy
::
»ã»nû
,

80 
nb
::
¬g
("start"),‚b::arg("limit"))

81 .
def
("d’£_¿nge", &
B’chm¬k
::
D’£Rªge
,

82 
nb
::
rv_pŞicy
::
»ã»nû
,‚b::
¬g
("start"),

83 
nb
::
¬g
("limit"),‚b::arg("step") = 1)

84 .
def
("¿nges", &
B’chm¬k
::
Rªges
, 
nb
::
rv_pŞicy
::
»ã»nû
)

85 .
def
("¬gs_´oduù", &
B’chm¬k
::
ArgsProduù
,

86 
nb
::
rv_pŞicy
::
»ã»nû
)

87 .
def
("¬g_Çme", &
B’chm¬k
::
ArgName
, 
nb
::
rv_pŞicy
::
»ã»nû
)

88 .
def
("¬g_Çmes", &
B’chm¬k
::
ArgNames
,

89 
nb
::
rv_pŞicy
::
»ã»nû
)

90 .
def
("¿nge_·œ", &
B’chm¬k
::
RªgePaœ
,

91 
nb
::
rv_pŞicy
::
»ã»nû
,‚b::
¬g
("lo1"),‚b::arg("hi1"),

92 
nb
::
¬g
("lo2"),‚b::arg("hi2"))

93 .
def
("¿nge_muÉl›r", &
B’chm¬k
::
RªgeMuÉl›r
,

94 
nb
::
rv_pŞicy
::
»ã»nû
)

95 .
def
("mš_time", &
B’chm¬k
::
MšTime
, 
nb
::
rv_pŞicy
::
»ã»nû
)

96 .
def
("mš_w¬mup_time", &
B’chm¬k
::
MšW¬mUpTime
,

97 
nb
::
rv_pŞicy
::
»ã»nû
)

98 .
def
("™”©iÚs", &
B’chm¬k
::
I‹¿tiÚs
,

99 
nb
::
rv_pŞicy
::
»ã»nû
)

100 .
def
("»³t™iÚs", &
B’chm¬k
::
R•‘™iÚs
,

101 
nb
::
rv_pŞicy
::
»ã»nû
)

102 .
def
("»pÜt_agg»g©es_Úly", &
B’chm¬k
::
R•ÜtAgg»g©esOÆy
,

103 
nb
::
rv_pŞicy
::
»ã»nû
,‚b::
¬g
("v®ue"èğ
Œue
)

104 .
def
("di¥Ïy_agg»g©es_Úly", &
B’chm¬k
::
Di¥ÏyAgg»g©esOÆy
,

105 
nb
::
rv_pŞicy
::
»ã»nû
,‚b::
¬g
("v®ue"èğ
Œue
)

106 .
def
("m—su»_´oûss_ıu_time", &
B’chm¬k
::
M—su»ProûssCPUTime
,

107 
nb
::
rv_pŞicy
::
»ã»nû
)

108 .
def
("u£_»®_time", &
B’chm¬k
::
U£R—lTime
,

109 
nb
::
rv_pŞicy
::
»ã»nû
)

110 .
def
("u£_mªu®_time", &
B’chm¬k
::
U£Mªu®Time
,

111 
nb
::
rv_pŞicy
::
»ã»nû
)

112 .
def
(

114 (
B’chm¬k
 * (B’chm¬k::*)(
b’chm¬k
::
BigO
)è& B’chm¬k::
Com¶ex™y
,

115 
nb
::
rv_pŞicy
::
»ã»nû
,

116 
nb
::
¬g
("com¶ex™y"èğ
b’chm¬k
::
oAuto
);

118 
usšg
 
	gb’chm¬k
::
CouÁ”
;

119 
	gnb
::
şass_
<
CouÁ”
> 
py_couÁ”
(
m
, "Counter");

121 
	gnb
::
’um_
<
CouÁ”
::
FÏgs
>(
py_couÁ”
, "Flags")

122 .
v®ue
("kDeçuÉs", 
CouÁ”
::
FÏgs
::
kDeçuÉs
)

123 .
v®ue
("kIsR©e", 
CouÁ”
::
FÏgs
::
kIsR©e
)

124 .
v®ue
("kAvgTh»ads", 
CouÁ”
::
FÏgs
::
kAvgTh»ads
)

125 .
v®ue
("kAvgTh»adsR©e", 
CouÁ”
::
FÏgs
::
kAvgTh»adsR©e
)

126 .
v®ue
("kIsI‹¿tiÚInv¬ŸÁ", 
CouÁ”
::
FÏgs
::
kIsI‹¿tiÚInv¬ŸÁ
)

127 .
v®ue
("kIsIterationInvariantRate",

128 
CouÁ”
::
FÏgs
::
kIsI‹¿tiÚInv¬ŸÁR©e
)

129 .
v®ue
("kAvgI‹¿tiÚs", 
CouÁ”
::
FÏgs
::
kAvgI‹¿tiÚs
)

130 .
v®ue
("kAvgI‹¿tiÚsR©e", 
CouÁ”
::
FÏgs
::
kAvgI‹¿tiÚsR©e
)

131 .
v®ue
("kInv”t", 
CouÁ”
::
FÏgs
::
kInv”t
)

132 .
expÜt_v®ues
()

133 .
def
(
nb
::
£lf
 |‚b::self);

135 
	gnb
::
’um_
<
CouÁ”
::
OÃK
>(
py_couÁ”
, "OneK")

136 .
v®ue
("kIs1000", 
CouÁ”
::
OÃK
::
kIs1000
)

137 .
v®ue
("kIs1024", 
CouÁ”
::
OÃK
::
kIs1024
)

138 .
expÜt_v®ues
();

140 
	gpy_couÁ”


141 .
def
(
nb
::
š™
<, 
CouÁ”
::
FÏgs
, CouÁ”::
OÃK
>(),

142 
nb
::
¬g
("v®ue"èğ0.,‚b::¬g("æags"èğ
CouÁ”
::
kDeçuÉs
,

143 
nb
::
¬g
("k"èğ
CouÁ”
::
kIs1000
)

144 .
def
("__š™__", ([](
CouÁ”
 *
c
, 
v®ue
è{ 
Ãw
 (c) Counter(value); }))

145 .
def_rw
("v®ue", &
CouÁ”
::
v®ue
)

146 .
def_rw
("æags", &
CouÁ”
::
æags
)

147 .
def_rw
("ÚeK", &
CouÁ”
::
ÚeK
)

148 .
def
(
nb
::
š™_im¶ic™
<>());

150 
	gnb
::
im¶ic™ly_cÚv”tibË
<
nb
::
št_
, 
	gCouÁ”
>();

152 
	gnb
::
bšd_m­
<
b’chm¬k
::
U£rCouÁ”s
>(
m
, "UserCounters");

154 
usšg
 
	gb’chm¬k
::
S‹
;

155 
	gnb
::
şass_
<
S‹
>(
m
, "State")

156 .
def
("__boŞ__", &
S‹
::
K“pRuÂšg
)

157 .
def_´İ_ro
("k“p_ruÂšg", &
S‹
::
K“pRuÂšg
)

158 .
def
("·u£_timšg", &
S‹
::
Pau£Timšg
)

159 .
def
("»sume_timšg", &
S‹
::
ResumeTimšg
)

160 .
def
("sk_w™h_”rÜ", &
S‹
::
SkW™hE¼Ü
)

161 .
def_´İ_ro
("”rÜ_occu¼ed", &
S‹
::
”rÜ_occu¼ed
)

162 .
def
("£t_™”©iÚ_time", &
S‹
::
S‘I‹¿tiÚTime
)

163 .
def_´İ_rw
("by‹s_´oûs£d", &
S‹
::
by‹s_´oûs£d
,

164 &
S‹
::
S‘By‹sProûs£d
)

165 .
def_´İ_rw
("com¶ex™y_n", &
S‹
::
com¶ex™y_Ëngth_n
,

166 &
S‹
::
S‘Com¶ex™yN
)

167 .
def_´İ_rw
("™ems_´oûs£d", &
S‹
::
™ems_´oûs£d
,

168 &
S‹
::
S‘I‹msProûs£d
)

169 .
def
("£t_Ïb–", &
S‹
::
S‘Lab–
)

170 .
def
("¿nge", &
S‹
::
¿nge
, 
nb
::
¬g
("pos") = 0)

171 .
def_´İ_ro
("™”©iÚs", &
S‹
::
™”©iÚs
)

172 .
def_´İ_ro
("Çme", &
S‹
::
Çme
)

173 .
def_rw
("couÁ”s", &
S‹
::
couÁ”s
)

174 .
def_´İ_ro
("th»ad_šdex", &
S‹
::
th»ad_šdex
)

175 .
def_´İ_ro
("th»ads", &
S‹
::
th»ads
);

177 
	gm
.
def
("In™Ÿlize", 
In™Ÿlize
);

178 
	gm
.
def
("Regi¡”B’chm¬k", 
Regi¡”B’chm¬k
,

179 
nb
::
rv_pŞicy
::
»ã»nû
);

180 
	gm
.
def
("RunSpecifiedBenchmarks",

181 [](è{ 
b’chm¬k
::
RunS³cif›dB’chm¬ks
(); });

182 
	gm
.
def
("CË¬Regi¡”edB’chm¬ks", 
b’chm¬k
::
CË¬Regi¡”edB’chm¬ks
);

	@third_party/benchmark/cmake/gnu_posix_regex.cpp

1 
	~<gnu»gex.h
>

2 
	~<¡ršg
>

3 
	$maš
() {

4 
¡d
::
¡ršg
 
¡r
 = "test0159";

5 
»gex_t
 
»
;

6 
ec
 = 
	`»gcomp
(&
»
, "^[a-z]+[0-9]+$", 
REG_EXTENDED
 | 
REG_NOSUB
);

7 ià(
ec
 != 0) {

8  
ec
;

10  
	`»gexec
(&
»
, 
¡r
.
	`c_¡r
(), 0, 
nuÎ±r
, 0) ? -1 : 0;

11 
	}
}

	@third_party/benchmark/cmake/posix_regex.cpp

1 
	~<»gex.h
>

2 
	~<¡ršg
>

3 
	$maš
() {

4 
¡d
::
¡ršg
 
¡r
 = "test0159";

5 
»gex_t
 
»
;

6 
ec
 = 
	`»gcomp
(&
»
, "^[a-z]+[0-9]+$", 
REG_EXTENDED
 | 
REG_NOSUB
);

7 ià(
ec
 != 0) {

8  
ec
;

10 
»t
 = 
	`»gexec
(&
»
, 
¡r
.
	`c_¡r
(), 0, 
nuÎ±r
, 0) ? -1 : 0;

11 
	`»gä“
(&
»
);

12  
»t
;

13 
	}
}

	@third_party/benchmark/cmake/pthread_affinity.cpp

1 
	~<±h»ad.h
>

2 
	$maš
() {

3 
ıu_£t_t
 
£t
;

4 
	`CPU_ZERO
(&
£t
);

5 
i
 = 0; i < 
CPU_SETSIZE
; ++i) {

6 
	`CPU_SET
(
i
, &
£t
);

7 
	`CPU_CLR
(
i
, &
£t
);

9 
±h»ad_t
 
£lf
 = 
	`±h»ad_£lf
();

10 
»t
;

11 
»t
 = 
	`±h»ad_g‘affš™y_Å
(
£lf
, (
£t
), &set);

12 ià(
»t
 != 0) „et;

13 
»t
 = 
	`±h»ad_£ffš™y_Å
(
£lf
, (
£t
), &set);

14 ià(
»t
 != 0) „et;

16 
	}
}

	@third_party/benchmark/cmake/std_regex.cpp

1 
	~<»gex
>

2 
	~<¡ršg
>

3 
	$maš
() {

4 cÚ¡ 
¡d
::
¡ršg
 
¡r
 = "test0159";

5 
¡d
::
»gex
 
»
;

6 
»
 = 
¡d
::
	`»gex
("^[a-z]+[0-9]+$",

7 
¡d
::
»gex_cÚ¡ªts
::
ex‹nded
 | std::»gex_cÚ¡ªts::
nosubs
);

8  
¡d
::
	`»gex_£¬ch
(
¡r
, 
»
) ? 0 : -1;

9 
	}
}

	@third_party/benchmark/cmake/steady_clock.cpp

1 
	~<chrÚo
>

3 
	$maš
() {

4 
¡d
::
	tchrÚo
::
	t¡—dy_şock
 
	tClock
;

5 
Clock
::
time_pošt
 

 = Clock::
	`now
();

6 (()

);

7 
	}
}

	@third_party/benchmark/cmake/thread_safety_attributes.cpp

1 
	#HAVE_THREAD_SAFETY_ATTRIBUTES


	)

2 
	~"../¤c/mu‹x.h
"

4 
	$maš
(è{
	}
}

	@third_party/benchmark/include/benchmark/benchmark.h

163 #iâdeà
BENCHMARK_BENCHMARK_H_


164 
	#BENCHMARK_BENCHMARK_H_


	)

167 #ià
__ılu¥lus
 >ğ201103L || (
defšed
(
_MSVC_LANG
) && _MSVC_LANG >= 201103L)

168 
	#BENCHMARK_HAS_CXX11


	)

172 #ià
__ılu¥lus
 >= 201703L || \

173 (
defšed
(
_MSC_VER
è&& 
	g_MSC_VER
 >ğ1911 && 
_MSVC_LANG
 >= 201703L)

174 
	#BENCHMARK_HAS_CXX17


	)

177 
	~<¡dšt.h
>

179 
	~<®gÜ™hm
>

180 
	~<ÿs£¹
>

181 
	~<c¡ddef
>

182 
	~<iosfwd
>

183 
	~<lim™s
>

184 
	~<m­
>

185 
	~<£t
>

186 
	~<¡ršg
>

187 
	~<ut™y
>

188 
	~<veùÜ
>

190 
	~"b’chm¬k/expÜt.h
"

192 #ià
defšed
(
BENCHMARK_HAS_CXX11
)

193 
	~<©omic
>

194 
	~<š™Ÿliz”_li¡
>

195 
	~<ty³_Œa™s
>

196 
	~<ut™y
>

199 #ià
defšed
(
_MSC_VER
)

200 
	~<šŒš.h
>

203 #iâdeà
BENCHMARK_HAS_CXX11


204 
	#BENCHMARK_DISALLOW_COPY_AND_ASSIGN
(
Ty³Name
) \

205 
	`Ty³Name
(cÚ¡ 
Ty³Name
&); \

206 
Ty³Name
& 
İ”©Ü
=(cÚ¡ Ty³Name&)

	)

208 
	#BENCHMARK_DISALLOW_COPY_AND_ASSIGN
(
Ty³Name
) \

209 
	`Ty³Name
(cÚ¡ 
Ty³Name
&èğ
d–‘e
; \

210 
Ty³Name
& 
İ”©Ü
=(cÚ¡ Ty³Name&èğ
d–‘e


	)

213 #ifdeà
BENCHMARK_HAS_CXX17


214 
	#BENCHMARK_UNUSED
 [[
maybe_unu£d
]]

	)

215 #–ià
defšed
(
__GNUC__
è|| defšed(
__şªg__
)

216 
	#BENCHMARK_UNUSED
 
	`__©Œibu‹__
((
unu£d
))

	)

218 
	#BENCHMARK_UNUSED


	)

224 #ià
defšed
(
__şªg__
)

225 
	#BENCHMARK_DONT_OPTIMIZE
 
	`__©Œibu‹__
((
İŠÚe
))

	)

226 #–ià
defšed
(
__GNUC__
è|| defšed(
__GNUG__
)

227 
	#BENCHMARK_DONT_OPTIMIZE
 
	`__©Œibu‹__
((
	`İtimize
(0)))

	)

230 
	#BENCHMARK_DONT_OPTIMIZE


	)

233 #ià
defšed
(
__GNUC__
è|| defšed(
__şªg__
)

234 
	#BENCHMARK_ALWAYS_INLINE
 
	`__©Œibu‹__
((
®ways_šlše
))

	)

235 #–ià
defšed
(
_MSC_VER
è&& !defšed(
__şªg__
)

236 
	#BENCHMARK_ALWAYS_INLINE
 
__fÜûšlše


	)

237 
	#__func__
 
__FUNCTION__


	)

239 
	#BENCHMARK_ALWAYS_INLINE


	)

242 
	#BENCHMARK_INTERNAL_TOSTRING2
(
x
è#x

	)

243 
	#BENCHMARK_INTERNAL_TOSTRING
(
x
è
	`BENCHMARK_INTERNAL_TOSTRING2
(x)

	)

246 #ià(
defšed
(
__GNUC__
è&& !defšed(
__NVCC__
è&& !defšed(
__NVCOMPILER
)è|| defšed(
__şªg__
)

247 
	#BENCHMARK_BUILTIN_EXPECT
(
x
, 
y
è
	`__butš_ex³ù
(x, y)

	)

248 
	#BENCHMARK_DEPRECATED_MSG
(
msg
è
	`__©Œibu‹__
((
	`d•»ÿ‹d
(msg)))

	)

249 
	#BENCHMARK_DISABLE_DEPRECATED_WARNING
 \

250 
	`_P¿gma
("GCC diagnostic…ush") \

251 
	`_P¿gma
("GCC dŸgno¡iøignÜed \"-Wd•»ÿ‹d-deş¬©iÚs\"")

	)

252 
	#BENCHMARK_RESTORE_DEPRECATED_WARNING
 
	`_P¿gma
("GCC dŸgno¡iøpİ")

	)

253 #–ià
defšed
(
__NVCOMPILER
)

254 
	#BENCHMARK_BUILTIN_EXPECT
(
x
, 
y
è
	`__butš_ex³ù
(x, y)

	)

255 
	#BENCHMARK_DEPRECATED_MSG
(
msg
è
	`__©Œibu‹__
((
	`d•»ÿ‹d
(msg)))

	)

256 
	#BENCHMARK_DISABLE_DEPRECATED_WARNING
 \

257 
	`_P¿gma
("diagnostic…ush") \

258 
	`_P¿gma
("dŸg_suµ»s d•»ÿ‹d_’t™y_w™h_cu¡om_mes§ge")

	)

259 
	#BENCHMARK_RESTORE_DEPRECATED_WARNING
 
	`_P¿gma
("dŸgno¡iøpİ")

	)

261 
	#BENCHMARK_BUILTIN_EXPECT
(
x
, 
y
è
	)
x

262 
	#BENCHMARK_DEPRECATED_MSG
(
msg
)

	)

263 
	#BENCHMARK_WARNING_MSG
(
msg
) \

264 
	`__´agma
(
	`mes§ge
(
__FILE__
 "(" 
	`BENCHMARK_INTERNAL_TOSTRING
( \

265 
__LINE__
è"è: w¬nšg‚Ùe: " 
msg
))

	)

266 
	#BENCHMARK_DISABLE_DEPRECATED_WARNING


	)

267 
	#BENCHMARK_RESTORE_DEPRECATED_WARNING


	)

271 #ià
defšed
(
__GNUC__
è&& !defšed(
__şªg__
)

272 
	#BENCHMARK_GCC_VERSION
 (
__GNUC__
 * 100 + 
__GNUC_MINOR__
)

	)

275 #iâdeà
__has_butš


276 
	#__has_butš
(
x
è0

	)

279 #ià
defšed
(
__GNUC__
è|| 
__has_butš
(
__butš_uÄ—chabË
)

280 
	#BENCHMARK_UNREACHABLE
(è
	`__butš_uÄ—chabË
()

	)

281 #–ià
defšed
(
_MSC_VER
)

282 
	#BENCHMARK_UNREACHABLE
(è
	`__assume
(
çl£
)

	)

284 
	#BENCHMARK_UNREACHABLE
(è(()0)

	)

287 #ifdeà
BENCHMARK_HAS_CXX11


288 
	#BENCHMARK_OVERRIDE
 
ov”ride


	)

290 
	#BENCHMARK_OVERRIDE


	)

293 #ià
defšed
(
_MSC_VER
)

294 #´agm¨
w¬nšg
(
push
)

296 #´agm¨
w¬nšg
(
di§bË
 : 4251)

299 
Çme¥aû
 
	gb’chm¬k
 {

300 
şass
 
	gB’chm¬kR•Ü‹r
;

303 cÚ¡ 
	gkDeçuÉMšTimeSŒ
[] = "0.5s";

305 
BENCHMARK_EXPORT
 
PrštDeçuÉH–p
();

307 
BENCHMARK_EXPORT
 
In™Ÿlize
(* 
¬gc
, ** 
¬gv
,

308 (*
H–³rPrš‹rf
)(èğ
PrštDeçuÉH–p
);

309 
BENCHMARK_EXPORT
 
Shutdown
();

313 
BENCHMARK_EXPORT
 
boŞ
 
R•ÜtUÄecognizedArgum’ts
(
¬gc
, ** 
¬gv
);

316 
BENCHMARK_EXPORT
 
	g¡d
::
¡ršg
 
G‘B’chm¬kF‹r
();

322 
BENCHMARK_EXPORT
 
S‘B’chm¬kF‹r
(
¡d
::
¡ršg
 
v®ue
);

325 
BENCHMARK_EXPORT
 
št32_t
 
G‘B’chm¬kV”bos™y
();

330 
BENCHMARK_EXPORT
 
B’chm¬kR•Ü‹r
* 
C»©eDeçuÉDi¥ÏyR•Ü‹r
();

348 
BENCHMARK_EXPORT
 
size_t
 
RunS³cif›dB’chm¬ks
();

349 
BENCHMARK_EXPORT
 
size_t
 
RunS³cif›dB’chm¬ks
(
¡d
::
¡ršg
 
¥ec
);

351 
BENCHMARK_EXPORT
 
size_t


352 
RunS³cif›dB’chm¬ks
(
B’chm¬kR•Ü‹r
* 
di¥Ïy_»pÜ‹r
);

353 
BENCHMARK_EXPORT
 
size_t


354 
RunS³cif›dB’chm¬ks
(
B’chm¬kR•Ü‹r
* 
di¥Ïy_»pÜ‹r
, 
¡d
::
¡ršg
 
¥ec
);

356 
BENCHMARK_EXPORT
 
size_t
 
RunS³cif›dB’chm¬ks
(

357 
B’chm¬kR•Ü‹r
* 
di¥Ïy_»pÜ‹r
, B’chm¬kR•Ü‹r* 
fe_»pÜ‹r
);

358 
BENCHMARK_EXPORT
 
size_t


359 
RunS³cif›dB’chm¬ks
(
B’chm¬kR•Ü‹r
* 
di¥Ïy_»pÜ‹r
,

360 
B’chm¬kR•Ü‹r
* 
fe_»pÜ‹r
, 
¡d
::
¡ršg
 
¥ec
);

364 
	eTimeUn™
 { 
	gkNªo£cÚd
, 
	gkMiüo£cÚd
, 
	gkMli£cÚd
, 
	gkSecÚd
 };

366 
BENCHMARK_EXPORT
 
TimeUn™
 
G‘DeçuÉTimeUn™
();

370 
BENCHMARK_EXPORT
 
S‘DeçuÉTimeUn™
(
TimeUn™
 
un™
);

375 şas 
	cMemÜyMªag”
 {

376 
	gpublic
:

377 cÚ¡ 
št64_t
 
Tomb¡ÚeV®ue
;

379 
	sResuÉ
 {

380 
ResuÉ
()

381 : 
num_®locs
(0),

382 
max_by‹s_u£d
(0),

383 
tÙ®_®loÿ‹d_by‹s
(
Tomb¡ÚeV®ue
),

384 
Ãt_h—p_growth
(
Tomb¡ÚeV®ue
) {}

387 
št64_t
 
	gnum_®locs
;

390 
št64_t
 
	gmax_by‹s_u£d
;

394 
št64_t
 
	gtÙ®_®loÿ‹d_by‹s
;

399 
št64_t
 
	gÃt_h—p_growth
;

402 
	gvœtu®
 ~
MemÜyMªag”
() {}

405 
vœtu®
 
S¹
() = 0;

408 
vœtu®
 
Stİ
(
ResuÉ
& 
»suÉ
) = 0;

413 
BENCHMARK_EXPORT


414 
Regi¡”MemÜyMªag”
(
MemÜyMªag”
* 
memÜy_mªag”
);

417 
BENCHMARK_EXPORT


418 
AddCu¡omCÚ‹xt
(cÚ¡ 
¡d
::
¡ršg
& 
key
, cÚ¡ std::¡ršg& 
v®ue
);

420 
Çme¥aû
 
	gš‹º®
 {

421 
şass
 
	gB’chm¬k
;

422 
şass
 
	gB’chm¬kImp
;

423 
şass
 
	gB’chm¬kFam›s
;

425 
BENCHMARK_EXPORT
 
	g¡d
::
m­
<
¡d
::
¡ršg
, std::¡ršg>*& 
G‘Glob®CÚ‹xt
();

427 
BENCHMARK_EXPORT


428 
U£Ch¬Poš‹r
(const volatile*);

432 
BENCHMARK_EXPORT
 
B’chm¬k
* 
Regi¡”B’chm¬kIÁ”Çl
(Benchmark*);

435 
BENCHMARK_EXPORT
 
In™ŸlizeSŒ—ms
();

436 
BENCHMARK_UNUSED
 
	g¡»am_š™_ªchÜ
 = 
In™ŸlizeSŒ—ms
();

440 #ià(!
defšed
(
__GNUC__
è&& !defšed(
__şªg__
)è|| defšed(
__²aş__
) || \

441 
	$defšed
(
__EMSCRIPTEN__
)

442 
	#BENCHMARK_HAS_NO_INLINE_ASSEMBLY


	)

447 #ifdeà
BENCHMARK_HAS_CXX11


448 
šlše
 
BENCHMARK_ALWAYS_INLINE
 
	$Clobb”MemÜy
() {

449 
¡d
::
	`©omic_sigÇl_ãnû
(¡d::
memÜy_Üd”_acq_»l
);

450 
	}
}

457 #iâdeà
BENCHMARK_HAS_NO_INLINE_ASSEMBLY


458 #ià!
defšed
(
__GNUC__
è|| defšed(
__Îvm__
è|| 
	$defšed
(
__INTEL_COMPILER
)

459 
‹m¶©e
 <
şass
 
Tp
>

460 
	`BENCHMARK_DEPRECATED_MSG
(

463 
šlše
 
BENCHMARK_ALWAYS_INLINE
 
	$DoNÙO±imize
(
Tp
 cÚ¡& 
v®ue
) {

464 
asm
 vŞ©e("" : : "r,m"(
v®ue
) : "memory");

465 
	}
}

467 
	g‹m¶©e
 <
şass
 
	gTp
>

468 
šlše
 
BENCHMARK_ALWAYS_INLINE
 
	$DoNÙO±imize
(
Tp
& 
v®ue
) {

469 #ià
	`defšed
(
__şªg__
)

470 
asm
 vŞ©e("" : "+r,m"(
v®ue
) : : "memory");

472 
asm
 vŞ©e("" : "+m,r"(
v®ue
) : : "memory");

474 
	}
}

475 #–ià
defšed
(
BENCHMARK_HAS_CXX11
è&& (
__GNUC__
 >= 5)

478 
	g‹m¶©e
 <
şass
 
	gTp
>

479 
BENCHMARK_DEPRECATED_MSG
(

482 
šlše
 
BENCHMARK_ALWAYS_INLINE


483 
ty³Çme
 
	g¡d
::
’abË_if
<
¡d
::
is_ŒivŸÎy_cİyabË
<
Tp
>::
v®ue
 &&

484 ((
Tp
è<ğ(Tp*))>::
ty³


485 
	$DoNÙO±imize
(
Tp
 cÚ¡& 
v®ue
) {

486 
asm
 vŞ©e("" : : "r,m"(
v®ue
) : "memory");

487 
	}
}

489 
	g‹m¶©e
 <
şass
 
	gTp
>

490 
BENCHMARK_DEPRECATED_MSG
(

493 
šlše
 
BENCHMARK_ALWAYS_INLINE


494 
ty³Çme
 
	g¡d
::
’abË_if
<!
¡d
::
is_ŒivŸÎy_cİyabË
<
Tp
>::
v®ue
 ||

495 ((
Tp
è> (Tp*))>::
ty³


496 
	$DoNÙO±imize
(
Tp
 cÚ¡& 
v®ue
) {

497 
asm
 vŞ©e("" : : "m"(
v®ue
) : "memory");

498 
	}
}

500 
	g‹m¶©e
 <
şass
 
	gTp
>

501 
šlše
 
BENCHMARK_ALWAYS_INLINE


502 
ty³Çme
 
	g¡d
::
’abË_if
<
¡d
::
is_ŒivŸÎy_cİyabË
<
Tp
>::
v®ue
 &&

503 ((
Tp
è<ğ(Tp*))>::
ty³


504 
	$DoNÙO±imize
(
Tp
& 
v®ue
) {

505 
asm
 vŞ©e("" : "+m,r"(
v®ue
) : : "memory");

506 
	}
}

508 
	g‹m¶©e
 <
şass
 
	gTp
>

509 
šlše
 
BENCHMARK_ALWAYS_INLINE


510 
ty³Çme
 
	g¡d
::
’abË_if
<!
¡d
::
is_ŒivŸÎy_cİyabË
<
Tp
>::
v®ue
 ||

511 ((
Tp
è> (Tp*))>::
ty³


512 
	$DoNÙO±imize
(
Tp
& 
v®ue
) {

513 
asm
 vŞ©e("" : "+m"(
v®ue
) : : "memory");

514 
	}
}

520 
	g‹m¶©e
 <
şass
 
	gTp
>

521 
BENCHMARK_DEPRECATED_MSG
(

524 
šlše
 
BENCHMARK_ALWAYS_INLINE
 
	$DoNÙO±imize
(
Tp
 cÚ¡& 
v®ue
) {

525 
asm
 vŞ©e("" : : "m"(
v®ue
) : "memory");

526 
	}
}

528 
	g‹m¶©e
 <
şass
 
	gTp
>

529 
šlše
 
BENCHMARK_ALWAYS_INLINE
 
	$DoNÙO±imize
(
Tp
& 
v®ue
) {

530 
asm
 vŞ©e("" : "+m"(
v®ue
) : : "memory");

531 
	}
}

534 #iâdeà
BENCHMARK_HAS_CXX11


535 
šlše
 
BENCHMARK_ALWAYS_INLINE
 
	$Clobb”MemÜy
() {

536 
asm
 volatile("" : : : "memory");

537 
	}
}

539 #–ià
	$defšed
(
_MSC_VER
)

540 
‹m¶©e
 <
şass
 
Tp
>

541 
	`BENCHMARK_DEPRECATED_MSG
(

544 
šlše
 
BENCHMARK_ALWAYS_INLINE
 
	$DoNÙO±imize
(
Tp
 cÚ¡& 
v®ue
) {

545 
š‹º®
::
	`U£Ch¬Poš‹r
(&
»š‹½»t_ÿ¡
<cÚ¡ vŞ©e&>(
v®ue
));

546 
	`_R—dWr™eB¬r›r
();

547 
	}
}

549 #iâdeà
BENCHMARK_HAS_CXX11


550 
šlše
 
BENCHMARK_ALWAYS_INLINE
 
	$Clobb”MemÜy
(è{ 
	`_R—dWr™eB¬r›r
(); 
	}
}

553 
	g‹m¶©e
 <
şass
 
	gTp
>

554 
BENCHMARK_DEPRECATED_MSG
(

557 
šlše
 
BENCHMARK_ALWAYS_INLINE
 
	$DoNÙO±imize
(
Tp
 cÚ¡& 
v®ue
) {

558 
š‹º®
::
	`U£Ch¬Poš‹r
(&
»š‹½»t_ÿ¡
<cÚ¡ vŞ©e&>(
v®ue
));

559 
	}
}

564 şas 
	cCouÁ”
 {

565 
	gpublic
:

566 
	eFÏgs
 {

567 
kDeçuÉs
 = 0,

570 
	gkIsR©e
 = 1 << 0,

573 
	gkAvgTh»ads
 = 1 << 1,

575 
	gkAvgTh»adsR©e
 = 
kIsR©e
 | 
kAvgTh»ads
,

578 
	gkIsI‹¿tiÚInv¬ŸÁ
 = 1 << 2,

582 
	gkIsI‹¿tiÚInv¬ŸÁR©e
 = 
kIsR©e
 | 
kIsI‹¿tiÚInv¬ŸÁ
,

585 
	gkAvgI‹¿tiÚs
 = 1 << 3,

587 
	gkAvgI‹¿tiÚsR©e
 = 
kIsR©e
 | 
kAvgI‹¿tiÚs
,

590 
	gkInv”t
 = 1 << 31

593 
	eOÃK
 {

595 
	gkIs1000
 = 1000,

597 
	gkIs1024
 = 1024

600 
	gv®ue
;

601 
FÏgs
 
	gæags
;

602 
OÃK
 
	gÚeK
;

604 
BENCHMARK_ALWAYS_INLINE


605 
CouÁ”
(
v
 = 0., 
FÏgs
 
f
 = 
kDeçuÉs
, 
OÃK
 
k
 = 
kIs1000
)

606 : 
v®ue
(
v
), 
æags
(
f
), 
ÚeK
(
k
) {}

608 
BENCHMARK_ALWAYS_INLINE
 
İ”©Ü
 cÚ¡ &(ècÚ¡ {  
	gv®ue
; }

609 
BENCHMARK_ALWAYS_INLINE
 
İ”©Ü
 &(è{  
	gv®ue
; }

614 
	gCouÁ”
::
FÏgs
 
šlše
 
İ”©Ü
|(cÚ¡ 
CouÁ”
::FÏgs& 
LHS
,

615 cÚ¡ 
	gCouÁ”
::
FÏgs
& 
RHS
) {

616  
¡©ic_ÿ¡
<
CouÁ”
::
FÏgs
>(¡©ic_ÿ¡<>(
LHS
) |

617 
¡©ic_ÿ¡
<>(
RHS
));

621 
	g¡d
::
	tm­
<
	t¡d
::
	t¡ršg
, 
	tCouÁ”
> 
	tU£rCouÁ”s
;

627 
	eBigO
 { 
	goNÚe
, 
	go1
, 
	goN
, 
	goNSqu¬ed
, 
	goNCubed
, 
	goLogN
, 
	goNLogN
, 
	goAuto
, 
	goLambda
 };

629 
št64_t
 
	tI‹¿tiÚCouÁ
;

631 
	eSti¡icUn™
 { 
	gkTime
, 
	gkP”ûÁage
 };

635 (
	tBigOFunc
)(
	tI‹¿tiÚCouÁ
);

639 (
	tSti¡icsFunc
)(cÚ¡ 
	t¡d
::
	tveùÜ
<>&);

641 
Çme¥aû
 
š‹º®
 {

642 
	sSti¡ics
 {

643 
¡d
::
¡ršg
 
Çme_
;

644 
Sti¡icsFunc
* 
compu‹_
;

645 
Sti¡icUn™
 
un™_
;

647 
	`Sti¡ics
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
, 
Sti¡icsFunc
* 
compu‹
,

648 
Sti¡icUn™
 
un™
 = 
kTime
)

649 : 
	`Çme_
(
Çme
), 
	`compu‹_
(
compu‹
), 
	`un™_
(
un™
) {}

652 
şass
 
B’chm¬kIn¡ªû
;

653 
şass
 
Th»adTim”
;

654 
şass
 
Th»adMªag”
;

655 
şass
 
P”fCouÁ”sM—su»m’t
;

657 
Agg»g©iÚR•ÜtMode


658 #ià
	`defšed
(
BENCHMARK_HAS_CXX11
)

664 
ARM_Un¥ecif›d
 = 0,

667 
ARM_DeçuÉ
 = 1U << 0U,

669 
ARM_FeR•ÜtAgg»g©esOÆy
 = 1U << 1U,

671 
ARM_Di¥ÏyR•ÜtAgg»g©esOÆy
 = 1U << 2U,

673 
ARM_R•ÜtAgg»g©esOÆy
 =

674 
ARM_FeR•ÜtAgg»g©esOÆy
 | 
ARM_Di¥ÏyR•ÜtAgg»g©esOÆy


677 
Sk³d


678 #ià
	`defšed
(
BENCHMARK_HAS_CXX11
)

682 
NÙSk³d
 = 0,

683 
Sk³dW™hMes§ge
,

684 
Sk³dW™hE¼Ü


687 
	}
}

691 şas 
	cBENCHMARK_EXPORT
 
	gS‹
 {

692 
	gpublic
:

693 
S‹I‹¿tÜ
;

694 
ä›nd
 
	gS‹I‹¿tÜ
;

703 
BENCHMARK_ALWAYS_INLINE
 
S‹I‹¿tÜ
 
begš
();

704 
BENCHMARK_ALWAYS_INLINE
 
S‹I‹¿tÜ
 
’d
();

709 
boŞ
 
K“pRuÂšg
();

721 
boŞ
 
K“pRuÂšgB©ch
(
I‹¿tiÚCouÁ
 
n
);

737 
Pau£Timšg
();

748 
ResumeTimšg
();

770 
SkW™hMes§ge
(cÚ¡ 
¡d
::
¡ršg
& 
msg
);

791 
SkW™hE¼Ü
(cÚ¡ 
¡d
::
¡ršg
& 
msg
);

794 
boŞ
 
sk³d
(ècÚ¡ {  
	gš‹º®
::
NÙSk³d
 !ğ
sk³d_
; }

797 
boŞ
 
”rÜ_occu¼ed
(ècÚ¡ {  
	gš‹º®
::
Sk³dW™hE¼Ü
 =ğ
sk³d_
; }

806 
S‘I‹¿tiÚTime
(
£cÚds
);

813 
BENCHMARK_ALWAYS_INLINE


814 
S‘By‹sProûs£d
(
št64_t
 
by‹s
) {

815 
	gcouÁ”s
["bytes_per_second"] =

816 
CouÁ”
(
¡©ic_ÿ¡
<>(
by‹s
), CouÁ”::
kIsR©e
, CouÁ”::
kIs1024
);

819 
BENCHMARK_ALWAYS_INLINE


820 
št64_t
 
by‹s_´oûs£d
() const {

821 ià(
	gcouÁ”s
.
fšd
("by‹s_³r_£cÚd"è!ğ
couÁ”s
.
’d
())

822  
¡©ic_ÿ¡
<
št64_t
>(
couÁ”s
.
©
("bytes_per_second"));

831 
BENCHMARK_ALWAYS_INLINE


832 
S‘Com¶ex™yN
(
št64_t
 
com¶ex™y_n
è{ 
	gcom¶ex™y_n_
 = complexity_n; }

834 
BENCHMARK_ALWAYS_INLINE


835 
št64_t
 
com¶ex™y_Ëngth_n
(ècÚ¡ {  
	gcom¶ex™y_n_
; }

843 
BENCHMARK_ALWAYS_INLINE


844 
S‘I‹msProûs£d
(
št64_t
 
™ems
) {

845 
	gcouÁ”s
["items_per_second"] =

846 
CouÁ”
(
¡©ic_ÿ¡
<>(
™ems
), 
b’chm¬k
::CouÁ”::
kIsR©e
);

849 
BENCHMARK_ALWAYS_INLINE


850 
št64_t
 
™ems_´oûs£d
() const {

851 ià(
	gcouÁ”s
.
fšd
("™ems_³r_£cÚd"è!ğ
couÁ”s
.
’d
())

852  
¡©ic_ÿ¡
<
št64_t
>(
couÁ”s
.
©
("items_per_second"));

868 
S‘Lab–
(cÚ¡ 
¡d
::
¡ršg
& 
Ïb–
);

871 
BENCHMARK_ALWAYS_INLINE


872 
št64_t
 
¿nge
(
¡d
::
size_t
 
pos
 = 0) const {

873 
as£¹
(
¿nge_
.
size
(è> 
pos
);

874  
	g¿nge_
[
pos
];

877 
BENCHMARK_DEPRECATED_MSG
("use 'range(0)' instead")

878 
št64_t
 
¿nge_x
(ècÚ¡ {  
¿nge
(0); }

880 
BENCHMARK_DEPRECATED_MSG
("use 'range(1)' instead")

881 
št64_t
 
¿nge_y
(ècÚ¡ {  
¿nge
(1); }

884 
BENCHMARK_ALWAYS_INLINE


885 
th»ads
(ècÚ¡ {  
	gth»ads_
; }

888 
BENCHMARK_ALWAYS_INLINE


889 
th»ad_šdex
(ècÚ¡ {  
	gth»ad_šdex_
; }

891 
BENCHMARK_ALWAYS_INLINE


892 
I‹¿tiÚCouÁ
 
™”©iÚs
() const {

893 ià(
BENCHMARK_BUILTIN_EXPECT
(!
¡¬‹d_
, 
çl£
)) {

896  
	gmax_™”©iÚs
 - 
	gtÙ®_™”©iÚs_
 + 
	gb©ch_Ëáov”_
;

899 
BENCHMARK_ALWAYS_INLINE


900 
	g¡d
::
¡ršg
 
Çme
(ècÚ¡ {  
Çme_
; }

902 
	g´iv©e
:

906 
I‹¿tiÚCouÁ
 
tÙ®_™”©iÚs_
;

911 
I‹¿tiÚCouÁ
 
	gb©ch_Ëáov”_
;

913 
	gpublic
:

914 cÚ¡ 
I‹¿tiÚCouÁ
 
max_™”©iÚs
;

916 
	g´iv©e
:

917 
boŞ
 
¡¬‹d_
;

918 
boŞ
 
	gfšished_
;

919 
	gš‹º®
::
Sk³d
 
sk³d_
;

922 
	g¡d
::
veùÜ
<
št64_t
> 
¿nge_
;

924 
št64_t
 
	gcom¶ex™y_n_
;

926 
	gpublic
:

928 
U£rCouÁ”s
 
couÁ”s
;

930 
	g´iv©e
:

931 
S‹
(
¡d
::
¡ršg
 
Çme
, 
I‹¿tiÚCouÁ
 
max_™”s
,

932 cÚ¡ 
¡d
::
veùÜ
<
št64_t
>& 
¿nges
, 
th»ad_i
, 
n_th»ads
,

933 
š‹º®
::
Th»adTim”
* 
tim”
, iÁ”Çl::
Th»adMªag”
* 
mªag”
,

934 
š‹º®
::
P”fCouÁ”sM—su»m’t
* 
³rf_couÁ”s_m—su»m’t
);

936 
S¹K“pRuÂšg
();

939 
boŞ
 
K“pRuÂšgIÁ”Çl
(
I‹¿tiÚCouÁ
 
n
, boŞ 
is_b©ch
);

940 
FšishK“pRuÂšg
();

942 cÚ¡ 
	g¡d
::
¡ršg
 
Çme_
;

943 cÚ¡ 
	gth»ad_šdex_
;

944 cÚ¡ 
	gth»ads_
;

946 
	gš‹º®
::
Th»adTim”
* cÚ¡ 
tim”_
;

947 
	gš‹º®
::
Th»adMªag”
* cÚ¡ 
mªag”_
;

948 
	gš‹º®
::
P”fCouÁ”sM—su»m’t
* cÚ¡ 
³rf_couÁ”s_m—su»m’t_
;

950 
ä›nd
 
şass
 
	gš‹º®
::
B’chm¬kIn¡ªû
;

953 
šlše
 
BENCHMARK_ALWAYS_INLINE
 
boŞ
 
	gS‹
::
	$K“pRuÂšg
() {

954  
	`K“pRuÂšgIÁ”Çl
(1, 
çl£
);

955 
	}
}

957 
šlše
 
BENCHMARK_ALWAYS_INLINE
 
boŞ
 
	gS‹
::
	$K“pRuÂšgB©ch
(
I‹¿tiÚCouÁ
 
n
) {

958  
	`K“pRuÂšgIÁ”Çl
(
n
, 
Œue
);

959 
	}
}

961 
šlše
 
BENCHMARK_ALWAYS_INLINE
 
boŞ
 
	gS‹
::
	$K“pRuÂšgIÁ”Çl
(
I‹¿tiÚCouÁ
 
n
,

962 
boŞ
 
is_b©ch
) {

965 
	`as£¹
(
n
 > 0);

967 
	`as£¹
(
is_b©ch
 || 
n
 == 1);

968 ià(
	`BENCHMARK_BUILTIN_EXPECT
(
tÙ®_™”©iÚs_
 >ğ
n
, 
Œue
)) {

969 
tÙ®_™”©iÚs_
 -ğ
n
;

970  
Œue
;

972 ià(!
¡¬‹d_
) {

973 
	`S¹K“pRuÂšg
();

974 ià(!
	`sk³d
(è&& 
tÙ®_™”©iÚs_
 >ğ
n
) {

975 
tÙ®_™”©iÚs_
 -ğ
n
;

976  
Œue
;

980 ià(
is_b©ch
 && 
tÙ®_™”©iÚs_
 != 0) {

981 
b©ch_Ëáov”_
 = 
n
 - 
tÙ®_™”©iÚs_
;

982 
tÙ®_™”©iÚs_
 = 0;

983  
Œue
;

985 
	`FšishK“pRuÂšg
();

986  
çl£
;

987 
	}
}

989 
	gS‹
::
S‹I‹¿tÜ
 {

990 
BENCHMARK_UNUSED
 
V®ue
 {};

991 
	g¡d
::
	tfÜw¬d_™”©Ü_g
 
	t™”©Ü_ÿ‹gÜy
;

992 
V®ue
 
	tv®ue_ty³
;

993 
V®ue
 
	t»ã»nû
;

994 
V®ue
 
	tpoš‹r
;

995 
	g¡d
::
	t±rdiff_t
 
	tdifã»nû_ty³
;

997 
	g´iv©e
:

998 
ä›nd
 
şass
 
S‹
;

999 
BENCHMARK_ALWAYS_INLINE


1000 
S‹I‹¿tÜ
(è: 
ÿched_
(0), 
·»Á_
() {}

1002 
BENCHMARK_ALWAYS_INLINE


1003 
ex¶ic™
 
S‹I‹¿tÜ
(
S‹
* 
¡
)

1004 : 
ÿched_
(
¡
->
sk³d
(è? 0 : st->
max_™”©iÚs
), 
·»Á_
(st) {}

1006 
	gpublic
:

1007 
BENCHMARK_ALWAYS_INLINE


1008 
V®ue
 
İ”©Ü
*() const {  Value(); }

1010 
BENCHMARK_ALWAYS_INLINE


1011 
	gS‹I‹¿tÜ
& 
	gİ”©Ü
++() {

1012 
as£¹
(
ÿched_
 > 0);

1013 --
	gÿched_
;

1014  *
	gthis
;

1017 
BENCHMARK_ALWAYS_INLINE


1018 
boŞ
 
	gİ”©Ü
!=(
S‹I‹¿tÜ
 const&) const {

1019 ià(
BENCHMARK_BUILTIN_EXPECT
(
ÿched_
 !ğ0, 
Œue
)è 
	gŒue
;

1020 
	g·»Á_
->
FšishK“pRuÂšg
();

1021  
	gçl£
;

1024 
	g´iv©e
:

1025 
I‹¿tiÚCouÁ
 
ÿched_
;

1026 
S‹
* cÚ¡ 
	g·»Á_
;

1029 
šlše
 
BENCHMARK_ALWAYS_INLINE
 
	gS‹
::
S‹I‹¿tÜ
 
S‹
::
	$begš
() {

1030  
	`S‹I‹¿tÜ
(
this
);

1031 
	}
}

1032 
šlše
 
BENCHMARK_ALWAYS_INLINE
 
	gS‹
::
S‹I‹¿tÜ
 
S‹
::
	$’d
() {

1033 
	`S¹K“pRuÂšg
();

1034  
	`S‹I‹¿tÜ
();

1035 
	}
}

1037 
Çme¥aû
 
	gš‹º®
 {

1039 (
	gFunùiÚ
)(
	tS‹
&);

1047 şas 
	cBENCHMARK_EXPORT
 
	gB’chm¬k
 {

1048 
	gpublic
:

1049 
vœtu®
 ~
B’chm¬k
();

1055 
B’chm¬k
* 
Name
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
);

1060 
B’chm¬k
* 
Arg
(
št64_t
 
x
);

1063 
B’chm¬k
* 
Un™
(
TimeUn™
 
un™
);

1068 
B’chm¬k
* 
Rªge
(
št64_t
 
¡¬t
, iÁ64_ˆ
lim™
);

1073 
B’chm¬k
* 
D’£Rªge
(
št64_t
 
¡¬t
, iÁ64_ˆ
lim™
, 
¡•
 = 1);

1078 
B’chm¬k
* 
Args
(cÚ¡ 
¡d
::
veùÜ
<
št64_t
>& 
¬gs
);

1083 
B’chm¬k
* 
ArgPaœ
(
št64_t
 
x
, iÁ64_ˆ
y
) {

1084 
	g¡d
::
veùÜ
<
št64_t
> 
¬gs
;

1085 
	g¬gs
.
push_back
(
x
);

1086 
	g¬gs
.
push_back
(
y
);

1087  
Args
(
¬gs
);

1093 
B’chm¬k
* 
Rªges
(cÚ¡ 
¡d
::
veùÜ
<¡d::
·œ
<
št64_t
, iÁ64_t> >& 
¿nges
);

1098 
B’chm¬k
* 
ArgsProduù
(cÚ¡ 
¡d
::
veùÜ
<¡d::veùÜ<
št64_t
> >& 
¬gli¡s
);

1101 
B’chm¬k
* 
ArgName
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
);

1105 
B’chm¬k
* 
ArgNames
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
>& 
Çmes
);

1110 
B’chm¬k
* 
RªgePaœ
(
št64_t
 
lo1
, iÁ64_ˆ
hi1
, iÁ64_ˆ
lo2
, iÁ64_ˆ
hi2
) {

1111 
	g¡d
::
veùÜ
<
¡d
::
·œ
<
št64_t
, 
	gšt64_t
> > 
	g¿nges
;

1112 
	g¿nges
.
push_back
(
¡d
::
make_·œ
(
lo1
, 
hi1
));

1113 
	g¿nges
.
push_back
(
¡d
::
make_·œ
(
lo2
, 
hi2
));

1114  
Rªges
(
¿nges
);

1131 
B’chm¬k
* 
S‘up
((*
£tup
)(cÚ¡ 
b’chm¬k
::
S‹
&));

1132 
B’chm¬k
* 
T—rdown
((*
‹¬down
)(cÚ¡ 
b’chm¬k
::
S‹
&));

1137 
B’chm¬k
* 
Aµly
((*
func
)(B’chm¬k* 
b’chm¬k
));

1141 
B’chm¬k
* 
RªgeMuÉl›r
(
muÉl›r
);

1146 
B’chm¬k
* 
MšTime
(
t
);

1152 
B’chm¬k
* 
MšW¬mUpTime
(
t
);

1161 
B’chm¬k
* 
I‹¿tiÚs
(
I‹¿tiÚCouÁ
 
n
);

1166 
B’chm¬k
* 
R•‘™iÚs
(
n
);

1172 
B’chm¬k
* 
R•ÜtAgg»g©esOÆy
(
boŞ
 
v®ue
 = 
Œue
);

1175 
B’chm¬k
* 
Di¥ÏyAgg»g©esOÆy
(
boŞ
 
v®ue
 = 
Œue
);

1181 
B’chm¬k
* 
M—su»ProûssCPUTime
();

1189 
B’chm¬k
* 
U£R—lTime
();

1198 
B’chm¬k
* 
U£Mªu®Time
();

1202 
B’chm¬k
* 
Com¶ex™y
(
BigO
 
com¶ex™y
 = 
b’chm¬k
::
oAuto
);

1206 
B’chm¬k
* 
Com¶ex™y
(
BigOFunc
* 
com¶ex™y
);

1209 
B’chm¬k
* 
Compu‹Sti¡ics
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
,

1210 
Sti¡icsFunc
* 
¡©i¡ics
,

1211 
Sti¡icUn™
 
un™
 = 
kTime
);

1218 
B’chm¬k
* 
Th»ads
(
t
);

1232 
B’chm¬k
* 
Th»adRªge
(
mš_th»ads
, 
max_th»ads
);

1238 
B’chm¬k
* 
D’£Th»adRªge
(
mš_th»ads
, 
max_th»ads
, 
¡ride
 = 1);

1241 
B’chm¬k
* 
Th»adP”Cpu
();

1243 
vœtu®
 
Run
(
S‹
& 
¡©e
) = 0;

1245 
TimeUn™
 
G‘TimeUn™
() const;

1247 
	g´Ùeùed
:

1248 
ex¶ic™
 
B’chm¬k
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
);

1249 
S‘Name
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
);

1251 
	gpublic
:

1252 cÚ¡ * 
G‘Name
() const;

1253 
ArgsCÁ
() const;

1254 cÚ¡ * 
G‘ArgName
(
¬g
) const;

1256 
	g´iv©e
:

1257 
ä›nd
 
şass
 
B’chm¬kFam›s
;

1258 
ä›nd
 
şass
 
	gB’chm¬kIn¡ªû
;

1260 
	g¡d
::
¡ršg
 
Çme_
;

1261 
Agg»g©iÚR•ÜtMode
 
	gagg»g©iÚ_»pÜt_mode_
;

1262 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> 
¬g_Çmes_
;

1263 
	g¡d
::
veùÜ
<
¡d
::veùÜ<
št64_t
> > 
¬gs_
;

1265 
TimeUn™
 
	gtime_un™_
;

1266 
boŞ
 
	gu£_deçuÉ_time_un™_
;

1268 
	g¿nge_muÉl›r_
;

1269 
	gmš_time_
;

1270 
	gmš_w¬mup_time_
;

1271 
I‹¿tiÚCouÁ
 
	g™”©iÚs_
;

1272 
	g»³t™iÚs_
;

1273 
boŞ
 
	gm—su»_´oûss_ıu_time_
;

1274 
boŞ
 
	gu£_»®_time_
;

1275 
boŞ
 
	gu£_mªu®_time_
;

1276 
BigO
 
	gcom¶ex™y_
;

1277 
BigOFunc
* 
	gcom¶ex™y_Ïmbda_
;

1278 
	g¡d
::
veùÜ
<
Sti¡ics
> 
¡©i¡ics_
;

1279 
	g¡d
::
veùÜ
<> 
th»ad_couÁs_
;

1281 (*
	gÿÎback_funùiÚ
)(cÚ¡ 
	tb’chm¬k
::
	tS‹
&);

1282 
ÿÎback_funùiÚ
 
	g£tup_
;

1283 
ÿÎback_funùiÚ
 
	g‹¬down_
;

1285 
B’chm¬k
(Benchmark const&)

1286 #ià
defšed
(
BENCHMARK_HAS_CXX11
)

1287 ğ
d–‘e


1291 
	gB’chm¬k
& 
	gİ”©Ü
=(
B’chm¬k
 const&)

1292 #ià
defšed
(
BENCHMARK_HAS_CXX11
)

1293 ğ
d–‘e


1304 
	gš‹º®
::
B’chm¬k
* 
Regi¡”B’chm¬k
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
,

1305 
š‹º®
::
FunùiÚ
* 
â
);

1307 #ià
	$defšed
(
BENCHMARK_HAS_CXX11
)

1308 
‹m¶©e
 <
şass
 
Lambda
>

1309 
š‹º®
::
B’chm¬k
* 
	`Regi¡”B’chm¬k
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
, 
Lambda
&& 
â
);

1314 
BENCHMARK_EXPORT
 
	`CË¬Regi¡”edB’chm¬ks
();

1316 
Çme¥aû
 
š‹º®
 {

1319 şas 
	cBENCHMARK_EXPORT
 
FunùiÚB’chm¬k
 : 
public
 
B’chm¬k
 {

1320 
public
:

1321 
	`FunùiÚB’chm¬k
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
, 
FunùiÚ
* 
func
)

1322 : 
	`B’chm¬k
(
Çme
), 
	`func_
(
func
) {}

1324 
	`Run
(
S‹
& 
¡
è
BENCHMARK_OVERRIDE
;

1326 
´iv©e
:

1327 
FunùiÚ
* 
func_
;

1330 #ifdeà
BENCHMARK_HAS_CXX11


1331 
‹m¶©e
 <
şass
 
Lambda
>

1332 şas 
	cLambdaB’chm¬k
 : 
public
 
B’chm¬k
 {

1333 
public
:

1334 
	`Run
(
S‹
& 
¡
è
BENCHMARK_OVERRIDE
 { 
	`Ïmbda_
(st); }

1336 
´iv©e
:

1337 
‹m¶©e
 <
şass
 
OLambda
>

1338 
	`LambdaB’chm¬k
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
, 
OLambda
&& 
Ïm
)

1339 : 
	`B’chm¬k
(
Çme
), 
	`Ïmbda_
(
¡d
::
fÜw¬d
<
OLambda
>(
Ïm
)) {}

1341 
	`LambdaB’chm¬k
(
LambdaB’chm¬k
 cÚ¡&èğ
d–‘e
;

1343 
‹m¶©e
 <
şass
 
Lam
>

1344 
ä›nd
 
B’chm¬k
* ::
b’chm¬k
::
	`Regi¡”B’chm¬k
(cÚ¡ 
¡d
::
¡ršg
&, 
Lam
&&);

1346 
Lambda
 
Ïmbda_
;

1349 
	}
}

1351 
šlše
 
	gš‹º®
::
B’chm¬k
* 
	$Regi¡”B’chm¬k
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
,

1352 
š‹º®
::
FunùiÚ
* 
â
) {

1353  
š‹º®
::
	`Regi¡”B’chm¬kIÁ”Çl
(

1354 ::
Ãw
 
š‹º®
::
	`FunùiÚB’chm¬k
(
Çme
, 
â
));

1355 
	}
}

1357 #ifdeà
BENCHMARK_HAS_CXX11


1358 
	g‹m¶©e
 <
şass
 
	gLambda
>

1359 
	gš‹º®
::
B’chm¬k
* 
	$Regi¡”B’chm¬k
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
, 
Lambda
&& 
â
) {

1360 
usšg
 
B’chTy³
 =

1361 
š‹º®
::
LambdaB’chm¬k
<
ty³Çme
 
¡d
::
deÿy
<
Lambda
>::
ty³
>;

1362  
š‹º®
::
	`Regi¡”B’chm¬kIÁ”Çl
(

1363 ::
Ãw
 
	`B’chTy³
(
Çme
, 
¡d
::
fÜw¬d
<
Lambda
>(
â
)));

1364 
	}
}

1367 #ià
defšed
(
BENCHMARK_HAS_CXX11
) && \

1368 (!
defšed
(
BENCHMARK_GCC_VERSION
è|| 
	gBENCHMARK_GCC_VERSION
 >= 409)

1369 
‹m¶©e
 <
şass
 
Lambda
, 
	gşass
... 
	gArgs
>

1370 
	gš‹º®
::
B’chm¬k
* 
	$Regi¡”B’chm¬k
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
, 
Lambda
&& 
â
,

1371 
Args
&&... 
¬gs
) {

1372  
b’chm¬k
::
	`Regi¡”B’chm¬k
(

1373 
Çme
, [=](
b’chm¬k
::
S‹
& 
¡
è{ 
	`â
(¡, 
¬gs
...); });

1374 
	}
}

1376 
	#BENCHMARK_HAS_NO_VARIADIC_REGISTER_BENCHMARK


	)

1380 şas 
	cFixtu»
 : 
public
 
š‹º®
::
B’chm¬k
 {

1381 
public
:

1382 
Fixtu»
(è: 
š‹º®
::
B’chm¬k
("") {}

1384 
Run
(
S‹
& 
¡
è
BENCHMARK_OVERRIDE
 {

1385 
this
->
S‘Up
(
¡
);

1386 
	gthis
->
B’chm¬kCa£
(
¡
);

1387 
	gthis
->
T—rDown
(
¡
);

1391 
vœtu®
 
S‘Up
(cÚ¡ 
S‹
&) {}

1392 
vœtu®
 
T—rDown
(cÚ¡ 
S‹
&) {}

1394 
vœtu®
 
S‘Up
(
S‹
& 
¡
è{ S‘Up(
cÚ¡_ÿ¡
<const State&>(st)); }

1395 
vœtu®
 
T—rDown
(
S‹
& 
¡
è{ T—rDown(
cÚ¡_ÿ¡
<const State&>(st)); }

1397 
	g´Ùeùed
:

1398 
vœtu®
 
B’chm¬kCa£
(
S‹
&) = 0;

1408 #ià
defšed
(
__COUNTER__
) && (__COUNTER__ + 1 == __COUNTER__ + 0)

1409 
	#BENCHMARK_PRIVATE_UNIQUE_ID
 
__COUNTER__


	)

1411 
	#BENCHMARK_PRIVATE_UNIQUE_ID
 
__LINE__


	)

1415 #ifdeà
BENCHMARK_HAS_CXX11


1416 
	#BENCHMARK_PRIVATE_NAME
(...) \

1417 
	`BENCHMARK_PRIVATE_CONCAT
(
b’chm¬k_uniq_
, 
BENCHMARK_PRIVATE_UNIQUE_ID
, \

1418 
__VA_ARGS__
)

	)

1420 
	#BENCHMARK_PRIVATE_NAME
(
n
) \

1421 
	`BENCHMARK_PRIVATE_CONCAT
(
b’chm¬k_uniq_
, 
BENCHMARK_PRIVATE_UNIQUE_ID
, 
n
)

	)

1424 
	#BENCHMARK_PRIVATE_CONCAT
(
a
, 
b
, 
c
è
	`BENCHMARK_PRIVATE_CONCAT2
×, b, c)

	)

1425 
	#BENCHMARK_PRIVATE_CONCAT2
(
a
, 
b
, 
c
èa##b##
	)
c

1427 
	#BENCHMARK_PRIVATE_CONCAT_NAME
(
Ba£CÏss
, 
M‘hod
) \

1428 
Ba£CÏss
##
_
##
M‘hod
##
_B’chm¬k


	)

1430 
	#BENCHMARK_PRIVATE_DECLARE
(
n
) \

1431 ::
b’chm¬k
::
š‹º®
::
B’chm¬k
* 
	`BENCHMARK_PRIVATE_NAME
(
n
) \

1432 
BENCHMARK_UNUSED


	)

1434 #ifdeà
BENCHMARK_HAS_CXX11


1435 
	#BENCHMARK
(...) \

1436 
	`BENCHMARK_PRIVATE_DECLARE
(
_b’chm¬k_
) = \

1437 (::
b’chm¬k
::
š‹º®
::
	`Regi¡”B’chm¬kIÁ”Çl
( \

1438 
Ãw
 ::
b’chm¬k
::
š‹º®
::
	`FunùiÚB’chm¬k
(#__VA_ARGS__, \

1439 
__VA_ARGS__
)))

	)

1441 
	#BENCHMARK
(
n
) \

1442 
	`BENCHMARK_PRIVATE_DECLARE
(
n
) = \

1443 (::
b’chm¬k
::
š‹º®
::
	`Regi¡”B’chm¬kIÁ”Çl
( \

1444 
Ãw
 ::
b’chm¬k
::
š‹º®
::
	`FunùiÚB’chm¬k
(#n, 
n
)))

	)

1448 
	#BENCHMARK_WITH_ARG
(
n
, 
a
è
	`BENCHMARK
Ò)->
	`Arg
(×))

	)

1449 
	#BENCHMARK_WITH_ARG2
(
n
, 
a1
, 
a2
è
	`BENCHMARK
Ò)->
	`Args
({×1), (a2)})

	)

1450 
	#BENCHMARK_WITH_UNIT
(
n
, 
t
è
	`BENCHMARK
Ò)->
	`Un™
(Ñ))

	)

1451 
	#BENCHMARK_RANGE
(
n
, 
lo
, 
hi
è
	`BENCHMARK
Ò)->
	`Rªge
(Öo), (hi))

	)

1452 
	#BENCHMARK_RANGE2
(
n
, 
l1
, 
h1
, 
l2
, 
h2
) \

1453 
	`BENCHMARK
(
n
)->
	`RªgePaœ
({{(
l1
), (
h1
)}, {(
l2
), (
h2
)}})

	)

1455 #ifdeà
BENCHMARK_HAS_CXX11


1468 
	#BENCHMARK_CAPTURE
(
func
, 
‹¡_ÿ£_Çme
, ...) \

1469 
	`BENCHMARK_PRIVATE_DECLARE
(
func
) = \

1470 (::
b’chm¬k
::
š‹º®
::
	`Regi¡”B’chm¬kIÁ”Çl
( \

1471 
Ãw
 ::
b’chm¬k
::
š‹º®
::
	`FunùiÚB’chm¬k
( \

1473 [](::
b’chm¬k
::
S‹
& 
¡
è{ 
	`func
(¡, 
__VA_ARGS__
); })))

	)

1485 
	#BENCHMARK_TEMPLATE1
(
n
, 
a
) \

1486 
	`BENCHMARK_PRIVATE_DECLARE
(
n
) = \

1487 (::
b’chm¬k
::
š‹º®
::
	`Regi¡”B’chm¬kIÁ”Çl
( \

1488 
Ãw
 ::
b’chm¬k
::
š‹º®
::
	`FunùiÚB’chm¬k
(#À"<" #¨">", 
n
<
a
>)))

	)

1490 
	#BENCHMARK_TEMPLATE2
(
n
, 
a
, 
b
) \

1491 
	`BENCHMARK_PRIVATE_DECLARE
(
n
) = \

1492 (::
b’chm¬k
::
š‹º®
::
	`Regi¡”B’chm¬kIÁ”Çl
( \

1493 
Ãw
 ::
b’chm¬k
::
š‹º®
::
	`FunùiÚB’chm¬k
(#n "<" #a "," #b ">", \

1494 
n
<
a
, 
b
>)))

	)

1496 #ifdeà
BENCHMARK_HAS_CXX11


1497 
	#BENCHMARK_TEMPLATE
(
n
, ...) \

1498 
	`BENCHMARK_PRIVATE_DECLARE
(
n
) = \

1499 (::
b’chm¬k
::
š‹º®
::
	`Regi¡”B’chm¬kIÁ”Çl
( \

1500 
Ãw
 ::
b’chm¬k
::
š‹º®
::
	`FunùiÚB’chm¬k
( \

1501 #À"<" #__VA_ARGS__ ">", 
n
<
__VA_ARGS__
>)))

	)

1503 
	#BENCHMARK_TEMPLATE
(
n
, 
a
è
	`BENCHMARK_TEMPLATE1
Ò,‡)

	)

1506 
	#BENCHMARK_PRIVATE_DECLARE_F
(
Ba£CÏss
, 
M‘hod
) \

1507 
şass
 
Ba£CÏss
##
_
##
M‘hod
##
_B’chm¬k
 : 
public
 BaseClass { \

1508 
public
: \

1509 
Ba£CÏss
##
_
##
M‘hod
##
	`_B’chm¬k
() { \

1510 
this
->
	`S‘Name
(#BaseClass "/" #Method); \

1513 
´Ùeùed
: \

1514 
	`B’chm¬kCa£
(::
b’chm¬k
::
S‹
&è
BENCHMARK_OVERRIDE
; \

1515 };

	)

1517 
	#BENCHMARK_TEMPLATE1_PRIVATE_DECLARE_F
(
Ba£CÏss
, 
M‘hod
, 
a
) \

1518 
şass
 
Ba£CÏss
##
_
##
M‘hod
##
_B’chm¬k
 : 
public
 Ba£CÏss<
a
> { \

1519 
public
: \

1520 
Ba£CÏss
##
_
##
M‘hod
##
	`_B’chm¬k
() { \

1521 
this
->
	`S‘Name
(#BaseClass "<" #a ">/" #Method); \

1524 
´Ùeùed
: \

1525 
	`B’chm¬kCa£
(::
b’chm¬k
::
S‹
&è
BENCHMARK_OVERRIDE
; \

1526 };

	)

1528 
	#BENCHMARK_TEMPLATE2_PRIVATE_DECLARE_F
(
Ba£CÏss
, 
M‘hod
, 
a
, 
b
) \

1529 
şass
 
Ba£CÏss
##
_
##
M‘hod
##
_B’chm¬k
 : 
public
 Ba£CÏss<
a
, 
b
> { \

1530 
public
: \

1531 
Ba£CÏss
##
_
##
M‘hod
##
	`_B’chm¬k
() { \

1532 
this
->
	`S‘Name
(#BaseClass "<" #a "," #b ">/" #Method); \

1535 
´Ùeùed
: \

1536 
	`B’chm¬kCa£
(::
b’chm¬k
::
S‹
&è
BENCHMARK_OVERRIDE
; \

1537 };

	)

1539 #ifdeà
BENCHMARK_HAS_CXX11


1540 
	#BENCHMARK_TEMPLATE_PRIVATE_DECLARE_F
(
Ba£CÏss
, 
M‘hod
, ...) \

1541 
şass
 
Ba£CÏss
##
_
##
M‘hod
##
_B’chm¬k
 : 
public
 Ba£CÏss<
__VA_ARGS__
> { \

1542 
public
: \

1543 
Ba£CÏss
##
_
##
M‘hod
##
	`_B’chm¬k
() { \

1544 
this
->
	`S‘Name
(#BaseClass "<" #__VA_ARGS__ ">/" #Method); \

1547 
´Ùeùed
: \

1548 
	`B’chm¬kCa£
(::
b’chm¬k
::
S‹
&è
BENCHMARK_OVERRIDE
; \

1549 };

	)

1551 
	#BENCHMARK_TEMPLATE_PRIVATE_DECLARE_F
(
n
, 
a
) \

1552 
	`BENCHMARK_TEMPLATE1_PRIVATE_DECLARE_F
(
n
, 
a
)

	)

1555 
	#BENCHMARK_DEFINE_F
(
Ba£CÏss
, 
M‘hod
) \

1556 
	`BENCHMARK_PRIVATE_DECLARE_F
(
Ba£CÏss
, 
M‘hod
) \

1557 
	`BENCHMARK_PRIVATE_CONCAT_NAME
(
Ba£CÏss
, 
M‘hod
)::
B’chm¬kCa£


	)

1559 
	#BENCHMARK_TEMPLATE1_DEFINE_F
(
Ba£CÏss
, 
M‘hod
, 
a
) \

1560 
	`BENCHMARK_TEMPLATE1_PRIVATE_DECLARE_F
(
Ba£CÏss
, 
M‘hod
, 
a
) \

1561 
	`BENCHMARK_PRIVATE_CONCAT_NAME
(
Ba£CÏss
, 
M‘hod
)::
B’chm¬kCa£


	)

1563 
	#BENCHMARK_TEMPLATE2_DEFINE_F
(
Ba£CÏss
, 
M‘hod
, 
a
, 
b
) \

1564 
	`BENCHMARK_TEMPLATE2_PRIVATE_DECLARE_F
(
Ba£CÏss
, 
M‘hod
, 
a
, 
b
) \

1565 
	`BENCHMARK_PRIVATE_CONCAT_NAME
(
Ba£CÏss
, 
M‘hod
)::
B’chm¬kCa£


	)

1567 #ifdeà
BENCHMARK_HAS_CXX11


1568 
	#BENCHMARK_TEMPLATE_DEFINE_F
(
Ba£CÏss
, 
M‘hod
, ...) \

1569 
	`BENCHMARK_TEMPLATE_PRIVATE_DECLARE_F
(
Ba£CÏss
, 
M‘hod
, 
__VA_ARGS__
) \

1570 
	`BENCHMARK_PRIVATE_CONCAT_NAME
(
Ba£CÏss
, 
M‘hod
)::
B’chm¬kCa£


	)

1572 
	#BENCHMARK_TEMPLATE_DEFINE_F
(
Ba£CÏss
, 
M‘hod
, 
a
) \

1573 
	`BENCHMARK_TEMPLATE1_DEFINE_F
(
Ba£CÏss
, 
M‘hod
, 
a
)

	)

1576 
	#BENCHMARK_REGISTER_F
(
Ba£CÏss
, 
M‘hod
) \

1577 
	`BENCHMARK_PRIVATE_REGISTER_F
(
	`BENCHMARK_PRIVATE_CONCAT_NAME
(
Ba£CÏss
, 
M‘hod
))

	)

1579 
	#BENCHMARK_PRIVATE_REGISTER_F
(
Te¡Name
) \

1580 
	`BENCHMARK_PRIVATE_DECLARE
(
Te¡Name
) = \

1581 (::
b’chm¬k
::
š‹º®
::
	`Regi¡”B’chm¬kIÁ”Çl
(
Ãw
 
	`Te¡Name
()))

	)

1584 
	#BENCHMARK_F
(
Ba£CÏss
, 
M‘hod
) \

1585 
	`BENCHMARK_PRIVATE_DECLARE_F
(
Ba£CÏss
, 
M‘hod
) \

1586 
	`BENCHMARK_REGISTER_F
(
Ba£CÏss
, 
M‘hod
); \

1587 
	`BENCHMARK_PRIVATE_CONCAT_NAME
(
Ba£CÏss
, 
M‘hod
)::
B’chm¬kCa£


	)

1589 
	#BENCHMARK_TEMPLATE1_F
(
Ba£CÏss
, 
M‘hod
, 
a
) \

1590 
	`BENCHMARK_TEMPLATE1_PRIVATE_DECLARE_F
(
Ba£CÏss
, 
M‘hod
, 
a
) \

1591 
	`BENCHMARK_REGISTER_F
(
Ba£CÏss
, 
M‘hod
); \

1592 
	`BENCHMARK_PRIVATE_CONCAT_NAME
(
Ba£CÏss
, 
M‘hod
)::
B’chm¬kCa£


	)

1594 
	#BENCHMARK_TEMPLATE2_F
(
Ba£CÏss
, 
M‘hod
, 
a
, 
b
) \

1595 
	`BENCHMARK_TEMPLATE2_PRIVATE_DECLARE_F
(
Ba£CÏss
, 
M‘hod
, 
a
, 
b
) \

1596 
	`BENCHMARK_REGISTER_F
(
Ba£CÏss
, 
M‘hod
); \

1597 
	`BENCHMARK_PRIVATE_CONCAT_NAME
(
Ba£CÏss
, 
M‘hod
)::
B’chm¬kCa£


	)

1599 #ifdeà
BENCHMARK_HAS_CXX11


1600 
	#BENCHMARK_TEMPLATE_F
(
Ba£CÏss
, 
M‘hod
, ...) \

1601 
	`BENCHMARK_TEMPLATE_PRIVATE_DECLARE_F
(
Ba£CÏss
, 
M‘hod
, 
__VA_ARGS__
) \

1602 
	`BENCHMARK_REGISTER_F
(
Ba£CÏss
, 
M‘hod
); \

1603 
	`BENCHMARK_PRIVATE_CONCAT_NAME
(
Ba£CÏss
, 
M‘hod
)::
B’chm¬kCa£


	)

1605 
	#BENCHMARK_TEMPLATE_F
(
Ba£CÏss
, 
M‘hod
, 
a
) \

1606 
	`BENCHMARK_TEMPLATE1_F
(
Ba£CÏss
, 
M‘hod
, 
a
)

	)

1611 
	#BENCHMARK_MAIN
() \

1612 
	`maš
(
¬gc
, ** 
¬gv
) { \

1613 
¬g0_deçuÉ
[] = "benchmark"; \

1614 * 
¬gs_deçuÉ
 = 
¬g0_deçuÉ
; \

1615 ià(!
¬gv
) { \

1616 
¬gc
 = 1; \

1617 
¬gv
 = &
¬gs_deçuÉ
; \

1619 ::
b’chm¬k
::
	`In™Ÿlize
(&
¬gc
, 
¬gv
); \

1620 ià(::
b’chm¬k
::
	`R•ÜtUÄecognizedArgum’ts
(
¬gc
, 
¬gv
))  1; \

1621 ::
b’chm¬k
::
	`RunS³cif›dB’chm¬ks
(); \

1622 ::
b’chm¬k
::
	`Shutdown
(); \

1625 
	`maš
(, **)

	)

1630 
Çme¥aû
 
	gb’chm¬k
 {

1632 
BENCHMARK_EXPORT
 
	gCPUInfo
 {

1633 
	sCacheInfo
 {

1634 
	g¡d
::
¡ršg
 
ty³
;

1635 
	gËv–
;

1636 
	gsize
;

1637 
	gnum_sh¬šg
;

1640 
	eSÿlšg
 { 
	gUNKNOWN
, 
	gENABLED
, 
	gDISABLED
 };

1642 
	gnum_ıus
;

1643 
Sÿlšg
 
	gsÿlšg
;

1644 
	gcyşes_³r_£cÚd
;

1645 
	g¡d
::
veùÜ
<
CacheInfo
> 
ÿches
;

1646 
	g¡d
::
veùÜ
<> 
lßd_avg
;

1648 cÚ¡ 
	gCPUInfo
& 
G‘
();

1650 
	g´iv©e
:

1651 
CPUInfo
();

1652 
BENCHMARK_DISALLOW_COPY_AND_ASSIGN
(
CPUInfo
);

1656 
BENCHMARK_EXPORT
 
	gSy¡emInfo
 {

1657 
	g¡d
::
¡ršg
 
Çme
;

1658 cÚ¡ 
	gSy¡emInfo
& 
G‘
();

1660 
	g´iv©e
:

1661 
Sy¡emInfo
();

1662 
BENCHMARK_DISALLOW_COPY_AND_ASSIGN
(
Sy¡emInfo
);

1668 
BENCHMARK_EXPORT
 
	gB’chm¬kName
 {

1669 
	g¡d
::
¡ršg
 
funùiÚ_Çme
;

1670 
	g¡d
::
¡ršg
 
¬gs
;

1671 
	g¡d
::
¡ršg
 
mš_time
;

1672 
	g¡d
::
¡ršg
 
mš_w¬mup_time
;

1673 
	g¡d
::
¡ršg
 
™”©iÚs
;

1674 
	g¡d
::
¡ršg
 
»³t™iÚs
;

1675 
	g¡d
::
¡ršg
 
time_ty³
;

1676 
	g¡d
::
¡ršg
 
th»ads
;

1680 
	g¡d
::
¡ršg
 
¡r
() const;

1688 şas 
	cBENCHMARK_EXPORT
 
	gB’chm¬kR•Ü‹r
 {

1689 
	gpublic
:

1690 
	sCÚ‹xt
 {

1691 
CPUInfo
 cÚ¡& 
ıu_šfo
;

1692 
Sy¡emInfo
 cÚ¡& 
	gsys_šfo
;

1694 
size_t
 
	gÇme_f›ld_width
;

1695 cÚ¡ * 
	gexecubË_Çme
;

1696 
CÚ‹xt
();

1699 
BENCHMARK_EXPORT
 
	gRun
 {

1700 cÚ¡ 
št64_t
 
	gno_»³t™iÚ_šdex
 = -1;

1701 
	eRunTy³
 { 
	gRT_I‹¿tiÚ
, 
	gRT_Agg»g©e
 };

1703 
Run
()

1704 : 
run_ty³
(
RT_I‹¿tiÚ
),

1705 
agg»g©e_un™
(
kTime
),

1706 
sk³d
(
š‹º®
::
NÙSk³d
),

1707 
™”©iÚs
(1),

1708 
th»ads
(1),

1709 
time_un™
(
G‘DeçuÉTimeUn™
()),

1710 
»®_accumuÏ‹d_time
(0),

1711 
ıu_accumuÏ‹d_time
(0),

1712 
max_h—pby‹s_u£d
(0),

1713 
com¶ex™y
(
oNÚe
),

1714 
com¶ex™y_Ïmbda
(),

1715 
com¶ex™y_n
(0),

1716 
»pÜt_big_o
(
çl£
),

1717 
»pÜt_rms
(
çl£
),

1718 
memÜy_»suÉ
(
NULL
),

1719 
®locs_³r_™”
(0.0) {}

1721 
	g¡d
::
¡ršg
 
b’chm¬k_Çme
() const;

1722 
B’chm¬kName
 
	grun_Çme
;

1723 
št64_t
 
	gçmy_šdex
;

1724 
št64_t
 
	g³r_çmy_š¡ªû_šdex
;

1725 
RunTy³
 
	grun_ty³
;

1726 
	g¡d
::
¡ršg
 
agg»g©e_Çme
;

1727 
Sti¡icUn™
 
	gagg»g©e_un™
;

1728 
	g¡d
::
¡ršg
 
»pÜt_Ïb–
;

1729 
	gš‹º®
::
Sk³d
 
sk³d
;

1730 
	g¡d
::
¡ršg
 
sk_mes§ge
;

1732 
I‹¿tiÚCouÁ
 
	g™”©iÚs
;

1733 
št64_t
 
	gth»ads
;

1734 
št64_t
 
	g»³t™iÚ_šdex
;

1735 
št64_t
 
	g»³t™iÚs
;

1736 
TimeUn™
 
	gtime_un™
;

1737 
	g»®_accumuÏ‹d_time
;

1738 
	gıu_accumuÏ‹d_time
;

1744 
G‘Adju¡edR—lTime
() const;

1750 
G‘Adju¡edCPUTime
() const;

1753 
	gmax_h—pby‹s_u£d
;

1756 
BigO
 
	gcom¶ex™y
;

1757 
BigOFunc
* 
	gcom¶ex™y_Ïmbda
;

1758 
št64_t
 
	gcom¶ex™y_n
;

1761 cÚ¡ 
	g¡d
::
veùÜ
<
š‹º®
::
Sti¡ics
>* 
¡©i¡ics
;

1764 
boŞ
 
	g»pÜt_big_o
;

1765 
boŞ
 
	g»pÜt_rms
;

1767 
U£rCouÁ”s
 
	gcouÁ”s
;

1770 cÚ¡ 
	gMemÜyMªag”
::
ResuÉ
* 
memÜy_»suÉ
;

1771 
	g®locs_³r_™”
;

1774 
	sP”FamyRunR•Üts
 {

1775 
P”FamyRunR•Üts
(è: 
num_runs_tÙ®
(0), 
num_runs_dÚe
(0) {}

1778 
	gnum_runs_tÙ®
;

1781 
	gnum_runs_dÚe
;

1784 
	g¡d
::
veùÜ
<
B’chm¬kR•Ü‹r
::
Run
> 
Runs
;

1789 
B’chm¬kR•Ü‹r
();

1797 
vœtu®
 
boŞ
 
R•ÜtCÚ‹xt
(cÚ¡ 
CÚ‹xt
& 
cÚ‹xt
) = 0;

1801 
vœtu®
 
R•ÜtRunsCÚfig
(,

1802 
boŞ
 ,

1803 
I‹¿tiÚCouÁ
 ) {}

1812 
vœtu®
 
R•ÜtRuns
(cÚ¡ 
¡d
::
veùÜ
<
Run
>& 
»pÜt
) = 0;

1816 
vœtu®
 
Fš®ize
() {}

1820 
S‘OuutSŒ—m
(
¡d
::
o¡»am
* 
out
) {

1821 
as£¹
(
out
);

1822 
	gouut_¡»am_
 = 
out
;

1827 
S‘E¼ÜSŒ—m
(
¡d
::
o¡»am
* 
”r
) {

1828 
as£¹
(
”r
);

1829 
	g”rÜ_¡»am_
 = 
”r
;

1832 
	g¡d
::
o¡»am
& 
G‘OuutSŒ—m
(ècÚ¡ {  *
ouut_¡»am_
; }

1834 
	g¡d
::
o¡»am
& 
G‘E¼ÜSŒ—m
(ècÚ¡ {  *
”rÜ_¡»am_
; }

1836 
	gvœtu®
 ~
B’chm¬kR•Ü‹r
();

1841 
PrštBasicCÚ‹xt
(
¡d
::
o¡»am
* 
out
, 
CÚ‹xt
 cÚ¡& 
cÚ‹xt
);

1843 
	g´iv©e
:

1844 
¡d
::
o¡»am
* 
ouut_¡»am_
;

1845 
	g¡d
::
o¡»am
* 
”rÜ_¡»am_
;

1850 şas 
	cBENCHMARK_EXPORT
 
	gCÚsŞeR•Ü‹r
 : 
public
 
B’chm¬kR•Ü‹r
 {

1851 
public
:

1852 
	eOuutO±iÚs
 {

1853 
OO_NÚe
 = 0,

1854 
	gOO_CŞÜ
 = 1,

1855 
	gOO_TabuÏr
 = 2,

1856 
	gOO_CŞÜTabuÏr
 = 
OO_CŞÜ
 | 
OO_TabuÏr
,

1857 
	gOO_DeçuÉs
 = 
OO_CŞÜTabuÏr


1859 
ex¶ic™
 
CÚsŞeR•Ü‹r
(
OuutO±iÚs
 
İts_
 = 
OO_DeçuÉs
)

1860 : 
ouut_İtiÚs_
(
İts_
), 
Çme_f›ld_width_
(0), 
´š‹d_h—d”_
(
çl£
) {}

1862 
boŞ
 
R•ÜtCÚ‹xt
(cÚ¡ 
CÚ‹xt
& 
cÚ‹xt
è
	gBENCHMARK_OVERRIDE
;

1863 
R•ÜtRuns
(cÚ¡ 
¡d
::
veùÜ
<
Run
>& 
»pÜts
è
BENCHMARK_OVERRIDE
;

1865 
	g´Ùeùed
:

1866 
vœtu®
 
PrštRunD©a
(cÚ¡ 
Run
& 
»pÜt
);

1867 
vœtu®
 
PrštH—d”
(cÚ¡ 
Run
& 
»pÜt
);

1869 
OuutO±iÚs
 
	gouut_İtiÚs_
;

1870 
size_t
 
	gÇme_f›ld_width_
;

1871 
U£rCouÁ”s
 
	g´ev_couÁ”s_
;

1872 
boŞ
 
	g´š‹d_h—d”_
;

1875 şas 
	cBENCHMARK_EXPORT
 
	gJSONR•Ü‹r
 : 
public
 
B’chm¬kR•Ü‹r
 {

1876 
public
:

1877 
JSONR•Ü‹r
(è: 
fœ¡_»pÜt_
(
Œue
) {}

1878 
boŞ
 
R•ÜtCÚ‹xt
(cÚ¡ 
CÚ‹xt
& 
cÚ‹xt
è
BENCHMARK_OVERRIDE
;

1879 
R•ÜtRuns
(cÚ¡ 
¡d
::
veùÜ
<
Run
>& 
»pÜts
è
BENCHMARK_OVERRIDE
;

1880 
Fš®ize
(è
	gBENCHMARK_OVERRIDE
;

1882 
	g´iv©e
:

1883 
PrštRunD©a
(cÚ¡ 
Run
& 
»pÜt
);

1885 
boŞ
 
	gfœ¡_»pÜt_
;

1888 
şass
 
BENCHMARK_EXPORT
 
BENCHMARK_DEPRECATED_MSG
(

1889 "ThCSV R•Ü‹¸wÈb»moved iÀ¨futu»„–—£"è
	gCSVR•Ü‹r


1890 : 
public
 
B’chm¬kR•Ü‹r
 {

1891 
public
:

1892 
CSVR•Ü‹r
(è: 
´š‹d_h—d”_
(
çl£
) {}

1893 
boŞ
 
R•ÜtCÚ‹xt
(cÚ¡ 
CÚ‹xt
& 
cÚ‹xt
è
BENCHMARK_OVERRIDE
;

1894 
R•ÜtRuns
(cÚ¡ 
¡d
::
veùÜ
<
Run
>& 
»pÜts
è
BENCHMARK_OVERRIDE
;

1896 
	g´iv©e
:

1897 
PrštRunD©a
(cÚ¡ 
Run
& 
»pÜt
);

1899 
boŞ
 
	g´š‹d_h—d”_
;

1900 
	g¡d
::
£t
<
¡d
::
¡ršg
> 
u£r_couÁ”_Çmes_
;

1903 
šlše
 cÚ¡ * 
	$G‘TimeUn™SŒšg
(
TimeUn™
 
un™
) {

1904 
un™
) {

1905 
kSecÚd
:

1907 
kMli£cÚd
:

1909 
kMiüo£cÚd
:

1911 
kNªo£cÚd
:

1914 
	`BENCHMARK_UNREACHABLE
();

1915 
	}
}

1917 
šlše
 
	$G‘TimeUn™MuÉl›r
(
TimeUn™
 
un™
) {

1918 
un™
) {

1919 
kSecÚd
:

1921 
kMli£cÚd
:

1923 
kMiüo£cÚd
:

1925 
kNªo£cÚd
:

1928 
	`BENCHMARK_UNREACHABLE
();

1929 
	}
}

1940 
BENCHMARK_EXPORT


1941 
	g¡d
::
veùÜ
<
št64_t
> 
C»©eRªge
(št64_ˆ
lo
, iÁ64_ˆ
hi
, 
muÉi
);

1944 
BENCHMARK_EXPORT


1945 
	g¡d
::
veùÜ
<
št64_t
> 
C»©eD’£Rªge
(št64_ˆ
¡¬t
, iÁ64_ˆ
lim™
, 
¡•
);

1949 #ià
defšed
(
_MSC_VER
)

1950 #´agm¨
w¬nšg
(
pİ
)

	@third_party/benchmark/include/benchmark/export.h

1 #iâdeà
BENCHMARK_EXPORT_H


2 
	#BENCHMARK_EXPORT_H


	)

4 #ià
defšed
(
_WIN32
)

5 
	#EXPORT_ATTR
 
	`__deş¥ec
(
dÎexpÜt
)

	)

6 
	#IMPORT_ATTR
 
	`__deş¥ec
(
dÎimpÜt
)

	)

7 
	#NO_EXPORT_ATTR


	)

8 
	#DEPRECATED_ATTR
 
	`__deş¥ec
(
d•»ÿ‹d
)

	)

10 
	#EXPORT_ATTR
 
	`__©Œibu‹__
((
	`visib™y
("deçuÉ")))

	)

11 
	#IMPORT_ATTR
 
	`__©Œibu‹__
((
	`visib™y
("deçuÉ")))

	)

12 
	#NO_EXPORT_ATTR
 
	`__©Œibu‹__
((
	`visib™y
("hidd’")))

	)

13 
	#DEPRECATE_ATTR
 
	`__©Œibu‹__
((
__d•»ÿ‹d__
))

	)

16 #ifdeà
BENCHMARK_STATIC_DEFINE


17 
	#BENCHMARK_EXPORT


	)

18 
	#BENCHMARK_NO_EXPORT


	)

20 #iâdeà
BENCHMARK_EXPORT


21 #ifdeà
b’chm¬k_EXPORTS


23 
	#BENCHMARK_EXPORT
 
EXPORT_ATTR


	)

26 
	#BENCHMARK_EXPORT
 
IMPORT_ATTR


	)

30 #iâdeà
BENCHMARK_NO_EXPORT


31 
	#BENCHMARK_NO_EXPORT
 
NO_EXPORT_ATTR


	)

35 #iâdeà
BENCHMARK_DEPRECATED


36 
	#BENCHMARK_DEPRECATED
 
DEPRECATE_ATTR


	)

39 #iâdeà
BENCHMARK_DEPRECATED_EXPORT


40 
	#BENCHMARK_DEPRECATED_EXPORT
 
BENCHMARK_EXPORT
 
BENCHMARK_DEPRECATED


	)

43 #iâdeà
BENCHMARK_DEPRECATED_NO_EXPORT


44 
	#BENCHMARK_DEPRECATED_NO_EXPORT
 
BENCHMARK_NO_EXPORT
 
BENCHMARK_DEPRECATED


	)

	@third_party/benchmark/src/arraysize.h

1 #iâdeà
BENCHMARK_ARRAYSIZE_H_


2 
	#BENCHMARK_ARRAYSIZE_H_


	)

4 
	~"š‹º®_maüos.h
"

6 
Çme¥aû
 
	gb’chm¬k
 {

7 
Çme¥aû
 
	gš‹º®
 {

17 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
size_t
 
	gN
>

18 (&
A¼aySizeH–³r
(
T
 (&
¬¿y
)[
N
]))[N];

23 #iâdeà
COMPILER_MSVC


24 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
size_t
 
	gN
>

25 (&
A¼aySizeH–³r
(cÚ¡ 
T
 (&
¬¿y
)[
N
]))[N];

28 
	#¬¿ysize
(
¬¿y
è((::
b’chm¬k
::
š‹º®
::
	`A¼aySizeH–³r
×¼ay)))

	)

	@third_party/benchmark/src/benchmark.cc

15 
	~"b’chm¬k/b’chm¬k.h
"

17 
	~"b’chm¬k_­i_š‹º®.h
"

18 
	~"b’chm¬k_ruÂ”.h
"

19 
	~"š‹º®_maüos.h
"

21 #iâdeà
BENCHMARK_OS_WINDOWS


22 #ià!
defšed
(
BENCHMARK_OS_FUCHSIA
è&& !defšed(
BENCHMARK_OS_QURT
)

23 
	~<sys/»sourû.h
>

25 
	~<sys/time.h
>

26 
	~<uni¡d.h
>

29 
	~<®gÜ™hm
>

30 
	~<©omic
>

31 
	~<cÚd™iÚ_v¬ŸbË
>

32 
	~<c¡dio
>

33 
	~<c¡dlib
>

34 
	~<f¡»am
>

35 
	~<io¡»am
>

36 
	~<lim™s
>

37 
	~<m­
>

38 
	~<memÜy
>

39 
	~<¿ndom
>

40 
	~<¡ršg
>

41 
	~<th»ad
>

42 
	~<ut™y
>

44 
	~"check.h
"

45 
	~"cŞÜ´št.h
"

46 
	~"commªdlšeæags.h
"

47 
	~"com¶ex™y.h
"

48 
	~"couÁ”.h
"

49 
	~"š‹º®_maüos.h
"

50 
	~"log.h
"

51 
	~"mu‹x.h
"

52 
	~"³rf_couÁ”s.h
"

53 
	~"».h
"

54 
	~"¡©i¡ics.h
"

55 
	~"¡ršg_ut.h
"

56 
	~"th»ad_mªag”.h
"

57 
	~"th»ad_tim”.h
"

59 
Çme¥aû
 
	gb’chm¬k
 {

61 
BM_DEFINE_boŞ
(
b’chm¬k_li¡_‹¡s
, 
çl£
);

66 
BM_DEFINE_¡ršg
(
b’chm¬k_f‹r
, "");

82 
BM_DEFINE_¡ršg
(
b’chm¬k_mš_time
, 
kDeçuÉMšTimeSŒ
);

89 
BM_DEFINE_doubË
(
b’chm¬k_mš_w¬mup_time
, 0.0);

93 
BM_DEFINE_št32
(
b’chm¬k_»³t™iÚs
, 1);

97 
BM_DEFINE_boŞ
(
b’chm¬k_’abË_¿ndom_š‹¾—všg
, 
çl£
);

102 
BM_DEFINE_boŞ
(
b’chm¬k_»pÜt_agg»g©es_Úly
, 
çl£
);

109 
BM_DEFINE_boŞ
(
b’chm¬k_di¥Ïy_agg»g©es_Úly
, 
çl£
);

113 
BM_DEFINE_¡ršg
(
b’chm¬k_fÜm©
, "console");

117 
BM_DEFINE_¡ršg
(
b’chm¬k_out_fÜm©
, "json");

120 
BM_DEFINE_¡ršg
(
b’chm¬k_out
, "");

126 
BM_DEFINE_¡ršg
(
b’chm¬k_cŞÜ
, "auto");

130 
BM_DEFINE_boŞ
(
b’chm¬k_couÁ”s_buÏr
, 
çl£
);

134 
BM_DEFINE_¡ršg
(
b’chm¬k_³rf_couÁ”s
, "");

138 
BM_DEFINE_kv·œs
(
b’chm¬k_cÚ‹xt
, {});

142 
BM_DEFINE_¡ršg
(
b’chm¬k_time_un™
, "");

145 
BM_DEFINE_št32
(
v
, 0);

147 
Çme¥aû
 
	gš‹º®
 {

149 
	g¡d
::
m­
<
¡d
::
¡ršg
, std::¡ršg>* 
glob®_cÚ‹xt
 = 
nuÎ±r
;

151 
BENCHMARK_EXPORT
 
	g¡d
::
m­
<
¡d
::
¡ršg
, std::¡ršg>*& 
G‘Glob®CÚ‹xt
() {

152  
glob®_cÚ‹xt
;

156 
U£Ch¬Poš‹r
(const volatile*) {}

160 
	gS‹
::
S‹
(
¡d
::
¡ršg
 
Çme
, 
I‹¿tiÚCouÁ
 
max_™”s
,

161 cÚ¡ 
¡d
::
veùÜ
<
št64_t
>& 
¿nges
, 
th»ad_i
, 
n_th»ads
,

162 
š‹º®
::
Th»adTim”
* 
tim”
, iÁ”Çl::
Th»adMªag”
* 
mªag”
,

163 
š‹º®
::
P”fCouÁ”sM—su»m’t
* 
³rf_couÁ”s_m—su»m’t
)

164 : 
tÙ®_™”©iÚs_
(0),

165 
b©ch_Ëáov”_
(0),

166 
max_™”©iÚs
(
max_™”s
),

167 
¡¬‹d_
(
çl£
),

168 
fšished_
(
çl£
),

169 
sk³d_
(
š‹º®
::
NÙSk³d
),

170 
¿nge_
(
¿nges
),

171 
com¶ex™y_n_
(0),

172 
Çme_
(
¡d
::
move
(
Çme
)),

173 
th»ad_šdex_
(
th»ad_i
),

174 
th»ads_
(
n_th»ads
),

175 
tim”_
(
tim”
),

176 
mªag”_
(
mªag”
),

177 
³rf_couÁ”s_m—su»m’t_
(
³rf_couÁ”s_m—su»m’t
) {

178 
BM_CHECK
(
max_™”©iÚs
 != 0) << "At†east one iteration must be„un";

179 
BM_CHECK_LT
(
th»ad_šdex_
, 
th»ads_
)

188 #ià
defšed
(
__INTEL_COMPILER
)

189 #´agm¨
w¬nšg
 
push


190 #´agm¨
w¬nšg
(
di§bË
 : 1875)

191 #–ià
defšed
(
__GNUC__
)

192 #´agm¨
GCC
 
dŸgno¡ic
 
push


193 #´agm¨
GCC
 
dŸgno¡ic
 
ignÜed
 "-Winvalid-offsetof"

195 #ià
defšed
(
__NVCC__
)

196 #´agm¨
nv_dŸgno¡ic
 
push


197 #´agm¨
nv_dŸg_suµ»ss
 1427

199 #ià
defšed
(
__NVCOMPILER
)

200 #´agm¨
dŸgno¡ic
 
push


201 #´agm¨
dŸg_suµ»ss
 
off£t_š_nÚ_POD_nÚ¡ªd¬d


204 cÚ¡ 
	gÿche_lše_size
 = 64;

205 
¡©ic_as£¹
(

206 
off£tof
(
S‹
, 
sk³d_
è<ğ(
ÿche_lše_size
 - (skipped_)), "");

207 #ià
defšed
(
__INTEL_COMPILER
)

208 #´agm¨
w¬nšg
 
pİ


209 #–ià
defšed
(
__GNUC__
)

210 #´agm¨
GCC
 
dŸgno¡ic
 
pİ


212 #ià
defšed
(
__NVCC__
)

213 #´agm¨
nv_dŸgno¡ic
 
pİ


215 #ià
defšed
(
__NVCOMPILER
)

216 #´agm¨
dŸgno¡ic
 
pİ


220 
	gS‹
::
Pau£Timšg
() {

222 
BM_CHECK
(
¡¬‹d_
 && !
fšished_
 && !
sk³d
());

223 
	gtim”_
->
StİTim”
();

224 ià(
	g³rf_couÁ”s_m—su»m’t_
) {

225 
	g¡d
::
veùÜ
<
¡d
::
·œ
<¡d::
¡ršg
, >> 
	gm—su»m’ts
;

226 ià(!
	g³rf_couÁ”s_m—su»m’t_
->
Stİ
(
m—su»m’ts
)) {

227 
BM_CHECK
(
çl£
) << "Perf counters„eadhe value failed.";

229 cÚ¡‡uto& 
	gÇme_ªd_m—su»m’t
 : 
m—su»m’ts
) {

230 autØ
Çme
 = 
Çme_ªd_m—su»m’t
.
fœ¡
;

231 autØ
	gm—su»m’t
 = 
Çme_ªd_m—su»m’t
.
£cÚd
;

232 
BM_CHECK_EQ
(
¡d
::
åşassify
(()
couÁ”s
[
Çme
]), 
FP_ZERO
);

233 
	gcouÁ”s
[
Çme
] = 
CouÁ”
(
m—su»m’t
, CouÁ”::
kAvgI‹¿tiÚs
);

238 
	gS‹
::
ResumeTimšg
() {

239 
BM_CHECK
(
¡¬‹d_
 && !
fšished_
 && !
sk³d
());

240 
	gtim”_
->
S¹Tim”
();

241 ià(
	g³rf_couÁ”s_m—su»m’t_
) {

242 
	g³rf_couÁ”s_m—su»m’t_
->
S¹
();

246 
	gS‹
::
SkW™hMes§ge
(cÚ¡ 
¡d
::
¡ršg
& 
msg
) {

247 
sk³d_
 = 
š‹º®
::
Sk³dW™hMes§ge
;

249 
Mu‹xLock
 
l
(
mªag”_
->
G‘B’chm¬kMu‹x
());

250 ià(
	gš‹º®
::
NÙSk³d
 =ğ
mªag”_
->
»suÉs
.
sk³d_
) {

251 
mªag”_
->
»suÉs
.
sk_mes§ge_
 = 
msg
;

252 
	gmªag”_
->
	g»suÉs
.
	gsk³d_
 = 
sk³d_
;

255 
	gtÙ®_™”©iÚs_
 = 0;

256 ià(
	gtim”_
->
ruÂšg
()ètim”_->
StİTim”
();

259 
	gS‹
::
SkW™hE¼Ü
(cÚ¡ 
¡d
::
¡ršg
& 
msg
) {

260 
sk³d_
 = 
š‹º®
::
Sk³dW™hE¼Ü
;

262 
Mu‹xLock
 
l
(
mªag”_
->
G‘B’chm¬kMu‹x
());

263 ià(
	gš‹º®
::
NÙSk³d
 =ğ
mªag”_
->
»suÉs
.
sk³d_
) {

264 
mªag”_
->
»suÉs
.
sk_mes§ge_
 = 
msg
;

265 
	gmªag”_
->
	g»suÉs
.
	gsk³d_
 = 
sk³d_
;

268 
	gtÙ®_™”©iÚs_
 = 0;

269 ià(
	gtim”_
->
ruÂšg
()ètim”_->
StİTim”
();

272 
	gS‹
::
S‘I‹¿tiÚTime
(
£cÚds
) {

273 
tim”_
->
S‘I‹¿tiÚTime
(
£cÚds
);

276 
	gS‹
::
S‘Lab–
(cÚ¡ 
¡d
::
¡ršg
& 
Ïb–
) {

277 
Mu‹xLock
 
l
(
mªag”_
->
G‘B’chm¬kMu‹x
());

278 
	gmªag”_
->
	g»suÉs
.
	g»pÜt_Ïb–_
 = 
Ïb–
;

281 
	gS‹
::
S¹K“pRuÂšg
() {

282 
BM_CHECK
(!
¡¬‹d_
 && !
fšished_
);

283 
	g¡¬‹d_
 = 
Œue
;

284 
	gtÙ®_™”©iÚs_
 = 
sk³d
(è? 0 : 
max_™”©iÚs
;

285 
	gmªag”_
->
S¹StİB¬r›r
();

286 ià(!
sk³d
()è
ResumeTimšg
();

289 
	gS‹
::
FšishK“pRuÂšg
() {

290 
BM_CHECK
(
¡¬‹d_
 && (!
fšished_
 || 
sk³d
()));

291 ià(!
sk³d
()) {

292 
Pau£Timšg
();

295 
	gtÙ®_™”©iÚs_
 = 0;

296 
	gfšished_
 = 
Œue
;

297 
	gmªag”_
->
S¹StİB¬r›r
();

300 
Çme¥aû
 
	gš‹º®
 {

301 
	gÇme¥aû
 {

305 
FlushSŒ—ms
(
B’chm¬kR•Ü‹r
* 
»pÜ‹r
) {

306 ià(!
	g»pÜ‹r
) ;

307 
	g¡d
::
æush
(
»pÜ‹r
->
G‘OuutSŒ—m
());

308 
	g¡d
::
æush
(
»pÜ‹r
->
G‘E¼ÜSŒ—m
());

312 
R•Üt
(
B’chm¬kR•Ü‹r
* 
di¥Ïy_»pÜ‹r
,

313 
B’chm¬kR•Ü‹r
* 
fe_»pÜ‹r
, cÚ¡ 
RunResuÉs
& 
run_»suÉs
) {

314 autØ
	g»pÜt_Úe
 = [](
B’chm¬kR•Ü‹r
* 
»pÜ‹r
, 
boŞ
 
	gagg»g©es_Úly
,

315 cÚ¡ 
	gRunResuÉs
& 
	g»suÉs
) {

316 
as£¹
(
»pÜ‹r
);

318 
	gagg»g©es_Úly
 &ğ!
»suÉs
.
agg»g©es_Úly
.
em±y
();

319 ià(!
	gagg»g©es_Úly
è
	g»pÜ‹r
->
R•ÜtRuns
(
»suÉs
.
nÚ_agg»g©es
);

320 ià(!
	g»suÉs
.
	gagg»g©es_Úly
.
em±y
())

321 
	g»pÜ‹r
->
R•ÜtRuns
(
»suÉs
.
agg»g©es_Úly
);

324 
»pÜt_Úe
(
di¥Ïy_»pÜ‹r
, 
run_»suÉs
.
di¥Ïy_»pÜt_agg»g©es_Úly
,

325 
run_»suÉs
);

326 ià(
	gfe_»pÜ‹r
)

327 
»pÜt_Úe
(
fe_»pÜ‹r
, 
run_»suÉs
.
fe_»pÜt_agg»g©es_Úly
,

328 
run_»suÉs
);

330 
FlushSŒ—ms
(
di¥Ïy_»pÜ‹r
);

331 
FlushSŒ—ms
(
fe_»pÜ‹r
);

334 
RunB’chm¬ks
(cÚ¡ 
¡d
::
veùÜ
<
B’chm¬kIn¡ªû
>& 
b’chm¬ks
,

335 
B’chm¬kR•Ü‹r
* 
di¥Ïy_»pÜ‹r
,

336 
B’chm¬kR•Ü‹r
* 
fe_»pÜ‹r
) {

338 
BM_CHECK
(
di¥Ïy_»pÜ‹r
 !ğ
nuÎ±r
);

341 
boŞ
 
	gmight_have_agg»g©es
 = 
FLAGS_b’chm¬k_»³t™iÚs
 > 1;

342 
size_t
 
	gÇme_f›ld_width
 = 10;

343 
size_t
 
	g¡©_f›ld_width
 = 0;

344 cÚ¡ 
	gB’chm¬kIn¡ªû
& 
	gb’chm¬k
 : 
b’chm¬ks
) {

345 
Çme_f›ld_width
 =

346 
¡d
::
max
<
size_t
>(
Çme_f›ld_width
, 
	gb’chm¬k
.
Çme
().
¡r
().
size
());

347 
	gmight_have_agg»g©es
 |ğ
b’chm¬k
.
»³t™iÚs
() > 1;

349 cÚ¡‡uto& 
	gSt
 : 
b’chm¬k
.
¡©i¡ics
())

350 
¡©_f›ld_width
 = 
¡d
::
max
<
size_t
>(¡©_f›ld_width, 
	gSt
.
	gÇme_
.
size
());

352 ià(
	gmight_have_agg»g©es
è
	gÇme_f›ld_width
 +ğ1 + 
¡©_f›ld_width
;

355 
	gB’chm¬kR•Ü‹r
::
CÚ‹xt
 
cÚ‹xt
;

356 
	gcÚ‹xt
.
	gÇme_f›ld_width
 = 
Çme_f›ld_width
;

359 
	g¡d
::
m­
<, 
	gB’chm¬kR•Ü‹r
::
P”FamyRunR•Üts
>

360 
³r_çmy_»pÜts
;

362 ià(
	gdi¥Ïy_»pÜ‹r
->
R•ÜtCÚ‹xt
(
cÚ‹xt
) &&

363 (!
	gfe_»pÜ‹r
 || fe_»pÜ‹r->
R•ÜtCÚ‹xt
(
cÚ‹xt
))) {

364 
FlushSŒ—ms
(
di¥Ïy_»pÜ‹r
);

365 
FlushSŒ—ms
(
fe_»pÜ‹r
);

367 
size_t
 
	gnum_»³t™iÚs_tÙ®
 = 0;

371 
P”fCouÁ”sM—su»m’t
 
³rfcouÁ”s
(

372 
SŒS¶™
(
FLAGS_b’chm¬k_³rf_couÁ”s
, ','));

375 
	g¡d
::
veùÜ
<
š‹º®
::
B’chm¬kRuÂ”
> 
ruÂ”s
;

376 
	gruÂ”s
.
»£rve
(
b’chm¬ks
.
size
());

380 
	gb’chm¬ks_w™h_th»ads
 = 0;

383 cÚ¡ 
	gB’chm¬kIn¡ªû
& 
	gb’chm¬k
 : 
b’chm¬ks
) {

384 
B’chm¬kR•Ü‹r
::
P”FamyRunR•Üts
* 
»pÜts_fÜ_çmy
 = 
nuÎ±r
;

385 ià(
	gb’chm¬k
.
com¶ex™y
(è!ğ
oNÚe
)

386 
»pÜts_fÜ_çmy
 = &
³r_çmy_»pÜts
[
b’chm¬k
.
çmy_šdex
()];

387 
	gb’chm¬ks_w™h_th»ads
 +ğ(
b’chm¬k
.
th»ads
() > 0);

388 
	gruÂ”s
.
em¶aû_back
(
b’chm¬k
, &
³rfcouÁ”s
, 
»pÜts_fÜ_çmy
);

389 
	gnum_»³©s_of_this_š¡ªû
 = 
ruÂ”s
.
back
().
G‘NumR•—ts
();

390 
	gnum_»³t™iÚs_tÙ®
 +ğ
num_»³©s_of_this_š¡ªû
;

391 ià(
	g»pÜts_fÜ_çmy
)

392 
	g»pÜts_fÜ_çmy
->
	gnum_runs_tÙ®
 +ğ
num_»³©s_of_this_š¡ªû
;

394 
as£¹
(
ruÂ”s
.
size
(è=ğ
b’chm¬ks
.size() && "Unexpected„unner count.");

398 ià((
	gb’chm¬ks_w™h_th»ads
 > 0è&& (
	g³rfcouÁ”s
.
num_couÁ”s
() > 0)) {

399 
G‘E¼ÜLogIn¡ªû
()

400 << "***WARNING*** Th”¬" << 
	gb’chm¬ks_w™h_th»ads


401 << " b’chm¬k w™hh»ad ªd " << 
	g³rfcouÁ”s
.
num_couÁ”s
()

407 
	g¡d
::
veùÜ
<
size_t
> 
»³t™iÚ_šdiûs
;

408 
	g»³t™iÚ_šdiûs
.
»£rve
(
num_»³t™iÚs_tÙ®
);

409 
size_t
 
	gruÂ”_šdex
 = 0, 
	gnum_ruÂ”s
 = 
ruÂ”s
.
size
();

410 
	gruÂ”_šdex
 !ğ
num_ruÂ”s
; ++runner_index) {

411 cÚ¡ 
	gš‹º®
::
B’chm¬kRuÂ”
& 
ruÂ”
 = 
ruÂ”s
[
ruÂ”_šdex
];

412 
	g¡d
::
fl_n
(
¡d
::
back_š£¹”
(
»³t™iÚ_šdiûs
),

413 
ruÂ”
.
G‘NumR•—ts
(), 
ruÂ”_šdex
);

415 
as£¹
(
»³t™iÚ_šdiûs
.
size
(è=ğ
num_»³t™iÚs_tÙ®
 &&

418 ià(
	gFLAGS_b’chm¬k_’abË_¿ndom_š‹¾—všg
) {

419 
	g¡d
::
¿ndom_deviû
 
rd
;

420 
	g¡d
::
mt19937
 
g
(
rd
());

421 
	g¡d
::
shufæe
(
»³t™iÚ_šdiûs
.
begš
(),„•‘™iÚ_šdiûs.
’d
(), 
g
);

424 
size_t
 
	g»³t™iÚ_šdex
 : 
»³t™iÚ_šdiûs
) {

425 
š‹º®
::
B’chm¬kRuÂ”
& 
ruÂ”
 = 
ruÂ”s
[
»³t™iÚ_šdex
];

426 
	gruÂ”
.
DoOÃR•‘™iÚ
();

427 ià(
	gruÂ”
.
HasR•—tsRemaššg
()) ;

430 
	gdi¥Ïy_»pÜ‹r
->
R•ÜtRunsCÚfig
(

431 
ruÂ”
.
G‘MšTime
(),„uÂ”.
HasEx¶ic™I‹rs
(),„uÂ”.
G‘I‹rs
());

432 ià(
	gfe_»pÜ‹r
)

433 
	gfe_»pÜ‹r
->
R•ÜtRunsCÚfig
(

434 
ruÂ”
.
G‘MšTime
(),„uÂ”.
HasEx¶ic™I‹rs
(),„uÂ”.
G‘I‹rs
());

436 
RunResuÉs
 
	grun_»suÉs
 = 
ruÂ”
.
G‘ResuÉs
();

439 ià(cÚ¡‡uto* 
	g»pÜts_fÜ_çmy
 = 
ruÂ”
.
G‘R•ÜtsFÜFamy
()) {

440 ià(
»pÜts_fÜ_çmy
->
num_runs_dÚe
 ==

441 
»pÜts_fÜ_çmy
->
num_runs_tÙ®
) {

442 autØ
add™iÚ®_run_¡©s
 = 
Compu‹BigO
(
»pÜts_fÜ_çmy
->
Runs
);

443 
	grun_»suÉs
.
	gagg»g©es_Úly
.
š£¹
(
run_»suÉs
.
agg»g©es_Úly
.
’d
(),

444 
add™iÚ®_run_¡©s
.
begš
(),

445 
add™iÚ®_run_¡©s
.
’d
());

446 
	g³r_çmy_»pÜts
.
”a£
(

447 
¡©ic_ÿ¡
<>(
»pÜts_fÜ_çmy
->
Runs
.
äÚt
().
çmy_šdex
));

451 
R•Üt
(
di¥Ïy_»pÜ‹r
, 
fe_»pÜ‹r
, 
run_»suÉs
);

454 
	gdi¥Ïy_»pÜ‹r
->
Fš®ize
();

455 ià(
	gfe_»pÜ‹r
èfe_»pÜ‹r->
Fš®ize
();

456 
FlushSŒ—ms
(
di¥Ïy_»pÜ‹r
);

457 
FlushSŒ—ms
(
fe_»pÜ‹r
);

462 
BENCHMARK_DISABLE_DEPRECATED_WARNING


464 
	g¡d
::
unique_±r
<
B’chm¬kR•Ü‹r
> 
C»©eR•Ü‹r
(

465 
¡d
::
¡ršg
 cÚ¡& 
Çme
, 
CÚsŞeR•Ü‹r
::
OuutO±iÚs
 
ouut_İts
) {

466 
¡d
::
	tunique_±r
<
	tB’chm¬kR•Ü‹r
> 
	tPŒTy³
;

467 ià(
	gÇme
 == "console") {

468  
PŒTy³
(
Ãw
 
CÚsŞeR•Ü‹r
(
ouut_İts
));

470 ià(
	gÇme
 == "json") {

471  
PŒTy³
(
Ãw
 
JSONR•Ü‹r
());

473 ià(
	gÇme
 == "csv") {

474  
PŒTy³
(
Ãw
 
CSVR•Ü‹r
());

476 
	g¡d
::
û¼
 << "UÃx³ùed fÜm©: '" << 
Çme
 << "'\n";

477 
	g¡d
::
ex™
(1);

480 
	gBENCHMARK_RESTORE_DEPRECATED_WARNING


484 
boŞ
 
IsZ”o
(
n
) {

485  
	g¡d
::
abs
(
n
è< 
¡d
::
num”ic_lim™s
<>::
•sÚ
();

488 
	gCÚsŞeR•Ü‹r
::
OuutO±iÚs
 
G‘OuutO±iÚs
(
boŞ
 
fÜû_no_cŞÜ
) {

489 
ouut_İts
 = 
CÚsŞeR•Ü‹r
::
OO_DeçuÉs
;

490 autØ
	gis_b’chm¬k_cŞÜ
 = [
fÜû_no_cŞÜ
](è-> 
boŞ
 {

491 ià(
fÜû_no_cŞÜ
) {

492  
çl£
;

494 ià(
	gFLAGS_b’chm¬k_cŞÜ
 == "auto") {

495  
IsCŞÜT”mš®
();

497  
IsTruthyFÏgV®ue
(
FLAGS_b’chm¬k_cŞÜ
);

499 ià(
is_b’chm¬k_cŞÜ
()) {

500 
	gouut_İts
 |ğ
CÚsŞeR•Ü‹r
::
OO_CŞÜ
;

502 
	gouut_İts
 &ğ~
CÚsŞeR•Ü‹r
::
OO_CŞÜ
;

504 ià(
	gFLAGS_b’chm¬k_couÁ”s_buÏr
) {

505 
	gouut_İts
 |ğ
CÚsŞeR•Ü‹r
::
OO_TabuÏr
;

507 
	gouut_İts
 &ğ~
CÚsŞeR•Ü‹r
::
OO_TabuÏr
;

509  
	g¡©ic_ÿ¡
<
	gCÚsŞeR•Ü‹r
::
OuutO±iÚs
>(
ouut_İts
);

514 
B’chm¬kR•Ü‹r
* 
C»©eDeçuÉDi¥ÏyR•Ü‹r
() {

515 autØ
	gdeçuÉ_di¥Ïy_»pÜ‹r
 =

516 
š‹º®
::
C»©eR•Ü‹r
(
FLAGS_b’chm¬k_fÜm©
,

517 
š‹º®
::
G‘OuutO±iÚs
())

518 .
»Ëa£
();

519  
	gdeçuÉ_di¥Ïy_»pÜ‹r
;

522 
size_t
 
RunS³cif›dB’chm¬ks
() {

523  
RunS³cif›dB’chm¬ks
(
nuÎ±r
,‚uÎ±r, 
FLAGS_b’chm¬k_f‹r
);

526 
size_t
 
RunS³cif›dB’chm¬ks
(
¡d
::
¡ršg
 
¥ec
) {

527  
RunS³cif›dB’chm¬ks
(
nuÎ±r
,‚uÎ±r, 
¡d
::
move
(
¥ec
));

530 
size_t
 
RunS³cif›dB’chm¬ks
(
B’chm¬kR•Ü‹r
* 
di¥Ïy_»pÜ‹r
) {

531  
RunS³cif›dB’chm¬ks
(
di¥Ïy_»pÜ‹r
, 
nuÎ±r
,

532 
FLAGS_b’chm¬k_f‹r
);

535 
size_t
 
RunS³cif›dB’chm¬ks
(
B’chm¬kR•Ü‹r
* 
di¥Ïy_»pÜ‹r
,

536 
¡d
::
¡ršg
 
¥ec
) {

537  
RunS³cif›dB’chm¬ks
(
di¥Ïy_»pÜ‹r
, 
nuÎ±r
, 
¡d
::
move
(
¥ec
));

540 
size_t
 
RunS³cif›dB’chm¬ks
(
B’chm¬kR•Ü‹r
* 
di¥Ïy_»pÜ‹r
,

541 
B’chm¬kR•Ü‹r
* 
fe_»pÜ‹r
) {

542  
RunS³cif›dB’chm¬ks
(
di¥Ïy_»pÜ‹r
, 
fe_»pÜ‹r
,

543 
FLAGS_b’chm¬k_f‹r
);

546 
size_t
 
RunS³cif›dB’chm¬ks
(
B’chm¬kR•Ü‹r
* 
di¥Ïy_»pÜ‹r
,

547 
B’chm¬kR•Ü‹r
* 
fe_»pÜ‹r
,

548 
¡d
::
¡ršg
 
¥ec
) {

549 ià(
¥ec
.
em±y
() || spec == "all")

550 
¥ec
 = ".";

553 
	g¡d
::
of¡»am
 
ouut_fe
;

554 
	g¡d
::
unique_±r
<
B’chm¬kR•Ü‹r
> 
deçuÉ_di¥Ïy_»pÜ‹r
;

555 
	g¡d
::
unique_±r
<
B’chm¬kR•Ü‹r
> 
deçuÉ_fe_»pÜ‹r
;

556 ià(!
	gdi¥Ïy_»pÜ‹r
) {

557 
	gdeçuÉ_di¥Ïy_»pÜ‹r
.
»£t
(
C»©eDeçuÉDi¥ÏyR•Ü‹r
());

558 
	gdi¥Ïy_»pÜ‹r
 = 
deçuÉ_di¥Ïy_»pÜ‹r
.
g‘
();

560 auto& 
	gOut
 = 
di¥Ïy_»pÜ‹r
->
G‘OuutSŒ—m
();

561 auto& 
	gE¼
 = 
di¥Ïy_»pÜ‹r
->
G‘E¼ÜSŒ—m
();

563 
	g¡d
::
¡ršg
 cÚ¡& 
âame
 = 
FLAGS_b’chm¬k_out
;

564 ià(
	gâame
.
em±y
(è&& 
	gfe_»pÜ‹r
) {

565 
	gE¼
 << "A custom file„eporter was…rovided but "

567 << 
	g¡d
::
’dl
;

568 
	g¡d
::
ex™
(1);

570 ià(!
	gâame
.
em±y
()) {

571 
	gouut_fe
.
İ’
(
âame
);

572 ià(!
	gouut_fe
.
is_İ’
()) {

573 
	gE¼
 << "šv®id fÇme: '" << 
	gâame
 << "'" << 
	g¡d
::
’dl
;

574 
	g¡d
::
ex™
(1);

576 ià(!
	gfe_»pÜ‹r
) {

577 
	gdeçuÉ_fe_»pÜ‹r
 = 
š‹º®
::
C»©eR•Ü‹r
(

578 
FLAGS_b’chm¬k_out_fÜm©
, 
CÚsŞeR•Ü‹r
::
OO_NÚe
);

579 
	gfe_»pÜ‹r
 = 
deçuÉ_fe_»pÜ‹r
.
g‘
();

581 
	gfe_»pÜ‹r
->
S‘OuutSŒ—m
(&
ouut_fe
);

582 
	gfe_»pÜ‹r
->
S‘E¼ÜSŒ—m
(&
ouut_fe
);

585 
	g¡d
::
veùÜ
<
š‹º®
::
B’chm¬kIn¡ªû
> 
b’chm¬ks
;

586 ià(!
FšdB’chm¬ksIÁ”Çl
(
¥ec
, &
b’chm¬ks
, &
E¼
))  0;

588 ià(
	gb’chm¬ks
.
em±y
()) {

589 
	gE¼
 << "FaedØm©ch‡ny b’chm¬k agaš¡„egex: " << 
	g¥ec
 << "\n";

593 ià(
	gFLAGS_b’chm¬k_li¡_‹¡s
) {

594 autØcÚ¡& 
	gb’chm¬k
 : 
b’chm¬ks
)

595 
Out
 << 
b’chm¬k
.
Çme
().
¡r
() << "\n";

597 
	gš‹º®
::
RunB’chm¬ks
(
b’chm¬ks
, 
di¥Ïy_»pÜ‹r
, 
fe_»pÜ‹r
);

600  
	gb’chm¬ks
.
size
();

603 
	gÇme¥aû
 {

605 
TimeUn™
 
	gdeçuÉ_time_un™
 = 
kNªo£cÚd
;

608 
TimeUn™
 
G‘DeçuÉTimeUn™
(è{  
	gdeçuÉ_time_un™
; }

610 
S‘DeçuÉTimeUn™
(
TimeUn™
 
un™
è{ 
	gdeçuÉ_time_un™
 = unit; }

612 
	g¡d
::
¡ršg
 
G‘B’chm¬kF‹r
(è{  
FLAGS_b’chm¬k_f‹r
; }

614 
S‘B’chm¬kF‹r
(
¡d
::
¡ršg
 
v®ue
) {

615 
FLAGS_b’chm¬k_f‹r
 = 
¡d
::
move
(
v®ue
);

618 
št32_t
 
G‘B’chm¬kV”bos™y
(è{  
	gFLAGS_v
; }

620 
Regi¡”MemÜyMªag”
(
MemÜyMªag”
* 
mªag”
) {

621 
	gš‹º®
::
memÜy_mªag”
 = 
mªag”
;

624 
AddCu¡omCÚ‹xt
(cÚ¡ 
¡d
::
¡ršg
& 
key
, cÚ¡ std::¡ršg& 
v®ue
) {

625 ià(
š‹º®
::
glob®_cÚ‹xt
 =ğ
nuÎ±r
) {

626 
š‹º®
::
glob®_cÚ‹xt
 = 
Ãw
 
¡d
::
m­
<¡d::
¡ršg
, 
	g¡d
::string>();

628 ià(!
	gš‹º®
::
glob®_cÚ‹xt
->
em¶aû
(
key
, 
v®ue
).
	g£cÚd
) {

629 
	g¡d
::
û¼
 << "FaedØadd cu¡om cÚ‹xˆ\"" << 
key
 << "\"‡s it‡lready "

630 << "exi¡ w™h v®u\"" << 
v®ue
 << "\"\n";

634 
Çme¥aû
 
	gš‹º®
 {

636 (*
	gH–³rPrštf
)();

638 
PrštU§geAndEx™
() {

639 
H–³rPrštf
();

640 
ex™
(0);

643 
S‘DeçuÉTimeUn™FromFÏg
(cÚ¡ 
¡d
::
¡ršg
& 
time_un™_æag
) {

644 ià(
time_un™_æag
 == "s") {

645  
S‘DeçuÉTimeUn™
(
kSecÚd
);

647 ià(
	gtime_un™_æag
 == "ms") {

648  
S‘DeçuÉTimeUn™
(
kMli£cÚd
);

650 ià(
	gtime_un™_æag
 == "us") {

651  
S‘DeçuÉTimeUn™
(
kMiüo£cÚd
);

653 ià(
	gtime_un™_æag
 == "ns") {

654  
S‘DeçuÉTimeUn™
(
kNªo£cÚd
);

656 ià(!
	gtime_un™_æag
.
em±y
()) {

657 
PrštU§geAndEx™
();

661 
P¬£CommªdLšeFÏgs
(* 
¬gc
, ** 
¬gv
) {

662 
usšg
 
Çme¥aû
 
	gb’chm¬k
;

663 
	gB’chm¬kR•Ü‹r
::
CÚ‹xt
::
execubË_Çme
 =

664 (
¬gc
 && *¬gø> 0è? 
¬gv
[0] : "unknown";

665 
	gi
 = 1; 
	g¬gc
 && i < *argc; ++i) {

666 ià(
P¬£BoŞFÏg
(
¬gv
[
i
], "benchmark_list_tests",

667 &
FLAGS_b’chm¬k_li¡_‹¡s
) ||

668 
P¬£SŒšgFÏg
(
¬gv
[
i
], "b’chm¬k_f‹r", &
FLAGS_b’chm¬k_f‹r
) ||

669 
P¬£SŒšgFÏg
(
¬gv
[
i
], "benchmark_min_time",

670 &
FLAGS_b’chm¬k_mš_time
) ||

671 
P¬£DoubËFÏg
(
¬gv
[
i
], "benchmark_min_warmup_time",

672 &
FLAGS_b’chm¬k_mš_w¬mup_time
) ||

673 
P¬£IÁ32FÏg
(
¬gv
[
i
], "benchmark_repetitions",

674 &
FLAGS_b’chm¬k_»³t™iÚs
) ||

675 
P¬£BoŞFÏg
(
¬gv
[
i
], "benchmark_enable_random_interleaving",

676 &
FLAGS_b’chm¬k_’abË_¿ndom_š‹¾—všg
) ||

677 
P¬£BoŞFÏg
(
¬gv
[
i
], "benchmark_report_aggregates_only",

678 &
FLAGS_b’chm¬k_»pÜt_agg»g©es_Úly
) ||

679 
P¬£BoŞFÏg
(
¬gv
[
i
], "benchmark_display_aggregates_only",

680 &
FLAGS_b’chm¬k_di¥Ïy_agg»g©es_Úly
) ||

681 
P¬£SŒšgFÏg
(
¬gv
[
i
], "b’chm¬k_fÜm©", &
FLAGS_b’chm¬k_fÜm©
) ||

682 
P¬£SŒšgFÏg
(
¬gv
[
i
], "b’chm¬k_out", &
FLAGS_b’chm¬k_out
) ||

683 
P¬£SŒšgFÏg
(
¬gv
[
i
], "benchmark_out_format",

684 &
FLAGS_b’chm¬k_out_fÜm©
) ||

685 
P¬£SŒšgFÏg
(
¬gv
[
i
], "b’chm¬k_cŞÜ", &
FLAGS_b’chm¬k_cŞÜ
) ||

686 
P¬£BoŞFÏg
(
¬gv
[
i
], "benchmark_counters_tabular",

687 &
FLAGS_b’chm¬k_couÁ”s_buÏr
) ||

688 
P¬£SŒšgFÏg
(
¬gv
[
i
], "benchmark_perf_counters",

689 &
FLAGS_b’chm¬k_³rf_couÁ”s
) ||

690 
P¬£KeyV®ueFÏg
(
¬gv
[
i
], "benchmark_context",

691 &
FLAGS_b’chm¬k_cÚ‹xt
) ||

692 
P¬£SŒšgFÏg
(
¬gv
[
i
], "benchmark_time_unit",

693 &
FLAGS_b’chm¬k_time_un™
) ||

694 
P¬£IÁ32FÏg
(
¬gv
[
i
], "v", &
FLAGS_v
)) {

695 
	gj
 = 
i
; j !ğ*
¬gc
 - 1; ++jè
	g¬gv
[
j
] = 
¬gv
[j + 1];

697 --(*
	g¬gc
);

698 --
	gi
;

699 } ià(
IsFÏg
(
¬gv
[
i
], "help")) {

700 
PrštU§geAndEx™
();

703 autØcÚ¡* 
	gæag
 :

704 {&
FLAGS_b’chm¬k_fÜm©
, &
	gFLAGS_b’chm¬k_out_fÜm©
}) {

705 ià(*
	gæag
 !ğ"cÚsŞe" && *
æag
 != "json" && *flag != "csv") {

706 
PrštU§geAndEx™
();

709 
S‘DeçuÉTimeUn™FromFÏg
(
FLAGS_b’chm¬k_time_un™
);

710 ià(
	gFLAGS_b’chm¬k_cŞÜ
.
em±y
()) {

711 
PrštU§geAndEx™
();

713 cÚ¡‡uto& 
	gkv
 : 
FLAGS_b’chm¬k_cÚ‹xt
) {

714 
AddCu¡omCÚ‹xt
(
kv
.
fœ¡
, kv.
£cÚd
);

718 
In™ŸlizeSŒ—ms
() {

719 
	g¡d
::
ios_ba£
::
In™
 
š™
;

725 
PrštDeçuÉH–p
() {

726 
årštf
(
¡dout
,

741 #ià
defšed
 
HAVE_LIBPFM


749 
In™Ÿlize
(* 
¬gc
, ** 
¬gv
, (*
H–³rPrštf
)()) {

750 
	gš‹º®
::
H–³rPrštf
 = HelperPrintf;

751 
	gš‹º®
::
P¬£CommªdLšeFÏgs
(
¬gc
, 
¬gv
);

752 
	gš‹º®
::
LogLev–
(èğ
FLAGS_v
;

755 
Shutdown
(è{ 
d–‘e
 
	gš‹º®
::
glob®_cÚ‹xt
; }

757 
boŞ
 
R•ÜtUÄecognizedArgum’ts
(
¬gc
, ** 
¬gv
) {

758 
	gi
 = 1; i < 
	g¬gc
; ++i) {

759 
årštf
(
¡d”r
, "%s:ƒ¼Ü: uÄecognized commªd-lšæag: %s\n", 
¬gv
[0],

760 
¬gv
[
i
]);

762  
	g¬gc
 > 1;

	@third_party/benchmark/src/benchmark_api_internal.cc

1 
	~"b’chm¬k_­i_š‹º®.h
"

3 
	~<cš‰y³s
>

5 
	~"¡ršg_ut.h
"

7 
Çme¥aû
 
	gb’chm¬k
 {

8 
Çme¥aû
 
	gš‹º®
 {

10 
	gB’chm¬kIn¡ªû
::
B’chm¬kIn¡ªû
(
B’chm¬k
* 
b’chm¬k
, 
çmy_idx
,

11 
³r_çmy_š¡ªû_idx
,

12 cÚ¡ 
¡d
::
veùÜ
<
št64_t
>& 
¬gs
,

13 
th»ad_couÁ
)

14 : 
b’chm¬k_
(*
b’chm¬k
),

15 
çmy_šdex_
(
çmy_idx
),

16 
³r_çmy_š¡ªû_šdex_
(
³r_çmy_š¡ªû_idx
),

17 
agg»g©iÚ_»pÜt_mode_
(
b’chm¬k_
.aggregation_report_mode_),

18 
¬gs_
(
¬gs
),

19 
time_un™_
(
b’chm¬k_
.
G‘TimeUn™
()),

20 
m—su»_´oûss_ıu_time_
(
b’chm¬k_
.measure_process_cpu_time_),

21 
u£_»®_time_
(
b’chm¬k_
.use_real_time_),

22 
u£_mªu®_time_
(
b’chm¬k_
.use_manual_time_),

23 
com¶ex™y_
(
b’chm¬k_
.complexity_),

24 
com¶ex™y_Ïmbda_
(
b’chm¬k_
.complexity_lambda_),

25 
¡©i¡ics_
(
b’chm¬k_
.statistics_),

26 
»³t™iÚs_
(
b’chm¬k_
.repetitions_),

27 
mš_time_
(
b’chm¬k_
.min_time_),

28 
mš_w¬mup_time_
(
b’chm¬k_
.min_warmup_time_),

29 
™”©iÚs_
(
b’chm¬k_
.iterations_),

30 
th»ads_
(
th»ad_couÁ
) {

31 
	gÇme_
.
	gfunùiÚ_Çme
 = 
b’chm¬k_
.
Çme_
;

33 
size_t
 
	g¬g_i
 = 0;

34 cÚ¡‡uto& 
	g¬g
 : 
¬gs
) {

35 ià(!
Çme_
.
¬gs
.
em±y
()) {

36 
Çme_
.
¬gs
 += '/';

39 ià(
	g¬g_i
 < 
	gb’chm¬k
->
	g¬g_Çmes_
.
size
()) {

40 cÚ¡‡uto& 
	g¬g_Çme
 = 
b’chm¬k_
.
¬g_Çmes_
[
¬g_i
];

41 ià(!
	g¬g_Çme
.
em±y
()) {

42 
	gÇme_
.
	g¬gs
 +ğ
SŒFÜm©
("%s:", 
¬g_Çme
.
c_¡r
());

46 
	gÇme_
.
	g¬gs
 +ğ
SŒFÜm©
("%" 
PRId64
, 
¬g
);

47 ++
	g¬g_i
;

50 ià(!
IsZ”o
(
b’chm¬k
->
mš_time_
)) {

51 
	gÇme_
.
	gmš_time
 = 
SŒFÜm©
("mš_time:%0.3f", 
b’chm¬k_
.
mš_time_
);

54 ià(!
IsZ”o
(
b’chm¬k
->
mš_w¬mup_time_
)) {

55 
	gÇme_
.
	gmš_w¬mup_time
 =

56 
SŒFÜm©
("mš_w¬mup_time:%0.3f", 
b’chm¬k_
.
mš_w¬mup_time_
);

59 ià(
	gb’chm¬k_
.
	g™”©iÚs_
 != 0) {

60 
Çme_
.
™”©iÚs
 = 
SŒFÜm©
(

61 "™”©iÚs:%lu", 
¡©ic_ÿ¡
<>(
b’chm¬k_
.
™”©iÚs_
));

64 ià(
	gb’chm¬k_
.
	g»³t™iÚs_
 != 0) {

65 
Çme_
.
»³t™iÚs
 = 
SŒFÜm©
("»³©s:%d", 
b’chm¬k_
.
»³t™iÚs_
);

68 ià(
	gb’chm¬k_
.
	gm—su»_´oûss_ıu_time_
) {

69 
	gÇme_
.
	gtime_ty³
 = "process_time";

72 ià(
	gb’chm¬k_
.
	gu£_mªu®_time_
) {

73 ià(!
	gÇme_
.
	gtime_ty³
.
em±y
()) {

74 
	gÇme_
.
	gtime_ty³
 += '/';

76 
	gÇme_
.
	gtime_ty³
 += "manual_time";

77 } ià(
	gb’chm¬k_
.
	gu£_»®_time_
) {

78 ià(!
	gÇme_
.
	gtime_ty³
.
em±y
()) {

79 
	gÇme_
.
	gtime_ty³
 += '/';

81 
	gÇme_
.
	gtime_ty³
 += "real_time";

84 ià(!
	gb’chm¬k_
.
	gth»ad_couÁs_
.
em±y
()) {

85 
	gÇme_
.
	gth»ads
 = 
SŒFÜm©
("th»ads:%d", 
th»ads_
);

88 
	g£tup_
 = 
b’chm¬k_
.
£tup_
;

89 
	g‹¬down_
 = 
b’chm¬k_
.
‹¬down_
;

92 
S‹
 
	gB’chm¬kIn¡ªû
::
Run
(

93 
I‹¿tiÚCouÁ
 
™”s
, 
th»ad_id
, 
š‹º®
::
Th»adTim”
* 
tim”
,

94 
š‹º®
::
Th»adMªag”
* 
mªag”
,

95 
š‹º®
::
P”fCouÁ”sM—su»m’t
* 
³rf_couÁ”s_m—su»m’t
) const {

96 
S‹
 
¡
(
Çme_
.
funùiÚ_Çme
, 
™”s
, 
¬gs_
, 
th»ad_id
, 
th»ads_
, 
tim”
,

97 
mªag”
, 
³rf_couÁ”s_m—su»m’t
);

98 
	gb’chm¬k_
.
Run
(
¡
);

99  
	g¡
;

102 
	gB’chm¬kIn¡ªû
::
S‘up
() const {

103 ià(
£tup_
) {

104 
S‹
 
¡
(
Çme_
.
funùiÚ_Çme
, 1, 
¬gs_
, 0, 
th»ads_
,

105 
nuÎ±r
,‚ullptr,‚ullptr);

106 
£tup_
(
¡
);

110 
	gB’chm¬kIn¡ªû
::
T—rdown
() const {

111 ià(
‹¬down_
) {

112 
S‹
 
¡
(
Çme_
.
funùiÚ_Çme
, 1, 
¬gs_
, 0, 
th»ads_
,

113 
nuÎ±r
,‚ullptr,‚ullptr);

114 
‹¬down_
(
¡
);

	@third_party/benchmark/src/benchmark_api_internal.h

1 #iâdeà
BENCHMARK_API_INTERNAL_H


2 
	#BENCHMARK_API_INTERNAL_H


	)

4 
	~<cm©h
>

5 
	~<iosfwd
>

6 
	~<lim™s
>

7 
	~<memÜy
>

8 
	~<¡ršg
>

9 
	~<veùÜ
>

11 
	~"b’chm¬k/b’chm¬k.h
"

12 
	~"commªdlšeæags.h
"

14 
Çme¥aû
 
	gb’chm¬k
 {

15 
Çme¥aû
 
	gš‹º®
 {

18 şas 
	cB’chm¬kIn¡ªû
 {

19 
	gpublic
:

20 
B’chm¬kIn¡ªû
(
B’chm¬k
* 
b’chm¬k
, 
çmy_šdex
,

21 
³r_çmy_š¡ªû_šdex
,

22 cÚ¡ 
¡d
::
veùÜ
<
št64_t
>& 
¬gs
, 
th»ads
);

24 cÚ¡ 
	gB’chm¬kName
& 
Çme
(ècÚ¡ {  
	gÇme_
; }

25 
çmy_šdex
(ècÚ¡ {  
	gçmy_šdex_
; }

26 
³r_çmy_š¡ªû_šdex
(ècÚ¡ {  
	g³r_çmy_š¡ªû_šdex_
; }

27 
Agg»g©iÚR•ÜtMode
 
agg»g©iÚ_»pÜt_mode
() const {

28  
	gagg»g©iÚ_»pÜt_mode_
;

30 
TimeUn™
 
time_un™
(ècÚ¡ {  
	gtime_un™_
; }

31 
boŞ
 
m—su»_´oûss_ıu_time
(ècÚ¡ {  
	gm—su»_´oûss_ıu_time_
; }

32 
boŞ
 
u£_»®_time
(ècÚ¡ {  
	gu£_»®_time_
; }

33 
boŞ
 
u£_mªu®_time
(ècÚ¡ {  
	gu£_mªu®_time_
; }

34 
BigO
 
com¶ex™y
(ècÚ¡ {  
	gcom¶ex™y_
; }

35 
BigOFunc
* 
com¶ex™y_Ïmbda
(ècÚ¡ {  
	gcom¶ex™y_Ïmbda_
; }

36 cÚ¡ 
	g¡d
::
veùÜ
<
Sti¡ics
>& 
¡©i¡ics
(ècÚ¡ {  
¡©i¡ics_
; }

37 
»³t™iÚs
(ècÚ¡ {  
	g»³t™iÚs_
; }

38 
mš_time
(ècÚ¡ {  
	gmš_time_
; }

39 
mš_w¬mup_time
(ècÚ¡ {  
	gmš_w¬mup_time_
; }

40 
I‹¿tiÚCouÁ
 
™”©iÚs
(ècÚ¡ {  
	g™”©iÚs_
; }

41 
th»ads
(ècÚ¡ {  
	gth»ads_
; }

42 
S‘up
() const;

43 
T—rdown
() const;

45 
S‹
 
Run
(
I‹¿tiÚCouÁ
 
™”s
, 
th»ad_id
, 
š‹º®
::
Th»adTim”
* 
tim”
,

46 
š‹º®
::
Th»adMªag”
* 
mªag”
,

47 
š‹º®
::
P”fCouÁ”sM—su»m’t
* 
³rf_couÁ”s_m—su»m’t
) const;

49 
	g´iv©e
:

50 
B’chm¬kName
 
Çme_
;

51 
	gB’chm¬k
& 
	gb’chm¬k_
;

52 cÚ¡ 
	gçmy_šdex_
;

53 cÚ¡ 
	g³r_çmy_š¡ªû_šdex_
;

54 
Agg»g©iÚR•ÜtMode
 
	gagg»g©iÚ_»pÜt_mode_
;

55 cÚ¡ 
	g¡d
::
veùÜ
<
št64_t
>& 
¬gs_
;

56 
TimeUn™
 
	gtime_un™_
;

57 
boŞ
 
	gm—su»_´oûss_ıu_time_
;

58 
boŞ
 
	gu£_»®_time_
;

59 
boŞ
 
	gu£_mªu®_time_
;

60 
BigO
 
	gcom¶ex™y_
;

61 
BigOFunc
* 
	gcom¶ex™y_Ïmbda_
;

62 
U£rCouÁ”s
 
	gcouÁ”s_
;

63 cÚ¡ 
	g¡d
::
veùÜ
<
Sti¡ics
>& 
¡©i¡ics_
;

64 
	g»³t™iÚs_
;

65 
	gmš_time_
;

66 
	gmš_w¬mup_time_
;

67 
I‹¿tiÚCouÁ
 
	g™”©iÚs_
;

68 
	gth»ads_
;

70 (*
	gÿÎback_funùiÚ
)(cÚ¡ 
	tb’chm¬k
::
	tS‹
&);

71 
ÿÎback_funùiÚ
 
	g£tup_
 = 
nuÎ±r
;

72 
ÿÎback_funùiÚ
 
	g‹¬down_
 = 
nuÎ±r
;

75 
boŞ
 
FšdB’chm¬ksIÁ”Çl
(cÚ¡ 
¡d
::
¡ršg
& 
»
,

76 
¡d
::
veùÜ
<
B’chm¬kIn¡ªû
>* 
b’chm¬ks
,

77 
¡d
::
o¡»am
* 
E¼
);

79 
boŞ
 
IsZ”o
(
n
);

81 
BENCHMARK_EXPORT


82 
	gCÚsŞeR•Ü‹r
::
OuutO±iÚs
 
G‘OuutO±iÚs
(
boŞ
 
fÜû_no_cŞÜ
 = 
çl£
);

	@third_party/benchmark/src/benchmark_main.cc

15 
	~"b’chm¬k/b’chm¬k.h
"

17 
BENCHMARK_EXPORT
 
maš
(, **);

18 
BENCHMARK_MAIN
();

	@third_party/benchmark/src/benchmark_name.cc

15 
	~<b’chm¬k/b’chm¬k.h
>

17 
Çme¥aû
 
	gb’chm¬k
 {

19 
	gÇme¥aû
 {

22 
size_t
 
size_im¶
() {  0; }

24 
	g‹m¶©e
 <
ty³Çme
 
	gH—d
, 
	gty³Çme
... 
	gTa
>

25 
size_t
 
size_im¶
(cÚ¡ 
H—d
& 
h—d
, cÚ¡ 
Ta
&... 

) {

26  
	gh—d
.
size
(è+ 
size_im¶
(

...);

31 
još_im¶
(
¡d
::
¡ršg
&, ) {}

33 
	g‹m¶©e
 <
ty³Çme
 
	gH—d
, 
	gty³Çme
... 
	gTa
>

34 
još_im¶
(
¡d
::
¡ršg
& 
s
, cÚ¡ 
d–im™”
, cÚ¡ 
H—d
& 
h—d
,

35 cÚ¡ 
Ta
&... 

) {

36 ià(!
	gs
.
em±y
(è&& !
	gh—d
.empty()) {

37 
	gs
 +ğ
d–im™”
;

40 
	gs
 +ğ
h—d
;

42 
još_im¶
(
s
, 
d–im™”
, 

...);

45 
	g‹m¶©e
 <
	gty³Çme
... 
	gTs
>

46 
	g¡d
::
¡ršg
 
još
(
d–im™”
, cÚ¡ 
Ts
&... 
ts
) {

47 
	g¡d
::
¡ršg
 
s
;

48 
	gs
.
»£rve
(...(
Ts
è+ 
size_im¶
(
ts
...));

49 
još_im¶
(
s
, 
d–im™”
, 
ts
...);

50  
	gs
;

54 
BENCHMARK_EXPORT


55 
	g¡d
::
¡ršg
 
B’chm¬kName
::
¡r
() const {

56  
još
('/', 
funùiÚ_Çme
, 
¬gs
, 
mš_time
, 
mš_w¬mup_time
, 
™”©iÚs
,

57 
»³t™iÚs
, 
time_ty³
, 
th»ads
);

	@third_party/benchmark/src/benchmark_register.cc

15 
	~"b’chm¬k_»gi¡”.h
"

17 #iâdeà
BENCHMARK_OS_WINDOWS


18 #ià!
defšed
(
BENCHMARK_OS_FUCHSIA
è&& !defšed(
BENCHMARK_OS_QURT
)

19 
	~<sys/»sourû.h
>

21 
	~<sys/time.h
>

22 
	~<uni¡d.h
>

25 
	~<®gÜ™hm
>

26 
	~<©omic
>

27 
	~<cš‰y³s
>

28 
	~<cÚd™iÚ_v¬ŸbË
>

29 
	~<c¡dio
>

30 
	~<c¡dlib
>

31 
	~<c¡ršg
>

32 
	~<f¡»am
>

33 
	~<io¡»am
>

34 
	~<memÜy
>

35 
	~<num”ic
>

36 
	~<s¡»am
>

37 
	~<th»ad
>

39 
	~"b’chm¬k/b’chm¬k.h
"

40 
	~"b’chm¬k_­i_š‹º®.h
"

41 
	~"check.h
"

42 
	~"commªdlšeæags.h
"

43 
	~"com¶ex™y.h
"

44 
	~"š‹º®_maüos.h
"

45 
	~"log.h
"

46 
	~"mu‹x.h
"

47 
	~"».h
"

48 
	~"¡©i¡ics.h
"

49 
	~"¡ršg_ut.h
"

50 
	~"tim”s.h
"

52 
Çme¥aû
 
	gb’chm¬k
 {

54 
	gÇme¥aû
 {

56 
cÚ¡ex´
 
	gkRªgeMuÉl›r
 = 8;

60 
cÚ¡ex´
 
size_t
 
	gkMaxFamySize
 = 100;

62 
cÚ¡ex´
 
	gkDi§bËdP»fix
[] = "DISABLED_";

65 
Çme¥aû
 
	gš‹º®
 {

73 şas 
	cB’chm¬kFam›s
 {

74 
	gpublic
:

75 
B’chm¬kFam›s
* 
G‘In¡ªû
();

78 
size_t
 
AddB’chm¬k
(
¡d
::
unique_±r
<
B’chm¬k
> 
çmy
);

81 
CË¬B’chm¬ks
();

85 
boŞ
 
FšdB’chm¬ks
(
¡d
::
¡ršg
 
»
,

86 
¡d
::
veùÜ
<
B’chm¬kIn¡ªû
>* 
b’chm¬ks
,

87 
¡d
::
o¡»am
* 
E¼
);

89 
	g´iv©e
:

90 
B’chm¬kFam›s
() {}

92 
¡d
::
veùÜ
<¡d::
unique_±r
<
B’chm¬k
>> 
çm›s_
;

93 
Mu‹x
 
	gmu‹x_
;

96 
B’chm¬kFam›s
* 
	gB’chm¬kFam›s
::
G‘In¡ªû
() {

97 
B’chm¬kFam›s
 
š¡ªû
;

98  &
	gš¡ªû
;

101 
size_t
 
	gB’chm¬kFam›s
::
AddB’chm¬k
(
¡d
::
unique_±r
<
B’chm¬k
> 
çmy
) {

102 
Mu‹xLock
 
l
(
mu‹x_
);

103 
size_t
 
	gšdex
 = 
çm›s_
.
size
();

104 
	gçm›s_
.
push_back
(
¡d
::
move
(
çmy
));

105  
	gšdex
;

108 
	gB’chm¬kFam›s
::
CË¬B’chm¬ks
() {

109 
Mu‹xLock
 
l
(
mu‹x_
);

110 
	gçm›s_
.
ş—r
();

111 
	gçm›s_
.
shršk_to_f™
();

114 
boŞ
 
	gB’chm¬kFam›s
::
FšdB’chm¬ks
(

115 
¡d
::
¡ršg
 
¥ec
, std::
veùÜ
<
B’chm¬kIn¡ªû
>* 
b’chm¬ks
,

116 
¡d
::
o¡»am
* 
E¼SŒ—m
) {

117 
BM_CHECK
(
E¼SŒ—m
);

118 auto& 
	gE¼
 = *
E¼SŒ—m
;

120 
	g¡d
::
¡ršg
 
”rÜ_msg
;

121 
Regex
 
	g»
;

122 
boŞ
 
	gis_Ãg©ive_f‹r
 = 
çl£
;

123 ià(
	g¥ec
[0] == '-') {

124 
¥ec
.
»¶aû
(0, 1, "");

125 
	gis_Ãg©ive_f‹r
 = 
Œue
;

127 ià(!
	g»
.
In™
(
¥ec
, &
”rÜ_msg
)) {

128 
	gE¼
 << "Could‚Ù compb’chm¬k„e: " << 
	g”rÜ_msg
 << 
	g¡d
::
’dl
;

129  
	gçl£
;

133 cÚ¡ 
	g¡d
::
veùÜ
<> 
Úe_th»ad
 = {1};

135 
	gÃxt_çmy_šdex
 = 0;

137 
Mu‹xLock
 
l
(
mu‹x_
);

138 
	g¡d
::
unique_±r
<
B’chm¬k
>& 
çmy
 : 
çm›s_
) {

139 
çmy_šdex
 = 
Ãxt_çmy_šdex
;

140 
	g³r_çmy_š¡ªû_šdex
 = 0;

143 ià(!
	gçmy
) ;

145 ià(
	gçmy
->
ArgsCÁ
() == -1) {

146 
çmy
->
Args
({});

148 cÚ¡ 
	g¡d
::
veùÜ
<>* 
th»ad_couÁs
 =

149 (
çmy
->
th»ad_couÁs_
.
em±y
()

150 ? &
Úe_th»ad


151 : &
¡©ic_ÿ¡
<cÚ¡ 
¡d
::
veùÜ
<>&>(
çmy
->
th»ad_couÁs_
));

152 cÚ¡ 
size_t
 
	gçmy_size
 = 
çmy
->
¬gs_
.
size
(è* 
th»ad_couÁs
->size();

155 ià(
	gçmy_size
 > 
	gkMaxFamySize
) {

156 
	gE¼
 << "Thnumb” oàšput i v”y†¬ge. " << 
	gçmy
->
	gÇme_


157 << " wÈb»³©ed‡ˆËa¡ " << 
	gçmy_size
 << "imes.\n";

162 ià(
	g¥ec
 =ğ"."è
b’chm¬ks
->
»£rve
(b’chm¬ks->
size
(è+ 
çmy_size
);

164 autØcÚ¡& 
	g¬gs
 : 
çmy
->
¬gs_
) {

165 
num_th»ads
 : *
th»ad_couÁs
) {

166 
B’chm¬kIn¡ªû
 
š¡ªû
(
çmy
.
g‘
(), 
çmy_šdex
,

167 
³r_çmy_š¡ªû_šdex
, 
¬gs
,

168 
num_th»ads
);

170 cÚ¡‡utØ
	gfuÎ_Çme
 = 
š¡ªû
.
Çme
().
¡r
();

171 ià(
	gfuÎ_Çme
.
rfšd
(
kDi§bËdP»fix
, 0) != 0 &&

172 ((
»
.
M©ch
(
fuÎ_Çme
è&& !
is_Ãg©ive_f‹r
) ||

173 (!
»
.
M©ch
(
fuÎ_Çme
è&& 
is_Ãg©ive_f‹r
))) {

174 
b’chm¬ks
->
push_back
(
¡d
::
move
(
š¡ªû
));

176 ++
	g³r_çmy_š¡ªû_šdex
;

180 ià(
	gÃxt_çmy_šdex
 =ğ
çmy_šdex
è++
Ãxt_çmy_šdex
;

185  
	gŒue
;

188 
B’chm¬k
* 
Regi¡”B’chm¬kIÁ”Çl
(B’chm¬k* 
b’ch
) {

189 
	g¡d
::
unique_±r
<
B’chm¬k
> 
b’ch_±r
(
b’ch
);

190 
B’chm¬kFam›s
* 
	gçm›s
 = B’chm¬kFam›s::
G‘In¡ªû
();

191 
	gçm›s
->
AddB’chm¬k
(
¡d
::
move
(
b’ch_±r
));

192  
	gb’ch
;

197 
boŞ
 
FšdB’chm¬ksIÁ”Çl
(cÚ¡ 
¡d
::
¡ršg
& 
»
,

198 
¡d
::
veùÜ
<
B’chm¬kIn¡ªû
>* 
b’chm¬ks
,

199 
¡d
::
o¡»am
* 
E¼
) {

200  
B’chm¬kFam›s
::
G‘In¡ªû
()->
FšdB’chm¬ks
(
»
, 
b’chm¬ks
, 
E¼
);

207 
	gB’chm¬k
::
B’chm¬k
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
)

208 : 
Çme_
(
Çme
),

209 
agg»g©iÚ_»pÜt_mode_
(
ARM_Un¥ecif›d
),

210 
time_un™_
(
G‘DeçuÉTimeUn™
()),

211 
u£_deçuÉ_time_un™_
(
Œue
),

212 
¿nge_muÉl›r_
(
kRªgeMuÉl›r
),

213 
mš_time_
(0),

214 
mš_w¬mup_time_
(0),

215 
™”©iÚs_
(0),

216 
»³t™iÚs_
(0),

217 
m—su»_´oûss_ıu_time_
(
çl£
),

218 
u£_»®_time_
(
çl£
),

219 
u£_mªu®_time_
(
çl£
),

220 
com¶ex™y_
(
oNÚe
),

221 
com¶ex™y_Ïmbda_
(
nuÎ±r
),

222 
£tup_
(
nuÎ±r
),

223 
‹¬down_
(
nuÎ±r
) {

224 
Compu‹Sti¡ics
("m—n", 
Sti¡icsM—n
);

225 
Compu‹Sti¡ics
("medŸn", 
Sti¡icsMedŸn
);

226 
Compu‹Sti¡ics
("¡ddev", 
Sti¡icsStdDev
);

227 
Compu‹Sti¡ics
("cv", 
Sti¡icsCV
, 
kP”ûÁage
);

230 
	gB’chm¬k
::~
B’chm¬k
() {}

232 
B’chm¬k
* B’chm¬k::
Name
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
) {

233 
S‘Name
(
Çme
);

234  
	gthis
;

237 
B’chm¬k
* 
	gB’chm¬k
::
Arg
(
št64_t
 
x
) {

238 
BM_CHECK
(
ArgsCÁ
() == -1 || ArgsCnt() == 1);

239 
	g¬gs_
.
push_back
({
x
});

240  
	gthis
;

243 
B’chm¬k
* 
	gB’chm¬k
::
Un™
(
TimeUn™
 
un™
) {

244 
time_un™_
 = 
un™
;

245 
	gu£_deçuÉ_time_un™_
 = 
çl£
;

246  
	gthis
;

249 
B’chm¬k
* 
	gB’chm¬k
::
Rªge
(
št64_t
 
¡¬t
, iÁ64_ˆ
lim™
) {

250 
BM_CHECK
(
ArgsCÁ
() == -1 || ArgsCnt() == 1);

251 
	g¡d
::
veùÜ
<
št64_t
> 
¬gli¡
;

252 
AddRªge
(&
¬gli¡
, 
¡¬t
, 
lim™
, 
¿nge_muÉl›r_
);

254 
št64_t
 
	gi
 : 
¬gli¡
) {

255 
¬gs_
.
push_back
({
i
});

257  
	gthis
;

260 
B’chm¬k
* 
	gB’chm¬k
::
Rªges
(

261 cÚ¡ 
¡d
::
veùÜ
<¡d::
·œ
<
št64_t
, iÁ64_t>>& 
¿nges
) {

262 
BM_CHECK
(
ArgsCÁ
(è=ğ-1 || ArgsCÁ(è=ğ
¡©ic_ÿ¡
<>(
¿nges
.
size
()));

263 
	g¡d
::
veùÜ
<
¡d
::veùÜ<
št64_t
>> 
¬gli¡s
(
¿nges
.
size
());

264 
	g¡d
::
size_t
 
i
 = 0; 
	gi
 < 
	g¿nges
.
size
(); i++) {

265 
AddRªge
(&
¬gli¡s
[
i
], 
¿nges
[i].
fœ¡
,„ªges[i].
£cÚd
,

266 
¿nge_muÉl›r_
);

269 
ArgsProduù
(
¬gli¡s
);

271  
	gthis
;

274 
B’chm¬k
* 
	gB’chm¬k
::
ArgsProduù
(

275 cÚ¡ 
¡d
::
veùÜ
<¡d::veùÜ<
št64_t
>>& 
¬gli¡s
) {

276 
BM_CHECK
(
ArgsCÁ
(è=ğ-1 || ArgsCÁ(è=ğ
¡©ic_ÿ¡
<>(
¬gli¡s
.
size
()));

278 
	g¡d
::
veùÜ
<
¡d
::
size_t
> 
šdiûs
(
¬gli¡s
.
size
());

279 cÚ¡ 
	g¡d
::
size_t
 
tÙ®
 = 
¡d
::
accumuÏ‹
(

280 
¡d
::
begš
(
¬gli¡s
), std::
’d
×rgli¡s), std::
size_t
{1},

281 [](cÚ¡ 
¡d
::
size_t
 
»s
, cÚ¡ std::
veùÜ
<
št64_t
>& 
¬gli¡
) {

282  
»s
 * 
¬gli¡
.
size
();

284 
	g¡d
::
veùÜ
<
št64_t
> 
¬gs
;

285 
	g¬gs
.
»£rve
(
¬gli¡s
.
size
());

286 
	g¡d
::
size_t
 
i
 = 0; 
	gi
 < 
	gtÙ®
; i++) {

287 
	g¡d
::
size_t
 
¬g
 = 0; 
	g¬g
 < 
	g¬gli¡s
.
size
();‡rg++) {

288 
	g¬gs
.
push_back
(
¬gli¡s
[
¬g
][
šdiûs
[arg]]);

290 
	g¬gs_
.
push_back
(
¬gs
);

291 
	g¬gs
.
ş—r
();

293 
	g¡d
::
size_t
 
¬g
 = 0;

295 
	gšdiûs
[
¬g
] = (
šdiûs
[¬g] + 1è% 
¬gli¡s
[¬g].
size
();

296 } 
	gšdiûs
[
¬g
++] =ğ0 &&‡rg < 
¬gli¡s
.
size
());

299  
	gthis
;

302 
B’chm¬k
* 
	gB’chm¬k
::
ArgName
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
) {

303 
BM_CHECK
(
ArgsCÁ
() == -1 || ArgsCnt() == 1);

304 
	g¬g_Çmes_
 = {
Çme
};

305  
	gthis
;

308 
B’chm¬k
* 
	gB’chm¬k
::
ArgNames
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
>& 
Çmes
) {

309 
BM_CHECK
(
ArgsCÁ
(è=ğ-1 || ArgsCÁ(è=ğ
¡©ic_ÿ¡
<>(
Çmes
.
size
()));

310 
	g¬g_Çmes_
 = 
Çmes
;

311  
	gthis
;

314 
B’chm¬k
* 
	gB’chm¬k
::
D’£Rªge
(
št64_t
 
¡¬t
, iÁ64_ˆ
lim™
, 
¡•
) {

315 
BM_CHECK
(
ArgsCÁ
() == -1 || ArgsCnt() == 1);

316 
BM_CHECK_LE
(
¡¬t
, 
lim™
);

317 
št64_t
 
	g¬g
 = 
¡¬t
;‡rg <ğ
lim™
;‡rg +ğ
¡•
) {

318 
¬gs_
.
push_back
({
¬g
});

320  
	gthis
;

323 
B’chm¬k
* 
	gB’chm¬k
::
Args
(cÚ¡ 
¡d
::
veùÜ
<
št64_t
>& 
¬gs
) {

324 
BM_CHECK
(
ArgsCÁ
(è=ğ-1 || ArgsCÁ(è=ğ
¡©ic_ÿ¡
<>(
¬gs
.
size
()));

325 
	g¬gs_
.
push_back
(
¬gs
);

326  
	gthis
;

329 
B’chm¬k
* 
	gB’chm¬k
::
Aµly
((*
cu¡om_¬gum’ts
)(B’chm¬k* 
b’chm¬k
)) {

330 
cu¡om_¬gum’ts
(
this
);

331  
	gthis
;

334 
B’chm¬k
* 
	gB’chm¬k
::
S‘up
((*
£tup
)(cÚ¡ 
b’chm¬k
::
S‹
&)) {

335 
BM_CHECK
(
£tup
 !ğ
nuÎ±r
);

336 
	g£tup_
 = 
£tup
;

337  
	gthis
;

340 
B’chm¬k
* 
	gB’chm¬k
::
T—rdown
((*
‹¬down
)(cÚ¡ 
b’chm¬k
::
S‹
&)) {

341 
BM_CHECK
(
‹¬down
 !ğ
nuÎ±r
);

342 
	g‹¬down_
 = 
‹¬down
;

343  
	gthis
;

346 
B’chm¬k
* 
	gB’chm¬k
::
RªgeMuÉl›r
(
muÉl›r
) {

347 
BM_CHECK
(
muÉl›r
 > 1);

348 
	g¿nge_muÉl›r_
 = 
muÉl›r
;

349  
	gthis
;

352 
B’chm¬k
* 
	gB’chm¬k
::
MšTime
(
t
) {

353 
BM_CHECK
(
t
 > 0.0);

354 
BM_CHECK
(
™”©iÚs_
 == 0);

355 
	gmš_time_
 = 
t
;

356  
	gthis
;

359 
B’chm¬k
* 
	gB’chm¬k
::
MšW¬mUpTime
(
t
) {

360 
BM_CHECK
(
t
 >= 0.0);

361 
BM_CHECK
(
™”©iÚs_
 == 0);

362 
	gmš_w¬mup_time_
 = 
t
;

363  
	gthis
;

366 
B’chm¬k
* 
	gB’chm¬k
::
I‹¿tiÚs
(
I‹¿tiÚCouÁ
 
n
) {

367 
BM_CHECK
(
n
 > 0);

368 
BM_CHECK
(
IsZ”o
(
mš_time_
));

369 
BM_CHECK
(
IsZ”o
(
mš_w¬mup_time_
));

370 
	g™”©iÚs_
 = 
n
;

371  
	gthis
;

374 
B’chm¬k
* 
	gB’chm¬k
::
R•‘™iÚs
(
n
) {

375 
BM_CHECK
(
n
 > 0);

376 
	g»³t™iÚs_
 = 
n
;

377  
	gthis
;

380 
B’chm¬k
* 
	gB’chm¬k
::
R•ÜtAgg»g©esOÆy
(
boŞ
 
v®ue
) {

381 
agg»g©iÚ_»pÜt_mode_
 = 
v®ue
 ? 
ARM_R•ÜtAgg»g©esOÆy
 : 
ARM_DeçuÉ
;

382  
	gthis
;

385 
B’chm¬k
* 
	gB’chm¬k
::
Di¥ÏyAgg»g©esOÆy
(
boŞ
 
v®ue
) {

387 
agg»g©iÚ_»pÜt_mode_
 = 
¡©ic_ÿ¡
<
Agg»g©iÚR•ÜtMode
>(

388 
agg»g©iÚ_»pÜt_mode_
 | 
ARM_DeçuÉ
);

390 ià(
	gv®ue
) {

391 
	gagg»g©iÚ_»pÜt_mode_
 = 
¡©ic_ÿ¡
<
Agg»g©iÚR•ÜtMode
>(

392 
agg»g©iÚ_»pÜt_mode_
 | 
ARM_Di¥ÏyR•ÜtAgg»g©esOÆy
);

394 
	gagg»g©iÚ_»pÜt_mode_
 = 
¡©ic_ÿ¡
<
Agg»g©iÚR•ÜtMode
>(

395 
agg»g©iÚ_»pÜt_mode_
 & ~
ARM_Di¥ÏyR•ÜtAgg»g©esOÆy
);

398  
	gthis
;

401 
B’chm¬k
* 
	gB’chm¬k
::
M—su»ProûssCPUTime
() {

403 
m—su»_´oûss_ıu_time_
 = 
Œue
;

404  
	gthis
;

407 
B’chm¬k
* 
	gB’chm¬k
::
U£R—lTime
() {

408 
BM_CHECK
(!
u£_mªu®_time_
)

410 
	gu£_»®_time_
 = 
Œue
;

411  
	gthis
;

414 
B’chm¬k
* 
	gB’chm¬k
::
U£Mªu®Time
() {

415 
BM_CHECK
(!
u£_»®_time_
)

417 
	gu£_mªu®_time_
 = 
Œue
;

418  
	gthis
;

421 
B’chm¬k
* 
	gB’chm¬k
::
Com¶ex™y
(
BigO
 
com¶ex™y
) {

422 
com¶ex™y_
 = 
com¶ex™y
;

423  
	gthis
;

426 
B’chm¬k
* 
	gB’chm¬k
::
Com¶ex™y
(
BigOFunc
* 
com¶ex™y
) {

427 
com¶ex™y_Ïmbda_
 = 
com¶ex™y
;

428 
	gcom¶ex™y_
 = 
oLambda
;

429  
	gthis
;

432 
B’chm¬k
* 
	gB’chm¬k
::
Compu‹Sti¡ics
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
,

433 
Sti¡icsFunc
* 
¡©i¡ics
,

434 
Sti¡icUn™
 
un™
) {

435 
	g¡©i¡ics_
.
em¶aû_back
(
Çme
, 
¡©i¡ics
, 
un™
);

436  
	gthis
;

439 
B’chm¬k
* 
	gB’chm¬k
::
Th»ads
(
t
) {

440 
BM_CHECK_GT
(
t
, 0);

441 
	gth»ad_couÁs_
.
push_back
(
t
);

442  
	gthis
;

445 
B’chm¬k
* 
	gB’chm¬k
::
Th»adRªge
(
mš_th»ads
, 
max_th»ads
) {

446 
BM_CHECK_GT
(
mš_th»ads
, 0);

447 
BM_CHECK_GE
(
max_th»ads
, 
mš_th»ads
);

449 
AddRªge
(&
th»ad_couÁs_
, 
mš_th»ads
, 
max_th»ads
, 2);

450  
	gthis
;

453 
B’chm¬k
* 
	gB’chm¬k
::
D’£Th»adRªge
(
mš_th»ads
, 
max_th»ads
,

454 
¡ride
) {

455 
BM_CHECK_GT
(
mš_th»ads
, 0);

456 
BM_CHECK_GE
(
max_th»ads
, 
mš_th»ads
);

457 
BM_CHECK_GE
(
¡ride
, 1);

459 autØ
	gi
 = 
mš_th»ads
; i < 
	gmax_th»ads
; i +ğ
¡ride
) {

460 
th»ad_couÁs_
.
push_back
(
i
);

462 
	gth»ad_couÁs_
.
push_back
(
max_th»ads
);

463  
	gthis
;

466 
B’chm¬k
* 
	gB’chm¬k
::
Th»adP”Cpu
() {

467 
th»ad_couÁs_
.
push_back
(
CPUInfo
::
G‘
().
num_ıus
);

468  
	gthis
;

471 
	gB’chm¬k
::
S‘Name
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
è{ 
Çme_
 =‚ame; }

473 cÚ¡ * 
	gB’chm¬k
::
G‘Name
(ècÚ¡ {  
Çme_
.
c_¡r
(); }

475 
	gB’chm¬k
::
ArgsCÁ
() const {

476 ià(
¬gs_
.
em±y
()) {

477 ià(
¬g_Çmes_
.
em±y
())  -1;

478  
	g¡©ic_ÿ¡
<>(
	g¬g_Çmes_
.
size
());

480  
	g¡©ic_ÿ¡
<>(
	g¬gs_
.
äÚt
().
size
());

483 cÚ¡ * 
	gB’chm¬k
::
G‘ArgName
(
¬g
) const {

484 
BM_CHECK_GE
(
¬g
, 0);

485 
BM_CHECK_LT
(
¬g
, 
¡©ic_ÿ¡
<>(
¬g_Çmes_
.
size
()));

486  
	g¬g_Çmes_
[
¬g
].
c_¡r
();

489 
TimeUn™
 
	gB’chm¬k
::
G‘TimeUn™
() const {

490  
u£_deçuÉ_time_un™_
 ? 
G‘DeçuÉTimeUn™
(è: 
time_un™_
;

497 
	gFunùiÚB’chm¬k
::
Run
(
S‹
& 
¡
è{ 
func_
(st); }

501 
	$CË¬Regi¡”edB’chm¬ks
() {

502 
š‹º®
::
B’chm¬kFam›s
::
	`G‘In¡ªû
()->
	`CË¬B’chm¬ks
();

503 
	}
}

505 
	g¡d
::
veùÜ
<
št64_t
> 
	$C»©eRªge
(
št64_t
 
lo
, iÁ64_ˆ
hi
, 
muÉi
) {

506 
¡d
::
veùÜ
<
št64_t
> 
¬gs
;

507 
š‹º®
::
	`AddRªge
(&
¬gs
, 
lo
, 
hi
, 
muÉi
);

508  
¬gs
;

509 
	}
}

511 
	g¡d
::
veùÜ
<
št64_t
> 
	$C»©eD’£Rªge
(
št64_t
 
¡¬t
, iÁ64_ˆ
lim™
, 
¡•
) {

512 
	`BM_CHECK_LE
(
¡¬t
, 
lim™
);

513 
¡d
::
veùÜ
<
št64_t
> 
¬gs
;

514 
št64_t
 
¬g
 = 
¡¬t
;‡rg <ğ
lim™
;‡rg +ğ
¡•
) {

515 
¬gs
.
	`push_back
(
¬g
);

517  
¬gs
;

518 
	}
}

	@third_party/benchmark/src/benchmark_register.h

1 #iâdeà
BENCHMARK_REGISTER_H


2 
	#BENCHMARK_REGISTER_H


	)

4 
	~<®gÜ™hm
>

5 
	~<lim™s
>

6 
	~<veùÜ
>

8 
	~"check.h
"

10 
Çme¥aû
 
	gb’chm¬k
 {

11 
Çme¥aû
 
	gš‹º®
 {

15 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

16 
ty³Çme
 
	g¡d
::
veùÜ
<
T
>::
™”©Ü
 
AddPow”s
(
¡d
::veùÜ<T>* 
d¡
, T 
lo
, T 
hi
,

17 
muÉ
) {

18 
BM_CHECK_GE
(
lo
, 0);

19 
BM_CHECK_GE
(
hi
, 
lo
);

20 
BM_CHECK_GE
(
muÉ
, 2);

22 cÚ¡ 
size_t
 
	g¡¬t_off£t
 = 
d¡
->
size
();

24 cÚ¡ 
T
 
	gkmax
 = 
¡d
::
num”ic_lim™s
<T>::
max
();

27 
T
 
	gi
 = 
¡©ic_ÿ¡
<T>(1); i <ğ
hi
; i *ğ¡©ic_ÿ¡<T>(
muÉ
)) {

28 ià(
i
 >ğ
lo
) {

29 
d¡
->
push_back
(
i
);

33 ià(
	gi
 > 
	gkmax
 / 
	gmuÉ
) ;

36  
	gd¡
->
begš
(è+ 
	g¡©ic_ÿ¡
<>(
	g¡¬t_off£t
);

39 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

40 
AddNeg©edPow”s
(
¡d
::
veùÜ
<
T
>* 
d¡
, T 
lo
, T 
hi
, 
muÉ
) {

42 
BM_CHECK_GT
(
lo
, 
¡d
::
num”ic_lim™s
<
T
>::
mš
());

43 
BM_CHECK_GT
(
hi
, 
¡d
::
num”ic_lim™s
<
T
>::
mš
());

44 
BM_CHECK_GE
(
hi
, 
lo
);

45 
BM_CHECK_LE
(
hi
, 0);

50 cÚ¡‡utØ
	glo_com¶em’t
 = 
¡©ic_ÿ¡
<
T
>(-
lo
);

51 cÚ¡‡utØ
	ghi_com¶em’t
 = 
¡©ic_ÿ¡
<
T
>(-
hi
);

53 cÚ¡‡utØ
	g™
 = 
AddPow”s
(
d¡
, 
hi_com¶em’t
, 
lo_com¶em’t
, 
muÉ
);

55 
	g¡d
::
fÜ_—ch
(
™
, 
d¡
->
’d
(), [](
T
& 
t
) { *= -1; });

56 
	g¡d
::
»v”£
(
™
, 
d¡
->
’d
());

59 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

60 
AddRªge
(
¡d
::
veùÜ
<
T
>* 
d¡
, T 
lo
, T 
hi
, 
muÉ
) {

61 
¡©ic_as£¹
(
¡d
::
is_š‹g¿l
<
T
>::
v®ue
 && std::
is_sigÃd
<T>::value,

64 
BM_CHECK_GE
(
hi
, 
lo
);

65 
BM_CHECK_GE
(
muÉ
, 2);

68 
	gd¡
->
push_back
(
lo
);

73 ià(
	glo
 =ğ
hi
) ;

76 ià(
	glo
 + 1 =ğ
hi
) {

77 
d¡
->
push_back
(
hi
);

82 cÚ¡‡utØ
	glo_šÃr
 = 
¡©ic_ÿ¡
<
T
>(
lo
 + 1);

83 cÚ¡‡utØ
	ghi_šÃr
 = 
¡©ic_ÿ¡
<
T
>(
hi
 - 1);

86 ià(
	glo_šÃr
 < 0) {

87 
AddNeg©edPow”s
(
d¡
, 
lo_šÃr
, 
¡d
::
mš
(
hi_šÃr
, 
T
{-1}), 
muÉ
);

91 ià(
	glo
 < 0 && 
	ghi
 >= 0) {

92 
d¡
->
push_back
(0);

96 ià(
	ghi_šÃr
 > 0) {

97 
AddPow”s
(
d¡
, 
¡d
::
max
(
lo_šÃr
, 
T
{1}), 
hi_šÃr
, 
muÉ
);

101 ià(
	ghi
 !ğ
d¡
->
back
()) {

102 
d¡
->
push_back
(
hi
);

	@third_party/benchmark/src/benchmark_runner.cc

15 
	~"b’chm¬k_ruÂ”.h
"

17 
	~"b’chm¬k/b’chm¬k.h
"

18 
	~"b’chm¬k_­i_š‹º®.h
"

19 
	~"š‹º®_maüos.h
"

21 #iâdeà
BENCHMARK_OS_WINDOWS


22 #ià!
defšed
(
BENCHMARK_OS_FUCHSIA
è&& !defšed(
BENCHMARK_OS_QURT
)

23 
	~<sys/»sourû.h
>

25 
	~<sys/time.h
>

26 
	~<uni¡d.h
>

29 
	~<®gÜ™hm
>

30 
	~<©omic
>

31 
	~<şim™s
>

32 
	~<cm©h
>

33 
	~<cÚd™iÚ_v¬ŸbË
>

34 
	~<c¡dio
>

35 
	~<c¡dlib
>

36 
	~<f¡»am
>

37 
	~<io¡»am
>

38 
	~<lim™s
>

39 
	~<memÜy
>

40 
	~<¡ršg
>

41 
	~<th»ad
>

42 
	~<ut™y
>

44 
	~"check.h
"

45 
	~"cŞÜ´št.h
"

46 
	~"commªdlšeæags.h
"

47 
	~"com¶ex™y.h
"

48 
	~"couÁ”.h
"

49 
	~"š‹º®_maüos.h
"

50 
	~"log.h
"

51 
	~"mu‹x.h
"

52 
	~"³rf_couÁ”s.h
"

53 
	~"».h
"

54 
	~"¡©i¡ics.h
"

55 
	~"¡ršg_ut.h
"

56 
	~"th»ad_mªag”.h
"

57 
	~"th»ad_tim”.h
"

59 
Çme¥aû
 
	gb’chm¬k
 {

61 
Çme¥aû
 
	gš‹º®
 {

63 
MemÜyMªag”
* 
	gmemÜy_mªag”
 = 
nuÎ±r
;

65 
	gÇme¥aû
 {

67 
cÚ¡ex´
 
I‹¿tiÚCouÁ
 
	gkMaxI‹¿tiÚs
 = 1000000000;

68 cÚ¡ 
	gkDeçuÉMšTime
 =

69 
¡d
::
¡¹od
(::
b’chm¬k
::
kDeçuÉMšTimeSŒ
, 
nuÎ±r
);

71 
	gB’chm¬kR•Ü‹r
::
Run
 
C»©eRunR•Üt
(

72 cÚ¡ 
b’chm¬k
::
š‹º®
::
B’chm¬kIn¡ªû
& 
b
,

73 cÚ¡ 
š‹º®
::
Th»adMªag”
::
ResuÉ
& 
»suÉs
,

74 
I‹¿tiÚCouÁ
 
memÜy_™”©iÚs
,

75 cÚ¡ 
MemÜyMªag”
::
ResuÉ
* 
memÜy_»suÉ
, 
£cÚds
,

76 
št64_t
 
»³t™iÚ_šdex
, iÁ64_ˆ
»³©s
) {

78 
	gB’chm¬kR•Ü‹r
::
Run
 
»pÜt
;

80 
	g»pÜt
.
	grun_Çme
 = 
b
.
Çme
();

81 
	g»pÜt
.
	gçmy_šdex
 = 
b
.
çmy_šdex
();

82 
	g»pÜt
.
	g³r_çmy_š¡ªû_šdex
 = 
b
.
³r_çmy_š¡ªû_šdex
();

83 
	g»pÜt
.
	gsk³d
 = 
»suÉs
.
sk³d_
;

84 
	g»pÜt
.
	gsk_mes§ge
 = 
»suÉs
.
sk_mes§ge_
;

85 
	g»pÜt
.
	g»pÜt_Ïb–
 = 
»suÉs
.
»pÜt_Ïb–_
;

87 
	g»pÜt
.
	g™”©iÚs
 = 
»suÉs
.
™”©iÚs
;

88 
	g»pÜt
.
	gtime_un™
 = 
b
.
time_un™
();

89 
	g»pÜt
.
	gth»ads
 = 
b
.
th»ads
();

90 
	g»pÜt
.
	g»³t™iÚ_šdex
 = 
»³t™iÚ_šdex
;

91 
	g»pÜt
.
	g»³t™iÚs
 = 
»³©s
;

93 ià(!
	g»pÜt
.
	gsk³d
) {

94 ià(
	gb
.
u£_mªu®_time
()) {

95 
	g»pÜt
.
	g»®_accumuÏ‹d_time
 = 
»suÉs
.
mªu®_time_u£d
;

97 
	g»pÜt
.
	g»®_accumuÏ‹d_time
 = 
»suÉs
.
»®_time_u£d
;

99 
	g»pÜt
.
	gıu_accumuÏ‹d_time
 = 
»suÉs
.
ıu_time_u£d
;

100 
	g»pÜt
.
	gcom¶ex™y_n
 = 
»suÉs
.
com¶ex™y_n
;

101 
	g»pÜt
.
	gcom¶ex™y
 = 
b
.
com¶ex™y
();

102 
	g»pÜt
.
	gcom¶ex™y_Ïmbda
 = 
b
.
com¶ex™y_Ïmbda
();

103 
	g»pÜt
.
	g¡©i¡ics
 = &
b
.
¡©i¡ics
();

104 
	g»pÜt
.
	gcouÁ”s
 = 
»suÉs
.
couÁ”s
;

106 ià(
	gmemÜy_™”©iÚs
 > 0) {

107 
as£¹
(
memÜy_»suÉ
 !ğ
nuÎ±r
);

108 
	g»pÜt
.
	gmemÜy_»suÉ
 = 
memÜy_»suÉ
;

109 
	g»pÜt
.
	g®locs_³r_™”
 =

110 
memÜy_™”©iÚs
 ? 
¡©ic_ÿ¡
<>(
memÜy_»suÉ
->
num_®locs
) /

111 
memÜy_™”©iÚs


115 
	gš‹º®
::
Fšish
(&
»pÜt
.
couÁ”s
, 
»suÉs
.
™”©iÚs
, 
£cÚds
,

116 
b
.
th»ads
());

118  
	g»pÜt
;

123 
RunInTh»ad
(cÚ¡ 
B’chm¬kIn¡ªû
* 
b
, 
I‹¿tiÚCouÁ
 
™”s
,

124 
th»ad_id
, 
Th»adMªag”
* 
mªag”
,

125 
P”fCouÁ”sM—su»m’t
* 
³rf_couÁ”s_m—su»m’t
) {

126 
	gš‹º®
::
Th»adTim”
 
tim”
(

127 
b
->
m—su»_´oûss_ıu_time
()

128 ? 
š‹º®
::
Th»adTim”
::
C»©eProûssCpuTime
()

129 : 
š‹º®
::
Th»adTim”
::
C»©e
());

131 
S‹
 
	g¡
 =

132 
b
->
Run
(
™”s
, 
th»ad_id
, &
tim”
, 
mªag”
, 
³rf_couÁ”s_m—su»m’t
);

133 
BM_CHECK
(
¡
.
sk³d
(è|| st.
™”©iÚs
(è>ğ¡.
max_™”©iÚs
)

136 
Mu‹xLock
 
l
(
mªag”
->
G‘B’chm¬kMu‹x
());

137 
	gš‹º®
::
Th»adMªag”
::
ResuÉ
& 
»suÉs
 = 
mªag”
->results;

138 
	g»suÉs
.
	g™”©iÚs
 +ğ
¡
.
™”©iÚs
();

139 
	g»suÉs
.
	gıu_time_u£d
 +ğ
tim”
.
ıu_time_u£d
();

140 
	g»suÉs
.
	g»®_time_u£d
 +ğ
tim”
.
»®_time_u£d
();

141 
	g»suÉs
.
	gmªu®_time_u£d
 +ğ
tim”
.
mªu®_time_u£d
();

142 
	g»suÉs
.
	gcom¶ex™y_n
 +ğ
¡
.
com¶ex™y_Ëngth_n
();

143 
	gš‹º®
::
Inüem’t
(&
»suÉs
.
couÁ”s
, 
¡
.counters);

145 
	gmªag”
->
NÙifyTh»adCom¶‘e
();

148 
Compu‹MšTime
(cÚ¡ 
b’chm¬k
::
š‹º®
::
B’chm¬kIn¡ªû
& 
b
,

149 cÚ¡ 
B’chTimeTy³
& 
™”s_Ü_time
) {

150 ià(!
IsZ”o
(
b
.
mš_time
())è 
	gb
.min_time();

153 ià(
	g™”s_Ü_time
.
	gg
 =ğ
B’chTimeTy³
::
ITERS
è 
kDeçuÉMšTime
;

155  
	g™”s_Ü_time
.
	gtime
;

158 
I‹¿tiÚCouÁ
 
Compu‹I‹rs
(cÚ¡ 
b’chm¬k
::
š‹º®
::
B’chm¬kIn¡ªû
& 
b
,

159 cÚ¡ 
B’chTimeTy³
& 
™”s_Ü_time
) {

160 ià(
	gb
.
™”©iÚs
(è!ğ0è 
b
.iterations();

164 
BM_CHECK
(
™”s_Ü_time
.
g
 =ğ
B’chTimeTy³
::
ITERS
);

165  
	g™”s_Ü_time
.
	g™”s
;

170 
B’chTimeTy³
 
P¬£B’chMšTime
(cÚ¡ 
¡d
::
¡ršg
& 
v®ue
) {

171 
B’chTimeTy³
 
»t
;

173 ià(
	gv®ue
.
em±y
()) {

174 
	g»t
.
	gg
 = 
B’chTimeTy³
::
TIME
;

175 
	g»t
.
	gtime
 = 0.0;

176  
	g»t
;

179 ià(
	gv®ue
.
back
() == 'x') {

180 * 
p_’d
;

182 
	g”ºo
 = 0;

183 
I‹¿tiÚCouÁ
 
	gnum_™”s
 = 
¡d
::
¡¹Ş
(
v®ue
.
c_¡r
(), &
p_’d
, 10);

187 
BM_CHECK
(
”ºo
 =ğ0 && 
p_’d
 !ğ
nuÎ±r
 && *p_end == 'x')

188 << "M®fÜmed i‹r v®u·s£dØ--b’chm¬k_mš_time: `" << 
v®ue


191 
	g»t
.
	gg
 = 
B’chTimeTy³
::
ITERS
;

192 
	g»t
.
	g™”s
 = 
num_™”s
;

193  
	g»t
;

196 
boŞ
 
	ghas_suffix
 = 
v®ue
.
back
() == 's';

197 ià(!
	ghas_suffix
) {

198 
BM_VLOG
(0) << "Value…assedo --benchmark_min_time should have‡ suffix. "

202 * 
	gp_’d
;

204 
	g”ºo
 = 0;

205 
	gmš_time
 = 
¡d
::
¡¹od
(
v®ue
.
c_¡r
(), &
p_’d
);

209 
BM_CHECK
(
”ºo
 =ğ0 && 
p_’d
 !ğ
nuÎ±r
 &&

210 ((
has_suffix
 && *
p_’d
 == 's') || *p_end == '\0'))

211 << "M®fÜmed secÚd v®u·s£dØ--b’chm¬k_mš_time: `" << 
v®ue


214 
	g»t
.
	gg
 = 
B’chTimeTy³
::
TIME
;

215 
	g»t
.
	gtime
 = 
mš_time
;

217  
	g»t
;

220 
	gB’chm¬kRuÂ”
::
B’chm¬kRuÂ”
(

221 cÚ¡ 
b’chm¬k
::
š‹º®
::
B’chm¬kIn¡ªû
& 
b_
,

222 
P”fCouÁ”sM—su»m’t
* 
pcm_
,

223 
B’chm¬kR•Ü‹r
::
P”FamyRunR•Üts
* 
»pÜts_fÜ_çmy_
)

224 : 
b
(
b_
),

225 
»pÜts_fÜ_çmy
(
»pÜts_fÜ_çmy_
),

226 
·r£d_b’chtime_æag
(
P¬£B’chMšTime
(
FLAGS_b’chm¬k_mš_time
)),

227 
mš_time
(
Compu‹MšTime
(
b_
, 
·r£d_b’chtime_æag
)),

228 
mš_w¬mup_time
((!
IsZ”o
(
b
.
mš_time
()) && b.min_warmup_time() > 0.0)

229 ? 
b
.
mš_w¬mup_time
()

230 : 
FLAGS_b’chm¬k_mš_w¬mup_time
),

231 
w¬mup_dÚe
(!(
mš_w¬mup_time
 > 0.0)),

232 
»³©s
(
b
.
»³t™iÚs
() != 0 ? b.repetitions()

233 : 
FLAGS_b’chm¬k_»³t™iÚs
),

234 
has_ex¶ic™_™”©iÚ_couÁ
(
b
.
™”©iÚs
() != 0 ||

235 
·r£d_b’chtime_æag
.
g
 ==

236 
B’chTimeTy³
::
ITERS
),

237 
poŞ
(
b
.
th»ads
() - 1),

238 
™”s
(
has_ex¶ic™_™”©iÚ_couÁ


239 ? 
Compu‹I‹rs
(
b_
, 
·r£d_b’chtime_æag
)

241 
³rf_couÁ”s_m—su»m’t_±r
(
pcm_
) {

242 
	grun_»suÉs
.
	gdi¥Ïy_»pÜt_agg»g©es_Úly
 =

243 (
FLAGS_b’chm¬k_»pÜt_agg»g©es_Úly
 ||

244 
FLAGS_b’chm¬k_di¥Ïy_agg»g©es_Úly
);

245 
	grun_»suÉs
.
	gfe_»pÜt_agg»g©es_Úly
 =

246 
FLAGS_b’chm¬k_»pÜt_agg»g©es_Úly
;

247 ià(
	gb
.
agg»g©iÚ_»pÜt_mode
(è!ğ
š‹º®
::
ARM_Un¥ecif›d
) {

248 
run_»suÉs
.
di¥Ïy_»pÜt_agg»g©es_Úly
 =

249 (
b
.
agg»g©iÚ_»pÜt_mode
() &

250 
š‹º®
::
ARM_Di¥ÏyR•ÜtAgg»g©esOÆy
);

251 
	grun_»suÉs
.
	gfe_»pÜt_agg»g©es_Úly
 =

252 (
b
.
agg»g©iÚ_»pÜt_mode
(è& 
š‹º®
::
ARM_FeR•ÜtAgg»g©esOÆy
);

253 
BM_CHECK
(
FLAGS_b’chm¬k_³rf_couÁ”s
.
em±y
() ||

254 (
³rf_couÁ”s_m—su»m’t_±r
->
num_couÁ”s
() == 0))

259 
	gB’chm¬kRuÂ”
::
I‹¿tiÚResuÉs
 
B’chm¬kRuÂ”
::
DoNI‹¿tiÚs
() {

260 
BM_VLOG
(2è<< "RuÂšg " << 
b
.
Çme
().
¡r
(è<< " fÜ " << 
™”s
 << "\n";

262 
	g¡d
::
unique_±r
<
š‹º®
::
Th»adMªag”
> 
mªag”
;

263 
	gmªag”
.
»£t
(
Ãw
 
š‹º®
::
Th»adMªag”
(
b
.
th»ads
()));

266 
	g¡d
::
size_t
 
ti
 = 0; 
	gti
 < 
	gpoŞ
.
size
(); ++ti) {

267 
	gpoŞ
[
ti
] = 
¡d
::
th»ad
(&
RunInTh»ad
, &
b
, 
™”s
, 
¡©ic_ÿ¡
<>(ti + 1),

268 
mªag”
.
g‘
(), 
³rf_couÁ”s_m—su»m’t_±r
);

273 
RunInTh»ad
(&
b
, 
™”s
, 0, 
mªag”
.
g‘
(), 
³rf_couÁ”s_m—su»m’t_±r
);

276 
	gmªag”
->
Wa™FÜAÎTh»ads
();

277 
	g¡d
::
th»ad
&h»ad : 
poŞ
èth»ad.
još
();

279 
I‹¿tiÚResuÉs
 
	gi
;

282 
Mu‹xLock
 
l
(
mªag”
->
G‘B’chm¬kMu‹x
());

283 
	gi
.
	g»suÉs
 = 
mªag”
->
»suÉs
;

287 
	gmªag”
.
»£t
();

290 
	gi
.
	g»suÉs
.
	g»®_time_u£d
 /ğ
b
.
th»ads
();

291 
	gi
.
	g»suÉs
.
	gmªu®_time_u£d
 /ğ
b
.
th»ads
();

293 ià(
	gb
.
m—su»_´oûss_ıu_time
()è
	gi
.
	g»suÉs
.
	gıu_time_u£d
 /ğ
b
.
th»ads
();

295 
BM_VLOG
(2è<< "Rª iÀ" << 
	gi
.
	g»suÉs
.
	gıu_time_u£d
 << "/"

296 << 
	gi
.
	g»suÉs
.
	g»®_time_u£d
 << "\n";

300 
	gi
.
	g™”s
 = 
i
.
»suÉs
.
™”©iÚs
 / 
b
.
th»ads
();

303 
	gi
.
	g£cÚds
 = 
i
.
»suÉs
.
ıu_time_u£d
;

304 ià(
	gb
.
u£_mªu®_time
()) {

305 
	gi
.
	g£cÚds
 = 
i
.
»suÉs
.
mªu®_time_u£d
;

306 } ià(
	gb
.
u£_»®_time
()) {

307 
	gi
.
	g£cÚds
 = 
i
.
»suÉs
.
»®_time_u£d
;

310  
	gi
;

313 
I‹¿tiÚCouÁ
 
	gB’chm¬kRuÂ”
::
P»diùNumI‹rsN“ded
(

314 cÚ¡ 
I‹¿tiÚResuÉs
& 
i
) const {

317 
muÉl›r
 = 
G‘MšTimeToAµly
(è* 1.4 / 
¡d
::
max
(
i
.
£cÚds
, 1e-9);

323 cÚ¡ 
boŞ
 
	gis_signifiÿÁ
 = (
i
.
£cÚds
 / 
G‘MšTimeToAµly
()) > 0.1;

324 
	gmuÉl›r
 = 
is_signifiÿÁ
 ? 
muÉl›r
 : 10.0;

327 cÚ¡ 
I‹¿tiÚCouÁ
 
	gmax_Ãxt_™”s
 = 
¡©ic_ÿ¡
<IterationCount>(

328 
¡d
::
Ìound
(¡d::
max
(
muÉl›r
 * 
¡©ic_ÿ¡
<>(
i
.
™”s
),

329 
¡©ic_ÿ¡
<>(
i
.
™”s
) + 1.0)));

331 cÚ¡ 
I‹¿tiÚCouÁ
 
	gÃxt_™”s
 = 
¡d
::
mš
(
max_Ãxt_™”s
, 
kMaxI‹¿tiÚs
);

333 
BM_VLOG
(3è<< "Nexˆ™”s: " << 
	gÃxt_™”s
 << ", " << 
	gmuÉl›r
 << "\n";

334  
	gÃxt_™”s
;

337 
boŞ
 
	gB’chm¬kRuÂ”
::
ShouldR•ÜtI‹¿tiÚResuÉs
(

338 cÚ¡ 
I‹¿tiÚResuÉs
& 
i
) const {

342  
i
.
»suÉs
.
sk³d_
 ||

343 
i
.
™”s
 >ğ
kMaxI‹¿tiÚs
 ||

344 
i
.
£cÚds
 >=

345 
G‘MšTimeToAµly
() ||

349 ((
i
.
»suÉs
.
»®_time_u£d
 >ğ5 * 
G‘MšTimeToAµly
()) &&

350 !
b
.
u£_mªu®_time
());

353 
	gB’chm¬kRuÂ”
::
G‘MšTimeToAµly
() const {

359  
w¬mup_dÚe
 ? 
mš_time
 : 
mš_w¬mup_time
;

362 
	gB’chm¬kRuÂ”
::
FšishW¬mUp
(cÚ¡ 
I‹¿tiÚCouÁ
& 
i
) {

363 
w¬mup_dÚe
 = 
Œue
;

364 
	g™”s
 = 
i
;

367 
	gB’chm¬kRuÂ”
::
RunW¬mUp
() {

370 
I‹¿tiÚResuÉs
 
i_w¬mup
;

377 cÚ¡ 
I‹¿tiÚCouÁ
 
	gi_backup
 = 
™”s
;

380 
	gb
.
S‘up
();

381 
	gi_w¬mup
 = 
DoNI‹¿tiÚs
();

382 
	gb
.
T—rdown
();

384 cÚ¡ 
boŞ
 
	gfšish
 = 
ShouldR•ÜtI‹¿tiÚResuÉs
(
i_w¬mup
);

386 ià(
	gfšish
) {

387 
FšishW¬mUp
(
i_backup
);

396 
	g™”s
 = 
P»diùNumI‹rsN“ded
(
i_w¬mup
);

397 
as£¹
(
™”s
 > 
i_w¬mup
.iters &&

403 
	gB’chm¬kRuÂ”
::
DoOÃR•‘™iÚ
() {

404 
as£¹
(
HasR•—tsRemaššg
() && "Already done‡ll„epetitions?");

406 cÚ¡ 
boŞ
 
	gis_the_fœ¡_»³t™iÚ
 = 
num_»³t™iÚs_dÚe
 == 0;

413 ià(!
	gw¬mup_dÚe
è
RunW¬mUp
();

415 
I‹¿tiÚResuÉs
 
	gi
;

423 
	gb
.
S‘up
();

424 
	gi
 = 
DoNI‹¿tiÚs
();

425 
	gb
.
T—rdown
();

432 cÚ¡ 
boŞ
 
	g»suÉs_¬e_signifiÿÁ
 = !
is_the_fœ¡_»³t™iÚ
 ||

433 
has_ex¶ic™_™”©iÚ_couÁ
 ||

434 
ShouldR•ÜtI‹¿tiÚResuÉs
(
i
);

436 ià(
	g»suÉs_¬e_signifiÿÁ
) ;

441 
	g™”s
 = 
P»diùNumI‹rsN“ded
(
i
);

442 
as£¹
(
™”s
 > 
i
.iters &&

448 
	gMemÜyMªag”
::
ResuÉ
* 
memÜy_»suÉ
 = 
nuÎ±r
;

449 
I‹¿tiÚCouÁ
 
	gmemÜy_™”©iÚs
 = 0;

450 ià(
	gmemÜy_mªag”
 !ğ
nuÎ±r
) {

454 
memÜy_»suÉs
.
push_back
(
MemÜyMªag”
::
ResuÉ
());

455 
	gmemÜy_»suÉ
 = &
memÜy_»suÉs
.
back
();

458 
	gmemÜy_™”©iÚs
 = 
¡d
::
mš
<
I‹¿tiÚCouÁ
>(16, 
	g™”s
);

459 
	gmemÜy_mªag”
->
S¹
();

460 
	g¡d
::
unique_±r
<
š‹º®
::
Th»adMªag”
> 
mªag”
;

461 
	gmªag”
.
»£t
(
Ãw
 
š‹º®
::
Th»adMªag”
(1));

462 
	gb
.
S‘up
();

463 
RunInTh»ad
(&
b
, 
memÜy_™”©iÚs
, 0, 
mªag”
.
g‘
(),

464 
³rf_couÁ”s_m—su»m’t_±r
);

465 
	gmªag”
->
Wa™FÜAÎTh»ads
();

466 
	gmªag”
.
»£t
();

467 
	gb
.
T—rdown
();

468 
	gmemÜy_mªag”
->
Stİ
(*
memÜy_»suÉ
);

472 
	gB’chm¬kR•Ü‹r
::
Run
 
»pÜt
 =

473 
C»©eRunR•Üt
(
b
, 
i
.
»suÉs
, 
memÜy_™”©iÚs
, 
memÜy_»suÉ
, i.
£cÚds
,

474 
num_»³t™iÚs_dÚe
, 
»³©s
);

476 ià(
	g»pÜts_fÜ_çmy
) {

477 ++
	g»pÜts_fÜ_çmy
->
	gnum_runs_dÚe
;

478 ià(!
	g»pÜt
.
	gsk³d
è
	g»pÜts_fÜ_çmy
->
	gRuns
.
push_back
(
»pÜt
);

481 
	grun_»suÉs
.
	gnÚ_agg»g©es
.
push_back
(
»pÜt
);

483 ++
	gnum_»³t™iÚs_dÚe
;

486 
	gRunResuÉs
&& 
	gB’chm¬kRuÂ”
::
G‘ResuÉs
() {

487 
as£¹
(!
HasR•—tsRemaššg
() && "Did‚ot„un‡ll„epetitions yet?");

490 
	grun_»suÉs
.
	gagg»g©es_Úly
 = 
Compu‹Sts
(
run_»suÉs
.
nÚ_agg»g©es
);

492  
	g¡d
::
move
(
run_»suÉs
);

	@third_party/benchmark/src/benchmark_runner.h

15 #iâdeà
BENCHMARK_RUNNER_H_


16 
	#BENCHMARK_RUNNER_H_


	)

18 
	~<th»ad
>

19 
	~<veùÜ
>

21 
	~"b’chm¬k_­i_š‹º®.h
"

22 
	~"š‹º®_maüos.h
"

23 
	~"³rf_couÁ”s.h
"

24 
	~"th»ad_mªag”.h
"

26 
Çme¥aû
 
	gb’chm¬k
 {

28 
BM_DECLARE_¡ršg
(
b’chm¬k_mš_time
);

29 
BM_DECLARE_doubË
(
b’chm¬k_mš_w¬mup_time
);

30 
BM_DECLARE_št32
(
b’chm¬k_»³t™iÚs
);

31 
BM_DECLARE_boŞ
(
b’chm¬k_»pÜt_agg»g©es_Úly
);

32 
BM_DECLARE_boŞ
(
b’chm¬k_di¥Ïy_agg»g©es_Úly
);

33 
BM_DECLARE_¡ršg
(
b’chm¬k_³rf_couÁ”s
);

35 
Çme¥aû
 
	gš‹º®
 {

37 
MemÜyMªag”
* 
memÜy_mªag”
;

39 
	sRunResuÉs
 {

40 
	g¡d
::
veùÜ
<
B’chm¬kR•Ü‹r
::
Run
> 
nÚ_agg»g©es
;

41 
	g¡d
::
veùÜ
<
B’chm¬kR•Ü‹r
::
Run
> 
agg»g©es_Úly
;

43 
boŞ
 
	gdi¥Ïy_»pÜt_agg»g©es_Úly
 = 
çl£
;

44 
boŞ
 
	gfe_»pÜt_agg»g©es_Úly
 = 
çl£
;

47 
BENCHMARK_EXPORT
 
	gB’chTimeTy³
 {

48 ’um { 
	gITERS
, 
	gTIME
 } 
	gg
;

50 
I‹¿tiÚCouÁ
 
	g™”s
;

51 
	gtime
;

55 
BENCHMARK_EXPORT


56 
B’chTimeTy³
 
P¬£B’chMšTime
(cÚ¡ 
¡d
::
¡ršg
& 
v®ue
);

58 şas 
	cB’chm¬kRuÂ”
 {

59 
	gpublic
:

60 
B’chm¬kRuÂ”
(cÚ¡ 
b’chm¬k
::
š‹º®
::
B’chm¬kIn¡ªû
& 
b_
,

61 
b’chm¬k
::
š‹º®
::
P”fCouÁ”sM—su»m’t
* 
pmc_
,

62 
B’chm¬kR•Ü‹r
::
P”FamyRunR•Üts
* 
»pÜts_fÜ_çmy
);

64 
G‘NumR•—ts
(ècÚ¡ {  
	g»³©s
; }

66 
boŞ
 
HasR•—tsRemaššg
() const {

67  
G‘NumR•—ts
(è!ğ
num_»³t™iÚs_dÚe
;

70 
DoOÃR•‘™iÚ
();

72 
	gRunResuÉs
&& 
G‘ResuÉs
();

74 
	gB’chm¬kR•Ü‹r
::
P”FamyRunR•Üts
* 
G‘R•ÜtsFÜFamy
() const {

75  
»pÜts_fÜ_çmy
;

78 
G‘MšTime
(ècÚ¡ {  
	gmš_time
; }

80 
boŞ
 
HasEx¶ic™I‹rs
(ècÚ¡ {  
	ghas_ex¶ic™_™”©iÚ_couÁ
; }

82 
I‹¿tiÚCouÁ
 
G‘I‹rs
(ècÚ¡ {  
	g™”s
; }

84 
	g´iv©e
:

85 
RunResuÉs
 
run_»suÉs
;

87 cÚ¡ 
	gb’chm¬k
::
š‹º®
::
B’chm¬kIn¡ªû
& 
b
;

88 
	gB’chm¬kR•Ü‹r
::
P”FamyRunR•Üts
* 
»pÜts_fÜ_çmy
;

90 
B’chTimeTy³
 
	g·r£d_b’chtime_æag
;

91 cÚ¡ 
	gmš_time
;

92 cÚ¡ 
	gmš_w¬mup_time
;

93 
boŞ
 
	gw¬mup_dÚe
;

94 cÚ¡ 
	g»³©s
;

95 cÚ¡ 
boŞ
 
	ghas_ex¶ic™_™”©iÚ_couÁ
;

97 
	gnum_»³t™iÚs_dÚe
 = 0;

99 
	g¡d
::
veùÜ
<
¡d
::
th»ad
> 
poŞ
;

101 
	g¡d
::
veùÜ
<
MemÜyMªag”
::
ResuÉ
> 
memÜy_»suÉs
;

103 
I‹¿tiÚCouÁ
 
	g™”s
;

107 
P”fCouÁ”sM—su»m’t
* cÚ¡ 
	g³rf_couÁ”s_m—su»m’t_±r
 = 
nuÎ±r
;

109 
	sI‹¿tiÚResuÉs
 {

110 
	gš‹º®
::
Th»adMªag”
::
ResuÉ
 
»suÉs
;

111 
I‹¿tiÚCouÁ
 
	g™”s
;

112 
	g£cÚds
;

114 
I‹¿tiÚResuÉs
 
DoNI‹¿tiÚs
();

116 
I‹¿tiÚCouÁ
 
P»diùNumI‹rsN“ded
(cÚ¡ 
I‹¿tiÚResuÉs
& 
i
) const;

118 
boŞ
 
ShouldR•ÜtI‹¿tiÚResuÉs
(cÚ¡ 
I‹¿tiÚResuÉs
& 
i
) const;

120 
G‘MšTimeToAµly
() const;

122 
FšishW¬mUp
(cÚ¡ 
I‹¿tiÚCouÁ
& 
i
);

124 
RunW¬mUp
();

	@third_party/benchmark/src/check.cc

1 
	~"check.h
"

3 
Çme¥aû
 
	gb’chm¬k
 {

4 
Çme¥aû
 
	gš‹º®
 {

6 
AbÜtHªdËrT
* 
	ghªdËr
 = &
¡d
::
abÜt
;

8 
BENCHMARK_EXPORT
 
	gAbÜtHªdËrT
*& 
G‘AbÜtHªdËr
(è{  
	ghªdËr
; }

	@third_party/benchmark/src/check.h

1 #iâdeà
CHECK_H_


2 
	#CHECK_H_


	)

4 
	~<cm©h
>

5 
	~<c¡dlib
>

6 
	~<o¡»am
>

8 
	~"b’chm¬k/expÜt.h
"

9 
	~"š‹º®_maüos.h
"

10 
	~"log.h
"

12 #ià
defšed
(
__GNUC__
è|| defšed(
__şªg__
)

13 
	#BENCHMARK_NOEXCEPT
 
nÛxû±


	)

14 
	#BENCHMARK_NOEXCEPT_OP
(
x
è
	`nÛxû±
(x)

	)

15 #–ià
defšed
(
_MSC_VER
è&& !defšed(
__şªg__
)

16 #ià
_MSC_VER
 >= 1900

17 
	#BENCHMARK_NOEXCEPT
 
nÛxû±


	)

18 
	#BENCHMARK_NOEXCEPT_OP
(
x
è
	`nÛxû±
(x)

	)

20 
	#BENCHMARK_NOEXCEPT


	)

21 
	#BENCHMARK_NOEXCEPT_OP
(
x
)

	)

23 
	#__func__
 
__FUNCTION__


	)

25 
	#BENCHMARK_NOEXCEPT


	)

26 
	#BENCHMARK_NOEXCEPT_OP
(
x
)

	)

29 
Çme¥aû
 
	gb’chm¬k
 {

30 
Çme¥aû
 
	gš‹º®
 {

32 (
	gAbÜtHªdËrT
)();

34 
BENCHMARK_EXPORT


35 
	gAbÜtHªdËrT
*& 
G‘AbÜtHªdËr
();

37 
BENCHMARK_NORETURN
 
šlše
 
C®lAbÜtHªdËr
() {

38 
G‘AbÜtHªdËr
()();

39 
	g¡d
::
abÜt
();

45 şas 
	cCheckHªdËr
 {

46 
	gpublic
:

47 
CheckHªdËr
(cÚ¡ * 
check
, cÚ¡ * 
fe
, cÚ¡ * 
func
, 
lše
)

48 : 
log_
(
G‘E¼ÜLogIn¡ªû
()) {

49 
log_
 << 
fe
 << ":" << 
lše
 << ": " << 
func
 << ": Check `" << 
check


53 
	gLogTy³
& 
G‘Log
(è{  
	glog_
; }

55 #ià
defšed
(
COMPILER_MSVC
)

56 #´agm¨
w¬nšg
(
push
)

57 #´agm¨
w¬nšg
(
di§bË
 : 4722)

59 
	gBENCHMARK_NORETURN
 ~
CheckHªdËr
(è
BENCHMARK_NOEXCEPT_OP
(
çl£
) {

60 
	glog_
 << 
	g¡d
::
’dl
;

61 
C®lAbÜtHªdËr
();

63 #ià
defšed
(
COMPILER_MSVC
)

64 #´agm¨
w¬nšg
(
pİ
)

67 
	gCheckHªdËr
& 
	gİ”©Ü
=(cÚ¡ 
CheckHªdËr
&èğ
d–‘e
;

68 
CheckHªdËr
(cÚ¡ CheckHªdËr&èğ
d–‘e
;

69 
CheckHªdËr
(èğ
d–‘e
;

71 
	g´iv©e
:

72 
LogTy³
& 
log_
;

80 #iâdeà
NDEBUG


81 
	#BM_CHECK
(
b
) \

82 (
b
 ? ::
b’chm¬k
::
š‹º®
::
	`G‘NuÎLogIn¡ªû
() \

83 : ::
b’chm¬k
::
š‹º®
::
	`CheckHªdËr
(#b, 
__FILE__
, 
__func__
, 
__LINE__
) \

84 .
	`G‘Log
())

	)

86 
	#BM_CHECK
(
b
è::
b’chm¬k
::
š‹º®
::
	`G‘NuÎLogIn¡ªû
()

	)

91 
	#BM_CHECK_EQ
(
a
, 
b
è
	`BM_CHECK
(×è=ğ(b))

	)

92 
	#BM_CHECK_NE
(
a
, 
b
è
	`BM_CHECK
(×è!ğ(b))

	)

93 
	#BM_CHECK_GE
(
a
, 
b
è
	`BM_CHECK
(×è>ğ(b))

	)

94 
	#BM_CHECK_LE
(
a
, 
b
è
	`BM_CHECK
(×è<ğ(b))

	)

95 
	#BM_CHECK_GT
(
a
, 
b
è
	`BM_CHECK
(×è> (b))

	)

96 
	#BM_CHECK_LT
(
a
, 
b
è
	`BM_CHECK
(×è< (b))

	)

98 
	#BM_CHECK_FLOAT_EQ
(
a
, 
b
, 
•s
è
	`BM_CHECK
(
¡d
::
	`çbs
(×è- (b)è< (•s))

	)

99 
	#BM_CHECK_FLOAT_NE
(
a
, 
b
, 
•s
è
	`BM_CHECK
(
¡d
::
	`çbs
(×è- (b)è>ğÓps))

	)

100 
	#BM_CHECK_FLOAT_GE
(
a
, 
b
, 
•s
è
	`BM_CHECK
(×è- (bè> -Óps))

	)

101 
	#BM_CHECK_FLOAT_LE
(
a
, 
b
, 
•s
è
	`BM_CHECK
((bè- (aè> -Óps))

	)

102 
	#BM_CHECK_FLOAT_GT
(
a
, 
b
, 
•s
è
	`BM_CHECK
(×è- (bè> (•s))

	)

103 
	#BM_CHECK_FLOAT_LT
(
a
, 
b
, 
•s
è
	`BM_CHECK
((bè- (aè> (•s))

	)

	@third_party/benchmark/src/colorprint.cc

15 
	~"cŞÜ´št.h
"

17 
	~<c¡d¬g
>

18 
	~<c¡dio
>

19 
	~<c¡dlib
>

20 
	~<c¡ršg
>

21 
	~<memÜy
>

22 
	~<¡ršg
>

24 
	~"check.h
"

25 
	~"š‹º®_maüos.h
"

27 #ifdeà
BENCHMARK_OS_WINDOWS


28 
	~<io.h
>

29 
	~<wšdows.h
>

31 
	~<uni¡d.h
>

34 
Çme¥aû
 
	gb’chm¬k
 {

35 
	gÇme¥aû
 {

36 #ifdeà
BENCHMARK_OS_WINDOWS


37 
WORD
 
	tPÏtfÜmCŞÜCode
;

39 cÚ¡ * 
	tPÏtfÜmCŞÜCode
;

42 
PÏtfÜmCŞÜCode
 
G‘PÏtfÜmCŞÜCode
(
LogCŞÜ
 
cŞÜ
) {

43 #ifdeà
BENCHMARK_OS_WINDOWS


44 
	gcŞÜ
) {

45 
	gCOLOR_RED
:

46  
FOREGROUND_RED
;

47 
	gCOLOR_GREEN
:

48  
FOREGROUND_GREEN
;

49 
	gCOLOR_YELLOW
:

50  
FOREGROUND_RED
 | 
FOREGROUND_GREEN
;

51 
	gCOLOR_BLUE
:

52  
FOREGROUND_BLUE
;

53 
	gCOLOR_MAGENTA
:

54  
FOREGROUND_BLUE
 | 
FOREGROUND_RED
;

55 
	gCOLOR_CYAN
:

56  
FOREGROUND_BLUE
 | 
FOREGROUND_GREEN
;

57 
	gCOLOR_WHITE
:

62 
	gcŞÜ
) {

63 
	gCOLOR_RED
:

65 
	gCOLOR_GREEN
:

67 
	gCOLOR_YELLOW
:

69 
	gCOLOR_BLUE
:

71 
	gCOLOR_MAGENTA
:

73 
	gCOLOR_CYAN
:

75 
	gCOLOR_WHITE
:

78  
nuÎ±r
;

85 
	g¡d
::
¡ršg
 
FÜm©SŒšg
(cÚ¡ * 
msg
, 
va_li¡
 
¬gs
) {

87 
va_li¡
 
	g¬gs_ı
;

88 
va_cİy
(
¬gs_ı
, 
¬gs
);

90 
	g¡d
::
size_t
 
size
 = 256;

91 
	gloÿl_buff
[256];

92 autØ
	g»t
 = 
v¢´štf
(
loÿl_buff
, 
size
, 
msg
, 
¬gs_ı
);

94 
va_’d
(
¬gs_ı
);

97 
BM_CHECK
(
»t
 >= 0);

99 ià(
	g»t
 == 0) {

102 ià(
	g¡©ic_ÿ¡
<
	gsize_t
>(
	g»t
è< 
	gsize
) {

103  
	gloÿl_buff
;

106 
	gsize
 = 
¡©ic_ÿ¡
<
size_t
>(
»t
) + 1;

107 
	g¡d
::
unique_±r
<[]> 
buff
(
Ãw
 [
size
]);

108 
	g»t
 = 
v¢´štf
(
buff
.
g‘
(), 
size
, 
msg
, 
¬gs
);

109 
BM_CHECK
(
»t
 > 0 && (
¡©ic_ÿ¡
<
size_t
>Ô‘)è< 
size
);

110  
	gbuff
.
g‘
();

113 
	g¡d
::
¡ršg
 
FÜm©SŒšg
(cÚ¡ * 
msg
, ...) {

114 
va_li¡
 
	g¬gs
;

115 
va_¡¬t
(
¬gs
, 
msg
);

116 autØ
	gtmp
 = 
FÜm©SŒšg
(
msg
, 
¬gs
);

117 
va_’d
(
¬gs
);

118  
	gtmp
;

121 
CŞÜPrštf
(
¡d
::
o¡»am
& 
out
, 
LogCŞÜ
 
cŞÜ
, cÚ¡ * 
fmt
, ...) {

122 
va_li¡
 
	g¬gs
;

123 
va_¡¬t
(
¬gs
, 
fmt
);

124 
CŞÜPrštf
(
out
, 
cŞÜ
, 
fmt
, 
¬gs
);

125 
va_’d
(
¬gs
);

128 
CŞÜPrštf
(
¡d
::
o¡»am
& 
out
, 
LogCŞÜ
 
cŞÜ
, cÚ¡ * 
fmt
,

129 
va_li¡
 
¬gs
) {

130 #ifdeà
BENCHMARK_OS_WINDOWS


131 (()
	gout
);

133 cÚ¡ 
HANDLE
 
	g¡dout_hªdË
 = 
G‘StdHªdË
(
STD_OUTPUT_HANDLE
);

136 
CONSOLE_SCREEN_BUFFER_INFO
 
	gbufãr_šfo
;

137 
G‘CÚsŞeSü“nBufãrInfo
(
¡dout_hªdË
, &
bufãr_šfo
);

138 cÚ¡ 
WORD
 
	gŞd_cŞÜ_©Œs
 = 
bufãr_šfo
.
wA‰ribu‹s
;

143 
fæush
(
¡dout
);

144 
S‘CÚsŞeTextA‰ribu‹
(
¡dout_hªdË
,

145 
G‘PÏtfÜmCŞÜCode
(
cŞÜ
è| 
FOREGROUND_INTENSITY
);

146 
v´štf
(
fmt
, 
¬gs
);

148 
fæush
(
¡dout
);

150 
S‘CÚsŞeTextA‰ribu‹
(
¡dout_hªdË
, 
Şd_cŞÜ_©Œs
);

152 cÚ¡ * 
	gcŞÜ_code
 = 
G‘PÏtfÜmCŞÜCode
(
cŞÜ
);

153 ià(
	gcŞÜ_code
è
	gout
 << 
FÜm©SŒšg
("\033[0;3%sm", 
cŞÜ_code
);

154 
	gout
 << 
FÜm©SŒšg
(
fmt
, 
¬gs
) << "\033[m";

158 
boŞ
 
IsCŞÜT”mš®
() {

159 #ià
BENCHMARK_OS_WINDOWS


162  0 !ğ
_i§‰y
(
_f’o
(
¡dout
));

167 cÚ¡ * cÚ¡ 
	gSUPPORTED_TERM_VALUES
[] = {

174 cÚ¡ * cÚ¡ 
	g‹rm
 = 
g‘’v
("TERM");

176 
boŞ
 
	g‹rm_suµÜts_cŞÜ
 = 
çl£
;

177 cÚ¡ * 
	gÿndid©e
 : 
SUPPORTED_TERM_VALUES
) {

178 ià(
‹rm
 && 0 =ğ
¡rcmp
Ñ”m, 
ÿndid©e
)) {

179 
	g‹rm_suµÜts_cŞÜ
 = 
Œue
;

184  0 !ğ
i§‰y
(
f’o
(
¡dout
)è&& 
‹rm_suµÜts_cŞÜ
;

	@third_party/benchmark/src/colorprint.h

1 #iâdeà
BENCHMARK_COLORPRINT_H_


2 
	#BENCHMARK_COLORPRINT_H_


	)

4 
	~<c¡d¬g
>

5 
	~<io¡»am
>

6 
	~<¡ršg
>

8 
Çme¥aû
 
	gb’chm¬k
 {

9 
	eLogCŞÜ
 {

10 
	gCOLOR_DEFAULT
,

11 
	gCOLOR_RED
,

12 
	gCOLOR_GREEN
,

13 
	gCOLOR_YELLOW
,

14 
	gCOLOR_BLUE
,

15 
	gCOLOR_MAGENTA
,

16 
	gCOLOR_CYAN
,

17 
	gCOLOR_WHITE


20 
	g¡d
::
¡ršg
 
FÜm©SŒšg
(cÚ¡ * 
msg
, 
va_li¡
 
¬gs
);

21 
	g¡d
::
¡ršg
 
FÜm©SŒšg
(cÚ¡ * 
msg
, ...);

23 
CŞÜPrštf
(
¡d
::
o¡»am
& 
out
, 
LogCŞÜ
 
cŞÜ
, cÚ¡ * 
fmt
,

24 
va_li¡
 
¬gs
);

25 
CŞÜPrštf
(
¡d
::
o¡»am
& 
out
, 
LogCŞÜ
 
cŞÜ
, cÚ¡ * 
fmt
, ...);

29 
boŞ
 
IsCŞÜT”mš®
();

	@third_party/benchmark/src/commandlineflags.cc

15 
	~"commªdlšeæags.h
"

17 
	~<®gÜ™hm
>

18 
	~<cùy³
>

19 
	~<c¡dlib
>

20 
	~<c¡ršg
>

21 
	~<io¡»am
>

22 
	~<lim™s
>

23 
	~<m­
>

24 
	~<ut™y
>

26 
	~"../¤c/¡ršg_ut.h
"

28 
Çme¥aû
 
	gb’chm¬k
 {

29 
	gÇme¥aû
 {

34 
boŞ
 
P¬£IÁ32
(cÚ¡ 
¡d
::
¡ršg
& 
¤c_‹xt
, cÚ¡ * 
¡r
, 
št32_t
* 
v®ue
) {

36 * 
	g’d
 = 
nuÎ±r
;

37 cÚ¡ 
	glÚg_v®ue
 = 
¡¹Ş
(
¡r
, &
’d
, 10);

40 ià(*
	g’d
 != '\0') {

42 
¡d
::
û¼
 << 
¤c_‹xt
 << " isƒxpectedo be‡ 32-bit integer, "

43 << "buˆaùu®ly ha v®u\"" << 
¡r
 << "\".\n";

44  
	gçl£
;

48 cÚ¡ 
št32_t
 
	g»suÉ
 = 
¡©ic_ÿ¡
<št32_t>(
lÚg_v®ue
);

49 ià(
	glÚg_v®ue
 =ğ
¡d
::
num”ic_lim™s
<>::
max
() ||

50 
lÚg_v®ue
 =ğ
¡d
::
num”ic_lim™s
<>::
mš
() ||

53 
»suÉ
 !ğ
lÚg_v®ue


56 
¡d
::
û¼
 << 
¤c_‹xt
 << " isƒxpectedo be‡ 32-bit integer, "

57 << "buˆaùu®ly ha v®u\"" << 
¡r
 << "\", "

59  
	gçl£
;

62 *
	gv®ue
 = 
»suÉ
;

63  
	gŒue
;

68 
boŞ
 
P¬£DoubË
(cÚ¡ 
¡d
::
¡ršg
& 
¤c_‹xt
, cÚ¡ * 
¡r
, * 
v®ue
) {

70 * 
	g’d
 = 
nuÎ±r
;

71 cÚ¡ 
	gdoubË_v®ue
 = 
¡¹od
(
¡r
, &
’d
);

74 ià(*
	g’d
 != '\0') {

76 
¡d
::
û¼
 << 
¤c_‹xt
 << " isƒxpectedo be‡ double, "

77 << "buˆaùu®ly ha v®u\"" << 
¡r
 << "\".\n";

78  
	gçl£
;

81 *
	gv®ue
 = 
doubË_v®ue
;

82  
	gŒue
;

87 
boŞ
 
P¬£KvPaœs
(cÚ¡ 
¡d
::
¡ršg
& 
¤c_‹xt
, cÚ¡ * 
¡r
,

88 
¡d
::
m­
<¡d::
¡ršg
, std::¡ršg>* 
v®ue
) {

89 
¡d
::
m­
<¡d::
¡ršg
, 
	g¡d
::¡ršg> 
kvs
;

90 cÚ¡‡uto& 
	gkv·œ
 : 
SŒS¶™
(
¡r
, ',')) {

91 cÚ¡‡utØ
	gkv
 = 
SŒS¶™
(
kv·œ
, '=');

92 ià(
	gkv
.
size
() != 2) {

93 
¡d
::
û¼
 << 
¤c_‹xt
 << " isƒxpectedo be‡ comma-separated†ist of "

94 << "<key>=<v®ue> sŒšgs, buˆaùu®ly ha v®u\"" << 
¡r


96  
	gçl£
;

98 ià(!
	gkvs
.
em¶aû
(
kv
[0], kv[1]).
	g£cÚd
) {

99 
	g¡d
::
û¼
 << 
¤c_‹xt
 << " isƒxpectedo contain unique keys but key \""

100 << 
kv
[0] << "\" was„epeated.\n";

101  
	gçl£
;

105 *
	gv®ue
 = 
kvs
;

106  
	gŒue
;

112 
	g¡d
::
¡ršg
 
FÏgToEnvV¬
(cÚ¡ * 
æag
) {

113 cÚ¡ 
¡d
::
¡ršg
 
æag_¡r
(
æag
);

115 
	g¡d
::
¡ršg
 
’v_v¬
;

116 
size_t
 
	gi
 = 0; i !ğ
æag_¡r
.
Ëngth
(); ++i)

117 
	g’v_v¬
 +ğ
¡©ic_ÿ¡
<>(::
touµ”
(
æag_¡r
.
c_¡r
()[
i
]));

119  
	g’v_v¬
;

124 
BENCHMARK_EXPORT


125 
boŞ
 
BoŞFromEnv
(cÚ¡ * 
æag
, boŞ 
deçuÉ_v®
) {

126 cÚ¡ 
	g¡d
::
¡ršg
 
’v_v¬
 = 
FÏgToEnvV¬
(
æag
);

127 cÚ¡ * cÚ¡ 
	gv®ue_¡r
 = 
g‘’v
(
’v_v¬
.
c_¡r
());

128  
	gv®ue_¡r
 =ğ
nuÎ±r
 ? 
deçuÉ_v®
 : 
IsTruthyFÏgV®ue
(
v®ue_¡r
);

131 
BENCHMARK_EXPORT


132 
št32_t
 
IÁ32FromEnv
(cÚ¡ * 
æag
, iÁ32_ˆ
deçuÉ_v®
) {

133 cÚ¡ 
	g¡d
::
¡ršg
 
’v_v¬
 = 
FÏgToEnvV¬
(
æag
);

134 cÚ¡ * cÚ¡ 
	gv®ue_¡r
 = 
g‘’v
(
’v_v¬
.
c_¡r
());

135 
št32_t
 
	gv®ue
 = 
deçuÉ_v®
;

136 ià(
	gv®ue_¡r
 =ğ
nuÎ±r
 ||

137 !
P¬£IÁ32
(
¡d
::
¡ršg
("EnvœÚm’ˆv¬ŸbË "è+ 
’v_v¬
, 
v®ue_¡r
,

138 &
v®ue
)) {

139  
	gdeçuÉ_v®
;

141  
	gv®ue
;

144 
BENCHMARK_EXPORT


145 
DoubËFromEnv
(cÚ¡ * 
æag
, 
deçuÉ_v®
) {

146 cÚ¡ 
	g¡d
::
¡ršg
 
’v_v¬
 = 
FÏgToEnvV¬
(
æag
);

147 cÚ¡ * cÚ¡ 
	gv®ue_¡r
 = 
g‘’v
(
’v_v¬
.
c_¡r
());

148 
	gv®ue
 = 
deçuÉ_v®
;

149 ià(
	gv®ue_¡r
 =ğ
nuÎ±r
 ||

150 !
P¬£DoubË
(
¡d
::
¡ršg
("EnvœÚm’ˆv¬ŸbË "è+ 
’v_v¬
, 
v®ue_¡r
,

151 &
v®ue
)) {

152  
	gdeçuÉ_v®
;

154  
	gv®ue
;

157 
BENCHMARK_EXPORT


158 cÚ¡ * 
SŒšgFromEnv
(cÚ¡ * 
æag
, cÚ¡ * 
deçuÉ_v®
) {

159 cÚ¡ 
	g¡d
::
¡ršg
 
’v_v¬
 = 
FÏgToEnvV¬
(
æag
);

160 cÚ¡ * cÚ¡ 
	gv®ue
 = 
g‘’v
(
’v_v¬
.
c_¡r
());

161  
	gv®ue
 =ğ
nuÎ±r
 ? 
deçuÉ_v®
 : 
v®ue
;

164 
BENCHMARK_EXPORT


165 
	g¡d
::
m­
<
¡d
::
¡ršg
, std::¡ršg> 
KvPaœsFromEnv
(

166 cÚ¡ * 
æag
, 
¡d
::
m­
<¡d::
¡ršg
, std::¡ršg> 
deçuÉ_v®
) {

167 cÚ¡ 
¡d
::
¡ršg
 
’v_v¬
 = 
FÏgToEnvV¬
(
æag
);

168 cÚ¡ * cÚ¡ 
	gv®ue_¡r
 = 
g‘’v
(
’v_v¬
.
c_¡r
());

170 ià(
	gv®ue_¡r
 =ğ
nuÎ±r
è 
deçuÉ_v®
;

172 
	g¡d
::
m­
<
¡d
::
¡ršg
, std::¡ršg> 
v®ue
;

173 ià(!
P¬£KvPaœs
("EnvœÚm’ˆv¬ŸbË " + 
’v_v¬
, 
v®ue_¡r
, &
v®ue
)) {

174  
	gdeçuÉ_v®
;

176  
	gv®ue
;

184 cÚ¡ * 
P¬£FÏgV®ue
(cÚ¡ * 
¡r
, cÚ¡ * 
æag
,

185 
boŞ
 
def_İtiÚ®
) {

187 ià(
	g¡r
 =ğ
nuÎ±r
 || 
æag
 ==‚ullptr) ‚ullptr;

190 cÚ¡ 
	g¡d
::
¡ršg
 
æag_¡r
 = 
¡d
::¡ršg("--"è+ std::¡ršg(
æag
);

191 cÚ¡ 
size_t
 
	gæag_Ën
 = 
æag_¡r
.
Ëngth
();

192 ià(
¡ºcmp
(
¡r
, 
æag_¡r
.
c_¡r
(), 
æag_Ën
è!ğ0è 
nuÎ±r
;

195 cÚ¡ * 
	gæag_’d
 = 
¡r
 + 
æag_Ën
;

198 ià(
	gdef_İtiÚ®
 && (
	gæag_’d
[0] =ğ'\0')è 
æag_’d
;

203 ià(
	gæag_’d
[0] !ğ'='è 
nuÎ±r
;

206  
	gæag_’d
 + 1;

209 
BENCHMARK_EXPORT


210 
boŞ
 
P¬£BoŞFÏg
(cÚ¡ * 
¡r
, cÚ¡ * 
æag
, boŞ* 
v®ue
) {

212 cÚ¡ * cÚ¡ 
	gv®ue_¡r
 = 
P¬£FÏgV®ue
(
¡r
, 
æag
, 
Œue
);

215 ià(
	gv®ue_¡r
 =ğ
nuÎ±r
è 
çl£
;

218 *
	gv®ue
 = 
IsTruthyFÏgV®ue
(
v®ue_¡r
);

219  
	gŒue
;

222 
BENCHMARK_EXPORT


223 
boŞ
 
P¬£IÁ32FÏg
(cÚ¡ * 
¡r
, cÚ¡ * 
æag
, 
št32_t
* 
v®ue
) {

225 cÚ¡ * cÚ¡ 
	gv®ue_¡r
 = 
P¬£FÏgV®ue
(
¡r
, 
æag
, 
çl£
);

228 ià(
	gv®ue_¡r
 =ğ
nuÎ±r
è 
çl£
;

231  
P¬£IÁ32
(
¡d
::
¡ršg
("Thv®uoàæag --"è+ 
æag
, 
v®ue_¡r
,

232 
v®ue
);

235 
BENCHMARK_EXPORT


236 
boŞ
 
P¬£DoubËFÏg
(cÚ¡ * 
¡r
, cÚ¡ * 
æag
, * 
v®ue
) {

238 cÚ¡ * cÚ¡ 
	gv®ue_¡r
 = 
P¬£FÏgV®ue
(
¡r
, 
æag
, 
çl£
);

241 ià(
	gv®ue_¡r
 =ğ
nuÎ±r
è 
çl£
;

244  
P¬£DoubË
(
¡d
::
¡ršg
("Thv®uoàæag --"è+ 
æag
, 
v®ue_¡r
,

245 
v®ue
);

248 
BENCHMARK_EXPORT


249 
boŞ
 
P¬£SŒšgFÏg
(cÚ¡ * 
¡r
, cÚ¡ * 
æag
, 
¡d
::
¡ršg
* 
v®ue
) {

251 cÚ¡ * cÚ¡ 
v®ue_¡r
 = 
P¬£FÏgV®ue
(
¡r
, 
æag
, 
çl£
);

254 ià(
	gv®ue_¡r
 =ğ
nuÎ±r
è 
çl£
;

256 *
	gv®ue
 = 
v®ue_¡r
;

257  
	gŒue
;

260 
BENCHMARK_EXPORT


261 
boŞ
 
P¬£KeyV®ueFÏg
(cÚ¡ * 
¡r
, cÚ¡ * 
æag
,

262 
¡d
::
m­
<¡d::
¡ršg
, std::¡ršg>* 
v®ue
) {

263 cÚ¡ * cÚ¡ 
v®ue_¡r
 = 
P¬£FÏgV®ue
(
¡r
, 
æag
, 
çl£
);

265 ià(
	gv®ue_¡r
 =ğ
nuÎ±r
è 
çl£
;

267 cÚ¡‡uto& 
	gkv·œ
 : 
SŒS¶™
(
v®ue_¡r
, ',')) {

268 cÚ¡‡utØ
	gkv
 = 
SŒS¶™
(
kv·œ
, '=');

269 ià(
	gkv
.
size
(è!ğ2è 
çl£
;

270 
	gv®ue
->
em¶aû
(
kv
[0], kv[1]);

273  
	gŒue
;

276 
BENCHMARK_EXPORT


277 
boŞ
 
IsFÏg
(cÚ¡ * 
¡r
, cÚ¡ * 
æag
) {

278  (
P¬£FÏgV®ue
(
¡r
, 
æag
, 
Œue
è!ğ
nuÎ±r
);

281 
BENCHMARK_EXPORT


282 
boŞ
 
IsTruthyFÏgV®ue
(cÚ¡ 
¡d
::
¡ršg
& 
v®ue
) {

283 ià(
v®ue
.
size
() == 1) {

284 
v
 = 
v®ue
[0];

285  
i§Êum
(
v
) &&

286 !(
	gv
 =ğ'0' || 
v
 == 'f' || v == 'F' || v == 'n' || v == 'N');

288 ià(!
	gv®ue
.
em±y
()) {

289 
	g¡d
::
¡ršg
 
v®ue_low”
(
v®ue
);

290 
	g¡d
::
ŒªsfÜm
(
v®ue_low”
.
begš
(), v®ue_low”.
’d
(), value_lower.begin(),

291 [](
c
è{  
¡©ic_ÿ¡
<>(::
tŞow”
(c)); });

292  !(
	gv®ue_low”
 =ğ"çl£" || 
v®ue_low”
 == "no" ||

293 
v®ue_low”
 == "off");

295  
	gŒue
;

	@third_party/benchmark/src/commandlineflags.h

1 #iâdeà
BENCHMARK_COMMANDLINEFLAGS_H_


2 
	#BENCHMARK_COMMANDLINEFLAGS_H_


	)

4 
	~<c¡dšt
>

5 
	~<m­
>

6 
	~<¡ršg
>

8 
	~"b’chm¬k/expÜt.h
"

11 
	#FLAG
(
Çme
è
FLAGS_
##
	)
name

14 
	#BM_DECLARE_boŞ
(
Çme
è
BENCHMARK_EXPORT
 
boŞ
 
	`FLAG
Òame)

	)

15 
	#BM_DECLARE_št32
(
Çme
è
BENCHMARK_EXPORT
 
št32_t
 
	`FLAG
Òame)

	)

16 
	#BM_DECLARE_doubË
(
Çme
è
BENCHMARK_EXPORT
 
	`FLAG
Òame)

	)

17 
	#BM_DECLARE_¡ršg
(
Çme
è
BENCHMARK_EXPORT
 
¡d
::
¡ršg
 
	`FLAG
Òame)

	)

18 
	#BM_DECLARE_kv·œs
(
Çme
) \

19 
BENCHMARK_EXPORT
 
¡d
::
m­
<¡d::
¡ršg
, std::¡ršg> 
	`FLAG
(
Çme
)

	)

22 
	#BM_DEFINE_boŞ
(
Çme
, 
deçuÉ_v®
) \

23 
BENCHMARK_EXPORT
 
boŞ
 
	`FLAG
(
Çme
èğ
b’chm¬k
::
	`BoŞFromEnv
(#Çme, 
deçuÉ_v®
)

	)

24 
	#BM_DEFINE_št32
(
Çme
, 
deçuÉ_v®
) \

25 
BENCHMARK_EXPORT
 
št32_t
 
	`FLAG
(
Çme
) = \

26 
b’chm¬k
::
	`IÁ32FromEnv
(#Çme, 
deçuÉ_v®
)

	)

27 
	#BM_DEFINE_doubË
(
Çme
, 
deçuÉ_v®
) \

28 
BENCHMARK_EXPORT
 
	`FLAG
(
Çme
) = \

29 
b’chm¬k
::
	`DoubËFromEnv
(#Çme, 
deçuÉ_v®
)

	)

30 
	#BM_DEFINE_¡ršg
(
Çme
, 
deçuÉ_v®
) \

31 
BENCHMARK_EXPORT
 
¡d
::
¡ršg
 
	`FLAG
(
Çme
) = \

32 
b’chm¬k
::
	`SŒšgFromEnv
(#Çme, 
deçuÉ_v®
)

	)

33 
	#BM_DEFINE_kv·œs
(
Çme
, 
deçuÉ_v®
) \

34 
BENCHMARK_EXPORT
 
¡d
::
m­
<¡d::
¡ršg
, std::¡ršg> 
	`FLAG
(
Çme
) = \

35 
b’chm¬k
::
	`KvPaœsFromEnv
(#Çme, 
deçuÉ_v®
)

	)

37 
Çme¥aû
 
b’chm¬k
 {

43 
BENCHMARK_EXPORT


44 
boŞ
 
BoŞFromEnv
(cÚ¡ * 
æag
, boŞ 
deçuÉ_v®
);

51 
BENCHMARK_EXPORT


52 
št32_t
 
IÁ32FromEnv
(cÚ¡ * 
æag
, iÁ32_ˆ
deçuÉ_v®
);

59 
BENCHMARK_EXPORT


60 
DoubËFromEnv
(cÚ¡ * 
æag
, 
deçuÉ_v®
);

67 
BENCHMARK_EXPORT


68 cÚ¡ * 
SŒšgFromEnv
(cÚ¡ * 
æag
, cÚ¡ * 
deçuÉ_v®
);

75 
BENCHMARK_EXPORT


76 
¡d
::
m­
<¡d::
¡ršg
, std::¡ršg> 
KvPaœsFromEnv
(

77 cÚ¡ * 
æag
, 
¡d
::
m­
<¡d::
¡ršg
, std::¡ršg> 
deçuÉ_v®
);

88 
BENCHMARK_EXPORT


89 
boŞ
 
P¬£BoŞFÏg
(cÚ¡ * 
¡r
, cÚ¡ * 
æag
, boŞ* 
v®ue
);

95 
BENCHMARK_EXPORT


96 
boŞ
 
P¬£IÁ32FÏg
(cÚ¡ * 
¡r
, cÚ¡ * 
æag
, 
št32_t
* 
v®ue
);

102 
BENCHMARK_EXPORT


103 
boŞ
 
P¬£DoubËFÏg
(cÚ¡ * 
¡r
, cÚ¡ * 
æag
, * 
v®ue
);

109 
BENCHMARK_EXPORT


110 
boŞ
 
P¬£SŒšgFÏg
(cÚ¡ * 
¡r
, cÚ¡ * 
æag
, 
¡d
::
¡ršg
* 
v®ue
);

116 
BENCHMARK_EXPORT


117 
boŞ
 
P¬£KeyV®ueFÏg
(cÚ¡ * 
¡r
, cÚ¡ * 
æag
,

118 
¡d
::
m­
<¡d::
¡ršg
, std::¡ršg>* 
v®ue
);

121 
BENCHMARK_EXPORT


122 
boŞ
 
IsFÏg
(cÚ¡ * 
¡r
, cÚ¡ * 
æag
);

128 
BENCHMARK_EXPORT


129 
boŞ
 
IsTruthyFÏgV®ue
(cÚ¡ 
¡d
::
¡ršg
& 
v®ue
);

	@third_party/benchmark/src/complexity.cc

18 
	~"com¶ex™y.h
"

20 
	~<®gÜ™hm
>

21 
	~<cm©h
>

23 
	~"b’chm¬k/b’chm¬k.h
"

24 
	~"check.h
"

26 
Çme¥aû
 
	gb’chm¬k
 {

29 
BigOFunc
* 
F™tšgCurve
(
BigO
 
com¶ex™y
) {

30 cÚ¡ 
	gkLog2E
 = 1.44269504088896340736;

31 
	gcom¶ex™y
) {

32 
	goN
:

33  [](
I‹¿tiÚCouÁ
 
n
è-> {  
¡©ic_ÿ¡
<>(n); };

34 
	goNSqu¬ed
:

35  [](
I‹¿tiÚCouÁ
 
n
è-> {  
¡d
::
pow
(n, 2); };

36 
	goNCubed
:

37  [](
I‹¿tiÚCouÁ
 
n
è-> {  
¡d
::
pow
(n, 3); };

38 
	goLogN
:

41 [](
I‹¿tiÚCouÁ
 
n
è{  
kLog2E
 * 
log
(
¡©ic_ÿ¡
<>(n)); };

42 
	goNLogN
:

44  [](
I‹¿tiÚCouÁ
 
n
) {

45  
kLog2E
 * 
n
 * 
log
(
¡©ic_ÿ¡
<>(n));

47 
	go1
:

49  [](
I‹¿tiÚCouÁ
) {  1.0; };

54 
	g¡d
::
¡ršg
 
G‘BigOSŒšg
(
BigO
 
com¶ex™y
) {

55 
com¶ex™y
) {

56 
oN
:

58 
	goNSqu¬ed
:

60 
	goNCubed
:

62 
	goLogN
:

64 
	goNLogN
:

66 
	go1
:

83 
L—¡Sq
 
Mšim®L—¡Sq
(cÚ¡ 
¡d
::
veùÜ
<
št64_t
>& 
n
,

84 cÚ¡ 
¡d
::
veùÜ
<>& 
time
,

85 
BigOFunc
* 
f™tšg_curve
) {

86 
	gsigma_gn_squ¬ed
 = 0.0;

87 
	gsigma_time
 = 0.0;

88 
	gsigma_time_gn
 = 0.0;

91 
size_t
 
	gi
 = 0; i < 
	gn
.
size
(); ++i) {

92 
	ggn_i
 = 
f™tšg_curve
(
n
[
i
]);

93 
	gsigma_gn_squ¬ed
 +ğ
gn_i
 * gn_i;

94 
	gsigma_time
 +ğ
time
[
i
];

95 
	gsigma_time_gn
 +ğ
time
[
i
] * 
gn_i
;

98 
L—¡Sq
 
	g»suÉ
;

99 
	g»suÉ
.
	gcom¶ex™y
 = 
oLambda
;

102 
	g»suÉ
.
	gcÛf
 = 
sigma_time_gn
 / 
sigma_gn_squ¬ed
;

105 
	grms
 = 0.0;

106 
size_t
 
	gi
 = 0; i < 
	gn
.
size
(); ++i) {

107 
	gf™
 = 
»suÉ
.
cÛf
 * 
f™tšg_curve
(
n
[
i
]);

108 
	grms
 +ğ
pow
((
time
[
i
] - 
f™
), 2);

112 
	gm—n
 = 
sigma_time
 / 
n
.
size
();

113 
	g»suÉ
.
	grms
 = 
sq¹
(
rms
 / 
n
.
size
()è/ 
m—n
;

115  
	g»suÉ
;

125 
L—¡Sq
 
Mšim®L—¡Sq
(cÚ¡ 
¡d
::
veùÜ
<
št64_t
>& 
n
,

126 cÚ¡ 
¡d
::
veùÜ
<>& 
time
, cÚ¡ 
BigO
 
com¶ex™y
) {

127 
BM_CHECK_EQ
(
n
.
size
(), 
time
.size());

128 
BM_CHECK_GE
(
n
.
size
(), 2);

130 
BM_CHECK_NE
(
com¶ex™y
, 
oNÚe
);

132 
L—¡Sq
 
	gbe¡_f™
;

134 ià(
	gcom¶ex™y
 =ğ
oAuto
) {

135 
¡d
::
veùÜ
<
BigO
> 
f™_curves
 = {
oLogN
, 
oN
, 
oNLogN
, 
oNSqu¬ed
, 
oNCubed
};

138 
	gbe¡_f™
 = 
Mšim®L—¡Sq
(
n
, 
time
, 
F™tšgCurve
(
o1
));

139 
	gbe¡_f™
.
	gcom¶ex™y
 = 
o1
;

142 cÚ¡‡uto& 
	gf™
 : 
f™_curves
) {

143 
L—¡Sq
 
cu¼’t_f™
 = 
Mšim®L—¡Sq
(
n
, 
time
, 
F™tšgCurve
(
f™
));

144 ià(
	gcu¼’t_f™
.
	grms
 < 
	gbe¡_f™
.rms) {

145 
	gbe¡_f™
 = 
cu¼’t_f™
;

146 
	gbe¡_f™
.
	gcom¶ex™y
 = 
f™
;

150 
	gbe¡_f™
 = 
Mšim®L—¡Sq
(
n
, 
time
, 
F™tšgCurve
(
com¶ex™y
));

151 
	gbe¡_f™
.
	gcom¶ex™y
 = 
com¶ex™y
;

154  
	gbe¡_f™
;

157 
	g¡d
::
veùÜ
<
B’chm¬kR•Ü‹r
::
Run
> 
Compu‹BigO
(

158 cÚ¡ 
¡d
::
veùÜ
<
B’chm¬kR•Ü‹r
::
Run
>& 
»pÜts
) {

159 
B’chm¬kR•Ü‹r
::
	tRun
 Run;

160 
	g¡d
::
veùÜ
<
Run
> 
»suÉs
;

162 ià(
	g»pÜts
.
size
(è< 2è 
	g»suÉs
;

165 
	g¡d
::
veùÜ
<
št64_t
> 
n
;

166 
	g¡d
::
veùÜ
<> 
»®_time
;

167 
	g¡d
::
veùÜ
<> 
ıu_time
;

170 cÚ¡ 
	gRun
& 
	grun
 : 
»pÜts
) {

171 
BM_CHECK_GT
(
run
.
com¶ex™y_n
, 0)

173 
	gn
.
push_back
(
run
.
com¶ex™y_n
);

174 
	g»®_time
.
push_back
(
run
.
»®_accumuÏ‹d_time
 /„un.
™”©iÚs
);

175 
	gıu_time
.
push_back
(
run
.
ıu_accumuÏ‹d_time
 /„un.
™”©iÚs
);

178 
L—¡Sq
 
	g»suÉ_ıu
;

179 
L—¡Sq
 
	g»suÉ_»®
;

181 ià(
	g»pÜts
[0].
	gcom¶ex™y
 =ğ
oLambda
) {

182 
»suÉ_ıu
 = 
Mšim®L—¡Sq
(
n
, 
ıu_time
, 
»pÜts
[0].
com¶ex™y_Ïmbda
);

183 
	g»suÉ_»®
 = 
Mšim®L—¡Sq
(
n
, 
»®_time
, 
»pÜts
[0].
com¶ex™y_Ïmbda
);

185 
	g»suÉ_ıu
 = 
Mšim®L—¡Sq
(
n
, 
ıu_time
, 
»pÜts
[0].
com¶ex™y
);

186 
	g»suÉ_»®
 = 
Mšim®L—¡Sq
(
n
, 
»®_time
, 
»suÉ_ıu
.
com¶ex™y
);

190 autØ
	grun_Çme
 = 
»pÜts
[0].
run_Çme
;

191 
	grun_Çme
.
	g¬gs
.
ş—r
();

194 
Run
 
	gbig_o
;

195 
	gbig_o
.
	grun_Çme
 = 
run_Çme
;

196 
	gbig_o
.
	gçmy_šdex
 = 
»pÜts
[0].
çmy_šdex
;

197 
	gbig_o
.
	g³r_çmy_š¡ªû_šdex
 = 
»pÜts
[0].
³r_çmy_š¡ªû_šdex
;

198 
	gbig_o
.
	grun_ty³
 = 
B’chm¬kR•Ü‹r
::
Run
::
RT_Agg»g©e
;

199 
	gbig_o
.
	g»³t™iÚs
 = 
»pÜts
[0].
»³t™iÚs
;

200 
	gbig_o
.
	g»³t™iÚ_šdex
 = 
Run
::
no_»³t™iÚ_šdex
;

201 
	gbig_o
.
	gth»ads
 = 
»pÜts
[0].
th»ads
;

202 
	gbig_o
.
	gagg»g©e_Çme
 = "BigO";

203 
	gbig_o
.
	gagg»g©e_un™
 = 
Sti¡icUn™
::
kTime
;

204 
	gbig_o
.
	g»pÜt_Ïb–
 = 
»pÜts
[0].
»pÜt_Ïb–
;

205 
	gbig_o
.
	g™”©iÚs
 = 0;

206 
	gbig_o
.
	g»®_accumuÏ‹d_time
 = 
»suÉ_»®
.
cÛf
;

207 
	gbig_o
.
	gıu_accumuÏ‹d_time
 = 
»suÉ_ıu
.
cÛf
;

208 
	gbig_o
.
	g»pÜt_big_o
 = 
Œue
;

209 
	gbig_o
.
	gcom¶ex™y
 = 
»suÉ_ıu
.
com¶ex™y
;

216 
	gmuÉl›r
 = 
G‘TimeUn™MuÉl›r
(
»pÜts
[0].
time_un™
);

219 
Run
 
	grms
;

220 
	grms
.
	grun_Çme
 = 
run_Çme
;

221 
	grms
.
	gçmy_šdex
 = 
»pÜts
[0].
çmy_šdex
;

222 
	grms
.
	g³r_çmy_š¡ªû_šdex
 = 
»pÜts
[0].
³r_çmy_š¡ªû_šdex
;

223 
	grms
.
	grun_ty³
 = 
B’chm¬kR•Ü‹r
::
Run
::
RT_Agg»g©e
;

224 
	grms
.
	gagg»g©e_Çme
 = "RMS";

225 
	grms
.
	gagg»g©e_un™
 = 
Sti¡icUn™
::
kP”ûÁage
;

226 
	grms
.
	g»pÜt_Ïb–
 = 
big_o
.
»pÜt_Ïb–
;

227 
	grms
.
	g™”©iÚs
 = 0;

228 
	grms
.
	g»³t™iÚ_šdex
 = 
Run
::
no_»³t™iÚ_šdex
;

229 
	grms
.
	g»³t™iÚs
 = 
»pÜts
[0].
»³t™iÚs
;

230 
	grms
.
	gth»ads
 = 
»pÜts
[0].
th»ads
;

231 
	grms
.
	g»®_accumuÏ‹d_time
 = 
»suÉ_»®
.
rms
 / 
muÉl›r
;

232 
	grms
.
	gıu_accumuÏ‹d_time
 = 
»suÉ_ıu
.
rms
 / 
muÉl›r
;

233 
	grms
.
	g»pÜt_rms
 = 
Œue
;

234 
	grms
.
	gcom¶ex™y
 = 
»suÉ_ıu
.
com¶ex™y
;

237 
	grms
.
	gtime_un™
 = 
»pÜts
[0].
time_un™
;

239 
	g»suÉs
.
push_back
(
big_o
);

240 
	g»suÉs
.
push_back
(
rms
);

241  
	g»suÉs
;

	@third_party/benchmark/src/complexity.h

18 #iâdeà
COMPLEXITY_H_


19 
	#COMPLEXITY_H_


	)

21 
	~<¡ršg
>

22 
	~<veùÜ
>

24 
	~"b’chm¬k/b’chm¬k.h
"

26 
Çme¥aû
 
	gb’chm¬k
 {

30 
	g¡d
::
veùÜ
<
B’chm¬kR•Ü‹r
::
Run
> 
Compu‹BigO
(

31 cÚ¡ 
¡d
::
veùÜ
<
B’chm¬kR•Ü‹r
::
Run
>& 
»pÜts
);

42 
	sL—¡Sq
 {

43 
L—¡Sq
(è: 
cÛf
(0.0), 
rms
(0.0), 
com¶ex™y
(
oNÚe
) {}

45 
	gcÛf
;

46 
	grms
;

47 
BigO
 
	gcom¶ex™y
;

51 
	g¡d
::
¡ršg
 
G‘BigOSŒšg
(
BigO
 
com¶ex™y
);

	@third_party/benchmark/src/console_reporter.cc

15 
	~<®gÜ™hm
>

16 
	~<c¡dšt
>

17 
	~<c¡dio
>

18 
	~<c¡ršg
>

19 
	~<io¡»am
>

20 
	~<¡ršg
>

21 
	~<tu¶e
>

22 
	~<veùÜ
>

24 
	~"b’chm¬k/b’chm¬k.h
"

25 
	~"check.h
"

26 
	~"cŞÜ´št.h
"

27 
	~"commªdlšeæags.h
"

28 
	~"com¶ex™y.h
"

29 
	~"couÁ”.h
"

30 
	~"š‹º®_maüos.h
"

31 
	~"¡ršg_ut.h
"

32 
	~"tim”s.h
"

34 
Çme¥aû
 
	gb’chm¬k
 {

36 
BENCHMARK_EXPORT


37 
boŞ
 
	gCÚsŞeR•Ü‹r
::
R•ÜtCÚ‹xt
(cÚ¡ 
CÚ‹xt
& 
cÚ‹xt
) {

38 
Çme_f›ld_width_
 = 
cÚ‹xt
.
Çme_f›ld_width
;

39 
	g´š‹d_h—d”_
 = 
çl£
;

40 
	g´ev_couÁ”s_
.
ş—r
();

42 
PrštBasicCÚ‹xt
(&
G‘E¼ÜSŒ—m
(), 
cÚ‹xt
);

44 #ifdeà
BENCHMARK_OS_WINDOWS


45 ià((
	gouut_İtiÚs_
 & 
	gOO_CŞÜ
è&& &
	g¡d
::
cout
 !ğ&
G‘OuutSŒ—m
()) {

46 
G‘E¼ÜSŒ—m
()

49 
	gouut_İtiÚs_
 = 
¡©ic_ÿ¡
<
OuutO±iÚs
>(
ouut_İtiÚs_
 & ~
OO_CŞÜ
);

53  
	gŒue
;

56 
BENCHMARK_EXPORT


57 
	gCÚsŞeR•Ü‹r
::
PrštH—d”
(cÚ¡ 
Run
& 
run
) {

58 
¡d
::
¡ršg
 
¡r
 =

59 
FÜm©SŒšg
("%-* %13 %15 %12s", 
¡©ic_ÿ¡
<>(
Çme_f›ld_width_
),

61 ià(!
	grun
.
	gcouÁ”s
.
em±y
()) {

62 ià(
	gouut_İtiÚs_
 & 
	gOO_TabuÏr
) {

63 autØcÚ¡& 
	gc
 : 
run
.
couÁ”s
) {

64 
¡r
 +ğ
FÜm©SŒšg
(" %10s", 
c
.
fœ¡
.
c_¡r
());

67 
	g¡r
 += " UserCounters...";

70 
	g¡d
::
¡ršg
 
lše
 = 
¡d
::¡ršg(
¡r
.
Ëngth
(), '-');

71 
G‘OuutSŒ—m
(è<< 
	glše
 << "\n" << 
	g¡r
 << "\n" <<†ine << "\n";

74 
BENCHMARK_EXPORT


75 
	gCÚsŞeR•Ü‹r
::
R•ÜtRuns
(cÚ¡ 
¡d
::
veùÜ
<
Run
>& 
»pÜts
) {

76 cÚ¡‡uto& 
run
 : 
»pÜts
) {

79 
boŞ
 
´št_h—d”
 = !
´š‹d_h—d”_
;

82 
	g´št_h—d”
 |ğ(
ouut_İtiÚs_
 & 
OO_TabuÏr
) &&

83 (!
š‹º®
::
SameNames
(
run
.
couÁ”s
, 
´ev_couÁ”s_
));

84 ià(
	g´št_h—d”
) {

85 
	g´š‹d_h—d”_
 = 
Œue
;

86 
	g´ev_couÁ”s_
 = 
run
.
couÁ”s
;

87 
PrštH—d”
(
run
);

92 
PrštRunD©a
(
run
);

96 
IgnÜeCŞÜPršt
(
¡d
::
o¡»am
& 
out
, 
LogCŞÜ
, cÚ¡ * 
fmt
,

98 
va_li¡
 
	g¬gs
;

99 
va_¡¬t
(
¬gs
, 
fmt
);

100 
	gout
 << 
FÜm©SŒšg
(
fmt
, 
¬gs
);

101 
va_’d
(
¬gs
);

104 
	g¡d
::
¡ršg
 
FÜm©Time
(
time
) {

109 ià(
time
 < 1.0) {

110  
FÜm©SŒšg
("%10.3f", 
time
);

112 ià(
	gtime
 < 10.0) {

113  
FÜm©SŒšg
("%10.2f", 
time
);

115 ià(
	gtime
 < 100.0) {

116  
FÜm©SŒšg
("%10.1f", 
time
);

120 ià(
	gtime
 > 9999999999 ) {

121  
FÜm©SŒšg
("%1.4e", 
time
);

123  
FÜm©SŒšg
("%10.0f", 
time
);

126 
BENCHMARK_EXPORT


127 
	gCÚsŞeR•Ü‹r
::
PrštRunD©a
(cÚ¡ 
Run
& 
»suÉ
) {

128 (
Prš‹rFn
)(
	t¡d
::
	to¡»am
&, 
	tLogCŞÜ
, const *, ...);

129 auto& 
	gOut
 = 
G‘OuutSŒ—m
();

130 
Prš‹rFn
* 
	g´š‹r
 = (
ouut_İtiÚs_
 & 
OO_CŞÜ
)

131 ? 
¡©ic_ÿ¡
<
Prš‹rFn
*>(
CŞÜPrštf
)

132 : 
IgnÜeCŞÜPršt
;

133 autØ
	gÇme_cŞÜ
 =

134 (
»suÉ
.
»pÜt_big_o
 ||„esuÉ.
»pÜt_rms
è? 
COLOR_BLUE
 : 
COLOR_GREEN
;

135 
´š‹r
(
Out
, 
Çme_cŞÜ
, "%-* ", 
Çme_f›ld_width_
,

136 
»suÉ
.
b’chm¬k_Çme
().
c_¡r
());

138 ià(
	gš‹º®
::
Sk³dW™hE¼Ü
 =ğ
»suÉ
.
sk³d
) {

139 
´š‹r
(
Out
, 
COLOR_RED
, "ERROR OCCURRED: \'%s\'",

140 
»suÉ
.
sk_mes§ge
.
c_¡r
());

141 
´š‹r
(
Out
, 
COLOR_DEFAULT
, "\n");

143 } ià(
	gš‹º®
::
Sk³dW™hMes§ge
 =ğ
»suÉ
.
sk³d
) {

144 
´š‹r
(
Out
, 
COLOR_WHITE
, "SKIPPED: \'%s\'", 
»suÉ
.
sk_mes§ge
.
c_¡r
());

145 
´š‹r
(
Out
, 
COLOR_DEFAULT
, "\n");

149 cÚ¡ 
	g»®_time
 = 
»suÉ
.
G‘Adju¡edR—lTime
();

150 cÚ¡ 
	gıu_time
 = 
»suÉ
.
G‘Adju¡edCPUTime
();

151 cÚ¡ 
	g¡d
::
¡ršg
 
»®_time_¡r
 = 
FÜm©Time
(
»®_time
);

152 cÚ¡ 
	g¡d
::
¡ršg
 
ıu_time_¡r
 = 
FÜm©Time
(
ıu_time
);

154 ià(
	g»suÉ
.
	g»pÜt_big_o
) {

155 
	g¡d
::
¡ršg
 
big_o
 = 
G‘BigOSŒšg
(
»suÉ
.
com¶ex™y
);

156 
´š‹r
(
Out
, 
COLOR_YELLOW
, "%10.2à%-4 %10.2à%-4 ", 
»®_time
,

157 
big_o
.
c_¡r
(), 
ıu_time
, big_o.c_str());

158 } ià(
	g»suÉ
.
	g»pÜt_rms
) {

159 
´š‹r
(
Out
, 
COLOR_YELLOW
, "%10.0à%-4 %10.0à%-4 ", 
»®_time
 * 100, "%",

160 
ıu_time
 * 100, "%");

161 } ià(
	g»suÉ
.
	grun_ty³
 !ğ
Run
::
RT_Agg»g©e
 ||

162 
»suÉ
.
agg»g©e_un™
 =ğ
Sti¡icUn™
::
kTime
) {

163 cÚ¡ * 
timeLab–
 = 
G‘TimeUn™SŒšg
(
»suÉ
.
time_un™
);

164 
´š‹r
(
Out
, 
COLOR_YELLOW
, "% %-4 % %-4 ", 
»®_time_¡r
.
c_¡r
(),

165 
timeLab–
, 
ıu_time_¡r
.
c_¡r
(),imeLabel);

167 
as£¹
(
»suÉ
.
agg»g©e_un™
 =ğ
Sti¡icUn™
::
kP”ûÁage
);

168 
´š‹r
(
Out
, 
COLOR_YELLOW
, "%10.2f %-4s %10.2f %-4s ",

169 (100. * 
»suÉ
.
»®_accumuÏ‹d_time
), "%",

170 (100. * 
»suÉ
.
ıu_accumuÏ‹d_time
), "%");

173 ià(!
	g»suÉ
.
	g»pÜt_big_o
 && !»suÉ.
	g»pÜt_rms
) {

174 
´š‹r
(
Out
, 
COLOR_CYAN
, "%10Îd", 
»suÉ
.
™”©iÚs
);

177 auto& 
	gc
 : 
»suÉ
.
couÁ”s
) {

178 cÚ¡ 
¡d
::
size_t
 
cNameL’
 =

179 
¡d
::
max
(¡d::
¡ršg
::
size_ty³
(10), 
c
.
fœ¡
.
Ëngth
());

180 
	g¡d
::
¡ršg
 
s
;

181 cÚ¡ * 
	gun™
 = "";

182 ià(
	g»suÉ
.
	grun_ty³
 =ğ
Run
::
RT_Agg»g©e
 &&

183 
»suÉ
.
agg»g©e_un™
 =ğ
Sti¡icUn™
::
kP”ûÁage
) {

184 
s
 = 
SŒFÜm©
("%.2f", 100. * 
c
.
£cÚd
.
v®ue
);

185 
	gun™
 = "%";

187 
	gs
 = 
HumªR—dabËNumb”
(
c
.
£cÚd
.
v®ue
, c.£cÚd.
ÚeK
);

188 ià(
	gc
.
	g£cÚd
.
	gæags
 & 
	gCouÁ”
::
kIsR©e
)

189 
un™
 = (
c
.
£cÚd
.
æags
 & 
CouÁ”
::
kInv”t
) ? "s" : "/s";

191 ià(
	gouut_İtiÚs_
 & 
	gOO_TabuÏr
) {

192 
´š‹r
(
Out
, 
COLOR_DEFAULT
, " %*s%s", 
cNameL’
 - 
¡¾’
(
un™
), 
s
.
c_¡r
(),

193 
un™
);

195 
´š‹r
(
Out
, 
COLOR_DEFAULT
, " %s=%s%s", 
c
.
fœ¡
.
c_¡r
(), 
s
.c_¡r(), 
un™
);

199 ià(!
	g»suÉ
.
	g»pÜt_Ïb–
.
em±y
()) {

200 
´š‹r
(
Out
, 
COLOR_DEFAULT
, " %s", 
»suÉ
.
»pÜt_Ïb–
.
c_¡r
());

203 
´š‹r
(
Out
, 
COLOR_DEFAULT
, "\n");

	@third_party/benchmark/src/counter.cc

15 
	~"couÁ”.h
"

17 
Çme¥aû
 
	gb’chm¬k
 {

18 
Çme¥aû
 
	gš‹º®
 {

20 
Fšish
(
CouÁ”
 cÚ¡& 
c
, 
I‹¿tiÚCouÁ
 
™”©iÚs
, 
ıu_time
,

21 
num_th»ads
) {

22 
	gv
 = 
c
.
v®ue
;

23 ià(
	gc
.
	gæags
 & 
	gCouÁ”
::
kIsR©e
) {

24 
v
 /ğ
ıu_time
;

26 ià(
	gc
.
	gæags
 & 
	gCouÁ”
::
kAvgTh»ads
) {

27 
v
 /ğ
num_th»ads
;

29 ià(
	gc
.
	gæags
 & 
	gCouÁ”
::
kIsI‹¿tiÚInv¬ŸÁ
) {

30 
v
 *ğ
™”©iÚs
;

32 ià(
	gc
.
	gæags
 & 
	gCouÁ”
::
kAvgI‹¿tiÚs
) {

33 
v
 /ğ
™”©iÚs
;

36 ià(
	gc
.
	gæags
 & 
	gCouÁ”
::
kInv”t
) {

37 
v
 = 1.0 / v;

39  
	gv
;

42 
Fšish
(
U£rCouÁ”s
* 
l
, 
I‹¿tiÚCouÁ
 
™”©iÚs
, 
ıu_time
,

43 
num_th»ads
) {

44 auto& 
	gc
 : *
l
) {

45 
c
.
£cÚd
.
v®ue
 = 
Fšish
(c.£cÚd, 
™”©iÚs
, 
ıu_time
, 
num_th»ads
);

49 
Inüem’t
(
U£rCouÁ”s
* 
l
, U£rCouÁ” cÚ¡& 
r
) {

51 auto& 
	gc
 : *
l
) {

52 autØ
™
 = 
r
.
fšd
(
c
.
fœ¡
);

53 ià(
	g™
 !ğ
r
.
’d
()) {

54 
c
.
£cÚd
.
v®ue
 = c.£cÚd + 
™
->second;

58 autØcÚ¡& 
	gtc
 : 
r
) {

59 autØ
™
 = 
l
->
fšd
(
tc
.
fœ¡
);

60 ià(
	g™
 =ğ
l
->
’d
()) {

61 (*
l
)[
tc
.
fœ¡
] =c.
£cÚd
;

66 
boŞ
 
SameNames
(
U£rCouÁ”s
 cÚ¡& 
l
, U£rCouÁ” cÚ¡& 
r
) {

67 ià(&
	gl
 =ğ&
r
è 
Œue
;

68 ià(
	gl
.
size
(è!ğ
r
.size()) {

69  
çl£
;

71 autØcÚ¡& 
	gc
 : 
l
) {

72 ià(
r
.
fšd
(
c
.
fœ¡
è=ğr.
’d
()) {

73  
çl£
;

76  
	gŒue
;

	@third_party/benchmark/src/counter.h

15 #iâdeà
BENCHMARK_COUNTER_H_


16 
	#BENCHMARK_COUNTER_H_


	)

18 
	~"b’chm¬k/b’chm¬k.h
"

20 
Çme¥aû
 
	gb’chm¬k
 {

23 
Çme¥aû
 
	gš‹º®
 {

24 
Fšish
(
U£rCouÁ”s
* 
l
, 
I‹¿tiÚCouÁ
 
™”©iÚs
, 
time
,

25 
num_th»ads
);

26 
Inüem’t
(
U£rCouÁ”s
* 
l
, U£rCouÁ” cÚ¡& 
r
);

27 
boŞ
 
SameNames
(
U£rCouÁ”s
 cÚ¡& 
l
, U£rCouÁ” cÚ¡& 
r
);

	@third_party/benchmark/src/csv_reporter.cc

15 
	~<®gÜ™hm
>

16 
	~<c¡dšt
>

17 
	~<io¡»am
>

18 
	~<¡ršg
>

19 
	~<tu¶e
>

20 
	~<veùÜ
>

22 
	~"b’chm¬k/b’chm¬k.h
"

23 
	~"check.h
"

24 
	~"com¶ex™y.h
"

25 
	~"¡ršg_ut.h
"

26 
	~"tim”s.h
"

30 
Çme¥aû
 
	gb’chm¬k
 {

32 
	gÇme¥aû
 {

33 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> 
–em’ts
 = {

39 
	g¡d
::
¡ršg
 
CsvEsÿ³
(cÚ¡ 
¡d
::¡ršg& 
s
) {

40 
¡d
::
¡ršg
 
tmp
;

41 
	gtmp
.
»£rve
(
s
.
size
() + 2);

42 
	gc
 : 
s
) {

43 
c
) {

45 
tmp
 += "\"\"";

48 
tmp
 +ğ
c
;

52  '"' + 
	gtmp
 + '"';

55 
BENCHMARK_EXPORT


56 
boŞ
 
	gCSVR•Ü‹r
::
R•ÜtCÚ‹xt
(cÚ¡ 
CÚ‹xt
& 
cÚ‹xt
) {

57 
PrštBasicCÚ‹xt
(&
G‘E¼ÜSŒ—m
(), 
cÚ‹xt
);

58  
	gŒue
;

61 
BENCHMARK_EXPORT


62 
	gCSVR•Ü‹r
::
R•ÜtRuns
(cÚ¡ 
¡d
::
veùÜ
<
Run
>& 
»pÜts
) {

63 
¡d
::
o¡»am
& 
Out
 = 
G‘OuutSŒ—m
();

65 ià(!
	g´š‹d_h—d”_
) {

67 cÚ¡‡uto& 
	grun
 : 
»pÜts
) {

68 cÚ¡‡uto& 
út
 : 
run
.
couÁ”s
) {

69 ià(
út
.
fœ¡
 == "bytes_per_second" || cnt.first == "items_per_second")

71 
	gu£r_couÁ”_Çmes_
.
š£¹
(
út
.
fœ¡
);

76 autØ
	gB
 = 
–em’ts
.
begš
(); B !ğ–em’ts.
’d
();) {

77 
	gOut
 << *
	gB
++;

78 ià(
	gB
 !ğ
–em’ts
.
’d
()è
Out
 << ",";

80 autØ
	gB
 = 
u£r_couÁ”_Çmes_
.
begš
();

81 
	gB
 !ğ
u£r_couÁ”_Çmes_
.
’d
();) {

82 
	gOut
 << ",\"" << *
	gB
++ << "\"";

84 
	gOut
 << "\n";

86 
	g´š‹d_h—d”_
 = 
Œue
;

89 cÚ¡‡uto& 
	grun
 : 
»pÜts
) {

90 cÚ¡‡uto& 
út
 : 
run
.
couÁ”s
) {

91 ià(
út
.
fœ¡
 == "bytes_per_second" || cnt.first == "items_per_second")

93 
BM_CHECK
(
u£r_couÁ”_Çmes_
.
fšd
(
út
.
fœ¡
) !=

94 
u£r_couÁ”_Çmes_
.
’d
())

96 << "CouÁ”‚amed \"" << 
út
.
fœ¡


103 cÚ¡‡uto& 
	grun
 : 
»pÜts
) {

104 
PrštRunD©a
(
run
);

108 
BENCHMARK_EXPORT


109 
	gCSVR•Ü‹r
::
PrštRunD©a
(cÚ¡ 
Run
& 
run
) {

110 
¡d
::
o¡»am
& 
Out
 = 
G‘OuutSŒ—m
();

111 
	gOut
 << 
CsvEsÿ³
(
run
.
b’chm¬k_Çme
()) << ",";

112 ià(
	grun
.
	gsk³d
) {

113 
	gOut
 << 
	g¡d
::
¡ršg
(
–em’ts
.
size
() - 3, ',');

114 
	gOut
 << 
	g¡d
::
boŞ®pha
 << (
š‹º®
::
Sk³dW™hE¼Ü
 =ğ
run
.
sk³d
) << ",";

115 
	gOut
 << 
CsvEsÿ³
(
run
.
sk_mes§ge
) << "\n";

120 ià(!
	grun
.
	g»pÜt_big_o
 && !run.
	g»pÜt_rms
) {

121 
	gOut
 << 
	grun
.
	g™”©iÚs
;

123 
	gOut
 << ",";

125 
	gOut
 << 
	grun
.
G‘Adju¡edR—lTime
() << ",";

126 
	gOut
 << 
	grun
.
G‘Adju¡edCPUTime
() << ",";

129 ià(
	grun
.
	g»pÜt_big_o
) {

130 
	gOut
 << 
G‘BigOSŒšg
(
run
.
com¶ex™y
);

131 } ià(!
	grun
.
	g»pÜt_rms
) {

132 
	gOut
 << 
G‘TimeUn™SŒšg
(
run
.
time_un™
);

134 
	gOut
 << ",";

136 ià(
	grun
.
	gcouÁ”s
.
fšd
("by‹s_³r_£cÚd"è!ğ
run
.
couÁ”s
.
’d
()) {

137 
Out
 << 
run
.
couÁ”s
.
©
("bytes_per_second");

139 
	gOut
 << ",";

140 ià(
	grun
.
	gcouÁ”s
.
fšd
("™ems_³r_£cÚd"è!ğ
run
.
couÁ”s
.
’d
()) {

141 
Out
 << 
run
.
couÁ”s
.
©
("items_per_second");

143 
	gOut
 << ",";

144 ià(!
	grun
.
	g»pÜt_Ïb–
.
em±y
()) {

145 
	gOut
 << 
CsvEsÿ³
(
run
.
»pÜt_Ïb–
);

147 
	gOut
 << ",,";

150 cÚ¡‡uto& 
	guú
 : 
u£r_couÁ”_Çmes_
) {

151 autØ
™
 = 
run
.
couÁ”s
.
fšd
(
uú
);

152 ià(
	g™
 =ğ
run
.
couÁ”s
.
’d
()) {

153 
Out
 << ",";

155 
	gOut
 << "," << 
	g™
->
	g£cÚd
;

158 
	gOut
 << '\n';

	@third_party/benchmark/src/cycleclock.h

21 #iâdeà
BENCHMARK_CYCLECLOCK_H_


22 
	#BENCHMARK_CYCLECLOCK_H_


	)

24 
	~<c¡dšt
>

26 
	~"b’chm¬k/b’chm¬k.h
"

27 
	~"š‹º®_maüos.h
"

29 #ià
defšed
(
BENCHMARK_OS_MACOSX
)

30 
	~<mach/mach_time.h
>

39 #ià
defšed
(
COMPILER_MSVC
è&& !defšed(
_M_IX86
è&& !defšed(
_M_ARM64
) && \

40 !
	$defšed
(
_M_ARM64EC
)

41 "C" 
ušt64_t
 
	`__rdtsc
();

42 #´agm¨
	`šŒšsic
(
__rdtsc
)

45 #ià!
	`defšed
(
BENCHMARK_OS_WINDOWS
è|| defšed(
BENCHMARK_OS_MINGW
)

46 
	~<sys/time.h
>

47 
	~<time.h
>

50 #ifdeà
BENCHMARK_OS_EMSCRIPTEN


51 
	~<emsü‹n.h
>

54 
Çme¥aû
 
b’chm¬k
 {

60 
Çme¥aû
 
cyşeşock
 {

62 
šlše
 
BENCHMARK_ALWAYS_INLINE
 
št64_t
 
	`Now
() {

63 #ià
	`defšed
(
BENCHMARK_OS_MACOSX
)

73  
	`mach_absŞu‹_time
();

74 #–ià
	`defšed
(
BENCHMARK_OS_EMSCRIPTEN
)

77  
¡©ic_ÿ¡
<
št64_t
>(
	`emsü‹n_g‘_now
() * 1e+6);

78 #–ià
	`defšed
(
__i386__
)

79 
št64_t
 
»t
;

80 
__asm__
 vŞ©e("rdtsc" : "=A"(
»t
));

81  
»t
;

82 #–ià
	`defšed
(
__x86_64__
è|| defšed(
__amd64__
)

83 
ušt64_t
 
low
, 
high
;

84 
__asm__
 vŞ©e("rdtsc" : "÷"(
low
), "=d"(
high
));

85  (
high
 << 32è| 
low
;

86 #–ià
	`defšed
(
__pow”pc__
è|| defšed(
__µc__
)

88 #ià
	`defšed
(
__pow”pc64__
è|| defšed(
__µc64__
)

89 
št64_t
 
tb
;

90 
asm
 vŞ©e("mf¥¸%0, 268" : "ô"(
tb
));

91  
tb
;

93 
ušt32_t
 
tbl
, 
tbu0
, 
tbu1
;

94 
asm
 volatile(

98 : "ô"(
tbu0
), "ô"(
tbl
), "ô"(
tbu1
));

99 
tbl
 &ğ-
¡©ic_ÿ¡
<
št32_t
>(
tbu0
 =ğ
tbu1
);

101  (
¡©ic_ÿ¡
<
ušt64_t
>(
tbu1
è<< 32è| 
tbl
;

103 #–ià
	`defšed
(
__¥¬c__
)

104 
št64_t
 
tick
;

105 
	`asm
(".byte 0x83, 0x41, 0x00, 0x00");

106 
	`asm
("mov %%g1, %0" : "ô"(
tick
));

107  
tick
;

108 #–ià
	`defšed
(
__Ÿ64__
)

109 
št64_t
 
™c
;

110 
	`asm
("mov %0 =‡r.™c" : "ô"(
™c
));

111  
™c
;

112 #–ià
	`defšed
(
COMPILER_MSVC
è&& defšed(
_M_IX86
)

117 
_asm
 
rdtsc


118 #–ià
	`defšed
(
COMPILER_MSVC
è&& (defšed(
_M_ARM64
è|| defšed(
_M_ARM64EC
))

121 
št64_t
 
vœtu®_tim”_v®ue
;

122 
vœtu®_tim”_v®ue
 = 
	`_R—dStusReg
(
ARM64_CNTVCT
);

123  
vœtu®_tim”_v®ue
;

124 #–ià
	`defšed
(
COMPILER_MSVC
)

125  
	`__rdtsc
();

126 #–ià
	`defšed
(
BENCHMARK_OS_NACL
)

139 
time¥ec
 
ts
 = {0, 0};

140 
	`şock_g‘time
(
CLOCK_MONOTONIC
, &
ts
);

141  
¡©ic_ÿ¡
<
št64_t
>(
ts
.
tv_£c
è* 1000000000 +s.
tv_n£c
;

142 #–ià
	`defšed
(
__¯rch64__
)

147 
št64_t
 
vœtu®_tim”_v®ue
;

148 
asm
 vŞ©e("mr %0, cÁvù_–0" : "ô"(
vœtu®_tim”_v®ue
));

149  
vœtu®_tim”_v®ue
;

150 #–ià
	`defšed
(
__ARM_ARCH
)

153 #ià(
__ARM_ARCH
 >= 6)

154 
ušt32_t
 
pmcúŒ
;

155 
ušt32_t
 
pmu£»n
;

156 
ušt32_t
 
pmú‹n£t
;

158 
asm
 vŞ©e("mrøp15, 0, %0, c9, c14, 0" : "ô"(
pmu£»n
));

159 ià(
pmu£»n
 & 1) {

160 
asm
 vŞ©e("mrøp15, 0, %0, c9, c12, 1" : "ô"(
pmú‹n£t
));

161 ià(
pmú‹n£t
 & 0x80000000ul) {

162 
asm
 vŞ©e("mrøp15, 0, %0, c9, c13, 0" : "ô"(
pmcúŒ
));

164  
¡©ic_ÿ¡
<
št64_t
>(
pmcúŒ
) * 64;

168 
timev®
 
tv
;

169 
	`g‘timeofday
(&
tv
, 
nuÎ±r
);

170  
¡©ic_ÿ¡
<
št64_t
>(
tv
.
tv_£c
è* 1000000 +v.
tv_u£c
;

171 #–ià
	`defšed
(
__ms__
è|| defšed(
__m68k__
)

174 
timev®
 
tv
;

175 
	`g‘timeofday
(&
tv
, 
nuÎ±r
);

176  
¡©ic_ÿ¡
<
št64_t
>(
tv
.
tv_£c
è* 1000000 +v.
tv_u£c
;

177 #–ià
	`defšed
(
__loÚg¬ch__
è|| defšed(
__csky__
)

178 
timev®
 
tv
;

179 
	`g‘timeofday
(&
tv
, 
nuÎ±r
);

180  
¡©ic_ÿ¡
<
št64_t
>(
tv
.
tv_£c
è* 1000000 +v.
tv_u£c
;

181 #–ià
	`defšed
(
__s390__
)

183 
ušt64_t
 
tsc
;

184 #ià
	`defšed
(
BENCHMARK_OS_ZOS
è&& defšed(
COMPILER_IBMXL
)

186 
	`asm
(" stck %0" : "=m"(
tsc
) : : "cc");

188 
	`asm
("¡ck %0" : "=Q"(
tsc
) : : "cc");

190  
tsc
;

191 #–ià
	`defšed
(
__riscv
)

193 #ià
__riscv_xËn
 == 32

194 
ušt32_t
 
cyşes_lo
, 
cyşes_hi0
, 
cyşes_hi1
;

197 
asm
 volatile(

205 : "ô"(
cyşes_hi0
), "ô"(
cyşes_lo
), "ô"(
cyşes_hi1
));

206  (
¡©ic_ÿ¡
<
ušt64_t
>(
cyşes_hi1
è<< 32è| 
cyşes_lo
;

208 
ušt64_t
 
cyşes
;

209 
asm
 vŞ©e("rdcyş%0" : "ô"(
cyşes
));

210  
cyşes
;

212 #–ià
	`defšed
(
__e2k__
è|| defšed(
__–brus__
)

213 
timev®
 
tv
;

214 
	`g‘timeofday
(&
tv
, 
nuÎ±r
);

215  
¡©ic_ÿ¡
<
št64_t
>(
tv
.
tv_£c
è* 1000000 +v.
tv_u£c
;

216 #–ià
	`defšed
(
__hexagÚ__
)

217 
ušt64_t
 
pcyşe
;

218 
asm
 vŞ©e("%0 = C15:14" : "ô"(
pcyşe
));

219  
¡©ic_ÿ¡
<>(
pcyşe
);

224 #”rÜ 
You
 
Ãed
 
to
 
defše
 
CyşeTim”
 
your
 
OS
 
ªd
 
CPU


228 
	}
}

	@third_party/benchmark/src/internal_macros.h

1 #iâdeà
BENCHMARK_INTERNAL_MACROS_H_


2 
	#BENCHMARK_INTERNAL_MACROS_H_


	)

5 
	~<c¡dlib
>

9 #iâdeà
__has_ã©u»


10 
	#__has_ã©u»
(
x
è0

	)

13 #ià
defšed
(
__şªg__
)

14 #ià
defšed
(
__ibmxl__
)

15 #ià!
defšed
(
COMPILER_IBMXL
)

16 
	#COMPILER_IBMXL


	)

18 #–ià!
defšed
(
COMPILER_CLANG
)

19 
	#COMPILER_CLANG


	)

21 #–ià
defšed
(
_MSC_VER
)

22 #ià!
defšed
(
COMPILER_MSVC
)

23 
	#COMPILER_MSVC


	)

25 #–ià
defšed
(
__GNUC__
)

26 #ià!
defšed
(
COMPILER_GCC
)

27 
	#COMPILER_GCC


	)

31 #ià
__has_ã©u»
(
cxx_©Œibu‹s
)

32 
	#BENCHMARK_NORETURN
 [[
nÜ‘uº
]]

	)

33 #–ià
defšed
(
__GNUC__
)

34 
	#BENCHMARK_NORETURN
 
	`__©Œibu‹__
((
nÜ‘uº
))

	)

35 #–ià
defšed
(
COMPILER_MSVC
)

36 
	#BENCHMARK_NORETURN
 
	`__deş¥ec
(
nÜ‘uº
)

	)

38 
	#BENCHMARK_NORETURN


	)

41 #ià
defšed
(
__CYGWIN__
)

42 
	#BENCHMARK_OS_CYGWIN
 1

	)

43 #–ià
defšed
(
_WIN32
)

44 
	#BENCHMARK_OS_WINDOWS
 1

	)

47 
	#NOMINMAX


	)

48 
	~<wšdows.h
>

49 #ià
defšed
(
WINAPI_FAMILY_PARTITION
)

50 #ià
WINAPI_FAMILY_PARTITION
(
WINAPI_PARTITION_DESKTOP
)

51 
	#BENCHMARK_OS_WINDOWS_WIN32
 1

	)

52 #–ià
WINAPI_FAMILY_PARTITION
(
WINAPI_PARTITION_APP
)

53 
	#BENCHMARK_OS_WINDOWS_RT
 1

	)

56 #ià
defšed
(
__MINGW32__
)

57 
	#BENCHMARK_OS_MINGW
 1

	)

59 #–ià
defšed
(
__APPLE__
)

60 
	#BENCHMARK_OS_APPLE
 1

	)

61 
	~"T¬g‘CÚd™iÚ®s.h
"

62 #ià
defšed
(
TARGET_OS_MAC
)

63 
	#BENCHMARK_OS_MACOSX
 1

	)

64 #ià
defšed
(
TARGET_OS_IPHONE
)

65 
	#BENCHMARK_OS_IOS
 1

	)

68 #–ià
defšed
(
__F»eBSD__
)

69 
	#BENCHMARK_OS_FREEBSD
 1

	)

70 #–ià
defšed
(
__N‘BSD__
)

71 
	#BENCHMARK_OS_NETBSD
 1

	)

72 #–ià
defšed
(
__O³nBSD__
)

73 
	#BENCHMARK_OS_OPENBSD
 1

	)

74 #–ià
defšed
(
__D¿gÚFly__
)

75 
	#BENCHMARK_OS_DRAGONFLY
 1

	)

76 #–ià
defšed
(
__lšux__
)

77 
	#BENCHMARK_OS_LINUX
 1

	)

78 #–ià
defšed
(
__Çtive_ş›Á__
)

79 
	#BENCHMARK_OS_NACL
 1

	)

80 #–ià
defšed
(
__EMSCRIPTEN__
)

81 
	#BENCHMARK_OS_EMSCRIPTEN
 1

	)

82 #–ià
defšed
(
__¹ems__
)

83 
	#BENCHMARK_OS_RTEMS
 1

	)

84 #–ià
defšed
(
__FuchsŸ__
)

85 
	#BENCHMARK_OS_FUCHSIA
 1

	)

86 #–ià
defšed
 (
__SVR4
è&& defšed (
__sun
)

87 
	#BENCHMARK_OS_SOLARIS
 1

	)

88 #–ià
defšed
(
__QNX__
)

89 
	#BENCHMARK_OS_QNX
 1

	)

90 #–ià
defšed
(
__MVS__
)

91 
	#BENCHMARK_OS_ZOS
 1

	)

92 #–ià
defšed
(
__hexagÚ__
)

93 
	#BENCHMARK_OS_QURT
 1

	)

96 #ià
defšed
(
__ANDROID__
è&& defšed(
__GLIBCXX__
)

97 
	#BENCHMARK_STL_ANDROID_GNUSTL
 1

	)

100 #ià!
__has_ã©u»
(
cxx_exû±iÚs
è&& !
defšed
(
__ıp_exû±iÚs
) \

101 && !
	$defšed
(
__EXCEPTIONS
)

102 
	#BENCHMARK_HAS_NO_EXCEPTIONS


	)

105 #ià
	`defšed
(
COMPILER_CLANG
è|| defšed(
COMPILER_GCC
)

106 
	#BENCHMARK_MAYBE_UNUSED
 
	`__©Œibu‹__
((
unu£d
))

	)

108 
	#BENCHMARK_MAYBE_UNUSED


	)

	@third_party/benchmark/src/json_reporter.cc

15 
	~<®gÜ™hm
>

16 
	~<cm©h
>

17 
	~<c¡dšt
>

18 
	~<iomª
>

19 
	~<io¡»am
>

20 
	~<lim™s
>

21 
	~<¡ršg
>

22 
	~<tu¶e
>

23 
	~<veùÜ
>

25 
	~"b’chm¬k/b’chm¬k.h
"

26 
	~"com¶ex™y.h
"

27 
	~"¡ršg_ut.h
"

28 
	~"tim”s.h
"

30 
Çme¥aû
 
	gb’chm¬k
 {

31 
	gÇme¥aû
 {

33 
	g¡d
::
¡ršg
 
SŒEsÿ³
(cÚ¡ 
¡d
::¡ršg& 
s
) {

34 
¡d
::
¡ršg
 
tmp
;

35 
	gtmp
.
»£rve
(
s
.
size
());

36 
	gc
 : 
s
) {

37 
c
) {

39 
tmp
 += "\\b";

42 
tmp
 += "\\f";

45 
tmp
 += "\\n";

48 
tmp
 += "\\r";

51 
tmp
 += "\\t";

54 
tmp
 += "\\\\";

57 
tmp
 += "\\\"";

60 
tmp
 +ğ
c
;

64  
	gtmp
;

67 
	g¡d
::
¡ršg
 
FÜm©KV
(
¡d
::¡ršg cÚ¡& 
key
, std::¡ršg cÚ¡& 
v®ue
) {

68  
SŒFÜm©
("\"%s\": \"%s\"", 
SŒEsÿ³
(
key
).
c_¡r
(),

69 
SŒEsÿ³
(
v®ue
).
c_¡r
());

72 
	g¡d
::
¡ršg
 
FÜm©KV
(
¡d
::¡ršg cÚ¡& 
key
, cÚ¡ * 
v®ue
) {

73  
SŒFÜm©
("\"%s\": \"%s\"", 
SŒEsÿ³
(
key
).
c_¡r
(),

74 
SŒEsÿ³
(
v®ue
).
c_¡r
());

77 
	g¡d
::
¡ršg
 
FÜm©KV
(
¡d
::¡ršg cÚ¡& 
key
, 
boŞ
 
v®ue
) {

78  
SŒFÜm©
("\"%s\": %s", 
SŒEsÿ³
(
key
).
c_¡r
(),

79 
v®ue
 ? "true" : "false");

82 
	g¡d
::
¡ršg
 
FÜm©KV
(
¡d
::¡ršg cÚ¡& 
key
, 
št64_t
 
v®ue
) {

83 
	g¡d
::
¡ršg¡»am
 
ss
;

84 
	gss
 << '"' << 
SŒEsÿ³
(
key
è<< "\": " << 
	gv®ue
;

85  
	gss
.
¡r
();

88 
	g¡d
::
¡ršg
 
FÜm©KV
(
¡d
::¡ršg cÚ¡& 
key
, 
v®ue
) {

89 
	g¡d
::
¡ršg¡»am
 
ss
;

90 
	gss
 << '"' << 
SŒEsÿ³
(
key
) << "\": ";

92 ià(
	g¡d
::
i¢ª
(
v®ue
))

93 
ss
 << (
v®ue
 < 0 ? "-" : "") << "NaN";

94 ià(
	g¡d
::
isšf
(
v®ue
))

95 
ss
 << (
v®ue
 < 0 ? "-" : "") << "Infinity";

97 cÚ¡‡utØ
	gmax_dig™s10
 =

98 
¡d
::
num”ic_lim™s
<
deşty³
(
v®ue
)>::
max_dig™s10
;

99 cÚ¡‡utØ
	gmax_äaùiÚ®_dig™s10
 = 
max_dig™s10
 - 1;

100 
	gss
 << 
	g¡d
::
sc›Áific
 << 
¡d
::
£»cisiÚ
(
max_äaùiÚ®_dig™s10
)

101 << 
v®ue
;

103  
	gss
.
¡r
();

106 
št64_t
 
RoundDoubË
(
v
è{  
	g¡d
::
Ìound
(v); }

110 
boŞ
 
	gJSONR•Ü‹r
::
R•ÜtCÚ‹xt
(cÚ¡ 
CÚ‹xt
& 
cÚ‹xt
) {

111 
¡d
::
o¡»am
& 
out
 = 
G‘OuutSŒ—m
();

113 
	gout
 << "{\n";

114 
	g¡d
::
¡ršg
 
šÃr_šd’t
(2, ' ');

117 
	gout
 << 
	gšÃr_šd’t
 << "\"context\": {\n";

118 
	g¡d
::
¡ršg
 
šd’t
(4, ' ');

120 
	g¡d
::
¡ršg
 
w®Éime_v®ue
 = 
LoÿlD©eTimeSŒšg
();

121 
	gout
 << 
	gšd’t
 << 
FÜm©KV
("d©e", 
w®Éime_v®ue
) << ",\n";

123 
	gout
 << 
	gšd’t
 << 
FÜm©KV
("ho¡_Çme", 
cÚ‹xt
.
sys_šfo
.
Çme
) << ",\n";

125 ià(
	gCÚ‹xt
::
execubË_Çme
) {

126 
out
 << 
šd’t
 << 
FÜm©KV
("execubË", 
CÚ‹xt
::
execubË_Çme
) << ",\n";

129 
CPUInfo
 cÚ¡& 
	gšfo
 = 
cÚ‹xt
.
ıu_šfo
;

130 
	gout
 << 
	gšd’t
 << 
FÜm©KV
("num_ıus", 
¡©ic_ÿ¡
<
št64_t
>(
šfo
.
num_ıus
))

132 
	gout
 << 
	gšd’t


133 << 
FÜm©KV
("mhz_per_cpu",

134 
RoundDoubË
(
šfo
.
cyşes_³r_£cÚd
 / 1000000.0))

136 ià(
	gCPUInfo
::
Sÿlšg
::
UNKNOWN
 !ğ
šfo
.
sÿlšg
) {

137 
out
 << 
šd’t


138 << 
FÜm©KV
("cpu_scaling_enabled",

139 
šfo
.
sÿlšg
 =ğ
CPUInfo
::
Sÿlšg
::
ENABLED
 ? 
Œue
 : 
çl£
)

143 
	gout
 << 
	gšd’t
 << "\"caches\": [\n";

144 
	gšd’t
 = 
¡d
::
¡ršg
(6, ' ');

145 
	g¡d
::
¡ršg
 
ÿche_šd’t
(8, ' ');

146 
size_t
 
	gi
 = 0; i < 
	gšfo
.
	gÿches
.
size
(); ++i) {

147 auto& 
	gCI
 = 
šfo
.
ÿches
[
i
];

148 
	gout
 << 
	gšd’t
 << "{\n";

149 
	gout
 << 
	gÿche_šd’t
 << 
FÜm©KV
("ty³", 
CI
.
ty³
) << ",\n";

150 
	gout
 << 
	gÿche_šd’t
 << 
FÜm©KV
("Ëv–", 
¡©ic_ÿ¡
<
št64_t
>(
CI
.
Ëv–
))

152 
	gout
 << 
	gÿche_šd’t
 << 
FÜm©KV
("size", 
¡©ic_ÿ¡
<
št64_t
>(
CI
.
size
))

154 
	gout
 << 
	gÿche_šd’t


155 << 
FÜm©KV
("num_sh¬šg", 
¡©ic_ÿ¡
<
št64_t
>(
CI
.
num_sh¬šg
))

157 
	gout
 << 
	gšd’t
 << "}";

158 ià(
	gi
 !ğ
šfo
.
ÿches
.
size
(è- 1è
out
 << ",";

159 
	gout
 << "\n";

161 
	gšd’t
 = 
¡d
::
¡ršg
(4, ' ');

162 
	gout
 << 
	gšd’t
 << "],\n";

163 
	gout
 << 
	gšd’t
 << "\"load_avg\": [";

164 autØ
	g™
 = 
šfo
.
lßd_avg
.
begš
(); iˆ!ğšfo.lßd_avg.
’d
();) {

165 
	gout
 << *
	g™
++;

166 ià(
	g™
 !ğ
šfo
.
lßd_avg
.
’d
()è
out
 << ",";

168 
	gout
 << "],\n";

170 #ià
defšed
(
NDEBUG
)

171 cÚ¡ 
	gbud_ty³
[] = "release";

173 cÚ¡ 
	gbud_ty³
[] = "debug";

175 
	gout
 << 
	gšd’t
 << 
FÜm©KV
("lib¿ry_bud_ty³", 
bud_ty³
);

177 
	g¡d
::
m­
<
¡d
::
¡ršg
, std::¡ršg>* 
glob®_cÚ‹xt
 =

178 
š‹º®
::
G‘Glob®CÚ‹xt
();

180 ià(
	gglob®_cÚ‹xt
 !ğ
nuÎ±r
) {

181 cÚ¡‡uto& 
kv
 : *
glob®_cÚ‹xt
) {

182 
out
 << ",\n";

183 
	gout
 << 
	gšd’t
 << 
FÜm©KV
(
kv
.
fœ¡
, kv.
£cÚd
);

186 
	gout
 << "\n";

189 
	gout
 << 
	gšÃr_šd’t
 << "},\n";

190 
	gout
 << 
	gšÃr_šd’t
 << "\"benchmarks\": [\n";

191  
	gŒue
;

194 
	gJSONR•Ü‹r
::
R•ÜtRuns
(
¡d
::
veùÜ
<
Run
> cÚ¡& 
»pÜts
) {

195 ià(
»pÜts
.
em±y
()) {

198 
	g¡d
::
¡ršg
 
šd’t
(4, ' ');

199 
	g¡d
::
o¡»am
& 
out
 = 
G‘OuutSŒ—m
();

200 ià(!
	gfœ¡_»pÜt_
) {

201 
	gout
 << ",\n";

203 
	gfœ¡_»pÜt_
 = 
çl£
;

205 autØ
	g™
 = 
»pÜts
.
begš
(); iˆ!ğ»pÜts.
’d
(); ++it) {

206 
	gout
 << 
	gšd’t
 << "{\n";

207 
PrštRunD©a
(*
™
);

208 
	gout
 << 
	gšd’t
 << '}';

209 autØ
	g™_ı
 = 
™
;

210 ià(++
	g™_ı
 !ğ
»pÜts
.
’d
()) {

211 
out
 << ",\n";

216 
	gJSONR•Ü‹r
::
Fš®ize
() {

218 
G‘OuutSŒ—m
() << "\n ]\n}\n";

221 
	gJSONR•Ü‹r
::
PrštRunD©a
(
Run
 cÚ¡& 
run
) {

222 
¡d
::
¡ršg
 
šd’t
(6, ' ');

223 
	g¡d
::
o¡»am
& 
out
 = 
G‘OuutSŒ—m
();

224 
	gout
 << 
	gšd’t
 << 
FÜm©KV
("Çme", 
run
.
b’chm¬k_Çme
()) << ",\n";

225 
	gout
 << 
	gšd’t
 << 
FÜm©KV
("çmy_šdex", 
run
.
çmy_šdex
) << ",\n";

226 
	gout
 << 
	gšd’t


227 << 
FÜm©KV
("³r_çmy_š¡ªû_šdex", 
run
.
³r_çmy_š¡ªû_šdex
)

229 
	gout
 << 
	gšd’t
 << 
FÜm©KV
("run_Çme", 
run
.
run_Çme
.
¡r
()) << ",\n";

230 
	gout
 << 
	gšd’t
 << 
FÜm©KV
("run_ty³", [&
run
]() -> const * {

231 
run
.
run_ty³
) {

232 
B’chm¬kR•Ü‹r
::
Run
::
RT_I‹¿tiÚ
:

234 
B’chm¬kR•Ü‹r
::
Run
::
RT_Agg»g©e
:

237 
BENCHMARK_UNREACHABLE
();

239 
	gout
 << 
	gšd’t
 << 
FÜm©KV
("»³t™iÚs", 
run
.
»³t™iÚs
) << ",\n";

240 ià(
	grun
.
	grun_ty³
 !ğ
B’chm¬kR•Ü‹r
::
Run
::
RT_Agg»g©e
) {

241 
out
 << 
šd’t
 << 
FÜm©KV
("»³t™iÚ_šdex", 
run
.
»³t™iÚ_šdex
)

244 
	gout
 << 
	gšd’t
 << 
FÜm©KV
("th»ads", 
run
.
th»ads
) << ",\n";

245 ià(
	grun
.
	grun_ty³
 =ğ
B’chm¬kR•Ü‹r
::
Run
::
RT_Agg»g©e
) {

246 
out
 << 
šd’t
 << 
FÜm©KV
("agg»g©e_Çme", 
run
.
agg»g©e_Çme
) << ",\n";

247 
	gout
 << 
	gšd’t
 << 
FÜm©KV
("agg»g©e_un™", [&
run
]() -> const * {

248 
run
.
agg»g©e_un™
) {

249 
Sti¡icUn™
::
kTime
:

251 
Sti¡icUn™
::
kP”ûÁage
:

254 
BENCHMARK_UNREACHABLE
();

257 ià(
	gš‹º®
::
Sk³dW™hE¼Ü
 =ğ
run
.
sk³d
) {

258 
out
 << 
šd’t
 << 
FÜm©KV
("”rÜ_occu¼ed", 
Œue
) << ",\n";

259 
	gout
 << 
	gšd’t
 << 
FÜm©KV
("”rÜ_mes§ge", 
run
.
sk_mes§ge
) << ",\n";

260 } ià(
	gš‹º®
::
Sk³dW™hMes§ge
 =ğ
run
.
sk³d
) {

261 
out
 << 
šd’t
 << 
FÜm©KV
("sk³d", 
Œue
) << ",\n";

262 
	gout
 << 
	gšd’t
 << 
FÜm©KV
("sk_mes§ge", 
run
.
sk_mes§ge
) << ",\n";

264 ià(!
	grun
.
	g»pÜt_big_o
 && !run.
	g»pÜt_rms
) {

265 
	gout
 << 
	gšd’t
 << 
FÜm©KV
("™”©iÚs", 
run
.
™”©iÚs
) << ",\n";

266 ià(
	grun
.
	grun_ty³
 !ğ
Run
::
RT_Agg»g©e
 ||

267 
run
.
agg»g©e_un™
 =ğ
Sti¡icUn™
::
kTime
) {

268 
out
 << 
šd’t
 << 
FÜm©KV
("»®_time", 
run
.
G‘Adju¡edR—lTime
())

270 
	gout
 << 
	gšd’t
 << 
FÜm©KV
("ıu_time", 
run
.
G‘Adju¡edCPUTime
());

272 
as£¹
(
run
.
agg»g©e_un™
 =ğ
Sti¡icUn™
::
kP”ûÁage
);

273 
	gout
 << 
	gšd’t
 << 
FÜm©KV
("»®_time", 
run
.
»®_accumuÏ‹d_time
)

275 
	gout
 << 
	gšd’t
 << 
FÜm©KV
("ıu_time", 
run
.
ıu_accumuÏ‹d_time
);

277 
	gout
 << ",\n"

278 << 
	gšd’t
 << 
FÜm©KV
("time_un™", 
G‘TimeUn™SŒšg
(
run
.
time_un™
));

279 } ià(
	grun
.
	g»pÜt_big_o
) {

280 
	gout
 << 
	gšd’t
 << 
FÜm©KV
("ıu_cÛffic›Á", 
run
.
G‘Adju¡edCPUTime
())

282 
	gout
 << 
	gšd’t
 << 
FÜm©KV
("»®_cÛffic›Á", 
run
.
G‘Adju¡edR—lTime
())

284 
	gout
 << 
	gšd’t
 << 
FÜm©KV
("big_o", 
G‘BigOSŒšg
(
run
.
com¶ex™y
)) << ",\n";

285 
	gout
 << 
	gšd’t
 << 
FÜm©KV
("time_un™", 
G‘TimeUn™SŒšg
(
run
.
time_un™
));

286 } ià(
	grun
.
	g»pÜt_rms
) {

287 
	gout
 << 
	gšd’t
 << 
FÜm©KV
("rms", 
run
.
G‘Adju¡edCPUTime
());

290 auto& 
	gc
 : 
run
.
couÁ”s
) {

291 
out
 << ",\n" << 
šd’t
 << 
FÜm©KV
(
c
.
fœ¡
, c.
£cÚd
);

294 ià(
	grun
.
	gmemÜy_»suÉ
) {

295 cÚ¡ 
	gMemÜyMªag”
::
ResuÉ
 
memÜy_»suÉ
 = *
run
.memory_result;

296 
	gout
 << ",\n" << 
	gšd’t
 << 
FÜm©KV
("®locs_³r_™”", 
run
.
®locs_³r_™”
);

297 
	gout
 << ",\n"

298 << 
	gšd’t
 << 
FÜm©KV
("max_by‹s_u£d", 
memÜy_»suÉ
.
max_by‹s_u£d
);

300 autØ
	g»pÜt_if_´e£Á
 = [&
out
, &
šd’t
](cÚ¡ 
	g¡d
::
¡ršg
& 
Ïb–
,

301 
št64_t
 
	gv®
) {

302 ià(
	gv®
 !ğ
MemÜyMªag”
::
Tomb¡ÚeV®ue
)

303 
out
 << ",\n" << 
šd’t
 << 
FÜm©KV
(
Ïb–
, 
v®
);

306 
»pÜt_if_´e£Á
("total_allocated_bytes",

307 
memÜy_»suÉ
.
tÙ®_®loÿ‹d_by‹s
);

308 
»pÜt_if_´e£Á
("Ãt_h—p_growth", 
memÜy_»suÉ
.
Ãt_h—p_growth
);

311 ià(!
	grun
.
	g»pÜt_Ïb–
.
em±y
()) {

312 
	gout
 << ",\n" << 
	gšd’t
 << 
FÜm©KV
("Ïb–", 
run
.
»pÜt_Ïb–
);

314 
	gout
 << '\n';

317 cÚ¡ 
št64_t
 
	gMemÜyMªag”
::
Tomb¡ÚeV®ue
 =

318 
¡d
::
num”ic_lim™s
<
št64_t
>::
max
();

	@third_party/benchmark/src/log.h

1 #iâdeà
BENCHMARK_LOG_H_


2 
	#BENCHMARK_LOG_H_


	)

4 
	~<io¡»am
>

5 
	~<o¡»am
>

10 #ià
__ılu¥lus
 >ğ201103L || (
defšed
(
_MSVC_LANG
) && _MSVC_LANG >= 201103L)

11 
	#BENCHMARK_HAS_CXX11


	)

14 
Çme¥aû
 
	gb’chm¬k
 {

15 
Çme¥aû
 
	gš‹º®
 {

17 
	g¡d
::
	tbasic_o¡»am
<>&(
	tEndLTy³
)(
	t¡d
::basic_ostream<>&);

19 şas 
	cLogTy³
 {

20 
ä›nd
 
	gLogTy³
& 
G‘NuÎLogIn¡ªû
();

21 
ä›nd
 
	gLogTy³
& 
G‘E¼ÜLogIn¡ªû
();

24 
	g‹m¶©e
 <
şass
 
	gTp
>

25 
ä›nd
 
	gLogTy³
& 
	gİ”©Ü
<<(LogTy³&, 
Tp
 const&);

26 
ä›nd
 
	gLogTy³
& 
	gİ”©Ü
<<(LogTy³&, 
	gEndLTy³
*);

28 
	g´iv©e
:

29 
LogTy³
(
¡d
::
o¡»am
* 
out
è: 
out_
(out) {}

30 
¡d
::
o¡»am
* 
out_
;

34 #iâdeà
BENCHMARK_HAS_CXX11


35 
LogTy³
(const LogType&);

36 
	gLogTy³
& 
	gİ”©Ü
=(cÚ¡ 
LogTy³
&);

38 
LogTy³
(cÚ¡ LogTy³&èğ
d–‘e
;

39 
	gLogTy³
& 
	gİ”©Ü
=(cÚ¡ 
LogTy³
&èğ
d–‘e
;

43 
	g‹m¶©e
 <
şass
 
	gTp
>

44 
	gLogTy³
& 
	gİ”©Ü
<<(LogTy³& 
	glog
, 
Tp
 cÚ¡& 
	gv®ue
) {

45 ià(
	glog
.
	gout_
) {

46 *
	glog
.
	gout_
 << 
	gv®ue
;

48  
	glog
;

51 
šlše
 
	gLogTy³
& 
	gİ”©Ü
<<(LogTy³& 
	glog
, 
EndLTy³
* 
	gm
) {

52 ià(
	glog
.
	gout_
) {

53 *
	glog
.
	gout_
 << 
	gm
;

55  
	glog
;

58 
šlše
 & 
LogLev–
() {

59 
	glog_Ëv–
 = 0;

60  
	glog_Ëv–
;

63 
šlše
 
	gLogTy³
& 
G‘NuÎLogIn¡ªû
() {

64 
LogTy³
 
nuÎ_log
((
¡d
::
o¡»am
*)
nuÎ±r
);

65  
	gnuÎ_log
;

68 
šlše
 
	gLogTy³
& 
G‘E¼ÜLogIn¡ªû
() {

69 
LogTy³
 
”rÜ_log
(&
¡d
::
şog
);

70  
	g”rÜ_log
;

73 
šlše
 
	gLogTy³
& 
G‘LogIn¡ªûFÜLev–
(
Ëv–
) {

74 ià(
	gËv–
 <ğ
LogLev–
()) {

75  
G‘E¼ÜLogIn¡ªû
();

77  
G‘NuÎLogIn¡ªû
();

84 
	#BM_VLOG
(
x
) \

85 (::
b’chm¬k
::
š‹º®
::
	`G‘LogIn¡ªûFÜLev–
(
x
) << "-- LOG(" << x << "):" \

86 " ")

	)

	@third_party/benchmark/src/mutex.h

1 #iâdeà
BENCHMARK_MUTEX_H_


2 
	#BENCHMARK_MUTEX_H_


	)

4 
	~<cÚd™iÚ_v¬ŸbË
>

5 
	~<mu‹x
>

7 
	~"check.h
"

11 #ià
defšed
(
HAVE_THREAD_SAFETY_ATTRIBUTES
)

12 
	#THREAD_ANNOTATION_ATTRIBUTE_
(
x
è
	`__©Œibu‹__
((x))

	)

14 
	#THREAD_ANNOTATION_ATTRIBUTE_
(
x
)

16 

	)

17 
	#CAPABILITY
(
x
è
	`THREAD_ANNOTATION_ATTRIBUTE_
(
	`ÿ·b™y
(x))

	)

19 
	#SCOPED_CAPABILITY
 
	`THREAD_ANNOTATION_ATTRIBUTE_
(
scİed_lockabË
)

	)

21 
	#GUARDED_BY
(
x
è
	`THREAD_ANNOTATION_ATTRIBUTE_
(
	`gu¬ded_by
(x))

	)

23 
	#PT_GUARDED_BY
(
x
è
	`THREAD_ANNOTATION_ATTRIBUTE_
(
	`±_gu¬ded_by
(x))

	)

25 
	#ACQUIRED_BEFORE
(...) \

26 
	`THREAD_ANNOTATION_ATTRIBUTE_
(
	`acquœed_befÜe
(
__VA_ARGS__
))

	)

28 
	#ACQUIRED_AFTER
(...) \

29 
	`THREAD_ANNOTATION_ATTRIBUTE_
(
	`acquœed_aá”
(
__VA_ARGS__
))

	)

31 
	#REQUIRES
(...) \

32 
	`THREAD_ANNOTATION_ATTRIBUTE_
(
	`»quœes_ÿ·b™y
(
__VA_ARGS__
))

	)

34 
	#REQUIRES_SHARED
(...) \

35 
	`THREAD_ANNOTATION_ATTRIBUTE_
(
	`»quœes_sh¬ed_ÿ·b™y
(
__VA_ARGS__
))

	)

37 
	#ACQUIRE
(...) \

38 
	`THREAD_ANNOTATION_ATTRIBUTE_
(
	`acquœe_ÿ·b™y
(
__VA_ARGS__
))

	)

40 
	#ACQUIRE_SHARED
(...) \

41 
	`THREAD_ANNOTATION_ATTRIBUTE_
(
	`acquœe_sh¬ed_ÿ·b™y
(
__VA_ARGS__
))

	)

43 
	#RELEASE
(...) \

44 
	`THREAD_ANNOTATION_ATTRIBUTE_
(
	`»Ëa£_ÿ·b™y
(
__VA_ARGS__
))

	)

46 
	#RELEASE_SHARED
(...) \

47 
	`THREAD_ANNOTATION_ATTRIBUTE_
(
	`»Ëa£_sh¬ed_ÿ·b™y
(
__VA_ARGS__
))

	)

49 
	#TRY_ACQUIRE
(...) \

50 
	`THREAD_ANNOTATION_ATTRIBUTE_
(
	`Œy_acquœe_ÿ·b™y
(
__VA_ARGS__
))

	)

52 
	#TRY_ACQUIRE_SHARED
(...) \

53 
	`THREAD_ANNOTATION_ATTRIBUTE_
(
	`Œy_acquœe_sh¬ed_ÿ·b™y
(
__VA_ARGS__
))

	)

55 
	#EXCLUDES
(...è
	`THREAD_ANNOTATION_ATTRIBUTE_
(
	`locks_exşuded
(
__VA_ARGS__
))

	)

57 
	#ASSERT_CAPABILITY
(
x
è
	`THREAD_ANNOTATION_ATTRIBUTE_
(
	`as£¹_ÿ·b™y
(x))

	)

59 
	#ASSERT_SHARED_CAPABILITY
(
x
) \

60 
	`THREAD_ANNOTATION_ATTRIBUTE_
(
	`as£¹_sh¬ed_ÿ·b™y
(
x
))

	)

62 
	#RETURN_CAPABILITY
(
x
è
	`THREAD_ANNOTATION_ATTRIBUTE_
(
	`lock_»tuºed
(x))

	)

64 
	#NO_THREAD_SAFETY_ANALYSIS
 \

65 
	`THREAD_ANNOTATION_ATTRIBUTE_
(
no_th»ad_§ãty_ª®ysis
)

	)

67 
Çme¥aû
 
	gb’chm¬k
 {

69 
	g¡d
::
	tcÚd™iÚ_v¬ŸbË
 
	tCÚd™iÚ
;

75 
şass
 
CAPABILITY
("mu‹x"è
	gMu‹x
 {

76 
	gpublic
:

77 
Mu‹x
() {}

79 
lock
(è
ACQUIRE
(è{ 
mut_
.lock(); }

80 
uÆock
(è
RELEASE
(è{ 
	gmut_
.unlock(); }

81 
	g¡d
::
mu‹x
& 
Çtive_hªdË
(è{  
mut_
; }

83 
	g´iv©e
:

84 
¡d
::
mu‹x
 
mut_
;

87 şas 
	cSCOPED_CAPABILITY
 
	gMu‹xLock
 {

88 
	g¡d
::
	tunique_lock
<
	t¡d
::
	tmu‹x
> 
	tMu‹xLockImp
;

90 
	gpublic
:

91 
Mu‹xLock
(
Mu‹x
& 
m
è
ACQUIRE
(mè: 
ml_
(m.
Çtive_hªdË
()) {}

92 ~
Mu‹xLock
(è
RELEASE
() {}

93 
Mu‹xLockImp
& 
Çtive_hªdË
(è{  
ml_
; }

95 
	g´iv©e
:

96 
Mu‹xLockImp
 
ml_
;

99 şas 
	cB¬r›r
 {

100 
	gpublic
:

101 
B¬r›r
(
num_th»ads
è: 
ruÂšg_th»ads_
(num_threads) {}

104 
boŞ
 
wa™
(è
EXCLUDES
(
lock_
) {

105 
boŞ
 
Ï¡_th»ad
 = 
çl£
;

107 
Mu‹xLock
 
ml
(
lock_
);

108 
	gÏ¡_th»ad
 = 
ü—‹B¬r›r
(
ml
);

110 ià(
	gÏ¡_th»ad
è
	gpha£_cÚd™iÚ_
.
nÙify_®l
();

111  
	gÏ¡_th»ad
;

114 
»moveTh»ad
(è
EXCLUDES
(
lock_
) {

115 
Mu‹xLock
 
ml
(
lock_
);

116 --
	gruÂšg_th»ads_
;

117 ià(
	g’‹»d_
 !ğ0è
pha£_cÚd™iÚ_
.
nÙify_®l
();

120 
	g´iv©e
:

121 
Mu‹x
 
lock_
;

122 
CÚd™iÚ
 
	gpha£_cÚd™iÚ_
;

123 
	gruÂšg_th»ads_
;

126 
	gpha£_numb”_
 = 0;

127 
	g’‹»d_
 = 0;

132 
boŞ
 
ü—‹B¬r›r
(
Mu‹xLock
& 
ml
è
REQUIRES
(
lock_
) {

133 
BM_CHECK_LT
(
’‹»d_
, 
ruÂšg_th»ads_
);

134 
	g’‹»d_
++;

135 ià(
	g’‹»d_
 < 
	gruÂšg_th»ads_
) {

137 
	gpha£_numb”_ı
 = 
pha£_numb”_
;

138 autØ
	gcb
 = [
this
, 
pha£_numb”_ı
]() {

139  
	gthis
->
	gpha£_numb”_
 > 
	gpha£_numb”_ı
 ||

140 
	g’‹»d_
 =ğ
ruÂšg_th»ads_
;

142 
	gpha£_cÚd™iÚ_
.
wa™
(
ml
.
Çtive_hªdË
(), 
cb
);

143 ià(
	gpha£_numb”_
 > 
	gpha£_numb”_ı
è 
	gçl£
;

147 
	gpha£_numb”_
++;

148 
	g’‹»d_
 = 0;

149  
	gŒue
;

	@third_party/benchmark/src/perf_counters.cc

15 
	~"³rf_couÁ”s.h
"

17 
	~<c¡ršg
>

18 
	~<memÜy
>

19 
	~<veùÜ
>

21 #ià
defšed
 
HAVE_LIBPFM


22 
	~"³rfmÚ/pfmlib.h
"

23 
	~"³rfmÚ/pfmlib_³rf_ev’t.h
"

26 
Çme¥aû
 
	gb’chm¬k
 {

27 
Çme¥aû
 
	gš‹º®
 {

29 
cÚ¡ex´
 
size_t
 
	gP”fCouÁ”V®ues
::
kMaxCouÁ”s
;

31 #ià
defšed
 
HAVE_LIBPFM


33 
size_t
 
	gP”fCouÁ”V®ues
::
R—d
(cÚ¡ 
¡d
::
veùÜ
<>& 
Ëad”s
) {

35 cÚ¡ 
size_t
 
bufsize
 = 
v®ues_
.
size
() * (values_[0]);

36 * 
	g±r
 = 
»š‹½»t_ÿ¡
<*>(
v®ues_
.
d©a
());

37 
size_t
 
	gsize
 = 
bufsize
;

38 
	gËad
 : 
Ëad”s
) {

39 autØ
»ad_by‹s
 = ::
»ad
(
Ëad
, 
±r
, 
size
);

40 ià(
	g»ad_by‹s
 >ğ
ssize_t
((
ušt64_t
))) {

42 
¡d
::
size_t
 
d©a_by‹s
 = 
»ad_by‹s
 - (
ušt64_t
);

44 
	g¡d
::
memmove
(
±r
,…Œ + (
ušt64_t
), 
d©a_by‹s
);

46 
	g±r
 +ğ
d©a_by‹s
;

47 
	gsize
 -ğ
d©a_by‹s
;

49 
	g”r
 = 
”ºo
;

50 
G‘E¼ÜLogIn¡ªû
(è<< "E¼Ü„—dšg†—d " << 
	gËad
 << "ƒ¼no:" << 
	g”r


51 << " " << ::
¡»¼Ü
(
”r
) << "\n";

55  (
	gbufsize
 - 
	gsize
è/ (
	gušt64_t
);

58 cÚ¡ 
boŞ
 
	gP”fCouÁ”s
::
kSuµÜ‹d
 = 
Œue
;

60 
boŞ
 
	gP”fCouÁ”s
::
In™Ÿlize
(è{  
pfm_š™Ÿlize
(è=ğ
PFM_SUCCESS
; }

62 
boŞ
 
	gP”fCouÁ”s
::
IsCouÁ”SuµÜ‹d
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
) {

63 
³rf_ev’t_©Œ_t
 
©Œ
;

64 
	g¡d
::
mem£t
(&
©Œ
, 0, (attr));

65 
pfm_³rf_’code_¬g_t
 
	g¬g
;

66 
	g¡d
::
mem£t
(&
¬g
, 0, (arg));

67 
	g¬g
.
	g©Œ
 = &
©Œ
;

68 cÚ¡ 
	gmode
 = 
PFM_PLM3
;

69 
	g»t
 = 
pfm_g‘_os_ev’t_’codšg
(
Çme
.
c_¡r
(), 
mode
, 
PFM_OS_PERF_EVENT_EXT
,

70 &
¬g
);

71  (
	g»t
 =ğ
PFM_SUCCESS
);

74 
P”fCouÁ”s
 
	gP”fCouÁ”s
::
C»©e
(

75 cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
>& 
couÁ”_Çmes
) {

77 
¡d
::
veùÜ
<¡d::
¡ršg
> 
v®id_Çmes
;

78 
	g¡d
::
veùÜ
<> 
couÁ”_ids
;

79 
	g¡d
::
veùÜ
<> 
Ëad”_ids
;

82 
	gv®id_Çmes
.
»£rve
(
couÁ”_Çmes
.
size
());

83 
	gcouÁ”_ids
.
»£rve
(
couÁ”_Çmes
.
size
());

85 cÚ¡ 
	gkCouÁ”Mode
 = 
PFM_PLM3
;

91 
	ggroup_id
 = -1;

94 
size_t
 
	gi
 = 0; i < 
	gcouÁ”_Çmes
.
size
(); ++i) {

97 ià(
	gv®id_Çmes
.
size
(è=ğ
P”fCouÁ”V®ues
::
kMaxCouÁ”s
) {

99 
G‘E¼ÜLogIn¡ªû
()

100 << 
couÁ”_Çmes
.
size
() << " counters were„equested. The maximum is "

101 << 
P”fCouÁ”V®ues
::
kMaxCouÁ”s
 << "‡nd " << 
v®id_Çmes
.
size
()

108 cÚ¡‡uto& 
	gÇme
 = 
couÁ”_Çmes
[
i
];

109 ià(
	gÇme
.
em±y
()) {

110 
G‘E¼ÜLogIn¡ªû
()

116 cÚ¡ 
boŞ
 
	gis_fœ¡
 = (
group_id
 < 0);

120 
³rf_ev’t_©Œ
 
	g©Œ
 {};

121 
	g©Œ
.
	gsize
 = (
©Œ
);

124 
pfm_³rf_’code_¬g_t
 
	g¬g
{};

125 
	g¬g
.
	g©Œ
 = &
©Œ
;

126 cÚ¡ 
	gpfm_g‘
 = 
pfm_g‘_os_ev’t_’codšg
(
Çme
.
c_¡r
(), 
kCouÁ”Mode
,

127 
PFM_OS_PERF_EVENT
, &
¬g
);

128 ià(
	gpfm_g‘
 !ğ
PFM_SUCCESS
) {

129 
G‘E¼ÜLogIn¡ªû
()

130 << "UnknowÀ³rfÜmªû couÁ”‚ame: " << 
Çme
 << "\n";

138 
	g©Œ
.
	gdi§bËd
 = 
is_fœ¡
;

139 
	g©Œ
.
	gšh”™
 = 
Œue
;

140 
	g©Œ
.
	gpšÃd
 = 
is_fœ¡
;

141 
	g©Œ
.
	gexşude_k”Ãl
 = 
Œue
;

142 
	g©Œ
.
	gexşude_u£r
 = 
çl£
;

143 
	g©Œ
.
	gexşude_hv
 = 
Œue
;

146 
	g©Œ
.
	g»ad_fÜm©
 = 
PERF_FORMAT_GROUP
;

148 
	gid
 = -1;

149 
	gid
 < 0) {

150 
cÚ¡ex´
 
size_t
 
	gkNrOfSysÿÎR‘r›s
 = 5;

152 
size_t
 
	gnum_»Œ›s
 = 0;‚um_»Œ› < 
	gkNrOfSysÿÎR‘r›s
;

153 ++
	gnum_»Œ›s
) {

154 
	gid
 = 
³rf_ev’t_İ’
(&
©Œ
, 0, -1, 
group_id
, 0);

155 ià(
	gid
 >ğ0 || 
”ºo
 !ğ
EINTR
) {

159 ià(
	gid
 < 0) {

162 ià(
	ggroup_id
 >= 0) {

164 
group_id
 = -1;

175 ià(
	gid
 < 0) {

176 
G‘E¼ÜLogIn¡ªû
() << "***WARNING** Failedo get‡ file descriptor "

178 << 
	gÇme
 << ". Ignoring\n";

184 ià(
	ggroup_id
 < 0) {

186 
	gËad”_ids
.
push_back
(
id
);

187 
	ggroup_id
 = 
id
;

190 
	gcouÁ”_ids
.
push_back
(
id
);

191 
	gv®id_Çmes
.
push_back
(
Çme
);

199 
	gËad
 : 
Ëad”_ids
) {

200 ià(
ioùl
(
Ëad
, 
PERF_EVENT_IOC_ENABLE
) != 0) {

203 
G‘E¼ÜLogIn¡ªû
() << "***WARNING*** Failedo start counters. "

207 
	gid
 : 
couÁ”_ids
) {

208 ::
şo£
(
id
);

213  
NoCouÁ”s
();

217  
P”fCouÁ”s
(
¡d
::
move
(
v®id_Çmes
), std::move(
couÁ”_ids
),

218 
¡d
::
move
(
Ëad”_ids
));

221 
	gP”fCouÁ”s
::
Clo£CouÁ”s
() const {

222 ià(
couÁ”_ids_
.
em±y
()) {

225 
	gËad
 : 
Ëad”_ids_
) {

226 
ioùl
(
Ëad
, 
PERF_EVENT_IOC_DISABLE
);

228 
	gfd
 : 
couÁ”_ids_
) {

229 
şo£
(
fd
);

233 
size_t
 
	gP”fCouÁ”V®ues
::
R—d
(cÚ¡ 
¡d
::
veùÜ
<>&) {  0; }

235 cÚ¡ 
boŞ
 
	gP”fCouÁ”s
::
kSuµÜ‹d
 = 
çl£
;

237 
boŞ
 
	gP”fCouÁ”s
::
In™Ÿlize
(è{  
çl£
; }

239 
boŞ
 
	gP”fCouÁ”s
::
IsCouÁ”SuµÜ‹d
(cÚ¡ 
¡d
::
¡ršg
&è{  
çl£
; }

241 
P”fCouÁ”s
 
	gP”fCouÁ”s
::
C»©e
(

242 cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
>& 
couÁ”_Çmes
) {

243 ià(!
couÁ”_Çmes
.
em±y
()) {

244 
G‘E¼ÜLogIn¡ªû
() << "Performance counters‚ot supported.";

246  
NoCouÁ”s
();

249 
	gP”fCouÁ”s
::
Clo£CouÁ”s
() const {}

252 
P”fCouÁ”sM—su»m’t
::PerfCountersMeasurement(

253 cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
>& 
couÁ”_Çmes
)

254 : 
¡¬t_v®ues_
(
couÁ”_Çmes
.
size
()), 
’d_v®ues_
(counter_names.size()) {

255 
	gcouÁ”s_
 = 
P”fCouÁ”s
::
C»©e
(
couÁ”_Çmes
);

258 
	gP”fCouÁ”s
& P”fCouÁ”s::
İ”©Ü
=(
P”fCouÁ”s
&& 
Ùh”
è
nÛxû±
 {

259 ià(
this
 !ğ&
Ùh”
) {

260 
Clo£CouÁ”s
();

262 
	gcouÁ”_ids_
 = 
¡d
::
move
(
Ùh”
.
couÁ”_ids_
);

263 
	gËad”_ids_
 = 
¡d
::
move
(
Ùh”
.
Ëad”_ids_
);

264 
	gcouÁ”_Çmes_
 = 
¡d
::
move
(
Ùh”
.
couÁ”_Çmes_
);

266  *
	gthis
;

	@third_party/benchmark/src/perf_counters.h

15 #iâdeà
BENCHMARK_PERF_COUNTERS_H


16 
	#BENCHMARK_PERF_COUNTERS_H


	)

18 
	~<¬¿y
>

19 
	~<c¡dšt
>

20 
	~<c¡ršg
>

21 
	~<memÜy
>

22 
	~<veùÜ
>

24 
	~"b’chm¬k/b’chm¬k.h
"

25 
	~"check.h
"

26 
	~"log.h
"

27 
	~"mu‹x.h
"

29 #iâdeà
BENCHMARK_OS_WINDOWS


30 
	~<uni¡d.h
>

33 #ià
defšed
(
_MSC_VER
)

34 #´agm¨
w¬nšg
(
push
)

36 #´agm¨
w¬nšg
(
di§bË
 : 4251)

39 
Çme¥aû
 
	gb’chm¬k
 {

40 
Çme¥aû
 
	gš‹º®
 {

51 şas 
	cBENCHMARK_EXPORT
 
	gP”fCouÁ”V®ues
 {

52 
	gpublic
:

53 
ex¶ic™
 
P”fCouÁ”V®ues
(
size_t
 
Ä_couÁ”s
è: 
Ä_couÁ”s_
(nr_counters) {

54 
BM_CHECK_LE
(
Ä_couÁ”s_
, 
kMaxCouÁ”s
);

58 
ušt64_t
 
	gİ”©Ü
[](
size_t
 
	gpos
ècÚ¡ {  
	gv®ues_
[
pos
]; }

62 
cÚ¡ex´
 
size_t
 
	gkMaxCouÁ”s
 = 32;

64 
	g´iv©e
:

65 
ä›nd
 
şass
 
P”fCouÁ”s
;

68 
	g¡d
::
·œ
<*, 
	gsize_t
> 
g‘_d©a_bufãr
() {

69  {
	g»š‹½»t_ÿ¡
<*>(
	gv®ues_
.
d©a
()),

70 (
	gušt64_t
è* (
	gkPaddšg
 + 
	gÄ_couÁ”s_
)};

76 
size_t
 
R—d
(cÚ¡ 
¡d
::
veùÜ
<>& 
Ëad”s
);

80 
cÚ¡ex´
 
size_t
 
	gkPaddšg
 = 2;

81 
	g¡d
::
¬¿y
<
ušt64_t
, 
	gkPaddšg
 + 
	gkMaxCouÁ”s
> 
	gv®ues_
;

82 cÚ¡ 
size_t
 
	gÄ_couÁ”s_
;

88 şas 
	cBENCHMARK_EXPORT
 
P”fCouÁ”s
 
	gfš®
 {

89 
	gpublic
:

91 cÚ¡ 
boŞ
 
kSuµÜ‹d
;

94 
P”fCouÁ”s
 
NoCouÁ”s
() {  PerfCounters(); }

96 ~
P”fCouÁ”s
(è{ 
Clo£CouÁ”s
(); }

97 
P”fCouÁ”s
() = ;

98 
P”fCouÁ”s
(PerfCounters&&) = ;

99 
P”fCouÁ”s
(cÚ¡ P”fCouÁ”s&èğ
d–‘e
;

100 
	gP”fCouÁ”s
& 
	gİ”©Ü
=(
P”fCouÁ”s
&&è
nÛxû±
;

101 
	gP”fCouÁ”s
& 
	gİ”©Ü
=(cÚ¡ 
P”fCouÁ”s
&èğ
d–‘e
;

105 
boŞ
 
In™Ÿlize
();

109 
boŞ
 
IsCouÁ”SuµÜ‹d
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
);

116 
P”fCouÁ”s
 
C»©e
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
>& 
couÁ”_Çmes
);

121 
BENCHMARK_ALWAYS_INLINE
 
boŞ
 
SÇpshÙ
(
P”fCouÁ”V®ues
* 
v®ues
) const {

122 #iâdeà
BENCHMARK_OS_WINDOWS


123 
as£¹
(
v®ues
 !ğ
nuÎ±r
);

124  
	gv®ues
->
R—d
(
Ëad”_ids_
è=ğ
couÁ”_ids_
.
size
();

126 ()
	gv®ues
;

127  
	gçl£
;

131 cÚ¡ 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
>& 
Çmes
(ècÚ¡ {  
couÁ”_Çmes_
; }

132 
size_t
 
num_couÁ”s
(ècÚ¡ {  
	gcouÁ”_Çmes_
.
size
(); }

134 
	g´iv©e
:

135 
P”fCouÁ”s
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
>& 
couÁ”_Çmes
,

136 
¡d
::
veùÜ
<>&& 
couÁ”_ids
, std::veùÜ<>&& 
Ëad”_ids
)

137 : 
couÁ”_ids_
(
¡d
::
move
(
couÁ”_ids
)),

138 
Ëad”_ids_
(
¡d
::
move
(
Ëad”_ids
)),

139 
couÁ”_Çmes_
(
couÁ”_Çmes
) {}

141 
Clo£CouÁ”s
() const;

143 
	g¡d
::
veùÜ
<> 
couÁ”_ids_
;

144 
	g¡d
::
veùÜ
<> 
Ëad”_ids_
;

145 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> 
couÁ”_Çmes_
;

149 şas 
	cBENCHMARK_EXPORT
 
P”fCouÁ”sM—su»m’t
 
	gfš®
 {

150 
	gpublic
:

151 
P”fCouÁ”sM—su»m’t
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
>& 
couÁ”_Çmes
);

153 
size_t
 
num_couÁ”s
(ècÚ¡ {  
	gcouÁ”s_
.num_counters(); }

155 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> 
Çmes
(ècÚ¡ {  
couÁ”s_
.names(); }

157 
BENCHMARK_ALWAYS_INLINE
 
boŞ
 
S¹
() {

158 ià(
num_couÁ”s
(è=ğ0è 
Œue
;

161 
Clobb”MemÜy
();

162 
	gv®id_»ad_
 &ğ
couÁ”s_
.
SÇpshÙ
(&
¡¬t_v®ues_
);

163 
Clobb”MemÜy
();

165  
	gv®id_»ad_
;

168 
BENCHMARK_ALWAYS_INLINE
 
boŞ
 
Stİ
(

169 
¡d
::
veùÜ
<¡d::
·œ
<¡d::
¡ršg
, >>& 
m—su»m’ts
) {

170 ià(
num_couÁ”s
(è=ğ0è 
Œue
;

173 
Clobb”MemÜy
();

174 
	gv®id_»ad_
 &ğ
couÁ”s_
.
SÇpshÙ
(&
’d_v®ues_
);

175 
Clobb”MemÜy
();

177 
size_t
 
	gi
 = 0; i < 
	gcouÁ”s_
.
Çmes
().
size
(); ++i) {

178 
	gm—su»m’t
 = 
¡©ic_ÿ¡
<>(
’d_v®ues_
[
i
]) -

179 
¡©ic_ÿ¡
<>(
¡¬t_v®ues_
[
i
]);

180 
	gm—su»m’ts
.
push_back
({
couÁ”s_
.
Çmes
()[
i
], 
m—su»m’t
});

183  
	gv®id_»ad_
;

186 
	g´iv©e
:

187 
P”fCouÁ”s
 
couÁ”s_
;

188 
boŞ
 
	gv®id_»ad_
 = 
Œue
;

189 
P”fCouÁ”V®ues
 
	g¡¬t_v®ues_
;

190 
P”fCouÁ”V®ues
 
	g’d_v®ues_
;

193 
BENCHMARK_UNUSED
 
boŞ
 
	g³rf_š™_ªchÜ
 = 
P”fCouÁ”s
::
In™Ÿlize
();

198 #ià
defšed
(
_MSC_VER
)

199 #´agm¨
w¬nšg
(
pİ
)

	@third_party/benchmark/src/re.h

15 #iâdeà
BENCHMARK_RE_H_


16 
	#BENCHMARK_RE_H_


	)

18 
	~"š‹º®_maüos.h
"

22 #ià!
defšed
(
HAVE_STD_REGEX
) && \

23 !
defšed
(
HAVE_GNU_POSIX_REGEX
) && \

24 !
	$defšed
(
HAVE_POSIX_REGEX
)

26 #ià
	`defšed
(
BENCHMARK_OS_LINUX
è|| defšed(
BENCHMARK_OS_APPLE
)

27 
	#HAVE_POSIX_REGEX
 1

	)

28 #–ià
__ılu¥lus
 >= 199711L

29 
	#HAVE_STD_REGEX
 1

	)

35 #ià
	`defšed
(
BENCHMARK_HAS_NO_EXCEPTIONS
) && \

36 
	`defšed
(
BENCHMARK_HAVE_STD_REGEX
) && \

37 (
	`defšed
(
HAVE_GNU_POSIX_REGEX
è|| 
	$defšed
(
HAVE_POSIX_REGEX
))

38 #undeà
HAVE_STD_REGEX


41 #ià
	`defšed
(
HAVE_STD_REGEX
)

42 
	~<»gex
>

43 #–ià
	`defšed
(
HAVE_GNU_POSIX_REGEX
)

44 
	~<gnu»gex.h
>

45 #–ià
	`defšed
(
HAVE_POSIX_REGEX
)

46 
	~<»gex.h
>

48 #”rÜ 
No
 
»guÏr
 
ex´essiÚ
 
back’d
 
was
 
found
!

53 
	~<¡ršg
>

55 
	~"check.h
"

57 
Çme¥aû
 
b’chm¬k
 {

61 şas 
	cRegex
 {

62 
public
:

63 
	`Regex
(è: 
	`š™_
(
çl£
) {}

65 ~
	`Regex
();

71 
boŞ
 
	`In™
(cÚ¡ 
¡d
::
¡ršg
& 
¥ec
, std::¡ršg* 
”rÜ
);

74 
boŞ
 
	`M©ch
(cÚ¡ 
¡d
::
¡ršg
& 
¡r
);

76 
´iv©e
:

77 
boŞ
 
š™_
;

79 #ià
	`defšed
(
HAVE_STD_REGEX
)

80 
¡d
::
»gex
 
»_
;

81 #–ià
	`defšed
(
HAVE_POSIX_REGEX
è|| defšed(
HAVE_GNU_POSIX_REGEX
)

82 
»gex_t
 
»_
;

84 #”rÜ 
No
 
»guÏr
 
ex´essiÚ
 
back’d
 
im¶em’tiÚ
 
avaabË


86 
	}
};

88 #ià
	$defšed
(
HAVE_STD_REGEX
)

90 
šlše
 
boŞ
 
Regex
::
	$In™
(cÚ¡ 
¡d
::
¡ršg
& 
¥ec
, std::¡ršg* 
”rÜ
) {

91 #ifdeà
BENCHMARK_HAS_NO_EXCEPTIONS


92 (()
”rÜ
);

94 
Œy
 {

96 
»_
 = 
¡d
::
	`»gex
(
¥ec
, std::
»gex_cÚ¡ªts
::
ex‹nded
);

97 
š™_
 = 
Œue
;

98 #iâdeà
BENCHMARK_HAS_NO_EXCEPTIONS


100 
	`ÿtch
 (cÚ¡ 
¡d
::
»gex_”rÜ
& 
e
) {

101 ià(
”rÜ
) {

102 *
”rÜ
 = 
e
.
	`wh©
();

106  
š™_
;

107 
	}
}

109 
šlše
 
	gRegex
::~
	$Regex
(è{
	}
}

111 
šlše
 
boŞ
 
Regex
::
	$M©ch
(cÚ¡ 
¡d
::
¡ršg
& 
¡r
) {

112 ià(!
š™_
) {

113  
çl£
;

115  
¡d
::
	`»gex_£¬ch
(
¡r
, 
»_
);

116 
	}
}

119 
šlše
 
boŞ
 
	gRegex
::
	$In™
(cÚ¡ 
¡d
::
¡ršg
& 
¥ec
, std::¡ršg* 
”rÜ
) {

120 
ec
 = 
	`»gcomp
(&
»_
, 
¥ec
.
	`c_¡r
(), 
REG_EXTENDED
 | 
REG_NOSUB
);

121 ià(
ec
 != 0) {

122 ià(
”rÜ
) {

123 
size_t
 
Ãeded
 = 
	`»g”rÜ
(
ec
, &
»_
, 
nuÎ±r
, 0);

124 * 
”rbuf
 = 
Ãw
 [
Ãeded
];

125 
	`»g”rÜ
(
ec
, &
»_
, 
”rbuf
, 
Ãeded
);

129 
	`BM_CHECK_NE
(
Ãeded
, 0);

130 
”rÜ
->
	`assign
(
”rbuf
, 
Ãeded
 - 1);

132 
d–‘e
[] 
”rbuf
;

135  
çl£
;

138 
š™_
 = 
Œue
;

139  
Œue
;

140 
	}
}

142 
šlše
 
	gRegex
::~
	$Regex
() {

143 ià(
š™_
) {

144 
	`»gä“
(&
»_
);

146 
	}
}

148 
šlše
 
boŞ
 
	gRegex
::
	$M©ch
(cÚ¡ 
¡d
::
¡ršg
& 
¡r
) {

149 ià(!
š™_
) {

150  
çl£
;

152  
	`»gexec
(&
»_
, 
¡r
.
	`c_¡r
(), 0, 
nuÎ±r
, 0) == 0;

153 
	}
}

	@third_party/benchmark/src/reporter.cc

15 
	~<c¡dlib
>

16 
	~<io¡»am
>

17 
	~<m­
>

18 
	~<¡ršg
>

19 
	~<tu¶e
>

20 
	~<veùÜ
>

22 
	~"b’chm¬k/b’chm¬k.h
"

23 
	~"check.h
"

24 
	~"¡ršg_ut.h
"

25 
	~"tim”s.h
"

27 
Çme¥aû
 
	gb’chm¬k
 {

29 
	gB’chm¬kR•Ü‹r
::
B’chm¬kR•Ü‹r
()

30 : 
ouut_¡»am_
(&
¡d
::
cout
), 
”rÜ_¡»am_
(&¡d::
û¼
) {}

32 
B’chm¬kR•Ü‹r
::~BenchmarkReporter() {}

34 
B’chm¬kR•Ü‹r
::
PrštBasicCÚ‹xt
(
¡d
::
o¡»am
 *
out
,

35 
CÚ‹xt
 cÚ¡ &
cÚ‹xt
) {

36 
BM_CHECK
(
out
) << "cannot be‚ull";

37 autØ&
	gOut
 = *
out
;

39 #iâdeà
BENCHMARK_OS_QURT


42 
	gOut
 << 
LoÿlD©eTimeSŒšg
() << "\n";

45 ià(
	gcÚ‹xt
.
	gexecubË_Çme
)

46 
	gOut
 << "RuÂšg " << 
	gcÚ‹xt
.
	gexecubË_Çme
 << "\n";

48 cÚ¡ 
	gCPUInfo
 &
	gšfo
 = 
cÚ‹xt
.
ıu_šfo
;

49 
	gOut
 << "RuÀÚ (" << 
	gšfo
.
	gnum_ıus
 << " X "

50 << (
	gšfo
.
	gcyşes_³r_£cÚd
 / 1000000.0) << " MHz CPU "

51 << ((
	gšfo
.
	gnum_ıus
 > 1) ? "s" : "") << ")\n";

52 ià(
	gšfo
.
	gÿches
.
size
() != 0) {

53 
Out
 << "CPU Caches:\n";

54 autØ&
	gCInfo
 : 
šfo
.
ÿches
) {

55 
Out
 << " L" << 
CInfo
.
Ëv–
 << " " << CInfo.
ty³
 << " "

56 << (
CInfo
.
size
 / 1024) << " KiB";

57 ià(
	gCInfo
.
	gnum_sh¬šg
 != 0)

58 
Out
 << " (x" << (
šfo
.
num_ıus
 / 
CInfo
.
num_sh¬šg
) << ")";

59 
	gOut
 << "\n";

62 ià(!
	gšfo
.
	glßd_avg
.
em±y
()) {

63 
	gOut
 << "Load Average: ";

64 autØ
	gIt
 = 
šfo
.
lßd_avg
.
begš
(); Iˆ!ğšfo.lßd_avg.
’d
();) {

65 
	gOut
 << 
SŒFÜm©
("%.2f", *
It
++);

66 ià(
	gIt
 !ğ
šfo
.
lßd_avg
.
’d
()è
Out
 << ", ";

68 
	gOut
 << "\n";

71 
	g¡d
::
m­
<
¡d
::
¡ršg
, std::¡ršg> *
glob®_cÚ‹xt
 =

72 
š‹º®
::
G‘Glob®CÚ‹xt
();

74 ià(
	gglob®_cÚ‹xt
 !ğ
nuÎ±r
) {

75 cÚ¡‡utØ&
kv
 : *
glob®_cÚ‹xt
) {

76 
Out
 << 
kv
.
fœ¡
 << ": " << kv.
£cÚd
 << "\n";

80 ià(
	gCPUInfo
::
Sÿlšg
::
ENABLED
 =ğ
šfo
.
sÿlšg
) {

81 
Out
 << "***WARNING*** CPU scaling isƒnabled,he benchmark "

86 #iâdeà
NDEBUG


87 
	gOut
 << "***WARNING*** Library was built‡s DEBUG. Timings may be "

93 cÚ¡ *
	gB’chm¬kR•Ü‹r
::
CÚ‹xt
::
execubË_Çme
;

95 
	gB’chm¬kR•Ü‹r
::
CÚ‹xt
::Context()

96 : 
ıu_šfo
(
CPUInfo
::
G‘
()), 
sys_šfo
(
Sy¡emInfo
::Get()) {}

98 
¡d
::
¡ršg
 
B’chm¬kR•Ü‹r
::
Run
::
b’chm¬k_Çme
() const {

99 
¡d
::
¡ršg
 
Çme
 = 
run_Çme
.
¡r
();

100 ià(
	grun_ty³
 =ğ
RT_Agg»g©e
) {

101 
Çme
 +ğ"_" + 
agg»g©e_Çme
;

103  
	gÇme
;

106 
	gB’chm¬kR•Ü‹r
::
Run
::
G‘Adju¡edR—lTime
() const {

107 
Ãw_time
 = 
»®_accumuÏ‹d_time
 * 
G‘TimeUn™MuÉl›r
(
time_un™
);

108 ià(
	g™”©iÚs
 !ğ0è
Ãw_time
 /ğ
¡©ic_ÿ¡
<>(
™”©iÚs
);

109  
	gÃw_time
;

112 
	gB’chm¬kR•Ü‹r
::
Run
::
G‘Adju¡edCPUTime
() const {

113 
Ãw_time
 = 
ıu_accumuÏ‹d_time
 * 
G‘TimeUn™MuÉl›r
(
time_un™
);

114 ià(
	g™”©iÚs
 !ğ0è
Ãw_time
 /ğ
¡©ic_ÿ¡
<>(
™”©iÚs
);

115  
	gÃw_time
;

	@third_party/benchmark/src/statistics.cc

16 
	~"¡©i¡ics.h
"

18 
	~<®gÜ™hm
>

19 
	~<cm©h
>

20 
	~<num”ic
>

21 
	~<¡ršg
>

22 
	~<veùÜ
>

24 
	~"b’chm¬k/b’chm¬k.h
"

25 
	~"check.h
"

27 
Çme¥aû
 
	gb’chm¬k
 {

29 autØ
	gSti¡icsSum
 = [](cÚ¡ 
¡d
::
veùÜ
<>& 
v
) {

30  
¡d
::
accumuÏ‹
(
v
.
begš
(), v.
’d
(), 0.0);

33 
Sti¡icsM—n
(cÚ¡ 
¡d
::
veùÜ
<>& 
v
) {

34 ià(
v
.
em±y
())  0.0;

35  
Sti¡icsSum
(
v
è* (1.0 / 
	gv
.
size
());

38 
Sti¡icsMedŸn
(cÚ¡ 
¡d
::
veùÜ
<>& 
v
) {

39 ià(
v
.
size
(è< 3è 
Sti¡icsM—n
(v);

40 
	g¡d
::
veùÜ
<> 
cİy
(
v
);

42 autØ
	gûÁ”
 = 
cİy
.
begš
(è+ 
v
.
size
() / 2;

43 
	g¡d
::
Áh_–em’t
(
cİy
.
begš
(), 
ûÁ”
, cİy.
’d
());

49 ià(
	gv
.
size
(è% 2 =ğ1è *
ûÁ”
;

50 autØ
	gûÁ”2
 = 
cİy
.
begš
(è+ 
v
.
size
() / 2 - 1;

51 
	g¡d
::
Áh_–em’t
(
cİy
.
begš
(), 
ûÁ”2
, cİy.
’d
());

52  (*
	gûÁ”
 + *
	gûÁ”2
) / 2.0;

56 autØ
	gSumSqu¬es
 = [](cÚ¡ 
¡d
::
veùÜ
<>& 
v
) {

57  
¡d
::
šÃr_´oduù
(
v
.
begš
(), v.
’d
(), v.begin(), 0.0);

60 autØ
	gSqr
 = [](cÚ¡ 
d©
) {  dat * dat; };

61 autØ
	gSq¹
 = [](cÚ¡ 
d©
) {

63 ià(
d©
 < 0.0)  0.0;

64  
	g¡d
::
sq¹
(
d©
);

67 
Sti¡icsStdDev
(cÚ¡ 
¡d
::
veùÜ
<>& 
v
) {

68 cÚ¡‡utØ
m—n
 = 
Sti¡icsM—n
(
v
);

69 ià(
	gv
.
em±y
()è 
	gm—n
;

72 ià(
	gv
.
size
() == 1)  0.0;

74 cÚ¡ 
	gavg_squ¬es
 = 
SumSqu¬es
(
v
è* (1.0 / v.
size
());

75  
Sq¹
(
v
.
size
(è/ (v.size(è- 1.0è* (
avg_squ¬es
 - 
Sqr
(
m—n
)));

78 
Sti¡icsCV
(cÚ¡ 
¡d
::
veùÜ
<>& 
v
) {

79 ià(
v
.
size
() < 2)  0.0;

81 cÚ¡‡utØ
	g¡ddev
 = 
Sti¡icsStdDev
(
v
);

82 cÚ¡‡utØ
	gm—n
 = 
Sti¡icsM—n
(
v
);

84  
	g¡ddev
 / 
	gm—n
;

87 
	g¡d
::
veùÜ
<
B’chm¬kR•Ü‹r
::
Run
> 
Compu‹Sts
(

88 cÚ¡ 
¡d
::
veùÜ
<
B’chm¬kR•Ü‹r
::
Run
>& 
»pÜts
) {

89 
B’chm¬kR•Ü‹r
::
	tRun
 Run;

90 
	g¡d
::
veùÜ
<
Run
> 
»suÉs
;

92 autØ
	g”rÜ_couÁ
 = 
¡d
::
couÁ_if
(
»pÜts
.
begš
(),„•Üts.
’d
(),

93 [](
Run
 cÚ¡& 
run
è{ „un.
sk³d
; });

95 ià(
	g»pÜts
.
size
(è- 
	g”rÜ_couÁ
 < 2) {

97  
	g»suÉs
;

101 
	g¡d
::
veùÜ
<> 
»®_accumuÏ‹d_time_¡©
;

102 
	g¡d
::
veùÜ
<> 
ıu_accumuÏ‹d_time_¡©
;

104 
	g»®_accumuÏ‹d_time_¡©
.
»£rve
(
»pÜts
.
size
());

105 
	gıu_accumuÏ‹d_time_¡©
.
»£rve
(
»pÜts
.
size
());

109 cÚ¡ 
I‹¿tiÚCouÁ
 
	grun_™”©iÚs
 = 
»pÜts
.
äÚt
().
™”©iÚs
;

111 
	sCouÁ”St
 {

112 
CouÁ”
 
	gc
;

113 
	g¡d
::
veùÜ
<> 
s
;

115 
	g¡d
::
m­
<
¡d
::
¡ršg
, 
	gCouÁ”St
> 
	gcouÁ”_¡©s
;

116 
Run
 cÚ¡& 
	gr
 : 
»pÜts
) {

117 autØcÚ¡& 
út
 : 
r
.
couÁ”s
) {

118 autØ
™
 = 
couÁ”_¡©s
.
fšd
(
út
.
fœ¡
);

119 ià(
	g™
 =ğ
couÁ”_¡©s
.
’d
()) {

120 
™
 = 
couÁ”_¡©s


121 .
em¶aû
(
út
.
fœ¡
,

122 
CouÁ”St
{
út
.
£cÚd
, 
¡d
::
veùÜ
<>{}})

123 .
fœ¡
;

124 
	g™
->
	g£cÚd
.
	gs
.
»£rve
(
»pÜts
.
size
());

126 
BM_CHECK_EQ
(
™
->
£cÚd
.
c
.
æags
, 
út
.second.flags);

132 
Run
 cÚ¡& 
	grun
 : 
»pÜts
) {

133 
BM_CHECK_EQ
(
»pÜts
[0].
b’chm¬k_Çme
(), 
run
.benchmark_name());

134 
BM_CHECK_EQ
(
run_™”©iÚs
, 
run
.
™”©iÚs
);

135 ià(
	grun
.
	gsk³d
) ;

136 
	g»®_accumuÏ‹d_time_¡©
.
em¶aû_back
(
run
.
»®_accumuÏ‹d_time
);

137 
	gıu_accumuÏ‹d_time_¡©
.
em¶aû_back
(
run
.
ıu_accumuÏ‹d_time
);

139 autØcÚ¡& 
	gút
 : 
run
.
couÁ”s
) {

140 autØ
™
 = 
couÁ”_¡©s
.
fšd
(
út
.
fœ¡
);

141 
BM_CHECK_NE
(
™
, 
couÁ”_¡©s
.
’d
());

142 
	g™
->
	g£cÚd
.
	gs
.
em¶aû_back
(
út
.
£cÚd
);

147 
	g¡d
::
¡ršg
 
»pÜt_Ïb–
 = 
»pÜts
[0].report_label;

148 
	g¡d
::
size_t
 
i
 = 1; 
	gi
 < 
	g»pÜts
.
size
(); i++) {

149 ià(
	g»pÜts
[
i
].
	g»pÜt_Ïb–
 !ğ
»pÜt_Ïb–
) {

150 
»pÜt_Ïb–
 = "";

155 cÚ¡ 
	g™”©iÚ_»sÿË_çùÜ
 =

156 (
»pÜts
.
size
()è/ (
run_™”©iÚs
);

158 cÚ¡‡uto& 
	gSt
 : *
»pÜts
[0].
¡©i¡ics
) {

160 
Run
 
d©a
;

161 
	gd©a
.
	grun_Çme
 = 
»pÜts
[0].
run_Çme
;

162 
	gd©a
.
	gçmy_šdex
 = 
»pÜts
[0].
çmy_šdex
;

163 
	gd©a
.
	g³r_çmy_š¡ªû_šdex
 = 
»pÜts
[0].
³r_çmy_š¡ªû_šdex
;

164 
	gd©a
.
	grun_ty³
 = 
B’chm¬kR•Ü‹r
::
Run
::
RT_Agg»g©e
;

165 
	gd©a
.
	gth»ads
 = 
»pÜts
[0].
th»ads
;

166 
	gd©a
.
	g»³t™iÚs
 = 
»pÜts
[0].
»³t™iÚs
;

167 
	gd©a
.
	g»³t™iÚ_šdex
 = 
Run
::
no_»³t™iÚ_šdex
;

168 
	gd©a
.
	gagg»g©e_Çme
 = 
St
.
Çme_
;

169 
	gd©a
.
	gagg»g©e_un™
 = 
St
.
un™_
;

170 
	gd©a
.
	g»pÜt_Ïb–
 = 
»pÜt_Ïb–
;

177 
	gd©a
.
	g™”©iÚs
 = 
»pÜts
.
size
();

179 
	gd©a
.
	g»®_accumuÏ‹d_time
 = 
St
.
compu‹_
(
»®_accumuÏ‹d_time_¡©
);

180 
	gd©a
.
	gıu_accumuÏ‹d_time
 = 
St
.
compu‹_
(
ıu_accumuÏ‹d_time_¡©
);

182 ià(
	gd©a
.
	gagg»g©e_un™
 =ğ
Sti¡icUn™
::
kTime
) {

188 
d©a
.
»®_accumuÏ‹d_time
 *ğ
™”©iÚ_»sÿË_çùÜ
;

189 
	gd©a
.
	gıu_accumuÏ‹d_time
 *ğ
™”©iÚ_»sÿË_çùÜ
;

192 
	gd©a
.
	gtime_un™
 = 
»pÜts
[0].
time_un™
;

195 autØcÚ¡& 
	gkv
 : 
couÁ”_¡©s
) {

197 cÚ¡‡utØ
uc_¡©
 = 
St
.
compu‹_
(
kv
.
£cÚd
.
s
);

198 autØ
	gc
 = 
CouÁ”
(
uc_¡©
, 
couÁ”_¡©s
[
kv
.
fœ¡
].
c
.
æags
,

199 
couÁ”_¡©s
[
kv
.
fœ¡
].
c
.
ÚeK
);

200 
	gd©a
.
	gcouÁ”s
[
kv
.
fœ¡
] = 
c
;

203 
	g»suÉs
.
push_back
(
d©a
);

206  
	g»suÉs
;

	@third_party/benchmark/src/statistics.h

16 #iâdeà
STATISTICS_H_


17 
	#STATISTICS_H_


	)

19 
	~<veùÜ
>

21 
	~"b’chm¬k/b’chm¬k.h
"

23 
Çme¥aû
 
	gb’chm¬k
 {

29 
BENCHMARK_EXPORT


30 
	g¡d
::
veùÜ
<
B’chm¬kR•Ü‹r
::
Run
> 
Compu‹Sts
(

31 cÚ¡ 
¡d
::
veùÜ
<
B’chm¬kR•Ü‹r
::
Run
>& 
»pÜts
);

33 
BENCHMARK_EXPORT


34 
Sti¡icsM—n
(cÚ¡ 
¡d
::
veùÜ
<>& 
v
);

35 
BENCHMARK_EXPORT


36 
Sti¡icsMedŸn
(cÚ¡ 
¡d
::
veùÜ
<>& 
v
);

37 
BENCHMARK_EXPORT


38 
Sti¡icsStdDev
(cÚ¡ 
¡d
::
veùÜ
<>& 
v
);

39 
BENCHMARK_EXPORT


40 
Sti¡icsCV
(cÚ¡ 
¡d
::
veùÜ
<>& 
v
);

	@third_party/benchmark/src/string_util.cc

1 
	~"¡ršg_ut.h
"

3 
	~<¬¿y
>

4 #ifdeà
BENCHMARK_STL_ANDROID_GNUSTL


5 
	~<û¼no
>

7 
	~<cm©h
>

8 
	~<c¡d¬g
>

9 
	~<c¡dio
>

10 
	~<memÜy
>

11 
	~<s¡»am
>

13 
	~"¬¿ysize.h
"

15 
Çme¥aû
 
	gb’chm¬k
 {

16 
	gÇme¥aû
 {

19 cÚ¡ 
	gkBigSIUn™s
[] = "kMGTPEZY";

21 cÚ¡ 
	gkBigIECUn™s
[] = "KMGTPEZY";

23 cÚ¡ 
	gkSm®lSIUn™s
[] = "munpfazy";

26 
¡©ic_as£¹
(
¬¿ysize
(
kBigSIUn™s
è=ğ¬¿ysize(
kBigIECUn™s
),

28 
¡©ic_as£¹
(
¬¿ysize
(
kSm®lSIUn™s
è=ğ¬¿ysize(
kBigSIUn™s
),

31 cÚ¡ 
št64_t
 
	gkUn™sSize
 = 
¬¿ysize
(
kBigSIUn™s
);

33 
ToExpÚ’tAndMªtis§
(
v®
, 
th»sh
, 
´ecisiÚ
,

34 
Úe_k
, 
¡d
::
¡ršg
* 
mªtis§
,

35 
št64_t
* 
expÚ’t
) {

36 
	g¡d
::
¡ršg¡»am
 
mªtis§_¡»am
;

38 ià(
	gv®
 < 0) {

39 
	gmªtis§_¡»am
 << "-";

40 
	gv®
 = -
v®
;

45 cÚ¡ 
	gadju¡ed_th»shŞd
 =

46 
¡d
::
max
(
th»sh
, 1.0 / std::
pow
(10.0, 
´ecisiÚ
));

47 cÚ¡ 
	gbig_th»shŞd
 = 
adju¡ed_th»shŞd
 * 
Úe_k
;

48 cÚ¡ 
	gsm®l_th»shŞd
 = 
adju¡ed_th»shŞd
;

50 cÚ¡ 
	gsim¶e_th»shŞd
 = 0.01;

52 ià(
	gv®
 > 
	gbig_th»shŞd
) {

54 
	gsÿËd
 = 
v®
;

55 
size_t
 
	gi
 = 0; i < 
¬¿ysize
(
kBigSIUn™s
); ++i) {

56 
	gsÿËd
 /ğ
Úe_k
;

57 ià(
	gsÿËd
 <ğ
big_th»shŞd
) {

58 
mªtis§_¡»am
 << 
sÿËd
;

59 *
	gexpÚ’t
 = 
i
 + 1;

60 *
	gmªtis§
 = 
mªtis§_¡»am
.
¡r
();

64 
	gmªtis§_¡»am
 << 
	gv®
;

65 *
	gexpÚ’t
 = 0;

66 } ià(
	gv®
 < 
	gsm®l_th»shŞd
) {

68 ià(
	gv®
 < 
	gsim¶e_th»shŞd
) {

69 
	gsÿËd
 = 
v®
;

70 
size_t
 
	gi
 = 0; i < 
¬¿ysize
(
kSm®lSIUn™s
); ++i) {

71 
	gsÿËd
 *ğ
Úe_k
;

72 ià(
	gsÿËd
 >ğ
sm®l_th»shŞd
) {

73 
mªtis§_¡»am
 << 
sÿËd
;

74 *
	gexpÚ’t
 = -
¡©ic_ÿ¡
<
št64_t
>(
i
 + 1);

75 *
	gmªtis§
 = 
mªtis§_¡»am
.
¡r
();

80 
	gmªtis§_¡»am
 << 
	gv®
;

81 *
	gexpÚ’t
 = 0;

83 
	gmªtis§_¡»am
 << 
	gv®
;

84 *
	gexpÚ’t
 = 0;

86 *
	gmªtis§
 = 
mªtis§_¡»am
.
¡r
();

89 
	g¡d
::
¡ršg
 
ExpÚ’tToP»fix
(
št64_t
 
expÚ’t
, 
boŞ
 
›c
) {

90 ià(
	gexpÚ’t
 == 0)  "";

92 cÚ¡ 
št64_t
 
	gšdex
 = (
expÚ’t
 > 0 ?ƒxponent - 1 : -exponent - 1);

93 ià(
	gšdex
 >ğ
kUn™sSize
)  "";

95 cÚ¡ * 
	g¬¿y
 =

96 (
expÚ’t
 > 0 ? (
›c
 ? 
kBigIECUn™s
 : 
kBigSIUn™s
è: 
kSm®lSIUn™s
);

97 ià(
	g›c
) {

98  
	g¬¿y
[
šdex
] + 
	g¡d
::
¡ršg
("i");

100  
	g¡d
::
¡ršg
(1, 
¬¿y
[
šdex
]);

103 
	g¡d
::
¡ršg
 
ToBš¬ySŒšgFuÎyS³cif›d
(
v®ue
, 
th»shŞd
,

104 
´ecisiÚ
, 
Úe_k
 = 1024.0) {

105 
¡d
::
¡ršg
 
mªtis§
;

106 
št64_t
 
	gexpÚ’t
;

107 
ToExpÚ’tAndMªtis§
(
v®ue
, 
th»shŞd
, 
´ecisiÚ
, 
Úe_k
, &
mªtis§
,

108 &
expÚ’t
);

109  
	gmªtis§
 + 
ExpÚ’tToP»fix
(
expÚ’t
, 
çl£
);

114 
Aµ’dHumªR—dabË
(
n
, 
¡d
::
¡ršg
* 
¡r
) {

115 
¡d
::
¡ršg¡»am
 
ss
;

117 
	gss
 << 
ToBš¬ySŒšgFuÎyS³cif›d
(
n
, 1.0, 0);

118 *
	g¡r
 +ğ
ss
.
¡r
();

121 
	g¡d
::
¡ršg
 
HumªR—dabËNumb”
(
n
, 
Úe_k
) {

125  
ToBš¬ySŒšgFuÎyS³cif›d
(
n
, 1.1, 1, 
Úe_k
);

128 
	g¡d
::
¡ršg
 
SŒFÜm©Imp
(cÚ¡ * 
msg
, 
va_li¡
 
¬gs
) {

130 
va_li¡
 
	g¬gs_ı
;

131 
va_cİy
(
¬gs_ı
, 
¬gs
);

135 
	g¡d
::
¬¿y
<, 256> 
	gloÿl_buff
;

139 autØ
	g»t
 = 
v¢´štf
(
loÿl_buff
.
d©a
(),†oÿl_buff.
size
(), 
msg
, 
¬gs_ı
);

141 
va_’d
(
¬gs_ı
);

144 ià(
	g»t
 =ğ0è 
¡d
::
¡ršg
{};

145 ià(
	g¡©ic_ÿ¡
<
	g¡d
::
size_t
>(
»t
è< 
loÿl_buff
.
size
())

146  
¡d
::
¡ršg
(
loÿl_buff
.
d©a
());

150 
	g¡d
::
size_t
 
size
 = 
¡©ic_ÿ¡
<
¡d
::size_t>(
»t
) + 1;

151 autØ
	gbuff_±r
 = 
¡d
::
unique_±r
<[]>(
Ãw
 [
size
]);

154 
v¢´štf
(
buff_±r
.
g‘
(), 
size
, 
msg
, 
¬gs
);

155  
	g¡d
::
¡ršg
(
buff_±r
.
g‘
());

158 
	g¡d
::
¡ršg
 
SŒFÜm©
(cÚ¡ * 
fÜm©
, ...) {

159 
va_li¡
 
	g¬gs
;

160 
va_¡¬t
(
¬gs
, 
fÜm©
);

161 
	g¡d
::
¡ršg
 
tmp
 = 
SŒFÜm©Imp
(
fÜm©
, 
¬gs
);

162 
va_’d
(
¬gs
);

163  
	gtmp
;

166 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> 
SŒS¶™
(cÚ¡ std::¡ršg& 
¡r
, 
d–im
) {

167 ià(
	g¡r
.
em±y
())  {};

168 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> 
»t
;

169 
size_t
 
	gfœ¡
 = 0;

170 
size_t
 
	gÃxt
 = 
¡r
.
fšd
(
d–im
);

171 ; 
	gÃxt
 !ğ
¡d
::
¡ršg
::
Åos
;

172 
	gfœ¡
 = 
Ãxt
 + 1, 
	gÃxt
 = 
¡r
.
fšd
(
d–im
, 
fœ¡
)) {

173 
	g»t
.
push_back
(
¡r
.
sub¡r
(
fœ¡
, 
Ãxt
 - first));

175 
	g»t
.
push_back
(
¡r
.
sub¡r
(
fœ¡
));

176  
	g»t
;

179 #ifdeà
BENCHMARK_STL_ANDROID_GNUSTL


186 
¡oul
(cÚ¡ 
¡d
::
¡ršg
& 
¡r
, 
size_t
* 
pos
, 
ba£
) {

188 cÚ¡ 
	gŞdE¼no
 = 
”ºo
;

189 
	g”ºo
 = 0;

191 cÚ¡ * 
	g¡rS¹
 = 
¡r
.
c_¡r
();

192 * 
	g¡rEnd
 = 
cÚ¡_ÿ¡
<*>(
¡rS¹
);

193 cÚ¡ 
	g»suÉ
 = 
¡¹oul
(
¡rS¹
, &
¡rEnd
, 
ba£
);

195 cÚ¡ 
	g¡¹oulE¼no
 = 
”ºo
;

197 
	g”ºo
 = 
ŞdE¼no
;

200 ià(
	g¡¹oulE¼no
 =ğ
ERANGE
) {

201 
throw
 
¡d
::
out_of_¿nge
("¡ouÈçed: " + 
¡r
 +

203 } ià(
	g¡rEnd
 =ğ
¡rS¹
 || 
¡¹oulE¼no
 != 0) {

204 
throw
 
¡d
::
šv®id_¬gum’t
("¡ouÈçed: " + 
¡r
 + " is‚ot‡n integer");

206 ià(
	gpos
 !ğ
nuÎ±r
) {

207 *
pos
 = 
¡©ic_ÿ¡
<
size_t
>(
¡rEnd
 - 
¡rS¹
);

209  
	g»suÉ
;

212 
¡oi
(cÚ¡ 
¡d
::
¡ršg
& 
¡r
, 
size_t
* 
pos
, 
ba£
) {

214 cÚ¡ 
	gŞdE¼no
 = 
”ºo
;

215 
	g”ºo
 = 0;

217 cÚ¡ * 
	g¡rS¹
 = 
¡r
.
c_¡r
();

218 * 
	g¡rEnd
 = 
cÚ¡_ÿ¡
<*>(
¡rS¹
);

219 cÚ¡ 
	g»suÉ
 = 
¡¹Ş
(
¡rS¹
, &
¡rEnd
, 
ba£
);

221 cÚ¡ 
	g¡¹ŞE¼no
 = 
”ºo
;

223 
	g”ºo
 = 
ŞdE¼no
;

226 ià(
	g¡¹ŞE¼no
 =ğ
ERANGE
 || ((
»suÉ
)) !=„esult) {

227 
throw
 
¡d
::
out_of_¿nge
("¡ouÈçed: " + 
¡r
 +

229 } ià(
	g¡rEnd
 =ğ
¡rS¹
 || 
¡¹ŞE¼no
 != 0) {

230 
throw
 
¡d
::
šv®id_¬gum’t
("¡ouÈçed: " + 
¡r
 + " is‚ot‡n integer");

232 ià(
	gpos
 !ğ
nuÎ±r
) {

233 *
pos
 = 
¡©ic_ÿ¡
<
size_t
>(
¡rEnd
 - 
¡rS¹
);

235  (
	g»suÉ
);

238 
¡od
(cÚ¡ 
¡d
::
¡ršg
& 
¡r
, 
size_t
* 
pos
) {

240 cÚ¡ 
	gŞdE¼no
 = 
”ºo
;

241 
	g”ºo
 = 0;

243 cÚ¡ * 
	g¡rS¹
 = 
¡r
.
c_¡r
();

244 * 
	g¡rEnd
 = 
cÚ¡_ÿ¡
<*>(
¡rS¹
);

245 cÚ¡ 
	g»suÉ
 = 
¡¹od
(
¡rS¹
, &
¡rEnd
);

248 cÚ¡ 
	g¡¹odE¼no
 = 
”ºo
;

249 
	g”ºo
 = 
ŞdE¼no
;

252 ià(
	g¡¹odE¼no
 =ğ
ERANGE
) {

253 
throw
 
¡d
::
out_of_¿nge
("¡ouÈçed: " + 
¡r
 +

255 } ià(
	g¡rEnd
 =ğ
¡rS¹
 || 
¡¹odE¼no
 != 0) {

256 
throw
 
¡d
::
šv®id_¬gum’t
("¡ouÈçed: " + 
¡r
 + " is‚ot‡n integer");

258 ià(
	gpos
 !ğ
nuÎ±r
) {

259 *
pos
 = 
¡©ic_ÿ¡
<
size_t
>(
¡rEnd
 - 
¡rS¹
);

261  
	g»suÉ
;

	@third_party/benchmark/src/string_util.h

1 #iâdeà
BENCHMARK_STRING_UTIL_H_


2 
	#BENCHMARK_STRING_UTIL_H_


	)

4 
	~<s¡»am
>

5 
	~<¡ršg
>

6 
	~<ut™y
>

7 
	~<veùÜ
>

9 
	~"b’chm¬k/expÜt.h
"

10 
	~"check.h
"

11 
	~"š‹º®_maüos.h
"

13 
Çme¥aû
 
	gb’chm¬k
 {

15 
Aµ’dHumªR—dabË
(
n
, 
¡d
::
¡ršg
* 
¡r
);

17 
	g¡d
::
¡ršg
 
HumªR—dabËNumb”
(
n
, 
Úe_k
 = 1024.0);

19 
	gBENCHMARK_EXPORT


20 #ià
defšed
(
__MINGW32__
)

21 
__©Œibu‹__
((
fÜm©
(
__MINGW_PRINTF_FORMAT
, 1, 2)))

22 #–ià
defšed
(
__GNUC__
)

23 
__©Œibu‹__
((
fÜm©
(
´štf
, 1, 2)))

25 
	g¡d
::
¡ršg


26 
SŒFÜm©
(cÚ¡ * 
fÜm©
, ...);

28 
šlše
 
	g¡d
::
o¡»am
& 
SŒC©Imp
(
¡d
::o¡»am& 
out
è
BENCHMARK_NOEXCEPT
 {

29  
out
;

32 
	g‹m¶©e
 <
şass
 
	gFœ¡
, 
	gşass
... 
	gRe¡
>

33 
šlše
 
	g¡d
::
o¡»am
& 
SŒC©Imp
(
¡d
::o¡»am& 
out
, 
Fœ¡
&& 
f
, 
Re¡
&&... 
»¡
) {

34 
	gout
 << 
	g¡d
::
fÜw¬d
<
Fœ¡
>(
f
);

35  
SŒC©Imp
(
out
, 
¡d
::
fÜw¬d
<
Re¡
>(
»¡
)...);

38 
	g‹m¶©e
 <
	gşass
... 
	gArgs
>

39 
šlše
 
	g¡d
::
¡ršg
 
SŒC©
(
Args
&&... 
¬gs
) {

40 
¡d
::
o¡ršg¡»am
 
ss
;

41 
SŒC©Imp
(
ss
, 
¡d
::
fÜw¬d
<
Args
>(
¬gs
)...);

42  
	gss
.
¡r
();

45 
BENCHMARK_EXPORT


46 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> 
SŒS¶™
(cÚ¡ std::¡ršg& 
¡r
, 
d–im
);

50 #ifdeà
BENCHMARK_STL_ANDROID_GNUSTL


57 
¡oul
(cÚ¡ 
¡d
::
¡ršg
& 
¡r
, 
size_t
* 
pos
 = 
nuÎ±r
,

58 
ba£
 = 10);

59 
¡oi
(cÚ¡ 
¡d
::
¡ršg
& 
¡r
, 
size_t
* 
pos
 = 
nuÎ±r
, 
ba£
 = 10);

60 
¡od
(cÚ¡ 
¡d
::
¡ršg
& 
¡r
, 
size_t
* 
pos
 = 
nuÎ±r
);

62 
usšg
 
	g¡d
::
¡od
;

63 
usšg
 
	g¡d
::
¡oi
;

64 
usšg
 
	g¡d
::
¡oul
;

	@third_party/benchmark/src/sysinfo.cc

15 
	~"š‹º®_maüos.h
"

17 #ifdeà
BENCHMARK_OS_WINDOWS


18 
	~<shlw­i.h
>

19 #undeà
SŒC©


20 
	~<v”siÚh–³rs.h
>

21 
	~<wšdows.h
>

23 
	~<codecvt
>

25 
	~<fú.h
>

26 #ià!
defšed
(
BENCHMARK_OS_FUCHSIA
è&& !defšed(
BENCHMARK_OS_QURT
)

27 
	~<sys/»sourû.h
>

29 
	~<sys/time.h
>

30 
	~<sys/ty³s.h
>

31 
	~<uni¡d.h
>

32 #ià
defšed
 
BENCHMARK_OS_FREEBSD
 || defšed 
BENCHMARK_OS_MACOSX
 || \

33 
defšed
 
	gBENCHMARK_OS_NETBSD
 || defšed 
	gBENCHMARK_OS_OPENBSD
 || \

34 
defšed
 
	gBENCHMARK_OS_DRAGONFLY


35 
	#BENCHMARK_HAS_SYSCTL


	)

36 
	~<sys/sysùl.h
>

39 #ià
defšed
(
BENCHMARK_OS_SOLARIS
)

40 
	~<k¡©.h
>

41 
	~<Ãtdb.h
>

43 #ià
defšed
(
BENCHMARK_OS_QNX
)

44 
	~<sys/sy¥age.h
>

46 #ià
defšed
(
BENCHMARK_OS_QURT
)

47 
	~<qu¹.h
>

49 #ià
defšed
(
BENCHMARK_HAS_PTHREAD_AFFINITY
)

50 
	~<±h»ad.h
>

53 
	~<®gÜ™hm
>

54 
	~<¬¿y
>

55 
	~<b™£t
>

56 
	~<û¼no
>

57 
	~<şim™s
>

58 
	~<c¡dšt
>

59 
	~<c¡dio
>

60 
	~<c¡dlib
>

61 
	~<c¡ršg
>

62 
	~<f¡»am
>

63 
	~<io¡»am
>

64 
	~<™”©Ü
>

65 
	~<lim™s
>

66 
	~<loÿË
>

67 
	~<memÜy
>

68 
	~<¿ndom
>

69 
	~<s¡»am
>

70 
	~<ut™y
>

72 
	~"b’chm¬k/b’chm¬k.h
"

73 
	~"check.h
"

74 
	~"cyşeşock.h
"

75 
	~"š‹º®_maüos.h
"

76 
	~"log.h
"

77 
	~"¡ršg_ut.h
"

78 
	~"tim”s.h
"

80 
Çme¥aû
 
	gb’chm¬k
 {

81 
	gÇme¥aû
 {

83 
PrštImp
(
¡d
::
o¡»am
& 
out
è{ ouˆ<< std::
’dl
; }

85 
	g‹m¶©e
 <
şass
 
	gFœ¡
, 
	gşass
... 
	gRe¡
>

86 
PrštImp
(
¡d
::
o¡»am
& 
out
, 
Fœ¡
&& 
f
, 
Re¡
&&... 
»¡
) {

87 
	gout
 << 
	g¡d
::
fÜw¬d
<
Fœ¡
>(
f
);

88 
PrštImp
(
out
, 
¡d
::
fÜw¬d
<
Re¡
>(
»¡
)...);

91 
	g‹m¶©e
 <
	gşass
... 
	gArgs
>

92 
BENCHMARK_NORETURN
 
PrštE¼ÜAndD›
(
Args
&&... 
¬gs
) {

93 
PrštImp
(
¡d
::
û¼
, std::
fÜw¬d
<
Args
>(
¬gs
)...);

94 
	g¡d
::
ex™
(
EXIT_FAILURE
);

97 #ifdeà
BENCHMARK_HAS_SYSCTL


101 
	sV®ueUniÚ
 {

102 
	uD©aT
 {

103 
št32_t
 
	gšt32_v®ue
;

104 
št64_t
 
	gšt64_v®ue
;

106 
	gby‹s
[8];

108 
usšg
 
	gD©aPŒ
 = 
¡d
::
unique_±r
<
D©aT
, 
deşty³
(&¡d::
ä“
)>;

111 
	g¡d
::
size_t
 
size
;

112 
D©aPŒ
 
	gbuff
;

114 
	gpublic
:

115 
V®ueUniÚ
(è: 
size
(0), 
buff
(
nuÎ±r
, &
¡d
::
ä“
) {}

117 
ex¶ic™
 
V®ueUniÚ
(
¡d
::
size_t
 
buff_size
)

118 : 
size
((
D©aT
è+ 
buff_size
),

119 
buff
(::
Ãw
 (
¡d
::
m®loc
(
size
)è
D©aT
(), &¡d::
ä“
) {}

121 
V®ueUniÚ
(V®ueUniÚ&& 
Ùh”
) = ;

123 
ex¶ic™
 
İ”©Ü
 
boŞ
(ècÚ¡ {  boŞ(
buff
); }

125 * 
d©a
(ècÚ¡ {  
	gbuff
->
	gby‹s
; }

127 
	g¡d
::
¡ršg
 
G‘AsSŒšg
(ècÚ¡ {  
¡d
::¡ršg(
d©a
()); }

129 
št64_t
 
G‘AsIÁeg”
() const {

130 ià(
	gsize
 =ğ(
buff
->
št32_v®ue
))

131  
buff
->
št32_v®ue
;

132 ià(
	gsize
 =ğ(
buff
->
št64_v®ue
))

133  
buff
->
št64_v®ue
;

134 
BENCHMARK_UNREACHABLE
();

137 
	g‹m¶©e
 <
şass
 
	gT
, 
	gN
>

138 
	g¡d
::
¬¿y
<
T
, 
	gN
> 
G‘AsA¼ay
() {

139 cÚ¡ 
	g¬r_size
 = (
T
è* 
N
;

140 
BM_CHECK_LE
(
¬r_size
, 
size
);

141 
	g¡d
::
¬¿y
<
T
, 
	gN
> 
	g¬r
;

142 
	g¡d
::
memıy
(
¬r
.
d©a
(), d©a(), 
¬r_size
);

143  
	g¬r
;

147 
V®ueUniÚ
 
G‘SysùlImp
(
¡d
::
¡ršg
 cÚ¡& 
Çme
) {

148 #ià
defšed
 
BENCHMARK_OS_OPENBSD


149 
mib
[2];

151 
	gmib
[0] = 
CTL_HW
;

152 ià((
	gÇme
 =ğ"hw.nıu"è|| (
Çme
 == "hw.cpuspeed")) {

153 
V®ueUniÚ
 
buff
(());

155 ià(
	gÇme
 == "hw.ncpu") {

156 
mib
[1] = 
HW_NCPU
;

158 
	gmib
[1] = 
HW_CPUSPEED
;

161 ià(
sysùl
(
mib
, 2, 
buff
.
d©a
(), &buff.
Size
, 
nuÎ±r
, 0) == -1) {

162  
V®ueUniÚ
();

164  
	gbuff
;

166  
V®ueUniÚ
();

168 
	g¡d
::
size_t
 
cur_buff_size
 = 0;

169 ià(
sysùlbyÇme
(
Çme
.
c_¡r
(), 
nuÎ±r
, &
cur_buff_size
,‚ullptr, 0) == -1)

170  
V®ueUniÚ
();

172 
V®ueUniÚ
 
buff
(
cur_buff_size
);

173 ià(
sysùlbyÇme
(
Çme
.
c_¡r
(), 
buff
.
d©a
(), &buff.
size
, 
nuÎ±r
, 0) == 0)

174  
buff
;

175  
V®ueUniÚ
();

179 
BENCHMARK_MAYBE_UNUSED


180 
boŞ
 
G‘Sysùl
(
¡d
::
¡ršg
 cÚ¡& 
Çme
, std::¡ršg* 
out
) {

181 
out
->
ş—r
();

182 autØ
	gbuff
 = 
G‘SysùlImp
(
Çme
);

183 ià(!
	gbuff
è 
	gçl£
;

184 
	gout
->
assign
(
buff
.
d©a
());

185  
	gŒue
;

188 
	g‹m¶©e
 <
şass
 
	gTp
,

189 
	gşass
 = 
ty³Çme
 
¡d
::
’abË_if
<¡d::
is_š‹g¿l
<
Tp
>::
v®ue
>::
ty³
>

190 
boŞ
 
G‘Sysùl
(
¡d
::
¡ršg
 cÚ¡& 
Çme
, 
Tp
* 
out
) {

191 *
	gout
 = 0;

192 autØ
	gbuff
 = 
G‘SysùlImp
(
Çme
);

193 ià(!
	gbuff
è 
	gçl£
;

194 *
	gout
 = 
¡©ic_ÿ¡
<
Tp
>(
buff
.
G‘AsIÁeg”
());

195  
	gŒue
;

198 
	g‹m¶©e
 <
şass
 
	gTp
, 
size_t
 
	gN
>

199 
boŞ
 
G‘Sysùl
(
¡d
::
¡ršg
 cÚ¡& 
Çme
, std::
¬¿y
<
Tp
, 
N
>* 
out
) {

200 autØ
	gbuff
 = 
G‘SysùlImp
(
Çme
);

201 ià(!
	gbuff
è 
	gçl£
;

202 *
	gout
 = 
buff
.
G‘AsA¼ay
<
Tp
, 
	gN
>();

203  
	gŒue
;

207 
	g‹m¶©e
 <
şass
 
	gArgT
>

208 
boŞ
 
R—dFromFe
(
¡d
::
¡ršg
 cÚ¡& 
âame
, 
ArgT
* 
¬g
) {

209 *
	g¬g
 = 
ArgT
();

210 
	g¡d
::
if¡»am
 
f
(
âame
.
c_¡r
());

211 ià(!
	gf
.
is_İ’
()è 
	gçl£
;

212 
	gf
 >> *
	g¬g
;

213  
	gf
.
good
();

216 
	gCPUInfo
::
Sÿlšg
 
CpuSÿlšg
(
num_ıus
) {

218 ià(
num_ıus
 <ğ0è 
CPUInfo
::
Sÿlšg
::
UNKNOWN
;

219 #ià
defšed
(
BENCHMARK_OS_QNX
)

220  
	gCPUInfo
::
Sÿlšg
::
UNKNOWN
;

221 #–ià!
defšed
(
BENCHMARK_OS_WINDOWS
)

225 
	g¡d
::
¡ršg
 
»s
;

226 
	gıu
 = 0; cpu < 
	gnum_ıus
; ++cpu) {

227 
	g¡d
::
¡ršg
 
gov”nÜ_fe
 =

228 
SŒC©
("/sys/deviûs/sy¡em/ıu/ıu", 
ıu
, "/cpufreq/scaling_governor");

229 ià(
R—dFromFe
(
gov”nÜ_fe
, &
»s
è&& 
	g»s
 != "performance")

230  
CPUInfo
::
Sÿlšg
::
ENABLED
;

232  
	gCPUInfo
::
Sÿlšg
::
DISABLED
;

234  
	gCPUInfo
::
Sÿlšg
::
UNKNOWN
;

238 
CouÁS‘B™sInCPUM­
(
¡d
::
¡ršg
 
v®
) {

239 autØ
CouÁB™s
 = [](
¡d
::
¡ršg
 
·¹
) {

240 
usšg
 
CPUMask
 = 
¡d
::
b™£t
<(¡d::
ušŒ_t
è* 
CHAR_BIT
>;

241 
	g·¹
 = "0x" + 
·¹
;

242 
CPUMask
 
mask
(
b’chm¬k
::
¡oul
(
·¹
, 
nuÎ±r
, 16));

243  
	g¡©ic_ÿ¡
<>(
	gmask
.
couÁ
());

245 
	g¡d
::
size_t
 
pos
;

246 
	gtÙ®
 = 0;

247 (
	gpos
 = 
v®
.
fšd
(',')è!ğ
¡d
::
¡ršg
::
Åos
) {

248 
tÙ®
 +ğ
CouÁB™s
(
v®
.
sub¡r
(0, 
pos
));

249 
	gv®
 = 
v®
.
sub¡r
(
pos
 + 1);

251 ià(!
	gv®
.
em±y
()) {

252 
	gtÙ®
 +ğ
CouÁB™s
(
v®
);

254  
	gtÙ®
;

257 
BENCHMARK_MAYBE_UNUSED


258 
	g¡d
::
veùÜ
<
CPUInfo
::
CacheInfo
> 
G‘CacheSizesFromKVFS
() {

259 
¡d
::
veùÜ
<
CPUInfo
::
CacheInfo
> 
»s
;

260 
	g¡d
::
¡ršg
 
dœ
 = "/sys/devices/system/cpu/cpu0/cache/";

261 
	gidx
 = 0;

262 
	gŒue
) {

263 
	gCPUInfo
::
CacheInfo
 
šfo
;

264 
	g¡d
::
¡ršg
 
å©h
 = 
SŒC©
(
dœ
, "šdex", 
idx
++, "/");

265 
	g¡d
::
if¡»am
 
f
(
SŒC©
(
å©h
, "size").
c_¡r
());

266 ià(!
	gf
.
is_İ’
()) ;

267 
	g¡d
::
¡ršg
 
suffix
;

268 
	gf
 >> 
	gšfo
.
	gsize
;

269 ià(
	gf
.
ç
())

270 
PrštE¼ÜAndD›
("Faed wh»adšg f'", 
å©h
, "size'");

271 ià(
	gf
.
good
()) {

272 
	gf
 >> 
	gsuffix
;

273 ià(
	gf
.
bad
())

274 
PrštE¼ÜAndD›
(

276 ià(
	gf
 && 
	gsuffix
 != "K")

277 
PrštE¼ÜAndD›
("Inv®id cachsizfÜm©: Ex³ùed by‹ ", 
suffix
);

278 ià(
	gsuffix
 == "K")

279 
šfo
.
size
 *= 1024;

281 ià(!
R—dFromFe
(
SŒC©
(
å©h
, "ty³"), &
šfo
.
ty³
))

282 
PrštE¼ÜAndD›
("FaedØ»ad from f", 
å©h
, "type");

283 ià(!
R—dFromFe
(
SŒC©
(
å©h
, "Ëv–"), &
šfo
.
Ëv–
))

284 
PrštE¼ÜAndD›
("FaedØ»ad from f", 
å©h
, "level");

285 
	g¡d
::
¡ršg
 
m­_¡r
;

286 ià(!
R—dFromFe
(
SŒC©
(
å©h
, "sh¬ed_ıu_m­"), &
m­_¡r
))

287 
PrštE¼ÜAndD›
("FaedØ»ad from f", 
å©h
, "shared_cpu_map");

288 
	gšfo
.
	gnum_sh¬šg
 = 
CouÁS‘B™sInCPUM­
(
m­_¡r
);

289 
	g»s
.
push_back
(
šfo
);

292  
	g»s
;

295 #ifdeà
BENCHMARK_OS_MACOSX


296 
	g¡d
::
veùÜ
<
CPUInfo
::
CacheInfo
> 
G‘CacheSizesMacOSX
() {

297 
¡d
::
veùÜ
<
CPUInfo
::
CacheInfo
> 
»s
;

298 
	g¡d
::
¬¿y
<, 4> 
	gÿche_couÁs
{{0, 0, 0, 0}};

299 
G‘Sysùl
("hw.ÿchecÚfig", &
ÿche_couÁs
);

302 
	g¡d
::
¡ršg
 
Çme
;

303 
	g¡d
::
¡ršg
 
ty³
;

304 
	gËv–
;

305 
	gnum_sh¬šg
;

306 } 
	gÿ£s
[] = {{"hw.l1dÿchesize", "D©a", 1, 
ÿche_couÁs
[1]},

307 {"hw.l1iÿchesize", "In¡ruùiÚ", 1, 
ÿche_couÁs
[1]},

308 {"hw.l2ÿchesize", "Unif›d", 2, 
ÿche_couÁs
[2]},

309 {"hw.l3ÿchesize", "Unif›d", 3, 
ÿche_couÁs
[3]}};

310 auto& 
	gc
 : 
ÿ£s
) {

311 
v®
;

312 ià(!
G‘Sysùl
(
c
.
Çme
, &
v®
)) ;

313 
	gCPUInfo
::
CacheInfo
 
šfo
;

314 
	gšfo
.
	gty³
 = 
c
.
ty³
;

315 
	gšfo
.
	gËv–
 = 
c
.
Ëv–
;

316 
	gšfo
.
	gsize
 = 
v®
;

317 
	gšfo
.
	gnum_sh¬šg
 = 
c
.
num_sh¬šg
;

318 
	g»s
.
push_back
(
¡d
::
move
(
šfo
));

320  
	g»s
;

322 #–ià
defšed
(
BENCHMARK_OS_WINDOWS
)

323 
	g¡d
::
veùÜ
<
CPUInfo
::
CacheInfo
> 
G‘CacheSizesWšdows
() {

324 
¡d
::
veùÜ
<
CPUInfo
::
CacheInfo
> 
»s
;

325 
DWORD
 
	gbufãr_size
 = 0;

326 
usšg
 
	gPInfo
 = 
SYSTEM_LOGICAL_PROCESSOR_INFORMATION
;

327 
usšg
 
	gCInfo
 = 
CACHE_DESCRIPTOR
;

329 
usšg
 
	gUPŒ
 = 
¡d
::
unique_±r
<
PInfo
, 
deşty³
(&¡d::
ä“
)>;

330 
G‘LogiÿlProûssÜInfÜm©iÚ
(
nuÎ±r
, &
bufãr_size
);

331 
UPŒ
 
buff
((
PInfo
*)
m®loc
(
bufãr_size
), &
¡d
::
ä“
);

332 ià(!
G‘LogiÿlProûssÜInfÜm©iÚ
(
buff
.
g‘
(), &
bufãr_size
))

333 
PrštE¼ÜAndD›
("Failed during callo GetLogicalProcessorInformation: ",

334 
G‘La¡E¼Ü
());

336 
PInfo
* 
	g™
 = 
buff
.
g‘
();

337 
PInfo
* 
	g’d
 = 
buff
.
g‘
(è+ (
bufãr_size
 / (PInfo));

339 ; 
	g™
 !ğ
’d
; ++it) {

340 ià(
	g™
->
	gR–©iÚsh
 !ğ
R–©iÚCache
) ;

341 
usšg
 
	gB™S‘
 = 
¡d
::
b™£t
<(
ULONG_PTR
è* 
CHAR_BIT
>;

342 
B™S‘
 
b
(
™
->
ProûssÜMask
);

344 ià(!
	gb
.
‹¡
(0)) ;

345 cÚ¡ 
	gCInfo
& 
	gÿche
 = 
™
->
Cache
;

346 
	gCPUInfo
::
CacheInfo
 
C
;

347 
	gC
.
	gnum_sh¬šg
 = 
¡©ic_ÿ¡
<>(
b
.
couÁ
());

348 
	gC
.
	gËv–
 = 
ÿche
.
Lev–
;

349 
	gC
.
	gsize
 = 
ÿche
.
Size
;

350 
	gC
.
	gty³
 = "Unknown";

351 
	gÿche
.
	gTy³
) {

352 
	gCacheUnif›d
:

353 
C
.
ty³
 = "Unified";

355 
	gCacheIn¡ruùiÚ
:

356 
C
.
ty³
 = "Instruction";

358 
	gCacheD©a
:

359 
C
.
ty³
 = "Data";

361 
	gCacheT¿û
:

362 
C
.
ty³
 = "Trace";

365 
	g»s
.
push_back
(
C
);

367  
	g»s
;

369 #–ià
BENCHMARK_OS_QNX


370 
	g¡d
::
veùÜ
<
CPUInfo
::
CacheInfo
> 
G‘CacheSizesQNX
() {

371 
¡d
::
veùÜ
<
CPUInfo
::
CacheInfo
> 
»s
;

372 
ÿch—‰r_’Œy
* 
	gÿche
 = 
SYSPAGE_ENTRY
(
ÿch—‰r
);

373 
ušt32_t
 cÚ¡ 
	g–size
 = 
SYSPAGE_ELEMENT_SIZE
(
ÿch—‰r
);

374 
	gnum
 = 
SYSPAGE_ENTRY_SIZE
(
ÿch—‰r
è/ 
–size
;

375 
	gi
 = 0; i < 
	gnum
; ++i) {

376 
	gCPUInfo
::
CacheInfo
 
šfo
;

377 
	gÿche
->
	gæags
) {

378 
	gCACHE_FLAG_INSTR
:

379 
šfo
.
ty³
 = "Instruction";

380 
	gšfo
.
	gËv–
 = 1;

382 
	gCACHE_FLAG_DATA
:

383 
šfo
.
ty³
 = "Data";

384 
	gšfo
.
	gËv–
 = 1;

386 
	gCACHE_FLAG_UNIFIED
:

387 
šfo
.
ty³
 = "Unified";

388 
	gšfo
.
	gËv–
 = 2;

390 
	gCACHE_FLAG_SHARED
:

391 
šfo
.
ty³
 = "Shared";

392 
	gšfo
.
	gËv–
 = 3;

398 
	gšfo
.
	gsize
 = 
ÿche
->
lše_size
 * cache->
num_lšes
;

399 
	gšfo
.
	gnum_sh¬šg
 = 0;

400 
	g»s
.
push_back
(
¡d
::
move
(
šfo
));

401 
	gÿche
 = 
SYSPAGE_ARRAY_ADJ_OFFSET
(
ÿch—‰r
, 
ÿche
, 
–size
);

403  
	g»s
;

407 
	g¡d
::
veùÜ
<
CPUInfo
::
CacheInfo
> 
G‘CacheSizes
() {

408 #ifdeà
BENCHMARK_OS_MACOSX


409  
G‘CacheSizesMacOSX
();

410 #–ià
defšed
(
BENCHMARK_OS_WINDOWS
)

411  
G‘CacheSizesWšdows
();

412 #–ià
defšed
(
BENCHMARK_OS_QNX
)

413  
G‘CacheSizesQNX
();

414 #–ià
defšed
(
BENCHMARK_OS_QURT
)

415  
	g¡d
::
veùÜ
<
CPUInfo
::
CacheInfo
>();

417  
G‘CacheSizesFromKVFS
();

421 
	g¡d
::
¡ršg
 
G‘Sy¡emName
() {

422 #ià
defšed
(
BENCHMARK_OS_WINDOWS
)

423 
¡d
::
¡ršg
 
¡r
;

424 
cÚ¡ex´
 
	gCOUNT
 = 
MAX_COMPUTERNAME_LENGTH
 + 1;

425 
TCHAR
 
	gho¡Çme
[
COUNT
] = {'\0'};

426 
DWORD
 
	gDWCOUNT
 = 
COUNT
;

427 ià(!
G‘Compu‹rName
(
ho¡Çme
, &
DWCOUNT
)è 
	g¡d
::
¡ršg
("");

428 #iâdeà
UNICODE


429 
	g¡r
 = 
¡d
::
¡ršg
(
ho¡Çme
, 
DWCOUNT
);

432 
	gËn
 = 
WideCh¬ToMuÉiBy‹
(
CP_UTF8
, 
WC_ERR_INVALID_CHARS
, 
ho¡Çme
,

433 
DWCOUNT
, 
NULL
, 0, NULL, NULL);

434 
	g¡r
.
»size
(
Ën
);

435 
WideCh¬ToMuÉiBy‹
(
CP_UTF8
, 
WC_ERR_INVALID_CHARS
, 
ho¡Çme
, 
DWCOUNT
, &
¡r
[0],

436 
¡r
.
size
(), 
NULL
, NULL);

438  
	g¡r
;

439 #–ià
defšed
(
BENCHMARK_OS_QURT
)

440 
	g¡d
::
¡ršg
 
¡r
 = "Hexagon DSP";

441 
qu¹_¬ch_v”siÚ_t
 
	g¬ch_v”siÚ_¡ruù
;

442 ià(
qu¹_sy£nv_g‘_¬ch_v”siÚ
(&
¬ch_v”siÚ_¡ruù
è=ğ
QURT_EOK
) {

443 
¡r
 += " v";

444 
	g¡r
 +ğ
¡d
::
to_¡ršg
(
¬ch_v”siÚ_¡ruù
.
¬ch_v”siÚ
);

446  
	g¡r
;

448 #iâdeà
HOST_NAME_MAX


449 #ifdeà
BENCHMARK_HAS_SYSCTL


450 
	#HOST_NAME_MAX
 64

	)

451 #–ià
defšed
(
BENCHMARK_OS_NACL
)

452 
	#HOST_NAME_MAX
 64

	)

453 #–ià
defšed
(
BENCHMARK_OS_QNX
)

454 
	#HOST_NAME_MAX
 154

	)

455 #–ià
defšed
(
BENCHMARK_OS_RTEMS
)

456 
	#HOST_NAME_MAX
 256

	)

457 #–ià
defšed
(
BENCHMARK_OS_SOLARIS
)

458 
	#HOST_NAME_MAX
 
MAXHOSTNAMELEN


	)

460 #´agm¨
mes§ge
("HOST_NAME_MAX‚ot defined. using 64")

461 
	#HOST_NAME_MAX
 64

	)

464 
	gho¡Çme
[
HOST_NAME_MAX
];

465 
	g»tV®
 = 
g‘ho¡Çme
(
ho¡Çme
, 
HOST_NAME_MAX
);

466 ià(
	g»tV®
 !ğ0è 
¡d
::
¡ršg
("");

467  
	g¡d
::
¡ršg
(
ho¡Çme
);

471 
G‘NumCPUs
() {

472 #ifdeà
BENCHMARK_HAS_SYSCTL


473 
	gnum_ıu
 = -1;

474 ià(
G‘Sysùl
("hw.nıu", &
num_ıu
)è 
	gnum_ıu
;

475 
årštf
(
¡d”r
, "E¼: %s\n", 
¡»¼Ü
(
”ºo
));

476 
	g¡d
::
ex™
(
EXIT_FAILURE
);

477 #–ià
defšed
(
BENCHMARK_OS_WINDOWS
)

478 
SYSTEM_INFO
 
	gsysšfo
;

481 
	g¡d
::
mem£t
(&
sysšfo
, 0, (
SYSTEM_INFO
));

482 
G‘Sy¡emInfo
(&
sysšfo
);

483  
	gsysšfo
.
	gdwNumb”OfProûssÜs
;

486 #–ià
defšed
(
BENCHMARK_OS_SOLARIS
)

488 
	gnum_ıu
 = 
syscÚf
(
_SC_NPROCESSORS_ONLN
);

489 ià(
	gnum_ıu
 < 0) {

490 
årštf
(
¡d”r
, "sysconf(_SC_NPROCESSORS_ONLN) failed withƒrror: %s\n",

491 
¡»¼Ü
(
”ºo
));

493  ()
	gnum_ıu
;

494 #–ià
defšed
(
BENCHMARK_OS_QNX
)

495  
	g¡©ic_ÿ¡
<>(
	g_sy¥age_±r
->
	gnum_ıu
);

496 #–ià
defšed
(
BENCHMARK_OS_QURT
)

497 
qu¹_sy£nv_max_hth»ads_t
 
	gh¬dw¬e_th»ads
;

498 ià(
qu¹_sy£nv_g‘_max_hw_th»ads
(&
h¬dw¬e_th»ads
è!ğ
QURT_EOK
) {

499 
h¬dw¬e_th»ads
.
max_hth»ads
 = 1;

501  
	gh¬dw¬e_th»ads
.
	gmax_hth»ads
;

503 
	gnum_ıus
 = 0;

504 
	gmax_id
 = -1;

505 
	g¡d
::
if¡»am
 
f
("/proc/cpuinfo");

506 ià(!
	gf
.
is_İ’
()) {

507 
	g¡d
::
û¼
 << "failedo open /proc/cpuinfo\n";

510 cÚ¡ 
	g¡d
::
¡ršg
 
Key
 = "processor";

511 
	g¡d
::
¡ršg
 
Ê
;

512 
	g¡d
::
g‘lše
(
f
, 
Ê
)) {

513 ià(
	gÊ
.
em±y
()) ;

514 
	g¡d
::
size_t
 
¥l™_idx
 = 
Ê
.
fšd
(':');

515 
	g¡d
::
¡ršg
 
v®ue
;

516 #ià
defšed
(
__s390__
)

519 ià(
	g¥l™_idx
 !ğ
¡d
::
¡ršg
::
Åos
)

520 
v®ue
 = 
Ê
.
sub¡r
(
Key
.
size
(è+ 1, 
¥l™_idx
 - Key.size() - 1);

522 ià(
	g¥l™_idx
 !ğ
¡d
::
¡ršg
::
Åos
è
v®ue
 = 
Ê
.
sub¡r
(
¥l™_idx
 + 1);

524 ià(
	gÊ
.
size
(è>ğ
Key
.size(è&& 
Ê
.
com·»
(0, Key.size(), Key) == 0) {

525 
num_ıus
++;

526 ià(!
	gv®ue
.
em±y
()) {

527 cÚ¡ 
	gcur_id
 = 
b’chm¬k
::
¡oi
(
v®ue
);

528 
	gmax_id
 = 
¡d
::
max
(
cur_id
, 
max_id
);

532 ià(
	gf
.
bad
()) {

533 
	g¡d
::
û¼
 << "Failure„eading /proc/cpuinfo\n";

536 ià(!
	gf
.
eof
()) {

537 
	g¡d
::
û¼
 << "Failedo„eadoƒnd of /proc/cpuinfo\n";

540 
	gf
.
şo£
();

542 ià((
	gmax_id
 + 1è!ğ
num_ıus
) {

543 
årštf
(
¡d”r
,

547  
	gnum_ıus
;

549 
BENCHMARK_UNREACHABLE
();

552 şas 
	cTh»adAffš™yGu¬d
 
	gfš®
 {

553 
	gpublic
:

554 
Th»adAffš™yGu¬d
(è: 
»£t_affš™y
(
S‘Affš™y
()) {

555 ià(!
»£t_affš™y
)

556 
¡d
::
û¼
 << "***WARNING*** Failedo sethread‡ffinity. Estimated CPU "

558 << 
¡d
::
’dl
;

561 ~
Th»adAffš™yGu¬d
() {

562 ià(!
	g»£t_affš™y
) ;

564 #ià
defšed
(
BENCHMARK_HAS_PTHREAD_AFFINITY
)

565 
	g»t
 = 
±h»ad_£ffš™y_Å
(
£lf
, (
´evious_affš™y
),

566 &
´evious_affš™y
);

567 ià(
	g»t
 == 0) ;

568 #–ià
defšed
(
BENCHMARK_OS_WINDOWS_WIN32
)

569 
DWORD_PTR
 
	g»t
 = 
S‘Th»adAffš™yMask
(
£lf
, 
´evious_affš™y
);

570 ià(
	g»t
 != 0) ;

572 
PrštE¼ÜAndD›
("Failedo„esethread‡ffinity");

575 
Th»adAffš™yGu¬d
(Th»adAffš™yGu¬d&&èğ
d–‘e
;

576 
Th»adAffš™yGu¬d
(cÚ¡ Th»adAffš™yGu¬d&èğ
d–‘e
;

577 
	gTh»adAffš™yGu¬d
& 
	gİ”©Ü
=(
Th»adAffš™yGu¬d
&&èğ
d–‘e
;

578 
	gTh»adAffš™yGu¬d
& 
	gİ”©Ü
=(cÚ¡ 
Th»adAffš™yGu¬d
&èğ
d–‘e
;

580 
	g´iv©e
:

581 
boŞ
 
S‘Affš™y
() {

582 #ià
defšed
(
BENCHMARK_HAS_PTHREAD_AFFINITY
)

583 
»t
;

584 
	g£lf
 = 
±h»ad_£lf
();

585 
	g»t
 = 
±h»ad_g‘affš™y_Å
(
£lf
, (
´evious_affš™y
),

586 &
´evious_affš™y
);

587 ià(
	g»t
 !ğ0è 
çl£
;

589 
ıu_£t_t
 
	gaffš™y
;

590 
memıy
(&
affš™y
, &
´evious_affš™y
, (affinity));

592 
boŞ
 
	gis_fœ¡_ıu
 = 
Œue
;

594 
	gi
 = 0; i < 
	gCPU_SETSIZE
; ++i)

595 ià(
CPU_ISSET
(
i
, &
affš™y
)) {

596 ià(
	gis_fœ¡_ıu
)

597 
	gis_fœ¡_ıu
 = 
çl£
;

599 
CPU_CLR
(
i
, &
affš™y
);

602 ià(
	gis_fœ¡_ıu
è 
	gçl£
;

604 
	g»t
 = 
±h»ad_£ffš™y_Å
(
£lf
, (
affš™y
), &affinity);

605  
	g»t
 == 0;

606 #–ià
defšed
(
BENCHMARK_OS_WINDOWS_WIN32
)

607 
	g£lf
 = 
G‘Cu¼’tTh»ad
();

608 
DWORD_PTR
 
	gmask
 = 
¡©ic_ÿ¡
<DWORD_PTR>(1è<< 
G‘Cu¼’tProûssÜNumb”
();

609 
	g´evious_affš™y
 = 
S‘Th»adAffš™yMask
(
£lf
, 
mask
);

610  
	g´evious_affš™y
 != 0;

612  
	gçl£
;

616 #ià
defšed
(
BENCHMARK_HAS_PTHREAD_AFFINITY
)

617 
±h»ad_t
 
	g£lf
;

618 
ıu_£t_t
 
	g´evious_affš™y
;

619 #–ià
defšed
(
BENCHMARK_OS_WINDOWS_WIN32
)

620 
HANDLE
 
	g£lf
;

621 
DWORD_PTR
 
	g´evious_affš™y
;

623 
boŞ
 
	g»£t_affš™y
;

626 
G‘CPUCyşesP”SecÚd
(
CPUInfo
::
Sÿlšg
 
sÿlšg
) {

629 ()
sÿlšg
;

631 #ià
defšed
 
BENCHMARK_OS_LINUX
 || defšed 
BENCHMARK_OS_CYGWIN


632 
	gäeq
;

640 ià(
R—dFromFe
("/sys/deviûs/sy¡em/ıu/ıu0/tsc_äeq_khz", &
äeq
)

644 || (
	gsÿlšg
 =ğ
CPUInfo
::
Sÿlšg
::
DISABLED
 &&

645 
R—dFromFe
("/sys/devices/system/cpu/cpu0/cpufreq/scaling_cur_freq",

646 &
äeq
))

650 || 
R—dFromFe
("/sys/devices/system/cpu/cpu0/cpufreq/cpuinfo_max_freq",

651 &
äeq
)) {

654  
	gäeq
 * 1000.0;

657 cÚ¡ 
	g”rÜ_v®ue
 = -1;

658 
	gbogo_şock
 = 
”rÜ_v®ue
;

660 
	g¡d
::
if¡»am
 
f
("/proc/cpuinfo");

661 ià(!
	gf
.
is_İ’
()) {

662 
	g¡d
::
û¼
 << "failedo open /proc/cpuinfo\n";

663  
	g”rÜ_v®ue
;

666 autØ
	gS¹sW™hKey
 = [](
¡d
::
¡ršg
 cÚ¡& 
V®ue
, 
	g¡d
::¡ršg cÚ¡& 
Key
) {

667 ià(
Key
.
size
(è> 
V®ue
.size()è 
çl£
;

668 autØ
	gCmp
 = [&](
X
, 
	gY
) {

669  
	g¡d
::
tŞow”
(
X
è=ğ
¡d
::tŞow”(
Y
);

671  
	g¡d
::
equ®
(
Key
.
begš
(), Key.
’d
(), 
V®ue
.begš(), 
Cmp
);

674 
	g¡d
::
¡ršg
 
Ê
;

675 
	g¡d
::
g‘lše
(
f
, 
Ê
)) {

676 ià(
	gÊ
.
em±y
()) ;

677 
	g¡d
::
size_t
 
¥l™_idx
 = 
Ê
.
fšd
(':');

678 
	g¡d
::
¡ršg
 
v®ue
;

679 ià(
	g¥l™_idx
 !ğ
¡d
::
¡ršg
::
Åos
è
v®ue
 = 
Ê
.
sub¡r
(
¥l™_idx
 + 1);

683 ià(
S¹sW™hKey
(
Ê
, "cpu MHz")) {

684 ià(!
	gv®ue
.
em±y
()) {

685 
	gcyşes_³r_£cÚd
 = 
b’chm¬k
::
¡od
(
v®ue
) * 1000000.0;

686 ià(
	gcyşes_³r_£cÚd
 > 0)  cycles_per_second;

688 } ià(
S¹sW™hKey
(
Ê
, "bogomips")) {

689 ià(!
	gv®ue
.
em±y
()) {

690 
	gbogo_şock
 = 
b’chm¬k
::
¡od
(
v®ue
) * 1000000.0;

691 ià(
	gbogo_şock
 < 0.0èbogo_şock = 
”rÜ_v®ue
;

695 ià(
	gf
.
bad
()) {

696 
	g¡d
::
û¼
 << "Failure„eading /proc/cpuinfo\n";

697  
	g”rÜ_v®ue
;

699 ià(!
	gf
.
eof
()) {

700 
	g¡d
::
û¼
 << "Failedo„eadoƒnd of /proc/cpuinfo\n";

701  
	g”rÜ_v®ue
;

703 
	gf
.
şo£
();

707 ià(
	gbogo_şock
 >ğ0.0è 
bogo_şock
;

709 #–ià
defšed
 
BENCHMARK_HAS_SYSCTL


710 
cÚ¡ex´
‡uto* 
	gäeqSŒ
 =

711 #ià
defšed
(
BENCHMARK_OS_FREEBSD
è|| defšed(
BENCHMARK_OS_NETBSD
)

713 #–ià
defšed
 
BENCHMARK_OS_OPENBSD


715 #–ià
defšed
 
BENCHMARK_OS_DRAGONFLY


720 
	ghz
 = 0;

721 #ià
defšed
 
BENCHMARK_OS_OPENBSD


722 ià(
G‘Sysùl
(
äeqSŒ
, &
hz
)è 
	ghz
 * 1000000;

724 ià(
G‘Sysùl
(
äeqSŒ
, &
hz
)è 
	ghz
;

726 
årštf
(
¡d”r
, "Unableo determine clock„ate from sysctl: %s: %s\n",

727 
äeqSŒ
, 
¡»¼Ü
(
”ºo
));

728 
årštf
(
¡d”r
,

732 #–ià
defšed
 
BENCHMARK_OS_WINDOWS_WIN32


735 
DWORD
 
	gd©a
, 
	gd©a_size
 = (
d©a
);

736 ià(
IsWšdowsXPOrG»©”
() &&

737 
SUCCEEDED
(

738 
SHG‘V®ueA
(
HKEY_LOCAL_MACHINE
,

740 "~MHz", 
nuÎ±r
, &
d©a
, &
d©a_size
)))

741  
	g¡©ic_ÿ¡
<>((
	gšt64_t
)
	gd©a
 *

742 (
	gšt64_t
)(1000 * 1000));

743 #–ià
defšed
(
BENCHMARK_OS_SOLARIS
)

744 
k¡©_ùl_t
* 
	gkc
 = 
k¡©_İ’
();

745 ià(!
	gkc
) {

746 
	g¡d
::
û¼
 << "failedo open /dev/kstat\n";

749 
k¡©_t
* 
	gk¥
 = 
k¡©_lookup
(
kc
, 
cÚ¡_ÿ¡
<*>("cpu_info"), -1,

750 
cÚ¡_ÿ¡
<*>("cpu_info0"));

751 ià(!
	gk¥
) {

752 
	g¡d
::
û¼
 << "failedo†ookup in /dev/kstat\n";

755 ià(
k¡©_»ad
(
kc
, 
k¥
, 
NULL
) < 0) {

756 
	g¡d
::
û¼
 << "failedo„ead from /dev/kstat\n";

759 
k¡©_Çmed_t
* 
	gkÅ
 = (k¡©_Çmed_t*)
k¡©_d©a_lookup
(

760 
k¥
, 
cÚ¡_ÿ¡
<*>("current_clock_Hz"));

761 ià(!
	gkÅ
) {

762 
	g¡d
::
û¼
 << "failedo†ookup data in /dev/kstat\n";

765 ià(
	gkÅ
->
	gd©a_ty³
 !ğ
KSTAT_DATA_UINT64
) {

766 
¡d
::
û¼
 << "current_clock_Hz is of unexpected dataype: "

767 << 
kÅ
->
d©a_ty³
 << "\n";

770 
	gşock_hz
 = 
kÅ
->
v®ue
.
ui64
;

771 
k¡©_şo£
(
kc
);

772  
	gşock_hz
;

773 #–ià
defšed
(
BENCHMARK_OS_QNX
)

774  
	g¡©ic_ÿ¡
<>((
	gšt64_t
)(
SYSPAGE_ENTRY
(
ıušfo
)->
	g¥“d
) *

775 (
	gšt64_t
)(1000 * 1000));

776 #–ià
defšed
(
BENCHMARK_OS_QURT
)

785 
Th»adAffš™yGu¬d
 
	gaffš™y_gu¬d
;

787 
cÚ¡ex´
 
	ge¡im©e_time_s
 = 1.0;

788 cÚ¡ 
	g¡¬t_time
 = 
ChrÚoClockNow
();

789 cÚ¡‡utØ
	g¡¬t_ticks
 = 
cyşeşock
::
Now
();

793 
usšg
 
	gPRNG
 = 
¡d
::
mš¡d_¿nd
;

794 
usšg
 
	gResuÉ
 = 
PRNG
::
»suÉ_ty³
;

795 
PRNG
 
ºg
(
¡©ic_ÿ¡
<
ResuÉ
>(
¡¬t_ticks
));

797 
ResuÉ
 
	g¡©e
 = 0;

800 
cÚ¡ex´
 
size_t
 
	gb©ch_size
 = 10000;

801 
	gºg
.
disÿrd
(
b©ch_size
);

802 
	g¡©e
 +ğ
ºg
();

804 } 
ChrÚoClockNow
(è- 
	g¡¬t_time
 < 
	ge¡im©e_time_s
);

806 
DoNÙO±imize
(
¡©e
);

808 cÚ¡‡utØ
	g’d_ticks
 = 
cyşeşock
::
Now
();

809 cÚ¡ 
	g’d_time
 = 
ChrÚoClockNow
();

811  
	g¡©ic_ÿ¡
<>(
	g’d_ticks
 - 
	g¡¬t_ticks
è/ (
	g’d_time
 - 
	g¡¬t_time
);

816 
	g¡d
::
veùÜ
<> 
G‘LßdAvg
() {

817 #ià(
defšed
 
BENCHMARK_OS_FREEBSD
 || defšed(
BENCHMARK_OS_LINUX
) || \

818 
defšed
 
BENCHMARK_OS_MACOSX
 || defšed 
BENCHMARK_OS_NETBSD
 || \

819 
defšed
 
BENCHMARK_OS_OPENBSD
 || defšed 
BENCHMARK_OS_DRAGONFLY
) && \

820 !
defšed
(
__ANDROID__
)

821 
cÚ¡ex´
 
kMaxSam¶es
 = 3;

822 
	g¡d
::
veùÜ
<> 
»s
(
kMaxSam¶es
, 0.0);

823 cÚ¡ 
	gÃËm
 = 
g‘lßdavg
(
»s
.
d©a
(), 
kMaxSam¶es
);

824 ià(
	gÃËm
 < 1) {

825 
	g»s
.
ş—r
();

827 
	g»s
.
»size
(
ÃËm
);

829  
	g»s
;

837 cÚ¡ 
	gCPUInfo
& CPUInfo::
	$G‘
() {

838 cÚ¡ 
CPUInfo
* 
šfo
 = 
Ãw
 
	`CPUInfo
();

839  *
šfo
;

840 
	}
}

842 
	gCPUInfo
::
	$CPUInfo
()

843 : 
	`num_ıus
(
	`G‘NumCPUs
()),

844 
	`sÿlšg
(
	`CpuSÿlšg
(
num_ıus
)),

845 
	`cyşes_³r_£cÚd
(
	`G‘CPUCyşesP”SecÚd
(
sÿlšg
)),

846 
	`ÿches
(
	`G‘CacheSizes
()),

847 
	`lßd_avg
(
	$G‘LßdAvg
()è{
	}
}

849 cÚ¡ 
	gSy¡emInfo
& Sy¡emInfo::
	$G‘
() {

850 cÚ¡ 
Sy¡emInfo
* 
šfo
 = 
Ãw
 
	`Sy¡emInfo
();

851  *
šfo
;

852 
	}
}

854 
	gSy¡emInfo
::
	$Sy¡emInfo
(è: 
	`Çme
(
	$G‘Sy¡emName
()è{
	}
}

	@third_party/benchmark/src/thread_manager.h

1 #iâdeà
BENCHMARK_THREAD_MANAGER_H


2 
	#BENCHMARK_THREAD_MANAGER_H


	)

4 
	~<©omic
>

6 
	~"b’chm¬k/b’chm¬k.h
"

7 
	~"mu‹x.h
"

9 
Çme¥aû
 
	gb’chm¬k
 {

10 
Çme¥aû
 
	gš‹º®
 {

12 şas 
	cTh»adMªag”
 {

13 
	gpublic
:

14 
ex¶ic™
 
Th»adMªag”
(
num_th»ads
)

15 : 
®ive_th»ads_
(
num_th»ads
), 
¡¬t_¡İ_b¬r›r_
(num_threads) {}

17 
	gMu‹x
& 
G‘B’chm¬kMu‹x
(ècÚ¡ 
RETURN_CAPABILITY
(
b’chm¬k_mu‹x_
) {

18  
	gb’chm¬k_mu‹x_
;

21 
boŞ
 
S¹StİB¬r›r
(è
EXCLUDES
(
’d_cÚd_mu‹x_
) {

22  
	g¡¬t_¡İ_b¬r›r_
.
wa™
();

25 
NÙifyTh»adCom¶‘e
(è
EXCLUDES
(
’d_cÚd_mu‹x_
) {

26 
	g¡¬t_¡İ_b¬r›r_
.
»moveTh»ad
();

27 ià(--
	g®ive_th»ads_
 == 0) {

28 
Mu‹xLock
 
lock
(
’d_cÚd_mu‹x_
);

29 
	g’d_cÚd™iÚ_
.
nÙify_®l
();

33 
Wa™FÜAÎTh»ads
(è
EXCLUDES
(
’d_cÚd_mu‹x_
) {

34 
Mu‹xLock
 
lock
(
’d_cÚd_mu‹x_
);

35 
	g’d_cÚd™iÚ_
.
wa™
(
lock
.
Çtive_hªdË
(),

36 [
this
](è{  
®ive_th»ads_
 == 0; });

39 
	sResuÉ
 {

40 
I‹¿tiÚCouÁ
 
	g™”©iÚs
 = 0;

41 
	g»®_time_u£d
 = 0;

42 
	gıu_time_u£d
 = 0;

43 
	gmªu®_time_u£d
 = 0;

44 
št64_t
 
	gcom¶ex™y_n
 = 0;

45 
	g¡d
::
¡ršg
 
»pÜt_Ïb–_
;

46 
	g¡d
::
¡ršg
 
sk_mes§ge_
;

47 
	gš‹º®
::
Sk³d
 
sk³d_
 = 
š‹º®
::
NÙSk³d
;

48 
U£rCouÁ”s
 
	gcouÁ”s
;

50 
GUARDED_BY
(
G‘B’chm¬kMu‹x
()è
ResuÉ
 
	g»suÉs
;

52 
	g´iv©e
:

53 
mubË
 
Mu‹x
 
b’chm¬k_mu‹x_
;

54 
	g¡d
::
©omic
<> 
®ive_th»ads_
;

55 
B¬r›r
 
	g¡¬t_¡İ_b¬r›r_
;

56 
Mu‹x
 
	g’d_cÚd_mu‹x_
;

57 
CÚd™iÚ
 
	g’d_cÚd™iÚ_
;

	@third_party/benchmark/src/thread_timer.h

1 #iâdeà
BENCHMARK_THREAD_TIMER_H


2 
	#BENCHMARK_THREAD_TIMER_H


	)

4 
	~"check.h
"

5 
	~"tim”s.h
"

7 
Çme¥aû
 
	gb’chm¬k
 {

8 
Çme¥aû
 
	gš‹º®
 {

10 şas 
	cTh»adTim”
 {

11 
ex¶ic™
 
Th»adTim”
(
boŞ
 
m—su»_´oûss_ıu_time_
)

12 : 
m—su»_´oûss_ıu_time
(
m—su»_´oûss_ıu_time_
) {}

14 
public
:

15 
Th»adTim”
 
C»©e
() {

16  
Th»adTim”
Ğ
çl£
);

18 
Th»adTim”
 
C»©eProûssCpuTime
() {

19  
Th»adTim”
Ğ
Œue
);

23 
S¹Tim”
() {

24 
	gruÂšg_
 = 
Œue
;

25 
	g¡¬t_»®_time_
 = 
ChrÚoClockNow
();

26 
	g¡¬t_ıu_time_
 = 
R—dCpuTim”OfChoiû
();

30 
StİTim”
() {

31 
BM_CHECK
(
ruÂšg_
);

32 
	gruÂšg_
 = 
çl£
;

33 
	g»®_time_u£d_
 +ğ
ChrÚoClockNow
(è- 
¡¬t_»®_time_
;

36 
	gıu_time_u£d_
 +=

37 
¡d
::
max
<>(
R—dCpuTim”OfChoiû
(è- 
¡¬t_ıu_time_
, 0);

41 
S‘I‹¿tiÚTime
(
£cÚds
è{ 
	gmªu®_time_u£d_
 += seconds; }

43 
boŞ
 
ruÂšg
(ècÚ¡ {  
	gruÂšg_
; }

46 
»®_time_u£d
() const {

47 
BM_CHECK
(!
ruÂšg_
);

48  
	g»®_time_u£d_
;

52 
ıu_time_u£d
() const {

53 
BM_CHECK
(!
ruÂšg_
);

54  
	gıu_time_u£d_
;

58 
mªu®_time_u£d
() const {

59 
BM_CHECK
(!
ruÂšg_
);

60  
	gmªu®_time_u£d_
;

63 
	g´iv©e
:

64 
R—dCpuTim”OfChoiû
() const {

65 ià(
m—su»_´oûss_ıu_time
è 
ProûssCPUU§ge
();

66  
Th»adCPUU§ge
();

70 cÚ¡ 
boŞ
 
	gm—su»_´oûss_ıu_time
;

72 
boŞ
 
	gruÂšg_
 = 
çl£
;

73 
	g¡¬t_»®_time_
 = 0;

74 
	g¡¬t_ıu_time_
 = 0;

77 
	g»®_time_u£d_
 = 0;

78 
	gıu_time_u£d_
 = 0;

80 
	gmªu®_time_u£d_
 = 0;

	@third_party/benchmark/src/timers.cc

15 
	~"tim”s.h
"

17 
	~"š‹º®_maüos.h
"

19 #ifdeà
BENCHMARK_OS_WINDOWS


20 
	~<shlw­i.h
>

21 #undeà
SŒC©


22 
	~<v”siÚh–³rs.h
>

23 
	~<wšdows.h
>

25 
	~<fú.h
>

26 #ià!
defšed
(
BENCHMARK_OS_FUCHSIA
è&& !defšed(
BENCHMARK_OS_QURT
)

27 
	~<sys/»sourû.h
>

29 
	~<sys/time.h
>

30 
	~<sys/ty³s.h
>

31 
	~<uni¡d.h
>

32 #ià
defšed
 
BENCHMARK_OS_FREEBSD
 || defšed 
BENCHMARK_OS_DRAGONFLY
 || \

33 
defšed
 
	gBENCHMARK_OS_MACOSX


34 
	~<sys/sysùl.h
>

36 #ià
defšed
(
BENCHMARK_OS_MACOSX
)

37 
	~<mach/mach_š™.h
>

38 
	~<mach/mach_pÜt.h
>

39 
	~<mach/th»ad_aù.h
>

41 #ià
defšed
(
BENCHMARK_OS_QURT
)

42 
	~<qu¹.h
>

46 #ifdeà
BENCHMARK_OS_EMSCRIPTEN


47 
	~<emsü‹n.h
>

50 
	~<û¼no
>

51 
	~<c¡dšt
>

52 
	~<c¡dio
>

53 
	~<c¡dlib
>

54 
	~<c¡ršg
>

55 
	~<ùime
>

56 
	~<io¡»am
>

57 
	~<lim™s
>

58 
	~<mu‹x
>

60 
	~"check.h
"

61 
	~"log.h
"

62 
	~"¡ršg_ut.h
"

64 
Çme¥aû
 
	gb’chm¬k
 {

67 #ià
defšed
(
__GNUC__
)

68 #´agm¨
GCC
 
dŸgno¡ic
 
ignÜed
 "-Wunused-function"

70 #ià
defšed
(
__NVCOMPILER
)

71 #´agm¨
dŸg_suµ»ss
 
deş¬ed_but_nÙ_»ã»nûd


74 
	gÇme¥aû
 {

75 #ià
defšed
(
BENCHMARK_OS_WINDOWS
)

76 
MakeTime
(
FILETIME
 cÚ¡& 
k”Ãl_time
, FILETIME cÚ¡& 
u£r_time
) {

77 
ULARGE_INTEGER
 
	gk”Ãl
;

78 
ULARGE_INTEGER
 
	gu£r
;

79 
	gk”Ãl
.
	gHighP¬t
 = 
k”Ãl_time
.
dwHighD©eTime
;

80 
	gk”Ãl
.
	gLowP¬t
 = 
k”Ãl_time
.
dwLowD©eTime
;

81 
	gu£r
.
	gHighP¬t
 = 
u£r_time
.
dwHighD©eTime
;

82 
	gu£r
.
	gLowP¬t
 = 
u£r_time
.
dwLowD©eTime
;

83  (
	g¡©ic_ÿ¡
<>(
	gk”Ãl
.
	gQuadP¬t
) +

84 
	g¡©ic_ÿ¡
<>(
	gu£r
.
	gQuadP¬t
)) *

87 #–ià!
defšed
(
BENCHMARK_OS_FUCHSIA
è&& !defšed(
BENCHMARK_OS_QURT
)

88 
MakeTime
(
ru§ge
 cÚ¡& 
ru
) {

89  (
	g¡©ic_ÿ¡
<>(
	gru
.
	gru_utime
.
	gtv_£c
) +

90 
	g¡©ic_ÿ¡
<>(
	gru
.
	gru_utime
.
	gtv_u£c
) * 1e-6 +

91 
	g¡©ic_ÿ¡
<>(
	gru
.
	gru_¡ime
.
	gtv_£c
) +

92 
	g¡©ic_ÿ¡
<>(
	gru
.
	gru_¡ime
.
	gtv_u£c
) * 1e-6);

95 #ià
defšed
(
BENCHMARK_OS_MACOSX
)

96 
MakeTime
(
th»ad_basic_šfo_d©a_t
 cÚ¡& 
šfo
) {

97  (
	g¡©ic_ÿ¡
<>(
	gšfo
.
	gu£r_time
.
	g£cÚds
) +

98 
	g¡©ic_ÿ¡
<>(
	gšfo
.
	gu£r_time
.
	gmiüo£cÚds
) * 1e-6 +

99 
	g¡©ic_ÿ¡
<>(
	gšfo
.
	gsy¡em_time
.
	g£cÚds
) +

100 
	g¡©ic_ÿ¡
<>(
	gšfo
.
	gsy¡em_time
.
	gmiüo£cÚds
) * 1e-6);

103 #ià
defšed
(
CLOCK_PROCESS_CPUTIME_ID
è|| defšed(
CLOCK_THREAD_CPUTIME_ID
)

104 
MakeTime
(
time¥ec
 cÚ¡& 
ts
) {

105  
	gts
.
	gtv_£c
 + (
	g¡©ic_ÿ¡
<>Ñs.
	gtv_n£c
) * 1e-9);

109 
BENCHMARK_NORETURN
 
DŸgno£AndEx™
(cÚ¡ * 
msg
) {

110 
	g¡d
::
û¼
 << "ERROR: " << 
msg
 << 
¡d
::
’dl
;

111 
	g¡d
::
ex™
(
EXIT_FAILURE
);

116 
ProûssCPUU§ge
() {

117 #ià
defšed
(
BENCHMARK_OS_WINDOWS
)

118 
HANDLE
 
	g´oc
 = 
G‘Cu¼’tProûss
();

119 
FILETIME
 
	gü—tiÚ_time
;

120 
FILETIME
 
	gex™_time
;

121 
FILETIME
 
	gk”Ãl_time
;

122 
FILETIME
 
	gu£r_time
;

123 ià(
G‘ProûssTimes
(
´oc
, &
ü—tiÚ_time
, &
ex™_time
, &
k”Ãl_time
,

124 &
u£r_time
))

125  
MakeTime
(
k”Ãl_time
, 
u£r_time
);

126 
DŸgno£AndEx™
("GetProccessTimes() failed");

127 #–ià
defšed
(
BENCHMARK_OS_QURT
)

128  
	g¡©ic_ÿ¡
<>(

129 
qu¹_tim”_tim‘ick_to_us
(
qu¹_tim”_g‘_ticks
())) *

131 #–ià
defšed
(
BENCHMARK_OS_EMSCRIPTEN
)

136  
emsü‹n_g‘_now
() * 1e-3;

137 #–ià
defšed
(
CLOCK_PROCESS_CPUTIME_ID
è&& !defšed(
BENCHMARK_OS_MACOSX
)

140 
time¥ec
 
	g¥ec
;

141 ià(
şock_g‘time
(
CLOCK_PROCESS_CPUTIME_ID
, &
¥ec
) == 0)

142  
MakeTime
(
¥ec
);

143 
DŸgno£AndEx™
("clock_gettime(CLOCK_PROCESS_CPUTIME_ID, ...) failed");

145 
ru§ge
 
	gru
;

146 ià(
g‘ru§ge
(
RUSAGE_SELF
, &
ru
è=ğ0è 
MakeTime
(ru);

147 
DŸgno£AndEx™
("getrusage(RUSAGE_SELF, ...) failed");

151 
Th»adCPUU§ge
() {

152 #ià
defšed
(
BENCHMARK_OS_WINDOWS
)

153 
HANDLE
 
	gthis_th»ad
 = 
G‘Cu¼’tTh»ad
();

154 
FILETIME
 
	gü—tiÚ_time
;

155 
FILETIME
 
	gex™_time
;

156 
FILETIME
 
	gk”Ãl_time
;

157 
FILETIME
 
	gu£r_time
;

158 
G‘Th»adTimes
(
this_th»ad
, &
ü—tiÚ_time
, &
ex™_time
, &
k”Ãl_time
,

159 &
u£r_time
);

160  
MakeTime
(
k”Ãl_time
, 
u£r_time
);

161 #–ià
defšed
(
BENCHMARK_OS_QURT
)

162  
	g¡©ic_ÿ¡
<>(

163 
qu¹_tim”_tim‘ick_to_us
(
qu¹_tim”_g‘_ticks
())) *

165 #–ià
defšed
(
BENCHMARK_OS_MACOSX
)

168 
mach_msg_ty³_numb”_t
 
	gcouÁ
 = 
THREAD_BASIC_INFO_COUNT
;

169 
th»ad_basic_šfo_d©a_t
 
	gšfo
;

170 
mach_pÜt_t
 
	gth»ad
 = 
±h»ad_mach_th»ad_Å
(
±h»ad_£lf
());

171 ià(
th»ad_šfo
(
th»ad
, 
THREAD_BASIC_INFO
,

172 
»š‹½»t_ÿ¡
<
th»ad_šfo_t
>(&
šfo
),

173 &
couÁ
è=ğ
KERN_SUCCESS
) {

174  
MakeTime
(
šfo
);

176 
DŸgno£AndEx™
("ThreadCPUUsage() failed whenƒvaluatinghread_info");

177 #–ià
defšed
(
BENCHMARK_OS_EMSCRIPTEN
)

179  
ProûssCPUU§ge
();

180 #–ià
defšed
(
BENCHMARK_OS_RTEMS
)

183  
ProûssCPUU§ge
();

184 #–ià
defšed
(
BENCHMARK_OS_SOLARIS
)

185 
ru§ge
 
	gru
;

186 ià(
g‘ru§ge
(
RUSAGE_LWP
, &
ru
è=ğ0è 
MakeTime
(ru);

187 
DŸgno£AndEx™
("getrusage(RUSAGE_LWP, ...) failed");

188 #–ià
defšed
(
CLOCK_THREAD_CPUTIME_ID
)

189 
time¥ec
 
	gts
;

190 ià(
şock_g‘time
(
CLOCK_THREAD_CPUTIME_ID
, &
ts
è=ğ0è 
MakeTime
(ts);

191 
DŸgno£AndEx™
("clock_gettime(CLOCK_THREAD_CPUTIME_ID, ...) failed");

193 #”rÜ 
P”
-
th»ad
 
timšg
 
is
 
nÙ
 
avaabË
 
Ú
 
your
 
sy¡em
.

197 
	g¡d
::
¡ršg
 
LoÿlD©eTimeSŒšg
() {

199 
¡d
::
	tchrÚo
::
	tsy¡em_şock
 
	tClock
;

200 
	g¡d
::
time_t
 
now
 = 
Clock
::
to_time_t
(Clock::now());

201 cÚ¡ 
	g¡d
::
size_t
 
kTzOff£tL’
 = 6;

202 cÚ¡ 
	g¡d
::
size_t
 
kTime¡ampL’
 = 19;

204 
	g¡d
::
size_t
 
tz_Ën
;

205 
	g¡d
::
size_t
 
time¡amp_Ën
;

206 
	goff£t_mšu‹s
;

207 
	gtz_off£t_sign
 = '+';

219 
	gtz_off£t
[41];

221 
	g¡Üage
[128];

223 #ià
defšed
(
BENCHMARK_OS_WINDOWS
)

224 
	g¡d
::
tm
* 
timešfo_p
 = ::
loÿÉime
(&
now
);

226 
	g¡d
::
tm
 
timešfo
;

227 
	g¡d
::
tm
* 
timešfo_p
 = &
timešfo
;

228 ::
loÿÉime_r
(&
now
, &
timešfo
);

231 
	gtz_Ën
 = 
¡d
::
¡ráime
(
tz_off£t
, Ñz_off£t), "%z", 
timešfo_p
);

233 ià(
	gtz_Ën
 < 
	gkTzOff£tL’
 &&z_len > 1) {

238 
	goff£t_mšu‹s
 = ::
¡¹Ş
(
tz_off£t
, 
NULL
, 10);

239 ià(
	goff£t_mšu‹s
 < 0) {

240 
	goff£t_mšu‹s
 *= -1;

241 
	gtz_off£t_sign
 = '-';

244 
	gtz_Ën
 =

245 ::
¢´štf
(
tz_off£t
, (tz_offset), "%c%02li:%02li",

246 
tz_off£t_sign
, 
off£t_mšu‹s
 / 100, offset_minutes % 100);

247 
BM_CHECK
(
tz_Ën
 =ğ
kTzOff£tL’
);

248 (()
	gtz_Ën
);

252 #ià
defšed
(
BENCHMARK_OS_WINDOWS
)

254 
	gtimešfo_p
 = ::
gmtime
(&
now
);

256 ::
gmtime_r
(&
now
, &
timešfo
);

259 
¡ºıy
(
tz_off£t
, "-00:00", 
kTzOff£tL’
 + 1);

262 
	gtime¡amp_Ën
 =

263 
¡d
::
¡ráime
(
¡Üage
, (¡Üage), "%Y-%m-%dT%H:%M:%S", 
timešfo_p
);

264 
BM_CHECK
(
time¡amp_Ën
 =ğ
kTime¡ampL’
);

266 (()
	gkTime¡ampL’
);

268 
	g¡d
::
¡ºÿt
(
¡Üage
, 
tz_off£t
, (¡Üageè- 
time¡amp_Ën
 - 1);

269  
	g¡d
::
¡ršg
(
¡Üage
);

	@third_party/benchmark/src/timers.h

1 #iâdeà
BENCHMARK_TIMERS_H


2 
	#BENCHMARK_TIMERS_H


	)

4 
	~<chrÚo
>

5 
	~<¡ršg
>

7 
Çme¥aû
 
	gb’chm¬k
 {

10 
ProûssCPUU§ge
();

13 
Chd»nCPUU§ge
();

16 
Th»adCPUU§ge
();

18 #ià
defšed
(
HAVE_STEADY_CLOCK
)

19 
	g‹m¶©e
 <
boŞ
 
	gHighResIsS‹ady
 = 
¡d
::
chrÚo
::
high_»sŞutiÚ_şock
::
is_¡—dy
>

20 
	sChoo£S‹adyClock
 {

21 
¡d
::
	tchrÚo
::
	thigh_»sŞutiÚ_şock
 
	tty³
;

24 
	g‹m¶©e
 <>

25 
	gChoo£S‹adyClock
<
	gçl£
> {

26 
	g¡d
::
	tchrÚo
::
	t¡—dy_şock
 
	tty³
;

30 
	sChoo£ClockTy³
 {

31 #ià
defšed
(
HAVE_STEADY_CLOCK
)

32 
	gChoo£S‹adyClock
<>::
	tty³
ype;

34 
	g¡d
::
	tchrÚo
::
	thigh_»sŞutiÚ_şock
 
	tty³
;

38 
šlše
 
ChrÚoClockNow
() {

39 
	gChoo£ClockTy³
::
	tty³
 
	tClockTy³
;

40 
usšg
 
	gFpSecÚds
 = 
¡d
::
chrÚo
::
du¿tiÚ
<, 
	g¡d
::chrÚo::
£cÚds
::
³riod
>;

41  
FpSecÚds
(
ClockTy³
::
now
().
time_sšû_•och
()).
couÁ
();

44 
	g¡d
::
¡ršg
 
LoÿlD©eTimeSŒšg
();

	@third_party/benchmark/test/args_product_test.cc

1 
	~<ÿs£¹
>

2 
	~<io¡»am
>

3 
	~<£t
>

4 
	~<veùÜ
>

6 
	~"b’chm¬k/b’chm¬k.h
"

8 şas 
	cArgsProduùFixtu»
 : 
public
 ::
b’chm¬k
::
Fixtu»
 {

9 
public
:

10 
	$ArgsProduùFixtu»
()

11 : 
	`ex³ùedV®ues
({{0, 100, 2000, 30000},

24 {4, 5, 6, 11}}è{
	}
}

26 
	$S‘Up
(cÚ¡ ::
b’chm¬k
::
S‹
& 
¡©e
è
ov”ride
 {

27 
¡d
::
veùÜ
<
št64_t
> 
¿nges
 = {
¡©e
.
	`¿nge
(0), state.range(1),

28 
¡©e
.
	`¿nge
(2), state.range(3)};

30 
	`as£¹
(
ex³ùedV®ues
.
	`fšd
(
¿nges
è!ğex³ùedV®ues.
	`’d
());

32 
aùu®V®ues
.
	`š£¹
(
¿nges
);

33 
	}
}

37 ~
	$ArgsProduùFixtu»
(è
ov”ride
 {

38 ià(
aùu®V®ues
 !ğ
ex³ùedV®ues
) {

39 
¡d
::
cout
 << "EXPECTED\n";

40 cÚ¡‡uto& 
v
 : 
ex³ùedV®ues
) {

41 
¡d
::
cout
 << "{";

42 
št64_t
 
iv
 : 
v
) {

43 
¡d
::
cout
 << 
iv
 << ", ";

45 
¡d
::
cout
 << "}\n";

47 
¡d
::
cout
 << "ACTUAL\n";

48 cÚ¡‡uto& 
v
 : 
aùu®V®ues
) {

49 
¡d
::
cout
 << "{";

50 
št64_t
 
iv
 : 
v
) {

51 
¡d
::
cout
 << 
iv
 << ", ";

53 
¡d
::
cout
 << "}\n";

56 
	}
}

58 
	g¡d
::
£t
<
¡d
::
veùÜ
<
št64_t
>> 
ex³ùedV®ues
;

59 
	g¡d
::
£t
<
¡d
::
veùÜ
<
št64_t
>> 
aùu®V®ues
;

62 
	$BENCHMARK_DEFINE_F
(
ArgsProduùFixtu»
, 
Em±y
)(
b’chm¬k
::
S‹
& 
¡©e
) {

63 autØ
_
 : 
¡©e
) {

64 
št64_t
 
´oduù
 =

65 
¡©e
.
	`¿nge
(0) * state.range(1) * state.range(2) * state.range(3);

66 
št64_t
 
x
 = 0; x < 
´oduù
; x++) {

67 
b’chm¬k
::
	`DoNÙO±imize
(
x
);

70 
	}
}

72 
BENCHMARK_REGISTER_F
(
ArgsProduùFixtu»
, 
Em±y
)

73 ->
Args
({0, 100, 2000, 30000})

74 ->
ArgsProduù
({{1, 2}, {15}, {3, 7, 10}, {8, 9}})

75 ->
Args
({4, 5, 6, 11});

77 
BENCHMARK_MAIN
();

	@third_party/benchmark/test/basic_test.cc

2 
	~"b’chm¬k/b’chm¬k.h
"

4 
	#BASIC_BENCHMARK_TEST
(
x
è
	`BENCHMARK
(x)->
	`Arg
(8)->Arg(512)->Arg(8192)

	)

6 
	$BM_em±y
(
b’chm¬k
::
S‹
& 
¡©e
) {

7 autØ
_
 : 
¡©e
) {

8 autØ
™”©iÚs
 = 
¡©e
.
	`™”©iÚs
();

9 
b’chm¬k
::
	`DoNÙO±imize
(
™”©iÚs
);

11 
	}
}

12 
BENCHMARK
(
BM_em±y
);

13 
BENCHMARK
(
BM_em±y
)->
Th»adP”Cpu
();

15 
	$BM_¥š_em±y
(
b’chm¬k
::
S‹
& 
¡©e
) {

16 autØ
_
 : 
¡©e
) {

17 autØ
x
 = 0; x < 
¡©e
.
	`¿nge
(0); ++x) {

18 
b’chm¬k
::
	`DoNÙO±imize
(
x
);

21 
	}
}

22 
BASIC_BENCHMARK_TEST
(
BM_¥š_em±y
);

23 
BASIC_BENCHMARK_TEST
(
BM_¥š_em±y
)->
Th»adP”Cpu
();

25 
	$BM_¥š_·u£_befÜe
(
b’chm¬k
::
S‹
& 
¡©e
) {

26 autØ
i
 = 0; i < 
¡©e
.
	`¿nge
(0); ++i) {

27 
b’chm¬k
::
	`DoNÙO±imize
(
i
);

29 autØ
_
 : 
¡©e
) {

30 autØ
i
 = 0; i < 
¡©e
.
	`¿nge
(0); ++i) {

31 
b’chm¬k
::
	`DoNÙO±imize
(
i
);

34 
	}
}

35 
BASIC_BENCHMARK_TEST
(
BM_¥š_·u£_befÜe
);

36 
BASIC_BENCHMARK_TEST
(
BM_¥š_·u£_befÜe
)->
Th»adP”Cpu
();

38 
	$BM_¥š_·u£_duršg
(
b’chm¬k
::
S‹
& 
¡©e
) {

39 autØ
_
 : 
¡©e
) {

40 
¡©e
.
	`Pau£Timšg
();

41 autØ
i
 = 0; i < 
¡©e
.
	`¿nge
(0); ++i) {

42 
b’chm¬k
::
	`DoNÙO±imize
(
i
);

44 
¡©e
.
	`ResumeTimšg
();

45 autØ
i
 = 0; i < 
¡©e
.
	`¿nge
(0); ++i) {

46 
b’chm¬k
::
	`DoNÙO±imize
(
i
);

49 
	}
}

50 
BASIC_BENCHMARK_TEST
(
BM_¥š_·u£_duršg
);

51 
BASIC_BENCHMARK_TEST
(
BM_¥š_·u£_duršg
)->
Th»adP”Cpu
();

53 
	$BM_·u£_duršg
(
b’chm¬k
::
S‹
& 
¡©e
) {

54 autØ
_
 : 
¡©e
) {

55 
¡©e
.
	`Pau£Timšg
();

56 
¡©e
.
	`ResumeTimšg
();

58 
	}
}

59 
BENCHMARK
(
BM_·u£_duršg
);

60 
BENCHMARK
(
BM_·u£_duršg
)->
Th»adP”Cpu
();

61 
BENCHMARK
(
BM_·u£_duršg
)->
U£R—lTime
();

62 
BENCHMARK
(
BM_·u£_duršg
)->
U£R—lTime
()->
Th»adP”Cpu
();

64 
	$BM_¥š_·u£_aá”
(
b’chm¬k
::
S‹
& 
¡©e
) {

65 autØ
_
 : 
¡©e
) {

66 autØ
i
 = 0; i < 
¡©e
.
	`¿nge
(0); ++i) {

67 
b’chm¬k
::
	`DoNÙO±imize
(
i
);

70 autØ
i
 = 0; i < 
¡©e
.
	`¿nge
(0); ++i) {

71 
b’chm¬k
::
	`DoNÙO±imize
(
i
);

73 
	}
}

74 
BASIC_BENCHMARK_TEST
(
BM_¥š_·u£_aá”
);

75 
BASIC_BENCHMARK_TEST
(
BM_¥š_·u£_aá”
)->
Th»adP”Cpu
();

77 
	$BM_¥š_·u£_befÜe_ªd_aá”
(
b’chm¬k
::
S‹
& 
¡©e
) {

78 autØ
i
 = 0; i < 
¡©e
.
	`¿nge
(0); ++i) {

79 
b’chm¬k
::
	`DoNÙO±imize
(
i
);

81 autØ
_
 : 
¡©e
) {

82 autØ
i
 = 0; i < 
¡©e
.
	`¿nge
(0); ++i) {

83 
b’chm¬k
::
	`DoNÙO±imize
(
i
);

86 autØ
i
 = 0; i < 
¡©e
.
	`¿nge
(0); ++i) {

87 
b’chm¬k
::
	`DoNÙO±imize
(
i
);

89 
	}
}

90 
BASIC_BENCHMARK_TEST
(
BM_¥š_·u£_befÜe_ªd_aá”
);

91 
BASIC_BENCHMARK_TEST
(
BM_¥š_·u£_befÜe_ªd_aá”
)->
Th»adP”Cpu
();

93 
	$BM_em±y_¡İ_¡¬t
(
b’chm¬k
::
S‹
& 
¡©e
) {

94 autØ
_
 : 
¡©e
) {

96 
	}
}

97 
BENCHMARK
(
BM_em±y_¡İ_¡¬t
);

98 
BENCHMARK
(
BM_em±y_¡İ_¡¬t
)->
Th»adP”Cpu
();

100 
	$BM_K“pRuÂšg
(
b’chm¬k
::
S‹
& 
¡©e
) {

101 
b’chm¬k
::
I‹¿tiÚCouÁ
 
™”_couÁ
 = 0;

102 
	`as£¹
(
™”_couÁ
 =ğ
¡©e
.
	`™”©iÚs
());

103 
¡©e
.
	`K“pRuÂšg
()) {

104 ++
™”_couÁ
;

106 
	`as£¹
(
™”_couÁ
 =ğ
¡©e
.
	`™”©iÚs
());

107 
	}
}

108 
BENCHMARK
(
BM_K“pRuÂšg
);

110 
	$BM_K“pRuÂšgB©ch
(
b’chm¬k
::
S‹
& 
¡©e
) {

115 cÚ¡ 
b’chm¬k
::
I‹¿tiÚCouÁ
 
b©ch_size
 = 1009;

117 
b’chm¬k
::
I‹¿tiÚCouÁ
 
´iÜ_™”_couÁ
 = 0;

118 
b’chm¬k
::
I‹¿tiÚCouÁ
 
™”_couÁ
 = 0;

119 
¡©e
.
	`K“pRuÂšgB©ch
(
b©ch_size
)) {

120 
™”_couÁ
 +ğ
b©ch_size
;

122 
	`as£¹
(
¡©e
.
	`™”©iÚs
(è=ğ
™”_couÁ
);

126 
	`as£¹
(
™”_couÁ
 =ğ
b©ch_size


127 || 
™”_couÁ
 > 
´iÜ_™”_couÁ
);

128 
´iÜ_™”_couÁ
 = 
™”_couÁ
;

129 
	}
}

134 
BENCHMARK
(
BM_K“pRuÂšgB©ch
)->
R•‘™iÚs
(1);

136 
	$BM_RªgedFÜ
(
b’chm¬k
::
S‹
& 
¡©e
) {

137 
b’chm¬k
::
I‹¿tiÚCouÁ
 
™”_couÁ
 = 0;

138 autØ
_
 : 
¡©e
) {

139 ++
™”_couÁ
;

141 
	`as£¹
(
™”_couÁ
 =ğ
¡©e
.
max_™”©iÚs
);

142 
	}
}

143 
BENCHMARK
(
BM_RªgedFÜ
);

145 #ifdeà
BENCHMARK_HAS_CXX11


146 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

147 
	$BM_OÃTem¶©eFunc
(
b’chm¬k
::
S‹
& 
¡©e
) {

148 autØ
¬g
 = 
¡©e
.
	`¿nge
(0);

149 
T
 
sum
 = 0;

150 autØ
_
 : 
¡©e
) {

151 
sum
 +ğ
¡©ic_ÿ¡
<
T
>(
¬g
);

153 
	}
}

154 
BENCHMARK
(
BM_OÃTem¶©eFunc
<>)->
Arg
(1);

155 
BENCHMARK
(
BM_OÃTem¶©eFunc
<>)->
Arg
(1);

157 
	g‹m¶©e
 <
ty³Çme
 
	gA
,y³Çm
	gB
>

158 
	$BM_TwoTem¶©eFunc
(
b’chm¬k
::
S‹
& 
¡©e
) {

159 autØ
¬g
 = 
¡©e
.
	`¿nge
(0);

160 
A
 
sum
 = 0;

161 
B
 
´od
 = 1;

162 autØ
_
 : 
¡©e
) {

163 
sum
 +ğ
¡©ic_ÿ¡
<
A
>(
¬g
);

164 
´od
 *ğ
¡©ic_ÿ¡
<
B
>(
¬g
);

166 
	}
}

167 
BENCHMARK
(
BM_TwoTem¶©eFunc
<, >)->
Arg
(1);

168 
BENCHMARK
(
BM_TwoTem¶©eFunc
<, >)->
Arg
(1);

174 
¡©ic_as£¹
(

175 
¡d
::
is_§me
<
ty³Çme
 std::
™”©Ü_Œa™s
<

176 
b’chm¬k
::
S‹
::
S‹I‹¿tÜ
>::
v®ue_ty³
,

177 
ty³Çme
 
b’chm¬k
::
S‹
::
S‹I‹¿tÜ
::
v®ue_ty³
>::
v®ue
,

180 
BENCHMARK_MAIN
();

	@third_party/benchmark/test/benchmark_gtest.cc

1 
	~<m­
>

2 
	~<¡ršg
>

3 
	~<veùÜ
>

5 
	~"../¤c/b’chm¬k_»gi¡”.h
"

6 
	~"b’chm¬k/b’chm¬k.h
"

7 
	~"gmock/gmock.h
"

8 
	~"g‹¡/g‹¡.h
"

10 
Çme¥aû
 
	gb’chm¬k
 {

11 
Çme¥aû
 
	gš‹º®
 {

13 
	gÇme¥aû
 {

15 
TEST
(
AddRªgeTe¡
, 
Sim¶e
) {

16 
	g¡d
::
veùÜ
<> 
d¡
;

17 
AddRªge
(&
d¡
, 1, 2, 2);

18 
EXPECT_THAT
(
d¡
, 
‹¡šg
::
EËm’tsA»
(1, 2));

21 
TEST
(
AddRªgeTe¡
, 
Sim¶e64
) {

22 
	g¡d
::
veùÜ
<
št64_t
> 
d¡
;

23 
AddRªge
(&
d¡
, 
¡©ic_ÿ¡
<
št64_t
>(1), static_cast<int64_t>(2), 2);

24 
EXPECT_THAT
(
d¡
, 
‹¡šg
::
EËm’tsA»
(1, 2));

27 
TEST
(
AddRªgeTe¡
, 
Advªûd
) {

28 
	g¡d
::
veùÜ
<> 
d¡
;

29 
AddRªge
(&
d¡
, 5, 15, 2);

30 
EXPECT_THAT
(
d¡
, 
‹¡šg
::
EËm’tsA»
(5, 8, 15));

33 
TEST
(
AddRªgeTe¡
, 
Advªûd64
) {

34 
	g¡d
::
veùÜ
<
št64_t
> 
d¡
;

35 
AddRªge
(&
d¡
, 
¡©ic_ÿ¡
<
št64_t
>(5), static_cast<int64_t>(15), 2);

36 
EXPECT_THAT
(
d¡
, 
‹¡šg
::
EËm’tsA»
(5, 8, 15));

39 
TEST
(
AddRªgeTe¡
, 
FuÎRªge8
) {

40 
	g¡d
::
veùÜ
<
št8_t
> 
d¡
;

41 
AddRªge
(&
d¡
, 
št8_t
{1}, 
¡d
::
num”ic_lim™s
<št8_t>::
max
(), int8_t{8});

42 
EXPECT_THAT
(

43 
d¡
, 
‹¡šg
::
EËm’tsA»
(
št8_t
{1}, int8_t{8}, int8_t{64}, int8_t{127}));

46 
TEST
(
AddRªgeTe¡
, 
FuÎRªge64
) {

47 
	g¡d
::
veùÜ
<
št64_t
> 
d¡
;

48 
AddRªge
(&
d¡
, 
št64_t
{1}, 
¡d
::
num”ic_lim™s
<št64_t>::
max
(), 1024);

49 
EXPECT_THAT
(

50 
d¡
, 
‹¡šg
::
EËm’tsA»
(1LL, 1024LL, 1048576LL, 1073741824LL,

55 
TEST
(
AddRªgeTe¡
, 
Neg©iveRªges
) {

56 
	g¡d
::
veùÜ
<> 
d¡
;

57 
AddRªge
(&
d¡
, -8, 0, 2);

58 
EXPECT_THAT
(
d¡
, 
‹¡šg
::
EËm’tsA»
(-8, -4, -2, -1, 0));

61 
TEST
(
AddRªgeTe¡
, 
SŒiùlyNeg©ive
) {

62 
	g¡d
::
veùÜ
<> 
d¡
;

63 
AddRªge
(&
d¡
, -8, -1, 2);

64 
EXPECT_THAT
(
d¡
, 
‹¡šg
::
EËm’tsA»
(-8, -4, -2, -1));

67 
TEST
(
AddRªgeTe¡
, 
Symm‘ricNeg©iveRªges
) {

68 
	g¡d
::
veùÜ
<> 
d¡
;

69 
AddRªge
(&
d¡
, -8, 8, 2);

70 
EXPECT_THAT
(
d¡
, 
‹¡šg
::
EËm’tsA»
(-8, -4, -2, -1, 0, 1, 2, 4, 8));

73 
TEST
(
AddRªgeTe¡
, 
Symm‘ricNeg©iveRªgesOddMuÉ
) {

74 
	g¡d
::
veùÜ
<> 
d¡
;

75 
AddRªge
(&
d¡
, -30, 32, 5);

76 
EXPECT_THAT
(
d¡
, 
‹¡šg
::
EËm’tsA»
(-30, -25, -5, -1, 0, 1, 5, 25, 32));

79 
TEST
(
AddRªgeTe¡
, 
Neg©iveRªgesAsymm‘ric
) {

80 
	g¡d
::
veùÜ
<> 
d¡
;

81 
AddRªge
(&
d¡
, -3, 5, 2);

82 
EXPECT_THAT
(
d¡
, 
‹¡šg
::
EËm’tsA»
(-3, -2, -1, 0, 1, 2, 4, 5));

85 
TEST
(
AddRªgeTe¡
, 
Neg©iveRªgesL¬geS‹p
) {

87 
	g¡d
::
veùÜ
<> 
d¡
;

88 
AddRªge
(&
d¡
, -8, 8, 10);

89 
EXPECT_THAT
(
d¡
, 
‹¡šg
::
EËm’tsA»
(-8, -1, 0, 1, 8));

92 
TEST
(
AddRªgeTe¡
, 
Z”oOÆyRªge
) {

93 
	g¡d
::
veùÜ
<> 
d¡
;

94 
AddRªge
(&
d¡
, 0, 0, 2);

95 
EXPECT_THAT
(
d¡
, 
‹¡šg
::
EËm’tsA»
(0));

98 
TEST
(
AddRªgeTe¡
, 
Z”oS¹šgRªge
) {

99 
	g¡d
::
veùÜ
<> 
d¡
;

100 
AddRªge
(&
d¡
, 0, 2, 2);

101 
EXPECT_THAT
(
d¡
, 
‹¡šg
::
EËm’tsA»
(0, 1, 2));

104 
TEST
(
AddRªgeTe¡
, 
Neg©iveRªge64
) {

105 
	g¡d
::
veùÜ
<
št64_t
> 
d¡
;

106 
	gAddRªge
<
	gšt64_t
>(&
	gd¡
, -4, 4, 2);

107 
EXPECT_THAT
(
d¡
, 
‹¡šg
::
EËm’tsA»
(-4, -2, -1, 0, 1, 2, 4));

110 
TEST
(
AddRªgeTe¡
, 
Neg©iveRªgeP»£rvesExi¡šgOrd”
) {

113 
	g¡d
::
veùÜ
<
št64_t
> 
d¡
 = {1, 2, 3};

114 
	gAddRªge
<
	gšt64_t
>(&
	gd¡
, -2, 2, 2);

115 
EXPECT_THAT
(
d¡
, 
‹¡šg
::
EËm’tsA»
(1, 2, 3, -2, -1, 0, 1, 2));

118 
TEST
(
AddRªgeTe¡
, 
FuÎNeg©iveRªge64
) {

119 
	g¡d
::
veùÜ
<
št64_t
> 
d¡
;

120 cÚ¡‡utØ
	gmš
 = 
¡d
::
num”ic_lim™s
<
št64_t
>::
mš
();

121 cÚ¡‡utØ
	gmax
 = 
¡d
::
num”ic_lim™s
<
št64_t
>::
max
();

122 
AddRªge
(&
d¡
, 
mš
, 
max
, 1024);

123 
EXPECT_THAT
(

124 
d¡
, 
‹¡šg
::
EËm’tsA»A¼ay
(
¡d
::
veùÜ
<
št64_t
>{

125 
mš
, -1152921504606846976LL, -1125899906842624LL,

128 1125899906842624LL, 1152921504606846976LL, 
max
}));

131 
TEST
(
AddRªgeTe¡
, 
Sim¶e8
) {

132 
	g¡d
::
veùÜ
<
št8_t
> 
d¡
;

133 
	gAddRªge
<
	gšt8_t
>(&
	gd¡
, int8_t{1}, int8_t{8}, int8_t{2});

134 
EXPECT_THAT
(
d¡
,

135 
‹¡šg
::
EËm’tsA»
(
št8_t
{1}, int8_t{2}, int8_t{4}, int8_t{8}));

138 
TEST
(
AddCu¡omCÚ‹xt
, 
Sim¶e
) {

139 
	g¡d
::
m­
<
¡d
::
¡ršg
, std::¡ršg> *&
glob®_cÚ‹xt
 = 
G‘Glob®CÚ‹xt
();

140 
EXPECT_THAT
(
glob®_cÚ‹xt
, 
nuÎ±r
);

142 
AddCu¡omCÚ‹xt
("foo", "bar");

143 
AddCu¡omCÚ‹xt
("baz", "qux");

145 
EXPECT_THAT
(*
glob®_cÚ‹xt
,

146 
‹¡šg
::
UnÜd”edEËm’tsA»
Ñe¡šg::
Paœ
("foo", "bar"),

147 
‹¡šg
::
Paœ
("baz", "qux")));

149 
d–‘e
 
	gglob®_cÚ‹xt
;

150 
	gglob®_cÚ‹xt
 = 
nuÎ±r
;

153 
TEST
(
AddCu¡omCÚ‹xt
, 
Du¶iÿ‹Key
) {

154 
	g¡d
::
m­
<
¡d
::
¡ršg
, std::¡ršg> *&
glob®_cÚ‹xt
 = 
G‘Glob®CÚ‹xt
();

155 
EXPECT_THAT
(
glob®_cÚ‹xt
, 
nuÎ±r
);

157 
AddCu¡omCÚ‹xt
("foo", "bar");

158 
AddCu¡omCÚ‹xt
("foo", "qux");

160 
EXPECT_THAT
(*
glob®_cÚ‹xt
,

161 
‹¡šg
::
UnÜd”edEËm’tsA»
Ñe¡šg::
Paœ
("foo", "bar")));

163 
d–‘e
 
	gglob®_cÚ‹xt
;

164 
	gglob®_cÚ‹xt
 = 
nuÎ±r
;

	@third_party/benchmark/test/benchmark_min_time_flag_iters_test.cc

1 
	~<ÿs£¹
>

2 
	~<c¡dlib
>

3 
	~<c¡ršg
>

4 
	~<io¡»am
>

5 
	~<¡ršg
>

6 
	~<veùÜ
>

8 
	~"b’chm¬k/b’chm¬k.h
"

12 
	gÇme¥aû
 {

14 şas 
	cTe¡R•Ü‹r
 : 
public
 
b’chm¬k
::
CÚsŞeR•Ü‹r
 {

15 
public
:

16 
vœtu®
 
boŞ
 
R•ÜtCÚ‹xt
(cÚ¡ 
CÚ‹xt
& 
cÚ‹xt
è
BENCHMARK_OVERRIDE
 {

17  
CÚsŞeR•Ü‹r
::
R•ÜtCÚ‹xt
(
cÚ‹xt
);

20 
vœtu®
 
R•ÜtRuns
(cÚ¡ 
¡d
::
veùÜ
<
Run
>& 
»pÜt
è
BENCHMARK_OVERRIDE
 {

21 
as£¹
(
»pÜt
.
size
() == 1);

22 
	g™”_nums_
.
push_back
(
»pÜt
[0].
™”©iÚs
);

23 
	gCÚsŞeR•Ü‹r
::
R•ÜtRuns
(
»pÜt
);

26 
Te¡R•Ü‹r
() {}

28 
	gvœtu®
 ~
Te¡R•Ü‹r
() {}

30 cÚ¡ 
	g¡d
::
veùÜ
<
b’chm¬k
::
I‹¿tiÚCouÁ
>& 
G‘I‹rs
() const {

31  
™”_nums_
;

34 
	g´iv©e
:

35 
¡d
::
veùÜ
<
b’chm¬k
::
I‹¿tiÚCouÁ
> 
™”_nums_
;

40 
	$BM_MyB’ch
(
b’chm¬k
::
S‹
& 
¡©e
) {

41 autØ
s
 : 
¡©e
) {

43 
	}
}

44 
BENCHMARK
(
BM_MyB’ch
);

46 
	$maš
(
¬gc
, ** 
¬gv
) {

48 
çke_¬gc
 = 
¬gc
 + 1;

49 cÚ¡ ** 
çke_¬gv
 = 
Ãw
 cÚ¡ *[
çke_¬gc
];

50 
i
 = 0; i < 
¬gc
; ++iè
çke_¬gv
[i] = 
¬gv
[i];

51 
çke_¬gv
[
¬gc
] = "--benchmark_min_time=4x";

53 
b’chm¬k
::
	`In™Ÿlize
(&
çke_¬gc
, 
cÚ¡_ÿ¡
<**>(
çke_¬gv
));

55 
Te¡R•Ü‹r
 
‹¡_»pÜ‹r
;

56 cÚ¡ 
size_t
 
»tuºed_couÁ
 =

57 
b’chm¬k
::
	`RunS³cif›dB’chm¬ks
(&
‹¡_»pÜ‹r
, "BM_MyBench");

58 
	`as£¹
(
»tuºed_couÁ
 == 1);

61 cÚ¡ 
¡d
::
veùÜ
<
b’chm¬k
::
I‹¿tiÚCouÁ
> 
™”s
 = 
‹¡_»pÜ‹r
.
	`G‘I‹rs
();

62 
	`as£¹
(!
™”s
.
	`em±y
() && iters[0] == 4);

64 
d–‘e
[] 
çke_¬gv
;

66 
	}
}

	@third_party/benchmark/test/benchmark_min_time_flag_time_test.cc

1 
	~<ÿs£¹
>

2 
	~<şim™s
>

3 
	~<cm©h
>

4 
	~<c¡dlib
>

5 
	~<c¡ršg
>

6 
	~<io¡»am
>

7 
	~<¡ršg
>

8 
	~<veùÜ
>

10 
	~"b’chm¬k/b’chm¬k.h
"

15 
	gÇme¥aû
 {

18 
št64_t
 
	tI‹¿tiÚCouÁ
;

20 şas 
	cTe¡R•Ü‹r
 : 
public
 
b’chm¬k
::
CÚsŞeR•Ü‹r
 {

21 
public
:

22 
vœtu®
 
boŞ
 
R•ÜtCÚ‹xt
(cÚ¡ 
CÚ‹xt
& 
cÚ‹xt
è
BENCHMARK_OVERRIDE
 {

23  
CÚsŞeR•Ü‹r
::
R•ÜtCÚ‹xt
(
cÚ‹xt
);

26 
vœtu®
 
R•ÜtRuns
(cÚ¡ 
¡d
::
veùÜ
<
Run
>& 
»pÜt
è
BENCHMARK_OVERRIDE
 {

27 
as£¹
(
»pÜt
.
size
() == 1);

28 
	gCÚsŞeR•Ü‹r
::
R•ÜtRuns
(
»pÜt
);

31 
vœtu®
 
R•ÜtRunsCÚfig
(
mš_time
, 
boŞ
 ,

32 
I‹¿tiÚCouÁ
 ) 
	gBENCHMARK_OVERRIDE
 {

33 
	gmš_times_
.
push_back
(
mš_time
);

36 
Te¡R•Ü‹r
() {}

38 
	gvœtu®
 ~
Te¡R•Ü‹r
() {}

40 cÚ¡ 
	g¡d
::
veùÜ
<>& 
G‘MšTimes
(ècÚ¡ {  
mš_times_
; }

42 
	g´iv©e
:

43 
¡d
::
veùÜ
<> 
mš_times_
;

46 
boŞ
 
	$Almo¡Equ®
(
a
, 
b
) {

47  
¡d
::
	`çbs
(
a
 - 
b
è< std::
num”ic_lim™s
<>::
	`•sÚ
();

48 
	}
}

50 
	$DoTe¡H–³r
(* 
¬gc
, cÚ¡ ** 
¬gv
, 
ex³ùed
) {

51 
b’chm¬k
::
	`In™Ÿlize
(
¬gc
, 
cÚ¡_ÿ¡
<**>(
¬gv
));

53 
Te¡R•Ü‹r
 
‹¡_»pÜ‹r
;

54 cÚ¡ 
size_t
 
»tuºed_couÁ
 =

55 
b’chm¬k
::
	`RunS³cif›dB’chm¬ks
(&
‹¡_»pÜ‹r
, "BM_MyBench");

56 
	`as£¹
(
»tuºed_couÁ
 == 1);

59 cÚ¡ 
¡d
::
veùÜ
<>& 
mš_times
 = 
‹¡_»pÜ‹r
.
	`G‘MšTimes
();

60 
	`as£¹
(!
mš_times
.
	`em±y
(è&& 
	`Almo¡Equ®
(mš_times[0], 
ex³ùed
));

61 
	}
}

65 
	$BM_MyB’ch
(
b’chm¬k
::
S‹
& 
¡©e
) {

66 autØ
s
 : 
¡©e
) {

68 
	}
}

69 
BENCHMARK
(
BM_MyB’ch
);

71 
	$maš
(
¬gc
, ** 
¬gv
) {

73 
çke_¬gc
 = 
¬gc
 + 1;

74 cÚ¡ ** 
çke_¬gv
 = 
Ãw
 cÚ¡ *[
çke_¬gc
];

76 
i
 = 0; i < 
¬gc
; ++iè
çke_¬gv
[i] = 
¬gv
[i];

78 cÚ¡ * 
no_suffix
 = "--benchmark_min_time=4";

79 cÚ¡ * 
w™h_suffix
 = "--benchmark_min_time=4.0s";

80 
ex³ùed
 = 4.0;

82 
çke_¬gv
[
¬gc
] = 
no_suffix
;

83 
	`DoTe¡H–³r
(&
çke_¬gc
, 
çke_¬gv
, 
ex³ùed
);

85 
çke_¬gv
[
¬gc
] = 
w™h_suffix
;

86 
	`DoTe¡H–³r
(&
çke_¬gc
, 
çke_¬gv
, 
ex³ùed
);

88 
d–‘e
[] 
çke_¬gv
;

90 
	}
}

	@third_party/benchmark/test/benchmark_name_gtest.cc

1 
	~"b’chm¬k/b’chm¬k.h
"

2 
	~"g‹¡/g‹¡.h
"

4 
	gÇme¥aû
 {

6 
usšg
 
Çme¥aû
 
	gb’chm¬k
;

7 
usšg
 
Çme¥aû
 
	gb’chm¬k
::
š‹º®
;

9 
TEST
(
B’chm¬kNameTe¡
, 
Em±y
) {

10 cÚ¡‡utØ
	gÇme
 = 
B’chm¬kName
();

11 
EXPECT_EQ
(
Çme
.
¡r
(), 
¡d
::
¡ršg
());

14 
TEST
(
B’chm¬kNameTe¡
, 
FunùiÚName
) {

15 autØ
	gÇme
 = 
B’chm¬kName
();

16 
	gÇme
.
	gfunùiÚ_Çme
 = "function_name";

17 
EXPECT_EQ
(
Çme
.
¡r
(), "function_name");

20 
TEST
(
B’chm¬kNameTe¡
, 
FunùiÚNameAndArgs
) {

21 autØ
	gÇme
 = 
B’chm¬kName
();

22 
	gÇme
.
	gfunùiÚ_Çme
 = "function_name";

23 
	gÇme
.
	g¬gs
 = "some_args:3/4/5";

24 
EXPECT_EQ
(
Çme
.
¡r
(), "function_name/some_args:3/4/5");

27 
TEST
(
B’chm¬kNameTe¡
, 
MšTime
) {

28 autØ
	gÇme
 = 
B’chm¬kName
();

29 
	gÇme
.
	gfunùiÚ_Çme
 = "function_name";

30 
	gÇme
.
	g¬gs
 = "some_args:3/4";

31 
	gÇme
.
	gmš_time
 = "min_time:3.4s";

32 
EXPECT_EQ
(
Çme
.
¡r
(), "function_name/some_args:3/4/min_time:3.4s");

35 
TEST
(
B’chm¬kNameTe¡
, 
MšW¬mUpTime
) {

36 autØ
	gÇme
 = 
B’chm¬kName
();

37 
	gÇme
.
	gfunùiÚ_Çme
 = "function_name";

38 
	gÇme
.
	g¬gs
 = "some_args:3/4";

39 
	gÇme
.
	gmš_w¬mup_time
 = "min_warmup_time:3.5s";

40 
EXPECT_EQ
(
Çme
.
¡r
(), "function_name/some_args:3/4/min_warmup_time:3.5s");

43 
TEST
(
B’chm¬kNameTe¡
, 
I‹¿tiÚs
) {

44 autØ
	gÇme
 = 
B’chm¬kName
();

45 
	gÇme
.
	gfunùiÚ_Çme
 = "function_name";

46 
	gÇme
.
	gmš_time
 = "min_time:3.4s";

47 
	gÇme
.
	g™”©iÚs
 = "iterations:42";

48 
EXPECT_EQ
(
Çme
.
¡r
(), "function_name/min_time:3.4s/iterations:42");

51 
TEST
(
B’chm¬kNameTe¡
, 
R•‘™iÚs
) {

52 autØ
	gÇme
 = 
B’chm¬kName
();

53 
	gÇme
.
	gfunùiÚ_Çme
 = "function_name";

54 
	gÇme
.
	gmš_time
 = "min_time:3.4s";

55 
	gÇme
.
	g»³t™iÚs
 = "repetitions:24";

56 
EXPECT_EQ
(
Çme
.
¡r
(), "function_name/min_time:3.4s/repetitions:24");

59 
TEST
(
B’chm¬kNameTe¡
, 
TimeTy³
) {

60 autØ
	gÇme
 = 
B’chm¬kName
();

61 
	gÇme
.
	gfunùiÚ_Çme
 = "function_name";

62 
	gÇme
.
	gmš_time
 = "min_time:3.4s";

63 
	gÇme
.
	gtime_ty³
 = "hammer_time";

64 
EXPECT_EQ
(
Çme
.
¡r
(), "function_name/min_time:3.4s/hammer_time");

67 
TEST
(
B’chm¬kNameTe¡
, 
Th»ads
) {

68 autØ
	gÇme
 = 
B’chm¬kName
();

69 
	gÇme
.
	gfunùiÚ_Çme
 = "function_name";

70 
	gÇme
.
	gmš_time
 = "min_time:3.4s";

71 
	gÇme
.
	gth»ads
 = "threads:256";

72 
EXPECT_EQ
(
Çme
.
¡r
(), "function_name/min_time:3.4s/threads:256");

75 
TEST
(
B’chm¬kNameTe¡
, 
Te¡Em±yFunùiÚName
) {

76 autØ
	gÇme
 = 
B’chm¬kName
();

77 
	gÇme
.
	g¬gs
 = "first:3/second:4";

78 
	gÇme
.
	gth»ads
 = "threads:22";

79 
EXPECT_EQ
(
Çme
.
¡r
(), "first:3/second:4/threads:22");

	@third_party/benchmark/test/benchmark_random_interleaving_gtest.cc

1 
	~<queue
>

2 
	~<¡ršg
>

3 
	~<veùÜ
>

5 
	~"../¤c/commªdlšeæags.h
"

6 
	~"../¤c/¡ršg_ut.h
"

7 
	~"b’chm¬k/b’chm¬k.h
"

8 
	~"gmock/gmock.h
"

9 
	~"g‹¡/g‹¡.h
"

11 
Çme¥aû
 
	gb’chm¬k
 {

13 
BM_DECLARE_boŞ
(
b’chm¬k_’abË_¿ndom_š‹¾—všg
);

14 
BM_DECLARE_¡ršg
(
b’chm¬k_f‹r
);

15 
BM_DECLARE_št32
(
b’chm¬k_»³t™iÚs
);

17 
Çme¥aû
 
	gš‹º®
 {

18 
	gÇme¥aû
 {

20 
şass
 
	gEv’tQueue
 : 
public
 
¡d
::
queue
<¡d::
¡ršg
> {

21 
public
:

22 
Put
(cÚ¡ 
¡d
::
¡ršg
& 
ev’t
è{ 
push
(event); }

24 
CË¬
() {

25 !
em±y
()) {

26 
pİ
();

30 
	g¡d
::
¡ršg
 
G‘
() {

31 
¡d
::
¡ršg
 
ev’t
 = 
äÚt
();

32 
pİ
();

33  
	gev’t
;

37 
Ev’tQueue
* 
	gqueue
 = 
Ãw
 EventQueue();

39 şas 
	cNuÎR•Ü‹r
 : 
public
 
B’chm¬kR•Ü‹r
 {

40 
public
:

41 
boŞ
 
R•ÜtCÚ‹xt
(cÚ¡ 
CÚ‹xt
& ) 
ov”ride
 {  
Œue
; }

42 
R•ÜtRuns
(cÚ¡ 
¡d
::
veùÜ
<
Run
>& ) 
ov”ride
 {}

45 şas 
	cB’chm¬kTe¡
 : 
public
 
‹¡šg
::
Te¡
 {

46 
public
:

47 
S‘upHook
(è{ 
queue
->
push
("Setup"); }

49 
T—rdownHook
(è{ 
	gqueue
->
push
("Teardown"); }

51 
Execu‹
(cÚ¡ 
¡d
::
¡ršg
& 
·‰”n
) {

52 
queue
->
CË¬
();

54 
	g¡d
::
unique_±r
<
B’chm¬kR•Ü‹r
> 
»pÜ‹r
(
Ãw
 
NuÎR•Ü‹r
());

55 
	gFLAGS_b’chm¬k_f‹r
 = 
·‰”n
;

56 
RunS³cif›dB’chm¬ks
(
»pÜ‹r
.
g‘
());

58 
	gqueue
->
Put
("DONE");

62 
BM_M©ch1
(
b’chm¬k
::
S‹
& 
¡©e
) {

63 cÚ¡ 
št64_t
 
¬g
 = 
¡©e
.
¿nge
(0);

65 autØ
	g_
 : 
¡©e
) {

67 
queue
->
Put
(
SŒFÜm©
("BM_M©ch1/%d", 
¡©ic_ÿ¡
<>(
¬g
)));

69 
BENCHMARK
(
BM_M©ch1
)

70 ->
I‹¿tiÚs
(100)

71 ->
Arg
(1)

72 ->
Arg
(2)

73 ->
Arg
(3)

74 ->
Rªge
(10, 80)

75 ->
Args
({90})

76 ->
Args
({100});

78 
TEST_F
(
B’chm¬kTe¡
, 
M©ch1
) {

79 
Execu‹
("BM_Match1");

80 
ASSERT_EQ
("BM_M©ch1/1", 
queue
->
G‘
());

81 
ASSERT_EQ
("BM_M©ch1/2", 
queue
->
G‘
());

82 
ASSERT_EQ
("BM_M©ch1/3", 
queue
->
G‘
());

83 
ASSERT_EQ
("BM_M©ch1/10", 
queue
->
G‘
());

84 
ASSERT_EQ
("BM_M©ch1/64", 
queue
->
G‘
());

85 
ASSERT_EQ
("BM_M©ch1/80", 
queue
->
G‘
());

86 
ASSERT_EQ
("BM_M©ch1/90", 
queue
->
G‘
());

87 
ASSERT_EQ
("BM_M©ch1/100", 
queue
->
G‘
());

88 
ASSERT_EQ
("DONE", 
queue
->
G‘
());

91 
TEST_F
(
B’chm¬kTe¡
, 
M©ch1W™hR•‘™iÚ
) {

92 
	gFLAGS_b’chm¬k_»³t™iÚs
 = 2;

94 
Execu‹
("BM_Match1/(64|80)");

95 
ASSERT_EQ
("BM_M©ch1/64", 
queue
->
G‘
());

96 
ASSERT_EQ
("BM_M©ch1/64", 
queue
->
G‘
());

97 
ASSERT_EQ
("BM_M©ch1/80", 
queue
->
G‘
());

98 
ASSERT_EQ
("BM_M©ch1/80", 
queue
->
G‘
());

99 
ASSERT_EQ
("DONE", 
queue
->
G‘
());

102 
TEST_F
(
B’chm¬kTe¡
, 
M©ch1W™hRªdomIÁ”Ëavšg
) {

103 
	gFLAGS_b’chm¬k_’abË_¿ndom_š‹¾—všg
 = 
Œue
;

104 
	gFLAGS_b’chm¬k_»³t™iÚs
 = 100;

106 
	g¡d
::
m­
<
¡d
::
¡ršg
, > 
	g–em’t_couÁ
;

107 
	g¡d
::
m­
<
¡d
::
¡ršg
, > 
	gš‹¾—všg_couÁ
;

108 
Execu‹
("BM_Match1/(64|80)");

109 
	gi
 = 0; i < 100; ++i) {

110 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> 
š‹¾—všg
;

111 
	gš‹¾—všg
.
push_back
(
queue
->
G‘
());

112 
	gš‹¾—všg
.
push_back
(
queue
->
G‘
());

113 
	g–em’t_couÁ
[
š‹¾—všg
[0]]++;

114 
	g–em’t_couÁ
[
š‹¾—všg
[1]]++;

115 
	gš‹¾—všg_couÁ
[
SŒFÜm©
("%s,%s", 
š‹¾—všg
[0].
c_¡r
(),

116 
š‹¾—všg
[1].
c_¡r
())]++;

118 
EXPECT_EQ
(
–em’t_couÁ
["BM_Match1/64"], 100) << "Unexpected„epetitions.";

119 
EXPECT_EQ
(
–em’t_couÁ
["BM_Match1/80"], 100) << "Unexpected„epetitions.";

120 
EXPECT_GE
(
š‹¾—všg_couÁ
.
size
(), 2) << "Interleaving was‚ot„andomized.";

121 
ASSERT_EQ
("DONE", 
queue
->
G‘
());

	@third_party/benchmark/test/benchmark_setup_teardown_test.cc

1 
	~<©omic
>

2 
	~<ÿs£¹
>

3 
	~<c¡dlib
>

4 
	~<c¡ršg
>

5 
	~<io¡»am
>

6 
	~<lim™s
>

7 
	~<¡ršg
>

9 
	~"b’chm¬k/b’chm¬k.h
"

13 
Çme¥aû
 
	gsšgËth»aded
 {

14 
	g£tup_ÿÎ
 = 0;

15 
	g‹¬down_ÿÎ
 = 0;

17 
	$DoS‘up1
(cÚ¡ 
b’chm¬k
::
S‹
& 
¡©e
) {

18 ++
sšgËth»aded
::
£tup_ÿÎ
;

21 
	`as£¹
(
¡©e
.
	`th»ad_šdex
() == 0);

22 
	}
}

24 
	$DoT—rdown1
(cÚ¡ 
b’chm¬k
::
S‹
& 
¡©e
) {

25 ++
sšgËth»aded
::
‹¬down_ÿÎ
;

26 
	`as£¹
(
¡©e
.
	`th»ad_šdex
() == 0);

27 
	}
}

29 
	$BM_w™h_£tup
(
b’chm¬k
::
S‹
& 
¡©e
) {

30 autØ
s
 : 
¡©e
) {

32 
	}
}

33 
BENCHMARK
(
BM_w™h_£tup
)

34 ->
Arg
(1)

35 ->
Arg
(3)

36 ->
Arg
(5)

37 ->
Arg
(7)

38 ->
I‹¿tiÚs
(100)

39 ->
S‘up
(
DoS‘up1
)

40 ->
T—rdown
(
DoT—rdown1
);

43 
Çme¥aû
 
	gcÚcu¼’t
 {

44 
	g¡d
::
©omic
<> 
£tup_ÿÎ
(0);

45 
	g¡d
::
©omic
<> 
‹¬down_ÿÎ
(0);

46 
	g¡d
::
©omic
<> 
func_ÿÎ
(0);

49 
	$DoS‘up2
(cÚ¡ 
b’chm¬k
::
S‹
& 
¡©e
) {

50 
cÚcu¼’t
::
£tup_ÿÎ
.
	`ãtch_add
(1, 
¡d
::
memÜy_Üd”_acquœe
);

51 
	`as£¹
(
¡©e
.
	`th»ad_šdex
() == 0);

52 
	}
}

54 
	$DoT—rdown2
(cÚ¡ 
b’chm¬k
::
S‹
& 
¡©e
) {

55 
cÚcu¼’t
::
‹¬down_ÿÎ
.
	`ãtch_add
(1, 
¡d
::
memÜy_Üd”_acquœe
);

56 
	`as£¹
(
¡©e
.
	`th»ad_šdex
() == 0);

57 
	}
}

59 
	$BM_cÚcu¼’t
(
b’chm¬k
::
S‹
& 
¡©e
) {

60 autØ
s
 : 
¡©e
) {

62 
cÚcu¼’t
::
func_ÿÎ
.
	`ãtch_add
(1, 
¡d
::
memÜy_Üd”_acquœe
);

63 
	}
}

65 
BENCHMARK
(
BM_cÚcu¼’t
)

66 ->
S‘up
(
DoS‘up2
)

67 ->
T—rdown
(
DoT—rdown2
)

68 ->
I‹¿tiÚs
(100)

69 ->
Th»ads
(5)

70 ->
Th»ads
(10)

71 ->
Th»ads
(15);

74 
Çme¥aû
 
	gfixtu»_š‹¿ùiÚ
 {

75 
	g£tup
 = 0;

76 
	gfixtu»_£tup
 = 0;

79 
	#FIXTURE_BECHMARK_NAME
 
MyFixtu»


	)

81 şas 
	cFIXTURE_BECHMARK_NAME
 : 
public
 ::
b’chm¬k
::
Fixtu»
 {

82 
public
:

83 
	$S‘Up
(cÚ¡ ::
b’chm¬k
::
S‹
&è
ov”ride
 {

84 
fixtu»_š‹¿ùiÚ
::
fixtu»_£tup
++;

87 ~
	$FIXTURE_BECHMARK_NAME
(è
ov”ride
 {
	}
}

90 
	$BENCHMARK_F
(
FIXTURE_BECHMARK_NAME
, 
BM_W™hFixtu»
)(
b’chm¬k
::
S‹
& 
¡
) {

91 autØ
_
 : 
¡
) {

93 
	}
}

95 
	$DoS‘upW™hFixtu»
(cÚ¡ 
b’chm¬k
::
S‹
&) {

96 
fixtu»_š‹¿ùiÚ
::
£tup
++;

97 
	}
}

99 
BENCHMARK_REGISTER_F
(
FIXTURE_BECHMARK_NAME
, 
BM_W™hFixtu»
)

100 ->
Arg
(1)

101 ->
Arg
(3)

102 ->
Arg
(5)

103 ->
Arg
(7)

104 ->
S‘up
(
DoS‘upW™hFixtu»
)

105 ->
R•‘™iÚs
(1)

106 ->
I‹¿tiÚs
(100);

109 
Çme¥aû
 
	g»³t™iÚs
 {

110 
	g£tup
 = 0;

113 
	$DoS‘upW™hR•‘™iÚs
(cÚ¡ 
b’chm¬k
::
S‹
&) {

114 
»³t™iÚs
::
£tup
++;

115 
	}
}

116 
	$BM_W™hR•
(
b’chm¬k
::
S‹
& 
¡©e
) {

117 autØ
_
 : 
¡©e
) {

119 
	}
}

121 
BENCHMARK
(
BM_W™hR•
)

122 ->
Arg
(1)

123 ->
Arg
(3)

124 ->
Arg
(5)

125 ->
Arg
(7)

126 ->
S‘up
(
DoS‘upW™hR•‘™iÚs
)

127 ->
I‹¿tiÚs
(100)

128 ->
R•‘™iÚs
(4);

130 
	$maš
(
¬gc
, ** 
¬gv
) {

131 
b’chm¬k
::
	`In™Ÿlize
(&
¬gc
, 
¬gv
);

133 
size_t
 
»t
 = 
b’chm¬k
::
	`RunS³cif›dB’chm¬ks
(".");

134 
	`as£¹
(
»t
 > 0);

137 
	`as£¹
(
sšgËth»aded
::
£tup_ÿÎ
 == 4);

138 
	`as£¹
(
sšgËth»aded
::
‹¬down_ÿÎ
 == 4);

141 
	`as£¹
(
cÚcu¼’t
::
£tup_ÿÎ
.
	`lßd
(
¡d
::
memÜy_Üd”_»Ïxed
) == 3);

142 
	`as£¹
(
cÚcu¼’t
::
‹¬down_ÿÎ
.
	`lßd
(
¡d
::
memÜy_Üd”_»Ïxed
) == 3);

143 
	`as£¹
((5 + 10 + 15) ==

144 
cÚcu¼’t
::
func_ÿÎ
.
	`lßd
(
¡d
::
memÜy_Üd”_»Ïxed
));

147 
	`as£¹
(
fixtu»_š‹¿ùiÚ
::
£tup
 == 4);

151 
	`as£¹
(
fixtu»_š‹¿ùiÚ
::
fixtu»_£tup
 > fixtu»_š‹¿ùiÚ::
£tup
);

154 
	`as£¹
(
»³t™iÚs
::
£tup
 == 16);

157 
	}
}

	@third_party/benchmark/test/benchmark_test.cc

1 
	~"b’chm¬k/b’chm¬k.h
"

3 
	~<as£¹.h
>

4 
	~<m©h.h
>

5 
	~<¡dšt.h
>

7 
	~<chrÚo
>

8 
	~<com¶ex
>

9 
	~<c¡dlib
>

10 
	~<io¡»am
>

11 
	~<lim™s
>

12 
	~<li¡
>

13 
	~<m­
>

14 
	~<mu‹x
>

15 
	~<£t
>

16 
	~<s¡»am
>

17 
	~<¡ršg
>

18 
	~<th»ad
>

19 
	~<ut™y
>

20 
	~<veùÜ
>

22 #ià
defšed
(
__GNUC__
)

23 
	#BENCHMARK_NOINLINE
 
	`__©Œibu‹__
((
nošlše
))

	)

25 
	#BENCHMARK_NOINLINE


	)

28 
	gÇme¥aû
 {

30 
BENCHMARK_NOINLINE
 
FaùÜŸl
(
n
) {

31  (
	gn
 =ğ1è? 1 : 
n
 * 
FaùÜŸl
(n - 1);

34 
C®cuÏ‹Pi
(
d•th
) {

35 
	gpi
 = 0.0;

36 
	gi
 = 0; i < 
	gd•th
; ++i) {

37 
	gnum”©Ü
 = 
¡©ic_ÿ¡
<>(((
i
 % 2) * 2) - 1);

38 
	gd’omš©Ü
 = 
¡©ic_ÿ¡
<>((2 * 
i
) - 1);

39 
	gpi
 +ğ
num”©Ü
 / 
d’omš©Ü
;

41  (
	gpi
 - 1.0) * 4;

44 
	g¡d
::
£t
<
št64_t
> 
CÚ¡ruùRªdomS‘
(št64_ˆ
size
) {

45 
¡d
::
£t
<
št64_t
> 
s
;

46 
	gi
 = 0; i < 
	gsize
; ++iè
	gs
.
š£¹
(
s
.
’d
(), 
i
);

47  
	gs
;

50 
	g¡d
::
mu‹x
 
‹¡_veùÜ_mu
;

51 
	g¡d
::
veùÜ
<>* 
‹¡_veùÜ
 = 
nuÎ±r
;

55 
	$BM_FaùÜŸl
(
b’chm¬k
::
S‹
& 
¡©e
) {

56 
çc_42
 = 0;

57 autØ
_
 : 
¡©e
è
çc_42
 = 
	`FaùÜŸl
(8);

59 
¡d
::
¡ršg¡»am
 
ss
;

60 
ss
 << 
çc_42
;

61 
¡©e
.
	`S‘Lab–
(
ss
.
	`¡r
());

62 
	}
}

63 
BENCHMARK
(
BM_FaùÜŸl
);

64 
BENCHMARK
(
BM_FaùÜŸl
)->
U£R—lTime
();

66 
	$BM_C®cuÏ‹PiRªge
(
b’chm¬k
::
S‹
& 
¡©e
) {

67 
pi
 = 0.0;

68 autØ
_
 : 
¡©e
è
pi
 = 
	`C®cuÏ‹Pi
(
¡©ic_ÿ¡
<>(¡©e.
	`¿nge
(0)));

69 
¡d
::
¡ršg¡»am
 
ss
;

70 
ss
 << 
pi
;

71 
¡©e
.
	`S‘Lab–
(
ss
.
	`¡r
());

72 
	}
}

73 
BENCHMARK_RANGE
(
BM_C®cuÏ‹PiRªge
, 1, 1024 * 1024);

75 
	$BM_C®cuÏ‹Pi
(
b’chm¬k
::
S‹
& 
¡©e
) {

76 cÚ¡ 
d•th
 = 1024;

77 autØ
_
 : 
¡©e
) {

78 
pi
 = 
	`C®cuÏ‹Pi
(
¡©ic_ÿ¡
<>(
d•th
));

79 
b’chm¬k
::
	`DoNÙO±imize
(
pi
);

81 
	}
}

82 
BENCHMARK
(
BM_C®cuÏ‹Pi
)->
Th»ads
(8);

83 
BENCHMARK
(
BM_C®cuÏ‹Pi
)->
Th»adRªge
(1, 32);

84 
BENCHMARK
(
BM_C®cuÏ‹Pi
)->
Th»adP”Cpu
();

86 
	$BM_S‘In£¹
(
b’chm¬k
::
S‹
& 
¡©e
) {

87 
¡d
::
£t
<
št64_t
> 
d©a
;

88 autØ
_
 : 
¡©e
) {

89 
¡©e
.
	`Pau£Timšg
();

90 
d©a
 = 
	`CÚ¡ruùRªdomS‘
(
¡©e
.
	`¿nge
(0));

91 
¡©e
.
	`ResumeTimšg
();

92 
j
 = 0; j < 
¡©e
.
	`¿nge
(1); ++jè
d©a
.
	`š£¹
(
	`¿nd
());

94 
¡©e
.
	`S‘I‹msProûs£d
(¡©e.
	`™”©iÚs
(è* s‹.
	`¿nge
(1));

95 
¡©e
.
	`S‘By‹sProûs£d
(¡©e.
	`™”©iÚs
(è* s‹.
	`¿nge
(1) *

96 
¡©ic_ÿ¡
<
št64_t
>(()));

97 
	}
}

102 
BENCHMARK
(
BM_S‘In£¹
)->
Rªges
({{1 << 10, 8 << 10}, {128, 512}});

104 
	g‹m¶©e
 <
ty³Çme
 
	gCÚš”
,

105 
ty³Çme
 
	gV®ueTy³
 =y³Çm
CÚš”
::
v®ue_ty³
>

106 
	$BM_Sequ’tŸl
(
b’chm¬k
::
S‹
& 
¡©e
) {

107 
V®ueTy³
 
v
 = 42;

108 autØ
_
 : 
¡©e
) {

109 
CÚš”
 
c
;

110 
št64_t
 
i
 = 
¡©e
.
	`¿nge
(0); --i;è
c
.
	`push_back
(
v
);

112 cÚ¡ 
št64_t
 
™ems_´oûs£d
 = 
¡©e
.
	`™”©iÚs
(è* s‹.
	`¿nge
(0);

113 
¡©e
.
	`S‘I‹msProûs£d
(
™ems_´oûs£d
);

114 
¡©e
.
	`S‘By‹sProûs£d
(
™ems_´oûs£d
 * 
¡©ic_ÿ¡
<
št64_t
>((
v
)));

115 
	}
}

116 
BENCHMARK_TEMPLATE2
(
BM_Sequ’tŸl
, 
¡d
::
veùÜ
<>, )

117 ->
Rªge
(1 << 0, 1 << 10);

118 
BENCHMARK_TEMPLATE
(
BM_Sequ’tŸl
, 
¡d
::
li¡
<>)->
Rªge
(1 << 0, 1 << 10);

120 #ifdeà
BENCHMARK_HAS_CXX11


121 
BENCHMARK_TEMPLATE
(
BM_Sequ’tŸl
, 
¡d
::
veùÜ
<>, )->
Arg
(512);

124 
	$BM_SŒšgCom·»
(
b’chm¬k
::
S‹
& 
¡©e
) {

125 
size_t
 
Ën
 = 
¡©ic_ÿ¡
<size_t>(
¡©e
.
	`¿nge
(0));

126 
¡d
::
¡ršg
 
	`s1
(
Ën
, '-');

127 
¡d
::
¡ršg
 
	`s2
(
Ën
, '-');

128 autØ
_
 : 
¡©e
) {

129 autØ
comp
 = 
s1
.
	`com·»
(
s2
);

130 
b’chm¬k
::
	`DoNÙO±imize
(
comp
);

132 
	}
}

133 
BENCHMARK
(
BM_SŒšgCom·»
)->
Rªge
(1, 1 << 20);

135 
	$BM_S‘upT—rdown
(
b’chm¬k
::
S‹
& 
¡©e
) {

136 ià(
¡©e
.
	`th»ad_šdex
() == 0) {

138 
‹¡_veùÜ
 = 
Ãw
 
¡d
::
veùÜ
<>();

140 
i
 = 0;

141 autØ
_
 : 
¡©e
) {

142 
¡d
::
lock_gu¬d
<¡d::
mu‹x
> 
	`l
(
‹¡_veùÜ_mu
);

143 ià(
i
 % 2 == 0)

144 
‹¡_veùÜ
->
	`push_back
(
i
);

146 
‹¡_veùÜ
->
	`pİ_back
();

147 ++
i
;

149 ià(
¡©e
.
	`th»ad_šdex
() == 0) {

150 
d–‘e
 
‹¡_veùÜ
;

152 
	}
}

153 
BENCHMARK
(
BM_S‘upT—rdown
)->
Th»adP”Cpu
();

155 
	$BM_LÚgTe¡
(
b’chm¬k
::
S‹
& 
¡©e
) {

156 
Œack”
 = 0.0;

157 autØ
_
 : 
¡©e
) {

158 
i
 = 0; i < 
¡©e
.
	`¿nge
(0); ++i)

159 
b’chm¬k
::
	`DoNÙO±imize
(
Œack”
 +ğ
i
);

161 
	}
}

162 
BENCHMARK
(
BM_LÚgTe¡
)->
Rªge
(1 << 16, 1 << 28);

164 
	$BM_P¬®ËlMem£t
(
b’chm¬k
::
S‹
& 
¡©e
) {

165 
št64_t
 
size
 = 
¡©e
.
	`¿nge
(0è/ 
¡©ic_ÿ¡
<int64_t>(());

166 
th»ad_size
 = 
¡©ic_ÿ¡
<>(
size
è/ 
¡©e
.
	`th»ads
();

167 
äom
 = 
th»ad_size
 * 
¡©e
.
	`th»ad_šdex
();

168 
to
 = 
äom
 + 
th»ad_size
;

170 ià(
¡©e
.
	`th»ad_šdex
() == 0) {

171 
‹¡_veùÜ
 = 
Ãw
 
¡d
::
veùÜ
<>(
¡©ic_ÿ¡
<
size_t
>(
size
));

174 autØ
_
 : 
¡©e
) {

175 
i
 = 
äom
; i < 
to
; i++) {

178 
b’chm¬k
::
	`DoNÙO±imize
(
‹¡_veùÜ
->
	`©
(
¡©ic_ÿ¡
<
size_t
>(
i
)) = 1);

182 ià(
¡©e
.
	`th»ad_šdex
() == 0) {

183 
d–‘e
 
‹¡_veùÜ
;

185 
	}
}

186 
BENCHMARK
(
BM_P¬®ËlMem£t
)->
Arg
(10 << 20)->
Th»adRªge
(1, 4);

188 
	$BM_Mªu®Timšg
(
b’chm¬k
::
S‹
& 
¡©e
) {

189 
št64_t
 
¦•t_fÜ
 = 0;

190 
št64_t
 
miüo£cÚds
 = 
¡©e
.
	`¿nge
(0);

191 
¡d
::
chrÚo
::
du¿tiÚ
<, std::
miüo
> 
¦“p_du¿tiÚ
{

192 
¡©ic_ÿ¡
<>(
miüo£cÚds
)};

194 autØ
_
 : 
¡©e
) {

195 autØ
¡¬t
 = 
¡d
::
chrÚo
::
high_»sŞutiÚ_şock
::
	`now
();

197 
¡d
::
this_th»ad
::
	`¦“p_fÜ
(

198 
¡d
::
chrÚo
::
du¿tiÚ_ÿ¡
<¡d::chrÚo::
Çno£cÚds
>(
¦“p_du¿tiÚ
));

199 autØ
’d
 = 
¡d
::
chrÚo
::
high_»sŞutiÚ_şock
::
	`now
();

201 autØ
–­£d
 =

202 
¡d
::
chrÚo
::
du¿tiÚ_ÿ¡
<¡d::chrÚo::
du¿tiÚ
<>>(
’d
 - 
¡¬t
);

204 
¡©e
.
	`S‘I‹¿tiÚTime
(
–­£d
.
	`couÁ
());

205 
¦•t_fÜ
 +ğ
miüo£cÚds
;

207 
¡©e
.
	`S‘I‹msProûs£d
(
¦•t_fÜ
);

208 
	}
}

209 
BENCHMARK
(
BM_Mªu®Timšg
)->
Rªge
(1, 1 << 14)->
U£R—lTime
();

210 
BENCHMARK
(
BM_Mªu®Timšg
)->
Rªge
(1, 1 << 14)->
U£Mªu®Time
();

212 #ifdeà
BENCHMARK_HAS_CXX11


214 
	g‹m¶©e
 <
	gşass
... 
	gArgs
>

215 
	$BM_w™h_¬gs
(
b’chm¬k
::
S‹
& 
¡©e
, 
Args
&&...) {

216 autØ
_
 : 
¡©e
) {

218 
	}
}

219 
BENCHMARK_CAPTURE
(
BM_w™h_¬gs
, 
št_‹¡
, 42, 43, 44);

220 
BENCHMARK_CAPTURE
(
BM_w™h_¬gs
, 
¡ršg_ªd_·œ_‹¡
, 
¡d
::
¡ršg
("abc"),

221 
¡d
::
·œ
<, >(42, 3.8));

223 
	$BM_nÚ_‹m¶©e_¬gs
(
b’chm¬k
::
S‹
& 
¡©e
, , ) {

224 
¡©e
.
	`K“pRuÂšg
()) {

226 
	}
}

227 
BENCHMARK_CAPTURE
(
BM_nÚ_‹m¶©e_¬gs
, 
basic_‹¡
, 0, 0);

231 
	$BM_D’£Th»adRªges
(
b’chm¬k
::
S‹
& 
¡
) {

232 
¡
.
	`¿nge
(0)) {

234 
	`as£¹
(
¡
.
	`th»ads
() == 1 || st.threads() == 2 || st.threads() == 3);

237 
	`as£¹
(
¡
.
	`th»ads
() == 1 || st.threads() == 3 || st.threads() == 4);

240 
	`as£¹
(
¡
.
	`th»ads
() == 5 || st.threads() == 8 || st.threads() == 11 ||

241 
¡
.
	`th»ads
() == 14);

244 
	`as£¹
(
çl£
 && "Invalidest case‚umber");

246 
¡
.
	`K“pRuÂšg
()) {

248 
	}
}

249 
BENCHMARK
(
BM_D’£Th»adRªges
)->
Arg
(1)->
D’£Th»adRªge
(1, 3);

250 
BENCHMARK
(
BM_D’£Th»adRªges
)->
Arg
(2)->
D’£Th»adRªge
(1, 4, 2);

251 
BENCHMARK
(
BM_D’£Th»adRªges
)->
Arg
(3)->
D’£Th»adRªge
(5, 14, 3);

253 
	$BM_B’chm¬kName
(
b’chm¬k
::
S‹
& 
¡©e
) {

254 autØ
_
 : 
¡©e
) {

258 
	`as£¹
("BM_B’chm¬kName" =ğ
¡©e
.
	`Çme
());

259 
	}
}

260 
BENCHMARK
(
BM_B’chm¬kName
);

263 
	g‹m¶©e
 <
ty³Çme
 
	gty³
>

264 
	$BM_‹m¶©ed_‹¡
(
b’chm¬k
::
S‹
& 
¡©e
) {

265 autØ
_
 : 
¡©e
) {

266 
ty³
 
ü—‹d_¡ršg
;

267 
b’chm¬k
::
	`DoNÙO±imize
(
ü—‹d_¡ršg
);

269 
	}
}

271 autØ
	gBM_‹m¶©ed_‹¡_doubË
 = 
BM_‹m¶©ed_‹¡
<
¡d
::
com¶ex
<>>;

272 
BENCHMARK
(
BM_‹m¶©ed_‹¡_doubË
);

274 
BENCHMARK_MAIN
();

	@third_party/benchmark/test/clobber_memory_assembly_test.cc

1 
	~<b’chm¬k/b’chm¬k.h
>

3 #ifdeà
__şªg__


4 #´agm¨
şªg
 
dŸgno¡ic
 
ignÜed
 "-Wreturn-type"

6 
BENCHMARK_DISABLE_DEPRECATED_WARNING


10 
Ex‹ºIÁ
;

11 
Ex‹ºIÁ2
;

12 
Ex‹ºIÁ3
;

16 "C" 
	$‹¡_basic
() {

17 
x
;

18 
b’chm¬k
::
	`DoNÙO±imize
(&
x
);

19 
x
 = 101;

20 
b’chm¬k
::
	`Clobb”MemÜy
();

24 
	}
}

27 "C" 
	$‹¡_»dundªt_¡Üe
() {

28 
Ex‹ºIÁ
 = 3;

29 
b’chm¬k
::
	`Clobb”MemÜy
();

30 
Ex‹ºIÁ
 = 51;

34 
	}
}

37 "C" 
	$‹¡_»dundªt_»ad
() {

38 
x
;

39 
b’chm¬k
::
	`DoNÙO±imize
(&
x
);

40 
x
 = 
Ex‹ºIÁ
;

41 
b’chm¬k
::
	`Clobb”MemÜy
();

42 
x
 = 
Ex‹ºIÁ2
;

48 
	}
}

51 "C" 
	$‹¡_»dundªt_»ad2
() {

52 
x
;

53 
b’chm¬k
::
	`DoNÙO±imize
(&
x
);

54 
x
 = 
Ex‹ºIÁ
;

55 
b’chm¬k
::
	`Clobb”MemÜy
();

56 
x
 = 
Ex‹ºIÁ2
;

57 
b’chm¬k
::
	`Clobb”MemÜy
();

64 
	}
}

	@third_party/benchmark/test/commandlineflags_gtest.cc

1 
	~<c¡dlib
>

3 
	~"../¤c/commªdlšeæags.h
"

4 
	~"../¤c/š‹º®_maüos.h
"

5 
	~"gmock/gmock.h
"

6 
	~"g‹¡/g‹¡.h
"

8 
Çme¥aû
 
	gb’chm¬k
 {

9 
	gÇme¥aû
 {

11 #ià
defšed
(
BENCHMARK_OS_WINDOWS
)

12 
£‹nv
(cÚ¡ * 
Çme
, cÚ¡ * 
v®ue
, 
ov”wr™e
) {

13 ià(!
	gov”wr™e
) {

15 * 
	g’v_v®ue
 = 
g‘’v
(
Çme
);

16 ià(
	g’v_v®ue
 =ğ
nuÎ±r
) {

20  
_pu‹nv_s
(
Çme
, 
v®ue
);

23 
un£‹nv
(cÚ¡ * 
Çme
è{  
_pu‹nv_s
(name, ""); }

27 
TEST
(
BoŞFromEnv
, 
DeçuÉ
) {

28 
ASSERT_EQ
(
un£‹nv
("NOT_IN_ENV"), 0);

29 
EXPECT_EQ
(
BoŞFromEnv
("nÙ_š_’v", 
Œue
),rue);

32 
TEST
(
BoŞFromEnv
, 
F®£
) {

33 
ASSERT_EQ
(
£‹nv
("IN_ENV", "0", 1), 0);

34 
EXPECT_EQ
(
BoŞFromEnv
("š_’v", 
Œue
), 
çl£
);

35 
un£‹nv
("IN_ENV");

37 
ASSERT_EQ
(
£‹nv
("IN_ENV", "N", 1), 0);

38 
EXPECT_EQ
(
BoŞFromEnv
("š_’v", 
Œue
), 
çl£
);

39 
un£‹nv
("IN_ENV");

41 
ASSERT_EQ
(
£‹nv
("IN_ENV", "n", 1), 0);

42 
EXPECT_EQ
(
BoŞFromEnv
("š_’v", 
Œue
), 
çl£
);

43 
un£‹nv
("IN_ENV");

45 
ASSERT_EQ
(
£‹nv
("IN_ENV", "NO", 1), 0);

46 
EXPECT_EQ
(
BoŞFromEnv
("š_’v", 
Œue
), 
çl£
);

47 
un£‹nv
("IN_ENV");

49 
ASSERT_EQ
(
£‹nv
("IN_ENV", "No", 1), 0);

50 
EXPECT_EQ
(
BoŞFromEnv
("š_’v", 
Œue
), 
çl£
);

51 
un£‹nv
("IN_ENV");

53 
ASSERT_EQ
(
£‹nv
("IN_ENV", "no", 1), 0);

54 
EXPECT_EQ
(
BoŞFromEnv
("š_’v", 
Œue
), 
çl£
);

55 
un£‹nv
("IN_ENV");

57 
ASSERT_EQ
(
£‹nv
("IN_ENV", "F", 1), 0);

58 
EXPECT_EQ
(
BoŞFromEnv
("š_’v", 
Œue
), 
çl£
);

59 
un£‹nv
("IN_ENV");

61 
ASSERT_EQ
(
£‹nv
("IN_ENV", "f", 1), 0);

62 
EXPECT_EQ
(
BoŞFromEnv
("š_’v", 
Œue
), 
çl£
);

63 
un£‹nv
("IN_ENV");

65 
ASSERT_EQ
(
£‹nv
("IN_ENV", "FALSE", 1), 0);

66 
EXPECT_EQ
(
BoŞFromEnv
("š_’v", 
Œue
), 
çl£
);

67 
un£‹nv
("IN_ENV");

69 
ASSERT_EQ
(
£‹nv
("IN_ENV", "False", 1), 0);

70 
EXPECT_EQ
(
BoŞFromEnv
("š_’v", 
Œue
), 
çl£
);

71 
un£‹nv
("IN_ENV");

73 
ASSERT_EQ
(
£‹nv
("IN_ENV", "false", 1), 0);

74 
EXPECT_EQ
(
BoŞFromEnv
("š_’v", 
Œue
), 
çl£
);

75 
un£‹nv
("IN_ENV");

77 
ASSERT_EQ
(
£‹nv
("IN_ENV", "OFF", 1), 0);

78 
EXPECT_EQ
(
BoŞFromEnv
("š_’v", 
Œue
), 
çl£
);

79 
un£‹nv
("IN_ENV");

81 
ASSERT_EQ
(
£‹nv
("IN_ENV", "Off", 1), 0);

82 
EXPECT_EQ
(
BoŞFromEnv
("š_’v", 
Œue
), 
çl£
);

83 
un£‹nv
("IN_ENV");

85 
ASSERT_EQ
(
£‹nv
("IN_ENV", "off", 1), 0);

86 
EXPECT_EQ
(
BoŞFromEnv
("š_’v", 
Œue
), 
çl£
);

87 
un£‹nv
("IN_ENV");

90 
TEST
(
BoŞFromEnv
, 
True
) {

91 
ASSERT_EQ
(
£‹nv
("IN_ENV", "1", 1), 0);

92 
EXPECT_EQ
(
BoŞFromEnv
("š_’v", 
çl£
), 
Œue
);

93 
un£‹nv
("IN_ENV");

95 
ASSERT_EQ
(
£‹nv
("IN_ENV", "Y", 1), 0);

96 
EXPECT_EQ
(
BoŞFromEnv
("š_’v", 
çl£
), 
Œue
);

97 
un£‹nv
("IN_ENV");

99 
ASSERT_EQ
(
£‹nv
("IN_ENV", "y", 1), 0);

100 
EXPECT_EQ
(
BoŞFromEnv
("š_’v", 
çl£
), 
Œue
);

101 
un£‹nv
("IN_ENV");

103 
ASSERT_EQ
(
£‹nv
("IN_ENV", "YES", 1), 0);

104 
EXPECT_EQ
(
BoŞFromEnv
("š_’v", 
çl£
), 
Œue
);

105 
un£‹nv
("IN_ENV");

107 
ASSERT_EQ
(
£‹nv
("IN_ENV", "Yes", 1), 0);

108 
EXPECT_EQ
(
BoŞFromEnv
("š_’v", 
çl£
), 
Œue
);

109 
un£‹nv
("IN_ENV");

111 
ASSERT_EQ
(
£‹nv
("IN_ENV", "yes", 1), 0);

112 
EXPECT_EQ
(
BoŞFromEnv
("š_’v", 
çl£
), 
Œue
);

113 
un£‹nv
("IN_ENV");

115 
ASSERT_EQ
(
£‹nv
("IN_ENV", "T", 1), 0);

116 
EXPECT_EQ
(
BoŞFromEnv
("š_’v", 
çl£
), 
Œue
);

117 
un£‹nv
("IN_ENV");

119 
ASSERT_EQ
(
£‹nv
("IN_ENV", "t", 1), 0);

120 
EXPECT_EQ
(
BoŞFromEnv
("š_’v", 
çl£
), 
Œue
);

121 
un£‹nv
("IN_ENV");

123 
ASSERT_EQ
(
£‹nv
("IN_ENV", "TRUE", 1), 0);

124 
EXPECT_EQ
(
BoŞFromEnv
("š_’v", 
çl£
), 
Œue
);

125 
un£‹nv
("IN_ENV");

127 
ASSERT_EQ
(
£‹nv
("IN_ENV", "True", 1), 0);

128 
EXPECT_EQ
(
BoŞFromEnv
("š_’v", 
çl£
), 
Œue
);

129 
un£‹nv
("IN_ENV");

131 
ASSERT_EQ
(
£‹nv
("IN_ENV", "true", 1), 0);

132 
EXPECT_EQ
(
BoŞFromEnv
("š_’v", 
çl£
), 
Œue
);

133 
un£‹nv
("IN_ENV");

135 
ASSERT_EQ
(
£‹nv
("IN_ENV", "ON", 1), 0);

136 
EXPECT_EQ
(
BoŞFromEnv
("š_’v", 
çl£
), 
Œue
);

137 
un£‹nv
("IN_ENV");

139 
ASSERT_EQ
(
£‹nv
("IN_ENV", "On", 1), 0);

140 
EXPECT_EQ
(
BoŞFromEnv
("š_’v", 
çl£
), 
Œue
);

141 
un£‹nv
("IN_ENV");

143 
ASSERT_EQ
(
£‹nv
("IN_ENV", "on", 1), 0);

144 
EXPECT_EQ
(
BoŞFromEnv
("š_’v", 
çl£
), 
Œue
);

145 
un£‹nv
("IN_ENV");

147 #iâdeà
BENCHMARK_OS_WINDOWS


148 
ASSERT_EQ
(
£‹nv
("IN_ENV", "", 1), 0);

149 
EXPECT_EQ
(
BoŞFromEnv
("š_’v", 
çl£
), 
Œue
);

150 
un£‹nv
("IN_ENV");

154 
TEST
(
IÁ32FromEnv
, 
NÙInEnv
) {

155 
ASSERT_EQ
(
un£‹nv
("NOT_IN_ENV"), 0);

156 
EXPECT_EQ
(
IÁ32FromEnv
("not_in_env", 42), 42);

159 
TEST
(
IÁ32FromEnv
, 
Inv®idIÁeg”
) {

160 
ASSERT_EQ
(
£‹nv
("IN_ENV", "foo", 1), 0);

161 
EXPECT_EQ
(
IÁ32FromEnv
("in_env", 42), 42);

162 
un£‹nv
("IN_ENV");

165 
TEST
(
IÁ32FromEnv
, 
V®idIÁeg”
) {

166 
ASSERT_EQ
(
£‹nv
("IN_ENV", "42", 1), 0);

167 
EXPECT_EQ
(
IÁ32FromEnv
("in_env", 64), 42);

168 
un£‹nv
("IN_ENV");

171 
TEST
(
DoubËFromEnv
, 
NÙInEnv
) {

172 
ASSERT_EQ
(
un£‹nv
("NOT_IN_ENV"), 0);

173 
EXPECT_EQ
(
DoubËFromEnv
("not_in_env", 0.51), 0.51);

176 
TEST
(
DoubËFromEnv
, 
Inv®idR—l
) {

177 
ASSERT_EQ
(
£‹nv
("IN_ENV", "foo", 1), 0);

178 
EXPECT_EQ
(
DoubËFromEnv
("in_env", 0.51), 0.51);

179 
un£‹nv
("IN_ENV");

182 
TEST
(
DoubËFromEnv
, 
V®idR—l
) {

183 
ASSERT_EQ
(
£‹nv
("IN_ENV", "0.51", 1), 0);

184 
EXPECT_EQ
(
DoubËFromEnv
("in_env", 0.71), 0.51);

185 
un£‹nv
("IN_ENV");

188 
TEST
(
SŒšgFromEnv
, 
DeçuÉ
) {

189 
ASSERT_EQ
(
un£‹nv
("NOT_IN_ENV"), 0);

190 
EXPECT_STREQ
(
SŒšgFromEnv
("not_in_env", "foo"), "foo");

193 
TEST
(
SŒšgFromEnv
, 
V®id
) {

194 
ASSERT_EQ
(
£‹nv
("IN_ENV", "foo", 1), 0);

195 
EXPECT_STREQ
(
SŒšgFromEnv
("in_env", "bar"), "foo");

196 
un£‹nv
("IN_ENV");

199 
TEST
(
KvPaœsFromEnv
, 
DeçuÉ
) {

200 
ASSERT_EQ
(
un£‹nv
("NOT_IN_ENV"), 0);

201 
EXPECT_THAT
(
KvPaœsFromEnv
("not_in_env", {{"foo", "bar"}}),

202 
‹¡šg
::
EËm’tsA»
Ñe¡šg::
Paœ
("foo", "bar")));

205 
TEST
(
KvPaœsFromEnv
, 
M®fÜmedR‘uºsDeçuÉ
) {

206 
ASSERT_EQ
(
£‹nv
("IN_ENV", "foo", 1), 0);

207 
EXPECT_THAT
(
KvPaœsFromEnv
("in_env", {{"foo", "bar"}}),

208 
‹¡šg
::
EËm’tsA»
Ñe¡šg::
Paœ
("foo", "bar")));

209 
un£‹nv
("IN_ENV");

212 
TEST
(
KvPaœsFromEnv
, 
SšgË
) {

213 
ASSERT_EQ
(
£‹nv
("IN_ENV", "foo=bar", 1), 0);

214 
EXPECT_THAT
(
KvPaœsFromEnv
("in_env", {}),

215 
‹¡šg
::
EËm’tsA»
Ñe¡šg::
Paœ
("foo", "bar")));

216 
un£‹nv
("IN_ENV");

219 
TEST
(
KvPaœsFromEnv
, 
MuÉË
) {

220 
ASSERT_EQ
(
£‹nv
("IN_ENV", "foo=bar,baz=qux", 1), 0);

221 
EXPECT_THAT
(
KvPaœsFromEnv
("in_env", {}),

222 
‹¡šg
::
UnÜd”edEËm’tsA»
Ñe¡šg::
Paœ
("foo", "bar"),

223 
‹¡šg
::
Paœ
("baz", "qux")));

224 
un£‹nv
("IN_ENV");

	@third_party/benchmark/test/complexity_test.cc

1 #undeà
NDEBUG


2 
	~<®gÜ™hm
>

3 
	~<ÿs£¹
>

4 
	~<cm©h
>

5 
	~<c¡dlib
>

6 
	~<veùÜ
>

8 
	~"b’chm¬k/b’chm¬k.h
"

9 
	~"ouut_‹¡.h
"

11 
	gÇme¥aû
 {

13 
	#ADD_COMPLEXITY_CASES
(...) \

14 
	`CONCAT
(
dummy
, 
__LINE__
èğ
	`AddCom¶ex™yTe¡
(
__VA_ARGS__
)

	)

16 
AddCom¶ex™yTe¡
(cÚ¡ 
¡d
::
¡ršg
 &
‹¡_Çme
,

17 cÚ¡ 
¡d
::
¡ršg
 &
big_o_‹¡_Çme
,

18 cÚ¡ 
¡d
::
¡ršg
 &
rms_‹¡_Çme
,

19 cÚ¡ 
¡d
::
¡ršg
 &
big_o
, 
çmy_šdex
) {

20 
S‘Sub¡™utiÚs
({{"%Çme", 
‹¡_Çme
},

21 {"%bigo_Çme", 
big_o_‹¡_Çme
},

22 {"%rms_Çme", 
rms_‹¡_Çme
},

23 {"%bigo_¡r", "[ ]* %æßˆ" + 
big_o
},

24 {"%bigo", 
big_o
},

26 
AddCa£s
(

27 
TC_CÚsŞeOut
,

29 {"^%bigo_Çme", 
MR_NÙ
},

30 {"^%rms_Çm%rm %rms[ ]*$", 
MR_Next
}});

31 
AddCa£s
(

32 
TC_JSONOut
,

34 {"\"çmy_šdex\": " + 
¡d
::
to_¡ršg
(
çmy_šdex
è+ ",$", 
MR_Next
},

35 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

36 {"\"run_Çme\": \"%Çme\",$", 
MR_Next
},

37 {"\"run_ty³\": \"agg»g©e\",$", 
MR_Next
},

38 {"\"»³t™iÚs\": %št,$", 
MR_Next
},

39 {"\"th»ads\": 1,$", 
MR_Next
},

40 {"\"agg»g©e_Çme\": \"BigO\",$", 
MR_Next
},

41 {"\"agg»g©e_un™\": \"time\",$", 
MR_Next
},

42 {"\"ıu_cÛffic›Á\": %æßt,$", 
MR_Next
},

43 {"\"»®_cÛffic›Á\": %æßt,$", 
MR_Next
},

44 {"\"big_o\": \"%bigo\",$", 
MR_Next
},

45 {"\"time_un™\": \"ns\"$", 
MR_Next
},

46 {"}", 
MR_Next
},

48 {"\"çmy_šdex\": " + 
¡d
::
to_¡ršg
(
çmy_šdex
è+ ",$", 
MR_Next
},

49 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

50 {"\"run_Çme\": \"%Çme\",$", 
MR_Next
},

51 {"\"run_ty³\": \"agg»g©e\",$", 
MR_Next
},

52 {"\"»³t™iÚs\": %št,$", 
MR_Next
},

53 {"\"th»ads\": 1,$", 
MR_Next
},

54 {"\"agg»g©e_Çme\": \"RMS\",$", 
MR_Next
},

55 {"\"agg»g©e_un™\": \"³rûÁage\",$", 
MR_Next
},

56 {"\"rms\": %æßt$", 
MR_Next
},

57 {"}", 
MR_Next
}});

58 
AddCa£s
(
TC_CSVOut
, {{"^\"%bigo_name\",,%float,%float,%bigo,,,,,$"},

59 {"^\"%bigo_Çme\"", 
MR_NÙ
},

60 {"^\"%rms_Çme\",,%æßt,%æßt,,,,,,$", 
MR_Next
}});

70 
	$BM_Com¶ex™y_O1
(
b’chm¬k
::
S‹
 &
¡©e
) {

71 autØ
_
 : 
¡©e
) {

72 
i
 = 0; i < 1024; ++i) {

73 
b’chm¬k
::
	`DoNÙO±imize
(
i
);

76 
¡©e
.
	`S‘Com¶ex™yN
(¡©e.
	`¿nge
(0));

77 
	}
}

78 
BENCHMARK
(
BM_Com¶ex™y_O1
)->
Rªge
(1, 1 << 18)->
Com¶ex™y
(
b’chm¬k
::
o1
);

79 
BENCHMARK
(
BM_Com¶ex™y_O1
)->
Rªge
(1, 1 << 18)->
Com¶ex™y
();

80 
BENCHMARK
(
BM_Com¶ex™y_O1
)

81 ->
Rªge
(1, 1 << 18)

82 ->
Com¶ex™y
([](
b’chm¬k
::
I‹¿tiÚCouÁ
) {  1.0; });

84 cÚ¡ *
	gÚe_‹¡_Çme
 = "BM_Complexity_O1";

85 cÚ¡ *
	gbig_o_1_‹¡_Çme
 = "BM_Complexity_O1_BigO";

86 cÚ¡ *
	grms_o_1_‹¡_Çme
 = "BM_Complexity_O1_RMS";

87 cÚ¡ *
	g’um_big_o_1
 = "\\([0-9]+\\)";

91 cÚ¡ *
	gauto_big_o_1
 = "(\\([0-9]+\\))|(lgN)";

92 cÚ¡ *
	gÏmbda_big_o_1
 = "f\\(N\\)";

95 
ADD_COMPLEXITY_CASES
(
Úe_‹¡_Çme
, 
big_o_1_‹¡_Çme
, 
rms_o_1_‹¡_Çme
,

96 
’um_big_o_1
, 0);

99 
ADD_COMPLEXITY_CASES
(
Úe_‹¡_Çme
, 
big_o_1_‹¡_Çme
, 
rms_o_1_‹¡_Çme
,

100 
auto_big_o_1
, 1);

103 
ADD_COMPLEXITY_CASES
(
Úe_‹¡_Çme
, 
big_o_1_‹¡_Çme
, 
rms_o_1_‹¡_Çme
,

104 
Ïmbda_big_o_1
, 2);

110 
	g¡d
::
veùÜ
<> 
	$CÚ¡ruùRªdomVeùÜ
(
št64_t
 
size
) {

111 
¡d
::
veùÜ
<> 
v
;

112 
v
.
	`»£rve
(
¡©ic_ÿ¡
<
size_t
>(
size
));

113 
i
 = 0; i < 
size
; ++i) {

114 
v
.
	`push_back
(
¡©ic_ÿ¡
<>(
¡d
::
	`¿nd
(è% 
size
));

116  
v
;

117 
	}
}

119 
	$BM_Com¶ex™y_O_N
(
b’chm¬k
::
S‹
 &
¡©e
) {

120 autØ
v
 = 
	`CÚ¡ruùRªdomVeùÜ
(
¡©e
.
	`¿nge
(0));

122 cÚ¡ 
št64_t
 
™em_nÙ_š_veùÜ
 = 
¡©e
.
	`¿nge
(0) * 2;

123 autØ
_
 : 
¡©e
) {

124 autØ
™
 = 
¡d
::
	`fšd
(
v
.
	`begš
(), v.
	`’d
(), 
™em_nÙ_š_veùÜ
);

125 
b’chm¬k
::
	`DoNÙO±imize
(
™
);

127 
¡©e
.
	`S‘Com¶ex™yN
(¡©e.
	`¿nge
(0));

128 
	}
}

129 
BENCHMARK
(
BM_Com¶ex™y_O_N
)

130 ->
RªgeMuÉl›r
(2)

131 ->
Rªge
(1 << 10, 1 << 16)

132 ->
Com¶ex™y
(
b’chm¬k
::
oN
);

133 
BENCHMARK
(
BM_Com¶ex™y_O_N
)

134 ->
RªgeMuÉl›r
(2)

135 ->
Rªge
(1 << 10, 1 << 16)

136 ->
Com¶ex™y
([](
b’chm¬k
::
I‹¿tiÚCouÁ
 
n
) -> {

137  
¡©ic_ÿ¡
<>(
n
);

139 
BENCHMARK
(
BM_Com¶ex™y_O_N
)

140 ->
RªgeMuÉl›r
(2)

141 ->
Rªge
(1 << 10, 1 << 16)

142 ->
Com¶ex™y
();

144 cÚ¡ *
	gn_‹¡_Çme
 = "BM_Complexity_O_N";

145 cÚ¡ *
	gbig_o_n_‹¡_Çme
 = "BM_Complexity_O_N_BigO";

146 cÚ¡ *
	grms_o_n_‹¡_Çme
 = "BM_Complexity_O_N_RMS";

147 cÚ¡ *
	g’um_auto_big_o_n
 = "N";

148 cÚ¡ *
	gÏmbda_big_o_n
 = "f\\(N\\)";

151 
ADD_COMPLEXITY_CASES
(
n_‹¡_Çme
, 
big_o_n_‹¡_Çme
, 
rms_o_n_‹¡_Çme
,

152 
’um_auto_big_o_n
, 3);

155 
ADD_COMPLEXITY_CASES
(
n_‹¡_Çme
, 
big_o_n_‹¡_Çme
, 
rms_o_n_‹¡_Çme
,

156 
Ïmbda_big_o_n
, 4);

162 
	$BM_Com¶ex™y_O_N_log_N
(
b’chm¬k
::
S‹
 &
¡©e
) {

163 autØ
v
 = 
	`CÚ¡ruùRªdomVeùÜ
(
¡©e
.
	`¿nge
(0));

164 autØ
_
 : 
¡©e
) {

165 
¡d
::
	`sÜt
(
v
.
	`begš
(), v.
	`’d
());

167 
¡©e
.
	`S‘Com¶ex™yN
(¡©e.
	`¿nge
(0));

168 
	}
}

169 cÚ¡ 
	gkLog2E
 = 1.44269504088896340736;

170 
BENCHMARK
(
BM_Com¶ex™y_O_N_log_N
)

171 ->
RªgeMuÉl›r
(2)

172 ->
Rªge
(1 << 10, 1 << 16)

173 ->
Com¶ex™y
(
b’chm¬k
::
oNLogN
);

174 
BENCHMARK
(
BM_Com¶ex™y_O_N_log_N
)

175 ->
RªgeMuÉl›r
(2)

176 ->
Rªge
(1 << 10, 1 << 16)

177 ->
Com¶ex™y
([](
b’chm¬k
::
I‹¿tiÚCouÁ
 
n
) {

178  
kLog2E
 * 
¡©ic_ÿ¡
<>(
n
è* 
log
(static_cast<>(n));

180 
BENCHMARK
(
BM_Com¶ex™y_O_N_log_N
)

181 ->
RªgeMuÉl›r
(2)

182 ->
Rªge
(1 << 10, 1 << 16)

183 ->
Com¶ex™y
();

185 cÚ¡ *
	gn_lg_n_‹¡_Çme
 = "BM_Complexity_O_N_log_N";

186 cÚ¡ *
	gbig_o_n_lg_n_‹¡_Çme
 = "BM_Complexity_O_N_log_N_BigO";

187 cÚ¡ *
	grms_o_n_lg_n_‹¡_Çme
 = "BM_Complexity_O_N_log_N_RMS";

188 cÚ¡ *
	g’um_auto_big_o_n_lg_n
 = "NlgN";

189 cÚ¡ *
	gÏmbda_big_o_n_lg_n
 = "f\\(N\\)";

192 
ADD_COMPLEXITY_CASES
(
n_lg_n_‹¡_Çme
, 
big_o_n_lg_n_‹¡_Çme
,

193 
rms_o_n_lg_n_‹¡_Çme
, 
’um_auto_big_o_n_lg_n
,

197 
ADD_COMPLEXITY_CASES
(
n_lg_n_‹¡_Çme
, 
big_o_n_lg_n_‹¡_Çme
,

198 
rms_o_n_lg_n_‹¡_Çme
, 
Ïmbda_big_o_n_lg_n
,

205 
	$BM_Com¶ex™yC­tu»Args
(
b’chm¬k
::
S‹
 &
¡©e
, 
n
) {

206 autØ
_
 : 
¡©e
) {

208 autØ
™”©iÚs
 = 
¡©e
.
	`™”©iÚs
();

209 
b’chm¬k
::
	`DoNÙO±imize
(
™”©iÚs
);

211 
¡©e
.
	`S‘Com¶ex™yN
(
n
);

212 
	}
}

214 
BENCHMARK_CAPTURE
(
BM_Com¶ex™yC­tu»Args
, 
ÿ±u»_‹¡
, 100)

215 ->
Com¶ex™y
(
b’chm¬k
::
oN
)

216 ->
Rªges
({{1, 2}, {3, 4}});

218 cÚ¡ 
	g¡d
::
¡ršg
 
com¶ex™y_ÿ±u»_Çme
 =

221 
ADD_COMPLEXITY_CASES
(
com¶ex™y_ÿ±u»_Çme
, complexity_capture_name + "_BigO",

222 
com¶ex™y_ÿ±u»_Çme
 + "_RMS", "N", 9);

228 
	$maš
(
¬gc
, *
¬gv
[]è{ 
	`RunOuutTe¡s
×rgc,‡rgv); 
	}
}

	@third_party/benchmark/test/cxx03_test.cc

1 #undeà
NDEBUG


2 
	~<ÿs£¹
>

3 
	~<c¡ddef
>

5 
	~"b’chm¬k/b’chm¬k.h
"

7 #ià
__ılu¥lus
 >= 201103L

8 #”rÜ 
C
++11 
Ü
 
g»©”
 
d‘eùed
. 
Should
 
be
 C++03.

11 #ifdeà
BENCHMARK_HAS_CXX11


12 #”rÜ 
C
++11 
Ü
 
g»©”
 
d‘eùed
 
by
 
the
 
lib¿ry
. 
BENCHMARK_HAS_CXX11
 
is
 
defšed
.

15 
	$BM_em±y
(
b’chm¬k
::
S‹
& 
¡©e
) {

16 
¡©e
.
	`K“pRuÂšg
()) {

17 vŞ©
b’chm¬k
::
I‹¿tiÚCouÁ
 
x
 = 
¡©e
.
	`™”©iÚs
();

18 (()
x
);

20 
	}
}

21 
BENCHMARK
(
BM_em±y
);

25 
	$BM_Şd_¬g_¿nge_š‹rçû
(
b’chm¬k
::
S‹
& 
¡©e
) {

26 
	`as£¹
((
¡©e
.
	`¿nge
(0) == 1 && state.range(1) == 2) ||

27 (
¡©e
.
	`¿nge
(0) == 5 && state.range(1) == 6));

28 
¡©e
.
	`K“pRuÂšg
()) {

30 
	}
}

31 
BENCHMARK
(
BM_Şd_¬g_¿nge_š‹rçû
)->
ArgPaœ
(1, 2)->
RªgePaœ
(5, 5, 6, 6);

33 
	g‹m¶©e
 <
şass
 
	gT
, cÏs 
	gU
>

34 
	$BM_‹m¶©e2
(
b’chm¬k
::
S‹
& 
¡©e
) {

35 
	`BM_em±y
(
¡©e
);

36 
	}
}

37 
BENCHMARK_TEMPLATE2
(
BM_‹m¶©e2
, , );

39 
	g‹m¶©e
 <
şass
 
	gT
>

40 
	$BM_‹m¶©e1
(
b’chm¬k
::
S‹
& 
¡©e
) {

41 
	`BM_em±y
(
¡©e
);

42 
	}
}

43 
BENCHMARK_TEMPLATE
(
BM_‹m¶©e1
, );

44 
BENCHMARK_TEMPLATE1
(
BM_‹m¶©e1
, );

46 
	g‹m¶©e
 <
şass
 
	gT
>

47 
	gBM_Fixtu»
 : 
public
 ::
b’chm¬k
::
Fixtu»
 {};

49 
	$BENCHMARK_TEMPLATE_F
(
BM_Fixtu»
, 
BM_‹m¶©e1
, )(
b’chm¬k
::
S‹
& 
¡©e
) {

50 
	`BM_em±y
(
¡©e
);

51 
	}
}

52 
	$BENCHMARK_TEMPLATE1_F
(
BM_Fixtu»
, 
BM_‹m¶©e2
, )(
b’chm¬k
::
S‹
& 
¡©e
) {

53 
	`BM_em±y
(
¡©e
);

54 
	}
}

56 
	$BM_couÁ”s
(
b’chm¬k
::
S‹
& 
¡©e
) {

57 
	`BM_em±y
(
¡©e
);

58 
¡©e
.
couÁ”s
["Foo"] = 2;

59 
	}
}

60 
BENCHMARK
(
BM_couÁ”s
);

62 
BENCHMARK_MAIN
();

	@third_party/benchmark/test/diagnostics_test.cc

10 
	~<c¡dlib
>

11 
	~<¡dexû±
>

13 
	~"../¤c/check.h
"

14 
	~"b’chm¬k/b’chm¬k.h
"

16 #ià
defšed
(
__GNUC__
è&& !defšed(
__EXCEPTIONS
)

17 
	#TEST_HAS_NO_EXCEPTIONS


	)

20 
	$Te¡HªdËr
() {

21 #iâdeà
TEST_HAS_NO_EXCEPTIONS


22 
throw
 
¡d
::
	`logic_”rÜ
("");

24 
¡d
::
	`abÜt
();

26 
	}
}

28 
	$Œy_šv®id_·u£_»sume
(
b’chm¬k
::
S‹
& 
¡©e
) {

29 #ià!
	`defšed
(
TEST_BENCHMARK_LIBRARY_HAS_NO_ASSERTIONS
) && \

30 !
	`defšed
(
TEST_HAS_NO_EXCEPTIONS
)

31 
Œy
 {

32 
¡©e
.
	`Pau£Timšg
();

33 
¡d
::
	`abÜt
();

34 } 
	`ÿtch
 (
¡d
::
logic_”rÜ
 const&) {

36 
Œy
 {

37 
¡©e
.
	`ResumeTimšg
();

38 
¡d
::
	`abÜt
();

39 } 
	`ÿtch
 (
¡d
::
logic_”rÜ
 const&) {

42 ()
¡©e
;

44 
	}
}

46 
	$BM_dŸgno¡ic_‹¡
(
b’chm¬k
::
S‹
& 
¡©e
) {

47 
boŞ
 
ÿÎed_Úû
 = 
çl£
;

49 ià(
ÿÎed_Úû
 =ğ
çl£
è
	`Œy_šv®id_·u£_»sume
(
¡©e
);

51 autØ
_
 : 
¡©e
) {

52 autØ
™”©iÚs
 = 
¡©e
.
	`™”©iÚs
();

53 
b’chm¬k
::
	`DoNÙO±imize
(
™”©iÚs
);

56 ià(
ÿÎed_Úû
 =ğ
çl£
è
	`Œy_šv®id_·u£_»sume
(
¡©e
);

58 
ÿÎed_Úû
 = 
Œue
;

59 
	}
}

60 
BENCHMARK
(
BM_dŸgno¡ic_‹¡
);

62 
	$BM_dŸgno¡ic_‹¡_k“p_ruÂšg
(
b’chm¬k
::
S‹
& 
¡©e
) {

63 
boŞ
 
ÿÎed_Úû
 = 
çl£
;

65 ià(
ÿÎed_Úû
 =ğ
çl£
è
	`Œy_šv®id_·u£_»sume
(
¡©e
);

67 
¡©e
.
	`K“pRuÂšg
()) {

68 autØ
™”©iÚs
 = 
¡©e
.
	`™”©iÚs
();

69 
b’chm¬k
::
	`DoNÙO±imize
(
™”©iÚs
);

72 ià(
ÿÎed_Úû
 =ğ
çl£
è
	`Œy_šv®id_·u£_»sume
(
¡©e
);

74 
ÿÎed_Úû
 = 
Œue
;

75 
	}
}

76 
BENCHMARK
(
BM_dŸgno¡ic_‹¡_k“p_ruÂšg
);

78 
	$maš
(
¬gc
, * 
¬gv
[]) {

79 
b’chm¬k
::
š‹º®
::
	`G‘AbÜtHªdËr
(èğ&
Te¡HªdËr
;

80 
b’chm¬k
::
	`In™Ÿlize
(&
¬gc
, 
¬gv
);

81 
b’chm¬k
::
	`RunS³cif›dB’chm¬ks
();

82 
	}
}

	@third_party/benchmark/test/display_aggregates_only_test.cc

2 #undeà
NDEBUG


3 
	~<c¡dio
>

4 
	~<¡ršg
>

6 
	~"b’chm¬k/b’chm¬k.h
"

7 
	~"ouut_‹¡.h
"

13 
	$BM_Summ¬yR•—t
(
b’chm¬k
::
S‹
& 
¡©e
) {

14 autØ
_
 : 
¡©e
) {

16 
	}
}

17 
BENCHMARK
(
BM_Summ¬yR•—t
)->
R•‘™iÚs
(3)->
Di¥ÏyAgg»g©esOÆy
();

19 
	$maš
(
¬gc
, * 
¬gv
[]) {

20 cÚ¡ 
¡d
::
¡ršg
 
ouut
 = 
	`G‘FeR•Ü‹rOuut
(
¬gc
, 
¬gv
);

22 ià(
	`Sub¡rCÁ
(
ouut
, "\"name\": \"BM_SummaryRepeat/repeats:3") != 7 ||

23 
	`Sub¡rCÁ
(
ouut
, "\"name\": \"BM_SummaryRepeat/repeats:3\"") != 3 ||

24 
	`Sub¡rCÁ
(
ouut
, "\"name\": \"BM_SummaryRepeat/repeats:3_mean\"") != 1 ||

25 
	`Sub¡rCÁ
(
ouut
, "\"name\": \"BM_SummaryRepeat/repeats:3_median\"") !=

27 
	`Sub¡rCÁ
(
ouut
, "\"name\": \"BM_SummaryRepeat/repeats:3_stddev\"") !=

29 
	`Sub¡rCÁ
(
ouut
, "\"name\": \"BM_SummaryRepeat/repeats:3_cv\"") != 1) {

30 
¡d
::
cout
 << "Precondition mismatch. Expectedo only find 8 "

40 
¡d
::
cout
 << 
ouut
;

45 
	}
}

	@third_party/benchmark/test/donotoptimize_assembly_test.cc

1 
	~<b’chm¬k/b’chm¬k.h
>

3 #ifdeà
__şªg__


4 #´agm¨
şªg
 
dŸgno¡ic
 
ignÜed
 "-Wreturn-type"

6 
BENCHMARK_DISABLE_DEPRECATED_WARNING


10 
Ex‹ºIÁ
;

11 
Ex‹ºIÁ2
;

12 
Ex‹ºIÁ3
;

13 
BigA¼ay
[2049];

15 cÚ¡ 
	gCÚ¡BigA¼ay
[2049]{};

17 
šlše
 
Add42
(
x
è{  
	gx
 + 42; }

19 
	sNÙTrivŸÎyCİyabË
 {

20 
NÙTrivŸÎyCİyabË
();

21 
ex¶ic™
 
NÙTrivŸÎyCİyabË
(
x
è: 
v®ue
(x) {}

22 
NÙTrivŸÎyCİyabË
(NotTriviallyCopyable const &);

23 
	gv®ue
;

26 
	sL¬ge
 {

27 
	gv®ue
;

28 
	gd©a
[2];

31 
	sExŒaL¬ge
 {

32 
	g¬r
[2049];

36 
ExŒaL¬ge
 
ExŒaL¬geObj
;

37 cÚ¡ 
ExŒaL¬ge
 
	gCÚ¡ExŒaL¬geObj
{};

40 "C" 
	$‹¡_w™h_rv®ue
() {

41 
b’chm¬k
::
	`DoNÙO±imize
(
	`Add42
(0));

44 
	}
}

47 "C" 
	$‹¡_w™h_Ïrge_rv®ue
() {

48 
b’chm¬k
::
	`DoNÙO±imize
(
L¬ge
{
Ex‹ºIÁ
, {ExternInt, ExternInt}});

54 
	}
}

57 "C" 
	$‹¡_w™h_nÚ_ŒivŸl_rv®ue
() {

58 
b’chm¬k
::
	`DoNÙO±imize
(
	`NÙTrivŸÎyCİyabË
(
Ex‹ºIÁ
));

61 
	}
}

64 "C" 
	$‹¡_w™h_lv®ue
() {

65 
x
 = 101;

66 
b’chm¬k
::
	`DoNÙO±imize
(
x
);

70 
	}
}

73 "C" 
	$‹¡_w™h_Ïrge_lv®ue
() {

74 
L¬ge
 
L
{
Ex‹ºIÁ
, {ExternInt, ExternInt}};

75 
b’chm¬k
::
	`DoNÙO±imize
(
L
);

81 
	}
}

84 "C" 
	$‹¡_w™h_exŒa_Ïrge_lv®ue_w™h_İ
() {

85 
ExŒaL¬geObj
.
¬r
[16] = 42;

86 
b’chm¬k
::
	`DoNÙO±imize
(
ExŒaL¬geObj
);

89 
	}
}

92 "C" 
	$‹¡_w™h_big_¬¿y_w™h_İ
() {

93 
BigA¼ay
[16] = 42;

94 
b’chm¬k
::
	`DoNÙO±imize
(
BigA¼ay
);

97 
	}
}

100 "C" 
	$‹¡_w™h_nÚ_ŒivŸl_lv®ue
() {

101 
NÙTrivŸÎyCİyabË
 
	`NTC
(
Ex‹ºIÁ
);

102 
b’chm¬k
::
	`DoNÙO±imize
(
NTC
);

106 
	}
}

109 "C" 
	$‹¡_w™h_cÚ¡_lv®ue
() {

110 cÚ¡ 
x
 = 123;

111 
b’chm¬k
::
	`DoNÙO±imize
(
x
);

114 
	}
}

117 "C" 
	$‹¡_w™h_Ïrge_cÚ¡_lv®ue
() {

118 cÚ¡ 
L¬ge
 
L
{
Ex‹ºIÁ
, {ExternInt, ExternInt}};

119 
b’chm¬k
::
	`DoNÙO±imize
(
L
);

125 
	}
}

128 "C" 
	$‹¡_w™h_cÚ¡_exŒa_Ïrge_obj
() {

129 
b’chm¬k
::
	`DoNÙO±imize
(
CÚ¡ExŒaL¬geObj
);

131 
	}
}

134 "C" 
	$‹¡_w™h_cÚ¡_big_¬¿y
() {

135 
b’chm¬k
::
	`DoNÙO±imize
(
CÚ¡BigA¼ay
);

137 
	}
}

140 "C" 
	$‹¡_w™h_nÚ_ŒivŸl_cÚ¡_lv®ue
() {

141 cÚ¡ 
NÙTrivŸÎyCİyabË
 
	`Obj
(
Ex‹ºIÁ
);

142 
b’chm¬k
::
	`DoNÙO±imize
(
Obj
);

145 
	}
}

148 "C" 
	$‹¡_div_by_two
(
šput
) {

149 
divisÜ
 = 2;

150 
b’chm¬k
::
	`DoNÙO±imize
(
divisÜ
);

151  
šput
 / 
divisÜ
;

155 
	}
}

158 "C" 
	$‹¡_šc_š‹g”
() {

159 
x
 = 0;

160 
i
 = 0; i < 5; ++iè
b’chm¬k
::
	`DoNÙO±imize
(++
x
);

168  
x
;

169 
	}
}

172 "C" 
	$‹¡_poš‹r_rv®ue
() {

177 
x
 = 42;

178 
b’chm¬k
::
	`DoNÙO±imize
(&
x
);

179 
	}
}

182 "C" 
	$‹¡_poš‹r_cÚ¡_lv®ue
() {

187 
x
 = 42;

188 *cÚ¡ 
xp
 = &
x
;

189 
b’chm¬k
::
	`DoNÙO±imize
(
xp
);

190 
	}
}

193 "C" 
	$‹¡_poš‹r_lv®ue
() {

198 
x
 = 42;

199 *
xp
 = &
x
;

200 
b’chm¬k
::
	`DoNÙO±imize
(
xp
);

201 
	}
}

	@third_party/benchmark/test/donotoptimize_test.cc

1 
	~<c¡dšt
>

3 
	~"b’chm¬k/b’chm¬k.h
"

5 
	gÇme¥aû
 {

6 #ià
defšed
(
__GNUC__
)

7 
	g¡d
::
št64_t
 
doubË_up
(cÚ¡ 
¡d
::št64_ˆ
x
è
__©Œibu‹__
((const));

9 
	g¡d
::
št64_t
 
doubË_up
(cÚ¡ 
¡d
::št64_ˆ
x
) {  x * 2; }

14 
	sB™Ref
 {

15 
	mšdex
;

16 & 
	mby‹
;

18 
	mpublic
:

19 
B™Ref
 
Make
() {

20 
¬r
[2] = {};

21 
B™Ref
 
b
(1, 
¬r
[0]);

22  
	mb
;

25 
	m´iv©e
:

26 
B™Ref
(
i
, & 
b
è: 
šdex
(i), 
by‹
(b) {}

29 
	$maš
(, *[]) {

32 
bufãr1
[1] = "";

33 
b’chm¬k
::
	`DoNÙO±imize
(
bufãr1
);

35 
bufãr2
[2] = "";

36 
b’chm¬k
::
	`DoNÙO±imize
(
bufãr2
);

38 
bufãr3
[3] = "";

39 
b’chm¬k
::
	`DoNÙO±imize
(
bufãr3
);

41 
bufãr8
[8] = "";

42 
b’chm¬k
::
	`DoNÙO±imize
(
bufãr8
);

44 
bufãr20
[20] = "";

45 
b’chm¬k
::
	`DoNÙO±imize
(
bufãr20
);

47 
bufãr1024
[1024] = "";

48 
b’chm¬k
::
	`DoNÙO±imize
(
bufãr1024
);

49 * 
b±r
 = &
bufãr1024
[0];

50 
b’chm¬k
::
	`DoNÙO±imize
(
b±r
);

52 
x
 = 123;

53 
b’chm¬k
::
	`DoNÙO±imize
(
x
);

54 * 
xp
 = &
x
;

55 
b’chm¬k
::
	`DoNÙO±imize
(
xp
);

56 
b’chm¬k
::
	`DoNÙO±imize
(
x
 += 42);

58 
¡d
::
št64_t
 
y
 = 
	`doubË_up
(
x
);

59 
b’chm¬k
::
	`DoNÙO±imize
(
y
);

62 
B™Ref
 
lv®
 = B™Ref::
	`Make
();

63 
b’chm¬k
::
	`DoNÙO±imize
(
lv®
);

64 
	}
}

	@third_party/benchmark/test/filter_test.cc

1 
	~<®gÜ™hm
>

2 
	~<ÿs£¹
>

3 
	~<cm©h
>

4 
	~<c¡dšt
>

5 
	~<c¡dlib
>

6 
	~<io¡»am
>

7 
	~<lim™s
>

8 
	~<s¡»am
>

9 
	~<¡ršg
>

11 
	~"b’chm¬k/b’chm¬k.h
"

13 
	gÇme¥aû
 {

15 şas 
	cTe¡R•Ü‹r
 : 
public
 
b’chm¬k
::
CÚsŞeR•Ü‹r
 {

16 
public
:

17 
boŞ
 
R•ÜtCÚ‹xt
(cÚ¡ 
CÚ‹xt
& 
cÚ‹xt
è
ov”ride
 {

18  
CÚsŞeR•Ü‹r
::
R•ÜtCÚ‹xt
(
cÚ‹xt
);

21 
R•ÜtRuns
(cÚ¡ 
¡d
::
veùÜ
<
Run
>& 
»pÜt
è
ov”ride
 {

22 ++
couÁ_
;

23 
	gmax_çmy_šdex_
 = 
¡d
::
max
(
max_çmy_šdex_
, 
»pÜt
[0].
çmy_šdex
);

24 
	gCÚsŞeR•Ü‹r
::
R•ÜtRuns
(
»pÜt
);

27 
Te¡R•Ü‹r
(è: 
couÁ_
(0), 
max_çmy_šdex_
(0) {}

29 ~
Te¡R•Ü‹r
(è
	gov”ride
 {}

31 
G‘CouÁ
(ècÚ¡ {  
	gcouÁ_
; }

33 
št64_t
 
G‘MaxFamyIndex
(ècÚ¡ {  
	gmax_çmy_šdex_
; }

35 
	g´iv©e
:

36 
mubË
 
couÁ_
;

37 
mubË
 
št64_t
 
	gmax_çmy_šdex_
;

42 
	$NoP»fix
(
b’chm¬k
::
S‹
& 
¡©e
) {

43 autØ
_
 : 
¡©e
) {

45 
	}
}

46 
BENCHMARK
(
NoP»fix
);

48 
	$BM_Foo
(
b’chm¬k
::
S‹
& 
¡©e
) {

49 autØ
_
 : 
¡©e
) {

51 
	}
}

52 
BENCHMARK
(
BM_Foo
);

54 
	$BM_B¬
(
b’chm¬k
::
S‹
& 
¡©e
) {

55 autØ
_
 : 
¡©e
) {

57 
	}
}

58 
BENCHMARK
(
BM_B¬
);

60 
	$BM_FooB¬
(
b’chm¬k
::
S‹
& 
¡©e
) {

61 autØ
_
 : 
¡©e
) {

63 
	}
}

64 
BENCHMARK
(
BM_FooB¬
);

66 
	$BM_FooBa
(
b’chm¬k
::
S‹
& 
¡©e
) {

67 autØ
_
 : 
¡©e
) {

69 
	}
}

70 
BENCHMARK
(
BM_FooBa
);

72 
	$maš
(
¬gc
, ** 
¬gv
) {

73 
boŞ
 
li¡_Úly
 = 
çl£
;

74 
i
 = 0; i < 
¬gc
; ++i)

75 
li¡_Úly
 |ğ
¡d
::
	`¡ršg
(
¬gv
[
i
]).
	`fšd
("--benchmark_list_tests") !=

76 
¡d
::
¡ršg
::
Åos
;

78 
b’chm¬k
::
	`In™Ÿlize
(&
¬gc
, 
¬gv
);

80 
Te¡R•Ü‹r
 
‹¡_»pÜ‹r
;

81 cÚ¡ 
št64_t
 
»tuºed_couÁ
 =

82 
¡©ic_ÿ¡
<
št64_t
>(
b’chm¬k
::
	`RunS³cif›dB’chm¬ks
(&
‹¡_»pÜ‹r
));

84 ià(
¬gc
 == 2) {

86 
¡d
::
¡ršg¡»am
 
	`ss
(
¬gv
[1]);

87 
št64_t
 
ex³ùed_»tuº
;

88 
ss
 >> 
ex³ùed_»tuº
;

90 ià(
»tuºed_couÁ
 !ğ
ex³ùed_»tuº
) {

91 
¡d
::
û¼
 << "ERROR: Ex³ùed " << 
ex³ùed_»tuº


93 << 
»tuºed_couÁ
 << 
¡d
::
’dl
;

97 cÚ¡ 
št64_t
 
ex³ùed_»pÜts
 = 
li¡_Úly
 ? 0 : 
ex³ùed_»tuº
;

98 cÚ¡ 
št64_t
 
»pÜts_couÁ
 = 
‹¡_»pÜ‹r
.
	`G‘CouÁ
();

99 ià(
»pÜts_couÁ
 !ğ
ex³ùed_»pÜts
) {

100 
¡d
::
û¼
 << "ERROR: Ex³ùed " << 
ex³ùed_»pÜts


101 << "e¡ tØbruÀbuˆ»pÜ‹d_couÁ = " << 
»pÜts_couÁ


102 << 
¡d
::
’dl
;

106 cÚ¡ 
št64_t
 
max_çmy_šdex
 = 
‹¡_»pÜ‹r
.
	`G‘MaxFamyIndex
();

107 cÚ¡ 
št64_t
 
num_çm›s
 = 
»pÜts_couÁ
 =ğ0 ? 0 : 1 + 
max_çmy_šdex
;

108 ià(
num_çm›s
 !ğ
ex³ùed_»pÜts
) {

109 
¡d
::
û¼
 << "ERROR: Ex³ùed " << 
ex³ùed_»pÜts


111 << 
num_çm›s
 << 
¡d
::
’dl
;

117 
	}
}

	@third_party/benchmark/test/fixture_test.cc

2 
	~<ÿs£¹
>

3 
	~<memÜy
>

5 
	~"b’chm¬k/b’chm¬k.h
"

7 
	#FIXTURE_BECHMARK_NAME
 
MyFixtu»


	)

9 şas 
	cFIXTURE_BECHMARK_NAME
 : 
public
 ::
b’chm¬k
::
Fixtu»
 {

10 
public
:

11 
	$S‘Up
(cÚ¡ ::
b’chm¬k
::
S‹
& 
¡©e
è
ov”ride
 {

12 ià(
¡©e
.
	`th»ad_šdex
() == 0) {

13 
	`as£¹
(
d©a
.
	`g‘
(è=ğ
nuÎ±r
);

14 
d©a
.
	`»£t
(
Ãw
 (42));

18 
	$T—rDown
(cÚ¡ ::
b’chm¬k
::
S‹
& 
¡©e
è
ov”ride
 {

19 ià(
¡©e
.
	`th»ad_šdex
() == 0) {

20 
	`as£¹
(
d©a
.
	`g‘
(è!ğ
nuÎ±r
);

21 
d©a
.
	`»£t
();

23 
	}
}

25 ~
	$FIXTURE_BECHMARK_NAME
(è
ov”ride
 { 
	`as£¹
(
d©a
 =ğ
nuÎ±r
); 
	}
}

27 
	g¡d
::
unique_±r
<> 
d©a
;

30 
	$BENCHMARK_F
(
FIXTURE_BECHMARK_NAME
, 
Foo
)(
b’chm¬k
::
S‹
& 
¡
) {

31 
	`as£¹
(
d©a
.
	`g‘
(è!ğ
nuÎ±r
);

32 
	`as£¹
(*
d©a
 == 42);

33 autØ
_
 : 
¡
) {

35 
	}
}

37 
	$BENCHMARK_DEFINE_F
(
FIXTURE_BECHMARK_NAME
, 
B¬
)(
b’chm¬k
::
S‹
& 
¡
) {

38 ià(
¡
.
	`th»ad_šdex
() == 0) {

39 
	`as£¹
(
d©a
.
	`g‘
(è!ğ
nuÎ±r
);

40 
	`as£¹
(*
d©a
 == 42);

42 autØ
_
 : 
¡
) {

43 
	`as£¹
(
d©a
.
	`g‘
(è!ğ
nuÎ±r
);

44 
	`as£¹
(*
d©a
 == 42);

46 
¡
.
	`S‘I‹msProûs£d
(¡.
	`¿nge
(0));

47 
	}
}

48 
BENCHMARK_REGISTER_F
(
FIXTURE_BECHMARK_NAME
, 
B¬
)->
Arg
(42);

49 
BENCHMARK_REGISTER_F
(
FIXTURE_BECHMARK_NAME
, 
B¬
)->
Arg
(42)->
Th»adP”Cpu
();

51 
BENCHMARK_MAIN
();

	@third_party/benchmark/test/internal_threading_test.cc

2 #undeà
NDEBUG


4 
	~<chrÚo
>

5 
	~<th»ad
>

7 
	~"../¤c/tim”s.h
"

8 
	~"b’chm¬k/b’chm¬k.h
"

9 
	~"ouut_‹¡.h
"

11 cÚ¡ 
	g¡d
::
chrÚo
::
du¿tiÚ
<, std::
mli
> 
time_äame
(50);

12 cÚ¡ 
time_äame_š_£c
(

13 
¡d
::
chrÚo
::
du¿tiÚ_ÿ¡
<¡d::chrÚo::
du¿tiÚ
<, std::
¿tio
<1, 1>>>(

14 
time_äame
)

15 .
couÁ
());

17 
	$MyBusySpšwa™
() {

18 cÚ¡‡utØ
¡¬t
 = 
b’chm¬k
::
	`ChrÚoClockNow
();

20 
Œue
) {

21 cÚ¡‡utØ
now
 = 
b’chm¬k
::
	`ChrÚoClockNow
();

22 cÚ¡‡utØ
–­£d
 = 
now
 - 
¡¬t
;

24 ià(
¡d
::
chrÚo
::
du¿tiÚ
<, std::chrÚo::
£cÚds
::
³riod
>(
–­£d
) >=

25 
time_äame
)

28 
	}
}

37 
	$BM_MašTh»ad
(
b’chm¬k
::
S‹
& 
¡©e
) {

38 autØ
_
 : 
¡©e
) {

39 
	`MyBusySpšwa™
();

40 
¡©e
.
	`S‘I‹¿tiÚTime
(
time_äame_š_£c
);

42 
¡©e
.
couÁ”s
["invtime"] =

43 
b’chm¬k
::
CouÁ”
{1, b’chm¬k::CouÁ”::
kIsR©e
};

44 
	}
}

46 
BENCHMARK
(
BM_MašTh»ad
)->
I‹¿tiÚs
(1)->
Th»ads
(1);

47 
BENCHMARK
(
BM_MašTh»ad
)->
I‹¿tiÚs
(1)->
Th»ads
(1)->
U£R—lTime
();

48 
BENCHMARK
(
BM_MašTh»ad
)->
I‹¿tiÚs
(1)->
Th»ads
(1)->
U£Mªu®Time
();

49 
BENCHMARK
(
BM_MašTh»ad
)->
I‹¿tiÚs
(1)->
Th»ads
(1)->
M—su»ProûssCPUTime
();

50 
BENCHMARK
(
BM_MašTh»ad
)

51 ->
I‹¿tiÚs
(1)

52 ->
Th»ads
(1)

53 ->
M—su»ProûssCPUTime
()

54 ->
U£R—lTime
();

55 
BENCHMARK
(
BM_MašTh»ad
)

56 ->
I‹¿tiÚs
(1)

57 ->
Th»ads
(1)

58 ->
M—su»ProûssCPUTime
()

59 ->
U£Mªu®Time
();

61 
BENCHMARK
(
BM_MašTh»ad
)->
I‹¿tiÚs
(1)->
Th»ads
(2);

62 
BENCHMARK
(
BM_MašTh»ad
)->
I‹¿tiÚs
(1)->
Th»ads
(2)->
U£R—lTime
();

63 
BENCHMARK
(
BM_MašTh»ad
)->
I‹¿tiÚs
(1)->
Th»ads
(2)->
U£Mªu®Time
();

64 
BENCHMARK
(
BM_MašTh»ad
)->
I‹¿tiÚs
(1)->
Th»ads
(2)->
M—su»ProûssCPUTime
();

65 
BENCHMARK
(
BM_MašTh»ad
)

66 ->
I‹¿tiÚs
(1)

67 ->
Th»ads
(2)

68 ->
M—su»ProûssCPUTime
()

69 ->
U£R—lTime
();

70 
BENCHMARK
(
BM_MašTh»ad
)

71 ->
I‹¿tiÚs
(1)

72 ->
Th»ads
(2)

73 ->
M—su»ProûssCPUTime
()

74 ->
U£Mªu®Time
();

79 
	$BM_WÜk”Th»ad
(
b’chm¬k
::
S‹
& 
¡©e
) {

80 autØ
_
 : 
¡©e
) {

81 
¡d
::
th»ad
 
	`WÜk”
(&
MyBusySpšwa™
);

82 
WÜk”
.
	`još
();

83 
¡©e
.
	`S‘I‹¿tiÚTime
(
time_äame_š_£c
);

85 
¡©e
.
couÁ”s
["invtime"] =

86 
b’chm¬k
::
CouÁ”
{1, b’chm¬k::CouÁ”::
kIsR©e
};

87 
	}
}

89 
BENCHMARK
(
BM_WÜk”Th»ad
)->
I‹¿tiÚs
(1)->
Th»ads
(1);

90 
BENCHMARK
(
BM_WÜk”Th»ad
)->
I‹¿tiÚs
(1)->
Th»ads
(1)->
U£R—lTime
();

91 
BENCHMARK
(
BM_WÜk”Th»ad
)->
I‹¿tiÚs
(1)->
Th»ads
(1)->
U£Mªu®Time
();

92 
BENCHMARK
(
BM_WÜk”Th»ad
)->
I‹¿tiÚs
(1)->
Th»ads
(1)->
M—su»ProûssCPUTime
();

93 
BENCHMARK
(
BM_WÜk”Th»ad
)

94 ->
I‹¿tiÚs
(1)

95 ->
Th»ads
(1)

96 ->
M—su»ProûssCPUTime
()

97 ->
U£R—lTime
();

98 
BENCHMARK
(
BM_WÜk”Th»ad
)

99 ->
I‹¿tiÚs
(1)

100 ->
Th»ads
(1)

101 ->
M—su»ProûssCPUTime
()

102 ->
U£Mªu®Time
();

104 
BENCHMARK
(
BM_WÜk”Th»ad
)->
I‹¿tiÚs
(1)->
Th»ads
(2);

105 
BENCHMARK
(
BM_WÜk”Th»ad
)->
I‹¿tiÚs
(1)->
Th»ads
(2)->
U£R—lTime
();

106 
BENCHMARK
(
BM_WÜk”Th»ad
)->
I‹¿tiÚs
(1)->
Th»ads
(2)->
U£Mªu®Time
();

107 
BENCHMARK
(
BM_WÜk”Th»ad
)->
I‹¿tiÚs
(1)->
Th»ads
(2)->
M—su»ProûssCPUTime
();

108 
BENCHMARK
(
BM_WÜk”Th»ad
)

109 ->
I‹¿tiÚs
(1)

110 ->
Th»ads
(2)

111 ->
M—su»ProûssCPUTime
()

112 ->
U£R—lTime
();

113 
BENCHMARK
(
BM_WÜk”Th»ad
)

114 ->
I‹¿tiÚs
(1)

115 ->
Th»ads
(2)

116 ->
M—su»ProûssCPUTime
()

117 ->
U£Mªu®Time
();

122 
	$BM_MašTh»adAndWÜk”Th»ad
(
b’chm¬k
::
S‹
& 
¡©e
) {

123 autØ
_
 : 
¡©e
) {

124 
¡d
::
th»ad
 
	`WÜk”
(&
MyBusySpšwa™
);

125 
	`MyBusySpšwa™
();

126 
WÜk”
.
	`još
();

127 
¡©e
.
	`S‘I‹¿tiÚTime
(
time_äame_š_£c
);

129 
¡©e
.
couÁ”s
["invtime"] =

130 
b’chm¬k
::
CouÁ”
{1, b’chm¬k::CouÁ”::
kIsR©e
};

131 
	}
}

133 
BENCHMARK
(
BM_MašTh»adAndWÜk”Th»ad
)->
I‹¿tiÚs
(1)->
Th»ads
(1);

134 
BENCHMARK
(
BM_MašTh»adAndWÜk”Th»ad
)

135 ->
I‹¿tiÚs
(1)

136 ->
Th»ads
(1)

137 ->
U£R—lTime
();

138 
BENCHMARK
(
BM_MašTh»adAndWÜk”Th»ad
)

139 ->
I‹¿tiÚs
(1)

140 ->
Th»ads
(1)

141 ->
U£Mªu®Time
();

142 
BENCHMARK
(
BM_MašTh»adAndWÜk”Th»ad
)

143 ->
I‹¿tiÚs
(1)

144 ->
Th»ads
(1)

145 ->
M—su»ProûssCPUTime
();

146 
BENCHMARK
(
BM_MašTh»adAndWÜk”Th»ad
)

147 ->
I‹¿tiÚs
(1)

148 ->
Th»ads
(1)

149 ->
M—su»ProûssCPUTime
()

150 ->
U£R—lTime
();

151 
BENCHMARK
(
BM_MašTh»adAndWÜk”Th»ad
)

152 ->
I‹¿tiÚs
(1)

153 ->
Th»ads
(1)

154 ->
M—su»ProûssCPUTime
()

155 ->
U£Mªu®Time
();

157 
BENCHMARK
(
BM_MašTh»adAndWÜk”Th»ad
)->
I‹¿tiÚs
(1)->
Th»ads
(2);

158 
BENCHMARK
(
BM_MašTh»adAndWÜk”Th»ad
)

159 ->
I‹¿tiÚs
(1)

160 ->
Th»ads
(2)

161 ->
U£R—lTime
();

162 
BENCHMARK
(
BM_MašTh»adAndWÜk”Th»ad
)

163 ->
I‹¿tiÚs
(1)

164 ->
Th»ads
(2)

165 ->
U£Mªu®Time
();

166 
BENCHMARK
(
BM_MašTh»adAndWÜk”Th»ad
)

167 ->
I‹¿tiÚs
(1)

168 ->
Th»ads
(2)

169 ->
M—su»ProûssCPUTime
();

170 
BENCHMARK
(
BM_MašTh»adAndWÜk”Th»ad
)

171 ->
I‹¿tiÚs
(1)

172 ->
Th»ads
(2)

173 ->
M—su»ProûssCPUTime
()

174 ->
U£R—lTime
();

175 
BENCHMARK
(
BM_MašTh»adAndWÜk”Th»ad
)

176 ->
I‹¿tiÚs
(1)

177 ->
Th»ads
(2)

178 ->
M—su»ProûssCPUTime
()

179 ->
U£Mªu®Time
();

185 
	$maš
(
¬gc
, * 
¬gv
[]è{ 
	`RunOuutTe¡s
×rgc,‡rgv); 
	}
}

	@third_party/benchmark/test/link_main_test.cc

1 
	~"b’chm¬k/b’chm¬k.h
"

3 
	$BM_em±y
(
b’chm¬k
::
S‹
& 
¡©e
) {

4 autØ
_
 : 
¡©e
) {

5 autØ
™”©iÚs
 = 
¡©e
.
	`™”©iÚs
();

6 
b’chm¬k
::
	`DoNÙO±imize
(
™”©iÚs
);

8 
	}
}

9 
BENCHMARK
(
BM_em±y
);

	@third_party/benchmark/test/map_test.cc

1 
	~<c¡dlib
>

2 
	~<m­
>

4 
	~"b’chm¬k/b’chm¬k.h
"

6 
	gÇme¥aû
 {

8 
	g¡d
::
m­
<, > 
CÚ¡ruùRªdomM­
(
size
) {

9 
	g¡d
::
m­
<, > 
	gm
;

10 
	gi
 = 0; i < 
	gsize
; ++i) {

11 
	gm
.
š£¹
(
¡d
::
make_·œ
(¡d::
¿nd
(è% 
size
, std::rand() % size));

13  
	gm
;

19 
	$BM_M­Lookup
(
b’chm¬k
::
S‹
& 
¡©e
) {

20 cÚ¡ 
size
 = 
¡©ic_ÿ¡
<>(
¡©e
.
	`¿nge
(0));

21 
¡d
::
m­
<, > 
m
;

22 autØ
_
 : 
¡©e
) {

23 
¡©e
.
	`Pau£Timšg
();

24 
m
 = 
	`CÚ¡ruùRªdomM­
(
size
);

25 
¡©e
.
	`ResumeTimšg
();

26 
i
 = 0; i < 
size
; ++i) {

27 autØ
™
 = 
m
.
	`fšd
(
¡d
::
	`¿nd
(è% 
size
);

28 
b’chm¬k
::
	`DoNÙO±imize
(
™
);

31 
¡©e
.
	`S‘I‹msProûs£d
(¡©e.
	`™”©iÚs
(è* 
size
);

32 
	}
}

33 
BENCHMARK
(
BM_M­Lookup
)->
Rªge
(1 << 3, 1 << 12);

36 şas 
	cM­Fixtu»
 : 
public
 ::
b’chm¬k
::
Fixtu»
 {

37 
public
:

38 
	$S‘Up
(cÚ¡ ::
b’chm¬k
::
S‹
& 
¡
è
ov”ride
 {

39 
m
 = 
	`CÚ¡ruùRªdomM­
(
¡©ic_ÿ¡
<>(
¡
.
	`¿nge
(0)));

42 
	$T—rDown
(cÚ¡ ::
b’chm¬k
::
S‹
&è
ov”ride
 { 
m
.
	`ş—r
(); 
	}
}

44 
	g¡d
::
m­
<, > 
	gm
;

47 
	$BENCHMARK_DEFINE_F
(
M­Fixtu»
, 
Lookup
)(
b’chm¬k
::
S‹
& 
¡©e
) {

48 cÚ¡ 
size
 = 
¡©ic_ÿ¡
<>(
¡©e
.
	`¿nge
(0));

49 autØ
_
 : 
¡©e
) {

50 
i
 = 0; i < 
size
; ++i) {

51 autØ
™
 = 
m
.
	`fšd
(
¡d
::
	`¿nd
(è% 
size
);

52 
b’chm¬k
::
	`DoNÙO±imize
(
™
);

55 
¡©e
.
	`S‘I‹msProûs£d
(¡©e.
	`™”©iÚs
(è* 
size
);

56 
	}
}

57 
BENCHMARK_REGISTER_F
(
M­Fixtu»
, 
Lookup
)->
Rªge
(1 << 3, 1 << 12);

59 
BENCHMARK_MAIN
();

	@third_party/benchmark/test/memory_manager_test.cc

1 
	~<memÜy
>

3 
	~"../¤c/check.h
"

4 
	~"b’chm¬k/b’chm¬k.h
"

5 
	~"ouut_‹¡.h
"

7 şas 
	cTe¡MemÜyMªag”
 : 
public
 
b’chm¬k
::
MemÜyMªag”
 {

8 
	$S¹
(è
ov”ride
 {}

9 
	$Stİ
(
ResuÉ
& 
»suÉ
è
ov”ride
 {

10 
»suÉ
.
num_®locs
 = 42;

11 
»suÉ
.
max_by‹s_u£d
 = 42000;

12 
	}
}

15 
	$BM_em±y
(
b’chm¬k
::
S‹
& 
¡©e
) {

16 autØ
_
 : 
¡©e
) {

17 autØ
™”©iÚs
 = 
¡©e
.
	`™”©iÚs
();

18 
b’chm¬k
::
	`DoNÙO±imize
(
™”©iÚs
);

20 
	}
}

21 
BENCHMARK
(
BM_em±y
);

23 
ADD_CASES
(
TC_CÚsŞeOut
, {{"^BM_empty %console_report$"}});

24 
ADD_CASES
(
TC_JSONOut
, {{"\"name\": \"BM_empty\",$"},

25 {"\"çmy_šdex\": 0,$", 
MR_Next
},

26 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

27 {"\"run_Çme\": \"BM_em±y\",$", 
MR_Next
},

28 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

29 {"\"»³t™iÚs\": 1,$", 
MR_Next
},

30 {"\"»³t™iÚ_šdex\": 0,$", 
MR_Next
},

31 {"\"th»ads\": 1,$", 
MR_Next
},

32 {"\"™”©iÚs\": %št,$", 
MR_Next
},

33 {"\"»®_time\": %æßt,$", 
MR_Next
},

34 {"\"ıu_time\": %æßt,$", 
MR_Next
},

35 {"\"time_un™\": \"ns\",$", 
MR_Next
},

36 {"\"®locs_³r_™”\": %æßt,$", 
MR_Next
},

37 {"\"max_by‹s_u£d\": 42000$", 
MR_Next
},

38 {"}", 
MR_Next
}});

39 
ADD_CASES
(
TC_CSVOut
, {{"^\"BM_empty\",%csv_report$"}});

41 
	$maš
(
¬gc
, * 
¬gv
[]) {

42 
¡d
::
unique_±r
<
b’chm¬k
::
MemÜyMªag”
> 
	`mm
(
Ãw
 
	`Te¡MemÜyMªag”
());

44 
b’chm¬k
::
	`Regi¡”MemÜyMªag”
(
mm
.
	`g‘
());

45 
	`RunOuutTe¡s
(
¬gc
, 
¬gv
);

46 
b’chm¬k
::
	`Regi¡”MemÜyMªag”
(
nuÎ±r
);

47 
	}
}

	@third_party/benchmark/test/min_time_parse_gtest.cc

1 
	~"../¤c/b’chm¬k_ruÂ”.h
"

2 
	~"g‹¡/g‹¡.h
"

4 
	gÇme¥aû
 {

6 
TEST
(
P¬£MšTimeTe¡
, 
Inv®idIÅut
) {

7 #ià
GTEST_HAS_DEATH_TEST


9 #iâdeà
NDEBUG


10 #iâdeà
TEST_BENCHMARK_LIBRARY_HAS_NO_ASSERTIONS


11 
ASSERT_DEATH_IF_SUPPORTED
(

12 { 
b’chm¬k
::
š‹º®
::
P¬£B’chMšTime
("abc"); },

15 
ASSERT_DEATH_IF_SUPPORTED
(

16 { 
b’chm¬k
::
š‹º®
::
P¬£B’chMšTime
("123ms"); },

19 
ASSERT_DEATH_IF_SUPPORTED
(

20 { 
b’chm¬k
::
š‹º®
::
P¬£B’chMšTime
("1z"); },

23 
ASSERT_DEATH_IF_SUPPORTED
(

24 { 
b’chm¬k
::
š‹º®
::
P¬£B’chMšTime
("1hs"); },

	@third_party/benchmark/test/multiple_ranges_test.cc

1 
	~<ÿs£¹
>

2 
	~<io¡»am
>

3 
	~<£t
>

4 
	~<veùÜ
>

6 
	~"b’chm¬k/b’chm¬k.h
"

8 şas 
	cMuÉËRªgesFixtu»
 : 
public
 ::
b’chm¬k
::
Fixtu»
 {

9 
public
:

10 
	$MuÉËRªgesFixtu»
()

11 : 
	`ex³ùedV®ues
({{1, 3, 5},

29 {7, 6, 3}}è{
	}
}

31 
	$S‘Up
(cÚ¡ ::
b’chm¬k
::
S‹
& 
¡©e
è
ov”ride
 {

32 
¡d
::
veùÜ
<
št64_t
> 
¿nges
 = {
¡©e
.
	`¿nge
(0), state.range(1),

33 
¡©e
.
	`¿nge
(2)};

35 
	`as£¹
(
ex³ùedV®ues
.
	`fšd
(
¿nges
è!ğex³ùedV®ues.
	`’d
());

37 
aùu®V®ues
.
	`š£¹
(
¿nges
);

38 
	}
}

42 ~
	$MuÉËRªgesFixtu»
(è
ov”ride
 {

43 ià(
aùu®V®ues
 !ğ
ex³ùedV®ues
) {

44 
¡d
::
cout
 << "EXPECTED\n";

45 cÚ¡‡uto& 
v
 : 
ex³ùedV®ues
) {

46 
¡d
::
cout
 << "{";

47 
št64_t
 
iv
 : 
v
) {

48 
¡d
::
cout
 << 
iv
 << ", ";

50 
¡d
::
cout
 << "}\n";

52 
¡d
::
cout
 << "ACTUAL\n";

53 cÚ¡‡uto& 
v
 : 
aùu®V®ues
) {

54 
¡d
::
cout
 << "{";

55 
št64_t
 
iv
 : 
v
) {

56 
¡d
::
cout
 << 
iv
 << ", ";

58 
¡d
::
cout
 << "}\n";

61 
	}
}

63 
	g¡d
::
£t
<
¡d
::
veùÜ
<
št64_t
>> 
ex³ùedV®ues
;

64 
	g¡d
::
£t
<
¡d
::
veùÜ
<
št64_t
>> 
aùu®V®ues
;

67 
	$BENCHMARK_DEFINE_F
(
MuÉËRªgesFixtu»
, 
Em±y
)(
b’chm¬k
::
S‹
& 
¡©e
) {

68 autØ
_
 : 
¡©e
) {

69 
št64_t
 
´oduù
 = 
¡©e
.
	`¿nge
(0) * state.range(1) * state.range(2);

70 
št64_t
 
x
 = 0; x < 
´oduù
; x++) {

71 
b’chm¬k
::
	`DoNÙO±imize
(
x
);

74 
	}
}

76 
BENCHMARK_REGISTER_F
(
MuÉËRªgesFixtu»
, 
Em±y
)

77 ->
RªgeMuÉl›r
(2)

78 ->
Rªges
({{1, 2}, {3, 7}, {5, 15}})

79 ->
Args
({7, 6, 3});

81 
	$BM_CheckDeçuÉArgum’t
(
b’chm¬k
::
S‹
& 
¡©e
) {

83 
	`as£¹
(
¡©e
.
	`¿nge
() == state.range(0));

84 
	`as£¹
(
¡©e
.
	`¿nge
() != state.range(1));

85 autØ
_
 : 
¡©e
) {

87 
	}
}

88 
BENCHMARK
(
BM_CheckDeçuÉArgum’t
)->
Rªges
({{1, 5}, {6, 10}});

90 
	$BM_MuÉËRªges
(
b’chm¬k
::
S‹
& 
¡
) {

91 autØ
_
 : 
¡
) {

93 
	}
}

94 
BENCHMARK
(
BM_MuÉËRªges
)->
Rªges
({{5, 5}, {6, 6}});

96 
BENCHMARK_MAIN
();

	@third_party/benchmark/test/options_test.cc

1 
	~<chrÚo
>

2 
	~<th»ad
>

4 
	~"b’chm¬k/b’chm¬k.h
"

6 #ià
defšed
(
NDEBUG
)

7 #undeà
NDEBUG


9 
	~<ÿs£¹
>

11 
	$BM_basic
(
b’chm¬k
::
S‹
& 
¡©e
) {

12 autØ
_
 : 
¡©e
) {

14 
	}
}

16 
	$BM_basic_¦ow
(
b’chm¬k
::
S‹
& 
¡©e
) {

17 
¡d
::
chrÚo
::
mli£cÚds
 
	`¦“p_du¿tiÚ
(
¡©e
.
	`¿nge
(0));

18 autØ
_
 : 
¡©e
) {

19 
¡d
::
this_th»ad
::
	`¦“p_fÜ
(

20 
¡d
::
chrÚo
::
du¿tiÚ_ÿ¡
<¡d::chrÚo::
Çno£cÚds
>(
¦“p_du¿tiÚ
));

22 
	}
}

24 
BENCHMARK
(
BM_basic
);

25 
BENCHMARK
(
BM_basic
)->
Arg
(42);

26 
BENCHMARK
(
BM_basic_¦ow
)->
Arg
(10)->
Un™
(
b’chm¬k
::
kNªo£cÚd
);

27 
BENCHMARK
(
BM_basic_¦ow
)->
Arg
(100)->
Un™
(
b’chm¬k
::
kMiüo£cÚd
);

28 
BENCHMARK
(
BM_basic_¦ow
)->
Arg
(1000)->
Un™
(
b’chm¬k
::
kMli£cÚd
);

29 
BENCHMARK
(
BM_basic_¦ow
)->
Arg
(1000)->
Un™
(
b’chm¬k
::
kSecÚd
);

30 
BENCHMARK
(
BM_basic
)->
Rªge
(1, 8);

31 
BENCHMARK
(
BM_basic
)->
RªgeMuÉl›r
(2)->
Rªge
(1, 8);

32 
BENCHMARK
(
BM_basic
)->
D’£Rªge
(10, 15);

33 
BENCHMARK
(
BM_basic
)->
Args
({42, 42});

34 
BENCHMARK
(
BM_basic
)->
Rªges
({{64, 512}, {64, 512}});

35 
BENCHMARK
(
BM_basic
)->
MšTime
(0.7);

36 
BENCHMARK
(
BM_basic
)->
MšW¬mUpTime
(0.8);

37 
BENCHMARK
(
BM_basic
)->
MšTime
(0.1)->
MšW¬mUpTime
(0.2);

38 
BENCHMARK
(
BM_basic
)->
U£R—lTime
();

39 
BENCHMARK
(
BM_basic
)->
Th»adRªge
(2, 4);

40 
BENCHMARK
(
BM_basic
)->
Th»adP”Cpu
();

41 
BENCHMARK
(
BM_basic
)->
R•‘™iÚs
(3);

42 
BENCHMARK
(
BM_basic
)

43 ->
RªgeMuÉl›r
(
¡d
::
num”ic_lim™s
<>::
max
())

44 ->
Rªge
(
¡d
::
num”ic_lim™s
<
št64_t
>::
mš
(),

45 
¡d
::
num”ic_lim™s
<
št64_t
>::
max
());

48 
BENCHMARK
(
BM_basic
)->
Rªge
(-64, -1);

49 
BENCHMARK
(
BM_basic
)->
RªgeMuÉl›r
(4)->
Rªge
(-8, 8);

50 
BENCHMARK
(
BM_basic
)->
D’£Rªge
(-2, 2, 1);

51 
BENCHMARK
(
BM_basic
)->
Rªges
({{-64, 1}, {-8, -1}});

53 
	$Cu¡omArgs
(
b’chm¬k
::
š‹º®
::
B’chm¬k
* 
b
) {

54 
i
 = 0; i < 10; ++i) {

55 
b
->
	`Arg
(
i
);

57 
	}
}

59 
BENCHMARK
(
BM_basic
)->
Aµly
(
Cu¡omArgs
);

61 
	$BM_ex¶ic™_™”©iÚ_couÁ
(
b’chm¬k
::
S‹
& 
¡©e
) {

64 
boŞ
 
švoked_befÜe
 = 
çl£
;

65 
	`as£¹
(!
švoked_befÜe
);

66 
švoked_befÜe
 = 
Œue
;

69 
	`as£¹
(
¡©e
.
max_™”©iÚs
 == 42);

70 autØ
_
 : 
¡©e
) {

72 
	`as£¹
(
¡©e
.
	`™”©iÚs
(è=ğ¡©e.
max_™”©iÚs
);

73 
	`as£¹
(
¡©e
.
	`™”©iÚs
() == 42);

74 
	}
}

75 
BENCHMARK
(
BM_ex¶ic™_™”©iÚ_couÁ
)->
I‹¿tiÚs
(42);

77 
BENCHMARK_MAIN
();

	@third_party/benchmark/test/output_test.h

1 #iâdeà
TEST_OUTPUT_TEST_H


2 
	#TEST_OUTPUT_TEST_H


	)

4 #undeà
NDEBUG


5 
	~<funùiÚ®
>

6 
	~<š™Ÿliz”_li¡
>

7 
	~<memÜy
>

8 
	~<s¡»am
>

9 
	~<¡ršg
>

10 
	~<ut™y
>

11 
	~<veùÜ
>

13 
	~"../¤c/».h
"

14 
	~"b’chm¬k/b’chm¬k.h
"

16 
	#CONCAT2
(
x
, 
y
èx##
	)
y

17 
	#CONCAT
(
x
, 
y
è
	`CONCAT2
(x, y)

	)

19 
	#ADD_CASES
(...è
	`CONCAT
(
dummy
, 
__LINE__
èğ::
	`AddCa£s
(
__VA_ARGS__
)

	)

21 
	#SET_SUBSTITUTIONS
(...) \

22 
	`CONCAT
(
dummy
, 
__LINE__
èğ::
	`S‘Sub¡™utiÚs
(
__VA_ARGS__
)

	)

24 
	eM©chRuËs
 {

25 
	mMR_DeçuÉ
,

26 
	mMR_Next
,

27 
	mMR_NÙ


31 
	sTe¡Ca£
 {

32 
Te¡Ca£
(
¡d
::
¡ršg
 
»
, 
ruË
 = 
MR_DeçuÉ
);

34 
	m¡d
::
¡ršg
 
»gex_¡r
;

35 
	mm©ch_ruË
;

36 
	m¡d
::
¡ršg
 
sub¡™u‹d_»gex
;

37 
	m¡d
::
sh¬ed_±r
<
b’chm¬k
::
Regex
> 
»gex
;

40 
	eTe¡Ca£ID
 {

41 
	mTC_CÚsŞeOut
,

42 
	mTC_CÚsŞeE¼
,

43 
	mTC_JSONOut
,

44 
	mTC_JSONE¼
,

45 
	mTC_CSVOut
,

46 
	mTC_CSVE¼
,

48 
	mTC_NumID


53 
AddCa£s
(
Te¡Ca£ID
 
ID
, 
¡d
::
š™Ÿliz”_li¡
<
Te¡Ca£
> 

);

57 
S‘Sub¡™utiÚs
(

58 
¡d
::
š™Ÿliz”_li¡
<¡d::
·œ
<¡d::
¡ršg
, std::¡ršg>> 

);

61 
RunOuutTe¡s
(
¬gc
, * 
¬gv
[]);

64 
Sub¡rCÁ
(cÚ¡ 
¡d
::
¡ršg
& 
hay¡ack
, cÚ¡ std::¡ršg& 
·t
);

68 
	g¡d
::
¡ršg
 
G‘FeR•Ü‹rOuut
(
¬gc
, * 
¬gv
[]);

82 
	#CHECK_BENCHMARK_RESULTS
(
bm_Çme_·‰”n
, 
check”_funùiÚ
) \

83 
size_t
 
	`CONCAT
(
dummy
, 
__LINE__
èğ
	`AddCheck”
(
bm_Çme_·‰”n
, 
check”_funùiÚ
)

	)

85 
	gResuÉs
;

86 
	g¡d
::
	tfunùiÚ
<(
	tResuÉs
 cÚ¡&)> 
	tResuÉsCheckFn
;

88 
size_t
 
AddCheck”
(cÚ¡ 
¡d
::
¡ršg
& 
bm_Çme_·‰”n
, cÚ¡ 
ResuÉsCheckFn
& 
â
);

92 
	sResuÉs
 {

94 
	m¡d
::
¡ršg
 
Çme
;

96 
	m¡d
::
m­
<
¡d
::
¡ršg
, std::¡ršg> 
v®ues
;

98 
ResuÉs
(cÚ¡ 
¡d
::
¡ršg
& 
n
è: 
Çme
(n) {}

100 
NumTh»ads
() const;

102 
NumI‹¿tiÚs
() const;

104 ’um { 
	mkCpuTime
, 
	mkR—lTime
 } 
	tB’chm¬kTime
;

107 
G‘Time
(
B’chm¬kTime
 
which
) const;

112 
Du¿tiÚR—lTime
() const {

113  
NumI‹¿tiÚs
(è* 
G‘Time
(
kR—lTime
);

116 
Du¿tiÚCPUTime
(ècÚ¡ {  
NumI‹¿tiÚs
(è* 
G‘Time
(
kCpuTime
); }

120 cÚ¡ 
	m¡d
::
¡ršg
* 
G‘
(cÚ¡ 
¡d
::¡ršg& 
’Œy_Çme
) const {

121 autØ
™
 = 
v®ues
.
fšd
(
’Œy_Çme
);

122 ià(
	m™
 =ğ
v®ues
.
’d
()è 
nuÎ±r
;

123  &
	m™
->
	m£cÚd
;

128 
	m‹m¶©e
 <
şass
 
	mT
>

129 
T
 
G‘As
(cÚ¡ 
¡d
::
¡ršg
& 
’Œy_Çme
) const;

133 
	m‹m¶©e
 <
şass
 
	mT
>

134 
T
 
G‘CouÁ”As
(cÚ¡ 
¡d
::
¡ršg
& 
’Œy_Çme
) const {

135 
dv®
 = 
G‘As
<>(
’Œy_Çme
);

136 
T
 
	mtv®
 = 
¡©ic_ÿ¡
<T>(
dv®
);

137  
	mtv®
;

141 
	g‹m¶©e
 <
şass
 
	gT
>

142 
T
 
	gResuÉs
::
	$G‘As
(cÚ¡ 
¡d
::
¡ršg
& 
’Œy_Çme
) const {

143 auto* 
sv
 = 
	`G‘
(
’Œy_Çme
);

144 
	`BM_CHECK
(
sv
 !ğ
nuÎ±r
 && !sv->
	`em±y
());

145 
¡d
::
¡ršg¡»am
 
ss
;

146 
ss
 << *
sv
;

147 
T
 
out
;

148 
ss
 >> 
out
;

149 
	`BM_CHECK
(!
ss
.
	`ç
());

150  
out
;

151 
	}
}

159 
	#CHECK_RESULT_VALUE_IMPL
(
’Œy
, 
g‘â
, 
v¬_ty³
, 
v¬_Çme
, 
»ÏtiÚsh
, 
v®ue
) \

160 
	`CONCAT
(
BM_CHECK_
, 
»ÏtiÚsh
) \

161 (
’Œy
.
g‘â
< 
v¬_ty³
 >(
v¬_Çme
), (
v®ue
)) << "\n" \

162 << 
__FILE__
 << ":" << 
__LINE__
 << ": " << (
’Œy
).
Çme
 << ":\n" \

163 << 
__FILE__
 << ":" << 
__LINE__
 << ": " \

164 << "ex³ùed (" << #v¬_ty³ << ")" << (
v¬_Çme
) \

165 << "=" << (
’Œy
).
g‘â
< 
v¬_ty³
 >(
v¬_Çme
) \

166 << "Øb" #»ÏtiÚsh "Ø" << (
v®ue
è<< "\n"

	)

170 
	#CHECK_FLOAT_RESULT_VALUE_IMPL
(
’Œy
, 
g‘â
, 
v¬_ty³
, 
v¬_Çme
, 
»ÏtiÚsh
, 
v®ue
, 
•s_çùÜ
) \

171 
	`CONCAT
(
BM_CHECK_FLOAT_
, 
»ÏtiÚsh
) \

172 (
’Œy
.
g‘â
< 
v¬_ty³
 >(
v¬_Çme
), (
v®ue
), (
•s_çùÜ
) * (value)) << "\n" \

173 << 
__FILE__
 << ":" << 
__LINE__
 << ": " << (
’Œy
).
Çme
 << ":\n" \

174 << 
__FILE__
 << ":" << 
__LINE__
 << ": " \

175 << "ex³ùed (" << #v¬_ty³ << ")" << (
v¬_Çme
) \

176 << "=" << (
’Œy
).
g‘â
< 
v¬_ty³
 >(
v¬_Çme
) \

177 << "Øb" #»ÏtiÚsh "Ø" << (
v®ue
) << "\n" \

178 << 
__FILE__
 << ":" << 
__LINE__
 << ": " \

179 << "w™hŞ”ªû oà" << (
•s_çùÜ
è* (
v®ue
) \

180 << " (" << (
•s_çùÜ
)*100. << "%), " \

181 << "buˆd– wa " << ((
’Œy
).
g‘â
< 
v¬_ty³
 >(
v¬_Çme
è- (
v®ue
)) \

182 << " (" << (((
’Œy
).
g‘â
< 
v¬_ty³
 >(
v¬_Çme
è- (
v®ue
)) \

184 ((
v®ue
) > 1.e-5 || value < -1.e-5 ? value : 1.e-5)*100.) \

185 << "%)"

	)

187 
	#CHECK_RESULT_VALUE
(
’Œy
, 
v¬_ty³
, 
v¬_Çme
, 
»ÏtiÚsh
, 
v®ue
) \

188 
	`CHECK_RESULT_VALUE_IMPL
(
’Œy
, 
G‘As
, 
v¬_ty³
, 
v¬_Çme
, 
»ÏtiÚsh
, 
v®ue
)

	)

190 
	#CHECK_COUNTER_VALUE
(
’Œy
, 
v¬_ty³
, 
v¬_Çme
, 
»ÏtiÚsh
, 
v®ue
) \

191 
	`CHECK_RESULT_VALUE_IMPL
(
’Œy
, 
G‘CouÁ”As
, 
v¬_ty³
, 
v¬_Çme
, 
»ÏtiÚsh
, 
v®ue
)

	)

193 
	#CHECK_FLOAT_RESULT_VALUE
(
’Œy
, 
v¬_Çme
, 
»ÏtiÚsh
, 
v®ue
, 
•s_çùÜ
) \

194 
	`CHECK_FLOAT_RESULT_VALUE_IMPL
(
’Œy
, 
G‘As
, , 
v¬_Çme
, 
»ÏtiÚsh
, 
v®ue
, 
•s_çùÜ
)

	)

196 
	#CHECK_FLOAT_COUNTER_VALUE
(
’Œy
, 
v¬_Çme
, 
»ÏtiÚsh
, 
v®ue
, 
•s_çùÜ
) \

197 
	`CHECK_FLOAT_RESULT_VALUE_IMPL
(
’Œy
, 
G‘CouÁ”As
, , 
v¬_Çme
, 
»ÏtiÚsh
, 
v®ue
, 
•s_çùÜ
)

	)

205 
	gÇme¥aû
 {

207 cÚ¡ * cÚ¡ 
	gdec_»
 = "[0-9]*[.]?[0-9]+([eE][-+][0-9]+)?";

	@third_party/benchmark/test/output_test_helper.cc

1 
	~<c¡dio
>

2 
	~<c¡ršg
>

3 
	~<f¡»am
>

4 
	~<io¡»am
>

5 
	~<m­
>

6 
	~<memÜy
>

7 
	~<¿ndom
>

8 
	~<s¡»am
>

9 
	~<¡»ambuf
>

11 
	~"../¤c/b’chm¬k_­i_š‹º®.h
"

12 
	~"../¤c/check.h
"

13 
	~"../¤c/log.h
"

14 
	~"../¤c/».h
"

15 
	~"ouut_‹¡.h
"

20 
Çme¥aû
 
	gš‹º®
 {

21 
	gÇme¥aû
 {

23 
usšg
 
	gTe¡Ca£Li¡
 = 
¡d
::
veùÜ
<
Te¡Ca£
>;

30 
usšg
 
	gSubM­
 = 
¡d
::
veùÜ
<¡d::
·œ
<¡d::
¡ršg
, 
	g¡d
::string>>;

32 
	gTe¡Ca£Li¡
& 
G‘Te¡Ca£Li¡
(
Te¡Ca£ID
 
ID
) {

35 
Te¡Ca£Li¡
 
	gli¡s
[
TC_NumID
];

36  
	gli¡s
[
ID
];

39 
	gSubM­
& 
G‘Sub¡™utiÚs
() {

42 
	g¡d
::
¡ršg
 
§ã_dec_»
 = "[0-9]*[.]?[0-9]+([eE][-+][0-9]+)?";

43 
	g¡d
::
¡ršg
 
time_»
 = "([0-9]+[.])?[0-9]+";

44 
	g¡d
::
¡ršg
 
³rûÁage_»
 = "[0-9]+[.][0-9]{2}";

45 
SubM­
 
	gm­
 = {

49 {"%³rûÁage", 
³rûÁage_»
},

52 {"%time", "[ ]*" + 
time_»
 + "[ ]+ns"},

53 {"%cÚsŞe_»pÜt", "[ ]*" + 
time_»
 + "[ ]+ns [ ]*" +ime_re + "[ ]+ns [ ]*[0-9]+"},

54 {"%cÚsŞe_³rûÁage_»pÜt", "[ ]*" + 
³rûÁage_»
 + "[ ]+% [ ]*" +…ercentage_re + "[ ]+% [ ]*[0-9]+"},

55 {"%cÚsŞe_us_»pÜt", "[ ]*" + 
time_»
 + "[ ]+us [ ]*" +ime_re + "[ ]+us [ ]*[0-9]+"},

56 {"%cÚsŞe_ms_»pÜt", "[ ]*" + 
time_»
 + "[ ]+ms [ ]*" +ime_re + "[ ]+ms [ ]*[0-9]+"},

57 {"%cÚsŞe_s_»pÜt", "[ ]*" + 
time_»
 + "[ ]+s [ ]*" +ime_re + "[ ]+s [ ]*[0-9]+"},

58 {"%cÚsŞe_time_Úly_»pÜt", "[ ]*" + 
time_»
 + "[ ]+ns [ ]*" +ime_re + "[ ]+ns"},

59 {"%cÚsŞe_us_»pÜt", "[ ]*" + 
time_»
 + "[ ]+us [ ]*" +ime_re + "[ ]+us [ ]*[0-9]+"},

60 {"%cÚsŞe_us_time_Úly_»pÜt", "[ ]*" + 
time_»
 + "[ ]+us [ ]*" +ime_re + "[ ]+us"},

64 {"%csv_»pÜt", "[0-9]+," + 
§ã_dec_»
 + "," + safe_dec_re + ",ns,,,,,"},

65 {"%csv_us_»pÜt", "[0-9]+," + 
§ã_dec_»
 + "," + safe_dec_re + ",us,,,,,"},

66 {"%csv_ms_»pÜt", "[0-9]+," + 
§ã_dec_»
 + "," + safe_dec_re + ",ms,,,,,"},

67 {"%csv_s_»pÜt", "[0-9]+," + 
§ã_dec_»
 + "," + safe_dec_re + ",s,,,,,"},

69 "[0-9]+," + 
§ã_dec_»
 + "," + safe_dec_re + ",ns," + safe_dec_re + ",,,,"},

71 "[0-9]+," + 
§ã_dec_»
 + "," + safe_dec_re + ",ns,," + safe_dec_re + ",,,"},

73 "[0-9]+," + 
§ã_dec_»
 + "," + safe_dec_re + ",ns," + safe_dec_re +

74 "," + 
§ã_dec_»
 + ",,,"},

75 {"%csv_Ïb–_»pÜt_begš", "[0-9]+," + 
§ã_dec_»
 + "," + safe_dec_re + ",ns,,,"},

78  
	gm­
;

81 
	g¡d
::
¡ršg
 
P”fÜmSub¡™utiÚs
(
¡d
::¡ršg 
sourû
) {

82 
SubM­
 cÚ¡& 
subs
 = 
G‘Sub¡™utiÚs
();

83 
usšg
 
	gSizeT
 = 
¡d
::
¡ršg
::
size_ty³
;

84 autØcÚ¡& 
	gKV
 : 
subs
) {

85 
SizeT
 
pos
;

86 
SizeT
 
	gÃxt_¡¬t
 = 0;

87 (
	gpos
 = 
sourû
.
fšd
(
KV
.
fœ¡
, 
Ãxt_¡¬t
)è!ğ
¡d
::
¡ršg
::
Åos
) {

88 
Ãxt_¡¬t
 = 
pos
 + 
KV
.
£cÚd
.
size
();

89 
	gsourû
.
»¶aû
(
pos
, 
KV
.
fœ¡
.
size
(), KV.
£cÚd
);

92  
	gsourû
;

95 
CheckCa£
(
¡d
::
¡ršg¡»am
& 
»maššg_ouut
, 
Te¡Ca£
 cÚ¡& 
TC
,

96 
Te¡Ca£Li¡
 cÚ¡& 
nÙ_checks
) {

97 
	g¡d
::
¡ršg
 
fœ¡_lše
;

98 
boŞ
 
	gÚ_fœ¡
 = 
Œue
;

99 
	g¡d
::
¡ršg
 
lše
;

100 
	g»maššg_ouut
.
eof
(è=ğ
çl£
) {

101 
BM_CHECK
(
»maššg_ouut
.
good
());

102 
	g¡d
::
g‘lše
(
»maššg_ouut
, 
lše
);

103 ià(
	gÚ_fœ¡
) {

104 
	gfœ¡_lše
 = 
lše
;

105 
	gÚ_fœ¡
 = 
çl£
;

107 cÚ¡‡uto& 
	gNC
 : 
nÙ_checks
) {

108 
BM_CHECK
(!
NC
.
»gex
->
M©ch
(
lše
))

109 << "UÃx³ùed m©ch fÜ†š\"" << 
lše
 << "\" for MR_Not„egex \""

110 << 
NC
.
»gex_¡r
 << "\""

111 << "\À‡ùu®„egex sŒšg \"" << 
TC
.
sub¡™u‹d_»gex
 << "\""

112 << "\À s¹ed m©chšg‚—r: " << 
fœ¡_lše
;

114 ià(
	gTC
.
	g»gex
->
M©ch
(
lše
)) ;

115 
BM_CHECK
(
TC
.
m©ch_ruË
 !ğ
MR_Next
)

116 << "Ex³ùed†š\"" << 
lše
 << "\"Øm©ch„egex \"" << 
TC
.
»gex_¡r


118 << "\À‡ùu®„egex sŒšg \"" << 
TC
.
sub¡™u‹d_»gex
 << "\""

119 << "\À s¹ed m©chšg‚—r: " << 
fœ¡_lše
;

121 
BM_CHECK
(
»maššg_ouut
.
eof
(è=ğ
çl£
)

122 << "End oàouuˆ»ached befÜm©ch fÜ„egex \"" << 
TC
.
»gex_¡r


124 << "\À‡ùu®„egex sŒšg \"" << 
TC
.
sub¡™u‹d_»gex
 << "\""

125 << "\À s¹ed m©chšg‚—r: " << 
fœ¡_lše
;

128 
CheckCa£s
(
Te¡Ca£Li¡
 cÚ¡& 
checks
, 
¡d
::
¡ršg¡»am
& 
ouut
) {

129 
¡d
::
veùÜ
<
Te¡Ca£
> 
nÙ_checks
;

130 
size_t
 
	gi
 = 0; i < 
	gchecks
.
size
(); ++i) {

131 cÚ¡‡uto& 
	gTC
 = 
checks
[
i
];

132 ià(
	gTC
.
	gm©ch_ruË
 =ğ
MR_NÙ
) {

133 
nÙ_checks
.
push_back
(
TC
);

136 
CheckCa£
(
ouut
, 
TC
, 
nÙ_checks
);

137 
	gnÙ_checks
.
ş—r
();

141 şas 
	cTe¡R•Ü‹r
 : 
public
 
b’chm¬k
::
B’chm¬kR•Ü‹r
 {

142 
public
:

143 
Te¡R•Ü‹r
(
¡d
::
veùÜ
<
b’chm¬k
::
B’chm¬kR•Ü‹r
*> 
»ps
)

144 : 
»pÜ‹rs_
(
¡d
::
move
(
»ps
)) {}

146 
boŞ
 
R•ÜtCÚ‹xt
(cÚ¡ 
CÚ‹xt
& 
cÚ‹xt
è
ov”ride
 {

147 
boŞ
 
Ï¡_»t
 = 
çl£
;

148 
boŞ
 
	gfœ¡
 = 
Œue
;

149 autØ
	g»p
 : 
»pÜ‹rs_
) {

150 
boŞ
 
Ãw_»t
 = 
»p
->
R•ÜtCÚ‹xt
(
cÚ‹xt
);

151 
BM_CHECK
(
fœ¡
 || 
Ãw_»t
 =ğ
Ï¡_»t
)

153 
	gfœ¡
 = 
çl£
;

154 
	gÏ¡_»t
 = 
Ãw_»t
;

156 ()
	gfœ¡
;

157  
	gÏ¡_»t
;

160 
R•ÜtRuns
(cÚ¡ 
¡d
::
veùÜ
<
Run
>& 
»pÜt
è
ov”ride
 {

161 autØ
»p
 : 
»pÜ‹rs_
è»p->
R•ÜtRuns
(
»pÜt
);

163 
Fš®ize
(è
	gov”ride
 {

164 autØ
	g»p
 : 
»pÜ‹rs_
è
»p
->
Fš®ize
();

167 
	g´iv©e
:

168 
¡d
::
veùÜ
<
b’chm¬k
::
B’chm¬kR•Ü‹r
*> 
»pÜ‹rs_
;

178 
Çme¥aû
 
	gš‹º®
 {

182 şas 
	cResuÉsCheck”
 {

183 
	gpublic
:

184 
P©‹ºAndFn
 : 
public
 
Te¡Ca£
 {

185 
P©‹ºAndFn
(cÚ¡ 
¡d
::
¡ršg
& 
rx
, 
ResuÉsCheckFn
 
â_
)

186 : 
Te¡Ca£
(
rx
), 
â
(
¡d
::
move
(
â_
)) {}

187 
ResuÉsCheckFn
 
â
;

190 
	g¡d
::
veùÜ
<
P©‹ºAndFn
> 
check_·‰”ns
;

191 
	g¡d
::
veùÜ
<
ResuÉs
> 
»suÉs
;

192 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> 
f›ld_Çmes
;

194 
Add
(cÚ¡ 
¡d
::
¡ršg
& 
’Œy_·‰”n
, cÚ¡ 
ResuÉsCheckFn
& 
â
);

196 
CheckResuÉs
(
¡d
::
¡ršg¡»am
& 
ouut
);

198 
	g´iv©e
:

199 
S‘H—d”_
(cÚ¡ 
¡d
::
¡ršg
& 
csv_h—d”
);

200 
S‘V®ues_
(cÚ¡ 
¡d
::
¡ršg
& 
’Œy_csv_lše
);

202 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> 
S¶™Csv_
(cÚ¡ std::¡ršg& 
lše
);

207 
	gResuÉsCheck”
& 
	$G‘ResuÉsCheck”
() {

208 
ResuÉsCheck”
 
rc
;

209  
rc
;

210 
	}
}

213 
	gResuÉsCheck”
::
	$Add
(cÚ¡ 
¡d
::
¡ršg
& 
’Œy_·‰”n
,

214 cÚ¡ 
ResuÉsCheckFn
& 
â
) {

215 
check_·‰”ns
.
	`em¶aû_back
(
’Œy_·‰”n
, 
â
);

216 
	}
}

219 
	gResuÉsCheck”
::
	$CheckResuÉs
(
¡d
::
¡ršg¡»am
& 
ouut
) {

222 autØ
¡¬t
 = 
¡d
::
¡ršg¡»am
::
	`pos_ty³
(0);

224 
ouut
.
	`ş—r
();

226 ià(
ouut
.
	`‹Îg
(è> 
¡¬t
èouut.
	`£ekg
(start);

228 
ouut
.
	`ş—r
();

231 
¡d
::
¡ršg
 
lše
;

232 
boŞ
 
Ú_fœ¡
 = 
Œue
;

233 
ouut
.
	`eof
(è=ğ
çl£
) {

234 
	`BM_CHECK
(
ouut
.
	`good
());

235 
¡d
::
	`g‘lše
(
ouut
, 
lše
);

236 ià(
Ú_fœ¡
) {

237 
	`S‘H—d”_
(
lše
);

238 
Ú_fœ¡
 = 
çl£
;

241 
	`S‘V®ues_
(
lše
);

244 cÚ¡‡uto& 
p
 : 
check_·‰”ns
) {

245 
	`BM_VLOG
(2) << "--------------------------------\n";

246 
	`BM_VLOG
(2è<< "checkšg fÜ b’chm¬k m©chšg " << 
p
.
»gex_¡r
 << "...\n";

247 cÚ¡‡uto& 
r
 : 
»suÉs
) {

248 ià(!
p
.
»gex
->
	`M©ch
(
r
.
Çme
)) {

249 
	`BM_VLOG
(2è<< 
p
.
»gex_¡r
 << " i nÙ m©ched by " << 
r
.
Çme
 << "\n";

252 
	`BM_VLOG
(2è<< 
p
.
»gex_¡r
 << " i m©ched by " << 
r
.
Çme
 << "\n";

253 
	`BM_VLOG
(1è<< "Checkšg„esuÉ oà" << 
r
.
Çme
 << ": ... \n";

254 
p
.
	`â
(
r
);

255 
	`BM_VLOG
(1è<< "Checkšg„esuÉ oà" << 
r
.
Çme
 << ": OK.\n";

258 
	}
}

261 
	gResuÉsCheck”
::
	$S‘H—d”_
(cÚ¡ 
¡d
::
¡ršg
& 
csv_h—d”
) {

262 
f›ld_Çmes
 = 
	`S¶™Csv_
(
csv_h—d”
);

263 
	}
}

266 
	gResuÉsCheck”
::
	$S‘V®ues_
(cÚ¡ 
¡d
::
¡ršg
& 
’Œy_csv_lše
) {

267 ià(
’Œy_csv_lše
.
	`em±y
()) ;

268 
	`BM_CHECK
(!
f›ld_Çmes
.
	`em±y
());

269 autØ
v®s
 = 
	`S¶™Csv_
(
’Œy_csv_lše
);

270 
	`BM_CHECK_EQ
(
v®s
.
	`size
(), 
f›ld_Çmes
.size());

271 
»suÉs
.
	`em¶aû_back
(
v®s
[0]);

272 auto& 
’Œy
 = 
»suÉs
.
	`back
();

273 
size_t
 
i
 = 1, 
e
 = 
v®s
.
	`size
(); i <ƒ; ++i) {

274 
’Œy
.
v®ues
[
f›ld_Çmes
[
i
]] = 
v®s
[i];

276 
	}
}

279 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> 
ResuÉsCheck”
::
	$S¶™Csv_
(cÚ¡ 
¡d
::
¡ršg
& 
lše
) {

280 
¡d
::
veùÜ
<¡d::
¡ršg
> 
out
;

281 ià(
lše
.
	`em±y
()è 
out
;

282 ià(!
f›ld_Çmes
.
	`em±y
()è
out
.
	`»£rve
(f›ld_Çmes.
	`size
());

283 
size_t
 
´ev
 = 0, 
pos
 = 
lše
.
	`fšd_fœ¡_of
(','), 
cu¼
 =…os;

284 
pos
 !ğ
lše
.
Åos
) {

285 
	`BM_CHECK
(
cu¼
 > 0);

286 ià(
lše
[
´ev
] == '"') ++prev;

287 ià(
lše
[
cu¼
 - 1] == '"') --curr;

288 
out
.
	`push_back
(
lše
.
	`sub¡r
(
´ev
, 
cu¼
 -…rev));

289 
´ev
 = 
pos
 + 1;

290 
pos
 = 
lše
.
	`fšd_fœ¡_of
(',',…os + 1);

291 
cu¼
 = 
pos
;

293 
cu¼
 = 
lše
.
	`size
();

294 ià(
lše
[
´ev
] == '"') ++prev;

295 ià(
lše
[
cu¼
 - 1] == '"') --curr;

296 
out
.
	`push_back
(
lše
.
	`sub¡r
(
´ev
, 
cu¼
 -…rev));

297  
out
;

298 
	}
}

302 
size_t
 
	$AddCheck”
(cÚ¡ 
¡d
::
¡ršg
& 
bm_Çme
, cÚ¡ 
ResuÉsCheckFn
& 
â
) {

303 auto& 
rc
 = 
š‹º®
::
	`G‘ResuÉsCheck”
();

304 
rc
.
	`Add
(
bm_Çme
, 
â
);

305  
rc
.
»suÉs
.
	`size
();

306 
	}
}

308 
	gResuÉs
::
	$NumTh»ads
() const {

309 autØ
pos
 = 
Çme
.
	`fšd
("/threads:");

310 ià(
pos
 =ğ
Çme
.
Åos
)  1;

311 autØ
’d
 = 
Çme
.
	`fšd
('/', 
pos
 + 9);

312 
¡d
::
¡ršg¡»am
 
ss
;

313 
ss
 << 
Çme
.
	`sub¡r
(
pos
 + 9, 
’d
);

314 
num
 = 1;

315 
ss
 >> 
num
;

316 
	`BM_CHECK
(!
ss
.
	`ç
());

317  
num
;

318 
	}
}

320 
	gResuÉs
::
	$NumI‹¿tiÚs
(ècÚ¡ {  
G‘As
<>("™”©iÚs"); 
	}
}

322 
	gResuÉs
::
	$G‘Time
(
B’chm¬kTime
 
which
) const {

323 
	`BM_CHECK
(
which
 =ğ
kCpuTime
 || which =ğ
kR—lTime
);

324 cÚ¡ * 
which_¡r
 = 
which
 =ğ
kCpuTime
 ? "cpu_time" : "real_time";

325 
v®
 = 
G‘As
<>(
which_¡r
);

326 autØ
un™
 = 
	`G‘
("time_unit");

327 
	`BM_CHECK
(
un™
);

328 ià(*
un™
 == "ns") {

329  
v®
 * 1.e-9;

331 ià(*
un™
 == "us") {

332  
v®
 * 1.e-6;

334 ià(*
un™
 == "ms") {

335  
v®
 * 1.e-3;

337 ià(*
un™
 == "s") {

338  
v®
;

340 
	`BM_CHECK
(1 =ğ0è<< "unknowÀtimun™: " << *
un™
;

342 
	}
}

348 
	gTe¡Ca£
::
	$Te¡Ca£
(
¡d
::
¡ršg
 
»
, 
ruË
)

349 : 
	`»gex_¡r
(
¡d
::
	`move
(
»
)),

350 
	`m©ch_ruË
(
ruË
),

351 
	`sub¡™u‹d_»gex
(
š‹º®
::
	`P”fÜmSub¡™utiÚs
(
»gex_¡r
)),

352 
	`»gex
(
¡d
::
make_sh¬ed
<
b’chm¬k
::
Regex
>()) {

353 
¡d
::
¡ršg
 
”r_¡r
;

354 
»gex
->
	`In™
(
sub¡™u‹d_»gex
, &
”r_¡r
);

355 
	`BM_CHECK
(
”r_¡r
.
	`em±y
())

356 << "Could‚Ù cÚ¡ruù„egex \"" << 
sub¡™u‹d_»gex
 << "\""

357 << "\À origš®ly \"" << 
»gex_¡r
 << "\""

358 << "\À gÙƒ¼Ü: " << 
”r_¡r
;

359 
	}
}

361 
AddCa£s
(
Te¡Ca£ID
 
ID
, 
¡d
::
š™Ÿliz”_li¡
<
Te¡Ca£
> 

) {

362 auto& 
L
 = 
š‹º®
::
G‘Te¡Ca£Li¡
(
ID
);

363 
	gL
.
š£¹
(
L
.
’d
(), 

);

367 
S‘Sub¡™utiÚs
(

368 
¡d
::
š™Ÿliz”_li¡
<¡d::
·œ
<¡d::
¡ršg
, std::¡ršg>> 

) {

369 auto& 
subs
 = 
š‹º®
::
G‘Sub¡™utiÚs
();

370 autØ
	gKV
 : 

) {

371 
boŞ
 
exi¡s
 = 
çl£
;

372 
	gKV
.
	g£cÚd
 = 
š‹º®
::
P”fÜmSub¡™utiÚs
(
KV
.
£cÚd
);

373 auto& 
	gEKV
 : 
subs
) {

374 ià(
EKV
.
fœ¡
 =ğ
KV
.first) {

375 
EKV
.
£cÚd
 = 
¡d
::
move
(
KV
.second);

376 
	gexi¡s
 = 
Œue
;

380 ià(!
	gexi¡s
è
	gsubs
.
push_back
(
¡d
::
move
(
KV
));

387 
BENCHMARK_DISABLE_DEPRECATED_WARNING


389 
	$RunOuutTe¡s
(
¬gc
, * 
¬gv
[]) {

390 
usšg
 
š‹º®
::
G‘Te¡Ca£Li¡
;

391 
b’chm¬k
::
	`In™Ÿlize
(&
¬gc
, 
¬gv
);

392 autØ
İtiÚs
 = 
b’chm¬k
::
š‹º®
::
	`G‘OuutO±iÚs
Ğ
Œue
);

393 
b’chm¬k
::
CÚsŞeR•Ü‹r
 
	`CR
(
İtiÚs
);

394 
b’chm¬k
::
JSONR•Ü‹r
 
JR
;

395 
b’chm¬k
::
CSVR•Ü‹r
 
CSVR
;

396 
	sR•Ü‹rTe¡
 {

397 
¡d
::
¡ršg
 
Çme
;

398 
¡d
::
veùÜ
<
Te¡Ca£
>& 
ouut_ÿ£s
;

399 
¡d
::
veùÜ
<
Te¡Ca£
>& 
”rÜ_ÿ£s
;

400 
b’chm¬k
::
B’chm¬kR•Ü‹r
& 
»pÜ‹r
;

401 
¡d
::
¡ršg¡»am
 
out_¡»am
;

402 
¡d
::
¡ršg¡»am
 
”r_¡»am
;

404 
	`R•Ü‹rTe¡
(cÚ¡ 
¡d
::
¡ršg
& 
n
, std::
veùÜ
<
Te¡Ca£
>& 
out_tc
,

405 
¡d
::
veùÜ
<
Te¡Ca£
>& 
”r_tc
,

406 
b’chm¬k
::
B’chm¬kR•Ü‹r
& 
br
)

407 : 
	`Çme
(
n
), 
	`ouut_ÿ£s
(
out_tc
), 
	`”rÜ_ÿ£s
(
”r_tc
), 
	`»pÜ‹r
(
br
) {

408 
»pÜ‹r
.
	`S‘OuutSŒ—m
(&
out_¡»am
);

409 
»pÜ‹r
.
	`S‘E¼ÜSŒ—m
(&
”r_¡»am
);

411 } 
Te¡Ca£s
[] = {

412 {
¡d
::
	`¡ršg
("CÚsŞeR•Ü‹r"), 
	`G‘Te¡Ca£Li¡
(
TC_CÚsŞeOut
),

413 
	`G‘Te¡Ca£Li¡
(
TC_CÚsŞeE¼
), 
CR
},

414 {
¡d
::
	`¡ršg
("JSONR•Ü‹r"), 
	`G‘Te¡Ca£Li¡
(
TC_JSONOut
),

415 
	`G‘Te¡Ca£Li¡
(
TC_JSONE¼
), 
JR
},

416 {
¡d
::
	`¡ršg
("CSVR•Ü‹r"), 
	`G‘Te¡Ca£Li¡
(
TC_CSVOut
),

417 
	`G‘Te¡Ca£Li¡
(
TC_CSVE¼
), 
CSVR
},

421 
¡d
::
cout
 << "Running benchmarks...\n";

422 
š‹º®
::
Te¡R•Ü‹r
 
	`‹¡_»p
({&
CR
, &
JR
, &
CSVR
});

423 
b’chm¬k
::
	`RunS³cif›dB’chm¬ks
(&
‹¡_»p
);

425 auto& 
»p_‹¡
 : 
Te¡Ca£s
) {

426 
¡d
::
¡ršg
 
msg
 =

427 
¡d
::
	`¡ršg
("\nTe¡šg "è+ 
»p_‹¡
.
Çme
 + std::string(" Output\n");

428 
¡d
::
¡ršg
 
	`bªÃr
(
msg
.
	`size
() - 1, '-');

429 
¡d
::
cout
 << 
bªÃr
 << 
msg
 << banner << "\n";

431 
¡d
::
û¼
 << 
»p_‹¡
.
”r_¡»am
.
	`¡r
();

432 
¡d
::
cout
 << 
»p_‹¡
.
out_¡»am
.
	`¡r
();

434 
š‹º®
::
	`CheckCa£s
(
»p_‹¡
.
”rÜ_ÿ£s
,„•_‹¡.
”r_¡»am
);

435 
š‹º®
::
	`CheckCa£s
(
»p_‹¡
.
ouut_ÿ£s
,„•_‹¡.
out_¡»am
);

437 
¡d
::
cout
 << "\n";

442 auto& 
csv
 = 
Te¡Ca£s
[2];

444 
	`BM_CHECK
(
csv
.
Çme
 =ğ
¡d
::
	`¡ršg
("CSVReporter"));

445 
š‹º®
::
	`G‘ResuÉsCheck”
().
	`CheckResuÉs
(
csv
.
out_¡»am
);

446 
	}
}

448 
BENCHMARK_RESTORE_DEPRECATED_WARNING


450 
	$Sub¡rCÁ
(cÚ¡ 
¡d
::
¡ršg
& 
hay¡ack
, cÚ¡ std::¡ršg& 
·t
) {

451 ià(
·t
.
	`Ëngth
() == 0)  0;

452 
couÁ
 = 0;

453 
size_t
 
off£t
 = 
hay¡ack
.
	`fšd
(
·t
); off£ˆ!ğ
¡d
::
¡ršg
::
Åos
;

454 
off£t
 = 
hay¡ack
.
	`fšd
(
·t
, off£ˆ+…©.
	`Ëngth
()))

455 ++
couÁ
;

456  
couÁ
;

457 
	}
}

459 
	$ToHex
(
ch
) {

460  
ch
 < 10 ? 
¡©ic_ÿ¡
<>('0' + ch)

461 : 
¡©ic_ÿ¡
<>('a' + (
ch
 - 10));

462 
	}
}

464 
	$RªdomHexCh¬
() {

465 
¡d
::
mt19937
 
rd
{¡d::
¿ndom_deviû
{}()};

466 
¡d
::
unifÜm_št_di¡ributiÚ
<> 
m¿nd
{0, 15};

467  
	`ToHex
(
	`m¿nd
(
rd
));

468 
	}
}

470 
	g¡d
::
¡ršg
 
	$G‘RªdomFeName
() {

471 
¡d
::
¡ršg
 
mod–
 = "test.%%%%%%";

472 auto& 
ch
 : 
mod–
) {

473 ià(
ch
 =ğ'%'èch = 
	`RªdomHexCh¬
();

475  
mod–
;

476 
	}
}

478 
boŞ
 
	$FeExi¡s
(
¡d
::
¡ršg
 cÚ¡& 
Çme
) {

479 
¡d
::
if¡»am
 
	`š
(
Çme
.
	`c_¡r
());

480  
š
.
	`good
();

481 
	}
}

483 
	g¡d
::
¡ršg
 
	$G‘TempFeName
() {

487 
»Œ›s
 = 3;

488 --
»Œ›s
) {

489 
¡d
::
¡ršg
 
Çme
 = 
	`G‘RªdomFeName
();

490 ià(!
	`FeExi¡s
(
Çme
)) ‚ame;

492 
¡d
::
û¼
 << "FaedØü—‹ uniqu‹mpÜ¬y fÇme" << std::
’dl
;

493 
¡d
::
	`abÜt
();

494 
	}
}

496 
	g¡d
::
¡ršg
 
	$G‘FeR•Ü‹rOuut
(
¬gc
, * 
¬gv
[]) {

497 
¡d
::
veùÜ
<*> 
	`Ãw_¬gv
(
¬gv
,‡rgv + 
¬gc
);

498 
	`as£¹
(
¡©ic_ÿ¡
<
	`deşty³
(
Ãw_¬gv
)::
size_ty³
>(
¬gc
è=ğÃw_¬gv.
	`size
());

500 
¡d
::
¡ršg
 
tmp_fe_Çme
 = 
	`G‘TempFeName
();

501 
¡d
::
cout
 << "WÈbusšghi a thtm°fe: " << 
tmp_fe_Çme
 << '\n';

503 
¡d
::
¡ršg
 
tmp
 = "--benchmark_out=";

504 
tmp
 +ğ
tmp_fe_Çme
;

505 
Ãw_¬gv
.
	`em¶aû_back
(
cÚ¡_ÿ¡
<*>(
tmp
.
	`c_¡r
()));

507 
¬gc
 = (
Ãw_¬gv
.
	`size
());

509 
b’chm¬k
::
	`In™Ÿlize
(&
¬gc
, 
Ãw_¬gv
.
	`d©a
());

510 
b’chm¬k
::
	`RunS³cif›dB’chm¬ks
();

513 
¡d
::
if¡»am
 
	`tmp_¡»am
(
tmp_fe_Çme
);

514 
¡d
::
¡ršg
 
ouut
 = std::
	`¡ršg
((¡d::
i¡»ambuf_™”©Ü
<>(
tmp_¡»am
)),

515 
¡d
::
i¡»ambuf_™”©Ü
<>());

516 
¡d
::
	`»move
(
tmp_fe_Çme
.
	`c_¡r
());

518  
ouut
;

519 
	}
}

	@third_party/benchmark/test/perf_counters_gtest.cc

1 
	~<¿ndom
>

2 
	~<th»ad
>

4 
	~"../¤c/³rf_couÁ”s.h
"

5 
	~"g‹¡/g‹¡.h
"

7 #iâdeà
GTEST_SKIP


8 
	sMsgHªdËr
 {

9 
	mİ”©Ü
=(
¡d
::
o¡»am
&) {}

11 
	#GTEST_SKIP
(è 
	`MsgHªdËr
(èğ
¡d
::
cout


	)

14 
usšg
 
	gb’chm¬k
::
š‹º®
::
P”fCouÁ”s
;

15 
usšg
 
	gb’chm¬k
::
š‹º®
::
P”fCouÁ”sM—su»m’t
;

16 
usšg
 
	gb’chm¬k
::
š‹º®
::
P”fCouÁ”V®ues
;

18 
	gÇme¥aû
 {

19 cÚ¡ 
	gkG’”icP”fEv’t1
[] = "CYCLES";

20 cÚ¡ 
	gkG’”icP”fEv’t2
[] = "BRANCHES";

21 cÚ¡ 
	gkG’”icP”fEv’t3
[] = "INSTRUCTIONS";

23 
TEST
(
P”fCouÁ”sTe¡
, 
In™
) {

24 
EXPECT_EQ
(
P”fCouÁ”s
::
In™Ÿlize
(), P”fCouÁ”s::
kSuµÜ‹d
);

27 
TEST
(
P”fCouÁ”sTe¡
, 
OÃCouÁ”
) {

28 ià(!
	gP”fCouÁ”s
::
kSuµÜ‹d
) {

29 
GTEST_SKIP
() << "Performance counters‚ot supported.\n";

31 
EXPECT_TRUE
(
P”fCouÁ”s
::
In™Ÿlize
());

32 
EXPECT_EQ
(
P”fCouÁ”s
::
C»©e
({
kG’”icP”fEv’t1
}).
num_couÁ”s
(), 1);

35 
TEST
(
P”fCouÁ”sTe¡
, 
Neg©iveTe¡
) {

36 ià(!
	gP”fCouÁ”s
::
kSuµÜ‹d
) {

37 
EXPECT_FALSE
(
P”fCouÁ”s
::
In™Ÿlize
());

40 
EXPECT_TRUE
(
P”fCouÁ”s
::
In™Ÿlize
());

45 
EXPECT_EQ
(
P”fCouÁ”s
::
C»©e
({}).
num_couÁ”s
(), 0);

46 
EXPECT_EQ
(
P”fCouÁ”s
::
C»©e
({""}).
num_couÁ”s
(), 0);

47 
EXPECT_EQ
(
P”fCouÁ”s
::
C»©e
({"nÙ‡ couÁ”‚ame"}).
num_couÁ”s
(), 0);

51 autØ
	gcouÁ”
 =

52 
P”fCouÁ”s
::
C»©e
({
kG’”icP”fEv’t2
, "", 
kG’”icP”fEv’t1
});

53 
EXPECT_EQ
(
couÁ”
.
num_couÁ”s
(), 2);

54 
EXPECT_EQ
(
couÁ”
.
Çmes
(), 
¡d
::
veùÜ
<¡d::
¡ršg
>(

55 {
kG’”icP”fEv’t2
, 
kG’”icP”fEv’t1
}));

59 autØ
	gcouÁ”
 = 
P”fCouÁ”s
::
C»©e
(

60 {
kG’”icP”fEv’t3
, "nÙ‡ couÁ”‚ame", 
kG’”icP”fEv’t1
});

61 
EXPECT_EQ
(
couÁ”
.
num_couÁ”s
(), 2);

62 
EXPECT_EQ
(
couÁ”
.
Çmes
(), 
¡d
::
veùÜ
<¡d::
¡ršg
>(

63 {
kG’”icP”fEv’t3
, 
kG’”icP”fEv’t1
}));

67 
EXPECT_EQ
(
P”fCouÁ”s
::
C»©e
(

68 {
kG’”icP”fEv’t1
, 
kG’”icP”fEv’t2
, 
kG’”icP”fEv’t3
})

69 .
num_couÁ”s
(),

74 autØ
	gcouÁ”
 = 
P”fCouÁ”s
::
C»©e
({
kG’”icP”fEv’t1
, 
kG’”icP”fEv’t2
,

75 
kG’”icP”fEv’t3
,

77 
EXPECT_EQ
(
couÁ”
.
num_couÁ”s
(), 3);

78 
EXPECT_EQ
(
couÁ”
.
Çmes
(),

79 
¡d
::
veùÜ
<¡d::
¡ršg
>({
kG’”icP”fEv’t1
, 
kG’”icP”fEv’t2
,

80 
kG’”icP”fEv’t3
}));

84 
TEST
(
P”fCouÁ”sTe¡
, 
R—d1CouÁ”
) {

85 ià(!
	gP”fCouÁ”s
::
kSuµÜ‹d
) {

86 
GTEST_SKIP
() << "Test skipped because†ibpfm is‚ot supported.\n";

88 
EXPECT_TRUE
(
P”fCouÁ”s
::
In™Ÿlize
());

89 autØ
	gcouÁ”s
 = 
P”fCouÁ”s
::
C»©e
({
kG’”icP”fEv’t1
});

90 
EXPECT_EQ
(
couÁ”s
.
num_couÁ”s
(), 1);

91 
P”fCouÁ”V®ues
 
v®ues1
(1);

92 
EXPECT_TRUE
(
couÁ”s
.
SÇpshÙ
(&
v®ues1
));

93 
EXPECT_GT
(
v®ues1
[0], 0);

94 
P”fCouÁ”V®ues
 
v®ues2
(1);

95 
EXPECT_TRUE
(
couÁ”s
.
SÇpshÙ
(&
v®ues2
));

96 
EXPECT_GT
(
v®ues2
[0], 0);

97 
EXPECT_GT
(
v®ues2
[0], 
v®ues1
[0]);

100 
TEST
(
P”fCouÁ”sTe¡
, 
R—d2CouÁ”s
) {

101 ià(!
	gP”fCouÁ”s
::
kSuµÜ‹d
) {

102 
GTEST_SKIP
() << "Test skipped because†ibpfm is‚ot supported.\n";

104 
EXPECT_TRUE
(
P”fCouÁ”s
::
In™Ÿlize
());

105 autØ
	gcouÁ”s
 =

106 
P”fCouÁ”s
::
C»©e
({
kG’”icP”fEv’t1
, 
kG’”icP”fEv’t2
});

107 
EXPECT_EQ
(
couÁ”s
.
num_couÁ”s
(), 2);

108 
P”fCouÁ”V®ues
 
v®ues1
(2);

109 
EXPECT_TRUE
(
couÁ”s
.
SÇpshÙ
(&
v®ues1
));

110 
EXPECT_GT
(
v®ues1
[0], 0);

111 
EXPECT_GT
(
v®ues1
[1], 0);

112 
P”fCouÁ”V®ues
 
v®ues2
(2);

113 
EXPECT_TRUE
(
couÁ”s
.
SÇpshÙ
(&
v®ues2
));

114 
EXPECT_GT
(
v®ues2
[0], 0);

115 
EXPECT_GT
(
v®ues2
[1], 0);

118 
TEST
(
P”fCouÁ”sTe¡
, 
Reİ’Exi¡šgCouÁ”s
) {

121 ià(!
	gP”fCouÁ”s
::
kSuµÜ‹d
) {

122 
GTEST_SKIP
() << "Test skipped because†ibpfm is‚ot supported.\n";

124 
EXPECT_TRUE
(
P”fCouÁ”s
::
In™Ÿlize
());

125 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> 
kM‘rics
({
kG’”icP”fEv’t1
});

126 
	g¡d
::
veùÜ
<
P”fCouÁ”s
> 
couÁ”s
(3);

127 auto& 
	gcouÁ”
 : 
couÁ”s
) {

128 
couÁ”
 = 
P”fCouÁ”s
::
C»©e
(
kM‘rics
);

130 
P”fCouÁ”V®ues
 
v®ues
(1);

131 
EXPECT_TRUE
(
couÁ”s
[0].
SÇpshÙ
(&
v®ues
));

132 
EXPECT_TRUE
(
couÁ”s
[1].
SÇpshÙ
(&
v®ues
));

133 
EXPECT_TRUE
(
couÁ”s
[2].
SÇpshÙ
(&
v®ues
));

136 
TEST
(
P”fCouÁ”sTe¡
, 
C»©eExi¡šgM—su»m’ts
) {

141 ià(!
	gP”fCouÁ”s
::
kSuµÜ‹d
) {

142 
GTEST_SKIP
() << "Test skipped because†ibpfm is‚ot supported.\n";

144 
EXPECT_TRUE
(
P”fCouÁ”s
::
In™Ÿlize
());

150 cÚ¡ 
	gkMaxCouÁ”s
 = 10;

151 cÚ¡ 
	gkMšV®idCouÁ”s
 = 3;

155 cÚ¡ 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> 
kM‘rics
{"cycles"};

160 
	g¡d
::
veùÜ
<
¡d
::
unique_±r
<
P”fCouÁ”sM—su»m’t
>>

161 
³rf_couÁ”_m—su»m’ts
;

163 
	g³rf_couÁ”_m—su»m’ts
.
»£rve
(
kMaxCouÁ”s
);

164 
	gj
 = 0; j < 
	gkMaxCouÁ”s
; ++j) {

165 
	g³rf_couÁ”_m—su»m’ts
.
em¶aû_back
(

166 
Ãw
 
P”fCouÁ”sM—su»m’t
(
kM‘rics
));

169 
	g¡d
::
veùÜ
<
¡d
::
·œ
<¡d::
¡ršg
, >> 
	gm—su»m’ts
;

172 
	gmax_couÁ”s
 = 
kMaxCouÁ”s
;

173 
	gi
 = 0; i < 
	gkMaxCouÁ”s
; ++i) {

174 auto& 
couÁ”
(*
³rf_couÁ”_m—su»m’ts
[
i
]);

175 
EXPECT_EQ
(
couÁ”
.
num_couÁ”s
(), 1);

176 ià(!
	gcouÁ”
.
S¹
()) {

177 
	gmax_couÁ”s
 = 
i
;

182 
ASSERT_GE
(
max_couÁ”s
, 
kMšV®idCouÁ”s
);

185 
	gi
 = 0; i < 
	gmax_couÁ”s
; ++i) {

186 auto& 
couÁ”
(*
³rf_couÁ”_m—su»m’ts
[
i
]);

187 
EXPECT_TRUE
(
couÁ”
.
Stİ
(
m—su»m’ts
è|| (
i
 >ğ
kMšV®idCouÁ”s
));

191 
	gi
 = 0; i < 
	gmax_couÁ”s
; ++i) {

192 auto& 
couÁ”
(*
³rf_couÁ”_m—su»m’ts
[
i
]);

193 
	gm—su»m’ts
.
ş—r
();

194 
	gcouÁ”
.
S¹
();

195 
EXPECT_TRUE
(
couÁ”
.
Stİ
(
m—su»m’ts
è|| (
i
 >ğ
kMšV®idCouÁ”s
));

204 
BENCHMARK_DONT_OPTIMIZE
 
size_t
 
do_wÜk
() {

205 
	g¡d
::
mt19937
 
rd
{
¡d
::
¿ndom_deviû
{}()};

206 
	g¡d
::
unifÜm_št_di¡ributiÚ
<
size_t
> 
m¿nd
(0, 10);

207 cÚ¡ 
size_t
 
	gkNumLoİs
 = 1000000;

208 
size_t
 
	gsum
 = 0;

209 
size_t
 
	gj
 = 0; j < 
	gkNumLoİs
; ++j) {

210 
	gsum
 +ğ
m¿nd
(
rd
);

212 
	gb’chm¬k
::
DoNÙO±imize
(
sum
);

213  
	gsum
;

216 
m—su»
(
size_t
 
th»adcouÁ
, 
P”fCouÁ”V®ues
* 
befÜe
,

217 
P”fCouÁ”V®ues
* 
aá”
) {

218 
BM_CHECK_NE
(
befÜe
, 
nuÎ±r
);

219 
BM_CHECK_NE
(
aá”
, 
nuÎ±r
);

220 
	g¡d
::
veùÜ
<
¡d
::
th»ad
> 
th»ads
(
th»adcouÁ
);

221 autØ
	gwÜk
 = [&](è{ 
BM_CHECK
(
do_wÜk
() > 1000); };

228 autØ
	gcouÁ”s
 =

229 
P”fCouÁ”s
::
C»©e
({
kG’”icP”fEv’t1
, 
kG’”icP”fEv’t3
});

230 auto& 
	gt
 : 
th»ads
è
t
 = 
¡d
::
th»ad
(
wÜk
);

231 
	gcouÁ”s
.
SÇpshÙ
(
befÜe
);

232 auto& 
	gt
 : 
th»ads
è
t
.
još
();

233 
	gcouÁ”s
.
SÇpshÙ
(
aá”
);

236 
TEST
(
P”fCouÁ”sTe¡
, 
MuÉiTh»aded
) {

237 ià(!
	gP”fCouÁ”s
::
kSuµÜ‹d
) {

238 
GTEST_SKIP
() << "Test skipped because†ibpfm is‚ot supported.";

240 
EXPECT_TRUE
(
P”fCouÁ”s
::
In™Ÿlize
());

241 
P”fCouÁ”V®ues
 
befÜe
(2);

242 
P”fCouÁ”V®ues
 
aá”
(2);

248 
m—su»
(2, &
befÜe
, &
aá”
);

249 
	g¡d
::
veùÜ
<> 
EÏp£d2Th»ads
{

250 
¡©ic_ÿ¡
<>(
aá”
[0] - 
befÜe
[0]),

251 
	g¡©ic_ÿ¡
<>(
	gaá”
[1] - 
	gbefÜe
[1])};

255 
m—su»
(4, &
befÜe
, &
aá”
);

256 
	g¡d
::
veùÜ
<> 
EÏp£d4Th»ads
{

257 
¡©ic_ÿ¡
<>(
aá”
[0] - 
befÜe
[0]),

258 
	g¡©ic_ÿ¡
<>(
	gaá”
[1] - 
	gbefÜe
[1])};

262 
EXPECT_GE
(
EÏp£d4Th»ads
[0], 1.9 * 
EÏp£d2Th»ads
[0]);

263 
EXPECT_GE
(
EÏp£d4Th»ads
[1], 1.9 * 
EÏp£d2Th»ads
[1]);

266 
TEST
(
P”fCouÁ”sTe¡
, 
H¬dw¬eLim™s
) {

271 ià(!
	gP”fCouÁ”s
::
kSuµÜ‹d
) {

272 
GTEST_SKIP
() << "Test skipped because†ibpfm is‚ot supported.\n";

274 
EXPECT_TRUE
(
P”fCouÁ”s
::
In™Ÿlize
());

278 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> 
couÁ”_Çmes
{"cycles",

302 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> 
v®id_Çmes
;

303 cÚ¡ 
	g¡d
::
¡ršg
& 
Çme
 : 
couÁ”_Çmes
) {

304 ià(
P”fCouÁ”s
::
IsCouÁ”SuµÜ‹d
(
Çme
)) {

305 
v®id_Çmes
.
push_back
(
Çme
);

308 
P”fCouÁ”sM—su»m’t
 
couÁ”
(
v®id_Çmes
);

310 
	g¡d
::
veùÜ
<
¡d
::
·œ
<¡d::
¡ršg
, >> 
	gm—su»m’ts
;

312 
	gcouÁ”
.
S¹
();

313 
EXPECT_TRUE
(
couÁ”
.
Stİ
(
m—su»m’ts
));

	@third_party/benchmark/test/perf_counters_test.cc

1 #undeà
NDEBUG


3 
	~"../¤c/³rf_couÁ”s.h
"

5 
	~"b’chm¬k/b’chm¬k.h
"

6 
	~"ouut_‹¡.h
"

8 
	$BM_Sim¶e
(
b’chm¬k
::
S‹
& 
¡©e
) {

9 autØ
_
 : 
¡©e
) {

10 autØ
™”©iÚs
 = 
¡©e
.
	`™”©iÚs
();

11 
b’chm¬k
::
	`DoNÙO±imize
(
™”©iÚs
);

13 
	}
}

14 
BENCHMARK
(
BM_Sim¶e
);

15 
ADD_CASES
(
TC_JSONOut
, {{"\"name\": \"BM_Simple\",$"}});

17 
	$CheckSim¶e
(
ResuÉs
 cÚ¡& 
e
) {

18 
	`CHECK_COUNTER_VALUE
(
e
, , "CYCLES", 
GT
, 0);

19 
	`CHECK_COUNTER_VALUE
(
e
, , "BRANCHES", 
GT
, 0.0);

20 
	}
}

21 
CHECK_BENCHMARK_RESULTS
("BM_Sim¶e", &
CheckSim¶e
);

23 
	$maš
(
¬gc
, * 
¬gv
[]) {

24 ià(!
b’chm¬k
::
š‹º®
::
P”fCouÁ”s
::
kSuµÜ‹d
) {

27 
	`RunOuutTe¡s
(
¬gc
, 
¬gv
);

28 
	}
}

	@third_party/benchmark/test/register_benchmark_test.cc

2 #undeà
NDEBUG


3 
	~<ÿs£¹
>

4 
	~<veùÜ
>

6 
	~"../¤c/check.h
"

7 
	~"b’chm¬k/b’chm¬k.h
"

9 
	gÇme¥aû
 {

11 şas 
	cTe¡R•Ü‹r
 : 
public
 
b’chm¬k
::
CÚsŞeR•Ü‹r
 {

12 
public
:

13 
R•ÜtRuns
(cÚ¡ 
¡d
::
veùÜ
<
Run
>& 
»pÜt
è
ov”ride
 {

14 
®l_runs_
.
š£¹
×Î_runs_.
’d
(), 
begš
(
»pÜt
),ƒnd(report));

15 
	gCÚsŞeR•Ü‹r
::
R•ÜtRuns
(
»pÜt
);

18 
	g¡d
::
veùÜ
<
Run
> 
®l_runs_
;

21 
	sTe¡Ca£
 {

22 cÚ¡ 
	g¡d
::
¡ršg
 
Çme
;

23 cÚ¡ 
	g¡d
::
¡ršg
 
Ïb–
;

25 
Te¡Ca£
(cÚ¡ 
¡d
::
¡ršg
& 
xÇme
) : TestCase(xname, "") {}

26 
Te¡Ca£
(cÚ¡ 
¡d
::
¡ršg
& 
xÇme
, cÚ¡ std::¡ršg& 
xÏb–
)

27 : 
Çme
(
xÇme
), 
Ïb–
(
xÏb–
) {}

29 
	gb’chm¬k
::
	tB’chm¬kR•Ü‹r
::
	tRun
 Run;

31 
CheckRun
(
Run
 cÚ¡& 
run
) const {

33 
BM_CHECK
(
Çme
 =ğ
run
.
b’chm¬k_Çme
()) << "expected " <<‚ame << " got "

34 << 
run
.
b’chm¬k_Çme
();

35 ià(!
	gÏb–
.
em±y
()) {

36 
BM_CHECK
(
run
.
»pÜt_Ïb–
 =ğ
Ïb–
) << "expected " <<†abel << " got "

37 << 
run
.
»pÜt_Ïb–
;

39 
BM_CHECK
(
run
.
»pÜt_Ïb–
.
em±y
());

45 
	g¡d
::
veùÜ
<
Te¡Ca£
> 
Ex³ùedResuÉs
;

47 
AddCa£s
(
¡d
::
š™Ÿliz”_li¡
<
Te¡Ca£
> cÚ¡& 
v
) {

48 cÚ¡‡uto& 
N
 : 
v
) {

49 
Ex³ùedResuÉs
.
push_back
(
N
);

54 
	#CONCAT
(
x
, 
y
è
	$CONCAT2
(
x
, 
y
)

	)

55 
	#CONCAT2
(
x
, 
y
èx##
	)
y

56 
	#ADD_CASES
(...è
	`CONCAT
(
dummy
, 
__LINE__
èğ
	`AddCa£s
({
__VA_ARGS__
})

60 
	gb’chm¬k
::
	tš‹º®
::
	tB’chm¬k
* 
	tR‘uºV®
;

65 
	$BM_funùiÚ
(
b’chm¬k
::
S‹
& 
¡©e
) {

66 autØ
_
 : 
¡©e
) {

68 
	}
}

69 
BENCHMARK
(
BM_funùiÚ
);

70 
R‘uºV®
 
	gdummy
 = 
b’chm¬k
::
Regi¡”B’chm¬k
(

71 "BM_funùiÚ_mªu®_»gi¡¿tiÚ", 
BM_funùiÚ
);

72 
ADD_CASES
({"BM_function"}, {"BM_function_manual_registration"});

79 #iâdeà
BENCHMARK_HAS_NO_VARIADIC_REGISTER_BENCHMARK


81 
	$BM_exŒa_¬gs
(
b’chm¬k
::
S‹
& 
¡
, cÚ¡ * 
Ïb–
) {

82 autØ
_
 : 
¡
) {

84 
¡
.
	`S‘Lab–
(
Ïb–
);

85 
	}
}

86 
	$Regi¡”FromFunùiÚ
() {

87 
¡d
::
·œ
<cÚ¡ *, cÚ¡ *> 
ÿ£s
[] = {

89 autØcÚ¡& 
c
 : 
ÿ£s
)

90 
b’chm¬k
::
	`Regi¡”B’chm¬k
(
c
.
fœ¡
, &
BM_exŒa_¬gs
, c.
£cÚd
);

92 
	}
}

93 
	gdummy2
 = 
Regi¡”FromFunùiÚ
();

94 
ADD_CASES
({"test1", "One"}, {"test2", "Two"}, {"test3", "Three"});

101 
	$DISABLED_BM_funùiÚ
(
b’chm¬k
::
S‹
& 
¡©e
) {

102 autØ
_
 : 
¡©e
) {

104 
	}
}

105 
BENCHMARK
(
DISABLED_BM_funùiÚ
);

106 
R‘uºV®
 
	gdummy3
 = 
b’chm¬k
::
Regi¡”B’chm¬k
("DISABLED_BM_function_manual",

107 
DISABLED_BM_funùiÚ
);

114 
	sCu¡omFixtu»
 {

115 
İ”©Ü
()(
	mb’chm¬k
::
S‹
& 
¡
) {

116 autØ
_
 : 
¡
) {

121 
	$Te¡Regi¡¿tiÚAtRuÁime
() {

122 #ifdeà
BENCHMARK_HAS_CXX11


124 
Cu¡omFixtu»
 
fx
;

125 
b’chm¬k
::
	`Regi¡”B’chm¬k
("cu¡om_fixtu»", 
fx
);

126 
	`AddCa£s
({
¡d
::
	`¡ršg
("custom_fixture")});

129 #iâdeà
BENCHMARK_HAS_NO_VARIADIC_REGISTER_BENCHMARK


131 cÚ¡ * 
x
 = "42";

132 autØ
ÿ±uršg_Ïm
 = [=](
b’chm¬k
::
S‹
& 
¡
) {

133 autØ
_
 : 
¡
) {

135 
¡
.
	`S‘Lab–
(
x
);

137 
b’chm¬k
::
	`Regi¡”B’chm¬k
("Ïmbda_b’chm¬k", 
ÿ±uršg_Ïm
);

138 
	`AddCa£s
({{"Ïmbda_b’chm¬k", 
x
}});

141 
	}
}

145 
	$RunTe¡OÃ
() {

146 
	`Te¡Regi¡¿tiÚAtRuÁime
();

148 
Te¡R•Ü‹r
 
‹¡_»pÜ‹r
;

149 
b’chm¬k
::
	`RunS³cif›dB’chm¬ks
(&
‹¡_»pÜ‹r
);

151 
b’chm¬k
::
	tB’chm¬kR•Ü‹r
::
	tRun
 Run;

152 autØ
EB
 = 
Ex³ùedResuÉs
.
	`begš
();

154 
Run
 cÚ¡& 
run
 : 
‹¡_»pÜ‹r
.
®l_runs_
) {

155 
	`as£¹
(
EB
 !ğ
Ex³ùedResuÉs
.
	`’d
());

156 
EB
->
	`CheckRun
(
run
);

157 ++
EB
;

159 
	`as£¹
(
EB
 =ğ
Ex³ùedResuÉs
.
	`’d
());

160 
	}
}

165 
	$RunTe¡Two
() {

166 
	`as£¹
(
Ex³ùedResuÉs
.
	`size
() != 0 &&

168 
Ex³ùedResuÉs
.
	`ş—r
();

169 
b’chm¬k
::
	`CË¬Regi¡”edB’chm¬ks
();

171 
Te¡R•Ü‹r
 
‹¡_»pÜ‹r
;

172 
size_t
 
num_¿n
 = 
b’chm¬k
::
	`RunS³cif›dB’chm¬ks
(&
‹¡_»pÜ‹r
);

173 
	`as£¹
(
num_¿n
 == 0);

174 
	`as£¹
(
‹¡_»pÜ‹r
.
®l_runs_
.
	`begš
(è=ğ‹¡_»pÜ‹r.®l_runs_.
	`’d
());

176 
	`Te¡Regi¡¿tiÚAtRuÁime
();

177 
num_¿n
 = 
b’chm¬k
::
	`RunS³cif›dB’chm¬ks
(&
‹¡_»pÜ‹r
);

178 
	`as£¹
(
num_¿n
 =ğ
Ex³ùedResuÉs
.
	`size
());

180 
b’chm¬k
::
	tB’chm¬kR•Ü‹r
::
	tRun
 Run;

181 autØ
EB
 = 
Ex³ùedResuÉs
.
	`begš
();

183 
Run
 cÚ¡& 
run
 : 
‹¡_»pÜ‹r
.
®l_runs_
) {

184 
	`as£¹
(
EB
 !ğ
Ex³ùedResuÉs
.
	`’d
());

185 
EB
->
	`CheckRun
(
run
);

186 ++
EB
;

188 
	`as£¹
(
EB
 =ğ
Ex³ùedResuÉs
.
	`’d
());

189 
	}
}

191 
	$maš
(
¬gc
, * 
¬gv
[]) {

192 
b’chm¬k
::
	`In™Ÿlize
(&
¬gc
, 
¬gv
);

194 
	`RunTe¡OÃ
();

195 
	`RunTe¡Two
();

196 
	}
}

	@third_party/benchmark/test/repetitions_test.cc

2 
	~"b’chm¬k/b’chm¬k.h
"

3 
	~"ouut_‹¡.h
"

9 
	$BM_Ex¶ic™R•‘™iÚs
(
b’chm¬k
::
S‹
& 
¡©e
) {

10 autØ
_
 : 
¡©e
) {

12 
	}
}

13 
BENCHMARK
(
BM_Ex¶ic™R•‘™iÚs
)->
R•‘™iÚs
(2);

15 
ADD_CASES
(
TC_CÚsŞeOut
,

17 
ADD_CASES
(
TC_CÚsŞeOut
,

19 
ADD_CASES
(
TC_CÚsŞeOut
,

21 
ADD_CASES
(
TC_CÚsŞeOut
,

23 
ADD_CASES
(
TC_CÚsŞeOut
,

25 
ADD_CASES
(
TC_JSONOut
,

27 {"\"çmy_šdex\": 0,$", 
MR_Next
},

28 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

29 {"\"run_Çme\": \"BM_Ex¶ic™R•‘™iÚs/»³©s:2\",$", 
MR_Next
},

30 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

31 {"\"»³t™iÚs\": 2,$", 
MR_Next
},

32 {"\"»³t™iÚ_šdex\": 0,$", 
MR_Next
},

33 {"\"th»ads\": 1,$", 
MR_Next
},

34 {"\"™”©iÚs\": %št,$", 
MR_Next
},

35 {"\"»®_time\": %æßt,$", 
MR_Next
},

36 {"\"ıu_time\": %æßt,$", 
MR_Next
},

37 {"\"time_un™\": \"ns\"$", 
MR_Next
},

38 {"}", 
MR_Next
}});

39 
ADD_CASES
(
TC_JSONOut
,

41 {"\"çmy_šdex\": 0,$", 
MR_Next
},

42 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

43 {"\"run_Çme\": \"BM_Ex¶ic™R•‘™iÚs/»³©s:2\",$", 
MR_Next
},

44 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

45 {"\"»³t™iÚs\": 2,$", 
MR_Next
},

46 {"\"»³t™iÚ_šdex\": 1,$", 
MR_Next
},

47 {"\"th»ads\": 1,$", 
MR_Next
},

48 {"\"™”©iÚs\": %št,$", 
MR_Next
},

49 {"\"»®_time\": %æßt,$", 
MR_Next
},

50 {"\"ıu_time\": %æßt,$", 
MR_Next
},

51 {"\"time_un™\": \"ns\"$", 
MR_Next
},

52 {"}", 
MR_Next
}});

53 
ADD_CASES
(
TC_JSONOut
,

55 {"\"çmy_šdex\": 0,$", 
MR_Next
},

56 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

57 {"\"run_Çme\": \"BM_Ex¶ic™R•‘™iÚs/»³©s:2\",$", 
MR_Next
},

58 {"\"run_ty³\": \"agg»g©e\",$", 
MR_Next
},

59 {"\"»³t™iÚs\": 2,$", 
MR_Next
},

60 {"\"th»ads\": 1,$", 
MR_Next
},

61 {"\"agg»g©e_Çme\": \"m—n\",$", 
MR_Next
},

62 {"\"agg»g©e_un™\": \"time\",$", 
MR_Next
},

63 {"\"™”©iÚs\": %št,$", 
MR_Next
},

64 {"\"»®_time\": %æßt,$", 
MR_Next
},

65 {"\"ıu_time\": %æßt,$", 
MR_Next
},

66 {"\"time_un™\": \"ns\"$", 
MR_Next
},

67 {"}", 
MR_Next
}});

68 
ADD_CASES
(
TC_JSONOut
,

70 {"\"çmy_šdex\": 0,$", 
MR_Next
},

71 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

72 {"\"run_Çme\": \"BM_Ex¶ic™R•‘™iÚs/»³©s:2\",$", 
MR_Next
},

73 {"\"run_ty³\": \"agg»g©e\",$", 
MR_Next
},

74 {"\"»³t™iÚs\": 2,$", 
MR_Next
},

75 {"\"th»ads\": 1,$", 
MR_Next
},

76 {"\"agg»g©e_Çme\": \"medŸn\",$", 
MR_Next
},

77 {"\"agg»g©e_un™\": \"time\",$", 
MR_Next
},

78 {"\"™”©iÚs\": %št,$", 
MR_Next
},

79 {"\"»®_time\": %æßt,$", 
MR_Next
},

80 {"\"ıu_time\": %æßt,$", 
MR_Next
},

81 {"\"time_un™\": \"ns\"$", 
MR_Next
},

82 {"}", 
MR_Next
}});

83 
ADD_CASES
(
TC_JSONOut
,

85 {"\"çmy_šdex\": 0,$", 
MR_Next
},

86 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

87 {"\"run_Çme\": \"BM_Ex¶ic™R•‘™iÚs/»³©s:2\",$", 
MR_Next
},

88 {"\"run_ty³\": \"agg»g©e\",$", 
MR_Next
},

89 {"\"»³t™iÚs\": 2,$", 
MR_Next
},

90 {"\"th»ads\": 1,$", 
MR_Next
},

91 {"\"agg»g©e_Çme\": \"¡ddev\",$", 
MR_Next
},

92 {"\"agg»g©e_un™\": \"time\",$", 
MR_Next
},

93 {"\"™”©iÚs\": %št,$", 
MR_Next
},

94 {"\"»®_time\": %æßt,$", 
MR_Next
},

95 {"\"ıu_time\": %æßt,$", 
MR_Next
},

96 {"\"time_un™\": \"ns\"$", 
MR_Next
},

97 {"}", 
MR_Next
}});

98 
ADD_CASES
(
TC_CSVOut
, {{"^\"BM_ExplicitRepetitions/repeats:2\",%csv_report$"}});

99 
ADD_CASES
(
TC_CSVOut
, {{"^\"BM_ExplicitRepetitions/repeats:2\",%csv_report$"}});

100 
ADD_CASES
(
TC_CSVOut
,

102 
ADD_CASES
(
TC_CSVOut
,

104 
ADD_CASES
(
TC_CSVOut
,

111 
	$BM_Im¶ic™R•‘™iÚs
(
b’chm¬k
::
S‹
& 
¡©e
) {

112 autØ
_
 : 
¡©e
) {

114 
	}
}

115 
BENCHMARK
(
BM_Im¶ic™R•‘™iÚs
);

117 
ADD_CASES
(
TC_CÚsŞeOut
, {{"^BM_ImplicitRepetitions %console_report$"}});

118 
ADD_CASES
(
TC_CÚsŞeOut
, {{"^BM_ImplicitRepetitions %console_report$"}});

119 
ADD_CASES
(
TC_CÚsŞeOut
, {{"^BM_ImplicitRepetitions %console_report$"}});

120 
ADD_CASES
(
TC_CÚsŞeOut
, {{"^BM_ImplicitRepetitions_mean %console_report$"}});

121 
ADD_CASES
(
TC_CÚsŞeOut
, {{"^BM_ImplicitRepetitions_median %console_report$"}});

122 
ADD_CASES
(
TC_CÚsŞeOut
, {{"^BM_ImplicitRepetitions_stddev %console_report$"}});

123 
ADD_CASES
(
TC_JSONOut
, {{"\"name\": \"BM_ImplicitRepetitions\",$"},

124 {"\"çmy_šdex\": 1,$", 
MR_Next
},

125 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

126 {"\"run_Çme\": \"BM_Im¶ic™R•‘™iÚs\",$", 
MR_Next
},

127 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

128 {"\"»³t™iÚs\": 3,$", 
MR_Next
},

129 {"\"»³t™iÚ_šdex\": 0,$", 
MR_Next
},

130 {"\"th»ads\": 1,$", 
MR_Next
},

131 {"\"™”©iÚs\": %št,$", 
MR_Next
},

132 {"\"»®_time\": %æßt,$", 
MR_Next
},

133 {"\"ıu_time\": %æßt,$", 
MR_Next
},

134 {"\"time_un™\": \"ns\"$", 
MR_Next
},

135 {"}", 
MR_Next
}});

136 
ADD_CASES
(
TC_JSONOut
, {{"\"name\": \"BM_ImplicitRepetitions\",$"},

137 {"\"çmy_šdex\": 1,$", 
MR_Next
},

138 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

139 {"\"run_Çme\": \"BM_Im¶ic™R•‘™iÚs\",$", 
MR_Next
},

140 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

141 {"\"»³t™iÚs\": 3,$", 
MR_Next
},

142 {"\"»³t™iÚ_šdex\": 1,$", 
MR_Next
},

143 {"\"th»ads\": 1,$", 
MR_Next
},

144 {"\"™”©iÚs\": %št,$", 
MR_Next
},

145 {"\"»®_time\": %æßt,$", 
MR_Next
},

146 {"\"ıu_time\": %æßt,$", 
MR_Next
},

147 {"\"time_un™\": \"ns\"$", 
MR_Next
},

148 {"}", 
MR_Next
}});

149 
ADD_CASES
(
TC_JSONOut
, {{"\"name\": \"BM_ImplicitRepetitions\",$"},

150 {"\"çmy_šdex\": 1,$", 
MR_Next
},

151 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

152 {"\"run_Çme\": \"BM_Im¶ic™R•‘™iÚs\",$", 
MR_Next
},

153 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

154 {"\"»³t™iÚs\": 3,$", 
MR_Next
},

155 {"\"»³t™iÚ_šdex\": 2,$", 
MR_Next
},

156 {"\"th»ads\": 1,$", 
MR_Next
},

157 {"\"™”©iÚs\": %št,$", 
MR_Next
},

158 {"\"»®_time\": %æßt,$", 
MR_Next
},

159 {"\"ıu_time\": %æßt,$", 
MR_Next
},

160 {"\"time_un™\": \"ns\"$", 
MR_Next
},

161 {"}", 
MR_Next
}});

162 
ADD_CASES
(
TC_JSONOut
, {{"\"name\": \"BM_ImplicitRepetitions_mean\",$"},

163 {"\"çmy_šdex\": 1,$", 
MR_Next
},

164 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

165 {"\"run_Çme\": \"BM_Im¶ic™R•‘™iÚs\",$", 
MR_Next
},

166 {"\"run_ty³\": \"agg»g©e\",$", 
MR_Next
},

167 {"\"»³t™iÚs\": 3,$", 
MR_Next
},

168 {"\"th»ads\": 1,$", 
MR_Next
},

169 {"\"agg»g©e_Çme\": \"m—n\",$", 
MR_Next
},

170 {"\"agg»g©e_un™\": \"time\",$", 
MR_Next
},

171 {"\"™”©iÚs\": %št,$", 
MR_Next
},

172 {"\"»®_time\": %æßt,$", 
MR_Next
},

173 {"\"ıu_time\": %æßt,$", 
MR_Next
},

174 {"\"time_un™\": \"ns\"$", 
MR_Next
},

175 {"}", 
MR_Next
}});

176 
ADD_CASES
(
TC_JSONOut
, {{"\"name\": \"BM_ImplicitRepetitions_median\",$"},

177 {"\"çmy_šdex\": 1,$", 
MR_Next
},

178 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

179 {"\"run_Çme\": \"BM_Im¶ic™R•‘™iÚs\",$", 
MR_Next
},

180 {"\"run_ty³\": \"agg»g©e\",$", 
MR_Next
},

181 {"\"»³t™iÚs\": 3,$", 
MR_Next
},

182 {"\"th»ads\": 1,$", 
MR_Next
},

183 {"\"agg»g©e_Çme\": \"medŸn\",$", 
MR_Next
},

184 {"\"agg»g©e_un™\": \"time\",$", 
MR_Next
},

185 {"\"™”©iÚs\": %št,$", 
MR_Next
},

186 {"\"»®_time\": %æßt,$", 
MR_Next
},

187 {"\"ıu_time\": %æßt,$", 
MR_Next
},

188 {"\"time_un™\": \"ns\"$", 
MR_Next
},

189 {"}", 
MR_Next
}});

190 
ADD_CASES
(
TC_JSONOut
, {{"\"name\": \"BM_ImplicitRepetitions_stddev\",$"},

191 {"\"çmy_šdex\": 1,$", 
MR_Next
},

192 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

193 {"\"run_Çme\": \"BM_Im¶ic™R•‘™iÚs\",$", 
MR_Next
},

194 {"\"run_ty³\": \"agg»g©e\",$", 
MR_Next
},

195 {"\"»³t™iÚs\": 3,$", 
MR_Next
},

196 {"\"th»ads\": 1,$", 
MR_Next
},

197 {"\"agg»g©e_Çme\": \"¡ddev\",$", 
MR_Next
},

198 {"\"agg»g©e_un™\": \"time\",$", 
MR_Next
},

199 {"\"™”©iÚs\": %št,$", 
MR_Next
},

200 {"\"»®_time\": %æßt,$", 
MR_Next
},

201 {"\"ıu_time\": %æßt,$", 
MR_Next
},

202 {"\"time_un™\": \"ns\"$", 
MR_Next
},

203 {"}", 
MR_Next
}});

204 
ADD_CASES
(
TC_CSVOut
, {{"^\"BM_ImplicitRepetitions\",%csv_report$"}});

205 
ADD_CASES
(
TC_CSVOut
, {{"^\"BM_ImplicitRepetitions\",%csv_report$"}});

206 
ADD_CASES
(
TC_CSVOut
, {{"^\"BM_ImplicitRepetitions_mean\",%csv_report$"}});

207 
ADD_CASES
(
TC_CSVOut
, {{"^\"BM_ImplicitRepetitions_median\",%csv_report$"}});

208 
ADD_CASES
(
TC_CSVOut
, {{"^\"BM_ImplicitRepetitions_stddev\",%csv_report$"}});

214 
	$maš
(
¬gc
, * 
¬gv
[]è{ 
	`RunOuutTe¡s
×rgc,‡rgv); 
	}
}

	@third_party/benchmark/test/report_aggregates_only_test.cc

2 #undeà
NDEBUG


3 
	~<c¡dio
>

4 
	~<¡ršg
>

6 
	~"b’chm¬k/b’chm¬k.h
"

7 
	~"ouut_‹¡.h
"

13 
	$BM_Summ¬yR•—t
(
b’chm¬k
::
S‹
& 
¡©e
) {

14 autØ
_
 : 
¡©e
) {

16 
	}
}

17 
BENCHMARK
(
BM_Summ¬yR•—t
)->
R•‘™iÚs
(3)->
R•ÜtAgg»g©esOÆy
();

19 
	$maš
(
¬gc
, * 
¬gv
[]) {

20 cÚ¡ 
¡d
::
¡ršg
 
ouut
 = 
	`G‘FeR•Ü‹rOuut
(
¬gc
, 
¬gv
);

22 ià(
	`Sub¡rCÁ
(
ouut
, "\"name\": \"BM_SummaryRepeat/repeats:3") != 4 ||

23 
	`Sub¡rCÁ
(
ouut
, "\"name\": \"BM_SummaryRepeat/repeats:3_mean\"") != 1 ||

24 
	`Sub¡rCÁ
(
ouut
, "\"name\": \"BM_SummaryRepeat/repeats:3_median\"") !=

26 
	`Sub¡rCÁ
(
ouut
, "\"name\": \"BM_SummaryRepeat/repeats:3_stddev\"") !=

28 
	`Sub¡rCÁ
(
ouut
, "\"name\": \"BM_SummaryRepeat/repeats:3_cv\"") != 1) {

29 
¡d
::
cout
 << "Precondition mismatch. Expectedo only find four "

36 
¡d
::
cout
 << 
ouut
;

41 
	}
}

	@third_party/benchmark/test/reporter_output_test.cc

2 #undeà
NDEBUG


3 
	~<num”ic
>

4 
	~<ut™y
>

6 
	~"b’chm¬k/b’chm¬k.h
"

7 
	~"ouut_‹¡.h
"

13 
ADD_CASES
(
TC_CÚsŞeOut
, {{"^[-]+$", 
MR_Next
},

14 {"^B’chm¬k % Tim% CPU % I‹¿tiÚs$", 
MR_Next
},

15 {"^[-]+$", 
MR_Next
}});

16 
	$AddCÚ‹xtCa£s
() {

17 
	`AddCa£s
(
TC_CÚsŞeE¼
,

19 {"^%št-%št-%štT%št:%št:%št[-+]%št:%št$", 
MR_DeçuÉ
},

20 {"RuÂšg .*(/|\\\\ì•Ü‹r_ouut_‹¡(\\.exe)?$", 
MR_Next
},

21 {"RuÀÚ \\(%šˆX %æßˆMHz CPU s?\\)", 
MR_Next
},

23 
	`AddCa£s
(
TC_JSONOut
,

24 {{"^\\{", 
MR_DeçuÉ
},

25 {"\"cÚ‹xt\":", 
MR_Next
},

26 {"\"d©e\": \"", 
MR_Next
},

27 {"\"ho¡_Çme\":", 
MR_Next
},

29 
MR_Next
},

30 {"\"num_ıus\": %št,$", 
MR_Next
},

31 {"\"mhz_³r_ıu\": %æßt,$", 
MR_Next
},

32 {"\"ÿches\": \\[$", 
MR_DeçuÉ
}});

33 autØcÚ¡& 
Info
 = 
b’chm¬k
::
CPUInfo
::
	`G‘
();

34 autØcÚ¡& 
Caches
 = 
Info
.
ÿches
;

35 ià(!
Caches
.
	`em±y
()) {

36 
	`AddCa£s
(
TC_CÚsŞeE¼
, {{"CPU Caches:$", 
MR_Next
}});

38 
size_t
 
I
 = 0; I < 
Caches
.
	`size
(); ++I) {

39 
¡d
::
¡ršg
 
num_ÿches_¡r
 =

40 
Caches
[
I
].
num_sh¬šg
 != 0 ? " \\(x%int\\)$" : "$";

41 
	`AddCa£s
(
TC_CÚsŞeE¼
,

42 {{"L%šˆ(D©a|In¡ruùiÚ|Unif›dè%šˆKiB" + 
num_ÿches_¡r
,

43 
MR_Next
}});

44 
	`AddCa£s
(
TC_JSONOut
, {{"\\{$", 
MR_Next
},

45 {"\"ty³\": \"", 
MR_Next
},

46 {"\"Ëv–\": %št,$", 
MR_Next
},

47 {"\"size\": %št,$", 
MR_Next
},

48 {"\"num_sh¬šg\": %št$", 
MR_Next
},

49 {"}[,]{0,1}$", 
MR_Next
}});

51 
	`AddCa£s
(
TC_JSONOut
, {{"],$"}});

52 autØcÚ¡& 
LßdAvg
 = 
Info
.
lßd_avg
;

53 ià(!
LßdAvg
.
	`em±y
()) {

54 
	`AddCa£s
(
TC_CÚsŞeE¼
,

55 {{"Lßd Av”age: (%æßt, ){0,2}%æßt$", 
MR_Next
}});

57 
	`AddCa£s
(
TC_JSONOut
, {{"\"lßd_avg\": \\[(%æßt,?){0,3}],$", 
MR_Next
}});

59 
	}
}

60 
	gdummy_»gi¡”
 = 
AddCÚ‹xtCa£s
();

61 
ADD_CASES
(
TC_CSVOut
, {{"%csv_header"}});

67 
	$BM_basic
(
b’chm¬k
::
S‹
& 
¡©e
) {

68 autØ
_
 : 
¡©e
) {

70 
	}
}

71 
BENCHMARK
(
BM_basic
);

73 
ADD_CASES
(
TC_CÚsŞeOut
, {{"^BM_basic %console_report$"}});

74 
ADD_CASES
(
TC_JSONOut
, {{"\"name\": \"BM_basic\",$"},

75 {"\"çmy_šdex\": 0,$", 
MR_Next
},

76 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

77 {"\"run_Çme\": \"BM_basic\",$", 
MR_Next
},

78 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

79 {"\"»³t™iÚs\": 1,$", 
MR_Next
},

80 {"\"»³t™iÚ_šdex\": 0,$", 
MR_Next
},

81 {"\"th»ads\": 1,$", 
MR_Next
},

82 {"\"™”©iÚs\": %št,$", 
MR_Next
},

83 {"\"»®_time\": %æßt,$", 
MR_Next
},

84 {"\"ıu_time\": %æßt,$", 
MR_Next
},

85 {"\"time_un™\": \"ns\"$", 
MR_Next
},

86 {"}", 
MR_Next
}});

87 
ADD_CASES
(
TC_CSVOut
, {{"^\"BM_basic\",%csv_report$"}});

93 
	$BM_by‹s_³r_£cÚd
(
b’chm¬k
::
S‹
& 
¡©e
) {

94 autØ
_
 : 
¡©e
) {

96 autØ
™”©iÚs
 = 
¡©e
.
	`™”©iÚs
();

97 
b’chm¬k
::
	`DoNÙO±imize
(
™”©iÚs
);

99 
¡©e
.
	`S‘By‹sProûs£d
(1);

100 
	}
}

101 
BENCHMARK
(
BM_by‹s_³r_£cÚd
);

103 
ADD_CASES
(
TC_CÚsŞeOut
, {{"^BM_bytes_per_second %console_report "

105 
ADD_CASES
(
TC_JSONOut
, {{"\"name\": \"BM_bytes_per_second\",$"},

106 {"\"çmy_šdex\": 1,$", 
MR_Next
},

107 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

108 {"\"run_Çme\": \"BM_by‹s_³r_£cÚd\",$", 
MR_Next
},

109 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

110 {"\"»³t™iÚs\": 1,$", 
MR_Next
},

111 {"\"»³t™iÚ_šdex\": 0,$", 
MR_Next
},

112 {"\"th»ads\": 1,$", 
MR_Next
},

113 {"\"™”©iÚs\": %št,$", 
MR_Next
},

114 {"\"»®_time\": %æßt,$", 
MR_Next
},

115 {"\"ıu_time\": %æßt,$", 
MR_Next
},

116 {"\"time_un™\": \"ns\",$", 
MR_Next
},

117 {"\"by‹s_³r_£cÚd\": %æßt$", 
MR_Next
},

118 {"}", 
MR_Next
}});

119 
ADD_CASES
(
TC_CSVOut
, {{"^\"BM_bytes_per_second\",%csv_bytes_report$"}});

125 
	$BM_™ems_³r_£cÚd
(
b’chm¬k
::
S‹
& 
¡©e
) {

126 autØ
_
 : 
¡©e
) {

128 autØ
™”©iÚs
 = 
¡©e
.
	`™”©iÚs
();

129 
b’chm¬k
::
	`DoNÙO±imize
(
™”©iÚs
);

131 
¡©e
.
	`S‘I‹msProûs£d
(1);

132 
	}
}

133 
BENCHMARK
(
BM_™ems_³r_£cÚd
);

135 
ADD_CASES
(
TC_CÚsŞeOut
, {{"^BM_items_per_second %console_report "

137 
ADD_CASES
(
TC_JSONOut
, {{"\"name\": \"BM_items_per_second\",$"},

138 {"\"çmy_šdex\": 2,$", 
MR_Next
},

139 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

140 {"\"run_Çme\": \"BM_™ems_³r_£cÚd\",$", 
MR_Next
},

141 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

142 {"\"»³t™iÚs\": 1,$", 
MR_Next
},

143 {"\"»³t™iÚ_šdex\": 0,$", 
MR_Next
},

144 {"\"th»ads\": 1,$", 
MR_Next
},

145 {"\"™”©iÚs\": %št,$", 
MR_Next
},

146 {"\"»®_time\": %æßt,$", 
MR_Next
},

147 {"\"ıu_time\": %æßt,$", 
MR_Next
},

148 {"\"time_un™\": \"ns\",$", 
MR_Next
},

149 {"\"™ems_³r_£cÚd\": %æßt$", 
MR_Next
},

150 {"}", 
MR_Next
}});

151 
ADD_CASES
(
TC_CSVOut
, {{"^\"BM_items_per_second\",%csv_items_report$"}});

157 
	$BM_Ïb–
(
b’chm¬k
::
S‹
& 
¡©e
) {

158 autØ
_
 : 
¡©e
) {

160 
¡©e
.
	`S‘Lab–
("some†abel");

161 
	}
}

162 
BENCHMARK
(
BM_Ïb–
);

164 
ADD_CASES
(
TC_CÚsŞeOut
, {{"^BM_label %console_report some†abel$"}});

165 
ADD_CASES
(
TC_JSONOut
, {{"\"name\": \"BM_label\",$"},

166 {"\"çmy_šdex\": 3,$", 
MR_Next
},

167 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

168 {"\"run_Çme\": \"BM_Ïb–\",$", 
MR_Next
},

169 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

170 {"\"»³t™iÚs\": 1,$", 
MR_Next
},

171 {"\"»³t™iÚ_šdex\": 0,$", 
MR_Next
},

172 {"\"th»ads\": 1,$", 
MR_Next
},

173 {"\"™”©iÚs\": %št,$", 
MR_Next
},

174 {"\"»®_time\": %æßt,$", 
MR_Next
},

175 {"\"ıu_time\": %æßt,$", 
MR_Next
},

176 {"\"time_un™\": \"ns\",$", 
MR_Next
},

177 {"\"Ïb–\": \"somÏb–\"$", 
MR_Next
},

178 {"}", 
MR_Next
}});

179 
ADD_CASES
(
TC_CSVOut
, {{"^\"BM_label\",%csv_label_report_begin\"some "

186 
	$BM_time_Ïb–_Çno£cÚd
(
b’chm¬k
::
S‹
& 
¡©e
) {

187 autØ
_
 : 
¡©e
) {

189 
	}
}

190 
BENCHMARK
(
BM_time_Ïb–_Çno£cÚd
)->
Un™
(
b’chm¬k
::
kNªo£cÚd
);

192 
ADD_CASES
(
TC_CÚsŞeOut
, {{"^BM_time_label_nanosecond %console_report$"}});

193 
ADD_CASES
(
TC_JSONOut
,

195 {"\"çmy_šdex\": 4,$", 
MR_Next
},

196 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

197 {"\"run_Çme\": \"BM_time_Ïb–_Çno£cÚd\",$", 
MR_Next
},

198 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

199 {"\"»³t™iÚs\": 1,$", 
MR_Next
},

200 {"\"»³t™iÚ_šdex\": 0,$", 
MR_Next
},

201 {"\"th»ads\": 1,$", 
MR_Next
},

202 {"\"™”©iÚs\": %št,$", 
MR_Next
},

203 {"\"»®_time\": %æßt,$", 
MR_Next
},

204 {"\"ıu_time\": %æßt,$", 
MR_Next
},

205 {"\"time_un™\": \"ns\"$", 
MR_Next
},

206 {"}", 
MR_Next
}});

207 
ADD_CASES
(
TC_CSVOut
, {{"^\"BM_time_label_nanosecond\",%csv_report$"}});

209 
	$BM_time_Ïb–_miüo£cÚd
(
b’chm¬k
::
S‹
& 
¡©e
) {

210 autØ
_
 : 
¡©e
) {

212 
	}
}

213 
BENCHMARK
(
BM_time_Ïb–_miüo£cÚd
)->
Un™
(
b’chm¬k
::
kMiüo£cÚd
);

215 
ADD_CASES
(
TC_CÚsŞeOut
, {{"^BM_time_label_microsecond %console_us_report$"}});

216 
ADD_CASES
(
TC_JSONOut
,

218 {"\"çmy_šdex\": 5,$", 
MR_Next
},

219 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

220 {"\"run_Çme\": \"BM_time_Ïb–_miüo£cÚd\",$", 
MR_Next
},

221 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

222 {"\"»³t™iÚs\": 1,$", 
MR_Next
},

223 {"\"»³t™iÚ_šdex\": 0,$", 
MR_Next
},

224 {"\"th»ads\": 1,$", 
MR_Next
},

225 {"\"™”©iÚs\": %št,$", 
MR_Next
},

226 {"\"»®_time\": %æßt,$", 
MR_Next
},

227 {"\"ıu_time\": %æßt,$", 
MR_Next
},

228 {"\"time_un™\": \"us\"$", 
MR_Next
},

229 {"}", 
MR_Next
}});

230 
ADD_CASES
(
TC_CSVOut
, {{"^\"BM_time_label_microsecond\",%csv_us_report$"}});

232 
	$BM_time_Ïb–_mli£cÚd
(
b’chm¬k
::
S‹
& 
¡©e
) {

233 autØ
_
 : 
¡©e
) {

235 
	}
}

236 
BENCHMARK
(
BM_time_Ïb–_mli£cÚd
)->
Un™
(
b’chm¬k
::
kMli£cÚd
);

238 
ADD_CASES
(
TC_CÚsŞeOut
, {{"^BM_time_label_millisecond %console_ms_report$"}});

239 
ADD_CASES
(
TC_JSONOut
,

241 {"\"çmy_šdex\": 6,$", 
MR_Next
},

242 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

243 {"\"run_Çme\": \"BM_time_Ïb–_mli£cÚd\",$", 
MR_Next
},

244 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

245 {"\"»³t™iÚs\": 1,$", 
MR_Next
},

246 {"\"»³t™iÚ_šdex\": 0,$", 
MR_Next
},

247 {"\"th»ads\": 1,$", 
MR_Next
},

248 {"\"™”©iÚs\": %št,$", 
MR_Next
},

249 {"\"»®_time\": %æßt,$", 
MR_Next
},

250 {"\"ıu_time\": %æßt,$", 
MR_Next
},

251 {"\"time_un™\": \"ms\"$", 
MR_Next
},

252 {"}", 
MR_Next
}});

253 
ADD_CASES
(
TC_CSVOut
, {{"^\"BM_time_label_millisecond\",%csv_ms_report$"}});

255 
	$BM_time_Ïb–_£cÚd
(
b’chm¬k
::
S‹
& 
¡©e
) {

256 autØ
_
 : 
¡©e
) {

258 
	}
}

259 
BENCHMARK
(
BM_time_Ïb–_£cÚd
)->
Un™
(
b’chm¬k
::
kSecÚd
);

261 
ADD_CASES
(
TC_CÚsŞeOut
, {{"^BM_time_label_second %console_s_report$"}});

262 
ADD_CASES
(
TC_JSONOut
, {{"\"name\": \"BM_time_label_second\",$"},

263 {"\"çmy_šdex\": 7,$", 
MR_Next
},

264 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

265 {"\"run_Çme\": \"BM_time_Ïb–_£cÚd\",$", 
MR_Next
},

266 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

267 {"\"»³t™iÚs\": 1,$", 
MR_Next
},

268 {"\"»³t™iÚ_šdex\": 0,$", 
MR_Next
},

269 {"\"th»ads\": 1,$", 
MR_Next
},

270 {"\"™”©iÚs\": %št,$", 
MR_Next
},

271 {"\"»®_time\": %æßt,$", 
MR_Next
},

272 {"\"ıu_time\": %æßt,$", 
MR_Next
},

273 {"\"time_un™\": \"s\"$", 
MR_Next
},

274 {"}", 
MR_Next
}});

275 
ADD_CASES
(
TC_CSVOut
, {{"^\"BM_time_label_second\",%csv_s_report$"}});

281 
	$BM_”rÜ
(
b’chm¬k
::
S‹
& 
¡©e
) {

282 
¡©e
.
	`SkW™hE¼Ü
("message");

283 autØ
_
 : 
¡©e
) {

285 
	}
}

286 
BENCHMARK
(
BM_”rÜ
);

287 
ADD_CASES
(
TC_CÚsŞeOut
, {{"^BM_error[ ]+ERROR OCCURRED: 'message'$"}});

288 
ADD_CASES
(
TC_JSONOut
, {{"\"name\": \"BM_error\",$"},

289 {"\"çmy_šdex\": 8,$", 
MR_Next
},

290 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

291 {"\"run_Çme\": \"BM_”rÜ\",$", 
MR_Next
},

292 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

293 {"\"»³t™iÚs\": 1,$", 
MR_Next
},

294 {"\"»³t™iÚ_šdex\": 0,$", 
MR_Next
},

295 {"\"th»ads\": 1,$", 
MR_Next
},

296 {"\"”rÜ_occu¼ed\":rue,$", 
MR_Next
},

297 {"\"”rÜ_mes§ge\": \"mes§ge\",$", 
MR_Next
}});

299 
ADD_CASES
(
TC_CSVOut
, {{"^\"BM_error\",,,,,,,,true,\"message\"$"}});

306 
	$BM_no_¬g_Çme
(
b’chm¬k
::
S‹
& 
¡©e
) {

307 autØ
_
 : 
¡©e
) {

309 
	}
}

310 
BENCHMARK
(
BM_no_¬g_Çme
)->
Arg
(3);

311 
ADD_CASES
(
TC_CÚsŞeOut
, {{"^BM_no_arg_name/3 %console_report$"}});

312 
ADD_CASES
(
TC_JSONOut
, {{"\"name\": \"BM_no_arg_name/3\",$"},

313 {"\"çmy_šdex\": 9,$", 
MR_Next
},

314 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

315 {"\"run_Çme\": \"BM_no_¬g_Çme/3\",$", 
MR_Next
},

316 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

317 {"\"»³t™iÚs\": 1,$", 
MR_Next
},

318 {"\"»³t™iÚ_šdex\": 0,$", 
MR_Next
},

319 {"\"th»ads\": 1,$", 
MR_Next
}});

320 
ADD_CASES
(
TC_CSVOut
, {{"^\"BM_no_arg_name/3\",%csv_report$"}});

326 
	$BM_¬g_Çme
(
b’chm¬k
::
S‹
& 
¡©e
) {

327 autØ
_
 : 
¡©e
) {

329 
	}
}

330 
BENCHMARK
(
BM_¬g_Çme
)->
ArgName
("fœ¡")->
Arg
(3);

331 
ADD_CASES
(
TC_CÚsŞeOut
, {{"^BM_arg_name/first:3 %console_report$"}});

332 
ADD_CASES
(
TC_JSONOut
, {{"\"name\": \"BM_arg_name/first:3\",$"},

333 {"\"çmy_šdex\": 10,$", 
MR_Next
},

334 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

335 {"\"run_Çme\": \"BM_¬g_Çme/fœ¡:3\",$", 
MR_Next
},

336 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

337 {"\"»³t™iÚs\": 1,$", 
MR_Next
},

338 {"\"»³t™iÚ_šdex\": 0,$", 
MR_Next
},

339 {"\"th»ads\": 1,$", 
MR_Next
}});

340 
ADD_CASES
(
TC_CSVOut
, {{"^\"BM_arg_name/first:3\",%csv_report$"}});

346 
	$BM_¬g_Çmes
(
b’chm¬k
::
S‹
& 
¡©e
) {

347 autØ
_
 : 
¡©e
) {

349 
	}
}

350 
BENCHMARK
(
BM_¬g_Çmes
)->
Args
({2, 5, 4})->
ArgNames
({"first", "", "third"});

351 
ADD_CASES
(
TC_CÚsŞeOut
,

353 
ADD_CASES
(
TC_JSONOut
,

355 {"\"çmy_šdex\": 11,$", 
MR_Next
},

356 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

357 {"\"run_Çme\": \"BM_¬g_Çmes/fœ¡:2/5/thœd:4\",$", 
MR_Next
},

358 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

359 {"\"»³t™iÚs\": 1,$", 
MR_Next
},

360 {"\"»³t™iÚ_šdex\": 0,$", 
MR_Next
},

361 {"\"th»ads\": 1,$", 
MR_Next
}});

362 
ADD_CASES
(
TC_CSVOut
, {{"^\"BM_arg_names/first:2/5/third:4\",%csv_report$"}});

368 
	$BM_Çme
(
b’chm¬k
::
S‹
& 
¡©e
) {

369 autØ
_
 : 
¡©e
) {

371 
	}
}

372 
BENCHMARK
(
BM_Çme
)->
Name
("BM_custom_name");

374 
ADD_CASES
(
TC_CÚsŞeOut
, {{"^BM_custom_name %console_report$"}});

375 
ADD_CASES
(
TC_JSONOut
, {{"\"name\": \"BM_custom_name\",$"},

376 {"\"çmy_šdex\": 12,$", 
MR_Next
},

377 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

378 {"\"run_Çme\": \"BM_cu¡om_Çme\",$", 
MR_Next
},

379 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

380 {"\"»³t™iÚs\": 1,$", 
MR_Next
},

381 {"\"»³t™iÚ_šdex\": 0,$", 
MR_Next
},

382 {"\"th»ads\": 1,$", 
MR_Next
},

383 {"\"™”©iÚs\": %št,$", 
MR_Next
},

384 {"\"»®_time\": %æßt,$", 
MR_Next
},

385 {"\"ıu_time\": %æßt,$", 
MR_Next
},

386 {"\"time_un™\": \"ns\"$", 
MR_Next
},

387 {"}", 
MR_Next
}});

388 
ADD_CASES
(
TC_CSVOut
, {{"^\"BM_custom_name\",%csv_report$"}});

394 
	$BM_BigArgs
(
b’chm¬k
::
S‹
& 
¡©e
) {

395 autØ
_
 : 
¡©e
) {

397 
	}
}

398 
BENCHMARK
(
BM_BigArgs
)->
RªgeMuÉl›r
(2)->
Rªge
(1U << 30U, 1U << 31U);

399 
ADD_CASES
(
TC_CÚsŞeOut
, {{"^BM_BigArgs/1073741824 %console_report$"},

406 
	$BM_Com¶ex™y_O1
(
b’chm¬k
::
S‹
& 
¡©e
) {

407 autØ
_
 : 
¡©e
) {

409 autØ
™”©iÚs
 = 
¡©e
.
	`™”©iÚs
();

410 
b’chm¬k
::
	`DoNÙO±imize
(
™”©iÚs
);

412 
¡©e
.
	`S‘Com¶ex™yN
(¡©e.
	`¿nge
(0));

413 
	}
}

414 
BENCHMARK
(
BM_Com¶ex™y_O1
)->
Rªge
(1, 1 << 18)->
Com¶ex™y
(
b’chm¬k
::
o1
);

415 
SET_SUBSTITUTIONS
({{"%bigOStr", "[ ]* %float \\([0-9]+\\)"},

417 
ADD_CASES
(
TC_CÚsŞeOut
, {{"^BM_Complexity_O1_BigO %bigOStr %bigOStr[ ]*$"},

425 
	$BM_R•—t
(
b’chm¬k
::
S‹
& 
¡©e
) {

426 autØ
_
 : 
¡©e
) {

428 
	}
}

430 
BENCHMARK
(
BM_R•—t
)->
R•‘™iÚs
(2);

431 
ADD_CASES
(
TC_CÚsŞeOut
,

437 
ADD_CASES
(
TC_JSONOut
, {{"\"name\": \"BM_Repeat/repeats:2\",$"},

438 {"\"çmy_šdex\": 15,$", 
MR_Next
},

439 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

440 {"\"run_Çme\": \"BM_R•—t/»³©s:2\"", 
MR_Next
},

441 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

442 {"\"»³t™iÚs\": 2,$", 
MR_Next
},

443 {"\"»³t™iÚ_šdex\": 0,$", 
MR_Next
},

444 {"\"th»ads\": 1,$", 
MR_Next
},

446 {"\"çmy_šdex\": 15,$", 
MR_Next
},

447 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

448 {"\"run_Çme\": \"BM_R•—t/»³©s:2\",$", 
MR_Next
},

449 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

450 {"\"»³t™iÚs\": 2,$", 
MR_Next
},

451 {"\"»³t™iÚ_šdex\": 1,$", 
MR_Next
},

452 {"\"th»ads\": 1,$", 
MR_Next
},

454 {"\"çmy_šdex\": 15,$", 
MR_Next
},

455 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

456 {"\"run_Çme\": \"BM_R•—t/»³©s:2\",$", 
MR_Next
},

457 {"\"run_ty³\": \"agg»g©e\",$", 
MR_Next
},

458 {"\"»³t™iÚs\": 2,$", 
MR_Next
},

459 {"\"th»ads\": 1,$", 
MR_Next
},

460 {"\"agg»g©e_Çme\": \"m—n\",$", 
MR_Next
},

461 {"\"agg»g©e_un™\": \"time\",$", 
MR_Next
},

462 {"\"™”©iÚs\": 2,$", 
MR_Next
},

464 {"\"çmy_šdex\": 15,$", 
MR_Next
},

465 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

466 {"\"run_Çme\": \"BM_R•—t/»³©s:2\",$", 
MR_Next
},

467 {"\"run_ty³\": \"agg»g©e\",$", 
MR_Next
},

468 {"\"»³t™iÚs\": 2,$", 
MR_Next
},

469 {"\"th»ads\": 1,$", 
MR_Next
},

470 {"\"agg»g©e_Çme\": \"medŸn\",$", 
MR_Next
},

471 {"\"agg»g©e_un™\": \"time\",$", 
MR_Next
},

472 {"\"™”©iÚs\": 2,$", 
MR_Next
},

474 {"\"çmy_šdex\": 15,$", 
MR_Next
},

475 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

476 {"\"run_Çme\": \"BM_R•—t/»³©s:2\",$", 
MR_Next
},

477 {"\"run_ty³\": \"agg»g©e\",$", 
MR_Next
},

478 {"\"»³t™iÚs\": 2,$", 
MR_Next
},

479 {"\"th»ads\": 1,$", 
MR_Next
},

480 {"\"agg»g©e_Çme\": \"¡ddev\",$", 
MR_Next
},

481 {"\"agg»g©e_un™\": \"time\",$", 
MR_Next
},

482 {"\"™”©iÚs\": 2,$", 
MR_Next
}});

483 
ADD_CASES
(
TC_CSVOut
, {{"^\"BM_Repeat/repeats:2\",%csv_report$"},

489 
BENCHMARK
(
BM_R•—t
)->
R•‘™iÚs
(3);

490 
ADD_CASES
(
TC_CÚsŞeOut
,

497 
ADD_CASES
(
TC_JSONOut
, {{"\"name\": \"BM_Repeat/repeats:3\",$"},

498 {"\"çmy_šdex\": 16,$", 
MR_Next
},

499 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

500 {"\"run_Çme\": \"BM_R•—t/»³©s:3\",$", 
MR_Next
},

501 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

502 {"\"»³t™iÚs\": 3,$", 
MR_Next
},

503 {"\"»³t™iÚ_šdex\": 0,$", 
MR_Next
},

504 {"\"th»ads\": 1,$", 
MR_Next
},

506 {"\"çmy_šdex\": 16,$", 
MR_Next
},

507 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

508 {"\"run_Çme\": \"BM_R•—t/»³©s:3\",$", 
MR_Next
},

509 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

510 {"\"»³t™iÚs\": 3,$", 
MR_Next
},

511 {"\"»³t™iÚ_šdex\": 1,$", 
MR_Next
},

512 {"\"th»ads\": 1,$", 
MR_Next
},

514 {"\"çmy_šdex\": 16,$", 
MR_Next
},

515 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

516 {"\"run_Çme\": \"BM_R•—t/»³©s:3\",$", 
MR_Next
},

517 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

518 {"\"»³t™iÚs\": 3,$", 
MR_Next
},

519 {"\"»³t™iÚ_šdex\": 2,$", 
MR_Next
},

520 {"\"th»ads\": 1,$", 
MR_Next
},

522 {"\"çmy_šdex\": 16,$", 
MR_Next
},

523 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

524 {"\"run_Çme\": \"BM_R•—t/»³©s:3\",$", 
MR_Next
},

525 {"\"run_ty³\": \"agg»g©e\",$", 
MR_Next
},

526 {"\"»³t™iÚs\": 3,$", 
MR_Next
},

527 {"\"th»ads\": 1,$", 
MR_Next
},

528 {"\"agg»g©e_Çme\": \"m—n\",$", 
MR_Next
},

529 {"\"agg»g©e_un™\": \"time\",$", 
MR_Next
},

530 {"\"™”©iÚs\": 3,$", 
MR_Next
},

532 {"\"çmy_šdex\": 16,$", 
MR_Next
},

533 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

534 {"\"run_Çme\": \"BM_R•—t/»³©s:3\",$", 
MR_Next
},

535 {"\"run_ty³\": \"agg»g©e\",$", 
MR_Next
},

536 {"\"»³t™iÚs\": 3,$", 
MR_Next
},

537 {"\"th»ads\": 1,$", 
MR_Next
},

538 {"\"agg»g©e_Çme\": \"medŸn\",$", 
MR_Next
},

539 {"\"agg»g©e_un™\": \"time\",$", 
MR_Next
},

540 {"\"™”©iÚs\": 3,$", 
MR_Next
},

542 {"\"çmy_šdex\": 16,$", 
MR_Next
},

543 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

544 {"\"run_Çme\": \"BM_R•—t/»³©s:3\",$", 
MR_Next
},

545 {"\"run_ty³\": \"agg»g©e\",$", 
MR_Next
},

546 {"\"»³t™iÚs\": 3,$", 
MR_Next
},

547 {"\"th»ads\": 1,$", 
MR_Next
},

548 {"\"agg»g©e_Çme\": \"¡ddev\",$", 
MR_Next
},

549 {"\"agg»g©e_un™\": \"time\",$", 
MR_Next
},

550 {"\"™”©iÚs\": 3,$", 
MR_Next
}});

551 
ADD_CASES
(
TC_CSVOut
, {{"^\"BM_Repeat/repeats:3\",%csv_report$"},

558 
BENCHMARK
(
BM_R•—t
)->
R•‘™iÚs
(4);

559 
ADD_CASES
(
TC_CÚsŞeOut
,

567 
ADD_CASES
(
TC_JSONOut
, {{"\"name\": \"BM_Repeat/repeats:4\",$"},

568 {"\"çmy_šdex\": 17,$", 
MR_Next
},

569 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

570 {"\"run_Çme\": \"BM_R•—t/»³©s:4\",$", 
MR_Next
},

571 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

572 {"\"»³t™iÚs\": 4,$", 
MR_Next
},

573 {"\"»³t™iÚ_šdex\": 0,$", 
MR_Next
},

574 {"\"th»ads\": 1,$", 
MR_Next
},

576 {"\"çmy_šdex\": 17,$", 
MR_Next
},

577 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

578 {"\"run_Çme\": \"BM_R•—t/»³©s:4\",$", 
MR_Next
},

579 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

580 {"\"»³t™iÚs\": 4,$", 
MR_Next
},

581 {"\"»³t™iÚ_šdex\": 1,$", 
MR_Next
},

582 {"\"th»ads\": 1,$", 
MR_Next
},

584 {"\"çmy_šdex\": 17,$", 
MR_Next
},

585 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

586 {"\"run_Çme\": \"BM_R•—t/»³©s:4\",$", 
MR_Next
},

587 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

588 {"\"»³t™iÚs\": 4,$", 
MR_Next
},

589 {"\"»³t™iÚ_šdex\": 2,$", 
MR_Next
},

590 {"\"th»ads\": 1,$", 
MR_Next
},

592 {"\"çmy_šdex\": 17,$", 
MR_Next
},

593 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

594 {"\"run_Çme\": \"BM_R•—t/»³©s:4\",$", 
MR_Next
},

595 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

596 {"\"»³t™iÚs\": 4,$", 
MR_Next
},

597 {"\"»³t™iÚ_šdex\": 3,$", 
MR_Next
},

598 {"\"th»ads\": 1,$", 
MR_Next
},

600 {"\"çmy_šdex\": 17,$", 
MR_Next
},

601 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

602 {"\"run_Çme\": \"BM_R•—t/»³©s:4\",$", 
MR_Next
},

603 {"\"run_ty³\": \"agg»g©e\",$", 
MR_Next
},

604 {"\"»³t™iÚs\": 4,$", 
MR_Next
},

605 {"\"th»ads\": 1,$", 
MR_Next
},

606 {"\"agg»g©e_Çme\": \"m—n\",$", 
MR_Next
},

607 {"\"agg»g©e_un™\": \"time\",$", 
MR_Next
},

608 {"\"™”©iÚs\": 4,$", 
MR_Next
},

610 {"\"çmy_šdex\": 17,$", 
MR_Next
},

611 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

612 {"\"run_Çme\": \"BM_R•—t/»³©s:4\",$", 
MR_Next
},

613 {"\"run_ty³\": \"agg»g©e\",$", 
MR_Next
},

614 {"\"»³t™iÚs\": 4,$", 
MR_Next
},

615 {"\"th»ads\": 1,$", 
MR_Next
},

616 {"\"agg»g©e_Çme\": \"medŸn\",$", 
MR_Next
},

617 {"\"agg»g©e_un™\": \"time\",$", 
MR_Next
},

618 {"\"™”©iÚs\": 4,$", 
MR_Next
},

620 {"\"çmy_šdex\": 17,$", 
MR_Next
},

621 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

622 {"\"run_Çme\": \"BM_R•—t/»³©s:4\",$", 
MR_Next
},

623 {"\"run_ty³\": \"agg»g©e\",$", 
MR_Next
},

624 {"\"»³t™iÚs\": 4,$", 
MR_Next
},

625 {"\"th»ads\": 1,$", 
MR_Next
},

626 {"\"agg»g©e_Çme\": \"¡ddev\",$", 
MR_Next
},

627 {"\"agg»g©e_un™\": \"time\",$", 
MR_Next
},

628 {"\"™”©iÚs\": 4,$", 
MR_Next
}});

629 
ADD_CASES
(
TC_CSVOut
, {{"^\"BM_Repeat/repeats:4\",%csv_report$"},

639 
	$BM_R•—tOnû
(
b’chm¬k
::
S‹
& 
¡©e
) {

640 autØ
_
 : 
¡©e
) {

642 
	}
}

643 
BENCHMARK
(
BM_R•—tOnû
)->
R•‘™iÚs
(1)->
R•ÜtAgg»g©esOÆy
();

644 
ADD_CASES
(
TC_CÚsŞeOut
, {{"^BM_RepeatOnce/repeats:1 %console_report$"}});

645 
ADD_CASES
(
TC_JSONOut
, {{"\"name\": \"BM_RepeatOnce/repeats:1\",$"},

646 {"\"çmy_šdex\": 18,$", 
MR_Next
},

647 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

648 {"\"run_Çme\": \"BM_R•—tOnû/»³©s:1\",$", 
MR_Next
},

649 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

650 {"\"»³t™iÚs\": 1,$", 
MR_Next
},

651 {"\"»³t™iÚ_šdex\": 0,$", 
MR_Next
},

652 {"\"th»ads\": 1,$", 
MR_Next
}});

653 
ADD_CASES
(
TC_CSVOut
, {{"^\"BM_RepeatOnce/repeats:1\",%csv_report$"}});

656 
	$BM_Summ¬yR•—t
(
b’chm¬k
::
S‹
& 
¡©e
) {

657 autØ
_
 : 
¡©e
) {

659 
	}
}

660 
BENCHMARK
(
BM_Summ¬yR•—t
)->
R•‘™iÚs
(3)->
R•ÜtAgg»g©esOÆy
();

661 
ADD_CASES
(

662 
TC_CÚsŞeOut
,

663 {{".*BM_Summ¬yR•—t/»³©s:3 ", 
MR_NÙ
},

667 
ADD_CASES
(
TC_JSONOut
,

668 {{".*BM_Summ¬yR•—t/»³©s:3 ", 
MR_NÙ
},

670 {"\"çmy_šdex\": 19,$", 
MR_Next
},

671 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

672 {"\"run_Çme\": \"BM_Summ¬yR•—t/»³©s:3\",$", 
MR_Next
},

673 {"\"run_ty³\": \"agg»g©e\",$", 
MR_Next
},

674 {"\"»³t™iÚs\": 3,$", 
MR_Next
},

675 {"\"th»ads\": 1,$", 
MR_Next
},

676 {"\"agg»g©e_Çme\": \"m—n\",$", 
MR_Next
},

677 {"\"agg»g©e_un™\": \"time\",$", 
MR_Next
},

678 {"\"™”©iÚs\": 3,$", 
MR_Next
},

680 {"\"çmy_šdex\": 19,$", 
MR_Next
},

681 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

682 {"\"run_Çme\": \"BM_Summ¬yR•—t/»³©s:3\",$", 
MR_Next
},

683 {"\"run_ty³\": \"agg»g©e\",$", 
MR_Next
},

684 {"\"»³t™iÚs\": 3,$", 
MR_Next
},

685 {"\"th»ads\": 1,$", 
MR_Next
},

686 {"\"agg»g©e_Çme\": \"medŸn\",$", 
MR_Next
},

687 {"\"agg»g©e_un™\": \"time\",$", 
MR_Next
},

688 {"\"™”©iÚs\": 3,$", 
MR_Next
},

690 {"\"çmy_šdex\": 19,$", 
MR_Next
},

691 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

692 {"\"run_Çme\": \"BM_Summ¬yR•—t/»³©s:3\",$", 
MR_Next
},

693 {"\"run_ty³\": \"agg»g©e\",$", 
MR_Next
},

694 {"\"»³t™iÚs\": 3,$", 
MR_Next
},

695 {"\"th»ads\": 1,$", 
MR_Next
},

696 {"\"agg»g©e_Çme\": \"¡ddev\",$", 
MR_Next
},

697 {"\"agg»g©e_un™\": \"time\",$", 
MR_Next
},

698 {"\"™”©iÚs\": 3,$", 
MR_Next
}});

699 
ADD_CASES
(
TC_CSVOut
, {{".*BM_Summ¬yR•—t/»³©s:3 ", 
MR_NÙ
},

707 
	$BM_Summ¬yDi¥Ïy
(
b’chm¬k
::
S‹
& 
¡©e
) {

708 autØ
_
 : 
¡©e
) {

710 
	}
}

711 
BENCHMARK
(
BM_Summ¬yDi¥Ïy
)->
R•‘™iÚs
(2)->
Di¥ÏyAgg»g©esOÆy
();

712 
ADD_CASES
(

713 
TC_CÚsŞeOut
,

714 {{".*BM_Summ¬yDi¥Ïy/»³©s:2 ", 
MR_NÙ
},

718 
ADD_CASES
(
TC_JSONOut
,

719 {{".*BM_Summ¬yDi¥Ïy/»³©s:2 ", 
MR_NÙ
},

721 {"\"çmy_šdex\": 20,$", 
MR_Next
},

722 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

723 {"\"run_Çme\": \"BM_Summ¬yDi¥Ïy/»³©s:2\",$", 
MR_Next
},

724 {"\"run_ty³\": \"agg»g©e\",$", 
MR_Next
},

725 {"\"»³t™iÚs\": 2,$", 
MR_Next
},

726 {"\"th»ads\": 1,$", 
MR_Next
},

727 {"\"agg»g©e_Çme\": \"m—n\",$", 
MR_Next
},

728 {"\"agg»g©e_un™\": \"time\",$", 
MR_Next
},

729 {"\"™”©iÚs\": 2,$", 
MR_Next
},

731 {"\"çmy_šdex\": 20,$", 
MR_Next
},

732 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

733 {"\"run_Çme\": \"BM_Summ¬yDi¥Ïy/»³©s:2\",$", 
MR_Next
},

734 {"\"run_ty³\": \"agg»g©e\",$", 
MR_Next
},

735 {"\"»³t™iÚs\": 2,$", 
MR_Next
},

736 {"\"th»ads\": 1,$", 
MR_Next
},

737 {"\"agg»g©e_Çme\": \"medŸn\",$", 
MR_Next
},

738 {"\"agg»g©e_un™\": \"time\",$", 
MR_Next
},

739 {"\"™”©iÚs\": 2,$", 
MR_Next
},

741 {"\"çmy_šdex\": 20,$", 
MR_Next
},

742 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

743 {"\"run_Çme\": \"BM_Summ¬yDi¥Ïy/»³©s:2\",$", 
MR_Next
},

744 {"\"run_ty³\": \"agg»g©e\",$", 
MR_Next
},

745 {"\"»³t™iÚs\": 2,$", 
MR_Next
},

746 {"\"th»ads\": 1,$", 
MR_Next
},

747 {"\"agg»g©e_Çme\": \"¡ddev\",$", 
MR_Next
},

748 {"\"agg»g©e_un™\": \"time\",$", 
MR_Next
},

749 {"\"™”©iÚs\": 2,$", 
MR_Next
}});

750 
ADD_CASES
(
TC_CSVOut
,

751 {{".*BM_Summ¬yDi¥Ïy/»³©s:2 ", 
MR_NÙ
},

757 
	$BM_R•—tTimeUn™
(
b’chm¬k
::
S‹
& 
¡©e
) {

758 autØ
_
 : 
¡©e
) {

760 
	}
}

761 
BENCHMARK
(
BM_R•—tTimeUn™
)

762 ->
R•‘™iÚs
(3)

763 ->
R•ÜtAgg»g©esOÆy
()

764 ->
Un™
(
b’chm¬k
::
kMiüo£cÚd
);

765 
ADD_CASES
(

766 
TC_CÚsŞeOut
,

767 {{".*BM_R•—tTimeUn™/»³©s:3 ", 
MR_NÙ
},

773 
ADD_CASES
(
TC_JSONOut
,

774 {{".*BM_R•—tTimeUn™/»³©s:3 ", 
MR_NÙ
},

776 {"\"çmy_šdex\": 21,$", 
MR_Next
},

777 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

778 {"\"run_Çme\": \"BM_R•—tTimeUn™/»³©s:3\",$", 
MR_Next
},

779 {"\"run_ty³\": \"agg»g©e\",$", 
MR_Next
},

780 {"\"»³t™iÚs\": 3,$", 
MR_Next
},

781 {"\"th»ads\": 1,$", 
MR_Next
},

782 {"\"agg»g©e_Çme\": \"m—n\",$", 
MR_Next
},

783 {"\"agg»g©e_un™\": \"time\",$", 
MR_Next
},

784 {"\"™”©iÚs\": 3,$", 
MR_Next
},

787 {"\"çmy_šdex\": 21,$", 
MR_Next
},

788 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

789 {"\"run_Çme\": \"BM_R•—tTimeUn™/»³©s:3\",$", 
MR_Next
},

790 {"\"run_ty³\": \"agg»g©e\",$", 
MR_Next
},

791 {"\"»³t™iÚs\": 3,$", 
MR_Next
},

792 {"\"th»ads\": 1,$", 
MR_Next
},

793 {"\"agg»g©e_Çme\": \"medŸn\",$", 
MR_Next
},

794 {"\"agg»g©e_un™\": \"time\",$", 
MR_Next
},

795 {"\"™”©iÚs\": 3,$", 
MR_Next
},

798 {"\"çmy_šdex\": 21,$", 
MR_Next
},

799 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

800 {"\"run_Çme\": \"BM_R•—tTimeUn™/»³©s:3\",$", 
MR_Next
},

801 {"\"run_ty³\": \"agg»g©e\",$", 
MR_Next
},

802 {"\"»³t™iÚs\": 3,$", 
MR_Next
},

803 {"\"th»ads\": 1,$", 
MR_Next
},

804 {"\"agg»g©e_Çme\": \"¡ddev\",$", 
MR_Next
},

805 {"\"agg»g©e_un™\": \"time\",$", 
MR_Next
},

806 {"\"™”©iÚs\": 3,$", 
MR_Next
},

808 
ADD_CASES
(
TC_CSVOut
,

809 {{".*BM_R•—tTimeUn™/»³©s:3 ", 
MR_NÙ
},

818 cÚ¡‡utØ
	gU£rSti¡ics
 = [](cÚ¡ 
¡d
::
veùÜ
<>& 
v
) {

819  
v
.
back
();

821 
	$BM_U£rSts
(
b’chm¬k
::
S‹
& 
¡©e
) {

822 autØ
_
 : 
¡©e
) {

823 
¡©e
.
	`S‘I‹¿tiÚTime
(150 / 10e8);

825 
	}
}

827 
BENCHMARK
(
BM_U£rSts
)

828 ->
R•‘™iÚs
(3)

829 ->
I‹¿tiÚs
(5)

830 ->
U£Mªu®Time
()

831 ->
Compu‹Sti¡ics
("", 
U£rSti¡ics
);

836 
ADD_CASES
(
TC_CÚsŞeOut
, {{"^BM_UserStats/iterations:5/repeats:3/manual_time [ "

850 
ADD_CASES
(

851 
TC_JSONOut
,

853 {"\"çmy_šdex\": 22,$", 
MR_Next
},

854 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

856 
MR_Next
},

857 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

858 {"\"»³t™iÚs\": 3,$", 
MR_Next
},

859 {"\"»³t™iÚ_šdex\": 0,$", 
MR_Next
},

860 {"\"th»ads\": 1,$", 
MR_Next
},

861 {"\"™”©iÚs\": 5,$", 
MR_Next
},

862 {"\"»®_time\": 1\\.5(0)*e\\+(0)*2,$", 
MR_Next
},

864 {"\"çmy_šdex\": 22,$", 
MR_Next
},

865 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

867 
MR_Next
},

868 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

869 {"\"»³t™iÚs\": 3,$", 
MR_Next
},

870 {"\"»³t™iÚ_šdex\": 1,$", 
MR_Next
},

871 {"\"th»ads\": 1,$", 
MR_Next
},

872 {"\"™”©iÚs\": 5,$", 
MR_Next
},

873 {"\"»®_time\": 1\\.5(0)*e\\+(0)*2,$", 
MR_Next
},

875 {"\"çmy_šdex\": 22,$", 
MR_Next
},

876 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

878 
MR_Next
},

879 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

880 {"\"»³t™iÚs\": 3,$", 
MR_Next
},

881 {"\"»³t™iÚ_šdex\": 2,$", 
MR_Next
},

882 {"\"th»ads\": 1,$", 
MR_Next
},

883 {"\"™”©iÚs\": 5,$", 
MR_Next
},

884 {"\"»®_time\": 1\\.5(0)*e\\+(0)*2,$", 
MR_Next
},

886 {"\"çmy_šdex\": 22,$", 
MR_Next
},

887 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

889 
MR_Next
},

890 {"\"run_ty³\": \"agg»g©e\",$", 
MR_Next
},

891 {"\"»³t™iÚs\": 3,$", 
MR_Next
},

892 {"\"th»ads\": 1,$", 
MR_Next
},

893 {"\"agg»g©e_Çme\": \"m—n\",$", 
MR_Next
},

894 {"\"agg»g©e_un™\": \"time\",$", 
MR_Next
},

895 {"\"™”©iÚs\": 3,$", 
MR_Next
},

896 {"\"»®_time\": 1\\.5(0)*e\\+(0)*2,$", 
MR_Next
},

898 {"\"çmy_šdex\": 22,$", 
MR_Next
},

899 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

901 
MR_Next
},

902 {"\"run_ty³\": \"agg»g©e\",$", 
MR_Next
},

903 {"\"»³t™iÚs\": 3,$", 
MR_Next
},

904 {"\"th»ads\": 1,$", 
MR_Next
},

905 {"\"agg»g©e_Çme\": \"medŸn\",$", 
MR_Next
},

906 {"\"agg»g©e_un™\": \"time\",$", 
MR_Next
},

907 {"\"™”©iÚs\": 3,$", 
MR_Next
},

908 {"\"»®_time\": 1\\.5(0)*e\\+(0)*2,$", 
MR_Next
},

910 {"\"çmy_šdex\": 22,$", 
MR_Next
},

911 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

913 
MR_Next
},

914 {"\"run_ty³\": \"agg»g©e\",$", 
MR_Next
},

915 {"\"»³t™iÚs\": 3,$", 
MR_Next
},

916 {"\"th»ads\": 1,$", 
MR_Next
},

917 {"\"agg»g©e_Çme\": \"¡ddev\",$", 
MR_Next
},

918 {"\"agg»g©e_un™\": \"time\",$", 
MR_Next
},

919 {"\"™”©iÚs\": 3,$", 
MR_Next
},

920 {"\"»®_time\": %æßt,$", 
MR_Next
},

922 {"\"çmy_šdex\": 22,$", 
MR_Next
},

923 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

925 
MR_Next
},

926 {"\"run_ty³\": \"agg»g©e\",$", 
MR_Next
},

927 {"\"»³t™iÚs\": 3,$", 
MR_Next
},

928 {"\"th»ads\": 1,$", 
MR_Next
},

929 {"\"agg»g©e_Çme\": \"\",$", 
MR_Next
},

930 {"\"agg»g©e_un™\": \"time\",$", 
MR_Next
},

931 {"\"™”©iÚs\": 3,$", 
MR_Next
},

932 {"\"»®_time\": 1\\.5(0)*e\\+(0)*2,$", 
MR_Next
}});

933 
ADD_CASES
(

934 
TC_CSVOut
,

949 cÚ¡‡utØ
	gU£rP”ûÁSti¡ics
 = [](cÚ¡ 
¡d
::
veùÜ
<>&) {

952 
	$BM_U£rP”ûÁSts
(
b’chm¬k
::
S‹
& 
¡©e
) {

953 autØ
_
 : 
¡©e
) {

954 
¡©e
.
	`S‘I‹¿tiÚTime
(150 / 10e8);

956 
	}
}

958 
BENCHMARK
(
BM_U£rP”ûÁSts
)

959 ->
R•‘™iÚs
(3)

960 ->
I‹¿tiÚs
(5)

961 ->
U£Mªu®Time
()

962 ->
Un™
(
b’chm¬k
::
TimeUn™
::
kNªo£cÚd
)

963 ->
Compu‹Sti¡ics
("", 
U£rP”ûÁSti¡ics
, 
b’chm¬k
::
Sti¡icUn™
::
kP”ûÁage
);

969 
ADD_CASES
(
TC_CÚsŞeOut
,

984 
ADD_CASES
(

985 
TC_JSONOut
,

987 {"\"çmy_šdex\": 23,$", 
MR_Next
},

988 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

991 
MR_Next
},

992 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

993 {"\"»³t™iÚs\": 3,$", 
MR_Next
},

994 {"\"»³t™iÚ_šdex\": 0,$", 
MR_Next
},

995 {"\"th»ads\": 1,$", 
MR_Next
},

996 {"\"™”©iÚs\": 5,$", 
MR_Next
},

997 {"\"»®_time\": 1\\.5(0)*e\\+(0)*2,$", 
MR_Next
},

999 {"\"çmy_šdex\": 23,$", 
MR_Next
},

1000 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

1003 
MR_Next
},

1004 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

1005 {"\"»³t™iÚs\": 3,$", 
MR_Next
},

1006 {"\"»³t™iÚ_šdex\": 1,$", 
MR_Next
},

1007 {"\"th»ads\": 1,$", 
MR_Next
},

1008 {"\"™”©iÚs\": 5,$", 
MR_Next
},

1009 {"\"»®_time\": 1\\.5(0)*e\\+(0)*2,$", 
MR_Next
},

1011 {"\"çmy_šdex\": 23,$", 
MR_Next
},

1012 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

1015 
MR_Next
},

1016 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

1017 {"\"»³t™iÚs\": 3,$", 
MR_Next
},

1018 {"\"»³t™iÚ_šdex\": 2,$", 
MR_Next
},

1019 {"\"th»ads\": 1,$", 
MR_Next
},

1020 {"\"™”©iÚs\": 5,$", 
MR_Next
},

1021 {"\"»®_time\": 1\\.5(0)*e\\+(0)*2,$", 
MR_Next
},

1024 {"\"çmy_šdex\": 23,$", 
MR_Next
},

1025 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

1028 
MR_Next
},

1029 {"\"run_ty³\": \"agg»g©e\",$", 
MR_Next
},

1030 {"\"»³t™iÚs\": 3,$", 
MR_Next
},

1031 {"\"th»ads\": 1,$", 
MR_Next
},

1032 {"\"agg»g©e_Çme\": \"m—n\",$", 
MR_Next
},

1033 {"\"agg»g©e_un™\": \"time\",$", 
MR_Next
},

1034 {"\"™”©iÚs\": 3,$", 
MR_Next
},

1035 {"\"»®_time\": 1\\.5(0)*e\\+(0)*2,$", 
MR_Next
},

1038 {"\"çmy_šdex\": 23,$", 
MR_Next
},

1039 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

1042 
MR_Next
},

1043 {"\"run_ty³\": \"agg»g©e\",$", 
MR_Next
},

1044 {"\"»³t™iÚs\": 3,$", 
MR_Next
},

1045 {"\"th»ads\": 1,$", 
MR_Next
},

1046 {"\"agg»g©e_Çme\": \"medŸn\",$", 
MR_Next
},

1047 {"\"agg»g©e_un™\": \"time\",$", 
MR_Next
},

1048 {"\"™”©iÚs\": 3,$", 
MR_Next
},

1049 {"\"»®_time\": 1\\.5(0)*e\\+(0)*2,$", 
MR_Next
},

1052 {"\"çmy_šdex\": 23,$", 
MR_Next
},

1053 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

1056 
MR_Next
},

1057 {"\"run_ty³\": \"agg»g©e\",$", 
MR_Next
},

1058 {"\"»³t™iÚs\": 3,$", 
MR_Next
},

1059 {"\"th»ads\": 1,$", 
MR_Next
},

1060 {"\"agg»g©e_Çme\": \"¡ddev\",$", 
MR_Next
},

1061 {"\"agg»g©e_un™\": \"time\",$", 
MR_Next
},

1062 {"\"™”©iÚs\": 3,$", 
MR_Next
},

1063 {"\"»®_time\": %æßt,$", 
MR_Next
},

1066 {"\"çmy_šdex\": 23,$", 
MR_Next
},

1067 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

1070 
MR_Next
},

1071 {"\"run_ty³\": \"agg»g©e\",$", 
MR_Next
},

1072 {"\"»³t™iÚs\": 3,$", 
MR_Next
},

1073 {"\"th»ads\": 1,$", 
MR_Next
},

1074 {"\"agg»g©e_Çme\": \"\",$", 
MR_Next
},

1075 {"\"agg»g©e_un™\": \"³rûÁage\",$", 
MR_Next
},

1076 {"\"™”©iÚs\": 3,$", 
MR_Next
},

1077 {"\"»®_time\": 1\\.(0)*e-(0)*2,$", 
MR_Next
}});

1078 
ADD_CASES
(
TC_CSVOut
, {{"^\"BM_UserPercentStats/iterations:5/repeats:3/"

1097 
	$BM_JSON_FÜm©
(
b’chm¬k
::
S‹
& 
¡©e
) {

1098 
¡©e
.
	`SkW™hE¼Ü
("val\b\f\n\r\t\\\"with\"es,capes");

1099 autØ
_
 : 
¡©e
) {

1101 
	}
}

1102 
BENCHMARK
(
BM_JSON_FÜm©
);

1103 
ADD_CASES
(
TC_JSONOut
, {{"\"name\": \"BM_JSON_Format\",$"},

1104 {"\"çmy_šdex\": 23,$", 
MR_Next
},

1105 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

1106 {"\"run_Çme\": \"BM_JSON_FÜm©\",$", 
MR_Next
},

1107 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

1108 {"\"»³t™iÚs\": 1,$", 
MR_Next
},

1109 {"\"»³t™iÚ_šdex\": 0,$", 
MR_Next
},

1110 {"\"th»ads\": 1,$", 
MR_Next
},

1111 {"\"”rÜ_occu¼ed\":rue,$", 
MR_Next
},

1112 {
R
"("
”rÜ_mes§ge
": "
v®
\\
b
\\
f
\\
n
\\
r
\\
t
\\\\\\"w™h\\"
es
,
ÿ³s
",$)", 
MR_Next
}});

1118 
	$BM_CSV_FÜm©
(
b’chm¬k
::
S‹
& 
¡©e
) {

1119 
¡©e
.
	`SkW™hE¼Ü
("\"freedom\"");

1120 autØ
_
 : 
¡©e
) {

1122 
	}
}

1123 
BENCHMARK
(
BM_CSV_FÜm©
);

1124 
ADD_CASES
(
TC_CSVOut
, {{"^\"BM_CSV_Format\",,,,,,,,true,\"\"\"freedom\"\"\"$"}});

1130 
	$maš
(
¬gc
, * 
¬gv
[]è{ 
	`RunOuutTe¡s
×rgc,‡rgv); 
	}
}

	@third_party/benchmark/test/skip_with_error_test.cc

2 #undeà
NDEBUG


3 
	~<ÿs£¹
>

4 
	~<veùÜ
>

6 
	~"../¤c/check.h
"

7 
	~"b’chm¬k/b’chm¬k.h
"

9 
	gÇme¥aû
 {

11 şas 
	cTe¡R•Ü‹r
 : 
public
 
b’chm¬k
::
CÚsŞeR•Ü‹r
 {

12 
public
:

13 
boŞ
 
R•ÜtCÚ‹xt
(cÚ¡ 
CÚ‹xt
& 
cÚ‹xt
è
ov”ride
 {

14  
CÚsŞeR•Ü‹r
::
R•ÜtCÚ‹xt
(
cÚ‹xt
);

17 
R•ÜtRuns
(cÚ¡ 
¡d
::
veùÜ
<
Run
>& 
»pÜt
è
ov”ride
 {

18 
®l_runs_
.
š£¹
×Î_runs_.
’d
(), 
begš
(
»pÜt
),ƒnd(report));

19 
	gCÚsŞeR•Ü‹r
::
R•ÜtRuns
(
»pÜt
);

22 
Te¡R•Ü‹r
() {}

23 ~
Te¡R•Ü‹r
(è
	gov”ride
 {}

25 
mubË
 
	g¡d
::
veùÜ
<
Run
> 
®l_runs_
;

28 
	sTe¡Ca£
 {

29 
	g¡d
::
¡ršg
 
Çme
;

30 
boŞ
 
	g”rÜ_occu¼ed
;

31 
	g¡d
::
¡ršg
 
”rÜ_mes§ge
;

33 
	gb’chm¬k
::
	tB’chm¬kR•Ü‹r
::
	tRun
 Run;

35 
CheckRun
(
Run
 cÚ¡& 
run
) const {

36 
BM_CHECK
(
Çme
 =ğ
run
.
b’chm¬k_Çme
())

37 << "ex³ùed " << 
Çme
 << " gÙ " << 
run
.
b’chm¬k_Çme
();

38 
BM_CHECK_EQ
(
”rÜ_occu¼ed
,

39 
b’chm¬k
::
š‹º®
::
Sk³dW™hE¼Ü
 =ğ
run
.
sk³d
);

40 
BM_CHECK
(
”rÜ_mes§ge
 =ğ
run
.
sk_mes§ge
);

41 ià(
	g”rÜ_occu¼ed
) {

44 
BM_CHECK
(
run
.
™”©iÚs
 != 0);

49 
	g¡d
::
veùÜ
<
Te¡Ca£
> 
Ex³ùedResuÉs
;

51 
AddCa£s
(cÚ¡ 
¡d
::
¡ršg
& 
ba£_Çme
,

52 
¡d
::
š™Ÿliz”_li¡
<
Te¡Ca£
> cÚ¡& 
v
) {

53 autØ
TC
 : 
v
) {

54 
TC
.
Çme
 = 
ba£_Çme
 + TC.name;

55 
	gEx³ùedResuÉs
.
push_back
(
¡d
::
move
(
TC
));

60 
	#CONCAT
(
x
, 
y
è
	$CONCAT2
(
x
, 
y
)

	)

61 
	#CONCAT2
(
x
, 
y
èx##
	)
y

62 
	#ADD_CASES
(...è
	`CONCAT
(
dummy
, 
__LINE__
èğ
	`AddCa£s
(
__VA_ARGS__
)

	)

64 
	}
}

66 
	$BM_”rÜ_no_ruÂšg
(
b’chm¬k
::
S‹
& 
¡©e
) {

67 
¡©e
.
	`SkW™hE¼Ü
("error message");

68 
	}
}

69 
BENCHMARK
(
BM_”rÜ_no_ruÂšg
);

70 
ADD_CASES
("BM_”rÜ_no_ruÂšg", {{"", 
Œue
, "error message"}});

72 
	$BM_”rÜ_befÜe_ruÂšg
(
b’chm¬k
::
S‹
& 
¡©e
) {

73 
¡©e
.
	`SkW™hE¼Ü
("error message");

74 
¡©e
.
	`K“pRuÂšg
()) {

75 
	`as£¹
(
çl£
);

77 
	}
}

78 
BENCHMARK
(
BM_”rÜ_befÜe_ruÂšg
);

79 
ADD_CASES
("BM_”rÜ_befÜe_ruÂšg", {{"", 
Œue
, "error message"}});

81 
	$BM_”rÜ_befÜe_ruÂšg_b©ch
(
b’chm¬k
::
S‹
& 
¡©e
) {

82 
¡©e
.
	`SkW™hE¼Ü
("error message");

83 
¡©e
.
	`K“pRuÂšgB©ch
(17)) {

84 
	`as£¹
(
çl£
);

86 
	}
}

87 
BENCHMARK
(
BM_”rÜ_befÜe_ruÂšg_b©ch
);

88 
ADD_CASES
("BM_”rÜ_befÜe_ruÂšg_b©ch", {{"", 
Œue
, "error message"}});

90 
	$BM_”rÜ_befÜe_ruÂšg_¿nge_fÜ
(
b’chm¬k
::
S‹
& 
¡©e
) {

91 
¡©e
.
	`SkW™hE¼Ü
("error message");

92 autØ
_
 : 
¡©e
) {

93 
	`as£¹
(
çl£
);

95 
	}
}

96 
BENCHMARK
(
BM_”rÜ_befÜe_ruÂšg_¿nge_fÜ
);

97 
ADD_CASES
("BM_”rÜ_befÜe_ruÂšg_¿nge_fÜ", {{"", 
Œue
, "error message"}});

99 
	$BM_”rÜ_duršg_ruÂšg
(
b’chm¬k
::
S‹
& 
¡©e
) {

100 
fœ¡_™”
 = 
Œue
;

101 
¡©e
.
	`K“pRuÂšg
()) {

102 ià(
¡©e
.
	`¿nge
(0è=ğ1 && s‹.
	`th»ad_šdex
(è<ğ(¡©e.
	`th»ads
() / 2)) {

103 
	`as£¹
(
fœ¡_™”
);

104 
fœ¡_™”
 = 
çl£
;

105 
¡©e
.
	`SkW™hE¼Ü
("error message");

107 
¡©e
.
	`Pau£Timšg
();

108 
¡©e
.
	`ResumeTimšg
();

111 
	}
}

112 
BENCHMARK
(
BM_”rÜ_duršg_ruÂšg
)->
Arg
(1)->Arg(2)->
Th»adRªge
(1, 8);

113 
ADD_CASES
("BM_”rÜ_duršg_ruÂšg", {{"/1/th»ads:1", 
Œue
, "error message"},

114 {"/1/th»ads:2", 
Œue
, "error message"},

115 {"/1/th»ads:4", 
Œue
, "error message"},

116 {"/1/th»ads:8", 
Œue
, "error message"},

117 {"/2/th»ads:1", 
çl£
, ""},

118 {"/2/th»ads:2", 
çl£
, ""},

119 {"/2/th»ads:4", 
çl£
, ""},

120 {"/2/th»ads:8", 
çl£
, ""}});

122 
	$BM_”rÜ_duršg_ruÂšg_¿nged_fÜ
(
b’chm¬k
::
S‹
& 
¡©e
) {

123 
	`as£¹
(
¡©e
.
max_™”©iÚs
 > 3 && "test„equires‡t†east‡ few iterations");

124 
boŞ
 
fœ¡_™”
 = 
Œue
;

126 autØ
It
 = 
¡©e
.
	`begš
(), 
End
 = s‹.
	`’d
(); It != End; ++It) {

127 ià(
¡©e
.
	`¿nge
(0) == 1) {

128 
	`as£¹
(
fœ¡_™”
);

129 
fœ¡_™”
 = 
çl£
;

130 ()
fœ¡_™”
;

131 
¡©e
.
	`SkW™hE¼Ü
("error message");

134 
	`as£¹
(++
It
 !ğ
End
);

138 
	}
}

139 
BENCHMARK
(
BM_”rÜ_duršg_ruÂšg_¿nged_fÜ
)->
Arg
(1)->Arg(2)->
I‹¿tiÚs
(5);

140 
ADD_CASES
("BM_error_during_running_ranged_for",

141 {{"/1/™”©iÚs:5", 
Œue
, "error message"},

142 {"/2/™”©iÚs:5", 
çl£
, ""}});

144 
	$BM_”rÜ_aá”_ruÂšg
(
b’chm¬k
::
S‹
& 
¡©e
) {

145 autØ
_
 : 
¡©e
) {

146 autØ
™”©iÚs
 = 
¡©e
.
	`™”©iÚs
();

147 
b’chm¬k
::
	`DoNÙO±imize
(
™”©iÚs
);

149 ià(
¡©e
.
	`th»ad_šdex
(è<ğ(¡©e.
	`th»ads
() / 2))

150 
¡©e
.
	`SkW™hE¼Ü
("error message");

151 
	}
}

152 
BENCHMARK
(
BM_”rÜ_aá”_ruÂšg
)->
Th»adRªge
(1, 8);

153 
ADD_CASES
("BM_”rÜ_aá”_ruÂšg", {{"/th»ads:1", 
Œue
, "error message"},

154 {"/th»ads:2", 
Œue
, "error message"},

155 {"/th»ads:4", 
Œue
, "error message"},

156 {"/th»ads:8", 
Œue
, "error message"}});

158 
	$BM_”rÜ_whe_·u£d
(
b’chm¬k
::
S‹
& 
¡©e
) {

159 
boŞ
 
fœ¡_™”
 = 
Œue
;

160 
¡©e
.
	`K“pRuÂšg
()) {

161 ià(
¡©e
.
	`¿nge
(0è=ğ1 && s‹.
	`th»ad_šdex
(è<ğ(¡©e.
	`th»ads
() / 2)) {

162 
	`as£¹
(
fœ¡_™”
);

163 
fœ¡_™”
 = 
çl£
;

164 
¡©e
.
	`Pau£Timšg
();

165 
¡©e
.
	`SkW™hE¼Ü
("error message");

167 
¡©e
.
	`Pau£Timšg
();

168 
¡©e
.
	`ResumeTimšg
();

171 
	}
}

172 
BENCHMARK
(
BM_”rÜ_whe_·u£d
)->
Arg
(1)->Arg(2)->
Th»adRªge
(1, 8);

173 
ADD_CASES
("BM_”rÜ_whe_·u£d", {{"/1/th»ads:1", 
Œue
, "error message"},

174 {"/1/th»ads:2", 
Œue
, "error message"},

175 {"/1/th»ads:4", 
Œue
, "error message"},

176 {"/1/th»ads:8", 
Œue
, "error message"},

177 {"/2/th»ads:1", 
çl£
, ""},

178 {"/2/th»ads:2", 
çl£
, ""},

179 {"/2/th»ads:4", 
çl£
, ""},

180 {"/2/th»ads:8", 
çl£
, ""}});

182 
	$maš
(
¬gc
, * 
¬gv
[]) {

183 
b’chm¬k
::
	`In™Ÿlize
(&
¬gc
, 
¬gv
);

185 
Te¡R•Ü‹r
 
‹¡_»pÜ‹r
;

186 
b’chm¬k
::
	`RunS³cif›dB’chm¬ks
(&
‹¡_»pÜ‹r
);

188 
b’chm¬k
::
	tB’chm¬kR•Ü‹r
::
	tRun
 Run;

189 autØ
EB
 = 
Ex³ùedResuÉs
.
	`begš
();

191 
Run
 cÚ¡& 
run
 : 
‹¡_»pÜ‹r
.
®l_runs_
) {

192 
	`as£¹
(
EB
 !ğ
Ex³ùedResuÉs
.
	`’d
());

193 
EB
->
	`CheckRun
(
run
);

194 ++
EB
;

196 
	`as£¹
(
EB
 =ğ
Ex³ùedResuÉs
.
	`’d
());

199 
	}
}

	@third_party/benchmark/test/spec_arg_test.cc

1 
	~<®gÜ™hm
>

2 
	~<ÿs£¹
>

3 
	~<c¡dšt
>

4 
	~<c¡dlib
>

5 
	~<c¡ršg
>

6 
	~<io¡»am
>

7 
	~<lim™s
>

8 
	~<¡ršg
>

9 
	~<veùÜ
>

11 
	~"b’chm¬k/b’chm¬k.h
"

16 
	gÇme¥aû
 {

18 şas 
	cTe¡R•Ü‹r
 : 
public
 
b’chm¬k
::
CÚsŞeR•Ü‹r
 {

19 
public
:

20 
boŞ
 
R•ÜtCÚ‹xt
(cÚ¡ 
CÚ‹xt
& 
cÚ‹xt
è
ov”ride
 {

21  
CÚsŞeR•Ü‹r
::
R•ÜtCÚ‹xt
(
cÚ‹xt
);

24 
R•ÜtRuns
(cÚ¡ 
¡d
::
veùÜ
<
Run
>& 
»pÜt
è
ov”ride
 {

25 
as£¹
(
»pÜt
.
size
() == 1);

26 
	gm©ched_funùiÚs
.
push_back
(
»pÜt
[0].
run_Çme
.
funùiÚ_Çme
);

27 
	gCÚsŞeR•Ü‹r
::
R•ÜtRuns
(
»pÜt
);

30 
Te¡R•Ü‹r
() {}

32 ~
Te¡R•Ü‹r
(è
	gov”ride
 {}

34 cÚ¡ 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
>& 
G‘M©chedFunùiÚs
() const {

35  
m©ched_funùiÚs
;

38 
	g´iv©e
:

39 
¡d
::
veùÜ
<¡d::
¡ršg
> 
m©ched_funùiÚs
;

44 
	$BM_NÙCho£n
(
b’chm¬k
::
S‹
& 
¡©e
) {

45 
	`as£¹
(
çl£
 && "SHOULD NOT BE CALLED");

46 autØ
_
 : 
¡©e
) {

48 
	}
}

49 
BENCHMARK
(
BM_NÙCho£n
);

51 
	$BM_Cho£n
(
b’chm¬k
::
S‹
& 
¡©e
) {

52 autØ
_
 : 
¡©e
) {

54 
	}
}

55 
BENCHMARK
(
BM_Cho£n
);

57 
	$maš
(
¬gc
, ** 
¬gv
) {

58 cÚ¡ 
¡d
::
¡ršg
 
æag
 = "BM_NotChosen";

61 
boŞ
 
found
 = 
çl£
;

62 
i
 = 0; i < 
¬gc
; ++i) {

63 ià(
	`¡rcmp
("--b’chm¬k_f‹r=BM_NÙCho£n", 
¬gv
[
i
]) == 0) {

64 
found
 = 
Œue
;

68 
	`as£¹
(
found
);

70 
b’chm¬k
::
	`In™Ÿlize
(&
¬gc
, 
¬gv
);

74 ià(
æag
 !ğ
b’chm¬k
::
	`G‘B’chm¬kF‹r
()) {

75 
¡d
::
û¼


77 << 
b’chm¬k
::
	`G‘B’chm¬kF‹r
(è<< "]ƒx³ùed fÏg=[" << 
æag


81 
Te¡R•Ü‹r
 
‹¡_»pÜ‹r
;

82 cÚ¡ * cÚ¡ 
¥ec
 = "BM_Chosen";

83 cÚ¡ 
size_t
 
»tuºed_couÁ
 =

84 
b’chm¬k
::
	`RunS³cif›dB’chm¬ks
(&
‹¡_»pÜ‹r
, 
¥ec
);

85 
	`as£¹
(
»tuºed_couÁ
 == 1);

86 cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
> 
m©ched_funùiÚs
 =

87 
‹¡_»pÜ‹r
.
	`G‘M©chedFunùiÚs
();

88 
	`as£¹
(
m©ched_funùiÚs
.
	`size
() == 1);

89 ià(
	`¡rcmp
(
¥ec
, 
m©ched_funùiÚs
.
	`äÚt
().
	`c_¡r
()) != 0) {

90 
¡d
::
û¼
 << "Ex³ùed b’chm¬k [" << 
¥ec
 << "]o„un, but got ["

91 << 
m©ched_funùiÚs
.
	`äÚt
() << "]\n";

96 cÚ¡ 
¡d
::
¡ršg
 
gŞd’_v®ue
 = "golden_value";

97 
b’chm¬k
::
	`S‘B’chm¬kF‹r
(
gŞd’_v®ue
);

98 
¡d
::
¡ršg
 
cu¼’t_v®ue
 = 
b’chm¬k
::
	`G‘B’chm¬kF‹r
();

99 ià(
gŞd’_v®ue
 !ğ
cu¼’t_v®ue
) {

100 
¡d
::
û¼
 << "Ex³ùed [" << 
gŞd’_v®ue


101 << "] fÜ --b’chm¬k_f‹¸buˆgÙ [" << 
cu¼’t_v®ue
 << "]\n";

105 
	}
}

	@third_party/benchmark/test/spec_arg_verbosity_test.cc

1 
	~<¡ršg.h
>

3 
	~<io¡»am
>

5 
	~"b’chm¬k/b’chm¬k.h
"

8 
	$BM_V”bos™y
(
b’chm¬k
::
S‹
& 
¡©e
) {

9 autØ
_
 : 
¡©e
) {

11 
	}
}

12 
BENCHMARK
(
BM_V”bos™y
);

14 
	$maš
(
¬gc
, ** 
¬gv
) {

15 cÚ¡ 
št32_t
 
æagv
 = 42;

18 
boŞ
 
found
 = 
çl£
;

19 
i
 = 0; i < 
¬gc
; ++i) {

20 ià(
	`¡rcmp
("--v=42", 
¬gv
[
i
]) == 0) {

21 
found
 = 
Œue
;

25 ià(!
found
) {

26 
¡d
::
û¼
 << "Thisest„equires '--v=42'o be…assed‡s‡ command-line "

31 
b’chm¬k
::
	`In™Ÿlize
(&
¬gc
, 
¬gv
);

35 ià(
æagv
 !ğ
b’chm¬k
::
	`G‘B’chm¬kV”bos™y
()) {

36 
¡d
::
û¼


38 << 
b’chm¬k
::
	`G‘B’chm¬kV”bos™y
(è<< "]ƒx³ùed fÏg=[" << 
æagv


43 
	}
}

	@third_party/benchmark/test/state_assembly_test.cc

1 
	~<b’chm¬k/b’chm¬k.h
>

3 #ifdeà
__şªg__


4 #´agm¨
şªg
 
dŸgno¡ic
 
ignÜed
 "-Wreturn-type"

9 
Ex‹ºIÁ
;

10 
	gb’chm¬k
::
S‹
& 
G‘S‹
();

11 
Fn
();

15 
usšg
 
	gb’chm¬k
::
S‹
;

18 "C" 
	$‹¡_fÜ_auto_loİ
() {

19 
S‹
& 
S
 = 
	`G‘S‹
();

20 
x
 = 42;

25 autØ
_
 : 
S
) {

30 
b’chm¬k
::
	`DoNÙO±imize
(
x
);

38 
	}
}

41 "C" 
	$‹¡_whe_loİ
() {

42 
S‹
& 
S
 = 
	`G‘S‹
();

43 
x
 = 42;

47 
S
.
	`K“pRuÂšg
()) {

51 
b’chm¬k
::
	`DoNÙO±imize
(
x
);

68 
	}
}

	@third_party/benchmark/test/statistics_gtest.cc

5 
	~"../¤c/¡©i¡ics.h
"

6 
	~"g‹¡/g‹¡.h
"

8 
	gÇme¥aû
 {

9 
TEST
(
Sti¡icsTe¡
, 
M—n
) {

10 
EXPECT_DOUBLE_EQ
(
b’chm¬k
::
Sti¡icsM—n
({42, 42, 42, 42}), 42.0);

11 
EXPECT_DOUBLE_EQ
(
b’chm¬k
::
Sti¡icsM—n
({1, 2, 3, 4}), 2.5);

12 
EXPECT_DOUBLE_EQ
(
b’chm¬k
::
Sti¡icsM—n
({1, 2, 5, 10, 10, 14}), 7.0);

15 
TEST
(
Sti¡icsTe¡
, 
MedŸn
) {

16 
EXPECT_DOUBLE_EQ
(
b’chm¬k
::
Sti¡icsMedŸn
({42, 42, 42, 42}), 42.0);

17 
EXPECT_DOUBLE_EQ
(
b’chm¬k
::
Sti¡icsMedŸn
({1, 2, 3, 4}), 2.5);

18 
EXPECT_DOUBLE_EQ
(
b’chm¬k
::
Sti¡icsMedŸn
({1, 2, 5, 10, 10}), 5.0);

21 
TEST
(
Sti¡icsTe¡
, 
StdDev
) {

22 
EXPECT_DOUBLE_EQ
(
b’chm¬k
::
Sti¡icsStdDev
({101, 101, 101, 101}), 0.0);

23 
EXPECT_DOUBLE_EQ
(
b’chm¬k
::
Sti¡icsStdDev
({1, 2, 3}), 1.0);

24 
EXPECT_DOUBLE_EQ
(
b’chm¬k
::
Sti¡icsStdDev
({2.5, 2.4, 3.3, 4.2, 5.1}),

28 
TEST
(
Sti¡icsTe¡
, 
CV
) {

29 
EXPECT_DOUBLE_EQ
(
b’chm¬k
::
Sti¡icsCV
({101, 101, 101, 101}), 0.0);

30 
EXPECT_DOUBLE_EQ
(
b’chm¬k
::
Sti¡icsCV
({1, 2, 3}), 1. / 2.);

31 
EXPECT_DOUBLE_EQ
(
b’chm¬k
::
Sti¡icsCV
({2.5, 2.4, 3.3, 4.2, 5.1}),

	@third_party/benchmark/test/string_util_gtest.cc

5 
	~<tu¶e
>

7 
	~"../¤c/š‹º®_maüos.h
"

8 
	~"../¤c/¡ršg_ut.h
"

9 
	~"g‹¡/g‹¡.h
"

11 
	gÇme¥aû
 {

12 
TEST
(
SŒšgUtTe¡
, 
¡oul
) {

14 
size_t
 
	gpos
 = 0;

15 
EXPECT_EQ
(0ul, 
b’chm¬k
::
¡oul
("0", &
pos
));

16 
EXPECT_EQ
(1ul, 
pos
);

19 
size_t
 
	gpos
 = 0;

20 
EXPECT_EQ
(7ul, 
b’chm¬k
::
¡oul
("7", &
pos
));

21 
EXPECT_EQ
(1ul, 
pos
);

24 
size_t
 
	gpos
 = 0;

25 
EXPECT_EQ
(135ul, 
b’chm¬k
::
¡oul
("135", &
pos
));

26 
EXPECT_EQ
(3ul, 
pos
);

28 #ià
ULONG_MAX
 == 0xFFFFFFFFul

30 
size_t
 
	gpos
 = 0;

31 
EXPECT_EQ
(0xFFFFFFFFul, 
b’chm¬k
::
¡oul
("4294967295", &
pos
));

32 
EXPECT_EQ
(10ul, 
pos
);

34 #–ià
ULONG_MAX
 == 0xFFFFFFFFFFFFFFFFul

36 
size_t
 
	gpos
 = 0;

37 
EXPECT_EQ
(0xFFFFFFFFFFFFFFFFul,

38 
b’chm¬k
::
¡oul
("18446744073709551615", &
pos
));

39 
EXPECT_EQ
(20ul, 
pos
);

43 
size_t
 
	gpos
 = 0;

44 
EXPECT_EQ
(10ul, 
b’chm¬k
::
¡oul
("1010", &
pos
, 2));

45 
EXPECT_EQ
(4ul, 
pos
);

48 
size_t
 
	gpos
 = 0;

49 
EXPECT_EQ
(520ul, 
b’chm¬k
::
¡oul
("1010", &
pos
, 8));

50 
EXPECT_EQ
(4ul, 
pos
);

53 
size_t
 
	gpos
 = 0;

54 
EXPECT_EQ
(1010ul, 
b’chm¬k
::
¡oul
("1010", &
pos
, 10));

55 
EXPECT_EQ
(4ul, 
pos
);

58 
size_t
 
	gpos
 = 0;

59 
EXPECT_EQ
(4112ul, 
b’chm¬k
::
¡oul
("1010", &
pos
, 16));

60 
EXPECT_EQ
(4ul, 
pos
);

63 
size_t
 
	gpos
 = 0;

64 
EXPECT_EQ
(0xBEEFul, 
b’chm¬k
::
¡oul
("BEEF", &
pos
, 16));

65 
EXPECT_EQ
(4ul, 
pos
);

67 #iâdeà
BENCHMARK_HAS_NO_EXCEPTIONS


69 
ASSERT_THROW
(
¡d
::
ignÜe
 = 
b’chm¬k
::
¡oul
("this is‡est"),

70 
¡d
::
šv®id_¬gum’t
);

75 
TEST
(
SŒšgUtTe¡
, 
¡oi
){{
size_t
 
	gpos
 = 0;

76 
EXPECT_EQ
(0, 
b’chm¬k
::
¡oi
("0", &
pos
));

77 
EXPECT_EQ
(1ul, 
pos
);

80 
size_t
 
	gpos
 = 0;

81 
EXPECT_EQ
(-17, 
b’chm¬k
::
¡oi
("-17", &
pos
));

82 
EXPECT_EQ
(3ul, 
pos
);

85 
size_t
 
	gpos
 = 0;

86 
EXPECT_EQ
(1357, 
b’chm¬k
::
¡oi
("1357", &
pos
));

87 
EXPECT_EQ
(4ul, 
pos
);

90 
size_t
 
	gpos
 = 0;

91 
EXPECT_EQ
(10, 
b’chm¬k
::
¡oi
("1010", &
pos
, 2));

92 
EXPECT_EQ
(4ul, 
pos
);

95 
size_t
 
	gpos
 = 0;

96 
EXPECT_EQ
(520, 
b’chm¬k
::
¡oi
("1010", &
pos
, 8));

97 
EXPECT_EQ
(4ul, 
pos
);

100 
size_t
 
	gpos
 = 0;

101 
EXPECT_EQ
(1010, 
b’chm¬k
::
¡oi
("1010", &
pos
, 10));

102 
EXPECT_EQ
(4ul, 
pos
);

105 
size_t
 
	gpos
 = 0;

106 
EXPECT_EQ
(4112, 
b’chm¬k
::
¡oi
("1010", &
pos
, 16));

107 
EXPECT_EQ
(4ul, 
pos
);

110 
size_t
 
	gpos
 = 0;

111 
EXPECT_EQ
(0xBEEF, 
b’chm¬k
::
¡oi
("BEEF", &
pos
, 16));

112 
EXPECT_EQ
(4ul, 
pos
);

114 #iâdeà
BENCHMARK_HAS_NO_EXCEPTIONS


116 
ASSERT_THROW
(
¡d
::
ignÜe
 = 
b’chm¬k
::
¡oi
("this is‡est"),

117 
¡d
::
šv®id_¬gum’t
);

122 
TEST
(
SŒšgUtTe¡
, 
¡od
){{
size_t
 
	gpos
 = 0;

123 
EXPECT_EQ
(0.0, 
b’chm¬k
::
¡od
("0", &
pos
));

124 
EXPECT_EQ
(1ul, 
pos
);

127 
size_t
 
	gpos
 = 0;

128 
EXPECT_EQ
(-84.0, 
b’chm¬k
::
¡od
("-84", &
pos
));

129 
EXPECT_EQ
(3ul, 
pos
);

132 
size_t
 
	gpos
 = 0;

133 
EXPECT_EQ
(1234.0, 
b’chm¬k
::
¡od
("1234", &
pos
));

134 
EXPECT_EQ
(4ul, 
pos
);

137 
size_t
 
	gpos
 = 0;

138 
EXPECT_EQ
(1.5, 
b’chm¬k
::
¡od
("1.5", &
pos
));

139 
EXPECT_EQ
(3ul, 
pos
);

142 
size_t
 
	gpos
 = 0;

144 
EXPECT_EQ
(-1.25e+9, 
b’chm¬k
::
¡od
("-1.25e+9", &
pos
));

145 
EXPECT_EQ
(8ul, 
pos
);

147 #iâdeà
BENCHMARK_HAS_NO_EXCEPTIONS


149 
ASSERT_THROW
(
¡d
::
ignÜe
 = 
b’chm¬k
::
¡od
("this is‡est"),

150 
¡d
::
šv®id_¬gum’t
);

155 
TEST
(
SŒšgUtTe¡
, 
SŒS¶™
) {

156 
EXPECT_EQ
(
b’chm¬k
::
SŒS¶™
("", ','), 
¡d
::
veùÜ
<¡d::
¡ršg
>{});

157 
EXPECT_EQ
(
b’chm¬k
::
SŒS¶™
("hello", ','),

158 
¡d
::
veùÜ
<¡d::
¡ršg
>({"hello"}));

159 
EXPECT_EQ
(
b’chm¬k
::
SŒS¶™
("hello,there,is,more", ','),

160 
¡d
::
veùÜ
<¡d::
¡ršg
>({"hello", "there", "is", "more"}));

	@third_party/benchmark/test/templated_fixture_test.cc

2 
	~<ÿs£¹
>

3 
	~<memÜy
>

5 
	~"b’chm¬k/b’chm¬k.h
"

7 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

8 şas 
	cMyFixtu»
 : 
public
 ::
b’chm¬k
::
Fixtu»
 {

9 
public
:

10 
	$MyFixtu»
(è: 
	$d©a
(0) {}

12 
T
 
d©a
;

13 
	}
};

15 
	$BENCHMARK_TEMPLATE_F
(
MyFixtu»
, 
Foo
, )(
b’chm¬k
::
S‹
& 
¡
) {

16 autØ
_
 : 
¡
) {

17 
d©a
 += 1;

19 
	}
}

21 
	$BENCHMARK_TEMPLATE_DEFINE_F
(
MyFixtu»
, 
B¬
, )(
b’chm¬k
::
S‹
& 
¡
) {

22 autØ
_
 : 
¡
) {

23 
d©a
 += 1.0;

25 
	}
}

26 
BENCHMARK_REGISTER_F
(
MyFixtu»
, 
B¬
);

28 
BENCHMARK_MAIN
();

	@third_party/benchmark/test/time_unit_gtest.cc

1 
	~"../šşude/b’chm¬k/b’chm¬k.h
"

2 
	~"g‹¡/g‹¡.h
"

4 
Çme¥aû
 
	gb’chm¬k
 {

5 
Çme¥aû
 
	gš‹º®
 {

7 
	gÇme¥aû
 {

9 şas 
	cDummyB’chm¬k
 : 
public
 
B’chm¬k
 {

10 
public
:

11 
DummyB’chm¬k
(è: 
B’chm¬k
("dummy") {}

12 
Run
(
S‹
&è
ov”ride
 {}

15 
TEST
(
DeçuÉTimeUn™Te¡
, 
TimeUn™IsNÙS‘
) {

16 
DummyB’chm¬k
 
	gb’chm¬k
;

17 
EXPECT_EQ
(
b’chm¬k
.
G‘TimeUn™
(), 
kNªo£cÚd
);

20 
TEST
(
DeçuÉTimeUn™Te¡
, 
DeçuÉIsS‘
) {

21 
DummyB’chm¬k
 
	gb’chm¬k
;

22 
EXPECT_EQ
(
b’chm¬k
.
G‘TimeUn™
(), 
kNªo£cÚd
);

23 
S‘DeçuÉTimeUn™
(
kMli£cÚd
);

24 
EXPECT_EQ
(
b’chm¬k
.
G‘TimeUn™
(), 
kMli£cÚd
);

27 
TEST
(
DeçuÉTimeUn™Te¡
, 
DeçuÉAndEx¶ic™Un™IsS‘
) {

28 
DummyB’chm¬k
 
	gb’chm¬k
;

29 
	gb’chm¬k
.
Un™
(
kMli£cÚd
);

30 
S‘DeçuÉTimeUn™
(
kMiüo£cÚd
);

32 
EXPECT_EQ
(
b’chm¬k
.
G‘TimeUn™
(), 
kMli£cÚd
);

	@third_party/benchmark/test/user_counters_tabular_test.cc

2 #undeà
NDEBUG


4 
	~"b’chm¬k/b’chm¬k.h
"

5 
	~"ouut_‹¡.h
"

10 
ADD_CASES
(
TC_CÚsŞeOut
,

14 {"^[-]+$", 
MR_Next
},

15 {"^B’chm¬k % Tim% CPU % I‹¿tiÚ % B¬ % B© % Baz % FoØ% Frob % Lob$", 
MR_Next
},

16 {"^[-]+$", 
MR_Next
},

17 {"^BM_CouÁ”s_TabuÏr/»³©s:2/th»ads:1 %cÚsŞe_»pÜˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßt$", 
MR_Next
},

18 {"^BM_CouÁ”s_TabuÏr/»³©s:2/th»ads:1 %cÚsŞe_»pÜˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßt$", 
MR_Next
},

19 {"^BM_CouÁ”s_TabuÏr/»³©s:2/th»ads:1_m—À%cÚsŞe_»pÜˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßt$", 
MR_Next
},

20 {"^BM_CouÁ”s_TabuÏr/»³©s:2/th»ads:1_medŸÀ%cÚsŞe_»pÜˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßt$", 
MR_Next
},

21 {"^BM_CouÁ”s_TabuÏr/»³©s:2/th»ads:1_¡ddev %cÚsŞe_»pÜˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßt$", 
MR_Next
},

22 {"^BM_CouÁ”s_TabuÏr/»³©s:2/th»ads:1_cv %cÚsŞe_³rûÁage_»pÜˆ[ ]*%³rûÁage[ ]*% [ ]*%³rûÁage[ ]*% [ ]*%³rûÁage[ ]*% [ ]*%³rûÁage[ ]*% [ ]*%³rûÁage[ ]*% [ ]*%³rûÁage[ ]*%$", 
MR_Next
},

23 {"^BM_CouÁ”s_TabuÏr/»³©s:2/th»ads:2 %cÚsŞe_»pÜˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßt$", 
MR_Next
},

24 {"^BM_CouÁ”s_TabuÏr/»³©s:2/th»ads:2 %cÚsŞe_»pÜˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßt$", 
MR_Next
},

25 {"^BM_CouÁ”s_TabuÏr/»³©s:2/th»ads:2_m—À%cÚsŞe_»pÜˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßt$", 
MR_Next
},

26 {"^BM_CouÁ”s_TabuÏr/»³©s:2/th»ads:2_medŸÀ%cÚsŞe_»pÜˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßt$", 
MR_Next
},

27 {"^BM_CouÁ”s_TabuÏr/»³©s:2/th»ads:2_¡ddev %cÚsŞe_»pÜˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßt$", 
MR_Next
},

28 {"^BM_CouÁ”s_TabuÏr/»³©s:2/th»ads:2_cv %cÚsŞe_³rûÁage_»pÜˆ[ ]*%³rûÁage[ ]*% [ ]*%³rûÁage[ ]*% [ ]*%³rûÁage[ ]*% [ ]*%³rûÁage[ ]*% [ ]*%³rûÁage[ ]*% [ ]*%³rûÁage[ ]*%$", 
MR_Next
},

29 {"^BM_CouÁ”R©es_TabuÏr/th»ads:%šˆ%cÚsŞe_»pÜˆ[ ]*%hræßt/ [ ]*%hræßt/ [ ]*%hræßt/ [ ]*%hræßt/ [ ]*%hræßt/ [ ]*%hræßt/s$", 
MR_Next
},

30 {"^BM_CouÁ”R©es_TabuÏr/th»ads:%šˆ%cÚsŞe_»pÜˆ[ ]*%hræßt/ [ ]*%hræßt/ [ ]*%hræßt/ [ ]*%hræßt/ [ ]*%hræßt/ [ ]*%hræßt/s$", 
MR_Next
},

31 {"^BM_CouÁ”R©es_TabuÏr/th»ads:%šˆ%cÚsŞe_»pÜˆ[ ]*%hræßt/ [ ]*%hræßt/ [ ]*%hræßt/ [ ]*%hræßt/ [ ]*%hræßt/ [ ]*%hræßt/s$", 
MR_Next
},

32 {"^BM_CouÁ”R©es_TabuÏr/th»ads:%šˆ%cÚsŞe_»pÜˆ[ ]*%hræßt/ [ ]*%hræßt/ [ ]*%hræßt/ [ ]*%hræßt/ [ ]*%hræßt/ [ ]*%hræßt/s$", 
MR_Next
},

33 {"^BM_CouÁ”R©es_TabuÏr/th»ads:%šˆ%cÚsŞe_»pÜˆ[ ]*%hræßt/ [ ]*%hræßt/ [ ]*%hræßt/ [ ]*%hræßt/ [ ]*%hræßt/ [ ]*%hræßt/s$", 
MR_Next
},

34 {"^[-]+$", 
MR_Next
},

35 {"^B’chm¬k % Tim% CPU % I‹¿tiÚ % B¬ % Baz % Foo$", 
MR_Next
},

36 {"^[-]+$", 
MR_Next
},

37 {"^BM_CouÁ”S‘0_TabuÏr/th»ads:%šˆ%cÚsŞe_»pÜˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßt$", 
MR_Next
},

38 {"^BM_CouÁ”S‘0_TabuÏr/th»ads:%šˆ%cÚsŞe_»pÜˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßt$", 
MR_Next
},

39 {"^BM_CouÁ”S‘0_TabuÏr/th»ads:%šˆ%cÚsŞe_»pÜˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßt$", 
MR_Next
},

40 {"^BM_CouÁ”S‘0_TabuÏr/th»ads:%šˆ%cÚsŞe_»pÜˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßt$", 
MR_Next
},

41 {"^BM_CouÁ”S‘0_TabuÏr/th»ads:%šˆ%cÚsŞe_»pÜˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßt$", 
MR_Next
},

42 {"^BM_CouÁ”S‘1_TabuÏr/th»ads:%šˆ%cÚsŞe_»pÜˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßt$", 
MR_Next
},

43 {"^BM_CouÁ”S‘1_TabuÏr/th»ads:%šˆ%cÚsŞe_»pÜˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßt$", 
MR_Next
},

44 {"^BM_CouÁ”S‘1_TabuÏr/th»ads:%šˆ%cÚsŞe_»pÜˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßt$", 
MR_Next
},

45 {"^BM_CouÁ”S‘1_TabuÏr/th»ads:%šˆ%cÚsŞe_»pÜˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßt$", 
MR_Next
},

46 {"^BM_CouÁ”S‘1_TabuÏr/th»ads:%šˆ%cÚsŞe_»pÜˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßt$", 
MR_Next
},

47 {"^[-]+$", 
MR_Next
},

48 {"^B’chm¬k % Tim% CPU % I‹¿tiÚ % B© % Baz % Foo$", 
MR_Next
},

49 {"^[-]+$", 
MR_Next
},

50 {"^BM_CouÁ”S‘2_TabuÏr/th»ads:%šˆ%cÚsŞe_»pÜˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßt$", 
MR_Next
},

51 {"^BM_CouÁ”S‘2_TabuÏr/th»ads:%šˆ%cÚsŞe_»pÜˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßt$", 
MR_Next
},

52 {"^BM_CouÁ”S‘2_TabuÏr/th»ads:%šˆ%cÚsŞe_»pÜˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßt$", 
MR_Next
},

53 {"^BM_CouÁ”S‘2_TabuÏr/th»ads:%šˆ%cÚsŞe_»pÜˆ[ ]*%hræßˆ[ ]*%hræßˆ[ ]*%hræßt$", 
MR_Next
},

57 
ADD_CASES
(
TC_CSVOut
, {{"%csv_header,"

64 
	$BM_CouÁ”s_TabuÏr
(
b’chm¬k
::
S‹
& 
¡©e
) {

65 autØ
_
 : 
¡©e
) {

67 
Çme¥aû
 
bm
 = 
b’chm¬k
;

68 
¡©e
.
couÁ”s
.
	`š£¹
({

69 {"Foo", {1, 
bm
::
CouÁ”
::
kAvgTh»ads
}},

70 {"B¬", {2, 
bm
::
CouÁ”
::
kAvgTh»ads
}},

71 {"Baz", {4, 
bm
::
CouÁ”
::
kAvgTh»ads
}},

72 {"B©", {8, 
bm
::
CouÁ”
::
kAvgTh»ads
}},

73 {"Frob", {16, 
bm
::
CouÁ”
::
kAvgTh»ads
}},

74 {"Lob", {32, 
bm
::
CouÁ”
::
kAvgTh»ads
}},

76 
	}
}

77 
BENCHMARK
(
BM_CouÁ”s_TabuÏr
)->
Th»adRªge
(1, 2)->
R•‘™iÚs
(2);

78 
ADD_CASES
(
TC_JSONOut
,

80 {"\"çmy_šdex\": 0,$", 
MR_Next
},

81 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

83 
MR_Next
},

84 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

85 {"\"»³t™iÚs\": 2,$", 
MR_Next
},

86 {"\"»³t™iÚ_šdex\": 0,$", 
MR_Next
},

87 {"\"th»ads\": 1,$", 
MR_Next
},

88 {"\"™”©iÚs\": %št,$", 
MR_Next
},

89 {"\"»®_time\": %æßt,$", 
MR_Next
},

90 {"\"ıu_time\": %æßt,$", 
MR_Next
},

91 {"\"time_un™\": \"ns\",$", 
MR_Next
},

92 {"\"B¬\": %æßt,$", 
MR_Next
},

93 {"\"B©\": %æßt,$", 
MR_Next
},

94 {"\"Baz\": %æßt,$", 
MR_Next
},

95 {"\"Foo\": %æßt,$", 
MR_Next
},

96 {"\"Frob\": %æßt,$", 
MR_Next
},

97 {"\"Lob\": %æßt$", 
MR_Next
},

98 {"}", 
MR_Next
}});

99 
ADD_CASES
(
TC_JSONOut
,

101 {"\"çmy_šdex\": 0,$", 
MR_Next
},

102 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

104 
MR_Next
},

105 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

106 {"\"»³t™iÚs\": 2,$", 
MR_Next
},

107 {"\"»³t™iÚ_šdex\": 1,$", 
MR_Next
},

108 {"\"th»ads\": 1,$", 
MR_Next
},

109 {"\"™”©iÚs\": %št,$", 
MR_Next
},

110 {"\"»®_time\": %æßt,$", 
MR_Next
},

111 {"\"ıu_time\": %æßt,$", 
MR_Next
},

112 {"\"time_un™\": \"ns\",$", 
MR_Next
},

113 {"\"B¬\": %æßt,$", 
MR_Next
},

114 {"\"B©\": %æßt,$", 
MR_Next
},

115 {"\"Baz\": %æßt,$", 
MR_Next
},

116 {"\"Foo\": %æßt,$", 
MR_Next
},

117 {"\"Frob\": %æßt,$", 
MR_Next
},

118 {"\"Lob\": %æßt$", 
MR_Next
},

119 {"}", 
MR_Next
}});

120 
ADD_CASES
(
TC_JSONOut
,

122 {"\"çmy_šdex\": 0,$", 
MR_Next
},

123 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

125 
MR_Next
},

126 {"\"run_ty³\": \"agg»g©e\",$", 
MR_Next
},

127 {"\"»³t™iÚs\": 2,$", 
MR_Next
},

128 {"\"th»ads\": 1,$", 
MR_Next
},

129 {"\"agg»g©e_Çme\": \"m—n\",$", 
MR_Next
},

130 {"\"agg»g©e_un™\": \"time\",$", 
MR_Next
},

131 {"\"™”©iÚs\": %št,$", 
MR_Next
},

132 {"\"»®_time\": %æßt,$", 
MR_Next
},

133 {"\"ıu_time\": %æßt,$", 
MR_Next
},

134 {"\"time_un™\": \"ns\",$", 
MR_Next
},

135 {"\"B¬\": %æßt,$", 
MR_Next
},

136 {"\"B©\": %æßt,$", 
MR_Next
},

137 {"\"Baz\": %æßt,$", 
MR_Next
},

138 {"\"Foo\": %æßt,$", 
MR_Next
},

139 {"\"Frob\": %æßt,$", 
MR_Next
},

140 {"\"Lob\": %æßt$", 
MR_Next
},

141 {"}", 
MR_Next
}});

142 
ADD_CASES
(
TC_JSONOut
,

144 {"\"çmy_šdex\": 0,$", 
MR_Next
},

145 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

147 
MR_Next
},

148 {"\"run_ty³\": \"agg»g©e\",$", 
MR_Next
},

149 {"\"»³t™iÚs\": 2,$", 
MR_Next
},

150 {"\"th»ads\": 1,$", 
MR_Next
},

151 {"\"agg»g©e_Çme\": \"medŸn\",$", 
MR_Next
},

152 {"\"agg»g©e_un™\": \"time\",$", 
MR_Next
},

153 {"\"™”©iÚs\": %št,$", 
MR_Next
},

154 {"\"»®_time\": %æßt,$", 
MR_Next
},

155 {"\"ıu_time\": %æßt,$", 
MR_Next
},

156 {"\"time_un™\": \"ns\",$", 
MR_Next
},

157 {"\"B¬\": %æßt,$", 
MR_Next
},

158 {"\"B©\": %æßt,$", 
MR_Next
},

159 {"\"Baz\": %æßt,$", 
MR_Next
},

160 {"\"Foo\": %æßt,$", 
MR_Next
},

161 {"\"Frob\": %æßt,$", 
MR_Next
},

162 {"\"Lob\": %æßt$", 
MR_Next
},

163 {"}", 
MR_Next
}});

164 
ADD_CASES
(
TC_JSONOut
,

166 {"\"çmy_šdex\": 0,$", 
MR_Next
},

167 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

169 
MR_Next
},

170 {"\"run_ty³\": \"agg»g©e\",$", 
MR_Next
},

171 {"\"»³t™iÚs\": 2,$", 
MR_Next
},

172 {"\"th»ads\": 1,$", 
MR_Next
},

173 {"\"agg»g©e_Çme\": \"¡ddev\",$", 
MR_Next
},

174 {"\"agg»g©e_un™\": \"time\",$", 
MR_Next
},

175 {"\"™”©iÚs\": %št,$", 
MR_Next
},

176 {"\"»®_time\": %æßt,$", 
MR_Next
},

177 {"\"ıu_time\": %æßt,$", 
MR_Next
},

178 {"\"time_un™\": \"ns\",$", 
MR_Next
},

179 {"\"B¬\": %æßt,$", 
MR_Next
},

180 {"\"B©\": %æßt,$", 
MR_Next
},

181 {"\"Baz\": %æßt,$", 
MR_Next
},

182 {"\"Foo\": %æßt,$", 
MR_Next
},

183 {"\"Frob\": %æßt,$", 
MR_Next
},

184 {"\"Lob\": %æßt$", 
MR_Next
},

185 {"}", 
MR_Next
}});

186 
ADD_CASES
(
TC_JSONOut
,

188 {"\"çmy_šdex\": 0,$", 
MR_Next
},

189 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

191 
MR_Next
},

192 {"\"run_ty³\": \"agg»g©e\",$", 
MR_Next
},

193 {"\"»³t™iÚs\": 2,$", 
MR_Next
},

194 {"\"th»ads\": 1,$", 
MR_Next
},

195 {"\"agg»g©e_Çme\": \"cv\",$", 
MR_Next
},

196 {"\"agg»g©e_un™\": \"³rûÁage\",$", 
MR_Next
},

197 {"\"™”©iÚs\": %št,$", 
MR_Next
},

198 {"\"»®_time\": %æßt,$", 
MR_Next
},

199 {"\"ıu_time\": %æßt,$", 
MR_Next
},

200 {"\"time_un™\": \"ns\",$", 
MR_Next
},

201 {"\"B¬\": %æßt,$", 
MR_Next
},

202 {"\"B©\": %æßt,$", 
MR_Next
},

203 {"\"Baz\": %æßt,$", 
MR_Next
},

204 {"\"Foo\": %æßt,$", 
MR_Next
},

205 {"\"Frob\": %æßt,$", 
MR_Next
},

206 {"\"Lob\": %æßt$", 
MR_Next
},

207 {"}", 
MR_Next
}});

209 
ADD_CASES
(
TC_JSONOut
,

211 {"\"çmy_šdex\": 0,$", 
MR_Next
},

212 {"\"³r_çmy_š¡ªû_šdex\": 1,$", 
MR_Next
},

214 
MR_Next
},

215 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

216 {"\"»³t™iÚs\": 2,$", 
MR_Next
},

217 {"\"»³t™iÚ_šdex\": 0,$", 
MR_Next
},

218 {"\"th»ads\": 2,$", 
MR_Next
},

219 {"\"™”©iÚs\": %št,$", 
MR_Next
},

220 {"\"»®_time\": %æßt,$", 
MR_Next
},

221 {"\"ıu_time\": %æßt,$", 
MR_Next
},

222 {"\"time_un™\": \"ns\",$", 
MR_Next
},

223 {"\"B¬\": %æßt,$", 
MR_Next
},

224 {"\"B©\": %æßt,$", 
MR_Next
},

225 {"\"Baz\": %æßt,$", 
MR_Next
},

226 {"\"Foo\": %æßt,$", 
MR_Next
},

227 {"\"Frob\": %æßt,$", 
MR_Next
},

228 {"\"Lob\": %æßt$", 
MR_Next
},

229 {"}", 
MR_Next
}});

230 
ADD_CASES
(
TC_JSONOut
,

232 {"\"çmy_šdex\": 0,$", 
MR_Next
},

233 {"\"³r_çmy_š¡ªû_šdex\": 1,$", 
MR_Next
},

235 
MR_Next
},

236 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

237 {"\"»³t™iÚs\": 2,$", 
MR_Next
},

238 {"\"»³t™iÚ_šdex\": 1,$", 
MR_Next
},

239 {"\"th»ads\": 2,$", 
MR_Next
},

240 {"\"™”©iÚs\": %št,$", 
MR_Next
},

241 {"\"»®_time\": %æßt,$", 
MR_Next
},

242 {"\"ıu_time\": %æßt,$", 
MR_Next
},

243 {"\"time_un™\": \"ns\",$", 
MR_Next
},

244 {"\"B¬\": %æßt,$", 
MR_Next
},

245 {"\"B©\": %æßt,$", 
MR_Next
},

246 {"\"Baz\": %æßt,$", 
MR_Next
},

247 {"\"Foo\": %æßt,$", 
MR_Next
},

248 {"\"Frob\": %æßt,$", 
MR_Next
},

249 {"\"Lob\": %æßt$", 
MR_Next
},

250 {"}", 
MR_Next
}});

251 
ADD_CASES
(
TC_JSONOut
,

253 {"\"çmy_šdex\": 0,$", 
MR_Next
},

254 {"\"³r_çmy_š¡ªû_šdex\": 1,$", 
MR_Next
},

256 
MR_Next
},

257 {"\"run_ty³\": \"agg»g©e\",$", 
MR_Next
},

258 {"\"»³t™iÚs\": 2,$", 
MR_Next
},

259 {"\"th»ads\": 2,$", 
MR_Next
},

260 {"\"agg»g©e_Çme\": \"medŸn\",$", 
MR_Next
},

261 {"\"agg»g©e_un™\": \"time\",$", 
MR_Next
},

262 {"\"™”©iÚs\": %št,$", 
MR_Next
},

263 {"\"»®_time\": %æßt,$", 
MR_Next
},

264 {"\"ıu_time\": %æßt,$", 
MR_Next
},

265 {"\"time_un™\": \"ns\",$", 
MR_Next
},

266 {"\"B¬\": %æßt,$", 
MR_Next
},

267 {"\"B©\": %æßt,$", 
MR_Next
},

268 {"\"Baz\": %æßt,$", 
MR_Next
},

269 {"\"Foo\": %æßt,$", 
MR_Next
},

270 {"\"Frob\": %æßt,$", 
MR_Next
},

271 {"\"Lob\": %æßt$", 
MR_Next
},

272 {"}", 
MR_Next
}});

273 
ADD_CASES
(
TC_JSONOut
,

275 {"\"çmy_šdex\": 0,$", 
MR_Next
},

276 {"\"³r_çmy_š¡ªû_šdex\": 1,$", 
MR_Next
},

278 
MR_Next
},

279 {"\"run_ty³\": \"agg»g©e\",$", 
MR_Next
},

280 {"\"»³t™iÚs\": 2,$", 
MR_Next
},

281 {"\"th»ads\": 2,$", 
MR_Next
},

282 {"\"agg»g©e_Çme\": \"¡ddev\",$", 
MR_Next
},

283 {"\"agg»g©e_un™\": \"time\",$", 
MR_Next
},

284 {"\"™”©iÚs\": %št,$", 
MR_Next
},

285 {"\"»®_time\": %æßt,$", 
MR_Next
},

286 {"\"ıu_time\": %æßt,$", 
MR_Next
},

287 {"\"time_un™\": \"ns\",$", 
MR_Next
},

288 {"\"B¬\": %æßt,$", 
MR_Next
},

289 {"\"B©\": %æßt,$", 
MR_Next
},

290 {"\"Baz\": %æßt,$", 
MR_Next
},

291 {"\"Foo\": %æßt,$", 
MR_Next
},

292 {"\"Frob\": %æßt,$", 
MR_Next
},

293 {"\"Lob\": %æßt$", 
MR_Next
},

294 {"}", 
MR_Next
}});

295 
ADD_CASES
(
TC_JSONOut
,

297 {"\"çmy_šdex\": 0,$", 
MR_Next
},

298 {"\"³r_çmy_š¡ªû_šdex\": 1,$", 
MR_Next
},

300 
MR_Next
},

301 {"\"run_ty³\": \"agg»g©e\",$", 
MR_Next
},

302 {"\"»³t™iÚs\": 2,$", 
MR_Next
},

303 {"\"th»ads\": 2,$", 
MR_Next
},

304 {"\"agg»g©e_Çme\": \"cv\",$", 
MR_Next
},

305 {"\"agg»g©e_un™\": \"³rûÁage\",$", 
MR_Next
},

306 {"\"™”©iÚs\": %št,$", 
MR_Next
},

307 {"\"»®_time\": %æßt,$", 
MR_Next
},

308 {"\"ıu_time\": %æßt,$", 
MR_Next
},

309 {"\"time_un™\": \"ns\",$", 
MR_Next
},

310 {"\"B¬\": %æßt,$", 
MR_Next
},

311 {"\"B©\": %æßt,$", 
MR_Next
},

312 {"\"Baz\": %æßt,$", 
MR_Next
},

313 {"\"Foo\": %æßt,$", 
MR_Next
},

314 {"\"Frob\": %æßt,$", 
MR_Next
},

315 {"\"Lob\": %æßt$", 
MR_Next
},

316 {"}", 
MR_Next
}});

317 
ADD_CASES
(
TC_CSVOut
,

320 
ADD_CASES
(
TC_CSVOut
,

323 
ADD_CASES
(
TC_CSVOut
,

326 
ADD_CASES
(
TC_CSVOut
,

329 
ADD_CASES
(
TC_CSVOut
,

332 
ADD_CASES
(
TC_CSVOut
,

335 
ADD_CASES
(
TC_CSVOut
,

338 
ADD_CASES
(
TC_CSVOut
,

341 
ADD_CASES
(
TC_CSVOut
,

344 
ADD_CASES
(
TC_CSVOut
,

347 
ADD_CASES
(
TC_CSVOut
,

350 
ADD_CASES
(
TC_CSVOut
,

355 
	$CheckTabuÏr
(
ResuÉs
 cÚ¡& 
e
) {

356 
	`CHECK_COUNTER_VALUE
(
e
, , "Foo", 
EQ
, 1);

357 
	`CHECK_COUNTER_VALUE
(
e
, , "B¬", 
EQ
, 2);

358 
	`CHECK_COUNTER_VALUE
(
e
, , "Baz", 
EQ
, 4);

359 
	`CHECK_COUNTER_VALUE
(
e
, , "B©", 
EQ
, 8);

360 
	`CHECK_COUNTER_VALUE
(
e
, , "Frob", 
EQ
, 16);

361 
	`CHECK_COUNTER_VALUE
(
e
, , "Lob", 
EQ
, 32);

362 
	}
}

363 
CHECK_BENCHMARK_RESULTS
("BM_Counters_Tabular/repeats:2/threads:1$",

364 &
CheckTabuÏr
);

365 
CHECK_BENCHMARK_RESULTS
("BM_Counters_Tabular/repeats:2/threads:2$",

366 &
CheckTabuÏr
);

372 
	$BM_CouÁ”R©es_TabuÏr
(
b’chm¬k
::
S‹
& 
¡©e
) {

373 autØ
_
 : 
¡©e
) {

375 autØ
™”©iÚs
 = 
¡©e
.
	`™”©iÚs
();

376 
b’chm¬k
::
	`DoNÙO±imize
(
™”©iÚs
);

378 
Çme¥aû
 
bm
 = 
b’chm¬k
;

379 
¡©e
.
couÁ”s
.
	`š£¹
({

380 {"Foo", {1, 
bm
::
CouÁ”
::
kAvgTh»adsR©e
}},

381 {"B¬", {2, 
bm
::
CouÁ”
::
kAvgTh»adsR©e
}},

382 {"Baz", {4, 
bm
::
CouÁ”
::
kAvgTh»adsR©e
}},

383 {"B©", {8, 
bm
::
CouÁ”
::
kAvgTh»adsR©e
}},

384 {"Frob", {16, 
bm
::
CouÁ”
::
kAvgTh»adsR©e
}},

385 {"Lob", {32, 
bm
::
CouÁ”
::
kAvgTh»adsR©e
}},

387 
	}
}

388 
BENCHMARK
(
BM_CouÁ”R©es_TabuÏr
)->
Th»adRªge
(1, 16);

389 
ADD_CASES
(
TC_JSONOut
,

391 {"\"çmy_šdex\": 1,$", 
MR_Next
},

392 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

394 
MR_Next
},

395 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

396 {"\"»³t™iÚs\": 1,$", 
MR_Next
},

397 {"\"»³t™iÚ_šdex\": 0,$", 
MR_Next
},

398 {"\"th»ads\": 1,$", 
MR_Next
},

399 {"\"™”©iÚs\": %št,$", 
MR_Next
},

400 {"\"»®_time\": %æßt,$", 
MR_Next
},

401 {"\"ıu_time\": %æßt,$", 
MR_Next
},

402 {"\"time_un™\": \"ns\",$", 
MR_Next
},

403 {"\"B¬\": %æßt,$", 
MR_Next
},

404 {"\"B©\": %æßt,$", 
MR_Next
},

405 {"\"Baz\": %æßt,$", 
MR_Next
},

406 {"\"Foo\": %æßt,$", 
MR_Next
},

407 {"\"Frob\": %æßt,$", 
MR_Next
},

408 {"\"Lob\": %æßt$", 
MR_Next
},

409 {"}", 
MR_Next
}});

410 
ADD_CASES
(
TC_CSVOut
, {{"^\"BM_CounterRates_Tabular/threads:%int\",%csv_report,"

414 
	$CheckTabuÏrR©e
(
ResuÉs
 cÚ¡& 
e
) {

415 
t
 = 
e
.
	`Du¿tiÚCPUTime
();

416 
	`CHECK_FLOAT_COUNTER_VALUE
(
e
, "Foo", 
EQ
, 1. / 
t
, 0.001);

417 
	`CHECK_FLOAT_COUNTER_VALUE
(
e
, "B¬", 
EQ
, 2. / 
t
, 0.001);

418 
	`CHECK_FLOAT_COUNTER_VALUE
(
e
, "Baz", 
EQ
, 4. / 
t
, 0.001);

419 
	`CHECK_FLOAT_COUNTER_VALUE
(
e
, "B©", 
EQ
, 8. / 
t
, 0.001);

420 
	`CHECK_FLOAT_COUNTER_VALUE
(
e
, "Frob", 
EQ
, 16. / 
t
, 0.001);

421 
	`CHECK_FLOAT_COUNTER_VALUE
(
e
, "Lob", 
EQ
, 32. / 
t
, 0.001);

422 
	}
}

423 
CHECK_BENCHMARK_RESULTS
("BM_CounterRates_Tabular/threads:%int",

424 &
CheckTabuÏrR©e
);

431 
	$BM_CouÁ”S‘0_TabuÏr
(
b’chm¬k
::
S‹
& 
¡©e
) {

432 autØ
_
 : 
¡©e
) {

434 
Çme¥aû
 
bm
 = 
b’chm¬k
;

435 
¡©e
.
couÁ”s
.
	`š£¹
({

436 {"Foo", {10, 
bm
::
CouÁ”
::
kAvgTh»ads
}},

437 {"B¬", {20, 
bm
::
CouÁ”
::
kAvgTh»ads
}},

438 {"Baz", {40, 
bm
::
CouÁ”
::
kAvgTh»ads
}},

440 
	}
}

441 
BENCHMARK
(
BM_CouÁ”S‘0_TabuÏr
)->
Th»adRªge
(1, 16);

442 
ADD_CASES
(
TC_JSONOut
,

444 {"\"çmy_šdex\": 2,$", 
MR_Next
},

445 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

446 {"\"run_Çme\": \"BM_CouÁ”S‘0_TabuÏr/th»ads:%št\",$", 
MR_Next
},

447 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

448 {"\"»³t™iÚs\": 1,$", 
MR_Next
},

449 {"\"»³t™iÚ_šdex\": 0,$", 
MR_Next
},

450 {"\"th»ads\": 1,$", 
MR_Next
},

451 {"\"™”©iÚs\": %št,$", 
MR_Next
},

452 {"\"»®_time\": %æßt,$", 
MR_Next
},

453 {"\"ıu_time\": %æßt,$", 
MR_Next
},

454 {"\"time_un™\": \"ns\",$", 
MR_Next
},

455 {"\"B¬\": %æßt,$", 
MR_Next
},

456 {"\"Baz\": %æßt,$", 
MR_Next
},

457 {"\"Foo\": %æßt$", 
MR_Next
},

458 {"}", 
MR_Next
}});

459 
ADD_CASES
(
TC_CSVOut
, {{"^\"BM_CounterSet0_Tabular/threads:%int\",%csv_report,"

463 
	$CheckS‘0
(
ResuÉs
 cÚ¡& 
e
) {

464 
	`CHECK_COUNTER_VALUE
(
e
, , "Foo", 
EQ
, 10);

465 
	`CHECK_COUNTER_VALUE
(
e
, , "B¬", 
EQ
, 20);

466 
	`CHECK_COUNTER_VALUE
(
e
, , "Baz", 
EQ
, 40);

467 
	}
}

468 
CHECK_BENCHMARK_RESULTS
("BM_CouÁ”S‘0_TabuÏr", &
CheckS‘0
);

471 
	$BM_CouÁ”S‘1_TabuÏr
(
b’chm¬k
::
S‹
& 
¡©e
) {

472 autØ
_
 : 
¡©e
) {

474 
Çme¥aû
 
bm
 = 
b’chm¬k
;

475 
¡©e
.
couÁ”s
.
	`š£¹
({

476 {"Foo", {15, 
bm
::
CouÁ”
::
kAvgTh»ads
}},

477 {"B¬", {25, 
bm
::
CouÁ”
::
kAvgTh»ads
}},

478 {"Baz", {45, 
bm
::
CouÁ”
::
kAvgTh»ads
}},

480 
	}
}

481 
BENCHMARK
(
BM_CouÁ”S‘1_TabuÏr
)->
Th»adRªge
(1, 16);

482 
ADD_CASES
(
TC_JSONOut
,

484 {"\"çmy_šdex\": 3,$", 
MR_Next
},

485 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

486 {"\"run_Çme\": \"BM_CouÁ”S‘1_TabuÏr/th»ads:%št\",$", 
MR_Next
},

487 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

488 {"\"»³t™iÚs\": 1,$", 
MR_Next
},

489 {"\"»³t™iÚ_šdex\": 0,$", 
MR_Next
},

490 {"\"th»ads\": 1,$", 
MR_Next
},

491 {"\"™”©iÚs\": %št,$", 
MR_Next
},

492 {"\"»®_time\": %æßt,$", 
MR_Next
},

493 {"\"ıu_time\": %æßt,$", 
MR_Next
},

494 {"\"time_un™\": \"ns\",$", 
MR_Next
},

495 {"\"B¬\": %æßt,$", 
MR_Next
},

496 {"\"Baz\": %æßt,$", 
MR_Next
},

497 {"\"Foo\": %æßt$", 
MR_Next
},

498 {"}", 
MR_Next
}});

499 
ADD_CASES
(
TC_CSVOut
, {{"^\"BM_CounterSet1_Tabular/threads:%int\",%csv_report,"

503 
	$CheckS‘1
(
ResuÉs
 cÚ¡& 
e
) {

504 
	`CHECK_COUNTER_VALUE
(
e
, , "Foo", 
EQ
, 15);

505 
	`CHECK_COUNTER_VALUE
(
e
, , "B¬", 
EQ
, 25);

506 
	`CHECK_COUNTER_VALUE
(
e
, , "Baz", 
EQ
, 45);

507 
	}
}

508 
CHECK_BENCHMARK_RESULTS
("BM_CouÁ”S‘1_TabuÏr/th»ads:%št", &
CheckS‘1
);

515 
	$BM_CouÁ”S‘2_TabuÏr
(
b’chm¬k
::
S‹
& 
¡©e
) {

516 autØ
_
 : 
¡©e
) {

518 
Çme¥aû
 
bm
 = 
b’chm¬k
;

519 
¡©e
.
couÁ”s
.
	`š£¹
({

520 {"Foo", {10, 
bm
::
CouÁ”
::
kAvgTh»ads
}},

521 {"B©", {30, 
bm
::
CouÁ”
::
kAvgTh»ads
}},

522 {"Baz", {40, 
bm
::
CouÁ”
::
kAvgTh»ads
}},

524 
	}
}

525 
BENCHMARK
(
BM_CouÁ”S‘2_TabuÏr
)->
Th»adRªge
(1, 16);

526 
ADD_CASES
(
TC_JSONOut
,

528 {"\"çmy_šdex\": 4,$", 
MR_Next
},

529 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

530 {"\"run_Çme\": \"BM_CouÁ”S‘2_TabuÏr/th»ads:%št\",$", 
MR_Next
},

531 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

532 {"\"»³t™iÚs\": 1,$", 
MR_Next
},

533 {"\"»³t™iÚ_šdex\": 0,$", 
MR_Next
},

534 {"\"th»ads\": 1,$", 
MR_Next
},

535 {"\"™”©iÚs\": %št,$", 
MR_Next
},

536 {"\"»®_time\": %æßt,$", 
MR_Next
},

537 {"\"ıu_time\": %æßt,$", 
MR_Next
},

538 {"\"time_un™\": \"ns\",$", 
MR_Next
},

539 {"\"B©\": %æßt,$", 
MR_Next
},

540 {"\"Baz\": %æßt,$", 
MR_Next
},

541 {"\"Foo\": %æßt$", 
MR_Next
},

542 {"}", 
MR_Next
}});

543 
ADD_CASES
(
TC_CSVOut
, {{"^\"BM_CounterSet2_Tabular/threads:%int\",%csv_report,"

547 
	$CheckS‘2
(
ResuÉs
 cÚ¡& 
e
) {

548 
	`CHECK_COUNTER_VALUE
(
e
, , "Foo", 
EQ
, 10);

549 
	`CHECK_COUNTER_VALUE
(
e
, , "B©", 
EQ
, 30);

550 
	`CHECK_COUNTER_VALUE
(
e
, , "Baz", 
EQ
, 40);

551 
	}
}

552 
CHECK_BENCHMARK_RESULTS
("BM_CouÁ”S‘2_TabuÏr", &
CheckS‘2
);

558 
	$maš
(
¬gc
, * 
¬gv
[]è{ 
	`RunOuutTe¡s
×rgc,‡rgv); 
	}
}

	@third_party/benchmark/test/user_counters_test.cc

2 #undeà
NDEBUG


4 
	~"b’chm¬k/b’chm¬k.h
"

5 
	~"ouut_‹¡.h
"

13 
ADD_CASES
(
TC_CÚsŞeOut
,

14 {{"^[-]+$", 
MR_Next
},

15 {"^B’chm¬k % Tim% CPU % I‹¿tiÚ U£rCouÁ”s...$", 
MR_Next
},

16 {"^[-]+$", 
MR_Next
}});

17 
ADD_CASES
(
TC_CSVOut
, {{"%csv_header,\"bar\",\"foo\""}});

25 
	$BM_CouÁ”s_Sim¶e
(
b’chm¬k
::
S‹
& 
¡©e
) {

26 autØ
_
 : 
¡©e
) {

28 
¡©e
.
couÁ”s
["foo"] = 1;

29 
¡©e
.
couÁ”s
["b¬"] = 2 * 
¡©ic_ÿ¡
<>(¡©e.
	`™”©iÚs
());

30 
	}
}

31 
BENCHMARK
(
BM_CouÁ”s_Sim¶e
);

32 
ADD_CASES
(
TC_CÚsŞeOut
,

34 
ADD_CASES
(
TC_JSONOut
, {{"\"name\": \"BM_Counters_Simple\",$"},

35 {"\"çmy_šdex\": 0,$", 
MR_Next
},

36 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

37 {"\"run_Çme\": \"BM_CouÁ”s_Sim¶e\",$", 
MR_Next
},

38 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

39 {"\"»³t™iÚs\": 1,$", 
MR_Next
},

40 {"\"»³t™iÚ_šdex\": 0,$", 
MR_Next
},

41 {"\"th»ads\": 1,$", 
MR_Next
},

42 {"\"™”©iÚs\": %št,$", 
MR_Next
},

43 {"\"»®_time\": %æßt,$", 
MR_Next
},

44 {"\"ıu_time\": %æßt,$", 
MR_Next
},

45 {"\"time_un™\": \"ns\",$", 
MR_Next
},

46 {"\"b¬\": %æßt,$", 
MR_Next
},

47 {"\"foo\": %æßt$", 
MR_Next
},

48 {"}", 
MR_Next
}});

49 
ADD_CASES
(
TC_CSVOut
, {{"^\"BM_Counters_Simple\",%csv_report,%float,%float$"}});

52 
	$CheckSim¶e
(
ResuÉs
 cÚ¡& 
e
) {

53 
™s
 = 
e
.
	`NumI‹¿tiÚs
();

54 
	`CHECK_COUNTER_VALUE
(
e
, , "foo", 
EQ
, 1);

56 
	`CHECK_FLOAT_COUNTER_VALUE
(
e
, "b¬", 
EQ
, 2. * 
™s
, 0.001);

57 
	}
}

58 
CHECK_BENCHMARK_RESULTS
("BM_CouÁ”s_Sim¶e", &
CheckSim¶e
);

64 
	gÇme¥aû
 {

65 
	gnum_ÿÎs1
 = 0;

67 
	$BM_CouÁ”s_W™hBy‹sAndI‹msPSec
(
b’chm¬k
::
S‹
& 
¡©e
) {

68 autØ
_
 : 
¡©e
) {

70 autØ
™”©iÚs
 = 
¡©e
.
	`™”©iÚs
();

71 
b’chm¬k
::
	`DoNÙO±imize
(
™”©iÚs
);

73 
¡©e
.
couÁ”s
["foo"] = 1;

74 
¡©e
.
couÁ”s
["b¬"] = ++
num_ÿÎs1
;

75 
¡©e
.
	`S‘By‹sProûs£d
(364);

76 
¡©e
.
	`S‘I‹msProûs£d
(150);

77 
	}
}

78 
BENCHMARK
(
BM_CouÁ”s_W™hBy‹sAndI‹msPSec
);

79 
ADD_CASES
(
TC_CÚsŞeOut
, {{"^BM_Counters_WithBytesAndItemsPSec %console_report "

82 
ADD_CASES
(
TC_JSONOut
,

84 {"\"çmy_šdex\": 1,$", 
MR_Next
},

85 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

86 {"\"run_Çme\": \"BM_CouÁ”s_W™hBy‹sAndI‹msPSec\",$", 
MR_Next
},

87 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

88 {"\"»³t™iÚs\": 1,$", 
MR_Next
},

89 {"\"»³t™iÚ_šdex\": 0,$", 
MR_Next
},

90 {"\"th»ads\": 1,$", 
MR_Next
},

91 {"\"™”©iÚs\": %št,$", 
MR_Next
},

92 {"\"»®_time\": %æßt,$", 
MR_Next
},

93 {"\"ıu_time\": %æßt,$", 
MR_Next
},

94 {"\"time_un™\": \"ns\",$", 
MR_Next
},

95 {"\"b¬\": %æßt,$", 
MR_Next
},

96 {"\"by‹s_³r_£cÚd\": %æßt,$", 
MR_Next
},

97 {"\"foo\": %æßt,$", 
MR_Next
},

98 {"\"™ems_³r_£cÚd\": %æßt$", 
MR_Next
},

99 {"}", 
MR_Next
}});

100 
ADD_CASES
(
TC_CSVOut
, {{"^\"BM_Counters_WithBytesAndItemsPSec\","

104 
	$CheckBy‹sAndI‹msPSec
(
ResuÉs
 cÚ¡& 
e
) {

105 
t
 = 
e
.
	`Du¿tiÚCPUTime
();

106 
	`CHECK_COUNTER_VALUE
(
e
, , "foo", 
EQ
, 1);

107 
	`CHECK_COUNTER_VALUE
(
e
, , "b¬", 
EQ
, 
num_ÿÎs1
);

109 
	`CHECK_FLOAT_RESULT_VALUE
(
e
, "by‹s_³r_£cÚd", 
EQ
, 364. / 
t
, 0.001);

110 
	`CHECK_FLOAT_RESULT_VALUE
(
e
, "™ems_³r_£cÚd", 
EQ
, 150. / 
t
, 0.001);

111 
	}
}

112 
CHECK_BENCHMARK_RESULTS
("BM_Counters_WithBytesAndItemsPSec",

113 &
CheckBy‹sAndI‹msPSec
);

119 
	$BM_CouÁ”s_R©e
(
b’chm¬k
::
S‹
& 
¡©e
) {

120 autØ
_
 : 
¡©e
) {

122 autØ
™”©iÚs
 = 
¡©e
.
	`™”©iÚs
();

123 
b’chm¬k
::
	`DoNÙO±imize
(
™”©iÚs
);

125 
Çme¥aû
 
bm
 = 
b’chm¬k
;

126 
¡©e
.
couÁ”s
["foo"] = 
bm
::
CouÁ”
{1, bm::CouÁ”::
kIsR©e
};

127 
¡©e
.
couÁ”s
["b¬"] = 
bm
::
CouÁ”
{2, bm::CouÁ”::
kIsR©e
};

128 
	}
}

129 
BENCHMARK
(
BM_CouÁ”s_R©e
);

130 
ADD_CASES
(

131 
TC_CÚsŞeOut
,

133 
ADD_CASES
(
TC_JSONOut
, {{"\"name\": \"BM_Counters_Rate\",$"},

134 {"\"çmy_šdex\": 2,$", 
MR_Next
},

135 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

136 {"\"run_Çme\": \"BM_CouÁ”s_R©e\",$", 
MR_Next
},

137 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

138 {"\"»³t™iÚs\": 1,$", 
MR_Next
},

139 {"\"»³t™iÚ_šdex\": 0,$", 
MR_Next
},

140 {"\"th»ads\": 1,$", 
MR_Next
},

141 {"\"™”©iÚs\": %št,$", 
MR_Next
},

142 {"\"»®_time\": %æßt,$", 
MR_Next
},

143 {"\"ıu_time\": %æßt,$", 
MR_Next
},

144 {"\"time_un™\": \"ns\",$", 
MR_Next
},

145 {"\"b¬\": %æßt,$", 
MR_Next
},

146 {"\"foo\": %æßt$", 
MR_Next
},

147 {"}", 
MR_Next
}});

148 
ADD_CASES
(
TC_CSVOut
, {{"^\"BM_Counters_Rate\",%csv_report,%float,%float$"}});

151 
	$CheckR©e
(
ResuÉs
 cÚ¡& 
e
) {

152 
t
 = 
e
.
	`Du¿tiÚCPUTime
();

154 
	`CHECK_FLOAT_COUNTER_VALUE
(
e
, "foo", 
EQ
, 1. / 
t
, 0.001);

155 
	`CHECK_FLOAT_COUNTER_VALUE
(
e
, "b¬", 
EQ
, 2. / 
t
, 0.001);

156 
	}
}

157 
CHECK_BENCHMARK_RESULTS
("BM_CouÁ”s_R©e", &
CheckR©e
);

163 
	$BM_Inv”t
(
b’chm¬k
::
S‹
& 
¡©e
) {

164 autØ
_
 : 
¡©e
) {

166 autØ
™”©iÚs
 = 
¡©e
.
	`™”©iÚs
();

167 
b’chm¬k
::
	`DoNÙO±imize
(
™”©iÚs
);

169 
Çme¥aû
 
bm
 = 
b’chm¬k
;

170 
¡©e
.
couÁ”s
["foo"] = 
bm
::
CouÁ”
{0.0001, bm::CouÁ”::
kInv”t
};

171 
¡©e
.
couÁ”s
["b¬"] = 
bm
::
CouÁ”
{10000, bm::CouÁ”::
kInv”t
};

172 
	}
}

173 
BENCHMARK
(
BM_Inv”t
);

174 
ADD_CASES
(
TC_CÚsŞeOut
,

176 
ADD_CASES
(
TC_JSONOut
, {{"\"name\": \"BM_Invert\",$"},

177 {"\"çmy_šdex\": 3,$", 
MR_Next
},

178 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

179 {"\"run_Çme\": \"BM_Inv”t\",$", 
MR_Next
},

180 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

181 {"\"»³t™iÚs\": 1,$", 
MR_Next
},

182 {"\"»³t™iÚ_šdex\": 0,$", 
MR_Next
},

183 {"\"th»ads\": 1,$", 
MR_Next
},

184 {"\"™”©iÚs\": %št,$", 
MR_Next
},

185 {"\"»®_time\": %æßt,$", 
MR_Next
},

186 {"\"ıu_time\": %æßt,$", 
MR_Next
},

187 {"\"time_un™\": \"ns\",$", 
MR_Next
},

188 {"\"b¬\": %æßt,$", 
MR_Next
},

189 {"\"foo\": %æßt$", 
MR_Next
},

190 {"}", 
MR_Next
}});

191 
ADD_CASES
(
TC_CSVOut
, {{"^\"BM_Invert\",%csv_report,%float,%float$"}});

194 
	$CheckInv”t
(
ResuÉs
 cÚ¡& 
e
) {

195 
	`CHECK_FLOAT_COUNTER_VALUE
(
e
, "foo", 
EQ
, 10000, 0.0001);

196 
	`CHECK_FLOAT_COUNTER_VALUE
(
e
, "b¬", 
EQ
, 0.0001, 0.0001);

197 
	}
}

198 
CHECK_BENCHMARK_RESULTS
("BM_Inv”t", &
CheckInv”t
);

204 
	$BM_CouÁ”s_Inv”‹dR©e
(
b’chm¬k
::
S‹
& 
¡©e
) {

205 autØ
_
 : 
¡©e
) {

207 autØ
™”©iÚs
 = 
¡©e
.
	`™”©iÚs
();

208 
b’chm¬k
::
	`DoNÙO±imize
(
™”©iÚs
);

210 
Çme¥aû
 
bm
 = 
b’chm¬k
;

211 
¡©e
.
couÁ”s
["foo"] =

212 
bm
::
CouÁ”
{1, bm::CouÁ”::
kIsR©e
 | bm::CouÁ”::
kInv”t
};

213 
¡©e
.
couÁ”s
["bar"] =

214 
bm
::
CouÁ”
{8192, bm::CouÁ”::
kIsR©e
 | bm::CouÁ”::
kInv”t
};

215 
	}
}

216 
BENCHMARK
(
BM_CouÁ”s_Inv”‹dR©e
);

217 
ADD_CASES
(
TC_CÚsŞeOut
, {{"^BM_Counters_InvertedRate %console_report "

219 
ADD_CASES
(
TC_JSONOut
,

221 {"\"çmy_šdex\": 4,$", 
MR_Next
},

222 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

223 {"\"run_Çme\": \"BM_CouÁ”s_Inv”‹dR©e\",$", 
MR_Next
},

224 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

225 {"\"»³t™iÚs\": 1,$", 
MR_Next
},

226 {"\"»³t™iÚ_šdex\": 0,$", 
MR_Next
},

227 {"\"th»ads\": 1,$", 
MR_Next
},

228 {"\"™”©iÚs\": %št,$", 
MR_Next
},

229 {"\"»®_time\": %æßt,$", 
MR_Next
},

230 {"\"ıu_time\": %æßt,$", 
MR_Next
},

231 {"\"time_un™\": \"ns\",$", 
MR_Next
},

232 {"\"b¬\": %æßt,$", 
MR_Next
},

233 {"\"foo\": %æßt$", 
MR_Next
},

234 {"}", 
MR_Next
}});

235 
ADD_CASES
(
TC_CSVOut
,

239 
	$CheckInv”‹dR©e
(
ResuÉs
 cÚ¡& 
e
) {

240 
t
 = 
e
.
	`Du¿tiÚCPUTime
();

242 
	`CHECK_FLOAT_COUNTER_VALUE
(
e
, "foo", 
EQ
, 
t
, 0.001);

243 
	`CHECK_FLOAT_COUNTER_VALUE
(
e
, "b¬", 
EQ
, 
t
 / 8192.0, 0.001);

244 
	}
}

245 
CHECK_BENCHMARK_RESULTS
("BM_CouÁ”s_Inv”‹dR©e", &
CheckInv”‹dR©e
);

251 
	$BM_CouÁ”s_Th»ads
(
b’chm¬k
::
S‹
& 
¡©e
) {

252 autØ
_
 : 
¡©e
) {

254 
¡©e
.
couÁ”s
["foo"] = 1;

255 
¡©e
.
couÁ”s
["bar"] = 2;

256 
	}
}

257 
BENCHMARK
(
BM_CouÁ”s_Th»ads
)->
Th»adRªge
(1, 8);

258 
ADD_CASES
(
TC_CÚsŞeOut
, {{"^BM_Counters_Threads/threads:%int %console_report "

260 
ADD_CASES
(
TC_JSONOut
,

262 {"\"çmy_šdex\": 5,$", 
MR_Next
},

263 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

264 {"\"run_Çme\": \"BM_CouÁ”s_Th»ads/th»ads:%št\",$", 
MR_Next
},

265 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

266 {"\"»³t™iÚs\": 1,$", 
MR_Next
},

267 {"\"»³t™iÚ_šdex\": 0,$", 
MR_Next
},

268 {"\"th»ads\": 1,$", 
MR_Next
},

269 {"\"™”©iÚs\": %št,$", 
MR_Next
},

270 {"\"»®_time\": %æßt,$", 
MR_Next
},

271 {"\"ıu_time\": %æßt,$", 
MR_Next
},

272 {"\"time_un™\": \"ns\",$", 
MR_Next
},

273 {"\"b¬\": %æßt,$", 
MR_Next
},

274 {"\"foo\": %æßt$", 
MR_Next
},

275 {"}", 
MR_Next
}});

276 
ADD_CASES
(

277 
TC_CSVOut
,

281 
	$CheckTh»ads
(
ResuÉs
 cÚ¡& 
e
) {

282 
	`CHECK_COUNTER_VALUE
(
e
, , "foo", 
EQ
,ƒ.
	`NumTh»ads
());

283 
	`CHECK_COUNTER_VALUE
(
e
, , "b¬", 
EQ
, 2 *ƒ.
	`NumTh»ads
());

284 
	}
}

285 
CHECK_BENCHMARK_RESULTS
("BM_CouÁ”s_Th»ads/th»ads:%št", &
CheckTh»ads
);

291 
	$BM_CouÁ”s_AvgTh»ads
(
b’chm¬k
::
S‹
& 
¡©e
) {

292 autØ
_
 : 
¡©e
) {

294 
Çme¥aû
 
bm
 = 
b’chm¬k
;

295 
¡©e
.
couÁ”s
["foo"] = 
bm
::
CouÁ”
{1, bm::CouÁ”::
kAvgTh»ads
};

296 
¡©e
.
couÁ”s
["b¬"] = 
bm
::
CouÁ”
{2, bm::CouÁ”::
kAvgTh»ads
};

297 
	}
}

298 
BENCHMARK
(
BM_CouÁ”s_AvgTh»ads
)->
Th»adRªge
(1, 8);

299 
ADD_CASES
(
TC_CÚsŞeOut
, {{"^BM_Counters_AvgThreads/threads:%int "

301 
ADD_CASES
(
TC_JSONOut
,

303 {"\"çmy_šdex\": 6,$", 
MR_Next
},

304 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

305 {"\"run_Çme\": \"BM_CouÁ”s_AvgTh»ads/th»ads:%št\",$", 
MR_Next
},

306 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

307 {"\"»³t™iÚs\": 1,$", 
MR_Next
},

308 {"\"»³t™iÚ_šdex\": 0,$", 
MR_Next
},

309 {"\"th»ads\": 1,$", 
MR_Next
},

310 {"\"™”©iÚs\": %št,$", 
MR_Next
},

311 {"\"»®_time\": %æßt,$", 
MR_Next
},

312 {"\"ıu_time\": %æßt,$", 
MR_Next
},

313 {"\"time_un™\": \"ns\",$", 
MR_Next
},

314 {"\"b¬\": %æßt,$", 
MR_Next
},

315 {"\"foo\": %æßt$", 
MR_Next
},

316 {"}", 
MR_Next
}});

317 
ADD_CASES
(

318 
TC_CSVOut
,

322 
	$CheckAvgTh»ads
(
ResuÉs
 cÚ¡& 
e
) {

323 
	`CHECK_COUNTER_VALUE
(
e
, , "foo", 
EQ
, 1);

324 
	`CHECK_COUNTER_VALUE
(
e
, , "b¬", 
EQ
, 2);

325 
	}
}

326 
CHECK_BENCHMARK_RESULTS
("BM_Counters_AvgThreads/threads:%int",

327 &
CheckAvgTh»ads
);

333 
	$BM_CouÁ”s_AvgTh»adsR©e
(
b’chm¬k
::
S‹
& 
¡©e
) {

334 autØ
_
 : 
¡©e
) {

336 autØ
™”©iÚs
 = 
¡©e
.
	`™”©iÚs
();

337 
b’chm¬k
::
	`DoNÙO±imize
(
™”©iÚs
);

339 
Çme¥aû
 
bm
 = 
b’chm¬k
;

340 
¡©e
.
couÁ”s
["foo"] = 
bm
::
CouÁ”
{1, bm::CouÁ”::
kAvgTh»adsR©e
};

341 
¡©e
.
couÁ”s
["b¬"] = 
bm
::
CouÁ”
{2, bm::CouÁ”::
kAvgTh»adsR©e
};

342 
	}
}

343 
BENCHMARK
(
BM_CouÁ”s_AvgTh»adsR©e
)->
Th»adRªge
(1, 8);

344 
ADD_CASES
(
TC_CÚsŞeOut
, {{"^BM_Counters_AvgThreadsRate/threads:%int "

346 
ADD_CASES
(
TC_JSONOut
,

348 {"\"çmy_šdex\": 7,$", 
MR_Next
},

349 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

351 
MR_Next
},

352 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

353 {"\"»³t™iÚs\": 1,$", 
MR_Next
},

354 {"\"»³t™iÚ_šdex\": 0,$", 
MR_Next
},

355 {"\"th»ads\": 1,$", 
MR_Next
},

356 {"\"™”©iÚs\": %št,$", 
MR_Next
},

357 {"\"»®_time\": %æßt,$", 
MR_Next
},

358 {"\"ıu_time\": %æßt,$", 
MR_Next
},

359 {"\"time_un™\": \"ns\",$", 
MR_Next
},

360 {"\"b¬\": %æßt,$", 
MR_Next
},

361 {"\"foo\": %æßt$", 
MR_Next
},

362 {"}", 
MR_Next
}});

363 
ADD_CASES
(
TC_CSVOut
, {{"^\"BM_Counters_AvgThreadsRate/"

367 
	$CheckAvgTh»adsR©e
(
ResuÉs
 cÚ¡& 
e
) {

368 
	`CHECK_FLOAT_COUNTER_VALUE
(
e
, "foo", 
EQ
, 1. /ƒ.
	`Du¿tiÚCPUTime
(), 0.001);

369 
	`CHECK_FLOAT_COUNTER_VALUE
(
e
, "b¬", 
EQ
, 2. /ƒ.
	`Du¿tiÚCPUTime
(), 0.001);

370 
	}
}

371 
CHECK_BENCHMARK_RESULTS
("BM_Counters_AvgThreadsRate/threads:%int",

372 &
CheckAvgTh»adsR©e
);

378 
	$BM_CouÁ”s_I‹¿tiÚInv¬ŸÁ
(
b’chm¬k
::
S‹
& 
¡©e
) {

379 autØ
_
 : 
¡©e
) {

381 
Çme¥aû
 
bm
 = 
b’chm¬k
;

382 
¡©e
.
couÁ”s
["foo"] = 
bm
::
CouÁ”
{1, bm::CouÁ”::
kIsI‹¿tiÚInv¬ŸÁ
};

383 
¡©e
.
couÁ”s
["b¬"] = 
bm
::
CouÁ”
{2, bm::CouÁ”::
kIsI‹¿tiÚInv¬ŸÁ
};

384 
	}
}

385 
BENCHMARK
(
BM_CouÁ”s_I‹¿tiÚInv¬ŸÁ
);

386 
ADD_CASES
(
TC_CÚsŞeOut
, {{"^BM_Counters_IterationInvariant %console_report "

388 
ADD_CASES
(
TC_JSONOut
,

390 {"\"çmy_šdex\": 8,$", 
MR_Next
},

391 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

392 {"\"run_Çme\": \"BM_CouÁ”s_I‹¿tiÚInv¬ŸÁ\",$", 
MR_Next
},

393 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

394 {"\"»³t™iÚs\": 1,$", 
MR_Next
},

395 {"\"»³t™iÚ_šdex\": 0,$", 
MR_Next
},

396 {"\"th»ads\": 1,$", 
MR_Next
},

397 {"\"™”©iÚs\": %št,$", 
MR_Next
},

398 {"\"»®_time\": %æßt,$", 
MR_Next
},

399 {"\"ıu_time\": %æßt,$", 
MR_Next
},

400 {"\"time_un™\": \"ns\",$", 
MR_Next
},

401 {"\"b¬\": %æßt,$", 
MR_Next
},

402 {"\"foo\": %æßt$", 
MR_Next
},

403 {"}", 
MR_Next
}});

404 
ADD_CASES
(
TC_CSVOut
,

408 
	$CheckI‹¿tiÚInv¬ŸÁ
(
ResuÉs
 cÚ¡& 
e
) {

409 
™s
 = 
e
.
	`NumI‹¿tiÚs
();

411 
	`CHECK_FLOAT_COUNTER_VALUE
(
e
, "foo", 
EQ
, 
™s
, 0.001);

412 
	`CHECK_FLOAT_COUNTER_VALUE
(
e
, "b¬", 
EQ
, 2. * 
™s
, 0.001);

413 
	}
}

414 
CHECK_BENCHMARK_RESULTS
("BM_Counters_IterationInvariant",

415 &
CheckI‹¿tiÚInv¬ŸÁ
);

421 
	$BM_CouÁ”s_kIsI‹¿tiÚInv¬ŸÁR©e
(
b’chm¬k
::
S‹
& 
¡©e
) {

422 autØ
_
 : 
¡©e
) {

424 autØ
™”©iÚs
 = 
¡©e
.
	`™”©iÚs
();

425 
b’chm¬k
::
	`DoNÙO±imize
(
™”©iÚs
);

427 
Çme¥aû
 
bm
 = 
b’chm¬k
;

428 
¡©e
.
couÁ”s
["foo"] =

429 
bm
::
CouÁ”
{1, bm::CouÁ”::
kIsI‹¿tiÚInv¬ŸÁR©e
};

430 
¡©e
.
couÁ”s
["bar"] =

431 
bm
::
CouÁ”
{2, bm::CouÁ”::
kIsR©e
 | bm::CouÁ”::
kIsI‹¿tiÚInv¬ŸÁ
};

432 
	}
}

433 
BENCHMARK
(
BM_CouÁ”s_kIsI‹¿tiÚInv¬ŸÁR©e
);

434 
ADD_CASES
(
TC_CÚsŞeOut
, {{"^BM_Counters_kIsIterationInvariantRate "

436 
ADD_CASES
(
TC_JSONOut
,

438 {"\"çmy_šdex\": 9,$", 
MR_Next
},

439 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

441 
MR_Next
},

442 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

443 {"\"»³t™iÚs\": 1,$", 
MR_Next
},

444 {"\"»³t™iÚ_šdex\": 0,$", 
MR_Next
},

445 {"\"th»ads\": 1,$", 
MR_Next
},

446 {"\"™”©iÚs\": %št,$", 
MR_Next
},

447 {"\"»®_time\": %æßt,$", 
MR_Next
},

448 {"\"ıu_time\": %æßt,$", 
MR_Next
},

449 {"\"time_un™\": \"ns\",$", 
MR_Next
},

450 {"\"b¬\": %æßt,$", 
MR_Next
},

451 {"\"foo\": %æßt$", 
MR_Next
},

452 {"}", 
MR_Next
}});

453 
ADD_CASES
(
TC_CSVOut
, {{"^\"BM_Counters_kIsIterationInvariantRate\",%csv_report,"

457 
	$CheckIsI‹¿tiÚInv¬ŸÁR©e
(
ResuÉs
 cÚ¡& 
e
) {

458 
™s
 = 
e
.
	`NumI‹¿tiÚs
();

459 
t
 = 
e
.
	`Du¿tiÚCPUTime
();

461 
	`CHECK_FLOAT_COUNTER_VALUE
(
e
, "foo", 
EQ
, 
™s
 * 1. / 
t
, 0.001);

462 
	`CHECK_FLOAT_COUNTER_VALUE
(
e
, "b¬", 
EQ
, 
™s
 * 2. / 
t
, 0.001);

463 
	}
}

464 
CHECK_BENCHMARK_RESULTS
("BM_Counters_kIsIterationInvariantRate",

465 &
CheckIsI‹¿tiÚInv¬ŸÁR©e
);

471 
	$BM_CouÁ”s_AvgI‹¿tiÚs
(
b’chm¬k
::
S‹
& 
¡©e
) {

472 autØ
_
 : 
¡©e
) {

474 
Çme¥aû
 
bm
 = 
b’chm¬k
;

475 
¡©e
.
couÁ”s
["foo"] = 
bm
::
CouÁ”
{1, bm::CouÁ”::
kAvgI‹¿tiÚs
};

476 
¡©e
.
couÁ”s
["b¬"] = 
bm
::
CouÁ”
{2, bm::CouÁ”::
kAvgI‹¿tiÚs
};

477 
	}
}

478 
BENCHMARK
(
BM_CouÁ”s_AvgI‹¿tiÚs
);

479 
ADD_CASES
(
TC_CÚsŞeOut
, {{"^BM_Counters_AvgIterations %console_report "

481 
ADD_CASES
(
TC_JSONOut
,

483 {"\"çmy_šdex\": 10,$", 
MR_Next
},

484 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

485 {"\"run_Çme\": \"BM_CouÁ”s_AvgI‹¿tiÚs\",$", 
MR_Next
},

486 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

487 {"\"»³t™iÚs\": 1,$", 
MR_Next
},

488 {"\"»³t™iÚ_šdex\": 0,$", 
MR_Next
},

489 {"\"th»ads\": 1,$", 
MR_Next
},

490 {"\"™”©iÚs\": %št,$", 
MR_Next
},

491 {"\"»®_time\": %æßt,$", 
MR_Next
},

492 {"\"ıu_time\": %æßt,$", 
MR_Next
},

493 {"\"time_un™\": \"ns\",$", 
MR_Next
},

494 {"\"b¬\": %æßt,$", 
MR_Next
},

495 {"\"foo\": %æßt$", 
MR_Next
},

496 {"}", 
MR_Next
}});

497 
ADD_CASES
(
TC_CSVOut
,

501 
	$CheckAvgI‹¿tiÚs
(
ResuÉs
 cÚ¡& 
e
) {

502 
™s
 = 
e
.
	`NumI‹¿tiÚs
();

504 
	`CHECK_FLOAT_COUNTER_VALUE
(
e
, "foo", 
EQ
, 1. / 
™s
, 0.001);

505 
	`CHECK_FLOAT_COUNTER_VALUE
(
e
, "b¬", 
EQ
, 2. / 
™s
, 0.001);

506 
	}
}

507 
CHECK_BENCHMARK_RESULTS
("BM_CouÁ”s_AvgI‹¿tiÚs", &
CheckAvgI‹¿tiÚs
);

513 
	$BM_CouÁ”s_kAvgI‹¿tiÚsR©e
(
b’chm¬k
::
S‹
& 
¡©e
) {

514 autØ
_
 : 
¡©e
) {

516 autØ
™”©iÚs
 = 
¡©e
.
	`™”©iÚs
();

517 
b’chm¬k
::
	`DoNÙO±imize
(
™”©iÚs
);

519 
Çme¥aû
 
bm
 = 
b’chm¬k
;

520 
¡©e
.
couÁ”s
["foo"] = 
bm
::
CouÁ”
{1, bm::CouÁ”::
kAvgI‹¿tiÚsR©e
};

521 
¡©e
.
couÁ”s
["bar"] =

522 
bm
::
CouÁ”
{2, bm::CouÁ”::
kIsR©e
 | bm::CouÁ”::
kAvgI‹¿tiÚs
};

523 
	}
}

524 
BENCHMARK
(
BM_CouÁ”s_kAvgI‹¿tiÚsR©e
);

525 
ADD_CASES
(
TC_CÚsŞeOut
, {{"^BM_Counters_kAvgIterationsRate "

527 
ADD_CASES
(
TC_JSONOut
,

529 {"\"çmy_šdex\": 11,$", 
MR_Next
},

530 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

531 {"\"run_Çme\": \"BM_CouÁ”s_kAvgI‹¿tiÚsR©e\",$", 
MR_Next
},

532 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

533 {"\"»³t™iÚs\": 1,$", 
MR_Next
},

534 {"\"»³t™iÚ_šdex\": 0,$", 
MR_Next
},

535 {"\"th»ads\": 1,$", 
MR_Next
},

536 {"\"™”©iÚs\": %št,$", 
MR_Next
},

537 {"\"»®_time\": %æßt,$", 
MR_Next
},

538 {"\"ıu_time\": %æßt,$", 
MR_Next
},

539 {"\"time_un™\": \"ns\",$", 
MR_Next
},

540 {"\"b¬\": %æßt,$", 
MR_Next
},

541 {"\"foo\": %æßt$", 
MR_Next
},

542 {"}", 
MR_Next
}});

543 
ADD_CASES
(
TC_CSVOut
, {{"^\"BM_Counters_kAvgIterationsRate\",%csv_report,"

547 
	$CheckAvgI‹¿tiÚsR©e
(
ResuÉs
 cÚ¡& 
e
) {

548 
™s
 = 
e
.
	`NumI‹¿tiÚs
();

549 
t
 = 
e
.
	`Du¿tiÚCPUTime
();

551 
	`CHECK_FLOAT_COUNTER_VALUE
(
e
, "foo", 
EQ
, 1. / 
™s
 / 
t
, 0.001);

552 
	`CHECK_FLOAT_COUNTER_VALUE
(
e
, "b¬", 
EQ
, 2. / 
™s
 / 
t
, 0.001);

553 
	}
}

554 
CHECK_BENCHMARK_RESULTS
("BM_Counters_kAvgIterationsRate",

555 &
CheckAvgI‹¿tiÚsR©e
);

561 
	$maš
(
¬gc
, * 
¬gv
[]è{ 
	`RunOuutTe¡s
×rgc,‡rgv); 
	}
}

	@third_party/benchmark/test/user_counters_thousands_test.cc

2 #undeà
NDEBUG


4 
	~"b’chm¬k/b’chm¬k.h
"

5 
	~"ouut_‹¡.h
"

11 
	$BM_CouÁ”s_Thou§nds
(
b’chm¬k
::
S‹
& 
¡©e
) {

12 autØ
_
 : 
¡©e
) {

14 
Çme¥aû
 
bm
 = 
b’chm¬k
;

15 
¡©e
.
couÁ”s
.
	`š£¹
({

17 
bm
::
	`CouÁ”
(1000 * 1000, bm::
CouÁ”
::
kDeçuÉs
)},

18 {"t1_1000000Ba£1000", 
bm
::
	`CouÁ”
(1000 * 1000, bm::
CouÁ”
::
kDeçuÉs
,

19 
b’chm¬k
::
CouÁ”
::
OÃK
::
kIs1000
)},

20 {"t2_1000000Ba£1024", 
bm
::
	`CouÁ”
(1000 * 1000, bm::
CouÁ”
::
kDeçuÉs
,

21 
b’chm¬k
::
CouÁ”
::
OÃK
::
kIs1024
)},

22 {"t3_1048576Ba£1000", 
bm
::
	`CouÁ”
(1024 * 1024, bm::
CouÁ”
::
kDeçuÉs
,

23 
b’chm¬k
::
CouÁ”
::
OÃK
::
kIs1000
)},

24 {"t4_1048576Ba£1024", 
bm
::
	`CouÁ”
(1024 * 1024, bm::
CouÁ”
::
kDeçuÉs
,

25 
b’chm¬k
::
CouÁ”
::
OÃK
::
kIs1024
)},

27 
	}
}

28 
BENCHMARK
(
BM_CouÁ”s_Thou§nds
)->
R•‘™iÚs
(2);

29 
ADD_CASES
(

30 
TC_CÚsŞeOut
,

52 
ADD_CASES
(
TC_JSONOut
,

54 {"\"çmy_šdex\": 0,$", 
MR_Next
},

55 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

56 {"\"run_Çme\": \"BM_CouÁ”s_Thou§nds/»³©s:2\",$", 
MR_Next
},

57 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

58 {"\"»³t™iÚs\": 2,$", 
MR_Next
},

59 {"\"»³t™iÚ_šdex\": 0,$", 
MR_Next
},

60 {"\"th»ads\": 1,$", 
MR_Next
},

61 {"\"™”©iÚs\": %št,$", 
MR_Next
},

62 {"\"»®_time\": %æßt,$", 
MR_Next
},

63 {"\"ıu_time\": %æßt,$", 
MR_Next
},

64 {"\"time_un™\": \"ns\",$", 
MR_Next
},

65 {"\"t0_1000000DeçuÉBa£\": 1\\.(0)*e\\+(0)*6,$", 
MR_Next
},

66 {"\"t1_1000000Ba£1000\": 1\\.(0)*e\\+(0)*6,$", 
MR_Next
},

67 {"\"t2_1000000Ba£1024\": 1\\.(0)*e\\+(0)*6,$", 
MR_Next
},

68 {"\"t3_1048576Ba£1000\": 1\\.048576(0)*e\\+(0)*6,$", 
MR_Next
},

69 {"\"t4_1048576Ba£1024\": 1\\.048576(0)*e\\+(0)*6$", 
MR_Next
},

70 {"}", 
MR_Next
}});

71 
ADD_CASES
(
TC_JSONOut
,

73 {"\"çmy_šdex\": 0,$", 
MR_Next
},

74 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

75 {"\"run_Çme\": \"BM_CouÁ”s_Thou§nds/»³©s:2\",$", 
MR_Next
},

76 {"\"run_ty³\": \"™”©iÚ\",$", 
MR_Next
},

77 {"\"»³t™iÚs\": 2,$", 
MR_Next
},

78 {"\"»³t™iÚ_šdex\": 1,$", 
MR_Next
},

79 {"\"th»ads\": 1,$", 
MR_Next
},

80 {"\"™”©iÚs\": %št,$", 
MR_Next
},

81 {"\"»®_time\": %æßt,$", 
MR_Next
},

82 {"\"ıu_time\": %æßt,$", 
MR_Next
},

83 {"\"time_un™\": \"ns\",$", 
MR_Next
},

84 {"\"t0_1000000DeçuÉBa£\": 1\\.(0)*e\\+(0)*6,$", 
MR_Next
},

85 {"\"t1_1000000Ba£1000\": 1\\.(0)*e\\+(0)*6,$", 
MR_Next
},

86 {"\"t2_1000000Ba£1024\": 1\\.(0)*e\\+(0)*6,$", 
MR_Next
},

87 {"\"t3_1048576Ba£1000\": 1\\.048576(0)*e\\+(0)*6,$", 
MR_Next
},

88 {"\"t4_1048576Ba£1024\": 1\\.048576(0)*e\\+(0)*6$", 
MR_Next
},

89 {"}", 
MR_Next
}});

90 
ADD_CASES
(
TC_JSONOut
,

92 {"\"çmy_šdex\": 0,$", 
MR_Next
},

93 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

94 {"\"run_Çme\": \"BM_CouÁ”s_Thou§nds/»³©s:2\",$", 
MR_Next
},

95 {"\"run_ty³\": \"agg»g©e\",$", 
MR_Next
},

96 {"\"»³t™iÚs\": 2,$", 
MR_Next
},

97 {"\"th»ads\": 1,$", 
MR_Next
},

98 {"\"agg»g©e_Çme\": \"m—n\",$", 
MR_Next
},

99 {"\"agg»g©e_un™\": \"time\",$", 
MR_Next
},

100 {"\"™”©iÚs\": 2,$", 
MR_Next
},

101 {"\"»®_time\": %æßt,$", 
MR_Next
},

102 {"\"ıu_time\": %æßt,$", 
MR_Next
},

103 {"\"time_un™\": \"ns\",$", 
MR_Next
},

104 {"\"t0_1000000DeçuÉBa£\": 1\\.(0)*e\\+(0)*6,$", 
MR_Next
},

105 {"\"t1_1000000Ba£1000\": 1\\.(0)*e\\+(0)*6,$", 
MR_Next
},

106 {"\"t2_1000000Ba£1024\": 1\\.(0)*e\\+(0)*6,$", 
MR_Next
},

107 {"\"t3_1048576Ba£1000\": 1\\.048576(0)*e\\+(0)*6,$", 
MR_Next
},

108 {"\"t4_1048576Ba£1024\": 1\\.048576(0)*e\\+(0)*6$", 
MR_Next
},

109 {"}", 
MR_Next
}});

110 
ADD_CASES
(
TC_JSONOut
,

112 {"\"çmy_šdex\": 0,$", 
MR_Next
},

113 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

114 {"\"run_Çme\": \"BM_CouÁ”s_Thou§nds/»³©s:2\",$", 
MR_Next
},

115 {"\"run_ty³\": \"agg»g©e\",$", 
MR_Next
},

116 {"\"»³t™iÚs\": 2,$", 
MR_Next
},

117 {"\"th»ads\": 1,$", 
MR_Next
},

118 {"\"agg»g©e_Çme\": \"medŸn\",$", 
MR_Next
},

119 {"\"agg»g©e_un™\": \"time\",$", 
MR_Next
},

120 {"\"™”©iÚs\": 2,$", 
MR_Next
},

121 {"\"»®_time\": %æßt,$", 
MR_Next
},

122 {"\"ıu_time\": %æßt,$", 
MR_Next
},

123 {"\"time_un™\": \"ns\",$", 
MR_Next
},

124 {"\"t0_1000000DeçuÉBa£\": 1\\.(0)*e\\+(0)*6,$", 
MR_Next
},

125 {"\"t1_1000000Ba£1000\": 1\\.(0)*e\\+(0)*6,$", 
MR_Next
},

126 {"\"t2_1000000Ba£1024\": 1\\.(0)*e\\+(0)*6,$", 
MR_Next
},

127 {"\"t3_1048576Ba£1000\": 1\\.048576(0)*e\\+(0)*6,$", 
MR_Next
},

128 {"\"t4_1048576Ba£1024\": 1\\.048576(0)*e\\+(0)*6$", 
MR_Next
},

129 {"}", 
MR_Next
}});

130 
ADD_CASES
(
TC_JSONOut
,

132 {"\"çmy_šdex\": 0,$", 
MR_Next
},

133 {"\"³r_çmy_š¡ªû_šdex\": 0,$", 
MR_Next
},

134 {"\"run_Çme\": \"BM_CouÁ”s_Thou§nds/»³©s:2\",$", 
MR_Next
},

135 {"\"run_ty³\": \"agg»g©e\",$", 
MR_Next
},

136 {"\"»³t™iÚs\": 2,$", 
MR_Next
},

137 {"\"th»ads\": 1,$", 
MR_Next
},

138 {"\"agg»g©e_Çme\": \"¡ddev\",$", 
MR_Next
},

139 {"\"agg»g©e_un™\": \"time\",$", 
MR_Next
},

140 {"\"™”©iÚs\": 2,$", 
MR_Next
},

141 {"\"»®_time\": %æßt,$", 
MR_Next
},

142 {"\"ıu_time\": %æßt,$", 
MR_Next
},

143 {"\"time_un™\": \"ns\",$", 
MR_Next
},

144 {"\"t0_1000000DeçuÉBa£\": 0\\.(0)*e\\+(0)*,$", 
MR_Next
},

145 {"\"t1_1000000Ba£1000\": 0\\.(0)*e\\+(0)*,$", 
MR_Next
},

146 {"\"t2_1000000Ba£1024\": 0\\.(0)*e\\+(0)*,$", 
MR_Next
},

147 {"\"t3_1048576Ba£1000\": 0\\.(0)*e\\+(0)*,$", 
MR_Next
},

148 {"\"t4_1048576Ba£1024\": 0\\.(0)*e\\+(0)*$", 
MR_Next
},

149 {"}", 
MR_Next
}});

151 
ADD_CASES
(

152 
TC_CSVOut
,

168 
	$CheckThou§nds
(
ResuÉs
 cÚ¡& 
e
) {

169 ià(
e
.
Çme
 != "BM_Counters_Thousands/repeats:2")

173 
	`CHECK_FLOAT_COUNTER_VALUE
(
e
, "t0_1000000DeçuÉBa£", 
EQ
, 1000 * 1000,

175 
	`CHECK_FLOAT_COUNTER_VALUE
(
e
, "t1_1000000Ba£1000", 
EQ
, 1000 * 1000, 0.0001);

176 
	`CHECK_FLOAT_COUNTER_VALUE
(
e
, "t2_1000000Ba£1024", 
EQ
, 1000 * 1000, 0.0001);

177 
	`CHECK_FLOAT_COUNTER_VALUE
(
e
, "t3_1048576Ba£1000", 
EQ
, 1024 * 1024, 0.0001);

178 
	`CHECK_FLOAT_COUNTER_VALUE
(
e
, "t4_1048576Ba£1024", 
EQ
, 1024 * 1024, 0.0001);

179 
	}
}

180 
CHECK_BENCHMARK_RESULTS
("BM_CouÁ”s_Thou§nds", &
CheckThou§nds
);

186 
	$maš
(
¬gc
, * 
¬gv
[]è{ 
	`RunOuutTe¡s
×rgc,‡rgv); 
	}
}

	@third_party/googletest/googlemock/include/gmock/gmock-actions.h

130 #iâdeà
GOOGLEMOCK_INCLUDE_GMOCK_GMOCK_ACTIONS_H_


131 
	#GOOGLEMOCK_INCLUDE_GMOCK_GMOCK_ACTIONS_H_


	)

133 #iâdeà
_WIN32_WCE


134 
	~<”ºo.h
>

137 
	~<®gÜ™hm
>

138 
	~<funùiÚ®
>

139 
	~<memÜy
>

140 
	~<¡ršg
>

141 
	~<tu¶e
>

142 
	~<ty³_Œa™s
>

143 
	~<ut™y
>

145 
	~"gmock/š‹º®/gmock-š‹º®-uts.h
"

146 
	~"gmock/š‹º®/gmock-pÜt.h
"

147 
	~"gmock/š‹º®/gmock-µ.h
"

149 #ifdeà
_MSC_VER


150 #´agm¨
w¬nšg
(
push
)

151 #´agm¨
w¬nšg
(
di§bË
:4100)

154 
Çme¥aû
 
	g‹¡šg
 {

165 
Çme¥aû
 
	gš‹º®
 {

172 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
boŞ
 
	gkDeçuÉCÚ¡ruùibË
>

173 
	sButInDeçuÉV®ueG‘‹r
 {

174 
T
 
G‘
() {  T(); }

176 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

177 
	gButInDeçuÉV®ueG‘‹r
<
	gT
, 
	gçl£
> {

178 
T
 
G‘
() {

179 
As£¹
(
çl£
, 
__FILE__
, 
__LINE__
,

181  
	gš‹º®
::
Inv®id
<
T
>();

194 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

195 şas 
	cButInDeçuÉV®ue
 {

196 
	gpublic
:

199 
boŞ
 
Exi¡s
() {

200  ::
¡d
::
is_deçuÉ_cÚ¡ruùibË
<
T
>::
v®ue
;

203 
T
 
G‘
() {

204  
	gButInDeçuÉV®ueG‘‹r
<

205 
	gT
, ::
¡d
::
is_deçuÉ_cÚ¡ruùibË
<
T
>::
v®ue
>::
G‘
();

211 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

212 
şass
 
	gButInDeçuÉV®ue
<cÚ¡ 
	gT
> {

213 
	gpublic
:

214 
boŞ
 
Exi¡s
(è{  
ButInDeçuÉV®ue
<
T
>::Exists(); }

215 
T
 
G‘
(è{  
	gButInDeçuÉV®ue
<
	gT
>::Get(); }

220 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

221 
şass
 
	gButInDeçuÉV®ue
<
	gT
*> {

222 
	gpublic
:

223 
boŞ
 
Exi¡s
(è{  
Œue
; }

224 
T
* 
G‘
(è{  
	gnuÎ±r
; }

229 
	#GMOCK_DEFINE_DEFAULT_ACTION_FOR_RETURN_TYPE_
(
ty³
, 
v®ue
) \

230 
‹m¶©e
 <> \

231 
şass
 
ButInDeçuÉV®ue
<
ty³
> { \

232 
public
: \

233 
boŞ
 
	`Exi¡s
(è{  
Œue
; } \

234 
ty³
 
	`G‘
(è{  
v®ue
; } \

235 }

	)

237 
GMOCK_DEFINE_DEFAULT_ACTION_FOR_RETURN_TYPE_
(, );

238 
GMOCK_DEFINE_DEFAULT_ACTION_FOR_RETURN_TYPE_
(::
¡d
::
¡ršg
, "");

239 
GMOCK_DEFINE_DEFAULT_ACTION_FOR_RETURN_TYPE_
(
boŞ
, 
çl£
);

240 
GMOCK_DEFINE_DEFAULT_ACTION_FOR_RETURN_TYPE_
(, '\0');

241 
GMOCK_DEFINE_DEFAULT_ACTION_FOR_RETURN_TYPE_
(signed , '\0');

242 
GMOCK_DEFINE_DEFAULT_ACTION_FOR_RETURN_TYPE_
(, '\0');

250 #ià
GMOCK_WCHAR_T_IS_NATIVE_


251 
GMOCK_DEFINE_DEFAULT_ACTION_FOR_RETURN_TYPE_
(
wch¬_t
, 0U);

254 
GMOCK_DEFINE_DEFAULT_ACTION_FOR_RETURN_TYPE_
(, 0U);

255 
GMOCK_DEFINE_DEFAULT_ACTION_FOR_RETURN_TYPE_
(signed , 0);

256 
GMOCK_DEFINE_DEFAULT_ACTION_FOR_RETURN_TYPE_
(, 0U);

257 
GMOCK_DEFINE_DEFAULT_ACTION_FOR_RETURN_TYPE_
(signed , 0);

258 
GMOCK_DEFINE_DEFAULT_ACTION_FOR_RETURN_TYPE_
(, 0UL);

259 
GMOCK_DEFINE_DEFAULT_ACTION_FOR_RETURN_TYPE_
(signed , 0L);

260 
GMOCK_DEFINE_DEFAULT_ACTION_FOR_RETURN_TYPE_
(, 0);

261 
GMOCK_DEFINE_DEFAULT_ACTION_FOR_RETURN_TYPE_
(signed , 0);

262 
GMOCK_DEFINE_DEFAULT_ACTION_FOR_RETURN_TYPE_
(, 0);

263 
GMOCK_DEFINE_DEFAULT_ACTION_FOR_RETURN_TYPE_
(, 0);

265 #undeà
GMOCK_DEFINE_DEFAULT_ACTION_FOR_RETURN_TYPE_


268 
	g‹m¶©e
 <
ty³Çme
 
	gP
,y³Çm
	gQ
>

269 
usšg
 
	gdisjunùiÚ
 = 
ty³Çme
 ::
¡d
::
cÚd™iÚ®
<
P
::
v®ue
, 
	gP
, 
	gQ
>::
ty³
;

286 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

287 şas 
	cDeçuÉV®ue
 {

288 
	gpublic
:

291 
S‘
(
T
 
x
) {

292 
d–‘e
 
´oduûr_
;

293 
	g´oduûr_
 = 
Ãw
 
FixedV®ueProduûr
(
x
);

299 
T
 (*
	tFaùÜyFunùiÚ
)();

300 
S‘FaùÜy
(
FaùÜyFunùiÚ
 
çùÜy
) {

301 
d–‘e
 
	g´oduûr_
;

302 
	g´oduûr_
 = 
Ãw
 
FaùÜyV®ueProduûr
(
çùÜy
);

306 
CË¬
() {

307 
d–‘e
 
	g´oduûr_
;

308 
	g´oduûr_
 = 
nuÎ±r
;

312 
boŞ
 
IsS‘
(è{  
	g´oduûr_
 !ğ
nuÎ±r
; }

316 
boŞ
 
Exi¡s
() {

317  
IsS‘
(è|| 
	gš‹º®
::
ButInDeçuÉV®ue
<
T
>::
Exi¡s
();

323 
T
 
G‘
() {

324  
	g´oduûr_
 =ğ
nuÎ±r
 ? 
š‹º®
::
ButInDeçuÉV®ue
<
T
>::
G‘
()

325 : 
´oduûr_
->
Produû
();

328 
	g´iv©e
:

329 şas 
	cV®ueProduûr
 {

330 
public
:

331 
vœtu®
 ~
V®ueProduûr
() {}

332 
vœtu®
 
T
 
Produû
() = 0;

335 şas 
	cFixedV®ueProduûr
 : 
public
 
V®ueProduûr
 {

336 
public
:

337 
ex¶ic™
 
FixedV®ueProduûr
(
T
 
v®ue
è: 
v®ue_
(value) {}

338 
T
 
Produû
(è
ov”ride
 {  
v®ue_
; }

340 
	g´iv©e
:

341 cÚ¡ 
T
 
v®ue_
;

342 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
FixedV®ueProduûr
);

345 şas 
	cFaùÜyV®ueProduûr
 : 
public
 
V®ueProduûr
 {

346 
public
:

347 
ex¶ic™
 
FaùÜyV®ueProduûr
(
FaùÜyFunùiÚ
 
çùÜy
)

348 : 
çùÜy_
(
çùÜy
) {}

349 
T
 
Produû
(è
ov”ride
 {  
çùÜy_
(); }

351 
	g´iv©e
:

352 cÚ¡ 
FaùÜyFunùiÚ
 
çùÜy_
;

353 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
FaùÜyV®ueProduûr
);

356 
V®ueProduûr
* 
	g´oduûr_
;

361 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

362 
şass
 
	gDeçuÉV®ue
<
	gT
&> {

363 
	gpublic
:

365 
S‘
(
T
& 
x
) {

366 
add»ss_
 = &
x
;

370 
CË¬
(è{ 
	gadd»ss_
 = 
nuÎ±r
; }

373 
boŞ
 
IsS‘
(è{  
	gadd»ss_
 !ğ
nuÎ±r
; }

377 
boŞ
 
Exi¡s
() {

378  
IsS‘
(è|| 
	gš‹º®
::
ButInDeçuÉV®ue
<
T
&>::
Exi¡s
();

384 
	gT
& 
G‘
() {

385  
	gadd»ss_
 =ğ
nuÎ±r
 ? 
š‹º®
::
ButInDeçuÉV®ue
<
T
&>::
G‘
()

386 : *
add»ss_
;

389 
	g´iv©e
:

390 
T
* 
add»ss_
;

395 
	g‹m¶©e
 <>

396 
şass
 
	gDeçuÉV®ue
<> {

397 
	gpublic
:

398 
boŞ
 
Exi¡s
(è{  
Œue
; }

399 
G‘
() {}

403 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

404 
ty³Çme
 
	gDeçuÉV®ue
<
	gT
>::
V®ueProduûr
* 
DeçuÉV®ue
<
T
>::
´oduûr_
 = 
nuÎ±r
;

407 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

408 
T
* 
	gDeçuÉV®ue
<
	gT
&>::
add»ss_
 = 
nuÎ±r
;

411 
	g‹m¶©e
 <
ty³Çme
 
	gF
>

412 şas 
	cAùiÚIÁ”çû
 {

413 
	gpublic
:

414 
ty³Çme
 
	tš‹º®
::
	tFunùiÚ
<
	tF
>::
	tResuÉ
 Result;

415 
ty³Çme
 
	tš‹º®
::
	tFunùiÚ
<
	tF
>::
	tArgum’tTu¶e
 ArgumentTuple;

417 
AùiÚIÁ”çû
() {}

418 
	gvœtu®
 ~
AùiÚIÁ”çû
() {}

424 
vœtu®
 
ResuÉ
 
P”fÜm
(cÚ¡ 
Argum’tTu¶e
& 
¬gs
) = 0;

426 
	g´iv©e
:

427 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
AùiÚIÁ”çû
);

437 
	g‹m¶©e
 <
ty³Çme
 
	gF
>

438 şas 
	cAùiÚ
 {

441 
	sAùiÚAd­‹r
 {

443 ::
¡d
::
sh¬ed_±r
<
AùiÚIÁ”çû
<
F
>> 
im¶_
;

445 
	g‹m¶©e
 <
	gty³Çme
... 
	gArgs
>

446 
ty³Çme
 
	gš‹º®
::
FunùiÚ
<
F
>::
ResuÉ
 
İ”©Ü
()(
Args
&&... 
¬gs
) {

447  
im¶_
->
P”fÜm
(

448 ::
¡d
::
fÜw¬d_as_tu¶e
(::¡d::
fÜw¬d
<
Args
>(
¬gs
)...));

452 
	g‹m¶©e
 <
ty³Çme
 
	gG
>

453 
usšg
 
	gIsCom·tibËFunùÜ
 = 
¡d
::
is_cÚ¡ruùibË
<¡d::
funùiÚ
<
F
>, 
	gG
>;

455 
	gpublic
:

456 
ty³Çme
 
	tš‹º®
::
	tFunùiÚ
<
	tF
>::
	tResuÉ
 Result;

457 
ty³Çme
 
	tš‹º®
::
	tFunùiÚ
<
	tF
>::
	tArgum’tTu¶e
 ArgumentTuple;

461 
AùiÚ
() {}

466 
	g‹m¶©e
 <

467 
ty³Çme
 
	gG
,

468 
	gty³Çme
 = 
ty³Çme
 
¡d
::
’abË_if
<
š‹º®
::
disjunùiÚ
<

469 
IsCom·tibËFunùÜ
<
G
>, 
	g¡d
::
is_cÚ¡ruùibË
<
¡d
::
funùiÚ
<
ResuÉ
()>,

470 
	gG
>>::
v®ue
>::
ty³
>

471 
AùiÚ
(
G
&& 
fun
) {

472 
In™
(::
¡d
::
fÜw¬d
<
G
>(
fun
), 
IsCom·tibËFunùÜ
<G>());

476 
ex¶ic™
 
AùiÚ
(
AùiÚIÁ”çû
<
F
>* 
im¶
)

477 : 
fun_
(
AùiÚAd­‹r
{::
¡d
::
sh¬ed_±r
<
AùiÚIÁ”çû
<
F
>>(
im¶
)}) {}

482 
‹m¶©e
 <
ty³Çme
 
Func
>

483 
ex¶ic™
 
AùiÚ
(cÚ¡ AùiÚ<
Func
>& 
aùiÚ
è: 
fun_
(action.fun_) {}

486 
boŞ
 
IsDoDeçuÉ
(ècÚ¡ {  
fun_
 =ğ
nuÎ±r
; }

494 
ResuÉ
 
P”fÜm
(
Argum’tTu¶e
 
¬gs
) const {

495 ià(
IsDoDeçuÉ
()) {

496 
	gš‹º®
::
IÎeg®DoDeçuÉ
(
__FILE__
, 
__LINE__
);

498  
	gš‹º®
::
Aµly
(
fun_
, ::
¡d
::
move
(
¬gs
));

501 
	g´iv©e
:

502 
‹m¶©e
 <
ty³Çme
 
G
>

503 
ä›nd
 
şass
 
AùiÚ
;

505 
	g‹m¶©e
 <
ty³Çme
 
	gG
>

506 
In™
(
G
&& 
g
, ::
¡d
::
Œue_ty³
) {

507 
fun_
 = ::
¡d
::
fÜw¬d
<
G
>(
g
);

510 
	g‹m¶©e
 <
ty³Çme
 
	gG
>

511 
In™
(
G
&& 
g
, ::
¡d
::
çl£_ty³
) {

512 
fun_
 = 
IgnÜeArgs
<
ty³Çme
 ::
¡d
::
deÿy
<
G
>::
ty³
>{::¡d::
fÜw¬d
<G>(
g
)};

515 
	g‹m¶©e
 <
ty³Çme
 
	gFunùiÚIm¶
>

516 
	sIgnÜeArgs
 {

517 
	g‹m¶©e
 <
	gty³Çme
... 
	gArgs
>

518 
ResuÉ
 
İ”©Ü
()(cÚ¡ 
	gArgs
&...) const {

519  
funùiÚ_im¶
();

522 
FunùiÚIm¶
 
	gfunùiÚ_im¶
;

526 ::
¡d
::
funùiÚ
<
F
> 
fun_
;

550 
	g‹m¶©e
 <
ty³Çme
 
	gIm¶
>

551 şas 
	cPŞymÜphicAùiÚ
 {

552 
	gpublic
:

553 
ex¶ic™
 
PŞymÜphicAùiÚ
(cÚ¡ 
Im¶
& 
im¶
è: 
im¶_
(impl) {}

555 
‹m¶©e
 <
ty³Çme
 
F
>

556 
İ”©Ü
 
AùiÚ
<
F
>() const {

557  
AùiÚ
<
F
>(
Ãw
 
MÚomÜphicIm¶
<F>(
im¶_
));

560 
	g´iv©e
:

561 
‹m¶©e
 <
ty³Çme
 
F
>

562 
şass
 
MÚomÜphicIm¶
 : 
public
 
AùiÚIÁ”çû
<
F
> {

563 
public
:

564 
ty³Çme
 
	tš‹º®
::
	tFunùiÚ
<
	tF
>::
	tResuÉ
 Result;

565 
ty³Çme
 
	tš‹º®
::
	tFunùiÚ
<
	tF
>::
	tArgum’tTu¶e
 ArgumentTuple;

567 
ex¶ic™
 
MÚomÜphicIm¶
(cÚ¡ 
Im¶
& 
im¶
è: 
im¶_
(impl) {}

569 
ResuÉ
 
P”fÜm
(cÚ¡ 
Argum’tTu¶e
& 
¬gs
è
ov”ride
 {

570  
im¶_
.
‹m¶©e
 
P”fÜm
<
ResuÉ
>(
¬gs
);

573 
	g´iv©e
:

574 
Im¶
 
im¶_
;

577 
Im¶
 
	gim¶_
;

582 
	g‹m¶©e
 <
ty³Çme
 
	gF
>

583 
	gAùiÚ
<
	gF
> 
MakeAùiÚ
(
AùiÚIÁ”çû
<
F
>* 
im¶
) {

584  
	gAùiÚ
<
	gF
>(
	gim¶
);

594 
	g‹m¶©e
 <
ty³Çme
 
	gIm¶
>

595 
šlše
 
	gPŞymÜphicAùiÚ
<
	gIm¶
> 
	$MakePŞymÜphicAùiÚ
(cÚ¡ 
Im¶
& 
im¶
) {

596  
PŞymÜphicAùiÚ
<
Im¶
>(
im¶
);

597 
	}
}

599 
Çme¥aû
 
	gš‹º®
 {

603 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

604 
	sByMoveW¿µ”
 {

605 
ex¶ic™
 
ByMoveW¿µ”
(
T
 
v®ue
è: 
·ylßd
(
¡d
::
move
(value)) {}

606 
T
 
·ylßd
;

636 
	g‹m¶©e
 <
ty³Çme
 
	gR
>

637 şas 
	cR‘uºAùiÚ
 {

638 
	gpublic
:

642 
ex¶ic™
 
R‘uºAùiÚ
(
R
 
v®ue
è: 
v®ue_
(
Ãw
 R(
¡d
::
move
(value))) {}

646 
‹m¶©e
 <
ty³Çme
 
F
>

647 
İ”©Ü
 
AùiÚ
<
F
>() const {

656 
ty³Çme
 
	tFunùiÚ
<
	tF
>::
	tResuÉ
 Result;

657 
GTEST_COMPILE_ASSERT_
(

658 !
¡d
::
is_»ã»nû
<
ResuÉ
>::
v®ue
,

659 
u£_R‘uºRef_š¡—d_of_R‘uº_to_»tuº_a_»ã»nû
);

660 
¡©ic_as£¹
(!
¡d
::
is_void
<
ResuÉ
>::
v®ue
,

662  
	gAùiÚ
<
	gF
>(
Ãw
 
	gIm¶
<
	gR
, F>(
	gv®ue_
));

665 
	g´iv©e
:

667 
‹m¶©e
 <
ty³Çme
 
R_
,y³Çm
	gF
>

668 
şass
 
	gIm¶
 : 
public
 
AùiÚIÁ”çû
<
F
> {

669 
public
:

670 
ty³Çme
 
	tFunùiÚ
<
	tF
>::
	tResuÉ
 Result;

671 
ty³Çme
 
	tFunùiÚ
<
	tF
>::
	tArgum’tTu¶e
 ArgumentTuple;

680 
ex¶ic™
 
Im¶
(cÚ¡ 
¡d
::
sh¬ed_±r
<
R
>& 
v®ue
)

681 : 
v®ue_befÜe_ÿ¡_
(*
v®ue
),

682 
v®ue_
(
Im¶ic™Ca¡_
<
ResuÉ
>(
v®ue_befÜe_ÿ¡_
)) {}

684 
ResuÉ
 
P”fÜm
(cÚ¡ 
Argum’tTu¶e
&è
	gov”ride
 {  
	gv®ue_
; }

686 
	g´iv©e
:

687 
GTEST_COMPILE_ASSERT_
(!
¡d
::
is_»ã»nû
<
ResuÉ
>::
v®ue
,

688 
ResuÉ_ÿÂÙ_be_a_»ã»nû_ty³
);

691 
R
 
	gv®ue_befÜe_ÿ¡_
;

692 
ResuÉ
 
	gv®ue_
;

694 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
Im¶
);

699 
	g‹m¶©e
 <
ty³Çme
 
	gR_
,y³Çm
	gF
>

700 
şass
 
	gIm¶
<
	gByMoveW¿µ”
<
	gR_
>, 
	gF
> : 
public
 
AùiÚIÁ”çû
<
F
> {

701 
public
:

702 
ty³Çme
 
	tFunùiÚ
<
	tF
>::
	tResuÉ
 Result;

703 
ty³Çme
 
	tFunùiÚ
<
	tF
>::
	tArgum’tTu¶e
 ArgumentTuple;

705 
ex¶ic™
 
Im¶
(cÚ¡ 
¡d
::
sh¬ed_±r
<
R
>& 
w¿µ”
)

706 : 
³rfÜmed_
(
çl£
), 
w¿µ”_
(
w¿µ”
) {}

708 
ResuÉ
 
P”fÜm
(cÚ¡ 
Argum’tTu¶e
&è
	gov”ride
 {

709 
GTEST_CHECK_
(!
³rfÜmed_
)

711 
	g³rfÜmed_
 = 
Œue
;

712  
	g¡d
::
move
(
w¿µ”_
->
·ylßd
);

715 
	g´iv©e
:

716 
boŞ
 
³rfÜmed_
;

717 cÚ¡ 
	g¡d
::
sh¬ed_±r
<
R
> 
w¿µ”_
;

720 cÚ¡ 
	g¡d
::
sh¬ed_±r
<
R
> 
v®ue_
;

724 şas 
	cR‘uºNuÎAùiÚ
 {

725 
	gpublic
:

729 
‹m¶©e
 <
ty³Çme
 
ResuÉ
,y³Çm
	gArgum’tTu¶e
>

730 
ResuÉ
 
P”fÜm
(cÚ¡ 
Argum’tTu¶e
&) {

731  
	gnuÎ±r
;

736 şas 
	cR‘uºVoidAùiÚ
 {

737 
	gpublic
:

739 
‹m¶©e
 <
ty³Çme
 
ResuÉ
,y³Çm
	gArgum’tTu¶e
>

740 
P”fÜm
(cÚ¡ 
Argum’tTu¶e
&) {

741 
¡©ic_as£¹
(
¡d
::
is_void
<
ResuÉ
>::
v®ue
, "Result should be void.");

748 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

749 şas 
	cR‘uºRefAùiÚ
 {

750 
	gpublic
:

752 
ex¶ic™
 
R‘uºRefAùiÚ
(
T
& 
»f
è: 
»f_
(ref) {}

756 
‹m¶©e
 <
ty³Çme
 
F
>

757 
İ”©Ü
 
AùiÚ
<
F
>() const {

758 
ty³Çme
 
	tFunùiÚ
<
	tF
>::
	tResuÉ
 Result;

762 
GTEST_COMPILE_ASSERT_
(
¡d
::
is_»ã»nû
<
ResuÉ
>::
v®ue
,

763 
u£_R‘uº_š¡—d_of_R‘uºRef_to_»tuº_a_v®ue
);

764  
	gAùiÚ
<
	gF
>(
Ãw
 
	gIm¶
<F>(
	g»f_
));

767 
	g´iv©e
:

769 
‹m¶©e
 <
ty³Çme
 
F
>

770 
şass
 
Im¶
 : 
public
 
AùiÚIÁ”çû
<
F
> {

771 
public
:

772 
ty³Çme
 
	tFunùiÚ
<
	tF
>::
	tResuÉ
 Result;

773 
ty³Çme
 
	tFunùiÚ
<
	tF
>::
	tArgum’tTu¶e
 ArgumentTuple;

775 
ex¶ic™
 
Im¶
(
T
& 
»f
è: 
»f_
(ref) {}

777 
ResuÉ
 
P”fÜm
(cÚ¡ 
Argum’tTu¶e
&è
ov”ride
 {  
»f_
; }

779 
	g´iv©e
:

780 
T
& 
»f_
;

783 
	gT
& 
	g»f_
;

789 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

790 şas 
	cR‘uºRefOfCİyAùiÚ
 {

791 
	gpublic
:

794 
ex¶ic™
 
R‘uºRefOfCİyAùiÚ
(cÚ¡ 
T
& 
v®ue
è: 
v®ue_
(value) {}

798 
‹m¶©e
 <
ty³Çme
 
F
>

799 
İ”©Ü
 
AùiÚ
<
F
>() const {

800 
ty³Çme
 
	tFunùiÚ
<
	tF
>::
	tResuÉ
 Result;

804 
GTEST_COMPILE_ASSERT_
(

805 
¡d
::
is_»ã»nû
<
ResuÉ
>::
v®ue
,

806 
u£_R‘uº_š¡—d_of_R‘uºRefOfCİy_to_»tuº_a_v®ue
);

807  
	gAùiÚ
<
	gF
>(
Ãw
 
	gIm¶
<F>(
	gv®ue_
));

810 
	g´iv©e
:

812 
‹m¶©e
 <
ty³Çme
 
F
>

813 
şass
 
Im¶
 : 
public
 
AùiÚIÁ”çû
<
F
> {

814 
public
:

815 
ty³Çme
 
	tFunùiÚ
<
	tF
>::
	tResuÉ
 Result;

816 
ty³Çme
 
	tFunùiÚ
<
	tF
>::
	tArgum’tTu¶e
 ArgumentTuple;

818 
ex¶ic™
 
Im¶
(cÚ¡ 
T
& 
v®ue
è: 
v®ue_
(value) {}

820 
ResuÉ
 
P”fÜm
(cÚ¡ 
Argum’tTu¶e
&è
ov”ride
 {  
v®ue_
; }

822 
	g´iv©e
:

823 
T
 
v®ue_
;

826 cÚ¡ 
T
 
	gv®ue_
;

831 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

832 şas 
	cR‘uºRoundRobšAùiÚ
 {

833 
	gpublic
:

834 
ex¶ic™
 
R‘uºRoundRobšAùiÚ
(
¡d
::
veùÜ
<
T
> 
v®ues
) {

835 
GTEST_CHECK_
(!
v®ues
.
em±y
())

837 
	g¡©e_
->
	gv®ues
 = 
¡d
::
move
(
v®ues
);

840 
	g‹m¶©e
 <
	gty³Çme
... 
	gArgs
>

841 
T
 
İ”©Ü
()(
	gArgs
&&...) const {

842  
	g¡©e_
->
Next
();

845 
	g´iv©e
:

846 
	sS‹
 {

847 
T
 
Next
() {

848 
T
 
»t_v®
 = 
v®ues
[
i
++];

849 ià(
	gi
 =ğ
v®ues
.
size
()è
i
 = 0;

850  
	g»t_v®
;

853 
	g¡d
::
veùÜ
<
T
> 
v®ues
;

854 
size_t
 
	gi
 = 0;

856 
	g¡d
::
sh¬ed_±r
<
S‹
> 
¡©e_
 = 
¡d
::
make_sh¬ed
<State>();

860 şas 
	cDoDeçuÉAùiÚ
 {

861 
	gpublic
:

864 
‹m¶©e
 <
ty³Çme
 
F
>

865 
İ”©Ü
 
AùiÚ
<
F
>() const {  Action<F>(); }

870 
	g‹m¶©e
 <
ty³Çme
 
	gT1
,y³Çm
	gT2
>

871 şas 
	cAssignAùiÚ
 {

872 
	gpublic
:

873 
AssignAùiÚ
(
T1
* 
±r
, 
T2
 
v®ue
è: 
±r_
ÕŒ), 
v®ue_
(value) {}

875 
	g‹m¶©e
 <
ty³Çme
 
	gResuÉ
,y³Çm
	gArgum’tTu¶e
>

876 
P”fÜm
(cÚ¡ 
Argum’tTu¶e
& ) const {

877 *
	g±r_
 = 
v®ue_
;

880 
	g´iv©e
:

881 
T1
* cÚ¡ 
±r_
;

882 cÚ¡ 
T2
 
	gv®ue_
;

885 #ià!
GTEST_OS_WINDOWS_MOBILE


889 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

890 şas 
	cS‘E¼noAndR‘uºAùiÚ
 {

891 
	gpublic
:

892 
S‘E¼noAndR‘uºAùiÚ
(
”ºo_v®ue
, 
T
 
»suÉ
)

893 : 
”ºo_
(
”ºo_v®ue
),

894 
»suÉ_
(
»suÉ
) {}

895 
	g‹m¶©e
 <
ty³Çme
 
	gResuÉ
,y³Çm
	gArgum’tTu¶e
>

896 
ResuÉ
 
P”fÜm
(cÚ¡ 
Argum’tTu¶e
& ) const {

897 
	g”ºo
 = 
”ºo_
;

898  
	g»suÉ_
;

901 
	g´iv©e
:

902 cÚ¡ 
”ºo_
;

903 cÚ¡ 
T
 
	g»suÉ_
;

910 
	g‹m¶©e
 <
size_t
 
	gN
, 
ty³Çme
 
	gA
, 
	gty³Çme
 = >

911 
	sS‘Argum’tPoš‹eAùiÚ
 {

912 
A
 
v®ue
;

914 
	g‹m¶©e
 <
	gty³Çme
... 
	gArgs
>

915 
İ”©Ü
()(cÚ¡ 
	gArgs
&... 
	g¬gs
) const {

916 *::
¡d
::
g‘
<
N
>(¡d::
t›
(
¬gs
...)èğ
v®ue
;

921 
	g‹m¶©e
 <
şass
 
	gCÏss
, 
ty³Çme
 
	gM‘hodPŒ
>

922 
	sInvokeM‘hodAùiÚ
 {

923 
CÏss
* cÚ¡ 
	gobj_±r
;

924 cÚ¡ 
M‘hodPŒ
 
	gm‘hod_±r
;

926 
	g‹m¶©e
 <
	gty³Çme
... 
	gArgs
>

927 autØ
İ”©Ü
()(
	gArgs
&&... 
	g¬gs
) const

928 -> 
deşty³
((
obj_±r
->*
m‘hod_±r
)(
¡d
::
fÜw¬d
<
Args
>(
¬gs
)...)) {

929  (
obj_±r
->*
m‘hod_±r
)(
¡d
::
fÜw¬d
<
Args
>(
¬gs
)...);

937 
	g‹m¶©e
 <
ty³Çme
 
	gFunùiÚIm¶
>

938 
	sInvokeW™houtArgsAùiÚ
 {

939 
FunùiÚIm¶
 
	gfunùiÚ_im¶
;

943 
	g‹m¶©e
 <
	gty³Çme
... 
	gArgs
>

944 autØ
İ”©Ü
()(cÚ¡ 
	gArgs
&...è-> 
deşty³
(
funùiÚ_im¶
()) {

945  
funùiÚ_im¶
();

950 
	g‹m¶©e
 <
şass
 
	gCÏss
, 
ty³Çme
 
	gM‘hodPŒ
>

951 
	sInvokeM‘hodW™houtArgsAùiÚ
 {

952 
CÏss
* cÚ¡ 
	gobj_±r
;

953 cÚ¡ 
M‘hodPŒ
 
	gm‘hod_±r
;

955 
usšg
 
	gR‘uºTy³
 =

956 
deşty³
((
¡d
::
deşv®
<
CÏss
*>()->*¡d::deşv®<
M‘hodPŒ
>())());

958 
	g‹m¶©e
 <
	gty³Çme
... 
	gArgs
>

959 
R‘uºTy³
 
İ”©Ü
()(cÚ¡ 
	gArgs
&...) const {

960  (
	gobj_±r
->*
	gm‘hod_±r
)();

965 
	g‹m¶©e
 <
ty³Çme
 
	gA
>

966 şas 
	cIgnÜeResuÉAùiÚ
 {

967 
	gpublic
:

968 
ex¶ic™
 
IgnÜeResuÉAùiÚ
(cÚ¡ 
A
& 
aùiÚ
è: 
aùiÚ_
(action) {}

970 
‹m¶©e
 <
ty³Çme
 
F
>

971 
İ”©Ü
 
AùiÚ
<
F
>() const {

980 
ty³Çme
 
	tš‹º®
::
	tFunùiÚ
<
	tF
>::
	tResuÉ
 Result;

983 
¡©ic_as£¹
(
¡d
::
is_void
<
ResuÉ
>::
v®ue
, "Resultype should be void.");

985  
	gAùiÚ
<
	gF
>(
Ãw
 
	gIm¶
<F>(
	gaùiÚ_
));

988 
	g´iv©e
:

989 
‹m¶©e
 <
ty³Çme
 
F
>

990 
şass
 
Im¶
 : 
public
 
AùiÚIÁ”çû
<
F
> {

991 
public
:

992 
ty³Çme
 
	tš‹º®
::
	tFunùiÚ
<
	tF
>::
	tResuÉ
 Result;

993 
ty³Çme
 
	tš‹º®
::
	tFunùiÚ
<
	tF
>::
	tArgum’tTu¶e
 ArgumentTuple;

995 
ex¶ic™
 
Im¶
(cÚ¡ 
A
& 
aùiÚ
è: 
aùiÚ_
(action) {}

997 
P”fÜm
(cÚ¡ 
Argum’tTu¶e
& 
¬gs
è
ov”ride
 {

999 
aùiÚ_
.
P”fÜm
(
¬gs
);

1002 
	g´iv©e
:

1005 
ty³Çme
 
	tš‹º®
::
	tFunùiÚ
<
	tF
>::
	tMakeResuÉIgnÜedV®ue


1006 
	tOrigš®FunùiÚ
;

1008 cÚ¡ 
	gAùiÚ
<
	gOrigš®FunùiÚ
> 
	gaùiÚ_
;

1011 cÚ¡ 
A
 
	gaùiÚ_
;

1014 
	g‹m¶©e
 <
ty³Çme
 
	gIÂ”AùiÚ
, 
	gsize_t
... 
	gI
>

1015 
	sW™hArgsAùiÚ
 {

1016 
IÂ”AùiÚ
 
	gaùiÚ
;

1020 
	g‹m¶©e
 <
ty³Çme
 
	gR
, 
	gty³Çme
... 
	gArgs
>

1021 
İ”©Ü
 
	gAùiÚ
<
R
(
Args
...)>() const {

1022 
usšg
 
	gTu¶eTy³
 = 
¡d
::
tu¶e
<
Args
...>;

1023 
	gAùiÚ
<
R
(
ty³Çme
 
¡d
::
tu¶e_–em’t
<
I
, 
Tu¶eTy³
>::
ty³
...)>

1024 
cÚv”‹d
(
aùiÚ
);

1026  [
cÚv”‹d
](
	gArgs
... 
	g¬gs
è-> 
	gR
 {

1027  
	gcÚv”‹d
.
P”fÜm
(
¡d
::
fÜw¬d_as_tu¶e
(

1028 
¡d
::
g‘
<
I
>(¡d::
fÜw¬d_as_tu¶e
(¡d::
fÜw¬d
<
Args
>(
¬gs
)...))...));

1033 
	g‹m¶©e
 <
	gty³Çme
... 
	gAùiÚs
>

1034 
	sDoAÎAùiÚ
 {

1035 
	g´iv©e
:

1036 
‹m¶©e
 <
ty³Çme
 
T
>

1037 
usšg
 
NÚFš®Ty³
 =

1038 
ty³Çme
 
¡d
::
cÚd™iÚ®
<¡d::
is_sÿÏr
<
T
>::
v®ue
, 
	gT
, cÚ¡ T&>::
ty³
;

1040 
	g‹m¶©e
 <
ty³Çme
 
	gAùiÚT
, 
	gsize_t
... 
	gI
>

1041 
	g¡d
::
veùÜ
<
AùiÚT
> 
CÚv”t
(
IndexSequ’û
<
I
...>) const {

1042  {
AùiÚT
(
¡d
::
g‘
<
I
>(
aùiÚs
))...};

1045 
	gpublic
:

1046 
¡d
::
tu¶e
<
AùiÚs
...> 
aùiÚs
;

1048 
	g‹m¶©e
 <
ty³Çme
 
	gR
, 
	gty³Çme
... 
	gArgs
>

1049 
İ”©Ü
 
	gAùiÚ
<
R
(
Args
...)>() const {

1050 
	sOp
 {

1051 
	g¡d
::
veùÜ
<
AùiÚ
<(
NÚFš®Ty³
<
Args
>...)>> 
cÚv”‹d
;

1052 
	gAùiÚ
<
R
(
Args
...)> 
	gÏ¡
;

1053 
R
 
İ”©Ü
()(
	gArgs
... 
	g¬gs
) const {

1054 autØ
	gtu¶e_¬gs
 = 
¡d
::
fÜw¬d_as_tu¶e
(¡d::
fÜw¬d
<
Args
>(
¬gs
)...);

1055 auto& 
	ga
 : 
cÚv”‹d
) {

1056 
a
.
P”fÜm
(
tu¶e_¬gs
);

1058  
	gÏ¡
.
P”fÜm
(
¡d
::
move
(
tu¶e_¬gs
));

1061  
	gOp
{
	gCÚv”t
<
	gAùiÚ
<(
	gNÚFš®Ty³
<
	gArgs
>...)>>(

1062 
	gMakeIndexSequ’û
<...(
	gAùiÚs
) - 1>()),

1063 
	g¡d
::
g‘
<...(
AùiÚs
è- 1>(
aùiÚs
)};

1067 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
	gty³Çme
... 
	gP¬ams
>

1068 
	sR‘uºNewAùiÚ
 {

1069 
T
* 
İ”©Ü
()() const {

1070  
	gš‹º®
::
Aµly
(

1071 [](cÚ¡ 
P¬ams
&... 
uÅacked_·¿ms
) {

1072  
Ãw
 
T
(
uÅacked_·¿ms
...);

1074 
·¿ms
);

1076 
	g¡d
::
tu¶e
<
P¬ams
...> 
·¿ms
;

1079 
	g‹m¶©e
 <
size_t
 
	gk
>

1080 
	sR‘uºArgAùiÚ
 {

1081 
	g‹m¶©e
 <
	gty³Çme
... 
	gArgs
>

1082 autØ
İ”©Ü
()(cÚ¡ 
	gArgs
&... 
	g¬gs
) const ->

1083 
ty³Çme
 
	g¡d
::
tu¶e_–em’t
<
k
, std::
tu¶e
<
Args
...>>::
ty³
 {

1084  
¡d
::
g‘
<
k
>(¡d::
t›
(
¬gs
...));

1088 
	g‹m¶©e
 <
size_t
 
	gk
, 
ty³Çme
 
	gPŒ
>

1089 
	sSaveArgAùiÚ
 {

1090 
PŒ
 
	gpoš‹r
;

1092 
	g‹m¶©e
 <
	gty³Çme
... 
	gArgs
>

1093 
İ”©Ü
()(cÚ¡ 
	gArgs
&... 
	g¬gs
) const {

1094 *
	gpoš‹r
 = 
¡d
::
g‘
<
k
>(¡d::
t›
(
¬gs
...));

1098 
	g‹m¶©e
 <
size_t
 
	gk
, 
ty³Çme
 
	gPŒ
>

1099 
	sSaveArgPoš‹eAùiÚ
 {

1100 
PŒ
 
	gpoš‹r
;

1102 
	g‹m¶©e
 <
	gty³Çme
... 
	gArgs
>

1103 
İ”©Ü
()(cÚ¡ 
	gArgs
&... 
	g¬gs
) const {

1104 *
	gpoš‹r
 = *
¡d
::
g‘
<
k
>(¡d::
t›
(
¬gs
...));

1108 
	g‹m¶©e
 <
size_t
 
	gk
, 
ty³Çme
 
	gT
>

1109 
	sS‘ArgReã»eAùiÚ
 {

1110 
T
 
	gv®ue
;

1112 
	g‹m¶©e
 <
	gty³Çme
... 
	gArgs
>

1113 
İ”©Ü
()(
	gArgs
&&... 
	g¬gs
) const {

1114 
usšg
 
	g¬gk_ty³
 =

1115 
ty³Çme
 ::
¡d
::
tu¶e_–em’t
<
k
, 
	g¡d
::
tu¶e
<
Args
...>>::
ty³
;

1116 
¡©ic_as£¹
(
¡d
::
is_lv®ue_»ã»nû
<
¬gk_ty³
>::
v®ue
,

1118 
	g¡d
::
g‘
<
k
>(
¡d
::
t›
(
¬gs
...)èğ
v®ue
;

1122 
	g‹m¶©e
 <
size_t
 
	gk
, 
ty³Çme
 
	gI1
,y³Çm
	gI2
>

1123 
	sS‘A¼ayArgum’tAùiÚ
 {

1124 
I1
 
	gfœ¡
;

1125 
I2
 
	gÏ¡
;

1127 
	g‹m¶©e
 <
	gty³Çme
... 
	gArgs
>

1128 
İ”©Ü
()(cÚ¡ 
	gArgs
&... 
	g¬gs
) const {

1129 autØ
	gv®ue
 = 
¡d
::
g‘
<
k
>(¡d::
t›
(
¬gs
...));

1130 autØ
	g™
 = 
fœ¡
; iˆ!ğ
Ï¡
; ++™, ()++
	gv®ue
) {

1131 *
	gv®ue
 = *
™
;

1136 
	g‹m¶©e
 <
size_t
 
	gk
>

1137 
	sD–‘eArgAùiÚ
 {

1138 
	g‹m¶©e
 <
	gty³Çme
... 
	gArgs
>

1139 
İ”©Ü
()(cÚ¡ 
	gArgs
&... 
	g¬gs
) const {

1140 
d–‘e
 
	g¡d
::
g‘
<
k
>(
¡d
::
t›
(
¬gs
...));

1144 
	g‹m¶©e
 <
ty³Çme
 
	gPŒ
>

1145 
	sR‘uºPoš‹eAùiÚ
 {

1146 
PŒ
 
	gpoš‹r
;

1147 
	g‹m¶©e
 <
	gty³Çme
... 
	gArgs
>

1148 autØ
İ”©Ü
()(cÚ¡ 
	gArgs
&...ècÚ¡ -> 
deşty³
(*
poš‹r
) {

1149  *
	gpoš‹r
;

1153 #ià
GTEST_HAS_EXCEPTIONS


1154 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

1155 
	sThrowAùiÚ
 {

1156 
T
 
	gexû±iÚ
;

1158 
	g‹m¶©e
 <
ty³Çme
 
	gR
, 
	gty³Çme
... 
	gArgs
>

1159 
İ”©Ü
 
	gAùiÚ
<
R
(
Args
...)>() const {

1160 
T
 
	gcİy
 = 
exû±iÚ
;

1161  [
cİy
](
	gArgs
...è-> 
	gR
 { 
throw
 
	gcİy
; };

1198 
	gš‹º®
::
	tIgnÜedV®ue
 
	tUnu£d
;

1203 
	g‹m¶©e
 <
	gty³Çme
... 
	gAùiÚ
>

1204 
	gš‹º®
::
DoAÎAùiÚ
<
ty³Çme
 
¡d
::
deÿy
<
AùiÚ
>::
ty³
...> 
	$DoAÎ
(

1205 
AùiÚ
&&... 
aùiÚ
) {

1206  {
¡d
::
	`fÜw¬d_as_tu¶e
(¡d::
fÜw¬d
<
AùiÚ
>(
aùiÚ
)...)};

1207 
	}
}

1214 
	g‹m¶©e
 <
size_t
 
	gk
, 
ty³Çme
 
	gIÂ”AùiÚ
>

1215 
	gš‹º®
::
W™hArgsAùiÚ
<
ty³Çme
 
¡d
::
deÿy
<
IÂ”AùiÚ
>::
ty³
, 
	gk
>

1216 
	$W™hArg
(
IÂ”AùiÚ
&& 
aùiÚ
) {

1217  {
¡d
::
fÜw¬d
<
IÂ”AùiÚ
>(
aùiÚ
)};

1218 
	}
}

1224 
	g‹m¶©e
 <
size_t
 
	gk
, 
	gsize_t
... 
	gks
, 
ty³Çme
 
	gIÂ”AùiÚ
>

1225 
	gš‹º®
::
W™hArgsAùiÚ
<
ty³Çme
 
¡d
::
deÿy
<
IÂ”AùiÚ
>::
ty³
, 
	gk
, 
	gks
...>

1226 
	$W™hArgs
(
IÂ”AùiÚ
&& 
aùiÚ
) {

1227  {
¡d
::
fÜw¬d
<
IÂ”AùiÚ
>(
aùiÚ
)};

1228 
	}
}

1234 
	g‹m¶©e
 <
ty³Çme
 
	gIÂ”AùiÚ
>

1235 
	gš‹º®
::
W™hArgsAùiÚ
<
ty³Çme
 
¡d
::
deÿy
<
IÂ”AùiÚ
>::
ty³
>

1236 
	$W™houtArgs
(
IÂ”AùiÚ
&& 
aùiÚ
) {

1237  {
¡d
::
fÜw¬d
<
IÂ”AùiÚ
>(
aùiÚ
)};

1238 
	}
}

1243 
	g‹m¶©e
 <
ty³Çme
 
	gR
>

1244 
	gš‹º®
::
R‘uºAùiÚ
<
R
> 
	$R‘uº
(
R
 
v®ue
) {

1245  
š‹º®
::
R‘uºAùiÚ
<
R
>(
¡d
::
	`move
(
v®ue
));

1246 
	}
}

1249 
šlše
 
	gPŞymÜphicAùiÚ
<
	gš‹º®
::
R‘uºNuÎAùiÚ
> 
	$R‘uºNuÎ
() {

1250  
	`MakePŞymÜphicAùiÚ
(
š‹º®
::
	`R‘uºNuÎAùiÚ
());

1251 
	}
}

1254 
šlše
 
	gPŞymÜphicAùiÚ
<
	gš‹º®
::
R‘uºVoidAùiÚ
> 
	$R‘uº
() {

1255  
	`MakePŞymÜphicAùiÚ
(
š‹º®
::
	`R‘uºVoidAùiÚ
());

1256 
	}
}

1259 
	g‹m¶©e
 <
ty³Çme
 
	gR
>

1260 
šlše
 
	gš‹º®
::
R‘uºRefAùiÚ
<
R
> 
	$R‘uºRef
(
R
& 
x
) {

1261  
š‹º®
::
R‘uºRefAùiÚ
<
R
>(
x
);

1262 
	}
}

1265 
	g‹m¶©e
 <
ty³Çme
 
	gR
, R* = 
nuÎ±r
>

1266 
š‹º®
::
R‘uºRefAùiÚ
<
R
> 
R‘uºRef
(R&&èğ
d–‘e
;

1271 
	g‹m¶©e
 <
ty³Çme
 
	gR
>

1272 
šlše
 
	gš‹º®
::
R‘uºRefOfCİyAùiÚ
<
R
> 
	$R‘uºRefOfCİy
(cÚ¡ 
R
& 
x
) {

1273  
š‹º®
::
R‘uºRefOfCİyAùiÚ
<
R
>(
x
);

1274 
	}
}

1280 
	g‹m¶©e
 <
ty³Çme
 
	gR
>

1281 
	gš‹º®
::
ByMoveW¿µ”
<
R
> 
	$ByMove
(
R
 
x
) {

1282  
š‹º®
::
ByMoveW¿µ”
<
R
>(
¡d
::
	`move
(
x
));

1283 
	}
}

1288 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

1289 
	gš‹º®
::
R‘uºRoundRobšAùiÚ
<
T
> 
R‘uºRoundRobš
(
¡d
::
veùÜ
<T> 
v®s
) {

1290  
š‹º®
::
R‘uºRoundRobšAùiÚ
<
T
>(
¡d
::
move
(
v®s
));

1296 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

1297 
	gš‹º®
::
R‘uºRoundRobšAùiÚ
<
T
> 
R‘uºRoundRobš
(

1298 
¡d
::
š™Ÿliz”_li¡
<
T
> 
v®s
) {

1299  
š‹º®
::
R‘uºRoundRobšAùiÚ
<
T
>(
¡d
::
veùÜ
<T>(
v®s
));

1303 
šlše
 
	gš‹º®
::
DoDeçuÉAùiÚ
 
	$DoDeçuÉ
() {

1304  
š‹º®
::
	`DoDeçuÉAùiÚ
();

1305 
	}
}

1309 
	g‹m¶©e
 <
size_t
 
	gN
, 
ty³Çme
 
	gT
>

1310 
	gš‹º®
::
S‘Argum’tPoš‹eAùiÚ
<
N
, 
	gT
> 
	$S‘ArgPoš‹e
(
T
 
v®ue
) {

1311  {
¡d
::
	`move
(
v®ue
)};

1312 
	}
}

1315 
	g‹m¶©e
 <
size_t
 
	gN
, 
ty³Çme
 
	gT
>

1316 
	gš‹º®
::
S‘Argum’tPoš‹eAùiÚ
<
N
, 
	gT
> 
	$S‘Argum’tPoš‹e
(
T
 
v®ue
) {

1317  {
¡d
::
	`move
(
v®ue
)};

1318 
	}
}

1321 
	g‹m¶©e
 <
ty³Çme
 
	gT1
,y³Çm
	gT2
>

1322 
	gPŞymÜphicAùiÚ
<
	gš‹º®
::
AssignAùiÚ
<
T1
, 
	gT2
> > 
	$Assign
(
T1
* 
±r
, 
T2
 
v®
) {

1323  
	`MakePŞymÜphicAùiÚ
(
š‹º®
::
AssignAùiÚ
<
T1
, 
T2
>(
±r
, 
v®
));

1324 
	}
}

1326 #ià!
GTEST_OS_WINDOWS_MOBILE


1329 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

1330 
	gPŞymÜphicAùiÚ
<
	gš‹º®
::
S‘E¼noAndR‘uºAùiÚ
<
T
> >

1331 
	$S‘E¼noAndR‘uº
(
”rv®
, 
T
 
»suÉ
) {

1332  
	`MakePŞymÜphicAùiÚ
(

1333 
š‹º®
::
S‘E¼noAndR‘uºAùiÚ
<
T
>(
”rv®
, 
»suÉ
));

1334 
	}
}

1344 
	g‹m¶©e
 <
ty³Çme
 
	gFunùiÚIm¶
>

1345 
ty³Çme
 
	g¡d
::
deÿy
<
FunùiÚIm¶
>::
ty³
 
	$Invoke
(
FunùiÚIm¶
&& 
funùiÚ_im¶
) {

1346  
¡d
::
fÜw¬d
<
FunùiÚIm¶
>(
funùiÚ_im¶
);

1347 
	}
}

1351 
	g‹m¶©e
 <
şass
 
	gCÏss
, 
ty³Çme
 
	gM‘hodPŒ
>

1352 
	gš‹º®
::
InvokeM‘hodAùiÚ
<
CÏss
, 
	gM‘hodPŒ
> 
	$Invoke
(
CÏss
* 
obj_±r
,

1353 
M‘hodPŒ
 
m‘hod_±r
) {

1354  {
obj_±r
, 
m‘hod_±r
};

1355 
	}
}

1358 
	g‹m¶©e
 <
ty³Çme
 
	gFunùiÚIm¶
>

1359 
	gš‹º®
::
InvokeW™houtArgsAùiÚ
<
ty³Çme
 
¡d
::
deÿy
<
FunùiÚIm¶
>::
ty³
>

1360 
	$InvokeW™houtArgs
(
FunùiÚIm¶
 
funùiÚ_im¶
) {

1361  {
¡d
::
	`move
(
funùiÚ_im¶
)};

1362 
	}
}

1366 
	g‹m¶©e
 <
şass
 
	gCÏss
, 
ty³Çme
 
	gM‘hodPŒ
>

1367 
	gš‹º®
::
InvokeM‘hodW™houtArgsAùiÚ
<
CÏss
, 
	gM‘hodPŒ
> 
	$InvokeW™houtArgs
(

1368 
CÏss
* 
obj_±r
, 
M‘hodPŒ
 
m‘hod_±r
) {

1369  {
obj_±r
, 
m‘hod_±r
};

1370 
	}
}

1375 
	g‹m¶©e
 <
ty³Çme
 
	gA
>

1376 
šlše
 
	gš‹º®
::
IgnÜeResuÉAùiÚ
<
A
> 
	$IgnÜeResuÉ
(cÚ¡ 
A
& 
ª_aùiÚ
) {

1377  
š‹º®
::
IgnÜeResuÉAùiÚ
<
A
>(
ª_aùiÚ
);

1378 
	}
}

1390 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

1391 
	gšlše
 ::
¡d
::
»ã»nû_w¿µ”
<
T
> 
	$ByRef
(
T
& 
l_v®ue
) {

1392  ::
¡d
::
»ã»nû_w¿µ”
<
T
>(
l_v®ue
);

1393 
	}
}

1398 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
	gty³Çme
... 
	gP¬ams
>

1399 
	gš‹º®
::
R‘uºNewAùiÚ
<
T
, 
ty³Çme
 
	g¡d
::
deÿy
<
P¬ams
>::
ty³
...> 
	$R‘uºNew
(

1400 
P¬ams
&&... 
·¿ms
) {

1401  {
¡d
::
	`fÜw¬d_as_tu¶e
(¡d::
fÜw¬d
<
P¬ams
>(
·¿ms
)...)};

1402 
	}
}

1405 
	g‹m¶©e
 <
size_t
 
	gk
>

1406 
	gš‹º®
::
R‘uºArgAùiÚ
<
k
> 
	$R‘uºArg
() {

1408 
	}
}

1412 
	g‹m¶©e
 <
size_t
 
	gk
, 
ty³Çme
 
	gPŒ
>

1413 
	gš‹º®
::
SaveArgAùiÚ
<
k
, 
	gPŒ
> 
	$SaveArg
(
PŒ
 
poš‹r
) {

1414  {
poš‹r
};

1415 
	}
}

1419 
	g‹m¶©e
 <
size_t
 
	gk
, 
ty³Çme
 
	gPŒ
>

1420 
	gš‹º®
::
SaveArgPoš‹eAùiÚ
<
k
, 
	gPŒ
> 
	$SaveArgPoš‹e
(
PŒ
 
poš‹r
) {

1421  {
poš‹r
};

1422 
	}
}

1426 
	g‹m¶©e
 <
size_t
 
	gk
, 
ty³Çme
 
	gT
>

1427 
	gš‹º®
::
S‘ArgReã»eAùiÚ
<
k
, 
ty³Çme
 
	g¡d
::
deÿy
<
T
>::
ty³
> 
	$S‘ArgReã»e
(

1428 
T
&& 
v®ue
) {

1429  {
¡d
::
fÜw¬d
<
T
>(
v®ue
)};

1430 
	}
}

1437 
	g‹m¶©e
 <
size_t
 
	gk
, 
ty³Çme
 
	gI1
,y³Çm
	gI2
>

1438 
	gš‹º®
::
S‘A¼ayArgum’tAùiÚ
<
k
, 
	gI1
, 
	gI2
> 
	$S‘A¼ayArgum’t
(
I1
 
fœ¡
,

1439 
I2
 
Ï¡
) {

1440  {
fœ¡
, 
Ï¡
};

1441 
	}
}

1445 
	g‹m¶©e
 <
size_t
 
	gk
>

1446 
	gš‹º®
::
D–‘eArgAùiÚ
<
k
> 
	$D–‘eArg
() {

1448 
	}
}

1451 
	g‹m¶©e
 <
ty³Çme
 
	gPŒ
>

1452 
	gš‹º®
::
R‘uºPoš‹eAùiÚ
<
PŒ
> 
	$R‘uºPoš‹e
(
PŒ
 
poš‹r
) {

1453  {
poš‹r
};

1454 
	}
}

1458 #ià
GTEST_HAS_EXCEPTIONS


1459 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

1460 
	gš‹º®
::
ThrowAùiÚ
<
ty³Çme
 
¡d
::
deÿy
<
T
>::
ty³
> 
	$Throw
(
T
&& 
exû±iÚ
) {

1461  {
¡d
::
fÜw¬d
<
T
>(
exû±iÚ
)};

1462 
	}
}

1465 
Çme¥aû
 
	gš‹º®
 {

1481 
	sExûssiveArg
 {};

1485 
	g‹m¶©e
 <
ty³Çme
 
	gF
,y³Çm
	gIm¶
> 
	gAùiÚIm¶
;

1487 
	g‹m¶©e
 <
ty³Çme
 
	gIm¶
>

1488 
	sIm¶Ba£
 {

1489 
	sHŞd”
 {

1491 
ex¶ic™
 
İ”©Ü
 cÚ¡ 
	gIm¶
&(ècÚ¡ {  *
	g±r
; }

1492 
	g¡d
::
sh¬ed_±r
<
Im¶
> 
±r
;

1494 
usšg
 
	gty³
 = 
ty³Çme
 
¡d
::
cÚd™iÚ®
<¡d::
is_cÚ¡ruùibË
<
Im¶
>::
v®ue
,

1495 
	gIm¶
, 
	gHŞd”
>::
ty³
;

1498 
	g‹m¶©e
 <
ty³Çme
 
	gR
, 
	gty³Çme
... 
	gArgs
,y³Çm
	gIm¶
>

1499 
	gAùiÚIm¶
<
R
(
Args
...), 
	gIm¶
> : 
Im¶Ba£
<
Im¶
>::
ty³
 {

1500 
usšg
 
Ba£
 = 
ty³Çme
 
Im¶Ba£
<
Im¶
>::
ty³
;

1501 
usšg
 
	gfunùiÚ_ty³
 = 
R
(
Args
...);

1502 
usšg
 
	g¬gs_ty³
 = 
¡d
::
tu¶e
<
Args
...>;

1504 
AùiÚIm¶
() = ;

1505 
ex¶ic™
 
AùiÚIm¶
(
¡d
::
sh¬ed_±r
<
Im¶
> 
im¶
è: 
Ba£
{¡d::
move
(impl)} { }

1507 
R
 
İ”©Ü
()(
Args
&&... 
¬g
) const {

1508 
cÚ¡ex´
 
size_t
 
kMaxArgs
 =

1509 ...(
Args
) <= 10 ? ...(Args) : 10;

1510  
Aµly
(
MakeIndexSequ’û
<
kMaxArgs
>{},

1511 
MakeIndexSequ’û
<10 - 
kMaxArgs
>{},

1512 
¬gs_ty³
{
¡d
::
fÜw¬d
<
Args
>(
¬g
)...});

1515 
	g‹m¶©e
 <
	g¡d
::
size_t
... 
¬g_id
, std::size_t... 
exûss_id
>

1516 
R
 
Aµly
(
IndexSequ’û
<
¬g_id
...>, IndexSequ’û<
exûss_id
...>,

1517 cÚ¡ 
¬gs_ty³
& 
¬gs
) const {

1523 
cÚ¡ex´
 
ExûssiveArg
 
	gkExûssArg
{};

1524  
	g¡©ic_ÿ¡
<cÚ¡ 
	gIm¶
&>(*
	gthis
).
‹m¶©e
 
	ggmock_P”fÜmIm¶
<

1525  
	gfunùiÚ_ty³
, 
	gR
,

1526  
	g¬gs_ty³
,

1527  
ty³Çme
 
	g¡d
::
tu¶e_–em’t
<
¬g_id
, 
	g¬gs_ty³
>::
ty³
...>(

1528  
¬gs
, 
	g¡d
::
g‘
<
¬g_id
>(args)...,

1529 (()
	gexûss_id
, 
	gkExûssArg
)...);

1535 
	g‹m¶©e
 <
ty³Çme
 
	gF
,y³Çm
	gIm¶
>

1536 ::
‹¡šg
::
AùiÚ
<
F
> 
MakeAùiÚ
() {

1537  ::
‹¡šg
::
AùiÚ
<
F
>(
AùiÚIm¶
<F, 
	gIm¶
>());

1541 
	g‹m¶©e
 <
ty³Çme
 
	gF
,y³Çm
	gIm¶
>

1542 ::
‹¡šg
::
AùiÚ
<
F
> 
MakeAùiÚ
(
¡d
::
sh¬ed_±r
<
Im¶
> 
im¶
) {

1543  ::
‹¡šg
::
AùiÚ
<
F
>(
AùiÚIm¶
<F, 
	gIm¶
>(
	g¡d
::
move
(
im¶
)));

1546 
	#GMOCK_INTERNAL_ARG_UNUSED
(
i
, 
d©a
, 
–
) \

1547 , cÚ¡ 
¬g
##
i
##
_ty³
&‡rg##˜
GTEST_ATTRIBUTE_UNUSED_


	)

1548 
	#GMOCK_ACTION_ARG_TYPES_AND_NAMES_UNUSED_
 \

1549 cÚ¡ 
¬gs_ty³
& 
¬gs
 
GTEST_ATTRIBUTE_UNUSED_
 
	`GMOCK_PP_REPEAT
( \

1550 
GMOCK_INTERNAL_ARG_UNUSED
, , 10)

	)

1552 
	#GMOCK_INTERNAL_ARG
(
i
, 
d©a
, 
–
è, cÚ¡ 
¬g
##i##
_ty³
&‡rg##
	)
i

1553 
	#GMOCK_ACTION_ARG_TYPES_AND_NAMES_
 \

1554 cÚ¡ 
¬gs_ty³
& 
¬gs
 
	`GMOCK_PP_REPEAT
(
GMOCK_INTERNAL_ARG
, , 10)

	)

1556 
	#GMOCK_INTERNAL_TEMPLATE_ARG
(
i
, 
d©a
, 
–
è, 
ty³Çme
 
¬g
##i##
_ty³


	)

1557 
	#GMOCK_ACTION_TEMPLATE_ARGS_NAMES_
 \

1558 
	`GMOCK_PP_TAIL
(
	`GMOCK_PP_REPEAT
(
GMOCK_INTERNAL_TEMPLATE_ARG
, , 10))

	)

1560 
	#GMOCK_INTERNAL_TYPENAME_PARAM
(
i
, 
d©a
, 
·¿m
è, 
ty³Çme
…¬am##
_ty³


	)

1561 
	#GMOCK_ACTION_TYPENAME_PARAMS_
(
·¿ms
) \

1562 
	`GMOCK_PP_TAIL
(
	`GMOCK_PP_FOR_EACH
(
GMOCK_INTERNAL_TYPENAME_PARAM
, , 
·¿ms
))

	)

1564 
	#GMOCK_INTERNAL_TYPE_PARAM
(
i
, 
d©a
, 
·¿m
è,…¬am##
_ty³


	)

1565 
	#GMOCK_ACTION_TYPE_PARAMS_
(
·¿ms
) \

1566 
	`GMOCK_PP_TAIL
(
	`GMOCK_PP_FOR_EACH
(
GMOCK_INTERNAL_TYPE_PARAM
, , 
·¿ms
))

	)

1568 
	#GMOCK_INTERNAL_TYPE_GVALUE_PARAM
(
i
, 
d©a
, 
·¿m
) \

1569 , 
·¿m
##
_ty³
 
gmock_p
##
i


	)

1570 
	#GMOCK_ACTION_TYPE_GVALUE_PARAMS_
(
·¿ms
) \

1571 
	`GMOCK_PP_TAIL
(
	`GMOCK_PP_FOR_EACH
(
GMOCK_INTERNAL_TYPE_GVALUE_PARAM
, , 
·¿ms
))

	)

1573 
	#GMOCK_INTERNAL_GVALUE_PARAM
(
i
, 
d©a
, 
·¿m
) \

1574 , 
¡d
::
fÜw¬d
<
·¿m
##
_ty³
>(
gmock_p
##
i
)

	)

1575 
	#GMOCK_ACTION_GVALUE_PARAMS_
(
·¿ms
) \

1576 
	`GMOCK_PP_TAIL
(
	`GMOCK_PP_FOR_EACH
(
GMOCK_INTERNAL_GVALUE_PARAM
, , 
·¿ms
))

	)

1578 
	#GMOCK_INTERNAL_INIT_PARAM
(
i
, 
d©a
, 
·¿m
) \

1579 , 
	`·¿m
(::
¡d
::
fÜw¬d
<
·¿m
##
_ty³
>(
gmock_p
##
i
))

	)

1580 
	#GMOCK_ACTION_INIT_PARAMS_
(
·¿ms
) \

1581 
	`GMOCK_PP_TAIL
(
	`GMOCK_PP_FOR_EACH
(
GMOCK_INTERNAL_INIT_PARAM
, , 
·¿ms
))

	)

1583 
	#GMOCK_INTERNAL_FIELD_PARAM
(
i
, 
d©a
, 
·¿m
è·¿m##
_ty³
…¬am;

	)

1584 
	#GMOCK_ACTION_FIELD_PARAMS_
(
·¿ms
) \

1585 
	`GMOCK_PP_FOR_EACH
(
GMOCK_INTERNAL_FIELD_PARAM
, , 
·¿ms
)

	)

1587 
	#GMOCK_INTERNAL_ACTION
(
Çme
, 
fuÎ_Çme
, 
·¿ms
) \

1588 
‹m¶©e
 <
	`GMOCK_ACTION_TYPENAME_PARAMS_
(
·¿ms
)> \

1589 şas 
	cfuÎ_Çme
 { \

1590 
public
: \

1591 
ex¶ic™
 
	`fuÎ_Çme
(
	`GMOCK_ACTION_TYPE_GVALUE_PARAMS_
(
·¿ms
)) \

1592 : 
	`im¶_
(
¡d
::
make_sh¬ed
<
gmock_Im¶
>( \

1593 
	`GMOCK_ACTION_GVALUE_PARAMS_
(
·¿ms
))) { } \

1594 
	`fuÎ_Çme
(cÚ¡ 
fuÎ_Çme
&) = ; \

1595 
	`fuÎ_Çme
(
fuÎ_Çme
&&è
nÛxû±
 = ; \

1596 
‹m¶©e
 <
ty³Çme
 
F
> \

1597 
İ”©Ü
 ::
‹¡šg
::
AùiÚ
<
F
>() const { \

1598  ::
‹¡šg
::
š‹º®
::
MakeAùiÚ
<
F
>(
im¶_
); \

1600 
´iv©e
: \

1601 şas 
	cgmock_Im¶
 { \

1602 
public
: \

1603 
ex¶ic™
 
	`gmock_Im¶
(
	`GMOCK_ACTION_TYPE_GVALUE_PARAMS_
(
·¿ms
)) \

1604 : 
	`GMOCK_ACTION_INIT_PARAMS_
(
·¿ms
) {} \

1605 
‹m¶©e
 <
ty³Çme
 
funùiÚ_ty³
,y³Çm
»tuº_ty³
, \

1606 
ty³Çme
 
¬gs_ty³
, 
GMOCK_ACTION_TEMPLATE_ARGS_NAMES_
> \

1607 
»tuº_ty³
 
	`gmock_P”fÜmIm¶
(
GMOCK_ACTION_ARG_TYPES_AND_NAMES_
) const; \

1608 
	`GMOCK_ACTION_FIELD_PARAMS_
(
·¿ms
) \

1610 
¡d
::
sh¬ed_±r
<cÚ¡ 
gmock_Im¶
> 
im¶_
; \

1612 
‹m¶©e
 <
	`GMOCK_ACTION_TYPENAME_PARAMS_
(
·¿ms
)> \

1613 
šlše
 
fuÎ_Çme
<
	`GMOCK_ACTION_TYPE_PARAMS_
(
·¿ms
)> 
	`Çme
( \

1614 
	`GMOCK_ACTION_TYPE_GVALUE_PARAMS_
(
·¿ms
)) { \

1615  
fuÎ_Çme
<
	`GMOCK_ACTION_TYPE_PARAMS_
(
·¿ms
)>( \

1616 
	`GMOCK_ACTION_GVALUE_PARAMS_
(
·¿ms
)); \

1618 
‹m¶©e
 <
	`GMOCK_ACTION_TYPENAME_PARAMS_
(
·¿ms
)> \

1619 
‹m¶©e
 <
ty³Çme
 
funùiÚ_ty³
,y³Çm
»tuº_ty³
,y³Çm
¬gs_ty³
, \

1620 
GMOCK_ACTION_TEMPLATE_ARGS_NAMES_
> \

1621 
»tuº_ty³
 
fuÎ_Çme
<
	`GMOCK_ACTION_TYPE_PARAMS_
(
·¿ms
)>::
gmock_Im¶
:: \

1622 
	`gmock_P”fÜmIm¶
(
GMOCK_ACTION_ARG_TYPES_AND_NAMES_UNUSED_
ècÚ¡

	)

1627 
	#ACTION
(
Çme
) \

1628 
şass
 
Çme
##
AùiÚ
 { \

1629 
public
: \

1630 
ex¶ic™
 
Çme
##
	`AùiÚ
(è
nÛxû±
 {} \

1631 
Çme
##
	`AùiÚ
(cÚ¡‚ame##
AùiÚ
&è
nÛxû±
 {} \

1632 
‹m¶©e
 <
ty³Çme
 
F
> \

1633 
İ”©Ü
 ::
‹¡šg
::
AùiÚ
<
F
>() const { \

1634  ::
‹¡šg
::
š‹º®
::
MakeAùiÚ
<
F
, 
gmock_Im¶
>(); \

1636 
´iv©e
: \

1637 şas 
	cgmock_Im¶
 { \

1638 
public
: \

1639 
‹m¶©e
 <
ty³Çme
 
funùiÚ_ty³
,y³Çm
»tuº_ty³
, \

1640 
ty³Çme
 
¬gs_ty³
, 
GMOCK_ACTION_TEMPLATE_ARGS_NAMES_
> \

1641 
»tuº_ty³
 
	`gmock_P”fÜmIm¶
(
GMOCK_ACTION_ARG_TYPES_AND_NAMES_
) const; \

1644 
šlše
 
Çme
##
AùiÚ
 
	$Çme
(è
GTEST_MUST_USE_RESULT_
; \

1645 
šlše
 
Çme
##
AùiÚ
 
	$Çme
(è{  
Çme
##
	`AùiÚ
(); 
	}
} \

1646 
‹m¶©e
 <
ty³Çme
 
funùiÚ_ty³
,y³Çm
»tuº_ty³
,y³Çm
¬gs_ty³
, \

1647 
GMOCK_ACTION_TEMPLATE_ARGS_NAMES_
> \

1648 
»tuº_ty³
 
Çme
##
AùiÚ
::
gmock_Im¶
::
	`gmock_P”fÜmIm¶
( \

1649 
GMOCK_ACTION_ARG_TYPES_AND_NAMES_UNUSED_
ècÚ¡

	)

1651 
	#ACTION_P
(
Çme
, ...) \

1652 
	`GMOCK_INTERNAL_ACTION
(
Çme
,‚ame##
AùiÚP
, (
__VA_ARGS__
))

	)

1654 
	#ACTION_P2
(
Çme
, ...) \

1655 
	`GMOCK_INTERNAL_ACTION
(
Çme
,‚ame##
AùiÚP2
, (
__VA_ARGS__
))

	)

1657 
	#ACTION_P3
(
Çme
, ...) \

1658 
	`GMOCK_INTERNAL_ACTION
(
Çme
,‚ame##
AùiÚP3
, (
__VA_ARGS__
))

	)

1660 
	#ACTION_P4
(
Çme
, ...) \

1661 
	`GMOCK_INTERNAL_ACTION
(
Çme
,‚ame##
AùiÚP4
, (
__VA_ARGS__
))

	)

1663 
	#ACTION_P5
(
Çme
, ...) \

1664 
	`GMOCK_INTERNAL_ACTION
(
Çme
,‚ame##
AùiÚP5
, (
__VA_ARGS__
))

	)

1666 
	#ACTION_P6
(
Çme
, ...) \

1667 
	`GMOCK_INTERNAL_ACTION
(
Çme
,‚ame##
AùiÚP6
, (
__VA_ARGS__
))

	)

1669 
	#ACTION_P7
(
Çme
, ...) \

1670 
	`GMOCK_INTERNAL_ACTION
(
Çme
,‚ame##
AùiÚP7
, (
__VA_ARGS__
))

	)

1672 
	#ACTION_P8
(
Çme
, ...) \

1673 
	`GMOCK_INTERNAL_ACTION
(
Çme
,‚ame##
AùiÚP8
, (
__VA_ARGS__
))

	)

1675 
	#ACTION_P9
(
Çme
, ...) \

1676 
	`GMOCK_INTERNAL_ACTION
(
Çme
,‚ame##
AùiÚP9
, (
__VA_ARGS__
))

	)

1678 
	#ACTION_P10
(
Çme
, ...) \

1679 
	`GMOCK_INTERNAL_ACTION
(
Çme
,‚ame##
AùiÚP10
, (
__VA_ARGS__
))

	)

1683 #ifdeà
_MSC_VER


1684 #´agm¨
w¬nšg
(
pİ
)

	@third_party/googletest/googlemock/include/gmock/gmock-cardinalities.h

39 #iâdeà
GOOGLEMOCK_INCLUDE_GMOCK_GMOCK_CARDINALITIES_H_


40 
	#GOOGLEMOCK_INCLUDE_GMOCK_GMOCK_CARDINALITIES_H_


	)

42 
	~<lim™s.h
>

43 
	~<memÜy
>

44 
	~<o¡»am
>

45 
	~"gmock/š‹º®/gmock-pÜt.h
"

46 
	~"g‹¡/g‹¡.h
"

48 
GTEST_DISABLE_MSC_WARNINGS_PUSH_
(4251 \

51 
Çme¥aû
 
	g‹¡šg
 {

64 şas 
	cC¬dš®™yIÁ”çû
 {

65 
	gpublic
:

66 
vœtu®
 ~
C¬dš®™yIÁ”çû
() {}

70 
vœtu®
 
CÚ£rv©iveLow”Bound
() const {  0; }

71 
vœtu®
 
CÚ£rv©iveUµ”Bound
(ècÚ¡ {  
	gINT_MAX
; }

75 
vœtu®
 
boŞ
 
IsS©isf›dByC®lCouÁ
(
ÿÎ_couÁ
) const = 0;

79 
vœtu®
 
boŞ
 
IsS©u¿‹dByC®lCouÁ
(
ÿÎ_couÁ
) const = 0;

82 
vœtu®
 
DesüibeTo
(::
¡d
::
o¡»am
* 
os
) const = 0;

89 şas 
	cGTEST_API_
 
	gC¬dš®™y
 {

90 
	gpublic
:

93 
C¬dš®™y
() {}

96 
ex¶ic™
 
C¬dš®™y
(cÚ¡ 
C¬dš®™yIÁ”çû
* 
im¶
è: 
im¶_
(impl) {}

100 
CÚ£rv©iveLow”Bound
(ècÚ¡ {  
im¶_
->ConservativeLowerBound(); }

101 
CÚ£rv©iveUµ”Bound
(ècÚ¡ {  
	gim¶_
->ConservativeUpperBound(); }

105 
boŞ
 
IsS©isf›dByC®lCouÁ
(
ÿÎ_couÁ
) const {

106  
	gim¶_
->
IsS©isf›dByC®lCouÁ
(
ÿÎ_couÁ
);

111 
boŞ
 
IsS©u¿‹dByC®lCouÁ
(
ÿÎ_couÁ
) const {

112  
	gim¶_
->
IsS©u¿‹dByC®lCouÁ
(
ÿÎ_couÁ
);

117 
boŞ
 
IsOv”S©u¿‹dByC®lCouÁ
(
ÿÎ_couÁ
) const {

118  
	gim¶_
->
IsS©u¿‹dByC®lCouÁ
(
ÿÎ_couÁ
) &&

119 !
	gim¶_
->
IsS©isf›dByC®lCouÁ
(
ÿÎ_couÁ
);

123 
DesüibeTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ { 
im¶_
->DescribeTo(os); }

126 
DesüibeAùu®C®lCouÁTo
(
aùu®_ÿÎ_couÁ
,

127 ::
¡d
::
o¡»am
* 
os
);

129 
	g´iv©e
:

130 
¡d
::
sh¬ed_±r
<cÚ¡ 
C¬dš®™yIÁ”çû
> 
im¶_
;

134 
GTEST_API_
 
C¬dš®™y
 
AtL—¡
(
n
);

137 
GTEST_API_
 
C¬dš®™y
 
AtMo¡
(
n
);

140 
GTEST_API_
 
C¬dš®™y
 
AnyNumb”
();

143 
GTEST_API_
 
C¬dš®™y
 
B‘w“n
(
mš
, 
max
);

146 
GTEST_API_
 
C¬dš®™y
 
Exaùly
(
n
);

149 
šlše
 
C¬dš®™y
 
	$MakeC¬dš®™y
(cÚ¡ 
C¬dš®™yIÁ”çû
* 
c
) {

150  
	`C¬dš®™y
(
c
);

151 
	}
}

155 
	$GTEST_DISABLE_MSC_WARNINGS_POP_
()

	@third_party/googletest/googlemock/include/gmock/gmock-function-mocker.h

36 #iâdeà
GOOGLEMOCK_INCLUDE_GMOCK_INTERNAL_GMOCK_FUNCTION_MOCKER_H_


37 
	#GOOGLEMOCK_INCLUDE_GMOCK_INTERNAL_GMOCK_FUNCTION_MOCKER_H_


38 

	)

39 
	~<ty³_Œa™s
>

40 
	~<ut™y
>

42 
	~"gmock/gmock-¥ec-bud”s.h
"

43 
	~"gmock/š‹º®/gmock-š‹º®-uts.h
"

44 
	~"gmock/š‹º®/gmock-µ.h
"

46 
Çme¥aû
 
	g‹¡šg
 {

47 
Çme¥aû
 
	gš‹º®
 {

48 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

49 
usšg
 
	gid’t™y_t
 = 
T
;

51 
	g‹m¶©e
 <
ty³Çme
 
	gP©‹º
>

52 
	sThisRefAdju¡”
 {

53 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

54 
usšg
 
	gAdju¡T
 = 
ty³Çme
 
¡d
::
cÚd™iÚ®
<

55 
¡d
::
is_cÚ¡
<
ty³Çme
 std::
»move_»ã»nû
<
P©‹º
>::
ty³
>::
v®ue
,

56 
ty³Çme
 
	g¡d
::
cÚd™iÚ®
<
¡d
::
is_lv®ue_»ã»nû
<
P©‹º
>::
v®ue
,

57 cÚ¡ 
	gT
&, cÚ¡ T&&>::
ty³
,

58 
ty³Çme
 
	g¡d
::
cÚd™iÚ®
<
¡d
::
is_lv®ue_»ã»nû
<
P©‹º
>::
v®ue
, 
	gT
&,

59 
	gT
&&>::
ty³
>::type;

61 
	g‹m¶©e
 <
ty³Çme
 
	gMockTy³
>

62 
	gAdju¡T
<
	gMockTy³
> 
Adju¡
(cÚ¡ 
MockTy³
& 
mock
) {

63  
	g¡©ic_ÿ¡
<
	gAdju¡T
<
	gMockTy³
>>(
	gcÚ¡_ÿ¡
<MockTy³&>(
	gmock
));

74 
usšg
 
	gš‹º®
::
FunùiÚMock”
;

77 
	#MOCK_METHOD
(...) \

78 
	`GMOCK_PP_VARIADIC_CALL
(
GMOCK_INTERNAL_MOCK_METHOD_ARG_
, 
__VA_ARGS__
)

	)

80 
	#GMOCK_INTERNAL_MOCK_METHOD_ARG_1
(...) \

81 
	`GMOCK_INTERNAL_WRONG_ARITY
(
__VA_ARGS__
)

	)

83 
	#GMOCK_INTERNAL_MOCK_METHOD_ARG_2
(...) \

84 
	`GMOCK_INTERNAL_WRONG_ARITY
(
__VA_ARGS__
)

	)

86 
	#GMOCK_INTERNAL_MOCK_METHOD_ARG_3
(
_R‘
, 
_M‘hodName
, 
_Args
) \

87 
	`GMOCK_INTERNAL_MOCK_METHOD_ARG_4
(
_R‘
, 
_M‘hodName
, 
_Args
, ())

	)

89 
	#GMOCK_INTERNAL_MOCK_METHOD_ARG_4
(
_R‘
, 
_M‘hodName
, 
_Args
, 
_S³c
) \

90 
	`GMOCK_INTERNAL_ASSERT_PARENTHESIS
(
_Args
); \

91 
	`GMOCK_INTERNAL_ASSERT_PARENTHESIS
(
_S³c
); \

92 
	`GMOCK_INTERNAL_ASSERT_VALID_SIGNATURE
( \

93 
GMOCK_PP_NARG0
 
_Args
, 
	`GMOCK_INTERNAL_SIGNATURE
(
_R‘
, _Args)); \

94 
	`GMOCK_INTERNAL_ASSERT_VALID_SPEC
(
_S³c
) \

95 
	`GMOCK_INTERNAL_MOCK_METHOD_IMPL
( \

96 
GMOCK_PP_NARG0
 
_Args
, 
_M‘hodName
, 
	`GMOCK_INTERNAL_HAS_CONST
(
_S³c
), \

97 
	`GMOCK_INTERNAL_HAS_OVERRIDE
(
_S³c
), 
	`GMOCK_INTERNAL_HAS_FINAL
(_Spec), \

98 
	`GMOCK_INTERNAL_GET_NOEXCEPT_SPEC
(
_S³c
), \

99 
	`GMOCK_INTERNAL_GET_CALLTYPE
(
_S³c
), 
	`GMOCK_INTERNAL_GET_REF_SPEC
(_Spec), \

100 (
	`GMOCK_INTERNAL_SIGNATURE
(
_R‘
, 
_Args
)))

	)

102 
	#GMOCK_INTERNAL_MOCK_METHOD_ARG_5
(...) \

103 
	`GMOCK_INTERNAL_WRONG_ARITY
(
__VA_ARGS__
)

	)

105 
	#GMOCK_INTERNAL_MOCK_METHOD_ARG_6
(...) \

106 
	`GMOCK_INTERNAL_WRONG_ARITY
(
__VA_ARGS__
)

	)

108 
	#GMOCK_INTERNAL_MOCK_METHOD_ARG_7
(...) \

109 
	`GMOCK_INTERNAL_WRONG_ARITY
(
__VA_ARGS__
)

	)

111 
	#GMOCK_INTERNAL_WRONG_ARITY
(...) \

112 
	`¡©ic_as£¹
( \

113 
çl£
, \

117 "™ mu¡‡lsØb’şo£d iÀ·»Áhe£s.")

	)

119 
	#GMOCK_INTERNAL_ASSERT_PARENTHESIS
(
_Tu¶e
) \

120 
	`¡©ic_as£¹
( \

121 
	`GMOCK_PP_IS_ENCLOSED_PARENS
(
_Tu¶e
), \

122 
	`GMOCK_PP_STRINGIZE
(
_Tu¶e
è" should b’şo£d iÀ·»Áhe£s.")

	)

124 
	#GMOCK_INTERNAL_ASSERT_VALID_SIGNATURE
(
_N
, ...) \

125 
	`¡©ic_as£¹
( \

126 
¡d
::
is_funùiÚ
<
__VA_ARGS__
>::
v®ue
, \

129 
	`¡©ic_as£¹
( \

130 ::
‹¡šg
::
tu¶e_size
<
ty³Çme
 ::‹¡šg::
š‹º®
::
FunùiÚ
< \

131 
__VA_ARGS__
>::
Argum’tTu¶e
>::
v®ue
 =ğ
_N
, \

132 "Thi m‘hod dÛ nÙak" 
	`GMOCK_PP_STRINGIZE
( \

133 
_N
è"‡rgum’ts. P¬’thesiz®Èty³ w™h uÅrÙeùed commas.")

	)

135 
	#GMOCK_INTERNAL_ASSERT_VALID_SPEC
(
_S³c
) \

136 
	`GMOCK_PP_FOR_EACH
(
GMOCK_INTERNAL_ASSERT_VALID_SPEC_ELEMENT
, ~, 
_S³c
)

	)

138 
	#GMOCK_INTERNAL_MOCK_METHOD_IMPL
(
_N
, 
_M‘hodName
, 
_CÚ¡Ãss
, \

139 
_Ov”ride
, 
_Fš®
, 
_NÛxû±S³c
, \

140 
_C®lTy³
, 
_RefS³c
, 
_SigÇtu»
) \

141 
ty³Çme
 ::
‹¡šg
::
š‹º®
::
FunùiÚ
<
	`GMOCK_PP_REMOVE_PARENS
( \

142 
_SigÇtu»
)>::
ResuÉ
 \

143 
	`GMOCK_INTERNAL_EXPAND
(
_C®lTy³
) \

144 
	`_M‘hodName
(
	`GMOCK_PP_REPEAT
(
GMOCK_INTERNAL_PARAMETER
, 
_SigÇtu»
, 
_N
)) \

145 
	`GMOCK_PP_IF
(
_CÚ¡Ãss
, cÚ¡, ) 
_RefS³c
 
_NÛxû±S³c
 \

146 
	`GMOCK_PP_IF
(
_Ov”ride
, 
ov”ride
, ) GMOCK_PP_IF(
_Fš®
, 
fš®
, ) { \

147 
	`GMOCK_MOCKER_
(
_N
, 
_CÚ¡Ãss
, 
_M‘hodName
) \

148 .
	`S‘OwÃrAndName
(
this
, #_MethodName); \

149  
	`GMOCK_MOCKER_
(
_N
, 
_CÚ¡Ãss
, 
_M‘hodName
) \

150 .
	`Invoke
(
	`GMOCK_PP_REPEAT
(
GMOCK_INTERNAL_FORWARD_ARG
, 
_SigÇtu»
, 
_N
)); \

152 ::
‹¡šg
::
MockS³c
<
	`GMOCK_PP_REMOVE_PARENS
(
_SigÇtu»
)> 
gmock_
##
	`_M‘hodName
( \

153 
	`GMOCK_PP_REPEAT
(
GMOCK_INTERNAL_MATCHER_PARAMETER
, 
_SigÇtu»
, 
_N
)) \

154 
	`GMOCK_PP_IF
(
_CÚ¡Ãss
, cÚ¡, ) 
_RefS³c
 { \

155 
	`GMOCK_MOCKER_
(
_N
, 
_CÚ¡Ãss
, 
_M‘hodName
).
	`Regi¡”OwÃr
(
this
); \

156  
	`GMOCK_MOCKER_
(
_N
, 
_CÚ¡Ãss
, 
_M‘hodName
) \

157 .
	`W™h
(
	`GMOCK_PP_REPEAT
(
GMOCK_INTERNAL_MATCHER_ARGUMENT
, , 
_N
)); \

159 ::
‹¡šg
::
MockS³c
<
	`GMOCK_PP_REMOVE_PARENS
(
_SigÇtu»
)> 
gmock_
##
	`_M‘hodName
( \

160 cÚ¡ ::
‹¡šg
::
š‹º®
::
W™houtM©ch”s
&, \

161 
	`GMOCK_PP_IF
(
_CÚ¡Ãss
, cÚ¡, )::
‹¡šg
::
š‹º®
::
FunùiÚ
< \

162 
	`GMOCK_PP_REMOVE_PARENS
(
_SigÇtu»
)>*ècÚ¡ 
_RefS³c
 
_NÛxû±S³c
 { \

163  ::
‹¡šg
::
š‹º®
::
ThisRefAdju¡”
<
	`GMOCK_PP_IF
( \

164 
_CÚ¡Ãss
, cÚ¡, ) 
_RefS³c
>::
	`Adju¡
(*
this
) \

165 .
gmock_
##
	`_M‘hodName
(
	`GMOCK_PP_REPEAT
( \

166 
GMOCK_INTERNAL_A_MATCHER_ARGUMENT
, 
_SigÇtu»
, 
_N
)); \

168 
mubË
 ::
‹¡šg
::
FunùiÚMock”
<
	`GMOCK_PP_REMOVE_PARENS
(
_SigÇtu»
)> \

169 
	`GMOCK_MOCKER_
(
_N
, 
_CÚ¡Ãss
, 
_M‘hodName
)

	)

171 
	#GMOCK_INTERNAL_EXPAND
(...è
__VA_ARGS__


	)

174 
	#GMOCK_INTERNAL_HAS_CONST
(
_Tu¶e
) \

175 
	`GMOCK_PP_HAS_COMMA
(
	`GMOCK_PP_FOR_EACH
(
GMOCK_INTERNAL_DETECT_CONST
, ~, 
_Tu¶e
))

	)

177 
	#GMOCK_INTERNAL_HAS_OVERRIDE
(
_Tu¶e
) \

178 
	`GMOCK_PP_HAS_COMMA
( \

179 
	`GMOCK_PP_FOR_EACH
(
GMOCK_INTERNAL_DETECT_OVERRIDE
, ~, 
_Tu¶e
))

	)

181 
	#GMOCK_INTERNAL_HAS_FINAL
(
_Tu¶e
) \

182 
	`GMOCK_PP_HAS_COMMA
(
	`GMOCK_PP_FOR_EACH
(
GMOCK_INTERNAL_DETECT_FINAL
, ~, 
_Tu¶e
))

	)

184 
	#GMOCK_INTERNAL_GET_NOEXCEPT_SPEC
(
_Tu¶e
) \

185 
	`GMOCK_PP_FOR_EACH
(
GMOCK_INTERNAL_NOEXCEPT_SPEC_IF_NOEXCEPT
, ~, 
_Tu¶e
)

	)

187 
	#GMOCK_INTERNAL_NOEXCEPT_SPEC_IF_NOEXCEPT
(
_i
, 
_
, 
_–em
) \

188 
	`GMOCK_PP_IF
( \

189 
	`GMOCK_PP_HAS_COMMA
(
	`GMOCK_INTERNAL_DETECT_NOEXCEPT
(
_i
, 
_
, 
_–em
)), \

190 
_–em
, )

	)

192 
	#GMOCK_INTERNAL_GET_REF_SPEC
(
_Tu¶e
) \

193 
	`GMOCK_PP_FOR_EACH
(
GMOCK_INTERNAL_REF_SPEC_IF_REF
, ~, 
_Tu¶e
)

	)

195 
	#GMOCK_INTERNAL_REF_SPEC_IF_REF
(
_i
, 
_
, 
_–em
) \

196 
	`GMOCK_PP_IF
(
	`GMOCK_PP_HAS_COMMA
(
	`GMOCK_INTERNAL_DETECT_REF
(
_i
, 
_
, 
_–em
)), \

197 
	`GMOCK_PP_CAT
(
GMOCK_INTERNAL_UNPACK_
, 
_–em
), )

	)

199 
	#GMOCK_INTERNAL_GET_CALLTYPE
(
_Tu¶e
) \

200 
	`GMOCK_PP_FOR_EACH
(
GMOCK_INTERNAL_GET_CALLTYPE_IMPL
, ~, 
_Tu¶e
)

	)

202 
	#GMOCK_INTERNAL_ASSERT_VALID_SPEC_ELEMENT
(
_i
, 
_
, 
_–em
) \

203 
	`¡©ic_as£¹
( \

204 (
	`GMOCK_PP_HAS_COMMA
(
	`GMOCK_INTERNAL_DETECT_CONST
(
_i
, 
_
, 
_–em
)) + \

205 
	`GMOCK_PP_HAS_COMMA
(
	`GMOCK_INTERNAL_DETECT_OVERRIDE
(
_i
, 
_
, 
_–em
)) + \

206 
	`GMOCK_PP_HAS_COMMA
(
	`GMOCK_INTERNAL_DETECT_FINAL
(
_i
, 
_
, 
_–em
)) + \

207 
	`GMOCK_PP_HAS_COMMA
(
	`GMOCK_INTERNAL_DETECT_NOEXCEPT
(
_i
, 
_
, 
_–em
)) + \

208 
	`GMOCK_PP_HAS_COMMA
(
	`GMOCK_INTERNAL_DETECT_REF
(
_i
, 
_
, 
_–em
)) + \

209 
	`GMOCK_INTERNAL_IS_CALLTYPE
(
_–em
)) == 1, \

210 
	`GMOCK_PP_STRINGIZE
( \

211 
_–em
è" cªnÙ b»cognized‡ ¨v®id s³cifiÿtiÚ modif›r.");

	)

214 
	#GMOCK_INTERNAL_DETECT_CONST
(
_i
, 
_
, 
_–em
) \

215 
	`GMOCK_PP_CAT
(
GMOCK_INTERNAL_DETECT_CONST_I_
, 
_–em
)

	)

217 
	#GMOCK_INTERNAL_DETECT_CONST_I_cÚ¡
 ,

	)

219 
	#GMOCK_INTERNAL_DETECT_OVERRIDE
(
_i
, 
_
, 
_–em
) \

220 
	`GMOCK_PP_CAT
(
GMOCK_INTERNAL_DETECT_OVERRIDE_I_
, 
_–em
)

	)

222 
	#GMOCK_INTERNAL_DETECT_OVERRIDE_I_ov”ride
 ,

	)

224 
	#GMOCK_INTERNAL_DETECT_FINAL
(
_i
, 
_
, 
_–em
) \

225 
	`GMOCK_PP_CAT
(
GMOCK_INTERNAL_DETECT_FINAL_I_
, 
_–em
)

	)

227 
	#GMOCK_INTERNAL_DETECT_FINAL_I_fš®
 ,

	)

229 
	#GMOCK_INTERNAL_DETECT_NOEXCEPT
(
_i
, 
_
, 
_–em
) \

230 
	`GMOCK_PP_CAT
(
GMOCK_INTERNAL_DETECT_NOEXCEPT_I_
, 
_–em
)

	)

232 
	#GMOCK_INTERNAL_DETECT_NOEXCEPT_I_nÛxû±
 ,

	)

234 
	#GMOCK_INTERNAL_DETECT_REF
(
_i
, 
_
, 
_–em
) \

235 
	`GMOCK_PP_CAT
(
GMOCK_INTERNAL_DETECT_REF_I_
, 
_–em
)

	)

237 
	#GMOCK_INTERNAL_DETECT_REF_I_»f
 ,

	)

239 
	#GMOCK_INTERNAL_UNPACK_»f
(
x
è
	)
x

241 
	#GMOCK_INTERNAL_GET_CALLTYPE_IMPL
(
_i
, 
_
, 
_–em
) \

242 
	`GMOCK_PP_IF
(
	`GMOCK_INTERNAL_IS_CALLTYPE
(
_–em
), \

243 
GMOCK_INTERNAL_GET_VALUE_CALLTYPE
, 
GMOCK_PP_EMPTY
) \

244 (
_–em
)

	)

249 
	#GMOCK_INTERNAL_IS_CALLTYPE
(
_¬g
) \

250 
	`GMOCK_INTERNAL_IS_CALLTYPE_I
( \

251 
	`GMOCK_PP_CAT
(
GMOCK_INTERNAL_IS_CALLTYPE_HELPER_
, 
_¬g
))

	)

252 
	#GMOCK_INTERNAL_IS_CALLTYPE_I
(
_¬g
è
	`GMOCK_PP_IS_ENCLOSED_PARENS
(_¬g)

	)

254 
	#GMOCK_INTERNAL_GET_VALUE_CALLTYPE
(
_¬g
) \

255 
	`GMOCK_INTERNAL_GET_VALUE_CALLTYPE_I
( \

256 
	`GMOCK_PP_CAT
(
GMOCK_INTERNAL_IS_CALLTYPE_HELPER_
, 
_¬g
))

	)

257 
	#GMOCK_INTERNAL_GET_VALUE_CALLTYPE_I
(
_¬g
) \

258 
GMOCK_PP_IDENTITY
 
_¬g


	)

260 
	#GMOCK_INTERNAL_IS_CALLTYPE_HELPER_C®Éy³


	)

275 
	#GMOCK_INTERNAL_SIGNATURE
(
_R‘
, 
_Args
) \

276 ::
‹¡šg
::
š‹º®
::
id’t™y_t
<
	`GMOCK_PP_IF
(
	`GMOCK_PP_IS_BEGIN_PARENS
(
_R‘
), \

277 
GMOCK_PP_REMOVE_PARENS
, \

278 
GMOCK_PP_IDENTITY
)(
_R‘
)>( \

279 
	`GMOCK_PP_FOR_EACH
(
GMOCK_INTERNAL_GET_TYPE
, 
_
, 
_Args
))

	)

281 
	#GMOCK_INTERNAL_GET_TYPE
(
_i
, 
_
, 
_–em
) \

282 
	`GMOCK_PP_COMMA_IF
(
_i
) \

283 
	`GMOCK_PP_IF
(
	`GMOCK_PP_IS_BEGIN_PARENS
(
_–em
), 
GMOCK_PP_REMOVE_PARENS
, \

284 
GMOCK_PP_IDENTITY
) \

285 (
_–em
)

	)

287 
	#GMOCK_INTERNAL_PARAMETER
(
_i
, 
_SigÇtu»
, 
_
) \

288 
	`GMOCK_PP_COMMA_IF
(
_i
) \

289 
	`GMOCK_INTERNAL_ARG_O
(
_i
, 
	`GMOCK_PP_REMOVE_PARENS
(
_SigÇtu»
)) \

290 
gmock_a
##
_i


	)

292 
	#GMOCK_INTERNAL_FORWARD_ARG
(
_i
, 
_SigÇtu»
, 
_
) \

293 
	`GMOCK_PP_COMMA_IF
(
_i
) \

294 ::
¡d
::
fÜw¬d
<
	`GMOCK_INTERNAL_ARG_O
( \

295 
_i
, 
	`GMOCK_PP_REMOVE_PARENS
(
_SigÇtu»
))>(
gmock_a
##_i)

	)

297 
	#GMOCK_INTERNAL_MATCHER_PARAMETER
(
_i
, 
_SigÇtu»
, 
_
) \

298 
	`GMOCK_PP_COMMA_IF
(
_i
) \

299 
	`GMOCK_INTERNAL_MATCHER_O
(
_i
, 
	`GMOCK_PP_REMOVE_PARENS
(
_SigÇtu»
)) \

300 
gmock_a
##
_i


	)

302 
	#GMOCK_INTERNAL_MATCHER_ARGUMENT
(
_i
, 
_1
, 
_2
) \

303 
	`GMOCK_PP_COMMA_IF
(
_i
) \

304 
gmock_a
##
_i


	)

306 
	#GMOCK_INTERNAL_A_MATCHER_ARGUMENT
(
_i
, 
_SigÇtu»
, 
_
) \

307 
	`GMOCK_PP_COMMA_IF
(
_i
) \

308 ::
‹¡šg
::
A
<
	`GMOCK_INTERNAL_ARG_O
(
_i
, 
	`GMOCK_PP_REMOVE_PARENS
(
_SigÇtu»
))>()

	)

310 
	#GMOCK_INTERNAL_ARG_O
(
_i
, ...) \

311 
ty³Çme
 ::
‹¡šg
::
š‹º®
::
FunùiÚ
<
__VA_ARGS__
>::
‹m¶©e
 
Arg
<
_i
>::
ty³


	)

313 
	#GMOCK_INTERNAL_MATCHER_O
(
_i
, ...) \

314 cÚ¡ ::
‹¡šg
::
M©ch”
<
ty³Çme
 ::‹¡šg::
š‹º®
::
FunùiÚ
< \

315 
__VA_ARGS__
>::
‹m¶©e
 
Arg
<
_i
>::
ty³
>&

	)

317 
	#MOCK_METHOD0
(
m
, ...è
	`GMOCK_INTERNAL_MOCK_METHODN
(, , m, 0, 
__VA_ARGS__
)

	)

318 
	#MOCK_METHOD1
(
m
, ...è
	`GMOCK_INTERNAL_MOCK_METHODN
(, , m, 1, 
__VA_ARGS__
)

	)

319 
	#MOCK_METHOD2
(
m
, ...è
	`GMOCK_INTERNAL_MOCK_METHODN
(, , m, 2, 
__VA_ARGS__
)

	)

320 
	#MOCK_METHOD3
(
m
, ...è
	`GMOCK_INTERNAL_MOCK_METHODN
(, , m, 3, 
__VA_ARGS__
)

	)

321 
	#MOCK_METHOD4
(
m
, ...è
	`GMOCK_INTERNAL_MOCK_METHODN
(, , m, 4, 
__VA_ARGS__
)

	)

322 
	#MOCK_METHOD5
(
m
, ...è
	`GMOCK_INTERNAL_MOCK_METHODN
(, , m, 5, 
__VA_ARGS__
)

	)

323 
	#MOCK_METHOD6
(
m
, ...è
	`GMOCK_INTERNAL_MOCK_METHODN
(, , m, 6, 
__VA_ARGS__
)

	)

324 
	#MOCK_METHOD7
(
m
, ...è
	`GMOCK_INTERNAL_MOCK_METHODN
(, , m, 7, 
__VA_ARGS__
)

	)

325 
	#MOCK_METHOD8
(
m
, ...è
	`GMOCK_INTERNAL_MOCK_METHODN
(, , m, 8, 
__VA_ARGS__
)

	)

326 
	#MOCK_METHOD9
(
m
, ...è
	`GMOCK_INTERNAL_MOCK_METHODN
(, , m, 9, 
__VA_ARGS__
)

	)

327 
	#MOCK_METHOD10
(
m
, ...) \

328 
	`GMOCK_INTERNAL_MOCK_METHODN
(, , 
m
, 10, 
__VA_ARGS__
)

	)

330 
	#MOCK_CONST_METHOD0
(
m
, ...) \

331 
	`GMOCK_INTERNAL_MOCK_METHODN
(cÚ¡, , 
m
, 0, 
__VA_ARGS__
)

	)

332 
	#MOCK_CONST_METHOD1
(
m
, ...) \

333 
	`GMOCK_INTERNAL_MOCK_METHODN
(cÚ¡, , 
m
, 1, 
__VA_ARGS__
)

	)

334 
	#MOCK_CONST_METHOD2
(
m
, ...) \

335 
	`GMOCK_INTERNAL_MOCK_METHODN
(cÚ¡, , 
m
, 2, 
__VA_ARGS__
)

	)

336 
	#MOCK_CONST_METHOD3
(
m
, ...) \

337 
	`GMOCK_INTERNAL_MOCK_METHODN
(cÚ¡, , 
m
, 3, 
__VA_ARGS__
)

	)

338 
	#MOCK_CONST_METHOD4
(
m
, ...) \

339 
	`GMOCK_INTERNAL_MOCK_METHODN
(cÚ¡, , 
m
, 4, 
__VA_ARGS__
)

	)

340 
	#MOCK_CONST_METHOD5
(
m
, ...) \

341 
	`GMOCK_INTERNAL_MOCK_METHODN
(cÚ¡, , 
m
, 5, 
__VA_ARGS__
)

	)

342 
	#MOCK_CONST_METHOD6
(
m
, ...) \

343 
	`GMOCK_INTERNAL_MOCK_METHODN
(cÚ¡, , 
m
, 6, 
__VA_ARGS__
)

	)

344 
	#MOCK_CONST_METHOD7
(
m
, ...) \

345 
	`GMOCK_INTERNAL_MOCK_METHODN
(cÚ¡, , 
m
, 7, 
__VA_ARGS__
)

	)

346 
	#MOCK_CONST_METHOD8
(
m
, ...) \

347 
	`GMOCK_INTERNAL_MOCK_METHODN
(cÚ¡, , 
m
, 8, 
__VA_ARGS__
)

	)

348 
	#MOCK_CONST_METHOD9
(
m
, ...) \

349 
	`GMOCK_INTERNAL_MOCK_METHODN
(cÚ¡, , 
m
, 9, 
__VA_ARGS__
)

	)

350 
	#MOCK_CONST_METHOD10
(
m
, ...) \

351 
	`GMOCK_INTERNAL_MOCK_METHODN
(cÚ¡, , 
m
, 10, 
__VA_ARGS__
)

	)

353 
	#MOCK_METHOD0_T
(
m
, ...è
	`MOCK_METHOD0
(m, 
__VA_ARGS__
)

	)

354 
	#MOCK_METHOD1_T
(
m
, ...è
	`MOCK_METHOD1
(m, 
__VA_ARGS__
)

	)

355 
	#MOCK_METHOD2_T
(
m
, ...è
	`MOCK_METHOD2
(m, 
__VA_ARGS__
)

	)

356 
	#MOCK_METHOD3_T
(
m
, ...è
	`MOCK_METHOD3
(m, 
__VA_ARGS__
)

	)

357 
	#MOCK_METHOD4_T
(
m
, ...è
	`MOCK_METHOD4
(m, 
__VA_ARGS__
)

	)

358 
	#MOCK_METHOD5_T
(
m
, ...è
	`MOCK_METHOD5
(m, 
__VA_ARGS__
)

	)

359 
	#MOCK_METHOD6_T
(
m
, ...è
	`MOCK_METHOD6
(m, 
__VA_ARGS__
)

	)

360 
	#MOCK_METHOD7_T
(
m
, ...è
	`MOCK_METHOD7
(m, 
__VA_ARGS__
)

	)

361 
	#MOCK_METHOD8_T
(
m
, ...è
	`MOCK_METHOD8
(m, 
__VA_ARGS__
)

	)

362 
	#MOCK_METHOD9_T
(
m
, ...è
	`MOCK_METHOD9
(m, 
__VA_ARGS__
)

	)

363 
	#MOCK_METHOD10_T
(
m
, ...è
	`MOCK_METHOD10
(m, 
__VA_ARGS__
)

	)

365 
	#MOCK_CONST_METHOD0_T
(
m
, ...è
	`MOCK_CONST_METHOD0
(m, 
__VA_ARGS__
)

	)

366 
	#MOCK_CONST_METHOD1_T
(
m
, ...è
	`MOCK_CONST_METHOD1
(m, 
__VA_ARGS__
)

	)

367 
	#MOCK_CONST_METHOD2_T
(
m
, ...è
	`MOCK_CONST_METHOD2
(m, 
__VA_ARGS__
)

	)

368 
	#MOCK_CONST_METHOD3_T
(
m
, ...è
	`MOCK_CONST_METHOD3
(m, 
__VA_ARGS__
)

	)

369 
	#MOCK_CONST_METHOD4_T
(
m
, ...è
	`MOCK_CONST_METHOD4
(m, 
__VA_ARGS__
)

	)

370 
	#MOCK_CONST_METHOD5_T
(
m
, ...è
	`MOCK_CONST_METHOD5
(m, 
__VA_ARGS__
)

	)

371 
	#MOCK_CONST_METHOD6_T
(
m
, ...è
	`MOCK_CONST_METHOD6
(m, 
__VA_ARGS__
)

	)

372 
	#MOCK_CONST_METHOD7_T
(
m
, ...è
	`MOCK_CONST_METHOD7
(m, 
__VA_ARGS__
)

	)

373 
	#MOCK_CONST_METHOD8_T
(
m
, ...è
	`MOCK_CONST_METHOD8
(m, 
__VA_ARGS__
)

	)

374 
	#MOCK_CONST_METHOD9_T
(
m
, ...è
	`MOCK_CONST_METHOD9
(m, 
__VA_ARGS__
)

	)

375 
	#MOCK_CONST_METHOD10_T
(
m
, ...è
	`MOCK_CONST_METHOD10
(m, 
__VA_ARGS__
)

	)

377 
	#MOCK_METHOD0_WITH_CALLTYPE
(
ù
, 
m
, ...) \

378 
	`GMOCK_INTERNAL_MOCK_METHODN
(, 
ù
, 
m
, 0, 
__VA_ARGS__
)

	)

379 
	#MOCK_METHOD1_WITH_CALLTYPE
(
ù
, 
m
, ...) \

380 
	`GMOCK_INTERNAL_MOCK_METHODN
(, 
ù
, 
m
, 1, 
__VA_ARGS__
)

	)

381 
	#MOCK_METHOD2_WITH_CALLTYPE
(
ù
, 
m
, ...) \

382 
	`GMOCK_INTERNAL_MOCK_METHODN
(, 
ù
, 
m
, 2, 
__VA_ARGS__
)

	)

383 
	#MOCK_METHOD3_WITH_CALLTYPE
(
ù
, 
m
, ...) \

384 
	`GMOCK_INTERNAL_MOCK_METHODN
(, 
ù
, 
m
, 3, 
__VA_ARGS__
)

	)

385 
	#MOCK_METHOD4_WITH_CALLTYPE
(
ù
, 
m
, ...) \

386 
	`GMOCK_INTERNAL_MOCK_METHODN
(, 
ù
, 
m
, 4, 
__VA_ARGS__
)

	)

387 
	#MOCK_METHOD5_WITH_CALLTYPE
(
ù
, 
m
, ...) \

388 
	`GMOCK_INTERNAL_MOCK_METHODN
(, 
ù
, 
m
, 5, 
__VA_ARGS__
)

	)

389 
	#MOCK_METHOD6_WITH_CALLTYPE
(
ù
, 
m
, ...) \

390 
	`GMOCK_INTERNAL_MOCK_METHODN
(, 
ù
, 
m
, 6, 
__VA_ARGS__
)

	)

391 
	#MOCK_METHOD7_WITH_CALLTYPE
(
ù
, 
m
, ...) \

392 
	`GMOCK_INTERNAL_MOCK_METHODN
(, 
ù
, 
m
, 7, 
__VA_ARGS__
)

	)

393 
	#MOCK_METHOD8_WITH_CALLTYPE
(
ù
, 
m
, ...) \

394 
	`GMOCK_INTERNAL_MOCK_METHODN
(, 
ù
, 
m
, 8, 
__VA_ARGS__
)

	)

395 
	#MOCK_METHOD9_WITH_CALLTYPE
(
ù
, 
m
, ...) \

396 
	`GMOCK_INTERNAL_MOCK_METHODN
(, 
ù
, 
m
, 9, 
__VA_ARGS__
)

	)

397 
	#MOCK_METHOD10_WITH_CALLTYPE
(
ù
, 
m
, ...) \

398 
	`GMOCK_INTERNAL_MOCK_METHODN
(, 
ù
, 
m
, 10, 
__VA_ARGS__
)

	)

400 
	#MOCK_CONST_METHOD0_WITH_CALLTYPE
(
ù
, 
m
, ...) \

401 
	`GMOCK_INTERNAL_MOCK_METHODN
(cÚ¡, 
ù
, 
m
, 0, 
__VA_ARGS__
)

	)

402 
	#MOCK_CONST_METHOD1_WITH_CALLTYPE
(
ù
, 
m
, ...) \

403 
	`GMOCK_INTERNAL_MOCK_METHODN
(cÚ¡, 
ù
, 
m
, 1, 
__VA_ARGS__
)

	)

404 
	#MOCK_CONST_METHOD2_WITH_CALLTYPE
(
ù
, 
m
, ...) \

405 
	`GMOCK_INTERNAL_MOCK_METHODN
(cÚ¡, 
ù
, 
m
, 2, 
__VA_ARGS__
)

	)

406 
	#MOCK_CONST_METHOD3_WITH_CALLTYPE
(
ù
, 
m
, ...) \

407 
	`GMOCK_INTERNAL_MOCK_METHODN
(cÚ¡, 
ù
, 
m
, 3, 
__VA_ARGS__
)

	)

408 
	#MOCK_CONST_METHOD4_WITH_CALLTYPE
(
ù
, 
m
, ...) \

409 
	`GMOCK_INTERNAL_MOCK_METHODN
(cÚ¡, 
ù
, 
m
, 4, 
__VA_ARGS__
)

	)

410 
	#MOCK_CONST_METHOD5_WITH_CALLTYPE
(
ù
, 
m
, ...) \

411 
	`GMOCK_INTERNAL_MOCK_METHODN
(cÚ¡, 
ù
, 
m
, 5, 
__VA_ARGS__
)

	)

412 
	#MOCK_CONST_METHOD6_WITH_CALLTYPE
(
ù
, 
m
, ...) \

413 
	`GMOCK_INTERNAL_MOCK_METHODN
(cÚ¡, 
ù
, 
m
, 6, 
__VA_ARGS__
)

	)

414 
	#MOCK_CONST_METHOD7_WITH_CALLTYPE
(
ù
, 
m
, ...) \

415 
	`GMOCK_INTERNAL_MOCK_METHODN
(cÚ¡, 
ù
, 
m
, 7, 
__VA_ARGS__
)

	)

416 
	#MOCK_CONST_METHOD8_WITH_CALLTYPE
(
ù
, 
m
, ...) \

417 
	`GMOCK_INTERNAL_MOCK_METHODN
(cÚ¡, 
ù
, 
m
, 8, 
__VA_ARGS__
)

	)

418 
	#MOCK_CONST_METHOD9_WITH_CALLTYPE
(
ù
, 
m
, ...) \

419 
	`GMOCK_INTERNAL_MOCK_METHODN
(cÚ¡, 
ù
, 
m
, 9, 
__VA_ARGS__
)

	)

420 
	#MOCK_CONST_METHOD10_WITH_CALLTYPE
(
ù
, 
m
, ...) \

421 
	`GMOCK_INTERNAL_MOCK_METHODN
(cÚ¡, 
ù
, 
m
, 10, 
__VA_ARGS__
)

	)

423 
	#MOCK_METHOD0_T_WITH_CALLTYPE
(
ù
, 
m
, ...) \

424 
	`MOCK_METHOD0_WITH_CALLTYPE
(
ù
, 
m
, 
__VA_ARGS__
)

	)

425 
	#MOCK_METHOD1_T_WITH_CALLTYPE
(
ù
, 
m
, ...) \

426 
	`MOCK_METHOD1_WITH_CALLTYPE
(
ù
, 
m
, 
__VA_ARGS__
)

	)

427 
	#MOCK_METHOD2_T_WITH_CALLTYPE
(
ù
, 
m
, ...) \

428 
	`MOCK_METHOD2_WITH_CALLTYPE
(
ù
, 
m
, 
__VA_ARGS__
)

	)

429 
	#MOCK_METHOD3_T_WITH_CALLTYPE
(
ù
, 
m
, ...) \

430 
	`MOCK_METHOD3_WITH_CALLTYPE
(
ù
, 
m
, 
__VA_ARGS__
)

	)

431 
	#MOCK_METHOD4_T_WITH_CALLTYPE
(
ù
, 
m
, ...) \

432 
	`MOCK_METHOD4_WITH_CALLTYPE
(
ù
, 
m
, 
__VA_ARGS__
)

	)

433 
	#MOCK_METHOD5_T_WITH_CALLTYPE
(
ù
, 
m
, ...) \

434 
	`MOCK_METHOD5_WITH_CALLTYPE
(
ù
, 
m
, 
__VA_ARGS__
)

	)

435 
	#MOCK_METHOD6_T_WITH_CALLTYPE
(
ù
, 
m
, ...) \

436 
	`MOCK_METHOD6_WITH_CALLTYPE
(
ù
, 
m
, 
__VA_ARGS__
)

	)

437 
	#MOCK_METHOD7_T_WITH_CALLTYPE
(
ù
, 
m
, ...) \

438 
	`MOCK_METHOD7_WITH_CALLTYPE
(
ù
, 
m
, 
__VA_ARGS__
)

	)

439 
	#MOCK_METHOD8_T_WITH_CALLTYPE
(
ù
, 
m
, ...) \

440 
	`MOCK_METHOD8_WITH_CALLTYPE
(
ù
, 
m
, 
__VA_ARGS__
)

	)

441 
	#MOCK_METHOD9_T_WITH_CALLTYPE
(
ù
, 
m
, ...) \

442 
	`MOCK_METHOD9_WITH_CALLTYPE
(
ù
, 
m
, 
__VA_ARGS__
)

	)

443 
	#MOCK_METHOD10_T_WITH_CALLTYPE
(
ù
, 
m
, ...) \

444 
	`MOCK_METHOD10_WITH_CALLTYPE
(
ù
, 
m
, 
__VA_ARGS__
)

	)

446 
	#MOCK_CONST_METHOD0_T_WITH_CALLTYPE
(
ù
, 
m
, ...) \

447 
	`MOCK_CONST_METHOD0_WITH_CALLTYPE
(
ù
, 
m
, 
__VA_ARGS__
)

	)

448 
	#MOCK_CONST_METHOD1_T_WITH_CALLTYPE
(
ù
, 
m
, ...) \

449 
	`MOCK_CONST_METHOD1_WITH_CALLTYPE
(
ù
, 
m
, 
__VA_ARGS__
)

	)

450 
	#MOCK_CONST_METHOD2_T_WITH_CALLTYPE
(
ù
, 
m
, ...) \

451 
	`MOCK_CONST_METHOD2_WITH_CALLTYPE
(
ù
, 
m
, 
__VA_ARGS__
)

	)

452 
	#MOCK_CONST_METHOD3_T_WITH_CALLTYPE
(
ù
, 
m
, ...) \

453 
	`MOCK_CONST_METHOD3_WITH_CALLTYPE
(
ù
, 
m
, 
__VA_ARGS__
)

	)

454 
	#MOCK_CONST_METHOD4_T_WITH_CALLTYPE
(
ù
, 
m
, ...) \

455 
	`MOCK_CONST_METHOD4_WITH_CALLTYPE
(
ù
, 
m
, 
__VA_ARGS__
)

	)

456 
	#MOCK_CONST_METHOD5_T_WITH_CALLTYPE
(
ù
, 
m
, ...) \

457 
	`MOCK_CONST_METHOD5_WITH_CALLTYPE
(
ù
, 
m
, 
__VA_ARGS__
)

	)

458 
	#MOCK_CONST_METHOD6_T_WITH_CALLTYPE
(
ù
, 
m
, ...) \

459 
	`MOCK_CONST_METHOD6_WITH_CALLTYPE
(
ù
, 
m
, 
__VA_ARGS__
)

	)

460 
	#MOCK_CONST_METHOD7_T_WITH_CALLTYPE
(
ù
, 
m
, ...) \

461 
	`MOCK_CONST_METHOD7_WITH_CALLTYPE
(
ù
, 
m
, 
__VA_ARGS__
)

	)

462 
	#MOCK_CONST_METHOD8_T_WITH_CALLTYPE
(
ù
, 
m
, ...) \

463 
	`MOCK_CONST_METHOD8_WITH_CALLTYPE
(
ù
, 
m
, 
__VA_ARGS__
)

	)

464 
	#MOCK_CONST_METHOD9_T_WITH_CALLTYPE
(
ù
, 
m
, ...) \

465 
	`MOCK_CONST_METHOD9_WITH_CALLTYPE
(
ù
, 
m
, 
__VA_ARGS__
)

	)

466 
	#MOCK_CONST_METHOD10_T_WITH_CALLTYPE
(
ù
, 
m
, ...) \

467 
	`MOCK_CONST_METHOD10_WITH_CALLTYPE
(
ù
, 
m
, 
__VA_ARGS__
)

	)

469 
	#GMOCK_INTERNAL_MOCK_METHODN
(
cÚ¡Ãss
, 
ù
, 
M‘hod
, 
¬gs_num
, ...) \

470 
	`GMOCK_INTERNAL_ASSERT_VALID_SIGNATURE
( \

471 
¬gs_num
, ::
‹¡šg
::
š‹º®
::
id’t™y_t
<
__VA_ARGS__
>); \

472 
	`GMOCK_INTERNAL_MOCK_METHOD_IMPL
( \

473 
¬gs_num
, 
M‘hod
, 
	`GMOCK_PP_NARG0
(
cÚ¡Ãss
), 0, 0, , 
ù
, , \

474 (::
‹¡šg
::
š‹º®
::
id’t™y_t
<
__VA_ARGS__
>))

	)

476 
	#GMOCK_MOCKER_
(
¬™y
, 
cÚ¡Ãss
, 
M‘hod
) \

477 
	`GTEST_CONCAT_TOKEN_
(
gmock
##
cÚ¡Ãss
##
¬™y
##
_
##
M‘hod
##_, 
__LINE__
)

	)

	@third_party/googletest/googlemock/include/gmock/gmock-matchers.h

255 #iâdeà
GOOGLEMOCK_INCLUDE_GMOCK_GMOCK_MATCHERS_H_


256 
	#GOOGLEMOCK_INCLUDE_GMOCK_GMOCK_MATCHERS_H_


	)

258 
	~<®gÜ™hm
>

259 
	~<cm©h
>

260 
	~<š™Ÿliz”_li¡
>

261 
	~<™”©Ü
>

262 
	~<lim™s
>

263 
	~<memÜy
>

264 
	~<o¡»am
>

265 
	~<s¡»am
>

266 
	~<¡ršg
>

267 
	~<ty³_Œa™s
>

268 
	~<ut™y
>

269 
	~<veùÜ
>

271 
	~"gmock/š‹º®/gmock-š‹º®-uts.h
"

272 
	~"gmock/š‹º®/gmock-pÜt.h
"

273 
	~"gmock/š‹º®/gmock-µ.h
"

274 
	~"g‹¡/g‹¡.h
"

277 #ià
defšed
(
_MSC_VER
) && _MSC_VER >= 1915

278 
	#GMOCK_MAYBE_5046_
 5046

	)

280 
	#GMOCK_MAYBE_5046_


	)

283 
	$GTEST_DISABLE_MSC_WARNINGS_PUSH_
(

284 4251 
GMOCK_MAYBE_5046_


288 
Çme¥aû
 
‹¡šg
 {

303 şas 
	cSŒšgM©chResuÉLi¡’”
 : 
public
 
M©chResuÉLi¡’”
 {

304 
public
:

305 
	`SŒšgM©chResuÉLi¡’”
(è: 
	`M©chResuÉLi¡’”
(&
ss_
) {}

308 
¡d
::
¡ršg
 
	`¡r
(ècÚ¡ {  
ss_
.str(); }

311 
	`CË¬
(è{ 
ss_
.
	`¡r
(""); }

313 
´iv©e
:

314 ::
¡d
::
¡ršg¡»am
 
ss_
;

316 
	`GTEST_DISALLOW_COPY_AND_ASSIGN_
(
SŒšgM©chResuÉLi¡’”
);

317 
	}
};

321 
Çme¥aû
 
	gš‹º®
 {

333 
	g‹m¶©e
 <
ty³Çme
 
	gT
,y³Çm
	gM
>

334 şas 
	cM©ch”Ca¡Im¶
 {

335 
	gpublic
:

336 
M©ch”
<
T
> 
Ca¡
(cÚ¡ 
M
& 
pŞymÜphic_m©ch”_Ü_v®ue
) {

350  
Ca¡Im¶
(
pŞymÜphic_m©ch”_Ü_v®ue
,

351 
¡d
::
is_cÚv”tibË
<
M
, 
M©ch”
<
T
>>{},

352 
¡d
::
is_cÚv”tibË
<
M
, 
T
>{});

355 
	g´iv©e
:

356 
‹m¶©e
 <
boŞ
 
IgnÜe
>

357 
M©ch”
<
T
> 
Ca¡Im¶
(cÚ¡ 
M
& 
pŞymÜphic_m©ch”_Ü_v®ue
,

358 
¡d
::
Œue_ty³
 ,

359 
¡d
::
š‹g¿l_cÚ¡ªt
<
boŞ
, 
IgnÜe
>) {

368  
	gpŞymÜphic_m©ch”_Ü_v®ue
;

374 
	gM©ch”
<
	gT
> 
Ca¡Im¶
(cÚ¡ 
M
& 
v®ue
,

375 
¡d
::
çl£_ty³
 ,

376 
¡d
::
Œue_ty³
 ) {

377  
M©ch”
<
T
>(
Im¶ic™Ca¡_
<T>(
v®ue
));

390 
	gM©ch”
<
	gT
> 
Ca¡Im¶
(cÚ¡ 
M
& 
v®ue
,

391 
¡d
::
çl£_ty³
 ,

392 
¡d
::
çl£_ty³
 );

398 
	g‹m¶©e
 <
ty³Çme
 
	gT
,y³Çm
	gU
>

399 
şass
 
	gM©ch”Ca¡Im¶
<
	gT
, 
	gM©ch”
<
	gU
> > {

400 
	gpublic
:

401 
M©ch”
<
T
> 
Ca¡
(cÚ¡ M©ch”<
U
>& 
sourû_m©ch”
) {

402  
M©ch”
<
T
>(
Ãw
 
Im¶
(
sourû_m©ch”
));

405 
	g´iv©e
:

406 
şass
 
Im¶
 : 
public
 
M©ch”IÁ”çû
<
T
> {

407 
public
:

408 
ex¶ic™
 
Im¶
(cÚ¡ 
M©ch”
<
U
>& 
sourû_m©ch”
)

409 : 
sourû_m©ch”_
(
sourû_m©ch”
) {}

412 
boŞ
 
M©chAndEx¶aš
(
T
 
x
, 
M©chResuÉLi¡’”
* 
li¡’”
ècÚ¡ 
	gov”ride
 {

413 
usšg
 
	gFromTy³
 = 
ty³Çme
 
¡d
::
»move_cv
<ty³Çm¡d::
»move_poš‹r
<

414 
ty³Çme
 
¡d
::
»move_»ã»nû
<
T
>::
ty³
>::type>::type;

415 
usšg
 
	gToTy³
 = 
ty³Çme
 
¡d
::
»move_cv
<ty³Çm¡d::
»move_poš‹r
<

416 
ty³Çme
 
¡d
::
»move_»ã»nû
<
U
>::
ty³
>::type>::type;

418 
¡©ic_as£¹
(

421 (
¡d
::
is_poš‹r
<
ty³Çme
 std::
»move_»ã»nû
<
T
>::
ty³
>::
v®ue
 !=

422 
¡d
::
is_poš‹r
<
ty³Çme
 std::
»move_»ã»nû
<
U
>::
ty³
>::
v®ue
) ||

423 
¡d
::
is_§me
<
FromTy³
, 
ToTy³
>::
v®ue
 ||

424 !
¡d
::
is_ba£_of
<
FromTy³
, 
ToTy³
>::
v®ue
,

429 
usšg
 
	gCa¡Ty³
 =

430 
ty³Çme
 
¡d
::
cÚd™iÚ®
<¡d::
is_cÚv”tibË
<
T
&, cÚ¡ 
	gU
&>::
v®ue
,

431 
	gT
&, 
	gU
>::
ty³
;

433  
	gsourû_m©ch”_
.
M©chAndEx¶aš
(
¡©ic_ÿ¡
<
Ca¡Ty³
>(
x
),

434 
li¡’”
);

437 
DesüibeTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

438 
sourû_m©ch”_
.
DesüibeTo
(
os
);

441 
DesüibeNeg©iÚTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

442 
sourû_m©ch”_
.
DesüibeNeg©iÚTo
(
os
);

445 
	g´iv©e
:

446 cÚ¡ 
M©ch”
<
U
> 
sourû_m©ch”_
;

452 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

453 
şass
 
	gM©ch”Ca¡Im¶
<
	gT
, 
	gM©ch”
<T> > {

454 
	gpublic
:

455 
M©ch”
<
T
> 
Ca¡
(cÚ¡ M©ch”<T>& 
m©ch”
) {  matcher; }

459 
	g‹m¶©e
 <
ty³Çme
 
	gD”ived
>

460 şas 
	cM©ch”Ba£Im¶
 {

461 
	gpublic
:

462 
M©ch”Ba£Im¶
() = ;

464 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

465 
	gİ”©Ü
 ::
‹¡šg
::
M©ch”
<
T
>() const {

466  ::
‹¡šg
::
M©ch”
<
T
>(
Ãw


467 
ty³Çme
 
D”ived
::
‹m¶©e
 
gmock_Im¶
<
T
>());

472 
	g‹m¶©e
 <‹m¶©<
	gty³Çme
...> 
şass
 
	gD”ived
,y³Çme... 
	gTs
>

473 
şass
 
	gM©ch”Ba£Im¶
<
	gD”ived
<
	gTs
...>> {

474 
	gpublic
:

477 
‹m¶©e
 <
ty³Çme
 
E
 = 
¡d
::
’abË_if
<...(
Ts
) == 1>,

478 
ty³Çme
 
	gE
::
ty³
* = 
nuÎ±r
>

479 
ex¶ic™
 
M©ch”Ba£Im¶
(
Ts
... 
·¿ms
)

480 : 
·¿ms_
(
¡d
::
fÜw¬d
<
Ts
>(
·¿ms
)...) {}

481 
‹m¶©e
 <
ty³Çme
 
E
 = 
¡d
::
’abË_if
<...(
Ts
) != 1>,

482 
	gty³Çme
 = 
ty³Çme
 
E
::
ty³
>

483 
M©ch”Ba£Im¶
(
Ts
... 
·¿ms
)

484 : 
·¿ms_
(
¡d
::
fÜw¬d
<
Ts
>(
·¿ms
)...) {}

486 
‹m¶©e
 <
ty³Çme
 
F
>

487 
İ”©Ü
 ::
‹¡šg
::
M©ch”
<
F
>() const {

488  
Aµly
<
F
>(
MakeIndexSequ’û
<...(
Ts
)>{});

491 
	g´iv©e
:

492 
‹m¶©e
 <
ty³Çme
 
F
, 
	g¡d
::
size_t
... 
tu¶e_ids
>

493 ::
‹¡šg
::
M©ch”
<
F
> 
Aµly
(
IndexSequ’û
<
tu¶e_ids
...>) const {

494  ::
‹¡šg
::
M©ch”
<
F
>(

495 
Ãw
 
ty³Çme
 
D”ived
<
Ts
...>::
‹m¶©e
 
gmock_Im¶
<
F
>(

496 
¡d
::
g‘
<
tu¶e_ids
>(
·¿ms_
)...));

499 cÚ¡ 
	g¡d
::
tu¶e
<
Ts
...> 
·¿ms_
;

508 
	g‹m¶©e
 <
ty³Çme
 
	gT
,y³Çm
	gM
>

509 
šlše
 
	gM©ch”
<
	gT
> 
	$M©ch”Ca¡
(cÚ¡ 
M
& 
m©ch”
) {

510  
š‹º®
::
M©ch”Ca¡Im¶
<
T
, 
M
>::
	`Ca¡
(
m©ch”
);

511 
	}
}

515 
	g‹m¶©e
 <
ty³Çme
 
	gT
,y³Çm
	gM
>

516 
šlše
 
	gM©ch”
<
	gT
> 
	$SaãM©ch”Ca¡
(cÚ¡ 
M
& 
pŞymÜphic_m©ch”_Ü_v®ue
) {

517  
M©ch”Ca¡
<
T
>(
pŞymÜphic_m©ch”_Ü_v®ue
);

518 
	}
}

529 
	g‹m¶©e
 <
ty³Çme
 
	gT
,y³Çm
	gU
>

530 
šlše
 
	gM©ch”
<
	gT
> 
SaãM©ch”Ca¡
(cÚ¡ 
M©ch”
<
U
>& 
m©ch”
) {

532 
¡©ic_as£¹
(
¡d
::
is_cÚv”tibË
<cÚ¡ 
T
&, cÚ¡ 
U
&>::
v®ue
,

536 
GTEST_COMPILE_ASSERT_
(

537 
¡d
::
is_»ã»nû
<
T
>::
v®ue
 || !¡d::is_»ã»nû<
U
>::value,

538 
ÿÂÙ_cÚv”t_nÚ_»ã»nû_¬g_to_»ã»nû
);

541 
GTEST_REMOVE_REFERENCE_AND_CONST_
(
	tT
è
	tRawT
;

542 
GTEST_REMOVE_REFERENCE_AND_CONST_
(
	tU
è
	tRawU
;

543 
cÚ¡ex´
 
boŞ
 
	gkTIsOth”
 = 
GMOCK_KIND_OF_
(
RawT
è=ğ
š‹º®
::
kOth”
;

544 
cÚ¡ex´
 
boŞ
 
	gkUIsOth”
 = 
GMOCK_KIND_OF_
(
RawU
è=ğ
š‹º®
::
kOth”
;

545 
GTEST_COMPILE_ASSERT_
(

546 
kTIsOth”
 || 
kUIsOth”
 ||

547 (
š‹º®
::
Los¦essAr™hm‘icCÚv”tibË
<
RawT
, 
RawU
>::
v®ue
),

548 
cÚv”siÚ_of_¬™hm‘ic_ty³s_mu¡_be_los¦ess
);

549  
	gM©ch”Ca¡
<
	gT
>(
	gm©ch”
);

553 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

554 
	gM©ch”
<
	gT
> 
A
();

558 
Çme¥aû
 
	gš‹º®
 {

561 
šlše
 
PrštIfNÙEm±y
(cÚ¡ 
¡d
::
¡ršg
& 
ex¶ª©iÚ
,

562 ::
¡d
::
o¡»am
* 
os
) {

563 ià(
ex¶ª©iÚ
 !ğ"" && 
os
 !ğ
nuÎ±r
) {

564 *
os
 << ", " << 
ex¶ª©iÚ
;

571 
šlše
 
boŞ
 
IsR—dabËTy³Name
(cÚ¡ 
¡d
::
¡ršg
& 
ty³_Çme
) {

574  (
ty³_Çme
.
Ëngth
() <= 20 ||

575 
ty³_Çme
.
fšd_fœ¡_of
("<("è=ğ
¡d
::
¡ršg
::
Åos
);

583 
	g‹m¶©e
 <
ty³Çme
 
	gV®ue
,y³Çm
	gT
>

584 
boŞ
 
M©chPrštAndEx¶aš
(
V®ue
& 
v®ue
, cÚ¡ 
M©ch”
<
T
>& 
m©ch”
,

585 
M©chResuÉLi¡’”
* 
li¡’”
) {

586 ià(!
	gli¡’”
->
IsIÁ”e¡ed
()) {

589  
	gm©ch”
.
M©ches
(
v®ue
);

592 
SŒšgM©chResuÉLi¡’”
 
	gšÃr_li¡’”
;

593 cÚ¡ 
boŞ
 
	gm©ch
 = 
m©ch”
.
M©chAndEx¶aš
(
v®ue
, &
šÃr_li¡’”
);

595 
Univ”§lPršt
(
v®ue
, 
li¡’”
->
¡»am
());

596 #ià
GTEST_HAS_RTTI


597 cÚ¡ 
	g¡d
::
¡ršg
& 
ty³_Çme
 = 
G‘Ty³Name
<
V®ue
>();

598 ià(
IsR—dabËTy³Name
(
ty³_Çme
))

599 *
	gli¡’”
->
¡»am
(è<< " (oàty³ " << 
	gty³_Çme
 << ")";

601 
PrštIfNÙEm±y
(
šÃr_li¡’”
.
¡r
(), 
li¡’”
->
¡»am
());

603  
	gm©ch
;

608 
	g‹m¶©e
 <
size_t
 
	gN
>

609 şas 
	cTu¶eP»fix
 {

610 
	gpublic
:

614 
‹m¶©e
 <
ty³Çme
 
M©ch”Tu¶e
,y³Çm
	gV®ueTu¶e
>

615 
boŞ
 
M©ches
(cÚ¡ 
M©ch”Tu¶e
& 
m©ch”_tu¶e
,

616 cÚ¡ 
V®ueTu¶e
& 
v®ue_tu¶e
) {

617  
	gTu¶eP»fix
<
	gN
 - 1>::
M©ches
(
m©ch”_tu¶e
, 
v®ue_tu¶e
) &&

618 
	g¡d
::
g‘
<
N
 - 1>(
m©ch”_tu¶e
).
M©ches
(
¡d
::g‘<N - 1>(
v®ue_tu¶e
));

625 
	g‹m¶©e
 <
ty³Çme
 
	gM©ch”Tu¶e
,y³Çm
	gV®ueTu¶e
>

626 
Ex¶ašM©chFau»sTo
(cÚ¡ 
M©ch”Tu¶e
& 
m©ch”s
,

627 cÚ¡ 
V®ueTu¶e
& 
v®ues
,

628 ::
¡d
::
o¡»am
* 
os
) {

630 
Tu¶eP»fix
<
N
 - 1>::
Ex¶ašM©chFau»sTo
(
m©ch”s
, 
v®ues
, 
os
);

634 
ty³Çme
 
	g¡d
::
tu¶e_–em’t
<
N
 - 1, 
	gM©ch”Tu¶e
>::
ty³
 
m©ch”
 =

635 
¡d
::
g‘
<
N
 - 1>(
m©ch”s
);

636 
ty³Çme
 
	t¡d
::
	ttu¶e_–em’t
<
	tN
 - 1, 
	tV®ueTu¶e
>::
	tty³
 
	tV®ue
;

637 cÚ¡ 
	gV®ue
& 
	gv®ue
 = 
¡d
::
g‘
<
N
 - 1>(
v®ues
);

638 
SŒšgM©chResuÉLi¡’”
 
	gli¡’”
;

639 ià(!
	gm©ch”
.
M©chAndEx¶aš
(
v®ue
, &
li¡’”
)) {

640 *
	gos
 << " Ex³ùed‡rg #" << 
	gN
 - 1 << ": ";

641 
	g¡d
::
g‘
<
N
 - 1>(
m©ch”s
).
DesüibeTo
(
os
);

642 *
	gos
 << "\n Actual: ";

648 
	gš‹º®
::
Univ”§lPršt
(
v®ue
, 
os
);

649 
PrštIfNÙEm±y
(
li¡’”
.
¡r
(), 
os
);

650 *
	gos
 << "\n";

656 
	g‹m¶©e
 <>

657 
şass
 
	gTu¶eP»fix
<0> {

658 
	gpublic
:

659 
‹m¶©e
 <
ty³Çme
 
M©ch”Tu¶e
,y³Çm
	gV®ueTu¶e
>

660 
boŞ
 
M©ches
(cÚ¡ 
M©ch”Tu¶e
& ,

661 cÚ¡ 
V®ueTu¶e
& ) {

662  
	gŒue
;

665 
	g‹m¶©e
 <
ty³Çme
 
	gM©ch”Tu¶e
,y³Çm
	gV®ueTu¶e
>

666 
Ex¶ašM©chFau»sTo
(cÚ¡ 
M©ch”Tu¶e
& ,

667 cÚ¡ 
V®ueTu¶e
& ,

668 ::
¡d
::
o¡»am
* ) {}

676 
	g‹m¶©e
 <
ty³Çme
 
	gM©ch”Tu¶e
,y³Çm
	gV®ueTu¶e
>

677 
boŞ
 
Tu¶eM©ches
(cÚ¡ 
M©ch”Tu¶e
& 
m©ch”_tu¶e
,

678 cÚ¡ 
V®ueTu¶e
& 
v®ue_tu¶e
) {

681 
GTEST_COMPILE_ASSERT_
(
¡d
::
tu¶e_size
<
M©ch”Tu¶e
>::
v®ue
 ==

682 
¡d
::
tu¶e_size
<
V®ueTu¶e
>::
v®ue
,

683 
m©ch”_ªd_v®ue_have_difã»Á_numb”s_of_f›lds
);

684  
	gTu¶eP»fix
<
	g¡d
::
tu¶e_size
<
V®ueTu¶e
>::
v®ue
>::
M©ches
(
m©ch”_tu¶e
,

685 
v®ue_tu¶e
);

690 
	g‹m¶©e
 <
ty³Çme
 
	gM©ch”Tu¶e
,y³Çm
	gV®ueTu¶e
>

691 
Ex¶ašM©chFau»Tu¶eTo
(cÚ¡ 
M©ch”Tu¶e
& 
m©ch”s
,

692 cÚ¡ 
V®ueTu¶e
& 
v®ues
,

693 ::
¡d
::
o¡»am
* 
os
) {

694 
Tu¶eP»fix
<
¡d
::
tu¶e_size
<
M©ch”Tu¶e
>::
v®ue
>::
Ex¶ašM©chFau»sTo
(

695 
m©ch”s
, 
v®ues
, 
os
);

702 
	g‹m¶©e
 <
ty³Çme
 
	gTu¶e
,y³Çm
	gFunc
,y³Çm
	gOutI‹r
>

703 şas 
	cT¿nsfÜmTu¶eV®uesH–³r
 {

704 
	g´iv©e
:

705 ::
¡d
::
	ttu¶e_size
<
	tTu¶e
> 
	tTu¶eSize
;

707 
	gpublic
:

710 
OutI‹r
 
Run
(
Func
 
f
, cÚ¡ 
Tu¶e
& 
t
, OutI‹¸
out
) {

711  
	gI‹¿‹Ov”Tu¶e
<
	gTu¶e
, 
	gTu¶eSize
::
v®ue
>()(
f
, 
	gt
, 
	gout
);

714 
	g´iv©e
:

715 
‹m¶©e
 <
ty³Çme
 
Tup
, 
size_t
 
	gkRemaššgSize
>

716 
	sI‹¿‹Ov”Tu¶e
 {

717 
OutI‹r
 
İ”©Ü
(è(
Func
 
	gf
, cÚ¡ 
	gTup
& 
	gt
, OutI‹¸
	gout
) const {

718 *
	gout
++ = 
f
(::
¡d
::
g‘
<
Tu¶eSize
::
v®ue
 - 
kRemaššgSize
>(
t
));

719  
	gI‹¿‹Ov”Tu¶e
<
	gTup
, 
	gkRemaššgSize
 - 1>()(
	gf
, 
	gt
, 
	gout
);

722 
	g‹m¶©e
 <
ty³Çme
 
	gTup
>

723 
	gI‹¿‹Ov”Tu¶e
<
	gTup
, 0> {

724 
OutI‹r
 
İ”©Ü
(è(
	gFunc
 , cÚ¡ 
	gTup
& , OutI‹¸
	gout
) const {

725  
	gout
;

733 
	g‹m¶©e
 <
ty³Çme
 
	gTu¶e
,y³Çm
	gFunc
,y³Çm
	gOutI‹r
>

734 
OutI‹r
 
T¿nsfÜmTu¶eV®ues
(
Func
 
f
, cÚ¡ 
Tu¶e
& 
t
, OutI‹¸
out
) {

735  
	gT¿nsfÜmTu¶eV®uesH–³r
<
	gTu¶e
, 
	gFunc
, 
	gOutI‹r
>::
Run
(
f
, 
t
, 
out
);

742 şas 
	cAnythšgM©ch”
 {

743 
	gpublic
:

744 
usšg
 
is_g‹¡_m©ch”
 = ;

746 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

747 
boŞ
 
M©chAndEx¶aš
(cÚ¡ 
T
& , 
¡d
::
o¡»am
* ) const {

748  
Œue
;

750 
DesüibeTo
(
¡d
::
o¡»am
* 
os
) const { *os << "is‡nything"; }

751 
DesüibeNeg©iÚTo
(::
¡d
::
o¡»am
* 
os
) const {

755 *
os
 << "never matches";

761 şas 
	cIsNuÎM©ch”
 {

762 
	gpublic
:

763 
‹m¶©e
 <
ty³Çme
 
Poš‹r
>

764 
boŞ
 
M©chAndEx¶aš
(cÚ¡ 
Poš‹r
& 
p
,

765 
M©chResuÉLi¡’”
* ) const {

766  
	gp
 =ğ
nuÎ±r
;

769 
DesüibeTo
(::
¡d
::
o¡»am
* 
os
) const { *os << "is NULL"; }

770 
DesüibeNeg©iÚTo
(::
¡d
::
o¡»am
* 
os
) const {

771 *
os
 << "isn't NULL";

777 şas 
	cNÙNuÎM©ch”
 {

778 
	gpublic
:

779 
‹m¶©e
 <
ty³Çme
 
Poš‹r
>

780 
boŞ
 
M©chAndEx¶aš
(cÚ¡ 
Poš‹r
& 
p
,

781 
M©chResuÉLi¡’”
* ) const {

782  
	gp
 !ğ
nuÎ±r
;

785 
DesüibeTo
(::
¡d
::
o¡»am
* 
os
) const { *os << "isn't NULL"; }

786 
DesüibeNeg©iÚTo
(::
¡d
::
o¡»am
* 
os
) const {

787 *
os
 << "is NULL";

804 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

805 
şass
 
	gRefM©ch”
;

807 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

808 
şass
 
	gRefM©ch”
<
	gT
&> {

814 
	gpublic
:

818 
ex¶ic™
 
RefM©ch”
(
T
& 
x
è: 
objeù_
(x) {}

820 
‹m¶©e
 <
ty³Çme
 
Su³r
>

821 
İ”©Ü
 
M©ch”
<
Su³r
&>() const {

827  
MakeM©ch”
(
Ãw
 
Im¶
<
Su³r
>(
objeù_
));

830 
	g´iv©e
:

831 
‹m¶©e
 <
ty³Çme
 
Su³r
>

832 
şass
 
Im¶
 : 
public
 
M©ch”IÁ”çû
<
Su³r
&> {

833 
public
:

834 
ex¶ic™
 
Im¶
(
Su³r
& 
x
è: 
objeù_
(x) {}

838 
boŞ
 
M©chAndEx¶aš
(
Su³r
& 
x
,

839 
M©chResuÉLi¡’”
* 
li¡’”
ècÚ¡ 
	gov”ride
 {

840 *
	gli¡’”
 << "which i loÿ‹d @" << 
	g¡©ic_ÿ¡
<cÚ¡ *>(&
	gx
);

841  &
	gx
 =ğ&
objeù_
;

844 
DesüibeTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

845 *
os
 << "referenceshe variable ";

846 
	gUniv”§lPrš‹r
<
	gSu³r
&>::
Pršt
(
objeù_
, 
os
);

849 
DesüibeNeg©iÚTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

850 *
os
 << "does‚ot„eferencehe variable ";

851 
	gUniv”§lPrš‹r
<
	gSu³r
&>::
Pršt
(
objeù_
, 
os
);

854 
	g´iv©e
:

855 cÚ¡ 
Su³r
& 
objeù_
;

858 
	gT
& 
	gobjeù_
;

862 
šlše
 
boŞ
 
Ca£In£ns™iveCSŒšgEqu®s
(cÚ¡ * 
lhs
, cÚ¡ * 
rhs
) {

863  
	gSŒšg
::
Ca£In£ns™iveCSŒšgEqu®s
(
lhs
, 
rhs
);

866 
šlše
 
boŞ
 
Ca£In£ns™iveCSŒšgEqu®s
(cÚ¡ 
wch¬_t
* 
lhs
,

867 cÚ¡ 
wch¬_t
* 
rhs
) {

868  
	gSŒšg
::
Ca£In£ns™iveWideCSŒšgEqu®s
(
lhs
, 
rhs
);

873 
	g‹m¶©e
 <
ty³Çme
 
	gSŒšgTy³
>

874 
boŞ
 
Ca£In£ns™iveSŒšgEqu®s
(cÚ¡ 
SŒšgTy³
& 
s1
,

875 cÚ¡ 
SŒšgTy³
& 
s2
) {

877 ià(!
Ca£In£ns™iveCSŒšgEqu®s
(
s1
.
c_¡r
(), 
s2
.c_str())) {

878  
	gçl£
;

882 cÚ¡ 
ty³Çme
 
	gSŒšgTy³
::
v®ue_ty³
 
nul
 = 0;

883 cÚ¡ 
size_t
 
	gi1
 = 
s1
.
fšd
(
nul
), 
	gi2
 = 
s2
.find(nul);

886 ià(
	gi1
 =ğ
SŒšgTy³
::
Åos
 || 
i2
 == StringType::npos) {

887  
i1
 =ğ
i2
;

891  
Ca£In£ns™iveSŒšgEqu®s
(
s1
.
sub¡r
(
i1
 + 1), 
s2
.sub¡r(
i2
 + 1));

897 
	g‹m¶©e
 <
ty³Çme
 
	gSŒšgTy³
>

898 şas 
	cSŒEqu®™yM©ch”
 {

899 
	gpublic
:

900 
SŒEqu®™yM©ch”
(
SŒšgTy³
 
¡r
, 
boŞ
 
ex³ù_eq
, boŞ 
ÿ£_£ns™ive
)

901 : 
¡ršg_
(
¡d
::
move
(
¡r
)),

902 
ex³ù_eq_
(
ex³ù_eq
),

903 
ÿ£_£ns™ive_
(
ÿ£_£ns™ive
) {}

905 #ià
GTEST_INTERNAL_HAS_STRING_VIEW


906 
boŞ
 
M©chAndEx¶aš
(cÚ¡ 
š‹º®
::
SŒšgV›w
& 
s
,

907 
M©chResuÉLi¡’”
* 
li¡’”
) const {

910 cÚ¡ 
	gSŒšgTy³
& 
	g¡r
 = 
¡d
::
¡ršg
(
s
);

911  
M©chAndEx¶aš
(
¡r
, 
li¡’”
);

920 
	g‹m¶©e
 <
ty³Çme
 
	gCh¬Ty³
>

921 
boŞ
 
M©chAndEx¶aš
(
Ch¬Ty³
* 
s
, 
M©chResuÉLi¡’”
* 
li¡’”
) const {

922 ià(
	gs
 =ğ
nuÎ±r
) {

923  !
ex³ù_eq_
;

925  
M©chAndEx¶aš
(
SŒšgTy³
(
s
), 
li¡’”
);

932 
	g‹m¶©e
 <
ty³Çme
 
	gM©ch“SŒšgTy³
>

933 
boŞ
 
M©chAndEx¶aš
(cÚ¡ 
M©ch“SŒšgTy³
& 
s
,

934 
M©chResuÉLi¡’”
* ) const {

935 cÚ¡ 
SŒšgTy³
 
s2
(
s
);

936 cÚ¡ 
boŞ
 
	geq
 = 
ÿ£_£ns™ive_
 ? 
s2
 =ğ
¡ršg_
 :

937 
Ca£In£ns™iveSŒšgEqu®s
(
s2
, 
¡ršg_
);

938  
	gex³ù_eq_
 =ğ
eq
;

941 
DesüibeTo
(::
¡d
::
o¡»am
* 
os
) const {

942 
DesüibeToH–³r
(
ex³ù_eq_
, 
os
);

945 
DesüibeNeg©iÚTo
(::
¡d
::
o¡»am
* 
os
) const {

946 
DesüibeToH–³r
(!
ex³ù_eq_
, 
os
);

949 
	g´iv©e
:

950 
DesüibeToH–³r
(
boŞ
 
ex³ù_eq
, ::
¡d
::
o¡»am
* 
os
) const {

951 *
os
 << (
ex³ù_eq
 ? "is " : "isn't ");

952 *
	gos
 << "equalo ";

953 ià(!
	gÿ£_£ns™ive_
) {

954 *
	gos
 << "(ignoring case) ";

956 
Univ”§lPršt
(
¡ršg_
, 
os
);

959 cÚ¡ 
SŒšgTy³
 
	g¡ršg_
;

960 cÚ¡ 
boŞ
 
	gex³ù_eq_
;

961 cÚ¡ 
boŞ
 
	gÿ£_£ns™ive_
;

967 
	g‹m¶©e
 <
ty³Çme
 
	gSŒšgTy³
>

968 şas 
	cHasSub¡rM©ch”
 {

969 
	gpublic
:

970 
ex¶ic™
 
HasSub¡rM©ch”
(cÚ¡ 
SŒšgTy³
& 
sub¡ršg
)

971 : 
sub¡ršg_
(
sub¡ršg
) {}

973 #ià
GTEST_INTERNAL_HAS_STRING_VIEW


974 
boŞ
 
M©chAndEx¶aš
(cÚ¡ 
š‹º®
::
SŒšgV›w
& 
s
,

975 
M©chResuÉLi¡’”
* 
li¡’”
) const {

978 cÚ¡ 
	gSŒšgTy³
& 
	g¡r
 = 
¡d
::
¡ršg
(
s
);

979  
M©chAndEx¶aš
(
¡r
, 
li¡’”
);

988 
	g‹m¶©e
 <
ty³Çme
 
	gCh¬Ty³
>

989 
boŞ
 
M©chAndEx¶aš
(
Ch¬Ty³
* 
s
, 
M©chResuÉLi¡’”
* 
li¡’”
) const {

990  
	gs
 !ğ
nuÎ±r
 && 
M©chAndEx¶aš
(
SŒšgTy³
(
s
), 
li¡’”
);

997 
	g‹m¶©e
 <
ty³Çme
 
	gM©ch“SŒšgTy³
>

998 
boŞ
 
M©chAndEx¶aš
(cÚ¡ 
M©ch“SŒšgTy³
& 
s
,

999 
M©chResuÉLi¡’”
* ) const {

1000  
SŒšgTy³
(
s
).
fšd
(
sub¡ršg_
è!ğSŒšgTy³::
Åos
;

1004 
DesüibeTo
(::
¡d
::
o¡»am
* 
os
) const {

1005 *
os
 << "has substring ";

1006 
Univ”§lPršt
(
sub¡ršg_
, 
os
);

1009 
DesüibeNeg©iÚTo
(::
¡d
::
o¡»am
* 
os
) const {

1010 *
os
 << "has‚o substring ";

1011 
Univ”§lPršt
(
sub¡ršg_
, 
os
);

1014 
	g´iv©e
:

1015 cÚ¡ 
SŒšgTy³
 
sub¡ršg_
;

1021 
	g‹m¶©e
 <
ty³Çme
 
	gSŒšgTy³
>

1022 şas 
	cS¹sW™hM©ch”
 {

1023 
	gpublic
:

1024 
ex¶ic™
 
S¹sW™hM©ch”
(cÚ¡ 
SŒšgTy³
& 
´efix
è: 
´efix_
(prefix) {

1027 #ià
GTEST_INTERNAL_HAS_STRING_VIEW


1028 
boŞ
 
M©chAndEx¶aš
(cÚ¡ 
š‹º®
::
SŒšgV›w
& 
s
,

1029 
M©chResuÉLi¡’”
* 
li¡’”
) const {

1032 cÚ¡ 
	gSŒšgTy³
& 
	g¡r
 = 
¡d
::
¡ršg
(
s
);

1033  
M©chAndEx¶aš
(
¡r
, 
li¡’”
);

1042 
	g‹m¶©e
 <
ty³Çme
 
	gCh¬Ty³
>

1043 
boŞ
 
M©chAndEx¶aš
(
Ch¬Ty³
* 
s
, 
M©chResuÉLi¡’”
* 
li¡’”
) const {

1044  
	gs
 !ğ
nuÎ±r
 && 
M©chAndEx¶aš
(
SŒšgTy³
(
s
), 
li¡’”
);

1051 
	g‹m¶©e
 <
ty³Çme
 
	gM©ch“SŒšgTy³
>

1052 
boŞ
 
M©chAndEx¶aš
(cÚ¡ 
M©ch“SŒšgTy³
& 
s
,

1053 
M©chResuÉLi¡’”
* ) const {

1054 cÚ¡ 
	gSŒšgTy³
& 
s2
(
s
);

1055  
	gs2
.
Ëngth
(è>ğ
´efix_
.length() &&

1056 
s2
.
sub¡r
(0, 
´efix_
.
Ëngth
()) ==…refix_;

1059 
DesüibeTo
(::
¡d
::
o¡»am
* 
os
) const {

1060 *
os
 << "starts with ";

1061 
Univ”§lPršt
(
´efix_
, 
os
);

1064 
DesüibeNeg©iÚTo
(::
¡d
::
o¡»am
* 
os
) const {

1065 *
os
 << "doesn't start with ";

1066 
Univ”§lPršt
(
´efix_
, 
os
);

1069 
	g´iv©e
:

1070 cÚ¡ 
SŒšgTy³
 
´efix_
;

1076 
	g‹m¶©e
 <
ty³Çme
 
	gSŒšgTy³
>

1077 şas 
	cEndsW™hM©ch”
 {

1078 
	gpublic
:

1079 
ex¶ic™
 
EndsW™hM©ch”
(cÚ¡ 
SŒšgTy³
& 
suffix
è: 
suffix_
(suffix) {}

1081 #ià
GTEST_INTERNAL_HAS_STRING_VIEW


1082 
boŞ
 
M©chAndEx¶aš
(cÚ¡ 
š‹º®
::
SŒšgV›w
& 
s
,

1083 
M©chResuÉLi¡’”
* 
li¡’”
) const {

1086 cÚ¡ 
	gSŒšgTy³
& 
	g¡r
 = 
¡d
::
¡ršg
(
s
);

1087  
M©chAndEx¶aš
(
¡r
, 
li¡’”
);

1096 
	g‹m¶©e
 <
ty³Çme
 
	gCh¬Ty³
>

1097 
boŞ
 
M©chAndEx¶aš
(
Ch¬Ty³
* 
s
, 
M©chResuÉLi¡’”
* 
li¡’”
) const {

1098  
	gs
 !ğ
nuÎ±r
 && 
M©chAndEx¶aš
(
SŒšgTy³
(
s
), 
li¡’”
);

1105 
	g‹m¶©e
 <
ty³Çme
 
	gM©ch“SŒšgTy³
>

1106 
boŞ
 
M©chAndEx¶aš
(cÚ¡ 
M©ch“SŒšgTy³
& 
s
,

1107 
M©chResuÉLi¡’”
* ) const {

1108 cÚ¡ 
	gSŒšgTy³
& 
s2
(
s
);

1109  
	gs2
.
Ëngth
(è>ğ
suffix_
.length() &&

1110 
s2
.
sub¡r
(s2.
Ëngth
(è- 
suffix_
.length()) == suffix_;

1113 
DesüibeTo
(::
¡d
::
o¡»am
* 
os
) const {

1114 *
os
 << "ends with ";

1115 
Univ”§lPršt
(
suffix_
, 
os
);

1118 
DesüibeNeg©iÚTo
(::
¡d
::
o¡»am
* 
os
) const {

1119 *
os
 << "doesn'tƒnd with ";

1120 
Univ”§lPršt
(
suffix_
, 
os
);

1123 
	g´iv©e
:

1124 cÚ¡ 
SŒšgTy³
 
suffix_
;

1135 
	g‹m¶©e
 <
ty³Çme
 
	gD
,y³Çm
	gOp
>

1136 şas 
	cPaœM©chBa£
 {

1137 
	gpublic
:

1138 
‹m¶©e
 <
ty³Çme
 
T1
,y³Çm
	gT2
>

1139 
İ”©Ü
 
	gM©ch”
<::
¡d
::
tu¶e
<
T1
, 
	gT2
>>() const {

1140  
	gM©ch”
<::
¡d
::
tu¶e
<
T1
, 
	gT2
>>(
Ãw
 
	gIm¶
<const ::std::tuple<T1, T2>&>);

1142 
	g‹m¶©e
 <
ty³Çme
 
	gT1
,y³Çm
	gT2
>

1143 
İ”©Ü
 
	gM©ch”
<cÚ¡ ::
¡d
::
tu¶e
<
T1
, 
	gT2
>&>() const {

1144  
MakeM©ch”
(
Ãw
 
Im¶
<cÚ¡ ::
¡d
::
tu¶e
<
T1
, 
T2
>&>);

1147 
	g´iv©e
:

1148 ::
¡d
::
o¡»am
& 
G‘Desc
(::¡d::o¡»am& 
os
) {

1149  
os
 << 
D
::
Desc
();

1152 
	g‹m¶©e
 <
ty³Çme
 
	gTu¶e
>

1153 
şass
 
	gIm¶
 : 
public
 
M©ch”IÁ”çû
<
Tu¶e
> {

1154 
public
:

1155 
boŞ
 
M©chAndEx¶aš
(
Tu¶e
 
¬gs
,

1156 
M©chResuÉLi¡’”
* ) cÚ¡ 
	gov”ride
 {

1157  
Op
()(::
¡d
::
g‘
<0>(
¬gs
), ::std::get<1>(args));

1159 
DesüibeTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

1160 *
os
 << "¬" << 
G‘Desc
;

1162 
DesüibeNeg©iÚTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

1163 *
os
 << "¬’'ˆ" << 
G‘Desc
;

1168 
şass
 
	gEq2M©ch”
 : 
public
 
PaœM©chBa£
<
Eq2M©ch”
, 
	gAnyEq
> {

1169 
	gpublic
:

1170 cÚ¡ * 
Desc
() {  "anƒqual…air"; }

1172 
şass
 
	gNe2M©ch”
 : 
public
 
PaœM©chBa£
<
Ne2M©ch”
, 
	gAnyNe
> {

1173 
	gpublic
:

1174 cÚ¡ * 
Desc
() {  "an unequal…air"; }

1176 
şass
 
	gLt2M©ch”
 : 
public
 
PaœM©chBa£
<
Lt2M©ch”
, 
	gAnyLt
> {

1177 
	gpublic
:

1178 cÚ¡ * 
Desc
() {  "a…air wherehe first <he second"; }

1180 
şass
 
	gGt2M©ch”
 : 
public
 
PaœM©chBa£
<
Gt2M©ch”
, 
	gAnyGt
> {

1181 
	gpublic
:

1182 cÚ¡ * 
Desc
() {  "a…air wherehe first >he second"; }

1184 
şass
 
	gLe2M©ch”
 : 
public
 
PaœM©chBa£
<
Le2M©ch”
, 
	gAnyLe
> {

1185 
	gpublic
:

1186 cÚ¡ * 
Desc
() {  "a…air wherehe first <=he second"; }

1188 
şass
 
	gGe2M©ch”
 : 
public
 
PaœM©chBa£
<
Ge2M©ch”
, 
	gAnyGe
> {

1189 
	gpublic
:

1190 cÚ¡ * 
Desc
() {  "a…air wherehe first >=he second"; }

1197 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

1198 
şass
 
	gNÙM©ch”Im¶
 : 
public
 
M©ch”IÁ”çû
<cÚ¡ 
T
&> {

1199 
public
:

1200 
ex¶ic™
 
NÙM©ch”Im¶
(cÚ¡ 
M©ch”
<
T
>& 
m©ch”
)

1201 : 
m©ch”_
(
m©ch”
) {}

1203 
boŞ
 
M©chAndEx¶aš
(cÚ¡ 
T
& 
x
,

1204 
M©chResuÉLi¡’”
* 
li¡’”
ècÚ¡ 
	gov”ride
 {

1205  !
	gm©ch”_
.
M©chAndEx¶aš
(
x
, 
li¡’”
);

1208 
DesüibeTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

1209 
m©ch”_
.
DesüibeNeg©iÚTo
(
os
);

1212 
DesüibeNeg©iÚTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

1213 
m©ch”_
.
DesüibeTo
(
os
);

1216 
	g´iv©e
:

1217 cÚ¡ 
M©ch”
<
T
> 
m©ch”_
;

1222 
	g‹m¶©e
 <
ty³Çme
 
	gIÂ”M©ch”
>

1223 şas 
	cNÙM©ch”
 {

1224 
	gpublic
:

1225 
ex¶ic™
 
NÙM©ch”
(
IÂ”M©ch”
 
m©ch”
è: 
m©ch”_
(matcher) {}

1229 
‹m¶©e
 <
ty³Çme
 
T
>

1230 
İ”©Ü
 
M©ch”
<
T
>() const {

1231  
M©ch”
<
T
>(
Ãw
 
NÙM©ch”Im¶
<T>(
SaãM©ch”Ca¡
<T>(
m©ch”_
)));

1234 
	g´iv©e
:

1235 
IÂ”M©ch”
 
m©ch”_
;

1242 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

1243 
şass
 
	gAÎOfM©ch”Im¶
 : 
public
 
M©ch”IÁ”çû
<cÚ¡ 
T
&> {

1244 
public
:

1245 
ex¶ic™
 
AÎOfM©ch”Im¶
(
¡d
::
veùÜ
<
M©ch”
<
T
> > 
m©ch”s
)

1246 : 
m©ch”s_
(
¡d
::
move
(
m©ch”s
)) {}

1248 
DesüibeTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

1249 *
os
 << "(";

1250 
size_t
 
	gi
 = 0; i < 
	gm©ch”s_
.
size
(); ++i) {

1251 ià(
	gi
 !ğ0è*
os
 << ")‡nd (";

1252 
	gm©ch”s_
[
i
].
DesüibeTo
(
os
);

1254 *
	gos
 << ")";

1257 
DesüibeNeg©iÚTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

1258 *
os
 << "(";

1259 
size_t
 
	gi
 = 0; i < 
	gm©ch”s_
.
size
(); ++i) {

1260 ià(
	gi
 !ğ0è*
os
 << ") or (";

1261 
	gm©ch”s_
[
i
].
DesüibeNeg©iÚTo
(
os
);

1263 *
	gos
 << ")";

1266 
boŞ
 
M©chAndEx¶aš
(cÚ¡ 
T
& 
x
,

1267 
M©chResuÉLi¡’”
* 
li¡’”
ècÚ¡ 
	gov”ride
 {

1270 
	g¡d
::
¡ršg
 
®l_m©ch_»suÉ
;

1272 
size_t
 
	gi
 = 0; i < 
	gm©ch”s_
.
size
(); ++i) {

1273 
SŒšgM©chResuÉLi¡’”
 
	g¦i¡’”
;

1274 ià(
	gm©ch”s_
[
i
].
M©chAndEx¶aš
(
x
, &
¦i¡’”
)) {

1275 ià(
	g®l_m©ch_»suÉ
.
em±y
()) {

1276 
	g®l_m©ch_»suÉ
 = 
¦i¡’”
.
¡r
();

1278 
	g¡d
::
¡ršg
 
»suÉ
 = 
¦i¡’”
.
¡r
();

1279 ià(!
	g»suÉ
.
em±y
()) {

1280 
	g®l_m©ch_»suÉ
 += ",‡nd ";

1281 
	g®l_m©ch_»suÉ
 +ğ
»suÉ
;

1285 *
	gli¡’”
 << 
	g¦i¡’”
.
¡r
();

1286  
	gçl£
;

1291 *
	gli¡’”
 << 
	g®l_m©ch_»suÉ
;

1292  
	gŒue
;

1295 
	g´iv©e
:

1296 cÚ¡ 
¡d
::
veùÜ
<
M©ch”
<
T
> > 
m©ch”s_
;

1303 
	g‹m¶©e
 <‹m¶©<
ty³Çme
 
	gT
> 
şass
 
	gCombššgM©ch”
, 
	gty³Çme
... 
	gArgs
>

1304 şas 
	cV¬ŸdicM©ch”
 {

1305 
	gpublic
:

1306 
V¬ŸdicM©ch”
(cÚ¡ 
Args
&... 
m©ch”s
)

1307 : 
m©ch”s_
(
m©ch”s
...) {

1308 
¡©ic_as£¹
(...(
Args
) > 0, "Must have‡t†east one matcher.");

1311 
V¬ŸdicM©ch”
(const VariadicMatcher&) = ;

1312 
	gV¬ŸdicM©ch”
& 
	gİ”©Ü
=(cÚ¡ 
V¬ŸdicM©ch”
&èğ
d–‘e
;

1317 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

1318 
İ”©Ü
 
	gM©ch”
<
	gT
>() const {

1319 
	g¡d
::
veùÜ
<
M©ch”
<
T
> > 
v®ues
;

1320 
	gC»©eV¬ŸdicM©ch”
<
	gT
>(&
	gv®ues
, 
	g¡d
::
š‹g¿l_cÚ¡ªt
<
size_t
, 0>());

1321  
	gM©ch”
<
	gT
>(
Ãw
 
	gCombššgM©ch”
<T>(
	g¡d
::
move
(
v®ues
)));

1324 
	g´iv©e
:

1325 
‹m¶©e
 <
ty³Çme
 
T
, 
size_t
 
	gI
>

1326 
C»©eV¬ŸdicM©ch”
(
¡d
::
veùÜ
<
M©ch”
<
T
> >* 
v®ues
,

1327 
¡d
::
š‹g¿l_cÚ¡ªt
<
size_t
, 
I
>) const {

1328 
	gv®ues
->
push_back
(
SaãM©ch”Ca¡
<
T
>(
¡d
::
g‘
<
I
>(
m©ch”s_
)));

1329 
	gC»©eV¬ŸdicM©ch”
<
	gT
>(
	gv®ues
, 
	g¡d
::
š‹g¿l_cÚ¡ªt
<
size_t
, 
	gI
 + 1>());

1332 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

1333 
C»©eV¬ŸdicM©ch”
(

1334 
¡d
::
veùÜ
<
M©ch”
<
T
> >*,

1335 
¡d
::
š‹g¿l_cÚ¡ªt
<
size_t
, ...(
Args
)>) const {}

1337 
	g¡d
::
tu¶e
<
Args
...> 
m©ch”s_
;

1340 
	g‹m¶©e
 <
	gty³Çme
... 
	gArgs
>

1341 
usšg
 
	gAÎOfM©ch”
 = 
V¬ŸdicM©ch”
<
AÎOfM©ch”Im¶
, 
	gArgs
...>;

1347 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

1348 
şass
 
	gAnyOfM©ch”Im¶
 : 
public
 
M©ch”IÁ”çû
<cÚ¡ 
T
&> {

1349 
public
:

1350 
ex¶ic™
 
AnyOfM©ch”Im¶
(
¡d
::
veùÜ
<
M©ch”
<
T
> > 
m©ch”s
)

1351 : 
m©ch”s_
(
¡d
::
move
(
m©ch”s
)) {}

1353 
DesüibeTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

1354 *
os
 << "(";

1355 
size_t
 
	gi
 = 0; i < 
	gm©ch”s_
.
size
(); ++i) {

1356 ià(
	gi
 !ğ0è*
os
 << ") or (";

1357 
	gm©ch”s_
[
i
].
DesüibeTo
(
os
);

1359 *
	gos
 << ")";

1362 
DesüibeNeg©iÚTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

1363 *
os
 << "(";

1364 
size_t
 
	gi
 = 0; i < 
	gm©ch”s_
.
size
(); ++i) {

1365 ià(
	gi
 !ğ0è*
os
 << ")‡nd (";

1366 
	gm©ch”s_
[
i
].
DesüibeNeg©iÚTo
(
os
);

1368 *
	gos
 << ")";

1371 
boŞ
 
M©chAndEx¶aš
(cÚ¡ 
T
& 
x
,

1372 
M©chResuÉLi¡’”
* 
li¡’”
ècÚ¡ 
	gov”ride
 {

1373 
	g¡d
::
¡ršg
 
no_m©ch_»suÉ
;

1377 
size_t
 
	gi
 = 0; i < 
	gm©ch”s_
.
size
(); ++i) {

1378 
SŒšgM©chResuÉLi¡’”
 
	g¦i¡’”
;

1379 ià(
	gm©ch”s_
[
i
].
M©chAndEx¶aš
(
x
, &
¦i¡’”
)) {

1380 *
	gli¡’”
 << 
	g¦i¡’”
.
¡r
();

1381  
	gŒue
;

1383 ià(
	gno_m©ch_»suÉ
.
em±y
()) {

1384 
	gno_m©ch_»suÉ
 = 
¦i¡’”
.
¡r
();

1386 
	g¡d
::
¡ršg
 
»suÉ
 = 
¦i¡’”
.
¡r
();

1387 ià(!
	g»suÉ
.
em±y
()) {

1388 
	gno_m©ch_»suÉ
 += ",‡nd ";

1389 
	gno_m©ch_»suÉ
 +ğ
»suÉ
;

1396 *
	gli¡’”
 << 
	gno_m©ch_»suÉ
;

1397  
	gçl£
;

1400 
	g´iv©e
:

1401 cÚ¡ 
¡d
::
veùÜ
<
M©ch”
<
T
> > 
m©ch”s_
;

1405 
	g‹m¶©e
 <
	gty³Çme
... 
	gArgs
>

1406 
usšg
 
	gAnyOfM©ch”
 = 
V¬ŸdicM©ch”
<
AnyOfM©ch”Im¶
, 
	gArgs
...>;

1409 
	g‹m¶©e
 <‹m¶©<
	gşass
> 
şass
 
	gM©ch”Im¶
, 
ty³Çme
 
	gT
>

1410 şas 
	cSomeOfA¼ayM©ch”
 {

1411 
	gpublic
:

1414 
‹m¶©e
 <
ty³Çme
 
I‹r
>

1415 
SomeOfA¼ayM©ch”
(
I‹r
 
fœ¡
, I‹¸
Ï¡
è: 
m©ch”s_
(first,†ast) {}

1417 
	g‹m¶©e
 <
ty³Çme
 
	gU
>

1418 
İ”©Ü
 
	gM©ch”
<
	gU
>() const {

1419 
usšg
 
	gRawU
 = 
ty³Çme
 
¡d
::
deÿy
<
U
>::
ty³
;

1420 
	g¡d
::
veùÜ
<
M©ch”
<
RawU
>> 
m©ch”s
;

1421 cÚ¡‡uto& 
	gm©ch”
 : 
m©ch”s_
) {

1422 
m©ch”s
.
push_back
(
M©ch”Ca¡
<
RawU
>(
m©ch”
));

1424  
	gM©ch”
<
	gU
>(
Ãw
 
	gM©ch”Im¶
<
	gRawU
>(
	g¡d
::
move
(
m©ch”s
)));

1427 
	g´iv©e
:

1428 cÚ¡ ::
¡d
::
veùÜ
<
T
> 
m©ch”s_
;

1431 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

1432 
usšg
 
	gAÎOfA¼ayM©ch”
 = 
SomeOfA¼ayM©ch”
<
AÎOfM©ch”Im¶
, 
	gT
>;

1434 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

1435 
usšg
 
	gAnyOfA¼ayM©ch”
 = 
SomeOfA¼ayM©ch”
<
AnyOfM©ch”Im¶
, 
	gT
>;

1439 
	g‹m¶©e
 <
ty³Çme
 
	gP»diÿ‹
>

1440 şas 
	cTrulyM©ch”
 {

1441 
	gpublic
:

1442 
ex¶ic™
 
TrulyM©ch”
(
P»diÿ‹
 
´ed
è: 
´ediÿ‹_
(pred) {}

1448 
‹m¶©e
 <
ty³Çme
 
T
>

1449 
boŞ
 
M©chAndEx¶aš
(
T
& 
x
,

1450 
M©chResuÉLi¡’”
* 
li¡’”
) const {

1457 ià(
´ediÿ‹_
(
x
))

1458  
	gŒue
;

1459 *
	gli¡’”
 << "didn't satisfyhe given…redicate";

1460  
	gçl£
;

1463 
DesüibeTo
(::
¡d
::
o¡»am
* 
os
) const {

1464 *
os
 << "satisfieshe given…redicate";

1467 
DesüibeNeg©iÚTo
(::
¡d
::
o¡»am
* 
os
) const {

1468 *
os
 << "doesn't satisfyhe given…redicate";

1471 
	g´iv©e
:

1472 
P»diÿ‹
 
´ediÿ‹_
;

1477 
	g‹m¶©e
 <
ty³Çme
 
	gM
>

1478 şas 
	cM©ch”AsP»diÿ‹
 {

1479 
	gpublic
:

1480 
ex¶ic™
 
M©ch”AsP»diÿ‹
(
M
 
m©ch”
è: 
m©ch”_
(matcher) {}

1488 
‹m¶©e
 <
ty³Çme
 
T
>

1489 
boŞ
 
İ”©Ü
()(cÚ¡ 
T
& 
x
) const {

1504  
M©ch”Ca¡
<cÚ¡ 
T
&>(
m©ch”_
).
M©ches
(
x
);

1507 
	g´iv©e
:

1508 
M
 
m©ch”_
;

1513 
	g‹m¶©e
 <
ty³Çme
 
	gM
>

1514 şas 
	cP»diÿ‹FÜm©‹rFromM©ch”
 {

1515 
	gpublic
:

1516 
ex¶ic™
 
P»diÿ‹FÜm©‹rFromM©ch”
(
M
 
m
è: 
m©ch”_
(
¡d
::
move
(m)) {}

1521 
‹m¶©e
 <
ty³Çme
 
T
>

1522 
As£¹iÚResuÉ
 
İ”©Ü
()(cÚ¡ * 
v®ue_‹xt
, cÚ¡ 
	gT
& 
	gx
) const {

1534 cÚ¡ 
	gM©ch”
<cÚ¡ 
	gT
&> 
	gm©ch”
 = 
SaãM©ch”Ca¡
<cÚ¡ 
T
&>(
m©ch”_
);

1538 ià(
	gm©ch”
.
M©ches
(
x
)) {

1539  
As£¹iÚSucûss
();

1542 ::
¡d
::
¡ršg¡»am
 
ss
;

1543 
	gss
 << "V®uof: " << 
	gv®ue_‹xt
 << "\n"

1545 
	gm©ch”
.
DesüibeTo
(&
ss
);

1548 
SŒšgM©chResuÉLi¡’”
 
	gli¡’”
;

1549 ià(
M©chPrštAndEx¶aš
(
x
, 
m©ch”
, &
li¡’”
)) {

1550 
	gss
 << "\n The matcher failed onhe initial‡ttempt; but…assed when "

1553 
	gss
 << "\À Aùu®: " << 
	gli¡’”
.
¡r
();

1554  
As£¹iÚFau»
(è<< 
	gss
.
¡r
();

1557 
	g´iv©e
:

1558 cÚ¡ 
M
 
m©ch”_
;

1565 
	g‹m¶©e
 <
ty³Çme
 
	gM
>

1566 
šlše
 
	gP»diÿ‹FÜm©‹rFromM©ch”
<
	gM
>

1567 
MakeP»diÿ‹FÜm©‹rFromM©ch”
(
M
 
m©ch”
) {

1568  
	gP»diÿ‹FÜm©‹rFromM©ch”
<
	gM
>(
	g¡d
::
move
(
m©ch”
));

1573 şas 
	cIsNªM©ch”
 {

1574 
	gpublic
:

1575 
‹m¶©e
 <
ty³Çme
 
FlßtTy³
>

1576 
boŞ
 
M©chAndEx¶aš
(cÚ¡ 
FlßtTy³
& 
f
,

1577 
M©chResuÉLi¡’”
* ) const {

1578  (::
¡d
::
i¢ª
)(
f
);

1581 
DesüibeTo
(::
¡d
::
o¡»am
* 
os
) const { *os << "is NaN"; }

1582 
DesüibeNeg©iÚTo
(::
¡d
::
o¡»am
* 
os
) const {

1583 *
os
 << "isn't NaN";

1591 
	g‹m¶©e
 <
ty³Çme
 
	gFlßtTy³
>

1592 şas 
	cFlßtšgEqM©ch”
 {

1593 
	gpublic
:

1600 
FlßtšgEqM©ch”
(
FlßtTy³
 
ex³ùed
, 
boŞ
 
Çn_eq_Çn
) :

1601 
ex³ùed_
(
ex³ùed
), 
Çn_eq_Çn_
(
Çn_eq_Çn
), 
max_abs_”rÜ_
(-1) {

1607 
FlßtšgEqM©ch”
(
FlßtTy³
 
ex³ùed
, 
boŞ
 
Çn_eq_Çn
,

1608 
FlßtTy³
 
max_abs_”rÜ
)

1609 : 
ex³ùed_
(
ex³ùed
),

1610 
Çn_eq_Çn_
(
Çn_eq_Çn
),

1611 
max_abs_”rÜ_
(
max_abs_”rÜ
) {

1612 
GTEST_CHECK_
(
max_abs_”rÜ
 >= 0)

1613 << ", wh”max_abs_”rÜ is" << 
max_abs_”rÜ
;

1617 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

1618 
şass
 
	gIm¶
 : 
public
 
M©ch”IÁ”çû
<
T
> {

1619 
public
:

1620 
Im¶
(
FlßtTy³
 
ex³ùed
, 
boŞ
 
Çn_eq_Çn
, FlßtTy³ 
max_abs_”rÜ
)

1621 : 
ex³ùed_
(
ex³ùed
),

1622 
Çn_eq_Çn_
(
Çn_eq_Çn
),

1623 
max_abs_”rÜ_
(
max_abs_”rÜ
) {}

1625 
boŞ
 
M©chAndEx¶aš
(
T
 
v®ue
,

1626 
M©chResuÉLi¡’”
* 
li¡’”
ècÚ¡ 
	gov”ride
 {

1627 cÚ¡ 
	gFlßtšgPošt
<
	gFlßtTy³
> 
aùu®
(
v®ue
), 
ex³ùed
(
ex³ùed_
);

1630 ià(
	gaùu®
.
is_Çn
(è|| 
	gex³ùed
.is_nan()) {

1631 ià(
	gaùu®
.
is_Çn
(è&& 
	gex³ùed
.is_nan()) {

1632  
	gÇn_eq_Çn_
;

1635  
	gçl£
;

1637 ià(
HasMaxAbsE¼Ü
()) {

1642 ià(
	gv®ue
 =ğ
ex³ùed_
) {

1643  
Œue
;

1646 cÚ¡ 
FlßtTy³
 
	gdiff
 = 
v®ue
 - 
ex³ùed_
;

1647 ià(::
¡d
::
çbs
(
diff
è<ğ
max_abs_”rÜ_
) {

1648  
Œue
;

1651 ià(
	gli¡’”
->
IsIÁ”e¡ed
()) {

1652 *
	gli¡’”
 << "which i " << 
	gdiff
 << " from " << 
	gex³ùed_
;

1654  
	gçl£
;

1656  
	gaùu®
.
Almo¡Equ®s
(
ex³ùed
);

1660 
DesüibeTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

1664 cÚ¡ ::
¡d
::
¡»amsize
 
Şd_´ecisiÚ
 = 
os
->
´ecisiÚ
(

1665 ::
¡d
::
num”ic_lim™s
<
FlßtTy³
>::
dig™s10
 + 2);

1666 ià(
	gFlßtšgPošt
<
	gFlßtTy³
>(
	gex³ùed_
).
is_Çn
()) {

1667 ià(
	gÇn_eq_Çn_
) {

1668 *
	gos
 << "is NaN";

1670 *
	gos
 << "never matches";

1673 *
	gos
 << "i ­´oxim©–y " << 
	gex³ùed_
;

1674 ià(
HasMaxAbsE¼Ü
()) {

1675 *
	gos
 << " (absŞu‹ƒ¼Ü <ğ" << 
	gmax_abs_”rÜ_
 << ")";

1678 
	gos
->
´ecisiÚ
(
Şd_´ecisiÚ
);

1681 
DesüibeNeg©iÚTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

1683 cÚ¡ ::
¡d
::
¡»amsize
 
Şd_´ecisiÚ
 = 
os
->
´ecisiÚ
(

1684 ::
¡d
::
num”ic_lim™s
<
FlßtTy³
>::
dig™s10
 + 2);

1685 ià(
	gFlßtšgPošt
<
	gFlßtTy³
>(
	gex³ùed_
).
is_Çn
()) {

1686 ià(
	gÇn_eq_Çn_
) {

1687 *
	gos
 << "isn't NaN";

1689 *
	gos
 << "is‡nything";

1692 *
	gos
 << "i¢'ˆ­´oxim©–y " << 
	gex³ùed_
;

1693 ià(
HasMaxAbsE¼Ü
()) {

1694 *
	gos
 << " (absŞu‹ƒ¼Ü > " << 
	gmax_abs_”rÜ_
 << ")";

1698 
	gos
->
´ecisiÚ
(
Şd_´ecisiÚ
);

1701 
	g´iv©e
:

1702 
boŞ
 
HasMaxAbsE¼Ü
() const {

1703  
max_abs_”rÜ_
 >= 0;

1706 cÚ¡ 
FlßtTy³
 
	gex³ùed_
;

1707 cÚ¡ 
boŞ
 
	gÇn_eq_Çn_
;

1709 cÚ¡ 
FlßtTy³
 
	gmax_abs_”rÜ_
;

1715 
İ”©Ü
 
	gM©ch”
<
	gFlßtTy³
>() const {

1716  
MakeM©ch”
(

1717 
Ãw
 
Im¶
<
FlßtTy³
>(
ex³ùed_
, 
Çn_eq_Çn_
, 
max_abs_”rÜ_
));

1720 
İ”©Ü
 
	gM©ch”
<cÚ¡ 
	gFlßtTy³
&>() const {

1721  
MakeM©ch”
(

1722 
Ãw
 
Im¶
<cÚ¡ 
FlßtTy³
&>(
ex³ùed_
, 
Çn_eq_Çn_
, 
max_abs_”rÜ_
));

1725 
İ”©Ü
 
	gM©ch”
<
	gFlßtTy³
&>() const {

1726  
MakeM©ch”
(

1727 
Ãw
 
Im¶
<
FlßtTy³
&>(
ex³ùed_
, 
Çn_eq_Çn_
, 
max_abs_”rÜ_
));

1730 
	g´iv©e
:

1731 cÚ¡ 
FlßtTy³
 
ex³ùed_
;

1732 cÚ¡ 
boŞ
 
	gÇn_eq_Çn_
;

1734 cÚ¡ 
FlßtTy³
 
	gmax_abs_”rÜ_
;

1742 
	g‹m¶©e
 <
ty³Çme
 
	gFlßtTy³
>

1743 şas 
	cFlßtšgEq2M©ch”
 {

1744 
	gpublic
:

1745 
FlßtšgEq2M©ch”
(è{ 
In™
(-1, 
çl£
); }

1747 
ex¶ic™
 
FlßtšgEq2M©ch”
(
boŞ
 
Çn_eq_Çn
è{ 
In™
(-1,‚an_eq_nan); }

1749 
ex¶ic™
 
FlßtšgEq2M©ch”
(
FlßtTy³
 
max_abs_”rÜ
) {

1750 
In™
(
max_abs_”rÜ
, 
çl£
);

1753 
FlßtšgEq2M©ch”
(
FlßtTy³
 
max_abs_”rÜ
, 
boŞ
 
Çn_eq_Çn
) {

1754 
In™
(
max_abs_”rÜ
, 
Çn_eq_Çn
);

1757 
	g‹m¶©e
 <
ty³Çme
 
	gT1
,y³Çm
	gT2
>

1758 
İ”©Ü
 
	gM©ch”
<::
¡d
::
tu¶e
<
T1
, 
	gT2
>>() const {

1759  
MakeM©ch”
(

1760 
Ãw
 
Im¶
<::
¡d
::
tu¶e
<
T1
, 
T2
>>(
max_abs_”rÜ_
, 
Çn_eq_Çn_
));

1762 
	g‹m¶©e
 <
ty³Çme
 
	gT1
,y³Çm
	gT2
>

1763 
İ”©Ü
 
	gM©ch”
<cÚ¡ ::
¡d
::
tu¶e
<
T1
, 
	gT2
>&>() const {

1764  
MakeM©ch”
(

1765 
Ãw
 
Im¶
<cÚ¡ ::
¡d
::
tu¶e
<
T1
, 
T2
>&>(
max_abs_”rÜ_
, 
Çn_eq_Çn_
));

1768 
	g´iv©e
:

1769 ::
¡d
::
o¡»am
& 
G‘Desc
(::¡d::o¡»am& 
os
) {

1770  
os
 << "an‡lmost-equal…air";

1773 
	g‹m¶©e
 <
ty³Çme
 
	gTu¶e
>

1774 
şass
 
	gIm¶
 : 
public
 
M©ch”IÁ”çû
<
Tu¶e
> {

1775 
public
:

1776 
Im¶
(
FlßtTy³
 
max_abs_”rÜ
, 
boŞ
 
Çn_eq_Çn
) :

1777 
max_abs_”rÜ_
(
max_abs_”rÜ
),

1778 
Çn_eq_Çn_
(
Çn_eq_Çn
) {}

1780 
boŞ
 
M©chAndEx¶aš
(
Tu¶e
 
¬gs
,

1781 
M©chResuÉLi¡’”
* 
li¡’”
ècÚ¡ 
	gov”ride
 {

1782 ià(
	gmax_abs_”rÜ_
 == -1) {

1783 
FlßtšgEqM©ch”
<
FlßtTy³
> 
fm
(::
¡d
::
g‘
<0>(
¬gs
), 
Çn_eq_Çn_
);

1784  
	g¡©ic_ÿ¡
<
	gM©ch”
<
	gFlßtTy³
>>(
	gfm
).
M©chAndEx¶aš
(

1785 ::
¡d
::
g‘
<1>(
¬gs
), 
li¡’”
);

1787 
	gFlßtšgEqM©ch”
<
	gFlßtTy³
> 
fm
(::
¡d
::
g‘
<0>(
¬gs
), 
Çn_eq_Çn_
,

1788 
max_abs_”rÜ_
);

1789  
	g¡©ic_ÿ¡
<
	gM©ch”
<
	gFlßtTy³
>>(
	gfm
).
M©chAndEx¶aš
(

1790 ::
¡d
::
g‘
<1>(
¬gs
), 
li¡’”
);

1793 
DesüibeTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

1794 *
os
 << "¬" << 
G‘Desc
;

1796 
DesüibeNeg©iÚTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

1797 *
os
 << "¬’'ˆ" << 
G‘Desc
;

1800 
	g´iv©e
:

1801 
FlßtTy³
 
max_abs_”rÜ_
;

1802 cÚ¡ 
boŞ
 
	gÇn_eq_Çn_
;

1805 
In™
(
FlßtTy³
 
max_abs_”rÜ_v®
, 
boŞ
 
Çn_eq_Çn_v®
) {

1806 
	gmax_abs_”rÜ_
 = 
max_abs_”rÜ_v®
;

1807 
	gÇn_eq_Çn_
 = 
Çn_eq_Çn_v®
;

1809 
FlßtTy³
 
	gmax_abs_”rÜ_
;

1810 
boŞ
 
	gÇn_eq_Çn_
;

1815 
	g‹m¶©e
 <
ty³Çme
 
	gIÂ”M©ch”
>

1816 şas 
	cPoš‹eM©ch”
 {

1817 
	gpublic
:

1818 
ex¶ic™
 
Poš‹eM©ch”
(cÚ¡ 
IÂ”M©ch”
& 
m©ch”
è: 
m©ch”_
(matcher) {}

1828 
‹m¶©e
 <
ty³Çme
 
Poš‹r
>

1829 
İ”©Ü
 
M©ch”
<
Poš‹r
>() const {

1830  
M©ch”
<
Poš‹r
>(
Ãw
 
Im¶
<cÚ¡ Poš‹r&>(
m©ch”_
));

1833 
	g´iv©e
:

1835 
‹m¶©e
 <
ty³Çme
 
Poš‹r
>

1836 
şass
 
Im¶
 : 
public
 
M©ch”IÁ”çû
<
Poš‹r
> {

1837 
public
:

1838 
usšg
 
Poš‹e
 =

1839 
ty³Çme
 
¡d
::
poš‹r_Œa™s
<
GTEST_REMOVE_REFERENCE_AND_CONST_
(

1840 
Poš‹r
)>::
–em’t_ty³
;

1842 
ex¶ic™
 
Im¶
(cÚ¡ 
IÂ”M©ch”
& 
m©ch”
)

1843 : 
m©ch”_
(
M©ch”Ca¡
<cÚ¡ 
Poš‹e
&>(
m©ch”
)) {}

1845 
DesüibeTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

1846 *
os
 << "pointso‡ valuehat ";

1847 
	gm©ch”_
.
DesüibeTo
(
os
);

1850 
DesüibeNeg©iÚTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

1851 *
os
 << "does‚ot…ointo‡ valuehat ";

1852 
	gm©ch”_
.
DesüibeTo
(
os
);

1855 
boŞ
 
M©chAndEx¶aš
(
Poš‹r
 
poš‹r
,

1856 
M©chResuÉLi¡’”
* 
li¡’”
ècÚ¡ 
	gov”ride
 {

1857 ià(
G‘RawPoš‹r
(
poš‹r
è=ğ
nuÎ±r
è 
çl£
;

1859 *
	gli¡’”
 << "which…ointso ";

1860  
M©chPrštAndEx¶aš
(*
poš‹r
, 
m©ch”_
, 
li¡’”
);

1863 
	g´iv©e
:

1864 cÚ¡ 
M©ch”
<cÚ¡ 
Poš‹e
&> 
m©ch”_
;

1867 cÚ¡ 
IÂ”M©ch”
 
	gm©ch”_
;

1874 
	g‹m¶©e
 <
ty³Çme
 
	gIÂ”M©ch”
>

1875 şas 
	cPoš‹rM©ch”
 {

1876 
	gpublic
:

1877 
ex¶ic™
 
Poš‹rM©ch”
(cÚ¡ 
IÂ”M©ch”
& 
m©ch”
è: 
m©ch”_
(matcher) {}

1887 
‹m¶©e
 <
ty³Çme
 
Poš‹rTy³
>

1888 
İ”©Ü
 
M©ch”
<
Poš‹rTy³
>() const {

1889  
M©ch”
<
Poš‹rTy³
>(
Ãw
 
Im¶
<cÚ¡ Poš‹rTy³&>(
m©ch”_
));

1892 
	g´iv©e
:

1894 
‹m¶©e
 <
ty³Çme
 
Poš‹rTy³
>

1895 
şass
 
Im¶
 : 
public
 
M©ch”IÁ”çû
<
Poš‹rTy³
> {

1896 
public
:

1897 
usšg
 
Poš‹r
 =

1898 cÚ¡ 
ty³Çme
 
¡d
::
poš‹r_Œa™s
<
GTEST_REMOVE_REFERENCE_AND_CONST_
(

1899 
Poš‹rTy³
)>::
–em’t_ty³
*;

1901 
ex¶ic™
 
Im¶
(cÚ¡ 
IÂ”M©ch”
& 
m©ch”
)

1902 : 
m©ch”_
(
M©ch”Ca¡
<
Poš‹r
>(
m©ch”
)) {}

1904 
DesüibeTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

1905 *
os
 << "is‡…ointerhat ";

1906 
	gm©ch”_
.
DesüibeTo
(
os
);

1909 
DesüibeNeg©iÚTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

1910 *
os
 << "is‚ot‡…ointerhat ";

1911 
	gm©ch”_
.
DesüibeTo
(
os
);

1914 
boŞ
 
M©chAndEx¶aš
(
Poš‹rTy³
 
poš‹r
,

1915 
M©chResuÉLi¡’”
* 
li¡’”
ècÚ¡ 
	gov”ride
 {

1916 *
	gli¡’”
 << "which is‡…ointerhat ";

1917 
Poš‹r
 
	gp
 = 
G‘RawPoš‹r
(
poš‹r
);

1918  
M©chPrštAndEx¶aš
(
p
, 
m©ch”_
, 
li¡’”
);

1921 
	g´iv©e
:

1922 
M©ch”
<
Poš‹r
> 
m©ch”_
;

1925 cÚ¡ 
IÂ”M©ch”
 
	gm©ch”_
;

1928 #ià
GTEST_HAS_RTTI


1935 
	g‹m¶©e
 <
ty³Çme
 
	gTo
>

1936 şas 
	cWh’DyÇmicCa¡ToM©ch”Ba£
 {

1937 
	gpublic
:

1938 
ex¶ic™
 
Wh’DyÇmicCa¡ToM©ch”Ba£
(cÚ¡ 
M©ch”
<
To
>& 
m©ch”
)

1939 : 
m©ch”_
(
m©ch”
) {}

1941 
DesüibeTo
(::
¡d
::
o¡»am
* 
os
) const {

1942 
G‘Ca¡Ty³DesütiÚ
(
os
);

1943 
	gm©ch”_
.
DesüibeTo
(
os
);

1946 
DesüibeNeg©iÚTo
(::
¡d
::
o¡»am
* 
os
) const {

1947 
G‘Ca¡Ty³DesütiÚ
(
os
);

1948 
	gm©ch”_
.
DesüibeNeg©iÚTo
(
os
);

1951 
	g´Ùeùed
:

1952 cÚ¡ 
M©ch”
<
To
> 
m©ch”_
;

1954 
	g¡d
::
¡ršg
 
G‘ToName
() {

1955  
G‘Ty³Name
<
To
>();

1958 
	g´iv©e
:

1959 
G‘Ca¡Ty³DesütiÚ
(::
¡d
::
o¡»am
* 
os
) {

1960 *
os
 << "wh’ dyÇmic_ÿ¡Ø" << 
G‘ToName
() << ", ";

1966 
	g‹m¶©e
 <
ty³Çme
 
	gTo
>

1967 
şass
 
	gWh’DyÇmicCa¡ToM©ch”
 : 
public
 
Wh’DyÇmicCa¡ToM©ch”Ba£
<
To
> {

1968 
public
:

1969 
ex¶ic™
 
Wh’DyÇmicCa¡ToM©ch”
(cÚ¡ 
M©ch”
<
To
>& 
m©ch”
)

1970 : 
Wh’DyÇmicCa¡ToM©ch”Ba£
<
To
>(
m©ch”
) {}

1972 
‹m¶©e
 <
ty³Çme
 
From
>

1973 
boŞ
 
M©chAndEx¶aš
(
From
 
äom
, 
M©chResuÉLi¡’”
* 
li¡’”
) const {

1974 
To
 
	gto
 = 
dyÇmic_ÿ¡
<To>(
äom
);

1975  
M©chPrštAndEx¶aš
(
to
, 
this
->
m©ch”_
, 
li¡’”
);

1981 
	g‹m¶©e
 <
ty³Çme
 
	gTo
>

1982 
şass
 
	gWh’DyÇmicCa¡ToM©ch”
<
	gTo
&> : 
public
 
Wh’DyÇmicCa¡ToM©ch”Ba£
<
To
&> {

1983 
public
:

1984 
ex¶ic™
 
Wh’DyÇmicCa¡ToM©ch”
(cÚ¡ 
M©ch”
<
To
&>& 
m©ch”
)

1985 : 
Wh’DyÇmicCa¡ToM©ch”Ba£
<
To
&>(
m©ch”
) {}

1987 
‹m¶©e
 <
ty³Çme
 
From
>

1988 
boŞ
 
M©chAndEx¶aš
(
From
& 
äom
, 
M©chResuÉLi¡’”
* 
li¡’”
) const {

1990 
To
* 
	gto
 = 
dyÇmic_ÿ¡
<To*>(&
äom
);

1991 ià(
	gto
 =ğ
nuÎ±r
) {

1992 *
li¡’”
 << "which cªnÙ bdyÇmic_ÿ¡Ø" << 
this
->
G‘ToName
();

1993  
	gçl£
;

1995  
M©chPrštAndEx¶aš
(*
to
, 
this
->
m©ch”_
, 
li¡’”
);

2002 
	g‹m¶©e
 <
ty³Çme
 
	gCÏss
,y³Çm
	gF›ldTy³
>

2003 şas 
	cF›ldM©ch”
 {

2004 
	gpublic
:

2005 
F›ldM©ch”
(
F›ldTy³
 
CÏss
::*
f›ld
,

2006 cÚ¡ 
M©ch”
<cÚ¡ 
F›ldTy³
&>& 
m©ch”
)

2007 : 
f›ld_
(
f›ld
), 
m©ch”_
(
m©ch”
), 
who£_f›ld_
("whose given field ") {}

2009 
F›ldM©ch”
(cÚ¡ 
¡d
::
¡ršg
& 
f›ld_Çme
, 
F›ldTy³
 
CÏss
::*
f›ld
,

2010 cÚ¡ 
M©ch”
<cÚ¡ 
F›ldTy³
&>& 
m©ch”
)

2011 : 
f›ld_
(
f›ld
),

2012 
m©ch”_
(
m©ch”
),

2013 
who£_f›ld_
("who£ f›ld `" + 
f›ld_Çme
 + "` ") {}

2015 
DesüibeTo
(::
¡d
::
o¡»am
* 
os
) const {

2016 *
os
 << "i ª objeù " << 
who£_f›ld_
;

2017 
	gm©ch”_
.
DesüibeTo
(
os
);

2020 
DesüibeNeg©iÚTo
(::
¡d
::
o¡»am
* 
os
) const {

2021 *
os
 << "i ª objeù " << 
who£_f›ld_
;

2022 
	gm©ch”_
.
DesüibeNeg©iÚTo
(
os
);

2025 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

2026 
boŞ
 
M©chAndEx¶aš
(cÚ¡ 
T
& 
v®ue
, 
M©chResuÉLi¡’”
* 
li¡’”
) const {

2029  
M©chAndEx¶ašIm¶
(

2030 
ty³Çme
 
¡d
::
is_poš‹r
<ty³Çm¡d::
»move_cÚ¡
<
T
>::
ty³
>::type(),

2031 
v®ue
, 
li¡’”
);

2034 
	g´iv©e
:

2035 
boŞ
 
M©chAndEx¶ašIm¶
(
¡d
::
çl£_ty³
 ,

2036 cÚ¡ 
CÏss
& 
obj
,

2037 
M©chResuÉLi¡’”
* 
li¡’”
) const {

2038 *
	gli¡’”
 << 
	gwho£_f›ld_
 << "is ";

2039  
M©chPrštAndEx¶aš
(
obj
.*
f›ld_
, 
m©ch”_
, 
li¡’”
);

2042 
boŞ
 
M©chAndEx¶ašIm¶
(
¡d
::
Œue_ty³
 , cÚ¡ 
CÏss
* 
p
,

2043 
M©chResuÉLi¡’”
* 
li¡’”
) const {

2044 ià(
	gp
 =ğ
nuÎ±r
è 
çl£
;

2046 *
	gli¡’”
 << "which…ointso‡n object ";

2050  
M©chAndEx¶ašIm¶
(
¡d
::
çl£_ty³
(), *
p
, 
li¡’”
);

2053 cÚ¡ 
F›ldTy³
 
	gCÏss
::*
f›ld_
;

2054 cÚ¡ 
	gM©ch”
<cÚ¡ 
	gF›ldTy³
&> 
	gm©ch”_
;

2058 cÚ¡ 
	g¡d
::
¡ršg
 
who£_f›ld_
;

2066 
	g‹m¶©e
 <
ty³Çme
 
	gCÏss
,y³Çm
	gPrİ”tyTy³
,y³Çm
	gPrİ”ty
>

2067 şas 
	cPrİ”tyM©ch”
 {

2068 
	gpublic
:

2069 cÚ¡ 
	tPrİ”tyTy³
& 
	tRefToCÚ¡Prİ”ty
;

2071 
Prİ”tyM©ch”
(
Prİ”ty
 
´İ”ty
, cÚ¡ 
M©ch”
<
RefToCÚ¡Prİ”ty
>& 
m©ch”
)

2072 : 
´İ”ty_
(
´İ”ty
),

2073 
m©ch”_
(
m©ch”
),

2074 
who£_´İ”ty_
("whose given…roperty ") {}

2076 
Prİ”tyM©ch”
(cÚ¡ 
¡d
::
¡ršg
& 
´İ”ty_Çme
, 
Prİ”ty
 
´İ”ty
,

2077 cÚ¡ 
M©ch”
<
RefToCÚ¡Prİ”ty
>& 
m©ch”
)

2078 : 
´İ”ty_
(
´İ”ty
),

2079 
m©ch”_
(
m©ch”
),

2080 
who£_´İ”ty_
("who£…rİ”ty `" + 
´İ”ty_Çme
 + "` ") {}

2082 
DesüibeTo
(::
¡d
::
o¡»am
* 
os
) const {

2083 *
os
 << "i ª objeù " << 
who£_´İ”ty_
;

2084 
	gm©ch”_
.
DesüibeTo
(
os
);

2087 
DesüibeNeg©iÚTo
(::
¡d
::
o¡»am
* 
os
) const {

2088 *
os
 << "i ª objeù " << 
who£_´İ”ty_
;

2089 
	gm©ch”_
.
DesüibeNeg©iÚTo
(
os
);

2092 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

2093 
boŞ
 
M©chAndEx¶aš
(cÚ¡ 
T
&
v®ue
, 
M©chResuÉLi¡’”
* 
li¡’”
) const {

2094  
M©chAndEx¶ašIm¶
(

2095 
ty³Çme
 
¡d
::
is_poš‹r
<ty³Çm¡d::
»move_cÚ¡
<
T
>::
ty³
>::type(),

2096 
v®ue
, 
li¡’”
);

2099 
	g´iv©e
:

2100 
boŞ
 
M©chAndEx¶ašIm¶
(
¡d
::
çl£_ty³
 ,

2101 cÚ¡ 
CÏss
& 
obj
,

2102 
M©chResuÉLi¡’”
* 
li¡’”
) const {

2103 *
	gli¡’”
 << 
	gwho£_´İ”ty_
 << "is ";

2106 
RefToCÚ¡Prİ”ty
 
	g»suÉ
 = (
obj
.*
´İ”ty_
)();

2107  
M©chPrštAndEx¶aš
(
»suÉ
, 
m©ch”_
, 
li¡’”
);

2110 
boŞ
 
M©chAndEx¶ašIm¶
(
¡d
::
Œue_ty³
 , cÚ¡ 
CÏss
* 
p
,

2111 
M©chResuÉLi¡’”
* 
li¡’”
) const {

2112 ià(
	gp
 =ğ
nuÎ±r
è 
çl£
;

2114 *
	gli¡’”
 << "which…ointso‡n object ";

2118  
M©chAndEx¶ašIm¶
(
¡d
::
çl£_ty³
(), *
p
, 
li¡’”
);

2121 
Prİ”ty
 
	g´İ”ty_
;

2122 cÚ¡ 
	gM©ch”
<
	gRefToCÚ¡Prİ”ty
> 
	gm©ch”_
;

2126 cÚ¡ 
	g¡d
::
¡ršg
 
who£_´İ”ty_
;

2131 
	g‹m¶©e
 <
ty³Çme
 
	gFunùÜ
>

2132 
	sC®ÏbËT¿™s
 {

2133 
FunùÜ
 
	tStÜageTy³
;

2135 
CheckIsV®id
(
FunùÜ
 ) {}

2137 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

2138 autØ
Invoke
(
FunùÜ
 
f
, cÚ¡ 
T
& 
¬g
è-> 
deşty³
(f(arg)) {

2139  
f
(
¬g
);

2144 
	g‹m¶©e
 <
ty³Çme
 
	gArgTy³
,y³Çm
	gResTy³
>

2145 
	gC®ÏbËT¿™s
<
ResTy³
(*)(
	gArgTy³
)> {

2146 
ResTy³
 
	tResuÉTy³
;

2147 
ResTy³
(*
	tStÜageTy³
)(
	tArgTy³
);

2149 
CheckIsV®id
(
ResTy³
(*
f
)(
ArgTy³
)) {

2150 
GTEST_CHECK_
(
f
 !ğ
nuÎ±r
)

2153 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

2154 
ResTy³
 
Invoke
(ResTy³(*
f
)(
ArgTy³
), 
T
 
¬g
) {

2155  (*
	gf
)(
	g¬g
);

2161 
	g‹m¶©e
 <
ty³Çme
 
	gC®ÏbË
,y³Çm
	gIÂ”M©ch”
>

2162 şas 
	cResuÉOfM©ch”
 {

2163 
	gpublic
:

2164 
ResuÉOfM©ch”
(
C®ÏbË
 
ÿÎabË
, 
IÂ”M©ch”
 
m©ch”
)

2165 : 
ÿÎabË_
(
¡d
::
move
(
ÿÎabË
)), 
m©ch”_
(¡d::move(
m©ch”
)) {

2166 
C®ÏbËT¿™s
<
C®ÏbË
>::
CheckIsV®id
(
ÿÎabË_
);

2169 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

2170 
İ”©Ü
 
	gM©ch”
<
	gT
>() const {

2171  
	gM©ch”
<
	gT
>(
Ãw
 
	gIm¶
<cÚ¡ T&>(
	gÿÎabË_
, 
	gm©ch”_
));

2174 
	g´iv©e
:

2175 
ty³Çme
 
	tC®ÏbËT¿™s
<
	tC®ÏbË
>::
	tStÜageTy³
 
	tC®ÏbËStÜageTy³
;

2177 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

2178 
şass
 
	gIm¶
 : 
public
 
M©ch”IÁ”çû
<
T
> {

2179 
usšg
 
ResuÉTy³
 = 
deşty³
(
C®ÏbËT¿™s
<
C®ÏbË
>::
‹m¶©e
 
Invoke
<
T
>(

2180 
¡d
::
deşv®
<
C®ÏbËStÜageTy³
>(), std::deşv®<
T
>()));

2182 
	gpublic
:

2183 
‹m¶©e
 <
ty³Çme
 
M
>

2184 
Im¶
(cÚ¡ 
C®ÏbËStÜageTy³
& 
ÿÎabË
, cÚ¡ 
M
& 
m©ch”
)

2185 : 
ÿÎabË_
(
ÿÎabË
), 
m©ch”_
(
M©ch”Ca¡
<
ResuÉTy³
>(
m©ch”
)) {}

2187 
DesüibeTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

2188 *
os
 << "is mapped byhe given callableo‡ valuehat ";

2189 
	gm©ch”_
.
DesüibeTo
(
os
);

2192 
DesüibeNeg©iÚTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

2193 *
os
 << "is mapped byhe given callableo‡ valuehat ";

2194 
	gm©ch”_
.
DesüibeNeg©iÚTo
(
os
);

2197 
boŞ
 
M©chAndEx¶aš
(
T
 
obj
, 
M©chResuÉLi¡’”
* 
li¡’”
ècÚ¡ 
	gov”ride
 {

2198 *
	gli¡’”
 << "which is mapped byhe given callableo ";

2203 
ResuÉTy³
 
	g»suÉ
 =

2204 
C®ÏbËT¿™s
<
C®ÏbË
>::
‹m¶©e
 
Invoke
<
T
>(
ÿÎabË_
, 
	gobj
);

2205  
M©chPrštAndEx¶aš
(
»suÉ
, 
m©ch”_
, 
li¡’”
);

2208 
	g´iv©e
:

2214 
mubË
 
C®ÏbËStÜageTy³
 
ÿÎabË_
;

2215 cÚ¡ 
	gM©ch”
<
	gResuÉTy³
> 
	gm©ch”_
;

2218 cÚ¡ 
C®ÏbËStÜageTy³
 
	gÿÎabË_
;

2219 cÚ¡ 
IÂ”M©ch”
 
	gm©ch”_
;

2223 
	g‹m¶©e
 <
ty³Çme
 
	gSizeM©ch”
>

2224 şas 
	cSizeIsM©ch”
 {

2225 
	gpublic
:

2226 
ex¶ic™
 
SizeIsM©ch”
(cÚ¡ 
SizeM©ch”
& 
size_m©ch”
)

2227 : 
size_m©ch”_
(
size_m©ch”
) {

2230 
‹m¶©e
 <
ty³Çme
 
CÚš”
>

2231 
İ”©Ü
 
M©ch”
<
CÚš”
>() const {

2232  
M©ch”
<
CÚš”
>(
Ãw
 
Im¶
<cÚ¡ CÚš”&>(
size_m©ch”_
));

2235 
	g‹m¶©e
 <
ty³Çme
 
	gCÚš”
>

2236 
şass
 
	gIm¶
 : 
public
 
M©ch”IÁ”çû
<
CÚš”
> {

2237 
public
:

2238 
usšg
 
SizeTy³
 = 
deşty³
(
¡d
::
deşv®
<
CÚš”
>().
size
());

2239 
ex¶ic™
 
Im¶
(cÚ¡ 
SizeM©ch”
& 
size_m©ch”
)

2240 : 
size_m©ch”_
(
M©ch”Ca¡
<
SizeTy³
>(
size_m©ch”
)) {}

2242 
DesüibeTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

2243 *
os
 << "size ";

2244 
	gsize_m©ch”_
.
DesüibeTo
(
os
);

2246 
DesüibeNeg©iÚTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

2247 *
os
 << "size ";

2248 
	gsize_m©ch”_
.
DesüibeNeg©iÚTo
(
os
);

2251 
boŞ
 
M©chAndEx¶aš
(
CÚš”
 
cÚš”
,

2252 
M©chResuÉLi¡’”
* 
li¡’”
ècÚ¡ 
	gov”ride
 {

2253 
SizeTy³
 
	gsize
 = 
cÚš”
.
size
();

2254 
SŒšgM©chResuÉLi¡’”
 
	gsize_li¡’”
;

2255 cÚ¡ 
boŞ
 
	g»suÉ
 = 
size_m©ch”_
.
M©chAndEx¶aš
(
size
, &
size_li¡’”
);

2256 *
	gli¡’”


2257 << "who£ siz" << 
	gsize
 << (
	g»suÉ
 ? " matches" : " doesn't match");

2258 
PrštIfNÙEm±y
(
size_li¡’”
.
¡r
(), 
li¡’”
->
¡»am
());

2259  
	g»suÉ
;

2262 
	g´iv©e
:

2263 cÚ¡ 
M©ch”
<
SizeTy³
> 
size_m©ch”_
;

2266 
	g´iv©e
:

2267 cÚ¡ 
SizeM©ch”
 
size_m©ch”_
;

2272 
	g‹m¶©e
 <
ty³Çme
 
	gDi¡ªûM©ch”
>

2273 şas 
	cBegšEndDi¡ªûIsM©ch”
 {

2274 
	gpublic
:

2275 
ex¶ic™
 
BegšEndDi¡ªûIsM©ch”
(cÚ¡ 
Di¡ªûM©ch”
& 
di¡ªû_m©ch”
)

2276 : 
di¡ªû_m©ch”_
(
di¡ªû_m©ch”
) {}

2278 
‹m¶©e
 <
ty³Çme
 
CÚš”
>

2279 
İ”©Ü
 
M©ch”
<
CÚš”
>() const {

2280  
M©ch”
<
CÚš”
>(
Ãw
 
Im¶
<cÚ¡ CÚš”&>(
di¡ªû_m©ch”_
));

2283 
	g‹m¶©e
 <
ty³Çme
 
	gCÚš”
>

2284 
şass
 
	gIm¶
 : 
public
 
M©ch”IÁ”çû
<
CÚš”
> {

2285 
public
:

2286 
š‹º®
::
	tSCÚš”V›w
<

2287 
	tGTEST_REMOVE_REFERENCE_AND_CONST_
(
	tCÚš”
)> 
	tCÚš”V›w
;

2288 
ty³Çme
 
	t¡d
::
	t™”©Ü_Œa™s
<

2289 
	tty³Çme
 
	tCÚš”V›w
::
	tty³
::
	tcÚ¡_™”©Ü
>::
	tdifã»nû_ty³


2290 
	tDi¡ªûTy³
;

2291 
ex¶ic™
 
Im¶
(cÚ¡ 
Di¡ªûM©ch”
& 
di¡ªû_m©ch”
)

2292 : 
di¡ªû_m©ch”_
(
M©ch”Ca¡
<
Di¡ªûTy³
>(
di¡ªû_m©ch”
)) {}

2294 
DesüibeTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

2295 *
os
 << "distance between begin()‡ndƒnd() ";

2296 
	gdi¡ªû_m©ch”_
.
DesüibeTo
(
os
);

2298 
DesüibeNeg©iÚTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

2299 *
os
 << "distance between begin()‡ndƒnd() ";

2300 
	gdi¡ªû_m©ch”_
.
DesüibeNeg©iÚTo
(
os
);

2303 
boŞ
 
M©chAndEx¶aš
(
CÚš”
 
cÚš”
,

2304 
M©chResuÉLi¡’”
* 
li¡’”
ècÚ¡ 
	gov”ride
 {

2305 
usšg
 
	g¡d
::
begš
;

2306 
usšg
 
	g¡d
::
’d
;

2307 
Di¡ªûTy³
 
	gdi¡ªû
 = 
¡d
::
di¡ªû
(
begš
(
cÚš”
), 
’d
(container));

2308 
SŒšgM©chResuÉLi¡’”
 
	gdi¡ªû_li¡’”
;

2309 cÚ¡ 
boŞ
 
	g»suÉ
 =

2310 
di¡ªû_m©ch”_
.
M©chAndEx¶aš
(
di¡ªû
, &
di¡ªû_li¡’”
);

2311 *
	gli¡’”
 << "who£ di¡ªû b‘w“Àbegš(èªdƒnd(è" << 
	gdi¡ªû


2312 << (
	g»suÉ
 ? " matches" : " doesn't match");

2313 
PrštIfNÙEm±y
(
di¡ªû_li¡’”
.
¡r
(), 
li¡’”
->
¡»am
());

2314  
	g»suÉ
;

2317 
	g´iv©e
:

2318 cÚ¡ 
M©ch”
<
Di¡ªûTy³
> 
di¡ªû_m©ch”_
;

2321 
	g´iv©e
:

2322 cÚ¡ 
Di¡ªûM©ch”
 
di¡ªû_m©ch”_
;

2335 
	g‹m¶©e
 <
ty³Çme
 
	gCÚš”
>

2336 şas 
	cCÚš”EqM©ch”
 {

2337 
	gpublic
:

2338 
š‹º®
::
	tSCÚš”V›w
<
	tCÚš”
> 
	tV›w
;

2339 
ty³Çme
 
	tV›w
::
	tty³
 
	tSCÚš”
;

2340 
ty³Çme
 
	tV›w
::
	tcÚ¡_»ã»nû
 
	tSCÚš”Reã»nû
;

2342 
¡©ic_as£¹
(!
¡d
::
is_cÚ¡
<
CÚš”
>::
v®ue
,

2344 
¡©ic_as£¹
(!
¡d
::
is_»ã»nû
<
CÚš”
>::
v®ue
,

2349 
ex¶ic™
 
CÚš”EqM©ch”
(cÚ¡ 
CÚš”
& 
ex³ùed
)

2350 : 
ex³ùed_
(
V›w
::
Cİy
(
ex³ùed
)) {}

2352 
DesüibeTo
(::
¡d
::
o¡»am
* 
os
) const {

2353 *
os
 << "equals ";

2354 
Univ”§lPršt
(
ex³ùed_
, 
os
);

2356 
DesüibeNeg©iÚTo
(::
¡d
::
o¡»am
* 
os
) const {

2357 *
os
 << "does‚otƒqual ";

2358 
Univ”§lPršt
(
ex³ùed_
, 
os
);

2361 
	g‹m¶©e
 <
ty³Çme
 
	gLhsCÚš”
>

2362 
boŞ
 
M©chAndEx¶aš
(cÚ¡ 
LhsCÚš”
& 
lhs
,

2363 
M©chResuÉLi¡’”
* 
li¡’”
) const {

2364 
	gš‹º®
::
	tSCÚš”V›w
<

2365 
	tty³Çme
 
	t¡d
::
	t»move_cÚ¡
<
	tLhsCÚš”
>::
	tty³
>

2366 
	tLhsV›w
;

2367 
ty³Çme
 
	tLhsV›w
::
	tty³
 
	tLhsSCÚš”
;

2368 
SCÚš”Reã»nû
 
	glhs_¡l_cÚš”
 = 
LhsV›w
::
CÚ¡Reã»nû
(
lhs
);

2369 ià(
	glhs_¡l_cÚš”
 =ğ
ex³ùed_
)

2370  
Œue
;

2372 ::
¡d
::
o¡»am
* cÚ¡ 
os
 = 
li¡’”
->
¡»am
();

2373 ià(
	gos
 !ğ
nuÎ±r
) {

2375 
boŞ
 
´š‹d_h—d”
 = 
çl£
;

2376 
ty³Çme
 
	gLhsSCÚš”
::
cÚ¡_™”©Ü
 
™
 =

2377 
lhs_¡l_cÚš”
.
begš
();

2378 
	g™
 !ğ
lhs_¡l_cÚš”
.
’d
(); ++it) {

2379 ià(
	gš‹º®
::
A¼ayAw¬eFšd
(
ex³ùed_
.
begš
(),ƒx³ùed_.
’d
(), *
™
) ==

2380 
ex³ùed_
.
’d
()) {

2381 ià(
´š‹d_h—d”
) {

2382 *
os
 << ", ";

2384 *
	gos
 << "which hashese unexpectedƒlements: ";

2385 
	g´š‹d_h—d”
 = 
Œue
;

2387 
Univ”§lPršt
(*
™
, 
os
);

2392 
boŞ
 
	g´š‹d_h—d”2
 = 
çl£
;

2393 
ty³Çme
 
	gSCÚš”
::
cÚ¡_™”©Ü
 
™
 = 
ex³ùed_
.
begš
();

2394 
	g™
 !ğ
ex³ùed_
.
’d
(); ++it) {

2395 ià(
	gš‹º®
::
A¼ayAw¬eFšd
(

2396 
lhs_¡l_cÚš”
.
begš
(),†hs_¡l_cÚš”.
’d
(), *
™
) ==

2397 
lhs_¡l_cÚš”
.
’d
()) {

2398 ià(
´š‹d_h—d”2
) {

2399 *
os
 << ", ";

2401 *
	gos
 << (
	g´š‹d_h—d”
 ? ",\nand" : "which")

2403 
	g´š‹d_h—d”2
 = 
Œue
;

2405 
Univ”§lPršt
(*
™
, 
os
);

2410  
	gçl£
;

2413 
	g´iv©e
:

2414 cÚ¡ 
SCÚš”
 
ex³ùed_
;

2418 
	sLessCom·¿tÜ
 {

2419 
	g‹m¶©e
 <
ty³Çme
 
	gT
,y³Çm
	gU
>

2420 
boŞ
 
İ”©Ü
()(cÚ¡ 
	gT
& 
	glhs
, cÚ¡ 
	gU
& 
	grhs
) const { †hs <„hs; }

2424 
	g‹m¶©e
 <
ty³Çme
 
	gCom·¿tÜ
,y³Çm
	gCÚš”M©ch”
>

2425 şas 
	cWh’SÜ‹dByM©ch”
 {

2426 
	gpublic
:

2427 
Wh’SÜ‹dByM©ch”
(cÚ¡ 
Com·¿tÜ
& 
com·¿tÜ
,

2428 cÚ¡ 
CÚš”M©ch”
& 
m©ch”
)

2429 : 
com·¿tÜ_
(
com·¿tÜ
), 
m©ch”_
(
m©ch”
) {}

2431 
	g‹m¶©e
 <
ty³Çme
 
	gLhsCÚš”
>

2432 
İ”©Ü
 
	gM©ch”
<
	gLhsCÚš”
>() const {

2433  
MakeM©ch”
(
Ãw
 
Im¶
<
LhsCÚš”
>(
com·¿tÜ_
, 
m©ch”_
));

2436 
	g‹m¶©e
 <
ty³Çme
 
	gLhsCÚš”
>

2437 
şass
 
	gIm¶
 : 
public
 
M©ch”IÁ”çû
<
LhsCÚš”
> {

2438 
public
:

2439 
š‹º®
::
	tSCÚš”V›w
<

2440 
	tGTEST_REMOVE_REFERENCE_AND_CONST_
(
	tLhsCÚš”
)> 
	tLhsV›w
;

2441 
ty³Çme
 
	tLhsV›w
::
	tty³
 
	tLhsSCÚš”
;

2442 
ty³Çme
 
	tLhsV›w
::
	tcÚ¡_»ã»nû
 
	tLhsSCÚš”Reã»nû
;

2445 
ty³Çme
 
	tRemoveCÚ¡FromKey
<

2446 
	tty³Çme
 
	tLhsSCÚš”
::
	tv®ue_ty³
>::
	tty³
 
	tLhsV®ue
;

2448 
Im¶
(cÚ¡ 
Com·¿tÜ
& 
com·¿tÜ
, cÚ¡ 
CÚš”M©ch”
& 
m©ch”
)

2449 : 
com·¿tÜ_
(
com·¿tÜ
), 
m©ch”_
(
m©ch”
) {}

2451 
DesüibeTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

2452 *
os
 << "(when sorted) ";

2453 
	gm©ch”_
.
DesüibeTo
(
os
);

2456 
DesüibeNeg©iÚTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

2457 *
os
 << "(when sorted) ";

2458 
	gm©ch”_
.
DesüibeNeg©iÚTo
(
os
);

2461 
boŞ
 
M©chAndEx¶aš
(
LhsCÚš”
 
lhs
,

2462 
M©chResuÉLi¡’”
* 
li¡’”
ècÚ¡ 
	gov”ride
 {

2463 
LhsSCÚš”Reã»nû
 
	glhs_¡l_cÚš”
 = 
LhsV›w
::
CÚ¡Reã»nû
(
lhs
);

2464 ::
¡d
::
veùÜ
<
LhsV®ue
> 
sÜ‹d_cÚš”
(
lhs_¡l_cÚš”
.
begš
(),

2465 
lhs_¡l_cÚš”
.
’d
());

2466 ::
¡d
::
sÜt
(

2467 
sÜ‹d_cÚš”
.
begš
(), sÜ‹d_cÚš”.
’d
(), 
com·¿tÜ_
);

2469 ià(!
	gli¡’”
->
IsIÁ”e¡ed
()) {

2472  
	gm©ch”_
.
M©ches
(
sÜ‹d_cÚš”
);

2475 *
	gli¡’”
 << "which is ";

2476 
Univ”§lPršt
(
sÜ‹d_cÚš”
, 
li¡’”
->
¡»am
());

2477 *
	gli¡’”
 << " when sorted";

2479 
SŒšgM©chResuÉLi¡’”
 
	gšÃr_li¡’”
;

2480 cÚ¡ 
boŞ
 
	gm©ch
 = 
m©ch”_
.
M©chAndEx¶aš
(
sÜ‹d_cÚš”
,

2481 &
šÃr_li¡’”
);

2482 
PrštIfNÙEm±y
(
šÃr_li¡’”
.
¡r
(), 
li¡’”
->
¡»am
());

2483  
	gm©ch
;

2486 
	g´iv©e
:

2487 cÚ¡ 
Com·¿tÜ
 
com·¿tÜ_
;

2488 cÚ¡ 
	gM©ch”
<cÚ¡ ::
¡d
::
veùÜ
<
LhsV®ue
>&> 
m©ch”_
;

2490 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
Im¶
);

2493 
	g´iv©e
:

2494 cÚ¡ 
Com·¿tÜ
 
com·¿tÜ_
;

2495 cÚ¡ 
CÚš”M©ch”
 
	gm©ch”_
;

2502 
	g‹m¶©e
 <
ty³Çme
 
	gTu¶eM©ch”
,y³Çm
	gRhsCÚš”
>

2503 şas 
	cPoštwi£M©ch”
 {

2504 
GTEST_COMPILE_ASSERT_
(

2505 !
IsHashTabË
<
GTEST_REMOVE_REFERENCE_AND_CONST_
(
RhsCÚš”
)>::
v®ue
,

2506 
u£_UnÜd”edPoštwi£_w™h_hash_bËs
);

2508 
	gpublic
:

2509 
š‹º®
::
	tSCÚš”V›w
<
	tRhsCÚš”
> 
	tRhsV›w
;

2510 
ty³Çme
 
	tRhsV›w
::
	tty³
 
	tRhsSCÚš”
;

2511 
ty³Çme
 
	tRhsSCÚš”
::
	tv®ue_ty³
 
	tRhsV®ue
;

2513 
¡©ic_as£¹
(!
¡d
::
is_cÚ¡
<
RhsCÚš”
>::
v®ue
,

2515 
¡©ic_as£¹
(!
¡d
::
is_»ã»nû
<
RhsCÚš”
>::
v®ue
,

2520 
Poštwi£M©ch”
(cÚ¡ 
Tu¶eM©ch”
& 
tu¶e_m©ch”
, cÚ¡ 
RhsCÚš”
& 
rhs
)

2521 : 
tu¶e_m©ch”_
(
tu¶e_m©ch”
), 
rhs_
(
RhsV›w
::
Cİy
(
rhs
)) {}

2523 
‹m¶©e
 <
ty³Çme
 
LhsCÚš”
>

2524 
İ”©Ü
 
M©ch”
<
LhsCÚš”
>() const {

2525 
GTEST_COMPILE_ASSERT_
(

2526 !
IsHashTabË
<
GTEST_REMOVE_REFERENCE_AND_CONST_
(
LhsCÚš”
)>::
v®ue
,

2527 
u£_UnÜd”edPoštwi£_w™h_hash_bËs
);

2529  
	gM©ch”
<
	gLhsCÚš”
>(

2530 
Ãw
 
	gIm¶
<cÚ¡ 
	gLhsCÚš”
&>(
	gtu¶e_m©ch”_
, 
	grhs_
));

2533 
	g‹m¶©e
 <
ty³Çme
 
	gLhsCÚš”
>

2534 
şass
 
	gIm¶
 : 
public
 
M©ch”IÁ”çû
<
LhsCÚš”
> {

2535 
public
:

2536 
š‹º®
::
	tSCÚš”V›w
<

2537 
	tGTEST_REMOVE_REFERENCE_AND_CONST_
(
	tLhsCÚš”
)> 
	tLhsV›w
;

2538 
ty³Çme
 
	tLhsV›w
::
	tty³
 
	tLhsSCÚš”
;

2539 
ty³Çme
 
	tLhsV›w
::
	tcÚ¡_»ã»nû
 
	tLhsSCÚš”Reã»nû
;

2540 
ty³Çme
 
	tLhsSCÚš”
::
	tv®ue_ty³
 
	tLhsV®ue
;

2545 ::
¡d
::
	ttu¶e
<cÚ¡ 
	tLhsV®ue
&, cÚ¡ 
	tRhsV®ue
&> 
	tIÂ”M©ch”Arg
;

2547 
Im¶
(cÚ¡ 
Tu¶eM©ch”
& 
tu¶e_m©ch”
, cÚ¡ 
RhsSCÚš”
& 
rhs
)

2549 : 
mÚo_tu¶e_m©ch”_
(
SaãM©ch”Ca¡
<
IÂ”M©ch”Arg
>(
tu¶e_m©ch”
)),

2550 
rhs_
(
rhs
) {}

2552 
DesüibeTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

2553 *
os
 << "cÚš " << 
rhs_
.
size
()

2555 
	gUniv”§lPrš‹r
<
	gRhsSCÚš”
>::
Pršt
(
rhs_
, 
os
);

2556 *
	gos
 << " ";

2557 
	gmÚo_tu¶e_m©ch”_
.
DesüibeTo
(
os
);

2559 
DesüibeNeg©iÚTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

2560 *
os
 << "dÛ¢'ˆcÚšƒxaùly " << 
rhs_
.
size
()

2563 
Univ”§lPršt
(
rhs_
, 
os
);

2564 *
	gos
 << " ";

2565 
	gmÚo_tu¶e_m©ch”_
.
DesüibeNeg©iÚTo
(
os
);

2568 
boŞ
 
M©chAndEx¶aš
(
LhsCÚš”
 
lhs
,

2569 
M©chResuÉLi¡’”
* 
li¡’”
ècÚ¡ 
	gov”ride
 {

2570 
LhsSCÚš”Reã»nû
 
	glhs_¡l_cÚš”
 = 
LhsV›w
::
CÚ¡Reã»nû
(
lhs
);

2571 cÚ¡ 
size_t
 
	gaùu®_size
 = 
lhs_¡l_cÚš”
.
size
();

2572 ià(
	gaùu®_size
 !ğ
rhs_
.
size
()) {

2573 *
li¡’”
 << "which cÚš " << 
aùu®_size
 << " values";

2574  
	gçl£
;

2577 
ty³Çme
 
	gLhsSCÚš”
::
cÚ¡_™”©Ü
 
Ëá
 = 
lhs_¡l_cÚš”
.
begš
();

2578 
ty³Çme
 
	gRhsSCÚš”
::
cÚ¡_™”©Ü
 
right
 = 
rhs_
.
begš
();

2579 
size_t
 
	gi
 = 0; i !ğ
aùu®_size
; ++i, ++
	gËá
, ++
	gright
) {

2580 ià(
	gli¡’”
->
IsIÁ”e¡ed
()) {

2581 
SŒšgM©chResuÉLi¡’”
 
	gšÃr_li¡’”
;

2585 ià(!
	gmÚo_tu¶e_m©ch”_
.
M©chAndEx¶aš
(

2586 
IÂ”M©ch”Arg
(
Im¶ic™Ca¡_
<cÚ¡ 
LhsV®ue
&>(*
Ëá
),

2587 
Im¶ic™Ca¡_
<cÚ¡ 
RhsV®ue
&>(*
right
)),

2588 &
šÃr_li¡’”
)) {

2589 *
	gli¡’”
 << "wherehe value…air (";

2590 
Univ”§lPršt
(*
Ëá
, 
li¡’”
->
¡»am
());

2591 *
	gli¡’”
 << ", ";

2592 
Univ”§lPršt
(*
right
, 
li¡’”
->
¡»am
());

2593 *
	gli¡’”
 << "è© index #" << 
	gi
 << " don't match";

2594 
PrštIfNÙEm±y
(
šÃr_li¡’”
.
¡r
(), 
li¡’”
->
¡»am
());

2595  
	gçl£
;

2598 ià(!
	gmÚo_tu¶e_m©ch”_
.
M©ches
(

2599 
IÂ”M©ch”Arg
(
Im¶ic™Ca¡_
<cÚ¡ 
LhsV®ue
&>(*
Ëá
),

2600 
Im¶ic™Ca¡_
<cÚ¡ 
RhsV®ue
&>(*
right
))))

2601  
	gçl£
;

2605  
	gŒue
;

2608 
	g´iv©e
:

2609 cÚ¡ 
M©ch”
<
IÂ”M©ch”Arg
> 
mÚo_tu¶e_m©ch”_
;

2610 cÚ¡ 
RhsSCÚš”
 
	grhs_
;

2613 
	g´iv©e
:

2614 cÚ¡ 
Tu¶eM©ch”
 
tu¶e_m©ch”_
;

2615 cÚ¡ 
RhsSCÚš”
 
	grhs_
;

2619 
	g‹m¶©e
 <
ty³Çme
 
	gCÚš”
>

2620 
şass
 
	gQuªtif›rM©ch”Im¶
 : 
public
 
M©ch”IÁ”çû
<
CÚš”
> {

2621 
public
:

2622 
GTEST_REMOVE_REFERENCE_AND_CONST_
(
	tCÚš”
è
	tRawCÚš”
;

2623 
	gSCÚš”V›w
<
	tRawCÚš”
> 
	tV›w
;

2624 
ty³Çme
 
	tV›w
::
	tty³
 
	tSCÚš”
;

2625 
ty³Çme
 
	tV›w
::
	tcÚ¡_»ã»nû
 
	tSCÚš”Reã»nû
;

2626 
ty³Çme
 
	tSCÚš”
::
	tv®ue_ty³
 
	tEËm’t
;

2628 
	g‹m¶©e
 <
ty³Çme
 
	gIÂ”M©ch”
>

2629 
ex¶ic™
 
Quªtif›rM©ch”Im¶
(
IÂ”M©ch”
 
šÃr_m©ch”
)

2630 : 
šÃr_m©ch”_
(

2631 
‹¡šg
::
SaãM©ch”Ca¡
<cÚ¡ 
EËm’t
&>(
šÃr_m©ch”
)) {}

2636 
boŞ
 
M©chAndEx¶ašIm¶
(boŞ 
®l_–em’ts_should_m©ch
,

2637 
CÚš”
 
cÚš”
,

2638 
M©chResuÉLi¡’”
* 
li¡’”
) const {

2639 
SCÚš”Reã»nû
 
	g¡l_cÚš”
 = 
V›w
::
CÚ¡Reã»nû
(
cÚš”
);

2640 
size_t
 
	gi
 = 0;

2641 
ty³Çme
 
	gSCÚš”
::
cÚ¡_™”©Ü
 
™
 = 
¡l_cÚš”
.
begš
();

2642 
	g™
 !ğ
¡l_cÚš”
.
’d
(); ++™, ++
	gi
) {

2643 
SŒšgM©chResuÉLi¡’”
 
	gšÃr_li¡’”
;

2644 cÚ¡ 
boŞ
 
	gm©ches
 = 
šÃr_m©ch”_
.
M©chAndEx¶aš
(*
™
, &
šÃr_li¡’”
);

2646 ià(
	gm©ches
 !ğ
®l_–em’ts_should_m©ch
) {

2647 *
li¡’”
 << "who£ƒËm’ˆ#" << 
i


2648 << (
m©ches
 ? " matches" : " doesn't match");

2649 
PrštIfNÙEm±y
(
šÃr_li¡’”
.
¡r
(), 
li¡’”
->
¡»am
());

2650  !
	g®l_–em’ts_should_m©ch
;

2653  
	g®l_–em’ts_should_m©ch
;

2656 
	g´Ùeùed
:

2657 cÚ¡ 
M©ch”
<cÚ¡ 
EËm’t
&> 
šÃr_m©ch”_
;

2662 
	g‹m¶©e
 <
ty³Çme
 
	gCÚš”
>

2663 
şass
 
	gCÚšsM©ch”Im¶
 : 
public
 
Quªtif›rM©ch”Im¶
<
CÚš”
> {

2664 
public
:

2665 
‹m¶©e
 <
ty³Çme
 
IÂ”M©ch”
>

2666 
ex¶ic™
 
CÚšsM©ch”Im¶
(
IÂ”M©ch”
 
šÃr_m©ch”
)

2667 : 
Quªtif›rM©ch”Im¶
<
CÚš”
>(
šÃr_m©ch”
) {}

2670 
DesüibeTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

2671 *
os
 << "contains‡t†east oneƒlementhat ";

2672 
	gthis
->
	gšÃr_m©ch”_
.
DesüibeTo
(
os
);

2675 
DesüibeNeg©iÚTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

2676 *
os
 << "doesn't contain‡nyƒlementhat ";

2677 
	gthis
->
	gšÃr_m©ch”_
.
DesüibeTo
(
os
);

2680 
boŞ
 
M©chAndEx¶aš
(
CÚš”
 
cÚš”
,

2681 
M©chResuÉLi¡’”
* 
li¡’”
ècÚ¡ 
	gov”ride
 {

2682  
	gthis
->
M©chAndEx¶ašIm¶
(
çl£
, 
cÚš”
, 
li¡’”
);

2688 
	g‹m¶©e
 <
ty³Çme
 
	gCÚš”
>

2689 
şass
 
	gEachM©ch”Im¶
 : 
public
 
Quªtif›rM©ch”Im¶
<
CÚš”
> {

2690 
public
:

2691 
‹m¶©e
 <
ty³Çme
 
IÂ”M©ch”
>

2692 
ex¶ic™
 
EachM©ch”Im¶
(
IÂ”M©ch”
 
šÃr_m©ch”
)

2693 : 
Quªtif›rM©ch”Im¶
<
CÚš”
>(
šÃr_m©ch”
) {}

2696 
DesüibeTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

2697 *
os
 << "only containsƒlementshat ";

2698 
	gthis
->
	gšÃr_m©ch”_
.
DesüibeTo
(
os
);

2701 
DesüibeNeg©iÚTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

2702 *
os
 << "contains someƒlementhat ";

2703 
	gthis
->
	gšÃr_m©ch”_
.
DesüibeNeg©iÚTo
(
os
);

2706 
boŞ
 
M©chAndEx¶aš
(
CÚš”
 
cÚš”
,

2707 
M©chResuÉLi¡’”
* 
li¡’”
ècÚ¡ 
	gov”ride
 {

2708  
	gthis
->
M©chAndEx¶ašIm¶
(
Œue
, 
cÚš”
, 
li¡’”
);

2713 
	g‹m¶©e
 <
ty³Çme
 
	gM
>

2714 şas 
	cCÚšsM©ch”
 {

2715 
	gpublic
:

2716 
ex¶ic™
 
CÚšsM©ch”
(
M
 
m
è: 
šÃr_m©ch”_
(m) {}

2718 
‹m¶©e
 <
ty³Çme
 
CÚš”
>

2719 
İ”©Ü
 
M©ch”
<
CÚš”
>() const {

2720  
M©ch”
<
CÚš”
>(

2721 
Ãw
 
CÚšsM©ch”Im¶
<cÚ¡ 
CÚš”
&>(
šÃr_m©ch”_
));

2724 
	g´iv©e
:

2725 cÚ¡ 
M
 
šÃr_m©ch”_
;

2729 
	g‹m¶©e
 <
ty³Çme
 
	gM
>

2730 şas 
	cEachM©ch”
 {

2731 
	gpublic
:

2732 
ex¶ic™
 
EachM©ch”
(
M
 
m
è: 
šÃr_m©ch”_
(m) {}

2734 
‹m¶©e
 <
ty³Çme
 
CÚš”
>

2735 
İ”©Ü
 
M©ch”
<
CÚš”
>() const {

2736  
M©ch”
<
CÚš”
>(

2737 
Ãw
 
EachM©ch”Im¶
<cÚ¡ 
CÚš”
&>(
šÃr_m©ch”_
));

2740 
	g´iv©e
:

2741 cÚ¡ 
M
 
šÃr_m©ch”_
;

2744 
	sRªk1
 {};

2745 
	gRªk0
 : 
Rªk1
 {};

2747 
Çme¥aû
 
	g·œ_g‘‹rs
 {

2748 
usšg
 
	g¡d
::
g‘
;

2749 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

2750 autØ
Fœ¡
(
T
& 
x
, 
Rªk1
è-> 
deşty³
(
g‘
<0>(x)) {

2751  
	gg‘
<0>(
	gx
);

2753 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

2754 autØ
Fœ¡
(
T
& 
x
, 
Rªk0
è-> 
deşty³
((x.
fœ¡
)) {

2755  
	gx
.
	gfœ¡
;

2758 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

2759 autØ
SecÚd
(
T
& 
x
, 
Rªk1
è-> 
deşty³
(
g‘
<1>(x)) {

2760  
	gg‘
<1>(
	gx
);

2762 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

2763 autØ
SecÚd
(
T
& 
x
, 
Rªk0
è-> 
deşty³
((x.
£cÚd
)) {

2764  
	gx
.
	g£cÚd
;

2772 
	g‹m¶©e
 <
ty³Çme
 
	gPaœTy³
>

2773 
şass
 
	gKeyM©ch”Im¶
 : 
public
 
M©ch”IÁ”çû
<
PaœTy³
> {

2774 
public
:

2775 
GTEST_REMOVE_REFERENCE_AND_CONST_
(
	tPaœTy³
è
	tRawPaœTy³
;

2776 
ty³Çme
 
	tRawPaœTy³
::
	tfœ¡_ty³
 
	tKeyTy³
;

2778 
	g‹m¶©e
 <
ty³Çme
 
	gIÂ”M©ch”
>

2779 
ex¶ic™
 
KeyM©ch”Im¶
(
IÂ”M©ch”
 
šÃr_m©ch”
)

2780 : 
šÃr_m©ch”_
(

2781 
‹¡šg
::
SaãM©ch”Ca¡
<cÚ¡ 
KeyTy³
&>(
šÃr_m©ch”
)) {

2786 
boŞ
 
M©chAndEx¶aš
(
PaœTy³
 
key_v®ue
,

2787 
M©chResuÉLi¡’”
* 
li¡’”
ècÚ¡ 
	gov”ride
 {

2788 
SŒšgM©chResuÉLi¡’”
 
	gšÃr_li¡’”
;

2789 cÚ¡ 
boŞ
 
	gm©ch
 = 
šÃr_m©ch”_
.
M©chAndEx¶aš
(

2790 
·œ_g‘‹rs
::
Fœ¡
(
key_v®ue
, 
Rªk0
()), &
šÃr_li¡’”
);

2791 cÚ¡ 
	g¡d
::
¡ršg
 
ex¶ª©iÚ
 = 
šÃr_li¡’”
.
¡r
();

2792 ià(
	gex¶ª©iÚ
 != "") {

2793 *
li¡’”
 << "who£ fœ¡ f›ld i ¨v®u" << 
ex¶ª©iÚ
;

2795  
	gm©ch
;

2799 
DesüibeTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

2800 *
os
 << "has‡ keyhat ";

2801 
	gšÃr_m©ch”_
.
DesüibeTo
(
os
);

2805 
DesüibeNeg©iÚTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

2806 *
os
 << "doesn't have‡ keyhat ";

2807 
	gšÃr_m©ch”_
.
DesüibeTo
(
os
);

2810 
	g´iv©e
:

2811 cÚ¡ 
M©ch”
<cÚ¡ 
KeyTy³
&> 
šÃr_m©ch”_
;

2815 
	g‹m¶©e
 <
ty³Çme
 
	gM
>

2816 şas 
	cKeyM©ch”
 {

2817 
	gpublic
:

2818 
ex¶ic™
 
KeyM©ch”
(
M
 
m
è: 
m©ch”_fÜ_key_
(m) {}

2820 
‹m¶©e
 <
ty³Çme
 
PaœTy³
>

2821 
İ”©Ü
 
M©ch”
<
PaœTy³
>() const {

2822  
M©ch”
<
PaœTy³
>(

2823 
Ãw
 
KeyM©ch”Im¶
<cÚ¡ 
PaœTy³
&>(
m©ch”_fÜ_key_
));

2826 
	g´iv©e
:

2827 cÚ¡ 
M
 
m©ch”_fÜ_key_
;

2831 
	g‹m¶©e
 <
ty³Çme
 
	gIÂ”M©ch”
>

2832 şas 
	cAdd»ssM©ch”
 {

2833 
	gpublic
:

2834 
ex¶ic™
 
Add»ssM©ch”
(
IÂ”M©ch”
 
m
è: 
m©ch”_
(m) {}

2836 
‹m¶©e
 <
ty³Çme
 
Ty³
>

2837 
İ”©Ü
 
M©ch”
<
Ty³
>() const {

2838  
M©ch”
<
Ty³
>(
Ãw
 
Im¶
<cÚ¡ Ty³&>(
m©ch”_
));

2841 
	g´iv©e
:

2843 
‹m¶©e
 <
ty³Çme
 
Ty³
>

2844 
şass
 
Im¶
 : 
public
 
M©ch”IÁ”çû
<
Ty³
> {

2845 
public
:

2846 
usšg
 
Add»ss
 = cÚ¡ 
GTEST_REMOVE_REFERENCE_AND_CONST_
(
Ty³
) *;

2847 
ex¶ic™
 
Im¶
(cÚ¡ 
IÂ”M©ch”
& 
m©ch”
)

2848 : 
m©ch”_
(
M©ch”Ca¡
<
Add»ss
>(
m©ch”
)) {}

2850 
DesüibeTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

2851 *
os
 << "has‡ddresshat ";

2852 
	gm©ch”_
.
DesüibeTo
(
os
);

2855 
DesüibeNeg©iÚTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

2856 *
os
 << "does‚ot have‡ddresshat ";

2857 
	gm©ch”_
.
DesüibeTo
(
os
);

2860 
boŞ
 
M©chAndEx¶aš
(
Ty³
 
objeù
,

2861 
M©chResuÉLi¡’”
* 
li¡’”
ècÚ¡ 
	gov”ride
 {

2862 *
	gli¡’”
 << "which has‡ddress ";

2863 
Add»ss
 
	gadd»ss
 = 
¡d
::
add»ssof
(
objeù
);

2864  
M©chPrštAndEx¶aš
(
add»ss
, 
m©ch”_
, 
li¡’”
);

2867 
	g´iv©e
:

2868 cÚ¡ 
M©ch”
<
Add»ss
> 
m©ch”_
;

2870 cÚ¡ 
IÂ”M©ch”
 
	gm©ch”_
;

2875 
	g‹m¶©e
 <
ty³Çme
 
	gPaœTy³
>

2876 
şass
 
	gPaœM©ch”Im¶
 : 
public
 
M©ch”IÁ”çû
<
PaœTy³
> {

2877 
public
:

2878 
GTEST_REMOVE_REFERENCE_AND_CONST_
(
	tPaœTy³
è
	tRawPaœTy³
;

2879 
ty³Çme
 
	tRawPaœTy³
::
	tfœ¡_ty³
 
	tFœ¡Ty³
;

2880 
ty³Çme
 
	tRawPaœTy³
::
	t£cÚd_ty³
 
	tSecÚdTy³
;

2882 
	g‹m¶©e
 <
ty³Çme
 
	gFœ¡M©ch”
,y³Çm
	gSecÚdM©ch”
>

2883 
PaœM©ch”Im¶
(
Fœ¡M©ch”
 
fœ¡_m©ch”
, 
SecÚdM©ch”
 
£cÚd_m©ch”
)

2884 : 
fœ¡_m©ch”_
(

2885 
‹¡šg
::
SaãM©ch”Ca¡
<cÚ¡ 
Fœ¡Ty³
&>(
fœ¡_m©ch”
)),

2886 
£cÚd_m©ch”_
(

2887 
‹¡šg
::
SaãM©ch”Ca¡
<cÚ¡ 
SecÚdTy³
&>(
£cÚd_m©ch”
)) {

2891 
DesüibeTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

2892 *
os
 << "has‡ first fieldhat ";

2893 
	gfœ¡_m©ch”_
.
DesüibeTo
(
os
);

2894 *
	gos
 << ",‡nd has‡ second fieldhat ";

2895 
	g£cÚd_m©ch”_
.
DesüibeTo
(
os
);

2899 
DesüibeNeg©iÚTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

2900 *
os
 << "has‡ first fieldhat ";

2901 
	gfœ¡_m©ch”_
.
DesüibeNeg©iÚTo
(
os
);

2902 *
	gos
 << ", or has‡ second fieldhat ";

2903 
	g£cÚd_m©ch”_
.
DesüibeNeg©iÚTo
(
os
);

2908 
boŞ
 
M©chAndEx¶aš
(
PaœTy³
 
a_·œ
,

2909 
M©chResuÉLi¡’”
* 
li¡’”
ècÚ¡ 
	gov”ride
 {

2910 ià(!
	gli¡’”
->
IsIÁ”e¡ed
()) {

2913  
	gfœ¡_m©ch”_
.
M©ches
(
·œ_g‘‹rs
::
Fœ¡
(
a_·œ
, 
Rªk0
())) &&

2914 
	g£cÚd_m©ch”_
.
M©ches
(
·œ_g‘‹rs
::
SecÚd
(
a_·œ
, 
Rªk0
()));

2916 
SŒšgM©chResuÉLi¡’”
 
	gfœ¡_šÃr_li¡’”
;

2917 ià(!
	gfœ¡_m©ch”_
.
M©chAndEx¶aš
(
·œ_g‘‹rs
::
Fœ¡
(
a_·œ
, 
Rªk0
()),

2918 &
fœ¡_šÃr_li¡’”
)) {

2919 *
	gli¡’”
 << "whose first field does‚ot match";

2920 
PrštIfNÙEm±y
(
fœ¡_šÃr_li¡’”
.
¡r
(), 
li¡’”
->
¡»am
());

2921  
	gçl£
;

2923 
SŒšgM©chResuÉLi¡’”
 
	g£cÚd_šÃr_li¡’”
;

2924 ià(!
	g£cÚd_m©ch”_
.
M©chAndEx¶aš
(
·œ_g‘‹rs
::
SecÚd
(
a_·œ
, 
Rªk0
()),

2925 &
£cÚd_šÃr_li¡’”
)) {

2926 *
	gli¡’”
 << "whose second field does‚ot match";

2927 
PrštIfNÙEm±y
(
£cÚd_šÃr_li¡’”
.
¡r
(), 
li¡’”
->
¡»am
());

2928  
	gçl£
;

2930 
Ex¶ašSucûss
(
fœ¡_šÃr_li¡’”
.
¡r
(), 
£cÚd_šÃr_li¡’”
.str(),

2931 
li¡’”
);

2932  
	gŒue
;

2935 
	g´iv©e
:

2936 
Ex¶ašSucûss
(cÚ¡ 
¡d
::
¡ršg
& 
fœ¡_ex¶ª©iÚ
,

2937 cÚ¡ 
¡d
::
¡ršg
& 
£cÚd_ex¶ª©iÚ
,

2938 
M©chResuÉLi¡’”
* 
li¡’”
) const {

2939 *
	gli¡’”
 << "whose both fields match";

2940 ià(
	gfœ¡_ex¶ª©iÚ
 != "") {

2941 *
li¡’”
 << ", wh”thfœ¡ f›ld i ¨v®u" << 
fœ¡_ex¶ª©iÚ
;

2943 ià(
	g£cÚd_ex¶ª©iÚ
 != "") {

2944 *
li¡’”
 << ", ";

2945 ià(
	gfœ¡_ex¶ª©iÚ
 != "") {

2946 *
li¡’”
 << "and ";

2948 *
	gli¡’”
 << "where ";

2950 *
	gli¡’”
 << "th£cÚd f›ld i ¨v®u" << 
	g£cÚd_ex¶ª©iÚ
;

2954 cÚ¡ 
	gM©ch”
<cÚ¡ 
	gFœ¡Ty³
&> 
	gfœ¡_m©ch”_
;

2955 cÚ¡ 
	gM©ch”
<cÚ¡ 
	gSecÚdTy³
&> 
	g£cÚd_m©ch”_
;

2959 
	g‹m¶©e
 <
ty³Çme
 
	gFœ¡M©ch”
,y³Çm
	gSecÚdM©ch”
>

2960 şas 
	cPaœM©ch”
 {

2961 
	gpublic
:

2962 
PaœM©ch”
(
Fœ¡M©ch”
 
fœ¡_m©ch”
, 
SecÚdM©ch”
 
£cÚd_m©ch”
)

2963 : 
fœ¡_m©ch”_
(
fœ¡_m©ch”
), 
£cÚd_m©ch”_
(
£cÚd_m©ch”
) {}

2965 
	g‹m¶©e
 <
ty³Çme
 
	gPaœTy³
>

2966 
İ”©Ü
 
	gM©ch”
<
	gPaœTy³
> () const {

2967  
	gM©ch”
<
	gPaœTy³
>(

2968 
Ãw
 
	gPaœM©ch”Im¶
<cÚ¡ 
	gPaœTy³
&>(
	gfœ¡_m©ch”_
, 
	g£cÚd_m©ch”_
));

2971 
	g´iv©e
:

2972 cÚ¡ 
Fœ¡M©ch”
 
fœ¡_m©ch”_
;

2973 cÚ¡ 
SecÚdM©ch”
 
	g£cÚd_m©ch”_
;

2976 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
	gsize_t
... 
	gI
>

2977 autØ
UÅackSŒuùIm¶
(cÚ¡ 
T
& 
t
, 
IndexSequ’û
<
I
...>, )

2978 -> 
deşty³
(
¡d
::
t›
(
g‘
<
I
>(
t
)...)) {

2979 
¡©ic_as£¹
(
¡d
::
tu¶e_size
<
T
>::
v®ue
 =ğ...(
I
),

2981  
	g¡d
::
t›
(
g‘
<
I
>(
t
)...);

2984 #ià
defšed
(
__ıp_¡ruùu»d_bšdšgs
) && __cpp_structured_bindings >= 201606

2985 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

2986 autØ
UÅackSŒuùIm¶
(cÚ¡ 
T
& 
t
, 
MakeIndexSequ’û
<1>, ) {

2987 cÚ¡‡uto& [
a
] = 
t
;

2988  
	g¡d
::
t›
(
a
);

2990 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

2991 autØ
UÅackSŒuùIm¶
(cÚ¡ 
T
& 
t
, 
MakeIndexSequ’û
<2>, ) {

2992 cÚ¡‡uto& [
a
, 
b
] = 
t
;

2993  
	g¡d
::
t›
(
a
, 
b
);

2995 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

2996 autØ
UÅackSŒuùIm¶
(cÚ¡ 
T
& 
t
, 
MakeIndexSequ’û
<3>, ) {

2997 cÚ¡‡uto& [
a
, 
b
, 
c
] = 
t
;

2998  
	g¡d
::
t›
(
a
, 
b
, 
c
);

3000 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

3001 autØ
UÅackSŒuùIm¶
(cÚ¡ 
T
& 
t
, 
MakeIndexSequ’û
<4>, ) {

3002 cÚ¡‡uto& [
a
, 
b
, 
c
, 
d
] = 
t
;

3003  
	g¡d
::
t›
(
a
, 
b
, 
c
, 
d
);

3005 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

3006 autØ
UÅackSŒuùIm¶
(cÚ¡ 
T
& 
t
, 
MakeIndexSequ’û
<5>, ) {

3007 cÚ¡‡uto& [
a
, 
b
, 
c
, 
d
, 
e
] = 
t
;

3008  
	g¡d
::
t›
(
a
, 
b
, 
c
, 
d
, 
e
);

3010 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

3011 autØ
UÅackSŒuùIm¶
(cÚ¡ 
T
& 
t
, 
MakeIndexSequ’û
<6>, ) {

3012 cÚ¡‡uto& [
a
, 
b
, 
c
, 
d
, 
e
, 
f
] = 
t
;

3013  
	g¡d
::
t›
(
a
, 
b
, 
c
, 
d
, 
e
, 
f
);

3015 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

3016 autØ
UÅackSŒuùIm¶
(cÚ¡ 
T
& 
t
, 
MakeIndexSequ’û
<7>, ) {

3017 cÚ¡‡uto& [
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
] = 
t
;

3018  
	g¡d
::
t›
(
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
);

3020 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

3021 autØ
UÅackSŒuùIm¶
(cÚ¡ 
T
& 
t
, 
MakeIndexSequ’û
<8>, ) {

3022 cÚ¡‡uto& [
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
, 
h
] = 
t
;

3023  
	g¡d
::
t›
(
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
, 
h
);

3025 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

3026 autØ
UÅackSŒuùIm¶
(cÚ¡ 
T
& 
t
, 
MakeIndexSequ’û
<9>, ) {

3027 cÚ¡‡uto& [
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
, 
h
, 
i
] = 
t
;

3028  
	g¡d
::
t›
(
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
, 
h
, 
i
);

3030 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

3031 autØ
UÅackSŒuùIm¶
(cÚ¡ 
T
& 
t
, 
MakeIndexSequ’û
<10>, ) {

3032 cÚ¡‡uto& [
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
, 
h
, 
i
, 
j
] = 
t
;

3033  
	g¡d
::
t›
(
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
, 
h
, 
i
, 
j
);

3035 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

3036 autØ
UÅackSŒuùIm¶
(cÚ¡ 
T
& 
t
, 
MakeIndexSequ’û
<11>, ) {

3037 cÚ¡‡uto& [
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
, 
h
, 
i
, 
j
, 
k
] = 
t
;

3038  
	g¡d
::
t›
(
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
, 
h
, 
i
, 
j
, 
k
);

3040 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

3041 autØ
UÅackSŒuùIm¶
(cÚ¡ 
T
& 
t
, 
MakeIndexSequ’û
<12>, ) {

3042 cÚ¡‡uto& [
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
, 
h
, 
i
, 
j
, 
k
, 
l
] = 
t
;

3043  
	g¡d
::
t›
(
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
, 
h
, 
i
, 
j
, 
k
, 
l
);

3045 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

3046 autØ
UÅackSŒuùIm¶
(cÚ¡ 
T
& 
t
, 
MakeIndexSequ’û
<13>, ) {

3047 cÚ¡‡uto& [
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
, 
h
, 
i
, 
j
, 
k
, 
l
, 
m
] = 
t
;

3048  
	g¡d
::
t›
(
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
, 
h
, 
i
, 
j
, 
k
, 
l
, 
m
);

3050 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

3051 autØ
UÅackSŒuùIm¶
(cÚ¡ 
T
& 
t
, 
MakeIndexSequ’û
<14>, ) {

3052 cÚ¡‡uto& [
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
, 
h
, 
i
, 
j
, 
k
, 
l
, 
m
, 
n
] = 
t
;

3053  
	g¡d
::
t›
(
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
, 
h
, 
i
, 
j
, 
k
, 
l
, 
m
, 
n
);

3055 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

3056 autØ
UÅackSŒuùIm¶
(cÚ¡ 
T
& 
t
, 
MakeIndexSequ’û
<15>, ) {

3057 cÚ¡‡uto& [
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
, 
h
, 
i
, 
j
, 
k
, 
l
, 
m
, 
n
, 
o
] = 
t
;

3058  
	g¡d
::
t›
(
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
, 
h
, 
i
, 
j
, 
k
, 
l
, 
m
, 
n
, 
o
);

3060 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

3061 autØ
UÅackSŒuùIm¶
(cÚ¡ 
T
& 
t
, 
MakeIndexSequ’û
<16>, ) {

3062 cÚ¡‡uto& [
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
, 
h
, 
i
, 
j
, 
k
, 
l
, 
m
, 
n
, 
o
, 
p
] = 
t
;

3063  
	g¡d
::
t›
(
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
, 
h
, 
i
, 
j
, 
k
, 
l
, 
m
, 
n
, 
o
, 
p
);

3067 
	g‹m¶©e
 <
size_t
 
	gI
, 
ty³Çme
 
	gT
>

3068 autØ
UÅackSŒuù
(cÚ¡ 
T
& 
t
)

3069 -> 
deşty³
((
UÅackSŒuùIm¶
)(
t
, 
MakeIndexSequ’û
<
I
>{}, 0)) {

3070  (
	gUÅackSŒuùIm¶
)(
	gt
, 
	gMakeIndexSequ’û
<
	gI
>{}, 0);

3076 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
size_t
 
	gN
>

3077 
V¬ŸdicEx·nd
(cÚ¡ 
T
 (&)[
N
]) {}

3079 
	g‹m¶©e
 <
ty³Çme
 
	gSŒuù
,y³Çm
	gSŒuùSize
>

3080 
şass
 
	gF›ldsA»M©ch”Im¶
;

3082 
	g‹m¶©e
 <
ty³Çme
 
	gSŒuù
, 
	gsize_t
... 
	gI
>

3083 
şass
 
	gF›ldsA»M©ch”Im¶
<
	gSŒuù
, 
	gIndexSequ’û
<
	gI
...>>

3084 : 
public
 
M©ch”IÁ”çû
<
SŒuù
> {

3085 
usšg
 
UÅackedTy³
 =

3086 
deşty³
(
UÅackSŒuù
<...(
I
)>(
¡d
::
deşv®
<cÚ¡ 
SŒuù
&>()));

3087 
usšg
 
	gM©ch”sTy³
 = 
¡d
::
tu¶e
<

3088 
M©ch”
<cÚ¡ 
ty³Çme
 
¡d
::
tu¶e_–em’t
<
I
, 
	gUÅackedTy³
>::
ty³
&>...>;

3090 
	gpublic
:

3091 
‹m¶©e
 <
ty³Çme
 
IÂ”
>

3092 
ex¶ic™
 
F›ldsA»M©ch”Im¶
(cÚ¡ 
IÂ”
& 
m©ch”s
)

3093 : 
m©ch”s_
(
‹¡šg
::
SaãM©ch”Ca¡
<

3094 cÚ¡ 
ty³Çme
 
¡d
::
tu¶e_–em’t
<
I
, 
UÅackedTy³
>::
ty³
&>(

3095 
¡d
::
g‘
<
I
>(
m©ch”s
))...) {}

3097 
DesüibeTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

3098 cÚ¡ * 
£·¿tÜ
 = "";

3099 
V¬ŸdicEx·nd
(

3100 {(*
os
 << 
£·¿tÜ
 << "ha f›ld #" << 
I
 << "hat ",

3101 
¡d
::
g‘
<
I
>(
m©ch”s_
).
DesüibeTo
(
os
), 
£·¿tÜ
 = ",‡nd ")...});

3104 
DesüibeNeg©iÚTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

3105 cÚ¡ * 
£·¿tÜ
 = "";

3106 
V¬ŸdicEx·nd
({(*
os
 << 
£·¿tÜ
 << "ha f›ld #" << 
I
 << "hat ",

3107 
¡d
::
g‘
<
I
>(
m©ch”s_
).
DesüibeNeg©iÚTo
(
os
),

3108 
£·¿tÜ
 = ", or ")...});

3111 
boŞ
 
M©chAndEx¶aš
(
SŒuù
 
t
, 
M©chResuÉLi¡’”
* 
li¡’”
ècÚ¡ 
	gov”ride
 {

3112  
M©chIÁ”Çl
((
UÅackSŒuù
<...(
I
)>)(
t
), 
li¡’”
);

3115 
	g´iv©e
:

3116 
boŞ
 
M©chIÁ”Çl
(
UÅackedTy³
 
tu¶e
, 
M©chResuÉLi¡’”
* 
li¡’”
) const {

3117 ià(!
	gli¡’”
->
IsIÁ”e¡ed
()) {

3120 
boŞ
 
	ggood
 = 
Œue
;

3121 
V¬ŸdicEx·nd
({
good
 = good && 
¡d
::
g‘
<
I
>(
m©ch”s_
).
M©ches
(

3122 
¡d
::
g‘
<
I
>(
tu¶e
))...});

3123  
	ggood
;

3126 
size_t
 
	gçed_pos
 = ~size_t{};

3128 
	g¡d
::
veùÜ
<
SŒšgM©chResuÉLi¡’”
> 
šÃr_li¡’”
(...(
I
));

3130 
V¬ŸdicEx·nd
(

3131 {
çed_pos
 =ğ~
size_t
{} && !
¡d
::
g‘
<
I
>(
m©ch”s_
).
M©chAndEx¶aš
(

3132 
¡d
::
g‘
<
I
>(
tu¶e
), &
šÃr_li¡’”
[I])

3133 ? 
çed_pos
 = 
I


3135 ià(
	gçed_pos
 !ğ~
size_t
{}) {

3136 *
li¡’”
 << "who£ f›ld #" << 
çed_pos
 << " does‚ot match";

3137 
PrštIfNÙEm±y
(
šÃr_li¡’”
[
çed_pos
].
¡r
(), 
li¡’”
->
¡»am
());

3138  
	gçl£
;

3141 *
	gli¡’”
 << "whose‡llƒlements match";

3142 cÚ¡ * 
	g£·¿tÜ
 = ", where";

3143 
size_t
 
	gšdex
 = 0; index < ...(
	gI
); ++index) {

3144 cÚ¡ 
	g¡d
::
¡ršg
 
¡r
 = 
šÃr_li¡’”
[
šdex
].str();

3145 ià(!
	g¡r
.
em±y
()) {

3146 *
	gli¡’”
 << 
	g£·¿tÜ
 << " f›ld #" << 
	gšdex
 << " i ¨v®u" << 
	g¡r
;

3147 
	g£·¿tÜ
 = ",‡nd";

3151  
	gŒue
;

3154 
M©ch”sTy³
 
	gm©ch”s_
;

3157 
	g‹m¶©e
 <
	gty³Çme
... 
	gIÂ”
>

3158 şas 
	cF›ldsA»M©ch”
 {

3159 
	gpublic
:

3160 
ex¶ic™
 
F›ldsA»M©ch”
(
IÂ”
... 
šÃr
è: 
m©ch”s_
(
¡d
::
move
(inner)...) {}

3162 
‹m¶©e
 <
ty³Çme
 
SŒuù
>

3163 
İ”©Ü
 
M©ch”
<
SŒuù
>() const {

3164  
M©ch”
<
SŒuù
>(

3165 
Ãw
 
F›ldsA»M©ch”Im¶
<cÚ¡ 
SŒuù
&, 
	gIndexSequ’ûFÜ
<
	gIÂ”
...>>(

3166 
	gm©ch”s_
));

3169 
	g´iv©e
:

3170 
¡d
::
tu¶e
<
IÂ”
...> 
m©ch”s_
;

3174 
	g‹m¶©e
 <
ty³Çme
 
	gCÚš”
>

3175 
şass
 
	gEËm’tsA»M©ch”Im¶
 : 
public
 
M©ch”IÁ”çû
<
CÚš”
> {

3176 
public
:

3177 
GTEST_REMOVE_REFERENCE_AND_CONST_
(
	tCÚš”
è
	tRawCÚš”
;

3178 
	gš‹º®
::
	tSCÚš”V›w
<
	tRawCÚš”
> 
	tV›w
;

3179 
ty³Çme
 
	tV›w
::
	tty³
 
	tSCÚš”
;

3180 
ty³Çme
 
	tV›w
::
	tcÚ¡_»ã»nû
 
	tSCÚš”Reã»nû
;

3181 
ty³Çme
 
	tSCÚš”
::
	tv®ue_ty³
 
	tEËm’t
;

3185 
	g‹m¶©e
 <
ty³Çme
 
	gIÅutI‹r
>

3186 
EËm’tsA»M©ch”Im¶
(
IÅutI‹r
 
fœ¡
, IÅutI‹¸
Ï¡
) {

3187 
	gfœ¡
 !ğ
Ï¡
) {

3188 
m©ch”s_
.
push_back
(
M©ch”Ca¡
<cÚ¡ 
EËm’t
&>(*
fœ¡
++));

3193 
DesüibeTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

3194 ià(
couÁ
() == 0) {

3195 *
os
 << "isƒmpty";

3196 } ià(
couÁ
() == 1) {

3197 *
os
 << "has 1ƒlementhat ";

3198 
	gm©ch”s_
[0].
DesüibeTo
(
os
);

3200 *
	gos
 << "ha " << 
EËm’ts
(
couÁ
()) << " where\n";

3201 
size_t
 
	gi
 = 0; i !ğ
couÁ
(); ++i) {

3202 *
	gos
 << "–em’ˆ#" << 
	gi
 << " ";

3203 
	gm©ch”s_
[
i
].
DesüibeTo
(
os
);

3204 ià(
	gi
 + 1 < 
couÁ
()) {

3205 *
	gos
 << ",\n";

3212 
DesüibeNeg©iÚTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

3213 ià(
couÁ
() == 0) {

3214 *
os
 << "isn'tƒmpty";

3218 *
	gos
 << "dÛ¢'ˆhav" << 
EËm’ts
(
couÁ
()) << ", or\n";

3219 
size_t
 
	gi
 = 0; i !ğ
couÁ
(); ++i) {

3220 *
	gos
 << "–em’ˆ#" << 
	gi
 << " ";

3221 
	gm©ch”s_
[
i
].
DesüibeNeg©iÚTo
(
os
);

3222 ià(
	gi
 + 1 < 
couÁ
()) {

3223 *
	gos
 << ", or\n";

3228 
boŞ
 
M©chAndEx¶aš
(
CÚš”
 
cÚš”
,

3229 
M©chResuÉLi¡’”
* 
li¡’”
ècÚ¡ 
	gov”ride
 {

3233 cÚ¡ 
boŞ
 
	gli¡’”_š‹»¡ed
 = 
li¡’”
->
IsIÁ”e¡ed
();

3236 ::
¡d
::
veùÜ
<¡d::
¡ršg
> 
ex¶ª©iÚs
(
couÁ
());

3237 
SCÚš”Reã»nû
 
	g¡l_cÚš”
 = 
V›w
::
CÚ¡Reã»nû
(
cÚš”
);

3238 
ty³Çme
 
	gSCÚš”
::
cÚ¡_™”©Ü
 
™
 = 
¡l_cÚš”
.
begš
();

3239 
size_t
 
	gexam_pos
 = 0;

3240 
boŞ
 
	gmism©ch_found
 = 
çl£
;

3245 ; 
	g™
 !ğ
¡l_cÚš”
.
’d
(è&& 
exam_pos
 !ğ
couÁ
(); ++™, ++
	gexam_pos
) {

3246 
boŞ
 
	gm©ch
;

3247 ià(
	gli¡’”_š‹»¡ed
) {

3248 
SŒšgM©chResuÉLi¡’”
 
	gs
;

3249 
	gm©ch
 = 
m©ch”s_
[
exam_pos
].
M©chAndEx¶aš
(*
™
, &
s
);

3250 
	gex¶ª©iÚs
[
exam_pos
] = 
s
.
¡r
();

3252 
	gm©ch
 = 
m©ch”s_
[
exam_pos
].
M©ches
(*
™
);

3255 ià(!
	gm©ch
) {

3256 
	gmism©ch_found
 = 
Œue
;

3265 
size_t
 
	gaùu®_couÁ
 = 
exam_pos
;

3266 ; 
	g™
 !ğ
¡l_cÚš”
.
’d
(); ++it) {

3267 ++
	gaùu®_couÁ
;

3270 ià(
	gaùu®_couÁ
 !ğ
couÁ
()) {

3275 ià(
li¡’”_š‹»¡ed
 && (
aùu®_couÁ
 != 0)) {

3276 *
li¡’”
 << "which ha " << 
EËm’ts
(
aùu®_couÁ
);

3278  
	gçl£
;

3281 ià(
	gmism©ch_found
) {

3283 ià(
	gli¡’”_š‹»¡ed
) {

3284 *
	gli¡’”
 << "who£ƒËm’ˆ#" << 
	gexam_pos
 << " doesn't match";

3285 
PrštIfNÙEm±y
(
ex¶ª©iÚs
[
exam_pos
], 
li¡’”
->
¡»am
());

3287  
	gçl£
;

3292 ià(
	gli¡’”_š‹»¡ed
) {

3293 
boŞ
 
	g»asÚ_´š‹d
 = 
çl£
;

3294 
size_t
 
	gi
 = 0; i !ğ
couÁ
(); ++i) {

3295 cÚ¡ 
	g¡d
::
¡ršg
& 
s
 = 
ex¶ª©iÚs
[
i
];

3296 ià(!
	gs
.
em±y
()) {

3297 ià(
	g»asÚ_´š‹d
) {

3298 *
	gli¡’”
 << ",\nand ";

3300 *
	gli¡’”
 << "who£ƒËm’ˆ#" << 
	gi
 << " m©ches, " << 
	gs
;

3301 
	g»asÚ_´š‹d
 = 
Œue
;

3305  
	gŒue
;

3308 
	g´iv©e
:

3309 
Mes§ge
 
EËm’ts
(
size_t
 
couÁ
) {

3310  
Mes§ge
(è<< 
couÁ
 << (count == 1 ? "ƒlement" : "ƒlements");

3313 
size_t
 
couÁ
(ècÚ¡ {  
	gm©ch”s_
.
size
(); }

3315 ::
¡d
::
veùÜ
<
M©ch”
<cÚ¡ 
EËm’t
&> > 
m©ch”s_
;

3322 şas 
	cGTEST_API_
 
	gM©chM©rix
 {

3323 
	gpublic
:

3324 
M©chM©rix
(
size_t
 
num_–em’ts
, size_ˆ
num_m©ch”s
)

3325 : 
num_–em’ts_
(
num_–em’ts
),

3326 
num_m©ch”s_
(
num_m©ch”s
),

3327 
m©ched_
(
num_–em’ts_
* 
num_m©ch”s_
, 0) {

3330 
size_t
 
LhsSize
(ècÚ¡ {  
	gnum_–em’ts_
; }

3331 
size_t
 
RhsSize
(ècÚ¡ {  
	gnum_m©ch”s_
; }

3332 
boŞ
 
HasEdge
(
size_t
 
hs
, size_ˆ
œhs
) const {

3333  
	gm©ched_
[
S·ûIndex
(
hs
, 
œhs
)] == 1;

3335 
S‘Edge
(
size_t
 
hs
, size_ˆ
œhs
, 
boŞ
 
b
) {

3336 
	gm©ched_
[
S·ûIndex
(
hs
, 
œhs
)] = 
b
 ? 1 : 0;

3342 
boŞ
 
NextG¿ph
();

3344 
Rªdomize
();

3346 
	g¡d
::
¡ršg
 
DebugSŒšg
() const;

3348 
	g´iv©e
:

3349 
size_t
 
S·ûIndex
(size_ˆ
hs
, size_ˆ
œhs
) const {

3350  
hs
 * 
	gnum_m©ch”s_
 + 
	gœhs
;

3353 
size_t
 
	gnum_–em’ts_
;

3354 
size_t
 
	gnum_m©ch”s_
;

3359 ::
¡d
::
veùÜ
<> 
m©ched_
;

3362 ::
¡d
::
	t·œ
<
	tsize_t
, size_t> 
	tEËm’tM©ch”Paœ
;

3363 ::
¡d
::
	tveùÜ
<
	tEËm’tM©ch”Paœ
> 
	tEËm’tM©ch”Paœs
;

3367 
GTEST_API_
 
EËm’tM©ch”Paœs


3368 
FšdMaxB¬t™eM©chšg
(cÚ¡ 
M©chM©rix
& 
g
);

3370 
	sUnÜd”edM©ch”Requœe
 {

3371 
	eFÏgs
 {

3372 
	gSu³r£t
 = 1 << 0,

3373 
	gSub£t
 = 1 << 1,

3374 
	gExaùM©ch
 = 
Su³r£t
 | 
Sub£t
,

3381 şas 
	cGTEST_API_
 
	gUnÜd”edEËm’tsA»M©ch”Im¶Ba£
 {

3382 
	g´Ùeùed
:

3383 
ex¶ic™
 
UnÜd”edEËm’tsA»M©ch”Im¶Ba£
(

3384 
UnÜd”edM©ch”Requœe
::
FÏgs
 
m©ch”_æags
)

3385 : 
m©ch_æags_
(
m©ch”_æags
) {}

3390 ::
¡d
::
	tveùÜ
<cÚ¡ 
	tM©ch”Desüib”IÁ”çû
*> 
	tM©ch”Desüib”Vec
;

3393 
DesüibeToIm¶
(::
¡d
::
o¡»am
* 
os
) const;

3396 
DesüibeNeg©iÚToIm¶
(::
¡d
::
o¡»am
* 
os
) const;

3398 
boŞ
 
V”ifyM©chM©rix
(cÚ¡ ::
¡d
::
veùÜ
<¡d::
¡ršg
>& 
–em’t_´štouts
,

3399 cÚ¡ 
M©chM©rix
& 
m©rix
,

3400 
M©chResuÉLi¡’”
* 
li¡’”
) const;

3402 
boŞ
 
FšdPaœšg
(cÚ¡ 
M©chM©rix
& 
m©rix
,

3403 
M©chResuÉLi¡’”
* 
li¡’”
) const;

3405 
	gM©ch”Desüib”Vec
& 
m©ch”_desüib”s
() {

3406  
	gm©ch”_desüib”s_
;

3409 
Mes§ge
 
EËm’ts
(
size_t
 
n
) {

3410  
Mes§ge
(è<< 
	gn
 << "ƒlement" << (n == 1 ? "" : "s");

3413 
	gUnÜd”edM©ch”Requœe
::
FÏgs
 
m©ch_æags
(ècÚ¡ {  
m©ch_æags_
; }

3415 
	g´iv©e
:

3416 
UnÜd”edM©ch”Requœe
::
FÏgs
 
m©ch_æags_
;

3417 
M©ch”Desüib”Vec
 
	gm©ch”_desüib”s_
;

3422 
	g‹m¶©e
 <
ty³Çme
 
	gCÚš”
>

3423 
şass
 
	gUnÜd”edEËm’tsA»M©ch”Im¶


3424 : 
public
 
M©ch”IÁ”çû
<
CÚš”
>,

3425 
public
 
	gUnÜd”edEËm’tsA»M©ch”Im¶Ba£
 {

3426 
	gpublic
:

3427 
GTEST_REMOVE_REFERENCE_AND_CONST_
(
	tCÚš”
è
	tRawCÚš”
;

3428 
	gš‹º®
::
	tSCÚš”V›w
<
	tRawCÚš”
> 
	tV›w
;

3429 
ty³Çme
 
	tV›w
::
	tty³
 
	tSCÚš”
;

3430 
ty³Çme
 
	tV›w
::
	tcÚ¡_»ã»nû
 
	tSCÚš”Reã»nû
;

3431 
ty³Çme
 
	tSCÚš”
::
	tcÚ¡_™”©Ü
 
	tSCÚš”CÚ¡I‹¿tÜ
;

3432 
ty³Çme
 
	tSCÚš”
::
	tv®ue_ty³
 
	tEËm’t
;

3434 
	g‹m¶©e
 <
ty³Çme
 
	gIÅutI‹r
>

3435 
UnÜd”edEËm’tsA»M©ch”Im¶
(
UnÜd”edM©ch”Requœe
::
FÏgs
 
m©ch”_æags
,

3436 
IÅutI‹r
 
fœ¡
, IÅutI‹¸
Ï¡
)

3437 : 
UnÜd”edEËm’tsA»M©ch”Im¶Ba£
(
m©ch”_æags
) {

3438 ; 
	gfœ¡
 !ğ
Ï¡
; ++first) {

3439 
	gm©ch”s_
.
push_back
(
M©ch”Ca¡
<cÚ¡ 
EËm’t
&>(*
fœ¡
));

3441 cÚ¡‡uto& 
	gm
 : 
m©ch”s_
) {

3442 
m©ch”_desüib”s
().
push_back
(
m
.
G‘Desüib”
());

3447 
DesüibeTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

3448  
UnÜd”edEËm’tsA»M©ch”Im¶Ba£
::
DesüibeToIm¶
(
os
);

3452 
DesüibeNeg©iÚTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

3453  
UnÜd”edEËm’tsA»M©ch”Im¶Ba£
::
DesüibeNeg©iÚToIm¶
(
os
);

3456 
boŞ
 
M©chAndEx¶aš
(
CÚš”
 
cÚš”
,

3457 
M©chResuÉLi¡’”
* 
li¡’”
ècÚ¡ 
	gov”ride
 {

3458 
SCÚš”Reã»nû
 
	g¡l_cÚš”
 = 
V›w
::
CÚ¡Reã»nû
(
cÚš”
);

3459 ::
¡d
::
veùÜ
<¡d::
¡ršg
> 
–em’t_´štouts
;

3460 
M©chM©rix
 
	gm©rix
 =

3461 
AÇlyzeEËm’ts
(
¡l_cÚš”
.
begš
(), s_cÚš”.
’d
(),

3462 &
–em’t_´štouts
, 
li¡’”
);

3464 ià(
	gm©rix
.
LhsSize
(è=ğ0 && 
m©rix
.
RhsSize
() == 0) {

3465  
Œue
;

3468 ià(
m©ch_æags
(è=ğ
UnÜd”edM©ch”Requœe
::
ExaùM©ch
) {

3469 ià(
m©rix
.
LhsSize
(è!ğm©rix.
RhsSize
()) {

3474 ià(
m©rix
.
LhsSize
(è!ğ0 && 
li¡’”
->
IsIÁ”e¡ed
()) {

3475 *
li¡’”
 << "which ha " << 
EËm’ts
(
m©rix
.
LhsSize
());

3477  
	gçl£
;

3481  
V”ifyM©chM©rix
(
–em’t_´štouts
, 
m©rix
, 
li¡’”
) &&

3482 
FšdPaœšg
(
m©rix
, 
li¡’”
);

3485 
	g´iv©e
:

3486 
‹m¶©e
 <
ty³Çme
 
EËm’tI‹r
>

3487 
M©chM©rix
 
AÇlyzeEËm’ts
(
EËm’tI‹r
 
–em_fœ¡
, EËm’tI‹¸
–em_Ï¡
,

3488 ::
¡d
::
veùÜ
<¡d::
¡ršg
>* 
–em’t_´štouts
,

3489 
M©chResuÉLi¡’”
* 
li¡’”
) const {

3490 
	g–em’t_´štouts
->
ş—r
();

3491 ::
¡d
::
veùÜ
<> 
did_m©ch
;

3492 
size_t
 
	gnum_–em’ts
 = 0;

3493 
DummyM©chResuÉLi¡’”
 
	gdummy
;

3494 ; 
	g–em_fœ¡
 !ğ
–em_Ï¡
; ++
	gnum_–em’ts
, ++elem_first) {

3495 ià(
	gli¡’”
->
IsIÁ”e¡ed
()) {

3496 
	g–em’t_´štouts
->
push_back
(
PrštToSŒšg
(*
–em_fœ¡
));

3498 
size_t
 
	gœhs
 = 0; irh !ğ
m©ch”s_
.
size
(); ++irhs) {

3499 
	gdid_m©ch
.
push_back
(

3500 
m©ch”s_
[
œhs
].
M©chAndEx¶aš
(*
–em_fœ¡
, &
dummy
));

3504 
M©chM©rix
 
m©rix
(
num_–em’ts
, 
m©ch”s_
.
size
());

3505 ::
¡d
::
veùÜ
<>::
cÚ¡_™”©Ü
 
did_m©ch_™”
 = 
did_m©ch
.
begš
();

3506 
size_t
 
	ghs
 = 0; ilh !ğ
num_–em’ts
; ++ilhs) {

3507 
size_t
 
	gœhs
 = 0; irh !ğ
m©ch”s_
.
size
(); ++irhs) {

3508 
	gm©rix
.
S‘Edge
(
hs
, 
œhs
, *
did_m©ch_™”
++ != 0);

3511  
	gm©rix
;

3514 ::
¡d
::
veùÜ
<
M©ch”
<cÚ¡ 
EËm’t
&> > 
m©ch”s_
;

3519 
	g‹m¶©e
 <
ty³Çme
 
	gT¬g‘
>

3520 
	sCa¡AndAµ’dT¿nsfÜm
 {

3521 
	g‹m¶©e
 <
ty³Çme
 
	gArg
>

3522 
	gM©ch”
<
	gT¬g‘
> 
İ”©Ü
()(cÚ¡ 
	gArg
& 
	ga
) const {

3523  
	gM©ch”Ca¡
<
	gT¬g‘
>(
	ga
);

3528 
	g‹m¶©e
 <
ty³Çme
 
	gM©ch”Tu¶e
>

3529 şas 
	cUnÜd”edEËm’tsA»M©ch”
 {

3530 
	gpublic
:

3531 
ex¶ic™
 
UnÜd”edEËm’tsA»M©ch”
(cÚ¡ 
M©ch”Tu¶e
& 
¬gs
)

3532 : 
m©ch”s_
(
¬gs
) {}

3534 
‹m¶©e
 <
ty³Çme
 
CÚš”
>

3535 
İ”©Ü
 
M©ch”
<
CÚš”
>() const {

3536 
GTEST_REMOVE_REFERENCE_AND_CONST_
(
	tCÚš”
è
	tRawCÚš”
;

3537 
ty³Çme
 
	tš‹º®
::
	tSCÚš”V›w
<
	tRawCÚš”
>::
	tty³
 
	tV›w
;

3538 
ty³Çme
 
	tV›w
::
	tv®ue_ty³
 
	tEËm’t
;

3539 ::
¡d
::
	tveùÜ
<
	tM©ch”
<cÚ¡ 
	tEËm’t
&> > 
	tM©ch”Vec
;

3540 
M©ch”Vec
 
	gm©ch”s
;

3541 
	gm©ch”s
.
»£rve
(::
¡d
::
tu¶e_size
<
M©ch”Tu¶e
>::
v®ue
);

3542 
T¿nsfÜmTu¶eV®ues
(
Ca¡AndAµ’dT¿nsfÜm
<cÚ¡ 
EËm’t
&>(), 
m©ch”s_
,

3543 ::
¡d
::
back_š£¹”
(
m©ch”s
));

3544  
	gM©ch”
<
	gCÚš”
>(

3545 
Ãw
 
	gUnÜd”edEËm’tsA»M©ch”Im¶
<cÚ¡ 
	gCÚš”
&>(

3546 
	gUnÜd”edM©ch”Requœe
::
ExaùM©ch
, 
	gm©ch”s
.
begš
(),

3547 
	gm©ch”s
.
’d
()));

3550 
	g´iv©e
:

3551 cÚ¡ 
M©ch”Tu¶e
 
m©ch”s_
;

3555 
	g‹m¶©e
 <
ty³Çme
 
	gM©ch”Tu¶e
>

3556 şas 
	cEËm’tsA»M©ch”
 {

3557 
	gpublic
:

3558 
ex¶ic™
 
EËm’tsA»M©ch”
(cÚ¡ 
M©ch”Tu¶e
& 
¬gs
è: 
m©ch”s_
(args) {}

3560 
‹m¶©e
 <
ty³Çme
 
CÚš”
>

3561 
İ”©Ü
 
M©ch”
<
CÚš”
>() const {

3562 
GTEST_COMPILE_ASSERT_
(

3563 !
IsHashTabË
<
GTEST_REMOVE_REFERENCE_AND_CONST_
(
CÚš”
)>::
v®ue
 ||

3564 ::
¡d
::
tu¶e_size
<
M©ch”Tu¶e
>::
v®ue
 < 2,

3565 
u£_UnÜd”edEËm’tsA»_w™h_hash_bËs
);

3567 
GTEST_REMOVE_REFERENCE_AND_CONST_
(
	tCÚš”
è
	tRawCÚš”
;

3568 
ty³Çme
 
	tš‹º®
::
	tSCÚš”V›w
<
	tRawCÚš”
>::
	tty³
 
	tV›w
;

3569 
ty³Çme
 
	tV›w
::
	tv®ue_ty³
 
	tEËm’t
;

3570 ::
¡d
::
	tveùÜ
<
	tM©ch”
<cÚ¡ 
	tEËm’t
&> > 
	tM©ch”Vec
;

3571 
M©ch”Vec
 
	gm©ch”s
;

3572 
	gm©ch”s
.
»£rve
(::
¡d
::
tu¶e_size
<
M©ch”Tu¶e
>::
v®ue
);

3573 
T¿nsfÜmTu¶eV®ues
(
Ca¡AndAµ’dT¿nsfÜm
<cÚ¡ 
EËm’t
&>(), 
m©ch”s_
,

3574 ::
¡d
::
back_š£¹”
(
m©ch”s
));

3575  
	gM©ch”
<
	gCÚš”
>(
Ãw
 
	gEËm’tsA»M©ch”Im¶
<const Container&>(

3576 
	gm©ch”s
.
begš
(), m©ch”s.
’d
()));

3579 
	g´iv©e
:

3580 cÚ¡ 
M©ch”Tu¶e
 
m©ch”s_
;

3584 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

3585 şas 
	cUnÜd”edEËm’tsA»A¼ayM©ch”
 {

3586 
	gpublic
:

3587 
‹m¶©e
 <
ty³Çme
 
I‹r
>

3588 
UnÜd”edEËm’tsA»A¼ayM©ch”
(
UnÜd”edM©ch”Requœe
::
FÏgs
 
m©ch_æags
,

3589 
I‹r
 
fœ¡
, I‹¸
Ï¡
)

3590 : 
m©ch_æags_
(
m©ch_æags
), 
m©ch”s_
(
fœ¡
, 
Ï¡
) {}

3592 
	g‹m¶©e
 <
ty³Çme
 
	gCÚš”
>

3593 
İ”©Ü
 
	gM©ch”
<
	gCÚš”
>() const {

3594  
	gM©ch”
<
	gCÚš”
>(

3595 
Ãw
 
	gUnÜd”edEËm’tsA»M©ch”Im¶
<cÚ¡ 
	gCÚš”
&>(

3596 
	gm©ch_æags_
, 
	gm©ch”s_
.
begš
(), m©ch”s_.
’d
()));

3599 
	g´iv©e
:

3600 
UnÜd”edM©ch”Requœe
::
FÏgs
 
m©ch_æags_
;

3601 ::
¡d
::
veùÜ
<
T
> 
m©ch”s_
;

3605 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

3606 şas 
	cEËm’tsA»A¼ayM©ch”
 {

3607 
	gpublic
:

3608 
‹m¶©e
 <
ty³Çme
 
I‹r
>

3609 
EËm’tsA»A¼ayM©ch”
(
I‹r
 
fœ¡
, I‹¸
Ï¡
è: 
m©ch”s_
(first,†ast) {}

3611 
	g‹m¶©e
 <
ty³Çme
 
	gCÚš”
>

3612 
İ”©Ü
 
	gM©ch”
<
	gCÚš”
>() const {

3613 
GTEST_COMPILE_ASSERT_
(

3614 !
IsHashTabË
<
GTEST_REMOVE_REFERENCE_AND_CONST_
(
CÚš”
)>::
v®ue
,

3615 
u£_UnÜd”edEËm’tsA»A¼ay_w™h_hash_bËs
);

3617  
	gM©ch”
<
	gCÚš”
>(
Ãw
 
	gEËm’tsA»M©ch”Im¶
<const Container&>(

3618 
	gm©ch”s_
.
begš
(), m©ch”s_.
’d
()));

3621 
	g´iv©e
:

3622 cÚ¡ ::
¡d
::
veùÜ
<
T
> 
m©ch”s_
;

3634 
	g‹m¶©e
 <
ty³Çme
 
	gTu¶e2M©ch”
,y³Çm
	gSecÚd
>

3635 şas 
	cBoundSecÚdM©ch”
 {

3636 
	gpublic
:

3637 
BoundSecÚdM©ch”
(cÚ¡ 
Tu¶e2M©ch”
& 
tm
, cÚ¡ 
SecÚd
& 
£cÚd
)

3638 : 
tu¶e2_m©ch”_
(
tm
), 
£cÚd_v®ue_
(
£cÚd
) {}

3640 
BoundSecÚdM©ch”
(cÚ¡ BoundSecÚdM©ch”& 
Ùh”
) = ;

3642 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

3643 
İ”©Ü
 
	gM©ch”
<
	gT
>() const {

3644  
MakeM©ch”
(
Ãw
 
Im¶
<
T
>(
tu¶e2_m©ch”_
, 
£cÚd_v®ue_
));

3655 
	gİ”©Ü
=(cÚ¡ 
BoundSecÚdM©ch”
& ) {

3656 
GTEST_LOG_
(
FATAL
) << "BoundSecondMatcher should‚ever be‡ssigned.";

3659 
	g´iv©e
:

3660 
‹m¶©e
 <
ty³Çme
 
T
>

3661 
şass
 
Im¶
 : 
public
 
M©ch”IÁ”çû
<
T
> {

3662 
public
:

3663 ::
¡d
::
	ttu¶e
<
	tT
, 
	tSecÚd
> 
	tArgTu¶e
;

3665 
Im¶
(cÚ¡ 
Tu¶e2M©ch”
& 
tm
, cÚ¡ 
SecÚd
& 
£cÚd
)

3666 : 
mÚo_tu¶e2_m©ch”_
(
SaãM©ch”Ca¡
<cÚ¡ 
ArgTu¶e
&>(
tm
)),

3667 
£cÚd_v®ue_
(
£cÚd
) {}

3669 
DesüibeTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

3670 *
os
 << "and ";

3671 
Univ”§lPršt
(
£cÚd_v®ue_
, 
os
);

3672 *
	gos
 << " ";

3673 
	gmÚo_tu¶e2_m©ch”_
.
DesüibeTo
(
os
);

3676 
boŞ
 
M©chAndEx¶aš
(
T
 
x
, 
M©chResuÉLi¡’”
* 
li¡’”
ècÚ¡ 
	gov”ride
 {

3677  
	gmÚo_tu¶e2_m©ch”_
.
M©chAndEx¶aš
(
ArgTu¶e
(
x
, 
£cÚd_v®ue_
),

3678 
li¡’”
);

3681 
	g´iv©e
:

3682 cÚ¡ 
M©ch”
<cÚ¡ 
ArgTu¶e
&> 
mÚo_tu¶e2_m©ch”_
;

3683 cÚ¡ 
SecÚd
 
	g£cÚd_v®ue_
;

3686 cÚ¡ 
Tu¶e2M©ch”
 
	gtu¶e2_m©ch”_
;

3687 cÚ¡ 
SecÚd
 
	g£cÚd_v®ue_
;

3694 
	g‹m¶©e
 <
ty³Çme
 
	gTu¶e2M©ch”
,y³Çm
	gSecÚd
>

3695 
	gBoundSecÚdM©ch”
<
	gTu¶e2M©ch”
, 
	gSecÚd
> 
M©ch”BšdSecÚd
(

3696 cÚ¡ 
Tu¶e2M©ch”
& 
tm
, cÚ¡ 
SecÚd
& 
£cÚd
) {

3697  
	gBoundSecÚdM©ch”
<
	gTu¶e2M©ch”
, 
	gSecÚd
>(
	gtm
, 
	g£cÚd
);

3705 
GTEST_API_
 
	g¡d
::
¡ršg
 
FÜm©M©ch”DesütiÚ
(
boŞ
 
Ãg©iÚ
,

3706 cÚ¡ * 
m©ch”_Çme
,

3707 cÚ¡ 
SŒšgs
& 
·¿m_v®ues
);

3710 
	g‹m¶©e
 <
ty³Çme
 
	gV®ueM©ch”
>

3711 şas 
	cO±iÚ®M©ch”
 {

3712 
	gpublic
:

3713 
ex¶ic™
 
O±iÚ®M©ch”
(cÚ¡ 
V®ueM©ch”
& 
v®ue_m©ch”
)

3714 : 
v®ue_m©ch”_
(
v®ue_m©ch”
) {}

3716 
‹m¶©e
 <
ty³Çme
 
O±iÚ®
>

3717 
İ”©Ü
 
M©ch”
<
O±iÚ®
>() const {

3718  
M©ch”
<
O±iÚ®
>(
Ãw
 
Im¶
<cÚ¡ O±iÚ®&>(
v®ue_m©ch”_
));

3721 
	g‹m¶©e
 <
ty³Çme
 
	gO±iÚ®
>

3722 
şass
 
	gIm¶
 : 
public
 
M©ch”IÁ”çû
<
O±iÚ®
> {

3723 
public
:

3724 
GTEST_REMOVE_REFERENCE_AND_CONST_
(
	tO±iÚ®
è
	tO±iÚ®V›w
;

3725 
ty³Çme
 
	tO±iÚ®V›w
::
	tv®ue_ty³
 
	tV®ueTy³
;

3726 
ex¶ic™
 
Im¶
(cÚ¡ 
V®ueM©ch”
& 
v®ue_m©ch”
)

3727 : 
v®ue_m©ch”_
(
M©ch”Ca¡
<
V®ueTy³
>(
v®ue_m©ch”
)) {}

3729 
DesüibeTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

3730 *
os
 << "value ";

3731 
	gv®ue_m©ch”_
.
DesüibeTo
(
os
);

3734 
DesüibeNeg©iÚTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

3735 *
os
 << "value ";

3736 
	gv®ue_m©ch”_
.
DesüibeNeg©iÚTo
(
os
);

3739 
boŞ
 
M©chAndEx¶aš
(
O±iÚ®
 
İtiÚ®
,

3740 
M©chResuÉLi¡’”
* 
li¡’”
ècÚ¡ 
	gov”ride
 {

3741 ià(!
	gİtiÚ®
) {

3742 *
	gli¡’”
 << "which is‚otƒngaged";

3743  
	gçl£
;

3745 cÚ¡ 
	gV®ueTy³
& 
	gv®ue
 = *
İtiÚ®
;

3746 
SŒšgM©chResuÉLi¡’”
 
	gv®ue_li¡’”
;

3747 cÚ¡ 
boŞ
 
	gm©ch
 = 
v®ue_m©ch”_
.
M©chAndEx¶aš
(
v®ue
, &
v®ue_li¡’”
);

3748 *
	gli¡’”
 << "who£ v®u" << 
PrštToSŒšg
(
v®ue
)

3749 << (
	gm©ch
 ? " matches" : " doesn't match");

3750 
PrštIfNÙEm±y
(
v®ue_li¡’”
.
¡r
(), 
li¡’”
->
¡»am
());

3751  
	gm©ch
;

3754 
	g´iv©e
:

3755 cÚ¡ 
M©ch”
<
V®ueTy³
> 
v®ue_m©ch”_
;

3758 
	g´iv©e
:

3759 cÚ¡ 
V®ueM©ch”
 
v®ue_m©ch”_
;

3762 
Çme¥aû
 
	gv¬ŸÁ_m©ch”
 {

3764 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

3765 
hŞds_®‹º©ive
() {}

3766 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

3767 
g‘
() {}

3770 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

3771 şas 
	cV¬ŸÁM©ch”
 {

3772 
	gpublic
:

3773 
ex¶ic™
 
V¬ŸÁM©ch”
(::
‹¡šg
::
M©ch”
<cÚ¡ 
T
&> 
m©ch”
)

3774 : 
m©ch”_
(
¡d
::
move
(
m©ch”
)) {}

3776 
‹m¶©e
 <
ty³Çme
 
V¬ŸÁ
>

3777 
boŞ
 
M©chAndEx¶aš
(cÚ¡ 
V¬ŸÁ
& 
v®ue
,

3778 ::
‹¡šg
::
M©chResuÉLi¡’”
* 
li¡’”
) const {

3779 
usšg
 
¡d
::
g‘
;

3780 ià(!
	gli¡’”
->
IsIÁ”e¡ed
()) {

3781  
	ghŞds_®‹º©ive
<
	gT
>(
	gv®ue
è&& 
	gm©ch”_
.
M©ches
(
g‘
<
T
>(
v®ue
));

3784 ià(!
	ghŞds_®‹º©ive
<
	gT
>(
	gv®ue
)) {

3785 *
	gli¡’”
 << "who£ v®ui nÙ oàty³ '" << 
G‘Ty³Name
() << "'";

3786  
	gçl£
;

3789 cÚ¡ 
	gT
& 
	g–em
 = 
g‘
<
T
>(
v®ue
);

3790 
SŒšgM©chResuÉLi¡’”
 
	g–em_li¡’”
;

3791 cÚ¡ 
boŞ
 
	gm©ch
 = 
m©ch”_
.
M©chAndEx¶aš
(
–em
, &
–em_li¡’”
);

3792 *
	gli¡’”
 << "who£ v®u" << 
PrštToSŒšg
(
–em
)

3793 << (
	gm©ch
 ? " matches" : " doesn't match");

3794 
PrštIfNÙEm±y
(
–em_li¡’”
.
¡r
(), 
li¡’”
->
¡»am
());

3795  
	gm©ch
;

3798 
DesüibeTo
(
¡d
::
o¡»am
* 
os
) const {

3799 *
os
 << "i ¨v¬ŸÁ<> w™h v®uoàty³ '" << 
G‘Ty³Name
()

3801 
	gm©ch”_
.
DesüibeTo
(
os
);

3804 
DesüibeNeg©iÚTo
(
¡d
::
o¡»am
* 
os
) const {

3805 *
os
 << "i ¨v¬ŸÁ<> w™h v®uoàty³ oth”hª '" << 
G‘Ty³Name
()

3807 
	gm©ch”_
.
DesüibeNeg©iÚTo
(
os
);

3810 
	g´iv©e
:

3811 
¡d
::
¡ršg
 
G‘Ty³Name
() {

3812 #ià
GTEST_HAS_RTTI


3813 
GTEST_SUPPRESS_UNREACHABLE_CODE_WARNING_BELOW_
(

3814  
š‹º®
::
G‘Ty³Name
<
T
>());

3819 cÚ¡ ::
‹¡šg
::
M©ch”
<cÚ¡ 
T
&> 
m©ch”_
;

3824 
Çme¥aû
 
	gªy_ÿ¡_m©ch”
 {

3827 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

3828 
ªy_ÿ¡
() {}

3831 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

3832 şas 
	cAnyCa¡M©ch”
 {

3833 
	gpublic
:

3834 
ex¶ic™
 
AnyCa¡M©ch”
(cÚ¡ ::
‹¡šg
::
M©ch”
<cÚ¡ 
T
&>& 
m©ch”
)

3835 : 
m©ch”_
(
m©ch”
) {}

3837 
‹m¶©e
 <
ty³Çme
 
AnyTy³
>

3838 
boŞ
 
M©chAndEx¶aš
(cÚ¡ 
AnyTy³
& 
v®ue
,

3839 ::
‹¡šg
::
M©chResuÉLi¡’”
* 
li¡’”
) const {

3840 ià(!
li¡’”
->
IsIÁ”e¡ed
()) {

3841 cÚ¡ 
T
* 
±r
 = 
ªy_ÿ¡
<T>(&
v®ue
);

3842  
	g±r
 !ğ
nuÎ±r
 && 
m©ch”_
.
M©ches
(*
±r
);

3845 cÚ¡ 
T
* 
	g–em
 = 
ªy_ÿ¡
<T>(&
v®ue
);

3846 ià(
	g–em
 =ğ
nuÎ±r
) {

3847 *
li¡’”
 << "who£ v®ui nÙ oàty³ '" << 
G‘Ty³Name
() << "'";

3848  
	gçl£
;

3851 
SŒšgM©chResuÉLi¡’”
 
	g–em_li¡’”
;

3852 cÚ¡ 
boŞ
 
	gm©ch
 = 
m©ch”_
.
M©chAndEx¶aš
(*
–em
, &
–em_li¡’”
);

3853 *
	gli¡’”
 << "who£ v®u" << 
PrštToSŒšg
(*
–em
)

3854 << (
	gm©ch
 ? " matches" : " doesn't match");

3855 
PrštIfNÙEm±y
(
–em_li¡’”
.
¡r
(), 
li¡’”
->
¡»am
());

3856  
	gm©ch
;

3859 
DesüibeTo
(
¡d
::
o¡»am
* 
os
) const {

3860 *
os
 << "i ª 'ªy'y³ w™h v®uoàty³ '" << 
G‘Ty³Name
()

3862 
	gm©ch”_
.
DesüibeTo
(
os
);

3865 
DesüibeNeg©iÚTo
(
¡d
::
o¡»am
* 
os
) const {

3866 *
os
 << "i ª 'ªy'y³ w™h v®uoàty³ oth”hª '" << 
G‘Ty³Name
()

3868 
	gm©ch”_
.
DesüibeNeg©iÚTo
(
os
);

3871 
	g´iv©e
:

3872 
¡d
::
¡ršg
 
G‘Ty³Name
() {

3873 #ià
GTEST_HAS_RTTI


3874 
GTEST_SUPPRESS_UNREACHABLE_CODE_WARNING_BELOW_
(

3875  
š‹º®
::
G‘Ty³Name
<
T
>());

3880 cÚ¡ ::
‹¡šg
::
M©ch”
<cÚ¡ 
T
&> 
m©ch”_
;

3886 
	g‹m¶©e
 <
şass
 
	gArgsTu¶e
, 
	gsize_t
... 
	gk
>

3887 
şass
 
	gArgsM©ch”Im¶
 : 
public
 
M©ch”IÁ”çû
<
ArgsTu¶e
> {

3888 
public
:

3889 
usšg
 
RawArgsTu¶e
 = 
ty³Çme
 
¡d
::
deÿy
<
ArgsTu¶e
>::
ty³
;

3890 
usšg
 
	gS–eùedArgs
 =

3891 
¡d
::
tu¶e
<
ty³Çme
 std::
tu¶e_–em’t
<
k
, 
	gRawArgsTu¶e
>::
ty³
...>;

3892 
usšg
 
	gMÚomÜphicIÂ”M©ch”
 = 
M©ch”
<cÚ¡ 
S–eùedArgs
&>;

3894 
	g‹m¶©e
 <
ty³Çme
 
	gIÂ”M©ch”
>

3895 
ex¶ic™
 
ArgsM©ch”Im¶
(cÚ¡ 
IÂ”M©ch”
& 
šÃr_m©ch”
)

3896 : 
šÃr_m©ch”_
(
SaãM©ch”Ca¡
<cÚ¡ 
S–eùedArgs
&>(
šÃr_m©ch”
)) {}

3898 
boŞ
 
M©chAndEx¶aš
(
ArgsTu¶e
 
¬gs
,

3899 
M©chResuÉLi¡’”
* 
li¡’”
ècÚ¡ 
	gov”ride
 {

3901 ()
	g¬gs
;

3902 cÚ¡ 
	gS–eùedArgs
& 
	g£Ëùed_¬gs
 =

3903 
¡d
::
fÜw¬d_as_tu¶e
(¡d::
g‘
<
k
>(
¬gs
)...);

3904 ià(!
	gli¡’”
->
IsIÁ”e¡ed
()è 
	gšÃr_m©ch”_
.
M©ches
(
£Ëùed_¬gs
);

3906 
PrštIndiûs
(
li¡’”
->
¡»am
());

3907 *
	gli¡’”
 << "¬" << 
PrštToSŒšg
(
£Ëùed_¬gs
);

3909 
SŒšgM©chResuÉLi¡’”
 
	gšÃr_li¡’”
;

3910 cÚ¡ 
boŞ
 
	gm©ch
 =

3911 
šÃr_m©ch”_
.
M©chAndEx¶aš
(
£Ëùed_¬gs
, &
šÃr_li¡’”
);

3912 
PrštIfNÙEm±y
(
šÃr_li¡’”
.
¡r
(), 
li¡’”
->
¡»am
());

3913  
	gm©ch
;

3916 
DesüibeTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

3917 *
os
 << "are‡uple ";

3918 
PrštIndiûs
(
os
);

3919 
	gšÃr_m©ch”_
.
DesüibeTo
(
os
);

3922 
DesüibeNeg©iÚTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

3923 *
os
 << "are‡uple ";

3924 
PrštIndiûs
(
os
);

3925 
	gšÃr_m©ch”_
.
DesüibeNeg©iÚTo
(
os
);

3928 
	g´iv©e
:

3930 
PrštIndiûs
(::
¡d
::
o¡»am
* 
os
) {

3931 *
os
 << "whose fields (";

3932 cÚ¡ * 
	g£p
 = "";

3934 ()
	g£p
;

3935 cÚ¡ * 
	gdummy
[] = {"", (*
os
 << 
£p
 << "#" << 
k
, sep = ", ")...};

3936 ()
	gdummy
;

3937 *
	gos
 << ") ";

3940 
MÚomÜphicIÂ”M©ch”
 
	gšÃr_m©ch”_
;

3943 
	g‹m¶©e
 <
şass
 
	gIÂ”M©ch”
, 
	gsize_t
... 
	gk
>

3944 şas 
	cArgsM©ch”
 {

3945 
	gpublic
:

3946 
ex¶ic™
 
ArgsM©ch”
(
IÂ”M©ch”
 
šÃr_m©ch”
)

3947 : 
šÃr_m©ch”_
(
¡d
::
move
(
šÃr_m©ch”
)) {}

3949 
‹m¶©e
 <
ty³Çme
 
ArgsTu¶e
>

3950 
İ”©Ü
 
M©ch”
<
ArgsTu¶e
>() const {

3951  
MakeM©ch”
(
Ãw
 
ArgsM©ch”Im¶
<
ArgsTu¶e
, 
k
...>(
šÃr_m©ch”_
));

3954 
	g´iv©e
:

3955 
IÂ”M©ch”
 
šÃr_m©ch”_
;

3975 
	g‹m¶©e
 <
ty³Çme
 
	gI‹r
>

3976 
šlše
 
	gš‹º®
::
EËm’tsA»A¼ayM©ch”
<

3977 
ty³Çme
 ::
¡d
::
™”©Ü_Œa™s
<
I‹r
>::
v®ue_ty³
>

3978 
	$EËm’tsA»A¼ay
(
I‹r
 
fœ¡
, I‹¸
Ï¡
) {

3979 
ty³Çme
 ::
	t¡d
::
	t™”©Ü_Œa™s
<
	tI‹r
>::
	tv®ue_ty³
 
	tT
;

3980  
š‹º®
::
EËm’tsA»A¼ayM©ch”
<
T
>(
fœ¡
, 
Ï¡
);

3981 
	}
}

3983 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

3984 
šlše
 
	gš‹º®
::
EËm’tsA»A¼ayM©ch”
<
T
> 
	$EËm’tsA»A¼ay
(

3985 cÚ¡ 
T
* 
poš‹r
, 
size_t
 
couÁ
) {

3986  
	`EËm’tsA»A¼ay
(
poš‹r
,…oš‹¸+ 
couÁ
);

3987 
	}
}

3989 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
size_t
 
	gN
>

3990 
šlše
 
	gš‹º®
::
EËm’tsA»A¼ayM©ch”
<
T
> 
EËm’tsA»A¼ay
(

3991 cÚ¡ 
T
 (&
¬¿y
)[
N
]) {

3992  
EËm’tsA»A¼ay
(
¬¿y
, 
N
);

3995 
	g‹m¶©e
 <
ty³Çme
 
	gCÚš”
>

3996 
šlše
 
	gš‹º®
::
EËm’tsA»A¼ayM©ch”
<
ty³Çme
 
CÚš”
::
v®ue_ty³
>

3997 
	$EËm’tsA»A¼ay
(cÚ¡ 
CÚš”
& 
cÚš”
) {

3998  
	`EËm’tsA»A¼ay
(
cÚš”
.
	`begš
(), cÚš”.
	`’d
());

3999 
	}
}

4001 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

4002 
šlše
 
	gš‹º®
::
EËm’tsA»A¼ayM©ch”
<
T
>

4003 
EËm’tsA»A¼ay
(::
¡d
::
š™Ÿliz”_li¡
<
T
> 
xs
) {

4004  
EËm’tsA»A¼ay
(
xs
.
begš
(), xs.
’d
());

4020 
	g‹m¶©e
 <
ty³Çme
 
	gI‹r
>

4021 
šlše
 
	gš‹º®
::
UnÜd”edEËm’tsA»A¼ayM©ch”
<

4022 
ty³Çme
 ::
¡d
::
™”©Ü_Œa™s
<
I‹r
>::
v®ue_ty³
>

4023 
	$UnÜd”edEËm’tsA»A¼ay
(
I‹r
 
fœ¡
, I‹¸
Ï¡
) {

4024 
ty³Çme
 ::
	t¡d
::
	t™”©Ü_Œa™s
<
	tI‹r
>::
	tv®ue_ty³
 
	tT
;

4025  
š‹º®
::
UnÜd”edEËm’tsA»A¼ayM©ch”
<
T
>(

4026 
š‹º®
::
UnÜd”edM©ch”Requœe
::
ExaùM©ch
, 
fœ¡
, 
Ï¡
);

4027 
	}
}

4029 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

4030 
šlše
 
	gš‹º®
::
UnÜd”edEËm’tsA»A¼ayM©ch”
<
T
>

4031 
	$UnÜd”edEËm’tsA»A¼ay
(cÚ¡ 
T
* 
poš‹r
, 
size_t
 
couÁ
) {

4032  
	`UnÜd”edEËm’tsA»A¼ay
(
poš‹r
,…oš‹¸+ 
couÁ
);

4033 
	}
}

4035 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
size_t
 
	gN
>

4036 
šlše
 
	gš‹º®
::
UnÜd”edEËm’tsA»A¼ayM©ch”
<
T
>

4037 
UnÜd”edEËm’tsA»A¼ay
(cÚ¡ 
T
 (&
¬¿y
)[
N
]) {

4038  
UnÜd”edEËm’tsA»A¼ay
(
¬¿y
, 
N
);

4041 
	g‹m¶©e
 <
ty³Çme
 
	gCÚš”
>

4042 
šlše
 
	gš‹º®
::
UnÜd”edEËm’tsA»A¼ayM©ch”
<

4043 
ty³Çme
 
CÚš”
::
v®ue_ty³
>

4044 
	$UnÜd”edEËm’tsA»A¼ay
(cÚ¡ 
CÚš”
& 
cÚš”
) {

4045  
	`UnÜd”edEËm’tsA»A¼ay
(
cÚš”
.
	`begš
(), cÚš”.
	`’d
());

4046 
	}
}

4048 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

4049 
šlše
 
	gš‹º®
::
UnÜd”edEËm’tsA»A¼ayM©ch”
<
T
>

4050 
UnÜd”edEËm’tsA»A¼ay
(::
¡d
::
š™Ÿliz”_li¡
<
T
> 
xs
) {

4051  
UnÜd”edEËm’tsA»A¼ay
(
xs
.
begš
(), xs.
’d
());

4063 cÚ¡ 
	gš‹º®
::
AnythšgM©ch”
 
_
 = {};

4065 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

4066 
šlše
 
	gM©ch”
<
	gT
> 
	$A
() {

4067  
_
;

4068 
	}
}

4071 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

4072 
šlše
 
	gM©ch”
<
	gT
> 
	$An
() {

4073  
_
;

4074 
	}
}

4076 
	g‹m¶©e
 <
ty³Çme
 
	gT
,y³Çm
	gM
>

4077 
	gM©ch”
<
	gT
> 
	gš‹º®
::
M©ch”Ca¡Im¶
<
T
, 
	gM
>::
	$Ca¡Im¶
(

4078 cÚ¡ 
M
& 
v®ue
, 
¡d
::
çl£_ty³
 ,

4079 
¡d
::
çl£_ty³
 ) {

4080  
	`Eq
(
v®ue
);

4081 
	}
}

4084 
šlše
 
	gPŞymÜphicM©ch”
<
	gš‹º®
::
IsNuÎM©ch”
 > 
	$IsNuÎ
() {

4085  
	`MakePŞymÜphicM©ch”
(
š‹º®
::
	`IsNuÎM©ch”
());

4086 
	}
}

4091 
šlše
 
	gPŞymÜphicM©ch”
<
	gš‹º®
::
NÙNuÎM©ch”
 > 
	$NÙNuÎ
() {

4092  
	`MakePŞymÜphicM©ch”
(
š‹º®
::
	`NÙNuÎM©ch”
());

4093 
	}
}

4097 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

4098 
šlše
 
	gš‹º®
::
RefM©ch”
<
T
&> 
	$Ref
(
T
& 
x
) {

4099  
š‹º®
::
RefM©ch”
<
T
&>(
x
);

4100 
	}
}

4103 
šlše
 
	gPŞymÜphicM©ch”
<
	gš‹º®
::
IsNªM©ch”
> 
	$IsNª
() {

4104  
	`MakePŞymÜphicM©ch”
(
š‹º®
::
	`IsNªM©ch”
());

4105 
	}
}

4109 
šlše
 
	gš‹º®
::
FlßtšgEqM©ch”
<> 
	$DoubËEq
(
rhs
) {

4110  
š‹º®
::
FlßtšgEqM©ch”
<>(
rhs
, 
çl£
);

4111 
	}
}

4115 
šlše
 
	gš‹º®
::
FlßtšgEqM©ch”
<> 
	$NªS’s™iveDoubËEq
(
rhs
) {

4116  
š‹º®
::
FlßtšgEqM©ch”
<>(
rhs
, 
Œue
);

4117 
	}
}

4122 
šlše
 
	gš‹º®
::
FlßtšgEqM©ch”
<> 
	$DoubËN—r
(

4123 
rhs
, 
max_abs_”rÜ
) {

4124  
š‹º®
::
FlßtšgEqM©ch”
<>(
rhs
, 
çl£
, 
max_abs_”rÜ
);

4125 
	}
}

4130 
šlše
 
	gš‹º®
::
FlßtšgEqM©ch”
<> 
	$NªS’s™iveDoubËN—r
(

4131 
rhs
, 
max_abs_”rÜ
) {

4132  
š‹º®
::
FlßtšgEqM©ch”
<>(
rhs
, 
Œue
, 
max_abs_”rÜ
);

4133 
	}
}

4137 
šlše
 
	gš‹º®
::
FlßtšgEqM©ch”
<> 
	$FlßtEq
(
rhs
) {

4138  
š‹º®
::
FlßtšgEqM©ch”
<>(
rhs
, 
çl£
);

4139 
	}
}

4143 
šlše
 
	gš‹º®
::
FlßtšgEqM©ch”
<> 
	$NªS’s™iveFlßtEq
(
rhs
) {

4144  
š‹º®
::
FlßtšgEqM©ch”
<>(
rhs
, 
Œue
);

4145 
	}
}

4150 
šlše
 
	gš‹º®
::
FlßtšgEqM©ch”
<> 
	$FlßtN—r
(

4151 
rhs
, 
max_abs_”rÜ
) {

4152  
š‹º®
::
FlßtšgEqM©ch”
<>(
rhs
, 
çl£
, 
max_abs_”rÜ
);

4153 
	}
}

4158 
šlše
 
	gš‹º®
::
FlßtšgEqM©ch”
<> 
	$NªS’s™iveFlßtN—r
(

4159 
rhs
, 
max_abs_”rÜ
) {

4160  
š‹º®
::
FlßtšgEqM©ch”
<>(
rhs
, 
Œue
, 
max_abs_”rÜ
);

4161 
	}
}

4165 
	g‹m¶©e
 <
ty³Çme
 
	gIÂ”M©ch”
>

4166 
šlše
 
	gš‹º®
::
Poš‹eM©ch”
<
IÂ”M©ch”
> 
	$Poš‹e
(

4167 cÚ¡ 
IÂ”M©ch”
& 
šÃr_m©ch”
) {

4168  
š‹º®
::
Poš‹eM©ch”
<
IÂ”M©ch”
>(
šÃr_m©ch”
);

4169 
	}
}

4171 #ià
GTEST_HAS_RTTI


4178 
	g‹m¶©e
 <
ty³Çme
 
	gTo
>

4179 
šlše
 
	gPŞymÜphicM©ch”
<
	gš‹º®
::
Wh’DyÇmicCa¡ToM©ch”
<
To
> >

4180 
Wh’DyÇmicCa¡To
(cÚ¡ 
M©ch”
<
To
>& 
šÃr_m©ch”
) {

4181  
MakePŞymÜphicM©ch”
(

4182 
š‹º®
::
Wh’DyÇmicCa¡ToM©ch”
<
To
>(
šÃr_m©ch”
));

4190 
	g‹m¶©e
 <
ty³Çme
 
	gCÏss
,y³Çm
	gF›ldTy³
,y³Çm
	gF›ldM©ch”
>

4191 
šlše
 
	gPŞymÜphicM©ch”
<

4192 
	gš‹º®
::
F›ldM©ch”
<
CÏss
, 
	gF›ldTy³
> > 
	$F›ld
(

4193 
F›ldTy³
 
CÏss
::*
f›ld
, cÚ¡ 
F›ldM©ch”
& 
m©ch”
) {

4194  
	`MakePŞymÜphicM©ch”
(

4195 
š‹º®
::
F›ldM©ch”
<
CÏss
, 
F›ldTy³
>(

4196 
f›ld
, 
M©ch”Ca¡
<cÚ¡ 
F›ldTy³
&>(
m©ch”
)));

4201 
	}
}

4205 
	g‹m¶©e
 <
ty³Çme
 
	gCÏss
,y³Çm
	gF›ldTy³
,y³Çm
	gF›ldM©ch”
>

4206 
šlše
 
	gPŞymÜphicM©ch”
<
	gš‹º®
::
F›ldM©ch”
<
CÏss
, 
	gF›ldTy³
> > 
	$F›ld
(

4207 cÚ¡ 
¡d
::
¡ršg
& 
f›ld_Çme
, 
F›ldTy³
 
CÏss
::*
f›ld
,

4208 cÚ¡ 
F›ldM©ch”
& 
m©ch”
) {

4209  
	`MakePŞymÜphicM©ch”
(
š‹º®
::
F›ldM©ch”
<
CÏss
, 
F›ldTy³
>(

4210 
f›ld_Çme
, 
f›ld
, 
M©ch”Ca¡
<cÚ¡ 
F›ldTy³
&>(
m©ch”
)));

4211 
	}
}

4217 
	g‹m¶©e
 <
ty³Çme
 
	gCÏss
,y³Çm
	gPrİ”tyTy³
,y³Çm
	gPrİ”tyM©ch”
>

4218 
šlše
 
	gPŞymÜphicM©ch”
<
	gš‹º®
::
Prİ”tyM©ch”
<

4219 
CÏss
, 
	gPrİ”tyTy³
, 
	$Prİ”tyTy³
 (
CÏss
::*)() const> >

4220 
	`Prİ”ty
(
	$Prİ”tyTy³
 (
CÏss
::*
´İ”ty
)() const,

4221 cÚ¡ 
Prİ”tyM©ch”
& 
m©ch”
) {

4222  
	`MakePŞymÜphicM©ch”
(

4223 
š‹º®
::
Prİ”tyM©ch”
<
CÏss
, 
Prİ”tyTy³
,

4224 
	`Prİ”tyTy³
 (
CÏss
::*)() const>(

4225 
´İ”ty
, 
M©ch”Ca¡
<cÚ¡ 
Prİ”tyTy³
&>(
m©ch”
)));

4230 
	}
}

4234 
	g‹m¶©e
 <
ty³Çme
 
	gCÏss
,y³Çm
	gPrİ”tyTy³
,y³Çm
	gPrİ”tyM©ch”
>

4235 
šlše
 
	gPŞymÜphicM©ch”
<
	gš‹º®
::
Prİ”tyM©ch”
<

4236 
CÏss
, 
	gPrİ”tyTy³
, 
	$Prİ”tyTy³
 (
CÏss
::*)() const> >

4237 
	`Prİ”ty
(cÚ¡ 
¡d
::
¡ršg
& 
´İ”ty_Çme
,

4238 
	$Prİ”tyTy³
 (
CÏss
::*
´İ”ty
)() const,

4239 cÚ¡ 
Prİ”tyM©ch”
& 
m©ch”
) {

4240  
	`MakePŞymÜphicM©ch”
(

4241 
š‹º®
::
Prİ”tyM©ch”
<
CÏss
, 
Prİ”tyTy³
,

4242 
	`Prİ”tyTy³
 (
CÏss
::*)() const>(

4243 
´İ”ty_Çme
, 
´İ”ty
, 
M©ch”Ca¡
<cÚ¡ 
Prİ”tyTy³
&>(
m©ch”
)));

4244 
	}
}

4247 
	g‹m¶©e
 <
ty³Çme
 
	gCÏss
,y³Çm
	gPrİ”tyTy³
,y³Çm
	gPrİ”tyM©ch”
>

4248 
šlše
 
	gPŞymÜphicM©ch”
<
	gš‹º®
::
Prİ”tyM©ch”
<

4249 
CÏss
, 
	gPrİ”tyTy³
, 
	$Prİ”tyTy³
 (
CÏss
::*)() const &> >

4250 
	`Prİ”ty
(
	$Prİ”tyTy³
 (
CÏss
::*
´İ”ty
)() const &,

4251 cÚ¡ 
Prİ”tyM©ch”
& 
m©ch”
) {

4252  
	`MakePŞymÜphicM©ch”
(

4253 
š‹º®
::
Prİ”tyM©ch”
<
CÏss
, 
Prİ”tyTy³
,

4254 
	`Prİ”tyTy³
 (
CÏss
::*)() const&>(

4255 
´İ”ty
, 
M©ch”Ca¡
<cÚ¡ 
Prİ”tyTy³
&>(
m©ch”
)));

4256 
	}
}

4259 
	g‹m¶©e
 <
ty³Çme
 
	gCÏss
,y³Çm
	gPrİ”tyTy³
,y³Çm
	gPrİ”tyM©ch”
>

4260 
šlše
 
	gPŞymÜphicM©ch”
<
	gš‹º®
::
Prİ”tyM©ch”
<

4261 
CÏss
, 
	gPrİ”tyTy³
, 
	$Prİ”tyTy³
 (
CÏss
::*)() const &> >

4262 
	`Prİ”ty
(cÚ¡ 
¡d
::
¡ršg
& 
´İ”ty_Çme
,

4263 
	$Prİ”tyTy³
 (
CÏss
::*
´İ”ty
)() const &,

4264 cÚ¡ 
Prİ”tyM©ch”
& 
m©ch”
) {

4265  
	`MakePŞymÜphicM©ch”
(

4266 
š‹º®
::
Prİ”tyM©ch”
<
CÏss
, 
Prİ”tyTy³
,

4267 
	`Prİ”tyTy³
 (
CÏss
::*)() const&>(

4268 
´İ”ty_Çme
, 
´İ”ty
, 
M©ch”Ca¡
<cÚ¡ 
Prİ”tyTy³
&>(
m©ch”
)));

4269 
	}
}

4279 
	g‹m¶©e
 <
ty³Çme
 
	gC®ÏbË
,y³Çm
	gIÂ”M©ch”
>

4280 
	gš‹º®
::
ResuÉOfM©ch”
<
C®ÏbË
, 
	gIÂ”M©ch”
> 
	$ResuÉOf
(

4281 
C®ÏbË
 
ÿÎabË
, 
IÂ”M©ch”
 
m©ch”
) {

4282  
š‹º®
::
ResuÉOfM©ch”
<
C®ÏbË
, 
IÂ”M©ch”
>(

4283 
¡d
::
	`move
(
ÿÎabË
), std::move(
m©ch”
));

4284 
	}
}

4289 
	g‹m¶©e
 <
ty³Çme
 
	gT
 = 
¡d
::
¡ršg
>

4290 
PŞymÜphicM©ch”
<
š‹º®
::
SŒEqu®™yM©ch”
<
¡d
::
¡ršg
> > 
SŒEq
(

4291 cÚ¡ 
š‹º®
::
SŒšgLike
<
T
>& 
¡r
) {

4292  
MakePŞymÜphicM©ch”
(

4293 
š‹º®
::
SŒEqu®™yM©ch”
<
¡d
::
¡ršg
>(¡d::¡ršg(
¡r
), 
Œue
,rue));

4297 
	g‹m¶©e
 <
ty³Çme
 
	gT
 = 
¡d
::
¡ršg
>

4298 
PŞymÜphicM©ch”
<
š‹º®
::
SŒEqu®™yM©ch”
<
¡d
::
¡ršg
> > 
SŒNe
(

4299 cÚ¡ 
š‹º®
::
SŒšgLike
<
T
>& 
¡r
) {

4300  
MakePŞymÜphicM©ch”
(

4301 
š‹º®
::
SŒEqu®™yM©ch”
<
¡d
::
¡ršg
>(¡d::¡ršg(
¡r
), 
çl£
, 
Œue
));

4305 
	g‹m¶©e
 <
ty³Çme
 
	gT
 = 
¡d
::
¡ršg
>

4306 
PŞymÜphicM©ch”
<
š‹º®
::
SŒEqu®™yM©ch”
<
¡d
::
¡ršg
> > 
SŒCa£Eq
(

4307 cÚ¡ 
š‹º®
::
SŒšgLike
<
T
>& 
¡r
) {

4308  
MakePŞymÜphicM©ch”
(

4309 
š‹º®
::
SŒEqu®™yM©ch”
<
¡d
::
¡ršg
>(¡d::¡ršg(
¡r
), 
Œue
, 
çl£
));

4313 
	g‹m¶©e
 <
ty³Çme
 
	gT
 = 
¡d
::
¡ršg
>

4314 
PŞymÜphicM©ch”
<
š‹º®
::
SŒEqu®™yM©ch”
<
¡d
::
¡ršg
> > 
SŒCa£Ne
(

4315 cÚ¡ 
š‹º®
::
SŒšgLike
<
T
>& 
¡r
) {

4316  
MakePŞymÜphicM©ch”
(
š‹º®
::
SŒEqu®™yM©ch”
<
¡d
::
¡ršg
>(

4317 
¡d
::
¡ršg
(
¡r
), 
çl£
, false));

4322 
	g‹m¶©e
 <
ty³Çme
 
	gT
 = 
¡d
::
¡ršg
>

4323 
PŞymÜphicM©ch”
<
š‹º®
::
HasSub¡rM©ch”
<
¡d
::
¡ršg
> > 
HasSub¡r
(

4324 cÚ¡ 
š‹º®
::
SŒšgLike
<
T
>& 
sub¡ršg
) {

4325  
MakePŞymÜphicM©ch”
(

4326 
š‹º®
::
HasSub¡rM©ch”
<
¡d
::
¡ršg
>(¡d::¡ršg(
sub¡ršg
)));

4330 
	g‹m¶©e
 <
ty³Çme
 
	gT
 = 
¡d
::
¡ršg
>

4331 
PŞymÜphicM©ch”
<
š‹º®
::
S¹sW™hM©ch”
<
¡d
::
¡ršg
> > 
S¹sW™h
(

4332 cÚ¡ 
š‹º®
::
SŒšgLike
<
T
>& 
´efix
) {

4333  
MakePŞymÜphicM©ch”
(

4334 
š‹º®
::
S¹sW™hM©ch”
<
¡d
::
¡ršg
>(¡d::¡ršg(
´efix
)));

4338 
	g‹m¶©e
 <
ty³Çme
 
	gT
 = 
¡d
::
¡ršg
>

4339 
PŞymÜphicM©ch”
<
š‹º®
::
EndsW™hM©ch”
<
¡d
::
¡ršg
> > 
EndsW™h
(

4340 cÚ¡ 
š‹º®
::
SŒšgLike
<
T
>& 
suffix
) {

4341  
MakePŞymÜphicM©ch”
(

4342 
š‹º®
::
EndsW™hM©ch”
<
¡d
::
¡ršg
>(¡d::¡ršg(
suffix
)));

4345 #ià
GTEST_HAS_STD_WSTRING


4349 
šlše
 
	gPŞymÜphicM©ch”
<
	gš‹º®
::
SŒEqu®™yM©ch”
<
¡d
::
w¡ršg
> > 
	$SŒEq
(

4350 cÚ¡ 
¡d
::
w¡ršg
& 
¡r
) {

4351  
	`MakePŞymÜphicM©ch”
(

4352 
š‹º®
::
SŒEqu®™yM©ch”
<
¡d
::
w¡ršg
>(
¡r
, 
Œue
,rue));

4353 
	}
}

4356 
šlše
 
	gPŞymÜphicM©ch”
<
	gš‹º®
::
SŒEqu®™yM©ch”
<
¡d
::
w¡ršg
> > 
	$SŒNe
(

4357 cÚ¡ 
¡d
::
w¡ršg
& 
¡r
) {

4358  
	`MakePŞymÜphicM©ch”
(

4359 
š‹º®
::
SŒEqu®™yM©ch”
<
¡d
::
w¡ršg
>(
¡r
, 
çl£
, 
Œue
));

4360 
	}
}

4363 
šlše
 
	gPŞymÜphicM©ch”
<
	gš‹º®
::
SŒEqu®™yM©ch”
<
¡d
::
w¡ršg
> >

4364 
	$SŒCa£Eq
(cÚ¡ 
¡d
::
w¡ršg
& 
¡r
) {

4365  
	`MakePŞymÜphicM©ch”
(

4366 
š‹º®
::
SŒEqu®™yM©ch”
<
¡d
::
w¡ršg
>(
¡r
, 
Œue
, 
çl£
));

4367 
	}
}

4370 
šlše
 
	gPŞymÜphicM©ch”
<
	gš‹º®
::
SŒEqu®™yM©ch”
<
¡d
::
w¡ršg
> >

4371 
	$SŒCa£Ne
(cÚ¡ 
¡d
::
w¡ršg
& 
¡r
) {

4372  
	`MakePŞymÜphicM©ch”
(

4373 
š‹º®
::
SŒEqu®™yM©ch”
<
¡d
::
w¡ršg
>(
¡r
, 
çl£
, false));

4374 
	}
}

4378 
šlše
 
	gPŞymÜphicM©ch”
<
	gš‹º®
::
HasSub¡rM©ch”
<
¡d
::
w¡ršg
> > 
	$HasSub¡r
(

4379 cÚ¡ 
¡d
::
w¡ršg
& 
sub¡ršg
) {

4380  
	`MakePŞymÜphicM©ch”
(

4381 
š‹º®
::
HasSub¡rM©ch”
<
¡d
::
w¡ršg
>(
sub¡ršg
));

4382 
	}
}

4385 
šlše
 
	gPŞymÜphicM©ch”
<
	gš‹º®
::
S¹sW™hM©ch”
<
¡d
::
w¡ršg
> >

4386 
	$S¹sW™h
(cÚ¡ 
¡d
::
w¡ršg
& 
´efix
) {

4387  
	`MakePŞymÜphicM©ch”
(

4388 
š‹º®
::
S¹sW™hM©ch”
<
¡d
::
w¡ršg
>(
´efix
));

4389 
	}
}

4392 
šlše
 
	gPŞymÜphicM©ch”
<
	gš‹º®
::
EndsW™hM©ch”
<
¡d
::
w¡ršg
> > 
	$EndsW™h
(

4393 cÚ¡ 
¡d
::
w¡ršg
& 
suffix
) {

4394  
	`MakePŞymÜphicM©ch”
(

4395 
š‹º®
::
EndsW™hM©ch”
<
¡d
::
w¡ršg
>(
suffix
));

4396 
	}
}

4402 
šlše
 
	gš‹º®
::
Eq2M©ch”
 
	$Eq
(è{  
š‹º®
::
	`Eq2M©ch”
(); 
	}
}

4406 
šlše
 
	gš‹º®
::
Ge2M©ch”
 
	$Ge
(è{  
š‹º®
::
	`Ge2M©ch”
(); 
	}
}

4410 
šlše
 
	gš‹º®
::
Gt2M©ch”
 
	$Gt
(è{  
š‹º®
::
	`Gt2M©ch”
(); 
	}
}

4414 
šlše
 
	gš‹º®
::
Le2M©ch”
 
	$Le
(è{  
š‹º®
::
	`Le2M©ch”
(); 
	}
}

4418 
šlše
 
	gš‹º®
::
Lt2M©ch”
 
	$Lt
(è{  
š‹º®
::
	`Lt2M©ch”
(); 
	}
}

4422 
šlše
 
	gš‹º®
::
Ne2M©ch”
 
	$Ne
(è{  
š‹º®
::
	`Ne2M©ch”
(); 
	}
}

4426 
šlše
 
	gš‹º®
::
FlßtšgEq2M©ch”
<> 
	$FlßtEq
() {

4427  
š‹º®
::
FlßtšgEq2M©ch”
<>();

4428 
	}
}

4432 
šlše
 
	gš‹º®
::
FlßtšgEq2M©ch”
<> 
	$DoubËEq
() {

4433  
š‹º®
::
FlßtšgEq2M©ch”
<>();

4434 
	}
}

4438 
šlše
 
	gš‹º®
::
FlßtšgEq2M©ch”
<> 
	$NªS’s™iveFlßtEq
() {

4439  
š‹º®
::
FlßtšgEq2M©ch”
<>(
Œue
);

4440 
	}
}

4444 
šlše
 
	gš‹º®
::
FlßtšgEq2M©ch”
<> 
	$NªS’s™iveDoubËEq
() {

4445  
š‹º®
::
FlßtšgEq2M©ch”
<>(
Œue
);

4446 
	}
}

4450 
šlše
 
	gš‹º®
::
FlßtšgEq2M©ch”
<> 
	$FlßtN—r
(
max_abs_”rÜ
) {

4451  
š‹º®
::
FlßtšgEq2M©ch”
<>(
max_abs_”rÜ
);

4452 
	}
}

4456 
šlše
 
	gš‹º®
::
FlßtšgEq2M©ch”
<> 
	$DoubËN—r
(
max_abs_”rÜ
) {

4457  
š‹º®
::
FlßtšgEq2M©ch”
<>(
max_abs_”rÜ
);

4458 
	}
}

4463 
šlše
 
	gš‹º®
::
FlßtšgEq2M©ch”
<> 
	$NªS’s™iveFlßtN—r
(

4464 
max_abs_”rÜ
) {

4465  
š‹º®
::
FlßtšgEq2M©ch”
<>(
max_abs_”rÜ
, 
Œue
);

4466 
	}
}

4471 
šlše
 
	gš‹º®
::
FlßtšgEq2M©ch”
<> 
	$NªS’s™iveDoubËN—r
(

4472 
max_abs_”rÜ
) {

4473  
š‹º®
::
FlßtšgEq2M©ch”
<>(
max_abs_”rÜ
, 
Œue
);

4474 
	}
}

4478 
	g‹m¶©e
 <
ty³Çme
 
	gIÂ”M©ch”
>

4479 
šlše
 
	gš‹º®
::
NÙM©ch”
<
IÂ”M©ch”
> 
	$NÙ
(
IÂ”M©ch”
 
m
) {

4480  
š‹º®
::
NÙM©ch”
<
IÂ”M©ch”
>(
m
);

4481 
	}
}

4486 
	g‹m¶©e
 <
ty³Çme
 
	gP»diÿ‹
>

4487 
šlše
 
	gPŞymÜphicM©ch”
<
	gš‹º®
::
TrulyM©ch”
<
P»diÿ‹
> >

4488 
	$Truly
(
P»diÿ‹
 
´ed
) {

4489  
	`MakePŞymÜphicM©ch”
(
š‹º®
::
TrulyM©ch”
<
P»diÿ‹
>(
´ed
));

4490 
	}
}

4498 
	g‹m¶©e
 <
ty³Çme
 
	gSizeM©ch”
>

4499 
šlše
 
	gš‹º®
::
SizeIsM©ch”
<
SizeM©ch”
>

4500 
	$SizeIs
(cÚ¡ 
SizeM©ch”
& 
size_m©ch”
) {

4501  
š‹º®
::
SizeIsM©ch”
<
SizeM©ch”
>(
size_m©ch”
);

4502 
	}
}

4509 
	g‹m¶©e
 <
ty³Çme
 
	gDi¡ªûM©ch”
>

4510 
šlše
 
	gš‹º®
::
BegšEndDi¡ªûIsM©ch”
<
Di¡ªûM©ch”
>

4511 
	$BegšEndDi¡ªûIs
(cÚ¡ 
Di¡ªûM©ch”
& 
di¡ªû_m©ch”
) {

4512  
š‹º®
::
BegšEndDi¡ªûIsM©ch”
<
Di¡ªûM©ch”
>(
di¡ªû_m©ch”
);

4513 
	}
}

4519 
	g‹m¶©e
 <
ty³Çme
 
	gCÚš”
>

4520 
šlše
 
	gPŞymÜphicM©ch”
<
	gš‹º®
::
CÚš”EqM©ch”
<

4521 
ty³Çme
 
¡d
::
»move_cÚ¡
<
CÚš”
>::
ty³
>>

4522 
	$CÚš”Eq
(cÚ¡ 
CÚš”
& 
rhs
) {

4523  
	`MakePŞymÜphicM©ch”
(
š‹º®
::
CÚš”EqM©ch”
<
CÚš”
>(
rhs
));

4524 
	}
}

4528 
	g‹m¶©e
 <
ty³Çme
 
	gCom·¿tÜ
,y³Çm
	gCÚš”M©ch”
>

4529 
šlše
 
	gš‹º®
::
Wh’SÜ‹dByM©ch”
<
Com·¿tÜ
, 
	gCÚš”M©ch”
>

4530 
	$Wh’SÜ‹dBy
(cÚ¡ 
Com·¿tÜ
& 
com·¿tÜ
,

4531 cÚ¡ 
CÚš”M©ch”
& 
cÚš”_m©ch”
) {

4532  
š‹º®
::
Wh’SÜ‹dByM©ch”
<
Com·¿tÜ
, 
CÚš”M©ch”
>(

4533 
com·¿tÜ
, 
cÚš”_m©ch”
);

4534 
	}
}

4538 
	g‹m¶©e
 <
ty³Çme
 
	gCÚš”M©ch”
>

4539 
šlše
 
	gš‹º®
::
Wh’SÜ‹dByM©ch”
<
š‹º®
::
LessCom·¿tÜ
, 
	gCÚš”M©ch”
>

4540 
	$Wh’SÜ‹d
(cÚ¡ 
CÚš”M©ch”
& 
cÚš”_m©ch”
) {

4542 
š‹º®
::
Wh’SÜ‹dByM©ch”
<š‹º®::
LessCom·¿tÜ
, 
CÚš”M©ch”
>(

4543 
š‹º®
::
	`LessCom·¿tÜ
(), 
cÚš”_m©ch”
);

4544 
	}
}

4552 
	g‹m¶©e
 <
ty³Çme
 
	gTu¶eM©ch”
,y³Çm
	gCÚš”
>

4553 
šlše
 
	gš‹º®
::
Poštwi£M©ch”
<
Tu¶eM©ch”
,

4554 
ty³Çme
 
	g¡d
::
»move_cÚ¡
<
CÚš”
>::
ty³
>

4555 
	$Poštwi£
(cÚ¡ 
Tu¶eM©ch”
& 
tu¶e_m©ch”
, cÚ¡ 
CÚš”
& 
rhs
) {

4556  
š‹º®
::
Poštwi£M©ch”
<
Tu¶eM©ch”
, 
CÚš”
>(
tu¶e_m©ch”
,

4557 
rhs
);

4558 
	}
}

4562 
	g‹m¶©e
 <
ty³Çme
 
	gTu¶eM©ch”
,y³Çm
	gT
>

4563 
šlše
 
	gš‹º®
::
Poštwi£M©ch”
<
Tu¶eM©ch”
, 
	g¡d
::
veùÜ
<
T
> > 
Poštwi£
(

4564 cÚ¡ 
Tu¶eM©ch”
& 
tu¶e_m©ch”
, 
¡d
::
š™Ÿliz”_li¡
<
T
> 
rhs
) {

4565  
Poštwi£
(
tu¶e_m©ch”
, 
¡d
::
veùÜ
<
T
>(
rhs
));

4580 
	g‹m¶©e
 <
ty³Çme
 
	gTu¶e2M©ch”
,y³Çm
	gRhsCÚš”
>

4581 
šlše
 
	gš‹º®
::
UnÜd”edEËm’tsA»A¼ayM©ch”
<

4582 
ty³Çme
 
š‹º®
::
BoundSecÚdM©ch”
<

4583 
Tu¶e2M©ch”
,

4584 
ty³Çme
 
	gš‹º®
::
SCÚš”V›w
<

4585 
ty³Çme
 
¡d
::
»move_cÚ¡
<
RhsCÚš”
>::
ty³
>::ty³::
v®ue_ty³
>>

4586 
	$UnÜd”edPoštwi£
(cÚ¡ 
Tu¶e2M©ch”
& 
tu¶e2_m©ch”
,

4587 cÚ¡ 
RhsCÚš”
& 
rhs_cÚš”
) {

4590 
ty³Çme
 
	tš‹º®
::
	tSCÚš”V›w
<
	tRhsCÚš”
> 
	tRhsV›w
;

4591 
ty³Çme
 
	tRhsV›w
::
	tty³
 
	tRhsSCÚš”
;

4592 
ty³Çme
 
	tRhsSCÚš”
::
	tv®ue_ty³
 
	tSecÚd
;

4593 cÚ¡ 
RhsSCÚš”
& 
rhs_¡l_cÚš”
 =

4594 
RhsV›w
::
	`CÚ¡Reã»nû
(
rhs_cÚš”
);

4597 ::
¡d
::
veùÜ
<
š‹º®
::
BoundSecÚdM©ch”
<
Tu¶e2M©ch”
, 
SecÚd
> > 
m©ch”s
;

4598 
ty³Çme
 
RhsSCÚš”
::
cÚ¡_™”©Ü
 
™
 = 
rhs_¡l_cÚš”
.
	`begš
();

4599 
™
 !ğ
rhs_¡l_cÚš”
.
	`’d
(); ++it) {

4600 
m©ch”s
.
	`push_back
(

4601 
š‹º®
::
	`M©ch”BšdSecÚd
(
tu¶e2_m©ch”
, *
™
));

4605  
	`UnÜd”edEËm’tsA»A¼ay
(
m©ch”s
);

4606 
	}
}

4610 
	g‹m¶©e
 <
ty³Çme
 
	gTu¶e2M©ch”
,y³Çm
	gT
>

4611 
šlše
 
	gš‹º®
::
UnÜd”edEËm’tsA»A¼ayM©ch”
<

4612 
ty³Çme
 
š‹º®
::
BoundSecÚdM©ch”
<
Tu¶e2M©ch”
, 
	gT
> >

4613 
UnÜd”edPoštwi£
(cÚ¡ 
Tu¶e2M©ch”
& 
tu¶e2_m©ch”
,

4614 
¡d
::
š™Ÿliz”_li¡
<
T
> 
rhs
) {

4615  
UnÜd”edPoštwi£
(
tu¶e2_m©ch”
, 
¡d
::
veùÜ
<
T
>(
rhs
));

4637 
	g‹m¶©e
 <
ty³Çme
 
	gM
>

4638 
šlše
 
	gš‹º®
::
CÚšsM©ch”
<
M
> 
	$CÚšs
(
M
 
m©ch”
) {

4639  
š‹º®
::
CÚšsM©ch”
<
M
>(
m©ch”
);

4640 
	}
}

4669 
	g‹m¶©e
 <
ty³Çme
 
	gI‹r
>

4670 
šlše
 
	gš‹º®
::
UnÜd”edEËm’tsA»A¼ayM©ch”
<

4671 
ty³Çme
 ::
¡d
::
™”©Ü_Œa™s
<
I‹r
>::
v®ue_ty³
>

4672 
	$IsSu³r£tOf
(
I‹r
 
fœ¡
, I‹¸
Ï¡
) {

4673 
ty³Çme
 ::
	t¡d
::
	t™”©Ü_Œa™s
<
	tI‹r
>::
	tv®ue_ty³
 
	tT
;

4674  
š‹º®
::
UnÜd”edEËm’tsA»A¼ayM©ch”
<
T
>(

4675 
š‹º®
::
UnÜd”edM©ch”Requœe
::
Su³r£t
, 
fœ¡
, 
Ï¡
);

4676 
	}
}

4678 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

4679 
šlše
 
	gš‹º®
::
UnÜd”edEËm’tsA»A¼ayM©ch”
<
T
> 
	$IsSu³r£tOf
(

4680 cÚ¡ 
T
* 
poš‹r
, 
size_t
 
couÁ
) {

4681  
	`IsSu³r£tOf
(
poš‹r
,…oš‹¸+ 
couÁ
);

4682 
	}
}

4684 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
size_t
 
	gN
>

4685 
šlše
 
	gš‹º®
::
UnÜd”edEËm’tsA»A¼ayM©ch”
<
T
> 
IsSu³r£tOf
(

4686 cÚ¡ 
T
 (&
¬¿y
)[
N
]) {

4687  
IsSu³r£tOf
(
¬¿y
, 
N
);

4690 
	g‹m¶©e
 <
ty³Çme
 
	gCÚš”
>

4691 
šlše
 
	gš‹º®
::
UnÜd”edEËm’tsA»A¼ayM©ch”
<

4692 
ty³Çme
 
CÚš”
::
v®ue_ty³
>

4693 
	$IsSu³r£tOf
(cÚ¡ 
CÚš”
& 
cÚš”
) {

4694  
	`IsSu³r£tOf
(
cÚš”
.
	`begš
(), cÚš”.
	`’d
());

4695 
	}
}

4697 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

4698 
šlše
 
	gš‹º®
::
UnÜd”edEËm’tsA»A¼ayM©ch”
<
T
> 
IsSu³r£tOf
(

4699 ::
¡d
::
š™Ÿliz”_li¡
<
T
> 
xs
) {

4700  
IsSu³r£tOf
(
xs
.
begš
(), xs.
’d
());

4726 
	g‹m¶©e
 <
ty³Çme
 
	gI‹r
>

4727 
šlše
 
	gš‹º®
::
UnÜd”edEËm’tsA»A¼ayM©ch”
<

4728 
ty³Çme
 ::
¡d
::
™”©Ü_Œa™s
<
I‹r
>::
v®ue_ty³
>

4729 
	$IsSub£tOf
(
I‹r
 
fœ¡
, I‹¸
Ï¡
) {

4730 
ty³Çme
 ::
	t¡d
::
	t™”©Ü_Œa™s
<
	tI‹r
>::
	tv®ue_ty³
 
	tT
;

4731  
š‹º®
::
UnÜd”edEËm’tsA»A¼ayM©ch”
<
T
>(

4732 
š‹º®
::
UnÜd”edM©ch”Requœe
::
Sub£t
, 
fœ¡
, 
Ï¡
);

4733 
	}
}

4735 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

4736 
šlše
 
	gš‹º®
::
UnÜd”edEËm’tsA»A¼ayM©ch”
<
T
> 
	$IsSub£tOf
(

4737 cÚ¡ 
T
* 
poš‹r
, 
size_t
 
couÁ
) {

4738  
	`IsSub£tOf
(
poš‹r
,…oš‹¸+ 
couÁ
);

4739 
	}
}

4741 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
size_t
 
	gN
>

4742 
šlše
 
	gš‹º®
::
UnÜd”edEËm’tsA»A¼ayM©ch”
<
T
> 
IsSub£tOf
(

4743 cÚ¡ 
T
 (&
¬¿y
)[
N
]) {

4744  
IsSub£tOf
(
¬¿y
, 
N
);

4747 
	g‹m¶©e
 <
ty³Çme
 
	gCÚš”
>

4748 
šlše
 
	gš‹º®
::
UnÜd”edEËm’tsA»A¼ayM©ch”
<

4749 
ty³Çme
 
CÚš”
::
v®ue_ty³
>

4750 
	$IsSub£tOf
(cÚ¡ 
CÚš”
& 
cÚš”
) {

4751  
	`IsSub£tOf
(
cÚš”
.
	`begš
(), cÚš”.
	`’d
());

4752 
	}
}

4754 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

4755 
šlše
 
	gš‹º®
::
UnÜd”edEËm’tsA»A¼ayM©ch”
<
T
> 
IsSub£tOf
(

4756 ::
¡d
::
š™Ÿliz”_li¡
<
T
> 
xs
) {

4757  
IsSub£tOf
(
xs
.
begš
(), xs.
’d
());

4787 
	g‹m¶©e
 <
ty³Çme
 
	gM
>

4788 
šlše
 
	gš‹º®
::
EachM©ch”
<
M
> 
	$Each
(
M
 
m©ch”
) {

4789  
š‹º®
::
EachM©ch”
<
M
>(
m©ch”
);

4790 
	}
}

4795 
	g‹m¶©e
 <
ty³Çme
 
	gM
>

4796 
šlše
 
	gš‹º®
::
KeyM©ch”
<
M
> 
	$Key
(
M
 
šÃr_m©ch”
) {

4797  
š‹º®
::
KeyM©ch”
<
M
>(
šÃr_m©ch”
);

4798 
	}
}

4805 
	g‹m¶©e
 <
ty³Çme
 
	gFœ¡M©ch”
,y³Çm
	gSecÚdM©ch”
>

4806 
šlše
 
	gš‹º®
::
PaœM©ch”
<
Fœ¡M©ch”
, 
	gSecÚdM©ch”
>

4807 
	$Paœ
(
Fœ¡M©ch”
 
fœ¡_m©ch”
, 
SecÚdM©ch”
 
£cÚd_m©ch”
) {

4808  
š‹º®
::
PaœM©ch”
<
Fœ¡M©ch”
, 
SecÚdM©ch”
>(

4809 
fœ¡_m©ch”
, 
£cÚd_m©ch”
);

4810 
	}
}

4812 
Çme¥aû
 
	gno_adl
 {

4817 
	g‹m¶©e
 <
	gty³Çme
... 
	gM
>

4818 
	gš‹º®
::
F›ldsA»M©ch”
<
ty³Çme
 
¡d
::
deÿy
<
M
>::
ty³
...> 
F›ldsA»
(

4819 
M
&&... 
m©ch”s
) {

4820  
š‹º®
::
F›ldsA»M©ch”
<
ty³Çme
 
¡d
::
deÿy
<
M
>::
ty³
...>(

4821 
¡d
::
fÜw¬d
<
M
>(
m©ch”s
)...);

4826 
	g‹m¶©e
 <
ty³Çme
 
	gIÂ”M©ch”
>

4827 
šlše
 
	gš‹º®
::
Poš‹rM©ch”
<
IÂ”M©ch”
> 
Poš‹r
(

4828 cÚ¡ 
IÂ”M©ch”
& 
šÃr_m©ch”
) {

4829  
š‹º®
::
Poš‹rM©ch”
<
IÂ”M©ch”
>(
šÃr_m©ch”
);

4834 
	g‹m¶©e
 <
ty³Çme
 
	gIÂ”M©ch”
>

4835 
šlše
 
	gš‹º®
::
Add»ssM©ch”
<
IÂ”M©ch”
> 
Add»ss
(

4836 cÚ¡ 
IÂ”M©ch”
& 
šÃr_m©ch”
) {

4837  
š‹º®
::
Add»ssM©ch”
<
IÂ”M©ch”
>(
šÃr_m©ch”
);

4843 
	g‹m¶©e
 <
ty³Çme
 
	gM
>

4844 
šlše
 
	gš‹º®
::
M©ch”AsP»diÿ‹
<
M
> 
	$M©ches
(
M
 
m©ch”
) {

4845  
š‹º®
::
M©ch”AsP»diÿ‹
<
M
>(
m©ch”
);

4846 
	}
}

4849 
	g‹m¶©e
 <
ty³Çme
 
	gT
,y³Çm
	gM
>

4850 
šlše
 
boŞ
 
	$V®ue
(cÚ¡ 
T
& 
v®ue
, 
M
 
m©ch”
) {

4851  
‹¡šg
::
	`M©ches
(
m©ch”
)(
v®ue
);

4852 
	}
}

4856 
	g‹m¶©e
 <
ty³Çme
 
	gT
,y³Çm
	gM
>

4857 
šlše
 
boŞ
 
	$Ex¶ašM©chResuÉ
(

4858 
M
 
m©ch”
, cÚ¡ 
T
& 
v®ue
, 
M©chResuÉLi¡’”
* 
li¡’”
) {

4859  
SaãM©ch”Ca¡
<cÚ¡ 
T
&>(
m©ch”
).
	`M©chAndEx¶aš
(
v®ue
, 
li¡’”
);

4860 
	}
}

4872 
	g‹m¶©e
 <
ty³Çme
 
	gT
,y³Çm
	gM
>

4873 
	g¡d
::
¡ršg
 
	$DesüibeM©ch”
(cÚ¡ 
M
& 
m©ch”
, 
boŞ
 
Ãg©iÚ
 = 
çl£
) {

4874 ::
¡d
::
¡ršg¡»am
 
ss
;

4875 
M©ch”
<
T
> 
mÚomÜphic_m©ch”
 = 
SaãM©ch”Ca¡
<T>(
m©ch”
);

4876 ià(
Ãg©iÚ
) {

4877 
mÚomÜphic_m©ch”
.
	`DesüibeNeg©iÚTo
(&
ss
);

4879 
mÚomÜphic_m©ch”
.
	`DesüibeTo
(&
ss
);

4881  
ss
.
	`¡r
();

4882 
	}
}

4884 
	g‹m¶©e
 <
	gty³Çme
... 
	gArgs
>

4885 
	gš‹º®
::
EËm’tsA»M©ch”
<

4886 
¡d
::
tu¶e
<
ty³Çme
 std::
deÿy
<cÚ¡ 
Args
&>::
ty³
...>>

4887 
	$EËm’tsA»
(cÚ¡ 
Args
&... 
m©ch”s
) {

4888  
š‹º®
::
EËm’tsA»M©ch”
<

4889 
¡d
::
tu¶e
<
ty³Çme
 std::
deÿy
<cÚ¡ 
Args
&>::
ty³
...>>(

4890 
¡d
::
	`make_tu¶e
(
m©ch”s
...));

4891 
	}
}

4893 
	g‹m¶©e
 <
	gty³Çme
... 
	gArgs
>

4894 
	gš‹º®
::
UnÜd”edEËm’tsA»M©ch”
<

4895 
¡d
::
tu¶e
<
ty³Çme
 std::
deÿy
<cÚ¡ 
Args
&>::
ty³
...>>

4896 
	$UnÜd”edEËm’tsA»
(cÚ¡ 
Args
&... 
m©ch”s
) {

4897  
š‹º®
::
UnÜd”edEËm’tsA»M©ch”
<

4898 
¡d
::
tu¶e
<
ty³Çme
 std::
deÿy
<cÚ¡ 
Args
&>::
ty³
...>>(

4899 
¡d
::
	`make_tu¶e
(
m©ch”s
...));

4900 
	}
}

4903 
	g‹m¶©e
 <
	gty³Çme
... 
	gArgs
>

4904 
	gš‹º®
::
AÎOfM©ch”
<
ty³Çme
 
¡d
::
deÿy
<cÚ¡ 
Args
&>::
ty³
...> 
	$AÎOf
(

4905 cÚ¡ 
Args
&... 
m©ch”s
) {

4906  
š‹º®
::
AÎOfM©ch”
<
ty³Çme
 
¡d
::
deÿy
<cÚ¡ 
Args
&>::
ty³
...>(

4907 
m©ch”s
...);

4908 
	}
}

4910 
	g‹m¶©e
 <
	gty³Çme
... 
	gArgs
>

4911 
	gš‹º®
::
AnyOfM©ch”
<
ty³Çme
 
¡d
::
deÿy
<cÚ¡ 
Args
&>::
ty³
...> 
	$AnyOf
(

4912 cÚ¡ 
Args
&... 
m©ch”s
) {

4913  
š‹º®
::
AnyOfM©ch”
<
ty³Çme
 
¡d
::
deÿy
<cÚ¡ 
Args
&>::
ty³
...>(

4914 
m©ch”s
...);

4915 
	}
}

4939 
	g‹m¶©e
 <
ty³Çme
 
	gI‹r
>

4940 
šlše
 
	gš‹º®
::
AnyOfA¼ayM©ch”
<

4941 
ty³Çme
 ::
¡d
::
™”©Ü_Œa™s
<
I‹r
>::
v®ue_ty³
>

4942 
	$AnyOfA¼ay
(
I‹r
 
fœ¡
, I‹¸
Ï¡
) {

4943  
š‹º®
::
AnyOfA¼ayM©ch”
<

4944 
ty³Çme
 ::
¡d
::
™”©Ü_Œa™s
<
I‹r
>::
v®ue_ty³
>(
fœ¡
, 
Ï¡
);

4945 
	}
}

4947 
	g‹m¶©e
 <
ty³Çme
 
	gI‹r
>

4948 
šlše
 
	gš‹º®
::
AÎOfA¼ayM©ch”
<

4949 
ty³Çme
 ::
¡d
::
™”©Ü_Œa™s
<
I‹r
>::
v®ue_ty³
>

4950 
	$AÎOfA¼ay
(
I‹r
 
fœ¡
, I‹¸
Ï¡
) {

4951  
š‹º®
::
AÎOfA¼ayM©ch”
<

4952 
ty³Çme
 ::
¡d
::
™”©Ü_Œa™s
<
I‹r
>::
v®ue_ty³
>(
fœ¡
, 
Ï¡
);

4953 
	}
}

4955 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

4956 
šlše
 
	gš‹º®
::
AnyOfA¼ayM©ch”
<
T
> 
	$AnyOfA¼ay
(cÚ¡ 
T
* 
±r
, 
size_t
 
couÁ
) {

4957  
	`AnyOfA¼ay
(
±r
,…Œ + 
couÁ
);

4958 
	}
}

4960 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

4961 
šlše
 
	gš‹º®
::
AÎOfA¼ayM©ch”
<
T
> 
	$AÎOfA¼ay
(cÚ¡ 
T
* 
±r
, 
size_t
 
couÁ
) {

4962  
	`AÎOfA¼ay
(
±r
,…Œ + 
couÁ
);

4963 
	}
}

4965 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
size_t
 
	gN
>

4966 
šlše
 
	gš‹º®
::
AnyOfA¼ayM©ch”
<
T
> 
AnyOfA¼ay
(cÚ¡ T (&
¬¿y
)[
N
]) {

4967  
AnyOfA¼ay
(
¬¿y
, 
N
);

4970 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
size_t
 
	gN
>

4971 
šlše
 
	gš‹º®
::
AÎOfA¼ayM©ch”
<
T
> 
AÎOfA¼ay
(cÚ¡ T (&
¬¿y
)[
N
]) {

4972  
AÎOfA¼ay
(
¬¿y
, 
N
);

4975 
	g‹m¶©e
 <
ty³Çme
 
	gCÚš”
>

4976 
šlše
 
	gš‹º®
::
AnyOfA¼ayM©ch”
<
ty³Çme
 
CÚš”
::
v®ue_ty³
> 
	$AnyOfA¼ay
(

4977 cÚ¡ 
CÚš”
& 
cÚš”
) {

4978  
	`AnyOfA¼ay
(
cÚš”
.
	`begš
(), cÚš”.
	`’d
());

4979 
	}
}

4981 
	g‹m¶©e
 <
ty³Çme
 
	gCÚš”
>

4982 
šlše
 
	gš‹º®
::
AÎOfA¼ayM©ch”
<
ty³Çme
 
CÚš”
::
v®ue_ty³
> 
	$AÎOfA¼ay
(

4983 cÚ¡ 
CÚš”
& 
cÚš”
) {

4984  
	`AÎOfA¼ay
(
cÚš”
.
	`begš
(), cÚš”.
	`’d
());

4985 
	}
}

4987 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

4988 
šlše
 
	gš‹º®
::
AnyOfA¼ayM©ch”
<
T
> 
AnyOfA¼ay
(

4989 ::
¡d
::
š™Ÿliz”_li¡
<
T
> 
xs
) {

4990  
AnyOfA¼ay
(
xs
.
begš
(), xs.
’d
());

4993 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

4994 
šlše
 
	gš‹º®
::
AÎOfA¼ayM©ch”
<
T
> 
AÎOfA¼ay
(

4995 ::
¡d
::
š™Ÿliz”_li¡
<
T
> 
xs
) {

4996  
AÎOfA¼ay
(
xs
.
begš
(), xs.
’d
());

5002 
	g‹m¶©e
 <
	gsize_t
... 
	gk
, 
ty³Çme
 
	gIÂ”M©ch”
>

5003 
	gš‹º®
::
ArgsM©ch”
<
ty³Çme
 
¡d
::
deÿy
<
IÂ”M©ch”
>::
ty³
, 
	gk
...> 
	$Args
(

5004 
IÂ”M©ch”
&& 
m©ch”
) {

5005  
š‹º®
::
ArgsM©ch”
<
ty³Çme
 
¡d
::
deÿy
<
IÂ”M©ch”
>::
ty³
, 
k
...>(

5006 
¡d
::
fÜw¬d
<
IÂ”M©ch”
>(
m©ch”
));

5007 
	}
}

5016 
	g‹m¶©e
 <
ty³Çme
 
	gIÂ”M©ch”
>

5017 
šlše
 
IÂ”M©ch”
 
	$AÎArgs
(cÚ¡ 
IÂ”M©ch”
& 
m©ch”
è{  m©ch”; 
	}
}

5027 
	g‹m¶©e
 <
ty³Çme
 
	gV®ueM©ch”
>

5028 
šlše
 
	gš‹º®
::
O±iÚ®M©ch”
<
V®ueM©ch”
> 
	$O±iÚ®
(

5029 cÚ¡ 
V®ueM©ch”
& 
v®ue_m©ch”
) {

5030  
š‹º®
::
O±iÚ®M©ch”
<
V®ueM©ch”
>(
v®ue_m©ch”
);

5031 
	}
}

5034 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

5035 
	gPŞymÜphicM©ch”
<
	gš‹º®
::
ªy_ÿ¡_m©ch”
::
AnyCa¡M©ch”
<
T
> > 
AnyW™h
(

5036 cÚ¡ 
M©ch”
<cÚ¡ 
T
&>& 
m©ch”
) {

5037  
MakePŞymÜphicM©ch”
(

5038 
š‹º®
::
ªy_ÿ¡_m©ch”
::
AnyCa¡M©ch”
<
T
>(
m©ch”
));

5045 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

5046 
	gPŞymÜphicM©ch”
<
	gš‹º®
::
v¬ŸÁ_m©ch”
::
V¬ŸÁM©ch”
<
T
> > 
V¬ŸÁW™h
(

5047 cÚ¡ 
M©ch”
<cÚ¡ 
T
&>& 
m©ch”
) {

5048  
MakePŞymÜphicM©ch”
(

5049 
š‹º®
::
v¬ŸÁ_m©ch”
::
V¬ŸÁM©ch”
<
T
>(
m©ch”
));

5052 #ià
GTEST_HAS_EXCEPTIONS


5056 
Çme¥aû
 
	gš‹º®
 {

5058 şas 
	cW™hWh©M©ch”Im¶
 {

5059 
	gpublic
:

5060 
W™hWh©M©ch”Im¶
(
M©ch”
<
¡d
::
¡ršg
> 
m©ch”
)

5061 : 
m©ch”_
(
¡d
::
move
(
m©ch”
)) {}

5063 
DesüibeTo
(
¡d
::
o¡»am
* 
os
) const {

5064 *
os
 << "contains .what()hat ";

5065 
	gm©ch”_
.
DesüibeTo
(
os
);

5068 
DesüibeNeg©iÚTo
(
¡d
::
o¡»am
* 
os
) const {

5069 *
os
 << "contains .what()hat does‚ot ";

5070 
	gm©ch”_
.
DesüibeTo
(
os
);

5073 
	g‹m¶©e
 <
ty³Çme
 
	gE¼
>

5074 
boŞ
 
M©chAndEx¶aš
(cÚ¡ 
E¼
& 
”r
, 
M©chResuÉLi¡’”
* 
li¡’”
) const {

5075 *
	gli¡’”
 << "which contains .what()hat ";

5076  
	gm©ch”_
.
M©chAndEx¶aš
(
”r
.
wh©
(), 
li¡’”
);

5079 
	g´iv©e
:

5080 cÚ¡ 
M©ch”
<
¡d
::
¡ršg
> 
m©ch”_
;

5083 
šlše
 
	gPŞymÜphicM©ch”
<
	gW™hWh©M©ch”Im¶
> 
W™hWh©
(

5084 
M©ch”
<
¡d
::
¡ršg
> 
m
) {

5085  
MakePŞymÜphicM©ch”
(
W™hWh©M©ch”Im¶
(
¡d
::
move
(
m
)));

5088 
	g‹m¶©e
 <
ty³Çme
 
	gE¼
>

5089 şas 
	cExû±iÚM©ch”Im¶
 {

5090 şas 
	cNev”Thrown
 {

5091 
	gpublic
:

5092 cÚ¡ * 
wh©
(ècÚ¡ 
nÛxû±
 {

5118 
usšg
 
	gDeçuÉExû±iÚTy³
 = 
ty³Çme
 
¡d
::
cÚd™iÚ®
<

5119 
¡d
::
is_§me
<
ty³Çme
 std::
»move_cv
<

5120 
ty³Çme
 
¡d
::
»move_»ã»nû
<
E¼
>::
ty³
>::type,

5121 
	g¡d
::
exû±iÚ
>::
v®ue
,

5122 cÚ¡ 
	gNev”Thrown
&, cÚ¡ 
	g¡d
::
exû±iÚ
&>::
ty³
;

5124 
	gpublic
:

5125 
Exû±iÚM©ch”Im¶
(
M©ch”
<cÚ¡ 
E¼
&> 
m©ch”
)

5126 : 
m©ch”_
(
¡d
::
move
(
m©ch”
)) {}

5128 
DesüibeTo
(
¡d
::
o¡»am
* 
os
) const {

5129 *
os
 << "throw ªƒxû±iÚ which i ¨" << 
G‘Ty³Name
<
E¼
>();

5130 *
	gos
 << " which ";

5131 
	gm©ch”_
.
DesüibeTo
(
os
);

5134 
DesüibeNeg©iÚTo
(
¡d
::
o¡»am
* 
os
) const {

5135 *
os
 << "throw ªƒxû±iÚ which i nÙ‡ " << 
G‘Ty³Name
<
E¼
>();

5136 *
	gos
 << " which ";

5137 
	gm©ch”_
.
DesüibeNeg©iÚTo
(
os
);

5140 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

5141 
boŞ
 
M©chAndEx¶aš
(
T
&& 
x
, 
M©chResuÉLi¡’”
* 
li¡’”
) const {

5142 
	gŒy
 {

5143 ()(
	g¡d
::
fÜw¬d
<
T
>(
x
)());

5144 } 
ÿtch
 (cÚ¡ 
E¼
& 
”r
) {

5145 *
	gli¡’”
 << "throw ªƒxû±iÚ which i ¨" << 
	gG‘Ty³Name
<
	gE¼
>();

5146 *
	gli¡’”
 << " ";

5147  
	gm©ch”_
.
M©chAndEx¶aš
(
”r
, 
li¡’”
);

5148 } 
ÿtch
 (
DeçuÉExû±iÚTy³
 
”r
) {

5149 #ià
GTEST_HAS_RTTI


5150 *
	gli¡’”
 << "throw ªƒxû±iÚ oàty³ " << 
G‘Ty³Name
(
ty³id
(
”r
));

5151 *
	gli¡’”
 << " ";

5153 *
	gli¡’”
 << "throws‡n std::exception-derivedype ";

5155 *
	gli¡’”
 << "w™h desütiÚ \"" << 
	g”r
.
wh©
() << "\"";

5156  
	gçl£
;

5157 } 
ÿtch
 (...) {

5158 *
	gli¡’”
 << "throws‡nƒxception of‡n unknownype";

5159  
	gçl£
;

5162 *
	gli¡’”
 << "does‚othrow‡nyƒxception";

5163  
	gçl£
;

5166 
	g´iv©e
:

5167 cÚ¡ 
M©ch”
<cÚ¡ 
E¼
&> 
m©ch”_
;

5194 
	g‹m¶©e
 <
ty³Çme
 
	gE¼
>

5195 
	gPŞymÜphicM©ch”
<
	gš‹º®
::
Exû±iÚM©ch”Im¶
<
E¼
>> 
	$Throws
() {

5196  
	`MakePŞymÜphicM©ch”
(

5197 
š‹º®
::
Exû±iÚM©ch”Im¶
<
E¼
>(
A
<const Err&>()));

5198 
	}
}

5200 
	g‹m¶©e
 <
ty³Çme
 
	gE¼
,y³Çm
	gExû±iÚM©ch”
>

5201 
	gPŞymÜphicM©ch”
<
	gš‹º®
::
Exû±iÚM©ch”Im¶
<
E¼
>> 
	$Throws
(

5202 cÚ¡ 
Exû±iÚM©ch”
& 
exû±iÚ_m©ch”
) {

5206  
	`MakePŞymÜphicM©ch”
(
š‹º®
::
Exû±iÚM©ch”Im¶
<
E¼
>(

5207 
SaãM©ch”Ca¡
<cÚ¡ 
E¼
&>(
exû±iÚ_m©ch”
)));

5208 
	}
}

5210 
	g‹m¶©e
 <
ty³Çme
 
	gE¼
,y³Çm
	gMes§geM©ch”
>

5211 
	gPŞymÜphicM©ch”
<
	gš‹º®
::
Exû±iÚM©ch”Im¶
<
E¼
>> 
	$ThrowsMes§ge
(

5212 
Mes§geM©ch”
&& 
mes§ge_m©ch”
) {

5213 
	`¡©ic_as£¹
(
¡d
::
is_ba£_of
<¡d::
exû±iÚ
, 
E¼
>::
v®ue
,

5215  
Throws
<
E¼
>(
š‹º®
::
	`W™hWh©
(

5216 
M©ch”Ca¡
<
¡d
::
¡ršg
>(¡d::
fÜw¬d
<
Mes§geM©ch”
>(
mes§ge_m©ch”
))));

5217 
	}
}

5225 
	#ASSERT_THAT
(
v®ue
, 
m©ch”
è
	`ASSERT_PRED_FORMAT1
(\

5226 ::
‹¡šg
::
š‹º®
::
	`MakeP»diÿ‹FÜm©‹rFromM©ch”
(
m©ch”
), 
v®ue
)

	)

5227 
	#EXPECT_THAT
(
v®ue
, 
m©ch”
è
	`EXPECT_PRED_FORMAT1
(\

5228 ::
‹¡šg
::
š‹º®
::
	`MakeP»diÿ‹FÜm©‹rFromM©ch”
(
m©ch”
), 
v®ue
)

	)

5231 
	#MATCHER
(
Çme
, 
desütiÚ
) \

5232 
şass
 
Çme
##
M©ch”
 \

5233 : 
public
 ::
‹¡šg
::
š‹º®
::
M©ch”Ba£Im¶
<
Çme
##
M©ch”
> { \

5234 
public
: \

5235 
‹m¶©e
 <
ty³Çme
 
¬g_ty³
> \

5236 
şass
 
gmock_Im¶
 : 
public
 ::
‹¡šg
::
M©ch”IÁ”çû
<cÚ¡ 
¬g_ty³
&> { \

5237 
public
: \

5238 
	`gmock_Im¶
() {} \

5239 
boŞ
 
	`M©chAndEx¶aš
( \

5240 cÚ¡ 
¬g_ty³
& 
¬g
, \

5241 ::
‹¡šg
::
M©chResuÉLi¡’”
* 
»suÉ_li¡’”
ècÚ¡ 
ov”ride
; \

5242 
	`DesüibeTo
(::
¡d
::
o¡»am
* 
gmock_os
ècÚ¡ 
ov”ride
 { \

5243 *
gmock_os
 << 
	`FÜm©DesütiÚ
(
çl£
); \

5245 
	`DesüibeNeg©iÚTo
(::
¡d
::
o¡»am
* 
gmock_os
ècÚ¡ 
ov”ride
 { \

5246 *
gmock_os
 << 
	`FÜm©DesütiÚ
(
Œue
); \

5249 
´iv©e
: \

5250 ::
¡d
::
¡ršg
 
	`FÜm©DesütiÚ
(
boŞ
 
Ãg©iÚ
) const { \

5251 ::
¡d
::
¡ršg
 
gmock_desütiÚ
 = (
desütiÚ
); \

5252 ià(!
gmock_desütiÚ
.
	`em±y
()) { \

5253  
gmock_desütiÚ
; \

5255  ::
‹¡šg
::
š‹º®
::
	`FÜm©M©ch”DesütiÚ
(
Ãg©iÚ
, #name, \

5260 
GTEST_ATTRIBUTE_UNUSED_
 
šlše
 
Çme
##
M©ch”
 
	$Çme
(è{  {}; 
	}
} \

5261 
‹m¶©e
 <
ty³Çme
 
¬g_ty³
> \

5262 
boŞ
 
Çme
##
M©ch”
::
gmock_Im¶
<
¬g_ty³
>::
	`M©chAndEx¶aš
( \

5263 cÚ¡ 
¬g_ty³
& 
¬g
, \

5264 ::
‹¡šg
::
M©chResuÉLi¡’”
* 
»suÉ_li¡’”
 
GTEST_ATTRIBUTE_UNUSED_
) \

5265 cÚ¡

	)

5267 
	#MATCHER_P
(
Çme
, 
p0
, 
desütiÚ
) \

5268 
	`GMOCK_INTERNAL_MATCHER
(
Çme
,‚ame##
M©ch”P
, 
desütiÚ
, (
p0
))

	)

5269 
	#MATCHER_P2
(
Çme
, 
p0
, 
p1
, 
desütiÚ
) \

5270 
	`GMOCK_INTERNAL_MATCHER
(
Çme
,‚ame##
M©ch”P2
, 
desütiÚ
, (
p0
, 
p1
))

	)

5271 
	#MATCHER_P3
(
Çme
, 
p0
, 
p1
, 
p2
, 
desütiÚ
) \

5272 
	`GMOCK_INTERNAL_MATCHER
(
Çme
,‚ame##
M©ch”P3
, 
desütiÚ
, (
p0
, 
p1
, 
p2
))

	)

5273 
	#MATCHER_P4
(
Çme
, 
p0
, 
p1
, 
p2
, 
p3
, 
desütiÚ
) \

5274 
	`GMOCK_INTERNAL_MATCHER
(
Çme
,‚ame##
M©ch”P4
, 
desütiÚ
, (
p0
, 
p1
, 
p2
, 
p3
))

	)

5275 
	#MATCHER_P5
(
Çme
, 
p0
, 
p1
, 
p2
, 
p3
, 
p4
, 
desütiÚ
) \

5276 
	`GMOCK_INTERNAL_MATCHER
(
Çme
,‚ame##
M©ch”P5
, 
desütiÚ
, \

5277 (
p0
, 
p1
, 
p2
, 
p3
, 
p4
))

	)

5278 
	#MATCHER_P6
(
Çme
, 
p0
, 
p1
, 
p2
, 
p3
, 
p4
, 
p5
, 
desütiÚ
) \

5279 
	`GMOCK_INTERNAL_MATCHER
(
Çme
,‚ame##
M©ch”P6
, 
desütiÚ
, \

5280 (
p0
, 
p1
, 
p2
, 
p3
, 
p4
, 
p5
))

	)

5281 
	#MATCHER_P7
(
Çme
, 
p0
, 
p1
, 
p2
, 
p3
, 
p4
, 
p5
, 
p6
, 
desütiÚ
) \

5282 
	`GMOCK_INTERNAL_MATCHER
(
Çme
,‚ame##
M©ch”P7
, 
desütiÚ
, \

5283 (
p0
, 
p1
, 
p2
, 
p3
, 
p4
, 
p5
, 
p6
))

	)

5284 
	#MATCHER_P8
(
Çme
, 
p0
, 
p1
, 
p2
, 
p3
, 
p4
, 
p5
, 
p6
, 
p7
, 
desütiÚ
) \

5285 
	`GMOCK_INTERNAL_MATCHER
(
Çme
,‚ame##
M©ch”P8
, 
desütiÚ
, \

5286 (
p0
, 
p1
, 
p2
, 
p3
, 
p4
, 
p5
, 
p6
, 
p7
))

	)

5287 
	#MATCHER_P9
(
Çme
, 
p0
, 
p1
, 
p2
, 
p3
, 
p4
, 
p5
, 
p6
, 
p7
, 
p8
, 
desütiÚ
) \

5288 
	`GMOCK_INTERNAL_MATCHER
(
Çme
,‚ame##
M©ch”P9
, 
desütiÚ
, \

5289 (
p0
, 
p1
, 
p2
, 
p3
, 
p4
, 
p5
, 
p6
, 
p7
, 
p8
))

	)

5290 
	#MATCHER_P10
(
Çme
, 
p0
, 
p1
, 
p2
, 
p3
, 
p4
, 
p5
, 
p6
, 
p7
, 
p8
, 
p9
, 
desütiÚ
) \

5291 
	`GMOCK_INTERNAL_MATCHER
(
Çme
,‚ame##
M©ch”P10
, 
desütiÚ
, \

5292 (
p0
, 
p1
, 
p2
, 
p3
, 
p4
, 
p5
, 
p6
, 
p7
, 
p8
, 
p9
))

	)

5294 
	#GMOCK_INTERNAL_MATCHER
(
Çme
, 
fuÎ_Çme
, 
desütiÚ
, 
¬gs
) \

5295 
‹m¶©e
 <
	`GMOCK_INTERNAL_MATCHER_TEMPLATE_PARAMS
(
¬gs
)> \

5296 
şass
 
fuÎ_Çme
 : 
public
 ::
‹¡šg
::
š‹º®
::
M©ch”Ba£Im¶
< \

5297 
fuÎ_Çme
<
	`GMOCK_INTERNAL_MATCHER_TYPE_PARAMS
(
¬gs
)>> { \

5298 
public
: \

5299 
usšg
 
fuÎ_Çme
::
M©ch”Ba£Im¶
::MatcherBaseImpl; \

5300 
‹m¶©e
 <
ty³Çme
 
¬g_ty³
> \

5301 
şass
 
gmock_Im¶
 : 
public
 ::
‹¡šg
::
M©ch”IÁ”çû
<cÚ¡ 
¬g_ty³
&> { \

5302 
public
: \

5303 
ex¶ic™
 
	`gmock_Im¶
(
	`GMOCK_INTERNAL_MATCHER_FUNCTION_ARGS
(
¬gs
)) \

5304 : 
	`GMOCK_INTERNAL_MATCHER_FORWARD_ARGS
(
¬gs
) {} \

5305 
boŞ
 
	`M©chAndEx¶aš
( \

5306 cÚ¡ 
¬g_ty³
& 
¬g
, \

5307 ::
‹¡šg
::
M©chResuÉLi¡’”
* 
»suÉ_li¡’”
ècÚ¡ 
ov”ride
; \

5308 
	`DesüibeTo
(::
¡d
::
o¡»am
* 
gmock_os
ècÚ¡ 
ov”ride
 { \

5309 *
gmock_os
 << 
	`FÜm©DesütiÚ
(
çl£
); \

5311 
	`DesüibeNeg©iÚTo
(::
¡d
::
o¡»am
* 
gmock_os
ècÚ¡ 
ov”ride
 { \

5312 *
gmock_os
 << 
	`FÜm©DesütiÚ
(
Œue
); \

5314 
	`GMOCK_INTERNAL_MATCHER_MEMBERS
(
¬gs
) \

5316 
´iv©e
: \

5317 ::
¡d
::
¡ršg
 
	`FÜm©DesütiÚ
(
boŞ
 
Ãg©iÚ
) const { \

5318 ::
¡d
::
¡ršg
 
gmock_desütiÚ
 = (
desütiÚ
); \

5319 ià(!
gmock_desütiÚ
.
	`em±y
()) { \

5320  
gmock_desütiÚ
; \

5322  ::
‹¡šg
::
š‹º®
::
	`FÜm©M©ch”DesütiÚ
( \

5323 
Ãg©iÚ
, #name, \

5324 ::
‹¡šg
::
š‹º®
::
	`Univ”§lT”£PrštTu¶eF›ldsToSŒšgs
( \

5325 ::
¡d
::
tu¶e
<
	`GMOCK_INTERNAL_MATCHER_TYPE_PARAMS
(
¬gs
)>( \

5326 
	`GMOCK_INTERNAL_MATCHER_MEMBERS_USAGE
(
¬gs
)))); \

5330 
‹m¶©e
 <
	`GMOCK_INTERNAL_MATCHER_TEMPLATE_PARAMS
(
¬gs
)> \

5331 
šlše
 
fuÎ_Çme
<
	`GMOCK_INTERNAL_MATCHER_TYPE_PARAMS
(
¬gs
)> 
	`Çme
( \

5332 
	$GMOCK_INTERNAL_MATCHER_FUNCTION_ARGS
(
¬gs
)) { \

5333  
fuÎ_Çme
<
	`GMOCK_INTERNAL_MATCHER_TYPE_PARAMS
(
¬gs
)>( \

5334 
	`GMOCK_INTERNAL_MATCHER_ARGS_USAGE
(
¬gs
)); \

5335 
	}
} \

5336 
‹m¶©e
 <
	`GMOCK_INTERNAL_MATCHER_TEMPLATE_PARAMS
(
¬gs
)> \

5337 
‹m¶©e
 <
ty³Çme
 
¬g_ty³
> \

5338 
boŞ
 
fuÎ_Çme
<
	`GMOCK_INTERNAL_MATCHER_TYPE_PARAMS
(
¬gs
)>::
gmock_Im¶
< \

5339 
¬g_ty³
>::
	`M©chAndEx¶aš
(cÚ¡‡rg_ty³& 
¬g
, \

5340 ::
‹¡šg
::
M©chResuÉLi¡’”
* \

5341 
»suÉ_li¡’”
 
GTEST_ATTRIBUTE_UNUSED_
) \

5342 cÚ¡

	)

5344 
	#GMOCK_INTERNAL_MATCHER_TEMPLATE_PARAMS
(
¬gs
) \

5345 
	`GMOCK_PP_TAIL
( \

5346 
	$GMOCK_PP_FOR_EACH
(
GMOCK_INTERNAL_MATCHER_TEMPLATE_PARAM
, , 
¬gs
))

	)

5347 
	#GMOCK_INTERNAL_MATCHER_TEMPLATE_PARAM
(
i_unu£d
, 
d©a_unu£d
, 
¬g
) \

5348 , 
ty³Çme
 
¬g
##
_ty³


	)

5350 
	#GMOCK_INTERNAL_MATCHER_TYPE_PARAMS
(
¬gs
) \

5351 
	`GMOCK_PP_TAIL
(
	$GMOCK_PP_FOR_EACH
(
GMOCK_INTERNAL_MATCHER_TYPE_PARAM
, , 
¬gs
))

	)

5352 
	#GMOCK_INTERNAL_MATCHER_TYPE_PARAM
(
i_unu£d
, 
d©a_unu£d
, 
¬g
) \

5353 , 
¬g
##
_ty³


	)

5355 
	#GMOCK_INTERNAL_MATCHER_FUNCTION_ARGS
(
¬gs
) \

5356 
	`GMOCK_PP_TAIL
(
dummy_fœ¡
 
	`GMOCK_PP_FOR_EACH
( \

5357 
GMOCK_INTERNAL_MATCHER_FUNCTION_ARG
, , 
¬gs
))

	)

5358 
	#GMOCK_INTERNAL_MATCHER_FUNCTION_ARG
(
i
, 
d©a_unu£d
, 
¬g
) \

5359 , 
¬g
##
_ty³
 
gmock_p
##
i


	)

5361 
	#GMOCK_INTERNAL_MATCHER_FORWARD_ARGS
(
¬gs
) \

5362 
	`GMOCK_PP_TAIL
(
	$GMOCK_PP_FOR_EACH
(
GMOCK_INTERNAL_MATCHER_FORWARD_ARG
, , 
¬gs
))

	)

5363 
	#GMOCK_INTERNAL_MATCHER_FORWARD_ARG
(
i
, 
d©a_unu£d
, 
¬g
) \

5364 , 
	`¬g
(::
¡d
::
fÜw¬d
<
¬g
##
_ty³
>(
gmock_p
##
i
))

	)

5366 
	#GMOCK_INTERNAL_MATCHER_MEMBERS
(
¬gs
) \

5367 
	$GMOCK_PP_FOR_EACH
(
GMOCK_INTERNAL_MATCHER_MEMBER
, , 
¬gs
)

	)

5368 
	#GMOCK_INTERNAL_MATCHER_MEMBER
(
i_unu£d
, 
d©a_unu£d
, 
¬g
) \

5369 cÚ¡ 
¬g
##
_ty³
‡rg;

	)

5371 
	#GMOCK_INTERNAL_MATCHER_MEMBERS_USAGE
(
¬gs
) \

5372 
	`GMOCK_PP_TAIL
(
	$GMOCK_PP_FOR_EACH
(
GMOCK_INTERNAL_MATCHER_MEMBER_USAGE
, , 
¬gs
))

	)

5373 
	#GMOCK_INTERNAL_MATCHER_MEMBER_USAGE
(
i_unu£d
, 
d©a_unu£d
, 
¬g
è, 
	)
arg

5375 
	#GMOCK_INTERNAL_MATCHER_ARGS_USAGE
(
¬gs
) \

5376 
	`GMOCK_PP_TAIL
(
	$GMOCK_PP_FOR_EACH
(
GMOCK_INTERNAL_MATCHER_ARG_USAGE
, , 
¬gs
))

	)

5377 
	#GMOCK_INTERNAL_MATCHER_ARG_USAGE
(
i
, 
d©a_unu£d
, 
¬g_unu£d
) \

5378 , 
gmock_p
##
i


	)

5381 
usšg
 
Çme¥aû
 
no_adl
;

5383 
	}
}

5385 
	$GTEST_DISABLE_MSC_WARNINGS_POP_
()

5390 
	~"gmock/š‹º®/cu¡om/gmock-m©ch”s.h
"

	@third_party/googletest/googlemock/include/gmock/gmock-more-actions.h

37 #iâdeà
GOOGLEMOCK_INCLUDE_GMOCK_GMOCK_MORE_ACTIONS_H_


38 
	#GOOGLEMOCK_INCLUDE_GMOCK_GMOCK_MORE_ACTIONS_H_


	)

40 
	~<memÜy
>

41 
	~<ut™y
>

43 
	~"gmock/gmock-aùiÚs.h
"

44 
	~"gmock/š‹º®/gmock-pÜt.h
"

47 
	~"gmock/š‹º®/cu¡om/gmock-g’”©ed-aùiÚs.h
"

131 
	#GMOCK_INTERNAL_DECL_HAS_1_TEMPLATE_PARAMS
(
kšd0
, 
Çme0
èkšd0 
	)
name0

132 
	#GMOCK_INTERNAL_DECL_HAS_2_TEMPLATE_PARAMS
(
kšd0
, 
Çme0
, 
kšd1
, \

133 
Çme1
è
kšd0
 
Çme0
, 
kšd1
 
	)
name1

134 
	#GMOCK_INTERNAL_DECL_HAS_3_TEMPLATE_PARAMS
(
kšd0
, 
Çme0
, 
kšd1
, 
Çme1
, \

135 
kšd2
, 
Çme2
è
kšd0
 
Çme0
, 
kšd1
 
Çme1
, kšd2 
	)
name2

136 
	#GMOCK_INTERNAL_DECL_HAS_4_TEMPLATE_PARAMS
(
kšd0
, 
Çme0
, 
kšd1
, 
Çme1
, \

137 
kšd2
, 
Çme2
, 
kšd3
, 
Çme3
è
kšd0
 
Çme0
, 
kšd1
 
Çme1
, kind2‚ame2, \

138 
kšd3
 
Çme3


	)

139 
	#GMOCK_INTERNAL_DECL_HAS_5_TEMPLATE_PARAMS
(
kšd0
, 
Çme0
, 
kšd1
, 
Çme1
, \

140 
kšd2
, 
Çme2
, 
kšd3
, 
Çme3
, 
kšd4
, 
Çme4
è
kšd0
 
Çme0
, 
kšd1
 
Çme1
, \

141 
kšd2
 
Çme2
, 
kšd3
 
Çme3
, 
kšd4
 
Çme4


	)

142 
	#GMOCK_INTERNAL_DECL_HAS_6_TEMPLATE_PARAMS
(
kšd0
, 
Çme0
, 
kšd1
, 
Çme1
, \

143 
kšd2
, 
Çme2
, 
kšd3
, 
Çme3
, 
kšd4
, 
Çme4
, 
kšd5
, 
Çme5
è
kšd0
 
Çme0
, \

144 
kšd1
 
Çme1
, 
kšd2
 
Çme2
, 
kšd3
 
Çme3
, 
kšd4
 
Çme4
, 
kšd5
 
Çme5


	)

145 
	#GMOCK_INTERNAL_DECL_HAS_7_TEMPLATE_PARAMS
(
kšd0
, 
Çme0
, 
kšd1
, 
Çme1
, \

146 
kšd2
, 
Çme2
, 
kšd3
, 
Çme3
, 
kšd4
, 
Çme4
, 
kšd5
, 
Çme5
, 
kšd6
, \

147 
Çme6
è
kšd0
 
Çme0
, 
kšd1
 
Çme1
, 
kšd2
 
Çme2
, 
kšd3
 
Çme3
, 
kšd4
 
Çme4
, \

148 
kšd5
 
Çme5
, 
kšd6
 
Çme6


	)

149 
	#GMOCK_INTERNAL_DECL_HAS_8_TEMPLATE_PARAMS
(
kšd0
, 
Çme0
, 
kšd1
, 
Çme1
, \

150 
kšd2
, 
Çme2
, 
kšd3
, 
Çme3
, 
kšd4
, 
Çme4
, 
kšd5
, 
Çme5
, 
kšd6
, 
Çme6
, \

151 
kšd7
, 
Çme7
è
kšd0
 
Çme0
, 
kšd1
 
Çme1
, 
kšd2
 
Çme2
, 
kšd3
 
Çme3
, \

152 
kšd4
 
Çme4
, 
kšd5
 
Çme5
, 
kšd6
 
Çme6
, 
kšd7
 
Çme7


	)

153 
	#GMOCK_INTERNAL_DECL_HAS_9_TEMPLATE_PARAMS
(
kšd0
, 
Çme0
, 
kšd1
, 
Çme1
, \

154 
kšd2
, 
Çme2
, 
kšd3
, 
Çme3
, 
kšd4
, 
Çme4
, 
kšd5
, 
Çme5
, 
kšd6
, 
Çme6
, \

155 
kšd7
, 
Çme7
, 
kšd8
, 
Çme8
è
kšd0
 
Çme0
, 
kšd1
 
Çme1
, 
kšd2
 
Çme2
, \

156 
kšd3
 
Çme3
, 
kšd4
 
Çme4
, 
kšd5
 
Çme5
, 
kšd6
 
Çme6
, 
kšd7
 
Çme7
, \

157 
kšd8
 
Çme8


	)

158 
	#GMOCK_INTERNAL_DECL_HAS_10_TEMPLATE_PARAMS
(
kšd0
, 
Çme0
, 
kšd1
, \

159 
Çme1
, 
kšd2
, 
Çme2
, 
kšd3
, 
Çme3
, 
kšd4
, 
Çme4
, 
kšd5
, 
Çme5
, 
kšd6
, \

160 
Çme6
, 
kšd7
, 
Çme7
, 
kšd8
, 
Çme8
, 
kšd9
, 
Çme9
è
kšd0
 
Çme0
, \

161 
kšd1
 
Çme1
, 
kšd2
 
Çme2
, 
kšd3
 
Çme3
, 
kšd4
 
Çme4
, 
kšd5
 
Çme5
, \

162 
kšd6
 
Çme6
, 
kšd7
 
Çme7
, 
kšd8
 
Çme8
, 
kšd9
 
Çme9


	)

165 
	#GMOCK_INTERNAL_LIST_HAS_1_TEMPLATE_PARAMS
(
kšd0
, 
Çme0
è
	)
name0

166 
	#GMOCK_INTERNAL_LIST_HAS_2_TEMPLATE_PARAMS
(
kšd0
, 
Çme0
, 
kšd1
, \

167 
Çme1
è
Çme0
, 
	)
name1

168 
	#GMOCK_INTERNAL_LIST_HAS_3_TEMPLATE_PARAMS
(
kšd0
, 
Çme0
, 
kšd1
, 
Çme1
, \

169 
kšd2
, 
Çme2
è
Çme0
, 
Çme1
, 
	)
name2

170 
	#GMOCK_INTERNAL_LIST_HAS_4_TEMPLATE_PARAMS
(
kšd0
, 
Çme0
, 
kšd1
, 
Çme1
, \

171 
kšd2
, 
Çme2
, 
kšd3
, 
Çme3
è
Çme0
, 
Çme1
,‚ame2, 
	)
name3

172 
	#GMOCK_INTERNAL_LIST_HAS_5_TEMPLATE_PARAMS
(
kšd0
, 
Çme0
, 
kšd1
, 
Çme1
, \

173 
kšd2
, 
Çme2
, 
kšd3
, 
Çme3
, 
kšd4
, 
Çme4
è
Çme0
, 
Çme1
,‚ame2,‚ame3, \

174 
Çme4


	)

175 
	#GMOCK_INTERNAL_LIST_HAS_6_TEMPLATE_PARAMS
(
kšd0
, 
Çme0
, 
kšd1
, 
Çme1
, \

176 
kšd2
, 
Çme2
, 
kšd3
, 
Çme3
, 
kšd4
, 
Çme4
, 
kšd5
, 
Çme5
è
Çme0
, 
Çme1
, \

177 
Çme2
, 
Çme3
, 
Çme4
, 
Çme5


	)

178 
	#GMOCK_INTERNAL_LIST_HAS_7_TEMPLATE_PARAMS
(
kšd0
, 
Çme0
, 
kšd1
, 
Çme1
, \

179 
kšd2
, 
Çme2
, 
kšd3
, 
Çme3
, 
kšd4
, 
Çme4
, 
kšd5
, 
Çme5
, 
kšd6
, \

180 
Çme6
è
Çme0
, 
Çme1
, 
Çme2
, 
Çme3
, 
Çme4
, 
Çme5
, 
	)
name6

181 
	#GMOCK_INTERNAL_LIST_HAS_8_TEMPLATE_PARAMS
(
kšd0
, 
Çme0
, 
kšd1
, 
Çme1
, \

182 
kšd2
, 
Çme2
, 
kšd3
, 
Çme3
, 
kšd4
, 
Çme4
, 
kšd5
, 
Çme5
, 
kšd6
, 
Çme6
, \

183 
kšd7
, 
Çme7
è
Çme0
, 
Çme1
, 
Çme2
, 
Çme3
, 
Çme4
, 
Çme5
, 
Çme6
, 
	)
name7

184 
	#GMOCK_INTERNAL_LIST_HAS_9_TEMPLATE_PARAMS
(
kšd0
, 
Çme0
, 
kšd1
, 
Çme1
, \

185 
kšd2
, 
Çme2
, 
kšd3
, 
Çme3
, 
kšd4
, 
Çme4
, 
kšd5
, 
Çme5
, 
kšd6
, 
Çme6
, \

186 
kšd7
, 
Çme7
, 
kšd8
, 
Çme8
è
Çme0
, 
Çme1
, 
Çme2
, 
Çme3
, 
Çme4
, 
Çme5
, \

187 
Çme6
, 
Çme7
, 
Çme8


	)

188 
	#GMOCK_INTERNAL_LIST_HAS_10_TEMPLATE_PARAMS
(
kšd0
, 
Çme0
, 
kšd1
, \

189 
Çme1
, 
kšd2
, 
Çme2
, 
kšd3
, 
Çme3
, 
kšd4
, 
Çme4
, 
kšd5
, 
Çme5
, 
kšd6
, \

190 
Çme6
, 
kšd7
, 
Çme7
, 
kšd8
, 
Çme8
, 
kšd9
, 
Çme9
è
Çme0
, 
Çme1
, 
Çme2
, \

191 
Çme3
, 
Çme4
, 
Çme5
, 
Çme6
, 
Çme7
, 
Çme8
, 
Çme9


	)

194 
	#GMOCK_INTERNAL_DECL_TYPE_AND_0_VALUE_PARAMS
()

	)

195 
	#GMOCK_INTERNAL_DECL_TYPE_AND_1_VALUE_PARAMS
(
p0
è, 
ty³Çme
…0##
_ty³


	)

196 
	#GMOCK_INTERNAL_DECL_TYPE_AND_2_VALUE_PARAMS
(
p0
, 
p1
) , \

197 
ty³Çme
 
p0
##
_ty³
,y³Çm
p1
##
	)
_type

198 
	#GMOCK_INTERNAL_DECL_TYPE_AND_3_VALUE_PARAMS
(
p0
, 
p1
, 
p2
) , \

199 
ty³Çme
 
p0
##
_ty³
,y³Çm
p1
##_ty³,y³Çm
p2
##
	)
_type

200 
	#GMOCK_INTERNAL_DECL_TYPE_AND_4_VALUE_PARAMS
(
p0
, 
p1
, 
p2
, 
p3
) , \

201 
ty³Çme
 
p0
##
_ty³
,y³Çm
p1
##_ty³,y³Çm
p2
##_type, \

202 
ty³Çme
 
p3
##
_ty³


	)

203 
	#GMOCK_INTERNAL_DECL_TYPE_AND_5_VALUE_PARAMS
(
p0
, 
p1
, 
p2
, 
p3
, 
p4
) , \

204 
ty³Çme
 
p0
##
_ty³
,y³Çm
p1
##_ty³,y³Çm
p2
##_type, \

205 
ty³Çme
 
p3
##
_ty³
,y³Çm
p4
##
	)
_type

206 
	#GMOCK_INTERNAL_DECL_TYPE_AND_6_VALUE_PARAMS
(
p0
, 
p1
, 
p2
, 
p3
, 
p4
, 
p5
) , \

207 
ty³Çme
 
p0
##
_ty³
,y³Çm
p1
##_ty³,y³Çm
p2
##_type, \

208 
ty³Çme
 
p3
##
_ty³
,y³Çm
p4
##_ty³,y³Çm
p5
##
	)
_type

209 
	#GMOCK_INTERNAL_DECL_TYPE_AND_7_VALUE_PARAMS
(
p0
, 
p1
, 
p2
, 
p3
, 
p4
, 
p5
, \

210 
p6
è, 
ty³Çme
 
p0
##
_ty³
,y³Çm
p1
##_ty³,y³Çm
p2
##_type, \

211 
ty³Çme
 
p3
##
_ty³
,y³Çm
p4
##_ty³,y³Çm
p5
##_type, \

212 
ty³Çme
 
p6
##
_ty³


	)

213 
	#GMOCK_INTERNAL_DECL_TYPE_AND_8_VALUE_PARAMS
(
p0
, 
p1
, 
p2
, 
p3
, 
p4
, 
p5
, \

214 
p6
, 
p7
è, 
ty³Çme
 
p0
##
_ty³
,y³Çm
p1
##_ty³,y³Çm
p2
##_type, \

215 
ty³Çme
 
p3
##
_ty³
,y³Çm
p4
##_ty³,y³Çm
p5
##_type, \

216 
ty³Çme
 
p6
##
_ty³
,y³Çm
p7
##
	)
_type

217 
	#GMOCK_INTERNAL_DECL_TYPE_AND_9_VALUE_PARAMS
(
p0
, 
p1
, 
p2
, 
p3
, 
p4
, 
p5
, \

218 
p6
, 
p7
, 
p8
è, 
ty³Çme
 
p0
##
_ty³
,y³Çm
p1
##_ty³,y³Çm
p2
##_type, \

219 
ty³Çme
 
p3
##
_ty³
,y³Çm
p4
##_ty³,y³Çm
p5
##_type, \

220 
ty³Çme
 
p6
##
_ty³
,y³Çm
p7
##_ty³,y³Çm
p8
##
	)
_type

221 
	#GMOCK_INTERNAL_DECL_TYPE_AND_10_VALUE_PARAMS
(
p0
, 
p1
, 
p2
, 
p3
, 
p4
, 
p5
, \

222 
p6
, 
p7
, 
p8
, 
p9
è, 
ty³Çme
 
p0
##
_ty³
,y³Çm
p1
##_type, \

223 
ty³Çme
 
p2
##
_ty³
,y³Çm
p3
##_ty³,y³Çm
p4
##_type, \

224 
ty³Çme
 
p5
##
_ty³
,y³Çm
p6
##_ty³,y³Çm
p7
##_type, \

225 
ty³Çme
 
p8
##
_ty³
,y³Çm
p9
##
	)
_type

228 
	#GMOCK_INTERNAL_INIT_AND_0_VALUE_PARAMS
()\

229 ()

	)

230 
	#GMOCK_INTERNAL_INIT_AND_1_VALUE_PARAMS
(
p0
)\

231 (
p0
##
_ty³
 
gmock_p0
è: 
	`p0
(::
¡d
::
	`move
(gmock_p0))

	)

232 
	#GMOCK_INTERNAL_INIT_AND_2_VALUE_PARAMS
(
p0
, 
p1
)\

233 (
p0
##
_ty³
 
gmock_p0
, 
p1
##_ty³ 
gmock_p1
è: 
	`p0
(::
¡d
::
	`move
(gmock_p0)), \

234 
	`p1
(::
¡d
::
	`move
(
gmock_p1
))

	)

235 
	#GMOCK_INTERNAL_INIT_AND_3_VALUE_PARAMS
(
p0
, 
p1
, 
p2
)\

236 (
p0
##
_ty³
 
gmock_p0
, 
p1
##_ty³ 
gmock_p1
, \

237 
p2
##
_ty³
 
gmock_p2
è: 
	`p0
(::
¡d
::
	`move
(
gmock_p0
)), \

238 
	`p1
(::
¡d
::
	`move
(
gmock_p1
)), 
	`p2
(::¡d::move(
gmock_p2
))

	)

239 
	#GMOCK_INTERNAL_INIT_AND_4_VALUE_PARAMS
(
p0
, 
p1
, 
p2
, 
p3
)\

240 (
p0
##
_ty³
 
gmock_p0
, 
p1
##_ty³ 
gmock_p1
, 
p2
##_ty³ 
gmock_p2
, \

241 
p3
##
_ty³
 
gmock_p3
è: 
	`p0
(::
¡d
::
	`move
(
gmock_p0
)), \

242 
	`p1
(::
¡d
::
	`move
(
gmock_p1
)), 
	`p2
(::¡d::move(
gmock_p2
)), \

243 
	`p3
(::
¡d
::
	`move
(
gmock_p3
))

	)

244 
	#GMOCK_INTERNAL_INIT_AND_5_VALUE_PARAMS
(
p0
, 
p1
, 
p2
, 
p3
, 
p4
)\

245 (
p0
##
_ty³
 
gmock_p0
, 
p1
##_ty³ 
gmock_p1
, 
p2
##_ty³ 
gmock_p2
, \

246 
p3
##
_ty³
 
gmock_p3
, 
p4
##_ty³ 
gmock_p4
è: 
	`p0
(::
¡d
::
	`move
(
gmock_p0
)), \

247 
	`p1
(::
¡d
::
	`move
(
gmock_p1
)), 
	`p2
(::¡d::move(
gmock_p2
)), \

248 
	`p3
(::
¡d
::
	`move
(
gmock_p3
)), 
	`p4
(::¡d::move(
gmock_p4
))

	)

249 
	#GMOCK_INTERNAL_INIT_AND_6_VALUE_PARAMS
(
p0
, 
p1
, 
p2
, 
p3
, 
p4
, 
p5
)\

250 (
p0
##
_ty³
 
gmock_p0
, 
p1
##_ty³ 
gmock_p1
, 
p2
##_ty³ 
gmock_p2
, \

251 
p3
##
_ty³
 
gmock_p3
, 
p4
##_ty³ 
gmock_p4
, \

252 
p5
##
_ty³
 
gmock_p5
è: 
	`p0
(::
¡d
::
	`move
(
gmock_p0
)), \

253 
	`p1
(::
¡d
::
	`move
(
gmock_p1
)), 
	`p2
(::¡d::move(
gmock_p2
)), \

254 
	`p3
(::
¡d
::
	`move
(
gmock_p3
)), 
	`p4
(::¡d::move(
gmock_p4
)), \

255 
	`p5
(::
¡d
::
	`move
(
gmock_p5
))

	)

256 
	#GMOCK_INTERNAL_INIT_AND_7_VALUE_PARAMS
(
p0
, 
p1
, 
p2
, 
p3
, 
p4
, 
p5
, 
p6
)\

257 (
p0
##
_ty³
 
gmock_p0
, 
p1
##_ty³ 
gmock_p1
, 
p2
##_ty³ 
gmock_p2
, \

258 
p3
##
_ty³
 
gmock_p3
, 
p4
##_ty³ 
gmock_p4
, 
p5
##_ty³ 
gmock_p5
, \

259 
p6
##
_ty³
 
gmock_p6
è: 
	`p0
(::
¡d
::
	`move
(
gmock_p0
)), \

260 
	`p1
(::
¡d
::
	`move
(
gmock_p1
)), 
	`p2
(::¡d::move(
gmock_p2
)), \

261 
	`p3
(::
¡d
::
	`move
(
gmock_p3
)), 
	`p4
(::¡d::move(
gmock_p4
)), \

262 
	`p5
(::
¡d
::
	`move
(
gmock_p5
)), 
	`p6
(::¡d::move(
gmock_p6
))

	)

263 
	#GMOCK_INTERNAL_INIT_AND_8_VALUE_PARAMS
(
p0
, 
p1
, 
p2
, 
p3
, 
p4
, 
p5
, 
p6
, 
p7
)\

264 (
p0
##
_ty³
 
gmock_p0
, 
p1
##_ty³ 
gmock_p1
, 
p2
##_ty³ 
gmock_p2
, \

265 
p3
##
_ty³
 
gmock_p3
, 
p4
##_ty³ 
gmock_p4
, 
p5
##_ty³ 
gmock_p5
, \

266 
p6
##
_ty³
 
gmock_p6
, 
p7
##_ty³ 
gmock_p7
è: 
	`p0
(::
¡d
::
	`move
(
gmock_p0
)), \

267 
	`p1
(::
¡d
::
	`move
(
gmock_p1
)), 
	`p2
(::¡d::move(
gmock_p2
)), \

268 
	`p3
(::
¡d
::
	`move
(
gmock_p3
)), 
	`p4
(::¡d::move(
gmock_p4
)), \

269 
	`p5
(::
¡d
::
	`move
(
gmock_p5
)), 
	`p6
(::¡d::move(
gmock_p6
)), \

270 
	`p7
(::
¡d
::
	`move
(
gmock_p7
))

	)

271 
	#GMOCK_INTERNAL_INIT_AND_9_VALUE_PARAMS
(
p0
, 
p1
, 
p2
, 
p3
, 
p4
, 
p5
, 
p6
, \

272 
p7
, 
p8
)\

273 (
p0
##
_ty³
 
gmock_p0
, 
p1
##_ty³ 
gmock_p1
, 
p2
##_ty³ 
gmock_p2
, \

274 
p3
##
_ty³
 
gmock_p3
, 
p4
##_ty³ 
gmock_p4
, 
p5
##_ty³ 
gmock_p5
, \

275 
p6
##
_ty³
 
gmock_p6
, 
p7
##_ty³ 
gmock_p7
, \

276 
p8
##
_ty³
 
gmock_p8
è: 
	`p0
(::
¡d
::
	`move
(
gmock_p0
)), \

277 
	`p1
(::
¡d
::
	`move
(
gmock_p1
)), 
	`p2
(::¡d::move(
gmock_p2
)), \

278 
	`p3
(::
¡d
::
	`move
(
gmock_p3
)), 
	`p4
(::¡d::move(
gmock_p4
)), \

279 
	`p5
(::
¡d
::
	`move
(
gmock_p5
)), 
	`p6
(::¡d::move(
gmock_p6
)), \

280 
	`p7
(::
¡d
::
	`move
(
gmock_p7
)), 
	`p8
(::¡d::move(
gmock_p8
))

	)

281 
	#GMOCK_INTERNAL_INIT_AND_10_VALUE_PARAMS
(
p0
, 
p1
, 
p2
, 
p3
, 
p4
, 
p5
, 
p6
, \

282 
p7
, 
p8
, 
p9
)\

283 (
p0
##
_ty³
 
gmock_p0
, 
p1
##_ty³ 
gmock_p1
, 
p2
##_ty³ 
gmock_p2
, \

284 
p3
##
_ty³
 
gmock_p3
, 
p4
##_ty³ 
gmock_p4
, 
p5
##_ty³ 
gmock_p5
, \

285 
p6
##
_ty³
 
gmock_p6
, 
p7
##_ty³ 
gmock_p7
, 
p8
##_ty³ 
gmock_p8
, \

286 
p9
##
_ty³
 
gmock_p9
è: 
	`p0
(::
¡d
::
	`move
(
gmock_p0
)), \

287 
	`p1
(::
¡d
::
	`move
(
gmock_p1
)), 
	`p2
(::¡d::move(
gmock_p2
)), \

288 
	`p3
(::
¡d
::
	`move
(
gmock_p3
)), 
	`p4
(::¡d::move(
gmock_p4
)), \

289 
	`p5
(::
¡d
::
	`move
(
gmock_p5
)), 
	`p6
(::¡d::move(
gmock_p6
)), \

290 
	`p7
(::
¡d
::
	`move
(
gmock_p7
)), 
	`p8
(::¡d::move(
gmock_p8
)), \

291 
	`p9
(::
¡d
::
	`move
(
gmock_p9
))

	)

294 
	#GMOCK_INTERNAL_DEFN_COPY_AND_0_VALUE_PARAMS
() \

296 
	#GMOCK_INTERNAL_DEFN_COPY_AND_1_VALUE_PARAMS
(...èğ;

	)

297 
	#GMOCK_INTERNAL_DEFN_COPY_AND_2_VALUE_PARAMS
(...èğ;

	)

298 
	#GMOCK_INTERNAL_DEFN_COPY_AND_3_VALUE_PARAMS
(...èğ;

	)

299 
	#GMOCK_INTERNAL_DEFN_COPY_AND_4_VALUE_PARAMS
(...èğ;

	)

300 
	#GMOCK_INTERNAL_DEFN_COPY_AND_5_VALUE_PARAMS
(...èğ;

	)

301 
	#GMOCK_INTERNAL_DEFN_COPY_AND_6_VALUE_PARAMS
(...èğ;

	)

302 
	#GMOCK_INTERNAL_DEFN_COPY_AND_7_VALUE_PARAMS
(...èğ;

	)

303 
	#GMOCK_INTERNAL_DEFN_COPY_AND_8_VALUE_PARAMS
(...èğ;

	)

304 
	#GMOCK_INTERNAL_DEFN_COPY_AND_9_VALUE_PARAMS
(...èğ;

	)

305 
	#GMOCK_INTERNAL_DEFN_COPY_AND_10_VALUE_PARAMS
(...èğ;

	)

308 
	#GMOCK_INTERNAL_DEFN_AND_0_VALUE_PARAMS
()

	)

309 
	#GMOCK_INTERNAL_DEFN_AND_1_VALUE_PARAMS
(
p0
èp0##
_ty³
…0;

	)

310 
	#GMOCK_INTERNAL_DEFN_AND_2_VALUE_PARAMS
(
p0
, 
p1
èp0##
_ty³
…0; \

311 
p1
##
_ty³
…1;

	)

312 
	#GMOCK_INTERNAL_DEFN_AND_3_VALUE_PARAMS
(
p0
, 
p1
, 
p2
èp0##
_ty³
…0; \

313 
p1
##
_ty³
…1; 
p2
##_ty³…2;

	)

314 
	#GMOCK_INTERNAL_DEFN_AND_4_VALUE_PARAMS
(
p0
, 
p1
, 
p2
, 
p3
èp0##
_ty³
…0; \

315 
p1
##
_ty³
…1; 
p2
##_ty³…2; 
p3
##_ty³…3;

	)

316 
	#GMOCK_INTERNAL_DEFN_AND_5_VALUE_PARAMS
(
p0
, 
p1
, 
p2
, 
p3
, \

317 
p4
è
p0
##
_ty³
…0; 
p1
##_ty³…1; 
p2
##_ty³…2; 
p3
##_ty³…3;…4##_ty³…4;

	)

318 
	#GMOCK_INTERNAL_DEFN_AND_6_VALUE_PARAMS
(
p0
, 
p1
, 
p2
, 
p3
, 
p4
, \

319 
p5
è
p0
##
_ty³
…0; 
p1
##_ty³…1; 
p2
##_ty³…2; 
p3
##_ty³…3; 
p4
##_type…4; \

320 
p5
##
_ty³
…5;

	)

321 
	#GMOCK_INTERNAL_DEFN_AND_7_VALUE_PARAMS
(
p0
, 
p1
, 
p2
, 
p3
, 
p4
, 
p5
, \

322 
p6
è
p0
##
_ty³
…0; 
p1
##_ty³…1; 
p2
##_ty³…2; 
p3
##_ty³…3; 
p4
##_type…4; \

323 
p5
##
_ty³
…5; 
p6
##_ty³…6;

	)

324 
	#GMOCK_INTERNAL_DEFN_AND_8_VALUE_PARAMS
(
p0
, 
p1
, 
p2
, 
p3
, 
p4
, 
p5
, 
p6
, \

325 
p7
è
p0
##
_ty³
…0; 
p1
##_ty³…1; 
p2
##_ty³…2; 
p3
##_ty³…3; 
p4
##_type…4; \

326 
p5
##
_ty³
…5; 
p6
##_ty³…6; 
p7
##_ty³…7;

	)

327 
	#GMOCK_INTERNAL_DEFN_AND_9_VALUE_PARAMS
(
p0
, 
p1
, 
p2
, 
p3
, 
p4
, 
p5
, 
p6
, \

328 
p7
, 
p8
è
p0
##
_ty³
…0; 
p1
##_ty³…1; 
p2
##_ty³…2; 
p3
##_type…3; \

329 
p4
##
_ty³
…4; 
p5
##_ty³…5; 
p6
##_ty³…6; 
p7
##_ty³…7; 
p8
##_ty³…8;

	)

330 
	#GMOCK_INTERNAL_DEFN_AND_10_VALUE_PARAMS
(
p0
, 
p1
, 
p2
, 
p3
, 
p4
, 
p5
, 
p6
, \

331 
p7
, 
p8
, 
p9
è
p0
##
_ty³
…0; 
p1
##_ty³…1; 
p2
##_ty³…2; 
p3
##_type…3; \

332 
p4
##
_ty³
…4; 
p5
##_ty³…5; 
p6
##_ty³…6; 
p7
##_ty³…7; 
p8
##_type…8; \

333 
p9
##
_ty³
…9;

	)

336 
	#GMOCK_INTERNAL_LIST_AND_0_VALUE_PARAMS
()

	)

337 
	#GMOCK_INTERNAL_LIST_AND_1_VALUE_PARAMS
(
p0
è
	)
p0

338 
	#GMOCK_INTERNAL_LIST_AND_2_VALUE_PARAMS
(
p0
, 
p1
èp0, 
	)
p1

339 
	#GMOCK_INTERNAL_LIST_AND_3_VALUE_PARAMS
(
p0
, 
p1
, 
p2
èp0,…1, 
	)
p2

340 
	#GMOCK_INTERNAL_LIST_AND_4_VALUE_PARAMS
(
p0
, 
p1
, 
p2
, 
p3
èp0,…1,…2, 
	)
p3

341 
	#GMOCK_INTERNAL_LIST_AND_5_VALUE_PARAMS
(
p0
, 
p1
, 
p2
, 
p3
, 
p4
)…0,…1, \

342 
p2
, 
p3
, 
p4


	)

343 
	#GMOCK_INTERNAL_LIST_AND_6_VALUE_PARAMS
(
p0
, 
p1
, 
p2
, 
p3
, 
p4
, 
p5
)…0, \

344 
p1
, 
p2
, 
p3
, 
p4
, 
p5


	)

345 
	#GMOCK_INTERNAL_LIST_AND_7_VALUE_PARAMS
(
p0
, 
p1
, 
p2
, 
p3
, 
p4
, 
p5
, \

346 
p6
è
p0
, 
p1
, 
p2
, 
p3
, 
p4
, 
p5
, 
	)
p6

347 
	#GMOCK_INTERNAL_LIST_AND_8_VALUE_PARAMS
(
p0
, 
p1
, 
p2
, 
p3
, 
p4
, 
p5
, 
p6
, \

348 
p7
è
p0
, 
p1
, 
p2
, 
p3
, 
p4
, 
p5
, 
p6
, 
	)
p7

349 
	#GMOCK_INTERNAL_LIST_AND_9_VALUE_PARAMS
(
p0
, 
p1
, 
p2
, 
p3
, 
p4
, 
p5
, 
p6
, \

350 
p7
, 
p8
è
p0
, 
p1
, 
p2
, 
p3
, 
p4
, 
p5
, 
p6
,…7, 
	)
p8

351 
	#GMOCK_INTERNAL_LIST_AND_10_VALUE_PARAMS
(
p0
, 
p1
, 
p2
, 
p3
, 
p4
, 
p5
, 
p6
, \

352 
p7
, 
p8
, 
p9
è
p0
, 
p1
, 
p2
, 
p3
, 
p4
, 
p5
, 
p6
,…7,…8, 
	)
p9

355 
	#GMOCK_INTERNAL_LIST_TYPE_AND_0_VALUE_PARAMS
()

	)

356 
	#GMOCK_INTERNAL_LIST_TYPE_AND_1_VALUE_PARAMS
(
p0
è,…0##
_ty³


	)

357 
	#GMOCK_INTERNAL_LIST_TYPE_AND_2_VALUE_PARAMS
(
p0
, 
p1
è,…0##
_ty³
, \

358 
p1
##
_ty³


	)

359 
	#GMOCK_INTERNAL_LIST_TYPE_AND_3_VALUE_PARAMS
(
p0
, 
p1
, 
p2
è,…0##
_ty³
, \

360 
p1
##
_ty³
, 
p2
##
	)
_type

361 
	#GMOCK_INTERNAL_LIST_TYPE_AND_4_VALUE_PARAMS
(
p0
, 
p1
, 
p2
, 
p3
) , \

362 
p0
##
_ty³
, 
p1
##_ty³, 
p2
##_ty³, 
p3
##
	)
_type

363 
	#GMOCK_INTERNAL_LIST_TYPE_AND_5_VALUE_PARAMS
(
p0
, 
p1
, 
p2
, 
p3
, 
p4
) , \

364 
p0
##
_ty³
, 
p1
##_ty³, 
p2
##_ty³, 
p3
##_ty³, 
p4
##
	)
_type

365 
	#GMOCK_INTERNAL_LIST_TYPE_AND_6_VALUE_PARAMS
(
p0
, 
p1
, 
p2
, 
p3
, 
p4
, 
p5
) , \

366 
p0
##
_ty³
, 
p1
##_ty³, 
p2
##_ty³, 
p3
##_ty³, 
p4
##_ty³, 
p5
##
	)
_type

367 
	#GMOCK_INTERNAL_LIST_TYPE_AND_7_VALUE_PARAMS
(
p0
, 
p1
, 
p2
, 
p3
, 
p4
, 
p5
, \

368 
p6
è, 
p0
##
_ty³
, 
p1
##_ty³, 
p2
##_ty³, 
p3
##_ty³, 
p4
##_ty³, 
p5
##_type, \

369 
p6
##
_ty³


	)

370 
	#GMOCK_INTERNAL_LIST_TYPE_AND_8_VALUE_PARAMS
(
p0
, 
p1
, 
p2
, 
p3
, 
p4
, 
p5
, \

371 
p6
, 
p7
è, 
p0
##
_ty³
, 
p1
##_ty³, 
p2
##_ty³, 
p3
##_ty³, 
p4
##_type, \

372 
p5
##
_ty³
, 
p6
##_ty³, 
p7
##
	)
_type

373 
	#GMOCK_INTERNAL_LIST_TYPE_AND_9_VALUE_PARAMS
(
p0
, 
p1
, 
p2
, 
p3
, 
p4
, 
p5
, \

374 
p6
, 
p7
, 
p8
è, 
p0
##
_ty³
, 
p1
##_ty³, 
p2
##_ty³, 
p3
##_ty³, 
p4
##_type, \

375 
p5
##
_ty³
, 
p6
##_ty³, 
p7
##_ty³, 
p8
##
	)
_type

376 
	#GMOCK_INTERNAL_LIST_TYPE_AND_10_VALUE_PARAMS
(
p0
, 
p1
, 
p2
, 
p3
, 
p4
, 
p5
, \

377 
p6
, 
p7
, 
p8
, 
p9
è, 
p0
##
_ty³
, 
p1
##_ty³, 
p2
##_ty³, 
p3
##_ty³, 
p4
##_type, \

378 
p5
##
_ty³
, 
p6
##_ty³, 
p7
##_ty³, 
p8
##_ty³, 
p9
##
	)
_type

381 
	#GMOCK_INTERNAL_DECL_AND_0_VALUE_PARAMS
()

	)

382 
	#GMOCK_INTERNAL_DECL_AND_1_VALUE_PARAMS
(
p0
èp0##
_ty³
 
	)
p0

383 
	#GMOCK_INTERNAL_DECL_AND_2_VALUE_PARAMS
(
p0
, 
p1
èp0##
_ty³
…0, \

384 
p1
##
_ty³
 
	)
p1

385 
	#GMOCK_INTERNAL_DECL_AND_3_VALUE_PARAMS
(
p0
, 
p1
, 
p2
èp0##
_ty³
…0, \

386 
p1
##
_ty³
…1, 
p2
##_ty³ 
	)
p2

387 
	#GMOCK_INTERNAL_DECL_AND_4_VALUE_PARAMS
(
p0
, 
p1
, 
p2
, 
p3
èp0##
_ty³
…0, \

388 
p1
##
_ty³
…1, 
p2
##_ty³…2, 
p3
##_ty³ 
	)
p3

389 
	#GMOCK_INTERNAL_DECL_AND_5_VALUE_PARAMS
(
p0
, 
p1
, 
p2
, 
p3
, \

390 
p4
è
p0
##
_ty³
…0, 
p1
##_ty³…1, 
p2
##_ty³…2, 
p3
##_ty³…3,…4##_ty³ 
	)
p4

391 
	#GMOCK_INTERNAL_DECL_AND_6_VALUE_PARAMS
(
p0
, 
p1
, 
p2
, 
p3
, 
p4
, \

392 
p5
è
p0
##
_ty³
…0, 
p1
##_ty³…1, 
p2
##_ty³…2, 
p3
##_ty³…3, 
p4
##_type…4, \

393 
p5
##
_ty³
 
	)
p5

394 
	#GMOCK_INTERNAL_DECL_AND_7_VALUE_PARAMS
(
p0
, 
p1
, 
p2
, 
p3
, 
p4
, 
p5
, \

395 
p6
è
p0
##
_ty³
…0, 
p1
##_ty³…1, 
p2
##_ty³…2, 
p3
##_ty³…3, 
p4
##_type…4, \

396 
p5
##
_ty³
…5, 
p6
##_ty³ 
	)
p6

397 
	#GMOCK_INTERNAL_DECL_AND_8_VALUE_PARAMS
(
p0
, 
p1
, 
p2
, 
p3
, 
p4
, 
p5
, 
p6
, \

398 
p7
è
p0
##
_ty³
…0, 
p1
##_ty³…1, 
p2
##_ty³…2, 
p3
##_ty³…3, 
p4
##_type…4, \

399 
p5
##
_ty³
…5, 
p6
##_ty³…6, 
p7
##_ty³ 
	)
p7

400 
	#GMOCK_INTERNAL_DECL_AND_9_VALUE_PARAMS
(
p0
, 
p1
, 
p2
, 
p3
, 
p4
, 
p5
, 
p6
, \

401 
p7
, 
p8
è
p0
##
_ty³
…0, 
p1
##_ty³…1, 
p2
##_ty³…2, 
p3
##_type…3, \

402 
p4
##
_ty³
…4, 
p5
##_ty³…5, 
p6
##_ty³…6, 
p7
##_ty³…7, 
p8
##_ty³ 
	)
p8

403 
	#GMOCK_INTERNAL_DECL_AND_10_VALUE_PARAMS
(
p0
, 
p1
, 
p2
, 
p3
, 
p4
, 
p5
, 
p6
, \

404 
p7
, 
p8
, 
p9
è
p0
##
_ty³
…0, 
p1
##_ty³…1, 
p2
##_ty³…2, 
p3
##_type…3, \

405 
p4
##
_ty³
…4, 
p5
##_ty³…5, 
p6
##_ty³…6, 
p7
##_ty³…7, 
p8
##_type…8, \

406 
p9
##
_ty³
 
	)
p9

409 
	#GMOCK_INTERNAL_COUNT_AND_0_VALUE_PARAMS
()

	)

410 
	#GMOCK_INTERNAL_COUNT_AND_1_VALUE_PARAMS
(
p0
è
P


	)

411 
	#GMOCK_INTERNAL_COUNT_AND_2_VALUE_PARAMS
(
p0
, 
p1
è
P2


	)

412 
	#GMOCK_INTERNAL_COUNT_AND_3_VALUE_PARAMS
(
p0
, 
p1
, 
p2
è
P3


	)

413 
	#GMOCK_INTERNAL_COUNT_AND_4_VALUE_PARAMS
(
p0
, 
p1
, 
p2
, 
p3
è
P4


	)

414 
	#GMOCK_INTERNAL_COUNT_AND_5_VALUE_PARAMS
(
p0
, 
p1
, 
p2
, 
p3
, 
p4
è
P5


	)

415 
	#GMOCK_INTERNAL_COUNT_AND_6_VALUE_PARAMS
(
p0
, 
p1
, 
p2
, 
p3
, 
p4
, 
p5
è
P6


	)

416 
	#GMOCK_INTERNAL_COUNT_AND_7_VALUE_PARAMS
(
p0
, 
p1
, 
p2
, 
p3
, 
p4
, 
p5
, 
p6
è
P7


	)

417 
	#GMOCK_INTERNAL_COUNT_AND_8_VALUE_PARAMS
(
p0
, 
p1
, 
p2
, 
p3
, 
p4
, 
p5
, 
p6
, \

418 
p7
è
P8


	)

419 
	#GMOCK_INTERNAL_COUNT_AND_9_VALUE_PARAMS
(
p0
, 
p1
, 
p2
, 
p3
, 
p4
, 
p5
, 
p6
, \

420 
p7
, 
p8
è
P9


	)

421 
	#GMOCK_INTERNAL_COUNT_AND_10_VALUE_PARAMS
(
p0
, 
p1
, 
p2
, 
p3
, 
p4
, 
p5
, 
p6
, \

422 
p7
, 
p8
, 
p9
è
P10


	)

425 
	#GMOCK_ACTION_CLASS_
(
Çme
, 
v®ue_·¿ms
)\

426 
	`GTEST_CONCAT_TOKEN_
(
Çme
##
AùiÚ
, 
GMOCK_INTERNAL_COUNT_
##
v®ue_·¿ms
)

	)

428 
	#ACTION_TEMPLATE
(
Çme
, 
‹m¶©e_·¿ms
, 
v®ue_·¿ms
) \

429 
‹m¶©e
 <
GMOCK_INTERNAL_DECL_
##
‹m¶©e_·¿ms
 \

430 
GMOCK_INTERNAL_DECL_TYPE_
##
v®ue_·¿ms
> \

431 
şass
 
	`GMOCK_ACTION_CLASS_
(
Çme
, 
v®ue_·¿ms
) { \

432 
public
: \

433 
ex¶ic™
 
	`GMOCK_ACTION_CLASS_
(
Çme
, 
v®ue_·¿ms
)( \

434 
GMOCK_INTERNAL_DECL_
##
v®ue_·¿ms
) \

435 
	`GMOCK_PP_IF
(
	`GMOCK_PP_IS_EMPTY
(
GMOCK_INTERNAL_COUNT_
##
v®ue_·¿ms
), \

437 : 
	`im¶_
(
¡d
::
make_sh¬ed
<
gmock_Im¶
>( \

438 
GMOCK_INTERNAL_LIST_
##
v®ue_·¿ms
)) { }) \

439 
	`GMOCK_ACTION_CLASS_
(
Çme
, 
v®ue_·¿ms
)( \

440 cÚ¡ 
	`GMOCK_ACTION_CLASS_
(
Çme
, 
v®ue_·¿ms
)&è
nÛxû±
 \

441 
GMOCK_INTERNAL_DEFN_COPY_
##
v®ue_·¿ms
 \

442 
	`GMOCK_ACTION_CLASS_
(
Çme
, 
v®ue_·¿ms
)( \

443 
	`GMOCK_ACTION_CLASS_
(
Çme
, 
v®ue_·¿ms
)&&è
nÛxû±
 \

444 
GMOCK_INTERNAL_DEFN_COPY_
##
v®ue_·¿ms
 \

445 
‹m¶©e
 <
ty³Çme
 
F
> \

446 
İ”©Ü
 ::
‹¡šg
::
AùiÚ
<
F
>() const { \

447  
	`GMOCK_PP_IF
( \

448 
	`GMOCK_PP_IS_EMPTY
(
GMOCK_INTERNAL_COUNT_
##
v®ue_·¿ms
), \

449 (::
‹¡šg
::
š‹º®
::
MakeAùiÚ
<
F
, 
gmock_Im¶
>()), \

450 (::
‹¡šg
::
š‹º®
::
MakeAùiÚ
<
F
>(
im¶_
))); \

452 
´iv©e
: \

453 şas 
	cgmock_Im¶
 { \

454 
public
: \

455 
ex¶ic™
 
gmock_Im¶
 
GMOCK_INTERNAL_INIT_
##
v®ue_·¿ms
 {} \

456 
‹m¶©e
 <
ty³Çme
 
funùiÚ_ty³
,y³Çm
»tuº_ty³
, \

457 
ty³Çme
 
¬gs_ty³
, 
GMOCK_ACTION_TEMPLATE_ARGS_NAMES_
> \

458 
»tuº_ty³
 
	`gmock_P”fÜmIm¶
(
GMOCK_ACTION_ARG_TYPES_AND_NAMES_
) const; \

459 
GMOCK_INTERNAL_DEFN_
##
v®ue_·¿ms
 \

461 
	`GMOCK_PP_IF
(
	`GMOCK_PP_IS_EMPTY
(
GMOCK_INTERNAL_COUNT_
##
v®ue_·¿ms
), \

462 , 
¡d
::
sh¬ed_±r
<cÚ¡ 
gmock_Im¶
> 
im¶_
;) \

464 
‹m¶©e
 <
GMOCK_INTERNAL_DECL_
##
‹m¶©e_·¿ms
 \

465 
GMOCK_INTERNAL_DECL_TYPE_
##
v®ue_·¿ms
> \

466 
	`GMOCK_ACTION_CLASS_
(
Çme
, 
v®ue_·¿ms
)< \

467 
GMOCK_INTERNAL_LIST_
##
‹m¶©e_·¿ms
 \

468 
GMOCK_INTERNAL_LIST_TYPE_
##
v®ue_·¿ms
> 
	`Çme
( \

469 
GMOCK_INTERNAL_DECL_
##
v®ue_·¿ms
è
GTEST_MUST_USE_RESULT_
; \

470 
‹m¶©e
 <
GMOCK_INTERNAL_DECL_
##
‹m¶©e_·¿ms
 \

471 
GMOCK_INTERNAL_DECL_TYPE_
##
v®ue_·¿ms
> \

472 
šlše
 
	`GMOCK_ACTION_CLASS_
(
Çme
, 
v®ue_·¿ms
)< \

473 
GMOCK_INTERNAL_LIST_
##
‹m¶©e_·¿ms
 \

474 
GMOCK_INTERNAL_LIST_TYPE_
##
v®ue_·¿ms
> 
	`Çme
( \

475 
GMOCK_INTERNAL_DECL_
##
v®ue_·¿ms
) { \

476  
	`GMOCK_ACTION_CLASS_
(
Çme
, 
v®ue_·¿ms
)< \

477 
GMOCK_INTERNAL_LIST_
##
‹m¶©e_·¿ms
 \

478 
GMOCK_INTERNAL_LIST_TYPE_
##
v®ue_·¿ms
>( \

479 
GMOCK_INTERNAL_LIST_
##
v®ue_·¿ms
); \

481 
‹m¶©e
 <
GMOCK_INTERNAL_DECL_
##
‹m¶©e_·¿ms
 \

482 
GMOCK_INTERNAL_DECL_TYPE_
##
v®ue_·¿ms
> \

483 
‹m¶©e
 <
ty³Çme
 
funùiÚ_ty³
,y³Çm
»tuº_ty³
,y³Çm
¬gs_ty³
, \

484 
GMOCK_ACTION_TEMPLATE_ARGS_NAMES_
> \

485 
»tuº_ty³
 
	`GMOCK_ACTION_CLASS_
(
Çme
, 
v®ue_·¿ms
)< \

486 
GMOCK_INTERNAL_LIST_
##
‹m¶©e_·¿ms
 \

487 
GMOCK_INTERNAL_LIST_TYPE_
##
v®ue_·¿ms
>::
gmock_Im¶
::
	`gmock_P”fÜmIm¶
( \

488 
GMOCK_ACTION_ARG_TYPES_AND_NAMES_UNUSED_
ècÚ¡

	)

490 
Çme¥aû
 
	g‹¡šg
 {

497 #ifdeà
_MSC_VER


498 #´agm¨
w¬nšg
(
push
)

499 #´agm¨
w¬nšg
(
di§bË
:4100)

502 
Çme¥aû
 
	gš‹º®
 {

508 
	g‹m¶©e
 <
ty³Çme
 
	gF
, 
	gty³Çme
... 
	gArgs
>

509 autØ
InvokeArgum’t
(
F
 
f
, 
Args
... 
¬gs
è-> 
deşty³
(f(args...)) {

510  
f
(
¬gs
...);

513 
	g‹m¶©e
 <
	g¡d
::
size_t
 
šdex
, 
	gty³Çme
... 
	gP¬ams
>

514 
	sInvokeArgum’tAùiÚ
 {

515 
	g‹m¶©e
 <
	gty³Çme
... 
	gArgs
>

516 autØ
İ”©Ü
()(
	gArgs
&&... 
	g¬gs
ècÚ¡ -> 
deşty³
(
š‹º®
::
InvokeArgum’t
(

517 
¡d
::
g‘
<
šdex
>(¡d::
fÜw¬d_as_tu¶e
(¡d::
fÜw¬d
<
Args
>(
¬gs
)...)),

518 
¡d
::
deşv®
<cÚ¡ 
P¬ams
&>()...)) {

519 
š‹º®
::
FÏtTu¶e
<
Args
&&...> 
¬gs_tu¶e
(
FÏtTu¶eCÚ¡ruùTag
{},

520 
¡d
::
fÜw¬d
<
Args
>(
¬gs
)...);

521  
	g·¿ms
.
Aµly
([&](cÚ¡ 
P¬ams
&... 
uÅacked_·¿ms
) {

522 auto&& 
ÿÎabË
 = 
¬gs_tu¶e
.
‹m¶©e
 
G‘
<
šdex
>();

523  
š‹º®
::
InvokeArgum’t
(

524 
¡d
::
fÜw¬d
<
deşty³
(
ÿÎabË
)>(ÿÎabË), 
uÅacked_·¿ms
...);

528 
	gš‹º®
::
FÏtTu¶e
<
P¬ams
...> 
·¿ms
;

560 
	g‹m¶©e
 <
	g¡d
::
size_t
 
šdex
, 
	gty³Çme
... 
	gP¬ams
>

561 
	gš‹º®
::
InvokeArgum’tAùiÚ
<
šdex
, 
ty³Çme
 
	g¡d
::
deÿy
<
P¬ams
>::
ty³
...>

562 
InvokeArgum’t
(
P¬ams
&&... 
·¿ms
) {

563  {
š‹º®
::
FÏtTu¶e
<
ty³Çme
 
¡d
::
deÿy
<
P¬ams
>::
ty³
...>(

564 
š‹º®
::
FÏtTu¶eCÚ¡ruùTag
{}, 
	g¡d
::
fÜw¬d
<
P¬ams
>(
·¿ms
)...)};

567 #ifdeà
_MSC_VER


568 #´agm¨
w¬nšg
(
pİ
)

	@third_party/googletest/googlemock/include/gmock/gmock-more-matchers.h

40 #iâdeà
GOOGLEMOCK_INCLUDE_GMOCK_GMOCK_MORE_MATCHERS_H_


41 
	#GOOGLEMOCK_INCLUDE_GMOCK_GMOCK_MORE_MATCHERS_H_


	)

43 
	~"gmock/gmock-m©ch”s.h
"

45 
Çme¥aû
 
	g‹¡šg
 {

49 #ifdeà
_MSC_VER


50 #´agm¨
w¬nšg
(
push
)

51 #´agm¨
w¬nšg
(
di§bË
:4100)

52 #ià(
_MSC_VER
 == 1900)

55 #´agm¨
w¬nšg
(
di§bË
:4800)

61 
MATCHER
(
IsEm±y
, 
Ãg©iÚ
 ? "isn'tƒmpty" : "isƒmpty") {

62 ià(
¬g
.
em±y
()) {

63  
Œue
;

65 *
	g»suÉ_li¡’”
 << "who£ sizi " << 
	g¬g
.
size
();

66  
	gçl£
;

73 
MATCHER
(
IsTrue
, 
Ãg©iÚ
 ? "is false" : "isrue") {

74  
¡©ic_ÿ¡
<
boŞ
>(
¬g
);

81 
MATCHER
(
IsF®£
, 
Ãg©iÚ
 ? "isrue" : "is false") {

82  !
¡©ic_ÿ¡
<
boŞ
>(
¬g
);

85 #ifdeà
_MSC_VER


86 #´agm¨
w¬nšg
(
pİ
)

	@third_party/googletest/googlemock/include/gmock/gmock-nice-strict.h

63 #iâdeà
GOOGLEMOCK_INCLUDE_GMOCK_GMOCK_NICE_STRICT_H_


64 
	#GOOGLEMOCK_INCLUDE_GMOCK_GMOCK_NICE_STRICT_H_


	)

66 
	~<ty³_Œa™s
>

68 
	~"gmock/gmock-¥ec-bud”s.h
"

69 
	~"gmock/š‹º®/gmock-pÜt.h
"

71 
Çme¥aû
 
	g‹¡šg
 {

72 
	g‹m¶©e
 <
şass
 
	gMockCÏss
>

73 
şass
 
	gNiûMock
;

74 
	g‹m¶©e
 <
şass
 
	gMockCÏss
>

75 
şass
 
	gNaggyMock
;

76 
	g‹m¶©e
 <
şass
 
	gMockCÏss
>

77 
şass
 
	gSŒiùMock
;

79 
Çme¥aû
 
	gš‹º®
 {

80 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

81 
	g¡d
::
Œue_ty³
 
SŒiùÃssModif›rProbe
(cÚ¡ 
NiûMock
<
T
>&);

82 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

83 
	g¡d
::
Œue_ty³
 
SŒiùÃssModif›rProbe
(cÚ¡ 
NaggyMock
<
T
>&);

84 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

85 
	g¡d
::
Œue_ty³
 
SŒiùÃssModif›rProbe
(cÚ¡ 
SŒiùMock
<
T
>&);

86 
	g¡d
::
çl£_ty³
 
SŒiùÃssModif›rProbe
(...);

88 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

89 
cÚ¡ex´
 
boŞ
 
HasSŒiùÃssModif›r
() {

90  
deşty³
(
SŒiùÃssModif›rProbe
(
¡d
::
deşv®
<cÚ¡ 
T
&>()))::
v®ue
;

100 #ià
GTEST_OS_WINDOWS
 && !
GTEST_OS_WINDOWS_MINGW
 && \

101 (
defšed
(
_MSC_VER
è|| defšed(
__şªg__
))

104 
	#GTEST_INTERNAL_EMPTY_BASE_CLASS
 
	`__deş¥ec
(
em±y_ba£s
)

	)

106 
	#GTEST_INTERNAL_EMPTY_BASE_CLASS


	)

109 
	g‹m¶©e
 <
ty³Çme
 
	gBa£
>

110 şas 
	cNiûMockIm¶
 {

111 
	gpublic
:

112 
NiûMockIm¶
(è{ ::
‹¡šg
::
Mock
::
AÎowUnš‹»¡šgC®ls
(
this
); }

114 ~
NiûMockIm¶
(è{ ::
‹¡šg
::
Mock
::
UÄegi¡”C®lR—ùiÚ
(
this
); }

117 
	g‹m¶©e
 <
ty³Çme
 
	gBa£
>

118 şas 
	cNaggyMockIm¶
 {

119 
	gpublic
:

120 
NaggyMockIm¶
(è{ ::
‹¡šg
::
Mock
::
W¬nUnš‹»¡šgC®ls
(
this
); }

122 ~
NaggyMockIm¶
(è{ ::
‹¡šg
::
Mock
::
UÄegi¡”C®lR—ùiÚ
(
this
); }

125 
	g‹m¶©e
 <
ty³Çme
 
	gBa£
>

126 şas 
	cSŒiùMockIm¶
 {

127 
	gpublic
:

128 
SŒiùMockIm¶
(è{ ::
‹¡šg
::
Mock
::
FaUnš‹»¡šgC®ls
(
this
); }

130 ~
SŒiùMockIm¶
(è{ ::
‹¡šg
::
Mock
::
UÄegi¡”C®lR—ùiÚ
(
this
); }

135 
	g‹m¶©e
 <
şass
 
	gMockCÏss
>

136 
şass
 
GTEST_INTERNAL_EMPTY_BASE_CLASS
 
	gNiûMock


137 : 
´iv©e
 
š‹º®
::
NiûMockIm¶
<
MockCÏss
>,

138 
public
 
	gMockCÏss
 {

139 
	gpublic
:

140 
¡©ic_as£¹
(!
š‹º®
::
HasSŒiùÃssModif›r
<
MockCÏss
>(),

145 
NiûMock
(è: 
MockCÏss
() {

146 
¡©ic_as£¹
((*
this
è=ğ(
MockCÏss
),

157 
	g‹m¶©e
 <
ty³Çme
 
	gA
>

158 
ex¶ic™
 
NiûMock
(
A
&& 
¬g
è: 
MockCÏss
(
¡d
::
fÜw¬d
<A>(arg)) {

159 
¡©ic_as£¹
((*
this
è=ğ(
MockCÏss
),

163 
	g‹m¶©e
 <
ty³Çme
 
	gTArg1
,y³Çm
	gTArg2
, 
	gty³Çme
... 
	gAn
>

164 
NiûMock
(
TArg1
&& 
¬g1
, 
TArg2
&& 
¬g2
, 
An
&&... 
¬gs
)

165 : 
MockCÏss
(
¡d
::
fÜw¬d
<
TArg1
>(
¬g1
), std::fÜw¬d<
TArg2
>(
¬g2
),

166 
¡d
::
fÜw¬d
<
An
>(
¬gs
)...) {

167 
¡©ic_as£¹
((*
this
è=ğ(
MockCÏss
),

171 
	g´iv©e
:

172 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
NiûMock
);

175 
	g‹m¶©e
 <
şass
 
	gMockCÏss
>

176 
şass
 
GTEST_INTERNAL_EMPTY_BASE_CLASS
 
	gNaggyMock


177 : 
´iv©e
 
š‹º®
::
NaggyMockIm¶
<
MockCÏss
>,

178 
public
 
	gMockCÏss
 {

179 
¡©ic_as£¹
(!
š‹º®
::
HasSŒiùÃssModif›r
<
MockCÏss
>(),

185 
	gpublic
:

186 
NaggyMock
(è: 
MockCÏss
() {

187 
¡©ic_as£¹
((*
this
è=ğ(
MockCÏss
),

198 
	g‹m¶©e
 <
ty³Çme
 
	gA
>

199 
ex¶ic™
 
NaggyMock
(
A
&& 
¬g
è: 
MockCÏss
(
¡d
::
fÜw¬d
<A>(arg)) {

200 
¡©ic_as£¹
((*
this
è=ğ(
MockCÏss
),

204 
	g‹m¶©e
 <
ty³Çme
 
	gTArg1
,y³Çm
	gTArg2
, 
	gty³Çme
... 
	gAn
>

205 
NaggyMock
(
TArg1
&& 
¬g1
, 
TArg2
&& 
¬g2
, 
An
&&... 
¬gs
)

206 : 
MockCÏss
(
¡d
::
fÜw¬d
<
TArg1
>(
¬g1
), std::fÜw¬d<
TArg2
>(
¬g2
),

207 
¡d
::
fÜw¬d
<
An
>(
¬gs
)...) {

208 
¡©ic_as£¹
((*
this
è=ğ(
MockCÏss
),

212 
	g´iv©e
:

213 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
NaggyMock
);

216 
	g‹m¶©e
 <
şass
 
	gMockCÏss
>

217 
şass
 
GTEST_INTERNAL_EMPTY_BASE_CLASS
 
	gSŒiùMock


218 : 
´iv©e
 
š‹º®
::
SŒiùMockIm¶
<
MockCÏss
>,

219 
public
 
	gMockCÏss
 {

220 
	gpublic
:

221 
¡©ic_as£¹
(

222 !
š‹º®
::
HasSŒiùÃssModif›r
<
MockCÏss
>(),

227 
SŒiùMock
(è: 
MockCÏss
() {

228 
¡©ic_as£¹
((*
this
è=ğ(
MockCÏss
),

239 
	g‹m¶©e
 <
ty³Çme
 
	gA
>

240 
ex¶ic™
 
SŒiùMock
(
A
&& 
¬g
è: 
MockCÏss
(
¡d
::
fÜw¬d
<A>(arg)) {

241 
¡©ic_as£¹
((*
this
è=ğ(
MockCÏss
),

245 
	g‹m¶©e
 <
ty³Çme
 
	gTArg1
,y³Çm
	gTArg2
, 
	gty³Çme
... 
	gAn
>

246 
SŒiùMock
(
TArg1
&& 
¬g1
, 
TArg2
&& 
¬g2
, 
An
&&... 
¬gs
)

247 : 
MockCÏss
(
¡d
::
fÜw¬d
<
TArg1
>(
¬g1
), std::fÜw¬d<
TArg2
>(
¬g2
),

248 
¡d
::
fÜw¬d
<
An
>(
¬gs
)...) {

249 
¡©ic_as£¹
((*
this
è=ğ(
MockCÏss
),

253 
	g´iv©e
:

254 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
SŒiùMock
);

257 #undeà
GTEST_INTERNAL_EMPTY_BASE_CLASS


	@third_party/googletest/googlemock/include/gmock/gmock-spec-builders.h

61 #iâdeà
GOOGLEMOCK_INCLUDE_GMOCK_GMOCK_SPEC_BUILDERS_H_


62 
	#GOOGLEMOCK_INCLUDE_GMOCK_GMOCK_SPEC_BUILDERS_H_


	)

64 
	~<funùiÚ®
>

65 
	~<m­
>

66 
	~<memÜy
>

67 
	~<£t
>

68 
	~<s¡»am
>

69 
	~<¡ršg
>

70 
	~<ty³_Œa™s
>

71 
	~<ut™y
>

72 
	~<veùÜ
>

73 
	~"gmock/gmock-aùiÚs.h
"

74 
	~"gmock/gmock-ÿrdš®™›s.h
"

75 
	~"gmock/gmock-m©ch”s.h
"

76 
	~"gmock/š‹º®/gmock-š‹º®-uts.h
"

77 
	~"gmock/š‹º®/gmock-pÜt.h
"

78 
	~"g‹¡/g‹¡.h
"

80 #ià
GTEST_HAS_EXCEPTIONS


81 
	~<¡dexû±
>

84 
GTEST_DISABLE_MSC_WARNINGS_PUSH_
(4251 \

87 
Çme¥aû
 
	g‹¡šg
 {

90 
şass
 
	gEx³ù©iÚ
;

93 
şass
 
	gEx³ù©iÚS‘
;

97 
Çme¥aû
 
	gš‹º®
 {

100 
	g‹m¶©e
 <
ty³Çme
 
	gF
> 
şass
 
	gFunùiÚMock”
;

103 
şass
 
	gEx³ù©iÚBa£
;

106 
	g‹m¶©e
 <
ty³Çme
 
	gF
> 
şass
 
	gTy³dEx³ù©iÚ
;

109 
şass
 
	gEx³ù©iÚTe¡”
;

112 
	g‹m¶©e
 <
ty³Çme
 
	gMockCÏss
>

113 
şass
 
	gNiûMockIm¶
;

114 
	g‹m¶©e
 <
ty³Çme
 
	gMockCÏss
>

115 
şass
 
	gSŒiùMockIm¶
;

116 
	g‹m¶©e
 <
ty³Çme
 
	gMockCÏss
>

117 
şass
 
	gNaggyMockIm¶
;

130 
GTEST_API_
 
GTEST_DECLARE_STATIC_MUTEX_
(
g_gmock_mu‹x
);

133 
şass
 
	gUÁy³dAùiÚResuÉHŞd”Ba£
;

138 şas 
	cGTEST_API_
 
	gUÁy³dFunùiÚMock”Ba£
 {

139 
	gpublic
:

140 
UÁy³dFunùiÚMock”Ba£
();

141 
	gvœtu®
 ~
UÁy³dFunùiÚMock”Ba£
();

146 
boŞ
 
V”ifyAndCË¬Ex³ù©iÚsLocked
()

147 
GTEST_EXCLUSIVE_LOCK_REQUIRED_
(
g_gmock_mu‹x
);

150 
vœtu®
 
CË¬DeçuÉAùiÚsLocked
()

151 
GTEST_EXCLUSIVE_LOCK_REQUIRED_
(
g_gmock_mu‹x
) = 0;

162 
vœtu®
 
UÁy³dAùiÚResuÉHŞd”Ba£
* 
UÁy³dP”fÜmDeçuÉAùiÚ
(

163 * 
uÁy³d_¬gs
, cÚ¡ 
¡d
::
¡ršg
& 
ÿÎ_desütiÚ
) const = 0;

168 
vœtu®
 
UÁy³dAùiÚResuÉHŞd”Ba£
* 
UÁy³dP”fÜmAùiÚ
(

169 cÚ¡ * 
uÁy³d_aùiÚ
, * 
uÁy³d_¬gs
) const = 0;

174 
vœtu®
 
UÁy³dDesüibeUnš‹»¡šgC®l
(

175 cÚ¡ * 
uÁy³d_¬gs
,

176 ::
¡d
::
o¡»am
* 
os
) const

177 
GTEST_LOCK_EXCLUDED_
(
g_gmock_mu‹x
) = 0;

185 
vœtu®
 cÚ¡ 
Ex³ù©iÚBa£
* 
UÁy³dFšdM©chšgEx³ù©iÚ
(

186 cÚ¡ * 
uÁy³d_¬gs
,

187 cÚ¡ ** 
uÁy³d_aùiÚ
, 
boŞ
* 
is_exûssive
,

188 ::
¡d
::
o¡»am
* 
wh©
, ::¡d::o¡»am* 
why
)

189 
GTEST_LOCK_EXCLUDED_
(
g_gmock_mu‹x
) = 0;

192 
vœtu®
 
UÁy³dPrštArgs
(cÚ¡ * 
uÁy³d_¬gs
,

193 ::
¡d
::
o¡»am
* 
os
) const = 0;

199 
Regi¡”OwÃr
(cÚ¡ * 
mock_obj
)

200 
GTEST_LOCK_EXCLUDED_
(
g_gmock_mu‹x
);

205 
S‘OwÃrAndName
(cÚ¡ * 
mock_obj
, cÚ¡ * 
Çme
)

206 
GTEST_LOCK_EXCLUDED_
(
g_gmock_mu‹x
);

211 cÚ¡ * 
MockObjeù
() const

212 
GTEST_LOCK_EXCLUDED_
(
g_gmock_mu‹x
);

216 cÚ¡ * 
Name
() const

217 
GTEST_LOCK_EXCLUDED_
(
g_gmock_mu‹x
);

223 
UÁy³dAùiÚResuÉHŞd”Ba£
* 
UÁy³dInvokeW™h
(* 
uÁy³d_¬gs
)

224 
GTEST_LOCK_EXCLUDED_
(
g_gmock_mu‹x
);

226 
	g´Ùeùed
:

227 
¡d
::
	tveùÜ
<cÚ¡ *> 
	tUÁy³dOnC®lS³cs
;

229 
usšg
 
	gUÁy³dEx³ù©iÚs
 = 
¡d
::
veùÜ
<¡d::
sh¬ed_±r
<
Ex³ù©iÚBa£
>>;

233 
Ex³ù©iÚ
 
G‘HªdËOf
(
Ex³ù©iÚBa£
* 
exp
);

238 cÚ¡ * 
	gmock_obj_
;

242 cÚ¡ * 
	gÇme_
;

245 
UÁy³dOnC®lS³cs
 
	guÁy³d_Ú_ÿÎ_¥ecs_
;

256 
UÁy³dEx³ù©iÚs
 
	guÁy³d_ex³ù©iÚs_
;

260 şas 
	cUÁy³dOnC®lS³cBa£
 {

261 
	gpublic
:

263 
UÁy³dOnC®lS³cBa£
(cÚ¡ * 
a_fe
, 
a_lše
)

264 : 
fe_
(
a_fe
), 
lše_
(
a_lše
), 
Ï¡_şau£_
(
kNÚe
) {}

267 cÚ¡ * 
fe
(ècÚ¡ {  
	gfe_
; }

268 
lše
(ècÚ¡ {  
	glše_
; }

270 
	g´Ùeùed
:

272 
	eCÏu£
 {

275 
kNÚe
,

276 
	gkW™h
,

277 
	gkWlByDeçuÉ


281 
As£¹S³cPrİ”ty
(
boŞ
 
´İ”ty
,

282 cÚ¡ 
¡d
::
¡ršg
& 
çu»_mes§ge
) const {

283 
As£¹
(
´İ”ty
, 
fe_
, 
lše_
, 
çu»_mes§ge
);

287 
Ex³ùS³cPrİ”ty
(
boŞ
 
´İ”ty
,

288 cÚ¡ 
¡d
::
¡ršg
& 
çu»_mes§ge
) const {

289 
Ex³ù
(
´İ”ty
, 
fe_
, 
lše_
, 
çu»_mes§ge
);

292 cÚ¡ * 
	gfe_
;

293 
	glše_
;

297 
CÏu£
 
	gÏ¡_şau£_
;

301 
	g‹m¶©e
 <
ty³Çme
 
	gF
>

302 şas 
	cOnC®lS³c
 : 
public
 
UÁy³dOnC®lS³cBa£
 {

303 
public
:

304 
ty³Çme
 
	tFunùiÚ
<
	tF
>::
	tArgum’tTu¶e
 ArgumentTuple;

305 
ty³Çme
 
	tFunùiÚ
<
	tF
>::
	tArgum’tM©ch”Tu¶e
 ArgumentMatcherTuple;

309 
OnC®lS³c
(cÚ¡ * 
a_fe
, 
a_lše
,

310 cÚ¡ 
Argum’tM©ch”Tu¶e
& 
m©ch”s
)

311 : 
UÁy³dOnC®lS³cBa£
(
a_fe
, 
a_lše
),

312 
m©ch”s_
(
m©ch”s
),

316 
exŒa_m©ch”_
(
A
<cÚ¡ 
Argum’tTu¶e
&>()) {}

319 
	gOnC®lS³c
& 
W™h
(cÚ¡ 
M©ch”
<cÚ¡ 
Argum’tTu¶e
&>& 
m
) {

321 
Ex³ùS³cPrİ”ty
(
Ï¡_şau£_
 < 
kW™h
,

324 
	gÏ¡_şau£_
 = 
kW™h
;

326 
	gexŒa_m©ch”_
 = 
m
;

327  *
	gthis
;

331 
	gOnC®lS³c
& 
WlByDeçuÉ
(cÚ¡ 
AùiÚ
<
F
>& 
aùiÚ
) {

332 
Ex³ùS³cPrİ”ty
(
Ï¡_şau£_
 < 
kWlByDeçuÉ
,

335 
	gÏ¡_şau£_
 = 
kWlByDeçuÉ
;

337 
Ex³ùS³cPrİ”ty
(!
aùiÚ
.
IsDoDeçuÉ
(),

339 
	gaùiÚ_
 = 
aùiÚ
;

340  *
	gthis
;

344 
boŞ
 
M©ches
(cÚ¡ 
Argum’tTu¶e
& 
¬gs
) const {

345  
Tu¶eM©ches
(
m©ch”s_
, 
¬gs
è&& 
	gexŒa_m©ch”_
.
M©ches
(args);

349 cÚ¡ 
	gAùiÚ
<
	gF
>& 
G‘AùiÚ
() const {

350 
As£¹S³cPrİ”ty
(
Ï¡_şau£_
 =ğ
kWlByDeçuÉ
,

353  
	gaùiÚ_
;

356 
	g´iv©e
:

370 
Argum’tM©ch”Tu¶e
 
m©ch”s_
;

371 
	gM©ch”
<cÚ¡ 
	gArgum’tTu¶e
&> 
	gexŒa_m©ch”_
;

372 
	gAùiÚ
<
	gF
> 
	gaùiÚ_
;

376 
	eC®lR—ùiÚ
 {

377 
	gkAÎow
,

378 
	gkW¬n
,

379 
	gkFa
,

385 şas 
	cGTEST_API_
 
	gMock
 {

386 
	gpublic
:

391 
AÎowL—k
(cÚ¡ * 
mock_obj
)

392 
GTEST_LOCK_EXCLUDED_
(
š‹º®
::
g_gmock_mu‹x
);

397 
boŞ
 
V”ifyAndCË¬Ex³ù©iÚs
(* 
mock_obj
)

398 
GTEST_LOCK_EXCLUDED_
(
š‹º®
::
g_gmock_mu‹x
);

403 
boŞ
 
V”ifyAndCË¬
(* 
mock_obj
)

404 
GTEST_LOCK_EXCLUDED_
(
š‹º®
::
g_gmock_mu‹x
);

407 
boŞ
 
IsNaggy
(* 
mock_obj
)

408 
GTEST_LOCK_EXCLUDED_
(
š‹º®
::
g_gmock_mu‹x
);

410 
boŞ
 
IsNiû
(* 
mock_obj
)

411 
GTEST_LOCK_EXCLUDED_
(
š‹º®
::
g_gmock_mu‹x
);

413 
boŞ
 
IsSŒiù
(* 
mock_obj
)

414 
GTEST_LOCK_EXCLUDED_
(
š‹º®
::
g_gmock_mu‹x
);

416 
	g´iv©e
:

417 
ä›nd
 
şass
 
š‹º®
::
UÁy³dFunùiÚMock”Ba£
;

421 
	g‹m¶©e
 <
ty³Çme
 
	gF
>

422 
ä›nd
 
şass
 
	gš‹º®
::
FunùiÚMock”
;

424 
	g‹m¶©e
 <
ty³Çme
 
	gMockCÏss
>

425 
ä›nd
 
şass
 
	gš‹º®
::
NiûMockIm¶
;

426 
	g‹m¶©e
 <
ty³Çme
 
	gMockCÏss
>

427 
ä›nd
 
şass
 
	gš‹º®
::
NaggyMockIm¶
;

428 
	g‹m¶©e
 <
ty³Çme
 
	gMockCÏss
>

429 
ä›nd
 
şass
 
	gš‹º®
::
SŒiùMockIm¶
;

433 
AÎowUnš‹»¡šgC®ls
(cÚ¡ * 
mock_obj
)

434 
GTEST_LOCK_EXCLUDED_
(
š‹º®
::
g_gmock_mu‹x
);

438 
W¬nUnš‹»¡šgC®ls
(cÚ¡ * 
mock_obj
)

439 
GTEST_LOCK_EXCLUDED_
(
š‹º®
::
g_gmock_mu‹x
);

443 
FaUnš‹»¡šgC®ls
(cÚ¡ * 
mock_obj
)

444 
GTEST_LOCK_EXCLUDED_
(
š‹º®
::
g_gmock_mu‹x
);

448 
UÄegi¡”C®lR—ùiÚ
(cÚ¡ * 
mock_obj
)

449 
GTEST_LOCK_EXCLUDED_
(
š‹º®
::
g_gmock_mu‹x
);

453 
	gš‹º®
::
C®lR—ùiÚ
 
G‘R—ùiÚOnUnš‹»¡šgC®ls
(

454 cÚ¡ * 
mock_obj
)

455 
GTEST_LOCK_EXCLUDED_
(
š‹º®
::
g_gmock_mu‹x
);

460 
boŞ
 
V”ifyAndCË¬Ex³ù©iÚsLocked
(* 
mock_obj
)

461 
GTEST_EXCLUSIVE_LOCK_REQUIRED_
(
š‹º®
::
g_gmock_mu‹x
);

464 
CË¬DeçuÉAùiÚsLocked
(* 
mock_obj
)

465 
GTEST_EXCLUSIVE_LOCK_REQUIRED_
(
š‹º®
::
g_gmock_mu‹x
);

468 
Regi¡”
(

469 cÚ¡ * 
mock_obj
,

470 
š‹º®
::
UÁy³dFunùiÚMock”Ba£
* 
mock”
)

471 
GTEST_LOCK_EXCLUDED_
(
š‹º®
::
g_gmock_mu‹x
);

476 
Regi¡”U£ByOnC®lOrEx³ùC®l
(

477 cÚ¡ * 
mock_obj
, cÚ¡ * 
fe
, 
lše
)

478 
GTEST_LOCK_EXCLUDED_
(
š‹º®
::
g_gmock_mu‹x
);

484 
UÄegi¡”Locked
(
š‹º®
::
UÁy³dFunùiÚMock”Ba£
* 
mock”
)

485 
GTEST_EXCLUSIVE_LOCK_REQUIRED_
(
š‹º®
::
g_gmock_mu‹x
);

504 şas 
	cGTEST_API_
 
	gEx³ù©iÚ
 {

505 
	gpublic
:

507 
Ex³ù©iÚ
();

508 
Ex³ù©iÚ
(Expectation&&) = ;

509 
Ex³ù©iÚ
(const Expectation&) = ;

510 
	gEx³ù©iÚ
& 
	gİ”©Ü
=(
Ex³ù©iÚ
&&) = ;

511 
	gEx³ù©iÚ
& 
	gİ”©Ü
=(cÚ¡ 
Ex³ù©iÚ
&) = ;

512 ~
Ex³ù©iÚ
();

523 
Ex³ù©iÚ
(
š‹º®
::
Ex³ù©iÚBa£
& 
exp
);

530 
boŞ
 
	gİ”©Ü
==(cÚ¡ 
Ex³ù©iÚ
& 
rhs
) const {

531  
ex³ù©iÚ_ba£_
 =ğ
rhs
.expectation_base_;

534 
boŞ
 
	gİ”©Ü
!=(cÚ¡ 
Ex³ù©iÚ
& 
rhs
ècÚ¡ {  !(*
this
 ==„hs); }

536 
	g´iv©e
:

537 
ä›nd
 
şass
 
Ex³ù©iÚS‘
;

538 
ä›nd
 
şass
 
	gSequ’û
;

539 
ä›nd
 
	gşass
 ::
‹¡šg
::
š‹º®
::
Ex³ù©iÚBa£
;

540 
ä›nd
 
	gşass
 ::
‹¡šg
::
š‹º®
::
UÁy³dFunùiÚMock”Ba£
;

542 
	g‹m¶©e
 <
ty³Çme
 
	gF
>

543 
ä›nd
 
	gşass
 ::
‹¡šg
::
š‹º®
::
FunùiÚMock”
;

545 
	g‹m¶©e
 <
ty³Çme
 
	gF
>

546 
ä›nd
 
	gşass
 ::
‹¡šg
::
š‹º®
::
Ty³dEx³ù©iÚ
;

549 şas 
	cLess
 {

550 
	gpublic
:

551 
boŞ
 
İ”©Ü
()(cÚ¡ 
Ex³ù©iÚ
& 
lhs
, cÚ¡ 
	gEx³ù©iÚ
& 
	grhs
) const {

552  
	glhs
.
	gex³ù©iÚ_ba£_
.
g‘
(è< 
	grhs
.expectation_base_.get();

556 ::
¡d
::
	t£t
<
	tEx³ù©iÚ
, 
	tLess
> 
	tS‘
;

558 
Ex³ù©iÚ
(

559 cÚ¡ 
¡d
::
sh¬ed_±r
<
š‹º®
::
Ex³ù©iÚBa£
>& 
ex³ù©iÚ_ba£
);

562 cÚ¡ 
	g¡d
::
sh¬ed_±r
<
š‹º®
::
Ex³ù©iÚBa£
>& 
ex³ù©iÚ_ba£
() const {

563  
ex³ù©iÚ_ba£_
;

567 
	g¡d
::
sh¬ed_±r
<
š‹º®
::
Ex³ù©iÚBa£
> 
ex³ù©iÚ_ba£_
;

583 şas 
	cEx³ù©iÚS‘
 {

584 
	gpublic
:

586 
Ex³ù©iÚ
::
	tS‘
::
	tcÚ¡_™”©Ü
 const_iterator;

589 
	gEx³ù©iÚ
::
	tS‘
::
	tv®ue_ty³
 value_type;

592 
Ex³ù©iÚS‘
() {}

597 
Ex³ù©iÚS‘
(
š‹º®
::
Ex³ù©iÚBa£
& 
exp
) {

598 *
this
 +ğ
Ex³ù©iÚ
(
exp
);

604 
Ex³ù©iÚS‘
(cÚ¡ 
Ex³ù©iÚ
& 
e
) {

605 *
	gthis
 +ğ
e
;

613 
boŞ
 
	gİ”©Ü
==(cÚ¡ 
Ex³ù©iÚS‘
& 
rhs
) const {

614  
ex³ù©iÚs_
 =ğ
rhs
.expectations_;

617 
boŞ
 
	gİ”©Ü
!=(cÚ¡ 
Ex³ù©iÚS‘
& 
rhs
ècÚ¡ {  !(*
this
 ==„hs); }

621 
	gEx³ù©iÚS‘
& 
	gİ”©Ü
+=(cÚ¡ 
Ex³ù©iÚ
& 
e
) {

622 
ex³ù©iÚs_
.
š£¹
(
e
);

623  *
	gthis
;

626 
size
(ècÚ¡ {  
	g¡©ic_ÿ¡
<>(
	gex³ù©iÚs_
.size()); }

628 
cÚ¡_™”©Ü
 
begš
(ècÚ¡ {  
	gex³ù©iÚs_
.begin(); }

629 
cÚ¡_™”©Ü
 
’d
(ècÚ¡ {  
	gex³ù©iÚs_
.end(); }

631 
	g´iv©e
:

632 
Ex³ù©iÚ
::
S‘
 
ex³ù©iÚs_
;

639 şas 
	cGTEST_API_
 
	gSequ’û
 {

640 
	gpublic
:

642 
Sequ’û
(è: 
Ï¡_ex³ù©iÚ_
(
Ãw
 
Ex³ù©iÚ
) {}

646 
AddEx³ù©iÚ
(cÚ¡ 
Ex³ù©iÚ
& 
ex³ù©iÚ
) const;

648 
	g´iv©e
:

650 
¡d
::
sh¬ed_±r
<
Ex³ù©iÚ
> 
Ï¡_ex³ù©iÚ_
;

677 şas 
	cGTEST_API_
 
	gInSequ’û
 {

678 
	gpublic
:

679 
InSequ’û
();

680 ~
InSequ’û
();

681 
	g´iv©e
:

682 
boŞ
 
£qu’û_ü—‹d_
;

684 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
InSequ’û
);

685 } 
	gGTEST_ATTRIBUTE_UNUSED_
;

687 
Çme¥aû
 
	gš‹º®
 {

691 
GTEST_API_
 
Th»adLoÿl
<
Sequ’û
*> 
g_gmock_im¶ic™_£qu’û
;

707 şas 
	cGTEST_API_
 
	gEx³ù©iÚBa£
 {

708 
	gpublic
:

710 
Ex³ù©iÚBa£
(cÚ¡ * 
fe
, 
lše
, cÚ¡ 
¡d
::
¡ršg
& 
sourû_‹xt
);

712 
	gvœtu®
 ~
Ex³ù©iÚBa£
();

715 cÚ¡ * 
fe
(ècÚ¡ {  
	gfe_
; }

716 
lše
(ècÚ¡ {  
	glše_
; }

717 cÚ¡ * 
sourû_‹xt
(ècÚ¡ {  
	gsourû_‹xt_
.
c_¡r
(); }

719 cÚ¡ 
	gC¬dš®™y
& 
ÿrdš®™y
(ècÚ¡ {  
	gÿrdš®™y_
; }

722 
DesüibeLoÿtiÚTo
(::
¡d
::
o¡»am
* 
os
) const {

723 *
os
 << 
FÜm©FeLoÿtiÚ
(
fe
(), 
lše
()) << " ";

728 
DesüibeC®lCouÁTo
(::
¡d
::
o¡»am
* 
os
) const

729 
GTEST_EXCLUSIVE_LOCK_REQUIRED_
(
g_gmock_mu‹x
);

733 
vœtu®
 
MaybeDesüibeExŒaM©ch”To
(::
¡d
::
o¡»am
* 
os
) = 0;

735 
	g´Ùeùed
:

736 
ä›nd
 
şass
 ::
‹¡šg
::
Ex³ù©iÚ
;

737 
ä›nd
 
şass
 
	gUÁy³dFunùiÚMock”Ba£
;

739 
	eCÏu£
 {

741 
	gkNÚe
,

742 
	gkW™h
,

743 
	gkTimes
,

744 
	gkInSequ’û
,

745 
	gkAá”
,

746 
	gkWlOnû
,

747 
	gkWlR•—‹dly
,

748 
	gkR‘œesOnS©u¿tiÚ


751 
	g¡d
::
	tveùÜ
<cÚ¡ *> 
	tUÁy³dAùiÚs
;

755 
vœtu®
 
Ex³ù©iÚ
 
G‘HªdË
() = 0;

758 
As£¹S³cPrİ”ty
(
boŞ
 
´İ”ty
,

759 cÚ¡ 
¡d
::
¡ršg
& 
çu»_mes§ge
) const {

760 
As£¹
(
´İ”ty
, 
fe_
, 
lše_
, 
çu»_mes§ge
);

764 
Ex³ùS³cPrİ”ty
(
boŞ
 
´İ”ty
,

765 cÚ¡ 
¡d
::
¡ršg
& 
çu»_mes§ge
) const {

766 
Ex³ù
(
´İ”ty
, 
fe_
, 
lše_
, 
çu»_mes§ge
);

771 
S³cifyC¬dš®™y
(cÚ¡ 
C¬dš®™y
& 
ÿrdš®™y
);

775 
boŞ
 
ÿrdš®™y_¥ecif›d
(ècÚ¡ {  
	gÿrdš®™y_¥ecif›d_
; }

778 
£t_ÿrdš®™y
(cÚ¡ 
C¬dš®™y
& 
a_ÿrdš®™y
) {

779 
	gÿrdš®™y_
 = 
a_ÿrdš®™y
;

787 
R‘œeAÎP»Requis™es
()

788 
GTEST_EXCLUSIVE_LOCK_REQUIRED_
(
g_gmock_mu‹x
);

791 
boŞ
 
is_»tœed
() const

792 
GTEST_EXCLUSIVE_LOCK_REQUIRED_
(
g_gmock_mu‹x
) {

793 
	gg_gmock_mu‹x
.
As£¹H–d
();

794  
	g»tœed_
;

798 
R‘œe
()

799 
GTEST_EXCLUSIVE_LOCK_REQUIRED_
(
g_gmock_mu‹x
) {

800 
	gg_gmock_mu‹x
.
As£¹H–d
();

801 
	g»tœed_
 = 
Œue
;

805 
boŞ
 
IsS©isf›d
() const

806 
GTEST_EXCLUSIVE_LOCK_REQUIRED_
(
g_gmock_mu‹x
) {

807 
	gg_gmock_mu‹x
.
As£¹H–d
();

808  
ÿrdš®™y
().
IsS©isf›dByC®lCouÁ
(
ÿÎ_couÁ_
);

812 
boŞ
 
IsS©u¿‹d
() const

813 
GTEST_EXCLUSIVE_LOCK_REQUIRED_
(
g_gmock_mu‹x
) {

814 
	gg_gmock_mu‹x
.
As£¹H–d
();

815  
ÿrdš®™y
().
IsS©u¿‹dByC®lCouÁ
(
ÿÎ_couÁ_
);

819 
boŞ
 
IsOv”S©u¿‹d
() const

820 
GTEST_EXCLUSIVE_LOCK_REQUIRED_
(
g_gmock_mu‹x
) {

821 
	gg_gmock_mu‹x
.
As£¹H–d
();

822  
ÿrdš®™y
().
IsOv”S©u¿‹dByC®lCouÁ
(
ÿÎ_couÁ_
);

827 
boŞ
 
AÎP»»quis™esA»S©isf›d
() const

828 
GTEST_EXCLUSIVE_LOCK_REQUIRED_
(
g_gmock_mu‹x
);

831 
FšdUn§tisf›dP»»quis™es
(
Ex³ù©iÚS‘
* 
»suÉ
) const

832 
GTEST_EXCLUSIVE_LOCK_REQUIRED_
(
g_gmock_mu‹x
);

835 
ÿÎ_couÁ
() const

836 
GTEST_EXCLUSIVE_LOCK_REQUIRED_
(
g_gmock_mu‹x
) {

837 
	gg_gmock_mu‹x
.
As£¹H–d
();

838  
	gÿÎ_couÁ_
;

842 
Inüem’tC®lCouÁ
()

843 
GTEST_EXCLUSIVE_LOCK_REQUIRED_
(
g_gmock_mu‹x
) {

844 
	gg_gmock_mu‹x
.
As£¹H–d
();

845 
	gÿÎ_couÁ_
++;

852 
CheckAùiÚCouÁIfNÙDÚe
() const

853 
GTEST_LOCK_EXCLUDED_
(
mu‹x_
);

855 
ä›nd
 
	gşass
 ::
‹¡šg
::
Sequ’û
;

856 
ä›nd
 
	gşass
 ::
‹¡šg
::
š‹º®
::
Ex³ù©iÚTe¡”
;

858 
	g‹m¶©e
 <
ty³Çme
 
	gFunùiÚ
>

859 
ä›nd
 
şass
 
	gTy³dEx³ù©iÚ
;

862 
UÁy³dTimes
(cÚ¡ 
C¬dš®™y
& 
a_ÿrdš®™y
);

866 cÚ¡ * 
	gfe_
;

867 
	glše_
;

868 cÚ¡ 
	g¡d
::
¡ršg
 
sourû_‹xt_
;

870 
boŞ
 
	gÿrdš®™y_¥ecif›d_
;

871 
C¬dš®™y
 
	gÿrdš®™y_
;

878 
Ex³ù©iÚS‘
 
	gimmedŸ‹_´”equis™es_
;

882 
	gÿÎ_couÁ_
;

883 
boŞ
 
	g»tœed_
;

884 
UÁy³dAùiÚs
 
	guÁy³d_aùiÚs_
;

885 
boŞ
 
	gexŒa_m©ch”_¥ecif›d_
;

886 
boŞ
 
	g»³©ed_aùiÚ_¥ecif›d_
;

887 
boŞ
 
	g»tœes_Ú_§tu¿tiÚ_
;

888 
CÏu£
 
	gÏ¡_şau£_
;

889 
mubË
 
boŞ
 
	gaùiÚ_couÁ_checked_
;

890 
mubË
 
Mu‹x
 
	gmu‹x_
;

894 
	g‹m¶©e
 <
ty³Çme
 
	gF
>

895 şas 
	cTy³dEx³ù©iÚ
 : 
public
 
Ex³ù©iÚBa£
 {

896 
public
:

897 
ty³Çme
 
	tFunùiÚ
<
	tF
>::
	tArgum’tTu¶e
 ArgumentTuple;

898 
ty³Çme
 
	tFunùiÚ
<
	tF
>::
	tArgum’tM©ch”Tu¶e
 ArgumentMatcherTuple;

899 
ty³Çme
 
	tFunùiÚ
<
	tF
>::
	tResuÉ
 Result;

901 
Ty³dEx³ù©iÚ
(
FunùiÚMock”
<
F
>* 
owÃr
, cÚ¡ * 
a_fe
, 
a_lše
,

902 cÚ¡ 
¡d
::
¡ršg
& 
a_sourû_‹xt
,

903 cÚ¡ 
Argum’tM©ch”Tu¶e
& 
m
)

904 : 
Ex³ù©iÚBa£
(
a_fe
, 
a_lše
, 
a_sourû_‹xt
),

905 
owÃr_
(
owÃr
),

906 
m©ch”s_
(
m
),

910 
exŒa_m©ch”_
(
A
<cÚ¡ 
Argum’tTu¶e
&>()),

911 
»³©ed_aùiÚ_
(
DoDeçuÉ
()) {}

913 ~
Ty³dEx³ù©iÚ
(è
	gov”ride
 {

916 
CheckAùiÚCouÁIfNÙDÚe
();

917 
	gUÁy³dAùiÚs
::
cÚ¡_™”©Ü
 
™
 = 
uÁy³d_aùiÚs_
.
begš
();

918 
	g™
 !ğ
uÁy³d_aùiÚs_
.
’d
(); ++it) {

919 
d–‘e
 
	g¡©ic_ÿ¡
<cÚ¡ 
	gAùiÚ
<
	gF
>*>(*
	g™
);

924 
	gTy³dEx³ù©iÚ
& 
W™h
(cÚ¡ 
M©ch”
<cÚ¡ 
Argum’tTu¶e
&>& 
m
) {

925 ià(
	gÏ¡_şau£_
 =ğ
kW™h
) {

926 
Ex³ùS³cPrİ”ty
(
çl£
,

930 
Ex³ùS³cPrİ”ty
(
Ï¡_şau£_
 < 
kW™h
,

934 
	gÏ¡_şau£_
 = 
kW™h
;

936 
	gexŒa_m©ch”_
 = 
m
;

937 
	gexŒa_m©ch”_¥ecif›d_
 = 
Œue
;

938  *
	gthis
;

942 
	gTy³dEx³ù©iÚ
& 
Times
(cÚ¡ 
C¬dš®™y
& 
a_ÿrdš®™y
) {

943 
	gEx³ù©iÚBa£
::
UÁy³dTimes
(
a_ÿrdš®™y
);

944  *
	gthis
;

948 
	gTy³dEx³ù©iÚ
& 
Times
(
n
) {

949  
Times
(
Exaùly
(
n
));

953 
	gTy³dEx³ù©iÚ
& 
InSequ’û
(cÚ¡ 
Sequ’û
& 
s
) {

954 
Ex³ùS³cPrİ”ty
(
Ï¡_şau£_
 <ğ
kInSequ’û
,

958 
	gÏ¡_şau£_
 = 
kInSequ’û
;

960 
	gs
.
AddEx³ù©iÚ
(
G‘HªdË
());

961  *
	gthis
;

963 
	gTy³dEx³ù©iÚ
& 
InSequ’û
(cÚ¡ 
Sequ’û
& 
s1
, cÚ¡ Sequ’û& 
s2
) {

964  
InSequ’û
(
s1
).InSequ’û(
s2
);

966 
	gTy³dEx³ù©iÚ
& 
InSequ’û
(cÚ¡ 
Sequ’û
& 
s1
, cÚ¡ Sequ’û& 
s2
,

967 cÚ¡ 
Sequ’û
& 
s3
) {

968  
InSequ’û
(
s1
, 
s2
).InSequ’û(
s3
);

970 
	gTy³dEx³ù©iÚ
& 
InSequ’û
(cÚ¡ 
Sequ’û
& 
s1
, cÚ¡ Sequ’û& 
s2
,

971 cÚ¡ 
Sequ’û
& 
s3
, cÚ¡ Sequ’û& 
s4
) {

972  
InSequ’û
(
s1
, 
s2
, 
s3
).InSequ’û(
s4
);

974 
	gTy³dEx³ù©iÚ
& 
InSequ’û
(cÚ¡ 
Sequ’û
& 
s1
, cÚ¡ Sequ’û& 
s2
,

975 cÚ¡ 
Sequ’û
& 
s3
, cÚ¡ Sequ’û& 
s4
,

976 cÚ¡ 
Sequ’û
& 
s5
) {

977  
InSequ’û
(
s1
, 
s2
, 
s3
, 
s4
).InSequ’û(
s5
);

981 
	gTy³dEx³ù©iÚ
& 
Aá”
(cÚ¡ 
Ex³ù©iÚS‘
& 
s
) {

982 
Ex³ùS³cPrİ”ty
(
Ï¡_şau£_
 <ğ
kAá”
,

986 
	gÏ¡_şau£_
 = 
kAá”
;

988 
	gEx³ù©iÚS‘
::
cÚ¡_™”©Ü
 
™
 = 
s
.
begš
(); 
	g™
 !ğs.
’d
(); ++it) {

989 
	gimmedŸ‹_´”equis™es_
 +ğ*
™
;

991  *
	gthis
;

993 
	gTy³dEx³ù©iÚ
& 
Aá”
(cÚ¡ 
Ex³ù©iÚS‘
& 
s1
, cÚ¡ Ex³ù©iÚS‘& 
s2
) {

994  
Aá”
(
s1
).Aá”(
s2
);

996 
	gTy³dEx³ù©iÚ
& 
Aá”
(cÚ¡ 
Ex³ù©iÚS‘
& 
s1
, cÚ¡ Ex³ù©iÚS‘& 
s2
,

997 cÚ¡ 
Ex³ù©iÚS‘
& 
s3
) {

998  
Aá”
(
s1
, 
s2
).Aá”(
s3
);

1000 
	gTy³dEx³ù©iÚ
& 
Aá”
(cÚ¡ 
Ex³ù©iÚS‘
& 
s1
, cÚ¡ Ex³ù©iÚS‘& 
s2
,

1001 cÚ¡ 
Ex³ù©iÚS‘
& 
s3
, cÚ¡ Ex³ù©iÚS‘& 
s4
) {

1002  
Aá”
(
s1
, 
s2
, 
s3
).Aá”(
s4
);

1004 
	gTy³dEx³ù©iÚ
& 
Aá”
(cÚ¡ 
Ex³ù©iÚS‘
& 
s1
, cÚ¡ Ex³ù©iÚS‘& 
s2
,

1005 cÚ¡ 
Ex³ù©iÚS‘
& 
s3
, cÚ¡ Ex³ù©iÚS‘& 
s4
,

1006 cÚ¡ 
Ex³ù©iÚS‘
& 
s5
) {

1007  
Aá”
(
s1
, 
s2
, 
s3
, 
s4
).Aá”(
s5
);

1011 
	gTy³dEx³ù©iÚ
& 
WlOnû
(cÚ¡ 
AùiÚ
<
F
>& 
aùiÚ
) {

1012 
Ex³ùS³cPrİ”ty
(
Ï¡_şau£_
 <ğ
kWlOnû
,

1015 
	gÏ¡_şau£_
 = 
kWlOnû
;

1017 
	guÁy³d_aùiÚs_
.
push_back
(
Ãw
 
AùiÚ
<
F
>(
aùiÚ
));

1018 ià(!
ÿrdš®™y_¥ecif›d
()) {

1019 
£t_ÿrdš®™y
(
Exaùly
(
¡©ic_ÿ¡
<>(
uÁy³d_aùiÚs_
.
size
())));

1021  *
	gthis
;

1025 
	gTy³dEx³ù©iÚ
& 
WlR•—‹dly
(cÚ¡ 
AùiÚ
<
F
>& 
aùiÚ
) {

1026 ià(
	gÏ¡_şau£_
 =ğ
kWlR•—‹dly
) {

1027 
Ex³ùS³cPrİ”ty
(
çl£
,

1031 
Ex³ùS³cPrİ”ty
(
Ï¡_şau£_
 < 
kWlR•—‹dly
,

1035 
	gÏ¡_şau£_
 = 
kWlR•—‹dly
;

1036 
	g»³©ed_aùiÚ_¥ecif›d_
 = 
Œue
;

1038 
	g»³©ed_aùiÚ_
 = 
aùiÚ
;

1039 ià(!
ÿrdš®™y_¥ecif›d
()) {

1040 
£t_ÿrdš®™y
(
AtL—¡
(
¡©ic_ÿ¡
<>(
uÁy³d_aùiÚs_
.
size
())));

1045 
CheckAùiÚCouÁIfNÙDÚe
();

1046  *
	gthis
;

1050 
	gTy³dEx³ù©iÚ
& 
R‘œesOnS©u¿tiÚ
() {

1051 
Ex³ùS³cPrİ”ty
(
Ï¡_şau£_
 < 
kR‘œesOnS©u¿tiÚ
,

1054 
	gÏ¡_şau£_
 = 
kR‘œesOnS©u¿tiÚ
;

1055 
	g»tœes_Ú_§tu¿tiÚ_
 = 
Œue
;

1059 
CheckAùiÚCouÁIfNÙDÚe
();

1060  *
	gthis
;

1065 cÚ¡ 
	gArgum’tM©ch”Tu¶e
& 
m©ch”s
() const {

1066  
	gm©ch”s_
;

1070 cÚ¡ 
	gM©ch”
<cÚ¡ 
	gArgum’tTu¶e
&>& 
exŒa_m©ch”
() const {

1071  
	gexŒa_m©ch”_
;

1075 cÚ¡ 
	gAùiÚ
<
	gF
>& 
»³©ed_aùiÚ
(ècÚ¡ {  
	g»³©ed_aùiÚ_
; }

1079 
MaybeDesüibeExŒaM©ch”To
(::
¡d
::
o¡»am
* 
os
è
ov”ride
 {

1080 ià(
exŒa_m©ch”_¥ecif›d_
) {

1081 *
os
 << " Expected‡rgs: ";

1082 
	gexŒa_m©ch”_
.
DesüibeTo
(
os
);

1083 *
	gos
 << "\n";

1087 
	g´iv©e
:

1088 
‹m¶©e
 <
ty³Çme
 
FunùiÚ
>

1089 
ä›nd
 
şass
 
FunùiÚMock”
;

1093 
Ex³ù©iÚ
 
G‘HªdË
(è
	gov”ride
 {  
	gowÃr_
->
G‘HªdËOf
(
this
); }

1100 
boŞ
 
M©ches
(cÚ¡ 
Argum’tTu¶e
& 
¬gs
) const

1101 
GTEST_EXCLUSIVE_LOCK_REQUIRED_
(
g_gmock_mu‹x
) {

1102 
	gg_gmock_mu‹x
.
As£¹H–d
();

1103  
Tu¶eM©ches
(
m©ch”s_
, 
¬gs
è&& 
	gexŒa_m©ch”_
.
M©ches
(args);

1108 
boŞ
 
ShouldHªdËArgum’ts
(cÚ¡ 
Argum’tTu¶e
& 
¬gs
) const

1109 
GTEST_EXCLUSIVE_LOCK_REQUIRED_
(
g_gmock_mu‹x
) {

1110 
	gg_gmock_mu‹x
.
As£¹H–d
();

1116 
CheckAùiÚCouÁIfNÙDÚe
();

1117  !
is_»tœed
(è&& 
AÎP»»quis™esA»S©isf›d
(è&& 
M©ches
(
¬gs
);

1122 
Ex¶ašM©chResuÉTo
(

1123 cÚ¡ 
Argum’tTu¶e
& 
¬gs
,

1124 ::
¡d
::
o¡»am
* 
os
) const

1125 
GTEST_EXCLUSIVE_LOCK_REQUIRED_
(
g_gmock_mu‹x
) {

1126 
g_gmock_mu‹x
.
As£¹H–d
();

1128 ià(
is_»tœed
()) {

1129 *
	gos
 << " Expected:heƒxpectation is‡ctive\n"

1131 } ià(!
M©ches
(
¬gs
)) {

1132 ià(!
Tu¶eM©ches
(
m©ch”s_
, 
¬gs
)) {

1133 
Ex¶ašM©chFau»Tu¶eTo
(
m©ch”s_
, 
¬gs
, 
os
);

1135 
SŒšgM©chResuÉLi¡’”
 
	gli¡’”
;

1136 ià(!
	gexŒa_m©ch”_
.
M©chAndEx¶aš
(
¬gs
, &
li¡’”
)) {

1137 *
	gos
 << " Expected‡rgs: ";

1138 
	gexŒa_m©ch”_
.
DesüibeTo
(
os
);

1139 *
	gos
 << "\n Actual: don't match";

1141 
	gš‹º®
::
PrštIfNÙEm±y
(
li¡’”
.
¡r
(), 
os
);

1142 *
	gos
 << "\n";

1144 } ià(!
AÎP»»quis™esA»S©isf›d
()) {

1145 *
	gos
 << " Expected:‡ll…re-requisites‡re satisfied\n"

1148 
Ex³ù©iÚS‘
 
	gun§tisf›d_´”eqs
;

1149 
FšdUn§tisf›dP»»quis™es
(&
un§tisf›d_´”eqs
);

1150 
	gi
 = 0;

1151 
	gEx³ù©iÚS‘
::
cÚ¡_™”©Ü
 
™
 = 
un§tisf›d_´”eqs
.
begš
();

1152 
	g™
 !ğ
un§tisf›d_´”eqs
.
’d
(); ++it) {

1153 
	g™
->
ex³ù©iÚ_ba£
()->
DesüibeLoÿtiÚTo
(
os
);

1154 *
	gos
 << "´e-»quis™#" << 
	gi
++ << "\n";

1156 *
	gos
 << " (end of…re-requisites)\n";

1162 *
	gos
 << "The call matchesheƒxpectation.\n";

1167 cÚ¡ 
	gAùiÚ
<
	gF
>& 
G‘Cu¼’tAùiÚ
(cÚ¡ 
FunùiÚMock”
<
F
>* 
mock”
,

1168 cÚ¡ 
Argum’tTu¶e
& 
¬gs
) const

1169 
GTEST_EXCLUSIVE_LOCK_REQUIRED_
(
g_gmock_mu‹x
) {

1170 
	gg_gmock_mu‹x
.
As£¹H–d
();

1171 cÚ¡ 
	gcouÁ
 = 
ÿÎ_couÁ
();

1172 
As£¹
(
couÁ
 >ğ1, 
__FILE__
, 
__LINE__
,

1176 cÚ¡ 
	gaùiÚ_couÁ
 = 
¡©ic_ÿ¡
<>(
uÁy³d_aùiÚs_
.
size
());

1177 ià(
	gaùiÚ_couÁ
 > 0 && !
	g»³©ed_aùiÚ_¥ecif›d_
 &&

1178 
	gcouÁ
 > 
	gaùiÚ_couÁ
) {

1181 ::
¡d
::
¡ršg¡»am
 
ss
;

1182 
DesüibeLoÿtiÚTo
(&
ss
);

1183 
	gss
 << "AùiÚ ¿Àouˆš " << 
sourû_‹xt
() << "...\n"

1184 << "C®Ëd " << 
	gcouÁ
 << "imes, but only "

1185 << 
	gaùiÚ_couÁ
 << " WillOnce()"

1186 << (
	gaùiÚ_couÁ
 == 1 ? " is" : "s‡re") << " specified - ";

1187 
	gmock”
->
DesüibeDeçuÉAùiÚTo
(
¬gs
, &
ss
);

1188 
Log
(
kW¬nšg
, 
ss
.
¡r
(), 1);

1191  
	gcouÁ
 <ğ
aùiÚ_couÁ


1192 ? *
¡©ic_ÿ¡
<cÚ¡ 
AùiÚ
<
F
>*>(

1193 
uÁy³d_aùiÚs_
[
¡©ic_ÿ¡
<
size_t
>(
couÁ
 - 1)])

1194 : 
»³©ed_aùiÚ
();

1204 cÚ¡ 
	gAùiÚ
<
	gF
>* 
G‘AùiÚFÜArgum’ts
(cÚ¡ 
FunùiÚMock”
<
F
>* 
mock”
,

1205 cÚ¡ 
Argum’tTu¶e
& 
¬gs
,

1206 ::
¡d
::
o¡»am
* 
wh©
,

1207 ::
¡d
::
o¡»am
* 
why
)

1208 
GTEST_EXCLUSIVE_LOCK_REQUIRED_
(
g_gmock_mu‹x
) {

1209 
g_gmock_mu‹x
.
As£¹H–d
();

1210 ià(
IsS©u¿‹d
()) {

1212 
Inüem’tC®lCouÁ
();

1213 *
	gwh©
 << "Mock function called moreimeshanƒxpected - ";

1214 
	gmock”
->
DesüibeDeçuÉAùiÚTo
(
¬gs
, 
wh©
);

1215 
DesüibeC®lCouÁTo
(
why
);

1217  
	gnuÎ±r
;

1220 
Inüem’tC®lCouÁ
();

1221 
R‘œeAÎP»Requis™es
();

1223 ià(
	g»tœes_Ú_§tu¿tiÚ_
 && 
IsS©u¿‹d
()) {

1224 
R‘œe
();

1228 *
	gwh©
 << "Mock funùiÚ c®Èm©che " << 
sourû_‹xt
() <<"...\n";

1229  &(
G‘Cu¼’tAùiÚ
(
mock”
, 
¬gs
));

1234 
	gFunùiÚMock”
<
	gF
>* cÚ¡ 
	gowÃr_
;

1235 
Argum’tM©ch”Tu¶e
 
	gm©ch”s_
;

1236 
	gM©ch”
<cÚ¡ 
	gArgum’tTu¶e
&> 
	gexŒa_m©ch”_
;

1237 
	gAùiÚ
<
	gF
> 
	g»³©ed_aùiÚ_
;

1239 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
Ty³dEx³ù©iÚ
);

1253 
GTEST_API_
 
LogW™hLoÿtiÚ
(
‹¡šg
::
š‹º®
::
LogSev”™y
 
£v”™y
,

1254 cÚ¡ * 
fe
, 
lše
,

1255 cÚ¡ 
¡d
::
¡ršg
& 
mes§ge
);

1257 
	g‹m¶©e
 <
ty³Çme
 
	gF
>

1258 şas 
	cMockS³c
 {

1259 
	gpublic
:

1260 
ty³Çme
 
	tš‹º®
::
	tFunùiÚ
<
	tF
>::
	tArgum’tTu¶e
 ArgumentTuple;

1261 
ty³Çme
 
	tš‹º®
::
	tFunùiÚ
<
	tF
>::
	tArgum’tM©ch”Tu¶e


1262 
	tArgum’tM©ch”Tu¶e
;

1266 
MockS³c
(
š‹º®
::
FunùiÚMock”
<
F
>* 
funùiÚ_mock”
,

1267 cÚ¡ 
Argum’tM©ch”Tu¶e
& 
m©ch”s
)

1268 : 
funùiÚ_mock”_
(
funùiÚ_mock”
), 
m©ch”s_
(
m©ch”s
) {}

1272 
	gš‹º®
::
OnC®lS³c
<
F
>& 
IÁ”ÇlDeçuÉAùiÚS‘At
(

1273 cÚ¡ * 
fe
, 
lše
, cÚ¡ * 
obj
, cÚ¡ * 
ÿÎ
) {

1274 
LogW™hLoÿtiÚ
(
š‹º®
::
kInfo
, 
fe
, 
lše
,

1275 
¡d
::
¡ršg
("ON_CALL("è+ 
obj
 + ", " + 
ÿÎ
 + ") invoked");

1276  
	gfunùiÚ_mock”_
->
AddNewOnC®lS³c
(
fe
, 
lše
, 
m©ch”s_
);

1281 
	gš‹º®
::
Ty³dEx³ù©iÚ
<
F
>& 
IÁ”ÇlEx³ùedAt
(

1282 cÚ¡ * 
fe
, 
lše
, cÚ¡ * 
obj
, cÚ¡ * 
ÿÎ
) {

1283 cÚ¡ 
	g¡d
::
¡ršg
 
sourû_‹xt
(
¡d
::¡ršg("EXPECT_CALL("è+ 
obj
 + ", " +

1284 
ÿÎ
 + ")");

1285 
LogW™hLoÿtiÚ
(
š‹º®
::
kInfo
, 
fe
, 
lše
, 
sourû_‹xt
 + " invoked");

1286  
	gfunùiÚ_mock”_
->
AddNewEx³ù©iÚ
(

1287 
fe
, 
lše
, 
sourû_‹xt
, 
m©ch”s_
);

1293 
	gMockS³c
<
	gF
>& 
İ”©Ü
()(cÚ¡ 
	gš‹º®
::
W™houtM©ch”s
&, * const) {

1294  *
	gthis
;

1297 
	g´iv©e
:

1298 
‹m¶©e
 <
ty³Çme
 
FunùiÚ
>

1299 
ä›nd
 
şass
 
š‹º®
::
FunùiÚMock”
;

1302 
	gš‹º®
::
FunùiÚMock”
<
F
>* cÚ¡ 
funùiÚ_mock”_
;

1304 
Argum’tM©ch”Tu¶e
 
	gm©ch”s_
;

1316 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

1317 şas 
	cReã»nûOrV®ueW¿µ”
 {

1318 
	gpublic
:

1320 
ex¶ic™
 
Reã»nûOrV®ueW¿µ”
(
T
 
v®ue
)

1321 : 
v®ue_
(
¡d
::
move
(
v®ue
)) {

1327 
T
 
Unw¿p
(è{  
¡d
::
move
(
v®ue_
); }

1333 cÚ¡ 
	gT
& 
P“k
() const {

1334  
	gv®ue_
;

1337 
	g´iv©e
:

1338 
T
 
v®ue_
;

1343 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

1344 
şass
 
	gReã»nûOrV®ueW¿µ”
<
	gT
&> {

1345 
	gpublic
:

1348 
T
& 
	t»ã»nû
;

1349 
ex¶ic™
 
Reã»nûOrV®ueW¿µ”
(
»ã»nû
 
»f
)

1350 : 
v®ue_±r_
(&
»f
) {}

1351 
T
& 
Unw¿p
(è{  *
v®ue_±r_
; }

1352 cÚ¡ 
	gT
& 
P“k
(ècÚ¡ {  *
	gv®ue_±r_
; }

1354 
	g´iv©e
:

1355 
T
* 
v®ue_±r_
;

1367 şas 
	cUÁy³dAùiÚResuÉHŞd”Ba£
 {

1368 
	gpublic
:

1369 
vœtu®
 ~
UÁy³dAùiÚResuÉHŞd”Ba£
() {}

1372 
vœtu®
 
PrštAsAùiÚResuÉ
(::
¡d
::
o¡»am
* 
os
) const = 0;

1376 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

1377 şas 
	cAùiÚResuÉHŞd”
 : 
public
 
UÁy³dAùiÚResuÉHŞd”Ba£
 {

1378 
public
:

1380 
T
 
Unw¿p
() {

1381  
»suÉ_
.
Unw¿p
();

1385 
PrštAsAùiÚResuÉ
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

1386 *
os
 << "\n Returns: ";

1388 
	gUniv”§lPrš‹r
<
	gT
>::
Pršt
(
»suÉ_
.
P“k
(), 
os
);

1393 
	g‹m¶©e
 <
ty³Çme
 
	gF
>

1394 
AùiÚResuÉHŞd”
* 
P”fÜmDeçuÉAùiÚ
(

1395 cÚ¡ 
FunùiÚMock”
<
F
>* 
func_mock”
,

1396 
ty³Çme
 
FunùiÚ
<
F
>::
Argum’tTu¶e
&& 
¬gs
,

1397 cÚ¡ 
¡d
::
¡ršg
& 
ÿÎ_desütiÚ
) {

1398  
Ãw
 
AùiÚResuÉHŞd”
(
W¿µ”
(
func_mock”
->
P”fÜmDeçuÉAùiÚ
(

1399 
¡d
::
move
(
¬gs
), 
ÿÎ_desütiÚ
)));

1404 
	g‹m¶©e
 <
ty³Çme
 
	gF
>

1405 
AùiÚResuÉHŞd”
* 
P”fÜmAùiÚ
(

1406 cÚ¡ 
AùiÚ
<
F
>& 
aùiÚ
, 
ty³Çme
 
FunùiÚ
<F>::
Argum’tTu¶e
&& 
¬gs
) {

1407  
Ãw
 
AùiÚResuÉHŞd”
(

1408 
W¿µ”
(
aùiÚ
.
P”fÜm
(
¡d
::
move
(
¬gs
))));

1411 
	g´iv©e
:

1412 
Reã»nûOrV®ueW¿µ”
<
	tT
> 
	tW¿µ”
;

1414 
ex¶ic™
 
AùiÚResuÉHŞd”
(
W¿µ”
 
»suÉ
)

1415 : 
»suÉ_
(
¡d
::
move
(
»suÉ
)) {

1418 
W¿µ”
 
»suÉ_
;

1420 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
AùiÚResuÉHŞd”
);

1424 
	g‹m¶©e
 <>

1425 
şass
 
	gAùiÚResuÉHŞd”
<> : 
public
 
UÁy³dAùiÚResuÉHŞd”Ba£
 {

1426 
public
:

1427 
Unw¿p
() { }

1429 
PrštAsAùiÚResuÉ
(::
¡d
::
o¡»am
* ) cÚ¡ 
ov”ride
 {}

1433 
‹m¶©e
 <
ty³Çme
 
F
>

1434 
AùiÚResuÉHŞd”
* 
P”fÜmDeçuÉAùiÚ
(

1435 cÚ¡ 
FunùiÚMock”
<
F
>* 
func_mock”
,

1436 
ty³Çme
 
FunùiÚ
<
F
>::
Argum’tTu¶e
&& 
¬gs
,

1437 cÚ¡ 
¡d
::
¡ršg
& 
ÿÎ_desütiÚ
) {

1438 
func_mock”
->
P”fÜmDeçuÉAùiÚ
(
¡d
::
move
(
¬gs
), 
ÿÎ_desütiÚ
);

1439  
Ãw
 
	gAùiÚResuÉHŞd”
;

1444 
	g‹m¶©e
 <
ty³Çme
 
	gF
>

1445 
AùiÚResuÉHŞd”
* 
P”fÜmAùiÚ
(

1446 cÚ¡ 
AùiÚ
<
F
>& 
aùiÚ
, 
ty³Çme
 
FunùiÚ
<F>::
Argum’tTu¶e
&& 
¬gs
) {

1447 
aùiÚ
.
P”fÜm
(
¡d
::
move
(
¬gs
));

1448  
Ãw
 
	gAùiÚResuÉHŞd”
;

1451 
	g´iv©e
:

1452 
AùiÚResuÉHŞd”
() {}

1453 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
AùiÚResuÉHŞd”
);

1456 
	g‹m¶©e
 <
ty³Çme
 
	gF
>

1457 
şass
 
	gFunùiÚMock”
;

1459 
	g‹m¶©e
 <
ty³Çme
 
	gR
, 
	gty³Çme
... 
	gArgs
>

1460 
şass
 
	gFunùiÚMock”
<
R
(
Args
...)> 
	gfš®
 : 
public
 
UÁy³dFunùiÚMock”Ba£
 {

1461 
usšg
 
F
 = 
R
(
Args
...);

1463 
	gpublic
:

1464 
usšg
 
ResuÉ
 = 
R
;

1465 
usšg
 
	gArgum’tTu¶e
 = 
¡d
::
tu¶e
<
Args
...>;

1466 
usšg
 
	gArgum’tM©ch”Tu¶e
 = 
¡d
::
tu¶e
<
M©ch”
<
Args
>...>;

1468 
FunùiÚMock”
() {}

1482 
FunùiÚMock”
(cÚ¡ FunùiÚMock”&èğ
d–‘e
;

1483 
	gFunùiÚMock”
& 
	gİ”©Ü
=(cÚ¡ 
FunùiÚMock”
&èğ
d–‘e
;

1488 ~
FunùiÚMock”
(è
ov”ride
 
GTEST_LOCK_EXCLUDED_
(
g_gmock_mu‹x
) {

1489 
Mu‹xLock
 
l
(&
g_gmock_mu‹x
);

1490 
V”ifyAndCË¬Ex³ù©iÚsLocked
();

1491 
	gMock
::
UÄegi¡”Locked
(
this
);

1492 
CË¬DeçuÉAùiÚsLocked
();

1498 cÚ¡ 
	gOnC®lS³c
<
	gF
>* 
FšdOnC®lS³c
(

1499 cÚ¡ 
Argum’tTu¶e
& 
¬gs
) const {

1500 
	gUÁy³dOnC®lS³cs
::
cÚ¡_»v”£_™”©Ü
 
™


1501 ğ
uÁy³d_Ú_ÿÎ_¥ecs_
.
rbegš
();

1502 
	g™
 !ğ
uÁy³d_Ú_ÿÎ_¥ecs_
.
»nd
(); ++it) {

1503 cÚ¡ 
	gOnC®lS³c
<
	gF
>* 
	g¥ec
 = 
¡©ic_ÿ¡
<cÚ¡ 
OnC®lS³c
<
F
>*>(*
™
);

1504 ià(
	g¥ec
->
M©ches
(
¬gs
))

1505  
	g¥ec
;

1508  
	gnuÎ±r
;

1518 
ResuÉ
 
P”fÜmDeçuÉAùiÚ
(
Argum’tTu¶e
&& 
¬gs
,

1519 cÚ¡ 
¡d
::
¡ršg
& 
ÿÎ_desütiÚ
) const {

1520 cÚ¡ 
OnC®lS³c
<
F
>* cÚ¡ 
¥ec
 =

1521 
this
->
FšdOnC®lS³c
(
¬gs
);

1522 ià(
	g¥ec
 !ğ
nuÎ±r
) {

1523  
¥ec
->
G‘AùiÚ
().
P”fÜm
(
¡d
::
move
(
¬gs
));

1525 cÚ¡ 
	g¡d
::
¡ršg
 
mes§ge
 =

1526 
ÿÎ_desütiÚ
 +

1529 #ià
GTEST_HAS_EXCEPTIONS


1530 ià(!
	gDeçuÉV®ue
<
	gResuÉ
>::
Exi¡s
()) {

1531 
throw
 
¡d
::
ruÁime_”rÜ
(
mes§ge
);

1534 
As£¹
(
DeçuÉV®ue
<
ResuÉ
>::
Exi¡s
(), "", -1, 
mes§ge
);

1536  
	gDeçuÉV®ue
<
	gResuÉ
>::
G‘
();

1544 
UÁy³dAùiÚResuÉHŞd”Ba£
* 
UÁy³dP”fÜmDeçuÉAùiÚ
(

1545 * 
uÁy³d_¬gs
,

1546 cÚ¡ 
¡d
::
¡ršg
& 
ÿÎ_desütiÚ
ècÚ¡ 
ov”ride
 {

1547 
Argum’tTu¶e
* 
¬gs
 = 
¡©ic_ÿ¡
<Argum’tTu¶e*>(
uÁy³d_¬gs
);

1548  
	gResuÉHŞd”
::
P”fÜmDeçuÉAùiÚ
(
this
, 
¡d
::
move
(*
¬gs
),

1549 
ÿÎ_desütiÚ
);

1556 
UÁy³dAùiÚResuÉHŞd”Ba£
* 
UÁy³dP”fÜmAùiÚ
(

1557 cÚ¡ * 
uÁy³d_aùiÚ
, * 
uÁy³d_¬gs
ècÚ¡ 
	gov”ride
 {

1560 cÚ¡ 
	gAùiÚ
<
	gF
> 
	gaùiÚ
 = *
¡©ic_ÿ¡
<cÚ¡ 
AùiÚ
<
F
>*>(
uÁy³d_aùiÚ
);

1561 
Argum’tTu¶e
* 
	g¬gs
 = 
¡©ic_ÿ¡
<Argum’tTu¶e*>(
uÁy³d_¬gs
);

1562  
	gResuÉHŞd”
::
P”fÜmAùiÚ
(
aùiÚ
, 
¡d
::
move
(*
¬gs
));

1567 
CË¬DeçuÉAùiÚsLocked
(è
ov”ride


1568 
GTEST_EXCLUSIVE_LOCK_REQUIRED_
(
g_gmock_mu‹x
) {

1569 
	gg_gmock_mu‹x
.
As£¹H–d
();

1578 
UÁy³dOnC®lS³cs
 
	g¥ecs_to_d–‘e
;

1579 
	guÁy³d_Ú_ÿÎ_¥ecs_
.
sw­
(
¥ecs_to_d–‘e
);

1581 
	gg_gmock_mu‹x
.
UÆock
();

1582 
	gUÁy³dOnC®lS³cs
::
cÚ¡_™”©Ü
 
™
 =

1583 
¥ecs_to_d–‘e
.
begš
();

1584 
	g™
 !ğ
¥ecs_to_d–‘e
.
’d
(); ++it) {

1585 
d–‘e
 
	g¡©ic_ÿ¡
<cÚ¡ 
	gOnC®lS³c
<
	gF
>*>(*
	g™
);

1590 
	gg_gmock_mu‹x
.
Lock
();

1596 
ResuÉ
 
Invoke
(
Args
... 
¬gs
è
GTEST_LOCK_EXCLUDED_
(
g_gmock_mu‹x
) {

1597 
Argum’tTu¶e
 
tu¶e
(
¡d
::
fÜw¬d
<
Args
>(
¬gs
)...);

1598 
	g¡d
::
unique_±r
<
ResuÉHŞd”
> 
hŞd”
(
DownCa¡_
<ResultHolder*>(

1599 
this
->
UÁy³dInvokeW™h
(
¡©ic_ÿ¡
<*>(&
tu¶e
))));

1600  
	ghŞd”
->
Unw¿p
();

1603 
	gMockS³c
<
	gF
> 
W™h
(
M©ch”
<
Args
>... 
m
) {

1604  
	gMockS³c
<
	gF
>(
	gthis
, ::
¡d
::
make_tu¶e
(¡d::
move
(
m
)...));

1607 
	g´Ùeùed
:

1608 
‹m¶©e
 <
ty³Çme
 
FunùiÚ
>

1609 
ä›nd
 
şass
 
MockS³c
;

1611 
	gAùiÚResuÉHŞd”
<
	tResuÉ
> 
	tResuÉHŞd”
;

1614 
	gOnC®lS³c
<
	gF
>& 
AddNewOnC®lS³c
(

1615 cÚ¡ * 
fe
, 
lše
,

1616 cÚ¡ 
Argum’tM©ch”Tu¶e
& 
m
)

1617 
GTEST_LOCK_EXCLUDED_
(
g_gmock_mu‹x
) {

1618 
	gMock
::
Regi¡”U£ByOnC®lOrEx³ùC®l
(
MockObjeù
(), 
fe
, 
lše
);

1619 
	gOnC®lS³c
<
	gF
>* cÚ¡ 
	gÚ_ÿÎ_¥ec
 = 
Ãw
 
OnC®lS³c
<
F
>(
fe
, 
	glše
, 
	gm
);

1620 
	guÁy³d_Ú_ÿÎ_¥ecs_
.
push_back
(
Ú_ÿÎ_¥ec
);

1621  *
	gÚ_ÿÎ_¥ec
;

1625 
	gTy³dEx³ù©iÚ
<
	gF
>& 
AddNewEx³ù©iÚ
(cÚ¡ * 
fe
, 
lše
,

1626 cÚ¡ 
¡d
::
¡ršg
& 
sourû_‹xt
,

1627 cÚ¡ 
Argum’tM©ch”Tu¶e
& 
m
)

1628 
GTEST_LOCK_EXCLUDED_
(
g_gmock_mu‹x
) {

1629 
	gMock
::
Regi¡”U£ByOnC®lOrEx³ùC®l
(
MockObjeù
(), 
fe
, 
lše
);

1630 
	gTy³dEx³ù©iÚ
<
	gF
>* cÚ¡ 
	gex³ù©iÚ
 =

1631 
Ãw
 
Ty³dEx³ù©iÚ
<
F
>(
this
, 
	gfe
, 
	glše
, 
	gsourû_‹xt
, 
	gm
);

1632 cÚ¡ 
	g¡d
::
sh¬ed_±r
<
Ex³ù©iÚBa£
> 
uÁy³d_ex³ù©iÚ
(
ex³ù©iÚ
);

1635 
	guÁy³d_ex³ù©iÚs_
.
push_back
(
uÁy³d_ex³ù©iÚ
);

1638 
Sequ’û
* cÚ¡ 
	gim¶ic™_£qu’û
 = 
g_gmock_im¶ic™_£qu’û
.
g‘
();

1639 ià(
	gim¶ic™_£qu’û
 !ğ
nuÎ±r
) {

1640 
im¶ic™_£qu’û
->
AddEx³ù©iÚ
(
Ex³ù©iÚ
(
uÁy³d_ex³ù©iÚ
));

1643  *
	gex³ù©iÚ
;

1646 
	g´iv©e
:

1647 
‹m¶©e
 <
ty³Çme
 
Func
> 
ä›nd
 
şass
 
Ty³dEx³ù©iÚ
;

1654 
DesüibeDeçuÉAùiÚTo
(cÚ¡ 
Argum’tTu¶e
& 
¬gs
,

1655 ::
¡d
::
o¡»am
* 
os
) const {

1656 cÚ¡ 
OnC®lS³c
<
F
>* cÚ¡ 
¥ec
 = 
FšdOnC®lS³c
(
¬gs
);

1658 ià(
	g¥ec
 =ğ
nuÎ±r
) {

1659 *
os
 << (
¡d
::
is_void
<
ResuÉ
>::
v®ue
 ? "returning directly.\n"

1662 *
	gos
 << "taking default‡ction specified‡t:\n"

1663 << 
FÜm©FeLoÿtiÚ
(
¥ec
->
fe
(), s³c->
lše
()) << "\n";

1670 
UÁy³dDesüibeUnš‹»¡šgC®l
(cÚ¡ * 
uÁy³d_¬gs
,

1671 ::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride


1672 
GTEST_LOCK_EXCLUDED_
(
g_gmock_mu‹x
) {

1673 cÚ¡ 
Argum’tTu¶e
& 
¬gs
 =

1674 *
¡©ic_ÿ¡
<cÚ¡ 
Argum’tTu¶e
*>(
uÁy³d_¬gs
);

1675 *
	gos
 << "Uninteresting mock function call - ";

1676 
DesüibeDeçuÉAùiÚTo
(
¬gs
, 
os
);

1677 *
	gos
 << " FunùiÚ c®l: " << 
Name
();

1678 
Univ”§lPršt
(
¬gs
, 
os
);

1697 cÚ¡ 
Ex³ù©iÚBa£
* 
UÁy³dFšdM©chšgEx³ù©iÚ
(

1698 cÚ¡ * 
uÁy³d_¬gs
, cÚ¡ ** 
uÁy³d_aùiÚ
, 
boŞ
* 
is_exûssive
,

1699 ::
¡d
::
o¡»am
* 
wh©
, ::¡d::o¡»am* 
why
è
ov”ride


1700 
GTEST_LOCK_EXCLUDED_
(
g_gmock_mu‹x
) {

1701 cÚ¡ 
Argum’tTu¶e
& 
¬gs
 =

1702 *
¡©ic_ÿ¡
<cÚ¡ 
Argum’tTu¶e
*>(
uÁy³d_¬gs
);

1703 
Mu‹xLock
 
l
(&
g_gmock_mu‹x
);

1704 
	gTy³dEx³ù©iÚ
<
	gF
>* 
	gexp
 = 
this
->
FšdM©chšgEx³ù©iÚLocked
(
¬gs
);

1705 ià(
	gexp
 =ğ
nuÎ±r
) {

1706 
this
->
FÜm©UÃx³ùedC®lMes§geLocked
(
¬gs
, 
wh©
, 
why
);

1707  
	gnuÎ±r
;

1713 *
	gis_exûssive
 = 
exp
->
IsS©u¿‹d
();

1714 cÚ¡ 
	gAùiÚ
<
	gF
>* 
	gaùiÚ
 = 
exp
->
G‘AùiÚFÜArgum’ts
(
this
, 
¬gs
, 
wh©
, 
why
);

1715 ià(
	gaùiÚ
 !ğ
nuÎ±r
 && 
aùiÚ
->
IsDoDeçuÉ
())

1716 
aùiÚ
 = 
nuÎ±r
;

1717 *
	guÁy³d_aùiÚ
 = 
aùiÚ
;

1718  
	gexp
;

1722 
UÁy³dPrštArgs
(cÚ¡ * 
uÁy³d_¬gs
,

1723 ::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

1724 cÚ¡ 
Argum’tTu¶e
& 
¬gs
 =

1725 *
¡©ic_ÿ¡
<cÚ¡ 
Argum’tTu¶e
*>(
uÁy³d_¬gs
);

1726 
Univ”§lPršt
(
¬gs
, 
os
);

1731 
	gTy³dEx³ù©iÚ
<
	gF
>* 
FšdM©chšgEx³ù©iÚLocked
(

1732 cÚ¡ 
Argum’tTu¶e
& 
¬gs
) const

1733 
GTEST_EXCLUSIVE_LOCK_REQUIRED_
(
g_gmock_mu‹x
) {

1734 
	gg_gmock_mu‹x
.
As£¹H–d
();

1737 
ty³Çme
 
	gUÁy³dEx³ù©iÚs
::
cÚ¡_»v”£_™”©Ü
 
™
 =

1738 
uÁy³d_ex³ù©iÚs_
.
rbegš
();

1739 
	g™
 !ğ
uÁy³d_ex³ù©iÚs_
.
»nd
(); ++it) {

1740 
	gTy³dEx³ù©iÚ
<
	gF
>* cÚ¡ 
	gexp
 =

1741 
¡©ic_ÿ¡
<
Ty³dEx³ù©iÚ
<
F
>*>(
™
->
g‘
());

1742 ià(
	gexp
->
ShouldHªdËArgum’ts
(
¬gs
)) {

1743  
	gexp
;

1746  
	gnuÎ±r
;

1750 
FÜm©UÃx³ùedC®lMes§geLocked
(

1751 cÚ¡ 
Argum’tTu¶e
& 
¬gs
,

1752 ::
¡d
::
o¡»am
* 
os
,

1753 ::
¡d
::
o¡»am
* 
why
) const

1754 
GTEST_EXCLUSIVE_LOCK_REQUIRED_
(
g_gmock_mu‹x
) {

1755 
g_gmock_mu‹x
.
As£¹H–d
();

1756 *
	gos
 << "\nUnexpected mock function call - ";

1757 
DesüibeDeçuÉAùiÚTo
(
¬gs
, 
os
);

1758 
PrštTr›dEx³ù©iÚsLocked
(
¬gs
, 
why
);

1763 
PrštTr›dEx³ù©iÚsLocked
(

1764 cÚ¡ 
Argum’tTu¶e
& 
¬gs
,

1765 ::
¡d
::
o¡»am
* 
why
) const

1766 
GTEST_EXCLUSIVE_LOCK_REQUIRED_
(
g_gmock_mu‹x
) {

1767 
g_gmock_mu‹x
.
As£¹H–d
();

1768 cÚ¡ 
size_t
 
	gcouÁ
 = 
uÁy³d_ex³ù©iÚs_
.
size
();

1769 *
	gwhy
 << "GoogË Mockr›dhfŞlowšg " << 
	gcouÁ
 << " "

1770 << (
	gcouÁ
 == 1 ? "expectation, but it didn't match" :

1773 
size_t
 
	gi
 = 0; i < 
	gcouÁ
; i++) {

1774 
	gTy³dEx³ù©iÚ
<
	gF
>* cÚ¡ 
	gex³ù©iÚ
 =

1775 
¡©ic_ÿ¡
<
Ty³dEx³ù©iÚ
<
F
>*>(
uÁy³d_ex³ù©iÚs_
[
i
].
g‘
());

1776 *
	gwhy
 << "\n";

1777 
	gex³ù©iÚ
->
DesüibeLoÿtiÚTo
(
why
);

1778 ià(
	gcouÁ
 > 1) {

1779 *
	gwhy
 << "Œ›dƒx³ù©iÚ #" << 
	gi
 << ": ";

1781 *
	gwhy
 << 
	gex³ù©iÚ
->
sourû_‹xt
() << "...\n";

1782 
	gex³ù©iÚ
->
Ex¶ašM©chResuÉTo
(
¬gs
, 
why
);

1783 
	gex³ù©iÚ
->
DesüibeC®lCouÁTo
(
why
);

1790 
R•ÜtUnš‹»¡šgC®l
(
C®lR—ùiÚ
 
»aùiÚ
, cÚ¡ 
¡d
::
¡ršg
& 
msg
);

1794 
Çme¥aû
 
	gš‹º®
 {

1796 
	g‹m¶©e
 <
ty³Çme
 
	gF
>

1797 
şass
 
	gMockFunùiÚ
;

1799 
	g‹m¶©e
 <
ty³Çme
 
	gR
, 
	gty³Çme
... 
	gArgs
>

1800 
şass
 
	gMockFunùiÚ
<
R
(
Args
...)> {

1801 
	gpublic
:

1802 
MockFunùiÚ
(cÚ¡ MockFunùiÚ&èğ
d–‘e
;

1803 
	gMockFunùiÚ
& 
	gİ”©Ü
=(cÚ¡ 
MockFunùiÚ
&èğ
d–‘e
;

1805 
	g¡d
::
funùiÚ
<
R
(
Args
...)> 
AsStdFunùiÚ
() {

1806  [
this
](
Args
... 
¬gs
è-> 
R
 {

1807  
this
->
C®l
(
¡d
::
fÜw¬d
<
Args
>(
¬gs
)...);

1812 
R
 
C®l
(
Args
... 
¬gs
) {

1813 
	gmock_
.
S‘OwÃrAndName
(
this
, "Call");

1814  
	gmock_
.
Invoke
(
¡d
::
fÜw¬d
<
Args
>(
¬gs
)...);

1817 
	gMockS³c
<
R
(
Args
...)> 
gmock_C®l
(
M©ch”
<Args>... 
m
) {

1818 
	gmock_
.
Regi¡”OwÃr
(
this
);

1819  
	gmock_
.
W™h
(
¡d
::
move
(
m
)...);

1822 
	gMockS³c
<
R
(
Args
...)> 
gmock_C®l
(cÚ¡ 
W™houtM©ch”s
&, R (*)(Args...)) {

1823  
	gthis
->
gmock_C®l
(::
‹¡šg
::
A
<
Args
>()...);

1826 
	g´Ùeùed
:

1827 
MockFunùiÚ
() = ;

1828 ~
MockFunùiÚ
() = ;

1830 
	g´iv©e
:

1831 
FunùiÚMock”
<
R
(
Args
...)> 
mock_
;

1846 
	g‹m¶©e
 <
ty³Çme
 
	gF
, 
	gty³Çme
 = >

1847 
SigÇtu»Of
;

1849 
	g‹m¶©e
 <
ty³Çme
 
	gR
, 
	gty³Çme
... 
	gArgs
>

1850 
	gSigÇtu»Of
<
R
(
Args
...)> {

1851 
usšg
 
	gty³
 = 
R
(
Args
...);

1854 
	g‹m¶©e
 <‹m¶©<
	gty³Çme
> 
şass
 
	gC
, 
ty³Çme
 
	gF
>

1855 
	gSigÇtu»Of
<
	gC
<
	gF
>,

1856 
ty³Çme
 
	g¡d
::
’abË_if
<
¡d
::
is_funùiÚ
<
F
>::
v®ue
>::
ty³
>

1857 : 
SigÇtu»Of
<
F
> {};

1859 
	g‹m¶©e
 <
ty³Çme
 
	gF
>

1860 
usšg
 
	gSigÇtu»OfT
 = 
ty³Çme
 
SigÇtu»Of
<
F
>::
ty³
;

1924 
	g‹m¶©e
 <
ty³Çme
 
	gF
>

1925 
şass
 
	gMockFunùiÚ
 : 
public
 
š‹º®
::
MockFunùiÚ
<š‹º®::
SigÇtu»OfT
<
F
>> {

1926 
usšg
 
Ba£
 = 
š‹º®
::
MockFunùiÚ
<š‹º®::
SigÇtu»OfT
<
F
>>;

1928 
	gpublic
:

1929 
usšg
 
Ba£
::Base;

1937 
usšg
 
	gš‹º®
::
MockS³c
;

1954 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

1955 
šlše
 cÚ¡ 
	gT
& 
	$CÚ¡
(cÚ¡ 
T
& 
x
è{  x; 
	}
}

1958 
šlše
 
	gEx³ù©iÚ
::
	$Ex³ù©iÚ
(
š‹º®
::
Ex³ù©iÚBa£
& 
exp
)

1959 : 
	`ex³ù©iÚ_ba£_
(
exp
.
	`G‘HªdË
().
	$ex³ù©iÚ_ba£
()è{
	}
}

1963 
	$GTEST_DISABLE_MSC_WARNINGS_POP_
()

2027 
	#GMOCK_ON_CALL_IMPL_
(
mock_ex´
, 
S‘‹r
, 
ÿÎ
) \

2028 ((
mock_ex´
).
gmock_
##
ÿÎ
)(::
‹¡šg
::
š‹º®
::
	`G‘W™houtM©ch”s
(), \

2029 
nuÎ±r
) \

2030 .
	`S‘‹r
(
__FILE__
, 
__LINE__
, #mock_ex´, #ÿÎ)

	)

2032 
	#ON_CALL
(
obj
, 
ÿÎ
) \

2033 
	`GMOCK_ON_CALL_IMPL_
(
obj
, 
IÁ”ÇlDeçuÉAùiÚS‘At
, 
ÿÎ
)

	)

2035 
	#EXPECT_CALL
(
obj
, 
ÿÎ
) \

2036 
	`GMOCK_ON_CALL_IMPL_
(
obj
, 
IÁ”ÇlEx³ùedAt
, 
ÿÎ
)

	)

	@third_party/googletest/googlemock/include/gmock/gmock.h

37 #iâdeà
GOOGLEMOCK_INCLUDE_GMOCK_GMOCK_H_


38 
	#GOOGLEMOCK_INCLUDE_GMOCK_GMOCK_H_


	)

59 
	~"gmock/gmock-aùiÚs.h
"

60 
	~"gmock/gmock-ÿrdš®™›s.h
"

61 
	~"gmock/gmock-funùiÚ-mock”.h
"

62 
	~"gmock/gmock-m©ch”s.h
"

63 
	~"gmock/gmock-mÜe-aùiÚs.h
"

64 
	~"gmock/gmock-mÜe-m©ch”s.h
"

65 
	~"gmock/gmock-niû-¡riù.h
"

66 
	~"gmock/š‹º®/gmock-š‹º®-uts.h
"

68 
Çme¥aû
 
	g‹¡šg
 {

71 
GMOCK_DECLARE_boŞ_
(
ÿtch_Ëaked_mocks
);

72 
GMOCK_DECLARE_¡ršg_
(
v”bo£
);

73 
GMOCK_DECLARE_št32_
(
deçuÉ_mock_behaviÜ
);

86 
GTEST_API_
 
In™GoogËMock
(* 
¬gc
, ** 
¬gv
);

90 
GTEST_API_
 
In™GoogËMock
(* 
¬gc
, 
wch¬_t
** 
¬gv
);

94 
GTEST_API_
 
In™GoogËMock
();

	@third_party/googletest/googlemock/include/gmock/internal/custom/gmock-generated-actions.h

3 #iâdeà
GOOGLEMOCK_INCLUDE_GMOCK_INTERNAL_CUSTOM_GMOCK_GENERATED_ACTIONS_H_


4 
	#GOOGLEMOCK_INCLUDE_GMOCK_INTERNAL_CUSTOM_GMOCK_GENERATED_ACTIONS_H_


	)

	@third_party/googletest/googlemock/include/gmock/internal/custom/gmock-matchers.h

34 #iâdeà
GOOGLEMOCK_INCLUDE_GMOCK_INTERNAL_CUSTOM_GMOCK_MATCHERS_H_


35 
	#GOOGLEMOCK_INCLUDE_GMOCK_INTERNAL_CUSTOM_GMOCK_MATCHERS_H_


	)

	@third_party/googletest/googlemock/include/gmock/internal/custom/gmock-port.h

36 #iâdeà
GOOGLEMOCK_INCLUDE_GMOCK_INTERNAL_CUSTOM_GMOCK_PORT_H_


37 
	#GOOGLEMOCK_INCLUDE_GMOCK_INTERNAL_CUSTOM_GMOCK_PORT_H_


	)

	@third_party/googletest/googlemock/include/gmock/internal/gmock-internal-utils.h

39 #iâdeà
GOOGLEMOCK_INCLUDE_GMOCK_INTERNAL_GMOCK_INTERNAL_UTILS_H_


40 
	#GOOGLEMOCK_INCLUDE_GMOCK_INTERNAL_GMOCK_INTERNAL_UTILS_H_


	)

42 
	~<¡dio.h
>

43 
	~<o¡»am
>

44 
	~<¡ršg
>

45 
	~<ty³_Œa™s
>

46 
	~"gmock/š‹º®/gmock-pÜt.h
"

47 
	~"g‹¡/g‹¡.h
"

49 
Çme¥aû
 
	g‹¡šg
 {

51 
	g‹m¶©e
 <
	gty³Çme
>

52 
şass
 
	gM©ch”
;

54 
Çme¥aû
 
	gš‹º®
 {

58 #ifdeà
_MSC_VER


59 #´agm¨
w¬nšg
(
push
)

60 #´agm¨
w¬nšg
(
di§bË
:4100)

61 #´agm¨
w¬nšg
(
di§bË
:4805)

66 
GTEST_API_
 
	g¡d
::
¡ršg
 
JošAsTu¶e
(cÚ¡ 
SŒšgs
& 
f›lds
);

72 
GTEST_API_
 
	g¡d
::
¡ršg
 
CÚv”tId’tif›rNameToWÜds
(cÚ¡ * 
id_Çme
);

77 
	g‹m¶©e
 <
ty³Çme
 
	gPoš‹r
>

78 
šlše
 cÚ¡ 
ty³Çme
 
	gPoš‹r
::
–em’t_ty³
* 
G‘RawPoš‹r
(cÚ¡ 
Poš‹r
& 
p
) {

79  
p
.
g‘
();

82 
	g‹m¶©e
 <
ty³Çme
 
	gEËm’t
>

83 
šlše
 
EËm’t
* 
G‘RawPoš‹r
(EËm’t* 
p
è{  
	gp
; }

89 #ià
defšed
(
_MSC_VER
è&& !defšed(
_NATIVE_WCHAR_T_DEFINED
)

92 
	#GMOCK_WCHAR_T_IS_NATIVE_
 1

	)

100 
	eTy³Kšd
 {

101 
	gkBoŞ
, 
	gkIÁeg”
, 
	gkFlßtšgPošt
, 
	gkOth”


105 
	g‹m¶©e
 <
ty³Çme
 
	gT
> 
	sKšdOf
 {

106 ’um { 
	gv®ue
 = 
kOth”
 };

110 
	#GMOCK_DECLARE_KIND_
(
ty³
, 
kšd
) \

111 
‹m¶©e
 <> 
KšdOf
<
ty³
> {ƒnum { 
v®ue
 = 
kšd
 }; }

	)

113 
GMOCK_DECLARE_KIND_
(
boŞ
, 
kBoŞ
);

116 
GMOCK_DECLARE_KIND_
(, 
kIÁeg”
);

117 
GMOCK_DECLARE_KIND_
(sigÃd , 
kIÁeg”
);

118 
GMOCK_DECLARE_KIND_
(, 
kIÁeg”
);

119 
GMOCK_DECLARE_KIND_
(, 
kIÁeg”
);

120 
GMOCK_DECLARE_KIND_
(, 
kIÁeg”
);

121 
GMOCK_DECLARE_KIND_
(, 
kIÁeg”
);

122 
GMOCK_DECLARE_KIND_
(, 
kIÁeg”
);

123 
GMOCK_DECLARE_KIND_
(, 
kIÁeg”
);

124 
GMOCK_DECLARE_KIND_
(, 
kIÁeg”
);

125 
GMOCK_DECLARE_KIND_
(, 
kIÁeg”
);

126 
GMOCK_DECLARE_KIND_
(, 
kIÁeg”
);

128 #ià
GMOCK_WCHAR_T_IS_NATIVE_


129 
GMOCK_DECLARE_KIND_
(
wch¬_t
, 
kIÁeg”
);

133 
GMOCK_DECLARE_KIND_
(, 
kFlßtšgPošt
);

134 
GMOCK_DECLARE_KIND_
(, 
kFlßtšgPošt
);

135 
GMOCK_DECLARE_KIND_
(, 
kFlßtšgPošt
);

137 #undeà
GMOCK_DECLARE_KIND_


140 
	#GMOCK_KIND_OF_
(
ty³
) \

141 
¡©ic_ÿ¡
< ::
‹¡šg
::
š‹º®
::
Ty³Kšd
>( \

142 ::
‹¡šg
::
š‹º®
::
KšdOf
<
ty³
>::
v®ue
)

	)

153 
	g‹m¶©e
 <
Ty³Kšd
 
	gkFromKšd
, 
ty³Çme
 
	gFrom
, Ty³Kšd 
	gkToKšd
,y³Çm
	gTo
>

154 
usšg
 
	gLos¦essAr™hm‘icCÚv”tibËIm¶
 = 
¡d
::
š‹g¿l_cÚ¡ªt
<

155 
boŞ
,

158 (
	gkFromKšd
 =ğ
kBoŞ
è? 
Œue


161 : (
kFromKšd
 !ğ
kToKšd
è? 
çl£


162 : (
kFromKšd
 =ğ
kIÁeg”
 &&

165 ((((
From
è< (
To
)) &&

166 !(
¡d
::
is_sigÃd
<
From
>::
v®ue
 && !¡d::is_sigÃd<
To
>::value)) ||

169 (((
From
è=ğ(
To
)) &&

170 (
¡d
::
is_sigÃd
<
From
>::
v®ue
 =ğ¡d::is_sigÃd<
To
>::value)))

171 è? 
Œue


174 : (
kFromKšd
 =ğ
kFlßtšgPošt
 && ((
From
è<ğ(
To
))è? 
Œue


175 : 
çl£


186 
	g‹m¶©e
 <
ty³Çme
 
	gFrom
,y³Çm
	gTo
>

187 
usšg
 
	gLos¦essAr™hm‘icCÚv”tibË
 =

188 
Los¦essAr™hm‘icCÚv”tibËIm¶
<
GMOCK_KIND_OF_
(
From
), 
	gFrom
,

189 
GMOCK_KIND_OF_
(
To
), 
	gTo
>;

193 şas 
	cFau»R•Ü‹rIÁ”çû
 {

194 
	gpublic
:

196 
	eFau»Ty³
 {

197 
kNÚçl
, 
	gkF©®


200 
	gvœtu®
 ~
Fau»R•Ü‹rIÁ”çû
() {}

203 
vœtu®
 
R•ÜtFau»
(
Fau»Ty³
 
ty³
, cÚ¡ * 
fe
, 
lše
,

204 cÚ¡ 
¡d
::
¡ršg
& 
mes§ge
) = 0;

208 
GTEST_API_
 
Fau»R•Ü‹rIÁ”çû
* 
G‘Fau»R•Ü‹r
();

215 
šlše
 
As£¹
(
boŞ
 
cÚd™iÚ
, cÚ¡ * 
fe
, 
lše
,

216 cÚ¡ 
¡d
::
¡ršg
& 
msg
) {

217 ià(!
cÚd™iÚ
) {

218 
G‘Fau»R•Ü‹r
()->
R•ÜtFau»
(
Fau»R•Ü‹rIÁ”çû
::
kF©®
,

219 
fe
, 
lše
, 
msg
);

222 
šlše
 
As£¹
(
boŞ
 
cÚd™iÚ
, cÚ¡ * 
fe
, 
lše
) {

223 
As£¹
(
cÚd™iÚ
, 
fe
, 
lše
, "Assertion failed.");

228 
šlše
 
Ex³ù
(
boŞ
 
cÚd™iÚ
, cÚ¡ * 
fe
, 
lše
,

229 cÚ¡ 
¡d
::
¡ršg
& 
msg
) {

230 ià(!
cÚd™iÚ
) {

231 
G‘Fau»R•Ü‹r
()->
R•ÜtFau»
(
Fau»R•Ü‹rIÁ”çû
::
kNÚçl
,

232 
fe
, 
lše
, 
msg
);

235 
šlše
 
Ex³ù
(
boŞ
 
cÚd™iÚ
, cÚ¡ * 
fe
, 
lše
) {

236 
Ex³ù
(
cÚd™iÚ
, 
fe
, 
lše
, "Expectation failed.");

240 
	eLogSev”™y
 {

241 
	gkInfo
 = 0,

242 
	gkW¬nšg
 = 1

248 cÚ¡ 
	gkInfoV”bos™y
[] = "info";

250 cÚ¡ 
	gkW¬nšgV”bos™y
[] = "warning";

252 cÚ¡ 
	gkE¼ÜV”bos™y
[] = "error";

256 
GTEST_API_
 
boŞ
 
LogIsVisibË
(
LogSev”™y
 
£v”™y
);

265 
GTEST_API_
 
Log
(
LogSev”™y
 
£v”™y
, cÚ¡ 
¡d
::
¡ršg
& 
mes§ge
,

266 
¡ack_äames_to_sk
);

274 şas 
	cW™houtM©ch”s
 {

275 
	g´iv©e
:

276 
W™houtM©ch”s
() {}

277 
ä›nd
 
GTEST_API_
 
W™houtM©ch”s
 
G‘W™houtM©ch”s
();

281 
GTEST_API_
 
W™houtM©ch”s
 
G‘W™houtM©ch”s
();

285 #ifdeà
_MSC_VER


286 #´agm¨
w¬nšg
(
push
)

287 #´agm¨
w¬nšg
(
di§bË
:4717)

295 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

296 
šlše
 
T
 
Inv®id
() {

297 
As£¹
(
çl£
, "", -1, "Internalƒrror:‡ttempto„eturn invalid value");

301  
	gInv®id
<
	gT
>();

304 #ifdeà
_MSC_VER


305 #´agm¨
w¬nšg
(
pİ
)

324 
	g‹m¶©e
 <
şass
 
	gRawCÚš”
>

325 şas 
	cSCÚš”V›w
 {

326 
	gpublic
:

327 
RawCÚš”
 
	tty³
;

328 cÚ¡ 
	tty³
& 
	tcÚ¡_»ã»nû
;

330 
cÚ¡_»ã»nû
 
CÚ¡Reã»nû
(cÚ¡ 
RawCÚš”
& 
cÚš”
) {

331 
¡©ic_as£¹
(!
¡d
::
is_cÚ¡
<
RawCÚš”
>::
v®ue
,

333  
	gcÚš”
;

335 
ty³
 
Cİy
(cÚ¡ 
RawCÚš”
& 
cÚš”
è{  
	gcÚš”
; }

339 
	g‹m¶©e
 <
ty³Çme
 
	gEËm’t
, 
size_t
 
	gN
>

340 
şass
 
	gSCÚš”V›w
<
	gEËm’t
[
N
]> {

341 
	gpublic
:

342 
ty³Çme
 
	t¡d
::
	t»move_cÚ¡
<
	tEËm’t
>::
	tty³
 
	tRawEËm’t
;

343 
	gš‹º®
::
	tN©iveA¼ay
<
	tRawEËm’t
> 
	tty³
;

349 cÚ¡ 
	tty³
 
	tcÚ¡_»ã»nû
;

351 
cÚ¡_»ã»nû
 
CÚ¡Reã»nû
(cÚ¡ 
EËm’t
 (&
¬¿y
)[
N
]) {

352 
¡©ic_as£¹
(
¡d
::
is_§me
<
EËm’t
, 
RawEËm’t
>::
v®ue
,

354  
ty³
(
¬¿y
, 
N
, 
R–©iÚToSourûReã»nû
());

356 
ty³
 
Cİy
(cÚ¡ 
EËm’t
 (&
¬¿y
)[
N
]) {

357  
ty³
(
¬¿y
, 
N
, 
R–©iÚToSourûCİy
());

363 
	g‹m¶©e
 <
ty³Çme
 
	gEËm’tPoš‹r
,y³Çm
	gSize
>

364 
şass
 
	gSCÚš”V›w
< ::
¡d
::
tu¶e
<
EËm’tPoš‹r
, 
	gSize
> > {

365 
	gpublic
:

366 
ty³Çme
 
	t¡d
::
	t»move_cÚ¡
<

367 
	tty³Çme
 
	t¡d
::
	tpoš‹r_Œa™s
<
	tEËm’tPoš‹r
>::
	t–em’t_ty³
>::
	tty³


368 
	tRawEËm’t
;

369 
	gš‹º®
::
	tN©iveA¼ay
<
	tRawEËm’t
> 
	tty³
;

370 cÚ¡ 
	tty³
 
	tcÚ¡_»ã»nû
;

372 
cÚ¡_»ã»nû
 
CÚ¡Reã»nû
(

373 cÚ¡ ::
¡d
::
tu¶e
<
EËm’tPoš‹r
, 
Size
>& 
¬¿y
) {

374  
ty³
(
¡d
::
g‘
<0>(
¬¿y
), std::get<1>(array),

375 
R–©iÚToSourûReã»nû
());

377 
ty³
 
Cİy
(cÚ¡ ::
¡d
::
tu¶e
<
EËm’tPoš‹r
, 
Size
>& 
¬¿y
) {

378  
ty³
(
¡d
::
g‘
<0>(
¬¿y
), std::g‘<1>×¼ay), 
R–©iÚToSourûCİy
());

384 
	g‹m¶©e
 <
ty³Çme
 
	gT
> 
şass
 
	gSCÚš”V›w
<T&>;

389 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

390 
	sRemoveCÚ¡FromKey
 {

391 
T
 
	tty³
;

395 
	g‹m¶©e
 <
ty³Çme
 
	gK
,y³Çm
	gV
>

396 
	gRemoveCÚ¡FromKey
<
	g¡d
::
·œ
<cÚ¡ 
K
, 
	gV
> > {

397 
	g¡d
::
	t·œ
<
	tK
, 
	tV
> 
	tty³
;

402 
GTEST_API_
 
IÎeg®DoDeçuÉ
(cÚ¡ * 
fe
, 
lše
);

404 
	g‹m¶©e
 <
ty³Çme
 
	gF
,y³Çm
	gTu¶e
, 
	gsize_t
... 
	gIdx
>

405 autØ
AµlyIm¶
(
F
&& 
f
, 
Tu¶e
&& 
¬gs
, 
IndexSequ’û
<
Idx
...>è-> 
deşty³
(

406 
¡d
::
fÜw¬d
<
F
>(
f
)(¡d::
g‘
<
Idx
>(¡d::fÜw¬d<
Tu¶e
>(
¬gs
))...)) {

407  
¡d
::
fÜw¬d
<
F
>(
f
)(¡d::
g‘
<
Idx
>(¡d::fÜw¬d<
Tu¶e
>(
¬gs
))...);

411 
	g‹m¶©e
 <
ty³Çme
 
	gF
,y³Çm
	gTu¶e
>

412 autØ
Aµly
(
F
&& 
f
, 
Tu¶e
&& 
¬gs
è-> 
deşty³
(

413 
AµlyIm¶
(
¡d
::
fÜw¬d
<
F
>(
f
), std::fÜw¬d<
Tu¶e
>(
¬gs
),

414 
MakeIndexSequ’û
<
¡d
::
tu¶e_size
<

415 
ty³Çme
 
¡d
::
»move_»ã»nû
<
Tu¶e
>::
ty³
>::
v®ue
>())) {

416  
AµlyIm¶
(
¡d
::
fÜw¬d
<
F
>(
f
), std::fÜw¬d<
Tu¶e
>(
¬gs
),

417 
MakeIndexSequ’û
<
¡d
::
tu¶e_size
<

418 
ty³Çme
 
¡d
::
»move_»ã»nû
<
Tu¶e
>::
ty³
>::
v®ue
>());

434 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

435 
	gFunùiÚ
;

437 
	g‹m¶©e
 <
ty³Çme
 
	gR
, 
	gty³Çme
... 
	gArgs
>

438 
	gFunùiÚ
<
R
(
Args
...)> {

439 
usšg
 
	gResuÉ
 = 
R
;

440 
cÚ¡ex´
 
size_t
 
	gArgum’tCouÁ
 = ...(
Args
);

441 
	g‹m¶©e
 <
size_t
 
	gI
>

442 
usšg
 
	gArg
 = 
EËmFromLi¡
<
I
, 
	gArgs
...>;

443 
usšg
 
	gArgum’tTu¶e
 = 
¡d
::
tu¶e
<
Args
...>;

444 
usšg
 
	gArgum’tM©ch”Tu¶e
 = 
¡d
::
tu¶e
<
M©ch”
<
Args
>...>;

445 
usšg
 
	gMakeResuÉVoid
 = (
Args
...);

446 
usšg
 
	gMakeResuÉIgnÜedV®ue
 = 
IgnÜedV®ue
(
Args
...);

449 
	g‹m¶©e
 <
ty³Çme
 
	gR
, 
	gty³Çme
... 
	gArgs
>

450 
cÚ¡ex´
 
size_t
 
	gFunùiÚ
<
R
(
Args
...)>::
Argum’tCouÁ
;

452 #ifdeà
_MSC_VER


453 #´agm¨
w¬nšg
(
pİ
)

	@third_party/googletest/googlemock/include/gmock/internal/gmock-port.h

40 #iâdeà
GOOGLEMOCK_INCLUDE_GMOCK_INTERNAL_GMOCK_PORT_H_


41 
	#GOOGLEMOCK_INCLUDE_GMOCK_INTERNAL_GMOCK_PORT_H_


	)

43 
	~<as£¹.h
>

44 
	~<¡dlib.h
>

45 
	~<c¡dšt
>

46 
	~<io¡»am
>

56 
	~"g‹¡/š‹º®/g‹¡-pÜt.h
"

57 
	~"gmock/š‹º®/cu¡om/gmock-pÜt.h
"

61 #ià
defšed
(
_MSC_VER
) && _MSC_VER < 1900

67 
	#GMOCK_FLAG
(
Çme
è
FLAGS_gmock_
##
	)
name

69 #ià!
defšed
(
GMOCK_DECLARE_boŞ_
)

72 
	#GMOCK_DECLARE_boŞ_
(
Çme
è
GTEST_API_
 
boŞ
 
	`GMOCK_FLAG
Òame)

	)

73 
	#GMOCK_DECLARE_št32_
(
Çme
è
GTEST_API_
 
št32_t
 
	`GMOCK_FLAG
Òame)

	)

74 
	#GMOCK_DECLARE_¡ršg_
(
Çme
) \

75 
GTEST_API_
 ::
¡d
::
¡ršg
 
	`GMOCK_FLAG
(
Çme
)

	)

78 
	#GMOCK_DEFINE_boŞ_
(
Çme
, 
deçuÉ_v®
, 
doc
) \

79 
GTEST_API_
 
boŞ
 
	`GMOCK_FLAG
(
Çme
èğ(
deçuÉ_v®
)

	)

80 
	#GMOCK_DEFINE_št32_
(
Çme
, 
deçuÉ_v®
, 
doc
) \

81 
GTEST_API_
 
št32_t
 
	`GMOCK_FLAG
(
Çme
èğ(
deçuÉ_v®
)

	)

82 
	#GMOCK_DEFINE_¡ršg_
(
Çme
, 
deçuÉ_v®
, 
doc
) \

83 
GTEST_API_
 ::
¡d
::
¡ršg
 
	`GMOCK_FLAG
(
Çme
èğ(
deçuÉ_v®
)

	)

	@third_party/googletest/googlemock/include/gmock/internal/gmock-pp.h

1 #iâdeà
GOOGLEMOCK_INCLUDE_GMOCK_INTERNAL_GMOCK_PP_H_


2 
	#GOOGLEMOCK_INCLUDE_GMOCK_INTERNAL_GMOCK_PP_H_


	)

5 
	#GMOCK_PP_CAT
(
_1
, 
_2
è
	`GMOCK_PP_INTERNAL_CAT
(_1, _2)

	)

8 
	#GMOCK_PP_STRINGIZE
(...è
	`GMOCK_PP_INTERNAL_STRINGIZE
(
__VA_ARGS__
)

	)

11 
	#GMOCK_PP_EMPTY
(...)

	)

14 
	#GMOCK_PP_COMMA
(...è,

	)

17 
	#GMOCK_PP_IDENTITY
(
_1
è
	)
_1

29 
	#GMOCK_PP_NARG
(...) \

30 
	`GMOCK_PP_INTERNAL_16TH
( \

31 (
__VA_ARGS__
, 15, 14, 13, 12, 11, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1, 0))

	)

35 
	#GMOCK_PP_HAS_COMMA
(...) \

36 
	`GMOCK_PP_INTERNAL_16TH
( \

37 (
__VA_ARGS__
, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0))

	)

40 
	#GMOCK_PP_HEAD
(...è
	`GMOCK_PP_INTERNAL_HEAD
((
__VA_ARGS__
, 
unu£dArg
))

	)

44 
	#GMOCK_PP_TAIL
(...è
	`GMOCK_PP_INTERNAL_TAIL
((
__VA_ARGS__
))

	)

47 
	#GMOCK_PP_VARIADIC_CALL
(
_Maüo
, ...) \

48 
	`GMOCK_PP_IDENTITY
( \

49 
	`GMOCK_PP_CAT
(
_Maüo
, 
	`GMOCK_PP_NARG
(
__VA_ARGS__
))(__VA_ARGS__))

	)

79 
	#GMOCK_PP_IS_EMPTY
(...) \

80 
	`GMOCK_PP_INTERNAL_IS_EMPTY
(
	`GMOCK_PP_HAS_COMMA
(
__VA_ARGS__
), \

81 
	`GMOCK_PP_HAS_COMMA
(
GMOCK_PP_COMMA
 
__VA_ARGS__
), \

82 
	`GMOCK_PP_HAS_COMMA
(
	`__VA_ARGS__
()), \

83 
	`GMOCK_PP_HAS_COMMA
(
GMOCK_PP_COMMA
 
	`__VA_ARGS__
()))

	)

86 
	#GMOCK_PP_IF
(
_CÚd
, 
_Th’
, 
_El£
) \

87 
	`GMOCK_PP_CAT
(
GMOCK_PP_INTERNAL_IF_
, 
_CÚd
)(
_Th’
, 
_El£
)

	)

94 
	#GMOCK_PP_GENERIC_IF
(
_CÚd
, 
_Th’
, 
_El£
) \

95 
	`GMOCK_PP_REMOVE_PARENS
(
	`GMOCK_PP_IF
(
_CÚd
, 
_Th’
, 
_El£
))

	)

110 
	#GMOCK_PP_NARG0
(...) \

111 
	`GMOCK_PP_IF
(
	`GMOCK_PP_IS_EMPTY
(
__VA_ARGS__
), 0, 
	`GMOCK_PP_NARG
(__VA_ARGS__))

	)

115 
	#GMOCK_PP_IS_BEGIN_PARENS
(...) \

116 
	`GMOCK_PP_HEAD
(
	`GMOCK_PP_CAT
(
GMOCK_PP_INTERNAL_IBP_IS_VARIADIC_R_
, \

117 
GMOCK_PP_INTERNAL_IBP_IS_VARIADIC_C
 
__VA_ARGS__
))

	)

120 
	#GMOCK_PP_IS_ENCLOSED_PARENS
(...) \

121 
	`GMOCK_PP_IF
(
	`GMOCK_PP_IS_BEGIN_PARENS
(
__VA_ARGS__
), \

122 
	`GMOCK_PP_IS_EMPTY
(
GMOCK_PP_EMPTY
 
__VA_ARGS__
), 0)

	)

125 
	#GMOCK_PP_REMOVE_PARENS
(...è
GMOCK_PP_INTERNAL_REMOVE_PARENS
 
__VA_ARGS__


	)

131 
	#GMOCK_PP_FOR_EACH
(
_Maüo
, 
_D©a
, 
_Tu¶e
) \

132 
	`GMOCK_PP_CAT
(
GMOCK_PP_INTERNAL_FOR_EACH_IMPL_
, 
GMOCK_PP_NARG0
 
_Tu¶e
) \

133 (0, 
_Maüo
, 
_D©a
, 
_Tu¶e
)

	)

139 
	#GMOCK_PP_REPEAT
(
_Maüo
, 
_D©a
, 
_N
) \

140 
	`GMOCK_PP_CAT
(
GMOCK_PP_INTERNAL_FOR_EACH_IMPL_
, 
_N
) \

141 (0, 
_Maüo
, 
_D©a
, 
GMOCK_PP_INTENRAL_EMPTY_TUPLE
)

	)

144 
	#GMOCK_PP_INC
(
_i
è
	`GMOCK_PP_CAT
(
GMOCK_PP_INTERNAL_INC_
, _i)

	)

147 
	#GMOCK_PP_COMMA_IF
(
_i
è
	`GMOCK_PP_CAT
(
GMOCK_PP_INTERNAL_COMMA_IF_
, _i)

	)

151 
	#GMOCK_PP_INTENRAL_EMPTY_TUPLE
 (, , , , , , , , , , , , , , , )

	)

152 
	#GMOCK_PP_INTERNAL_CAT
(
_1
, 
_2
è_1##
	)
_2

153 
	#GMOCK_PP_INTERNAL_STRINGIZE
(...è#__VA_ARGS__

	)

154 
	#GMOCK_PP_INTERNAL_CAT_5
(
_1
, 
_2
, 
_3
, 
_4
, 
_5
è_1##_2##_3##_4##
	)
_5

155 
	#GMOCK_PP_INTERNAL_IS_EMPTY
(
_1
, 
_2
, 
_3
, 
_4
) \

156 
	`GMOCK_PP_HAS_COMMA
(
	`GMOCK_PP_INTERNAL_CAT_5
(
GMOCK_PP_INTERNAL_IS_EMPTY_CASE_
, \

157 
_1
, 
_2
, 
_3
, 
_4
))

	)

158 
	#GMOCK_PP_INTERNAL_IS_EMPTY_CASE_0001
 ,

	)

159 
	#GMOCK_PP_INTERNAL_IF_1
(
_Th’
, 
_El£
è
	)
_Then

160 
	#GMOCK_PP_INTERNAL_IF_0
(
_Th’
, 
_El£
è
	)
_Else

167 
	#GMOCK_PP_INTERNAL_INTERNAL_16TH
(
_1
, 
_2
, 
_3
, 
_4
, 
_5
, 
_6
, 
_7
, 
_8
, 
_9
, \

168 
_10
, 
_11
, 
_12
, 
_13
, 
_14
, 
_15
, 
_16
, \

170 
_16


	)

171 
	#GMOCK_PP_INTERNAL_16TH
(
_Args
) \

172 
	`GMOCK_PP_IDENTITY
(
GMOCK_PP_INTERNAL_INTERNAL_16TH
 
_Args
)

	)

173 
	#GMOCK_PP_INTERNAL_INTERNAL_HEAD
(
_1
, ...è
	)
_1

174 
	#GMOCK_PP_INTERNAL_HEAD
(
_Args
) \

175 
	`GMOCK_PP_IDENTITY
(
GMOCK_PP_INTERNAL_INTERNAL_HEAD
 
_Args
)

	)

176 
	#GMOCK_PP_INTERNAL_INTERNAL_TAIL
(
_1
, ...è
__VA_ARGS__


	)

177 
	#GMOCK_PP_INTERNAL_TAIL
(
_Args
) \

178 
	`GMOCK_PP_IDENTITY
(
GMOCK_PP_INTERNAL_INTERNAL_TAIL
 
_Args
)

	)

180 
	#GMOCK_PP_INTERNAL_IBP_IS_VARIADIC_C
(...è1 
_


	)

181 
	#GMOCK_PP_INTERNAL_IBP_IS_VARIADIC_R_1
 1,

	)

182 
	#GMOCK_PP_INTERNAL_IBP_IS_VARIADIC_R_GMOCK_PP_INTERNAL_IBP_IS_VARIADIC_C
 \

183 0,

	)

184 
	#GMOCK_PP_INTERNAL_REMOVE_PARENS
(...è
__VA_ARGS__


	)

185 
	#GMOCK_PP_INTERNAL_INC_0
 1

	)

186 
	#GMOCK_PP_INTERNAL_INC_1
 2

	)

187 
	#GMOCK_PP_INTERNAL_INC_2
 3

	)

188 
	#GMOCK_PP_INTERNAL_INC_3
 4

	)

189 
	#GMOCK_PP_INTERNAL_INC_4
 5

	)

190 
	#GMOCK_PP_INTERNAL_INC_5
 6

	)

191 
	#GMOCK_PP_INTERNAL_INC_6
 7

	)

192 
	#GMOCK_PP_INTERNAL_INC_7
 8

	)

193 
	#GMOCK_PP_INTERNAL_INC_8
 9

	)

194 
	#GMOCK_PP_INTERNAL_INC_9
 10

	)

195 
	#GMOCK_PP_INTERNAL_INC_10
 11

	)

196 
	#GMOCK_PP_INTERNAL_INC_11
 12

	)

197 
	#GMOCK_PP_INTERNAL_INC_12
 13

	)

198 
	#GMOCK_PP_INTERNAL_INC_13
 14

	)

199 
	#GMOCK_PP_INTERNAL_INC_14
 15

	)

200 
	#GMOCK_PP_INTERNAL_INC_15
 16

	)

201 
	#GMOCK_PP_INTERNAL_COMMA_IF_0


	)

202 
	#GMOCK_PP_INTERNAL_COMMA_IF_1
 ,

	)

203 
	#GMOCK_PP_INTERNAL_COMMA_IF_2
 ,

	)

204 
	#GMOCK_PP_INTERNAL_COMMA_IF_3
 ,

	)

205 
	#GMOCK_PP_INTERNAL_COMMA_IF_4
 ,

	)

206 
	#GMOCK_PP_INTERNAL_COMMA_IF_5
 ,

	)

207 
	#GMOCK_PP_INTERNAL_COMMA_IF_6
 ,

	)

208 
	#GMOCK_PP_INTERNAL_COMMA_IF_7
 ,

	)

209 
	#GMOCK_PP_INTERNAL_COMMA_IF_8
 ,

	)

210 
	#GMOCK_PP_INTERNAL_COMMA_IF_9
 ,

	)

211 
	#GMOCK_PP_INTERNAL_COMMA_IF_10
 ,

	)

212 
	#GMOCK_PP_INTERNAL_COMMA_IF_11
 ,

	)

213 
	#GMOCK_PP_INTERNAL_COMMA_IF_12
 ,

	)

214 
	#GMOCK_PP_INTERNAL_COMMA_IF_13
 ,

	)

215 
	#GMOCK_PP_INTERNAL_COMMA_IF_14
 ,

	)

216 
	#GMOCK_PP_INTERNAL_COMMA_IF_15
 ,

	)

217 
	#GMOCK_PP_INTERNAL_CALL_MACRO
(
_Maüo
, 
_i
, 
_D©a
, 
_–em’t
) \

218 
	`_Maüo
(
_i
, 
_D©a
, 
_–em’t
)

	)

219 
	#GMOCK_PP_INTERNAL_FOR_EACH_IMPL_0
(
_i
, 
_Maüo
, 
_D©a
, 
_Tu¶e
)

	)

220 
	#GMOCK_PP_INTERNAL_FOR_EACH_IMPL_1
(
_i
, 
_Maüo
, 
_D©a
, 
_Tu¶e
) \

221 
	`GMOCK_PP_INTERNAL_CALL_MACRO
(
_Maüo
, 
_i
, 
_D©a
, 
GMOCK_PP_HEAD
 
_Tu¶e
)

	)

222 
	#GMOCK_PP_INTERNAL_FOR_EACH_IMPL_2
(
_i
, 
_Maüo
, 
_D©a
, 
_Tu¶e
) \

223 
	`GMOCK_PP_INTERNAL_CALL_MACRO
(
_Maüo
, 
_i
, 
_D©a
, 
GMOCK_PP_HEAD
 
_Tu¶e
) \

224 
	`GMOCK_PP_INTERNAL_FOR_EACH_IMPL_1
(
	`GMOCK_PP_INC
(
_i
), 
_Maüo
, 
_D©a
, \

225 (
GMOCK_PP_TAIL
 
_Tu¶e
))

	)

226 
	#GMOCK_PP_INTERNAL_FOR_EACH_IMPL_3
(
_i
, 
_Maüo
, 
_D©a
, 
_Tu¶e
) \

227 
	`GMOCK_PP_INTERNAL_CALL_MACRO
(
_Maüo
, 
_i
, 
_D©a
, 
GMOCK_PP_HEAD
 
_Tu¶e
) \

228 
	`GMOCK_PP_INTERNAL_FOR_EACH_IMPL_2
(
	`GMOCK_PP_INC
(
_i
), 
_Maüo
, 
_D©a
, \

229 (
GMOCK_PP_TAIL
 
_Tu¶e
))

	)

230 
	#GMOCK_PP_INTERNAL_FOR_EACH_IMPL_4
(
_i
, 
_Maüo
, 
_D©a
, 
_Tu¶e
) \

231 
	`GMOCK_PP_INTERNAL_CALL_MACRO
(
_Maüo
, 
_i
, 
_D©a
, 
GMOCK_PP_HEAD
 
_Tu¶e
) \

232 
	`GMOCK_PP_INTERNAL_FOR_EACH_IMPL_3
(
	`GMOCK_PP_INC
(
_i
), 
_Maüo
, 
_D©a
, \

233 (
GMOCK_PP_TAIL
 
_Tu¶e
))

	)

234 
	#GMOCK_PP_INTERNAL_FOR_EACH_IMPL_5
(
_i
, 
_Maüo
, 
_D©a
, 
_Tu¶e
) \

235 
	`GMOCK_PP_INTERNAL_CALL_MACRO
(
_Maüo
, 
_i
, 
_D©a
, 
GMOCK_PP_HEAD
 
_Tu¶e
) \

236 
	`GMOCK_PP_INTERNAL_FOR_EACH_IMPL_4
(
	`GMOCK_PP_INC
(
_i
), 
_Maüo
, 
_D©a
, \

237 (
GMOCK_PP_TAIL
 
_Tu¶e
))

	)

238 
	#GMOCK_PP_INTERNAL_FOR_EACH_IMPL_6
(
_i
, 
_Maüo
, 
_D©a
, 
_Tu¶e
) \

239 
	`GMOCK_PP_INTERNAL_CALL_MACRO
(
_Maüo
, 
_i
, 
_D©a
, 
GMOCK_PP_HEAD
 
_Tu¶e
) \

240 
	`GMOCK_PP_INTERNAL_FOR_EACH_IMPL_5
(
	`GMOCK_PP_INC
(
_i
), 
_Maüo
, 
_D©a
, \

241 (
GMOCK_PP_TAIL
 
_Tu¶e
))

	)

242 
	#GMOCK_PP_INTERNAL_FOR_EACH_IMPL_7
(
_i
, 
_Maüo
, 
_D©a
, 
_Tu¶e
) \

243 
	`GMOCK_PP_INTERNAL_CALL_MACRO
(
_Maüo
, 
_i
, 
_D©a
, 
GMOCK_PP_HEAD
 
_Tu¶e
) \

244 
	`GMOCK_PP_INTERNAL_FOR_EACH_IMPL_6
(
	`GMOCK_PP_INC
(
_i
), 
_Maüo
, 
_D©a
, \

245 (
GMOCK_PP_TAIL
 
_Tu¶e
))

	)

246 
	#GMOCK_PP_INTERNAL_FOR_EACH_IMPL_8
(
_i
, 
_Maüo
, 
_D©a
, 
_Tu¶e
) \

247 
	`GMOCK_PP_INTERNAL_CALL_MACRO
(
_Maüo
, 
_i
, 
_D©a
, 
GMOCK_PP_HEAD
 
_Tu¶e
) \

248 
	`GMOCK_PP_INTERNAL_FOR_EACH_IMPL_7
(
	`GMOCK_PP_INC
(
_i
), 
_Maüo
, 
_D©a
, \

249 (
GMOCK_PP_TAIL
 
_Tu¶e
))

	)

250 
	#GMOCK_PP_INTERNAL_FOR_EACH_IMPL_9
(
_i
, 
_Maüo
, 
_D©a
, 
_Tu¶e
) \

251 
	`GMOCK_PP_INTERNAL_CALL_MACRO
(
_Maüo
, 
_i
, 
_D©a
, 
GMOCK_PP_HEAD
 
_Tu¶e
) \

252 
	`GMOCK_PP_INTERNAL_FOR_EACH_IMPL_8
(
	`GMOCK_PP_INC
(
_i
), 
_Maüo
, 
_D©a
, \

253 (
GMOCK_PP_TAIL
 
_Tu¶e
))

	)

254 
	#GMOCK_PP_INTERNAL_FOR_EACH_IMPL_10
(
_i
, 
_Maüo
, 
_D©a
, 
_Tu¶e
) \

255 
	`GMOCK_PP_INTERNAL_CALL_MACRO
(
_Maüo
, 
_i
, 
_D©a
, 
GMOCK_PP_HEAD
 
_Tu¶e
) \

256 
	`GMOCK_PP_INTERNAL_FOR_EACH_IMPL_9
(
	`GMOCK_PP_INC
(
_i
), 
_Maüo
, 
_D©a
, \

257 (
GMOCK_PP_TAIL
 
_Tu¶e
))

	)

258 
	#GMOCK_PP_INTERNAL_FOR_EACH_IMPL_11
(
_i
, 
_Maüo
, 
_D©a
, 
_Tu¶e
) \

259 
	`GMOCK_PP_INTERNAL_CALL_MACRO
(
_Maüo
, 
_i
, 
_D©a
, 
GMOCK_PP_HEAD
 
_Tu¶e
) \

260 
	`GMOCK_PP_INTERNAL_FOR_EACH_IMPL_10
(
	`GMOCK_PP_INC
(
_i
), 
_Maüo
, 
_D©a
, \

261 (
GMOCK_PP_TAIL
 
_Tu¶e
))

	)

262 
	#GMOCK_PP_INTERNAL_FOR_EACH_IMPL_12
(
_i
, 
_Maüo
, 
_D©a
, 
_Tu¶e
) \

263 
	`GMOCK_PP_INTERNAL_CALL_MACRO
(
_Maüo
, 
_i
, 
_D©a
, 
GMOCK_PP_HEAD
 
_Tu¶e
) \

264 
	`GMOCK_PP_INTERNAL_FOR_EACH_IMPL_11
(
	`GMOCK_PP_INC
(
_i
), 
_Maüo
, 
_D©a
, \

265 (
GMOCK_PP_TAIL
 
_Tu¶e
))

	)

266 
	#GMOCK_PP_INTERNAL_FOR_EACH_IMPL_13
(
_i
, 
_Maüo
, 
_D©a
, 
_Tu¶e
) \

267 
	`GMOCK_PP_INTERNAL_CALL_MACRO
(
_Maüo
, 
_i
, 
_D©a
, 
GMOCK_PP_HEAD
 
_Tu¶e
) \

268 
	`GMOCK_PP_INTERNAL_FOR_EACH_IMPL_12
(
	`GMOCK_PP_INC
(
_i
), 
_Maüo
, 
_D©a
, \

269 (
GMOCK_PP_TAIL
 
_Tu¶e
))

	)

270 
	#GMOCK_PP_INTERNAL_FOR_EACH_IMPL_14
(
_i
, 
_Maüo
, 
_D©a
, 
_Tu¶e
) \

271 
	`GMOCK_PP_INTERNAL_CALL_MACRO
(
_Maüo
, 
_i
, 
_D©a
, 
GMOCK_PP_HEAD
 
_Tu¶e
) \

272 
	`GMOCK_PP_INTERNAL_FOR_EACH_IMPL_13
(
	`GMOCK_PP_INC
(
_i
), 
_Maüo
, 
_D©a
, \

273 (
GMOCK_PP_TAIL
 
_Tu¶e
))

	)

274 
	#GMOCK_PP_INTERNAL_FOR_EACH_IMPL_15
(
_i
, 
_Maüo
, 
_D©a
, 
_Tu¶e
) \

275 
	`GMOCK_PP_INTERNAL_CALL_MACRO
(
_Maüo
, 
_i
, 
_D©a
, 
GMOCK_PP_HEAD
 
_Tu¶e
) \

276 
	`GMOCK_PP_INTERNAL_FOR_EACH_IMPL_14
(
	`GMOCK_PP_INC
(
_i
), 
_Maüo
, 
_D©a
, \

277 (
GMOCK_PP_TAIL
 
_Tu¶e
))

	)

	@third_party/googletest/googlemock/src/gmock-all.cc

39 
	~"gmock/gmock.h
"

42 
	~"¤c/gmock-ÿrdš®™›s.cc
"

43 
	~"¤c/gmock-š‹º®-uts.cc
"

44 
	~"¤c/gmock-m©ch”s.cc
"

45 
	~"¤c/gmock-¥ec-bud”s.cc
"

46 
	~"¤c/gmock.cc
"

	@third_party/googletest/googlemock/src/gmock-cardinalities.cc

35 
	~"gmock/gmock-ÿrdš®™›s.h
"

37 
	~<lim™s.h
>

38 
	~<o¡»am
>

39 
	~<s¡»am
>

40 
	~<¡ršg
>

41 
	~"gmock/š‹º®/gmock-š‹º®-uts.h
"

42 
	~"g‹¡/g‹¡.h
"

44 
Çme¥aû
 
	g‹¡šg
 {

46 
	gÇme¥aû
 {

49 şas 
	cB‘w“nC¬dš®™yIm¶
 : 
public
 
C¬dš®™yIÁ”çû
 {

50 
public
:

51 
B‘w“nC¬dš®™yIm¶
(
mš
, 
max
)

52 : 
mš_
(
mš
 >= 0 ? min : 0),

53 
max_
(
max
 >ğ
mš_
 ? max : min_) {

54 
¡d
::
¡ršg¡»am
 
ss
;

55 ià(
	gmš
 < 0) {

56 
	gss
 << "The invocation†ower bound must be >= 0, "

57 << "buˆi aùu®ly " << 
	gmš
 << ".";

58 
	gš‹º®
::
Ex³ù
(
çl£
, 
__FILE__
, 
__LINE__
, 
ss
.
¡r
());

59 } ià(
	gmax
 < 0) {

60 
	gss
 << "The invocation upper bound must be >= 0, "

61 << "buˆi aùu®ly " << 
	gmax
 << ".";

62 
	gš‹º®
::
Ex³ù
(
çl£
, 
__FILE__
, 
__LINE__
, 
ss
.
¡r
());

63 } ià(
	gmš
 > 
	gmax
) {

64 
	gss
 << "ThšvoÿtiÚ uµ” bound (" << 
	gmax


65 << "èmu¡ b>ğthšvoÿtiÚ†ow” bound (" << 
	gmš


67 
	gš‹º®
::
Ex³ù
(
çl£
, 
__FILE__
, 
__LINE__
, 
ss
.
¡r
());

73 
CÚ£rv©iveLow”Bound
(ècÚ¡ 
	gov”ride
 {  
	gmš_
; }

74 
CÚ£rv©iveUµ”Bound
(ècÚ¡ 
	gov”ride
 {  
	gmax_
; }

76 
boŞ
 
IsS©isf›dByC®lCouÁ
(
ÿÎ_couÁ
ècÚ¡ 
	gov”ride
 {

77  
	gmš_
 <ğ
ÿÎ_couÁ
 && c®l_couÁ <ğ
max_
;

80 
boŞ
 
IsS©u¿‹dByC®lCouÁ
(
ÿÎ_couÁ
ècÚ¡ 
	gov”ride
 {

81  
	gÿÎ_couÁ
 >ğ
max_
;

84 
DesüibeTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
;

86 
	g´iv©e
:

87 cÚ¡ 
mš_
;

88 cÚ¡ 
	gmax_
;

90 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
B‘w“nC¬dš®™yIm¶
);

94 
šlše
 
	g¡d
::
¡ršg
 
FÜm©Times
(
n
) {

95 ià(
n
 == 1) {

97 } ià(
	gn
 == 2) {

100 
	g¡d
::
¡ršg¡»am
 
ss
;

101 
	gss
 << 
	gn
 << "imes";

102  
	gss
.
¡r
();

107 
	gB‘w“nC¬dš®™yIm¶
::
DesüibeTo
(::
¡d
::
o¡»am
* 
os
) const {

108 ià(
mš_
 == 0) {

109 ià(
max_
 == 0) {

110 *
os
 << "never called";

111 } ià(
	gmax_
 =ğ
INT_MAX
) {

112 *
os
 << "called‡ny‚umber ofimes";

114 *
	gos
 << "ÿÎed‡ˆmo¡ " << 
FÜm©Times
(
max_
);

116 } ià(
	gmš_
 =ğ
max_
) {

117 *
os
 << "ÿÎed " << 
FÜm©Times
(
mš_
);

118 } ià(
	gmax_
 =ğ
INT_MAX
) {

119 *
os
 << "ÿÎed‡ˆËa¡ " << 
FÜm©Times
(
mš_
);

122 *
	gos
 << "ÿÎed b‘w“À" << 
	gmš_
 << "‡nd " << 
	gmax_
 << "imes";

129 
	gC¬dš®™y
::
	$DesüibeAùu®C®lCouÁTo
(
aùu®_ÿÎ_couÁ
,

130 ::
¡d
::
o¡»am
* 
os
) {

131 ià(
aùu®_ÿÎ_couÁ
 > 0) {

132 *
os
 << "ÿÎed " << 
	`FÜm©Times
(
aùu®_ÿÎ_couÁ
);

134 *
os
 << "never called";

136 
	}
}

139 
GTEST_API_
 
C¬dš®™y
 
	$AtL—¡
(
n
è{  
	`B‘w“n
Ò, 
INT_MAX
); 
	}
}

142 
GTEST_API_
 
C¬dš®™y
 
	$AtMo¡
(
n
è{  
	`B‘w“n
(0,‚); 
	}
}

145 
GTEST_API_
 
C¬dš®™y
 
	$AnyNumb”
(è{  
	`AtL—¡
(0); 
	}
}

148 
GTEST_API_
 
C¬dš®™y
 
	$B‘w“n
(
mš
, 
max
) {

149  
	`C¬dš®™y
(
Ãw
 
	`B‘w“nC¬dš®™yIm¶
(
mš
, 
max
));

150 
	}
}

153 
GTEST_API_
 
C¬dš®™y
 
	$Exaùly
(
n
è{  
	`B‘w“n
Ò,‚); 
	}
}

	@third_party/googletest/googlemock/src/gmock-internal-utils.cc

37 
	~"gmock/š‹º®/gmock-š‹º®-uts.h
"

39 
	~<ùy³.h
>

40 
	~<o¡»am
>

41 
	~<¡ršg
>

42 
	~"gmock/gmock.h
"

43 
	~"gmock/š‹º®/gmock-pÜt.h
"

44 
	~"g‹¡/g‹¡.h
"

46 
Çme¥aû
 
	g‹¡šg
 {

47 
Çme¥aû
 
	gš‹º®
 {

51 
GTEST_API_
 
	g¡d
::
¡ršg
 
JošAsTu¶e
(cÚ¡ 
SŒšgs
& 
f›lds
) {

52 
f›lds
.
size
()) {

56  
f›lds
[0];

58 
¡d
::
¡ršg
 
»suÉ
 = "(" + 
f›lds
[0];

59 
size_t
 
	gi
 = 1; i < 
	gf›lds
.
size
(); i++) {

60 
	g»suÉ
 += ", ";

61 
	g»suÉ
 +ğ
f›lds
[
i
];

63 
	g»suÉ
 += ")";

64  
	g»suÉ
;

72 
GTEST_API_
 
	g¡d
::
¡ršg
 
CÚv”tId’tif›rNameToWÜds
(cÚ¡ * 
id_Çme
) {

73 
¡d
::
¡ršg
 
»suÉ
;

74 
	g´ev_ch¬
 = '\0';

75 cÚ¡ * 
	gp
 = 
id_Çme
; *°!ğ'\0'; 
	g´ev_ch¬
 = *(
p
++)) {

78 cÚ¡ 
boŞ
 
¡¬ts_Ãw_wÜd
 = 
IsUµ”
(*
p
) ||

79 (!
IsAÍha
(
´ev_ch¬
è&& 
IsLow”
(*
p
)) ||

80 (!
IsDig™
(
´ev_ch¬
è&& IsDig™(*
p
));

82 ià(
IsAlNum
(*
p
)) {

83 ià(
	g¡¬ts_Ãw_wÜd
 && 
	g»suÉ
 != "")

84 
»suÉ
 += ' ';

85 
	g»suÉ
 +ğ
ToLow”
(*
p
);

88  
	g»suÉ
;

94 şas 
	cGoogËTe¡Fau»R•Ü‹r
 : 
public
 
Fau»R•Ü‹rIÁ”çû
 {

95 
public
:

96 
R•ÜtFau»
(
Fau»Ty³
 
ty³
, cÚ¡ * 
fe
, 
lše
,

97 cÚ¡ 
¡d
::
¡ršg
& 
mes§ge
è
ov”ride
 {

98 
As£¹H–³r
(
ty³
 =ğ
kF©®
 ?

99 
Te¡P¬tResuÉ
::
kF©®Fau»
 :

100 
Te¡P¬tResuÉ
::
kNÚF©®Fau»
,

101 
fe
,

102 
lše
,

103 
mes§ge
.
c_¡r
()èğ
Mes§ge
();

104 ià(
	gty³
 =ğ
kF©®
) {

105 
posix
::
AbÜt
();

112 
GTEST_API_
 
Fau»R•Ü‹rIÁ”çû
* 
G‘Fau»R•Ü‹r
() {

118 
Fau»R•Ü‹rIÁ”çû
* cÚ¡ 
	gçu»_»pÜ‹r
 =

119 
Ãw
 
GoogËTe¡Fau»R•Ü‹r
();

120  
	gçu»_»pÜ‹r
;

124 
GTEST_DEFINE_STATIC_MUTEX_
(
g_log_mu‹x
);

128 
GTEST_API_
 
boŞ
 
LogIsVisibË
(
LogSev”™y
 
£v”™y
) {

129 ià(
GMOCK_FLAG
(
v”bo£
è=ğ
kInfoV”bos™y
) {

131  
Œue
;

132 } ià(
GMOCK_FLAG
(
v”bo£
è=ğ
kE¼ÜV”bos™y
) {

134  
çl£
;

138  
	g£v”™y
 =ğ
kW¬nšg
;

149 
GTEST_API_
 
Log
(
LogSev”™y
 
£v”™y
, cÚ¡ 
¡d
::
¡ršg
& 
mes§ge
,

150 
¡ack_äames_to_sk
) {

151 ià(!
LogIsVisibË
(
£v”™y
))

155 
Mu‹xLock
 
l
(&
g_log_mu‹x
);

157 ià(
	g£v”™y
 =ğ
kW¬nšg
) {

159 
¡d
::
cout
 << "\nGMOCK WARNING:";

162 ià(
	gmes§ge
.
em±y
() || message[0] != '\n') {

163 
¡d
::
cout
 << "\n";

165 
	g¡d
::
cout
 << 
mes§ge
;

166 ià(
	g¡ack_äames_to_sk
 >= 0) {

167 #ifdeà
NDEBUG


169 cÚ¡ 
aùu®_to_sk
 = 0;

173 cÚ¡ 
	gaùu®_to_sk
 = 
¡ack_äames_to_sk
 + 1;

177 ià(!
	gmes§ge
.
em±y
(è&& *mes§ge.
rbegš
() != '\n') {

178 
¡d
::
cout
 << "\n";

180 
	g¡d
::
cout
 << "Stackrace:\n"

181 << ::
‹¡šg
::
š‹º®
::
G‘Cu¼’tOsSckT¿ûExû±Tİ
(

182 ::
‹¡šg
::
Un™Te¡
::
G‘In¡ªû
(), 
aùu®_to_sk
);

184 
	g¡d
::
cout
 << ::
¡d
::
æush
;

187 
GTEST_API_
 
W™houtM©ch”s
 
G‘W™houtM©ch”s
() {  WithoutMatchers(); }

189 
GTEST_API_
 
IÎeg®DoDeçuÉ
(cÚ¡ * 
fe
, 
lše
) {

190 
	gš‹º®
::
As£¹
(

191 
çl£
, 
fe
, 
lše
,

	@third_party/googletest/googlemock/src/gmock-matchers.cc

36 
	~"gmock/gmock-m©ch”s.h
"

38 
	~<¡ršg.h
>

39 
	~<io¡»am
>

40 
	~<s¡»am
>

41 
	~<¡ršg
>

43 
Çme¥aû
 
	g‹¡šg
 {

44 
Çme¥aû
 
	gš‹º®
 {

51 
GTEST_API_
 
	g¡d
::
¡ršg
 
FÜm©M©ch”DesütiÚ
(
boŞ
 
Ãg©iÚ
,

52 cÚ¡ * 
m©ch”_Çme
,

53 cÚ¡ 
SŒšgs
& 
·¿m_v®ues
) {

54 
	g¡d
::
¡ršg
 
»suÉ
 = 
CÚv”tId’tif›rNameToWÜds
(
m©ch”_Çme
);

55 ià(
	g·¿m_v®ues
.
size
(è>ğ1è
»suÉ
 +ğ" " + 
JošAsTu¶e
(
·¿m_v®ues
);

56  
	gÃg©iÚ
 ? "nÙ (" + 
	g»suÉ
 + ")" : 
»suÉ
;

121 şas 
	cMaxB¬t™eM©chS‹
 {

122 
	gpublic
:

123 
ex¶ic™
 
MaxB¬t™eM©chS‹
(cÚ¡ 
M©chM©rix
& 
g¿ph
)

124 : 
g¿ph_
(&
g¿ph
),

125 
Ëá_
(
g¿ph_
->
LhsSize
(), 
kUnu£d
),

126 
right_
(
g¿ph_
->
RhsSize
(), 
kUnu£d
) {}

129 
EËm’tM©ch”Paœs
 
Compu‹
() {

131 ::
¡d
::
veùÜ
<> 
£’
;

144 
size_t
 
	ghs
 = 0; ilh < 
	gg¿ph_
->
LhsSize
(); ++ilhs) {

147 
GTEST_CHECK_
(
Ëá_
[
hs
] =ğ
kUnu£d
)

148 << "hs: " << 
hs
 << ",†eá_[hs]: " << 
Ëá_
[ilhs];

150 
	g£’
.
assign
(
g¿ph_
->
RhsSize
(), 0);

151 
TryAugm’t
(
hs
, &
£’
);

153 
EËm’tM©ch”Paœs
 
	g»suÉ
;

154 
size_t
 
	ghs
 = 0; ilh < 
	gËá_
.
size
(); ++ilhs) {

155 
size_t
 
	gœhs
 = 
Ëá_
[
hs
];

156 ià(
	gœhs
 =ğ
kUnu£d
) ;

157 
	g»suÉ
.
push_back
(
EËm’tM©ch”Paœ
(
hs
, 
œhs
));

159  
	g»suÉ
;

162 
	g´iv©e
:

163 cÚ¡ 
size_t
 
kUnu£d
 = 
¡©ic_ÿ¡
<size_t>(-1);

181 
boŞ
 
TryAugm’t
(
size_t
 
hs
, ::
¡d
::
veùÜ
<>* 
£’
) {

182 
size_t
 
œhs
 = 0; 
	gœhs
 < 
	gg¿ph_
->
RhsSize
(); ++irhs) {

183 ià((*
	g£’
)[
œhs
]) ;

184 ià(!
	gg¿ph_
->
HasEdge
(
hs
, 
œhs
)) ;

186 (*
	g£’
)[
œhs
] = 1;

197 ià(
	gright_
[
œhs
] =ğ
kUnu£d
 || 
TryAugm’t
(
right_
[œhs], 
£’
)) {

199 
	gËá_
[
hs
] = 
œhs
;

200 
	gright_
[
œhs
] = 
hs
;

201  
	gŒue
;

204  
	gçl£
;

207 cÚ¡ 
M©chM©rix
* 
	gg¿ph_
;

219 ::
¡d
::
veùÜ
<
size_t
> 
Ëá_
;

220 ::
¡d
::
veùÜ
<
size_t
> 
right_
;

223 cÚ¡ 
size_t
 
	gMaxB¬t™eM©chS‹
::
kUnu£d
;

225 
GTEST_API_
 
EËm’tM©ch”Paœs
 
FšdMaxB¬t™eM©chšg
(cÚ¡ 
M©chM©rix
& 
g
) {

226  
MaxB¬t™eM©chS‹
(
g
).
Compu‹
();

229 
LogEËm’tM©ch”PaœVec
(cÚ¡ 
EËm’tM©ch”Paœs
& 
·œs
,

230 ::
¡d
::
o¡»am
* 
¡»am
) {

231 
EËm’tM©ch”Paœs
::
	tcÚ¡_™”©Ü
 
	tI‹r
;

232 ::
¡d
::
o¡»am
& 
os
 = *
¡»am
;

233 
	gos
 << "{";

234 cÚ¡ * 
	g£p
 = "";

235 
I‹r
 
	g™
 = 
·œs
.
begš
(); iˆ!ğ·œs.
’d
(); ++it) {

236 
	gos
 << 
	g£p
 << "\n ("

237 << "–em’ˆ#" << 
	g™
->
	gfœ¡
 << ", "

238 << "m©ch” #" << 
	g™
->
	g£cÚd
 << ")";

239 
	g£p
 = ",";

241 
	gos
 << "\n}";

244 
boŞ
 
	gM©chM©rix
::
NextG¿ph
() {

245 
size_t
 
hs
 = 0; 
	ghs
 < 
LhsSize
(); ++ilhs) {

246 
size_t
 
	gœhs
 = 0; irh < 
RhsSize
(); ++irhs) {

247 & 
	gb
 = 
m©ched_
[
S·ûIndex
(
hs
, 
œhs
)];

248 ià(!
	gb
) {

249 
	gb
 = 1;

250  
	gŒue
;

252 
	gb
 = 0;

255  
	gçl£
;

258 
	gM©chM©rix
::
Rªdomize
() {

259 
size_t
 
hs
 = 0; 
	ghs
 < 
LhsSize
(); ++ilhs) {

260 
size_t
 
	gœhs
 = 0; irh < 
RhsSize
(); ++irhs) {

261 & 
	gb
 = 
m©ched_
[
S·ûIndex
(
hs
, 
œhs
)];

262 
	gb
 = 
¡©ic_ÿ¡
<>(
¿nd
() & 1);

267 
	g¡d
::
¡ršg
 
M©chM©rix
::
DebugSŒšg
() const {

268 ::
¡d
::
¡ršg¡»am
 
ss
;

269 cÚ¡ * 
	g£p
 = "";

270 
size_t
 
	gi
 = 0; i < 
LhsSize
(); ++i) {

271 
	gss
 << 
	g£p
;

272 
size_t
 
	gj
 = 0; j < 
RhsSize
(); ++j) {

273 
	gss
 << 
HasEdge
(
i
, 
j
);

275 
	g£p
 = ";";

277  
	gss
.
¡r
();

280 
	gUnÜd”edEËm’tsA»M©ch”Im¶Ba£
::
DesüibeToIm¶
(

281 ::
¡d
::
o¡»am
* 
os
) const {

282 
m©ch_æags
()) {

283 
UnÜd”edM©ch”Requœe
::
ExaùM©ch
:

284 ià(
m©ch”_desüib”s_
.
em±y
()) {

285 *
os
 << "isƒmpty";

288 ià(
	gm©ch”_desüib”s_
.
size
() == 1) {

289 *
os
 << "ha " << 
EËm’ts
(1) << "‡ndhatƒlement ";

290 
	gm©ch”_desüib”s_
[0]->
DesüibeTo
(
os
);

293 *
	gos
 << "ha " << 
EËm’ts
(
m©ch”_desüib”s_
.
size
())

296 
	gUnÜd”edM©ch”Requœe
::
Su³r£t
:

297 *
os
 << "a surjection fromƒlementso„equirementsƒxists suchhat:\n";

299 
	gUnÜd”edM©ch”Requœe
::
Sub£t
:

300 *
os
 << "an injection fromƒlementso„equirementsƒxists suchhat:\n";

304 cÚ¡ * 
	g£p
 = "";

305 
size_t
 
	gi
 = 0; i !ğ
m©ch”_desüib”s_
.
size
(); ++i) {

306 *
	gos
 << 
	g£p
;

307 ià(
m©ch_æags
(è=ğ
UnÜd”edM©ch”Requœe
::
ExaùM©ch
) {

308 *
os
 << " -ƒËm’ˆ#" << 
i
 << " ";

310 *
	gos
 << " -‡nƒlement ";

312 
	gm©ch”_desüib”s_
[
i
]->
DesüibeTo
(
os
);

313 ià(
m©ch_æags
(è=ğ
UnÜd”edM©ch”Requœe
::
ExaùM©ch
) {

314 
£p
 = ",‡nd\n";

316 
	g£p
 = "\n";

321 
	gUnÜd”edEËm’tsA»M©ch”Im¶Ba£
::
DesüibeNeg©iÚToIm¶
(

322 ::
¡d
::
o¡»am
* 
os
) const {

323 
m©ch_æags
()) {

324 
UnÜd”edM©ch”Requœe
::
ExaùM©ch
:

325 ià(
m©ch”_desüib”s_
.
em±y
()) {

326 *
os
 << "isn'tƒmpty";

329 ià(
	gm©ch”_desüib”s_
.
size
() == 1) {

330 *
os
 << "dÛ¢'ˆhav" << 
EËm’ts
(1) << ", or has " << Elements(1)

332 
	gm©ch”_desüib”s_
[0]->
DesüibeNeg©iÚTo
(
os
);

335 *
	gos
 << "dÛ¢'ˆhav" << 
EËm’ts
(
m©ch”_desüib”s_
.
size
())

338 
	gUnÜd”edM©ch”Requœe
::
Su³r£t
:

339 *
os
 << "no surjection fromƒlementso„equirementsƒxists suchhat:\n";

341 
	gUnÜd”edM©ch”Requœe
::
Sub£t
:

342 *
os
 << "no injection fromƒlementso„equirementsƒxists suchhat:\n";

345 cÚ¡ * 
	g£p
 = "";

346 
size_t
 
	gi
 = 0; i !ğ
m©ch”_desüib”s_
.
size
(); ++i) {

347 *
	gos
 << 
	g£p
;

348 ià(
m©ch_æags
(è=ğ
UnÜd”edM©ch”Requœe
::
ExaùM©ch
) {

349 *
os
 << " -ƒËm’ˆ#" << 
i
 << " ";

351 *
	gos
 << " -‡nƒlement ";

353 
	gm©ch”_desüib”s_
[
i
]->
DesüibeTo
(
os
);

354 ià(
m©ch_æags
(è=ğ
UnÜd”edM©ch”Requœe
::
ExaùM©ch
) {

355 
£p
 = ",‡nd\n";

357 
	g£p
 = "\n";

367 
boŞ
 
	gUnÜd”edEËm’tsA»M©ch”Im¶Ba£
::
V”ifyM©chM©rix
(

368 cÚ¡ ::
¡d
::
veùÜ
<¡d::
¡ršg
>& 
–em’t_´štouts
,

369 cÚ¡ 
M©chM©rix
& 
m©rix
, 
M©chResuÉLi¡’”
* 
li¡’”
) const {

370 
boŞ
 
	g»suÉ
 = 
Œue
;

371 ::
¡d
::
veùÜ
<> 
–em’t_m©ched
(
m©rix
.
LhsSize
(), 0);

372 ::
¡d
::
veùÜ
<> 
m©ch”_m©ched
(
m©rix
.
RhsSize
(), 0);

374 
size_t
 
	ghs
 = 0; ilh < 
	gm©rix
.
LhsSize
(); ilhs++) {

375 
size_t
 
	gœhs
 = 0; irh < 
	gm©rix
.
RhsSize
(); irhs++) {

376 
	gm©ched
 = 
m©rix
.
HasEdge
(
hs
, 
œhs
);

377 
	g–em’t_m©ched
[
hs
] |ğ
m©ched
;

378 
	gm©ch”_m©ched
[
œhs
] |ğ
m©ched
;

382 ià(
m©ch_æags
(è& 
	gUnÜd”edM©ch”Requœe
::
Su³r£t
) {

383 cÚ¡ * 
£p
 =

385 
size_t
 
	gmi
 = 0; m˜< 
	gm©ch”_m©ched
.
size
(); ++mi) {

386 ià(
	gm©ch”_m©ched
[
mi
]) ;

387 
	g»suÉ
 = 
çl£
;

388 ià(
	gli¡’”
->
IsIÁ”e¡ed
()) {

389 *
	gli¡’”
 << 
	g£p
 << "m©ch” #" << 
	gmi
 << ": ";

390 
	gm©ch”_desüib”s_
[
mi
]->
DesüibeTo
(
li¡’”
->
¡»am
());

391 
	g£p
 = ",\n";

396 ià(
m©ch_æags
(è& 
	gUnÜd”edM©ch”Requœe
::
Sub£t
) {

397 cÚ¡ * 
£p
 =

399 cÚ¡ * 
	gou‹r_£p
 = "";

400 ià(!
	g»suÉ
) {

401 
	gou‹r_£p
 = "\nand ";

403 
size_t
 
	gei
 = 0;ƒ˜< 
	g–em’t_m©ched
.
size
(); ++ei) {

404 ià(
	g–em’t_m©ched
[
ei
]) ;

405 
	g»suÉ
 = 
çl£
;

406 ià(
	gli¡’”
->
IsIÁ”e¡ed
()) {

407 *
	gli¡’”
 << 
	gou‹r_£p
 << 
	g£p
 << "–em’ˆ#" << 
	gei
 << ": "

408 << 
	g–em’t_´štouts
[
ei
];

409 
	g£p
 = ",\n";

410 
	gou‹r_£p
 = "";

414  
	g»suÉ
;

417 
boŞ
 
	gUnÜd”edEËm’tsA»M©ch”Im¶Ba£
::
FšdPaœšg
(

418 cÚ¡ 
M©chM©rix
& 
m©rix
, 
M©chResuÉLi¡’”
* 
li¡’”
) const {

419 
EËm’tM©ch”Paœs
 
	gm©ches
 = 
FšdMaxB¬t™eM©chšg
(
m©rix
);

421 
size_t
 
	gmax_æow
 = 
m©ches
.
size
();

422 ià((
m©ch_æags
(è& 
	gUnÜd”edM©ch”Requœe
::
Su³r£t
) &&

423 
max_æow
 < 
m©rix
.
RhsSize
()) {

424 ià(
li¡’”
->
IsIÁ”e¡ed
()) {

425 *
li¡’”
 << "where‚o…ermutation ofheƒlements can satisfy‡ll "

427 << 
max_æow
 << " oà" << 
m©rix
.
RhsSize
()

429 
LogEËm’tM©ch”PaœVec
(
m©ches
, 
li¡’”
->
¡»am
());

431  
	gçl£
;

433 ià((
m©ch_æags
(è& 
	gUnÜd”edM©ch”Requœe
::
Sub£t
) &&

434 
max_æow
 < 
m©rix
.
LhsSize
()) {

435 ià(
li¡’”
->
IsIÁ”e¡ed
()) {

436 *
li¡’”


438 << 
max_æow
 << " oà" << 
m©rix
.
RhsSize
()

440 
LogEËm’tM©ch”PaœVec
(
m©ches
, 
li¡’”
->
¡»am
());

442  
	gçl£
;

445 ià(
	gm©ches
.
size
() > 1) {

446 ià(
	gli¡’”
->
IsIÁ”e¡ed
()) {

447 cÚ¡ * 
	g£p
 = "where:\n";

448 
size_t
 
	gmi
 = 0; m˜< 
	gm©ches
.
size
(); ++mi) {

449 *
	gli¡’”
 << 
	g£p
 << " -ƒËm’ˆ#" << 
	gm©ches
[
mi
].
	gfœ¡


450 << " i m©ched by m©ch” #" << 
	gm©ches
[
mi
].
	g£cÚd
;

451 
	g£p
 = ",\n";

455  
	gŒue
;

	@third_party/googletest/googlemock/src/gmock-spec-builders.cc

36 
	~"gmock/gmock-¥ec-bud”s.h
"

38 
	~<¡dlib.h
>

40 
	~<io¡»am
>

41 
	~<m­
>

42 
	~<memÜy
>

43 
	~<£t
>

44 
	~<¡ršg
>

45 
	~<veùÜ
>

47 
	~"gmock/gmock.h
"

48 
	~"g‹¡/g‹¡.h
"

49 
	~"g‹¡/š‹º®/g‹¡-pÜt.h
"

51 #ià
GTEST_OS_CYGWIN
 || 
GTEST_OS_LINUX
 || 
GTEST_OS_MAC


52 
	~<uni¡d.h
>

57 #ifdeà
_MSC_VER


58 #ià
_MSC_VER
 == 1900

59 #´agm¨
w¬nšg
(
push
)

60 #´agm¨
w¬nšg
(
di§bË
:4800)

64 
Çme¥aû
 
	g‹¡šg
 {

65 
Çme¥aû
 
	gš‹º®
 {

69 
GTEST_API_
 
GTEST_DEFINE_STATIC_MUTEX_
(
g_gmock_mu‹x
);

72 
GTEST_API_
 
LogW™hLoÿtiÚ
(
‹¡šg
::
š‹º®
::
LogSev”™y
 
£v”™y
,

73 cÚ¡ * 
fe
, 
lše
,

74 cÚ¡ 
¡d
::
¡ršg
& 
mes§ge
) {

75 ::
¡d
::
o¡ršg¡»am
 
s
;

76 
	gs
 << 
	gš‹º®
::
FÜm©FeLoÿtiÚ
(
fe
, 
lše
è<< " " << 
	gmes§ge


77 << ::
¡d
::
’dl
;

78 
Log
(
£v”™y
, 
s
.
¡r
(), 0);

82 
	gEx³ù©iÚBa£
::
Ex³ù©iÚBa£
(cÚ¡ * 
a_fe
, 
a_lše
,

83 cÚ¡ 
¡d
::
¡ršg
& 
a_sourû_‹xt
)

84 : 
fe_
(
a_fe
),

85 
lše_
(
a_lše
),

86 
sourû_‹xt_
(
a_sourû_‹xt
),

87 
ÿrdš®™y_¥ecif›d_
(
çl£
),

88 
ÿrdš®™y_
(
Exaùly
(1)),

89 
ÿÎ_couÁ_
(0),

90 
»tœed_
(
çl£
),

91 
exŒa_m©ch”_¥ecif›d_
(
çl£
),

92 
»³©ed_aùiÚ_¥ecif›d_
(
çl£
),

93 
»tœes_Ú_§tu¿tiÚ_
(
çl£
),

94 
Ï¡_şau£_
(
kNÚe
),

95 
aùiÚ_couÁ_checked_
(
çl£
) {}

98 
	gEx³ù©iÚBa£
::~
Ex³ù©iÚBa£
() {}

102 
Ex³ù©iÚBa£
::
S³cifyC¬dš®™y
(cÚ¡ 
C¬dš®™y
& 
a_ÿrdš®™y
) {

103 
ÿrdš®™y_¥ecif›d_
 = 
Œue
;

104 
	gÿrdš®™y_
 = 
a_ÿrdš®™y
;

108 
	gEx³ù©iÚBa£
::
R‘œeAÎP»Requis™es
()

109 
GTEST_EXCLUSIVE_LOCK_REQUIRED_
(
g_gmock_mu‹x
) {

110 ià(
is_»tœed
()) {

116 ::
¡d
::
veùÜ
<
Ex³ù©iÚBa£
*> 
ex³ù©iÚs
(1, 
this
);

117 !
	gex³ù©iÚs
.
em±y
()) {

118 
Ex³ù©iÚBa£
* 
	gexp
 = 
ex³ù©iÚs
.
back
();

119 
	gex³ù©iÚs
.
pİ_back
();

121 
	gEx³ù©iÚS‘
::
cÚ¡_™”©Ü
 
™
 =

122 
exp
->
immedŸ‹_´”equis™es_
.
begš
();

123 
	g™
 !ğ
exp
->
immedŸ‹_´”equis™es_
.
’d
(); ++it) {

124 
Ex³ù©iÚBa£
* 
	gÃxt
 = 
™
->
ex³ù©iÚ_ba£
().
g‘
();

125 ià(!
	gÃxt
->
is_»tœed
()) {

126 
	gÃxt
->
R‘œe
();

127 
	gex³ù©iÚs
.
push_back
(
Ãxt
);

135 
boŞ
 
	gEx³ù©iÚBa£
::
AÎP»»quis™esA»S©isf›d
() const

136 
GTEST_EXCLUSIVE_LOCK_REQUIRED_
(
g_gmock_mu‹x
) {

137 
g_gmock_mu‹x
.
As£¹H–d
();

138 ::
¡d
::
veùÜ
<cÚ¡ 
Ex³ù©iÚBa£
*> 
ex³ù©iÚs
(1, 
this
);

139 !
	gex³ù©iÚs
.
em±y
()) {

140 cÚ¡ 
Ex³ù©iÚBa£
* 
	gexp
 = 
ex³ù©iÚs
.
back
();

141 
	gex³ù©iÚs
.
pİ_back
();

143 
	gEx³ù©iÚS‘
::
cÚ¡_™”©Ü
 
™
 =

144 
exp
->
immedŸ‹_´”equis™es_
.
begš
();

145 
	g™
 !ğ
exp
->
immedŸ‹_´”equis™es_
.
’d
(); ++it) {

146 cÚ¡ 
Ex³ù©iÚBa£
* 
	gÃxt
 = 
™
->
ex³ù©iÚ_ba£
().
g‘
();

147 ià(!
	gÃxt
->
IsS©isf›d
()è 
	gçl£
;

148 
	gex³ù©iÚs
.
push_back
(
Ãxt
);

151  
	gŒue
;

155 
	gEx³ù©iÚBa£
::
FšdUn§tisf›dP»»quis™es
(
Ex³ù©iÚS‘
* 
»suÉ
) const

156 
GTEST_EXCLUSIVE_LOCK_REQUIRED_
(
g_gmock_mu‹x
) {

157 
g_gmock_mu‹x
.
As£¹H–d
();

158 ::
¡d
::
veùÜ
<cÚ¡ 
Ex³ù©iÚBa£
*> 
ex³ù©iÚs
(1, 
this
);

159 !
	gex³ù©iÚs
.
em±y
()) {

160 cÚ¡ 
Ex³ù©iÚBa£
* 
	gexp
 = 
ex³ù©iÚs
.
back
();

161 
	gex³ù©iÚs
.
pİ_back
();

163 
	gEx³ù©iÚS‘
::
cÚ¡_™”©Ü
 
™
 =

164 
exp
->
immedŸ‹_´”equis™es_
.
begš
();

165 
	g™
 !ğ
exp
->
immedŸ‹_´”equis™es_
.
’d
(); ++it) {

166 cÚ¡ 
Ex³ù©iÚBa£
* 
	gÃxt
 = 
™
->
ex³ù©iÚ_ba£
().
g‘
();

168 ià(
	gÃxt
->
IsS©isf›d
()) {

171 ià(
	gÃxt
->
	gÿÎ_couÁ_
 == 0) {

172 
ex³ù©iÚs
.
push_back
(
Ãxt
);

178 *
	g»suÉ
 +ğ*
™
;

186 
	gEx³ù©iÚBa£
::
DesüibeC®lCouÁTo
(::
¡d
::
o¡»am
* 
os
) const

187 
GTEST_EXCLUSIVE_LOCK_REQUIRED_
(
g_gmock_mu‹x
) {

188 
g_gmock_mu‹x
.
As£¹H–d
();

191 *
	gos
 << " Expected:o be ";

192 
ÿrdš®™y
().
DesüibeTo
(
os
);

193 *
	gos
 << "\n Actual: ";

194 
	gC¬dš®™y
::
DesüibeAùu®C®lCouÁTo
(
ÿÎ_couÁ
(), 
os
);

198 *
	gos
 << " - " << (
IsOv”S©u¿‹d
() ? "over-saturated" :

199 
IsS©u¿‹d
() ? "saturated" :

200 
IsS©isf›d
() ? "satisfied" : "unsatisfied")

202 << (
is_»tœed
() ? "retired" : "active");

209 
	gEx³ù©iÚBa£
::
CheckAùiÚCouÁIfNÙDÚe
() const

210 
GTEST_LOCK_EXCLUDED_
(
mu‹x_
) {

211 
boŞ
 
should_check
 = 
çl£
;

213 
Mu‹xLock
 
l
(&
mu‹x_
);

214 ià(!
	gaùiÚ_couÁ_checked_
) {

215 
	gaùiÚ_couÁ_checked_
 = 
Œue
;

216 
	gshould_check
 = 
Œue
;

220 ià(
	gshould_check
) {

221 ià(!
	gÿrdš®™y_¥ecif›d_
) {

228 cÚ¡ 
	gaùiÚ_couÁ
 = 
¡©ic_ÿ¡
<>(
uÁy³d_aùiÚs_
.
size
());

229 cÚ¡ 
	guµ”_bound
 = 
ÿrdš®™y
().
CÚ£rv©iveUµ”Bound
();

230 cÚ¡ 
	glow”_bound
 = 
ÿrdš®™y
().
CÚ£rv©iveLow”Bound
();

231 
boŞ
 
	gtoo_mªy
;

233 ià(
	gaùiÚ_couÁ
 > 
	guµ”_bound
 ||

234 (
	gaùiÚ_couÁ
 =ğ
uµ”_bound
 && 
»³©ed_aùiÚ_¥ecif›d_
)) {

235 
too_mªy
 = 
Œue
;

236 } ià(0 < 
	gaùiÚ_couÁ
 &&‡ùiÚ_couÁ < 
	glow”_bound
 &&

237 !
	g»³©ed_aùiÚ_¥ecif›d_
) {

238 
	gtoo_mªy
 = 
çl£
;

243 ::
¡d
::
¡ršg¡»am
 
ss
;

244 
DesüibeLoÿtiÚTo
(&
ss
);

245 
	gss
 << "ToØ" << (
	gtoo_mªy
 ? "many" : "few")

246 << "‡ùiÚ ¥ecif›d iÀ" << 
sourû_‹xt
() << "...\n"

248 
ÿrdš®™y
().
DesüibeTo
(&
ss
);

249 
	gss
 << ", buˆha " << (
	gtoo_mªy
 ? "" : "only ")

250 << 
aùiÚ_couÁ
 << " WillOnce()"

251 << (
aùiÚ_couÁ
 == 1 ? "" : "s");

252 ià(
	g»³©ed_aùiÚ_¥ecif›d_
) {

253 
	gss
 << "‡nd‡ WillRepeatedly()";

255 
	gss
 << ".";

256 
Log
(
kW¬nšg
, 
ss
.
¡r
(), -1);

261 
	gEx³ù©iÚBa£
::
UÁy³dTimes
(cÚ¡ 
C¬dš®™y
& 
a_ÿrdš®™y
) {

262 ià(
Ï¡_şau£_
 =ğ
kTimes
) {

263 
Ex³ùS³cPrİ”ty
(
çl£
,

267 
Ex³ùS³cPrİ”ty
(
Ï¡_şau£_
 < 
kTimes
,

272 
	gÏ¡_şau£_
 = 
kTimes
;

274 
S³cifyC¬dš®™y
(
a_ÿrdš®™y
);

279 
GTEST_API_
 
	gTh»adLoÿl
<
	gSequ’û
*> 
	gg_gmock_im¶ic™_£qu’û
;

283 
R•ÜtUnš‹»¡šgC®l
(
C®lR—ùiÚ
 
»aùiÚ
, cÚ¡ 
¡d
::
¡ršg
& 
msg
) {

285 cÚ¡ 
¡ack_äames_to_sk
 =

286 
GMOCK_FLAG
(
v”bo£
è=ğ
kInfoV”bos™y
 ? 3 : -1;

287 
	g»aùiÚ
) {

288 
	gkAÎow
:

289 
Log
(
kInfo
, 
msg
, 
¡ack_äames_to_sk
);

291 
	gkW¬n
:

292 
Log
(
kW¬nšg
,

293 
msg
 +

301 
¡ack_äames_to_sk
);

304 
Ex³ù
(
çl£
, 
nuÎ±r
, -1, 
msg
);

308 
	gUÁy³dFunùiÚMock”Ba£
::
UÁy³dFunùiÚMock”Ba£
()

309 : 
mock_obj_
(
nuÎ±r
), 
Çme_
("") {}

311 
	gUÁy³dFunùiÚMock”Ba£
::~
UÁy³dFunùiÚMock”Ba£
() {}

317 
UÁy³dFunùiÚMock”Ba£
::
Regi¡”OwÃr
(cÚ¡ * 
mock_obj
)

318 
GTEST_LOCK_EXCLUDED_
(
g_gmock_mu‹x
) {

320 
Mu‹xLock
 
l
(&
g_gmock_mu‹x
);

321 
	gmock_obj_
 = 
mock_obj
;

323 
	gMock
::
Regi¡”
(
mock_obj
, 
this
);

329 
	gUÁy³dFunùiÚMock”Ba£
::
S‘OwÃrAndName
(cÚ¡ * 
mock_obj
,

330 cÚ¡ * 
Çme
)

331 
GTEST_LOCK_EXCLUDED_
(
g_gmock_mu‹x
) {

334 
Mu‹xLock
 
l
(&
g_gmock_mu‹x
);

335 
	gmock_obj_
 = 
mock_obj
;

336 
	gÇme_
 = 
Çme
;

341 cÚ¡ * 
	gUÁy³dFunùiÚMock”Ba£
::
MockObjeù
() const

342 
GTEST_LOCK_EXCLUDED_
(
g_gmock_mu‹x
) {

343 cÚ¡ * 
mock_obj
;

347 
Mu‹xLock
 
l
(&
g_gmock_mu‹x
);

348 
As£¹
(
mock_obj_
 !ğ
nuÎ±r
, 
__FILE__
, 
__LINE__
,

351 
	gmock_obj
 = 
mock_obj_
;

353  
	gmock_obj
;

358 cÚ¡ * 
	gUÁy³dFunùiÚMock”Ba£
::
Name
() const

359 
GTEST_LOCK_EXCLUDED_
(
g_gmock_mu‹x
) {

360 cÚ¡ * 
Çme
;

364 
Mu‹xLock
 
l
(&
g_gmock_mu‹x
);

365 
As£¹
(
Çme_
 !ğ
nuÎ±r
, 
__FILE__
, 
__LINE__
,

368 
	gÇme
 = 
Çme_
;

370  
	gÇme
;

376 
UÁy³dAùiÚResuÉHŞd”Ba£
* 
	gUÁy³dFunùiÚMock”Ba£
::
UÁy³dInvokeW™h
(

377 * cÚ¡ 
uÁy³d_¬gs
è
GTEST_LOCK_EXCLUDED_
(
g_gmock_mu‹x
) {

380 ià(
uÁy³d_ex³ù©iÚs_
.
size
() == 0) {

388 cÚ¡ 
C®lR—ùiÚ
 
»aùiÚ
 =

389 
Mock
::
G‘R—ùiÚOnUnš‹»¡šgC®ls
(
MockObjeù
());

394 cÚ¡ 
boŞ
 
	gÃed_to_»pÜt_unš‹»¡šg_ÿÎ
 =

397 
»aùiÚ
 =ğ
kAÎow
 ? 
LogIsVisibË
(
kInfo
) :

400 
»aùiÚ
 =ğ
kW¬n


401 ? 
LogIsVisibË
(
kW¬nšg
)

405 
Œue
;

407 ià(!
	gÃed_to_»pÜt_unš‹»¡šg_ÿÎ
) {

409  
	gthis
->
UÁy³dP”fÜmDeçuÉAùiÚ
(

410 
uÁy³d_¬gs
, "FunùiÚ c®l: " + 
¡d
::
¡ršg
(
Name
()));

414 ::
¡d
::
¡ršg¡»am
 
ss
;

415 
	gthis
->
UÁy³dDesüibeUnš‹»¡šgC®l
(
uÁy³d_¬gs
, &
ss
);

418 
UÁy³dAùiÚResuÉHŞd”Ba£
* cÚ¡ 
	g»suÉ
 =

419 
this
->
UÁy³dP”fÜmDeçuÉAùiÚ
(
uÁy³d_¬gs
, 
ss
.
¡r
());

422 ià(
	g»suÉ
 !ğ
nuÎ±r
è
»suÉ
->
PrštAsAùiÚResuÉ
(&
ss
);

424 
R•ÜtUnš‹»¡šgC®l
(
»aùiÚ
, 
ss
.
¡r
());

425  
	g»suÉ
;

428 
boŞ
 
	gis_exûssive
 = 
çl£
;

429 ::
¡d
::
¡ršg¡»am
 
ss
;

430 ::
¡d
::
¡ršg¡»am
 
why
;

431 ::
¡d
::
¡ršg¡»am
 
loc
;

432 cÚ¡ * 
	guÁy³d_aùiÚ
 = 
nuÎ±r
;

437 cÚ¡ 
Ex³ù©iÚBa£
* cÚ¡ 
	guÁy³d_ex³ù©iÚ
 =

438 
this
->
UÁy³dFšdM©chšgEx³ù©iÚ
(
uÁy³d_¬gs
, &
uÁy³d_aùiÚ
,

439 &
is_exûssive
, &
ss
, &
why
);

440 cÚ¡ 
boŞ
 
	gfound
 = 
uÁy³d_ex³ù©iÚ
 !ğ
nuÎ±r
;

446 cÚ¡ 
boŞ
 
	gÃed_to_»pÜt_ÿÎ
 =

447 !
found
 || 
is_exûssive
 || 
LogIsVisibË
(
kInfo
);

448 ià(!
	gÃed_to_»pÜt_ÿÎ
) {

450  
	guÁy³d_aùiÚ
 =ğ
nuÎ±r


451 ? 
this
->
UÁy³dP”fÜmDeçuÉAùiÚ
(
uÁy³d_¬gs
, "")

452 : 
this
->
UÁy³dP”fÜmAùiÚ
(
uÁy³d_aùiÚ
, 
uÁy³d_¬gs
);

455 
	gss
 << " FunùiÚ c®l: " << 
Name
();

456 
	gthis
->
UÁy³dPrštArgs
(
uÁy³d_¬gs
, &
ss
);

460 ià(
	gfound
 && !
	gis_exûssive
) {

461 
	guÁy³d_ex³ù©iÚ
->
DesüibeLoÿtiÚTo
(&
loc
);

464 
UÁy³dAùiÚResuÉHŞd”Ba£
* 
	g»suÉ
 = 
nuÎ±r
;

466 autØ
	g³rfÜm_aùiÚ
 = [&] {

467  
uÁy³d_aùiÚ
 =ğ
nuÎ±r


468 ? 
this
->
UÁy³dP”fÜmDeçuÉAùiÚ
(
uÁy³d_¬gs
, 
ss
.
¡r
())

469 : 
this
->
UÁy³dP”fÜmAùiÚ
(
uÁy³d_aùiÚ
, 
uÁy³d_¬gs
);

471 autØ
	ghªdË_çu»s
 = [&] {

472 
ss
 << "\n" << 
why
.
¡r
();

474 ià(!
	gfound
) {

476 
Ex³ù
(
çl£
, 
nuÎ±r
, -1, 
ss
.
¡r
());

477 } ià(
	gis_exûssive
) {

479 
Ex³ù
(
çl£
, 
uÁy³d_ex³ù©iÚ
->
fe
(), uÁy³d_ex³ù©iÚ->
lše
(),

480 
ss
.
¡r
());

484 
Log
(
kInfo
, 
loc
.
¡r
(è+ 
ss
.str(), 2);

487 #ià
GTEST_HAS_EXCEPTIONS


488 
	gŒy
 {

489 
	g»suÉ
 = 
³rfÜm_aùiÚ
();

490 } 
ÿtch
 (...) {

491 
hªdË_çu»s
();

492 
	gthrow
;

495 
	g»suÉ
 = 
³rfÜm_aùiÚ
();

498 ià(
	g»suÉ
 !ğ
nuÎ±r
è
»suÉ
->
PrštAsAùiÚResuÉ
(&
ss
);

499 
hªdË_çu»s
();

500  
	g»suÉ
;

505 
Ex³ù©iÚ
 
	gUÁy³dFunùiÚMock”Ba£
::
G‘HªdËOf
(
Ex³ù©iÚBa£
* 
exp
) {

508 
UÁy³dEx³ù©iÚs
::
cÚ¡_™”©Ü
 
™
 =

509 
uÁy³d_ex³ù©iÚs_
.
begš
();

510 
	g™
 !ğ
uÁy³d_ex³ù©iÚs_
.
’d
(); ++it) {

511 ià(
	g™
->
g‘
(è=ğ
exp
) {

512  
Ex³ù©iÚ
(*
™
);

516 
As£¹
(
çl£
, 
__FILE__
, 
__LINE__
, "Cannot findƒxpectation.");

517  
Ex³ù©iÚ
();

525 
boŞ
 
	gUÁy³dFunùiÚMock”Ba£
::
V”ifyAndCË¬Ex³ù©iÚsLocked
()

526 
GTEST_EXCLUSIVE_LOCK_REQUIRED_
(
g_gmock_mu‹x
) {

527 
g_gmock_mu‹x
.
As£¹H–d
();

528 
boŞ
 
	gex³ù©iÚs_m‘
 = 
Œue
;

529 
	gUÁy³dEx³ù©iÚs
::
cÚ¡_™”©Ü
 
™
 =

530 
uÁy³d_ex³ù©iÚs_
.
begš
();

531 
	g™
 !ğ
uÁy³d_ex³ù©iÚs_
.
’d
(); ++it) {

532 
Ex³ù©iÚBa£
* cÚ¡ 
	guÁy³d_ex³ù©iÚ
 = 
™
->
g‘
();

533 ià(
	guÁy³d_ex³ù©iÚ
->
IsOv”S©u¿‹d
()) {

537 
	gex³ù©iÚs_m‘
 = 
çl£
;

538 } ià(!
	guÁy³d_ex³ù©iÚ
->
IsS©isf›d
()) {

539 
	gex³ù©iÚs_m‘
 = 
çl£
;

540 ::
¡d
::
¡ršg¡»am
 
ss
;

541 
	gss
 << "Actual function call count doesn't match "

542 << 
	guÁy³d_ex³ù©iÚ
->
sourû_‹xt
() << "...\n";

546 
	guÁy³d_ex³ù©iÚ
->
MaybeDesüibeExŒaM©ch”To
(&
ss
);

547 
	guÁy³d_ex³ù©iÚ
->
DesüibeC®lCouÁTo
(&
ss
);

548 
Ex³ù
(
çl£
, 
uÁy³d_ex³ù©iÚ
->
fe
(),

549 
uÁy³d_ex³ù©iÚ
->
lše
(), 
ss
.
¡r
());

560 
UÁy³dEx³ù©iÚs
 
	gex³ù©iÚs_to_d–‘e
;

561 
	guÁy³d_ex³ù©iÚs_
.
sw­
(
ex³ù©iÚs_to_d–‘e
);

563 
	gg_gmock_mu‹x
.
UÆock
();

564 
	gex³ù©iÚs_to_d–‘e
.
ş—r
();

565 
	gg_gmock_mu‹x
.
Lock
();

567  
	gex³ù©iÚs_m‘
;

570 
C®lR—ùiÚ
 
štToC®lR—ùiÚ
(
mock_behaviÜ
) {

571 ià(
	gmock_behaviÜ
 >ğ
kAÎow
 && 
mock_behaviÜ
 <ğ
kFa
) {

572  
¡©ic_ÿ¡
<
š‹º®
::
C®lR—ùiÚ
>(
mock_behaviÜ
);

574  
	gkW¬n
;

581 
	gÇme¥aû
 {

583 
	g¡d
::
	t£t
<
	tš‹º®
::
	tUÁy³dFunùiÚMock”Ba£
*> 
	tFunùiÚMock”s
;

588 
	sMockObjeùS‹
 {

589 
MockObjeùS‹
()

590 : 
fœ¡_u£d_fe
(
nuÎ±r
), 
fœ¡_u£d_lše
(-1), 
ËakabË
(
çl£
) {}

594 cÚ¡ * 
	gfœ¡_u£d_fe
;

595 
	gfœ¡_u£d_lše
;

596 ::
¡d
::
¡ršg
 
fœ¡_u£d_‹¡_su™e
;

597 ::
¡d
::
¡ršg
 
fœ¡_u£d_‹¡
;

598 
boŞ
 
	gËakabË
;

599 
FunùiÚMock”s
 
	gfunùiÚ_mock”s
;

606 şas 
	cMockObjeùRegi¡ry
 {

607 
	gpublic
:

609 
¡d
::
	tm­
<cÚ¡ *, 
	tMockObjeùS‹
> 
	tS‹M­
;

615 ~
MockObjeùRegi¡ry
() {

616 ià(!
GMOCK_FLAG
(
ÿtch_Ëaked_mocks
))

619 
	gËaked_couÁ
 = 0;

620 
	gS‹M­
::
cÚ¡_™”©Ü
 
™
 = 
¡©es_
.
begš
(); 
	g™
 !ğ¡©es_.
’d
();

621 ++
	g™
) {

622 ià(
	g™
->
	g£cÚd
.
	gËakabË
)

627 
	g¡d
::
cout
 << "\n";

628 cÚ¡ 
	gMockObjeùS‹
& 
	g¡©e
 = 
™
->
£cÚd
;

629 
	g¡d
::
cout
 << 
š‹º®
::
FÜm©FeLoÿtiÚ
(
¡©e
.
fœ¡_u£d_fe
,

630 
¡©e
.
fœ¡_u£d_lše
);

631 
	g¡d
::
cout
 << " ERROR:his mock object";

632 ià(
	g¡©e
.
	gfœ¡_u£d_‹¡
 != "") {

633 
¡d
::
cout
 << " (u£d iÀ‹¡ " << 
¡©e
.
fœ¡_u£d_‹¡_su™e
 << "."

634 << 
¡©e
.
fœ¡_u£d_‹¡
 << ")";

636 
	g¡d
::
cout
 << " should be deleted but‚ever is. Its‡ddress is @"

637 << 
™
->
fœ¡
 << ".";

638 
	gËaked_couÁ
++;

640 ià(
	gËaked_couÁ
 > 0) {

641 
	g¡d
::
cout
 << "\nERROR: " << 
Ëaked_couÁ
 << "†eaked mock "

642 << (
Ëaked_couÁ
 == 1 ? "object" : "objects")

650 
	g¡d
::
cout
.
æush
();

651 ::
¡d
::
û¼
.
æush
();

655 
_ex™
(1);

660 
	gS‹M­
& 
¡©es
(è{  
	g¡©es_
; }

662 
	g´iv©e
:

663 
S‹M­
 
¡©es_
;

667 
MockObjeùRegi¡ry
 
	gg_mock_objeù_»gi¡ry
;

671 
	g¡d
::
m­
<cÚ¡ *, 
	gš‹º®
::
C®lR—ùiÚ
> 
g_unš‹»¡šg_ÿÎ_»aùiÚ
;

675 
S‘R—ùiÚOnUnš‹»¡šgC®ls
(cÚ¡ * 
mock_obj
,

676 
š‹º®
::
C®lR—ùiÚ
 
»aùiÚ
)

677 
GTEST_LOCK_EXCLUDED_
(
š‹º®
::
g_gmock_mu‹x
) {

678 
š‹º®
::
Mu‹xLock
 
l
(&š‹º®::
g_gmock_mu‹x
);

679 
	gg_unš‹»¡šg_ÿÎ_»aùiÚ
[
mock_obj
] = 
»aùiÚ
;

686 
	gMock
::
	$AÎowUnš‹»¡šgC®ls
(cÚ¡ * 
mock_obj
)

687 
	$GTEST_LOCK_EXCLUDED_
(
š‹º®
::
g_gmock_mu‹x
) {

688 
	`S‘R—ùiÚOnUnš‹»¡šgC®ls
(
mock_obj
, 
š‹º®
::
kAÎow
);

689 
	}
}

693 
	gMock
::
	$W¬nUnš‹»¡šgC®ls
(cÚ¡ * 
mock_obj
)

694 
	$GTEST_LOCK_EXCLUDED_
(
š‹º®
::
g_gmock_mu‹x
) {

695 
	`S‘R—ùiÚOnUnš‹»¡šgC®ls
(
mock_obj
, 
š‹º®
::
kW¬n
);

696 
	}
}

700 
	gMock
::
	$FaUnš‹»¡šgC®ls
(cÚ¡ * 
mock_obj
)

701 
	$GTEST_LOCK_EXCLUDED_
(
š‹º®
::
g_gmock_mu‹x
) {

702 
	`S‘R—ùiÚOnUnš‹»¡šgC®ls
(
mock_obj
, 
š‹º®
::
kFa
);

703 
	}
}

707 
	gMock
::
	$UÄegi¡”C®lR—ùiÚ
(cÚ¡ * 
mock_obj
)

708 
	$GTEST_LOCK_EXCLUDED_
(
š‹º®
::
g_gmock_mu‹x
) {

709 
š‹º®
::
Mu‹xLock
 
	`l
(&š‹º®::
g_gmock_mu‹x
);

710 
g_unš‹»¡šg_ÿÎ_»aùiÚ
.
	`”a£
(
mock_obj
);

711 
	}
}

715 
	gš‹º®
::
C®lR—ùiÚ
 
Mock
::
	$G‘R—ùiÚOnUnš‹»¡šgC®ls
(

716 cÚ¡ * 
mock_obj
)

717 
	$GTEST_LOCK_EXCLUDED_
(
š‹º®
::
g_gmock_mu‹x
) {

718 
š‹º®
::
Mu‹xLock
 
	`l
(&š‹º®::
g_gmock_mu‹x
);

719  (
g_unš‹»¡šg_ÿÎ_»aùiÚ
.
	`couÁ
(
mock_obj
) == 0) ?

720 
š‹º®
::
	`štToC®lR—ùiÚ
(
	`GMOCK_FLAG
(
deçuÉ_mock_behaviÜ
)) :

721 
g_unš‹»¡šg_ÿÎ_»aùiÚ
[
mock_obj
];

722 
	}
}

726 
	gMock
::
	$AÎowL—k
(cÚ¡ * 
mock_obj
)

727 
	$GTEST_LOCK_EXCLUDED_
(
š‹º®
::
g_gmock_mu‹x
) {

728 
š‹º®
::
Mu‹xLock
 
	`l
(&š‹º®::
g_gmock_mu‹x
);

729 
g_mock_objeù_»gi¡ry
.
	`¡©es
()[
mock_obj
].
ËakabË
 = 
Œue
;

730 
	}
}

735 
boŞ
 
	gMock
::
	$V”ifyAndCË¬Ex³ù©iÚs
(* 
mock_obj
)

736 
	$GTEST_LOCK_EXCLUDED_
(
š‹º®
::
g_gmock_mu‹x
) {

737 
š‹º®
::
Mu‹xLock
 
	`l
(&š‹º®::
g_gmock_mu‹x
);

738  
	`V”ifyAndCË¬Ex³ù©iÚsLocked
(
mock_obj
);

739 
	}
}

744 
boŞ
 
	gMock
::
	$V”ifyAndCË¬
(* 
mock_obj
)

745 
	$GTEST_LOCK_EXCLUDED_
(
š‹º®
::
g_gmock_mu‹x
) {

746 
š‹º®
::
Mu‹xLock
 
	`l
(&š‹º®::
g_gmock_mu‹x
);

747 
	`CË¬DeçuÉAùiÚsLocked
(
mock_obj
);

748  
	`V”ifyAndCË¬Ex³ù©iÚsLocked
(
mock_obj
);

749 
	}
}

754 
boŞ
 
	gMock
::
	$V”ifyAndCË¬Ex³ù©iÚsLocked
(* 
mock_obj
)

755 
	$GTEST_EXCLUSIVE_LOCK_REQUIRED_
(
š‹º®
::
g_gmock_mu‹x
) {

756 
š‹º®
::
g_gmock_mu‹x
.
	`As£¹H–d
();

757 ià(
g_mock_objeù_»gi¡ry
.
	`¡©es
().
	`couÁ
(
mock_obj
) == 0) {

759  
Œue
;

764 
boŞ
 
ex³ù©iÚs_m‘
 = 
Œue
;

765 
FunùiÚMock”s
& 
mock”s
 =

766 
g_mock_objeù_»gi¡ry
.
	`¡©es
()[
mock_obj
].
funùiÚ_mock”s
;

767 
FunùiÚMock”s
::
cÚ¡_™”©Ü
 
™
 = 
mock”s
.
	`begš
();

768 
™
 !ğ
mock”s
.
	`’d
(); ++it) {

769 ià(!(*
™
)->
	`V”ifyAndCË¬Ex³ù©iÚsLocked
()) {

770 
ex³ù©iÚs_m‘
 = 
çl£
;

776  
ex³ù©iÚs_m‘
;

777 
	}
}

779 
boŞ
 
	gMock
::
	$IsNaggy
(* 
mock_obj
)

780 
	$GTEST_LOCK_EXCLUDED_
(
š‹º®
::
g_gmock_mu‹x
) {

781  
Mock
::
	`G‘R—ùiÚOnUnš‹»¡šgC®ls
(
mock_obj
è=ğ
š‹º®
::
kW¬n
;

782 
	}
}

783 
boŞ
 
	gMock
::
	$IsNiû
(* 
mock_obj
)

784 
	$GTEST_LOCK_EXCLUDED_
(
š‹º®
::
g_gmock_mu‹x
) {

785  
Mock
::
	`G‘R—ùiÚOnUnš‹»¡šgC®ls
(
mock_obj
è=ğ
š‹º®
::
kAÎow
;

786 
	}
}

787 
boŞ
 
	gMock
::
	$IsSŒiù
(* 
mock_obj
)

788 
	$GTEST_LOCK_EXCLUDED_
(
š‹º®
::
g_gmock_mu‹x
) {

789  
Mock
::
	`G‘R—ùiÚOnUnš‹»¡šgC®ls
(
mock_obj
è=ğ
š‹º®
::
kFa
;

790 
	}
}

793 
	gMock
::
	$Regi¡”
(cÚ¡ * 
mock_obj
,

794 
š‹º®
::
UÁy³dFunùiÚMock”Ba£
* 
mock”
)

795 
	$GTEST_LOCK_EXCLUDED_
(
š‹º®
::
g_gmock_mu‹x
) {

796 
š‹º®
::
Mu‹xLock
 
	`l
(&š‹º®::
g_gmock_mu‹x
);

797 
g_mock_objeù_»gi¡ry
.
	`¡©es
()[
mock_obj
].
funùiÚ_mock”s
.
	`š£¹
(
mock”
);

798 
	}
}

803 
	gMock
::
	$Regi¡”U£ByOnC®lOrEx³ùC®l
(cÚ¡ * 
mock_obj
,

804 cÚ¡ * 
fe
, 
lše
)

805 
	$GTEST_LOCK_EXCLUDED_
(
š‹º®
::
g_gmock_mu‹x
) {

806 
š‹º®
::
Mu‹xLock
 
	`l
(&š‹º®::
g_gmock_mu‹x
);

807 
MockObjeùS‹
& 
¡©e
 = 
g_mock_objeù_»gi¡ry
.
	`¡©es
()[
mock_obj
];

808 ià(
¡©e
.
fœ¡_u£d_fe
 =ğ
nuÎ±r
) {

809 
¡©e
.
fœ¡_u£d_fe
 = 
fe
;

810 
¡©e
.
fœ¡_u£d_lše
 = 
lše
;

811 cÚ¡ 
Te¡Info
* cÚ¡ 
‹¡_šfo
 =

812 
Un™Te¡
::
	`G‘In¡ªû
()->
	`cu¼’t_‹¡_šfo
();

813 ià(
‹¡_šfo
 !ğ
nuÎ±r
) {

814 
¡©e
.
fœ¡_u£d_‹¡_su™e
 = 
‹¡_šfo
->
	`‹¡_su™e_Çme
();

815 
¡©e
.
fœ¡_u£d_‹¡
 = 
‹¡_šfo
->
	`Çme
();

818 
	}
}

824 
	gMock
::
	$UÄegi¡”Locked
(
š‹º®
::
UÁy³dFunùiÚMock”Ba£
* 
mock”
)

825 
	$GTEST_EXCLUSIVE_LOCK_REQUIRED_
(
š‹º®
::
g_gmock_mu‹x
) {

826 
š‹º®
::
g_gmock_mu‹x
.
	`As£¹H–d
();

827 
MockObjeùRegi¡ry
::
S‹M­
::
™”©Ü
 
™
 =

828 
g_mock_objeù_»gi¡ry
.
	`¡©es
().
	`begš
();

829 
™
 !ğ
g_mock_objeù_»gi¡ry
.
	`¡©es
().
	`’d
(); ++it) {

830 
FunùiÚMock”s
& 
mock”s
 = 
™
->
£cÚd
.
funùiÚ_mock”s
;

831 ià(
mock”s
.
	`”a£
(
mock”
) > 0) {

833 ià(
mock”s
.
	`em±y
()) {

834 
g_mock_objeù_»gi¡ry
.
	`¡©es
().
	`”a£
(
™
);

839 
	}
}

842 
	gMock
::
	$CË¬DeçuÉAùiÚsLocked
(* 
mock_obj
)

843 
	$GTEST_EXCLUSIVE_LOCK_REQUIRED_
(
š‹º®
::
g_gmock_mu‹x
) {

844 
š‹º®
::
g_gmock_mu‹x
.
	`As£¹H–d
();

846 ià(
g_mock_objeù_»gi¡ry
.
	`¡©es
().
	`couÁ
(
mock_obj
) == 0) {

853 
FunùiÚMock”s
& 
mock”s
 =

854 
g_mock_objeù_»gi¡ry
.
	`¡©es
()[
mock_obj
].
funùiÚ_mock”s
;

855 
FunùiÚMock”s
::
cÚ¡_™”©Ü
 
™
 = 
mock”s
.
	`begš
();

856 
™
 !ğ
mock”s
.
	`’d
(); ++it) {

857 (*
™
)->
	`CË¬DeçuÉAùiÚsLocked
();

862 
	}
}

864 
	gEx³ù©iÚ
::
	$Ex³ù©iÚ
(è{
	}
}

866 
Ex³ù©iÚ
::Expectation(

867 cÚ¡ 
¡d
::
sh¬ed_±r
<
š‹º®
::
Ex³ù©iÚBa£
>& 
ª_ex³ù©iÚ_ba£
)

868 : 
	$ex³ù©iÚ_ba£_
(
ª_ex³ù©iÚ_ba£
è{
	}
}

870 
Ex³ù©iÚ
::~
	$Ex³ù©iÚ
(è{
	}
}

873 
Sequ’û
::
	$AddEx³ù©iÚ
(cÚ¡ 
Ex³ù©iÚ
& 
ex³ù©iÚ
) const {

874 ià(*
Ï¡_ex³ù©iÚ_
 !ğ
ex³ù©iÚ
) {

875 ià(
Ï¡_ex³ù©iÚ_
->
	`ex³ù©iÚ_ba£
(è!ğ
nuÎ±r
) {

876 
ex³ù©iÚ
.
	`ex³ù©iÚ_ba£
()->
immedŸ‹_´”equis™es_


877 +ğ*
Ï¡_ex³ù©iÚ_
;

879 *
Ï¡_ex³ù©iÚ_
 = 
ex³ù©iÚ
;

881 
	}
}

884 
	gInSequ’û
::
	$InSequ’û
() {

885 ià(
š‹º®
::
g_gmock_im¶ic™_£qu’û
.
	`g‘
(è=ğ
nuÎ±r
) {

886 
š‹º®
::
g_gmock_im¶ic™_£qu’û
.
	`£t
(
Ãw
 
Sequ’û
);

887 
£qu’û_ü—‹d_
 = 
Œue
;

889 
£qu’û_ü—‹d_
 = 
çl£
;

891 
	}
}

895 
	gInSequ’û
::~
	$InSequ’û
() {

896 ià(
£qu’û_ü—‹d_
) {

897 
d–‘e
 
š‹º®
::
g_gmock_im¶ic™_£qu’û
.
	`g‘
();

898 
š‹º®
::
g_gmock_im¶ic™_£qu’û
.
	`£t
(
nuÎ±r
);

900 
	}
}

904 #ifdeà
_MSC_VER


905 #ià
_MSC_VER
 == 1900

906 #´agm¨
w¬nšg
(
pİ
)

	@third_party/googletest/googlemock/src/gmock.cc

31 
	~"gmock/gmock.h
"

32 
	~"gmock/š‹º®/gmock-pÜt.h
"

34 
Çme¥aû
 
	g‹¡šg
 {

36 
GMOCK_DEFINE_boŞ_
(
ÿtch_Ëaked_mocks
, 
Œue
,

40 
GMOCK_DEFINE_¡ršg_
(
v”bo£
, 
š‹º®
::
kW¬nšgV”bos™y
,

47 
GMOCK_DEFINE_št32_
(
deçuÉ_mock_behaviÜ
, 1,

54 
Çme¥aû
 
	gš‹º®
 {

61 cÚ¡ * 
P¬£GoogËMockFÏgV®ue
(cÚ¡ * 
¡r
,

62 cÚ¡ * 
æag
,

63 
boŞ
 
def_İtiÚ®
) {

65 ià(
	g¡r
 =ğ
nuÎ±r
 || 
æag
 ==‚ullptr) ‚ullptr;

68 cÚ¡ 
	g¡d
::
¡ršg
 
æag_¡r
 = 
¡d
::¡ršg("--gmock_"è+ 
æag
;

69 cÚ¡ 
size_t
 
	gæag_Ën
 = 
æag_¡r
.
Ëngth
();

70 ià(
¡ºcmp
(
¡r
, 
æag_¡r
.
c_¡r
(), 
æag_Ën
è!ğ0è 
nuÎ±r
;

73 cÚ¡ * 
	gæag_’d
 = 
¡r
 + 
æag_Ën
;

76 ià(
	gdef_İtiÚ®
 && (
	gæag_’d
[0] == '\0')) {

77  
æag_’d
;

83 ià(
	gæag_’d
[0] !ğ'='è 
nuÎ±r
;

86  
	gæag_’d
 + 1;

94 
boŞ
 
P¬£GoogËMockBoŞFÏg
(cÚ¡ * 
¡r
, cÚ¡ * 
æag
,

95 
boŞ
* 
v®ue
) {

97 cÚ¡ * cÚ¡ 
	gv®ue_¡r
 = 
P¬£GoogËMockFÏgV®ue
(
¡r
, 
æag
, 
Œue
);

100 ià(
	gv®ue_¡r
 =ğ
nuÎ±r
è 
çl£
;

103 *
	gv®ue
 = !(*
v®ue_¡r
 == '0' || *value_str == 'f' || *value_str == 'F');

104  
	gŒue
;

112 
	g‹m¶©e
 <
ty³Çme
 
	gSŒšg
>

113 
boŞ
 
P¬£GoogËMockSŒšgFÏg
(cÚ¡ * 
¡r
, cÚ¡ * 
æag
,

114 
SŒšg
* 
v®ue
) {

116 cÚ¡ * cÚ¡ 
	gv®ue_¡r
 = 
P¬£GoogËMockFÏgV®ue
(
¡r
, 
æag
, 
çl£
);

119 ià(
	gv®ue_¡r
 =ğ
nuÎ±r
è 
çl£
;

122 *
	gv®ue
 = 
v®ue_¡r
;

123  
	gŒue
;

126 
boŞ
 
P¬£GoogËMockIÁFÏg
(cÚ¡ * 
¡r
, cÚ¡ * 
æag
,

127 
št32_t
* 
v®ue
) {

129 cÚ¡ * cÚ¡ 
	gv®ue_¡r
 = 
P¬£GoogËMockFÏgV®ue
(
¡r
, 
æag
, 
Œue
);

132 ià(
	gv®ue_¡r
 =ğ
nuÎ±r
è 
çl£
;

135  
P¬£IÁ32
(
Mes§ge
(è<< "Thv®uoàæag --" << 
æag
,

136 
v®ue_¡r
, 
v®ue
);

143 
	g‹m¶©e
 <
ty³Çme
 
	gCh¬Ty³
>

144 
In™GoogËMockIm¶
(* 
¬gc
, 
Ch¬Ty³
** 
¬gv
) {

147 
In™GoogËTe¡
(
¬gc
, 
¬gv
);

148 ià(*
	g¬gc
 <= 0) ;

150 
	gi
 = 1; i !ğ*
¬gc
; i++) {

151 cÚ¡ 
	g¡d
::
¡ršg
 
¬g_¡ršg
 = 
SŒ—mabËToSŒšg
(
¬gv
[
i
]);

152 cÚ¡ * cÚ¡ 
	g¬g
 = 
¬g_¡ršg
.
c_¡r
();

155 ià(
P¬£GoogËMockBoŞFÏg
(
¬g
, "catch_leaked_mocks",

156 &
GMOCK_FLAG
(
ÿtch_Ëaked_mocks
)) ||

157 
P¬£GoogËMockSŒšgFÏg
(
¬g
, "v”bo£", &
GMOCK_FLAG
(
v”bo£
)) ||

158 
P¬£GoogËMockIÁFÏg
(
¬g
, "default_mock_behavior",

159 &
GMOCK_FLAG
(
deçuÉ_mock_behaviÜ
))) {

164 
	gj
 = 
i
; j !ğ*
¬gc
; j++) {

165 
	g¬gv
[
j
] = 
¬gv
[j + 1];

169 (*
	g¬gc
)--;

173 
	gi
--;

191 
GTEST_API_
 
In™GoogËMock
(* 
¬gc
, ** 
¬gv
) {

192 
	gš‹º®
::
In™GoogËMockIm¶
(
¬gc
, 
¬gv
);

197 
GTEST_API_
 
In™GoogËMock
(* 
¬gc
, 
wch¬_t
** 
¬gv
) {

198 
	gš‹º®
::
In™GoogËMockIm¶
(
¬gc
, 
¬gv
);

203 
GTEST_API_
 
In™GoogËMock
() {

205 
	g¬gc
 = 1;

206 cÚ¡‡utØ
	g¬g0
 = "dummy";

207 * 
	g¬gv0
 = 
cÚ¡_ÿ¡
<*>(
¬g0
);

208 ** 
	g¬gv
 = &
¬gv0
;

210 
	gš‹º®
::
In™GoogËMockIm¶
(&
¬gc
, 
¬gv
);

	@third_party/googletest/googlemock/src/gmock_main.cc

31 
	~<io¡»am
>

32 
	~"gmock/gmock.h
"

33 
	~"g‹¡/g‹¡.h
"

35 #ià
GTEST_OS_ESP8266
 || 
GTEST_OS_ESP32


36 #ià
GTEST_OS_ESP8266


39 
£tup
() {

43 
‹¡šg
::
In™GoogËMock
();

45 
loİ
(è{ 
RUN_ALL_TESTS
(); }

46 #ià
GTEST_OS_ESP8266


58 #ià
GTEST_OS_WINDOWS_MOBILE


59 
	~<tch¬.h
>

61 
GTEST_API_
 
	$_tmaš
(
¬gc
, 
TCHAR
** 
¬gv
) {

63 
GTEST_API_
 
	$maš
(
¬gc
, ** 
¬gv
) {

65 
¡d
::
cout
 << "Running main() from gmock_main.cc\n";

69 
‹¡šg
::
	`In™GoogËMock
(&
¬gc
, 
¬gv
);

70  
	`RUN_ALL_TESTS
();

71 
	}
}

	@third_party/googletest/googlemock/test/gmock-actions_test.cc

36 #ifdeà
_MSC_VER


37 #´agm¨
w¬nšg
(
push
)

38 #´agm¨
w¬nšg
(
di§bË
:4100)

39 #ià
_MSC_VER
 == 1900

42 #´agm¨
w¬nšg
(
di§bË
:4800)

46 
	~"gmock/gmock-aùiÚs.h
"

47 
	~<®gÜ™hm
>

48 
	~<™”©Ü
>

49 
	~<memÜy
>

50 
	~<¡ršg
>

51 
	~<ty³_Œa™s
>

52 
	~"gmock/gmock.h
"

53 
	~"gmock/š‹º®/gmock-pÜt.h
"

54 
	~"g‹¡/g‹¡.h
"

55 
	~"g‹¡/g‹¡-¥i.h
"

57 
	gÇme¥aû
 {

59 
	gusšg
 ::
‹¡šg
::
_
;

60 
	gusšg
 ::
‹¡šg
::
AùiÚ
;

61 
	gusšg
 ::
‹¡šg
::
AùiÚIÁ”çû
;

62 
	gusšg
 ::
‹¡šg
::
Assign
;

63 
	gusšg
 ::
‹¡šg
::
ByMove
;

64 
	gusšg
 ::
‹¡šg
::
ByRef
;

65 
	gusšg
 ::
‹¡šg
::
DeçuÉV®ue
;

66 
	gusšg
 ::
‹¡šg
::
DoAÎ
;

67 
	gusšg
 ::
‹¡šg
::
DoDeçuÉ
;

68 
	gusšg
 ::
‹¡šg
::
IgnÜeResuÉ
;

69 
	gusšg
 ::
‹¡šg
::
Invoke
;

70 
	gusšg
 ::
‹¡šg
::
InvokeW™houtArgs
;

71 
	gusšg
 ::
‹¡šg
::
MakePŞymÜphicAùiÚ
;

72 
	gusšg
 ::
‹¡šg
::
PŞymÜphicAùiÚ
;

73 
	gusšg
 ::
‹¡šg
::
R‘uº
;

74 
	gusšg
 ::
‹¡šg
::
R‘uºNew
;

75 
	gusšg
 ::
‹¡šg
::
R‘uºNuÎ
;

76 
	gusšg
 ::
‹¡šg
::
R‘uºRef
;

77 
	gusšg
 ::
‹¡šg
::
R‘uºRefOfCİy
;

78 
	gusšg
 ::
‹¡šg
::
R‘uºRoundRobš
;

79 
	gusšg
 ::
‹¡šg
::
S‘ArgPoš‹e
;

80 
	gusšg
 ::
‹¡šg
::
S‘Argum’tPoš‹e
;

81 
	gusšg
 ::
‹¡šg
::
Unu£d
;

82 
	gusšg
 ::
‹¡šg
::
W™hArgs
;

83 
	gusšg
 ::
‹¡šg
::
š‹º®
::
ButInDeçuÉV®ue
;

85 #ià!
GTEST_OS_WINDOWS_MOBILE


86 
	gusšg
 ::
‹¡šg
::
S‘E¼noAndR‘uº
;

90 
TEST
(
ButInDeçuÉV®ueTe¡
, 
IsNuÎFÜPoš‹rTy³s
) {

91 
EXPECT_TRUE
(
ButInDeçuÉV®ue
<*>::
G‘
(è=ğ
nuÎ±r
);

92 
EXPECT_TRUE
(
ButInDeçuÉV®ue
<cÚ¡ *>::
G‘
(è=ğ
nuÎ±r
);

93 
EXPECT_TRUE
(
ButInDeçuÉV®ue
<*>::
G‘
(è=ğ
nuÎ±r
);

97 
TEST
(
ButInDeçuÉV®ueTe¡
, 
Exi¡sFÜPoš‹rTy³s
) {

98 
EXPECT_TRUE
(
ButInDeçuÉV®ue
<*>::
Exi¡s
());

99 
EXPECT_TRUE
(
ButInDeçuÉV®ue
<cÚ¡ *>::
Exi¡s
());

100 
EXPECT_TRUE
(
ButInDeçuÉV®ue
<*>::
Exi¡s
());

105 
TEST
(
ButInDeçuÉV®ueTe¡
, 
IsZ”oFÜNum”icTy³s
) {

106 
EXPECT_EQ
(0U, 
ButInDeçuÉV®ue
<>::
G‘
());

107 
EXPECT_EQ
(0, 
ButInDeçuÉV®ue
<sigÃd >::
G‘
());

108 
EXPECT_EQ
(0, 
ButInDeçuÉV®ue
<>::
G‘
());

109 #ià
GMOCK_WCHAR_T_IS_NATIVE_


110 #ià!
defšed
(
__WCHAR_UNSIGNED__
)

111 
EXPECT_EQ
(0, 
ButInDeçuÉV®ue
<
wch¬_t
>::
G‘
());

113 
EXPECT_EQ
(0U, 
ButInDeçuÉV®ue
<
wch¬_t
>::
G‘
());

116 
EXPECT_EQ
(0U, 
ButInDeçuÉV®ue
<>::
G‘
());

117 
EXPECT_EQ
(0, 
ButInDeçuÉV®ue
<sigÃd >::
G‘
());

118 
EXPECT_EQ
(0, 
ButInDeçuÉV®ue
<>::
G‘
());

119 
EXPECT_EQ
(0U, 
ButInDeçuÉV®ue
<>::
G‘
());

120 
EXPECT_EQ
(0, 
ButInDeçuÉV®ue
<sigÃd >::
G‘
());

121 
EXPECT_EQ
(0, 
ButInDeçuÉV®ue
<>::
G‘
());

122 
EXPECT_EQ
(0U, 
ButInDeçuÉV®ue
<>::
G‘
());

123 
EXPECT_EQ
(0, 
ButInDeçuÉV®ue
<sigÃd >::
G‘
());

124 
EXPECT_EQ
(0, 
ButInDeçuÉV®ue
<>::
G‘
());

125 
EXPECT_EQ
(0U, 
ButInDeçuÉV®ue
<>::
G‘
());

126 
EXPECT_EQ
(0, 
ButInDeçuÉV®ue
<sigÃd >::
G‘
());

127 
EXPECT_EQ
(0, 
ButInDeçuÉV®ue
<>::
G‘
());

128 
EXPECT_EQ
(0, 
ButInDeçuÉV®ue
<>::
G‘
());

129 
EXPECT_EQ
(0, 
ButInDeçuÉV®ue
<>::
G‘
());

134 
TEST
(
ButInDeçuÉV®ueTe¡
, 
Exi¡sFÜNum”icTy³s
) {

135 
EXPECT_TRUE
(
ButInDeçuÉV®ue
<>::
Exi¡s
());

136 
EXPECT_TRUE
(
ButInDeçuÉV®ue
<sigÃd >::
Exi¡s
());

137 
EXPECT_TRUE
(
ButInDeçuÉV®ue
<>::
Exi¡s
());

138 #ià
GMOCK_WCHAR_T_IS_NATIVE_


139 
EXPECT_TRUE
(
ButInDeçuÉV®ue
<
wch¬_t
>::
Exi¡s
());

141 
EXPECT_TRUE
(
ButInDeçuÉV®ue
<>::
Exi¡s
());

142 
EXPECT_TRUE
(
ButInDeçuÉV®ue
<sigÃd >::
Exi¡s
());

143 
EXPECT_TRUE
(
ButInDeçuÉV®ue
<>::
Exi¡s
());

144 
EXPECT_TRUE
(
ButInDeçuÉV®ue
<>::
Exi¡s
());

145 
EXPECT_TRUE
(
ButInDeçuÉV®ue
<sigÃd >::
Exi¡s
());

146 
EXPECT_TRUE
(
ButInDeçuÉV®ue
<>::
Exi¡s
());

147 
EXPECT_TRUE
(
ButInDeçuÉV®ue
<>::
Exi¡s
());

148 
EXPECT_TRUE
(
ButInDeçuÉV®ue
<sigÃd >::
Exi¡s
());

149 
EXPECT_TRUE
(
ButInDeçuÉV®ue
<>::
Exi¡s
());

150 
EXPECT_TRUE
(
ButInDeçuÉV®ue
<>::
Exi¡s
());

151 
EXPECT_TRUE
(
ButInDeçuÉV®ue
<sigÃd >::
Exi¡s
());

152 
EXPECT_TRUE
(
ButInDeçuÉV®ue
<>::
Exi¡s
());

153 
EXPECT_TRUE
(
ButInDeçuÉV®ue
<>::
Exi¡s
());

154 
EXPECT_TRUE
(
ButInDeçuÉV®ue
<>::
Exi¡s
());

158 
TEST
(
ButInDeçuÉV®ueTe¡
, 
IsF®£FÜBoŞ
) {

159 
EXPECT_FALSE
(
ButInDeçuÉV®ue
<
boŞ
>::
G‘
());

163 
TEST
(
ButInDeçuÉV®ueTe¡
, 
BoŞExi¡s
) {

164 
EXPECT_TRUE
(
ButInDeçuÉV®ue
<
boŞ
>::
Exi¡s
());

169 
TEST
(
ButInDeçuÉV®ueTe¡
, 
IsEm±ySŒšgFÜSŒšg
) {

170 
EXPECT_EQ
("", 
ButInDeçuÉV®ue
< ::
¡d
::
¡ršg
>::
G‘
());

175 
TEST
(
ButInDeçuÉV®ueTe¡
, 
Exi¡sFÜSŒšg
) {

176 
EXPECT_TRUE
(
ButInDeçuÉV®ue
< ::
¡d
::
¡ršg
>::
Exi¡s
());

181 
TEST
(
ButInDeçuÉV®ueTe¡
, 
WÜksFÜCÚ¡Ty³s
) {

182 
EXPECT_EQ
("", 
ButInDeçuÉV®ue
<cÚ¡ 
¡d
::
¡ršg
>::
G‘
());

183 
EXPECT_EQ
(0, 
ButInDeçuÉV®ue
<cÚ¡ >::
G‘
());

184 
EXPECT_TRUE
(
ButInDeçuÉV®ue
<* cÚ¡>::
G‘
(è=ğ
nuÎ±r
);

185 
EXPECT_FALSE
(
ButInDeçuÉV®ue
<cÚ¡ 
boŞ
>::
G‘
());

189 şas 
	cMyDeçuÉCÚ¡ruùibË
 {

190 
	gpublic
:

191 
MyDeçuÉCÚ¡ruùibË
(è: 
v®ue_
(42) {}

193 
v®ue
(ècÚ¡ {  
v®ue_
; }

195 
	g´iv©e
:

196 
v®ue_
;

200 şas 
	cMyNÚDeçuÉCÚ¡ruùibË
 {

201 
	gpublic
:

203 
ex¶ic™
 
MyNÚDeçuÉCÚ¡ruùibË
(
a_v®ue
è: 
v®ue_
(a_value) {}

205 
v®ue
(ècÚ¡ {  
v®ue_
; }

207 
	g´iv©e
:

208 
v®ue_
;

212 
	$TEST
(
ButInDeçuÉV®ueTe¡
, 
Exi¡sFÜDeçuÉCÚ¡ruùibËTy³
) {

213 
	`EXPECT_TRUE
(
ButInDeçuÉV®ue
<
MyDeçuÉCÚ¡ruùibË
>::
	`Exi¡s
());

214 
	}
}

216 
	$TEST
(
ButInDeçuÉV®ueTe¡
, 
IsDeçuÉCÚ¡ruùedFÜDeçuÉCÚ¡ruùibËTy³
) {

217 
	`EXPECT_EQ
(42, 
ButInDeçuÉV®ue
<
MyDeçuÉCÚ¡ruùibË
>::
	`G‘
().
	`v®ue
());

218 
	}
}

221 
	$TEST
(
ButInDeçuÉV®ueTe¡
, 
DÛsNÙExi¡FÜNÚDeçuÉCÚ¡ruùibËTy³
) {

222 
	`EXPECT_FALSE
(
ButInDeçuÉV®ue
<
MyNÚDeçuÉCÚ¡ruùibË
>::
	`Exi¡s
());

223 
	}
}

226 
	$TEST
(
ButInDeçuÉV®ueD—thTe¡
, 
IsUndefšedFÜReã»nûs
) {

227 
	`EXPECT_DEATH_IF_SUPPORTED
({

228 
ButInDeçuÉV®ue
<&>::
	`G‘
();

230 
	`EXPECT_DEATH_IF_SUPPORTED
({

231 
ButInDeçuÉV®ue
<cÚ¡ &>::
	`G‘
();

233 
	}
}

235 
	$TEST
(
ButInDeçuÉV®ueD—thTe¡
, 
IsUndefšedFÜNÚDeçuÉCÚ¡ruùibËTy³
) {

236 
	`EXPECT_DEATH_IF_SUPPORTED
({

237 
ButInDeçuÉV®ue
<
MyNÚDeçuÉCÚ¡ruùibË
>::
	`G‘
();

239 
	}
}

242 
	$TEST
(
DeçuÉV®ueTe¡
, 
IsIn™ŸÎyUn£t
) {

243 
	`EXPECT_FALSE
(
DeçuÉV®ue
<>::
	`IsS‘
());

244 
	`EXPECT_FALSE
(
DeçuÉV®ue
<
MyDeçuÉCÚ¡ruùibË
>::
	`IsS‘
());

245 
	`EXPECT_FALSE
(
DeçuÉV®ue
<cÚ¡ 
MyNÚDeçuÉCÚ¡ruùibË
>::
	`IsS‘
());

246 
	}
}

249 
	$TEST
(
DeçuÉV®ueTe¡
, 
CªBeS‘AndUn£t
) {

250 
	`EXPECT_TRUE
(
DeçuÉV®ue
<>::
	`Exi¡s
());

251 
	`EXPECT_FALSE
(
DeçuÉV®ue
<cÚ¡ 
MyNÚDeçuÉCÚ¡ruùibË
>::
	`Exi¡s
());

253 
DeçuÉV®ue
<>::
	`S‘
(1);

254 
DeçuÉV®ue
<cÚ¡ 
MyNÚDeçuÉCÚ¡ruùibË
>::
	`S‘
(

255 
	`MyNÚDeçuÉCÚ¡ruùibË
(42));

257 
	`EXPECT_EQ
(1, 
DeçuÉV®ue
<>::
	`G‘
());

258 
	`EXPECT_EQ
(42, 
DeçuÉV®ue
<cÚ¡ 
MyNÚDeçuÉCÚ¡ruùibË
>::
	`G‘
().
	`v®ue
());

260 
	`EXPECT_TRUE
(
DeçuÉV®ue
<>::
	`Exi¡s
());

261 
	`EXPECT_TRUE
(
DeçuÉV®ue
<cÚ¡ 
MyNÚDeçuÉCÚ¡ruùibË
>::
	`Exi¡s
());

263 
DeçuÉV®ue
<>::
	`CË¬
();

264 
DeçuÉV®ue
<cÚ¡ 
MyNÚDeçuÉCÚ¡ruùibË
>::
	`CË¬
();

266 
	`EXPECT_FALSE
(
DeçuÉV®ue
<>::
	`IsS‘
());

267 
	`EXPECT_FALSE
(
DeçuÉV®ue
<cÚ¡ 
MyNÚDeçuÉCÚ¡ruùibË
>::
	`IsS‘
());

269 
	`EXPECT_TRUE
(
DeçuÉV®ue
<>::
	`Exi¡s
());

270 
	`EXPECT_FALSE
(
DeçuÉV®ue
<cÚ¡ 
MyNÚDeçuÉCÚ¡ruùibË
>::
	`Exi¡s
());

271 
	}
}

276 
	$TEST
(
DeçuÉV®ueD—thTe¡
, 
G‘R‘uºsButInDeçuÉV®ueWh’Un£t
) {

277 
	`EXPECT_FALSE
(
DeçuÉV®ue
<>::
	`IsS‘
());

278 
	`EXPECT_TRUE
(
DeçuÉV®ue
<>::
	`Exi¡s
());

279 
	`EXPECT_FALSE
(
DeçuÉV®ue
<
MyNÚDeçuÉCÚ¡ruùibË
>::
	`IsS‘
());

280 
	`EXPECT_FALSE
(
DeçuÉV®ue
<
MyNÚDeçuÉCÚ¡ruùibË
>::
	`Exi¡s
());

282 
	`EXPECT_EQ
(0, 
DeçuÉV®ue
<>::
	`G‘
());

284 
	`EXPECT_DEATH_IF_SUPPORTED
({

285 
DeçuÉV®ue
<
MyNÚDeçuÉCÚ¡ruùibË
>::
	`G‘
();

287 
	}
}

289 
	$TEST
(
DeçuÉV®ueTe¡
, 
G‘WÜksFÜMoveOÆyIfS‘
) {

290 
	`EXPECT_TRUE
(
DeçuÉV®ue
<
¡d
::
unique_±r
<>>::
	`Exi¡s
());

291 
	`EXPECT_TRUE
(
DeçuÉV®ue
<
¡d
::
unique_±r
<>>::
	`G‘
(è=ğ
nuÎ±r
);

292 
DeçuÉV®ue
<
¡d
::
unique_±r
<>>::
	`S‘FaùÜy
([] {

293  
¡d
::
unique_±r
<>(
Ãw
 (42));

295 
	`EXPECT_TRUE
(
DeçuÉV®ue
<
¡d
::
unique_±r
<>>::
	`Exi¡s
());

296 
¡d
::
unique_±r
<> 
i
 = 
DeçuÉV®ue
<¡d::unique_±r<>>::
	`G‘
();

297 
	`EXPECT_EQ
(42, *
i
);

298 
	}
}

301 
	$TEST
(
DeçuÉV®ueTe¡
, 
G‘WÜksFÜVoid
) {

302  
DeçuÉV®ue
<>::
	`G‘
();

303 
	}
}

308 
	$TEST
(
DeçuÉV®ueOfReã»nûTe¡
, 
IsIn™ŸÎyUn£t
) {

309 
	`EXPECT_FALSE
(
DeçuÉV®ue
<&>::
	`IsS‘
());

310 
	`EXPECT_FALSE
(
DeçuÉV®ue
<
MyDeçuÉCÚ¡ruùibË
&>::
	`IsS‘
());

311 
	`EXPECT_FALSE
(
DeçuÉV®ue
<
MyNÚDeçuÉCÚ¡ruùibË
&>::
	`IsS‘
());

312 
	}
}

315 
	$TEST
(
DeçuÉV®ueOfReã»nûTe¡
, 
IsIn™ŸÎyNÙExi¡šg
) {

316 
	`EXPECT_FALSE
(
DeçuÉV®ue
<&>::
	`Exi¡s
());

317 
	`EXPECT_FALSE
(
DeçuÉV®ue
<
MyDeçuÉCÚ¡ruùibË
&>::
	`Exi¡s
());

318 
	`EXPECT_FALSE
(
DeçuÉV®ue
<
MyNÚDeçuÉCÚ¡ruùibË
&>::
	`Exi¡s
());

319 
	}
}

322 
	$TEST
(
DeçuÉV®ueOfReã»nûTe¡
, 
CªBeS‘AndUn£t
) {

323 
n
 = 1;

324 
DeçuÉV®ue
<cÚ¡ &>::
	`S‘
(
n
);

325 
MyNÚDeçuÉCÚ¡ruùibË
 
	`x
(42);

326 
DeçuÉV®ue
<
MyNÚDeçuÉCÚ¡ruùibË
&>::
	`S‘
(
x
);

328 
	`EXPECT_TRUE
(
DeçuÉV®ue
<cÚ¡ &>::
	`Exi¡s
());

329 
	`EXPECT_TRUE
(
DeçuÉV®ue
<
MyNÚDeçuÉCÚ¡ruùibË
&>::
	`Exi¡s
());

331 
	`EXPECT_EQ
(&
n
, &(
DeçuÉV®ue
<cÚ¡ &>::
	`G‘
()));

332 
	`EXPECT_EQ
(&
x
, &(
DeçuÉV®ue
<
MyNÚDeçuÉCÚ¡ruùibË
&>::
	`G‘
()));

334 
DeçuÉV®ue
<cÚ¡ &>::
	`CË¬
();

335 
DeçuÉV®ue
<
MyNÚDeçuÉCÚ¡ruùibË
&>::
	`CË¬
();

337 
	`EXPECT_FALSE
(
DeçuÉV®ue
<cÚ¡ &>::
	`Exi¡s
());

338 
	`EXPECT_FALSE
(
DeçuÉV®ue
<
MyNÚDeçuÉCÚ¡ruùibË
&>::
	`Exi¡s
());

340 
	`EXPECT_FALSE
(
DeçuÉV®ue
<cÚ¡ &>::
	`IsS‘
());

341 
	`EXPECT_FALSE
(
DeçuÉV®ue
<
MyNÚDeçuÉCÚ¡ruùibË
&>::
	`IsS‘
());

342 
	}
}

347 
	$TEST
(
DeçuÉV®ueOfReã»nûD—thTe¡
, 
G‘R‘uºsButInDeçuÉV®ueWh’Un£t
) {

348 
	`EXPECT_FALSE
(
DeçuÉV®ue
<&>::
	`IsS‘
());

349 
	`EXPECT_FALSE
(
DeçuÉV®ue
<
MyNÚDeçuÉCÚ¡ruùibË
&>::
	`IsS‘
());

351 
	`EXPECT_DEATH_IF_SUPPORTED
({

352 
DeçuÉV®ue
<&>::
	`G‘
();

354 
	`EXPECT_DEATH_IF_SUPPORTED
({

355 
DeçuÉV®ue
<
MyNÚDeçuÉCÚ¡ruùibË
>::
	`G‘
();

357 
	}
}

362 
	tMyGlob®FunùiÚ
(
	tboŞ
, );

364 
şass
 
	gMyAùiÚIm¶
 : 
public
 
AùiÚIÁ”çû
<
MyGlob®FunùiÚ
> {

365 
public
:

366 
P”fÜm
(cÚ¡ 
¡d
::
tu¶e
<
boŞ
, >& 
¬gs
è
	gov”ride
 {

367  
	g¡d
::
g‘
<0>(
¬gs
è? 
¡d
::get<1>(args) : 0;

371 
	$TEST
(
AùiÚIÁ”çûTe¡
, 
CªBeIm¶em’‹dByDefššgP”fÜm
) {

372 
MyAùiÚIm¶
 
my_aùiÚ_im¶
;

373 ()
my_aùiÚ_im¶
;

374 
	}
}

376 
	$TEST
(
AùiÚIÁ”çûTe¡
, 
MakeAùiÚ
) {

377 
AùiÚ
<
MyGlob®FunùiÚ
> 
aùiÚ
 = 
	`MakeAùiÚ
(
Ãw
 
MyAùiÚIm¶
);

384 
	`EXPECT_EQ
(5, 
aùiÚ
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(
Œue
, 5)));

385 
	}
}

389 
	$TEST
(
AùiÚTe¡
, 
CªBeCÚ¡ruùedFromAùiÚIÁ”çû
) {

390 
AùiÚ
<
MyGlob®FunùiÚ
> 
	`aùiÚ
(
Ãw
 
MyAùiÚIm¶
);

391 
	}
}

394 
	$TEST
(
AùiÚTe¡
, 
D–eg©esWÜkToAùiÚIÁ”çû
) {

395 cÚ¡ 
AùiÚ
<
MyGlob®FunùiÚ
> 
	`aùiÚ
(
Ãw
 
MyAùiÚIm¶
);

397 
	`EXPECT_EQ
(5, 
aùiÚ
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(
Œue
, 5)));

398 
	`EXPECT_EQ
(0, 
aùiÚ
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(
çl£
, 1)));

399 
	}
}

402 
	$TEST
(
AùiÚTe¡
, 
IsCİyabË
) {

403 
AùiÚ
<
MyGlob®FunùiÚ
> 
	`a1
(
Ãw
 
MyAùiÚIm¶
);

404 
AùiÚ
<
MyGlob®FunùiÚ
> 
	`a2
(
a1
);

407 
	`EXPECT_EQ
(5, 
a1
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(
Œue
, 5)));

408 
	`EXPECT_EQ
(0, 
a1
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(
çl£
, 1)));

411 
	`EXPECT_EQ
(5, 
a2
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(
Œue
, 5)));

412 
	`EXPECT_EQ
(0, 
a2
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(
çl£
, 1)));

414 
a2
 = 
a1
;

417 
	`EXPECT_EQ
(5, 
a1
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(
Œue
, 5)));

418 
	`EXPECT_EQ
(0, 
a1
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(
çl£
, 1)));

421 
	`EXPECT_EQ
(5, 
a2
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(
Œue
, 5)));

422 
	`EXPECT_EQ
(0, 
a2
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(
çl£
, 1)));

423 
	}
}

428 
şass
 
	gIsNÙZ”o
 : 
public
 
AùiÚIÁ”çû
<
boŞ
()> {

429 
public
:

430 
boŞ
 
P”fÜm
(cÚ¡ 
¡d
::
tu¶e
<>& 
¬g
è
ov”ride
 {

431  
¡d
::
g‘
<0>(
¬g
) != 0;

435 
	$TEST
(
AùiÚTe¡
, 
CªBeCÚv”‹dToOth”AùiÚTy³
) {

436 cÚ¡ 
AùiÚ
<
	`boŞ
()> 
	`a1
(
Ãw
 
IsNÙZ”o
);

437 cÚ¡ 
AùiÚ
<()> 
a2
 = AùiÚ<()>(
a1
);

438 
	`EXPECT_EQ
(1, 
a2
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
('a')));

439 
	`EXPECT_EQ
(0, 
a2
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
('\0')));

440 
	}
}

446 şas 
	cR‘uºSecÚdArgum’tAùiÚ
 {

447 
	gpublic
:

451 
‹m¶©e
 <
ty³Çme
 
ResuÉ
,y³Çm
	gArgum’tTu¶e
>

452 
ResuÉ
 
P”fÜm
(cÚ¡ 
Argum’tTu¶e
& 
¬gs
) {

453  
	g¡d
::
g‘
<1>(
¬gs
);

459 şas 
	cR‘uºZ”oFromNuÎ¬yFunùiÚAùiÚ
 {

460 
	gpublic
:

468 
‹m¶©e
 <
ty³Çme
 
ResuÉ
>

469 
ResuÉ
 
P”fÜm
(cÚ¡ 
¡d
::
tu¶e
<>&) const {

477 
	gPŞymÜphicAùiÚ
<
	gR‘uºSecÚdArgum’tAùiÚ
> 
	$R‘uºSecÚdArgum’t
() {

478  
	`MakePŞymÜphicAùiÚ
(
	`R‘uºSecÚdArgum’tAùiÚ
());

479 
	}
}

481 
	gPŞymÜphicAùiÚ
<
	gR‘uºZ”oFromNuÎ¬yFunùiÚAùiÚ
>

482 
	$R‘uºZ”oFromNuÎ¬yFunùiÚ
() {

483  
	`MakePŞymÜphicAùiÚ
(
	`R‘uºZ”oFromNuÎ¬yFunùiÚAùiÚ
());

484 
	}
}

488 
	$TEST
(
MakePŞymÜphicAùiÚTe¡
, 
CÚ¡ruùsAùiÚFromIm¶
) {

489 
AùiÚ
<(
boŞ
, , )> 
a1
 = 
	`R‘uºSecÚdArgum’t
();

490 
	`EXPECT_EQ
(5, 
a1
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(
çl£
, 5, 2.0)));

491 
	}
}

495 
	$TEST
(
MakePŞymÜphicAùiÚTe¡
, 
WÜksWh’P”fÜmHasOÃTem¶©eP¬am‘”
) {

496 
AùiÚ
<()> 
a1
 = 
	`R‘uºZ”oFromNuÎ¬yFunùiÚ
();

497 
	`EXPECT_EQ
(0, 
a1
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
()));

499 
AùiÚ
<*()> 
a2
 = 
	`R‘uºZ”oFromNuÎ¬yFunùiÚ
();

500 
	`EXPECT_TRUE
(
a2
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
()è=ğ
nuÎ±r
);

501 
	}
}

505 
	$TEST
(
R‘uºTe¡
, 
WÜksFÜVoid
) {

506 cÚ¡ 
AùiÚ
<()> 
»t
 = 
	`R‘uº
();

507  
»t
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(1));

508 
	}
}

511 
	$TEST
(
R‘uºTe¡
, 
R‘uºsGiv’V®ue
) {

512 
AùiÚ
<()> 
»t
 = 
	`R‘uº
(1);

513 
	`EXPECT_EQ
(1, 
»t
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
()));

515 
»t
 = 
	`R‘uº
(-5);

516 
	`EXPECT_EQ
(-5, 
»t
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
()));

517 
	}
}

520 
	$TEST
(
R‘uºTe¡
, 
Acû±sSŒšgL™”®
) {

521 
AùiÚ
<cÚ¡ *()> 
a1
 = 
	`R‘uº
("Hello");

522 
	`EXPECT_STREQ
("H–lo", 
a1
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
()));

524 
AùiÚ
<
¡d
::
	`¡ršg
()> 
a2
 = 
	`R‘uº
("world");

525 
	`EXPECT_EQ
("wÜld", 
a2
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
()));

526 
	}
}

530 
	sIÁeg”VeùÜW¿µ”
 {

531 
	g¡d
::
veùÜ
<> * 
v
;

532 
IÁeg”VeùÜW¿µ”
(
¡d
::
veùÜ
<>& 
_v
è: 
v
(&_v) {}

536 
	$TEST
(
R‘uºTe¡
, 
SuµÜtsW¿µ”R‘uºTy³
) {

538 
¡d
::
veùÜ
<> 
v
;

539 
i
 = 0; i < 5; ++iè
v
.
	`push_back
(i);

543 
AùiÚ
<
	`IÁeg”VeùÜW¿µ”
()> 
a
 = 
	`R‘uº
(
v
);

544 cÚ¡ 
¡d
::
veùÜ
<>& 
»suÉ
 = *(
a
.
	`P”fÜm
(¡d::
	`make_tu¶e
()).
v
);

545 
	`EXPECT_THAT
(
»suÉ
, ::
‹¡šg
::
	`EËm’tsA»
(0, 1, 2, 3, 4));

546 
	}
}

550 
	sBa£
 {

551 
boŞ
 
	gİ”©Ü
==(cÚ¡ 
Ba£
&è{  
Œue
; }

554 
	gD”ived
 : 
public
 
Ba£
 {

555 
boŞ
 
İ”©Ü
==(cÚ¡ 
D”ived
&è{  
Œue
; }

558 
	$TEST
(
R‘uºTe¡
, 
IsCov¬ŸÁ
) {

559 
Ba£
 
ba£
;

560 
D”ived
 
d”ived
;

561 
AùiÚ
<
Ba£
*()> 
»t
 = 
	`R‘uº
(&
ba£
);

562 
	`EXPECT_EQ
(&
ba£
, 
»t
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
()));

564 
»t
 = 
	`R‘uº
(&
d”ived
);

565 
	`EXPECT_EQ
(&
d”ived
, 
»t
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
()));

566 
	}
}

572 şas 
	cFromTy³
 {

573 
	gpublic
:

574 
ex¶ic™
 
FromTy³
(
boŞ
* 
is_cÚv”‹d
è: 
cÚv”‹d_
(is_converted) {}

575 
boŞ
* 
cÚv”‹d
(ècÚ¡ {  
cÚv”‹d_
; }

577 
	g´iv©e
:

578 
boŞ
* cÚ¡ 
cÚv”‹d_
;

581 şas 
	cToTy³
 {

582 
	gpublic
:

584 
ToTy³
(cÚ¡ 
FromTy³
& 
x
è{ *x.
cÚv”‹d
(èğ
Œue
; }

587 
	$TEST
(
R‘uºTe¡
, 
CÚv”tsArgum’tWh’CÚv”‹d
) {

588 
boŞ
 
cÚv”‹d
 = 
çl£
;

589 
FromTy³
 
	`x
(&
cÚv”‹d
);

590 
AùiÚ
<
	`ToTy³
()> 
	`aùiÚ
(
	`R‘uº
(
x
));

591 
	`EXPECT_TRUE
(
cÚv”‹d
) << "Return must convert its‡rgument in its own "

593 
cÚv”‹d
 = 
çl£
;

594 
aùiÚ
.
	`P”fÜm
(
¡d
::
tu¶e
<>());

595 
	`EXPECT_FALSE
(
cÚv”‹d
) << "Action must NOT convert its‡rgument "

597 
	}
}

599 şas 
	cDe¡š©iÚTy³
 {};

601 şas 
	cSourûTy³
 {

602 
	gpublic
:

604 
İ”©Ü
 
De¡š©iÚTy³
() {  DestinationType(); }

607 
	$TEST
(
R‘uºTe¡
, 
CªCÚv”tArgum’tUsšgNÚCÚ¡Ty³Ca¡O³¿tÜ
) {

608 
SourûTy³
 
s
;

609 
AùiÚ
<
	`De¡š©iÚTy³
()> 
	`aùiÚ
(
	`R‘uº
(
s
));

610 
	}
}

613 
	$TEST
(
R‘uºNuÎTe¡
, 
WÜksInPoš‹rR‘uºšgFunùiÚ
) {

614 cÚ¡ 
AùiÚ
<*()> 
a1
 = 
	`R‘uºNuÎ
();

615 
	`EXPECT_TRUE
(
a1
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
()è=ğ
nuÎ±r
);

617 cÚ¡ 
AùiÚ
<cÚ¡ *(
boŞ
)> 
a2
 = 
	`R‘uºNuÎ
();

618 
	`EXPECT_TRUE
(
a2
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(
Œue
)è=ğ
nuÎ±r
);

619 
	}
}

623 
	$TEST
(
R‘uºNuÎTe¡
, 
WÜksInSm¬tPoš‹rR‘uºšgFunùiÚ
) {

624 cÚ¡ 
AùiÚ
<
¡d
::
unique_±r
<cÚ¡ >()> 
a1
 = 
	`R‘uºNuÎ
();

625 
	`EXPECT_TRUE
(
a1
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
()è=ğ
nuÎ±r
);

627 cÚ¡ 
AùiÚ
<
¡d
::
sh¬ed_±r
<>(¡d::
¡ršg
)> 
a2
 = 
	`R‘uºNuÎ
();

628 
	`EXPECT_TRUE
(
a2
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
("foo")è=ğ
nuÎ±r
);

629 
	}
}

632 
	$TEST
(
R‘uºRefTe¡
, 
WÜksFÜReã»nû
) {

633 cÚ¡ 
n
 = 0;

634 cÚ¡ 
AùiÚ
<cÚ¡ &(
boŞ
)> 
»t
 = 
	`R‘uºRef
(
n
);

636 
	`EXPECT_EQ
(&
n
, &
»t
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(
Œue
)));

637 
	}
}

640 
	$TEST
(
R‘uºRefTe¡
, 
IsCov¬ŸÁ
) {

641 
Ba£
 
ba£
;

642 
D”ived
 
d”ived
;

643 
AùiÚ
<
Ba£
&()> 
a
 = 
	`R‘uºRef
(
ba£
);

644 
	`EXPECT_EQ
(&
ba£
, &
a
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
()));

646 
a
 = 
	`R‘uºRef
(
d”ived
);

647 
	`EXPECT_EQ
(&
d”ived
, &
a
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
()));

648 
	}
}

650 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
	gty³Çme
 = 
deşty³
(
R‘uºRef
(
¡d
::
deşv®
<
T
&&>()))>

651 
boŞ
 
	$CªC®lR‘uºRef
(
T
&&è{  
Œue
; 
	}
}

652 
boŞ
 
	$CªC®lR‘uºRef
(
Unu£d
è{  
çl£
; 
	}
}

655 
	$TEST
(
R‘uºRefTe¡
, 
WÜksFÜNÚTempÜ¬y
) {

656 
sÿÏr_v®ue
 = 123;

657 
	`EXPECT_TRUE
(
	`CªC®lR‘uºRef
(
sÿÏr_v®ue
));

659 
¡d
::
¡ršg
 
	`nÚ_sÿÏr_v®ue
("ABC");

660 
	`EXPECT_TRUE
(
	`CªC®lR‘uºRef
(
nÚ_sÿÏr_v®ue
));

662 cÚ¡ 
cÚ¡_sÿÏr_v®ue
{321};

663 
	`EXPECT_TRUE
(
	`CªC®lR‘uºRef
(
cÚ¡_sÿÏr_v®ue
));

665 cÚ¡ 
¡d
::
¡ršg
 
	`cÚ¡_nÚ_sÿÏr_v®ue
("CBA");

666 
	`EXPECT_TRUE
(
	`CªC®lR‘uºRef
(
cÚ¡_nÚ_sÿÏr_v®ue
));

667 
	}
}

670 
	$TEST
(
R‘uºRefTe¡
, 
DÛsNÙWÜkFÜTempÜ¬y
) {

671 autØ
sÿÏr_v®ue
 = []() -> {  123; };

672 
	`EXPECT_FALSE
(
	`CªC®lR‘uºRef
(
	`sÿÏr_v®ue
()));

674 autØ
nÚ_sÿÏr_v®ue
 = [](è-> 
¡d
::
¡ršg
 {  "ABC"; };

675 
	`EXPECT_FALSE
(
	`CªC®lR‘uºRef
(
	`nÚ_sÿÏr_v®ue
()));

679 
	`EXPECT_FALSE
(
	`CªC®lR‘uºRef
(
¡©ic_ÿ¡
<const >(321)));

681 autØ
cÚ¡_nÚ_sÿÏr_v®ue
 = [](è-> cÚ¡ 
¡d
::
¡ršg
 {  "CBA"; };

682 
	`EXPECT_FALSE
(
	`CªC®lR‘uºRef
(
	`cÚ¡_nÚ_sÿÏr_v®ue
()));

683 
	}
}

686 
	$TEST
(
R‘uºRefOfCİyTe¡
, 
WÜksFÜReã»nû
) {

687 
n
 = 42;

688 cÚ¡ 
AùiÚ
<cÚ¡ &()> 
»t
 = 
	`R‘uºRefOfCİy
(
n
);

690 
	`EXPECT_NE
(&
n
, &
»t
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
()));

691 
	`EXPECT_EQ
(42, 
»t
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
()));

693 
n
 = 43;

694 
	`EXPECT_NE
(&
n
, &
»t
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
()));

695 
	`EXPECT_EQ
(42, 
»t
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
()));

696 
	}
}

699 
	$TEST
(
R‘uºRefOfCİyTe¡
, 
IsCov¬ŸÁ
) {

700 
Ba£
 
ba£
;

701 
D”ived
 
d”ived
;

702 
AùiÚ
<
Ba£
&()> 
a
 = 
	`R‘uºRefOfCİy
(
ba£
);

703 
	`EXPECT_NE
(&
ba£
, &
a
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
()));

705 
a
 = 
	`R‘uºRefOfCİy
(
d”ived
);

706 
	`EXPECT_NE
(&
d”ived
, &
a
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
()));

707 
	}
}

710 
	$TEST
(
R‘uºRoundRobšTe¡
, 
WÜksFÜIn™Li¡
) {

711 
AùiÚ
<()> 
»t
 = 
	`R‘uºRoundRobš
({1, 2, 3});

713 
	`EXPECT_EQ
(1, 
»t
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
()));

714 
	`EXPECT_EQ
(2, 
»t
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
()));

715 
	`EXPECT_EQ
(3, 
»t
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
()));

716 
	`EXPECT_EQ
(1, 
»t
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
()));

717 
	`EXPECT_EQ
(2, 
»t
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
()));

718 
	`EXPECT_EQ
(3, 
»t
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
()));

719 
	}
}

722 
	$TEST
(
R‘uºRoundRobšTe¡
, 
WÜksFÜVeùÜ
) {

723 
¡d
::
veùÜ
<> 
v
 = {4.4, 5.5, 6.6};

724 
AùiÚ
<()> 
»t
 = 
	`R‘uºRoundRobš
(
v
);

726 
	`EXPECT_EQ
(4.4, 
»t
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
()));

727 
	`EXPECT_EQ
(5.5, 
»t
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
()));

728 
	`EXPECT_EQ
(6.6, 
»t
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
()));

729 
	`EXPECT_EQ
(4.4, 
»t
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
()));

730 
	`EXPECT_EQ
(5.5, 
»t
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
()));

731 
	`EXPECT_EQ
(6.6, 
»t
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
()));

732 
	}
}

736 şas 
	cMockCÏss
 {

737 
	gpublic
:

738 
MockCÏss
() {}

740 
MOCK_METHOD1
(
IÁFunc
, (
boŞ
 
æag
));

741 
MOCK_METHOD0
(
Foo
, 
MyNÚDeçuÉCÚ¡ruùibË
());

742 
MOCK_METHOD0
(
MakeUnique
, 
¡d
::
unique_±r
<>());

743 
MOCK_METHOD0
(
MakeUniqueBa£
, 
¡d
::
unique_±r
<
Ba£
>());

744 
MOCK_METHOD0
(
MakeVeùÜUnique
, 
¡d
::
veùÜ
<¡d::
unique_±r
<>>());

745 
MOCK_METHOD1
(
TakeUnique
, (
¡d
::
unique_±r
<>));

746 
MOCK_METHOD2
(
TakeUnique
,

747 (cÚ¡ 
¡d
::
unique_±r
<>&, std::unique_ptr<>));

749 
	g´iv©e
:

750 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
MockCÏss
);

755 
	$TEST
(
DoDeçuÉTe¡
, 
R‘uºsButInDeçuÉV®ueByDeçuÉ
) {

756 
MockCÏss
 
mock
;

757 
	`EXPECT_CALL
(
mock
, 
	`IÁFunc
(
_
))

758 .
	`WlOnû
(
	`DoDeçuÉ
());

759 
	`EXPECT_EQ
(0, 
mock
.
	`IÁFunc
(
Œue
));

760 
	}
}

764 
	$TEST
(
DoDeçuÉD—thTe¡
, 
D›sFÜUnknowTy³
) {

765 
MockCÏss
 
mock
;

766 
	`EXPECT_CALL
(
mock
, 
	`Foo
())

767 .
	`WlR•—‹dly
(
	`DoDeçuÉ
());

768 #ià
GTEST_HAS_EXCEPTIONS


769 
	`EXPECT_ANY_THROW
(
mock
.
	`Foo
());

771 
	`EXPECT_DEATH_IF_SUPPORTED
({

772 
mock
.
	`Foo
();

775 
	}
}

780 
	$VoidFunc
(
boŞ
 ) {
	}
}

782 
	$TEST
(
DoDeçuÉD—thTe¡
, 
D›sIfU£dInCompos™eAùiÚ
) {

783 
MockCÏss
 
mock
;

784 
	`EXPECT_CALL
(
mock
, 
	`IÁFunc
(
_
))

785 .
	`WlR•—‹dly
(
	`DoAÎ
(
	`Invoke
(
VoidFunc
),

786 
	`DoDeçuÉ
()));

792 
	`EXPECT_DEATH_IF_SUPPORTED
({

793 
mock
.
	`IÁFunc
(
Œue
);

795 
	}
}

799 
	$TEST
(
DoDeçuÉTe¡
, 
R‘uºsU£rS³cif›dP”Ty³DeçuÉV®ueWh’Th”eIsOÃ
) {

800 
DeçuÉV®ue
<>::
	`S‘
(1);

801 
MockCÏss
 
mock
;

802 
	`EXPECT_CALL
(
mock
, 
	`IÁFunc
(
_
))

803 .
	`WlOnû
(
	`DoDeçuÉ
());

804 
	`EXPECT_EQ
(1, 
mock
.
	`IÁFunc
(
çl£
));

805 
DeçuÉV®ue
<>::
	`CË¬
();

806 
	}
}

809 
	$TEST
(
DoDeçuÉTe¡
, 
DÛsWh©OnC®lS³cif›s
) {

810 
MockCÏss
 
mock
;

811 
	`ON_CALL
(
mock
, 
	`IÁFunc
(
_
))

812 .
	`WlByDeçuÉ
(
	`R‘uº
(2));

813 
	`EXPECT_CALL
(
mock
, 
	`IÁFunc
(
_
))

814 .
	`WlOnû
(
	`DoDeçuÉ
());

815 
	`EXPECT_EQ
(2, 
mock
.
	`IÁFunc
(
çl£
));

816 
	}
}

819 
	$TEST
(
DoDeçuÉTe¡
, 
CªnÙBeU£dInOnC®l
) {

820 
MockCÏss
 
mock
;

821 
	`EXPECT_NONFATAL_FAILURE
({

822 
	`ON_CALL
(
mock
, 
	`IÁFunc
(
_
))

823 .
	`WlByDeçuÉ
(
	`DoDeçuÉ
());

825 
	}
}

829 
	$TEST
(
S‘ArgPoš‹eTe¡
, 
S‘sTheNthPoš‹e
) {

830 
	tMyFunùiÚ
(
	tboŞ
, *, *);

831 
AùiÚ
<
MyFunùiÚ
> 
a
 = 
S‘ArgPoš‹e
<1>(2);

833 
n
 = 0;

834 
ch
 = '\0';

835 
a
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(
Œue
, &
n
, &
ch
));

836 
	`EXPECT_EQ
(2, 
n
);

837 
	`EXPECT_EQ
('\0', 
ch
);

839 
a
 = 
S‘ArgPoš‹e
<2>('a');

840 
n
 = 0;

841 
ch
 = '\0';

842 
a
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(
Œue
, &
n
, &
ch
));

843 
	`EXPECT_EQ
(0, 
n
);

844 
	`EXPECT_EQ
('a', 
ch
);

845 
	}
}

848 
	$TEST
(
S‘ArgPoš‹eTe¡
, 
Acû±sSŒšgL™”®
) {

849 
	tMyFunùiÚ
(
	t¡d
::
	t¡ršg
*, const **);

850 
AùiÚ
<
MyFunùiÚ
> 
a
 = 
S‘ArgPoš‹e
<0>("hi");

851 
¡d
::
¡ršg
 
¡r
;

852 cÚ¡ * 
±r
 = 
nuÎ±r
;

853 
a
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(&
¡r
, &
±r
));

854 
	`EXPECT_EQ
("hi", 
¡r
);

855 
	`EXPECT_TRUE
(
±r
 =ğ
nuÎ±r
);

857 
a
 = 
S‘ArgPoš‹e
<1>("world");

858 
¡r
 = "";

859 
a
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(&
¡r
, &
±r
));

860 
	`EXPECT_EQ
("", 
¡r
);

861 
	`EXPECT_STREQ
("wÜld", 
±r
);

862 
	}
}

864 
	$TEST
(
S‘ArgPoš‹eTe¡
, 
Acû±sWideSŒšgL™”®
) {

865 
	tMyFunùiÚ
(cÚ¡ 
	twch¬_t
**);

866 
AùiÚ
<
MyFunùiÚ
> 
a
 = 
S‘ArgPoš‹e
<0>(
L
"world");

867 cÚ¡ 
wch¬_t
* 
±r
 = 
nuÎ±r
;

868 
a
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(&
±r
));

869 
	`EXPECT_STREQ
(
L
"wÜld", 
±r
);

871 #ià
GTEST_HAS_STD_WSTRING


873 
	tMySŒšgFunùiÚ
(
	t¡d
::
	tw¡ršg
*);

874 
AùiÚ
<
MySŒšgFunùiÚ
> 
a2
 = 
S‘ArgPoš‹e
<0>(
L
"world");

875 
¡d
::
w¡ršg
 
¡r
 = 
L
"";

876 
a2
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(&
¡r
));

877 
	`EXPECT_EQ
(
L
"wÜld", 
¡r
);

880 
	}
}

883 
	$TEST
(
S‘ArgPoš‹eTe¡
, 
Acû±sCh¬Poš‹r
) {

884 
	tMyFunùiÚ
(
	tboŞ
, 
	t¡d
::
	t¡ršg
*, const **);

885 cÚ¡ * cÚ¡ 
hi
 = "hi";

886 
AùiÚ
<
MyFunùiÚ
> 
a
 = 
S‘ArgPoš‹e
<1>(
hi
);

887 
¡d
::
¡ršg
 
¡r
;

888 cÚ¡ * 
±r
 = 
nuÎ±r
;

889 
a
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(
Œue
, &
¡r
, &
±r
));

890 
	`EXPECT_EQ
("hi", 
¡r
);

891 
	`EXPECT_TRUE
(
±r
 =ğ
nuÎ±r
);

893 
wÜld_¬¿y
[] = "world";

894 * cÚ¡ 
wÜld
 = 
wÜld_¬¿y
;

895 
a
 = 
S‘ArgPoš‹e
<2>(
wÜld
);

896 
¡r
 = "";

897 
a
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(
Œue
, &
¡r
, &
±r
));

898 
	`EXPECT_EQ
("", 
¡r
);

899 
	`EXPECT_EQ
(
wÜld
, 
±r
);

900 
	}
}

902 
	$TEST
(
S‘ArgPoš‹eTe¡
, 
Acû±sWideCh¬Poš‹r
) {

903 
	tMyFunùiÚ
(
	tboŞ
, cÚ¡ 
	twch¬_t
**);

904 cÚ¡ 
wch¬_t
* cÚ¡ 
hi
 = 
L
"hi";

905 
AùiÚ
<
MyFunùiÚ
> 
a
 = 
S‘ArgPoš‹e
<1>(
hi
);

906 cÚ¡ 
wch¬_t
* 
±r
 = 
nuÎ±r
;

907 
a
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(
Œue
, &
±r
));

908 
	`EXPECT_EQ
(
hi
, 
±r
);

910 #ià
GTEST_HAS_STD_WSTRING


912 
	tMySŒšgFunùiÚ
(
	tboŞ
, 
	t¡d
::
	tw¡ršg
*);

913 
wch¬_t
 
wÜld_¬¿y
[] = 
L
"world";

914 
wch¬_t
* cÚ¡ 
wÜld
 = 
wÜld_¬¿y
;

915 
AùiÚ
<
MySŒšgFunùiÚ
> 
a2
 = 
S‘ArgPoš‹e
<1>(
wÜld
);

916 
¡d
::
w¡ršg
 
¡r
;

917 
a2
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(
Œue
, &
¡r
));

918 
	`EXPECT_EQ
(
wÜld_¬¿y
, 
¡r
);

920 
	}
}

924 
	$TEST
(
S‘Argum’tPoš‹eTe¡
, 
S‘sTheNthPoš‹e
) {

925 
	tMyFunùiÚ
(
	tboŞ
, *, *);

926 
AùiÚ
<
MyFunùiÚ
> 
a
 = 
S‘Argum’tPoš‹e
<1>(2);

928 
n
 = 0;

929 
ch
 = '\0';

930 
a
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(
Œue
, &
n
, &
ch
));

931 
	`EXPECT_EQ
(2, 
n
);

932 
	`EXPECT_EQ
('\0', 
ch
);

934 
a
 = 
S‘Argum’tPoš‹e
<2>('a');

935 
n
 = 0;

936 
ch
 = '\0';

937 
a
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(
Œue
, &
n
, &
ch
));

938 
	`EXPECT_EQ
(0, 
n
);

939 
	`EXPECT_EQ
('a', 
ch
);

940 
	}
}

943 
	$NuÎ¬y
(è{  1; 
	}
}

945 şas 
	cNuÎ¬yFunùÜ
 {

946 
	gpublic
:

947 
İ”©Ü
()() {  2; }

950 
boŞ
 
	gg_dÚe
 = 
çl£
;

951 
	$VoidNuÎ¬y
(è{ 
g_dÚe
 = 
Œue
; 
	}
}

953 şas 
	cVoidNuÎ¬yFunùÜ
 {

954 
	gpublic
:

955 
İ”©Ü
()(è{ 
g_dÚe
 = 
Œue
; }

958 
	$ShÜt
(
n
è{ ‚; 
	}
}

959 
	$Ch¬
(
ch
è{  ch; 
	}
}

961 cÚ¡ * 
	$Ch¬PŒ
(cÚ¡ * 
s
è{  s; 
	}
}

963 
boŞ
 
	$UÇry
(
x
è{  x < 0; 
	}
}

965 cÚ¡ * 
	$Bš¬y
(cÚ¡ * 
šput
, 
n
è{  iÅuˆ+‚; 
	}
}

967 
	$VoidBš¬y
(, è{ 
g_dÚe
 = 
Œue
; 
	}
}

969 
	$T”Çry
(
x
, 
y
, 
z
è{  x + y + z; 
	}
}

971 
	$SumOf4
(
a
, 
b
, 
c
, 
d
è{ ‡ + b + c + d; 
	}
}

973 şas 
	cFoo
 {

974 
	gpublic
:

975 
Foo
(è: 
v®ue_
(123) {}

977 
NuÎ¬y
(ècÚ¡ {  
v®ue_
; }

979 
	g´iv©e
:

980 
v®ue_
;

984 
	$TEST
(
InvokeW™houtArgsTe¡
, 
FunùiÚ
) {

986 
AùiÚ
<()> 
a
 = 
	`InvokeW™houtArgs
(
NuÎ¬y
);

987 
	`EXPECT_EQ
(1, 
a
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(2)));

990 
AùiÚ
<(, )> 
a2
 = 
	`InvokeW™houtArgs
(
NuÎ¬y
);

991 
	`EXPECT_EQ
(1, 
a2
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(2, 3.5)));

994 
AùiÚ
<()> 
a3
 = 
	`InvokeW™houtArgs
(
VoidNuÎ¬y
);

995 
g_dÚe
 = 
çl£
;

996 
a3
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(1));

997 
	`EXPECT_TRUE
(
g_dÚe
);

998 
	}
}

1001 
	$TEST
(
InvokeW™houtArgsTe¡
, 
FunùÜ
) {

1003 
AùiÚ
<()> 
a
 = 
	`InvokeW™houtArgs
(
	`NuÎ¬yFunùÜ
());

1004 
	`EXPECT_EQ
(2, 
a
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
()));

1007 
AùiÚ
<(, , )> 
a2
 =

1008 
	`InvokeW™houtArgs
(
	`NuÎ¬yFunùÜ
());

1009 
	`EXPECT_EQ
(2, 
a2
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(3, 3.5, 'a')));

1012 
AùiÚ
<()> 
a3
 = 
	`InvokeW™houtArgs
(
	`VoidNuÎ¬yFunùÜ
());

1013 
g_dÚe
 = 
çl£
;

1014 
a3
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
());

1015 
	`EXPECT_TRUE
(
g_dÚe
);

1016 
	}
}

1019 
	$TEST
(
InvokeW™houtArgsTe¡
, 
M‘hod
) {

1020 
Foo
 
foo
;

1021 
AùiÚ
<(
boŞ
, )> 
a
 =

1022 
	`InvokeW™houtArgs
(&
foo
, &
Foo
::
NuÎ¬y
);

1023 
	`EXPECT_EQ
(123, 
a
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(
Œue
, 'a')));

1024 
	}
}

1027 
	$TEST
(
IgnÜeResuÉTe¡
, 
PŞymÜphicAùiÚ
) {

1028 
AùiÚ
<()> 
a
 = 
	`IgnÜeResuÉ
(
	`R‘uº
(5));

1029 
a
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(1));

1030 
	}
}

1034 
	$R‘uºOÃ
() {

1035 
g_dÚe
 = 
Œue
;

1037 
	}
}

1039 
	$TEST
(
IgnÜeResuÉTe¡
, 
MÚomÜphicAùiÚ
) {

1040 
g_dÚe
 = 
çl£
;

1041 
AùiÚ
<()> 
a
 = 
	`IgnÜeResuÉ
(
	`Invoke
(
R‘uºOÃ
));

1042 
a
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
());

1043 
	`EXPECT_TRUE
(
g_dÚe
);

1044 
	}
}

1048 
MyNÚDeçuÉCÚ¡ruùibË
 
	$R‘uºMyNÚDeçuÉCÚ¡ruùibË
() {

1049 
g_dÚe
 = 
Œue
;

1050  
	`MyNÚDeçuÉCÚ¡ruùibË
(42);

1051 
	}
}

1053 
	$TEST
(
IgnÜeResuÉTe¡
, 
AùiÚR‘uºšgCÏss
) {

1054 
g_dÚe
 = 
çl£
;

1055 
AùiÚ
<()> 
a
 =

1056 
	`IgnÜeResuÉ
(
	`Invoke
(
R‘uºMyNÚDeçuÉCÚ¡ruùibË
));

1057 
a
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(2));

1058 
	`EXPECT_TRUE
(
g_dÚe
);

1059 
	}
}

1061 
	$TEST
(
AssignTe¡
, 
IÁ
) {

1062 
x
 = 0;

1063 
AùiÚ
<()> 
a
 = 
	`Assign
(&
x
, 5);

1064 
a
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(0));

1065 
	`EXPECT_EQ
(5, 
x
);

1066 
	}
}

1068 
	$TEST
(
AssignTe¡
, 
SŒšg
) {

1069 ::
¡d
::
¡ršg
 
x
;

1070 
AùiÚ
<()> 
a
 = 
	`Assign
(&
x
, "Hello, world");

1071 
a
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
());

1072 
	`EXPECT_EQ
("H–lo, wÜld", 
x
);

1073 
	}
}

1075 
	$TEST
(
AssignTe¡
, 
Com·tibËTy³s
) {

1076 
x
 = 0;

1077 
AùiÚ
<()> 
a
 = 
	`Assign
(&
x
, 5);

1078 
a
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(0));

1079 
	`EXPECT_DOUBLE_EQ
(5, 
x
);

1080 
	}
}

1084 
	$TEST
(
W™hArgsTe¡
, 
OÃArg
) {

1085 
AùiÚ
<
	`boŞ
(
x
, 
n
)> 
a
 = 
W™hArgs
<1>(
	`Invoke
(
UÇry
));

1086 
	`EXPECT_TRUE
(
a
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(1.5, -1)));

1087 
	`EXPECT_FALSE
(
a
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(1.5, 1)));

1088 
	}
}

1091 
	$TEST
(
W™hArgsTe¡
, 
TwoArgs
) {

1092 
AùiÚ
<cÚ¡ *(cÚ¡ * 
s
, 
x
, 
n
)> 
a
 =

1093 
W™hArgs
<0, 2>(
	`Invoke
(
Bš¬y
));

1094 cÚ¡ 
s
[] = "Hello";

1095 
	`EXPECT_EQ
(
s
 + 2, 
a
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(
	`Ch¬PŒ
(s), 0.5, 
	`ShÜt
(2))));

1096 
	}
}

1098 
	sCÚÿtAÎ
 {

1099 
	g¡d
::
¡ršg
 
İ”©Ü
()() const {  {}; }

1100 
	g‹m¶©e
 <
	gty³Çme
... 
	gI
>

1101 
	g¡d
::
¡ršg
 
İ”©Ü
()(cÚ¡ * 
a
, 
	gI
... 
	gi
) const {

1102  
	ga
 + 
CÚÿtAÎ
()(
	gi
...);

1107 
	$TEST
(
W™hArgsTe¡
, 
T’Args
) {

1108 
AùiÚ
<
¡d
::
	`¡ršg
(cÚ¡ *, cÚ¡ *, cÚ¡ *, cÚ¡ *)> 
a
 =

1109 
W™hArgs
<0, 1, 2, 3, 2, 1, 0, 1, 2, 3>(
	`Invoke
(
CÚÿtAÎ
{}));

1110 
	`EXPECT_EQ
("0123210123",

1111 
a
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(
	`Ch¬PŒ
("0"), CharPtr("1"), CharPtr("2"),

1112 
	`Ch¬PŒ
("3"))));

1113 
	}
}

1116 
şass
 
	gSubŒaùAùiÚ
 : 
public
 
AùiÚIÁ”çû
<(, )> {

1117 
	gpublic
:

1118 
P”fÜm
(cÚ¡ 
¡d
::
tu¶e
<, >& 
¬gs
è
	gov”ride
 {

1119  
	g¡d
::
g‘
<0>(
¬gs
è- 
¡d
::get<1>(args);

1123 
	$TEST
(
W™hArgsTe¡
, 
NÚInvokeAùiÚ
) {

1124 
AùiÚ
<(cÚ¡ 
¡d
::
¡ršg
&, , )> 
a
 =

1125 
W™hArgs
<2, 1>(
	`MakeAùiÚ
(
Ãw
 
SubŒaùAùiÚ
));

1126 
¡d
::
tu¶e
<¡d::
¡ršg
, , > 
dummy
 =

1127 
¡d
::
	`make_tu¶e
(¡d::
	`¡ršg
("hi"), 2, 10);

1128 
	`EXPECT_EQ
(8, 
a
.
	`P”fÜm
(
dummy
));

1129 
	}
}

1132 
	$TEST
(
W™hArgsTe¡
, 
Id’t™y
) {

1133 
AùiÚ
<(
x
, 
y
, 
z
)> 
a
 =

1134 
W™hArgs
<0, 1, 2>(
	`Invoke
(
T”Çry
));

1135 
	`EXPECT_EQ
(123, 
a
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(100, 
	`Ch¬
(20), 
	`ShÜt
(3))));

1136 
	}
}

1139 
	$TEST
(
W™hArgsTe¡
, 
R•—‹dArgum’ts
) {

1140 
AùiÚ
<(
boŞ
, 
m
, 
n
)> 
a
 =

1141 
W™hArgs
<1, 1, 1, 1>(
	`Invoke
(
SumOf4
));

1142 
	`EXPECT_EQ
(4, 
a
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(
çl£
, 1, 10)));

1143 
	}
}

1146 
	$TEST
(
W™hArgsTe¡
, 
Rev”£dArgum’tOrd”
) {

1147 
AùiÚ
<cÚ¡ *(
n
, cÚ¡ * 
šput
)> 
a
 =

1148 
W™hArgs
<1, 0>(
	`Invoke
(
Bš¬y
));

1149 cÚ¡ 
s
[] = "Hello";

1150 
	`EXPECT_EQ
(
s
 + 2, 
a
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(
	`ShÜt
(2), 
	`Ch¬PŒ
(s))));

1151 
	}
}

1154 
	$TEST
(
W™hArgsTe¡
, 
ArgsOfCom·tibËTy³s
) {

1155 
AùiÚ
<(
x
, 
y
, 
z
, 
c
)> 
a
 =

1156 
W™hArgs
<0, 1, 3>(
	`Invoke
(
T”Çry
));

1157 
	`EXPECT_EQ
(123,

1158 
a
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(
	`ShÜt
(100), 
	`Ch¬
(20), 5.6, Char(3))));

1159 
	}
}

1162 
	$TEST
(
W™hArgsTe¡
, 
VoidAùiÚ
) {

1163 
AùiÚ
<(
x
, 
c
, 
n
)> 
a
 = 
W™hArgs
<2, 1>(
	`Invoke
(
VoidBš¬y
));

1164 
g_dÚe
 = 
çl£
;

1165 
a
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(1.5, 'a', 3));

1166 
	`EXPECT_TRUE
(
g_dÚe
);

1167 
	}
}

1169 
	$TEST
(
W™hArgsTe¡
, 
R‘uºReã»nû
) {

1170 
AùiÚ
<&(&, *)> 
¯
 = 
W™hArgs
<0>([](& 
a
) -> & { ‡; });

1171 
i
 = 0;

1172 cÚ¡ & 
»s
 = 
¯
.
	`P”fÜm
(
¡d
::
	`fÜw¬d_as_tu¶e
(
i
, 
nuÎ±r
));

1173 
	`EXPECT_EQ
(&
i
, &
»s
);

1174 
	}
}

1176 
	$TEST
(
W™hArgsTe¡
, 
IÂ”AùiÚW™hCÚv”siÚ
) {

1177 
AùiÚ
<
D”ived
*()> 
šÃr
 = [] {  
nuÎ±r
; };

1178 
AùiÚ
<
Ba£
*()> 
a
 = 
‹¡šg
::
	`W™houtArgs
(
šÃr
);

1179 
	`EXPECT_EQ
(
nuÎ±r
, 
a
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(1.1)));

1180 
	}
}

1182 #ià!
GTEST_OS_WINDOWS_MOBILE


1184 şas 
	cS‘E¼noAndR‘uºTe¡
 : 
public
 
‹¡šg
::
Te¡
 {

1185 
´Ùeùed
:

1186 
S‘Up
(è
ov”ride
 { 
”ºo
 = 0; }

1187 
T—rDown
(è
	gov”ride
 { 
	g”ºo
 = 0; }

1190 
	$TEST_F
(
S‘E¼noAndR‘uºTe¡
, 
IÁ
) {

1191 
AùiÚ
<()> 
a
 = 
	`S‘E¼noAndR‘uº
(
ENOTTY
, -5);

1192 
	`EXPECT_EQ
(-5, 
a
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
()));

1193 
	`EXPECT_EQ
(
ENOTTY
, 
”ºo
);

1194 
	}
}

1196 
	$TEST_F
(
S‘E¼noAndR‘uºTe¡
, 
PŒ
) {

1197 
x
;

1198 
AùiÚ
<*()> 
a
 = 
	`S‘E¼noAndR‘uº
(
ENOTTY
, &
x
);

1199 
	`EXPECT_EQ
(&
x
, 
a
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
()));

1200 
	`EXPECT_EQ
(
ENOTTY
, 
”ºo
);

1201 
	}
}

1203 
	$TEST_F
(
S‘E¼noAndR‘uºTe¡
, 
Com·tibËTy³s
) {

1204 
AùiÚ
<()> 
a
 = 
	`S‘E¼noAndR‘uº
(
EINVAL
, 5);

1205 
	`EXPECT_DOUBLE_EQ
(5.0, 
a
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
()));

1206 
	`EXPECT_EQ
(
EINVAL
, 
”ºo
);

1207 
	}
}

1214 
	$TEST
(
ByRefTe¡
, 
IsCİyabË
) {

1215 cÚ¡ 
¡d
::
¡ršg
 
s1
 = "Hi";

1216 cÚ¡ 
¡d
::
¡ršg
 
s2
 = "Hello";

1218 autØ
»f_w¿µ”
 = 
	`ByRef
(
s1
);

1219 cÚ¡ 
¡d
::
¡ršg
& 
r1
 = 
»f_w¿µ”
;

1220 
	`EXPECT_EQ
(&
s1
, &
r1
);

1223 
»f_w¿µ”
 = 
	`ByRef
(
s2
);

1224 cÚ¡ 
¡d
::
¡ršg
& 
r2
 = 
»f_w¿µ”
;

1225 
	`EXPECT_EQ
(&
s2
, &
r2
);

1227 autØ
»f_w¿µ”1
 = 
	`ByRef
(
s1
);

1229 
»f_w¿µ”
 = 
»f_w¿µ”1
;

1230 cÚ¡ 
¡d
::
¡ršg
& 
r3
 = 
»f_w¿µ”
;

1231 
	`EXPECT_EQ
(&
s1
, &
r3
);

1232 
	}
}

1235 
	$TEST
(
ByRefTe¡
, 
CÚ¡V®ue
) {

1236 cÚ¡ 
n
 = 0;

1239 cÚ¡ & 
cÚ¡_»f
 = 
	`ByRef
(
n
);

1240 
	`EXPECT_EQ
(&
n
, &
cÚ¡_»f
);

1241 
	}
}

1244 
	$TEST
(
ByRefTe¡
, 
NÚCÚ¡V®ue
) {

1245 
n
 = 0;

1248 & 
»f
 = 
	`ByRef
(
n
);

1249 
	`EXPECT_EQ
(&
n
, &
»f
);

1252 cÚ¡ & 
cÚ¡_»f
 = 
	`ByRef
(
n
);

1253 
	`EXPECT_EQ
(&
n
, &
cÚ¡_»f
);

1254 
	}
}

1257 
	$TEST
(
ByRefTe¡
, 
Ex¶ic™Ty³
) {

1258 
n
 = 0;

1259 cÚ¡ & 
r1
 = 
ByRef
<cÚ¡ >(
n
);

1260 
	`EXPECT_EQ
(&
n
, &
r1
);

1265 
D”ived
 
d
;

1266 
D”ived
& 
r2
 = 
ByRef
<D”ived>(
d
);

1267 
	`EXPECT_EQ
(&
d
, &
r2
);

1269 cÚ¡ 
D”ived
& 
r3
 = 
ByRef
<cÚ¡ D”ived>(
d
);

1270 
	`EXPECT_EQ
(&
d
, &
r3
);

1272 
Ba£
& 
r4
 = 
ByRef
<Ba£>(
d
);

1273 
	`EXPECT_EQ
(&
d
, &
r4
);

1275 cÚ¡ 
Ba£
& 
r5
 = 
ByRef
<cÚ¡ Ba£>(
d
);

1276 
	`EXPECT_EQ
(&
d
, &
r5
);

1283 
	}
}

1286 
	$TEST
(
ByRefTe¡
, 
PrštsCÜ»ùly
) {

1287 
n
 = 42;

1288 ::
¡d
::
¡ršg¡»am
 
ex³ùed
, 
aùu®
;

1289 
‹¡šg
::
š‹º®
::
Univ”§lPrš‹r
<cÚ¡ &>::
	`Pršt
(
n
, &
ex³ùed
);

1290 
‹¡šg
::
š‹º®
::
	`Univ”§lPršt
(
	`ByRef
(
n
), &
aùu®
);

1291 
	`EXPECT_EQ
(
ex³ùed
.
	`¡r
(), 
aùu®
.str());

1292 
	}
}

1294 
	sUÇryCÚ¡ruùÜCÏss
 {

1295 
ex¶ic™
 
UÇryCÚ¡ruùÜCÏss
(
v
è: 
v®ue
(v) {}

1296 
v®ue
;

1300 
	$TEST
(
R‘uºNewTe¡
, 
UÇry
) {

1301 
AùiÚ
<
UÇryCÚ¡ruùÜCÏss
*()> 
a
 = 
R‘uºNew
<UnaryConstructorClass>(4000);

1302 
UÇryCÚ¡ruùÜCÏss
* 
c
 = 
a
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
());

1303 
	`EXPECT_EQ
(4000, 
c
->
v®ue
);

1304 
d–‘e
 
c
;

1305 
	}
}

1307 
	$TEST
(
R‘uºNewTe¡
, 
UÇryWÜksWh’MockM‘hodHasArgs
) {

1308 
AùiÚ
<
UÇryCÚ¡ruùÜCÏss
*(
boŞ
, )> 
a
 =

1309 
R‘uºNew
<
UÇryCÚ¡ruùÜCÏss
>(4000);

1310 
UÇryCÚ¡ruùÜCÏss
* 
c
 = 
a
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(
çl£
, 5));

1311 
	`EXPECT_EQ
(4000, 
c
->
v®ue
);

1312 
d–‘e
 
c
;

1313 
	}
}

1315 
	$TEST
(
R‘uºNewTe¡
, 
UÇryWÜksWh’MockM‘hodR‘uºsPoš‹rToCÚ¡
) {

1316 
AùiÚ
<cÚ¡ 
UÇryCÚ¡ruùÜCÏss
*()> 
a
 =

1317 
R‘uºNew
<
UÇryCÚ¡ruùÜCÏss
>(4000);

1318 cÚ¡ 
UÇryCÚ¡ruùÜCÏss
* 
c
 = 
a
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
());

1319 
	`EXPECT_EQ
(4000, 
c
->
v®ue
);

1320 
d–‘e
 
c
;

1321 
	}
}

1323 şas 
	cT’ArgCÚ¡ruùÜCÏss
 {

1324 
	gpublic
:

1325 
T’ArgCÚ¡ruùÜCÏss
(
a1
, 
a2
, 
a3
, 
a4
, 
a5
, 
a6
, 
a7
,

1326 
a8
, 
a9
, 
a10
)

1327 : 
v®ue_
(
a1
 + 
a2
 + 
a3
 + 
a4
 + 
a5
 + 
a6
 + 
a7
 + 
a8
 + 
a9
 + 
a10
) {}

1328 
v®ue_
;

1332 
	$TEST
(
R‘uºNewTe¡
, 
CÚ¡ruùÜTh©Takes10Argum’ts
) {

1333 
AùiÚ
<
T’ArgCÚ¡ruùÜCÏss
*()> 
a
 = 
R‘uºNew
<TenArgConstructorClass>(

1336 
T’ArgCÚ¡ruùÜCÏss
* 
c
 = 
a
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
());

1337 
	`EXPECT_EQ
(1234567890, 
c
->
v®ue_
);

1338 
d–‘e
 
c
;

1339 
	}
}

1341 
	g¡d
::
unique_±r
<> 
	$UniquePŒSourû
() {

1342  
¡d
::
unique_±r
<>(
Ãw
 (19));

1343 
	}
}

1345 
	g¡d
::
veùÜ
<
¡d
::
unique_±r
<>> 
	$VeùÜUniquePŒSourû
() {

1346 
¡d
::
veùÜ
<¡d::
unique_±r
<>> 
out
;

1347 
out
.
	`em¶aû_back
(
Ãw
 (7));

1348  
out
;

1349 
	}
}

1351 
	$TEST
(
MockM‘hodTe¡
, 
CªR‘uºMoveOÆyV®ue_R‘uº
) {

1352 
MockCÏss
 
mock
;

1353 
¡d
::
unique_±r
<> 
	`i
(
Ãw
 (19));

1354 
	`EXPECT_CALL
(
mock
, 
	`MakeUnique
()).
	`WlOnû
(
	`R‘uº
(
	`ByMove
(
¡d
::
	`move
(
i
))));

1355 
	`EXPECT_CALL
(
mock
, 
	`MakeVeùÜUnique
())

1356 .
	`WlOnû
(
	`R‘uº
(
	`ByMove
(
	`VeùÜUniquePŒSourû
())));

1357 
D”ived
* 
d
 = 
Ãw
 Derived;

1358 
	`EXPECT_CALL
(
mock
, 
	`MakeUniqueBa£
())

1359 .
	`WlOnû
(
	`R‘uº
(
	`ByMove
(
¡d
::
unique_±r
<
D”ived
>(
d
))));

1361 
¡d
::
unique_±r
<> 
»suÉ1
 = 
mock
.
	`MakeUnique
();

1362 
	`EXPECT_EQ
(19, *
»suÉ1
);

1364 
¡d
::
veùÜ
<¡d::
unique_±r
<>> 
v»suÉ
 = 
mock
.
	`MakeVeùÜUnique
();

1365 
	`EXPECT_EQ
(1u, 
v»suÉ
.
	`size
());

1366 
	`EXPECT_NE
(
nuÎ±r
, 
v»suÉ
[0]);

1367 
	`EXPECT_EQ
(7, *
v»suÉ
[0]);

1369 
¡d
::
unique_±r
<
Ba£
> 
»suÉ2
 = 
mock
.
	`MakeUniqueBa£
();

1370 
	`EXPECT_EQ
(
d
, 
»suÉ2
.
	`g‘
());

1371 
	}
}

1373 
	$TEST
(
MockM‘hodTe¡
, 
CªR‘uºMoveOÆyV®ue_DoAÎR‘uº
) {

1374 
‹¡šg
::
MockFunùiÚ
<()> 
mock_funùiÚ
;

1375 
MockCÏss
 
mock
;

1376 
¡d
::
unique_±r
<> 
	`i
(
Ãw
 (19));

1377 
	`EXPECT_CALL
(
mock_funùiÚ
, 
	`C®l
());

1378 
	`EXPECT_CALL
(
mock
, 
	`MakeUnique
()).
	`WlOnû
(
	`DoAÎ
(

1379 
	`InvokeW™houtArgs
(&
mock_funùiÚ
, &
‹¡šg
::
MockFunùiÚ
<()>::
C®l
),

1380 
	`R‘uº
(
	`ByMove
(
¡d
::
	`move
(
i
)))));

1382 
¡d
::
unique_±r
<> 
»suÉ1
 = 
mock
.
	`MakeUnique
();

1383 
	`EXPECT_EQ
(19, *
»suÉ1
);

1384 
	}
}

1386 
	$TEST
(
MockM‘hodTe¡
, 
CªR‘uºMoveOÆyV®ue_Invoke
) {

1387 
MockCÏss
 
mock
;

1390 
DeçuÉV®ue
<
¡d
::
unique_±r
<>>::
	`S‘FaùÜy
([] {

1391  
¡d
::
unique_±r
<>(
Ãw
 (42));

1393 
	`EXPECT_EQ
(42, *
mock
.
	`MakeUnique
());

1395 
	`EXPECT_CALL
(
mock
, 
	`MakeUnique
()).
	`WlR•—‹dly
(
	`Invoke
(
UniquePŒSourû
));

1396 
	`EXPECT_CALL
(
mock
, 
	`MakeVeùÜUnique
())

1397 .
	`WlR•—‹dly
(
	`Invoke
(
VeùÜUniquePŒSourû
));

1398 
¡d
::
unique_±r
<> 
»suÉ1
 = 
mock
.
	`MakeUnique
();

1399 
	`EXPECT_EQ
(19, *
»suÉ1
);

1400 
¡d
::
unique_±r
<> 
»suÉ2
 = 
mock
.
	`MakeUnique
();

1401 
	`EXPECT_EQ
(19, *
»suÉ2
);

1402 
	`EXPECT_NE
(
»suÉ1
, 
»suÉ2
);

1404 
¡d
::
veùÜ
<¡d::
unique_±r
<>> 
v»suÉ
 = 
mock
.
	`MakeVeùÜUnique
();

1405 
	`EXPECT_EQ
(1u, 
v»suÉ
.
	`size
());

1406 
	`EXPECT_NE
(
nuÎ±r
, 
v»suÉ
[0]);

1407 
	`EXPECT_EQ
(7, *
v»suÉ
[0]);

1408 
	}
}

1410 
	$TEST
(
MockM‘hodTe¡
, 
CªTakeMoveOÆyV®ue
) {

1411 
MockCÏss
 
mock
;

1412 autØ
make
 = [](
i
è{  
¡d
::
unique_±r
<>(
Ãw
 (i)); };

1414 
	`EXPECT_CALL
(
mock
, 
	`TakeUnique
(
_
)).
	`WlR•—‹dly
([](
¡d
::
unique_±r
<> 
i
) {

1415  *
i
;

1421 
	`EXPECT_CALL
(
mock
, 
	`TakeUnique
(
‹¡šg
::
	`Poš‹e
(7)))

1422 .
	`WlOnû
(
	`R‘uº
(-7))

1423 .
	`R‘œesOnS©u¿tiÚ
();

1424 
	`EXPECT_CALL
(
mock
, 
	`TakeUnique
(
‹¡šg
::
	`IsNuÎ
()))

1425 .
	`WlOnû
(
	`R‘uº
(-1))

1426 .
	`R‘œesOnS©u¿tiÚ
();

1428 
	`EXPECT_EQ
(5, 
mock
.
	`TakeUnique
(
	`make
(5)));

1429 
	`EXPECT_EQ
(-7, 
mock
.
	`TakeUnique
(
	`make
(7)));

1430 
	`EXPECT_EQ
(7, 
mock
.
	`TakeUnique
(
	`make
(7)));

1431 
	`EXPECT_EQ
(7, 
mock
.
	`TakeUnique
(
	`make
(7)));

1432 
	`EXPECT_EQ
(-1, 
mock
.
	`TakeUnique
({}));

1435 autØ
lv®ue
 = 
	`make
(6);

1436 
	`EXPECT_CALL
(
mock
, 
	`TakeUnique
(
_
, _))

1437 .
	`WlOnû
([](cÚ¡ 
¡d
::
unique_±r
<>& 
i
, std::unique_±r<> 
j
) {

1438  *
i
 * *
j
;

1440 
	`EXPECT_EQ
(42, 
mock
.
	`TakeUnique
(
lv®ue
, 
	`make
(7)));

1443 
¡d
::
unique_±r
<> 
§ved
;

1444 
	`EXPECT_CALL
(
mock
, 
	`TakeUnique
(
_
)).
	`WlOnû
([&
§ved
](
¡d
::
unique_±r
<> 
i
) {

1445 
§ved
 = 
¡d
::
	`move
(
i
);

1448 
	`EXPECT_EQ
(0, 
mock
.
	`TakeUnique
(
	`make
(42)));

1449 
	`EXPECT_EQ
(42, *
§ved
);

1450 
	}
}

1455 
	$Add
(
v®
, & 
»f
, * 
±r
) {

1456 
»suÉ
 = 
v®
 + 
»f
 + *
±r
;

1457 
»f
 = 42;

1458 *
±r
 = 43;

1459  
»suÉ
;

1460 
	}
}

1462 
D”ef
(
¡d
::
unique_±r
<> 
±r
) {  *ptr; }

1464 
	sDoubË
 {

1465 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

1466 
T
 
İ”©Ü
()(T 
	gt
) {  2 *; }

1469 
	g¡d
::
unique_±r
<> 
	$UniqueIÁ
(
i
) {

1470  
¡d
::
unique_±r
<>(
Ãw
 (
i
));

1471 
	}
}

1473 
	$TEST
(
FunùÜAùiÚTe¡
, 
AùiÚFromFunùiÚ
) {

1474 
AùiÚ
<(, &, *)> 
a
 = &
Add
;

1475 
x
 = 1, 
y
 = 2, 
z
 = 3;

1476 
	`EXPECT_EQ
(6, 
a
.
	`P”fÜm
(
¡d
::
	`fÜw¬d_as_tu¶e
(
x
, 
y
, &
z
)));

1477 
	`EXPECT_EQ
(42, 
y
);

1478 
	`EXPECT_EQ
(43, 
z
);

1480 
AùiÚ
<(
¡d
::
unique_±r
<>)> 
a1
 = &
D”ef
;

1481 
	`EXPECT_EQ
(7, 
a1
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(
	`UniqueIÁ
(7))));

1482 
	}
}

1484 
	$TEST
(
FunùÜAùiÚTe¡
, 
AùiÚFromLambda
) {

1485 
AùiÚ
<(
boŞ
, )> 
a1
 = [](boŞ 
b
, 
i
) {  b ? i : 0; };

1486 
	`EXPECT_EQ
(5, 
a1
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(
Œue
, 5)));

1487 
	`EXPECT_EQ
(0, 
a1
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(
çl£
, 5)));

1489 
¡d
::
unique_±r
<> 
§ved
;

1490 
AùiÚ
<(
¡d
::
unique_±r
<>)> 
a2
 = [&
§ved
](¡d::unique_±r<> 
p
) {

1491 
§ved
 = 
¡d
::
	`move
(
p
);

1493 
a2
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(
	`UniqueIÁ
(5)));

1494 
	`EXPECT_EQ
(5, *
§ved
);

1495 
	}
}

1497 
	$TEST
(
FunùÜAùiÚTe¡
, 
PŞymÜphicFunùÜ
) {

1498 
AùiÚ
<()> 
ai
 = 
	`DoubË
();

1499 
	`EXPECT_EQ
(2, 
ai
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(1)));

1500 
AùiÚ
<()> 
ad
 = 
	`DoubË
();

1501 
	`EXPECT_EQ
(3.0, 
ad
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(1.5)));

1502 
	}
}

1504 
	$TEST
(
FunùÜAùiÚTe¡
, 
Ty³CÚv”siÚ
) {

1506 cÚ¡ 
AùiÚ
<
	`boŞ
()> 
a1
 = [](
i
) {  i > 1; };

1507 cÚ¡ 
AùiÚ
<(
boŞ
)> 
a2
 = AùiÚ<(boŞ)>(
a1
);

1508 
	`EXPECT_EQ
(1, 
a1
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(42)));

1509 
	`EXPECT_EQ
(0, 
a2
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(42)));

1512 cÚ¡ 
AùiÚ
<
	`boŞ
(
¡d
::
¡ršg
)> 
s1
 = [](¡d::¡ršg 
s
è{  !s.
	`em±y
(); };

1513 cÚ¡ 
AùiÚ
<(cÚ¡ *)> 
s2
 = AùiÚ<(cÚ¡ *)>(
s1
);

1514 
	`EXPECT_EQ
(0, 
s2
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
("")));

1515 
	`EXPECT_EQ
(1, 
s2
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
("hello")));

1518 cÚ¡ 
AùiÚ
<
	`boŞ
(
¡d
::
¡ršg
)> 
x1
 = [](
Unu£d
) {  42; };

1519 cÚ¡ 
AùiÚ
<
	`boŞ
(
¡d
::
¡ršg
)> 
x2
 = [] {  42; };

1520 
	`EXPECT_TRUE
(
x1
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
("hello")));

1521 
	`EXPECT_TRUE
(
x2
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
("hello")));

1524 
¡d
::
funùiÚ
<()> 
f
 = [] {  7; };

1525 
AùiÚ
<()> 
d
 = 
f
;

1526 
f
 = 
nuÎ±r
;

1527 
	`EXPECT_EQ
(7, 
d
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(1)));

1530 
AùiÚ
<()>(
nuÎ±r
);

1531 
	}
}

1533 
	$TEST
(
FunùÜAùiÚTe¡
, 
Unu£dArgum’ts
) {

1535 
AùiÚ
<(, 
y
, 
z
)> 
a
 =

1536 [](
i
, 
Unu£d
, Unused) {  2 * i; };

1537 
¡d
::
tu¶e
<, , > 
dummy
 = std::
	`make_tu¶e
(3, 7.3, 9.44);

1538 
	`EXPECT_EQ
(6, 
a
.
	`P”fÜm
(
dummy
));

1539 
	}
}

1542 
	$TEST
(
MoveOÆyArgum’tsTe¡
, 
R‘uºšgAùiÚs
) {

1543 
AùiÚ
<(
¡d
::
unique_±r
<>)> 
a
 = 
	`R‘uº
(1);

1544 
	`EXPECT_EQ
(1, 
a
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(
nuÎ±r
)));

1546 
a
 = 
‹¡šg
::
	`W™houtArgs
([]() {  7; });

1547 
	`EXPECT_EQ
(7, 
a
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(
nuÎ±r
)));

1549 
AùiÚ
<(
¡d
::
unique_±r
<>, *)> 
a2
 = 
‹¡šg
::
S‘ArgPoš‹e
<1>(3);

1550 
x
 = 0;

1551 
a2
.
	`P”fÜm
(
¡d
::
	`make_tu¶e
(
nuÎ±r
, &
x
));

1552 
	`EXPECT_EQ
(
x
, 3);

1553 
	}
}

1555 
	$ACTION
(
R‘uºAr™y
) {

1556  
¡d
::
tu¶e_size
<
¬gs_ty³
>::
v®ue
;

1557 
	}
}

1559 
	$TEST
(
AùiÚMaüo
, 
L¬geAr™y
) {

1560 
	`EXPECT_EQ
(

1561 1, 
‹¡šg
::
AùiÚ
<()>(
	`R‘uºAr™y
()).
	`P”fÜm
(
¡d
::
	`make_tu¶e
(0)));

1562 
	`EXPECT_EQ
(

1564 
‹¡šg
::
AùiÚ
<(, , , , , , , , , )>(

1565 
	`R‘uºAr™y
())

1566 .
	`P”fÜm
(
¡d
::
	`make_tu¶e
(0, 1, 2, 3, 4, 5, 6, 7, 8, 9)));

1567 
	`EXPECT_EQ
(

1569 
‹¡šg
::
AùiÚ
<(, , , , , , , , , , ,

1571 
	`R‘uºAr™y
())

1572 .
	`P”fÜm
(
¡d
::
	`make_tu¶e
(0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13,

1574 
	}
}

1578 #ifdeà
_MSC_VER


1579 #ià
_MSC_VER
 == 1900

1580 #´agm¨
w¬nšg
(
pİ
)

	@third_party/googletest/googlemock/test/gmock-cardinalities_test.cc

35 
	~"gmock/gmock.h
"

36 
	~"g‹¡/g‹¡.h
"

37 
	~"g‹¡/g‹¡-¥i.h
"

39 
	gÇme¥aû
 {

41 
usšg
 
	g¡d
::
¡ršg¡»am
;

42 
usšg
 
	g‹¡šg
::
AnyNumb”
;

43 
usšg
 
	g‹¡šg
::
AtL—¡
;

44 
usšg
 
	g‹¡šg
::
AtMo¡
;

45 
usšg
 
	g‹¡šg
::
B‘w“n
;

46 
usšg
 
	g‹¡šg
::
C¬dš®™y
;

47 
usšg
 
	g‹¡šg
::
C¬dš®™yIÁ”çû
;

48 
usšg
 
	g‹¡šg
::
Exaùly
;

49 
usšg
 
	g‹¡šg
::
IsSub¡ršg
;

50 
usšg
 
	g‹¡šg
::
MakeC¬dš®™y
;

52 şas 
	cMockFoo
 {

53 
	gpublic
:

54 
MockFoo
() {}

55 
MOCK_METHOD0
(
B¬
, ());

57 
	g´iv©e
:

58 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
MockFoo
);

62 
	$TEST
(
C¬dš®™yTe¡
, 
IsDeçuÉCÚ¡ruùabË
) {

63 
C¬dš®™y
 
c
;

64 
	}
}

67 
	$TEST
(
C¬dš®™yTe¡
, 
IsCİyabË
) {

69 
C¬dš®™y
 
c
 = 
	`Exaùly
(1);

70 
	`EXPECT_FALSE
(
c
.
	`IsS©isf›dByC®lCouÁ
(0));

71 
	`EXPECT_TRUE
(
c
.
	`IsS©isf›dByC®lCouÁ
(1));

72 
	`EXPECT_TRUE
(
c
.
	`IsS©u¿‹dByC®lCouÁ
(1));

75 
c
 = 
	`Exaùly
(2);

76 
	`EXPECT_FALSE
(
c
.
	`IsS©isf›dByC®lCouÁ
(1));

77 
	`EXPECT_TRUE
(
c
.
	`IsS©isf›dByC®lCouÁ
(2));

78 
	`EXPECT_TRUE
(
c
.
	`IsS©u¿‹dByC®lCouÁ
(2));

79 
	}
}

81 
	$TEST
(
C¬dš®™yTe¡
, 
IsOv”S©u¿‹dByC®lCouÁWÜks
) {

82 cÚ¡ 
C¬dš®™y
 
c
 = 
	`AtMo¡
(5);

83 
	`EXPECT_FALSE
(
c
.
	`IsOv”S©u¿‹dByC®lCouÁ
(4));

84 
	`EXPECT_FALSE
(
c
.
	`IsOv”S©u¿‹dByC®lCouÁ
(5));

85 
	`EXPECT_TRUE
(
c
.
	`IsOv”S©u¿‹dByC®lCouÁ
(6));

86 
	}
}

90 
	$TEST
(
C¬dš®™yTe¡
, 
CªDesüibeAùu®C®lCouÁ
) {

91 
¡ršg¡»am
 
ss0
;

92 
C¬dš®™y
::
	`DesüibeAùu®C®lCouÁTo
(0, &
ss0
);

93 
	`EXPECT_EQ
("Ãv” c®Ëd", 
ss0
.
	`¡r
());

95 
¡ršg¡»am
 
ss1
;

96 
C¬dš®™y
::
	`DesüibeAùu®C®lCouÁTo
(1, &
ss1
);

97 
	`EXPECT_EQ
("ÿÎed onû", 
ss1
.
	`¡r
());

99 
¡ršg¡»am
 
ss2
;

100 
C¬dš®™y
::
	`DesüibeAùu®C®lCouÁTo
(2, &
ss2
);

101 
	`EXPECT_EQ
("ÿÎedwiû", 
ss2
.
	`¡r
());

103 
¡ršg¡»am
 
ss3
;

104 
C¬dš®™y
::
	`DesüibeAùu®C®lCouÁTo
(3, &
ss3
);

105 
	`EXPECT_EQ
("ÿÎed 3imes", 
ss3
.
	`¡r
());

106 
	}
}

109 
	$TEST
(
AnyNumb”
, 
WÜks
) {

110 cÚ¡ 
C¬dš®™y
 
c
 = 
	`AnyNumb”
();

111 
	`EXPECT_TRUE
(
c
.
	`IsS©isf›dByC®lCouÁ
(0));

112 
	`EXPECT_FALSE
(
c
.
	`IsS©u¿‹dByC®lCouÁ
(0));

114 
	`EXPECT_TRUE
(
c
.
	`IsS©isf›dByC®lCouÁ
(1));

115 
	`EXPECT_FALSE
(
c
.
	`IsS©u¿‹dByC®lCouÁ
(1));

117 
	`EXPECT_TRUE
(
c
.
	`IsS©isf›dByC®lCouÁ
(9));

118 
	`EXPECT_FALSE
(
c
.
	`IsS©u¿‹dByC®lCouÁ
(9));

120 
¡ršg¡»am
 
ss
;

121 
c
.
	`DesüibeTo
(&
ss
);

122 
	`EXPECT_PRED_FORMAT2
(
IsSub¡ršg
, "called‡ny‚umber ofimes",

123 
ss
.
	`¡r
());

124 
	}
}

126 
	$TEST
(
AnyNumb”Te¡
, 
HasCÜ»ùBounds
) {

127 cÚ¡ 
C¬dš®™y
 
c
 = 
	`AnyNumb”
();

128 
	`EXPECT_EQ
(0, 
c
.
	`CÚ£rv©iveLow”Bound
());

129 
	`EXPECT_EQ
(
INT_MAX
, 
c
.
	`CÚ£rv©iveUµ”Bound
());

130 
	}
}

134 
	$TEST
(
AtL—¡Te¡
, 
OnNeg©iveNumb”
) {

135 
	`EXPECT_NONFATAL_FAILURE
({

136 
	`AtL—¡
(-1);

138 
	}
}

140 
	$TEST
(
AtL—¡Te¡
, 
OnZ”o
) {

141 cÚ¡ 
C¬dš®™y
 
c
 = 
	`AtL—¡
(0);

142 
	`EXPECT_TRUE
(
c
.
	`IsS©isf›dByC®lCouÁ
(0));

143 
	`EXPECT_FALSE
(
c
.
	`IsS©u¿‹dByC®lCouÁ
(0));

145 
	`EXPECT_TRUE
(
c
.
	`IsS©isf›dByC®lCouÁ
(1));

146 
	`EXPECT_FALSE
(
c
.
	`IsS©u¿‹dByC®lCouÁ
(1));

148 
¡ršg¡»am
 
ss
;

149 
c
.
	`DesüibeTo
(&
ss
);

150 
	`EXPECT_PRED_FORMAT2
(
IsSub¡ršg
, "any‚umber ofimes",

151 
ss
.
	`¡r
());

152 
	}
}

154 
	$TEST
(
AtL—¡Te¡
, 
OnPos™iveNumb”
) {

155 cÚ¡ 
C¬dš®™y
 
c
 = 
	`AtL—¡
(2);

156 
	`EXPECT_FALSE
(
c
.
	`IsS©isf›dByC®lCouÁ
(0));

157 
	`EXPECT_FALSE
(
c
.
	`IsS©u¿‹dByC®lCouÁ
(0));

159 
	`EXPECT_FALSE
(
c
.
	`IsS©isf›dByC®lCouÁ
(1));

160 
	`EXPECT_FALSE
(
c
.
	`IsS©u¿‹dByC®lCouÁ
(1));

162 
	`EXPECT_TRUE
(
c
.
	`IsS©isf›dByC®lCouÁ
(2));

163 
	`EXPECT_FALSE
(
c
.
	`IsS©u¿‹dByC®lCouÁ
(2));

165 
¡ršg¡»am
 
ss1
;

166 
	`AtL—¡
(1).
	`DesüibeTo
(&
ss1
);

167 
	`EXPECT_PRED_FORMAT2
(
IsSub¡ršg
, "at†east once",

168 
ss1
.
	`¡r
());

170 
¡ršg¡»am
 
ss2
;

171 
c
.
	`DesüibeTo
(&
ss2
);

172 
	`EXPECT_PRED_FORMAT2
(
IsSub¡ršg
, "at†eastwice",

173 
ss2
.
	`¡r
());

175 
¡ršg¡»am
 
ss3
;

176 
	`AtL—¡
(3).
	`DesüibeTo
(&
ss3
);

177 
	`EXPECT_PRED_FORMAT2
(
IsSub¡ršg
, "at†east 3imes",

178 
ss3
.
	`¡r
());

179 
	}
}

181 
	$TEST
(
AtL—¡Te¡
, 
HasCÜ»ùBounds
) {

182 cÚ¡ 
C¬dš®™y
 
c
 = 
	`AtL—¡
(2);

183 
	`EXPECT_EQ
(2, 
c
.
	`CÚ£rv©iveLow”Bound
());

184 
	`EXPECT_EQ
(
INT_MAX
, 
c
.
	`CÚ£rv©iveUµ”Bound
());

185 
	}
}

189 
	$TEST
(
AtMo¡Te¡
, 
OnNeg©iveNumb”
) {

190 
	`EXPECT_NONFATAL_FAILURE
({

191 
	`AtMo¡
(-1);

193 
	}
}

195 
	$TEST
(
AtMo¡Te¡
, 
OnZ”o
) {

196 cÚ¡ 
C¬dš®™y
 
c
 = 
	`AtMo¡
(0);

197 
	`EXPECT_TRUE
(
c
.
	`IsS©isf›dByC®lCouÁ
(0));

198 
	`EXPECT_TRUE
(
c
.
	`IsS©u¿‹dByC®lCouÁ
(0));

200 
	`EXPECT_FALSE
(
c
.
	`IsS©isf›dByC®lCouÁ
(1));

201 
	`EXPECT_TRUE
(
c
.
	`IsS©u¿‹dByC®lCouÁ
(1));

203 
¡ršg¡»am
 
ss
;

204 
c
.
	`DesüibeTo
(&
ss
);

205 
	`EXPECT_PRED_FORMAT2
(
IsSub¡ršg
, "never called",

206 
ss
.
	`¡r
());

207 
	}
}

209 
	$TEST
(
AtMo¡Te¡
, 
OnPos™iveNumb”
) {

210 cÚ¡ 
C¬dš®™y
 
c
 = 
	`AtMo¡
(2);

211 
	`EXPECT_TRUE
(
c
.
	`IsS©isf›dByC®lCouÁ
(0));

212 
	`EXPECT_FALSE
(
c
.
	`IsS©u¿‹dByC®lCouÁ
(0));

214 
	`EXPECT_TRUE
(
c
.
	`IsS©isf›dByC®lCouÁ
(1));

215 
	`EXPECT_FALSE
(
c
.
	`IsS©u¿‹dByC®lCouÁ
(1));

217 
	`EXPECT_TRUE
(
c
.
	`IsS©isf›dByC®lCouÁ
(2));

218 
	`EXPECT_TRUE
(
c
.
	`IsS©u¿‹dByC®lCouÁ
(2));

220 
¡ršg¡»am
 
ss1
;

221 
	`AtMo¡
(1).
	`DesüibeTo
(&
ss1
);

222 
	`EXPECT_PRED_FORMAT2
(
IsSub¡ršg
, "called‡t most once",

223 
ss1
.
	`¡r
());

225 
¡ršg¡»am
 
ss2
;

226 
c
.
	`DesüibeTo
(&
ss2
);

227 
	`EXPECT_PRED_FORMAT2
(
IsSub¡ršg
, "called‡t mostwice",

228 
ss2
.
	`¡r
());

230 
¡ršg¡»am
 
ss3
;

231 
	`AtMo¡
(3).
	`DesüibeTo
(&
ss3
);

232 
	`EXPECT_PRED_FORMAT2
(
IsSub¡ršg
, "called‡t most 3imes",

233 
ss3
.
	`¡r
());

234 
	}
}

236 
	$TEST
(
AtMo¡Te¡
, 
HasCÜ»ùBounds
) {

237 cÚ¡ 
C¬dš®™y
 
c
 = 
	`AtMo¡
(2);

238 
	`EXPECT_EQ
(0, 
c
.
	`CÚ£rv©iveLow”Bound
());

239 
	`EXPECT_EQ
(2, 
c
.
	`CÚ£rv©iveUµ”Bound
());

240 
	}
}

244 
	$TEST
(
B‘w“nTe¡
, 
OnNeg©iveS¹
) {

245 
	`EXPECT_NONFATAL_FAILURE
({

246 
	`B‘w“n
(-1, 2);

248 
	}
}

250 
	$TEST
(
B‘w“nTe¡
, 
OnNeg©iveEnd
) {

251 
	`EXPECT_NONFATAL_FAILURE
({

252 
	`B‘w“n
(1, -2);

254 
	}
}

256 
	$TEST
(
B‘w“nTe¡
, 
OnS¹Bigg”ThªEnd
) {

257 
	`EXPECT_NONFATAL_FAILURE
({

258 
	`B‘w“n
(2, 1);

261 
	}
}

263 
	$TEST
(
B‘w“nTe¡
, 
OnZ”oS¹AndZ”oEnd
) {

264 cÚ¡ 
C¬dš®™y
 
c
 = 
	`B‘w“n
(0, 0);

266 
	`EXPECT_TRUE
(
c
.
	`IsS©isf›dByC®lCouÁ
(0));

267 
	`EXPECT_TRUE
(
c
.
	`IsS©u¿‹dByC®lCouÁ
(0));

269 
	`EXPECT_FALSE
(
c
.
	`IsS©isf›dByC®lCouÁ
(1));

270 
	`EXPECT_TRUE
(
c
.
	`IsS©u¿‹dByC®lCouÁ
(1));

272 
¡ršg¡»am
 
ss
;

273 
c
.
	`DesüibeTo
(&
ss
);

274 
	`EXPECT_PRED_FORMAT2
(
IsSub¡ršg
, "never called",

275 
ss
.
	`¡r
());

276 
	}
}

278 
	$TEST
(
B‘w“nTe¡
, 
OnZ”oS¹AndNÚZ”oEnd
) {

279 cÚ¡ 
C¬dš®™y
 
c
 = 
	`B‘w“n
(0, 2);

281 
	`EXPECT_TRUE
(
c
.
	`IsS©isf›dByC®lCouÁ
(0));

282 
	`EXPECT_FALSE
(
c
.
	`IsS©u¿‹dByC®lCouÁ
(0));

284 
	`EXPECT_TRUE
(
c
.
	`IsS©isf›dByC®lCouÁ
(2));

285 
	`EXPECT_TRUE
(
c
.
	`IsS©u¿‹dByC®lCouÁ
(2));

287 
	`EXPECT_FALSE
(
c
.
	`IsS©isf›dByC®lCouÁ
(4));

288 
	`EXPECT_TRUE
(
c
.
	`IsS©u¿‹dByC®lCouÁ
(4));

290 
¡ršg¡»am
 
ss
;

291 
c
.
	`DesüibeTo
(&
ss
);

292 
	`EXPECT_PRED_FORMAT2
(
IsSub¡ršg
, "called‡t mostwice",

293 
ss
.
	`¡r
());

294 
	}
}

296 
	$TEST
(
B‘w“nTe¡
, 
OnSameS¹AndEnd
) {

297 cÚ¡ 
C¬dš®™y
 
c
 = 
	`B‘w“n
(3, 3);

299 
	`EXPECT_FALSE
(
c
.
	`IsS©isf›dByC®lCouÁ
(2));

300 
	`EXPECT_FALSE
(
c
.
	`IsS©u¿‹dByC®lCouÁ
(2));

302 
	`EXPECT_TRUE
(
c
.
	`IsS©isf›dByC®lCouÁ
(3));

303 
	`EXPECT_TRUE
(
c
.
	`IsS©u¿‹dByC®lCouÁ
(3));

305 
	`EXPECT_FALSE
(
c
.
	`IsS©isf›dByC®lCouÁ
(4));

306 
	`EXPECT_TRUE
(
c
.
	`IsS©u¿‹dByC®lCouÁ
(4));

308 
¡ršg¡»am
 
ss
;

309 
c
.
	`DesüibeTo
(&
ss
);

310 
	`EXPECT_PRED_FORMAT2
(
IsSub¡ršg
, "called 3imes",

311 
ss
.
	`¡r
());

312 
	}
}

314 
	$TEST
(
B‘w“nTe¡
, 
OnDifã»ÁS¹AndEnd
) {

315 cÚ¡ 
C¬dš®™y
 
c
 = 
	`B‘w“n
(3, 5);

317 
	`EXPECT_FALSE
(
c
.
	`IsS©isf›dByC®lCouÁ
(2));

318 
	`EXPECT_FALSE
(
c
.
	`IsS©u¿‹dByC®lCouÁ
(2));

320 
	`EXPECT_TRUE
(
c
.
	`IsS©isf›dByC®lCouÁ
(3));

321 
	`EXPECT_FALSE
(
c
.
	`IsS©u¿‹dByC®lCouÁ
(3));

323 
	`EXPECT_TRUE
(
c
.
	`IsS©isf›dByC®lCouÁ
(5));

324 
	`EXPECT_TRUE
(
c
.
	`IsS©u¿‹dByC®lCouÁ
(5));

326 
	`EXPECT_FALSE
(
c
.
	`IsS©isf›dByC®lCouÁ
(6));

327 
	`EXPECT_TRUE
(
c
.
	`IsS©u¿‹dByC®lCouÁ
(6));

329 
¡ršg¡»am
 
ss
;

330 
c
.
	`DesüibeTo
(&
ss
);

331 
	`EXPECT_PRED_FORMAT2
(
IsSub¡ršg
, "called between 3‡nd 5imes",

332 
ss
.
	`¡r
());

333 
	}
}

335 
	$TEST
(
B‘w“nTe¡
, 
HasCÜ»ùBounds
) {

336 cÚ¡ 
C¬dš®™y
 
c
 = 
	`B‘w“n
(3, 5);

337 
	`EXPECT_EQ
(3, 
c
.
	`CÚ£rv©iveLow”Bound
());

338 
	`EXPECT_EQ
(5, 
c
.
	`CÚ£rv©iveUµ”Bound
());

339 
	}
}

343 
	$TEST
(
ExaùlyTe¡
, 
OnNeg©iveNumb”
) {

344 
	`EXPECT_NONFATAL_FAILURE
({

345 
	`Exaùly
(-1);

347 
	}
}

349 
	$TEST
(
ExaùlyTe¡
, 
OnZ”o
) {

350 cÚ¡ 
C¬dš®™y
 
c
 = 
	`Exaùly
(0);

351 
	`EXPECT_TRUE
(
c
.
	`IsS©isf›dByC®lCouÁ
(0));

352 
	`EXPECT_TRUE
(
c
.
	`IsS©u¿‹dByC®lCouÁ
(0));

354 
	`EXPECT_FALSE
(
c
.
	`IsS©isf›dByC®lCouÁ
(1));

355 
	`EXPECT_TRUE
(
c
.
	`IsS©u¿‹dByC®lCouÁ
(1));

357 
¡ršg¡»am
 
ss
;

358 
c
.
	`DesüibeTo
(&
ss
);

359 
	`EXPECT_PRED_FORMAT2
(
IsSub¡ršg
, "never called",

360 
ss
.
	`¡r
());

361 
	}
}

363 
	$TEST
(
ExaùlyTe¡
, 
OnPos™iveNumb”
) {

364 cÚ¡ 
C¬dš®™y
 
c
 = 
	`Exaùly
(2);

365 
	`EXPECT_FALSE
(
c
.
	`IsS©isf›dByC®lCouÁ
(0));

366 
	`EXPECT_FALSE
(
c
.
	`IsS©u¿‹dByC®lCouÁ
(0));

368 
	`EXPECT_TRUE
(
c
.
	`IsS©isf›dByC®lCouÁ
(2));

369 
	`EXPECT_TRUE
(
c
.
	`IsS©u¿‹dByC®lCouÁ
(2));

371 
¡ršg¡»am
 
ss1
;

372 
	`Exaùly
(1).
	`DesüibeTo
(&
ss1
);

373 
	`EXPECT_PRED_FORMAT2
(
IsSub¡ršg
, "called once",

374 
ss1
.
	`¡r
());

376 
¡ršg¡»am
 
ss2
;

377 
c
.
	`DesüibeTo
(&
ss2
);

378 
	`EXPECT_PRED_FORMAT2
(
IsSub¡ršg
, "calledwice",

379 
ss2
.
	`¡r
());

381 
¡ršg¡»am
 
ss3
;

382 
	`Exaùly
(3).
	`DesüibeTo
(&
ss3
);

383 
	`EXPECT_PRED_FORMAT2
(
IsSub¡ršg
, "called 3imes",

384 
ss3
.
	`¡r
());

385 
	}
}

387 
	$TEST
(
ExaùlyTe¡
, 
HasCÜ»ùBounds
) {

388 cÚ¡ 
C¬dš®™y
 
c
 = 
	`Exaùly
(3);

389 
	`EXPECT_EQ
(3, 
c
.
	`CÚ£rv©iveLow”Bound
());

390 
	`EXPECT_EQ
(3, 
c
.
	`CÚ£rv©iveUµ”Bound
());

391 
	}
}

396 şas 
	cEv’C¬dš®™y
 : 
public
 
C¬dš®™yIÁ”çû
 {

397 
public
:

400 
boŞ
 
IsS©isf›dByC®lCouÁ
(
ÿÎ_couÁ
ècÚ¡ 
ov”ride
 {

401  (
ÿÎ_couÁ
 % 2 == 0);

406 
boŞ
 
IsS©u¿‹dByC®lCouÁ
(ècÚ¡ 
	gov”ride
 {

407  
	gçl£
;

411 
DesüibeTo
(::
¡d
::
o¡»am
* 
ss
ècÚ¡ 
ov”ride
 {

412 *
ss
 << "calledƒven‚umber ofimes";

416 
	$TEST
(
MakeC¬dš®™yTe¡
, 
CÚ¡ruùsC¬dš®™yFromIÁ”çû
) {

417 cÚ¡ 
C¬dš®™y
 
c
 = 
	`MakeC¬dš®™y
(
Ãw
 
Ev’C¬dš®™y
);

419 
	`EXPECT_TRUE
(
c
.
	`IsS©isf›dByC®lCouÁ
(2));

420 
	`EXPECT_FALSE
(
c
.
	`IsS©isf›dByC®lCouÁ
(3));

422 
	`EXPECT_FALSE
(
c
.
	`IsS©u¿‹dByC®lCouÁ
(10000));

424 
¡ršg¡»am
 
ss
;

425 
c
.
	`DesüibeTo
(&
ss
);

426 
	`EXPECT_EQ
("ÿÎedƒv’‚umb” oàtimes", 
ss
.
	`¡r
());

427 
	}
}

	@third_party/googletest/googlemock/test/gmock-function-mocker_test.cc

34 
	~"gmock/gmock-funùiÚ-mock”.h
"

36 #ià
GTEST_OS_WINDOWS


40 
	~<objba£.h
>

43 
	~<funùiÚ®
>

44 
	~<m­
>

45 
	~<¡ršg
>

46 
	~<ty³_Œa™s
>

48 
	~"gmock/gmock.h
"

49 
	~"g‹¡/g‹¡.h
"

51 
Çme¥aû
 
	g‹¡šg
 {

52 
Çme¥aû
 
	ggmock_funùiÚ_mock”_‹¡
 {

54 
usšg
 
	g‹¡šg
::
_
;

55 
usšg
 
	g‹¡šg
::
A
;

56 
usšg
 
	g‹¡šg
::
An
;

57 
usšg
 
	g‹¡šg
::
AnyNumb”
;

58 
usšg
 
	g‹¡šg
::
CÚ¡
;

59 
usšg
 
	g‹¡šg
::
DoDeçuÉ
;

60 
usšg
 
	g‹¡šg
::
Eq
;

61 
usšg
 
	g‹¡šg
::
Lt
;

62 
usšg
 
	g‹¡šg
::
MockFunùiÚ
;

63 
usšg
 
	g‹¡šg
::
Ref
;

64 
usšg
 
	g‹¡šg
::
R‘uº
;

65 
usšg
 
	g‹¡šg
::
R‘uºRef
;

66 
usšg
 
	g‹¡šg
::
Ty³dEq
;

68 
	g‹m¶©e
<
ty³Çme
 
	gT
>

69 şas 
	cTem¶©edCİyabË
 {

70 
	gpublic
:

71 
Tem¶©edCİyabË
() {}

73 
‹m¶©e
 <
ty³Çme
 
U
>

74 
Tem¶©edCİyabË
(cÚ¡ 
U
& 
Ùh”
) {}

77 şas 
	cFooIÁ”çû
 {

78 
	gpublic
:

79 
vœtu®
 ~
FooIÁ”çû
() {}

81 
vœtu®
 
VoidR‘uºšg
(
x
) = 0;

83 
vœtu®
 
NuÎ¬y
() = 0;

84 
vœtu®
 
boŞ
 
UÇry
(
x
) = 0;

85 
vœtu®
 
Bš¬y
(
x
, 
y
) = 0;

86 
vœtu®
 
Decim®
(
boŞ
 
b
, 
c
, 
d
, 
e
, 
f
,

87 
g
, 
h
, 
i
, * 
j
,

88 cÚ¡ 
¡d
::
¡ršg
& 
k
) = 0;

90 
vœtu®
 
boŞ
 
TakesNÚCÚ¡Reã»nû
(& 
n
) = 0;

91 
vœtu®
 
	g¡d
::
¡ršg
 
TakesCÚ¡Reã»nû
(cÚ¡ & 
n
) = 0;

92 
vœtu®
 
boŞ
 
TakesCÚ¡
(cÚ¡ 
x
) = 0;

94 
vœtu®
 
Ov”lßdedOnArgum’tNumb”
() = 0;

95 
vœtu®
 
Ov”lßdedOnArgum’tNumb”
(
n
) = 0;

97 
vœtu®
 
Ov”lßdedOnArgum’tTy³
(
n
) = 0;

98 
vœtu®
 
Ov”lßdedOnArgum’tTy³
(
c
) = 0;

100 
vœtu®
 
Ov”lßdedOnCÚ¡Ãss
() = 0;

101 
vœtu®
 
Ov”lßdedOnCÚ¡Ãss
() const = 0;

103 
vœtu®
 
Ty³W™hHŞe
((*
func
)()) = 0;

104 
vœtu®
 
Ty³W™hComma
(cÚ¡ 
¡d
::
m­
<, std::
¡ršg
>& 
a_m­
) = 0;

105 
vœtu®
 
Ty³W™hTem¶©edCİyCtÜ
(cÚ¡ 
Tem¶©edCİyabË
<>&) = 0;

107 
vœtu®
 (*
R‘uºsFunùiÚPoš‹r1
())(
	gboŞ
) = 0;

108 
usšg
 
	gâ_±r
 = (*)(
boŞ
);

109 
vœtu®
 
â_±r
 
R‘uºsFunùiÚPoš‹r2
() = 0;

111 
vœtu®
 
RefQu®if›dCÚ¡Ref
() const& = 0;

112 
vœtu®
 
RefQu®if›dCÚ¡RefRef
() const&& = 0;

113 
vœtu®
 
RefQu®if›dRef
() & = 0;

114 
vœtu®
 
RefQu®if›dRefRef
() && = 0;

116 
vœtu®
 
RefQu®if›dOv”lßded
() const& = 0;

117 
vœtu®
 
RefQu®if›dOv”lßded
() const&& = 0;

118 
vœtu®
 
RefQu®if›dOv”lßded
() & = 0;

119 
vœtu®
 
RefQu®if›dOv”lßded
() && = 0;

121 #ià
GTEST_OS_WINDOWS


122 
STDMETHOD_
(, 
CTNuÎ¬y
)() = 0;

123 
STDMETHOD_
(
boŞ
, 
CTUÇry
)(
	gx
) = 0;

124 
STDMETHOD_
(, 
CTDecim®
)

125 (
boŞ
 
	gb
, 
	gc
, 
	gd
, 
	ge
, 
	gf
,

126 
	gg
, 
	gh
, 
	gi
, * 
	gj
, cÚ¡ 
	g¡d
::
¡ršg
& 
k
) = 0;

127 
STDMETHOD_
(, 
CTCÚ¡
)(
	gx
) const = 0;

135 #ifdeà
_MSC_VER


136 #´agm¨
w¬nšg
(
push
)

137 #´agm¨
w¬nšg
(
di§bË
 : 4373)

139 şas 
	cMockFoo
 : 
public
 
FooIÁ”çû
 {

140 
public
:

141 
MockFoo
() {}

144 
MOCK_METHOD
(, 
VoidR‘uºšg
, (
n
));

146 
MOCK_METHOD
(, 
NuÎ¬y
, ());

149 
MOCK_METHOD
(
boŞ
, 
UÇry
, ());

150 
MOCK_METHOD
(, 
Bš¬y
, (, ));

151 
MOCK_METHOD
(, 
Decim®
,

152 (
boŞ
, , , , , ,

153 , , *, cÚ¡ 
¡d
::
¡ršg
& 
¡r
),

154 (
ov”ride
));

156 
MOCK_METHOD
(
boŞ
, 
TakesNÚCÚ¡Reã»nû
, (&));

157 
MOCK_METHOD
(
¡d
::
¡ršg
, 
TakesCÚ¡Reã»nû
, (const &));

158 
MOCK_METHOD
(
boŞ
, 
TakesCÚ¡
, (const ));

161 
MOCK_METHOD
((
¡d
::
m­
<, std::
¡ršg
>), 
R‘uºTy³W™hComma
, (), ());

162 
MOCK_METHOD
((
¡d
::
m­
<, std::
¡ršg
>), 
R‘uºTy³W™hComma
, (),

165 
MOCK_METHOD
(, 
Ov”lßdedOnArgum’tNumb”
, ());

166 
MOCK_METHOD
(, 
Ov”lßdedOnArgum’tNumb”
, ());

168 
MOCK_METHOD
(, 
Ov”lßdedOnArgum’tTy³
, ());

169 
MOCK_METHOD
(, 
Ov”lßdedOnArgum’tTy³
, ());

171 
MOCK_METHOD
(, 
Ov”lßdedOnCÚ¡Ãss
, (), (
ov”ride
));

172 
MOCK_METHOD
(, 
Ov”lßdedOnCÚ¡Ãss
, (), (
ov”ride
, const));

174 
MOCK_METHOD
(, 
Ty³W™hHŞe
, ((*)()), ());

175 
MOCK_METHOD
(, 
Ty³W™hComma
, ((cÚ¡ 
¡d
::
m­
<, std::
¡ršg
>&)));

176 
MOCK_METHOD
(, 
Ty³W™hTem¶©edCİyCtÜ
,

177 (cÚ¡ 
Tem¶©edCİyabË
<>&));

179 
MOCK_METHOD
((*)(
boŞ
), 
R‘uºsFunùiÚPoš‹r1
, (), ());

180 
MOCK_METHOD
(
â_±r
, 
R‘uºsFunùiÚPoš‹r2
, (), ());

182 #ià
GTEST_OS_WINDOWS


183 
MOCK_METHOD
(, 
CTNuÎ¬y
, (), (
C®Éy³
(
STDMETHODCALLTYPE
)));

184 
MOCK_METHOD
(
boŞ
, 
CTUÇry
, (), (
C®Éy³
(
STDMETHODCALLTYPE
)));

185 
MOCK_METHOD
(, 
CTDecim®
,

186 (
boŞ
 
b
, 
c
, 
d
, 
e
, 
f
, 
g
, 
h
,

187 
i
, * 
j
, cÚ¡ 
¡d
::
¡ršg
& 
k
),

188 (
C®Éy³
(
STDMETHODCALLTYPE
)));

189 
MOCK_METHOD
(, 
CTCÚ¡
, (), (cÚ¡, 
C®Éy³
(
STDMETHODCALLTYPE
)));

190 
MOCK_METHOD
((
¡d
::
m­
<, std::
¡ršg
>), 
CTR‘uºTy³W™hComma
, (),

191 (
C®Éy³
(
STDMETHODCALLTYPE
)));

195 
MOCK_METHOD
(, 
RefQu®if›dCÚ¡Ref
, (), (cÚ¡, 
»f
(&), 
ov”ride
));

196 
MOCK_METHOD
(, 
RefQu®if›dCÚ¡RefRef
, (), (cÚ¡, 
»f
(&&), 
ov”ride
));

197 
MOCK_METHOD
(, 
RefQu®if›dRef
, (), (
»f
(&), 
ov”ride
));

198 
MOCK_METHOD
(, 
RefQu®if›dRefRef
, (), (
»f
(&&), 
ov”ride
));

200 
MOCK_METHOD
(, 
RefQu®if›dOv”lßded
, (), (cÚ¡, 
»f
(&), 
ov”ride
));

201 
MOCK_METHOD
(, 
RefQu®if›dOv”lßded
, (), (cÚ¡, 
»f
(&&), 
ov”ride
));

202 
MOCK_METHOD
(, 
RefQu®if›dOv”lßded
, (), (
»f
(&), 
ov”ride
));

203 
MOCK_METHOD
(, 
RefQu®if›dOv”lßded
, (), (
»f
(&&), 
ov”ride
));

205 
	g´iv©e
:

206 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
MockFoo
);

209 şas 
	cLegacyMockFoo
 : 
public
 
FooIÁ”çû
 {

210 
public
:

211 
LegacyMockFoo
() {}

214 
MOCK_METHOD1
(
VoidR‘uºšg
, (
n
));

216 
MOCK_METHOD0
(
NuÎ¬y
, ());

219 
MOCK_METHOD1
(
UÇry
, 
boŞ
());

220 
MOCK_METHOD2
(
Bš¬y
, (, ));

221 
MOCK_METHOD10
(
Decim®
, (
boŞ
, , , , , ,

222 , , *, cÚ¡ 
¡d
::
¡ršg
& 
¡r
));

224 
MOCK_METHOD1
(
TakesNÚCÚ¡Reã»nû
, 
boŞ
(&));

225 
MOCK_METHOD1
(
TakesCÚ¡Reã»nû
, 
¡d
::
¡ršg
(const &));

226 
MOCK_METHOD1
(
TakesCÚ¡
, 
boŞ
(const ));

229 
MOCK_METHOD0
(
R‘uºTy³W™hComma
, 
¡d
::
m­
<, std::
¡ršg
>());

230 
MOCK_CONST_METHOD1
(
R‘uºTy³W™hComma
,

231 
¡d
::
m­
<, std::
¡ršg
>());

233 
MOCK_METHOD0
(
Ov”lßdedOnArgum’tNumb”
, ());

234 
MOCK_METHOD1
(
Ov”lßdedOnArgum’tNumb”
, ());

236 
MOCK_METHOD1
(
Ov”lßdedOnArgum’tTy³
, ());

237 
MOCK_METHOD1
(
Ov”lßdedOnArgum’tTy³
, ());

239 
MOCK_METHOD0
(
Ov”lßdedOnCÚ¡Ãss
, ());

240 
MOCK_CONST_METHOD0
(
Ov”lßdedOnCÚ¡Ãss
, ());

242 
MOCK_METHOD1
(
Ty³W™hHŞe
, ((*)()));

243 
MOCK_METHOD1
(
Ty³W™hComma
,

244 (cÚ¡ 
¡d
::
m­
<, std::
¡ršg
>&));

245 
MOCK_METHOD1
(
Ty³W™hTem¶©edCİyCtÜ
,

246 (cÚ¡ 
Tem¶©edCİyabË
<>&));

248 
MOCK_METHOD1
(
R‘uºsFunùiÚPoš‹r1
, (*())(
boŞ
));

249 
MOCK_METHOD1
(
R‘uºsFunùiÚPoš‹r2
, 
â_±r
());

251 #ià
GTEST_OS_WINDOWS


252 
MOCK_METHOD0_WITH_CALLTYPE
(
STDMETHODCALLTYPE
, 
CTNuÎ¬y
, ());

253 
MOCK_METHOD1_WITH_CALLTYPE
(
STDMETHODCALLTYPE
, 
CTUÇry
, 
boŞ
());

254 
MOCK_METHOD10_WITH_CALLTYPE
(
STDMETHODCALLTYPE
, 
CTDecim®
,

255 (
boŞ
 
b
, 
c
, 
d
, 
e
,

256 
f
, 
g
, 
h
,

257 
i
, * 
j
, cÚ¡ 
¡d
::
¡ršg
& 
k
));

258 
MOCK_CONST_METHOD1_WITH_CALLTYPE
(
STDMETHODCALLTYPE
, 
CTCÚ¡
,

262 
MOCK_METHOD0_WITH_CALLTYPE
(
STDMETHODCALLTYPE
, 
CTR‘uºTy³W™hComma
,

263 
¡d
::
m­
<, std::
¡ršg
>());

268 
RefQu®if›dCÚ¡Ref
(ècÚ¡& 
	gov”ride
 {  0; }

269 
RefQu®if›dCÚ¡RefRef
(ècÚ¡&& 
	gov”ride
 {  0; }

270 
RefQu®if›dRef
(è& 
	gov”ride
 {  0; }

271 
RefQu®if›dRefRef
(è&& 
	gov”ride
 {  0; }

272 
RefQu®if›dOv”lßded
(ècÚ¡& 
	gov”ride
 {  0; }

273 
RefQu®if›dOv”lßded
(ècÚ¡&& 
	gov”ride
 {  0; }

274 
RefQu®if›dOv”lßded
(è& 
	gov”ride
 {  0; }

275 
RefQu®if›dOv”lßded
(è&& 
	gov”ride
 {  0; }

277 
	g´iv©e
:

278 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
LegacyMockFoo
);

281 #ifdeà
_MSC_VER


282 #´agm¨
w¬nšg
(
pİ
)

285 
	g‹m¶©e
 <
şass
 
	gT
>

286 şas 
	cFunùiÚMock”Te¡
 : 
public
 
‹¡šg
::
Te¡
 {

287 
´Ùeùed
:

288 
FunùiÚMock”Te¡
(è: 
foo_
(&
mock_foo_
) {}

290 
FooIÁ”çû
* cÚ¡ 
foo_
;

291 
T
 
	gmock_foo_
;

293 
usšg
 
	gFunùiÚMock”Te¡Ty³s
 = ::
‹¡šg
::
Ty³s
<
MockFoo
, 
	gLegacyMockFoo
>;

294 
TYPED_TEST_SUITE
(
FunùiÚMock”Te¡
, 
FunùiÚMock”Te¡Ty³s
);

297 
TYPED_TEST
(
FunùiÚMock”Te¡
, 
MocksVoidFunùiÚ
) {

298 
EXPECT_CALL
(
this
->
mock_foo_
, 
VoidR‘uºšg
(
Lt
(100)));

299 
	gthis
->
	gfoo_
->
VoidR‘uºšg
(0);

303 
TYPED_TEST
(
FunùiÚMock”Te¡
, 
MocksNuÎ¬yFunùiÚ
) {

304 
EXPECT_CALL
(
this
->
mock_foo_
, 
NuÎ¬y
())

305 .
WlOnû
(
DoDeçuÉ
())

306 .
WlOnû
(
R‘uº
(1));

308 
EXPECT_EQ
(0, 
this
->
foo_
->
NuÎ¬y
());

309 
EXPECT_EQ
(1, 
this
->
foo_
->
NuÎ¬y
());

313 
TYPED_TEST
(
FunùiÚMock”Te¡
, 
MocksUÇryFunùiÚ
) {

314 
EXPECT_CALL
(
this
->
mock_foo_
, 
UÇry
(
Eq
(2))).
Times
(2).
WlOnû
(
R‘uº
(
Œue
));

316 
EXPECT_TRUE
(
this
->
foo_
->
UÇry
(2));

317 
EXPECT_FALSE
(
this
->
foo_
->
UÇry
(2));

321 
TYPED_TEST
(
FunùiÚMock”Te¡
, 
MocksBš¬yFunùiÚ
) {

322 
EXPECT_CALL
(
this
->
mock_foo_
, 
Bš¬y
(2, 
_
)).
WlOnû
(
R‘uº
(3));

324 
EXPECT_EQ
(3, 
this
->
foo_
->
Bš¬y
(2, 1));

328 
TYPED_TEST
(
FunùiÚMock”Te¡
, 
MocksDecim®FunùiÚ
) {

329 
EXPECT_CALL
(
this
->
mock_foo_
,

330 
Decim®
(
Œue
, 'a', 0, 0, 1L, 
A
<>(), 
Lt
(100), 5U, 
NULL
, "hi"))

331 .
WlOnû
(
R‘uº
(5));

333 
EXPECT_EQ
(5, 
this
->
foo_
->
Decim®
(
Œue
, 'a', 0, 0, 1, 0, 0, 5, 
nuÎ±r
, "hi"));

337 
TYPED_TEST
(
FunùiÚMock”Te¡
, 
MocksFunùiÚW™hNÚCÚ¡Reã»nûArgum’t
) {

338 
	ga
 = 0;

339 
EXPECT_CALL
(
this
->
mock_foo_
, 
TakesNÚCÚ¡Reã»nû
(
Ref
(
a
)))

340 .
WlOnû
(
R‘uº
(
Œue
));

342 
EXPECT_TRUE
(
this
->
foo_
->
TakesNÚCÚ¡Reã»nû
(
a
));

346 
TYPED_TEST
(
FunùiÚMock”Te¡
, 
MocksFunùiÚW™hCÚ¡Reã»nûArgum’t
) {

347 
	ga
 = 0;

348 
EXPECT_CALL
(
this
->
mock_foo_
, 
TakesCÚ¡Reã»nû
(
Ref
(
a
)))

349 .
WlOnû
(
R‘uº
("Hello"));

351 
EXPECT_EQ
("H–lo", 
this
->
foo_
->
TakesCÚ¡Reã»nû
(
a
));

355 
TYPED_TEST
(
FunùiÚMock”Te¡
, 
MocksFunùiÚW™hCÚ¡Argum’t
) {

356 
EXPECT_CALL
(
this
->
mock_foo_
, 
TakesCÚ¡
(
Lt
(10))).
WlOnû
(
DoDeçuÉ
());

358 
EXPECT_FALSE
(
this
->
foo_
->
TakesCÚ¡
(5));

362 
TYPED_TEST
(
FunùiÚMock”Te¡
, 
MocksFunùiÚsOv”lßdedOnArgum’tNumb”
) {

363 
EXPECT_CALL
(
this
->
mock_foo_
, 
Ov”lßdedOnArgum’tNumb”
())

364 .
WlOnû
(
R‘uº
(1));

365 
EXPECT_CALL
(
this
->
mock_foo_
, 
Ov”lßdedOnArgum’tNumb”
(
_
))

366 .
WlOnû
(
R‘uº
(2));

368 
EXPECT_EQ
(2, 
this
->
foo_
->
Ov”lßdedOnArgum’tNumb”
(1));

369 
EXPECT_EQ
(1, 
this
->
foo_
->
Ov”lßdedOnArgum’tNumb”
());

373 
TYPED_TEST
(
FunùiÚMock”Te¡
, 
MocksFunùiÚsOv”lßdedOnArgum’tTy³
) {

374 
EXPECT_CALL
(
this
->
mock_foo_
, 
Ov”lßdedOnArgum’tTy³
(
An
<>()))

375 .
WlOnû
(
R‘uº
(1));

376 
EXPECT_CALL
(
this
->
mock_foo_
, 
Ov”lßdedOnArgum’tTy³
(
Ty³dEq
<>('a')))

377 .
WlOnû
(
R‘uº
('b'));

379 
EXPECT_EQ
(1, 
this
->
foo_
->
Ov”lßdedOnArgum’tTy³
(0));

380 
EXPECT_EQ
('b', 
this
->
foo_
->
Ov”lßdedOnArgum’tTy³
('a'));

384 
TYPED_TEST
(
FunùiÚMock”Te¡
, 
MocksFunùiÚsOv”lßdedOnCÚ¡ÃssOfThis
) {

385 
EXPECT_CALL
(
this
->
mock_foo_
, 
Ov”lßdedOnCÚ¡Ãss
());

386 
EXPECT_CALL
(
CÚ¡
(
this
->
mock_foo_
), 
Ov”lßdedOnCÚ¡Ãss
())

387 .
WlOnû
(
R‘uº
('a'));

389 
EXPECT_EQ
(0, 
this
->
foo_
->
Ov”lßdedOnCÚ¡Ãss
());

390 
EXPECT_EQ
('a', 
CÚ¡
(*
this
->
foo_
).
Ov”lßdedOnCÚ¡Ãss
());

393 
TYPED_TEST
(
FunùiÚMock”Te¡
, 
MocksR‘uºTy³W™hComma
) {

394 cÚ¡ 
	g¡d
::
m­
<, std::
¡ršg
> 
a_m­
;

395 
EXPECT_CALL
(
this
->
mock_foo_
, 
R‘uºTy³W™hComma
()).
WlOnû
(
R‘uº
(
a_m­
));

396 
EXPECT_CALL
(
this
->
mock_foo_
, 
R‘uºTy³W™hComma
(42)).
WlOnû
(
R‘uº
(
a_m­
));

398 
EXPECT_EQ
(
a_m­
, 
this
->
mock_foo_
.
R‘uºTy³W™hComma
());

399 
EXPECT_EQ
(
a_m­
, 
this
->
mock_foo_
.
R‘uºTy³W™hComma
(42));

402 
TYPED_TEST
(
FunùiÚMock”Te¡
, 
MocksTy³W™hTem¶©edCİyCtÜ
) {

403 
EXPECT_CALL
(
this
->
mock_foo_
, 
Ty³W™hTem¶©edCİyCtÜ
(
_
))

404 .
WlOnû
(
R‘uº
(
Œue
));

405 
EXPECT_TRUE
(
this
->
foo_
->
Ty³W™hTem¶©edCİyCtÜ
(
Tem¶©edCİyabË
<>()));

408 #ià
GTEST_OS_WINDOWS


410 
TYPED_TEST
(
FunùiÚMock”Te¡
, 
MocksNuÎ¬yFunùiÚW™hC®lTy³
) {

411 
EXPECT_CALL
(
this
->
mock_foo_
, 
CTNuÎ¬y
())

412 .
WlOnû
(
R‘uº
(-1))

413 .
WlOnû
(
R‘uº
(0));

415 
EXPECT_EQ
(-1, 
this
->
foo_
->
CTNuÎ¬y
());

416 
EXPECT_EQ
(0, 
this
->
foo_
->
CTNuÎ¬y
());

420 
TYPED_TEST
(
FunùiÚMock”Te¡
, 
MocksUÇryFunùiÚW™hC®lTy³
) {

421 
EXPECT_CALL
(
this
->
mock_foo_
, 
CTUÇry
(
Eq
(2)))

422 .
Times
(2)

423 .
WlOnû
(
R‘uº
(
Œue
))

424 .
WlOnû
(
R‘uº
(
çl£
));

426 
EXPECT_TRUE
(
this
->
foo_
->
CTUÇry
(2));

427 
EXPECT_FALSE
(
this
->
foo_
->
CTUÇry
(2));

431 
TYPED_TEST
(
FunùiÚMock”Te¡
, 
MocksDecim®FunùiÚW™hC®lTy³
) {

432 
EXPECT_CALL
(
this
->
mock_foo_
, 
CTDecim®
(
Œue
, 'a', 0, 0, 1L, 
A
<>(),

433 
Lt
(100), 5U, 
NULL
, "hi"))

434 .
WlOnû
(
R‘uº
(10));

436 
EXPECT_EQ
(10, 
this
->
foo_
->
CTDecim®
(
Œue
, 'a', 0, 0, 1, 0, 0, 5, 
NULL
, "hi"));

440 
TYPED_TEST
(
FunùiÚMock”Te¡
, 
MocksFunùiÚsCÚ¡FunùiÚW™hC®lTy³
) {

441 
EXPECT_CALL
(
CÚ¡
(
this
->
mock_foo_
), 
CTCÚ¡
(
_
)).
WlOnû
(
R‘uº
('a'));

443 
EXPECT_EQ
('a', 
CÚ¡
(*
this
->
foo_
).
CTCÚ¡
(0));

446 
TYPED_TEST
(
FunùiÚMock”Te¡
, 
MocksR‘uºTy³W™hCommaAndC®lTy³
) {

447 cÚ¡ 
	g¡d
::
m­
<, std::
¡ršg
> 
a_m­
;

448 
EXPECT_CALL
(
this
->
mock_foo_
, 
CTR‘uºTy³W™hComma
()).
WlOnû
(
R‘uº
(
a_m­
));

450 
EXPECT_EQ
(
a_m­
, 
this
->
mock_foo_
.
CTR‘uºTy³W™hComma
());

455 
TEST
(
FunùiÚMock”Te¡
, 
RefQu®if›d
) {

456 
MockFoo
 
	gmock_foo
;

458 
EXPECT_CALL
(
mock_foo
, 
RefQu®if›dCÚ¡Ref
).
WlOnû
(
R‘uº
(1));

459 
EXPECT_CALL
(
¡d
::
move
(
mock_foo
),

460 
RefQu®if›dCÚ¡RefRef
)

461 .
WlOnû
(
R‘uº
(2));

462 
EXPECT_CALL
(
mock_foo
, 
RefQu®if›dRef
).
WlOnû
(
R‘uº
(3));

463 
EXPECT_CALL
(
¡d
::
move
(
mock_foo
),

464 
RefQu®if›dRefRef
)

465 .
WlOnû
(
R‘uº
(4));

467 
EXPECT_CALL
(
¡©ic_ÿ¡
<cÚ¡ 
MockFoo
&>(
mock_foo
), 
RefQu®if›dOv”lßded
())

468 .
WlOnû
(
R‘uº
(5));

469 
EXPECT_CALL
(
¡©ic_ÿ¡
<cÚ¡ 
MockFoo
&&>(
mock_foo
), 
RefQu®if›dOv”lßded
())

470 .
WlOnû
(
R‘uº
(6));

471 
EXPECT_CALL
(
¡©ic_ÿ¡
<
MockFoo
&>(
mock_foo
), 
RefQu®if›dOv”lßded
())

472 .
WlOnû
(
R‘uº
(7));

473 
EXPECT_CALL
(
¡©ic_ÿ¡
<
MockFoo
&&>(
mock_foo
), 
RefQu®if›dOv”lßded
())

474 .
WlOnû
(
R‘uº
(8));

476 
EXPECT_EQ
(
mock_foo
.
RefQu®if›dCÚ¡Ref
(), 1);

477 
EXPECT_EQ
(
¡d
::
move
(
mock_foo
).
RefQu®if›dCÚ¡RefRef
(), 2);

478 
EXPECT_EQ
(
mock_foo
.
RefQu®if›dRef
(), 3);

479 
EXPECT_EQ
(
¡d
::
move
(
mock_foo
).
RefQu®if›dRefRef
(), 4);

481 
EXPECT_EQ
(
¡d
::
üef
(
mock_foo
).
g‘
().
RefQu®if›dOv”lßded
(), 5);

482 
EXPECT_EQ
(
¡d
::
move
(¡d::
üef
(
mock_foo
).
g‘
())

483 .
RefQu®if›dOv”lßded
(),

485 
EXPECT_EQ
(
mock_foo
.
RefQu®if›dOv”lßded
(), 7);

486 
EXPECT_EQ
(
¡d
::
move
(
mock_foo
).
RefQu®if›dOv”lßded
(), 8);

489 şas 
	cMockB
 {

490 
	gpublic
:

491 
MockB
() {}

493 
MOCK_METHOD
(, 
DoB
, ());

495 
	g´iv©e
:

496 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
MockB
);

499 şas 
	cLegacyMockB
 {

500 
	gpublic
:

501 
LegacyMockB
() {}

503 
MOCK_METHOD0
(
DoB
, ());

505 
	g´iv©e
:

506 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
LegacyMockB
);

509 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

510 şas 
	cEx³ùC®lTe¡
 : 
public
 ::
‹¡šg
::
Te¡
 {};

511 
usšg
 
	gEx³ùC®lTe¡Ty³s
 = ::
‹¡šg
::
Ty³s
<
MockB
, 
	gLegacyMockB
>;

512 
TYPED_TEST_SUITE
(
Ex³ùC®lTe¡
, 
Ex³ùC®lTe¡Ty³s
);

516 
TYPED_TEST
(
Ex³ùC®lTe¡
, 
Unm’tiÚedFunùiÚCªBeC®ËdAnyNumb”OfTimes
) {

517 { 
Ty³P¬am
 
	gb
; }

520 
Ty³P¬am
 
	gb
;

521 
	gb
.
DoB
();

525 
Ty³P¬am
 
	gb
;

526 
	gb
.
DoB
();

527 
	gb
.
DoB
();

533 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

534 şas 
	cSckIÁ”çû
 {

535 
	gpublic
:

536 
vœtu®
 ~
SckIÁ”çû
() {}

539 
vœtu®
 
Push
(cÚ¡ 
T
& 
v®ue
) = 0;

540 
vœtu®
 
Pİ
() = 0;

541 
vœtu®
 
G‘Size
() const = 0;

543 
vœtu®
 cÚ¡ 
	gT
& 
G‘Tİ
() const = 0;

546 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

547 
şass
 
	gMockSck
 : 
public
 
SckIÁ”çû
<
T
> {

548 
public
:

549 
MockSck
() {}

551 
MOCK_METHOD
(, 
Push
, (cÚ¡ 
T
& 
–em
), ());

552 
MOCK_METHOD
(, 
Pİ
, (), (
fš®
));

553 
MOCK_METHOD
(, 
G‘Size
, (), (cÚ¡, 
ov”ride
));

554 
MOCK_METHOD
(cÚ¡ 
T
&, 
G‘Tİ
, (), (const));

557 
MOCK_METHOD
((
¡d
::
m­
<, >), 
R‘uºTy³W™hComma
, (), ());

558 
MOCK_METHOD
((
¡d
::
m­
<, >), 
R‘uºTy³W™hComma
, (), (const));

560 
	g´iv©e
:

561 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
MockSck
);

564 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

565 
şass
 
	gLegacyMockSck
 : 
public
 
SckIÁ”çû
<
T
> {

566 
public
:

567 
LegacyMockSck
() {}

569 
MOCK_METHOD1_T
(
Push
, (cÚ¡ 
T
& 
–em
));

570 
MOCK_METHOD0_T
(
Pİ
, ());

571 
MOCK_CONST_METHOD0_T
(
G‘Size
, ());

572 
MOCK_CONST_METHOD0_T
(
G‘Tİ
, cÚ¡ 
T
&());

575 
MOCK_METHOD0_T
(
R‘uºTy³W™hComma
, 
¡d
::
m­
<, >());

576 
MOCK_CONST_METHOD1_T
(
R‘uºTy³W™hComma
, 
¡d
::
m­
<, >());

578 
	g´iv©e
:

579 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
LegacyMockSck
);

582 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

583 şas 
	cTem¶©eMockTe¡
 : 
public
 ::
‹¡šg
::
Te¡
 {};

584 
usšg
 
	gTem¶©eMockTe¡Ty³s
 =

585 ::
‹¡šg
::
Ty³s
<
MockSck
<>, 
	gLegacyMockSck
<>>;

586 
TYPED_TEST_SUITE
(
Tem¶©eMockTe¡
, 
Tem¶©eMockTe¡Ty³s
);

589 
TYPED_TEST
(
Tem¶©eMockTe¡
, 
WÜks
) {

590 
Ty³P¬am
 
	gmock
;

592 
EXPECT_CALL
(
mock
, 
G‘Size
())

593 .
WlOnû
(
R‘uº
(0))

594 .
WlOnû
(
R‘uº
(1))

595 .
WlOnû
(
R‘uº
(0));

596 
EXPECT_CALL
(
mock
, 
Push
(
_
));

597 
	gn
 = 5;

598 
EXPECT_CALL
(
mock
, 
G‘Tİ
())

599 .
WlOnû
(
R‘uºRef
(
n
));

600 
EXPECT_CALL
(
mock
, 
Pİ
())

601 .
Times
(
AnyNumb”
());

603 
EXPECT_EQ
(0, 
mock
.
G‘Size
());

604 
	gmock
.
Push
(5);

605 
EXPECT_EQ
(1, 
mock
.
G‘Size
());

606 
EXPECT_EQ
(5, 
mock
.
G‘Tİ
());

607 
	gmock
.
Pİ
();

608 
EXPECT_EQ
(0, 
mock
.
G‘Size
());

611 
TYPED_TEST
(
Tem¶©eMockTe¡
, 
M‘hodW™hCommaInR‘uºTy³WÜks
) {

612 
Ty³P¬am
 
	gmock
;

614 cÚ¡ 
	g¡d
::
m­
<, > 
	ga_m­
;

615 
EXPECT_CALL
(
mock
, 
R‘uºTy³W™hComma
())

616 .
WlOnû
(
R‘uº
(
a_m­
));

617 
EXPECT_CALL
(
mock
, 
R‘uºTy³W™hComma
(1))

618 .
WlOnû
(
R‘uº
(
a_m­
));

620 
EXPECT_EQ
(
a_m­
, 
mock
.
R‘uºTy³W™hComma
());

621 
EXPECT_EQ
(
a_m­
, 
mock
.
R‘uºTy³W™hComma
(1));

624 #ià
GTEST_OS_WINDOWS


627 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

628 şas 
	cSckIÁ”çûW™hC®lTy³
 {

629 
	gpublic
:

630 
vœtu®
 ~
SckIÁ”çûW™hC®lTy³
() {}

633 
STDMETHOD_
(, 
Push
)(cÚ¡ 
	gT
& 
	gv®ue
) = 0;

634 
STDMETHOD_
(, 
Pİ
)() = 0;

635 
STDMETHOD_
(, 
G‘Size
)() const = 0;

637 
STDMETHOD_
(cÚ¡ 
T
&, 
G‘Tİ
)() const = 0;

640 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

641 
şass
 
	gMockSckW™hC®lTy³
 : 
public
 
SckIÁ”çûW™hC®lTy³
<
T
> {

642 
public
:

643 
MockSckW™hC®lTy³
() {}

645 
MOCK_METHOD
(, 
Push
, (cÚ¡ 
T
& 
–em
),

646 (
C®Éy³
(
STDMETHODCALLTYPE
), 
ov”ride
));

647 
MOCK_METHOD
(, 
Pİ
, (), (
C®Éy³
(
STDMETHODCALLTYPE
), 
ov”ride
));

648 
MOCK_METHOD
(, 
G‘Size
, (), (
C®Éy³
(
STDMETHODCALLTYPE
), 
ov”ride
, const));

649 
MOCK_METHOD
(cÚ¡ 
T
&, 
G‘Tİ
, (),

650 (
C®Éy³
(
STDMETHODCALLTYPE
), 
ov”ride
, const));

652 
	g´iv©e
:

653 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
MockSckW™hC®lTy³
);

656 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

657 
şass
 
	gLegacyMockSckW™hC®lTy³
 : 
public
 
SckIÁ”çûW™hC®lTy³
<
T
> {

658 
public
:

659 
LegacyMockSckW™hC®lTy³
() {}

661 
MOCK_METHOD1_T_WITH_CALLTYPE
(
STDMETHODCALLTYPE
, 
Push
, (cÚ¡ 
T
& 
–em
));

662 
MOCK_METHOD0_T_WITH_CALLTYPE
(
STDMETHODCALLTYPE
, 
Pİ
, ());

663 
MOCK_CONST_METHOD0_T_WITH_CALLTYPE
(
STDMETHODCALLTYPE
, 
G‘Size
, ());

664 
MOCK_CONST_METHOD0_T_WITH_CALLTYPE
(
STDMETHODCALLTYPE
, 
G‘Tİ
, cÚ¡ 
T
&());

666 
	g´iv©e
:

667 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
LegacyMockSckW™hC®lTy³
);

670 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

671 şas 
	cTem¶©eMockTe¡W™hC®lTy³
 : 
public
 ::
‹¡šg
::
Te¡
 {};

672 
usšg
 
	gTem¶©eMockTe¡W™hC®lTy³Ty³s
 =

673 ::
‹¡šg
::
Ty³s
<
MockSckW™hC®lTy³
<>,

674 
	gLegacyMockSckW™hC®lTy³
<>>;

675 
TYPED_TEST_SUITE
(
Tem¶©eMockTe¡W™hC®lTy³
,

676 
Tem¶©eMockTe¡W™hC®lTy³Ty³s
);

679 
TYPED_TEST
(
Tem¶©eMockTe¡W™hC®lTy³
, 
WÜks
) {

680 
Ty³P¬am
 
	gmock
;

682 
EXPECT_CALL
(
mock
, 
G‘Size
())

683 .
WlOnû
(
R‘uº
(0))

684 .
WlOnû
(
R‘uº
(1))

685 .
WlOnû
(
R‘uº
(0));

686 
EXPECT_CALL
(
mock
, 
Push
(
_
));

687 
	gn
 = 5;

688 
EXPECT_CALL
(
mock
, 
G‘Tİ
())

689 .
WlOnû
(
R‘uºRef
(
n
));

690 
EXPECT_CALL
(
mock
, 
Pİ
())

691 .
Times
(
AnyNumb”
());

693 
EXPECT_EQ
(0, 
mock
.
G‘Size
());

694 
	gmock
.
Push
(5);

695 
EXPECT_EQ
(1, 
mock
.
G‘Size
());

696 
EXPECT_EQ
(5, 
mock
.
G‘Tİ
());

697 
	gmock
.
Pİ
();

698 
EXPECT_EQ
(0, 
mock
.
G‘Size
());

702 
	#MY_MOCK_METHODS1_
 \

703 
	`MOCK_METHOD
(, 
Ov”lßded
, ()); \

704 
	`MOCK_METHOD
(, 
Ov”lßded
, (), (const)); \

705 
	`MOCK_METHOD
(
boŞ
, 
Ov”lßded
, (boŞ 
f
, 
n
))

	)

707 
	#LEGACY_MY_MOCK_METHODS1_
 \

708 
	`MOCK_METHOD0
(
Ov”lßded
, ()); \

709 
	`MOCK_CONST_METHOD1
(
Ov”lßded
, (
n
)); \

710 
	`MOCK_METHOD2
(
Ov”lßded
, 
	`boŞ
(
boŞ
 
f
, 
n
))

	)

712 şas 
	cMockOv”lßdedOnArgNumb”
 {

713 
	gpublic
:

714 
MockOv”lßdedOnArgNumb”
() {}

716 
MY_MOCK_METHODS1_
;

718 
	g´iv©e
:

719 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
MockOv”lßdedOnArgNumb”
);

722 şas 
	cLegacyMockOv”lßdedOnArgNumb”
 {

723 
	gpublic
:

724 
LegacyMockOv”lßdedOnArgNumb”
() {}

726 
LEGACY_MY_MOCK_METHODS1_
;

728 
	g´iv©e
:

729 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
LegacyMockOv”lßdedOnArgNumb”
);

732 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

733 şas 
	cOv”lßdedMockM‘hodTe¡
 : 
public
 ::
‹¡šg
::
Te¡
 {};

734 
usšg
 
	gOv”lßdedMockM‘hodTe¡Ty³s
 =

735 ::
‹¡šg
::
Ty³s
<
MockOv”lßdedOnArgNumb”
,

736 
	gLegacyMockOv”lßdedOnArgNumb”
>;

737 
TYPED_TEST_SUITE
(
Ov”lßdedMockM‘hodTe¡
, 
Ov”lßdedMockM‘hodTe¡Ty³s
);

739 
TYPED_TEST
(
Ov”lßdedMockM‘hodTe¡
, 
CªOv”lßdOnArgNumb”InMaüoBody
) {

740 
Ty³P¬am
 
	gmock
;

741 
EXPECT_CALL
(
mock
, 
Ov”lßded
());

742 
EXPECT_CALL
(
mock
, 
Ov”lßded
(1)).
WlOnû
(
R‘uº
(2));

743 
EXPECT_CALL
(
mock
, 
Ov”lßded
(
Œue
, 1)).
WlOnû
(
R‘uº
(true));

745 
	gmock
.
Ov”lßded
();

746 
EXPECT_EQ
(2, 
mock
.
Ov”lßded
(1));

747 
EXPECT_TRUE
(
mock
.
Ov”lßded
(
Œue
, 1));

750 
	#MY_MOCK_METHODS2_
 \

751 
	`MOCK_CONST_METHOD1
(
Ov”lßded
, (
n
)); \

752 
	`MOCK_METHOD1
(
Ov”lßded
, (
n
))

	)

754 şas 
	cMockOv”lßdedOnCÚ¡Ãss
 {

755 
	gpublic
:

756 
MockOv”lßdedOnCÚ¡Ãss
() {}

758 
MY_MOCK_METHODS2_
;

760 
	g´iv©e
:

761 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
MockOv”lßdedOnCÚ¡Ãss
);

764 
TEST
(
MockM‘hodOv”lßdedMockM‘hodTe¡
, 
CªOv”lßdOnCÚ¡ÃssInMaüoBody
) {

765 
MockOv”lßdedOnCÚ¡Ãss
 
	gmock
;

766 cÚ¡ 
MockOv”lßdedOnCÚ¡Ãss
* 
	gcÚ¡_mock
 = &
mock
;

767 
EXPECT_CALL
(
mock
, 
Ov”lßded
(1)).
WlOnû
(
R‘uº
(2));

768 
EXPECT_CALL
(*
cÚ¡_mock
, 
Ov”lßded
(1)).
WlOnû
(
R‘uº
(3));

770 
EXPECT_EQ
(2, 
mock
.
Ov”lßded
(1));

771 
EXPECT_EQ
(3, 
cÚ¡_mock
->
Ov”lßded
(1));

774 
TEST
(
MockM‘hodMockFunùiÚTe¡
, 
WÜksFÜVoidNuÎ¬y
) {

775 
	gMockFunùiÚ
<()> 
	gfoo
;

776 
EXPECT_CALL
(
foo
, 
C®l
());

777 
	gfoo
.
C®l
();

780 
TEST
(
MockM‘hodMockFunùiÚTe¡
, 
WÜksFÜNÚVoidNuÎ¬y
) {

781 
	gMockFunùiÚ
<()> 
	gfoo
;

782 
EXPECT_CALL
(
foo
, 
C®l
())

783 .
WlOnû
(
R‘uº
(1))

784 .
WlOnû
(
R‘uº
(2));

785 
EXPECT_EQ
(1, 
foo
.
C®l
());

786 
EXPECT_EQ
(2, 
foo
.
C®l
());

789 
TEST
(
MockM‘hodMockFunùiÚTe¡
, 
WÜksFÜVoidUÇry
) {

790 
	gMockFunùiÚ
<()> 
	gfoo
;

791 
EXPECT_CALL
(
foo
, 
C®l
(1));

792 
	gfoo
.
C®l
(1);

795 
TEST
(
MockM‘hodMockFunùiÚTe¡
, 
WÜksFÜNÚVoidBš¬y
) {

796 
	gMockFunùiÚ
<(
	gboŞ
, )> 
	gfoo
;

797 
EXPECT_CALL
(
foo
, 
C®l
(
çl£
, 42))

798 .
WlOnû
(
R‘uº
(1))

799 .
WlOnû
(
R‘uº
(2));

800 
EXPECT_CALL
(
foo
, 
C®l
(
Œue
, 
Ge
(100)))

801 .
WlOnû
(
R‘uº
(3));

802 
EXPECT_EQ
(1, 
foo
.
C®l
(
çl£
, 42));

803 
EXPECT_EQ
(2, 
foo
.
C®l
(
çl£
, 42));

804 
EXPECT_EQ
(3, 
foo
.
C®l
(
Œue
, 120));

807 
TEST
(
MockM‘hodMockFunùiÚTe¡
, 
WÜksFÜ10Argum’ts
) {

808 
	gMockFunùiÚ
<(
boŞ
 
	ga0
, 
	ga1
, 
	ga2
, 
	ga3
, 
	ga4
,

809 
	ga5
, 
	ga6
, 
	ga7
, 
	ga8
, 
boŞ
 
	ga9
)> 
	gfoo
;

810 
EXPECT_CALL
(
foo
, 
C®l
(
_
, 'a', _, _, _, _, _, _, _, _))

811 .
WlOnû
(
R‘uº
(1))

812 .
WlOnû
(
R‘uº
(2));

813 
EXPECT_EQ
(1, 
foo
.
C®l
(
çl£
, 'a', 0, 0, 0, 0, 0, 'b', 0, 
Œue
));

814 
EXPECT_EQ
(2, 
foo
.
C®l
(
Œue
, 'a', 0, 0, 0, 0, 0, 'b', 1, 
çl£
));

817 
TEST
(
MockM‘hodMockFunùiÚTe¡
, 
AsStdFunùiÚ
) {

818 
	gMockFunùiÚ
<()> 
	gfoo
;

819 autØ
	gÿÎ
 = [](cÚ¡ 
¡d
::
funùiÚ
<()> &
f
, 
	gi
) {

820  
f
(
i
);

822 
EXPECT_CALL
(
foo
, 
C®l
(1)).
WlOnû
(
R‘uº
(-1));

823 
EXPECT_CALL
(
foo
, 
C®l
(2)).
WlOnû
(
R‘uº
(-2));

824 
EXPECT_EQ
(-1, 
ÿÎ
(
foo
.
AsStdFunùiÚ
(), 1));

825 
EXPECT_EQ
(-2, 
ÿÎ
(
foo
.
AsStdFunùiÚ
(), 2));

828 
TEST
(
MockM‘hodMockFunùiÚTe¡
, 
AsStdFunùiÚR‘uºsReã»nû
) {

829 
	gMockFunùiÚ
<&()> 
	gfoo
;

830 
	gv®ue
 = 1;

831 
EXPECT_CALL
(
foo
, 
C®l
()).
WlOnû
(
R‘uºRef
(
v®ue
));

832 & 
	g»f
 = 
foo
.
AsStdFunùiÚ
()();

833 
EXPECT_EQ
(1, 
»f
);

834 
	gv®ue
 = 2;

835 
EXPECT_EQ
(2, 
»f
);

838 
TEST
(
MockM‘hodMockFunùiÚTe¡
, 
AsStdFunùiÚW™hReã»nûP¬am‘”
) {

839 
	gMockFunùiÚ
<(&)> 
	gfoo
;

840 autØ
	gÿÎ
 = [](cÚ¡ 
¡d
::
funùiÚ
<(& )> &
f
, &
	gi
) {

841  
f
(
i
);

843 
	gi
 = 42;

844 
EXPECT_CALL
(
foo
, 
C®l
(
i
)).
WlOnû
(
R‘uº
(-1));

845 
EXPECT_EQ
(-1, 
ÿÎ
(
foo
.
AsStdFunùiÚ
(), 
i
));

848 
	gÇme¥aû
 {

850 
	g‹m¶©e
 <
ty³Çme
 
	gEx³ùed
,y³Çm
	gF
>

851 
cÚ¡ex´
 
boŞ
 
IsMockFunùiÚTem¶©eArgum’tDeduûdTo
(

852 cÚ¡ 
š‹º®
::
MockFunùiÚ
<
F
>&) {

853  
¡d
::
is_§me
<
F
, 
	gEx³ùed
>::
v®ue
;

858 
	g‹m¶©e
 <
ty³Çme
 
	gF
>

859 şas 
	cMockM‘hodMockFunùiÚSigÇtu»Te¡
 : 
public
 
Te¡
 {};

861 
usšg
 
	gMockM‘hodMockFunùiÚSigÇtu»Ty³s
 =

862 
Ty³s
<(), (), (), (), (
	gboŞ
, ),

863 (
	gboŞ
, , , , , , , , , bool)>;

864 
TYPED_TEST_SUITE
(
MockM‘hodMockFunùiÚSigÇtu»Te¡
,

865 
MockM‘hodMockFunùiÚSigÇtu»Ty³s
);

867 
TYPED_TEST
(
MockM‘hodMockFunùiÚSigÇtu»Te¡
,

868 
IsMockFunùiÚTem¶©eArgum’tDeduûdFÜRawSigÇtu»
) {

869 
usšg
 
	gArgum’t
 = 
Ty³P¬am
;

870 
	gMockFunùiÚ
<
	gArgum’t
> 
	gfoo
;

871 
EXPECT_TRUE
(
IsMockFunùiÚTem¶©eArgum’tDeduûdTo
<
Ty³P¬am
>(
foo
));

874 
TYPED_TEST
(
MockM‘hodMockFunùiÚSigÇtu»Te¡
,

875 
IsMockFunùiÚTem¶©eArgum’tDeduûdFÜStdFunùiÚ
) {

876 
usšg
 
	gArgum’t
 = 
¡d
::
funùiÚ
<
Ty³P¬am
>;

877 
	gMockFunùiÚ
<
	gArgum’t
> 
	gfoo
;

878 
EXPECT_TRUE
(
IsMockFunùiÚTem¶©eArgum’tDeduûdTo
<
Ty³P¬am
>(
foo
));

881 
TYPED_TEST
(

882 
MockM‘hodMockFunùiÚSigÇtu»Te¡
,

883 
IsMockFunùiÚC®lM‘hodSigÇtu»TheSameFÜRawSigÇtu»AndStdFunùiÚ
) {

884 
usšg
 
	gFÜRawSigÇtu»
 = 
deşty³
(&
MockFunùiÚ
<
Ty³P¬am
>::
C®l
);

885 
usšg
 
	gFÜStdFunùiÚ
 =

886 
deşty³
(&
MockFunùiÚ
<
¡d
::
funùiÚ
<
Ty³P¬am
>>::
C®l
);

887 
EXPECT_TRUE
((
¡d
::
is_§me
<
FÜRawSigÇtu»
, 
FÜStdFunùiÚ
>::
v®ue
));

890 
	g‹m¶©e
 <
ty³Çme
 
	gF
>

891 
	sAÉ”Ç‹C®ÏbË
 {

894 
TYPED_TEST
(
MockM‘hodMockFunùiÚSigÇtu»Te¡
,

895 
IsMockFunùiÚTem¶©eArgum’tDeduûdFÜAÉ”Ç‹C®ÏbË
) {

896 
usšg
 
	gArgum’t
 = 
AÉ”Ç‹C®ÏbË
<
Ty³P¬am
>;

897 
	gMockFunùiÚ
<
	gArgum’t
> 
	gfoo
;

898 
EXPECT_TRUE
(
IsMockFunùiÚTem¶©eArgum’tDeduûdTo
<
Ty³P¬am
>(
foo
));

901 
TYPED_TEST
(

902 
MockM‘hodMockFunùiÚSigÇtu»Te¡
,

903 
IsMockFunùiÚC®lM‘hodSigÇtu»TheSameFÜAÉ”Ç‹C®ÏbË
) {

904 
usšg
 
	gFÜRawSigÇtu»
 = 
deşty³
(&
MockFunùiÚ
<
Ty³P¬am
>::
C®l
);

905 
usšg
 
	gFÜStdFunùiÚ
 =

906 
deşty³
(&
MockFunùiÚ
<
¡d
::
funùiÚ
<
Ty³P¬am
>>::
C®l
);

907 
EXPECT_TRUE
((
¡d
::
is_§me
<
FÜRawSigÇtu»
, 
FÜStdFunùiÚ
>::
v®ue
));

911 
	sMockM‘hodSizes0
 {

912 
MOCK_METHOD
(, 
func
, ());

914 
	sMockM‘hodSizes1
 {

915 
MOCK_METHOD
(, 
func
, ());

917 
	sMockM‘hodSizes2
 {

918 
MOCK_METHOD
(, 
func
, (, ));

920 
	sMockM‘hodSizes3
 {

921 
MOCK_METHOD
(, 
func
, (, , ));

923 
	sMockM‘hodSizes4
 {

924 
MOCK_METHOD
(, 
func
, (, , , ));

927 
	sLegacyMockM‘hodSizes0
 {

928 
MOCK_METHOD0
(
func
, ());

930 
	sLegacyMockM‘hodSizes1
 {

931 
MOCK_METHOD1
(
func
, ());

933 
	sLegacyMockM‘hodSizes2
 {

934 
MOCK_METHOD2
(
func
, (, ));

936 
	sLegacyMockM‘hodSizes3
 {

937 
MOCK_METHOD3
(
func
, (, , ));

939 
	sLegacyMockM‘hodSizes4
 {

940 
MOCK_METHOD4
(
func
, (, , , ));

944 
TEST
(
MockM‘hodMockFunùiÚTe¡
, 
MockM‘hodSizeOv”h—d
) {

945 
EXPECT_EQ
((
MockM‘hodSizes0
), (
MockM‘hodSizes1
));

946 
EXPECT_EQ
((
MockM‘hodSizes0
), (
MockM‘hodSizes2
));

947 
EXPECT_EQ
((
MockM‘hodSizes0
), (
MockM‘hodSizes3
));

948 
EXPECT_EQ
((
MockM‘hodSizes0
), (
MockM‘hodSizes4
));

950 
EXPECT_EQ
((
LegacyMockM‘hodSizes0
), (
LegacyMockM‘hodSizes1
));

951 
EXPECT_EQ
((
LegacyMockM‘hodSizes0
), (
LegacyMockM‘hodSizes2
));

952 
EXPECT_EQ
((
LegacyMockM‘hodSizes0
), (
LegacyMockM‘hodSizes3
));

953 
EXPECT_EQ
((
LegacyMockM‘hodSizes0
), (
LegacyMockM‘hodSizes4
));

955 
EXPECT_EQ
((
LegacyMockM‘hodSizes0
), (
MockM‘hodSizes0
));

958 
hasTwoP¬ams
(, );

959 
MaybeThrows
();

960 
DÛ¢tThrow
(è
	gnÛxû±
;

961 
	sMockM‘hodNÛxû±S³cif›r
 {

962 
MOCK_METHOD
(, 
func1
, (), (
nÛxû±
));

963 
MOCK_METHOD
(, 
func2
, (), (
nÛxû±
(
Œue
)));

964 
MOCK_METHOD
(, 
func3
, (), (
nÛxû±
(
çl£
)));

965 
MOCK_METHOD
(, 
func4
, (), (
nÛxû±
ÒÛxû±(
MaybeThrows
()))));

966 
MOCK_METHOD
(, 
func5
, (), (
nÛxû±
ÒÛxû±(
DÛ¢tThrow
()))));

967 
MOCK_METHOD
(, 
func6
, (), (
nÛxû±
ÒÛxû±(
DÛ¢tThrow
())), const));

968 
MOCK_METHOD
(, 
func7
, (), (cÚ¡, 
nÛxû±
ÒÛxû±(
DÛ¢tThrow
()))));

970 
MOCK_METHOD
(, 
func8
, (), (
nÛxû±
ÒÛxû±(
hasTwoP¬ams
(1, 2))), const));

973 
TEST
(
MockM‘hodMockFunùiÚTe¡
, 
NÛxû±S³cif›rP»£rved
) {

974 
EXPECT_TRUE
(
nÛxû±
(
¡d
::
deşv®
<
MockM‘hodNÛxû±S³cif›r
>().
func1
()));

975 
EXPECT_TRUE
(
nÛxû±
(
¡d
::
deşv®
<
MockM‘hodNÛxû±S³cif›r
>().
func2
()));

976 
EXPECT_FALSE
(
nÛxû±
(
¡d
::
deşv®
<
MockM‘hodNÛxû±S³cif›r
>().
func3
()));

977 
EXPECT_FALSE
(
nÛxû±
(
¡d
::
deşv®
<
MockM‘hodNÛxû±S³cif›r
>().
func4
()));

978 
EXPECT_TRUE
(
nÛxû±
(
¡d
::
deşv®
<
MockM‘hodNÛxû±S³cif›r
>().
func5
()));

979 
EXPECT_TRUE
(
nÛxû±
(
¡d
::
deşv®
<
MockM‘hodNÛxû±S³cif›r
>().
func6
()));

980 
EXPECT_TRUE
(
nÛxû±
(
¡d
::
deşv®
<
MockM‘hodNÛxû±S³cif›r
>().
func7
()));

981 
EXPECT_EQ
(
nÛxû±
(
¡d
::
deşv®
<
MockM‘hodNÛxû±S³cif›r
>().
func8
()),

982 
nÛxû±
(
hasTwoP¬ams
(1, 2)));

	@third_party/googletest/googlemock/test/gmock-internal-utils_test.cc

35 
	~"gmock/š‹º®/gmock-š‹º®-uts.h
"

37 
	~<¡dlib.h
>

39 
	~<c¡dšt
>

40 
	~<m­
>

41 
	~<memÜy
>

42 
	~<s¡»am
>

43 
	~<¡ršg
>

44 
	~<veùÜ
>

46 
	~"gmock/gmock.h
"

47 
	~"gmock/š‹º®/gmock-pÜt.h
"

48 
	~"g‹¡/g‹¡-¥i.h
"

49 
	~"g‹¡/g‹¡.h
"

56 
	#GTEST_IMPLEMENTATION_
 1

	)

57 
	~"¤c/g‹¡-š‹º®-šl.h
"

58 #undeà
GTEST_IMPLEMENTATION_


60 #ià
GTEST_OS_CYGWIN


61 
	~<sys/ty³s.h
>

64 
Çme¥aû
 
	g´Ùo2
 {

65 
şass
 
	gMes§ge
;

68 
Çme¥aû
 
	g‹¡šg
 {

69 
Çme¥aû
 
	gš‹º®
 {

71 
	gÇme¥aû
 {

73 
TEST
(
JošAsTu¶eTe¡
, 
JošsEm±yTu¶e
) {

74 
EXPECT_EQ
("", 
JošAsTu¶e
(
SŒšgs
()));

77 
TEST
(
JošAsTu¶eTe¡
, 
JošsOÃTu¶e
) {

78 cÚ¡ * 
	gf›lds
[] = {"1"};

79 
EXPECT_EQ
("1", 
JošAsTu¶e
(
SŒšgs
(
f›lds
, fields + 1)));

82 
TEST
(
JošAsTu¶eTe¡
, 
JošsTwoTu¶e
) {

83 cÚ¡ * 
	gf›lds
[] = {"1", "a"};

84 
EXPECT_EQ
("(1,‡)", 
JošAsTu¶e
(
SŒšgs
(
f›lds
, fields + 2)));

87 
TEST
(
JošAsTu¶eTe¡
, 
JošsT’Tu¶e
) {

88 cÚ¡ * 
	gf›lds
[] = {"1", "2", "3", "4", "5", "6", "7", "8", "9", "10"};

89 
EXPECT_EQ
("(1, 2, 3, 4, 5, 6, 7, 8, 9, 10)",

90 
JošAsTu¶e
(
SŒšgs
(
f›lds
, fields + 10)));

93 
TEST
(
CÚv”tId’tif›rNameToWÜdsTe¡
, 
WÜksWh’NameCÚšsNoWÜd
) {

94 
EXPECT_EQ
("", 
CÚv”tId’tif›rNameToWÜds
(""));

95 
EXPECT_EQ
("", 
CÚv”tId’tif›rNameToWÜds
("_"));

96 
EXPECT_EQ
("", 
CÚv”tId’tif›rNameToWÜds
("__"));

99 
TEST
(
CÚv”tId’tif›rNameToWÜdsTe¡
, 
WÜksWh’NameCÚšsDig™s
) {

100 
EXPECT_EQ
("1", 
CÚv”tId’tif›rNameToWÜds
("_1"));

101 
EXPECT_EQ
("2", 
CÚv”tId’tif›rNameToWÜds
("2_"));

102 
EXPECT_EQ
("34", 
CÚv”tId’tif›rNameToWÜds
("_34_"));

103 
EXPECT_EQ
("34 56", 
CÚv”tId’tif›rNameToWÜds
("_34_56"));

106 
TEST
(
CÚv”tId’tif›rNameToWÜdsTe¡
, 
WÜksWh’NameCÚšsCam–Ca£WÜds
) {

107 
EXPECT_EQ
("¨big wÜd", 
CÚv”tId’tif›rNameToWÜds
("ABigWord"));

108 
EXPECT_EQ
("foØb¬", 
CÚv”tId’tif›rNameToWÜds
("FooBar"));

109 
EXPECT_EQ
("foo", 
CÚv”tId’tif›rNameToWÜds
("Foo_"));

110 
EXPECT_EQ
("foØb¬", 
CÚv”tId’tif›rNameToWÜds
("_Foo_Bar_"));

111 
EXPECT_EQ
("foØªd b¬", 
CÚv”tId’tif›rNameToWÜds
("_Foo__And_Bar"));

114 
TEST
(
CÚv”tId’tif›rNameToWÜdsTe¡
, 
WÜksWh’NameCÚšs_S•¬©edWÜds
) {

115 
EXPECT_EQ
("foØb¬", 
CÚv”tId’tif›rNameToWÜds
("foo_bar"));

116 
EXPECT_EQ
("foo", 
CÚv”tId’tif›rNameToWÜds
("_foo_"));

117 
EXPECT_EQ
("foØb¬", 
CÚv”tId’tif›rNameToWÜds
("_foo_bar_"));

118 
EXPECT_EQ
("foØªd b¬", 
CÚv”tId’tif›rNameToWÜds
("_foo__and_bar"));

121 
TEST
(
CÚv”tId’tif›rNameToWÜdsTe¡
, 
WÜksWh’NameIsMixtu»
) {

122 
EXPECT_EQ
("foØb¬ 123", 
CÚv”tId’tif›rNameToWÜds
("Foo_bar123"));

123 
EXPECT_EQ
("chapter 11 section 1",

124 
CÚv”tId’tif›rNameToWÜds
("_Chapter11Section_1_"));

127 
TEST
(
G‘RawPoš‹rTe¡
, 
WÜksFÜSm¬tPoš‹rs
) {

128 cÚ¡ * cÚ¡ 
	g¿w_p1
 = 
Ãw
 const ('a');

129 cÚ¡ 
	g¡d
::
unique_±r
<cÚ¡ > 
p1
(
¿w_p1
);

130 
EXPECT_EQ
(
¿w_p1
, 
G‘RawPoš‹r
(
p1
));

131 * cÚ¡ 
	g¿w_p2
 = 
Ãw
 (2.5);

132 cÚ¡ 
	g¡d
::
sh¬ed_±r
<> 
p2
(
¿w_p2
);

133 
EXPECT_EQ
(
¿w_p2
, 
G‘RawPoš‹r
(
p2
));

136 
TEST
(
G‘RawPoš‹rTe¡
, 
WÜksFÜRawPoš‹rs
) {

137 * 
	gp
 = 
nuÎ±r
;

138 
EXPECT_TRUE
(
nuÎ±r
 =ğ
G‘RawPoš‹r
(
p
));

139 
	gn
 = 1;

140 
EXPECT_EQ
(&
n
, 
G‘RawPoš‹r
(&n));

145 şas 
	cBa£
 {};

146 şas 
	cD”ived
 : 
public
 
Ba£
 {};

148 
TEST
(
KšdOfTe¡
, 
BoŞ
) {

149 
EXPECT_EQ
(
kBoŞ
, 
GMOCK_KIND_OF_
(
boŞ
));

152 
TEST
(
KšdOfTe¡
, 
IÁeg”
) {

153 
EXPECT_EQ
(
kIÁeg”
, 
GMOCK_KIND_OF_
());

154 
EXPECT_EQ
(
kIÁeg”
, 
GMOCK_KIND_OF_
(signed ));

155 
EXPECT_EQ
(
kIÁeg”
, 
GMOCK_KIND_OF_
());

156 
EXPECT_EQ
(
kIÁeg”
, 
GMOCK_KIND_OF_
());

157 
EXPECT_EQ
(
kIÁeg”
, 
GMOCK_KIND_OF_
());

158 
EXPECT_EQ
(
kIÁeg”
, 
GMOCK_KIND_OF_
());

159 
EXPECT_EQ
(
kIÁeg”
, 
GMOCK_KIND_OF_
());

160 
EXPECT_EQ
(
kIÁeg”
, 
GMOCK_KIND_OF_
());

161 
EXPECT_EQ
(
kIÁeg”
, 
GMOCK_KIND_OF_
());

162 
EXPECT_EQ
(
kIÁeg”
, 
GMOCK_KIND_OF_
());

163 
EXPECT_EQ
(
kIÁeg”
, 
GMOCK_KIND_OF_
());

164 
EXPECT_EQ
(
kIÁeg”
, 
GMOCK_KIND_OF_
(
wch¬_t
));

165 
EXPECT_EQ
(
kIÁeg”
, 
GMOCK_KIND_OF_
(
size_t
));

166 #ià
GTEST_OS_LINUX
 || 
GTEST_OS_MAC
 || 
GTEST_OS_CYGWIN


168 
EXPECT_EQ
(
kIÁeg”
, 
GMOCK_KIND_OF_
(
ssize_t
));

172 
TEST
(
KšdOfTe¡
, 
FlßtšgPošt
) {

173 
EXPECT_EQ
(
kFlßtšgPošt
, 
GMOCK_KIND_OF_
());

174 
EXPECT_EQ
(
kFlßtšgPošt
, 
GMOCK_KIND_OF_
());

175 
EXPECT_EQ
(
kFlßtšgPošt
, 
GMOCK_KIND_OF_
());

178 
TEST
(
KšdOfTe¡
, 
Oth”
) {

179 
EXPECT_EQ
(
kOth”
, 
GMOCK_KIND_OF_
(*));

180 
EXPECT_EQ
(
kOth”
, 
GMOCK_KIND_OF_
(**));

181 
EXPECT_EQ
(
kOth”
, 
GMOCK_KIND_OF_
(
Ba£
));

186 
TEST
(
Los¦essAr™hm‘icCÚv”tibËTe¡
, 
BoŞToBoŞ
) {

187 
EXPECT_TRUE
((
Los¦essAr™hm‘icCÚv”tibË
<
boŞ
, boŞ>::
v®ue
));

190 
TEST
(
Los¦essAr™hm‘icCÚv”tibËTe¡
, 
BoŞToIÁeg”
) {

191 
EXPECT_TRUE
((
Los¦essAr™hm‘icCÚv”tibË
<
boŞ
, >::
v®ue
));

192 
EXPECT_TRUE
((
Los¦essAr™hm‘icCÚv”tibË
<
boŞ
, >::
v®ue
));

193 
EXPECT_TRUE
(

194 (
Los¦essAr™hm‘icCÚv”tibË
<
boŞ
, >::
v®ue
));

197 
TEST
(
Los¦essAr™hm‘icCÚv”tibËTe¡
, 
BoŞToFlßtšgPošt
) {

198 
EXPECT_TRUE
((
Los¦essAr™hm‘icCÚv”tibË
<
boŞ
, >::
v®ue
));

199 
EXPECT_TRUE
((
Los¦essAr™hm‘icCÚv”tibË
<
boŞ
, >::
v®ue
));

202 
TEST
(
Los¦essAr™hm‘icCÚv”tibËTe¡
, 
IÁeg”ToBoŞ
) {

203 
EXPECT_FALSE
((
Los¦essAr™hm‘icCÚv”tibË
<, 
boŞ
>::
v®ue
));

204 
EXPECT_FALSE
((
Los¦essAr™hm‘icCÚv”tibË
<, 
boŞ
>::
v®ue
));

207 
TEST
(
Los¦essAr™hm‘icCÚv”tibËTe¡
, 
IÁeg”ToIÁeg”
) {

209 
EXPECT_TRUE
((
Los¦essAr™hm‘icCÚv”tibË
<, >::
v®ue
));

212 
EXPECT_TRUE
((
Los¦essAr™hm‘icCÚv”tibË
<

213 , 
ušt64_t
>::
v®ue
));

216 
EXPECT_FALSE
((
Los¦essAr™hm‘icCÚv”tibË
<

217 , 
ušt64_t
>::
v®ue
));

218 
EXPECT_FALSE
((
Los¦essAr™hm‘icCÚv”tibË
<

219 sigÃd , >::
v®ue
));

222 
EXPECT_TRUE
((
Los¦essAr™hm‘icCÚv”tibË
<

223 , >::
v®ue
));

224 
EXPECT_TRUE
((
Los¦essAr™hm‘icCÚv”tibË
<, >::
v®ue
));

225 
EXPECT_TRUE
((
Los¦essAr™hm‘icCÚv”tibË
<
wch¬_t
, wch¬_t>::
v®ue
));

226 
EXPECT_TRUE
((
Los¦essAr™hm‘icCÚv”tibË
<

227 , >::
v®ue
));

230 
EXPECT_FALSE
((
Los¦essAr™hm‘icCÚv”tibË
<

231 , sigÃd >::
v®ue
));

232 
EXPECT_FALSE
((
Los¦essAr™hm‘icCÚv”tibË
<, >::
v®ue
));

233 
EXPECT_FALSE
((
Los¦essAr™hm‘icCÚv”tibË
<
ušt64_t
, 
št64_t
>::
v®ue
));

236 
EXPECT_FALSE
((
Los¦essAr™hm‘icCÚv”tibË
<, >::
v®ue
));

237 
EXPECT_FALSE
((
Los¦essAr™hm‘icCÚv”tibË
<, sigÃd >::
v®ue
));

238 
EXPECT_FALSE
((
Los¦essAr™hm‘icCÚv”tibË
<
št64_t
, >::
v®ue
));

241 
TEST
(
Los¦essAr™hm‘icCÚv”tibËTe¡
, 
IÁeg”ToFlßtšgPošt
) {

244 
EXPECT_FALSE
((
Los¦essAr™hm‘icCÚv”tibË
<, >::
v®ue
));

245 
EXPECT_FALSE
((
Los¦essAr™hm‘icCÚv”tibË
<, >::
v®ue
));

246 
EXPECT_FALSE
((
Los¦essAr™hm‘icCÚv”tibË
<

247 , >::
v®ue
));

250 
TEST
(
Los¦essAr™hm‘icCÚv”tibËTe¡
, 
FlßtšgPoštToBoŞ
) {

251 
EXPECT_FALSE
((
Los¦essAr™hm‘icCÚv”tibË
<, 
boŞ
>::
v®ue
));

252 
EXPECT_FALSE
((
Los¦essAr™hm‘icCÚv”tibË
<, 
boŞ
>::
v®ue
));

255 
TEST
(
Los¦essAr™hm‘icCÚv”tibËTe¡
, 
FlßtšgPoštToIÁeg”
) {

256 
EXPECT_FALSE
((
Los¦essAr™hm‘icCÚv”tibË
<, >::
v®ue
));

257 
EXPECT_FALSE
((
Los¦essAr™hm‘icCÚv”tibË
<, 
št64_t
>::
v®ue
));

258 
EXPECT_FALSE
((
Los¦essAr™hm‘icCÚv”tibË
<, >::
v®ue
));

261 
TEST
(
Los¦essAr™hm‘icCÚv”tibËTe¡
, 
FlßtšgPoštToFlßtšgPošt
) {

263 
EXPECT_TRUE
((
Los¦essAr™hm‘icCÚv”tibË
<, >::
v®ue
));

264 
EXPECT_TRUE
((
Los¦essAr™hm‘icCÚv”tibË
<, >::
v®ue
));

265 
EXPECT_TRUE
((
Los¦essAr™hm‘icCÚv”tibË
<, >::
v®ue
));

268 
EXPECT_TRUE
((
Los¦essAr™hm‘icCÚv”tibË
<, >::
v®ue
));

269 
EXPECT_TRUE
((
Los¦essAr™hm‘icCÚv”tibË
<, >::
v®ue
));

272 
EXPECT_FALSE
((
Los¦essAr™hm‘icCÚv”tibË
<, >::
v®ue
));

273 
GTEST_INTENTIONAL_CONST_COND_PUSH_
()

275 
GTEST_INTENTIONAL_CONST_COND_POP_
()

278 
EXPECT_TRUE
((
Los¦essAr™hm‘icCÚv”tibË
<, >::
v®ue
));

280 
EXPECT_FALSE
((
Los¦essAr™hm‘icCÚv”tibË
<, >::
v®ue
));

286 
TEST
(
Tu¶eM©chesTe¡
, 
WÜksFÜSize0
) {

287 
	g¡d
::
tu¶e
<> 
m©ch”s
;

288 
	g¡d
::
tu¶e
<> 
v®ues
;

290 
EXPECT_TRUE
(
Tu¶eM©ches
(
m©ch”s
, 
v®ues
));

293 
TEST
(
Tu¶eM©chesTe¡
, 
WÜksFÜSize1
) {

294 
	g¡d
::
tu¶e
<
M©ch”
<> > 
m©ch”s
(
Eq
(1));

295 
	g¡d
::
tu¶e
<> 
v®ues1
(1), 
v®ues2
(2);

297 
EXPECT_TRUE
(
Tu¶eM©ches
(
m©ch”s
, 
v®ues1
));

298 
EXPECT_FALSE
(
Tu¶eM©ches
(
m©ch”s
, 
v®ues2
));

301 
TEST
(
Tu¶eM©chesTe¡
, 
WÜksFÜSize2
) {

302 
	g¡d
::
tu¶e
<
M©ch”
<>, 
	gM©ch”
<> > 
m©ch”s
(
Eq
(1), Eq('a'));

303 
	g¡d
::
tu¶e
<, > 
v®ues1
(1, 'a'), 
v®ues2
(1, 'b'), 
v®ues3
(2, 'a'),

304 
v®ues4
(2, 'b');

306 
EXPECT_TRUE
(
Tu¶eM©ches
(
m©ch”s
, 
v®ues1
));

307 
EXPECT_FALSE
(
Tu¶eM©ches
(
m©ch”s
, 
v®ues2
));

308 
EXPECT_FALSE
(
Tu¶eM©ches
(
m©ch”s
, 
v®ues3
));

309 
EXPECT_FALSE
(
Tu¶eM©ches
(
m©ch”s
, 
v®ues4
));

312 
TEST
(
Tu¶eM©chesTe¡
, 
WÜksFÜSize5
) {

313 
	g¡d
::
tu¶e
<
M©ch”
<>, 
	gM©ch”
<>, M©ch”<
	gboŞ
>,

314 
	gM©ch”
<>,

315 
	gM©ch”
<
	g¡d
::
¡ršg
> >

316 
m©ch”s
(
Eq
(1), Eq('a'), Eq(
Œue
), Eq(2L), Eq("hi"));

317 
	g¡d
::
tu¶e
<, , 
	gboŞ
, , std::
¡ršg
>

318 
v®ues1
(1, 'a', 
Œue
, 2L, "hi"), 
v®ues2
(1, 'a',rue, 2L, "hello"),

319 
v®ues3
(2, 'a', 
Œue
, 2L, "hi");

321 
EXPECT_TRUE
(
Tu¶eM©ches
(
m©ch”s
, 
v®ues1
));

322 
EXPECT_FALSE
(
Tu¶eM©ches
(
m©ch”s
, 
v®ues2
));

323 
EXPECT_FALSE
(
Tu¶eM©ches
(
m©ch”s
, 
v®ues3
));

327 
TEST
(
As£¹Te¡
, 
SucûedsOnTrue
) {

328 
As£¹
(
Œue
, 
__FILE__
, 
__LINE__
, "This should succeed.");

329 
As£¹
(
Œue
, 
__FILE__
, 
__LINE__
);

333 
TEST
(
As£¹Te¡
, 
FasF©®lyOnF®£
) {

334 
EXPECT_DEATH_IF_SUPPORTED
({

335 
As£¹
(
çl£
, 
__FILE__
, 
__LINE__
, "This should fail.");

338 
EXPECT_DEATH_IF_SUPPORTED
({

339 
As£¹
(
çl£
, 
__FILE__
, 
__LINE__
);

344 
TEST
(
Ex³ùTe¡
, 
SucûedsOnTrue
) {

345 
Ex³ù
(
Œue
, 
__FILE__
, 
__LINE__
, "This should succeed.");

346 
Ex³ù
(
Œue
, 
__FILE__
, 
__LINE__
);

350 
TEST
(
Ex³ùTe¡
, 
FasNÚçÎyOnF®£
) {

351 
EXPECT_NONFATAL_FAILURE
({

352 
Ex³ù
(
çl£
, 
__FILE__
, 
__LINE__
, "This should fail.");

355 
EXPECT_NONFATAL_FAILURE
({

356 
Ex³ù
(
çl£
, 
__FILE__
, 
__LINE__
);

362 şas 
	cLogIsVisibËTe¡
 : 
public
 ::
‹¡šg
::
Te¡
 {

363 
´Ùeùed
:

364 
S‘Up
(è
ov”ride
 { 
Üigš®_v”bo£_
 = 
GMOCK_FLAG
(
v”bo£
); }

366 
T—rDown
(è
	gov”ride
 { 
GMOCK_FLAG
(
v”bo£
èğ
Üigš®_v”bo£_
; }

368 
	g¡d
::
¡ršg
 
Üigš®_v”bo£_
;

371 
TEST_F
(
LogIsVisibËTe¡
, 
AlwaysR‘uºsTrueIfV”bos™yIsInfo
) {

372 
GMOCK_FLAG
(
v”bo£
èğ
kInfoV”bos™y
;

373 
EXPECT_TRUE
(
LogIsVisibË
(
kInfo
));

374 
EXPECT_TRUE
(
LogIsVisibË
(
kW¬nšg
));

377 
TEST_F
(
LogIsVisibËTe¡
, 
AlwaysR‘uºsF®£IfV”bos™yIsE¼Ü
) {

378 
GMOCK_FLAG
(
v”bo£
èğ
kE¼ÜV”bos™y
;

379 
EXPECT_FALSE
(
LogIsVisibË
(
kInfo
));

380 
EXPECT_FALSE
(
LogIsVisibË
(
kW¬nšg
));

383 
TEST_F
(
LogIsVisibËTe¡
, 
WÜksWh’V”bos™yIsW¬nšg
) {

384 
GMOCK_FLAG
(
v”bo£
èğ
kW¬nšgV”bos™y
;

385 
EXPECT_FALSE
(
LogIsVisibË
(
kInfo
));

386 
EXPECT_TRUE
(
LogIsVisibË
(
kW¬nšg
));

389 #ià
GTEST_HAS_STREAM_REDIRECTION


395 
Te¡LogW™hSev”™y
(cÚ¡ 
¡d
::
¡ršg
& 
v”bos™y
, 
LogSev”™y
 
£v”™y
,

396 
boŞ
 
should_´št
) {

397 cÚ¡ 
	g¡d
::
¡ršg
 
Şd_æag
 = 
GMOCK_FLAG
(
v”bo£
);

398 
GMOCK_FLAG
(
v”bo£
èğ
v”bos™y
;

399 
C­tu»Stdout
();

400 
Log
(
£v”™y
, "Test†og.\n", 0);

401 ià(
	gshould_´št
) {

402 
EXPECT_THAT
(
G‘C­tu»dStdout
().
c_¡r
(),

403 
CÚšsRegex
(

404 
£v”™y
 =ğ
kW¬nšg
 ?

408 
EXPECT_STREQ
("", 
G‘C­tu»dStdout
().
c_¡r
());

410 
GMOCK_FLAG
(
v”bo£
èğ
Şd_æag
;

415 
TEST
(
LogTe¡
, 
NoSckT¿ûWh’SckF¿mesToSkIsNeg©ive
) {

416 cÚ¡ 
	g¡d
::
¡ršg
 
§ved_æag
 = 
GMOCK_FLAG
(
v”bo£
);

417 
GMOCK_FLAG
(
v”bo£
èğ
kInfoV”bos™y
;

418 
C­tu»Stdout
();

419 
Log
(
kInfo
, "Test†og.\n", -1);

420 
EXPECT_STREQ
("\nTe¡†og.\n", 
G‘C­tu»dStdout
().
c_¡r
());

421 
GMOCK_FLAG
(
v”bo£
èğ
§ved_æag
;

424 
	gMockSckT¿ûG‘‹r
 : 
‹¡šg
::
š‹º®
::
OsSckT¿ûG‘‹rIÁ”çû
 {

425 
¡d
::
¡ršg
 
Cu¼’tSckT¿û
(
max_d•th
, 
sk_couÁ
è
	gov”ride
 {

426  (
	g‹¡šg
::
Mes§ge
(è<< 
max_d•th
 << "::" << 
sk_couÁ
 << "\n")

427 .
G‘SŒšg
();

429 
UpÚL—všgGTe¡
(è
	gov”ride
 {}

434 
TEST
(
LogTe¡
, 
NoSkpšgSckF¿meInO±Mode
) {

435 
MockSckT¿ûG‘‹r
* 
	gmock_os_¡ack_Œaû_g‘‹r
 = 
Ãw
 MockStackTraceGetter;

436 
G‘Un™Te¡Im¶
()->
£t_os_¡ack_Œaû_g‘‹r
(
mock_os_¡ack_Œaû_g‘‹r
);

438 
C­tu»Stdout
();

439 
Log
(
kW¬nšg
, "Test†og.\n", 100);

440 cÚ¡ 
	g¡d
::
¡ršg
 
log
 = 
G‘C­tu»dStdout
();

442 
	g¡d
::
¡ršg
 
ex³ùed_Œaû
 =

443 (
‹¡šg
::
Mes§ge
(è<< 
GTEST_FLAG
(
¡ack_Œaû_d•th
è<< "::").
G‘SŒšg
();

444 
	g¡d
::
¡ršg
 
ex³ùed_mes§ge
 =

448 
ex³ùed_Œaû
;

449 
EXPECT_THAT
(
log
, 
HasSub¡r
(
ex³ùed_mes§ge
));

450 
	gsk_couÁ
 = 
©oi
(
log
.
sub¡r
(
ex³ùed_mes§ge
.
size
()).
c_¡r
());

452 #ià
defšed
(
NDEBUG
)

454 cÚ¡ 
	gex³ùed_sk_couÁ
 = 0;

457 cÚ¡ 
	gex³ùed_sk_couÁ
 = 100;

463 
EXPECT_THAT
(
sk_couÁ
,

464 
AÎOf
(
Ge
(
ex³ùed_sk_couÁ
), 
Le
(expected_skip_count + 10)));

467 
G‘Un™Te¡Im¶
()->
£t_os_¡ack_Œaû_g‘‹r
(
nuÎ±r
);

472 
TEST
(
LogTe¡
, 
AÎLogsA»Prš‹dWh’V”bos™yIsInfo
) {

473 
Te¡LogW™hSev”™y
(
kInfoV”bos™y
, 
kInfo
, 
Œue
);

474 
Te¡LogW™hSev”™y
(
kInfoV”bos™y
, 
kW¬nšg
, 
Œue
);

479 
TEST
(
LogTe¡
, 
OÆyW¬nšgsA»Prš‹dWh’V”bos™yIsW¬nšg
) {

480 
Te¡LogW™hSev”™y
(
kW¬nšgV”bos™y
, 
kInfo
, 
çl£
);

481 
Te¡LogW™hSev”™y
(
kW¬nšgV”bos™y
, 
kW¬nšg
, 
Œue
);

486 
TEST
(
LogTe¡
, 
NoLogsA»Prš‹dWh’V”bos™yIsE¼Ü
) {

487 
Te¡LogW™hSev”™y
(
kE¼ÜV”bos™y
, 
kInfo
, 
çl£
);

488 
Te¡LogW™hSev”™y
(
kE¼ÜV”bos™y
, 
kW¬nšg
, 
çl£
);

493 
TEST
(
LogTe¡
, 
OÆyW¬nšgsA»Prš‹dWh’V”bos™yIsInv®id
) {

494 
Te¡LogW™hSev”™y
("šv®id", 
kInfo
, 
çl£
);

495 
Te¡LogW™hSev”™y
("šv®id", 
kW¬nšg
, 
Œue
);

500 
	g¡d
::
¡ršg
 
G¿bOuut
((*
logg”
)(), cÚ¡ * 
v”bos™y
) {

501 cÚ¡ 
	g¡d
::
¡ršg
 
§ved_æag
 = 
GMOCK_FLAG
(
v”bo£
);

502 
GMOCK_FLAG
(
v”bo£
èğ
v”bos™y
;

503 
C­tu»Stdout
();

504 
logg”
();

505 
GMOCK_FLAG
(
v”bo£
èğ
§ved_æag
;

506  
G‘C­tu»dStdout
();

509 şas 
	cDummyMock
 {

510 
	gpublic
:

511 
MOCK_METHOD0
(
Te¡M‘hod
, ());

512 
MOCK_METHOD1
(
Te¡M‘hodArg
, (
dummy
));

515 
Ex³ùC®lLogg”
() {

516 
DummyMock
 
	gmock
;

517 
EXPECT_CALL
(
mock
, 
Te¡M‘hod
());

518 
	gmock
.
Te¡M‘hod
();

522 
TEST
(
Ex³ùC®lTe¡
, 
LogsWh’V”bos™yIsInfo
) {

523 
EXPECT_THAT
(
¡d
::
¡ršg
(
G¿bOuut
(
Ex³ùC®lLogg”
, 
kInfoV”bos™y
)),

524 
HasSub¡r
("EXPECT_CALL(mock, TestMethod())"));

529 
TEST
(
Ex³ùC®lTe¡
, 
DÛsNÙLogWh’V”bos™yIsW¬nšg
) {

530 
EXPECT_STREQ
("", 
G¿bOuut
(
Ex³ùC®lLogg”
, 
kW¬nšgV”bos™y
).
c_¡r
());

535 
TEST
(
Ex³ùC®lTe¡
, 
DÛsNÙLogWh’V”bos™yIsE¼Ü
) {

536 
EXPECT_STREQ
("", 
G¿bOuut
(
Ex³ùC®lLogg”
, 
kE¼ÜV”bos™y
).
c_¡r
());

539 
OnC®lLogg”
() {

540 
DummyMock
 
	gmock
;

541 
ON_CALL
(
mock
, 
Te¡M‘hod
());

545 
TEST
(
OnC®lTe¡
, 
LogsWh’V”bos™yIsInfo
) {

546 
EXPECT_THAT
(
¡d
::
¡ršg
(
G¿bOuut
(
OnC®lLogg”
, 
kInfoV”bos™y
)),

547 
HasSub¡r
("ON_CALL(mock, TestMethod())"));

552 
TEST
(
OnC®lTe¡
, 
DÛsNÙLogWh’V”bos™yIsW¬nšg
) {

553 
EXPECT_STREQ
("", 
G¿bOuut
(
OnC®lLogg”
, 
kW¬nšgV”bos™y
).
c_¡r
());

558 
TEST
(
OnC®lTe¡
, 
DÛsNÙLogWh’V”bos™yIsE¼Ü
) {

559 
EXPECT_STREQ
("", 
G¿bOuut
(
OnC®lLogg”
, 
kE¼ÜV”bos™y
).
c_¡r
());

562 
OnC®lAnyArgum’tLogg”
() {

563 
DummyMock
 
	gmock
;

564 
ON_CALL
(
mock
, 
Te¡M‘hodArg
(
_
));

568 
TEST
(
OnC®lTe¡
, 
LogsAnythšgArgum’t
) {

569 
EXPECT_THAT
(
¡d
::
¡ršg
(
G¿bOuut
(
OnC®lAnyArgum’tLogg”
, 
kInfoV”bos™y
)),

570 
HasSub¡r
("ON_CALL(mock, TestMethodArg(_)"));

577 
TEST
(
SCÚš”V›wTe¡
, 
WÜksFÜSCÚš”
) {

578 
	gSticAs£¹Ty³Eq
<
	g¡d
::
veùÜ
<>,

579 
	gSCÚš”V›w
<
	g¡d
::
veùÜ
<> >::
ty³
>();

580 
	gSticAs£¹Ty³Eq
<cÚ¡ 
	g¡d
::
veùÜ
<>&,

581 
	gSCÚš”V›w
<
	g¡d
::
veùÜ
<> >::
cÚ¡_»ã»nû
>();

583 
	g¡d
::
	tveùÜ
<> 
	tCh¬s
;

584 
Ch¬s
 
	gv1
;

585 cÚ¡ 
	gCh¬s
& 
v2
(
SCÚš”V›w
<
Ch¬s
>::
CÚ¡Reã»nû
(
v1
));

586 
EXPECT_EQ
(&
v1
, &
v2
);

588 
	gv1
.
push_back
('a');

589 
Ch¬s
 
	gv3
 = 
SCÚš”V›w
<Ch¬s>::
Cİy
(
v1
);

590 
EXPECT_THAT
(
v3
, 
Eq
(v3));

593 
TEST
(
SCÚš”V›wTe¡
, 
WÜksFÜSticN©iveA¼ay
) {

594 
	gSticAs£¹Ty³Eq
<
	gN©iveA¼ay
<>,

595 
	gSCÚš”V›w
<[3]>::
ty³
>();

596 
	gSticAs£¹Ty³Eq
<
	gN©iveA¼ay
<>,

597 
	gSCÚš”V›w
<cÚ¡ [4]>::
ty³
>();

598 
	gSticAs£¹Ty³Eq
<
	gN©iveA¼ay
<[3]>,

599 
	gSCÚš”V›w
<cÚ¡ [2][3]>::
ty³
>();

601 
	gSticAs£¹Ty³Eq
<cÚ¡ 
	gN©iveA¼ay
<>,

602 
	gSCÚš”V›w
<[2]>::
cÚ¡_»ã»nû
>();

604 
	ga1
[3] = { 0, 1, 2 };

605 
	gN©iveA¼ay
<> 
	ga2
 = 
SCÚš”V›w
<[3]>::
CÚ¡Reã»nû
(
a1
);

606 
EXPECT_EQ
(3U, 
a2
.
size
());

607 
EXPECT_EQ
(
a1
, 
a2
.
begš
());

609 cÚ¡ 
	gN©iveA¼ay
<> 
	ga3
 = 
SCÚš”V›w
<[3]>::
Cİy
(
a1
);

610 
ASSERT_EQ
(3U, 
a3
.
size
());

611 
EXPECT_EQ
(0, 
a3
.
begš
()[0]);

612 
EXPECT_EQ
(1, 
a3
.
begš
()[1]);

613 
EXPECT_EQ
(2, 
a3
.
begš
()[2]);

616 
	ga1
[0] = 3;

617 
EXPECT_EQ
(0, 
a3
.
begš
()[0]);

620 
TEST
(
SCÚš”V›wTe¡
, 
WÜksFÜDyÇmicN©iveA¼ay
) {

621 
	gSticAs£¹Ty³Eq
<
	gN©iveA¼ay
<>,

622 
	gSCÚš”V›w
<
	g¡d
::
tu¶e
<cÚ¡ *, 
	gsize_t
> >::
ty³
>();

623 
	gSticAs£¹Ty³Eq
<

624 
	gN©iveA¼ay
<>,

625 
	gSCÚš”V›w
<
	g¡d
::
tu¶e
<
¡d
::
sh¬ed_±r
<>, > >::
ty³
>();

627 
	gSticAs£¹Ty³Eq
<

628 cÚ¡ 
	gN©iveA¼ay
<>,

629 
	gSCÚš”V›w
<
	g¡d
::
tu¶e
<cÚ¡ *, > >::
cÚ¡_»ã»nû
>();

631 
	ga1
[3] = { 0, 1, 2 };

632 cÚ¡ * cÚ¡ 
	gp1
 = 
a1
;

633 
	gN©iveA¼ay
<> 
	ga2
 =

634 
SCÚš”V›w
<
¡d
::
tu¶e
<cÚ¡ *, > >::
CÚ¡Reã»nû
(

635 
¡d
::
make_tu¶e
(
p1
, 3));

636 
EXPECT_EQ
(3U, 
a2
.
size
());

637 
EXPECT_EQ
(
a1
, 
a2
.
begš
());

639 cÚ¡ 
	gN©iveA¼ay
<> 
	ga3
 = 
SCÚš”V›w
<
¡d
::
tu¶e
<*, 
	gsize_t
> >::
Cİy
(

640 
¡d
::
make_tu¶e
(
¡©ic_ÿ¡
<*>(
a1
), 3));

641 
ASSERT_EQ
(3U, 
a3
.
size
());

642 
EXPECT_EQ
(0, 
a3
.
begš
()[0]);

643 
EXPECT_EQ
(1, 
a3
.
begš
()[1]);

644 
EXPECT_EQ
(2, 
a3
.
begš
()[2]);

647 
	ga1
[0] = 3;

648 
EXPECT_EQ
(0, 
a3
.
begš
()[0]);

653 
TEST
(
FunùiÚTe¡
, 
NuÎ¬y
) {

654 
	gFunùiÚ
<()> 
	tF
;

655 
EXPECT_EQ
(0u, 
F
::
Argum’tCouÁ
);

656 
EXPECT_TRUE
((
¡d
::
is_§me
<, 
F
::
ResuÉ
>::
v®ue
));

657 
EXPECT_TRUE
((
¡d
::
is_§me
<¡d::
tu¶e
<>, 
F
::
Argum’tTu¶e
>::
v®ue
));

658 
EXPECT_TRUE
((
¡d
::
is_§me
<¡d::
tu¶e
<>, 
F
::
Argum’tM©ch”Tu¶e
>::
v®ue
));

659 
EXPECT_TRUE
((
¡d
::
is_§me
<(), 
F
::
MakeResuÉVoid
>::
v®ue
));

660 
EXPECT_TRUE
((
¡d
::
is_§me
<
IgnÜedV®ue
(), 
F
::
MakeResuÉIgnÜedV®ue
>::
v®ue
));

663 
TEST
(
FunùiÚTe¡
, 
UÇry
) {

664 
	gFunùiÚ
<(
	tboŞ
)> 
	tF
;

665 
EXPECT_EQ
(1u, 
F
::
Argum’tCouÁ
);

666 
EXPECT_TRUE
((
¡d
::
is_§me
<, 
F
::
ResuÉ
>::
v®ue
));

667 
EXPECT_TRUE
((
¡d
::
is_§me
<
boŞ
, 
F
::
Arg
<0>::
ty³
>::
v®ue
));

668 
EXPECT_TRUE
((
¡d
::
is_§me
<¡d::
tu¶e
<
boŞ
>, 
F
::
Argum’tTu¶e
>::
v®ue
));

669 
EXPECT_TRUE
((

670 
¡d
::
is_§me
<¡d::
tu¶e
<
M©ch”
<
boŞ
>>, 
F
::
Argum’tM©ch”Tu¶e
>::
v®ue
));

671 
EXPECT_TRUE
((
¡d
::
is_§me
<(
boŞ
), 
F
::
MakeResuÉVoid
>::
v®ue
));

672 
EXPECT_TRUE
((
¡d
::
is_§me
<
IgnÜedV®ue
(
boŞ
),

673 
F
::
MakeResuÉIgnÜedV®ue
>::
v®ue
));

676 
TEST
(
FunùiÚTe¡
, 
Bš¬y
) {

677 
	gFunùiÚ
<(
	tboŞ
, cÚ¡ &)> 
	tF
;

678 
EXPECT_EQ
(2u, 
F
::
Argum’tCouÁ
);

679 
EXPECT_TRUE
((
¡d
::
is_§me
<, 
F
::
ResuÉ
>::
v®ue
));

680 
EXPECT_TRUE
((
¡d
::
is_§me
<
boŞ
, 
F
::
Arg
<0>::
ty³
>::
v®ue
));

681 
EXPECT_TRUE
((
¡d
::
is_§me
<cÚ¡ &, 
F
::
Arg
<1>::
ty³
>::
v®ue
));

682 
EXPECT_TRUE
((
¡d
::
is_§me
<¡d::
tu¶e
<
boŞ
, const &>,

683 
F
::
Argum’tTu¶e
>::
v®ue
));

684 
EXPECT_TRUE
(

685 (
¡d
::
is_§me
<¡d::
tu¶e
<
M©ch”
<
boŞ
>, Matcher<const &>>,

686 
F
::
Argum’tM©ch”Tu¶e
>::
v®ue
));

687 
EXPECT_TRUE
((
¡d
::
is_§me
<(
boŞ
, const &),

688 
F
::
MakeResuÉVoid
>::
v®ue
));

689 
EXPECT_TRUE
((
¡d
::
is_§me
<
IgnÜedV®ue
(
boŞ
, const &),

690 
F
::
MakeResuÉIgnÜedV®ue
>::
v®ue
));

693 
TEST
(
FunùiÚTe¡
, 
LÚgArgum’tLi¡
) {

694 
	gFunùiÚ
<(
	tboŞ
, , *, &, cÚ¡ &)> 
	tF
;

695 
EXPECT_EQ
(5u, 
F
::
Argum’tCouÁ
);

696 
EXPECT_TRUE
((
¡d
::
is_§me
<, 
F
::
ResuÉ
>::
v®ue
));

697 
EXPECT_TRUE
((
¡d
::
is_§me
<
boŞ
, 
F
::
Arg
<0>::
ty³
>::
v®ue
));

698 
EXPECT_TRUE
((
¡d
::
is_§me
<, 
F
::
Arg
<1>::
ty³
>::
v®ue
));

699 
EXPECT_TRUE
((
¡d
::
is_§me
<*, 
F
::
Arg
<2>::
ty³
>::
v®ue
));

700 
EXPECT_TRUE
((
¡d
::
is_§me
<&, 
F
::
Arg
<3>::
ty³
>::
v®ue
));

701 
EXPECT_TRUE
((
¡d
::
is_§me
<cÚ¡ &, 
F
::
Arg
<4>::
ty³
>::
v®ue
));

702 
EXPECT_TRUE
(

703 (
¡d
::
is_§me
<¡d::
tu¶e
<
boŞ
, , *, &, const &>,

704 
F
::
Argum’tTu¶e
>::
v®ue
));

705 
EXPECT_TRUE
(

706 (
¡d
::
is_§me
<

707 
¡d
::
tu¶e
<
M©ch”
<
boŞ
>, Matcher<>, Matcher<*>, Matcher<&>,

708 
M©ch”
<const &>>,

709 
F
::
Argum’tM©ch”Tu¶e
>::
v®ue
));

710 
EXPECT_TRUE
(

711 (
¡d
::
is_§me
<(
boŞ
, , *, &, const &),

712 
F
::
MakeResuÉVoid
>::
v®ue
));

713 
EXPECT_TRUE
((

714 
¡d
::
is_§me
<
IgnÜedV®ue
(
boŞ
, , *, &, const &),

715 
F
::
MakeResuÉIgnÜedV®ue
>::
v®ue
));

	@third_party/googletest/googlemock/test/gmock-matchers_test.cc

37 #ifdeà
_MSC_VER


38 #´agm¨
w¬nšg
(
push
)

39 #´agm¨
w¬nšg
(
di§bË
:4244)

40 #´agm¨
w¬nšg
(
di§bË
:4100)

43 
	~"gmock/gmock-m©ch”s.h
"

45 
	~<¡ršg.h
>

46 
	~<time.h
>

48 
	~<¬¿y
>

49 
	~<c¡dšt
>

50 
	~<deque
>

51 
	~<fÜw¬d_li¡
>

52 
	~<funùiÚ®
>

53 
	~<io¡»am
>

54 
	~<™”©Ü
>

55 
	~<lim™s
>

56 
	~<li¡
>

57 
	~<m­
>

58 
	~<memÜy
>

59 
	~<£t
>

60 
	~<s¡»am
>

61 
	~<¡ršg
>

62 
	~<ty³_Œa™s
>

63 
	~<unÜd”ed_m­
>

64 
	~<unÜd”ed_£t
>

65 
	~<ut™y
>

66 
	~<veùÜ
>

68 
	~"gmock/gmock-mÜe-m©ch”s.h
"

69 
	~"gmock/gmock.h
"

70 
	~"g‹¡/g‹¡-¥i.h
"

71 
	~"g‹¡/g‹¡.h
"

73 
Çme¥aû
 
	g‹¡šg
 {

74 
Çme¥aû
 
	ggmock_m©ch”s_‹¡
 {

75 
	gÇme¥aû
 {

77 
usšg
 
	g¡d
::
g»©”
;

78 
usšg
 
	g¡d
::
Ëss
;

79 
usšg
 
	g¡d
::
li¡
;

80 
usšg
 
	g¡d
::
make_·œ
;

81 
usšg
 
	g¡d
::
m­
;

82 
usšg
 
	g¡d
::
muÉim­
;

83 
usšg
 
	g¡d
::
muÉi£t
;

84 
usšg
 
	g¡d
::
o¡»am
;

85 
usšg
 
	g¡d
::
·œ
;

86 
usšg
 
	g¡d
::
£t
;

87 
usšg
 
	g¡d
::
¡ršg¡»am
;

88 
usšg
 
	g¡d
::
veùÜ
;

89 
usšg
 
	g‹¡šg
::
š‹º®
::
DummyM©chResuÉLi¡’”
;

90 
usšg
 
	g‹¡šg
::
š‹º®
::
EËm’tM©ch”Paœ
;

91 
usšg
 
	g‹¡šg
::
š‹º®
::
EËm’tM©ch”Paœs
;

92 
usšg
 
	g‹¡šg
::
š‹º®
::
EËm’tsA»A¼ayM©ch”
;

93 
usšg
 
	g‹¡šg
::
š‹º®
::
Ex¶ašM©chFau»Tu¶eTo
;

94 
usšg
 
	g‹¡šg
::
š‹º®
::
FlßtšgEqM©ch”
;

95 
usšg
 
	g‹¡šg
::
š‹º®
::
FÜm©M©ch”DesütiÚ
;

96 
usšg
 
	g‹¡šg
::
š‹º®
::
IsR—dabËTy³Name
;

97 
usšg
 
	g‹¡šg
::
š‹º®
::
M©chM©rix
;

98 
usšg
 
	g‹¡šg
::
š‹º®
::
P»diÿ‹FÜm©‹rFromM©ch”
;

99 
usšg
 
	g‹¡šg
::
š‹º®
::
RE
;

100 
usšg
 
	g‹¡šg
::
š‹º®
::
SŒ—mM©chResuÉLi¡’”
;

101 
usšg
 
	g‹¡šg
::
š‹º®
::
SŒšgs
;

106 
	sCÚš”H–³r
 {

107 
MOCK_METHOD1
(
C®l
, (
¡d
::
veùÜ
<¡d::
unique_±r
<>>));

110 
	g¡d
::
veùÜ
<
¡d
::
unique_±r
<>> 
MakeUniquePŒs
(cÚ¡ std::veùÜ<>& 
šts
) {

111 
¡d
::
veùÜ
<¡d::
unique_±r
<>> 
poš‹rs
;

112 
	gi
 : 
šts
è
poš‹rs
.
em¶aû_back
(
Ãw
 (
i
));

113  
	gpoš‹rs
;

117 
şass
 
	gG»©”ThªM©ch”
 : 
public
 
M©ch”IÁ”çû
<> {

118 
public
:

119 
ex¶ic™
 
G»©”ThªM©ch”
(
rhs
è: 
rhs_
(rhs) {}

121 
DesüibeTo
(
o¡»am
* 
os
ècÚ¡ 
ov”ride
 { *o << "i > " << 
rhs_
; }

123 
boŞ
 
M©chAndEx¶aš
(
lhs
, 
M©chResuÉLi¡’”
* 
li¡’”
ècÚ¡ 
	gov”ride
 {

124 cÚ¡ 
	gdiff
 = 
lhs
 - 
rhs_
;

125 ià(
	gdiff
 > 0) {

126 *
	gli¡’”
 << "which i " << 
	gdiff
 << " mÜthª " << 
	grhs_
;

127 } ià(
	gdiff
 == 0) {

128 *
li¡’”
 << "which i th§ma " << 
rhs_
;

130 *
	gli¡’”
 << "which i " << -
	gdiff
 << "†es thª " << 
	grhs_
;

133  
	glhs
 > 
	grhs_
;

136 
	g´iv©e
:

137 
rhs_
;

140 
	gM©ch”
<> 
G»©”Thª
(
n
) {

141  
MakeM©ch”
(
Ãw
 
G»©”ThªM©ch”
(
n
));

144 
	g¡d
::
¡ršg
 
OfTy³
(cÚ¡ 
¡d
::¡ršg& 
ty³_Çme
) {

145 #ià
GTEST_HAS_RTTI


146  
IsR—dabËTy³Name
(
ty³_Çme
) ? " (ofype " +ype_name + ")" : "";

153 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

154 
	g¡d
::
¡ršg
 
Desüibe
(cÚ¡ 
M©ch”
<
T
>& 
m
) {

155  
DesüibeM©ch”
<
T
>(
m
);

159 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

160 
	g¡d
::
¡ršg
 
DesüibeNeg©iÚ
(cÚ¡ 
M©ch”
<
T
>& 
m
) {

161  
DesüibeM©ch”
<
T
>(
m
, 
	gŒue
);

165 
	g‹m¶©e
 <
ty³Çme
 
	gM©ch”Ty³
,y³Çm
	gV®ue
>

166 
	g¡d
::
¡ršg
 
Ex¶aš
(cÚ¡ 
M©ch”Ty³
& 
m
, cÚ¡ 
V®ue
& 
x
) {

167 
SŒšgM©chResuÉLi¡’”
 
	gli¡’”
;

168 
Ex¶ašM©chResuÉ
(
m
, 
x
, &
li¡’”
);

169  
	gli¡’”
.
¡r
();

172 
TEST
(
MÚÙÚicM©ch”Te¡
, 
IsPršbË
) {

173 
¡ršg¡»am
 
	gss
;

174 
	gss
 << 
G»©”Thª
(5);

175 
EXPECT_EQ
("i > 5", 
ss
.
¡r
());

178 
TEST
(
M©chResuÉLi¡’”Te¡
, 
SŒ—mšgWÜks
) {

179 
SŒšgM©chResuÉLi¡’”
 
	gli¡’”
;

180 
	gli¡’”
 << "hi" << 5;

181 
EXPECT_EQ
("hi5", 
li¡’”
.
¡r
());

183 
	gli¡’”
.
CË¬
();

184 
EXPECT_EQ
("", 
li¡’”
.
¡r
());

186 
	gli¡’”
 << 42;

187 
EXPECT_EQ
("42", 
li¡’”
.
¡r
());

190 
DummyM©chResuÉLi¡’”
 
	gdummy
;

191 
	gdummy
 << "hi" << 5;

194 
TEST
(
M©chResuÉLi¡’”Te¡
, 
CªAcûssUnd”lyšgSŒ—m
) {

195 
EXPECT_TRUE
(
DummyM©chResuÉLi¡’”
().
¡»am
(è=ğ
nuÎ±r
);

196 
EXPECT_TRUE
(
SŒ—mM©chResuÉLi¡’”
(
nuÎ±r
).
¡»am
() ==‚ullptr);

198 
EXPECT_EQ
(&
¡d
::
cout
, 
SŒ—mM©chResuÉLi¡’”
(&¡d::cout).
¡»am
());

201 
TEST
(
M©chResuÉLi¡’”Te¡
, 
IsIÁ”e¡edWÜks
) {

202 
EXPECT_TRUE
(
SŒšgM©chResuÉLi¡’”
().
IsIÁ”e¡ed
());

203 
EXPECT_TRUE
(
SŒ—mM©chResuÉLi¡’”
(&
¡d
::
cout
).
IsIÁ”e¡ed
());

205 
EXPECT_FALSE
(
DummyM©chResuÉLi¡’”
().
IsIÁ”e¡ed
());

206 
EXPECT_FALSE
(
SŒ—mM©chResuÉLi¡’”
(
nuÎ±r
).
IsIÁ”e¡ed
());

211 
şass
 
	gEv’M©ch”Im¶
 : 
public
 
M©ch”IÁ”çû
<> {

212 
public
:

213 
boŞ
 
M©chAndEx¶aš
(
x
,

214 
M©chResuÉLi¡’”
* ) cÚ¡ 
	gov”ride
 {

215  
	gx
 % 2 == 0;

218 
DesüibeTo
(
o¡»am
* 
os
ècÚ¡ 
	gov”ride
 { *
	gos
 << "is‡nƒven‚umber"; }

226 
TEST
(
M©ch”IÁ”çûTe¡
, 
CªBeIm¶em’‹dUsšgPublishedAPI
) {

227 
Ev’M©ch”Im¶
 
	gm
;

232 
şass
 
	gNewEv’M©ch”Im¶
 : 
public
 
M©ch”IÁ”çû
<> {

233 
public
:

234 
boŞ
 
M©chAndEx¶aš
(
x
, 
M©chResuÉLi¡’”
* 
li¡’”
ècÚ¡ 
	gov”ride
 {

235 cÚ¡ 
boŞ
 
	gm©ch
 = 
x
 % 2 == 0;

237 *
	gli¡’”
 << "value % " << 2;

238 ià(
	gli¡’”
->
¡»am
(è!ğ
nuÎ±r
) {

241 *
li¡’”
->
¡»am
(è<< " =ğ" << (
x
 % 2);

243  
	gm©ch
;

246 
DesüibeTo
(
o¡»am
* 
os
ècÚ¡ 
	gov”ride
 { *
	gos
 << "is‡nƒven‚umber"; }

249 
TEST
(
M©ch”IÁ”çûTe¡
, 
CªBeIm¶em’‹dUsšgNewAPI
) {

250 
	gM©ch”
<> 
	gm
 = 
MakeM©ch”
(
Ãw
 
NewEv’M©ch”Im¶
);

251 
EXPECT_TRUE
(
m
.
M©ches
(2));

252 
EXPECT_FALSE
(
m
.
M©ches
(3));

253 
EXPECT_EQ
("v®u% 2 =ğ0", 
Ex¶aš
(
m
, 2));

254 
EXPECT_EQ
("v®u% 2 =ğ1", 
Ex¶aš
(
m
, 3));

258 
TEST
(
M©ch”Te¡
, 
CªBeDeçuÉCÚ¡ruùed
) {

259 
	gM©ch”
<> 
	gm
;

263 
TEST
(
M©ch”Te¡
, 
CªBeCÚ¡ruùedFromM©ch”IÁ”çû
) {

264 cÚ¡ 
	gM©ch”IÁ”çû
<>* 
	gim¶
 = 
Ãw
 
Ev’M©ch”Im¶
;

265 
	gM©ch”
<> 
m
(
im¶
);

266 
EXPECT_TRUE
(
m
.
M©ches
(4));

267 
EXPECT_FALSE
(
m
.
M©ches
(5));

271 
TEST
(
M©ch”Te¡
, 
CªBeIm¶ic™lyCÚ¡ruùedFromV®ue
) {

272 
	gM©ch”
<> 
	gm1
 = 5;

273 
EXPECT_TRUE
(
m1
.
M©ches
(5));

274 
EXPECT_FALSE
(
m1
.
M©ches
(6));

278 
TEST
(
M©ch”Te¡
, 
CªBeIm¶ic™lyCÚ¡ruùedFromNULL
) {

279 
	gM©ch”
<*> 
	gm1
 = 
nuÎ±r
;

280 
EXPECT_TRUE
(
m1
.
M©ches
(
nuÎ±r
));

281 
	gn
 = 0;

282 
EXPECT_FALSE
(
m1
.
M©ches
(&
n
));

287 
	sUndefšed
 {

288 
	gvœtu®
 ~
Undefšed
() = 0;

289 cÚ¡ 
	gkIÁ
 = 1;

292 
TEST
(
M©ch”Te¡
, 
CªBeCÚ¡ruùedFromUndefšedV¬ŸbË
) {

293 
	gM©ch”
<> 
	gm1
 = 
Undefšed
::
kIÁ
;

294 
EXPECT_TRUE
(
m1
.
M©ches
(1));

295 
EXPECT_FALSE
(
m1
.
M©ches
(2));

299 
TEST
(
M©ch”Te¡
, 
CªAcû±Ab¡¿ùCÏss
è{ 
	gM©ch”
<cÚ¡ 
	gUndefšed
&> 
	gm
 = 
_
; }

302 
TEST
(
M©ch”Te¡
, 
IsCİyabË
) {

304 
	gM©ch”
<
	gboŞ
> 
	gm1
 = 
Eq
(
çl£
);

305 
EXPECT_TRUE
(
m1
.
M©ches
(
çl£
));

306 
EXPECT_FALSE
(
m1
.
M©ches
(
Œue
));

309 
	gm1
 = 
Eq
(
Œue
);

310 
EXPECT_TRUE
(
m1
.
M©ches
(
Œue
));

311 
EXPECT_FALSE
(
m1
.
M©ches
(
çl£
));

316 
TEST
(
M©ch”Te¡
, 
CªDesüibeIt£lf
) {

317 
EXPECT_EQ
("is‡nƒven‚umber",

318 
Desüibe
(
M©ch”
<>(
Ãw
 
Ev’M©ch”Im¶
)));

322 
TEST
(
M©ch”Te¡
, 
M©chAndEx¶aš
) {

323 
	gM©ch”
<> 
	gm
 = 
G»©”Thª
(0);

324 
SŒšgM©chResuÉLi¡’”
 
	gli¡’”1
;

325 
EXPECT_TRUE
(
m
.
M©chAndEx¶aš
(42, &
li¡’”1
));

326 
EXPECT_EQ
("which i 42 mÜthª 0", 
li¡’”1
.
¡r
());

328 
SŒšgM©chResuÉLi¡’”
 
	gli¡’”2
;

329 
EXPECT_FALSE
(
m
.
M©chAndEx¶aš
(-9, &
li¡’”2
));

330 
EXPECT_EQ
("which i 9†es thª 0", 
li¡’”2
.
¡r
());

335 
TEST
(
SŒšgM©ch”Te¡
, 
CªBeIm¶ic™lyCÚ¡ruùedFromCSŒšgL™”®
) {

336 
	gM©ch”
<
	g¡d
::
¡ršg
> 
m1
 = "hi";

337 
EXPECT_TRUE
(
m1
.
M©ches
("hi"));

338 
EXPECT_FALSE
(
m1
.
M©ches
("hello"));

340 
	gM©ch”
<cÚ¡ 
	g¡d
::
¡ršg
&> 
m2
 = "hi";

341 
EXPECT_TRUE
(
m2
.
M©ches
("hi"));

342 
EXPECT_FALSE
(
m2
.
M©ches
("hello"));

347 
TEST
(
SŒšgM©ch”Te¡
, 
CªBeIm¶ic™lyCÚ¡ruùedFromSŒšg
) {

348 
	gM©ch”
<
	g¡d
::
¡ršg
> 
m1
 = 
¡d
::string("hi");

349 
EXPECT_TRUE
(
m1
.
M©ches
("hi"));

350 
EXPECT_FALSE
(
m1
.
M©ches
("hello"));

352 
	gM©ch”
<cÚ¡ 
	g¡d
::
¡ršg
&> 
m2
 = 
¡d
::string("hi");

353 
EXPECT_TRUE
(
m2
.
M©ches
("hi"));

354 
EXPECT_FALSE
(
m2
.
M©ches
("hello"));

357 #ià
GTEST_INTERNAL_HAS_STRING_VIEW


360 
TEST
(
SŒšgV›wM©ch”Te¡
, 
CªBeIm¶ic™lyCÚ¡ruùedFromCSŒšgL™”®
) {

361 
	gM©ch”
<
	gš‹º®
::
SŒšgV›w
> 
m1
 = "cats";

362 
EXPECT_TRUE
(
m1
.
M©ches
("cats"));

363 
EXPECT_FALSE
(
m1
.
M©ches
("dogs"));

365 
	gM©ch”
<cÚ¡ 
	gš‹º®
::
SŒšgV›w
&> 
m2
 = "cats";

366 
EXPECT_TRUE
(
m2
.
M©ches
("cats"));

367 
EXPECT_FALSE
(
m2
.
M©ches
("dogs"));

372 
TEST
(
SŒšgV›wM©ch”Te¡
, 
CªBeIm¶ic™lyCÚ¡ruùedFromSŒšg
) {

373 
	gM©ch”
<
	gš‹º®
::
SŒšgV›w
> 
m1
 = 
¡d
::
¡ršg
("cats");

374 
EXPECT_TRUE
(
m1
.
M©ches
("cats"));

375 
EXPECT_FALSE
(
m1
.
M©ches
("dogs"));

377 
	gM©ch”
<cÚ¡ 
	gš‹º®
::
SŒšgV›w
&> 
m2
 = 
¡d
::
¡ršg
("cats");

378 
EXPECT_TRUE
(
m2
.
M©ches
("cats"));

379 
EXPECT_FALSE
(
m2
.
M©ches
("dogs"));

384 
TEST
(
SŒšgV›wM©ch”Te¡
, 
CªBeIm¶ic™lyCÚ¡ruùedFromSŒšgV›w
) {

385 
	gM©ch”
<
	gš‹º®
::
SŒšgV›w
> 
m1
 = 
š‹º®
::StringView("cats");

386 
EXPECT_TRUE
(
m1
.
M©ches
("cats"));

387 
EXPECT_FALSE
(
m1
.
M©ches
("dogs"));

389 
	gM©ch”
<cÚ¡ 
	gš‹º®
::
SŒšgV›w
&> 
m2
 = 
š‹º®
::StringView("cats");

390 
EXPECT_TRUE
(
m2
.
M©ches
("cats"));

391 
EXPECT_FALSE
(
m2
.
M©ches
("dogs"));

397 
TEST
(
SŒšgM©ch”Te¡
,

398 
CªBeIm¶ic™lyCÚ¡ruùedFromEqReã»nûW¿µ”SŒšg
) {

399 
	g¡d
::
¡ršg
 
v®ue
 = "cats";

400 
	gM©ch”
<
	g¡d
::
¡ršg
> 
m1
 = 
Eq
(
¡d
::
»f
(
v®ue
));

401 
EXPECT_TRUE
(
m1
.
M©ches
("cats"));

402 
EXPECT_FALSE
(
m1
.
M©ches
("dogs"));

404 
	gM©ch”
<cÚ¡ 
	g¡d
::
¡ršg
&> 
m2
 = 
Eq
(
¡d
::
»f
(
v®ue
));

405 
EXPECT_TRUE
(
m2
.
M©ches
("cats"));

406 
EXPECT_FALSE
(
m2
.
M©ches
("dogs"));

412 
TEST
(
MakeM©ch”Te¡
, 
CÚ¡ruùsM©ch”FromM©ch”IÁ”çû
) {

413 cÚ¡ 
	gM©ch”IÁ”çû
<>* 
	gdummy_im¶
 = 
Ãw
 
Ev’M©ch”Im¶
;

414 
	gM©ch”
<> 
	gm
 = 
MakeM©ch”
(
dummy_im¶
);

419 cÚ¡ 
	gg_b¬
 = 1;

420 şas 
	cReã»nûsB¬OrIsZ”oIm¶
 {

421 
	gpublic
:

422 
‹m¶©e
 <
ty³Çme
 
T
>

423 
boŞ
 
M©chAndEx¶aš
(cÚ¡ 
T
& 
x
,

424 
M©chResuÉLi¡’”
* ) const {

425 cÚ¡ * 
	gp
 = &
x
;

426  
	gp
 =ğ&
g_b¬
 || 
x
 == 0;

429 
DesüibeTo
(
o¡»am
* 
os
ècÚ¡ { *
	gos
 << "g_bar or zero"; }

431 
DesüibeNeg©iÚTo
(
o¡»am
* 
os
) const {

432 *
	gos
 << "doesn't„eference g_bar‡nd is‚ot zero";

438 
	gPŞymÜphicM©ch”
<
	gReã»nûsB¬OrIsZ”oIm¶
> 
Reã»nûsB¬OrIsZ”o
() {

439  
MakePŞymÜphicM©ch”
(
Reã»nûsB¬OrIsZ”oIm¶
());

442 
TEST
(
MakePŞymÜphicM©ch”Te¡
, 
CÚ¡ruùsM©ch”UsšgOldAPI
) {

444 
	gM©ch”
<cÚ¡ &> 
	gm1
 = 
Reã»nûsB¬OrIsZ”o
();

445 
EXPECT_TRUE
(
m1
.
M©ches
(0));

447 
EXPECT_TRUE
(
m1
.
M©ches
(
g_b¬
));

448 
EXPECT_FALSE
(
m1
.
M©ches
(1));

449 
EXPECT_EQ
("g_b¬ o¸z”o", 
Desüibe
(
m1
));

452 
	gM©ch”
<> 
	gm2
 = 
Reã»nûsB¬OrIsZ”o
();

453 
EXPECT_TRUE
(
m2
.
M©ches
(0.0));

454 
EXPECT_FALSE
(
m2
.
M©ches
(0.1));

455 
EXPECT_EQ
("g_b¬ o¸z”o", 
Desüibe
(
m2
));

460 şas 
	cPŞymÜphicIsEv’Im¶
 {

461 
	gpublic
:

462 
DesüibeTo
(
o¡»am
* 
os
) const { *os << "isƒven"; }

464 
DesüibeNeg©iÚTo
(
o¡»am
* 
os
) const {

465 *
	gos
 << "is odd";

468 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

469 
boŞ
 
M©chAndEx¶aš
(cÚ¡ 
T
& 
x
, 
M©chResuÉLi¡’”
* 
li¡’”
) const {

471 *
	gli¡’”
 << "% " << 2;

472 ià(
	gli¡’”
->
¡»am
(è!ğ
nuÎ±r
) {

475 *
li¡’”
->
¡»am
(è<< " =ğ" << (
x
 % 2);

477  (
	gx
 % 2) == 0;

481 
	gPŞymÜphicM©ch”
<
	gPŞymÜphicIsEv’Im¶
> 
PŞymÜphicIsEv’
() {

482  
MakePŞymÜphicM©ch”
(
PŞymÜphicIsEv’Im¶
());

485 
TEST
(
MakePŞymÜphicM©ch”Te¡
, 
CÚ¡ruùsM©ch”UsšgNewAPI
) {

487 cÚ¡ 
	gM©ch”
<> 
	gm1
 = 
PŞymÜphicIsEv’
();

488 
EXPECT_TRUE
(
m1
.
M©ches
(42));

489 
EXPECT_FALSE
(
m1
.
M©ches
(43));

490 
EXPECT_EQ
("i ev’", 
Desüibe
(
m1
));

492 cÚ¡ 
	gM©ch”
<> 
	gnÙ_m1
 = 
NÙ
(
m1
);

493 
EXPECT_EQ
("i odd", 
Desüibe
(
nÙ_m1
));

495 
EXPECT_EQ
("% 2 =ğ0", 
Ex¶aš
(
m1
, 42));

498 cÚ¡ 
	gM©ch”
<> 
	gm2
 = 
PŞymÜphicIsEv’
();

499 
EXPECT_TRUE
(
m2
.
M©ches
('\x42'));

500 
EXPECT_FALSE
(
m2
.
M©ches
('\x43'));

501 
EXPECT_EQ
("i ev’", 
Desüibe
(
m2
));

503 cÚ¡ 
	gM©ch”
<> 
	gnÙ_m2
 = 
NÙ
(
m2
);

504 
EXPECT_EQ
("i odd", 
Desüibe
(
nÙ_m2
));

506 
EXPECT_EQ
("% 2 =ğ0", 
Ex¶aš
(
m2
, '\x42'));

510 
TEST
(
M©ch”Ca¡Te¡
, 
FromPŞymÜphicM©ch”
) {

511 
	gM©ch”
<> 
	gm
 = 
M©ch”Ca¡
<>(
Eq
(5));

512 
EXPECT_TRUE
(
m
.
M©ches
(5));

513 
EXPECT_FALSE
(
m
.
M©ches
(6));

517 şas 
	cIÁV®ue
 {

518 
	gpublic
:

521 
ex¶ic™
 
IÁV®ue
(
a_v®ue
è: 
v®ue_
(a_value) {}

523 
v®ue
(ècÚ¡ {  
v®ue_
; }

524 
	g´iv©e
:

525 
v®ue_
;

529 
boŞ
 
IsPos™iveIÁV®ue
(cÚ¡ 
IÁV®ue
& 
foo
) {

530  
	gfoo
.
v®ue
() > 0;

535 
TEST
(
M©ch”Ca¡Te¡
, 
FromCom·tibËTy³
) {

536 
	gM©ch”
<> 
	gm1
 = 
Eq
(2.0);

537 
	gM©ch”
<> 
	gm2
 = 
M©ch”Ca¡
<>(
m1
);

538 
EXPECT_TRUE
(
m2
.
M©ches
(2));

539 
EXPECT_FALSE
(
m2
.
M©ches
(3));

541 
	gM©ch”
<
	gIÁV®ue
> 
	gm3
 = 
Truly
(
IsPos™iveIÁV®ue
);

542 
	gM©ch”
<> 
	gm4
 = 
M©ch”Ca¡
<>(
m3
);

546 
EXPECT_TRUE
(
m4
.
M©ches
(1));

547 
EXPECT_FALSE
(
m4
.
M©ches
(0));

551 
TEST
(
M©ch”Ca¡Te¡
, 
FromCÚ¡Reã»nûToNÚReã»nû
) {

552 
	gM©ch”
<cÚ¡ &> 
	gm1
 = 
Eq
(0);

553 
	gM©ch”
<> 
	gm2
 = 
M©ch”Ca¡
<>(
m1
);

554 
EXPECT_TRUE
(
m2
.
M©ches
(0));

555 
EXPECT_FALSE
(
m2
.
M©ches
(1));

559 
TEST
(
M©ch”Ca¡Te¡
, 
FromReã»nûToNÚReã»nû
) {

560 
	gM©ch”
<&> 
	gm1
 = 
Eq
(0);

561 
	gM©ch”
<> 
	gm2
 = 
M©ch”Ca¡
<>(
m1
);

562 
EXPECT_TRUE
(
m2
.
M©ches
(0));

563 
EXPECT_FALSE
(
m2
.
M©ches
(1));

567 
TEST
(
M©ch”Ca¡Te¡
, 
FromNÚReã»nûToCÚ¡Reã»nû
) {

568 
	gM©ch”
<> 
	gm1
 = 
Eq
(0);

569 
	gM©ch”
<cÚ¡ &> 
	gm2
 = 
M©ch”Ca¡
<cÚ¡ &>(
m1
);

570 
EXPECT_TRUE
(
m2
.
M©ches
(0));

571 
EXPECT_FALSE
(
m2
.
M©ches
(1));

575 
TEST
(
M©ch”Ca¡Te¡
, 
FromNÚReã»nûToReã»nû
) {

576 
	gM©ch”
<> 
	gm1
 = 
Eq
(0);

577 
	gM©ch”
<&> 
	gm2
 = 
M©ch”Ca¡
<&>(
m1
);

578 
	gn
 = 0;

579 
EXPECT_TRUE
(
m2
.
M©ches
(
n
));

580 
	gn
 = 1;

581 
EXPECT_FALSE
(
m2
.
M©ches
(
n
));

585 
TEST
(
M©ch”Ca¡Te¡
, 
FromSameTy³
) {

586 
	gM©ch”
<> 
	gm1
 = 
Eq
(0);

587 
	gM©ch”
<> 
	gm2
 = 
M©ch”Ca¡
<>(
m1
);

588 
EXPECT_TRUE
(
m2
.
M©ches
(0));

589 
EXPECT_FALSE
(
m2
.
M©ches
(1));

594 
TEST
(
M©ch”Ca¡Te¡
, 
FromAV®ue
) {

595 
	gM©ch”
<> 
	gm
 = 
M©ch”Ca¡
<>(42);

596 
EXPECT_TRUE
(
m
.
M©ches
(42));

597 
EXPECT_FALSE
(
m
.
M©ches
(239));

602 
TEST
(
M©ch”Ca¡Te¡
, 
FromAnIm¶ic™lyCÚv”tibËV®ue
) {

603 cÚ¡ 
	gkEx³ùed
 = 'c';

604 
	gM©ch”
<> 
	gm
 = 
M©ch”Ca¡
<>('c');

605 
EXPECT_TRUE
(
m
.
M©ches
(
kEx³ùed
));

606 
EXPECT_FALSE
(
m
.
M©ches
(
kEx³ùed
 + 1));

609 
	sNÚIm¶ic™lyCÚ¡ruùibËTy³W™hO³¿tÜEq
 {

610 
ä›nd
 
boŞ
 
	gİ”©Ü
==(

611 cÚ¡ 
NÚIm¶ic™lyCÚ¡ruùibËTy³W™hO³¿tÜEq
& ,

612 
	grhs
) {

613  42 =ğ
rhs
;

615 
ä›nd
 
boŞ
 
	gİ”©Ü
==(

616 
lhs
,

617 cÚ¡ 
	gNÚIm¶ic™lyCÚ¡ruùibËTy³W™hO³¿tÜEq
& ) {

618  
	glhs
 == 42;

625 
TEST
(
M©ch”Ca¡Te¡
, 
NÚIm¶ic™lyCÚ¡ruùibËTy³W™hO³¿tÜEq
) {

626 
	gM©ch”
<
	gNÚIm¶ic™lyCÚ¡ruùibËTy³W™hO³¿tÜEq
> 
	gm1
 =

627 
M©ch”Ca¡
<
NÚIm¶ic™lyCÚ¡ruùibËTy³W™hO³¿tÜEq
>(42);

628 
EXPECT_TRUE
(
m1
.
M©ches
(
NÚIm¶ic™lyCÚ¡ruùibËTy³W™hO³¿tÜEq
()));

630 
	gM©ch”
<
	gNÚIm¶ic™lyCÚ¡ruùibËTy³W™hO³¿tÜEq
> 
	gm2
 =

631 
M©ch”Ca¡
<
NÚIm¶ic™lyCÚ¡ruùibËTy³W™hO³¿tÜEq
>(239);

632 
EXPECT_FALSE
(
m2
.
M©ches
(
NÚIm¶ic™lyCÚ¡ruùibËTy³W™hO³¿tÜEq
()));

636 
	gM©ch”
<> 
	gm3
 =

637 
M©ch”Ca¡
<>(
NÚIm¶ic™lyCÚ¡ruùibËTy³W™hO³¿tÜEq
());

638 
EXPECT_TRUE
(
m3
.
M©ches
(42));

639 
EXPECT_FALSE
(
m3
.
M©ches
(239));

647 #ià!
defšed
 
_MSC_VER


656 
Çme¥aû
 
	gcÚv”tibË_äom_ªy
 {

658 
	sCÚv”tibËFromAny
 {

659 
CÚv”tibËFromAny
(
a_v®ue
è: 
v®ue
(a_value) {}

660 
‹m¶©e
 <
ty³Çme
 
T
>

661 
CÚv”tibËFromAny
(cÚ¡ 
T
& ) : 
v®ue
(-1) {

662 
ADD_FAILURE
() << "Conversion constructor called";

664 
	gv®ue
;

667 
boŞ
 
	gİ”©Ü
==(cÚ¡ 
CÚv”tibËFromAny
& 
a
, cÚ¡ 
	gCÚv”tibËFromAny
& 
	gb
) {

668  
	ga
.
	gv®ue
 =ğ
b
.
v®ue
;

671 
	go¡»am
& 
	gİ”©Ü
<<(o¡»am& 
	gos
, cÚ¡ 
	gCÚv”tibËFromAny
& 
	ga
) {

672  
	gos
 << 
	ga
.
	gv®ue
;

675 
TEST
(
M©ch”Ca¡Te¡
, 
CÚv”siÚCÚ¡ruùÜIsU£d
) {

676 
	gM©ch”
<
	gCÚv”tibËFromAny
> 
	gm
 = 
M©ch”Ca¡
<
CÚv”tibËFromAny
>(1);

677 
EXPECT_TRUE
(
m
.
M©ches
(
CÚv”tibËFromAny
(1)));

678 
EXPECT_FALSE
(
m
.
M©ches
(
CÚv”tibËFromAny
(2)));

681 
TEST
(
M©ch”Ca¡Te¡
, 
FromCÚv”tibËFromAny
) {

682 
	gM©ch”
<
	gCÚv”tibËFromAny
> 
	gm
 =

683 
M©ch”Ca¡
<
CÚv”tibËFromAny
>(
Eq
(ConvertibleFromAny(1)));

684 
EXPECT_TRUE
(
m
.
M©ches
(
CÚv”tibËFromAny
(1)));

685 
EXPECT_FALSE
(
m
.
M©ches
(
CÚv”tibËFromAny
(2)));

691 
	sIÁReã»nûW¿µ”
 {

692 
IÁReã»nûW¿µ”
(cÚ¡ & 
a_v®ue
è: 
v®ue
(&a_value) {}

693 cÚ¡ * 
v®ue
;

696 
boŞ
 
	gİ”©Ü
==(cÚ¡ 
IÁReã»nûW¿µ”
& 
a
, cÚ¡ 
	gIÁReã»nûW¿µ”
& 
	gb
) {

697  
	ga
.
	gv®ue
 =ğ
b
.
v®ue
;

700 
TEST
(
M©ch”Ca¡Te¡
, 
V®ueIsNÙCİ›d
) {

701 
	gn
 = 42;

702 
	gM©ch”
<
	gIÁReã»nûW¿µ”
> 
	gm
 = 
M©ch”Ca¡
<
IÁReã»nûW¿µ”
>(
n
);

704 
EXPECT_TRUE
(
m
.
M©ches
(
n
));

707 şas 
	cBa£
 {

708 
	gpublic
:

709 
vœtu®
 ~
Ba£
() {}

710 
Ba£
() {}

711 
´iv©e
:

712 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
Ba£
);

715 şas 
	cD”ived
 : 
public
 
Ba£
 {

716 
public
:

717 
D”ived
(è: 
Ba£
() {}

718 
i
;

721 şas 
	cOth”D”ived
 : 
public
 
Ba£
 {};

724 
TEST
(
SaãM©ch”Ca¡Te¡
, 
FromPŞymÜphicM©ch”
) {

725 
	gM©ch”
<> 
	gm2
 = 
SaãM©ch”Ca¡
<>(
Eq
(32));

726 
EXPECT_TRUE
(
m2
.
M©ches
(' '));

727 
EXPECT_FALSE
(
m2
.
M©ches
('\n'));

733 
TEST
(
SaãM©ch”Ca¡Te¡
, 
FromLos¦es¦yCÚv”tibËAr™hm‘icTy³
) {

734 
	gM©ch”
<> 
	gm1
 = 
DoubËEq
(1.0);

735 
	gM©ch”
<> 
	gm2
 = 
SaãM©ch”Ca¡
<>(
m1
);

736 
EXPECT_TRUE
(
m2
.
M©ches
(1.0f));

737 
EXPECT_FALSE
(
m2
.
M©ches
(2.0f));

739 
	gM©ch”
<> 
	gm3
 = 
SaãM©ch”Ca¡
<>(
Ty³dEq
<>('a'));

740 
EXPECT_TRUE
(
m3
.
M©ches
('a'));

741 
EXPECT_FALSE
(
m3
.
M©ches
('b'));

746 
TEST
(
SaãM©ch”Ca¡Te¡
, 
FromBa£CÏss
) {

747 
D”ived
 
	gd
, 
	gd2
;

748 
	gM©ch”
<
	gBa£
*> 
	gm1
 = 
Eq
(&
d
);

749 
	gM©ch”
<
	gD”ived
*> 
	gm2
 = 
SaãM©ch”Ca¡
<
D”ived
*>(
m1
);

750 
EXPECT_TRUE
(
m2
.
M©ches
(&
d
));

751 
EXPECT_FALSE
(
m2
.
M©ches
(&
d2
));

753 
	gM©ch”
<
	gBa£
&> 
	gm3
 = 
Ref
(
d
);

754 
	gM©ch”
<
	gD”ived
&> 
	gm4
 = 
SaãM©ch”Ca¡
<
D”ived
&>(
m3
);

755 
EXPECT_TRUE
(
m4
.
M©ches
(
d
));

756 
EXPECT_FALSE
(
m4
.
M©ches
(
d2
));

760 
TEST
(
SaãM©ch”Ca¡Te¡
, 
FromCÚ¡Reã»nûToReã»nû
) {

761 
	gn
 = 0;

762 
	gM©ch”
<cÚ¡ &> 
	gm1
 = 
Ref
(
n
);

763 
	gM©ch”
<&> 
	gm2
 = 
SaãM©ch”Ca¡
<&>(
m1
);

764 
	gn1
 = 0;

765 
EXPECT_TRUE
(
m2
.
M©ches
(
n
));

766 
EXPECT_FALSE
(
m2
.
M©ches
(
n1
));

770 
TEST
(
SaãM©ch”Ca¡Te¡
, 
FromNÚReã»nûToCÚ¡Reã»nû
) {

771 
	gM©ch”
<
	g¡d
::
unique_±r
<>> 
m1
 = 
IsNuÎ
();

772 
	gM©ch”
<cÚ¡ 
	g¡d
::
unique_±r
<>&> 
m2
 =

773 
SaãM©ch”Ca¡
<cÚ¡ 
¡d
::
unique_±r
<>&>(
m1
);

774 
EXPECT_TRUE
(
m2
.
M©ches
(
¡d
::
unique_±r
<>()));

775 
EXPECT_FALSE
(
m2
.
M©ches
(
¡d
::
unique_±r
<>(
Ãw
 )));

779 
TEST
(
SaãM©ch”Ca¡Te¡
, 
FromNÚReã»nûToReã»nû
) {

780 
	gM©ch”
<> 
	gm1
 = 
Eq
(0);

781 
	gM©ch”
<&> 
	gm2
 = 
SaãM©ch”Ca¡
<&>(
m1
);

782 
	gn
 = 0;

783 
EXPECT_TRUE
(
m2
.
M©ches
(
n
));

784 
	gn
 = 1;

785 
EXPECT_FALSE
(
m2
.
M©ches
(
n
));

789 
TEST
(
SaãM©ch”Ca¡Te¡
, 
FromSameTy³
) {

790 
	gM©ch”
<> 
	gm1
 = 
Eq
(0);

791 
	gM©ch”
<> 
	gm2
 = 
SaãM©ch”Ca¡
<>(
m1
);

792 
EXPECT_TRUE
(
m2
.
M©ches
(0));

793 
EXPECT_FALSE
(
m2
.
M©ches
(1));

796 #ià!
defšed
 
_MSC_VER


798 
Çme¥aû
 
	gcÚv”tibË_äom_ªy
 {

799 
TEST
(
SaãM©ch”Ca¡Te¡
, 
CÚv”siÚCÚ¡ruùÜIsU£d
) {

800 
	gM©ch”
<
	gCÚv”tibËFromAny
> 
	gm
 = 
SaãM©ch”Ca¡
<
CÚv”tibËFromAny
>(1);

801 
EXPECT_TRUE
(
m
.
M©ches
(
CÚv”tibËFromAny
(1)));

802 
EXPECT_FALSE
(
m
.
M©ches
(
CÚv”tibËFromAny
(2)));

805 
TEST
(
SaãM©ch”Ca¡Te¡
, 
FromCÚv”tibËFromAny
) {

806 
	gM©ch”
<
	gCÚv”tibËFromAny
> 
	gm
 =

807 
SaãM©ch”Ca¡
<
CÚv”tibËFromAny
>(
Eq
(ConvertibleFromAny(1)));

808 
EXPECT_TRUE
(
m
.
M©ches
(
CÚv”tibËFromAny
(1)));

809 
EXPECT_FALSE
(
m
.
M©ches
(
CÚv”tibËFromAny
(2)));

815 
TEST
(
SaãM©ch”Ca¡Te¡
, 
V®ueIsNÙCİ›d
) {

816 
	gn
 = 42;

817 
	gM©ch”
<
	gIÁReã»nûW¿µ”
> 
	gm
 = 
SaãM©ch”Ca¡
<
IÁReã»nûW¿µ”
>(
n
);

819 
EXPECT_TRUE
(
m
.
M©ches
(
n
));

822 
TEST
(
Ex³ùTh©
, 
TakesL™”®s
) {

823 
EXPECT_THAT
(1, 1);

824 
EXPECT_THAT
(1.0, 1.0);

825 
EXPECT_THAT
(
¡d
::
¡ršg
(), "");

828 
TEST
(
Ex³ùTh©
, 
TakesFunùiÚs
) {

829 
	sH–³r
 {

830 
Func
() {}

832 (*
	gfunc
)(èğ
H–³r
::
Func
;

833 
EXPECT_THAT
(
func
, 
H–³r
::
Func
);

834 
EXPECT_THAT
(
func
, &
H–³r
::
Func
);

838 
TEST
(
ATe¡
, 
M©chesAnyV®ue
) {

840 
	gM©ch”
<> 
	gm1
 = 
A
<>();

841 
EXPECT_TRUE
(
m1
.
M©ches
(91.43));

842 
EXPECT_TRUE
(
m1
.
M©ches
(-15.32));

845 
	ga
 = 2;

846 
	gb
 = -6;

847 
	gM©ch”
<&> 
	gm2
 = 
A
<&>();

848 
EXPECT_TRUE
(
m2
.
M©ches
(
a
));

849 
EXPECT_TRUE
(
m2
.
M©ches
(
b
));

852 
TEST
(
ATe¡
, 
WÜksFÜD”ivedCÏss
) {

853 
Ba£
 
	gba£
;

854 
D”ived
 
	gd”ived
;

855 
EXPECT_THAT
(&
ba£
, 
A
<
Ba£
*>());

857 
EXPECT_THAT
(&
d”ived
, 
A
<
Ba£
*>());

858 
EXPECT_THAT
(&
d”ived
, 
A
<
D”ived
*>());

862 
TEST
(
ATe¡
, 
CªDesüibeS–f
) {

863 
EXPECT_EQ
("i ªythšg", 
Desüibe
(
A
<
boŞ
>()));

867 
TEST
(
AnTe¡
, 
M©chesAnyV®ue
) {

869 
	gM©ch”
<> 
	gm1
 = 
An
<>();

870 
EXPECT_TRUE
(
m1
.
M©ches
(9143));

871 
EXPECT_TRUE
(
m1
.
M©ches
(-1532));

874 
	ga
 = 2;

875 
	gb
 = -6;

876 
	gM©ch”
<&> 
	gm2
 = 
An
<&>();

877 
EXPECT_TRUE
(
m2
.
M©ches
(
a
));

878 
EXPECT_TRUE
(
m2
.
M©ches
(
b
));

882 
TEST
(
AnTe¡
, 
CªDesüibeS–f
) {

883 
EXPECT_EQ
("i ªythšg", 
Desüibe
(
An
<>()));

888 
TEST
(
Und”scÜeTe¡
, 
M©chesAnyV®ue
) {

890 
	gM©ch”
<> 
	gm1
 = 
_
;

891 
EXPECT_TRUE
(
m1
.
M©ches
(123));

892 
EXPECT_TRUE
(
m1
.
M©ches
(-242));

895 
boŞ
 
	ga
 = 
çl£
;

896 cÚ¡ 
boŞ
 
	gb
 = 
Œue
;

897 
	gM©ch”
<cÚ¡ 
	gboŞ
&> 
	gm2
 = 
_
;

898 
EXPECT_TRUE
(
m2
.
M©ches
(
a
));

899 
EXPECT_TRUE
(
m2
.
M©ches
(
b
));

903 
TEST
(
Und”scÜeTe¡
, 
CªDesüibeS–f
) {

904 
	gM©ch”
<> 
	gm
 = 
_
;

905 
EXPECT_EQ
("i ªythšg", 
Desüibe
(
m
));

909 
TEST
(
EqTe¡
, 
M©chesEqu®V®ue
) {

911 cÚ¡ 
	ga1
[] = "hi";

912 cÚ¡ 
	ga2
[] = "hi";

914 
	gM©ch”
<cÚ¡ *> 
	gm1
 = 
Eq
(
a1
);

915 
EXPECT_TRUE
(
m1
.
M©ches
(
a1
));

916 
EXPECT_FALSE
(
m1
.
M©ches
(
a2
));

921 şas 
	cUÅršbË
 {

922 
	gpublic
:

923 
UÅršbË
(è: 
c_
('a') {}

925 
boŞ
 
İ”©Ü
==(cÚ¡ 
UÅršbË
& ) cÚ¡ {  
Œue
; }

927 
dummy_c
(è{  
	gc_
; }

928 
	g´iv©e
:

929 
c_
;

932 
TEST
(
EqTe¡
, 
CªDesüibeS–f
) {

933 
	gM©ch”
<
	gUÅršbË
> 
	gm
 = 
Eq
(
UÅršbË
());

934 
EXPECT_EQ
("i equ®Ø1-by‹ objeù <61>", 
Desüibe
(
m
));

939 
TEST
(
EqTe¡
, 
IsPŞymÜphic
) {

940 
	gM©ch”
<> 
	gm1
 = 
Eq
(1);

941 
EXPECT_TRUE
(
m1
.
M©ches
(1));

942 
EXPECT_FALSE
(
m1
.
M©ches
(2));

944 
	gM©ch”
<> 
	gm2
 = 
Eq
(1);

945 
EXPECT_TRUE
(
m2
.
M©ches
('\1'));

946 
EXPECT_FALSE
(
m2
.
M©ches
('a'));

950 
TEST
(
Ty³dEqTe¡
, 
ChecksEqu®™yFÜGiv’Ty³
) {

951 
	gM©ch”
<> 
	gm1
 = 
Ty³dEq
<>('a');

952 
EXPECT_TRUE
(
m1
.
M©ches
('a'));

953 
EXPECT_FALSE
(
m1
.
M©ches
('b'));

955 
	gM©ch”
<> 
	gm2
 = 
Ty³dEq
<>(6);

956 
EXPECT_TRUE
(
m2
.
M©ches
(6));

957 
EXPECT_FALSE
(
m2
.
M©ches
(7));

961 
TEST
(
Ty³dEqTe¡
, 
CªDesüibeS–f
) {

962 
EXPECT_EQ
("i equ®Ø2", 
Desüibe
(
Ty³dEq
<>(2)));

970 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

971 
	sTy³
 {

972 
boŞ
 
IsTy³Of
(cÚ¡ 
T
& ) {  
	gŒue
; }

974 
	g‹m¶©e
 <
ty³Çme
 
	gT2
>

975 
IsTy³Of
(
T2
 
v
);

978 
TEST
(
Ty³dEqTe¡
, 
HasS³cif›dTy³
) {

980 
	gTy³
<
	gM©ch”
<> >::
IsTy³Of
(
Ty³dEq
<>(5));

981 
	gTy³
<
	gM©ch”
<> >::
IsTy³Of
(
Ty³dEq
<>(5));

985 
TEST
(
GeTe¡
, 
Im¶em’tsG»©”ThªOrEqu®
) {

986 
	gM©ch”
<> 
	gm1
 = 
Ge
(0);

987 
EXPECT_TRUE
(
m1
.
M©ches
(1));

988 
EXPECT_TRUE
(
m1
.
M©ches
(0));

989 
EXPECT_FALSE
(
m1
.
M©ches
(-1));

993 
TEST
(
GeTe¡
, 
CªDesüibeS–f
) {

994 
	gM©ch”
<> 
	gm
 = 
Ge
(5);

995 
EXPECT_EQ
("i >ğ5", 
Desüibe
(
m
));

999 
TEST
(
GtTe¡
, 
Im¶em’tsG»©”Thª
) {

1000 
	gM©ch”
<> 
	gm1
 = 
Gt
(0);

1001 
EXPECT_TRUE
(
m1
.
M©ches
(1.0));

1002 
EXPECT_FALSE
(
m1
.
M©ches
(0.0));

1003 
EXPECT_FALSE
(
m1
.
M©ches
(-1.0));

1007 
TEST
(
GtTe¡
, 
CªDesüibeS–f
) {

1008 
	gM©ch”
<> 
	gm
 = 
Gt
(5);

1009 
EXPECT_EQ
("i > 5", 
Desüibe
(
m
));

1013 
TEST
(
LeTe¡
, 
Im¶em’tsLessThªOrEqu®
) {

1014 
	gM©ch”
<> 
	gm1
 = 
Le
('b');

1015 
EXPECT_TRUE
(
m1
.
M©ches
('a'));

1016 
EXPECT_TRUE
(
m1
.
M©ches
('b'));

1017 
EXPECT_FALSE
(
m1
.
M©ches
('c'));

1021 
TEST
(
LeTe¡
, 
CªDesüibeS–f
) {

1022 
	gM©ch”
<> 
	gm
 = 
Le
(5);

1023 
EXPECT_EQ
("i <ğ5", 
Desüibe
(
m
));

1027 
TEST
(
LtTe¡
, 
Im¶em’tsLessThª
) {

1028 
	gM©ch”
<cÚ¡ 
	g¡d
::
¡ršg
&> 
m1
 = 
Lt
("Hello");

1029 
EXPECT_TRUE
(
m1
.
M©ches
("Abc"));

1030 
EXPECT_FALSE
(
m1
.
M©ches
("Hello"));

1031 
EXPECT_FALSE
(
m1
.
M©ches
("Hello, world!"));

1035 
TEST
(
LtTe¡
, 
CªDesüibeS–f
) {

1036 
	gM©ch”
<> 
	gm
 = 
Lt
(5);

1037 
EXPECT_EQ
("i < 5", 
Desüibe
(
m
));

1041 
TEST
(
NeTe¡
, 
Im¶em’tsNÙEqu®
) {

1042 
	gM©ch”
<> 
	gm1
 = 
Ne
(0);

1043 
EXPECT_TRUE
(
m1
.
M©ches
(1));

1044 
EXPECT_TRUE
(
m1
.
M©ches
(-1));

1045 
EXPECT_FALSE
(
m1
.
M©ches
(0));

1049 
TEST
(
NeTe¡
, 
CªDesüibeS–f
) {

1050 
	gM©ch”
<> 
	gm
 = 
Ne
(5);

1051 
EXPECT_EQ
("i¢'ˆequ®Ø5", 
Desüibe
(
m
));

1054 şas 
	cMoveOÆy
 {

1055 
	gpublic
:

1056 
ex¶ic™
 
MoveOÆy
(
i
è: 
i_
(i) {}

1057 
MoveOÆy
(cÚ¡ MoveOÆy&èğ
d–‘e
;

1058 
MoveOÆy
(MoveOnly&&) = ;

1059 
	gMoveOÆy
& 
	gİ”©Ü
=(cÚ¡ 
MoveOÆy
&èğ
d–‘e
;

1060 
	gMoveOÆy
& 
	gİ”©Ü
=(
MoveOÆy
&&) = ;

1062 
boŞ
 
	gİ”©Ü
==(cÚ¡ 
MoveOÆy
& 
Ùh”
ècÚ¡ {  
i_
 == other.i_; }

1063 
boŞ
 
	gİ”©Ü
!=(cÚ¡ 
MoveOÆy
& 
Ùh”
ècÚ¡ {  
i_
 != other.i_; }

1064 
boŞ
 
	gİ”©Ü
<(cÚ¡ 
	gMoveOÆy
& 
	gÙh”
ècÚ¡ {  
	gi_
 < other.i_; }

1065 
boŞ
 
	gİ”©Ü
<=(cÚ¡ 
MoveOÆy
& 
Ùh”
ècÚ¡ {  
i_
 <= other.i_; }

1066 
boŞ
 
	gİ”©Ü
>(cÚ¡ 
	gMoveOÆy
& 
	gÙh”
ècÚ¡ {  
	gi_
 > other.i_; }

1067 
boŞ
 
	gİ”©Ü
>=(cÚ¡ 
MoveOÆy
& 
Ùh”
ècÚ¡ {  
i_
 >= other.i_; }

1069 
	g´iv©e
:

1070 
i_
;

1073 
	sMoveH–³r
 {

1074 
MOCK_METHOD1
(
C®l
, (
MoveOÆy
));

1078 #ià
defšed
(
_MSC_VER
) && (_MSC_VER < 1910)

1079 
TEST
(
Com·risÚBa£Te¡
, 
DISABLED_WÜksW™hMoveOÆy
) {

1081 
TEST
(
Com·risÚBa£Te¡
, 
WÜksW™hMoveOÆy
) {

1083 
MoveOÆy
 
	gm
{0};

1084 
MoveH–³r
 
	gh–³r
;

1086 
EXPECT_CALL
(
h–³r
, 
C®l
(
Eq
(
ByRef
(
m
))));

1087 
	gh–³r
.
C®l
(
MoveOÆy
(0));

1088 
EXPECT_CALL
(
h–³r
, 
C®l
(
Ne
(
ByRef
(
m
))));

1089 
	gh–³r
.
C®l
(
MoveOÆy
(1));

1090 
EXPECT_CALL
(
h–³r
, 
C®l
(
Le
(
ByRef
(
m
))));

1091 
	gh–³r
.
C®l
(
MoveOÆy
(0));

1092 
EXPECT_CALL
(
h–³r
, 
C®l
(
Lt
(
ByRef
(
m
))));

1093 
	gh–³r
.
C®l
(
MoveOÆy
(-1));

1094 
EXPECT_CALL
(
h–³r
, 
C®l
(
Ge
(
ByRef
(
m
))));

1095 
	gh–³r
.
C®l
(
MoveOÆy
(0));

1096 
EXPECT_CALL
(
h–³r
, 
C®l
(
Gt
(
ByRef
(
m
))));

1097 
	gh–³r
.
C®l
(
MoveOÆy
(1));

1101 
TEST
(
IsNuÎTe¡
, 
M©chesNuÎPoš‹r
) {

1102 
	gM©ch”
<*> 
	gm1
 = 
IsNuÎ
();

1103 * 
	gp1
 = 
nuÎ±r
;

1104 
	gn
 = 0;

1105 
EXPECT_TRUE
(
m1
.
M©ches
(
p1
));

1106 
EXPECT_FALSE
(
m1
.
M©ches
(&
n
));

1108 
	gM©ch”
<cÚ¡ *> 
	gm2
 = 
IsNuÎ
();

1109 cÚ¡ * 
	gp2
 = 
nuÎ±r
;

1110 
EXPECT_TRUE
(
m2
.
M©ches
(
p2
));

1111 
EXPECT_FALSE
(
m2
.
M©ches
("hi"));

1113 
	gM©ch”
<*> 
	gm3
 = 
IsNuÎ
();

1114 * 
	gp3
 = 
nuÎ±r
;

1115 
EXPECT_TRUE
(
m3
.
M©ches
(
p3
));

1116 
EXPECT_FALSE
(
m3
.
M©ches
(
»š‹½»t_ÿ¡
<*>(0xbeef)));

1119 
TEST
(
IsNuÎTe¡
, 
StdFunùiÚ
) {

1120 cÚ¡ 
	gM©ch”
<
	g¡d
::
funùiÚ
<()>> 
m
 = 
IsNuÎ
();

1122 
EXPECT_TRUE
(
m
.
M©ches
(
¡d
::
funùiÚ
<()>()));

1123 
EXPECT_FALSE
(
m
.
M©ches
([]{}));

1127 
TEST
(
IsNuÎTe¡
, 
CªDesüibeS–f
) {

1128 
	gM©ch”
<*> 
	gm
 = 
IsNuÎ
();

1129 
EXPECT_EQ
("i NULL", 
Desüibe
(
m
));

1130 
EXPECT_EQ
("i¢'ˆNULL", 
DesüibeNeg©iÚ
(
m
));

1134 
TEST
(
NÙNuÎTe¡
, 
M©chesNÚNuÎPoš‹r
) {

1135 
	gM©ch”
<*> 
	gm1
 = 
NÙNuÎ
();

1136 * 
	gp1
 = 
nuÎ±r
;

1137 
	gn
 = 0;

1138 
EXPECT_FALSE
(
m1
.
M©ches
(
p1
));

1139 
EXPECT_TRUE
(
m1
.
M©ches
(&
n
));

1141 
	gM©ch”
<cÚ¡ *> 
	gm2
 = 
NÙNuÎ
();

1142 cÚ¡ * 
	gp2
 = 
nuÎ±r
;

1143 
EXPECT_FALSE
(
m2
.
M©ches
(
p2
));

1144 
EXPECT_TRUE
(
m2
.
M©ches
("hi"));

1147 
TEST
(
NÙNuÎTe¡
, 
LškedPŒ
) {

1148 cÚ¡ 
	gM©ch”
<
	g¡d
::
sh¬ed_±r
<>> 
m
 = 
NÙNuÎ
();

1149 cÚ¡ 
	g¡d
::
sh¬ed_±r
<> 
nuÎ_p
;

1150 cÚ¡ 
	g¡d
::
sh¬ed_±r
<> 
nÚ_nuÎ_p
(
Ãw
 );

1152 
EXPECT_FALSE
(
m
.
M©ches
(
nuÎ_p
));

1153 
EXPECT_TRUE
(
m
.
M©ches
(
nÚ_nuÎ_p
));

1156 
TEST
(
NÙNuÎTe¡
, 
Reã»nûToCÚ¡LškedPŒ
) {

1157 cÚ¡ 
	gM©ch”
<cÚ¡ 
	g¡d
::
sh¬ed_±r
<>&> 
m
 = 
NÙNuÎ
();

1158 cÚ¡ 
	g¡d
::
sh¬ed_±r
<> 
nuÎ_p
;

1159 cÚ¡ 
	g¡d
::
sh¬ed_±r
<> 
nÚ_nuÎ_p
(
Ãw
 );

1161 
EXPECT_FALSE
(
m
.
M©ches
(
nuÎ_p
));

1162 
EXPECT_TRUE
(
m
.
M©ches
(
nÚ_nuÎ_p
));

1165 
TEST
(
NÙNuÎTe¡
, 
StdFunùiÚ
) {

1166 cÚ¡ 
	gM©ch”
<
	g¡d
::
funùiÚ
<()>> 
m
 = 
NÙNuÎ
();

1168 
EXPECT_TRUE
(
m
.
M©ches
([]{}));

1169 
EXPECT_FALSE
(
m
.
M©ches
(
¡d
::
funùiÚ
<()>()));

1173 
TEST
(
NÙNuÎTe¡
, 
CªDesüibeS–f
) {

1174 
	gM©ch”
<*> 
	gm
 = 
NÙNuÎ
();

1175 
EXPECT_EQ
("i¢'ˆNULL", 
Desüibe
(
m
));

1180 
TEST
(
RefTe¡
, 
M©chesSameV¬ŸbË
) {

1181 
	ga
 = 0;

1182 
	gb
 = 0;

1183 
	gM©ch”
<&> 
	gm
 = 
Ref
(
a
);

1184 
EXPECT_TRUE
(
m
.
M©ches
(
a
));

1185 
EXPECT_FALSE
(
m
.
M©ches
(
b
));

1189 
TEST
(
RefTe¡
, 
CªDesüibeS–f
) {

1190 
	gn
 = 5;

1191 
	gM©ch”
<&> 
	gm
 = 
Ref
(
n
);

1192 
¡ršg¡»am
 
	gss
;

1193 
	gss
 << "»ã»nû thv¬ŸbË @" << &
	gn
 << " 5";

1194 
EXPECT_EQ
(
ss
.
¡r
(), 
Desüibe
(
m
));

1199 
TEST
(
RefTe¡
, 
CªBeU£dAsM©ch”FÜCÚ¡Reã»nû
) {

1200 
	ga
 = 0;

1201 
	gb
 = 0;

1202 
	gM©ch”
<cÚ¡ &> 
	gm
 = 
Ref
(
a
);

1203 
EXPECT_TRUE
(
m
.
M©ches
(
a
));

1204 
EXPECT_FALSE
(
m
.
M©ches
(
b
));

1211 
TEST
(
RefTe¡
, 
IsCov¬ŸÁ
) {

1212 
Ba£
 
	gba£
, 
	gba£2
;

1213 
D”ived
 
	gd”ived
;

1214 
	gM©ch”
<cÚ¡ 
	gBa£
&> 
	gm1
 = 
Ref
(
ba£
);

1215 
EXPECT_TRUE
(
m1
.
M©ches
(
ba£
));

1216 
EXPECT_FALSE
(
m1
.
M©ches
(
ba£2
));

1217 
EXPECT_FALSE
(
m1
.
M©ches
(
d”ived
));

1219 
	gm1
 = 
Ref
(
d”ived
);

1220 
EXPECT_TRUE
(
m1
.
M©ches
(
d”ived
));

1221 
EXPECT_FALSE
(
m1
.
M©ches
(
ba£
));

1222 
EXPECT_FALSE
(
m1
.
M©ches
(
ba£2
));

1225 
TEST
(
RefTe¡
, 
Ex¶ašsResuÉ
) {

1226 
	gn
 = 0;

1227 
EXPECT_THAT
(
Ex¶aš
(
M©ch”
<cÚ¡ &>(
Ref
(
n
)),‚),

1228 
S¹sW™h
("which is†ocated @"));

1230 
	gm
 = 0;

1231 
EXPECT_THAT
(
Ex¶aš
(
M©ch”
<cÚ¡ &>(
Ref
(
n
)), 
m
),

1232 
S¹sW™h
("which is†ocated @"));

1237 
	g‹m¶©e
 <
ty³Çme
 
	gT
 = 
¡d
::
¡ršg
>

1238 
¡d
::
¡ršg
 
FromSŒšgLike
(
š‹º®
::
SŒšgLike
<
T
> 
¡r
) {

1239  
¡d
::
¡ršg
(
¡r
);

1242 
TEST
(
SŒšgLike
, 
Te¡CÚv”siÚs
) {

1243 
EXPECT_EQ
("foo", 
FromSŒšgLike
("foo"));

1244 
EXPECT_EQ
("foo", 
FromSŒšgLike
(
¡d
::
¡ršg
("foo")));

1245 #ià
GTEST_INTERNAL_HAS_STRING_VIEW


1246 
EXPECT_EQ
("foo", 
FromSŒšgLike
(
š‹º®
::
SŒšgV›w
("foo")));

1250 
EXPECT_EQ
("", 
FromSŒšgLike
({}));

1251 
EXPECT_EQ
("foo", 
FromSŒšgLike
({'f', 'o', 'o'}));

1252 cÚ¡ 
	gbuf
[] = "foo";

1253 
EXPECT_EQ
("foo", 
FromSŒšgLike
({
buf
, buf + 3}));

1256 
TEST
(
SŒEqTe¡
, 
M©chesEqu®SŒšg
) {

1257 
	gM©ch”
<cÚ¡ *> 
	gm
 = 
SŒEq
(
¡d
::
¡ršg
("Hello"));

1258 
EXPECT_TRUE
(
m
.
M©ches
("Hello"));

1259 
EXPECT_FALSE
(
m
.
M©ches
("hello"));

1260 
EXPECT_FALSE
(
m
.
M©ches
(
nuÎ±r
));

1262 
	gM©ch”
<cÚ¡ 
	g¡d
::
¡ršg
&> 
m2
 = 
SŒEq
("Hello");

1263 
EXPECT_TRUE
(
m2
.
M©ches
("Hello"));

1264 
EXPECT_FALSE
(
m2
.
M©ches
("Hi"));

1266 #ià
GTEST_INTERNAL_HAS_STRING_VIEW


1267 
	gM©ch”
<cÚ¡ 
	gš‹º®
::
SŒšgV›w
&> 
m3
 =

1268 
SŒEq
(
š‹º®
::
SŒšgV›w
("Hello"));

1269 
EXPECT_TRUE
(
m3
.
M©ches
(
š‹º®
::
SŒšgV›w
("Hello")));

1270 
EXPECT_FALSE
(
m3
.
M©ches
(
š‹º®
::
SŒšgV›w
("hello")));

1271 
EXPECT_FALSE
(
m3
.
M©ches
(
š‹º®
::
SŒšgV›w
()));

1273 
	gM©ch”
<cÚ¡ 
	gš‹º®
::
SŒšgV›w
&> 
m_em±y
 = 
SŒEq
("");

1274 
EXPECT_TRUE
(
m_em±y
.
M©ches
(
š‹º®
::
SŒšgV›w
("")));

1275 
EXPECT_TRUE
(
m_em±y
.
M©ches
(
š‹º®
::
SŒšgV›w
()));

1276 
EXPECT_FALSE
(
m_em±y
.
M©ches
(
š‹º®
::
SŒšgV›w
("hello")));

1280 
TEST
(
SŒEqTe¡
, 
CªDesüibeS–f
) {

1281 
	gM©ch”
<
	g¡d
::
¡ršg
> 
m
 = 
SŒEq
("Hi-\'\"?\\\a\b\f\n\r\t\v\xD3");

1282 
EXPECT_EQ
("isƒqualo \"Hi-\'\\\"?\\\\\\a\\b\\f\\n\\r\\t\\v\\xD3\"",

1283 
Desüibe
(
m
));

1285 
	g¡d
::
¡ršg
 
¡r
("01204500800");

1286 
	g¡r
[3] = '\0';

1287 
	gM©ch”
<
	g¡d
::
¡ršg
> 
m2
 = 
SŒEq
(
¡r
);

1288 
EXPECT_EQ
("i equ®Ø\"012\\04500800\"", 
Desüibe
(
m2
));

1289 
	g¡r
[0] = 
¡r
[6] = str[7] = str[9] = str[10] = '\0';

1290 
	gM©ch”
<
	g¡d
::
¡ršg
> 
m3
 = 
SŒEq
(
¡r
);

1291 
EXPECT_EQ
("i equ®Ø\"\\012\\045\\0\\08\\0\\0\"", 
Desüibe
(
m3
));

1294 
TEST
(
SŒNeTe¡
, 
M©chesUÃqu®SŒšg
) {

1295 
	gM©ch”
<cÚ¡ *> 
	gm
 = 
SŒNe
("Hello");

1296 
EXPECT_TRUE
(
m
.
M©ches
(""));

1297 
EXPECT_TRUE
(
m
.
M©ches
(
nuÎ±r
));

1298 
EXPECT_FALSE
(
m
.
M©ches
("Hello"));

1300 
	gM©ch”
<
	g¡d
::
¡ršg
> 
m2
 = 
SŒNe
(
¡d
::string("Hello"));

1301 
EXPECT_TRUE
(
m2
.
M©ches
("hello"));

1302 
EXPECT_FALSE
(
m2
.
M©ches
("Hello"));

1304 #ià
GTEST_INTERNAL_HAS_STRING_VIEW


1305 
	gM©ch”
<cÚ¡ 
	gš‹º®
::
SŒšgV›w
> 
m3
 = 
SŒNe
(
š‹º®
::StringView("Hello"));

1306 
EXPECT_TRUE
(
m3
.
M©ches
(
š‹º®
::
SŒšgV›w
("")));

1307 
EXPECT_TRUE
(
m3
.
M©ches
(
š‹º®
::
SŒšgV›w
()));

1308 
EXPECT_FALSE
(
m3
.
M©ches
(
š‹º®
::
SŒšgV›w
("Hello")));

1312 
TEST
(
SŒNeTe¡
, 
CªDesüibeS–f
) {

1313 
	gM©ch”
<cÚ¡ *> 
	gm
 = 
SŒNe
("Hi");

1314 
EXPECT_EQ
("i¢'ˆequ®Ø\"Hi\"", 
Desüibe
(
m
));

1317 
TEST
(
SŒCa£EqTe¡
, 
M©chesEqu®SŒšgIgnÜšgCa£
) {

1318 
	gM©ch”
<cÚ¡ *> 
	gm
 = 
SŒCa£Eq
(
¡d
::
¡ršg
("Hello"));

1319 
EXPECT_TRUE
(
m
.
M©ches
("Hello"));

1320 
EXPECT_TRUE
(
m
.
M©ches
("hello"));

1321 
EXPECT_FALSE
(
m
.
M©ches
("Hi"));

1322 
EXPECT_FALSE
(
m
.
M©ches
(
nuÎ±r
));

1324 
	gM©ch”
<cÚ¡ 
	g¡d
::
¡ršg
&> 
m2
 = 
SŒCa£Eq
("Hello");

1325 
EXPECT_TRUE
(
m2
.
M©ches
("hello"));

1326 
EXPECT_FALSE
(
m2
.
M©ches
("Hi"));

1328 #ià
GTEST_INTERNAL_HAS_STRING_VIEW


1329 
	gM©ch”
<cÚ¡ 
	gš‹º®
::
SŒšgV›w
&> 
m3
 =

1330 
SŒCa£Eq
(
š‹º®
::
SŒšgV›w
("Hello"));

1331 
EXPECT_TRUE
(
m3
.
M©ches
(
š‹º®
::
SŒšgV›w
("Hello")));

1332 
EXPECT_TRUE
(
m3
.
M©ches
(
š‹º®
::
SŒšgV›w
("hello")));

1333 
EXPECT_FALSE
(
m3
.
M©ches
(
š‹º®
::
SŒšgV›w
("Hi")));

1334 
EXPECT_FALSE
(
m3
.
M©ches
(
š‹º®
::
SŒšgV›w
()));

1338 
TEST
(
SŒCa£EqTe¡
, 
M©chesEqu®SŒšgW™h0IgnÜšgCa£
) {

1339 
	g¡d
::
¡ršg
 
¡r1
("oabocdooeoo");

1340 
	g¡d
::
¡ršg
 
¡r2
("OABOCDOOEOO");

1341 
	gM©ch”
<cÚ¡ 
	g¡d
::
¡ršg
&> 
m0
 = 
SŒCa£Eq
(
¡r1
);

1342 
EXPECT_FALSE
(
m0
.
M©ches
(
¡r2
 + 
¡d
::
¡ršg
(1, '\0')));

1344 
	g¡r1
[3] = 
¡r2
[3] = '\0';

1345 
	gM©ch”
<cÚ¡ 
	g¡d
::
¡ršg
&> 
m1
 = 
SŒCa£Eq
(
¡r1
);

1346 
EXPECT_TRUE
(
m1
.
M©ches
(
¡r2
));

1348 
	g¡r1
[0] = 
¡r1
[6] = str1[7] = str1[10] = '\0';

1349 
	g¡r2
[0] = 
¡r2
[6] = str2[7] = str2[10] = '\0';

1350 
	gM©ch”
<cÚ¡ 
	g¡d
::
¡ršg
&> 
m2
 = 
SŒCa£Eq
(
¡r1
);

1351 
	g¡r1
[9] = 
¡r2
[9] = '\0';

1352 
EXPECT_FALSE
(
m2
.
M©ches
(
¡r2
));

1354 
	gM©ch”
<cÚ¡ 
	g¡d
::
¡ršg
&> 
m3
 = 
SŒCa£Eq
(
¡r1
);

1355 
EXPECT_TRUE
(
m3
.
M©ches
(
¡r2
));

1357 
EXPECT_FALSE
(
m3
.
M©ches
(
¡r2
 + "x"));

1358 
	g¡r2
.
­³nd
(1, '\0');

1359 
EXPECT_FALSE
(
m3
.
M©ches
(
¡r2
));

1360 
EXPECT_FALSE
(
m3
.
M©ches
(
¡d
::
¡ršg
(
¡r2
, 0, 9)));

1363 
TEST
(
SŒCa£EqTe¡
, 
CªDesüibeS–f
) {

1364 
	gM©ch”
<
	g¡d
::
¡ršg
> 
m
 = 
SŒCa£Eq
("Hi");

1365 
EXPECT_EQ
("i equ®Ø(ignÜšg ca£è\"Hi\"", 
Desüibe
(
m
));

1368 
TEST
(
SŒCa£NeTe¡
, 
M©chesUÃqu®SŒšgIgnÜšgCa£
) {

1369 
	gM©ch”
<cÚ¡ *> 
	gm
 = 
SŒCa£Ne
("Hello");

1370 
EXPECT_TRUE
(
m
.
M©ches
("Hi"));

1371 
EXPECT_TRUE
(
m
.
M©ches
(
nuÎ±r
));

1372 
EXPECT_FALSE
(
m
.
M©ches
("Hello"));

1373 
EXPECT_FALSE
(
m
.
M©ches
("hello"));

1375 
	gM©ch”
<
	g¡d
::
¡ršg
> 
m2
 = 
SŒCa£Ne
(
¡d
::string("Hello"));

1376 
EXPECT_TRUE
(
m2
.
M©ches
(""));

1377 
EXPECT_FALSE
(
m2
.
M©ches
("Hello"));

1379 #ià
GTEST_INTERNAL_HAS_STRING_VIEW


1380 
	gM©ch”
<cÚ¡ 
	gš‹º®
::
SŒšgV›w
> 
m3
 =

1381 
SŒCa£Ne
(
š‹º®
::
SŒšgV›w
("Hello"));

1382 
EXPECT_TRUE
(
m3
.
M©ches
(
š‹º®
::
SŒšgV›w
("Hi")));

1383 
EXPECT_TRUE
(
m3
.
M©ches
(
š‹º®
::
SŒšgV›w
()));

1384 
EXPECT_FALSE
(
m3
.
M©ches
(
š‹º®
::
SŒšgV›w
("Hello")));

1385 
EXPECT_FALSE
(
m3
.
M©ches
(
š‹º®
::
SŒšgV›w
("hello")));

1389 
TEST
(
SŒCa£NeTe¡
, 
CªDesüibeS–f
) {

1390 
	gM©ch”
<cÚ¡ *> 
	gm
 = 
SŒCa£Ne
("Hi");

1391 
EXPECT_EQ
("i¢'ˆequ®Ø(ignÜšg ca£è\"Hi\"", 
Desüibe
(
m
));

1395 
TEST
(
HasSub¡rTe¡
, 
WÜksFÜSŒšgCÏs£s
) {

1396 cÚ¡ 
	gM©ch”
<
	g¡d
::
¡ršg
> 
m1
 = 
HasSub¡r
("foo");

1397 
EXPECT_TRUE
(
m1
.
M©ches
(
¡d
::
¡ršg
("I†ove food.")));

1398 
EXPECT_FALSE
(
m1
.
M©ches
(
¡d
::
¡ršg
("tofo")));

1400 cÚ¡ 
	gM©ch”
<cÚ¡ 
	g¡d
::
¡ršg
&> 
m2
 = 
HasSub¡r
("foo");

1401 
EXPECT_TRUE
(
m2
.
M©ches
(
¡d
::
¡ršg
("I†ove food.")));

1402 
EXPECT_FALSE
(
m2
.
M©ches
(
¡d
::
¡ršg
("tofo")));

1404 cÚ¡ 
	gM©ch”
<
	g¡d
::
¡ršg
> 
m_em±y
 = 
HasSub¡r
("");

1405 
EXPECT_TRUE
(
m_em±y
.
M©ches
(
¡d
::
¡ršg
()));

1406 
EXPECT_TRUE
(
m_em±y
.
M©ches
(
¡d
::
¡ršg
("notƒmpty")));

1410 
TEST
(
HasSub¡rTe¡
, 
WÜksFÜCSŒšgs
) {

1411 cÚ¡ 
	gM©ch”
<*> 
	gm1
 = 
HasSub¡r
("foo");

1412 
EXPECT_TRUE
(
m1
.
M©ches
(
cÚ¡_ÿ¡
<*>("I†ove food.")));

1413 
EXPECT_FALSE
(
m1
.
M©ches
(
cÚ¡_ÿ¡
<*>("tofo")));

1414 
EXPECT_FALSE
(
m1
.
M©ches
(
nuÎ±r
));

1416 cÚ¡ 
	gM©ch”
<cÚ¡ *> 
	gm2
 = 
HasSub¡r
("foo");

1417 
EXPECT_TRUE
(
m2
.
M©ches
("I†ove food."));

1418 
EXPECT_FALSE
(
m2
.
M©ches
("tofo"));

1419 
EXPECT_FALSE
(
m2
.
M©ches
(
nuÎ±r
));

1421 cÚ¡ 
	gM©ch”
<cÚ¡ *> 
	gm_em±y
 = 
HasSub¡r
("");

1422 
EXPECT_TRUE
(
m_em±y
.
M©ches
("notƒmpty"));

1423 
EXPECT_TRUE
(
m_em±y
.
M©ches
(""));

1424 
EXPECT_FALSE
(
m_em±y
.
M©ches
(
nuÎ±r
));

1427 #ià
GTEST_INTERNAL_HAS_STRING_VIEW


1429 
TEST
(
HasSub¡rTe¡
, 
WÜksFÜSŒšgV›wCÏs£s
) {

1430 cÚ¡ 
	gM©ch”
<
	gš‹º®
::
SŒšgV›w
> 
m1
 =

1431 
HasSub¡r
(
š‹º®
::
SŒšgV›w
("foo"));

1432 
EXPECT_TRUE
(
m1
.
M©ches
(
š‹º®
::
SŒšgV›w
("I†ove food.")));

1433 
EXPECT_FALSE
(
m1
.
M©ches
(
š‹º®
::
SŒšgV›w
("tofo")));

1434 
EXPECT_FALSE
(
m1
.
M©ches
(
š‹º®
::
SŒšgV›w
()));

1436 cÚ¡ 
	gM©ch”
<cÚ¡ 
	gš‹º®
::
SŒšgV›w
&> 
m2
 = 
HasSub¡r
("foo");

1437 
EXPECT_TRUE
(
m2
.
M©ches
(
š‹º®
::
SŒšgV›w
("I†ove food.")));

1438 
EXPECT_FALSE
(
m2
.
M©ches
(
š‹º®
::
SŒšgV›w
("tofo")));

1439 
EXPECT_FALSE
(
m2
.
M©ches
(
š‹º®
::
SŒšgV›w
()));

1441 cÚ¡ 
	gM©ch”
<cÚ¡ 
	gš‹º®
::
SŒšgV›w
&> 
m3
 = 
HasSub¡r
("");

1442 
EXPECT_TRUE
(
m3
.
M©ches
(
š‹º®
::
SŒšgV›w
("foo")));

1443 
EXPECT_TRUE
(
m3
.
M©ches
(
š‹º®
::
SŒšgV›w
("")));

1444 
EXPECT_TRUE
(
m3
.
M©ches
(
š‹º®
::
SŒšgV›w
()));

1449 
TEST
(
HasSub¡rTe¡
, 
CªDesüibeS–f
) {

1450 
	gM©ch”
<
	g¡d
::
¡ršg
> 
m
 = 
HasSub¡r
("foo\n\"");

1451 
EXPECT_EQ
("ha sub¡ršg \"foo\\n\\\"\"", 
Desüibe
(
m
));

1454 
TEST
(
KeyTe¡
, 
CªDesüibeS–f
) {

1455 
	gM©ch”
<cÚ¡ 
	g·œ
<
	g¡d
::
¡ršg
, >&> 
	gm
 = 
Key
("foo");

1456 
EXPECT_EQ
("ha ¨keyh© i equ®Ø\"foo\"", 
Desüibe
(
m
));

1457 
EXPECT_EQ
("dÛ¢'ˆhav¨keyh© i equ®Ø\"foo\"", 
DesüibeNeg©iÚ
(
m
));

1460 
TEST
(
KeyTe¡
, 
Ex¶ašsResuÉ
) {

1461 
	gM©ch”
<
	g·œ
<, 
	gboŞ
> > 
	gm
 = 
Key
(
G»©”Thª
(10));

1462 
EXPECT_EQ
("whose first field is‡ value which is 5†esshan 10",

1463 
Ex¶aš
(
m
, 
make_·œ
(5, 
Œue
)));

1464 
EXPECT_EQ
("whose first field is‡ value which is 5 morehan 10",

1465 
Ex¶aš
(
m
, 
make_·œ
(15, 
Œue
)));

1468 
TEST
(
KeyTe¡
, 
M©chesCÜ»ùly
) {

1469 
	g·œ
<, 
	g¡d
::
¡ršg
> 
p
(25, "foo");

1470 
EXPECT_THAT
(
p
, 
Key
(25));

1471 
EXPECT_THAT
(
p
, 
NÙ
(
Key
(42)));

1472 
EXPECT_THAT
(
p
, 
Key
(
Ge
(20)));

1473 
EXPECT_THAT
(
p
, 
NÙ
(
Key
(
Lt
(25))));

1476 
TEST
(
KeyTe¡
, 
WÜksW™hMoveOÆy
) {

1477 
	g·œ
<
	g¡d
::
unique_±r
<>, std::unique_±r<>> 
p
;

1478 
EXPECT_THAT
(
p
, 
Key
(
Eq
(
nuÎ±r
)));

1481 
	g‹m¶©e
 <
size_t
 
	gI
>

1482 
	sTag
 {};

1484 
	sPaœW™hG‘
 {

1485 
	gmemb”_1
;

1486 
	g¡d
::
¡ršg
 
memb”_2
;

1487 
usšg
 
	gfœ¡_ty³
 = ;

1488 
usšg
 
	g£cÚd_ty³
 = 
¡d
::
¡ršg
;

1490 cÚ¡ & 
G‘Im¶
(
Tag
<0>ècÚ¡ {  
	gmemb”_1
; }

1491 cÚ¡ 
	g¡d
::
¡ršg
& 
G‘Im¶
(
Tag
<1>ècÚ¡ {  
memb”_2
; }

1493 
	g‹m¶©e
 <
size_t
 
	gI
>

1494 autØ
g‘
(cÚ¡ 
PaœW™hG‘
& 
v®ue
è-> 
deşty³
(v®ue.
G‘Im¶
(
Tag
<
I
>())) {

1495  
	gv®ue
.
G‘Im¶
(
Tag
<
I
>());

1497 
TEST
(
PaœTe¡
, 
M©chesPaœW™hG‘CÜ»ùly
) {

1498 
PaœW™hG‘
 
	gp
{25, "foo"};

1499 
EXPECT_THAT
(
p
, 
Key
(25));

1500 
EXPECT_THAT
(
p
, 
NÙ
(
Key
(42)));

1501 
EXPECT_THAT
(
p
, 
Key
(
Ge
(20)));

1502 
EXPECT_THAT
(
p
, 
NÙ
(
Key
(
Lt
(25))));

1504 
	g¡d
::
veùÜ
<
PaœW™hG‘
> 
v
 = {{11, "Foo"}, {29, "gMockIsBestMock"}};

1505 
EXPECT_THAT
(
v
, 
CÚšs
(
Key
(29)));

1508 
TEST
(
KeyTe¡
, 
SaãlyCa¡sIÂ”M©ch”
) {

1509 
	gM©ch”
<> 
	gis_pos™ive
 = 
Gt
(0);

1510 
	gM©ch”
<> 
	gis_Ãg©ive
 = 
Lt
(0);

1511 
	g·œ
<, 
	gboŞ
> 
p
('a', 
Œue
);

1512 
EXPECT_THAT
(
p
, 
Key
(
is_pos™ive
));

1513 
EXPECT_THAT
(
p
, 
NÙ
(
Key
(
is_Ãg©ive
)));

1516 
TEST
(
KeyTe¡
, 
InsideCÚšsUsšgM­
) {

1517 
	gm­
<, > 
	gcÚš”
;

1518 
	gcÚš”
.
š£¹
(
make_·œ
(1, 'a'));

1519 
	gcÚš”
.
š£¹
(
make_·œ
(2, 'b'));

1520 
	gcÚš”
.
š£¹
(
make_·œ
(4, 'c'));

1521 
EXPECT_THAT
(
cÚš”
, 
CÚšs
(
Key
(1)));

1522 
EXPECT_THAT
(
cÚš”
, 
NÙ
(
CÚšs
(
Key
(3))));

1525 
TEST
(
KeyTe¡
, 
InsideCÚšsUsšgMuÉim­
) {

1526 
	gmuÉim­
<, > 
	gcÚš”
;

1527 
	gcÚš”
.
š£¹
(
make_·œ
(1, 'a'));

1528 
	gcÚš”
.
š£¹
(
make_·œ
(2, 'b'));

1529 
	gcÚš”
.
š£¹
(
make_·œ
(4, 'c'));

1531 
EXPECT_THAT
(
cÚš”
, 
NÙ
(
CÚšs
(
Key
(25))));

1532 
	gcÚš”
.
š£¹
(
make_·œ
(25, 'd'));

1533 
EXPECT_THAT
(
cÚš”
, 
CÚšs
(
Key
(25)));

1534 
	gcÚš”
.
š£¹
(
make_·œ
(25, 'e'));

1535 
EXPECT_THAT
(
cÚš”
, 
CÚšs
(
Key
(25)));

1537 
EXPECT_THAT
(
cÚš”
, 
CÚšs
(
Key
(1)));

1538 
EXPECT_THAT
(
cÚš”
, 
NÙ
(
CÚšs
(
Key
(3))));

1541 
TEST
(
PaœTe¡
, 
Typšg
) {

1543 
	gM©ch”
<cÚ¡ 
	g·œ
<cÚ¡ *, >&> 
	gm1
 = 
Paœ
("foo", 42);

1544 
	gM©ch”
<cÚ¡ 
	g·œ
<cÚ¡ *, > > 
	gm2
 = 
Paœ
("foo", 42);

1545 
	gM©ch”
<
	g·œ
<cÚ¡ *, > > 
	gm3
 = 
Paœ
("foo", 42);

1547 
	gM©ch”
<
	g·œ
<, cÚ¡ 
	g¡d
::
¡ršg
> > 
m4
 = 
Paœ
(25, "42");

1548 
	gM©ch”
<
	g·œ
<cÚ¡ 
	g¡d
::
¡ršg
, > > 
	gm5
 = 
Paœ
("25", 42);

1551 
TEST
(
PaœTe¡
, 
CªDesüibeS–f
) {

1552 
	gM©ch”
<cÚ¡ 
	g·œ
<
	g¡d
::
¡ršg
, >&> 
	gm1
 = 
Paœ
("foo", 42);

1553 
EXPECT_EQ
("has‡ first fieldhat isƒqualo \"foo\""

1555 
Desüibe
(
m1
));

1556 
EXPECT_EQ
("has‡ first fieldhat isn'tƒqualo \"foo\""

1558 
DesüibeNeg©iÚ
(
m1
));

1560 
	gM©ch”
<cÚ¡ 
	g·œ
<, >&> 
	gm2
 = 
NÙ
(
Paœ
(Not(13), 42));

1561 
EXPECT_EQ
("has‡ first fieldhat isn'tƒqualo 13"

1563 
DesüibeNeg©iÚ
(
m2
));

1566 
TEST
(
PaœTe¡
, 
CªEx¶ašM©chResuÉTo
) {

1569 cÚ¡ 
	gM©ch”
<
	g·œ
<, > > 
	gm
 = 
Paœ
(
G»©”Thª
(0), GreaterThan(0));

1570 
EXPECT_EQ
("whose first field does‚ot match, which is 1†esshan 0",

1571 
Ex¶aš
(
m
, 
make_·œ
(-1, -2)));

1575 
EXPECT_EQ
("whose second field does‚ot match, which is 2†esshan 0",

1576 
Ex¶aš
(
m
, 
make_·œ
(1, -2)));

1580 
EXPECT_EQ
("whose first field does‚ot match, which is 1†esshan 0",

1581 
Ex¶aš
(
m
, 
make_·œ
(-1, 2)));

1584 
EXPECT_EQ
("whose both fields match, wherehe first field is‡ value "

1587 
Ex¶aš
(
m
, 
make_·œ
(1, 2)));

1591 cÚ¡ 
	gM©ch”
<
	g·œ
<, > > 
	gex¶aš_fœ¡
 = 
Paœ
(
G»©”Thª
(0), 0);

1592 
EXPECT_EQ
("whose both fields match, wherehe first field is‡ value "

1594 
Ex¶aš
(
ex¶aš_fœ¡
, 
make_·œ
(1, 0)));

1598 cÚ¡ 
	gM©ch”
<
	g·œ
<, > > 
	gex¶aš_£cÚd
 = 
Paœ
(0, 
G»©”Thª
(0));

1599 
EXPECT_EQ
("whose both fields match, wherehe second field is‡ value "

1601 
Ex¶aš
(
ex¶aš_£cÚd
, 
make_·œ
(0, 1)));

1604 
TEST
(
PaœTe¡
, 
M©chesCÜ»ùly
) {

1605 
	g·œ
<, 
	g¡d
::
¡ršg
> 
p
(25, "foo");

1608 
EXPECT_THAT
(
p
, 
Paœ
(25, "foo"));

1609 
EXPECT_THAT
(
p
, 
Paœ
(
Ge
(20), 
HasSub¡r
("o")));

1612 
EXPECT_THAT
(
p
, 
NÙ
(
Paœ
(42, "foo")));

1613 
EXPECT_THAT
(
p
, 
NÙ
(
Paœ
(
Lt
(25), "foo")));

1616 
EXPECT_THAT
(
p
, 
NÙ
(
Paœ
(25, "bar")));

1617 
EXPECT_THAT
(
p
, 
NÙ
(
Paœ
(25, Not("foo"))));

1620 
EXPECT_THAT
(
p
, 
NÙ
(
Paœ
(13, "bar")));

1621 
EXPECT_THAT
(
p
, 
NÙ
(
Paœ
(
Lt
(13), 
HasSub¡r
("a"))));

1624 
TEST
(
PaœTe¡
, 
WÜksW™hMoveOÆy
) {

1625 
	g·œ
<
	g¡d
::
unique_±r
<>, std::unique_±r<>> 
p
;

1626 
	gp
.
	g£cÚd
.
»£t
(
Ãw
 (7));

1627 
EXPECT_THAT
(
p
, 
Paœ
(
Eq
(
nuÎ±r
), 
Ne
(nullptr)));

1630 
TEST
(
PaœTe¡
, 
SaãlyCa¡sIÂ”M©ch”s
) {

1631 
	gM©ch”
<> 
	gis_pos™ive
 = 
Gt
(0);

1632 
	gM©ch”
<> 
	gis_Ãg©ive
 = 
Lt
(0);

1633 
	g·œ
<, 
	gboŞ
> 
p
('a', 
Œue
);

1634 
EXPECT_THAT
(
p
, 
Paœ
(
is_pos™ive
, 
_
));

1635 
EXPECT_THAT
(
p
, 
NÙ
(
Paœ
(
is_Ãg©ive
, 
_
)));

1636 
EXPECT_THAT
(
p
, 
Paœ
(
_
, 
is_pos™ive
));

1637 
EXPECT_THAT
(
p
, 
NÙ
(
Paœ
(
_
, 
is_Ãg©ive
)));

1640 
TEST
(
PaœTe¡
, 
InsideCÚšsUsšgM­
) {

1641 
	gm­
<, > 
	gcÚš”
;

1642 
	gcÚš”
.
š£¹
(
make_·œ
(1, 'a'));

1643 
	gcÚš”
.
š£¹
(
make_·œ
(2, 'b'));

1644 
	gcÚš”
.
š£¹
(
make_·œ
(4, 'c'));

1645 
EXPECT_THAT
(
cÚš”
, 
CÚšs
(
Paœ
(1, 'a')));

1646 
EXPECT_THAT
(
cÚš”
, 
CÚšs
(
Paœ
(1, 
_
)));

1647 
EXPECT_THAT
(
cÚš”
, 
CÚšs
(
Paœ
(
_
, 'a')));

1648 
EXPECT_THAT
(
cÚš”
, 
NÙ
(
CÚšs
(
Paœ
(3, 
_
))));

1651 
TEST
(
F›ldsA»Te¡
, 
M©chesCÜ»ùly
) {

1652 
	g¡d
::
tu¶e
<, std::
¡ršg
, > 
p
(25, "foo", .5);

1655 
EXPECT_THAT
(
p
, 
F›ldsA»
(25, "foo", .5));

1656 
EXPECT_THAT
(
p
, 
F›ldsA»
(
Ge
(20), 
HasSub¡r
("o"), 
DoubËEq
(.5)));

1659 
EXPECT_THAT
(
p
, 
NÙ
(
F›ldsA»
(26, "foo", .5)));

1660 
EXPECT_THAT
(
p
, 
NÙ
(
F›ldsA»
(25, "fo", .5)));

1661 
EXPECT_THAT
(
p
, 
NÙ
(
F›ldsA»
(25, "foo", .6)));

1664 
TEST
(
F›ldsA»Te¡
, 
CªDesüibeS–f
) {

1665 
	gM©ch”
<cÚ¡ 
	g·œ
<
	g¡d
::
¡ršg
, >&> 
	gm1
 = 
F›ldsA»
("foo", 42);

1666 
EXPECT_EQ
(

1669 
Desüibe
(
m1
));

1670 
EXPECT_EQ
(

1673 
DesüibeNeg©iÚ
(
m1
));

1676 
TEST
(
F›ldsA»Te¡
, 
CªEx¶ašM©chResuÉTo
) {

1678 
	gM©ch”
<
	g¡d
::
tu¶e
<, , >> 
	gm
 =

1679 
F›ldsA»
(
G»©”Thª
(0), GreaterThan(0), GreaterThan(0));

1681 
EXPECT_EQ
("whose field #0 does‚ot match, which is 1†esshan 0",

1682 
Ex¶aš
(
m
, 
¡d
::
make_tu¶e
(-1, -2, -3)));

1683 
EXPECT_EQ
("whose field #1 does‚ot match, which is 2†esshan 0",

1684 
Ex¶aš
(
m
, 
¡d
::
make_tu¶e
(1, -2, -3)));

1685 
EXPECT_EQ
("whose field #2 does‚ot match, which is 3†esshan 0",

1686 
Ex¶aš
(
m
, 
¡d
::
make_tu¶e
(1, 2, -3)));

1689 
EXPECT_EQ
(

1694 
Ex¶aš
(
m
, 
¡d
::
make_tu¶e
(1, 2, 3)));

1697 
	gm
 = 
F›ldsA»
(
G»©”Thª
(0), 0, GreaterThan(0));

1698 
EXPECT_EQ
(

1702 
Ex¶aš
(
m
, 
¡d
::
make_tu¶e
(1, 0, 3)));

1705 
	gm
 = 
F›ldsA»
(0, 
G»©”Thª
(0), 0);

1706 
EXPECT_EQ
(

1709 
Ex¶aš
(
m
, 
¡d
::
make_tu¶e
(0, 1, 0)));

1712 #ià
defšed
(
__ıp_¡ruùu»d_bšdšgs
) && __cpp_structured_bindings >= 201606

1713 
TEST
(
F›ldsA»Te¡
, 
SŒuùu»dBšdšgs
) {

1715 
	sMyTy³
 {

1716 
	gi
;

1717 
	g¡d
::
¡ršg
 
¡r
;

1719 
EXPECT_THAT
((
MyTy³
{17, "foo"}), 
F›ldsA»
(
Eq
(17), 
HasSub¡r
("oo")));

1722 
	sMyV¬Ty³1
 {

1723 
	ga
;

1725 
EXPECT_THAT
(
MyV¬Ty³1
{}, 
F›ldsA»
(0));

1726 
	sMyV¬Ty³2
 {

1727 
	ga
, 
	gb
;

1729 
EXPECT_THAT
(
MyV¬Ty³2
{}, 
F›ldsA»
(0, 0));

1730 
	sMyV¬Ty³3
 {

1731 
	ga
, 
	gb
, 
	gc
;

1733 
EXPECT_THAT
(
MyV¬Ty³3
{}, 
F›ldsA»
(0, 0, 0));

1734 
	sMyV¬Ty³4
 {

1735 
	ga
, 
	gb
, 
	gc
, 
	gd
;

1737 
EXPECT_THAT
(
MyV¬Ty³4
{}, 
F›ldsA»
(0, 0, 0, 0));

1738 
	sMyV¬Ty³5
 {

1739 
	ga
, 
	gb
, 
	gc
, 
	gd
, 
	ge
;

1741 
EXPECT_THAT
(
MyV¬Ty³5
{}, 
F›ldsA»
(0, 0, 0, 0, 0));

1742 
	sMyV¬Ty³6
 {

1743 
	ga
, 
	gb
, 
	gc
, 
	gd
, 
	ge
, 
	gf
;

1745 
EXPECT_THAT
(
MyV¬Ty³6
{}, 
F›ldsA»
(0, 0, 0, 0, 0, 0));

1746 
	sMyV¬Ty³7
 {

1747 
	ga
, 
	gb
, 
	gc
, 
	gd
, 
	ge
, 
	gf
, 
	gg
;

1749 
EXPECT_THAT
(
MyV¬Ty³7
{}, 
F›ldsA»
(0, 0, 0, 0, 0, 0, 0));

1750 
	sMyV¬Ty³8
 {

1751 
	ga
, 
	gb
, 
	gc
, 
	gd
, 
	ge
, 
	gf
, 
	gg
, 
	gh
;

1753 
EXPECT_THAT
(
MyV¬Ty³8
{}, 
F›ldsA»
(0, 0, 0, 0, 0, 0, 0, 0));

1754 
	sMyV¬Ty³9
 {

1755 
	ga
, 
	gb
, 
	gc
, 
	gd
, 
	ge
, 
	gf
, 
	gg
, 
	gh
, 
	gi
;

1757 
EXPECT_THAT
(
MyV¬Ty³9
{}, 
F›ldsA»
(0, 0, 0, 0, 0, 0, 0, 0, 0));

1758 
	sMyV¬Ty³10
 {

1759 
	ga
, 
	gb
, 
	gc
, 
	gd
, 
	ge
, 
	gf
, 
	gg
, 
	gh
, 
	gi
, 
	gj
;

1761 
EXPECT_THAT
(
MyV¬Ty³10
{}, 
F›ldsA»
(0, 0, 0, 0, 0, 0, 0, 0, 0, 0));

1762 
	sMyV¬Ty³11
 {

1763 
	ga
, 
	gb
, 
	gc
, 
	gd
, 
	ge
, 
	gf
, 
	gg
, 
	gh
, 
	gi
, 
	gj
, 
	gk
;

1765 
EXPECT_THAT
(
MyV¬Ty³11
{}, 
F›ldsA»
(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0));

1766 
	sMyV¬Ty³12
 {

1767 
	ga
, 
	gb
, 
	gc
, 
	gd
, 
	ge
, 
	gf
, 
	gg
, 
	gh
, 
	gi
, 
	gj
, 
	gk
, 
	gl
;

1769 
EXPECT_THAT
(
MyV¬Ty³12
{}, 
F›ldsA»
(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0));

1770 
	sMyV¬Ty³13
 {

1771 
	ga
, 
	gb
, 
	gc
, 
	gd
, 
	ge
, 
	gf
, 
	gg
, 
	gh
, 
	gi
, 
	gj
, 
	gk
, 
	gl
, 
	gm
;

1773 
EXPECT_THAT
(
MyV¬Ty³13
{}, 
F›ldsA»
(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0));

1774 
	sMyV¬Ty³14
 {

1775 
	ga
, 
	gb
, 
	gc
, 
	gd
, 
	ge
, 
	gf
, 
	gg
, 
	gh
, 
	gi
, 
	gj
, 
	gk
, 
	gl
, 
	gm
, 
	gn
;

1777 
EXPECT_THAT
(
MyV¬Ty³14
{},

1778 
F›ldsA»
(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0));

1779 
	sMyV¬Ty³15
 {

1780 
	ga
, 
	gb
, 
	gc
, 
	gd
, 
	ge
, 
	gf
, 
	gg
, 
	gh
, 
	gi
, 
	gj
, 
	gk
, 
	gl
, 
	gm
, 
	gn
, 
	go
;

1782 
EXPECT_THAT
(
MyV¬Ty³15
{},

1783 
F›ldsA»
(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0));

1784 
	sMyV¬Ty³16
 {

1785 
	ga
, 
	gb
, 
	gc
, 
	gd
, 
	ge
, 
	gf
, 
	gg
, 
	gh
, 
	gi
, 
	gj
, 
	gk
, 
	gl
, 
	gm
, 
	gn
, 
	go
, 
	gp
;

1787 
EXPECT_THAT
(
MyV¬Ty³16
{},

1788 
F›ldsA»
(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0));

1792 
TEST
(
CÚšsTe¡
, 
WÜksW™hMoveOÆy
) {

1793 
CÚš”H–³r
 
	gh–³r
;

1794 
EXPECT_CALL
(
h–³r
, 
C®l
(
CÚšs
(
Poš‹e
(2))));

1795 
	gh–³r
.
C®l
(
MakeUniquePŒs
({1, 2}));

1798 
TEST
(
PaœTe¡
, 
U£G‘In¡—dOfMemb”s
) {

1799 
PaœW™hG‘
 
	g·œ
{7, "ABC"};

1800 
EXPECT_THAT
(
·œ
, 
Paœ
(7, "ABC"));

1801 
EXPECT_THAT
(
·œ
, 
Paœ
(
Ge
(7), 
HasSub¡r
("AB")));

1802 
EXPECT_THAT
(
·œ
, 
NÙ
(
Paœ
(
Lt
(7), "ABC")));

1804 
	g¡d
::
veùÜ
<
PaœW™hG‘
> 
v
 = {{11, "Foo"}, {29, "gMockIsBestMock"}};

1805 
EXPECT_THAT
(
v
,

1806 
EËm’tsA»
(
Paœ
(11, 
¡d
::
¡ršg
("Foo")), Paœ(
Ge
(10), 
NÙ
(""))));

1811 
TEST
(
S¹sW™hTe¡
, 
M©chesSŒšgW™hGiv’P»fix
) {

1812 cÚ¡ 
	gM©ch”
<cÚ¡ *> 
	gm1
 = 
S¹sW™h
(
¡d
::
¡ršg
(""));

1813 
EXPECT_TRUE
(
m1
.
M©ches
("Hi"));

1814 
EXPECT_TRUE
(
m1
.
M©ches
(""));

1815 
EXPECT_FALSE
(
m1
.
M©ches
(
nuÎ±r
));

1817 cÚ¡ 
	gM©ch”
<cÚ¡ 
	g¡d
::
¡ršg
&> 
m2
 = 
S¹sW™h
("Hi");

1818 
EXPECT_TRUE
(
m2
.
M©ches
("Hi"));

1819 
EXPECT_TRUE
(
m2
.
M©ches
("Hi Hi!"));

1820 
EXPECT_TRUE
(
m2
.
M©ches
("High"));

1821 
EXPECT_FALSE
(
m2
.
M©ches
("H"));

1822 
EXPECT_FALSE
(
m2
.
M©ches
(" Hi"));

1824 #ià
GTEST_INTERNAL_HAS_STRING_VIEW


1825 cÚ¡ 
	gM©ch”
<
	gš‹º®
::
SŒšgV›w
> 
m_em±y
 =

1826 
S¹sW™h
(
š‹º®
::
SŒšgV›w
(""));

1827 
EXPECT_TRUE
(
m_em±y
.
M©ches
(
š‹º®
::
SŒšgV›w
()));

1828 
EXPECT_TRUE
(
m_em±y
.
M©ches
(
š‹º®
::
SŒšgV›w
("")));

1829 
EXPECT_TRUE
(
m_em±y
.
M©ches
(
š‹º®
::
SŒšgV›w
("notƒmpty")));

1833 
TEST
(
S¹sW™hTe¡
, 
CªDesüibeS–f
) {

1834 
	gM©ch”
<cÚ¡ 
	g¡d
::
¡ršg
> 
m
 = 
S¹sW™h
("Hi");

1835 
EXPECT_EQ
("¡¬t w™h \"Hi\"", 
Desüibe
(
m
));

1840 
TEST
(
EndsW™hTe¡
, 
M©chesSŒšgW™hGiv’Suffix
) {

1841 cÚ¡ 
	gM©ch”
<cÚ¡ *> 
	gm1
 = 
EndsW™h
("");

1842 
EXPECT_TRUE
(
m1
.
M©ches
("Hi"));

1843 
EXPECT_TRUE
(
m1
.
M©ches
(""));

1844 
EXPECT_FALSE
(
m1
.
M©ches
(
nuÎ±r
));

1846 cÚ¡ 
	gM©ch”
<cÚ¡ 
	g¡d
::
¡ršg
&> 
m2
 = 
EndsW™h
(
¡d
::string("Hi"));

1847 
EXPECT_TRUE
(
m2
.
M©ches
("Hi"));

1848 
EXPECT_TRUE
(
m2
.
M©ches
("Wow Hi Hi"));

1849 
EXPECT_TRUE
(
m2
.
M©ches
("Super Hi"));

1850 
EXPECT_FALSE
(
m2
.
M©ches
("i"));

1851 
EXPECT_FALSE
(
m2
.
M©ches
("Hi "));

1853 #ià
GTEST_INTERNAL_HAS_STRING_VIEW


1854 cÚ¡ 
	gM©ch”
<cÚ¡ 
	gš‹º®
::
SŒšgV›w
&> 
m4
 =

1855 
EndsW™h
(
š‹º®
::
SŒšgV›w
(""));

1856 
EXPECT_TRUE
(
m4
.
M©ches
("Hi"));

1857 
EXPECT_TRUE
(
m4
.
M©ches
(""));

1858 
EXPECT_TRUE
(
m4
.
M©ches
(
š‹º®
::
SŒšgV›w
()));

1859 
EXPECT_TRUE
(
m4
.
M©ches
(
š‹º®
::
SŒšgV›w
("")));

1863 
TEST
(
EndsW™hTe¡
, 
CªDesüibeS–f
) {

1864 
	gM©ch”
<cÚ¡ 
	g¡d
::
¡ršg
> 
m
 = 
EndsW™h
("Hi");

1865 
EXPECT_EQ
("’d w™h \"Hi\"", 
Desüibe
(
m
));

1870 
TEST
(
M©chesRegexTe¡
, 
M©chesSŒšgM©chšgGiv’Regex
) {

1871 cÚ¡ 
	gM©ch”
<cÚ¡ *> 
	gm1
 = 
M©chesRegex
("a.*z");

1872 
EXPECT_TRUE
(
m1
.
M©ches
("az"));

1873 
EXPECT_TRUE
(
m1
.
M©ches
("abcz"));

1874 
EXPECT_FALSE
(
m1
.
M©ches
(
nuÎ±r
));

1876 cÚ¡ 
	gM©ch”
<cÚ¡ 
	g¡d
::
¡ršg
&> 
m2
 = 
M©chesRegex
(
Ãw
 
RE
("a.*z"));

1877 
EXPECT_TRUE
(
m2
.
M©ches
("azbz"));

1878 
EXPECT_FALSE
(
m2
.
M©ches
("az1"));

1879 
EXPECT_FALSE
(
m2
.
M©ches
("1az"));

1881 #ià
GTEST_INTERNAL_HAS_STRING_VIEW


1882 cÚ¡ 
	gM©ch”
<cÚ¡ 
	gš‹º®
::
SŒšgV›w
&> 
m3
 = 
M©chesRegex
("a.*z");

1883 
EXPECT_TRUE
(
m3
.
M©ches
(
š‹º®
::
SŒšgV›w
("az")));

1884 
EXPECT_TRUE
(
m3
.
M©ches
(
š‹º®
::
SŒšgV›w
("abcz")));

1885 
EXPECT_FALSE
(
m3
.
M©ches
(
š‹º®
::
SŒšgV›w
("1az")));

1886 
EXPECT_FALSE
(
m3
.
M©ches
(
š‹º®
::
SŒšgV›w
()));

1887 cÚ¡ 
	gM©ch”
<cÚ¡ 
	gš‹º®
::
SŒšgV›w
&> 
m4
 =

1888 
M©chesRegex
(
š‹º®
::
SŒšgV›w
(""));

1889 
EXPECT_TRUE
(
m4
.
M©ches
(
š‹º®
::
SŒšgV›w
("")));

1890 
EXPECT_TRUE
(
m4
.
M©ches
(
š‹º®
::
SŒšgV›w
()));

1894 
TEST
(
M©chesRegexTe¡
, 
CªDesüibeS–f
) {

1895 
	gM©ch”
<cÚ¡ 
	g¡d
::
¡ršg
> 
m1
 = 
M©chesRegex
(
¡d
::string("Hi.*"));

1896 
EXPECT_EQ
("m©che »guÏ¸ex´essiÚ \"Hi.*\"", 
Desüibe
(
m1
));

1898 
	gM©ch”
<cÚ¡ *> 
	gm2
 = 
M©chesRegex
(
Ãw
 
RE
("a.*"));

1899 
EXPECT_EQ
("m©che »guÏ¸ex´essiÚ \"a.*\"", 
Desüibe
(
m2
));

1901 #ià
GTEST_INTERNAL_HAS_STRING_VIEW


1902 
	gM©ch”
<cÚ¡ 
	gš‹º®
::
SŒšgV›w
> 
m3
 = 
M©chesRegex
(
Ãw
 
RE
("0.*"));

1903 
EXPECT_EQ
("m©che »guÏ¸ex´essiÚ \"0.*\"", 
Desüibe
(
m3
));

1909 
TEST
(
CÚšsRegexTe¡
, 
M©chesSŒšgCÚššgGiv’Regex
) {

1910 cÚ¡ 
	gM©ch”
<cÚ¡ *> 
	gm1
 = 
CÚšsRegex
(
¡d
::
¡ršg
("a.*z"));

1911 
EXPECT_TRUE
(
m1
.
M©ches
("az"));

1912 
EXPECT_TRUE
(
m1
.
M©ches
("0abcz1"));

1913 
EXPECT_FALSE
(
m1
.
M©ches
(
nuÎ±r
));

1915 cÚ¡ 
	gM©ch”
<cÚ¡ 
	g¡d
::
¡ršg
&> 
m2
 = 
CÚšsRegex
(
Ãw
 
RE
("a.*z"));

1916 
EXPECT_TRUE
(
m2
.
M©ches
("azbz"));

1917 
EXPECT_TRUE
(
m2
.
M©ches
("az1"));

1918 
EXPECT_FALSE
(
m2
.
M©ches
("1a"));

1920 #ià
GTEST_INTERNAL_HAS_STRING_VIEW


1921 cÚ¡ 
	gM©ch”
<cÚ¡ 
	gš‹º®
::
SŒšgV›w
&> 
m3
 =

1922 
CÚšsRegex
(
Ãw
 
RE
("a.*z"));

1923 
EXPECT_TRUE
(
m3
.
M©ches
(
š‹º®
::
SŒšgV›w
("azbz")));

1924 
EXPECT_TRUE
(
m3
.
M©ches
(
š‹º®
::
SŒšgV›w
("az1")));

1925 
EXPECT_FALSE
(
m3
.
M©ches
(
š‹º®
::
SŒšgV›w
("1a")));

1926 
EXPECT_FALSE
(
m3
.
M©ches
(
š‹º®
::
SŒšgV›w
()));

1927 cÚ¡ 
	gM©ch”
<cÚ¡ 
	gš‹º®
::
SŒšgV›w
&> 
m4
 =

1928 
CÚšsRegex
(
š‹º®
::
SŒšgV›w
(""));

1929 
EXPECT_TRUE
(
m4
.
M©ches
(
š‹º®
::
SŒšgV›w
("")));

1930 
EXPECT_TRUE
(
m4
.
M©ches
(
š‹º®
::
SŒšgV›w
()));

1934 
TEST
(
CÚšsRegexTe¡
, 
CªDesüibeS–f
) {

1935 
	gM©ch”
<cÚ¡ 
	g¡d
::
¡ršg
> 
m1
 = 
CÚšsRegex
("Hi.*");

1936 
EXPECT_EQ
("cÚš »guÏ¸ex´essiÚ \"Hi.*\"", 
Desüibe
(
m1
));

1938 
	gM©ch”
<cÚ¡ *> 
	gm2
 = 
CÚšsRegex
(
Ãw
 
RE
("a.*"));

1939 
EXPECT_EQ
("cÚš »guÏ¸ex´essiÚ \"a.*\"", 
Desüibe
(
m2
));

1941 #ià
GTEST_INTERNAL_HAS_STRING_VIEW


1942 
	gM©ch”
<cÚ¡ 
	gš‹º®
::
SŒšgV›w
> 
m3
 = 
CÚšsRegex
(
Ãw
 
RE
("0.*"));

1943 
EXPECT_EQ
("cÚš »guÏ¸ex´essiÚ \"0.*\"", 
Desüibe
(
m3
));

1948 #ià
GTEST_HAS_STD_WSTRING


1949 
TEST
(
StdWideSŒEqTe¡
, 
M©chesEqu®
) {

1950 
	gM©ch”
<cÚ¡ 
	gwch¬_t
*> 
	gm
 = 
SŒEq
(::
¡d
::
w¡ršg
(
L
"Hello"));

1951 
EXPECT_TRUE
(
m
.
M©ches
(
L
"Hello"));

1952 
EXPECT_FALSE
(
m
.
M©ches
(
L
"hello"));

1953 
EXPECT_FALSE
(
m
.
M©ches
(
nuÎ±r
));

1955 
	gM©ch”
<cÚ¡ ::
¡d
::
w¡ršg
&> 
m2
 = 
SŒEq
(
L
"Hello");

1956 
EXPECT_TRUE
(
m2
.
M©ches
(
L
"Hello"));

1957 
EXPECT_FALSE
(
m2
.
M©ches
(
L
"Hi"));

1959 
	gM©ch”
<cÚ¡ ::
¡d
::
w¡ršg
&> 
m3
 = 
SŒEq
(
L
"\xD3\x576\x8D3\xC74D");

1960 
EXPECT_TRUE
(
m3
.
M©ches
(
L
"\xD3\x576\x8D3\xC74D"));

1961 
EXPECT_FALSE
(
m3
.
M©ches
(
L
"\xD3\x576\x8D3\xC74E"));

1963 ::
¡d
::
w¡ršg
 
¡r
(
L
"01204500800");

1964 
	g¡r
[3] = 
L
'\0';

1965 
	gM©ch”
<cÚ¡ ::
¡d
::
w¡ršg
&> 
m4
 = 
SŒEq
(
¡r
);

1966 
EXPECT_TRUE
(
m4
.
M©ches
(
¡r
));

1967 
	g¡r
[0] = 
¡r
[6] = sŒ[7] = sŒ[9] = sŒ[10] = 
L
'\0';

1968 
	gM©ch”
<cÚ¡ ::
¡d
::
w¡ršg
&> 
m5
 = 
SŒEq
(
¡r
);

1969 
EXPECT_TRUE
(
m5
.
M©ches
(
¡r
));

1972 
TEST
(
StdWideSŒEqTe¡
, 
CªDesüibeS–f
) {

1973 
	gM©ch”
< ::
¡d
::
w¡ršg
> 
m
 = 
SŒEq
(
L
"Hi-\'\"?\\\a\b\f\n\r\t\v");

1974 
EXPECT_EQ
("isƒqualo L\"Hi-\'\\\"?\\\\\\a\\b\\f\\n\\r\\t\\v\"",

1975 
Desüibe
(
m
));

1977 
	gM©ch”
< ::
¡d
::
w¡ršg
> 
m2
 = 
SŒEq
(
L
"\xD3\x576\x8D3\xC74D");

1978 
EXPECT_EQ
("isƒqualo L\"\\xD3\\x576\\x8D3\\xC74D\"",

1979 
Desüibe
(
m2
));

1981 ::
¡d
::
w¡ršg
 
¡r
(
L
"01204500800");

1982 
	g¡r
[3] = 
L
'\0';

1983 
	gM©ch”
<cÚ¡ ::
¡d
::
w¡ršg
&> 
m4
 = 
SŒEq
(
¡r
);

1984 
EXPECT_EQ
("i equ®ØL\"012\\04500800\"", 
Desüibe
(
m4
));

1985 
	g¡r
[0] = 
¡r
[6] = sŒ[7] = sŒ[9] = sŒ[10] = 
L
'\0';

1986 
	gM©ch”
<cÚ¡ ::
¡d
::
w¡ršg
&> 
m5
 = 
SŒEq
(
¡r
);

1987 
EXPECT_EQ
("i equ®ØL\"\\012\\045\\0\\08\\0\\0\"", 
Desüibe
(
m5
));

1990 
TEST
(
StdWideSŒNeTe¡
, 
M©chesUÃqu®SŒšg
) {

1991 
	gM©ch”
<cÚ¡ 
	gwch¬_t
*> 
	gm
 = 
SŒNe
(
L
"Hello");

1992 
EXPECT_TRUE
(
m
.
M©ches
(
L
""));

1993 
EXPECT_TRUE
(
m
.
M©ches
(
nuÎ±r
));

1994 
EXPECT_FALSE
(
m
.
M©ches
(
L
"Hello"));

1996 
	gM©ch”
< ::
¡d
::
w¡ršg
> 
m2
 = 
SŒNe
(::¡d::w¡ršg(
L
"Hello"));

1997 
EXPECT_TRUE
(
m2
.
M©ches
(
L
"hello"));

1998 
EXPECT_FALSE
(
m2
.
M©ches
(
L
"Hello"));

2001 
TEST
(
StdWideSŒNeTe¡
, 
CªDesüibeS–f
) {

2002 
	gM©ch”
<cÚ¡ 
	gwch¬_t
*> 
	gm
 = 
SŒNe
(
L
"Hi");

2003 
EXPECT_EQ
("i¢'ˆequ®ØL\"Hi\"", 
Desüibe
(
m
));

2006 
TEST
(
StdWideSŒCa£EqTe¡
, 
M©chesEqu®SŒšgIgnÜšgCa£
) {

2007 
	gM©ch”
<cÚ¡ 
	gwch¬_t
*> 
	gm
 = 
SŒCa£Eq
(::
¡d
::
w¡ršg
(
L
"Hello"));

2008 
EXPECT_TRUE
(
m
.
M©ches
(
L
"Hello"));

2009 
EXPECT_TRUE
(
m
.
M©ches
(
L
"hello"));

2010 
EXPECT_FALSE
(
m
.
M©ches
(
L
"Hi"));

2011 
EXPECT_FALSE
(
m
.
M©ches
(
nuÎ±r
));

2013 
	gM©ch”
<cÚ¡ ::
¡d
::
w¡ršg
&> 
m2
 = 
SŒCa£Eq
(
L
"Hello");

2014 
EXPECT_TRUE
(
m2
.
M©ches
(
L
"hello"));

2015 
EXPECT_FALSE
(
m2
.
M©ches
(
L
"Hi"));

2018 
TEST
(
StdWideSŒCa£EqTe¡
, 
M©chesEqu®SŒšgW™h0IgnÜšgCa£
) {

2019 ::
¡d
::
w¡ršg
 
¡r1
(
L
"oabocdooeoo");

2020 ::
¡d
::
w¡ršg
 
¡r2
(
L
"OABOCDOOEOO");

2021 
	gM©ch”
<cÚ¡ ::
¡d
::
w¡ršg
&> 
m0
 = 
SŒCa£Eq
(
¡r1
);

2022 
EXPECT_FALSE
(
m0
.
M©ches
(
¡r2
 + ::
¡d
::
w¡ršg
(1, 
L
'\0')));

2024 
	g¡r1
[3] = 
¡r2
[3] = 
L
'\0';

2025 
	gM©ch”
<cÚ¡ ::
¡d
::
w¡ršg
&> 
m1
 = 
SŒCa£Eq
(
¡r1
);

2026 
EXPECT_TRUE
(
m1
.
M©ches
(
¡r2
));

2028 
	g¡r1
[0] = 
¡r1
[6] = sŒ1[7] = sŒ1[10] = 
L
'\0';

2029 
	g¡r2
[0] = 
¡r2
[6] = sŒ2[7] = sŒ2[10] = 
L
'\0';

2030 
	gM©ch”
<cÚ¡ ::
¡d
::
w¡ršg
&> 
m2
 = 
SŒCa£Eq
(
¡r1
);

2031 
	g¡r1
[9] = 
¡r2
[9] = 
L
'\0';

2032 
EXPECT_FALSE
(
m2
.
M©ches
(
¡r2
));

2034 
	gM©ch”
<cÚ¡ ::
¡d
::
w¡ršg
&> 
m3
 = 
SŒCa£Eq
(
¡r1
);

2035 
EXPECT_TRUE
(
m3
.
M©ches
(
¡r2
));

2037 
EXPECT_FALSE
(
m3
.
M©ches
(
¡r2
 + 
L
"x"));

2038 
	g¡r2
.
­³nd
(1, 
L
'\0');

2039 
EXPECT_FALSE
(
m3
.
M©ches
(
¡r2
));

2040 
EXPECT_FALSE
(
m3
.
M©ches
(::
¡d
::
w¡ršg
(
¡r2
, 0, 9)));

2043 
TEST
(
StdWideSŒCa£EqTe¡
, 
CªDesüibeS–f
) {

2044 
	gM©ch”
< ::
¡d
::
w¡ršg
> 
m
 = 
SŒCa£Eq
(
L
"Hi");

2045 
EXPECT_EQ
("i equ®Ø(ignÜšg ca£èL\"Hi\"", 
Desüibe
(
m
));

2048 
TEST
(
StdWideSŒCa£NeTe¡
, 
M©chesUÃqu®SŒšgIgnÜšgCa£
) {

2049 
	gM©ch”
<cÚ¡ 
	gwch¬_t
*> 
	gm
 = 
SŒCa£Ne
(
L
"Hello");

2050 
EXPECT_TRUE
(
m
.
M©ches
(
L
"Hi"));

2051 
EXPECT_TRUE
(
m
.
M©ches
(
nuÎ±r
));

2052 
EXPECT_FALSE
(
m
.
M©ches
(
L
"Hello"));

2053 
EXPECT_FALSE
(
m
.
M©ches
(
L
"hello"));

2055 
	gM©ch”
< ::
¡d
::
w¡ršg
> 
m2
 = 
SŒCa£Ne
(::¡d::w¡ršg(
L
"Hello"));

2056 
EXPECT_TRUE
(
m2
.
M©ches
(
L
""));

2057 
EXPECT_FALSE
(
m2
.
M©ches
(
L
"Hello"));

2060 
TEST
(
StdWideSŒCa£NeTe¡
, 
CªDesüibeS–f
) {

2061 
	gM©ch”
<cÚ¡ 
	gwch¬_t
*> 
	gm
 = 
SŒCa£Ne
(
L
"Hi");

2062 
EXPECT_EQ
("i¢'ˆequ®Ø(ignÜšg ca£èL\"Hi\"", 
Desüibe
(
m
));

2066 
TEST
(
StdWideHasSub¡rTe¡
, 
WÜksFÜSŒšgCÏs£s
) {

2067 cÚ¡ 
	gM©ch”
< ::
¡d
::
w¡ršg
> 
m1
 = 
HasSub¡r
(
L
"foo");

2068 
EXPECT_TRUE
(
m1
.
M©ches
(::
¡d
::
w¡ršg
(
L
"I†ove food.")));

2069 
EXPECT_FALSE
(
m1
.
M©ches
(::
¡d
::
w¡ršg
(
L
"tofo")));

2071 cÚ¡ 
	gM©ch”
<cÚ¡ ::
¡d
::
w¡ršg
&> 
m2
 = 
HasSub¡r
(
L
"foo");

2072 
EXPECT_TRUE
(
m2
.
M©ches
(::
¡d
::
w¡ršg
(
L
"I†ove food.")));

2073 
EXPECT_FALSE
(
m2
.
M©ches
(::
¡d
::
w¡ršg
(
L
"tofo")));

2077 
TEST
(
StdWideHasSub¡rTe¡
, 
WÜksFÜCSŒšgs
) {

2078 cÚ¡ 
	gM©ch”
<
	gwch¬_t
*> 
	gm1
 = 
HasSub¡r
(
L
"foo");

2079 
EXPECT_TRUE
(
m1
.
M©ches
(
cÚ¡_ÿ¡
<
wch¬_t
*>(
L
"I†ove food.")));

2080 
EXPECT_FALSE
(
m1
.
M©ches
(
cÚ¡_ÿ¡
<
wch¬_t
*>(
L
"tofo")));

2081 
EXPECT_FALSE
(
m1
.
M©ches
(
nuÎ±r
));

2083 cÚ¡ 
	gM©ch”
<cÚ¡ 
	gwch¬_t
*> 
	gm2
 = 
HasSub¡r
(
L
"foo");

2084 
EXPECT_TRUE
(
m2
.
M©ches
(
L
"I†ove food."));

2085 
EXPECT_FALSE
(
m2
.
M©ches
(
L
"tofo"));

2086 
EXPECT_FALSE
(
m2
.
M©ches
(
nuÎ±r
));

2090 
TEST
(
StdWideHasSub¡rTe¡
, 
CªDesüibeS–f
) {

2091 
	gM©ch”
< ::
¡d
::
w¡ršg
> 
m
 = 
HasSub¡r
(
L
"foo\n\"");

2092 
EXPECT_EQ
("ha sub¡ršg L\"foo\\n\\\"\"", 
Desüibe
(
m
));

2097 
TEST
(
StdWideS¹sW™hTe¡
, 
M©chesSŒšgW™hGiv’P»fix
) {

2098 cÚ¡ 
	gM©ch”
<cÚ¡ 
	gwch¬_t
*> 
	gm1
 = 
S¹sW™h
(::
¡d
::
w¡ršg
(
L
""));

2099 
EXPECT_TRUE
(
m1
.
M©ches
(
L
"Hi"));

2100 
EXPECT_TRUE
(
m1
.
M©ches
(
L
""));

2101 
EXPECT_FALSE
(
m1
.
M©ches
(
nuÎ±r
));

2103 cÚ¡ 
	gM©ch”
<cÚ¡ ::
¡d
::
w¡ršg
&> 
m2
 = 
S¹sW™h
(
L
"Hi");

2104 
EXPECT_TRUE
(
m2
.
M©ches
(
L
"Hi"));

2105 
EXPECT_TRUE
(
m2
.
M©ches
(
L
"Hi Hi!"));

2106 
EXPECT_TRUE
(
m2
.
M©ches
(
L
"High"));

2107 
EXPECT_FALSE
(
m2
.
M©ches
(
L
"H"));

2108 
EXPECT_FALSE
(
m2
.
M©ches
(
L
" Hi"));

2111 
TEST
(
StdWideS¹sW™hTe¡
, 
CªDesüibeS–f
) {

2112 
	gM©ch”
<cÚ¡ ::
¡d
::
w¡ršg
> 
m
 = 
S¹sW™h
(
L
"Hi");

2113 
EXPECT_EQ
("¡¬t w™h L\"Hi\"", 
Desüibe
(
m
));

2118 
TEST
(
StdWideEndsW™hTe¡
, 
M©chesSŒšgW™hGiv’Suffix
) {

2119 cÚ¡ 
	gM©ch”
<cÚ¡ 
	gwch¬_t
*> 
	gm1
 = 
EndsW™h
(
L
"");

2120 
EXPECT_TRUE
(
m1
.
M©ches
(
L
"Hi"));

2121 
EXPECT_TRUE
(
m1
.
M©ches
(
L
""));

2122 
EXPECT_FALSE
(
m1
.
M©ches
(
nuÎ±r
));

2124 cÚ¡ 
	gM©ch”
<cÚ¡ ::
¡d
::
w¡ršg
&> 
m2
 = 
EndsW™h
(::¡d::w¡ršg(
L
"Hi"));

2125 
EXPECT_TRUE
(
m2
.
M©ches
(
L
"Hi"));

2126 
EXPECT_TRUE
(
m2
.
M©ches
(
L
"Wow Hi Hi"));

2127 
EXPECT_TRUE
(
m2
.
M©ches
(
L
"Super Hi"));

2128 
EXPECT_FALSE
(
m2
.
M©ches
(
L
"i"));

2129 
EXPECT_FALSE
(
m2
.
M©ches
(
L
"Hi "));

2132 
TEST
(
StdWideEndsW™hTe¡
, 
CªDesüibeS–f
) {

2133 
	gM©ch”
<cÚ¡ ::
¡d
::
w¡ršg
> 
m
 = 
EndsW™h
(
L
"Hi");

2134 
EXPECT_EQ
("’d w™h L\"Hi\"", 
Desüibe
(
m
));

2139 ::
¡d
::
	ttu¶e
<, > 
	tTu¶e2
;

2143 
TEST
(
Eq2Te¡
, 
M©chesEqu®Argum’ts
) {

2144 
	gM©ch”
<cÚ¡ 
	gTu¶e2
&> 
	gm
 = 
Eq
();

2145 
EXPECT_TRUE
(
m
.
M©ches
(
Tu¶e2
(5L, 5)));

2146 
EXPECT_FALSE
(
m
.
M©ches
(
Tu¶e2
(5L, 6)));

2150 
TEST
(
Eq2Te¡
, 
CªDesüibeS–f
) {

2151 
	gM©ch”
<cÚ¡ 
	gTu¶e2
&> 
	gm
 = 
Eq
();

2152 
EXPECT_EQ
("¬ªƒqu®…aœ", 
Desüibe
(
m
));

2157 
TEST
(
Ge2Te¡
, 
M©chesG»©”ThªOrEqu®Argum’ts
) {

2158 
	gM©ch”
<cÚ¡ 
	gTu¶e2
&> 
	gm
 = 
Ge
();

2159 
EXPECT_TRUE
(
m
.
M©ches
(
Tu¶e2
(5L, 4)));

2160 
EXPECT_TRUE
(
m
.
M©ches
(
Tu¶e2
(5L, 5)));

2161 
EXPECT_FALSE
(
m
.
M©ches
(
Tu¶e2
(5L, 6)));

2165 
TEST
(
Ge2Te¡
, 
CªDesüibeS–f
) {

2166 
	gM©ch”
<cÚ¡ 
	gTu¶e2
&> 
	gm
 = 
Ge
();

2167 
EXPECT_EQ
("¬¨·œ wh”thfœ¡ >ğth£cÚd", 
Desüibe
(
m
));

2172 
TEST
(
Gt2Te¡
, 
M©chesG»©”ThªArgum’ts
) {

2173 
	gM©ch”
<cÚ¡ 
	gTu¶e2
&> 
	gm
 = 
Gt
();

2174 
EXPECT_TRUE
(
m
.
M©ches
(
Tu¶e2
(5L, 4)));

2175 
EXPECT_FALSE
(
m
.
M©ches
(
Tu¶e2
(5L, 5)));

2176 
EXPECT_FALSE
(
m
.
M©ches
(
Tu¶e2
(5L, 6)));

2180 
TEST
(
Gt2Te¡
, 
CªDesüibeS–f
) {

2181 
	gM©ch”
<cÚ¡ 
	gTu¶e2
&> 
	gm
 = 
Gt
();

2182 
EXPECT_EQ
("¬¨·œ wh”thfœ¡ >h£cÚd", 
Desüibe
(
m
));

2187 
TEST
(
Le2Te¡
, 
M©chesLessThªOrEqu®Argum’ts
) {

2188 
	gM©ch”
<cÚ¡ 
	gTu¶e2
&> 
	gm
 = 
Le
();

2189 
EXPECT_TRUE
(
m
.
M©ches
(
Tu¶e2
(5L, 6)));

2190 
EXPECT_TRUE
(
m
.
M©ches
(
Tu¶e2
(5L, 5)));

2191 
EXPECT_FALSE
(
m
.
M©ches
(
Tu¶e2
(5L, 4)));

2195 
TEST
(
Le2Te¡
, 
CªDesüibeS–f
) {

2196 
	gM©ch”
<cÚ¡ 
	gTu¶e2
&> 
	gm
 = 
Le
();

2197 
EXPECT_EQ
("¬¨·œ wh”thfœ¡ <ğth£cÚd", 
Desüibe
(
m
));

2202 
TEST
(
Lt2Te¡
, 
M©chesLessThªArgum’ts
) {

2203 
	gM©ch”
<cÚ¡ 
	gTu¶e2
&> 
	gm
 = 
Lt
();

2204 
EXPECT_TRUE
(
m
.
M©ches
(
Tu¶e2
(5L, 6)));

2205 
EXPECT_FALSE
(
m
.
M©ches
(
Tu¶e2
(5L, 5)));

2206 
EXPECT_FALSE
(
m
.
M©ches
(
Tu¶e2
(5L, 4)));

2210 
TEST
(
Lt2Te¡
, 
CªDesüibeS–f
) {

2211 
	gM©ch”
<cÚ¡ 
	gTu¶e2
&> 
	gm
 = 
Lt
();

2212 
EXPECT_EQ
("¬¨·œ wh”thfœ¡ <h£cÚd", 
Desüibe
(
m
));

2217 
TEST
(
Ne2Te¡
, 
M©chesUÃqu®Argum’ts
) {

2218 
	gM©ch”
<cÚ¡ 
	gTu¶e2
&> 
	gm
 = 
Ne
();

2219 
EXPECT_TRUE
(
m
.
M©ches
(
Tu¶e2
(5L, 6)));

2220 
EXPECT_TRUE
(
m
.
M©ches
(
Tu¶e2
(5L, 4)));

2221 
EXPECT_FALSE
(
m
.
M©ches
(
Tu¶e2
(5L, 5)));

2225 
TEST
(
Ne2Te¡
, 
CªDesüibeS–f
) {

2226 
	gM©ch”
<cÚ¡ 
	gTu¶e2
&> 
	gm
 = 
Ne
();

2227 
EXPECT_EQ
("¬ª uÃqu®…aœ", 
Desüibe
(
m
));

2230 
TEST
(
PaœM©chBa£Te¡
, 
WÜksW™hMoveOÆy
) {

2231 
usšg
 
	gPoš‹rs
 = 
¡d
::
tu¶e
<¡d::
unique_±r
<>, 
	g¡d
::unique_ptr<>>;

2232 
	gM©ch”
<
	gPoš‹rs
> 
	gm©ch”
 = 
Eq
();

2233 
Poš‹rs
 
	gpoš‹rs
;

2236 
EXPECT_TRUE
(
m©ch”
.
M©ches
(
poš‹rs
));

2240 
TEST
(
IsNª
, 
FlßtM©chesNª
) {

2241 
	gqu›t_Çn
 = 
¡d
::
num”ic_lim™s
<>::
qu›t_NaN
();

2242 
	gÙh”_Çn
 = 
¡d
::
Çnf
("1");

2243 
	g»®_v®ue
 = 1.0f;

2245 
	gM©ch”
<> 
	gm
 = 
IsNª
();

2246 
EXPECT_TRUE
(
m
.
M©ches
(
qu›t_Çn
));

2247 
EXPECT_TRUE
(
m
.
M©ches
(
Ùh”_Çn
));

2248 
EXPECT_FALSE
(
m
.
M©ches
(
»®_v®ue
));

2250 
	gM©ch”
<&> 
	gm_»f
 = 
IsNª
();

2251 
EXPECT_TRUE
(
m_»f
.
M©ches
(
qu›t_Çn
));

2252 
EXPECT_TRUE
(
m_»f
.
M©ches
(
Ùh”_Çn
));

2253 
EXPECT_FALSE
(
m_»f
.
M©ches
(
»®_v®ue
));

2255 
	gM©ch”
<cÚ¡ &> 
	gm_üef
 = 
IsNª
();

2256 
EXPECT_TRUE
(
m_üef
.
M©ches
(
qu›t_Çn
));

2257 
EXPECT_TRUE
(
m_üef
.
M©ches
(
Ùh”_Çn
));

2258 
EXPECT_FALSE
(
m_üef
.
M©ches
(
»®_v®ue
));

2262 
TEST
(
IsNª
, 
DoubËM©chesNª
) {

2263 
	gqu›t_Çn
 = 
¡d
::
num”ic_lim™s
<>::
qu›t_NaN
();

2264 
	gÙh”_Çn
 = 
¡d
::
Çn
("1");

2265 
	g»®_v®ue
 = 1.0;

2267 
	gM©ch”
<> 
	gm
 = 
IsNª
();

2268 
EXPECT_TRUE
(
m
.
M©ches
(
qu›t_Çn
));

2269 
EXPECT_TRUE
(
m
.
M©ches
(
Ùh”_Çn
));

2270 
EXPECT_FALSE
(
m
.
M©ches
(
»®_v®ue
));

2272 
	gM©ch”
<&> 
	gm_»f
 = 
IsNª
();

2273 
EXPECT_TRUE
(
m_»f
.
M©ches
(
qu›t_Çn
));

2274 
EXPECT_TRUE
(
m_»f
.
M©ches
(
Ùh”_Çn
));

2275 
EXPECT_FALSE
(
m_»f
.
M©ches
(
»®_v®ue
));

2277 
	gM©ch”
<cÚ¡ &> 
	gm_üef
 = 
IsNª
();

2278 
EXPECT_TRUE
(
m_üef
.
M©ches
(
qu›t_Çn
));

2279 
EXPECT_TRUE
(
m_üef
.
M©ches
(
Ùh”_Çn
));

2280 
EXPECT_FALSE
(
m_üef
.
M©ches
(
»®_v®ue
));

2284 
TEST
(
IsNª
, 
LÚgDoubËM©chesNª
) {

2285 
	gqu›t_Çn
 = 
¡d
::
num”ic_lim™s
<>::
qu›t_NaN
();

2286 
	gÙh”_Çn
 = 
¡d
::
Çn
("1");

2287 
	g»®_v®ue
 = 1.0;

2289 
	gM©ch”
<> 
	gm
 = 
IsNª
();

2290 
EXPECT_TRUE
(
m
.
M©ches
(
qu›t_Çn
));

2291 
EXPECT_TRUE
(
m
.
M©ches
(
Ùh”_Çn
));

2292 
EXPECT_FALSE
(
m
.
M©ches
(
»®_v®ue
));

2294 
	gM©ch”
<&> 
	gm_»f
 = 
IsNª
();

2295 
EXPECT_TRUE
(
m_»f
.
M©ches
(
qu›t_Çn
));

2296 
EXPECT_TRUE
(
m_»f
.
M©ches
(
Ùh”_Çn
));

2297 
EXPECT_FALSE
(
m_»f
.
M©ches
(
»®_v®ue
));

2299 
	gM©ch”
<cÚ¡ &> 
	gm_üef
 = 
IsNª
();

2300 
EXPECT_TRUE
(
m_üef
.
M©ches
(
qu›t_Çn
));

2301 
EXPECT_TRUE
(
m_üef
.
M©ches
(
Ùh”_Çn
));

2302 
EXPECT_FALSE
(
m_üef
.
M©ches
(
»®_v®ue
));

2306 
TEST
(
IsNª
, 
NÙM©chesNª
) {

2307 
	gM©ch”
<> 
	gmf
 = 
NÙ
(
IsNª
());

2308 
EXPECT_FALSE
(
mf
.
M©ches
(
¡d
::
num”ic_lim™s
<>::
qu›t_NaN
()));

2309 
EXPECT_FALSE
(
mf
.
M©ches
(
¡d
::
Çnf
("1")));

2310 
EXPECT_TRUE
(
mf
.
M©ches
(1.0));

2312 
	gM©ch”
<> 
	gmd
 = 
NÙ
(
IsNª
());

2313 
EXPECT_FALSE
(
md
.
M©ches
(
¡d
::
num”ic_lim™s
<>::
qu›t_NaN
()));

2314 
EXPECT_FALSE
(
md
.
M©ches
(
¡d
::
Çn
("1")));

2315 
EXPECT_TRUE
(
md
.
M©ches
(1.0));

2317 
	gM©ch”
<> 
	gmld
 = 
NÙ
(
IsNª
());

2318 
EXPECT_FALSE
(
mld
.
M©ches
(
¡d
::
num”ic_lim™s
<>::
qu›t_NaN
()));

2319 
EXPECT_FALSE
(
mld
.
M©ches
(
¡d
::
ÇÆ
("1")));

2320 
EXPECT_TRUE
(
mld
.
M©ches
(1.0));

2324 
TEST
(
IsNª
, 
CªDesüibeS–f
) {

2325 
	gM©ch”
<> 
	gmf
 = 
IsNª
();

2326 
EXPECT_EQ
("i NaN", 
Desüibe
(
mf
));

2328 
	gM©ch”
<> 
	gmd
 = 
IsNª
();

2329 
EXPECT_EQ
("i NaN", 
Desüibe
(
md
));

2331 
	gM©ch”
<> 
	gmld
 = 
IsNª
();

2332 
EXPECT_EQ
("i NaN", 
Desüibe
(
mld
));

2336 
TEST
(
IsNª
, 
CªDesüibeS–fW™hNÙ
) {

2337 
	gM©ch”
<> 
	gmf
 = 
NÙ
(
IsNª
());

2338 
EXPECT_EQ
("i¢'ˆNaN", 
Desüibe
(
mf
));

2340 
	gM©ch”
<> 
	gmd
 = 
NÙ
(
IsNª
());

2341 
EXPECT_EQ
("i¢'ˆNaN", 
Desüibe
(
md
));

2343 
	gM©ch”
<> 
	gmld
 = 
NÙ
(
IsNª
());

2344 
EXPECT_EQ
("i¢'ˆNaN", 
Desüibe
(
mld
));

2349 
TEST
(
FlßtEq2Te¡
, 
M©chesEqu®Argum’ts
) {

2350 ::
¡d
::
	ttu¶e
<, > 
	tT¶
;

2351 
	gM©ch”
<cÚ¡ 
	gT¶
&> 
	gm
 = 
FlßtEq
();

2352 
EXPECT_TRUE
(
m
.
M©ches
(
T¶
(1.0f, 1.0f)));

2353 
EXPECT_TRUE
(
m
.
M©ches
(
T¶
(0.3f, 0.1f + 0.1f + 0.1f)));

2354 
EXPECT_FALSE
(
m
.
M©ches
(
T¶
(1.1f, 1.0f)));

2358 
TEST
(
FlßtEq2Te¡
, 
CªDesüibeS–f
) {

2359 
	gM©ch”
<cÚ¡ ::
¡d
::
tu¶e
<, >&> 
	gm
 = 
FlßtEq
();

2360 
EXPECT_EQ
("¬ª‡lmo¡-equ®…aœ", 
Desüibe
(
m
));

2365 
TEST
(
NªS’s™iveFlßtEqTe¡
, 
M©chesEqu®Argum’tsW™hNaN
) {

2366 ::
¡d
::
	ttu¶e
<, > 
	tT¶
;

2367 
	gM©ch”
<cÚ¡ 
	gT¶
&> 
	gm
 = 
NªS’s™iveFlßtEq
();

2368 
EXPECT_TRUE
(
m
.
M©ches
(
T¶
(1.0f, 1.0f)));

2369 
EXPECT_TRUE
(
m
.
M©ches
(
T¶
(
¡d
::
num”ic_lim™s
<>::
qu›t_NaN
(),

2370 
¡d
::
num”ic_lim™s
<>::
qu›t_NaN
())));

2371 
EXPECT_FALSE
(
m
.
M©ches
(
T¶
(1.1f, 1.0f)));

2372 
EXPECT_FALSE
(
m
.
M©ches
(
T¶
(1.0f, 
¡d
::
num”ic_lim™s
<>::
qu›t_NaN
())));

2373 
EXPECT_FALSE
(
m
.
M©ches
(
T¶
(
¡d
::
num”ic_lim™s
<>::
qu›t_NaN
(), 1.0f)));

2377 
TEST
(
NªS’s™iveFlßtEqTe¡
, 
CªDesüibeS–fW™hNaNs
) {

2378 
	gM©ch”
<cÚ¡ ::
¡d
::
tu¶e
<, >&> 
	gm
 = 
NªS’s™iveFlßtEq
();

2379 
EXPECT_EQ
("¬ª‡lmo¡-equ®…aœ", 
Desüibe
(
m
));

2384 
TEST
(
DoubËEq2Te¡
, 
M©chesEqu®Argum’ts
) {

2385 ::
¡d
::
	ttu¶e
<, > 
	tT¶
;

2386 
	gM©ch”
<cÚ¡ 
	gT¶
&> 
	gm
 = 
DoubËEq
();

2387 
EXPECT_TRUE
(
m
.
M©ches
(
T¶
(1.0, 1.0)));

2388 
EXPECT_TRUE
(
m
.
M©ches
(
T¶
(0.3, 0.1 + 0.1 + 0.1)));

2389 
EXPECT_FALSE
(
m
.
M©ches
(
T¶
(1.1, 1.0)));

2393 
TEST
(
DoubËEq2Te¡
, 
CªDesüibeS–f
) {

2394 
	gM©ch”
<cÚ¡ ::
¡d
::
tu¶e
<, >&> 
	gm
 = 
DoubËEq
();

2395 
EXPECT_EQ
("¬ª‡lmo¡-equ®…aœ", 
Desüibe
(
m
));

2400 
TEST
(
NªS’s™iveDoubËEqTe¡
, 
M©chesEqu®Argum’tsW™hNaN
) {

2401 ::
¡d
::
	ttu¶e
<, > 
	tT¶
;

2402 
	gM©ch”
<cÚ¡ 
	gT¶
&> 
	gm
 = 
NªS’s™iveDoubËEq
();

2403 
EXPECT_TRUE
(
m
.
M©ches
(
T¶
(1.0f, 1.0f)));

2404 
EXPECT_TRUE
(
m
.
M©ches
(
T¶
(
¡d
::
num”ic_lim™s
<>::
qu›t_NaN
(),

2405 
¡d
::
num”ic_lim™s
<>::
qu›t_NaN
())));

2406 
EXPECT_FALSE
(
m
.
M©ches
(
T¶
(1.1f, 1.0f)));

2407 
EXPECT_FALSE
(
m
.
M©ches
(
T¶
(1.0f, 
¡d
::
num”ic_lim™s
<>::
qu›t_NaN
())));

2408 
EXPECT_FALSE
(
m
.
M©ches
(
T¶
(
¡d
::
num”ic_lim™s
<>::
qu›t_NaN
(), 1.0f)));

2412 
TEST
(
NªS’s™iveDoubËEqTe¡
, 
CªDesüibeS–fW™hNaNs
) {

2413 
	gM©ch”
<cÚ¡ ::
¡d
::
tu¶e
<, >&> 
	gm
 = 
NªS’s™iveDoubËEq
();

2414 
EXPECT_EQ
("¬ª‡lmo¡-equ®…aœ", 
Desüibe
(
m
));

2419 
TEST
(
FlßtN—r2Te¡
, 
M©chesEqu®Argum’ts
) {

2420 ::
¡d
::
	ttu¶e
<, > 
	tT¶
;

2421 
	gM©ch”
<cÚ¡ 
	gT¶
&> 
	gm
 = 
FlßtN—r
(0.5f);

2422 
EXPECT_TRUE
(
m
.
M©ches
(
T¶
(1.0f, 1.0f)));

2423 
EXPECT_TRUE
(
m
.
M©ches
(
T¶
(1.3f, 1.0f)));

2424 
EXPECT_FALSE
(
m
.
M©ches
(
T¶
(1.8f, 1.0f)));

2428 
TEST
(
FlßtN—r2Te¡
, 
CªDesüibeS–f
) {

2429 
	gM©ch”
<cÚ¡ ::
¡d
::
tu¶e
<, >&> 
	gm
 = 
FlßtN—r
(0.5f);

2430 
EXPECT_EQ
("¬ª‡lmo¡-equ®…aœ", 
Desüibe
(
m
));

2435 
TEST
(
NªS’s™iveFlßtN—rTe¡
, 
M©chesN—rbyArgum’tsW™hNaN
) {

2436 ::
¡d
::
	ttu¶e
<, > 
	tT¶
;

2437 
	gM©ch”
<cÚ¡ 
	gT¶
&> 
	gm
 = 
NªS’s™iveFlßtN—r
(0.5f);

2438 
EXPECT_TRUE
(
m
.
M©ches
(
T¶
(1.0f, 1.0f)));

2439 
EXPECT_TRUE
(
m
.
M©ches
(
T¶
(1.1f, 1.0f)));

2440 
EXPECT_TRUE
(
m
.
M©ches
(
T¶
(
¡d
::
num”ic_lim™s
<>::
qu›t_NaN
(),

2441 
¡d
::
num”ic_lim™s
<>::
qu›t_NaN
())));

2442 
EXPECT_FALSE
(
m
.
M©ches
(
T¶
(1.6f, 1.0f)));

2443 
EXPECT_FALSE
(
m
.
M©ches
(
T¶
(1.0f, 
¡d
::
num”ic_lim™s
<>::
qu›t_NaN
())));

2444 
EXPECT_FALSE
(
m
.
M©ches
(
T¶
(
¡d
::
num”ic_lim™s
<>::
qu›t_NaN
(), 1.0f)));

2448 
TEST
(
NªS’s™iveFlßtN—rTe¡
, 
CªDesüibeS–fW™hNaNs
) {

2449 
	gM©ch”
<cÚ¡ ::
¡d
::
tu¶e
<, >&> 
	gm
 = 
NªS’s™iveFlßtN—r
(0.5f);

2450 
EXPECT_EQ
("¬ª‡lmo¡-equ®…aœ", 
Desüibe
(
m
));

2455 
TEST
(
DoubËN—r2Te¡
, 
M©chesEqu®Argum’ts
) {

2456 ::
¡d
::
	ttu¶e
<, > 
	tT¶
;

2457 
	gM©ch”
<cÚ¡ 
	gT¶
&> 
	gm
 = 
DoubËN—r
(0.5);

2458 
EXPECT_TRUE
(
m
.
M©ches
(
T¶
(1.0, 1.0)));

2459 
EXPECT_TRUE
(
m
.
M©ches
(
T¶
(1.3, 1.0)));

2460 
EXPECT_FALSE
(
m
.
M©ches
(
T¶
(1.8, 1.0)));

2464 
TEST
(
DoubËN—r2Te¡
, 
CªDesüibeS–f
) {

2465 
	gM©ch”
<cÚ¡ ::
¡d
::
tu¶e
<, >&> 
	gm
 = 
DoubËN—r
(0.5);

2466 
EXPECT_EQ
("¬ª‡lmo¡-equ®…aœ", 
Desüibe
(
m
));

2471 
TEST
(
NªS’s™iveDoubËN—rTe¡
, 
M©chesN—rbyArgum’tsW™hNaN
) {

2472 ::
¡d
::
	ttu¶e
<, > 
	tT¶
;

2473 
	gM©ch”
<cÚ¡ 
	gT¶
&> 
	gm
 = 
NªS’s™iveDoubËN—r
(0.5f);

2474 
EXPECT_TRUE
(
m
.
M©ches
(
T¶
(1.0f, 1.0f)));

2475 
EXPECT_TRUE
(
m
.
M©ches
(
T¶
(1.1f, 1.0f)));

2476 
EXPECT_TRUE
(
m
.
M©ches
(
T¶
(
¡d
::
num”ic_lim™s
<>::
qu›t_NaN
(),

2477 
¡d
::
num”ic_lim™s
<>::
qu›t_NaN
())));

2478 
EXPECT_FALSE
(
m
.
M©ches
(
T¶
(1.6f, 1.0f)));

2479 
EXPECT_FALSE
(
m
.
M©ches
(
T¶
(1.0f, 
¡d
::
num”ic_lim™s
<>::
qu›t_NaN
())));

2480 
EXPECT_FALSE
(
m
.
M©ches
(
T¶
(
¡d
::
num”ic_lim™s
<>::
qu›t_NaN
(), 1.0f)));

2484 
TEST
(
NªS’s™iveDoubËN—rTe¡
, 
CªDesüibeS–fW™hNaNs
) {

2485 
	gM©ch”
<cÚ¡ ::
¡d
::
tu¶e
<, >&> 
	gm
 = 
NªS’s™iveDoubËN—r
(0.5f);

2486 
EXPECT_EQ
("¬ª‡lmo¡-equ®…aœ", 
Desüibe
(
m
));

2490 
TEST
(
NÙTe¡
, 
Neg©esM©ch”
) {

2491 
	gM©ch”
<> 
	gm
;

2492 
	gm
 = 
NÙ
(
Eq
(2));

2493 
EXPECT_TRUE
(
m
.
M©ches
(3));

2494 
EXPECT_FALSE
(
m
.
M©ches
(2));

2498 
TEST
(
NÙTe¡
, 
CªDesüibeS–f
) {

2499 
	gM©ch”
<> 
	gm
 = 
NÙ
(
Eq
(5));

2500 
EXPECT_EQ
("i¢'ˆequ®Ø5", 
Desüibe
(
m
));

2504 
TEST
(
NÙTe¡
, 
NÙM©ch”SaãlyCa¡sMÚomÜphicM©ch”s
) {

2506 
	gM©ch”
<> 
	gg»©”_thª_5
 = 
Gt
(5);

2508 
	gM©ch”
<cÚ¡ &> 
	gm
 = 
NÙ
(
g»©”_thª_5
);

2509 
	gM©ch”
<&> 
	gm2
 = 
NÙ
(
g»©”_thª_5
);

2510 
	gM©ch”
<&> 
	gm3
 = 
NÙ
(
m
);

2514 
AÎOfM©ches
(
num
, cÚ¡ 
M©ch”
<>& 
m
) {

2515 
SCOPED_TRACE
(
Desüibe
(
m
));

2516 
EXPECT_TRUE
(
m
.
M©ches
(0));

2517 
	gi
 = 1; i <ğ
num
; ++i) {

2518 
EXPECT_FALSE
(
m
.
M©ches
(
i
));

2520 
EXPECT_TRUE
(
m
.
M©ches
(
num
 + 1));

2525 
TEST
(
AÎOfTe¡
, 
M©chesWh’AÎM©ch
) {

2526 
	gM©ch”
<> 
	gm
;

2527 
	gm
 = 
AÎOf
(
Le
(2), 
Ge
(1));

2528 
EXPECT_TRUE
(
m
.
M©ches
(1));

2529 
EXPECT_TRUE
(
m
.
M©ches
(2));

2530 
EXPECT_FALSE
(
m
.
M©ches
(0));

2531 
EXPECT_FALSE
(
m
.
M©ches
(3));

2533 
	gm
 = 
AÎOf
(
Gt
(0), 
Ne
(1), Ne(2));

2534 
EXPECT_TRUE
(
m
.
M©ches
(3));

2535 
EXPECT_FALSE
(
m
.
M©ches
(2));

2536 
EXPECT_FALSE
(
m
.
M©ches
(1));

2537 
EXPECT_FALSE
(
m
.
M©ches
(0));

2539 
	gm
 = 
AÎOf
(
Gt
(0), 
Ne
(1), Ne(2), Ne(3));

2540 
EXPECT_TRUE
(
m
.
M©ches
(4));

2541 
EXPECT_FALSE
(
m
.
M©ches
(3));

2542 
EXPECT_FALSE
(
m
.
M©ches
(2));

2543 
EXPECT_FALSE
(
m
.
M©ches
(1));

2544 
EXPECT_FALSE
(
m
.
M©ches
(0));

2546 
	gm
 = 
AÎOf
(
Ge
(0), 
Lt
(10), 
Ne
(3), Ne(5), Ne(7));

2547 
EXPECT_TRUE
(
m
.
M©ches
(0));

2548 
EXPECT_TRUE
(
m
.
M©ches
(1));

2549 
EXPECT_FALSE
(
m
.
M©ches
(3));

2555 
AÎOfM©ches
(2, 
AÎOf
(
Ne
(1), Ne(2)));

2556 
AÎOfM©ches
(3, 
AÎOf
(
Ne
(1), Ne(2), Ne(3)));

2557 
AÎOfM©ches
(4, 
AÎOf
(
Ne
(1), Ne(2), Ne(3), Ne(4)));

2558 
AÎOfM©ches
(5, 
AÎOf
(
Ne
(1), Ne(2), Ne(3), Ne(4), Ne(5)));

2559 
AÎOfM©ches
(6, 
AÎOf
(
Ne
(1), Ne(2), Ne(3), Ne(4), Ne(5), Ne(6)));

2560 
AÎOfM©ches
(7, 
AÎOf
(
Ne
(1), Ne(2), Ne(3), Ne(4), Ne(5), Ne(6), Ne(7)));

2561 
AÎOfM©ches
(8, 
AÎOf
(
Ne
(1), Ne(2), Ne(3), Ne(4), Ne(5), Ne(6), Ne(7),

2562 
Ne
(8)));

2563 
AÎOfM©ches
(9, 
AÎOf
(
Ne
(1), Ne(2), Ne(3), Ne(4), Ne(5), Ne(6), Ne(7),

2564 
Ne
(8), Ne(9)));

2565 
AÎOfM©ches
(10, 
AÎOf
(
Ne
(1), Ne(2), Ne(3), Ne(4), Ne(5), Ne(6), Ne(7), Ne(8),

2566 
Ne
(9), Ne(10)));

2567 
AÎOfM©ches
(

2568 50, 
AÎOf
(
Ne
(1), Ne(2), Ne(3), Ne(4), Ne(5), Ne(6), Ne(7), Ne(8), Ne(9),

2569 
Ne
(10), Ne(11), Ne(12), Ne(13), Ne(14), Ne(15), Ne(16), Ne(17),

2570 
Ne
(18), Ne(19), Ne(20), Ne(21), Ne(22), Ne(23), Ne(24), Ne(25),

2571 
Ne
(26), Ne(27), Ne(28), Ne(29), Ne(30), Ne(31), Ne(32), Ne(33),

2572 
Ne
(34), Ne(35), Ne(36), Ne(37), Ne(38), Ne(39), Ne(40), Ne(41),

2573 
Ne
(42), Ne(43), Ne(44), Ne(45), Ne(46), Ne(47), Ne(48), Ne(49),

2574 
Ne
(50)));

2579 
TEST
(
AÎOfTe¡
, 
CªDesüibeS–f
) {

2580 
	gM©ch”
<> 
	gm
;

2581 
	gm
 = 
AÎOf
(
Le
(2), 
Ge
(1));

2582 
EXPECT_EQ
("(i <ğ2èªd (i >ğ1)", 
Desüibe
(
m
));

2584 
	gm
 = 
AÎOf
(
Gt
(0), 
Ne
(1), Ne(2));

2585 
	g¡d
::
¡ršg
 
ex³ùed_desü1
 =

2587 
EXPECT_EQ
(
ex³ùed_desü1
, 
Desüibe
(
m
));

2589 
	gm
 = 
AÎOf
(
Gt
(0), 
Ne
(1), Ne(2), Ne(3));

2590 
	g¡d
::
¡ršg
 
ex³ùed_desü2
 =

2593 
EXPECT_EQ
(
ex³ùed_desü2
, 
Desüibe
(
m
));

2595 
	gm
 = 
AÎOf
(
Ge
(0), 
Lt
(10), 
Ne
(3), Ne(5), Ne(7));

2596 
	g¡d
::
¡ršg
 
ex³ùed_desü3
 =

2599 
EXPECT_EQ
(
ex³ùed_desü3
, 
Desüibe
(
m
));

2603 
TEST
(
AÎOfTe¡
, 
CªDesüibeNeg©iÚ
) {

2604 
	gM©ch”
<> 
	gm
;

2605 
	gm
 = 
AÎOf
(
Le
(2), 
Ge
(1));

2606 
	g¡d
::
¡ršg
 
ex³ùed_desü4
 = "(isn't <= 2) or (isn't >= 1)";

2607 
EXPECT_EQ
(
ex³ùed_desü4
, 
DesüibeNeg©iÚ
(
m
));

2609 
	gm
 = 
AÎOf
(
Gt
(0), 
Ne
(1), Ne(2));

2610 
	g¡d
::
¡ršg
 
ex³ùed_desü5
 =

2612 
EXPECT_EQ
(
ex³ùed_desü5
, 
DesüibeNeg©iÚ
(
m
));

2614 
	gm
 = 
AÎOf
(
Gt
(0), 
Ne
(1), Ne(2), Ne(3));

2615 
	g¡d
::
¡ršg
 
ex³ùed_desü6
 =

2617 
EXPECT_EQ
(
ex³ùed_desü6
, 
DesüibeNeg©iÚ
(
m
));

2619 
	gm
 = 
AÎOf
(
Ge
(0), 
Lt
(10), 
Ne
(3), Ne(5), Ne(7));

2620 
	g¡d
::
¡ršg
 
ex³ùed_de¤7
 =

2623 
EXPECT_EQ
(
ex³ùed_de¤7
, 
DesüibeNeg©iÚ
(
m
));

2625 
	gm
 = 
AÎOf
(
Ne
(1), Ne(2), Ne(3), Ne(4), Ne(5), Ne(6), Ne(7), Ne(8), Ne(9),

2626 
Ne
(10), Ne(11));

2627 
AÎOf
(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11);

2628 
EXPECT_THAT
(
Desüibe
(
m
), 
EndsW™h
("and (isn'tƒqualo 11)"));

2629 
AÎOfM©ches
(11, 
m
);

2633 
TEST
(
AÎOfTe¡
, 
AÎOfM©ch”SaãlyCa¡sMÚomÜphicM©ch”s
) {

2635 
	gM©ch”
<> 
	gg»©”_thª_5
 = 
Gt
(5);

2636 
	gM©ch”
<> 
	gËss_thª_10
 = 
Lt
(10);

2638 
	gM©ch”
<cÚ¡ &> 
	gm
 = 
AÎOf
(
g»©”_thª_5
, 
Ëss_thª_10
);

2639 
	gM©ch”
<&> 
	gm2
 = 
AÎOf
(
g»©”_thª_5
, 
Ëss_thª_10
);

2640 
	gM©ch”
<&> 
	gm3
 = 
AÎOf
(
g»©”_thª_5
, 
m2
);

2643 
	gM©ch”
<cÚ¡ &> 
	gm4
 = 
AÎOf
(
g»©”_thª_5
, 
Ëss_thª_10
,†ess_than_10);

2644 
	gM©ch”
<&> 
	gm5
 = 
AÎOf
(
g»©”_thª_5
, 
Ëss_thª_10
,†ess_than_10);

2647 
TEST
(
AÎOfTe¡
, 
Ex¶ašsResuÉ
) {

2648 
	gM©ch”
<> 
	gm
;

2653 
	gm
 = 
AÎOf
(
G»©”Thª
(10), 
Lt
(30));

2654 
EXPECT_EQ
("which i 15 mÜthª 10", 
Ex¶aš
(
m
, 25));

2657 
	gm
 = 
AÎOf
(
G»©”Thª
(10), GreaterThan(20));

2658 
EXPECT_EQ
("which is 20 morehan 10,‡nd which is 10 morehan 20",

2659 
Ex¶aš
(
m
, 30));

2663 
	gm
 = 
AÎOf
(
G»©”Thª
(10), 
Lt
(30), GreaterThan(20));

2664 
EXPECT_EQ
("which is 15 morehan 10,‡nd which is 5 morehan 20",

2665 
Ex¶aš
(
m
, 25));

2668 
	gm
 = 
AÎOf
(
G»©”Thª
(10), GreaterThan(20), GreaterThan(30));

2669 
EXPECT_EQ
("which is 30 morehan 10,‡nd which is 20 morehan 20, "

2671 
Ex¶aš
(
m
, 40));

2675 
	gm
 = 
AÎOf
(
G»©”Thª
(10), GreaterThan(20));

2676 
EXPECT_EQ
("which i 5†es thª 10", 
Ex¶aš
(
m
, 5));

2681 
	gm
 = 
AÎOf
(
G»©”Thª
(10), 
Lt
(30));

2682 
EXPECT_EQ
("", 
Ex¶aš
(
m
, 40));

2686 
	gm
 = 
AÎOf
(
G»©”Thª
(10), GreaterThan(20));

2687 
EXPECT_EQ
("which i 5†es thª 20", 
Ex¶aš
(
m
, 15));

2691 
AnyOfM©ches
(
num
, cÚ¡ 
M©ch”
<>& 
m
) {

2692 
SCOPED_TRACE
(
Desüibe
(
m
));

2693 
EXPECT_FALSE
(
m
.
M©ches
(0));

2694 
	gi
 = 1; i <ğ
num
; ++i) {

2695 
EXPECT_TRUE
(
m
.
M©ches
(
i
));

2697 
EXPECT_FALSE
(
m
.
M©ches
(
num
 + 1));

2700 
AnyOfSŒšgM©ches
(
num
, cÚ¡ 
M©ch”
<
¡d
::
¡ršg
>& 
m
) {

2701 
SCOPED_TRACE
(
Desüibe
(
m
));

2702 
EXPECT_FALSE
(
m
.
M©ches
(
¡d
::
to_¡ršg
(0)));

2704 
	gi
 = 1; i <ğ
num
; ++i) {

2705 
EXPECT_TRUE
(
m
.
M©ches
(
¡d
::
to_¡ršg
(
i
)));

2707 
EXPECT_FALSE
(
m
.
M©ches
(
¡d
::
to_¡ršg
(
num
 + 1)));

2712 
TEST
(
AnyOfTe¡
, 
M©chesWh’AnyM©ches
) {

2713 
	gM©ch”
<> 
	gm
;

2714 
	gm
 = 
AnyOf
(
Le
(1), 
Ge
(3));

2715 
EXPECT_TRUE
(
m
.
M©ches
(1));

2716 
EXPECT_TRUE
(
m
.
M©ches
(4));

2717 
EXPECT_FALSE
(
m
.
M©ches
(2));

2719 
	gm
 = 
AnyOf
(
Lt
(0), 
Eq
(1), Eq(2));

2720 
EXPECT_TRUE
(
m
.
M©ches
(-1));

2721 
EXPECT_TRUE
(
m
.
M©ches
(1));

2722 
EXPECT_TRUE
(
m
.
M©ches
(2));

2723 
EXPECT_FALSE
(
m
.
M©ches
(0));

2725 
	gm
 = 
AnyOf
(
Lt
(0), 
Eq
(1), Eq(2), Eq(3));

2726 
EXPECT_TRUE
(
m
.
M©ches
(-1));

2727 
EXPECT_TRUE
(
m
.
M©ches
(1));

2728 
EXPECT_TRUE
(
m
.
M©ches
(2));

2729 
EXPECT_TRUE
(
m
.
M©ches
(3));

2730 
EXPECT_FALSE
(
m
.
M©ches
(0));

2732 
	gm
 = 
AnyOf
(
Le
(0), 
Gt
(10), 3, 5, 7);

2733 
EXPECT_TRUE
(
m
.
M©ches
(0));

2734 
EXPECT_TRUE
(
m
.
M©ches
(11));

2735 
EXPECT_TRUE
(
m
.
M©ches
(3));

2736 
EXPECT_FALSE
(
m
.
M©ches
(2));

2742 
AnyOfM©ches
(2, 
AnyOf
(1, 2));

2743 
AnyOfM©ches
(3, 
AnyOf
(1, 2, 3));

2744 
AnyOfM©ches
(4, 
AnyOf
(1, 2, 3, 4));

2745 
AnyOfM©ches
(5, 
AnyOf
(1, 2, 3, 4, 5));

2746 
AnyOfM©ches
(6, 
AnyOf
(1, 2, 3, 4, 5, 6));

2747 
AnyOfM©ches
(7, 
AnyOf
(1, 2, 3, 4, 5, 6, 7));

2748 
AnyOfM©ches
(8, 
AnyOf
(1, 2, 3, 4, 5, 6, 7, 8));

2749 
AnyOfM©ches
(9, 
AnyOf
(1, 2, 3, 4, 5, 6, 7, 8, 9));

2750 
AnyOfM©ches
(10, 
AnyOf
(1, 2, 3, 4, 5, 6, 7, 8, 9, 10));

2754 
TEST
(
AnyOfTe¡
, 
V¬ŸdicM©chesWh’AnyM©ches
) {

2757 
	gM©ch”
<> 
	gm
 = ::
‹¡šg
::
AnyOf
(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11);

2759 
EXPECT_THAT
(
Desüibe
(
m
), 
EndsW™h
("or (isƒqualo 11)"));

2760 
AnyOfM©ches
(11, 
m
);

2761 
AnyOfM©ches
(50, 
AnyOf
(1, 2, 3, 4, 5, 6, 7, 8, 9, 10,

2766 
AnyOfSŒšgM©ches
(

2767 50, 
AnyOf
("1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12",

2775 
TEST
(
EËm’tsA»Te¡
, 
HugeM©ch”
) {

2776 
	gveùÜ
<> 
	g‹¡_veùÜ
{1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12};

2778 
EXPECT_THAT
(
‹¡_veùÜ
,

2779 
EËm’tsA»
(
Eq
(1), Eq(2), 
Lt
(13), Eq(4), Eq(5), Eq(6), Eq(7),

2780 
Eq
(8), Eq(9), Eq(10), 
Gt
(1), Eq(12)));

2784 
TEST
(
EËm’tsA»Te¡
, 
HugeM©ch”SŒ
) {

2785 
	gveùÜ
<
	g¡d
::
¡ršg
> 
‹¡_veùÜ
{

2788 
EXPECT_THAT
(
‹¡_veùÜ
, 
UnÜd”edEËm’tsA»
("l™”®_¡ršg", 
_
, _, _, _, _,

2789 
_
, _, _, _, _, _));

2793 
TEST
(
EËm’tsA»Te¡
, 
HugeM©ch”UnÜd”ed
) {

2794 
	gveùÜ
<> 
	g‹¡_veùÜ
{2, 1, 8, 5, 4, 6, 7, 3, 9, 12, 11, 10};

2796 
EXPECT_THAT
(
‹¡_veùÜ
, 
UnÜd”edEËm’tsA»
(

2797 
Eq
(2), Eq(1), 
Gt
(7), Eq(5), Eq(4), Eq(6), Eq(7),

2798 
Eq
(3), Eq(9), Eq(12), Eq(11), 
Ne
(122)));

2803 
TEST
(
AnyOfTe¡
, 
CªDesüibeS–f
) {

2804 
	gM©ch”
<> 
	gm
;

2805 
	gm
 = 
AnyOf
(
Le
(1), 
Ge
(3));

2807 
EXPECT_EQ
("(is <= 1) or (is >= 3)",

2808 
Desüibe
(
m
));

2810 
	gm
 = 
AnyOf
(
Lt
(0), 
Eq
(1), Eq(2));

2811 
EXPECT_EQ
("(i < 0èÜ (i equ®Ø1èÜ (i equ®Ø2)", 
Desüibe
(
m
));

2813 
	gm
 = 
AnyOf
(
Lt
(0), 
Eq
(1), Eq(2), Eq(3));

2814 
EXPECT_EQ
("(is < 0) or (isƒqualo 1) or (isƒqualo 2) or (isƒqualo 3)",

2815 
Desüibe
(
m
));

2817 
	gm
 = 
AnyOf
(
Le
(0), 
Gt
(10), 3, 5, 7);

2818 
EXPECT_EQ
(

2821 
Desüibe
(
m
));

2825 
TEST
(
AnyOfTe¡
, 
CªDesüibeNeg©iÚ
) {

2826 
	gM©ch”
<> 
	gm
;

2827 
	gm
 = 
AnyOf
(
Le
(1), 
Ge
(3));

2828 
EXPECT_EQ
("(isn't <= 1)‡nd (isn't >= 3)",

2829 
DesüibeNeg©iÚ
(
m
));

2831 
	gm
 = 
AnyOf
(
Lt
(0), 
Eq
(1), Eq(2));

2832 
EXPECT_EQ
("(isn't < 0)‡nd (isn'tƒqualo 1)‡nd (isn'tƒqualo 2)",

2833 
DesüibeNeg©iÚ
(
m
));

2835 
	gm
 = 
AnyOf
(
Lt
(0), 
Eq
(1), Eq(2), Eq(3));

2836 
EXPECT_EQ
(

2839 
DesüibeNeg©iÚ
(
m
));

2841 
	gm
 = 
AnyOf
(
Le
(0), 
Gt
(10), 3, 5, 7);

2842 
EXPECT_EQ
(

2845 
DesüibeNeg©iÚ
(
m
));

2849 
TEST
(
AnyOfTe¡
, 
AnyOfM©ch”SaãlyCa¡sMÚomÜphicM©ch”s
) {

2851 
	gM©ch”
<> 
	gg»©”_thª_5
 = 
Gt
(5);

2852 
	gM©ch”
<> 
	gËss_thª_10
 = 
Lt
(10);

2854 
	gM©ch”
<cÚ¡ &> 
	gm
 = 
AnyOf
(
g»©”_thª_5
, 
Ëss_thª_10
);

2855 
	gM©ch”
<&> 
	gm2
 = 
AnyOf
(
g»©”_thª_5
, 
Ëss_thª_10
);

2856 
	gM©ch”
<&> 
	gm3
 = 
AnyOf
(
g»©”_thª_5
, 
m2
);

2859 
	gM©ch”
<cÚ¡ &> 
	gm4
 = 
AnyOf
(
g»©”_thª_5
, 
Ëss_thª_10
,†ess_than_10);

2860 
	gM©ch”
<&> 
	gm5
 = 
AnyOf
(
g»©”_thª_5
, 
Ëss_thª_10
,†ess_than_10);

2863 
TEST
(
AnyOfTe¡
, 
Ex¶ašsResuÉ
) {

2864 
	gM©ch”
<> 
	gm
;

2869 
	gm
 = 
AnyOf
(
G»©”Thª
(10), 
Lt
(0));

2870 
EXPECT_EQ
("which i 5†es thª 10", 
Ex¶aš
(
m
, 5));

2873 
	gm
 = 
AnyOf
(
G»©”Thª
(10), GreaterThan(20));

2874 
EXPECT_EQ
("which is 5†esshan 10,‡nd which is 15†esshan 20",

2875 
Ex¶aš
(
m
, 5));

2879 
	gm
 = 
AnyOf
(
G»©”Thª
(10), 
Gt
(20), GreaterThan(30));

2880 
EXPECT_EQ
("which is 5†esshan 10,‡nd which is 25†esshan 30",

2881 
Ex¶aš
(
m
, 5));

2884 
	gm
 = 
AnyOf
(
G»©”Thª
(10), GreaterThan(20), GreaterThan(30));

2885 
EXPECT_EQ
("which is 5†esshan 10,‡nd which is 15†esshan 20, "

2887 
Ex¶aš
(
m
, 5));

2891 
	gm
 = 
AnyOf
(
G»©”Thª
(10), GreaterThan(20));

2892 
EXPECT_EQ
("which i 5 mÜthª 10", 
Ex¶aš
(
m
, 15));

2897 
	gm
 = 
AnyOf
(
G»©”Thª
(10), 
Lt
(30));

2898 
EXPECT_EQ
("", 
Ex¶aš
(
m
, 0));

2902 
	gm
 = 
AnyOf
(
G»©”Thª
(30), GreaterThan(20));

2903 
EXPECT_EQ
("which i 5 mÜthª 20", 
Ex¶aš
(
m
, 25));

2913 
IsPos™ive
(
x
) {

2914  
	gx
 > 0 ? 1 : 0;

2919 şas 
	cIsG»©”Thª
 {

2920 
	gpublic
:

2921 
ex¶ic™
 
IsG»©”Thª
(
th»shŞd
è: 
th»shŞd_
(threshold) {}

2923 
boŞ
 
İ”©Ü
()(
n
ècÚ¡ { ‚ > 
th»shŞd_
; }

2925 
	g´iv©e
:

2926 
th»shŞd_
;

2930 cÚ¡ 
	gfoo
 = 0;

2934 
boŞ
 
Reã»nûsFooAndIsZ”o
(cÚ¡ & 
n
) {

2935  (&
	gn
 =ğ&
foo
è&& (
n
 == 0);

2940 
TEST
(
TrulyTe¡
, 
M©chesWh©S©isf›sTheP»diÿ‹
) {

2941 
	gM©ch”
<> 
	gm
 = 
Truly
(
IsPos™ive
);

2942 
EXPECT_TRUE
(
m
.
M©ches
(2.0));

2943 
EXPECT_FALSE
(
m
.
M©ches
(-1.5));

2947 
TEST
(
TrulyTe¡
, 
CªBeU£dW™hFunùÜ
) {

2948 
	gM©ch”
<> 
	gm
 = 
Truly
(
IsG»©”Thª
(5));

2949 
EXPECT_TRUE
(
m
.
M©ches
(6));

2950 
EXPECT_FALSE
(
m
.
M©ches
(4));

2954 şas 
	cCÚv”tibËToBoŞ
 {

2955 
	gpublic
:

2956 
ex¶ic™
 
CÚv”tibËToBoŞ
(
numb”
è: 
numb”_
(number) {}

2957 
İ”©Ü
 
boŞ
(ècÚ¡ {  
numb”_
 != 0; }

2959 
	g´iv©e
:

2960 
numb”_
;

2963 
CÚv”tibËToBoŞ
 
IsNÙZ”o
(
numb”
) {

2964  
CÚv”tibËToBoŞ
(
numb”
);

2970 
TEST
(
TrulyTe¡
, 
P»diÿ‹CªR‘uºACÏssCÚv”tibËToBoŞ
) {

2971 
	gM©ch”
<> 
	gm
 = 
Truly
(
IsNÙZ”o
);

2972 
EXPECT_TRUE
(
m
.
M©ches
(1));

2973 
EXPECT_FALSE
(
m
.
M©ches
(0));

2977 
TEST
(
TrulyTe¡
, 
CªDesüibeS–f
) {

2978 
	gM©ch”
<> 
	gm
 = 
Truly
(
IsPos™ive
);

2979 
EXPECT_EQ
("satisfieshe given…redicate",

2980 
Desüibe
(
m
));

2985 
TEST
(
TrulyTe¡
, 
WÜksFÜByRefArgum’ts
) {

2986 
	gM©ch”
<cÚ¡ &> 
	gm
 = 
Truly
(
Reã»nûsFooAndIsZ”o
);

2987 
EXPECT_TRUE
(
m
.
M©ches
(
foo
));

2988 
	gn
 = 0;

2989 
EXPECT_FALSE
(
m
.
M©ches
(
n
));

2993 
TEST
(
TrulyTe¡
, 
Ex¶ašsFau»s
) {

2994 
SŒšgM©chResuÉLi¡’”
 
	gli¡’”
;

2995 
EXPECT_FALSE
(
Ex¶ašM©chResuÉ
(
Truly
(
IsPos™ive
), -1, &
li¡’”
));

2996 
EXPECT_EQ
(
li¡’”
.
¡r
(), "didn't satisfyhe given…redicate");

3001 
TEST
(
M©chesTe¡
, 
IsS©isf›dByWh©M©chesTheM©ch”
) {

3002 
EXPECT_TRUE
(
M©ches
(
Ge
(0))(1));

3003 
EXPECT_FALSE
(
M©ches
(
Eq
('a'))('b'));

3008 
TEST
(
M©chesTe¡
, 
WÜksOnByRefArgum’ts
) {

3009 
	gm
 = 0, 
	gn
 = 0;

3010 
EXPECT_TRUE
(
M©ches
(
AÎOf
(
Ref
(
n
), 
Eq
(0)))(n));

3011 
EXPECT_FALSE
(
M©ches
(
Ref
(
m
))(
n
));

3016 
TEST
(
M©chesTe¡
, 
WÜksW™hM©ch”OnNÚRefTy³
) {

3017 
	gM©ch”
<> 
	geq5
 = 
Eq
(5);

3018 
EXPECT_TRUE
(
M©ches
(
eq5
)(5));

3019 
EXPECT_FALSE
(
M©ches
(
eq5
)(2));

3025 
TEST
(
V®ueTe¡
, 
WÜksW™hPŞymÜphicM©ch”
) {

3026 
EXPECT_TRUE
(
V®ue
("hi", 
S¹sW™h
("h")));

3027 
EXPECT_FALSE
(
V®ue
(5, 
Gt
(10)));

3030 
TEST
(
V®ueTe¡
, 
WÜksW™hMÚomÜphicM©ch”
) {

3031 cÚ¡ 
	gM©ch”
<> 
	gis_z”o
 = 
Eq
(0);

3032 
EXPECT_TRUE
(
V®ue
(0, 
is_z”o
));

3033 
EXPECT_FALSE
(
V®ue
('a', 
is_z”o
));

3035 
	gn
 = 0;

3036 cÚ¡ 
	gM©ch”
<cÚ¡ &> 
	g»f_n
 = 
Ref
(
n
);

3037 
EXPECT_TRUE
(
V®ue
(
n
, 
»f_n
));

3038 
EXPECT_FALSE
(
V®ue
(1, 
»f_n
));

3041 
TEST
(
Ex¶ašM©chResuÉTe¡
, 
WÜksW™hPŞymÜphicM©ch”
) {

3042 
SŒšgM©chResuÉLi¡’”
 
	gli¡’”1
;

3043 
EXPECT_TRUE
(
Ex¶ašM©chResuÉ
(
PŞymÜphicIsEv’
(), 42, &
li¡’”1
));

3044 
EXPECT_EQ
("% 2 =ğ0", 
li¡’”1
.
¡r
());

3046 
SŒšgM©chResuÉLi¡’”
 
	gli¡’”2
;

3047 
EXPECT_FALSE
(
Ex¶ašM©chResuÉ
(
Ge
(42), 1.5, &
li¡’”2
));

3048 
EXPECT_EQ
("", 
li¡’”2
.
¡r
());

3051 
TEST
(
Ex¶ašM©chResuÉTe¡
, 
WÜksW™hMÚomÜphicM©ch”
) {

3052 cÚ¡ 
	gM©ch”
<> 
	gis_ev’
 = 
PŞymÜphicIsEv’
();

3053 
SŒšgM©chResuÉLi¡’”
 
	gli¡’”1
;

3054 
EXPECT_TRUE
(
Ex¶ašM©chResuÉ
(
is_ev’
, 42, &
li¡’”1
));

3055 
EXPECT_EQ
("% 2 =ğ0", 
li¡’”1
.
¡r
());

3057 cÚ¡ 
	gM©ch”
<cÚ¡ &> 
	gis_z”o
 = 
Eq
(0);

3058 
SŒšgM©chResuÉLi¡’”
 
	gli¡’”2
;

3059 
EXPECT_FALSE
(
Ex¶ašM©chResuÉ
(
is_z”o
, 1.5, &
li¡’”2
));

3060 
EXPECT_EQ
("", 
li¡’”2
.
¡r
());

3063 
MATCHER
(
CÚ¡ruùNoArg
, ""è{  
	gŒue
; }

3064 
MATCHER_P
(
CÚ¡ruù1Arg
, 
¬g1
, ""è{  
	gŒue
; }

3065 
MATCHER_P2
(
CÚ¡ruù2Args
, 
¬g1
, 
¬g2
, ""è{  
	gŒue
; }

3067 
TEST
(
M©ch”CÚ¡ruù
, 
Ex¶ic™VsIm¶ic™
) {

3070 
CÚ¡ruùNoArgM©ch”
 
	gm
 = {};

3071 ()
	gm
;

3073 
CÚ¡ruùNoArgM©ch”
 
	gm2
;

3074 ()
	gm2
;

3079 
usšg
 
	gM
 = 
CÚ¡ruù1ArgM©ch”P
<>;

3080 
EXPECT_TRUE
((
¡d
::
is_cÚ¡ruùibË
<
M
, >::
v®ue
));

3081 
EXPECT_FALSE
((
¡d
::
is_cÚv”tibË
<, 
M
>::
v®ue
));

3085 
	gCÚ¡ruù2ArgsM©ch”P2
<, > 
	gm
 = {1, 2.2};

3086 ()
	gm
;

3090 
MATCHER_P
(
R—Îy
, 
šÃr_m©ch”
, "") {

3091  
Ex¶ašM©chResuÉ
(
šÃr_m©ch”
, 
¬g
, 
»suÉ_li¡’”
);

3094 
TEST
(
Ex¶ašM©chResuÉTe¡
, 
WÜksInsideMATCHER
) {

3095 
EXPECT_THAT
(0, 
R—Îy
(
Eq
(0)));

3098 
TEST
(
DesüibeM©ch”Te¡
, 
WÜksW™hV®ue
) {

3099 
EXPECT_EQ
("i equ®Ø42", 
DesüibeM©ch”
<>(42));

3100 
EXPECT_EQ
("i¢'ˆequ®Ø42", 
DesüibeM©ch”
<>(42, 
Œue
));

3103 
TEST
(
DesüibeM©ch”Te¡
, 
WÜksW™hMÚomÜphicM©ch”
) {

3104 cÚ¡ 
	gM©ch”
<> 
	gmÚomÜphic
 = 
Le
(0);

3105 
EXPECT_EQ
("i <ğ0", 
DesüibeM©ch”
<>(
mÚomÜphic
));

3106 
EXPECT_EQ
("i¢'ˆ<ğ0", 
DesüibeM©ch”
<>(
mÚomÜphic
, 
Œue
));

3109 
TEST
(
DesüibeM©ch”Te¡
, 
WÜksW™hPŞymÜphicM©ch”
) {

3110 
EXPECT_EQ
("i ev’", 
DesüibeM©ch”
<>(
PŞymÜphicIsEv’
()));

3111 
EXPECT_EQ
("i odd", 
DesüibeM©ch”
<>(
PŞymÜphicIsEv’
(), 
Œue
));

3114 
TEST
(
AÎArgsTe¡
, 
WÜksFÜTu¶e
) {

3115 
EXPECT_THAT
(
¡d
::
make_tu¶e
(1, 2L), 
AÎArgs
(
Lt
()));

3116 
EXPECT_THAT
(
¡d
::
make_tu¶e
(2L, 1), 
NÙ
(
AÎArgs
(
Lt
())));

3119 
TEST
(
AÎArgsTe¡
, 
WÜksFÜNÚTu¶e
) {

3120 
EXPECT_THAT
(42, 
AÎArgs
(
Gt
(0)));

3121 
EXPECT_THAT
('a', 
NÙ
(
AÎArgs
(
Eq
('b'))));

3124 şas 
	cAÎArgsH–³r
 {

3125 
	gpublic
:

3126 
AÎArgsH–³r
() {}

3128 
MOCK_METHOD2
(
H–³r
, (
x
, 
y
));

3130 
	g´iv©e
:

3131 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
AÎArgsH–³r
);

3134 
TEST
(
AÎArgsTe¡
, 
WÜksInW™hCÏu£
) {

3135 
AÎArgsH–³r
 
	gh–³r
;

3136 
ON_CALL
(
h–³r
, 
H–³r
(
_
, _))

3137 .
W™h
(
AÎArgs
(
Lt
()))

3138 .
WlByDeçuÉ
(
R‘uº
(1));

3139 
EXPECT_CALL
(
h–³r
, 
H–³r
(
_
, _));

3140 
EXPECT_CALL
(
h–³r
, 
H–³r
(
_
, _))

3141 .
W™h
(
AÎArgs
(
Gt
()))

3142 .
WlOnû
(
R‘uº
(2));

3144 
EXPECT_EQ
(1, 
h–³r
.
H–³r
('\1', 2));

3145 
EXPECT_EQ
(2, 
h–³r
.
H–³r
('a', 1));

3148 şas 
	cO±iÚ®M©ch”sH–³r
 {

3149 
	gpublic
:

3150 
O±iÚ®M©ch”sH–³r
() {}

3152 
MOCK_METHOD0
(
NoArgs
, ());

3154 
MOCK_METHOD1
(
OÃArg
, (
y
));

3156 
MOCK_METHOD2
(
TwoArgs
, (
x
, 
y
));

3158 
MOCK_METHOD1
(
Ov”lßded
, (
x
));

3159 
MOCK_METHOD2
(
Ov”lßded
, (
x
, 
y
));

3161 
	g´iv©e
:

3162 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
O±iÚ®M©ch”sH–³r
);

3165 
TEST
(
AÎArgsTe¡
, 
WÜksW™houtM©ch”s
) {

3166 
O±iÚ®M©ch”sH–³r
 
	gh–³r
;

3168 
ON_CALL
(
h–³r
, 
NoArgs
).
WlByDeçuÉ
(
R‘uº
(10));

3169 
ON_CALL
(
h–³r
, 
OÃArg
).
WlByDeçuÉ
(
R‘uº
(20));

3170 
ON_CALL
(
h–³r
, 
TwoArgs
).
WlByDeçuÉ
(
R‘uº
(30));

3172 
EXPECT_EQ
(10, 
h–³r
.
NoArgs
());

3173 
EXPECT_EQ
(20, 
h–³r
.
OÃArg
(1));

3174 
EXPECT_EQ
(30, 
h–³r
.
TwoArgs
('\1', 2));

3176 
EXPECT_CALL
(
h–³r
, 
NoArgs
).
Times
(1);

3177 
EXPECT_CALL
(
h–³r
, 
OÃArg
).
WlOnû
(
R‘uº
(100));

3178 
EXPECT_CALL
(
h–³r
, 
OÃArg
(17)).
WlOnû
(
R‘uº
(200));

3179 
EXPECT_CALL
(
h–³r
, 
TwoArgs
).
Times
(0);

3181 
EXPECT_EQ
(10, 
h–³r
.
NoArgs
());

3182 
EXPECT_EQ
(100, 
h–³r
.
OÃArg
(1));

3183 
EXPECT_EQ
(200, 
h–³r
.
OÃArg
(17));

3188 
TEST
(
M©ch”As£¹iÚTe¡
, 
WÜksWh’M©ch”IsS©isf›d
) {

3189 
ASSERT_THAT
(5, 
Ge
(2)) << "This should succeed.";

3190 
ASSERT_THAT
("Foo", 
EndsW™h
("oo"));

3191 
EXPECT_THAT
(2, 
AÎOf
(
Le
(7), 
Ge
(0))) << "This should succeedoo.";

3192 
EXPECT_THAT
("H–lo", 
S¹sW™h
("Hell"));

3197 
TEST
(
M©ch”As£¹iÚTe¡
, 
WÜksWh’M©ch”IsNÙS©isf›d
) {

3200 
	gn
;

3201 
	gn
 = 5;

3203 
EXPECT_FATAL_FAILURE
(
ASSERT_THAT
(
n
, 
Gt
(10)),

3206 " Aùu®: 5" + 
OfTy³
("unsigned short"));

3207 
	gn
 = 0;

3208 
EXPECT_NONFATAL_FAILURE
(

3209 
EXPECT_THAT
(
n
, 
AÎOf
(
Le
(7), 
Ge
(5))),

3212 " Aùu®: 0" + 
OfTy³
("unsigned short"));

3217 
TEST
(
M©ch”As£¹iÚTe¡
, 
WÜksFÜByRefArgum’ts
) {

3220 
	gn
;

3221 
	gn
 = 0;

3222 
EXPECT_THAT
(
n
, 
AÎOf
(
Le
(7), 
Ref
(n)));

3223 
EXPECT_FATAL_FAILURE
(
ASSERT_THAT
(
n
, 
NÙ
(
Ref
(n))),

3227 
EXPECT_FATAL_FAILURE
(
ASSERT_THAT
(
n
, 
NÙ
(
Ref
(n))),

3228 "Aùu®: 0" + 
OfTy³
("int") + ", which is†ocated @");

3233 
TEST
(
M©ch”As£¹iÚTe¡
, 
WÜksFÜMÚomÜphicM©ch”
) {

3234 
	gM©ch”
<cÚ¡ *> 
	g¡¬ts_w™h_he
 = 
S¹sW™h
("he");

3235 
ASSERT_THAT
("h–lo", 
¡¬ts_w™h_he
);

3237 
	gM©ch”
<cÚ¡ 
	g¡d
::
¡ršg
&> 
’ds_w™h_ok
 = 
EndsW™h
("ok");

3238 
ASSERT_THAT
("book", 
’ds_w™h_ok
);

3239 cÚ¡ 
	g¡d
::
¡ršg
 
bad
 = "bad";

3240 
EXPECT_NONFATAL_FAILURE
(
EXPECT_THAT
(
bad
, 
’ds_w™h_ok
),

3244 
	gM©ch”
<> 
	gis_g»©”_thª_5
 = 
Gt
(5);

3245 
EXPECT_NONFATAL_FAILURE
(
EXPECT_THAT
(5, 
is_g»©”_thª_5
),

3248 " Aùu®: 5" + 
OfTy³
("int"));

3252 
	g‹m¶©e
 <
ty³Çme
 
	gRawTy³
>

3253 şas 
	cFlßtšgPoštTe¡
 : 
public
 
‹¡šg
::
Te¡
 {

3254 
´Ùeùed
:

3255 
‹¡šg
::
	tš‹º®
::
	tFlßtšgPošt
<
	tRawTy³
> 
	tFlßtšg
;

3256 
ty³Çme
 
	tFlßtšg
::
	tB™s
 Bits;

3258 
FlßtšgPoštTe¡
()

3259 : 
max_uÍs_
(
Flßtšg
::
kMaxUÍs
),

3260 
z”o_b™s_
(
Flßtšg
(0).
b™s
()),

3261 
Úe_b™s_
(
Flßtšg
(1).
b™s
()),

3262 
šfš™y_b™s_
(
Flßtšg
(Flßtšg::
Infš™y
()).
b™s
()),

3263 
şo£_to_pos™ive_z”o_
(

3264 
Flßtšg
::
Reš‹½»tB™s
(
z”o_b™s_
 + 
max_uÍs_
/2)),

3265 
şo£_to_Ãg©ive_z”o_
(

3266 -
Flßtšg
::
Reš‹½»tB™s
(
z”o_b™s_
 + 
max_uÍs_
 - max_ulps_/2)),

3267 
fu¹h”_äom_Ãg©ive_z”o_
(-
Flßtšg
::
Reš‹½»tB™s
(

3268 
z”o_b™s_
 + 
max_uÍs_
 + 1 - max_ulps_/2)),

3269 
şo£_to_Úe_
(
Flßtšg
::
Reš‹½»tB™s
(
Úe_b™s_
 + 
max_uÍs_
)),

3270 
fu¹h”_äom_Úe_
(
Flßtšg
::
Reš‹½»tB™s
(
Úe_b™s_
 + 
max_uÍs_
 + 1)),

3271 
šfš™y_
(
Flßtšg
::
Infš™y
()),

3272 
şo£_to_šfš™y_
(

3273 
Flßtšg
::
Reš‹½»tB™s
(
šfš™y_b™s_
 - 
max_uÍs_
)),

3274 
fu¹h”_äom_šfš™y_
(

3275 
Flßtšg
::
Reš‹½»tB™s
(
šfš™y_b™s_
 - 
max_uÍs_
 - 1)),

3276 
max_
(
Flßtšg
::
Max
()),

3277 
Çn1_
(
Flßtšg
::
Reš‹½»tB™s
(Flßtšg::
kExpÚ’tB™Mask
 | 1)),

3278 
Çn2_
(
Flßtšg
::
Reš‹½»tB™s
(Flßtšg::
kExpÚ’tB™Mask
 | 200)) {

3281 
Te¡Size
() {

3282 
EXPECT_EQ
((
RawTy³
), (
B™s
));

3287 
Te¡M©ches
(

3288 
‹¡šg
::
š‹º®
::
FlßtšgEqM©ch”
<
RawTy³
> (*
m©ch”_mak”
)(RawType)) {

3289 
M©ch”
<
RawTy³
> 
m1
 = 
m©ch”_mak”
(0.0);

3290 
EXPECT_TRUE
(
m1
.
M©ches
(-0.0));

3291 
EXPECT_TRUE
(
m1
.
M©ches
(
şo£_to_pos™ive_z”o_
));

3292 
EXPECT_TRUE
(
m1
.
M©ches
(
şo£_to_Ãg©ive_z”o_
));

3293 
EXPECT_FALSE
(
m1
.
M©ches
(1.0));

3295 
	gM©ch”
<
	gRawTy³
> 
	gm2
 = 
m©ch”_mak”
(
şo£_to_pos™ive_z”o_
);

3296 
EXPECT_FALSE
(
m2
.
M©ches
(
fu¹h”_äom_Ãg©ive_z”o_
));

3298 
	gM©ch”
<
	gRawTy³
> 
	gm3
 = 
m©ch”_mak”
(1.0);

3299 
EXPECT_TRUE
(
m3
.
M©ches
(
şo£_to_Úe_
));

3300 
EXPECT_FALSE
(
m3
.
M©ches
(
fu¹h”_äom_Úe_
));

3303 
EXPECT_FALSE
(
m3
.
M©ches
(0.0));

3305 
	gM©ch”
<
	gRawTy³
> 
	gm4
 = 
m©ch”_mak”
(-
šfš™y_
);

3306 
EXPECT_TRUE
(
m4
.
M©ches
(-
şo£_to_šfš™y_
));

3308 
	gM©ch”
<
	gRawTy³
> 
	gm5
 = 
m©ch”_mak”
(
šfš™y_
);

3309 
EXPECT_TRUE
(
m5
.
M©ches
(
şo£_to_šfš™y_
));

3313 
EXPECT_FALSE
(
m5
.
M©ches
(
Çn1_
));

3317 
	gM©ch”
<cÚ¡ 
	gRawTy³
&> 
	gm6
 = 
m©ch”_mak”
(0.0);

3318 
EXPECT_TRUE
(
m6
.
M©ches
(-0.0));

3319 
EXPECT_TRUE
(
m6
.
M©ches
(
şo£_to_pos™ive_z”o_
));

3320 
EXPECT_FALSE
(
m6
.
M©ches
(1.0));

3324 
	gM©ch”
<
	gRawTy³
&> 
	gm7
 = 
m©ch”_mak”
(0.0);

3325 
RawTy³
 
	gx
 = 0.0;

3326 
EXPECT_TRUE
(
m7
.
M©ches
(
x
));

3327 
	gx
 = 0.01f;

3328 
EXPECT_FALSE
(
m7
.
M©ches
(
x
));

3333 cÚ¡ 
B™s
 
	gmax_uÍs_
;

3335 cÚ¡ 
B™s
 
	gz”o_b™s_
;

3336 cÚ¡ 
B™s
 
	gÚe_b™s_
;

3337 cÚ¡ 
B™s
 
	gšfš™y_b™s_
;

3340 cÚ¡ 
RawTy³
 
	gşo£_to_pos™ive_z”o_
;

3341 cÚ¡ 
RawTy³
 
	gşo£_to_Ãg©ive_z”o_
;

3342 cÚ¡ 
RawTy³
 
	gfu¹h”_äom_Ãg©ive_z”o_
;

3345 cÚ¡ 
RawTy³
 
	gşo£_to_Úe_
;

3346 cÚ¡ 
RawTy³
 
	gfu¹h”_äom_Úe_
;

3349 cÚ¡ 
RawTy³
 
	gšfš™y_
;

3350 cÚ¡ 
RawTy³
 
	gşo£_to_šfš™y_
;

3351 cÚ¡ 
RawTy³
 
	gfu¹h”_äom_šfš™y_
;

3354 cÚ¡ 
RawTy³
 
	gmax_
;

3357 cÚ¡ 
RawTy³
 
	gÇn1_
;

3358 cÚ¡ 
RawTy³
 
	gÇn2_
;

3362 
	g‹m¶©e
 <
ty³Çme
 
	gRawTy³
>

3363 
şass
 
	gFlßtšgPoštN—rTe¡
 : 
public
 
FlßtšgPoštTe¡
<
RawTy³
> {

3364 
´Ùeùed
:

3365 
FlßtšgPoštTe¡
<
	tRawTy³
> 
	tP¬’tTy³
;

3369 
Te¡N—rM©ches
(

3370 
‹¡šg
::
š‹º®
::
FlßtšgEqM©ch”
<
RawTy³
>

3371 (*
m©ch”_mak”
)(
RawTy³
, RawType)) {

3372 
	gM©ch”
<
	gRawTy³
> 
	gm1
 = 
m©ch”_mak”
(0.0, 0.0);

3373 
EXPECT_TRUE
(
m1
.
M©ches
(0.0));

3374 
EXPECT_TRUE
(
m1
.
M©ches
(-0.0));

3375 
EXPECT_FALSE
(
m1
.
M©ches
(
P¬’tTy³
::
şo£_to_pos™ive_z”o_
));

3376 
EXPECT_FALSE
(
m1
.
M©ches
(
P¬’tTy³
::
şo£_to_Ãg©ive_z”o_
));

3377 
EXPECT_FALSE
(
m1
.
M©ches
(1.0));

3379 
	gM©ch”
<
	gRawTy³
> 
	gm2
 = 
m©ch”_mak”
(0.0, 1.0);

3380 
EXPECT_TRUE
(
m2
.
M©ches
(0.0));

3381 
EXPECT_TRUE
(
m2
.
M©ches
(-0.0));

3382 
EXPECT_TRUE
(
m2
.
M©ches
(1.0));

3383 
EXPECT_TRUE
(
m2
.
M©ches
(-1.0));

3384 
EXPECT_FALSE
(
m2
.
M©ches
(
P¬’tTy³
::
şo£_to_Úe_
));

3385 
EXPECT_FALSE
(
m2
.
M©ches
(-
P¬’tTy³
::
şo£_to_Úe_
));

3389 
	gM©ch”
<
	gRawTy³
> 
	gm3
 = 
m©ch”_mak”
(
P¬’tTy³
::
šfš™y_
, 0.0);

3390 
EXPECT_TRUE
(
m3
.
M©ches
(
P¬’tTy³
::
šfš™y_
));

3391 
EXPECT_FALSE
(
m3
.
M©ches
(
P¬’tTy³
::
şo£_to_šfš™y_
));

3392 
EXPECT_FALSE
(
m3
.
M©ches
(-
P¬’tTy³
::
šfš™y_
));

3394 
	gM©ch”
<
	gRawTy³
> 
	gm4
 = 
m©ch”_mak”
(-
P¬’tTy³
::
šfš™y_
, 0.0);

3395 
EXPECT_TRUE
(
m4
.
M©ches
(-
P¬’tTy³
::
šfš™y_
));

3396 
EXPECT_FALSE
(
m4
.
M©ches
(-
P¬’tTy³
::
şo£_to_šfš™y_
));

3397 
EXPECT_FALSE
(
m4
.
M©ches
(
P¬’tTy³
::
šfš™y_
));

3400 
	gM©ch”
<
	gRawTy³
> 
	gm5
 = 
m©ch”_mak”
(
P¬’tTy³
::
max_
, ParentType::max_);

3401 
EXPECT_TRUE
(
m5
.
M©ches
(
P¬’tTy³
::
max_
));

3402 
EXPECT_FALSE
(
m5
.
M©ches
(-
P¬’tTy³
::
max_
));

3404 
	gM©ch”
<
	gRawTy³
> 
	gm6
 = 
m©ch”_mak”
(-
P¬’tTy³
::
max_
, ParentType::max_);

3405 
EXPECT_FALSE
(
m6
.
M©ches
(
P¬’tTy³
::
max_
));

3406 
EXPECT_TRUE
(
m6
.
M©ches
(-
P¬’tTy³
::
max_
));

3408 
	gM©ch”
<
	gRawTy³
> 
	gm7
 = 
m©ch”_mak”
(
P¬’tTy³
::
max_
, 0);

3409 
EXPECT_TRUE
(
m7
.
M©ches
(
P¬’tTy³
::
max_
));

3410 
EXPECT_FALSE
(
m7
.
M©ches
(-
P¬’tTy³
::
max_
));

3412 
	gM©ch”
<
	gRawTy³
> 
	gm8
 = 
m©ch”_mak”
(-
P¬’tTy³
::
max_
, 0);

3413 
EXPECT_FALSE
(
m8
.
M©ches
(
P¬’tTy³
::
max_
));

3414 
EXPECT_TRUE
(
m8
.
M©ches
(-
P¬’tTy³
::
max_
));

3418 
	gM©ch”
<
	gRawTy³
> 
	gm9
 = 
m©ch”_mak”
(

3419 
P¬’tTy³
::
max_
, P¬’tTy³::
šfš™y_
);

3420 
EXPECT_TRUE
(
m8
.
M©ches
(-
P¬’tTy³
::
max_
));

3424 
	gM©ch”
<cÚ¡ 
	gRawTy³
&> 
	gm10
 = 
m©ch”_mak”
(0.0, 1.0);

3425 
EXPECT_TRUE
(
m10
.
M©ches
(-0.0));

3426 
EXPECT_TRUE
(
m10
.
M©ches
(
P¬’tTy³
::
şo£_to_pos™ive_z”o_
));

3427 
EXPECT_FALSE
(
m10
.
M©ches
(
P¬’tTy³
::
şo£_to_Úe_
));

3431 
	gM©ch”
<
	gRawTy³
&> 
	gm11
 = 
m©ch”_mak”
(0.0, 1.0);

3432 
RawTy³
 
	gx
 = 0.0;

3433 
EXPECT_TRUE
(
m11
.
M©ches
(
x
));

3434 
	gx
 = 1.0f;

3435 
EXPECT_TRUE
(
m11
.
M©ches
(
x
));

3436 
	gx
 = -1.0f;

3437 
EXPECT_TRUE
(
m11
.
M©ches
(
x
));

3438 
	gx
 = 1.1f;

3439 
EXPECT_FALSE
(
m11
.
M©ches
(
x
));

3440 
	gx
 = -1.1f;

3441 
EXPECT_FALSE
(
m11
.
M©ches
(
x
));

3446 
	gFlßtšgPoštTe¡
<> 
	tFlßtTe¡
;

3448 
TEST_F
(
FlßtTe¡
, 
FlßtEqAµroxim©–yM©chesFlßts
) {

3449 
Te¡M©ches
(&
FlßtEq
);

3452 
TEST_F
(
FlßtTe¡
, 
NªS’s™iveFlßtEqAµroxim©–yM©chesFlßts
) {

3453 
Te¡M©ches
(&
NªS’s™iveFlßtEq
);

3456 
TEST_F
(
FlßtTe¡
, 
FlßtEqCªnÙM©chNaN
) {

3458 
	gM©ch”
<> 
	gm
 = 
FlßtEq
(
Çn1_
);

3459 
EXPECT_FALSE
(
m
.
M©ches
(
Çn1_
));

3460 
EXPECT_FALSE
(
m
.
M©ches
(
Çn2_
));

3461 
EXPECT_FALSE
(
m
.
M©ches
(1.0));

3464 
TEST_F
(
FlßtTe¡
, 
NªS’s™iveFlßtEqCªM©chNaN
) {

3466 
	gM©ch”
<> 
	gm
 = 
NªS’s™iveFlßtEq
(
Çn1_
);

3467 
EXPECT_TRUE
(
m
.
M©ches
(
Çn1_
));

3468 
EXPECT_TRUE
(
m
.
M©ches
(
Çn2_
));

3469 
EXPECT_FALSE
(
m
.
M©ches
(1.0));

3472 
TEST_F
(
FlßtTe¡
, 
FlßtEqCªDesüibeS–f
) {

3473 
	gM©ch”
<> 
	gm1
 = 
FlßtEq
(2.0f);

3474 
EXPECT_EQ
("i ­´oxim©–y 2", 
Desüibe
(
m1
));

3475 
EXPECT_EQ
("i¢'ˆ­´oxim©–y 2", 
DesüibeNeg©iÚ
(
m1
));

3477 
	gM©ch”
<> 
	gm2
 = 
FlßtEq
(0.5f);

3478 
EXPECT_EQ
("i ­´oxim©–y 0.5", 
Desüibe
(
m2
));

3479 
EXPECT_EQ
("i¢'ˆ­´oxim©–y 0.5", 
DesüibeNeg©iÚ
(
m2
));

3481 
	gM©ch”
<> 
	gm3
 = 
FlßtEq
(
Çn1_
);

3482 
EXPECT_EQ
("Ãv” m©ches", 
Desüibe
(
m3
));

3483 
EXPECT_EQ
("i ªythšg", 
DesüibeNeg©iÚ
(
m3
));

3486 
TEST_F
(
FlßtTe¡
, 
NªS’s™iveFlßtEqCªDesüibeS–f
) {

3487 
	gM©ch”
<> 
	gm1
 = 
NªS’s™iveFlßtEq
(2.0f);

3488 
EXPECT_EQ
("i ­´oxim©–y 2", 
Desüibe
(
m1
));

3489 
EXPECT_EQ
("i¢'ˆ­´oxim©–y 2", 
DesüibeNeg©iÚ
(
m1
));

3491 
	gM©ch”
<> 
	gm2
 = 
NªS’s™iveFlßtEq
(0.5f);

3492 
EXPECT_EQ
("i ­´oxim©–y 0.5", 
Desüibe
(
m2
));

3493 
EXPECT_EQ
("i¢'ˆ­´oxim©–y 0.5", 
DesüibeNeg©iÚ
(
m2
));

3495 
	gM©ch”
<> 
	gm3
 = 
NªS’s™iveFlßtEq
(
Çn1_
);

3496 
EXPECT_EQ
("i NaN", 
Desüibe
(
m3
));

3497 
EXPECT_EQ
("i¢'ˆNaN", 
DesüibeNeg©iÚ
(
m3
));

3502 
	gFlßtšgPoštN—rTe¡
<> 
	tFlßtN—rTe¡
;

3504 
TEST_F
(
FlßtN—rTe¡
, 
FlßtN—rM©ches
) {

3505 
Te¡N—rM©ches
(&
FlßtN—r
);

3508 
TEST_F
(
FlßtN—rTe¡
, 
NªS’s™iveFlßtN—rAµroxim©–yM©chesFlßts
) {

3509 
Te¡N—rM©ches
(&
NªS’s™iveFlßtN—r
);

3512 
TEST_F
(
FlßtN—rTe¡
, 
FlßtN—rCªDesüibeS–f
) {

3513 
	gM©ch”
<> 
	gm1
 = 
FlßtN—r
(2.0f, 0.5f);

3514 
EXPECT_EQ
("i ­´oxim©–y 2 (absŞu‹ƒ¼Ü <ğ0.5)", 
Desüibe
(
m1
));

3515 
EXPECT_EQ
(

3516 "i¢'ˆ­´oxim©–y 2 (absŞu‹ƒ¼Ü > 0.5)", 
DesüibeNeg©iÚ
(
m1
));

3518 
	gM©ch”
<> 
	gm2
 = 
FlßtN—r
(0.5f, 0.5f);

3519 
EXPECT_EQ
("i ­´oxim©–y 0.5 (absŞu‹ƒ¼Ü <ğ0.5)", 
Desüibe
(
m2
));

3520 
EXPECT_EQ
(

3521 "i¢'ˆ­´oxim©–y 0.5 (absŞu‹ƒ¼Ü > 0.5)", 
DesüibeNeg©iÚ
(
m2
));

3523 
	gM©ch”
<> 
	gm3
 = 
FlßtN—r
(
Çn1_
, 0.0);

3524 
EXPECT_EQ
("Ãv” m©ches", 
Desüibe
(
m3
));

3525 
EXPECT_EQ
("i ªythšg", 
DesüibeNeg©iÚ
(
m3
));

3528 
TEST_F
(
FlßtN—rTe¡
, 
NªS’s™iveFlßtN—rCªDesüibeS–f
) {

3529 
	gM©ch”
<> 
	gm1
 = 
NªS’s™iveFlßtN—r
(2.0f, 0.5f);

3530 
EXPECT_EQ
("i ­´oxim©–y 2 (absŞu‹ƒ¼Ü <ğ0.5)", 
Desüibe
(
m1
));

3531 
EXPECT_EQ
(

3532 "i¢'ˆ­´oxim©–y 2 (absŞu‹ƒ¼Ü > 0.5)", 
DesüibeNeg©iÚ
(
m1
));

3534 
	gM©ch”
<> 
	gm2
 = 
NªS’s™iveFlßtN—r
(0.5f, 0.5f);

3535 
EXPECT_EQ
("i ­´oxim©–y 0.5 (absŞu‹ƒ¼Ü <ğ0.5)", 
Desüibe
(
m2
));

3536 
EXPECT_EQ
(

3537 "i¢'ˆ­´oxim©–y 0.5 (absŞu‹ƒ¼Ü > 0.5)", 
DesüibeNeg©iÚ
(
m2
));

3539 
	gM©ch”
<> 
	gm3
 = 
NªS’s™iveFlßtN—r
(
Çn1_
, 0.1f);

3540 
EXPECT_EQ
("i NaN", 
Desüibe
(
m3
));

3541 
EXPECT_EQ
("i¢'ˆNaN", 
DesüibeNeg©iÚ
(
m3
));

3544 
TEST_F
(
FlßtN—rTe¡
, 
FlßtN—rCªnÙM©chNaN
) {

3546 
	gM©ch”
<> 
	gm
 = 
FlßtN—r
(
P¬’tTy³
::
Çn1_
, 0.1f);

3547 
EXPECT_FALSE
(
m
.
M©ches
(
Çn1_
));

3548 
EXPECT_FALSE
(
m
.
M©ches
(
Çn2_
));

3549 
EXPECT_FALSE
(
m
.
M©ches
(1.0));

3552 
TEST_F
(
FlßtN—rTe¡
, 
NªS’s™iveFlßtN—rCªM©chNaN
) {

3554 
	gM©ch”
<> 
	gm
 = 
NªS’s™iveFlßtN—r
(
Çn1_
, 0.1f);

3555 
EXPECT_TRUE
(
m
.
M©ches
(
Çn1_
));

3556 
EXPECT_TRUE
(
m
.
M©ches
(
Çn2_
));

3557 
EXPECT_FALSE
(
m
.
M©ches
(1.0));

3561 
	gFlßtšgPoštTe¡
<> 
	tDoubËTe¡
;

3563 
TEST_F
(
DoubËTe¡
, 
DoubËEqAµroxim©–yM©chesDoubËs
) {

3564 
Te¡M©ches
(&
DoubËEq
);

3567 
TEST_F
(
DoubËTe¡
, 
NªS’s™iveDoubËEqAµroxim©–yM©chesDoubËs
) {

3568 
Te¡M©ches
(&
NªS’s™iveDoubËEq
);

3571 
TEST_F
(
DoubËTe¡
, 
DoubËEqCªnÙM©chNaN
) {

3573 
	gM©ch”
<> 
	gm
 = 
DoubËEq
(
Çn1_
);

3574 
EXPECT_FALSE
(
m
.
M©ches
(
Çn1_
));

3575 
EXPECT_FALSE
(
m
.
M©ches
(
Çn2_
));

3576 
EXPECT_FALSE
(
m
.
M©ches
(1.0));

3579 
TEST_F
(
DoubËTe¡
, 
NªS’s™iveDoubËEqCªM©chNaN
) {

3581 
	gM©ch”
<> 
	gm
 = 
NªS’s™iveDoubËEq
(
Çn1_
);

3582 
EXPECT_TRUE
(
m
.
M©ches
(
Çn1_
));

3583 
EXPECT_TRUE
(
m
.
M©ches
(
Çn2_
));

3584 
EXPECT_FALSE
(
m
.
M©ches
(1.0));

3587 
TEST_F
(
DoubËTe¡
, 
DoubËEqCªDesüibeS–f
) {

3588 
	gM©ch”
<> 
	gm1
 = 
DoubËEq
(2.0);

3589 
EXPECT_EQ
("i ­´oxim©–y 2", 
Desüibe
(
m1
));

3590 
EXPECT_EQ
("i¢'ˆ­´oxim©–y 2", 
DesüibeNeg©iÚ
(
m1
));

3592 
	gM©ch”
<> 
	gm2
 = 
DoubËEq
(0.5);

3593 
EXPECT_EQ
("i ­´oxim©–y 0.5", 
Desüibe
(
m2
));

3594 
EXPECT_EQ
("i¢'ˆ­´oxim©–y 0.5", 
DesüibeNeg©iÚ
(
m2
));

3596 
	gM©ch”
<> 
	gm3
 = 
DoubËEq
(
Çn1_
);

3597 
EXPECT_EQ
("Ãv” m©ches", 
Desüibe
(
m3
));

3598 
EXPECT_EQ
("i ªythšg", 
DesüibeNeg©iÚ
(
m3
));

3601 
TEST_F
(
DoubËTe¡
, 
NªS’s™iveDoubËEqCªDesüibeS–f
) {

3602 
	gM©ch”
<> 
	gm1
 = 
NªS’s™iveDoubËEq
(2.0);

3603 
EXPECT_EQ
("i ­´oxim©–y 2", 
Desüibe
(
m1
));

3604 
EXPECT_EQ
("i¢'ˆ­´oxim©–y 2", 
DesüibeNeg©iÚ
(
m1
));

3606 
	gM©ch”
<> 
	gm2
 = 
NªS’s™iveDoubËEq
(0.5);

3607 
EXPECT_EQ
("i ­´oxim©–y 0.5", 
Desüibe
(
m2
));

3608 
EXPECT_EQ
("i¢'ˆ­´oxim©–y 0.5", 
DesüibeNeg©iÚ
(
m2
));

3610 
	gM©ch”
<> 
	gm3
 = 
NªS’s™iveDoubËEq
(
Çn1_
);

3611 
EXPECT_EQ
("i NaN", 
Desüibe
(
m3
));

3612 
EXPECT_EQ
("i¢'ˆNaN", 
DesüibeNeg©iÚ
(
m3
));

3617 
	gFlßtšgPoštN—rTe¡
<> 
	tDoubËN—rTe¡
;

3619 
TEST_F
(
DoubËN—rTe¡
, 
DoubËN—rM©ches
) {

3620 
Te¡N—rM©ches
(&
DoubËN—r
);

3623 
TEST_F
(
DoubËN—rTe¡
, 
NªS’s™iveDoubËN—rAµroxim©–yM©chesDoubËs
) {

3624 
Te¡N—rM©ches
(&
NªS’s™iveDoubËN—r
);

3627 
TEST_F
(
DoubËN—rTe¡
, 
DoubËN—rCªDesüibeS–f
) {

3628 
	gM©ch”
<> 
	gm1
 = 
DoubËN—r
(2.0, 0.5);

3629 
EXPECT_EQ
("i ­´oxim©–y 2 (absŞu‹ƒ¼Ü <ğ0.5)", 
Desüibe
(
m1
));

3630 
EXPECT_EQ
(

3631 "i¢'ˆ­´oxim©–y 2 (absŞu‹ƒ¼Ü > 0.5)", 
DesüibeNeg©iÚ
(
m1
));

3633 
	gM©ch”
<> 
	gm2
 = 
DoubËN—r
(0.5, 0.5);

3634 
EXPECT_EQ
("i ­´oxim©–y 0.5 (absŞu‹ƒ¼Ü <ğ0.5)", 
Desüibe
(
m2
));

3635 
EXPECT_EQ
(

3636 "i¢'ˆ­´oxim©–y 0.5 (absŞu‹ƒ¼Ü > 0.5)", 
DesüibeNeg©iÚ
(
m2
));

3638 
	gM©ch”
<> 
	gm3
 = 
DoubËN—r
(
Çn1_
, 0.0);

3639 
EXPECT_EQ
("Ãv” m©ches", 
Desüibe
(
m3
));

3640 
EXPECT_EQ
("i ªythšg", 
DesüibeNeg©iÚ
(
m3
));

3643 
TEST_F
(
DoubËN—rTe¡
, 
Ex¶ašsResuÉWh’M©chFas
) {

3644 
EXPECT_EQ
("", 
Ex¶aš
(
DoubËN—r
(2.0, 0.1), 2.05));

3645 
EXPECT_EQ
("which i 0.2 from 2", 
Ex¶aš
(
DoubËN—r
(2.0, 0.1), 2.2));

3646 
EXPECT_EQ
("which i -0.3 from 2", 
Ex¶aš
(
DoubËN—r
(2.0, 0.1), 1.7));

3648 cÚ¡ 
	g¡d
::
¡ršg
 
ex¶ª©iÚ
 =

3649 
Ex¶aš
(
DoubËN—r
(2.1, 1e-10), 2.1 + 1.2e-10);

3652 
EXPECT_TRUE
(
ex¶ª©iÚ
 == "which is 1.2e-10 from 2.1" ||

3653 
ex¶ª©iÚ
 == "which is 1.2e-010 from 2.1")

3654 << " wh”ex¶ª©iÚ i \"" << 
ex¶ª©iÚ
 << "\".";

3657 
TEST_F
(
DoubËN—rTe¡
, 
NªS’s™iveDoubËN—rCªDesüibeS–f
) {

3658 
	gM©ch”
<> 
	gm1
 = 
NªS’s™iveDoubËN—r
(2.0, 0.5);

3659 
EXPECT_EQ
("i ­´oxim©–y 2 (absŞu‹ƒ¼Ü <ğ0.5)", 
Desüibe
(
m1
));

3660 
EXPECT_EQ
(

3661 "i¢'ˆ­´oxim©–y 2 (absŞu‹ƒ¼Ü > 0.5)", 
DesüibeNeg©iÚ
(
m1
));

3663 
	gM©ch”
<> 
	gm2
 = 
NªS’s™iveDoubËN—r
(0.5, 0.5);

3664 
EXPECT_EQ
("i ­´oxim©–y 0.5 (absŞu‹ƒ¼Ü <ğ0.5)", 
Desüibe
(
m2
));

3665 
EXPECT_EQ
(

3666 "i¢'ˆ­´oxim©–y 0.5 (absŞu‹ƒ¼Ü > 0.5)", 
DesüibeNeg©iÚ
(
m2
));

3668 
	gM©ch”
<> 
	gm3
 = 
NªS’s™iveDoubËN—r
(
Çn1_
, 0.1);

3669 
EXPECT_EQ
("i NaN", 
Desüibe
(
m3
));

3670 
EXPECT_EQ
("i¢'ˆNaN", 
DesüibeNeg©iÚ
(
m3
));

3673 
TEST_F
(
DoubËN—rTe¡
, 
DoubËN—rCªnÙM©chNaN
) {

3675 
	gM©ch”
<> 
	gm
 = 
DoubËN—r
(
P¬’tTy³
::
Çn1_
, 0.1);

3676 
EXPECT_FALSE
(
m
.
M©ches
(
Çn1_
));

3677 
EXPECT_FALSE
(
m
.
M©ches
(
Çn2_
));

3678 
EXPECT_FALSE
(
m
.
M©ches
(1.0));

3681 
TEST_F
(
DoubËN—rTe¡
, 
NªS’s™iveDoubËN—rCªM©chNaN
) {

3683 
	gM©ch”
<> 
	gm
 = 
NªS’s™iveDoubËN—r
(
Çn1_
, 0.1);

3684 
EXPECT_TRUE
(
m
.
M©ches
(
Çn1_
));

3685 
EXPECT_TRUE
(
m
.
M©ches
(
Çn2_
));

3686 
EXPECT_FALSE
(
m
.
M©ches
(1.0));

3689 
TEST
(
Poš‹eTe¡
, 
RawPoš‹r
) {

3690 cÚ¡ 
	gM©ch”
<*> 
	gm
 = 
Poš‹e
(
Ge
(0));

3692 
	gn
 = 1;

3693 
EXPECT_TRUE
(
m
.
M©ches
(&
n
));

3694 
	gn
 = -1;

3695 
EXPECT_FALSE
(
m
.
M©ches
(&
n
));

3696 
EXPECT_FALSE
(
m
.
M©ches
(
nuÎ±r
));

3699 
TEST
(
Poš‹eTe¡
, 
RawPoš‹rToCÚ¡
) {

3700 cÚ¡ 
	gM©ch”
<cÚ¡ *> 
	gm
 = 
Poš‹e
(
Ge
(0));

3702 
	gx
 = 1;

3703 
EXPECT_TRUE
(
m
.
M©ches
(&
x
));

3704 
	gx
 = -1;

3705 
EXPECT_FALSE
(
m
.
M©ches
(&
x
));

3706 
EXPECT_FALSE
(
m
.
M©ches
(
nuÎ±r
));

3709 
TEST
(
Poš‹eTe¡
, 
Reã»nûToCÚ¡RawPoš‹r
) {

3710 cÚ¡ 
	gM©ch”
<* cÚ¡ &> 
	gm
 = 
Poš‹e
(
Ge
(0));

3712 
	gn
 = 1;

3713 
EXPECT_TRUE
(
m
.
M©ches
(&
n
));

3714 
	gn
 = -1;

3715 
EXPECT_FALSE
(
m
.
M©ches
(&
n
));

3716 
EXPECT_FALSE
(
m
.
M©ches
(
nuÎ±r
));

3719 
TEST
(
Poš‹eTe¡
, 
Reã»nûToNÚCÚ¡RawPoš‹r
) {

3720 cÚ¡ 
	gM©ch”
<* &> 
	gm
 = 
Poš‹e
(
Ge
(0));

3722 
	gx
 = 1.0;

3723 * 
	gp
 = &
x
;

3724 
EXPECT_TRUE
(
m
.
M©ches
(
p
));

3725 
	gx
 = -1;

3726 
EXPECT_FALSE
(
m
.
M©ches
(
p
));

3727 
	gp
 = 
nuÎ±r
;

3728 
EXPECT_FALSE
(
m
.
M©ches
(
p
));

3731 
TEST
(
Poš‹eTe¡
, 
Sm¬tPoš‹r
) {

3732 cÚ¡ 
	gM©ch”
<
	g¡d
::
unique_±r
<>> 
m
 = 
Poš‹e
(
Ge
(0));

3734 
	g¡d
::
unique_±r
<> 
n
(
Ãw
 (1));

3735 
EXPECT_TRUE
(
m
.
M©ches
(
n
));

3738 
TEST
(
Poš‹eTe¡
, 
Sm¬tPoš‹rToCÚ¡
) {

3739 cÚ¡ 
	gM©ch”
<
	g¡d
::
unique_±r
<cÚ¡ >> 
m
 = 
Poš‹e
(
Ge
(0));

3744 
	g¡d
::
unique_±r
<cÚ¡ > 
n
(
Ãw
 (1));

3745 
EXPECT_TRUE
(
m
.
M©ches
(
n
));

3748 
TEST
(
Poš‹rTe¡
, 
RawPoš‹r
) {

3749 
	gn
 = 1;

3750 cÚ¡ 
	gM©ch”
<*> 
	gm
 = 
Poš‹r
(
Eq
(&
n
));

3752 
EXPECT_TRUE
(
m
.
M©ches
(&
n
));

3754 * 
	gp
 = 
nuÎ±r
;

3755 
EXPECT_FALSE
(
m
.
M©ches
(
p
));

3756 
EXPECT_FALSE
(
m
.
M©ches
(
nuÎ±r
));

3759 
TEST
(
Poš‹rTe¡
, 
RawPoš‹rToCÚ¡
) {

3760 
	gn
 = 1;

3761 cÚ¡ 
	gM©ch”
<cÚ¡ *> 
	gm
 = 
Poš‹r
(
Eq
(&
n
));

3763 
EXPECT_TRUE
(
m
.
M©ches
(&
n
));

3765 * 
	gp
 = 
nuÎ±r
;

3766 
EXPECT_FALSE
(
m
.
M©ches
(
p
));

3767 
EXPECT_FALSE
(
m
.
M©ches
(
nuÎ±r
));

3770 
TEST
(
Poš‹rTe¡
, 
Sm¬tPoš‹r
) {

3771 
	g¡d
::
unique_±r
<> 
n
(
Ãw
 (10));

3772 * 
	g¿w_n
 = 
n
.
g‘
();

3773 cÚ¡ 
	gM©ch”
<
	g¡d
::
unique_±r
<>> 
m
 = 
Poš‹r
(
Eq
(
¿w_n
));

3775 
EXPECT_TRUE
(
m
.
M©ches
(
n
));

3778 
TEST
(
Poš‹rTe¡
, 
Sm¬tPoš‹rToCÚ¡
) {

3779 
	g¡d
::
unique_±r
<cÚ¡ > 
n
(
Ãw
 (10));

3780 cÚ¡ * 
	g¿w_n
 = 
n
.
g‘
();

3781 cÚ¡ 
	gM©ch”
<
	g¡d
::
unique_±r
<cÚ¡ >> 
m
 = 
Poš‹r
(
Eq
(
¿w_n
));

3786 
	g¡d
::
unique_±r
<cÚ¡ > 
p
(
Ãw
 (10));

3787 
EXPECT_FALSE
(
m
.
M©ches
(
p
));

3790 
TEST
(
Add»ssTe¡
, 
NÚCÚ¡
) {

3791 
	gn
 = 1;

3792 cÚ¡ 
	gM©ch”
<> 
	gm
 = 
Add»ss
(
Eq
(&
n
));

3794 
EXPECT_TRUE
(
m
.
M©ches
(
n
));

3796 
	gÙh”
 = 5;

3798 
EXPECT_FALSE
(
m
.
M©ches
(
Ùh”
));

3800 & 
	gn_»f
 = 
n
;

3802 
EXPECT_TRUE
(
m
.
M©ches
(
n_»f
));

3805 
TEST
(
Add»ssTe¡
, 
CÚ¡
) {

3806 cÚ¡ 
	gn
 = 1;

3807 cÚ¡ 
	gM©ch”
<> 
	gm
 = 
Add»ss
(
Eq
(&
n
));

3809 
EXPECT_TRUE
(
m
.
M©ches
(
n
));

3811 
	gÙh”
 = 5;

3813 
EXPECT_FALSE
(
m
.
M©ches
(
Ùh”
));

3816 
TEST
(
Add»ssTe¡
, 
M©ch”DÛ¢tCİy
) {

3817 
	g¡d
::
unique_±r
<> 
n
(
Ãw
 (1));

3818 cÚ¡ 
	gM©ch”
<
	g¡d
::
unique_±r
<>> 
m
 = 
Add»ss
(
Eq
(&
n
));

3820 
EXPECT_TRUE
(
m
.
M©ches
(
n
));

3823 
TEST
(
Add»ssTe¡
, 
Desüibe
) {

3824 
	gM©ch”
<> 
	gm©ch”
 = 
Add»ss
(
_
);

3825 
EXPECT_EQ
("ha add»s th© i ªythšg", 
Desüibe
(
m©ch”
));

3826 
EXPECT_EQ
("does‚ot have‡ddresshat is‡nything",

3827 
DesüibeNeg©iÚ
(
m©ch”
));

3830 
MATCHER_P
(
F›ldIIs
, 
šÃr_m©ch”
, "") {

3831  
Ex¶ašM©chResuÉ
(
šÃr_m©ch”
, 
¬g
.
i
, 
»suÉ_li¡’”
);

3834 #ià
GTEST_HAS_RTTI


3835 
TEST
(
Wh’DyÇmicCa¡ToTe¡
, 
SameTy³
) {

3836 
D”ived
 
	gd”ived
;

3837 
	gd”ived
.
	gi
 = 4;

3840 
Ba£
* 
	gas_ba£_±r
 = &
d”ived
;

3841 
EXPECT_THAT
(
as_ba£_±r
, 
Wh’DyÇmicCa¡To
<
D”ived
*>(
NÙ
(
IsNuÎ
())));

3842 
EXPECT_THAT
(
as_ba£_±r
, 
Wh’DyÇmicCa¡To
<
D”ived
*>(
Poš‹e
(
F›ldIIs
(4))));

3843 
EXPECT_THAT
(
as_ba£_±r
,

3844 
NÙ
(
Wh’DyÇmicCa¡To
<
D”ived
*>(
Poš‹e
(
F›ldIIs
(5)))));

3847 
TEST
(
Wh’DyÇmicCa¡ToTe¡
, 
WrÚgTy³s
) {

3848 
Ba£
 
	gba£
;

3849 
D”ived
 
	gd”ived
;

3850 
Oth”D”ived
 
	gÙh”_d”ived
;

3853 
EXPECT_THAT
(&
ba£
, 
NÙ
(
Wh’DyÇmicCa¡To
<
D”ived
*>(
Poš‹e
(
_
))));

3854 
EXPECT_THAT
(&
ba£
, 
Wh’DyÇmicCa¡To
<
D”ived
*>(
IsNuÎ
()));

3855 
Ba£
* 
	gas_ba£_±r
 = &
d”ived
;

3856 
EXPECT_THAT
(
as_ba£_±r
, 
NÙ
(
Wh’DyÇmicCa¡To
<
Oth”D”ived
*>(
Poš‹e
(
_
))));

3857 
EXPECT_THAT
(
as_ba£_±r
, 
Wh’DyÇmicCa¡To
<
Oth”D”ived
*>(
IsNuÎ
()));

3858 
	gas_ba£_±r
 = &
Ùh”_d”ived
;

3859 
EXPECT_THAT
(
as_ba£_±r
, 
NÙ
(
Wh’DyÇmicCa¡To
<
D”ived
*>(
Poš‹e
(
_
))));

3860 
EXPECT_THAT
(
as_ba£_±r
, 
Wh’DyÇmicCa¡To
<
D”ived
*>(
IsNuÎ
()));

3863 
TEST
(
Wh’DyÇmicCa¡ToTe¡
, 
AÌ—dyNuÎ
) {

3865 
Ba£
* 
	gas_ba£_±r
 = 
nuÎ±r
;

3866 
EXPECT_THAT
(
as_ba£_±r
, 
Wh’DyÇmicCa¡To
<
D”ived
*>(
IsNuÎ
()));

3869 
	sAmbiguousCa¡Ty³s
 {

3870 şas 
	cVœtu®D”ived
 : 
public
 
vœtu®
 
Ba£
 {};

3871 şas 
	cD”ivedSub1
 : 
public
 
Vœtu®D”ived
 {};

3872 şas 
	cD”ivedSub2
 : 
public
 
Vœtu®D”ived
 {};

3873 
şass
 
	gMªyD”ivedInH›¿rchy
 : 
public
 
D”ivedSub1
,…ubliø
	gD”ivedSub2
 {};

3876 
TEST
(
Wh’DyÇmicCa¡ToTe¡
, 
AmbiguousCa¡
) {

3877 
	gAmbiguousCa¡Ty³s
::
D”ivedSub1
 
sub1
;

3878 
	gAmbiguousCa¡Ty³s
::
MªyD”ivedInH›¿rchy
 
mªy_d”ived
;

3880 
Ba£
* 
	gas_ba£_±r
 =

3881 
¡©ic_ÿ¡
<
AmbiguousCa¡Ty³s
::
D”ivedSub1
*>(&
mªy_d”ived
);

3882 
EXPECT_THAT
(
as_ba£_±r
,

3883 
Wh’DyÇmicCa¡To
<
AmbiguousCa¡Ty³s
::
Vœtu®D”ived
*>(
IsNuÎ
()));

3884 
	gas_ba£_±r
 = &
sub1
;

3885 
EXPECT_THAT
(

3886 
as_ba£_±r
,

3887 
Wh’DyÇmicCa¡To
<
AmbiguousCa¡Ty³s
::
Vœtu®D”ived
*>(
NÙ
(
IsNuÎ
())));

3890 
TEST
(
Wh’DyÇmicCa¡ToTe¡
, 
Desüibe
) {

3891 
	gM©ch”
<
	gBa£
*> 
	gm©ch”
 = 
Wh’DyÇmicCa¡To
<
D”ived
*>(
Poš‹e
(
_
));

3892 cÚ¡ 
	g¡d
::
¡ršg
 
´efix
 =

3893 "wh’ dyÇmic_ÿ¡Ø" + 
š‹º®
::
G‘Ty³Name
<
D”ived
*>() + ", ";

3894 
EXPECT_EQ
(
´efix
 + "pošt tØ¨v®uth© i ªythšg", 
Desüibe
(
m©ch”
));

3895 
EXPECT_EQ
(
´efix
 + "does‚ot…ointo‡ valuehat is‡nything",

3896 
DesüibeNeg©iÚ
(
m©ch”
));

3899 
TEST
(
Wh’DyÇmicCa¡ToTe¡
, 
Ex¶aš
) {

3900 
	gM©ch”
<
	gBa£
*> 
	gm©ch”
 = 
Wh’DyÇmicCa¡To
<
D”ived
*>(
Poš‹e
(
_
));

3901 
Ba£
* 
	gnuÎ
 = 
nuÎ±r
;

3902 
EXPECT_THAT
(
Ex¶aš
(
m©ch”
, 
nuÎ
), 
HasSub¡r
("NULL"));

3903 
D”ived
 
	gd”ived
;

3904 
EXPECT_TRUE
(
m©ch”
.
M©ches
(&
d”ived
));

3905 
EXPECT_THAT
(
Ex¶aš
(
m©ch”
, &
d”ived
), 
HasSub¡r
("which…ointso "));

3908 
	gM©ch”
<cÚ¡ 
	gBa£
&> 
	g»f_m©ch”
 = 
Wh’DyÇmicCa¡To
<cÚ¡ 
Oth”D”ived
&>(
_
);

3909 
EXPECT_THAT
(
Ex¶aš
(
»f_m©ch”
, 
d”ived
),

3910 
HasSub¡r
("which cannot be dynamic_cast"));

3913 
TEST
(
Wh’DyÇmicCa¡ToTe¡
, 
GoodReã»nû
) {

3914 
D”ived
 
	gd”ived
;

3915 
	gd”ived
.
	gi
 = 4;

3916 
	gBa£
& 
	gas_ba£_»f
 = 
d”ived
;

3917 
EXPECT_THAT
(
as_ba£_»f
, 
Wh’DyÇmicCa¡To
<cÚ¡ 
D”ived
&>(
F›ldIIs
(4)));

3918 
EXPECT_THAT
(
as_ba£_»f
, 
Wh’DyÇmicCa¡To
<cÚ¡ 
D”ived
&>(
NÙ
(
F›ldIIs
(5))));

3921 
TEST
(
Wh’DyÇmicCa¡ToTe¡
, 
BadReã»nû
) {

3922 
D”ived
 
	gd”ived
;

3923 
	gBa£
& 
	gas_ba£_»f
 = 
d”ived
;

3924 
EXPECT_THAT
(
as_ba£_»f
, 
NÙ
(
Wh’DyÇmicCa¡To
<cÚ¡ 
Oth”D”ived
&>(
_
)));

3929 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

3930 şas 
	cCÚ¡Prİag©šgPŒ
 {

3931 
	gpublic
:

3932 
T
 
	t–em’t_ty³
;

3934 
CÚ¡Prİag©šgPŒ
(è: 
v®_
() {}

3935 
ex¶ic™
 
CÚ¡Prİag©šgPŒ
(
T
* 
t
è: 
v®_
(t) {}

3936 
CÚ¡Prİag©šgPŒ
(cÚ¡ CÚ¡Prİag©šgPŒ& 
Ùh”
è: 
v®_
(other.val_) {}

3938 
T
* 
g‘
(è{  
v®_
; }

3939 
	gT
& 
	gİ”©Ü
*(è{  *
	gv®_
; }

3941 cÚ¡ 
T
* 
g‘
(ècÚ¡ {  
	gv®_
; }

3942 cÚ¡ 
	gT
& 
	gİ”©Ü
*(ècÚ¡ {  *
	gv®_
; }

3944 
	g´iv©e
:

3945 
T
* 
v®_
;

3948 
TEST
(
Poš‹eTe¡
, 
WÜksW™hCÚ¡Prİag©šgPoš‹rs
) {

3949 cÚ¡ 
	gM©ch”
< 
	gCÚ¡Prİag©šgPŒ
<> > 
	gm
 = 
Poš‹e
(
Lt
(5));

3950 
	gth»e
 = 3;

3951 cÚ¡ 
	gCÚ¡Prİag©šgPŒ
<> 
co
(&
th»e
);

3952 
	gCÚ¡Prİag©šgPŒ
<> 
o
(&
th»e
);

3953 
EXPECT_TRUE
(
m
.
M©ches
(
o
));

3954 
EXPECT_TRUE
(
m
.
M©ches
(
co
));

3955 *
	go
 = 6;

3956 
EXPECT_FALSE
(
m
.
M©ches
(
o
));

3957 
EXPECT_FALSE
(
m
.
M©ches
(
CÚ¡Prİag©šgPŒ
<>()));

3960 
TEST
(
Poš‹eTe¡
, 
Nev”M©chesNuÎ
) {

3961 cÚ¡ 
	gM©ch”
<cÚ¡ *> 
	gm
 = 
Poš‹e
(
_
);

3962 
EXPECT_FALSE
(
m
.
M©ches
(
nuÎ±r
));

3966 
TEST
(
Poš‹eTe¡
, 
M©chesAgaš¡AV®ue
) {

3967 cÚ¡ 
	gM©ch”
<*> 
	gm
 = 
Poš‹e
(5);

3969 
	gn
 = 5;

3970 
EXPECT_TRUE
(
m
.
M©ches
(&
n
));

3971 
	gn
 = -1;

3972 
EXPECT_FALSE
(
m
.
M©ches
(&
n
));

3973 
EXPECT_FALSE
(
m
.
M©ches
(
nuÎ±r
));

3976 
TEST
(
Poš‹eTe¡
, 
CªDesüibeS–f
) {

3977 cÚ¡ 
	gM©ch”
<*> 
	gm
 = 
Poš‹e
(
Gt
(3));

3978 
EXPECT_EQ
("pošt tØ¨v®uth© i > 3", 
Desüibe
(
m
));

3979 
EXPECT_EQ
("does‚ot…ointo‡ valuehat is > 3",

3980 
DesüibeNeg©iÚ
(
m
));

3983 
TEST
(
Poš‹eTe¡
, 
CªEx¶ašM©chResuÉ
) {

3984 cÚ¡ 
	gM©ch”
<cÚ¡ 
	g¡d
::
¡ršg
*> 
m
 = 
Poš‹e
(
S¹sW™h
("Hi"));

3986 
EXPECT_EQ
("", 
Ex¶aš
(
m
, 
¡©ic_ÿ¡
<cÚ¡ 
¡d
::
¡ršg
*>(
nuÎ±r
)));

3988 cÚ¡ 
	gM©ch”
<*> 
	gm2
 = 
Poš‹e
(
G»©”Thª
(1));

3989 
	gn
 = 3;

3990 
EXPECT_EQ
("which…ošt tØ3" + 
OfTy³
("long") + ", which is 2 morehan 1",

3991 
Ex¶aš
(
m2
, &
n
));

3994 
TEST
(
Poš‹eTe¡
, 
AlwaysEx¶ašsPoš‹e
) {

3995 cÚ¡ 
	gM©ch”
<*> 
	gm
 = 
Poš‹e
(0);

3996 
	gn
 = 42;

3997 
EXPECT_EQ
("which…ošt tØ42" + 
OfTy³
("št"), 
Ex¶aš
(
m
, &
n
));

4001 şas 
	cUncİyabË
 {

4002 
	gpublic
:

4003 
UncİyabË
(è: 
v®ue_
(-1) {}

4004 
ex¶ic™
 
UncİyabË
(
a_v®ue
è: 
v®ue_
(a_value) {}

4006 
v®ue
(ècÚ¡ {  
v®ue_
; }

4007 
£t_v®ue
(
i
è{ 
	gv®ue_
 = i; }

4009 
	g´iv©e
:

4010 
v®ue_
;

4011 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
UncİyabË
);

4015 
boŞ
 
V®ueIsPos™ive
(cÚ¡ 
UncİyabË
& 
x
è{  
	gx
.
v®ue
() > 0; }

4017 
MATCHER_P
(
UncİyabËIs
, 
šÃr_m©ch”
, "") {

4018  
Ex¶ašM©chResuÉ
(
šÃr_m©ch”
, 
¬g
.
v®ue
(), 
»suÉ_li¡’”
);

4022 
	sASŒuù
 {

4023 
ASŒuù
(è: 
x
(0), 
y
(1.0), 
z
(5), 
p
(
nuÎ±r
) {}

4024 
ASŒuù
(cÚ¡ ASŒuù& 
rhs
)

4025 : 
x
(
rhs
.x), 
y
Ôhs.y), 
z
Ôhs.z.
v®ue
()), 
p
(rhs.p) {}

4027 
	gx
;

4028 cÚ¡ 
	gy
;

4029 
UncİyabË
 
	gz
;

4030 cÚ¡ * 
	gp
;

4034 
	gD”ivedSŒuù
 : 
public
 
ASŒuù
 {

4035 
ch
;

4039 
TEST
(
F›ldTe¡
, 
WÜksFÜNÚCÚ¡F›ld
) {

4040 
	gM©ch”
<
	gASŒuù
> 
	gm
 = 
F›ld
(&
ASŒuù
::
x
, 
Ge
(0));

4041 
	gM©ch”
<
	gASŒuù
> 
	gm_w™h_Çme
 = 
F›ld
("x", &
ASŒuù
::
x
, 
Ge
(0));

4043 
ASŒuù
 
	ga
;

4044 
EXPECT_TRUE
(
m
.
M©ches
(
a
));

4045 
EXPECT_TRUE
(
m_w™h_Çme
.
M©ches
(
a
));

4046 
	ga
.
	gx
 = -1;

4047 
EXPECT_FALSE
(
m
.
M©ches
(
a
));

4048 
EXPECT_FALSE
(
m_w™h_Çme
.
M©ches
(
a
));

4052 
TEST
(
F›ldTe¡
, 
WÜksFÜCÚ¡F›ld
) {

4053 
ASŒuù
 
	ga
;

4055 
	gM©ch”
<
	gASŒuù
> 
	gm
 = 
F›ld
(&
ASŒuù
::
y
, 
Ge
(0.0));

4056 
	gM©ch”
<
	gASŒuù
> 
	gm_w™h_Çme
 = 
F›ld
("y", &
ASŒuù
::
y
, 
Ge
(0.0));

4057 
EXPECT_TRUE
(
m
.
M©ches
(
a
));

4058 
EXPECT_TRUE
(
m_w™h_Çme
.
M©ches
(
a
));

4059 
	gm
 = 
F›ld
(&
ASŒuù
::
y
, 
Le
(0.0));

4060 
	gm_w™h_Çme
 = 
F›ld
("y", &
ASŒuù
::
y
, 
Le
(0.0));

4061 
EXPECT_FALSE
(
m
.
M©ches
(
a
));

4062 
EXPECT_FALSE
(
m_w™h_Çme
.
M©ches
(
a
));

4066 
TEST
(
F›ldTe¡
, 
WÜksFÜUncİyabËF›ld
) {

4067 
ASŒuù
 
	ga
;

4069 
	gM©ch”
<
	gASŒuù
> 
	gm
 = 
F›ld
(&
ASŒuù
::
z
, 
Truly
(
V®ueIsPos™ive
));

4070 
EXPECT_TRUE
(
m
.
M©ches
(
a
));

4071 
	gm
 = 
F›ld
(&
ASŒuù
::
z
, 
NÙ
(
Truly
(
V®ueIsPos™ive
)));

4072 
EXPECT_FALSE
(
m
.
M©ches
(
a
));

4076 
TEST
(
F›ldTe¡
, 
WÜksFÜPoš‹rF›ld
) {

4078 
	gM©ch”
<
	gASŒuù
> 
	gm
 = 
F›ld
(&
ASŒuù
::
p
, 
¡©ic_ÿ¡
<cÚ¡ *>(
nuÎ±r
));

4079 
ASŒuù
 
	ga
;

4080 
EXPECT_TRUE
(
m
.
M©ches
(
a
));

4081 
	ga
.
	gp
 = "hi";

4082 
EXPECT_FALSE
(
m
.
M©ches
(
a
));

4085 
	gm
 = 
F›ld
(&
ASŒuù
::
p
, 
S¹sW™h
("hi"));

4086 
	ga
.
	gp
 = "hill";

4087 
EXPECT_TRUE
(
m
.
M©ches
(
a
));

4088 
	ga
.
	gp
 = "hole";

4089 
EXPECT_FALSE
(
m
.
M©ches
(
a
));

4093 
TEST
(
F›ldTe¡
, 
WÜksFÜByRefArgum’t
) {

4094 
	gM©ch”
<cÚ¡ 
	gASŒuù
&> 
	gm
 = 
F›ld
(&
ASŒuù
::
x
, 
Ge
(0));

4096 
ASŒuù
 
	ga
;

4097 
EXPECT_TRUE
(
m
.
M©ches
(
a
));

4098 
	ga
.
	gx
 = -1;

4099 
EXPECT_FALSE
(
m
.
M©ches
(
a
));

4104 
TEST
(
F›ldTe¡
, 
WÜksFÜArgum’tOfSubTy³
) {

4107 
	gM©ch”
<cÚ¡ 
	gD”ivedSŒuù
&> 
	gm
 = 
F›ld
(&
ASŒuù
::
x
, 
Ge
(0));

4109 
D”ivedSŒuù
 
	gd
;

4110 
EXPECT_TRUE
(
m
.
M©ches
(
d
));

4111 
	gd
.
	gx
 = -1;

4112 
EXPECT_FALSE
(
m
.
M©ches
(
d
));

4117 
TEST
(
F›ldTe¡
, 
WÜksFÜCom·tibËM©ch”Ty³
) {

4119 
	gM©ch”
<cÚ¡ 
	gASŒuù
&> 
	gm
 = 
F›ld
(&
ASŒuù
::
x
,

4120 
M©ch”
<sigÃd >(
Ge
(0)));

4122 
ASŒuù
 
	ga
;

4123 
EXPECT_TRUE
(
m
.
M©ches
(
a
));

4124 
	ga
.
	gx
 = -1;

4125 
EXPECT_FALSE
(
m
.
M©ches
(
a
));

4129 
TEST
(
F›ldTe¡
, 
CªDesüibeS–f
) {

4130 
	gM©ch”
<cÚ¡ 
	gASŒuù
&> 
	gm
 = 
F›ld
(&
ASŒuù
::
x
, 
Ge
(0));

4132 
EXPECT_EQ
("i ª objeù who£ giv’ f›ld i >ğ0", 
Desüibe
(
m
));

4133 
EXPECT_EQ
("i ª objeù who£ giv’ f›ld i¢'ˆ>ğ0", 
DesüibeNeg©iÚ
(
m
));

4136 
TEST
(
F›ldTe¡
, 
CªDesüibeS–fW™hF›ldName
) {

4137 
	gM©ch”
<cÚ¡ 
	gASŒuù
&> 
	gm
 = 
F›ld
("f›ld_Çme", &
ASŒuù
::
x
, 
Ge
(0));

4139 
EXPECT_EQ
("i ª objeù who£ f›ld `f›ld_Çme` i >ğ0", 
Desüibe
(
m
));

4140 
EXPECT_EQ
("is‡n object whose field `field_name` isn't >= 0",

4141 
DesüibeNeg©iÚ
(
m
));

4145 
TEST
(
F›ldTe¡
, 
CªEx¶ašM©chResuÉ
) {

4146 
	gM©ch”
<cÚ¡ 
	gASŒuù
&> 
	gm
 = 
F›ld
(&
ASŒuù
::
x
, 
Ge
(0));

4148 
ASŒuù
 
	ga
;

4149 
	ga
.
	gx
 = 1;

4150 
EXPECT_EQ
("who£ giv’ f›ld i 1" + 
OfTy³
("št"), 
Ex¶aš
(
m
, 
a
));

4152 
	gm
 = 
F›ld
(&
ASŒuù
::
x
, 
G»©”Thª
(0));

4153 
EXPECT_EQ
(

4154 "who£ giv’ f›ld i 1" + 
OfTy³
("int") + ", which is 1 morehan 0",

4155 
Ex¶aš
(
m
, 
a
));

4158 
TEST
(
F›ldTe¡
, 
CªEx¶ašM©chResuÉW™hF›ldName
) {

4159 
	gM©ch”
<cÚ¡ 
	gASŒuù
&> 
	gm
 = 
F›ld
("f›ld_Çme", &
ASŒuù
::
x
, 
Ge
(0));

4161 
ASŒuù
 
	ga
;

4162 
	ga
.
	gx
 = 1;

4163 
EXPECT_EQ
("who£ f›ld `f›ld_Çme` i 1" + 
OfTy³
("št"), 
Ex¶aš
(
m
, 
a
));

4165 
	gm
 = 
F›ld
("f›ld_Çme", &
ASŒuù
::
x
, 
G»©”Thª
(0));

4166 
EXPECT_EQ
("who£ f›ld `f›ld_Çme` i 1" + 
OfTy³
("int") +

4168 
Ex¶aš
(
m
, 
a
));

4172 
TEST
(
F›ldFÜPoš‹rTe¡
, 
WÜksFÜPoš‹rToCÚ¡
) {

4173 
	gM©ch”
<cÚ¡ 
	gASŒuù
*> 
	gm
 = 
F›ld
(&
ASŒuù
::
x
, 
Ge
(0));

4175 
ASŒuù
 
	ga
;

4176 
EXPECT_TRUE
(
m
.
M©ches
(&
a
));

4177 
	ga
.
	gx
 = -1;

4178 
EXPECT_FALSE
(
m
.
M©ches
(&
a
));

4182 
TEST
(
F›ldFÜPoš‹rTe¡
, 
WÜksFÜPoš‹rToNÚCÚ¡
) {

4183 
	gM©ch”
<
	gASŒuù
*> 
	gm
 = 
F›ld
(&
ASŒuù
::
x
, 
Ge
(0));

4185 
ASŒuù
 
	ga
;

4186 
EXPECT_TRUE
(
m
.
M©ches
(&
a
));

4187 
	ga
.
	gx
 = -1;

4188 
EXPECT_FALSE
(
m
.
M©ches
(&
a
));

4192 
TEST
(
F›ldFÜPoš‹rTe¡
, 
WÜksFÜReã»nûToCÚ¡Poš‹r
) {

4193 
	gM©ch”
<
ASŒuù
* cÚ¡&> 
	gm
 = 
F›ld
(&ASŒuù::
x
, 
Ge
(0));

4195 
ASŒuù
 
	ga
;

4196 
EXPECT_TRUE
(
m
.
M©ches
(&
a
));

4197 
	ga
.
	gx
 = -1;

4198 
EXPECT_FALSE
(
m
.
M©ches
(&
a
));

4202 
TEST
(
F›ldFÜPoš‹rTe¡
, 
DÛsNÙM©chNuÎ
) {

4203 
	gM©ch”
<cÚ¡ 
	gASŒuù
*> 
	gm
 = 
F›ld
(&
ASŒuù
::
x
, 
_
);

4204 
EXPECT_FALSE
(
m
.
M©ches
(
nuÎ±r
));

4209 
TEST
(
F›ldFÜPoš‹rTe¡
, 
WÜksFÜArgum’tOfSubTy³
) {

4212 
	gM©ch”
<
	gD”ivedSŒuù
*> 
	gm
 = 
F›ld
(&
ASŒuù
::
x
, 
Ge
(0));

4214 
D”ivedSŒuù
 
	gd
;

4215 
EXPECT_TRUE
(
m
.
M©ches
(&
d
));

4216 
	gd
.
	gx
 = -1;

4217 
EXPECT_FALSE
(
m
.
M©ches
(&
d
));

4221 
TEST
(
F›ldFÜPoš‹rTe¡
, 
CªDesüibeS–f
) {

4222 
	gM©ch”
<cÚ¡ 
	gASŒuù
*> 
	gm
 = 
F›ld
(&
ASŒuù
::
x
, 
Ge
(0));

4224 
EXPECT_EQ
("i ª objeù who£ giv’ f›ld i >ğ0", 
Desüibe
(
m
));

4225 
EXPECT_EQ
("i ª objeù who£ giv’ f›ld i¢'ˆ>ğ0", 
DesüibeNeg©iÚ
(
m
));

4228 
TEST
(
F›ldFÜPoš‹rTe¡
, 
CªDesüibeS–fW™hF›ldName
) {

4229 
	gM©ch”
<cÚ¡ 
	gASŒuù
*> 
	gm
 = 
F›ld
("f›ld_Çme", &
ASŒuù
::
x
, 
Ge
(0));

4231 
EXPECT_EQ
("i ª objeù who£ f›ld `f›ld_Çme` i >ğ0", 
Desüibe
(
m
));

4232 
EXPECT_EQ
("is‡n object whose field `field_name` isn't >= 0",

4233 
DesüibeNeg©iÚ
(
m
));

4237 
TEST
(
F›ldFÜPoš‹rTe¡
, 
CªEx¶ašM©chResuÉ
) {

4238 
	gM©ch”
<cÚ¡ 
	gASŒuù
*> 
	gm
 = 
F›ld
(&
ASŒuù
::
x
, 
Ge
(0));

4240 
ASŒuù
 
	ga
;

4241 
	ga
.
	gx
 = 1;

4242 
EXPECT_EQ
("", 
Ex¶aš
(
m
, 
¡©ic_ÿ¡
<cÚ¡ 
ASŒuù
*>(
nuÎ±r
)));

4243 
EXPECT_EQ
("which…ošt tØª objeù who£ giv’ f›ld i 1" + 
OfTy³
("int"),

4244 
Ex¶aš
(
m
, &
a
));

4246 
	gm
 = 
F›ld
(&
ASŒuù
::
x
, 
G»©”Thª
(0));

4247 
EXPECT_EQ
("which…ošt tØª objeù who£ giv’ f›ld i 1" + 
OfTy³
("int") +

4248 ", which i 1 mÜthª 0", 
Ex¶aš
(
m
, &
a
));

4251 
TEST
(
F›ldFÜPoš‹rTe¡
, 
CªEx¶ašM©chResuÉW™hF›ldName
) {

4252 
	gM©ch”
<cÚ¡ 
	gASŒuù
*> 
	gm
 = 
F›ld
("f›ld_Çme", &
ASŒuù
::
x
, 
Ge
(0));

4254 
ASŒuù
 
	ga
;

4255 
	ga
.
	gx
 = 1;

4256 
EXPECT_EQ
("", 
Ex¶aš
(
m
, 
¡©ic_ÿ¡
<cÚ¡ 
ASŒuù
*>(
nuÎ±r
)));

4257 
EXPECT_EQ
(

4258 "which…ošt tØª objeù who£ f›ld `f›ld_Çme` i 1" + 
OfTy³
("int"),

4259 
Ex¶aš
(
m
, &
a
));

4261 
	gm
 = 
F›ld
("f›ld_Çme", &
ASŒuù
::
x
, 
G»©”Thª
(0));

4262 
EXPECT_EQ
("which…ointso‡n object whose field `field_name` is 1" +

4263 
OfTy³
("int") + ", which is 1 morehan 0",

4264 
Ex¶aš
(
m
, &
a
));

4268 şas 
	cACÏss
 {

4269 
	gpublic
:

4270 
ACÏss
(è: 
n_
(0) {}

4273 
n
(ècÚ¡ {  
n_
; }

4275 
£t_n
(
Ãw_n
è{ 
	gn_
 =‚ew_n; }

4278 cÚ¡ 
	g¡d
::
¡ršg
& 
s
(ècÚ¡ {  
s_
; }

4280 cÚ¡ 
	g¡d
::
¡ršg
& 
s_»f
(ècÚ¡ & {  
s_
; }

4282 
£t_s
(cÚ¡ 
¡d
::
¡ršg
& 
Ãw_s
è{ 
s_
 =‚ew_s; }

4285 & 
x
(ècÚ¡ {  
	gx_
; }

4287 
	g´iv©e
:

4288 
n_
;

4289 
	g¡d
::
¡ršg
 
s_
;

4291 
	gx_
;

4294 
	gACÏss
::
x_
 = 0.0;

4297 şas 
	cD”ivedCÏss
 : 
public
 
ACÏss
 {

4298 
public
:

4299 
k
(ècÚ¡ {  
k_
; }

4300 
	g´iv©e
:

4301 
k_
;

4306 
TEST
(
Prİ”tyTe¡
, 
WÜksFÜNÚReã»nûPrİ”ty
) {

4307 
	gM©ch”
<cÚ¡ 
	gACÏss
&> 
	gm
 = 
Prİ”ty
(&
ACÏss
::
n
, 
Ge
(0));

4308 
	gM©ch”
<cÚ¡ 
	gACÏss
&> 
	gm_w™h_Çme
 = 
Prİ”ty
("n", &
ACÏss
::
n
, 
Ge
(0));

4310 
ACÏss
 
	ga
;

4311 
	ga
.
£t_n
(1);

4312 
EXPECT_TRUE
(
m
.
M©ches
(
a
));

4313 
EXPECT_TRUE
(
m_w™h_Çme
.
M©ches
(
a
));

4315 
	ga
.
£t_n
(-1);

4316 
EXPECT_FALSE
(
m
.
M©ches
(
a
));

4317 
EXPECT_FALSE
(
m_w™h_Çme
.
M©ches
(
a
));

4322 
TEST
(
Prİ”tyTe¡
, 
WÜksFÜReã»nûToCÚ¡Prİ”ty
) {

4323 
	gM©ch”
<cÚ¡ 
	gACÏss
&> 
	gm
 = 
Prİ”ty
(&
ACÏss
::
s
, 
S¹sW™h
("hi"));

4324 
	gM©ch”
<cÚ¡ 
	gACÏss
&> 
	gm_w™h_Çme
 =

4325 
Prİ”ty
("s", &
ACÏss
::
s
, 
S¹sW™h
("hi"));

4327 
ACÏss
 
	ga
;

4328 
	ga
.
£t_s
("hill");

4329 
EXPECT_TRUE
(
m
.
M©ches
(
a
));

4330 
EXPECT_TRUE
(
m_w™h_Çme
.
M©ches
(
a
));

4332 
	ga
.
£t_s
("hole");

4333 
EXPECT_FALSE
(
m
.
M©ches
(
a
));

4334 
EXPECT_FALSE
(
m_w™h_Çme
.
M©ches
(
a
));

4339 
TEST
(
Prİ”tyTe¡
, 
WÜksFÜRefQu®if›dPrİ”ty
) {

4340 
	gM©ch”
<cÚ¡ 
	gACÏss
&> 
	gm
 = 
Prİ”ty
(&
ACÏss
::
s_»f
, 
S¹sW™h
("hi"));

4341 
	gM©ch”
<cÚ¡ 
	gACÏss
&> 
	gm_w™h_Çme
 =

4342 
Prİ”ty
("s", &
ACÏss
::
s_»f
, 
S¹sW™h
("hi"));

4344 
ACÏss
 
	ga
;

4345 
	ga
.
£t_s
("hill");

4346 
EXPECT_TRUE
(
m
.
M©ches
(
a
));

4347 
EXPECT_TRUE
(
m_w™h_Çme
.
M©ches
(
a
));

4349 
	ga
.
£t_s
("hole");

4350 
EXPECT_FALSE
(
m
.
M©ches
(
a
));

4351 
EXPECT_FALSE
(
m_w™h_Çme
.
M©ches
(
a
));

4356 
TEST
(
Prİ”tyTe¡
, 
WÜksFÜReã»nûToNÚCÚ¡Prİ”ty
) {

4357 
	gx
 = 0.0;

4358 
ACÏss
 
	ga
;

4360 
	gM©ch”
<cÚ¡ 
	gACÏss
&> 
	gm
 = 
Prİ”ty
(&
ACÏss
::
x
, 
Ref
(x));

4361 
EXPECT_FALSE
(
m
.
M©ches
(
a
));

4363 
	gm
 = 
Prİ”ty
(&
ACÏss
::
x
, 
NÙ
(
Ref
(x)));

4364 
EXPECT_TRUE
(
m
.
M©ches
(
a
));

4369 
TEST
(
Prİ”tyTe¡
, 
WÜksFÜByV®ueArgum’t
) {

4370 
	gM©ch”
<
	gACÏss
> 
	gm
 = 
Prİ”ty
(&
ACÏss
::
s
, 
S¹sW™h
("hi"));

4372 
ACÏss
 
	ga
;

4373 
	ga
.
£t_s
("hill");

4374 
EXPECT_TRUE
(
m
.
M©ches
(
a
));

4376 
	ga
.
£t_s
("hole");

4377 
EXPECT_FALSE
(
m
.
M©ches
(
a
));

4382 
TEST
(
Prİ”tyTe¡
, 
WÜksFÜArgum’tOfSubTy³
) {

4385 
	gM©ch”
<cÚ¡ 
	gD”ivedCÏss
&> 
	gm
 = 
Prİ”ty
(&
ACÏss
::
n
, 
Ge
(0));

4387 
D”ivedCÏss
 
	gd
;

4388 
	gd
.
£t_n
(1);

4389 
EXPECT_TRUE
(
m
.
M©ches
(
d
));

4391 
	gd
.
£t_n
(-1);

4392 
EXPECT_FALSE
(
m
.
M©ches
(
d
));

4397 
TEST
(
Prİ”tyTe¡
, 
WÜksFÜCom·tibËM©ch”Ty³
) {

4399 
	gM©ch”
<cÚ¡ 
	gACÏss
&> 
	gm
 = 
Prİ”ty
(&
ACÏss
::
n
,

4400 
M©ch”
<sigÃd >(
Ge
(0)));

4402 
	gM©ch”
<cÚ¡ 
	gACÏss
&> 
	gm_w™h_Çme
 =

4403 
Prİ”ty
("n", &
ACÏss
::
n
, 
M©ch”
<sigÃd >(
Ge
(0)));

4405 
ACÏss
 
	ga
;

4406 
EXPECT_TRUE
(
m
.
M©ches
(
a
));

4407 
EXPECT_TRUE
(
m_w™h_Çme
.
M©ches
(
a
));

4408 
	ga
.
£t_n
(-1);

4409 
EXPECT_FALSE
(
m
.
M©ches
(
a
));

4410 
EXPECT_FALSE
(
m_w™h_Çme
.
M©ches
(
a
));

4414 
TEST
(
Prİ”tyTe¡
, 
CªDesüibeS–f
) {

4415 
	gM©ch”
<cÚ¡ 
	gACÏss
&> 
	gm
 = 
Prİ”ty
(&
ACÏss
::
n
, 
Ge
(0));

4417 
EXPECT_EQ
("i ª objeù who£ giv’…rİ”ty i >ğ0", 
Desüibe
(
m
));

4418 
EXPECT_EQ
("is‡n object whose given…roperty isn't >= 0",

4419 
DesüibeNeg©iÚ
(
m
));

4422 
TEST
(
Prİ”tyTe¡
, 
CªDesüibeS–fW™hPrİ”tyName
) {

4423 
	gM©ch”
<cÚ¡ 
	gACÏss
&> 
	gm
 = 
Prİ”ty
("çncy_Çme", &
ACÏss
::
n
, 
Ge
(0));

4425 
EXPECT_EQ
("i ª objeù who£…rİ”ty `çncy_Çme` i >ğ0", 
Desüibe
(
m
));

4426 
EXPECT_EQ
("is‡n object whose…roperty `fancy_name` isn't >= 0",

4427 
DesüibeNeg©iÚ
(
m
));

4431 
TEST
(
Prİ”tyTe¡
, 
CªEx¶ašM©chResuÉ
) {

4432 
	gM©ch”
<cÚ¡ 
	gACÏss
&> 
	gm
 = 
Prİ”ty
(&
ACÏss
::
n
, 
Ge
(0));

4434 
ACÏss
 
	ga
;

4435 
	ga
.
£t_n
(1);

4436 
EXPECT_EQ
("who£ giv’…rİ”ty i 1" + 
OfTy³
("št"), 
Ex¶aš
(
m
, 
a
));

4438 
	gm
 = 
Prİ”ty
(&
ACÏss
::
n
, 
G»©”Thª
(0));

4439 
EXPECT_EQ
(

4440 "who£ giv’…rİ”ty i 1" + 
OfTy³
("int") + ", which is 1 morehan 0",

4441 
Ex¶aš
(
m
, 
a
));

4444 
TEST
(
Prİ”tyTe¡
, 
CªEx¶ašM©chResuÉW™hPrİ”tyName
) {

4445 
	gM©ch”
<cÚ¡ 
	gACÏss
&> 
	gm
 = 
Prİ”ty
("çncy_Çme", &
ACÏss
::
n
, 
Ge
(0));

4447 
ACÏss
 
	ga
;

4448 
	ga
.
£t_n
(1);

4449 
EXPECT_EQ
("who£…rİ”ty `çncy_Çme` i 1" + 
OfTy³
("št"), 
Ex¶aš
(
m
, 
a
));

4451 
	gm
 = 
Prİ”ty
("çncy_Çme", &
ACÏss
::
n
, 
G»©”Thª
(0));

4452 
EXPECT_EQ
("who£…rİ”ty `çncy_Çme` i 1" + 
OfTy³
("int") +

4454 
Ex¶aš
(
m
, 
a
));

4458 
TEST
(
Prİ”tyFÜPoš‹rTe¡
, 
WÜksFÜPoš‹rToCÚ¡
) {

4459 
	gM©ch”
<cÚ¡ 
	gACÏss
*> 
	gm
 = 
Prİ”ty
(&
ACÏss
::
n
, 
Ge
(0));

4461 
ACÏss
 
	ga
;

4462 
	ga
.
£t_n
(1);

4463 
EXPECT_TRUE
(
m
.
M©ches
(&
a
));

4465 
	ga
.
£t_n
(-1);

4466 
EXPECT_FALSE
(
m
.
M©ches
(&
a
));

4470 
TEST
(
Prİ”tyFÜPoš‹rTe¡
, 
WÜksFÜPoš‹rToNÚCÚ¡
) {

4471 
	gM©ch”
<
	gACÏss
*> 
	gm
 = 
Prİ”ty
(&
ACÏss
::
s
, 
S¹sW™h
("hi"));

4473 
ACÏss
 
	ga
;

4474 
	ga
.
£t_s
("hill");

4475 
EXPECT_TRUE
(
m
.
M©ches
(&
a
));

4477 
	ga
.
£t_s
("hole");

4478 
EXPECT_FALSE
(
m
.
M©ches
(&
a
));

4483 
TEST
(
Prİ”tyFÜPoš‹rTe¡
, 
WÜksFÜReã»nûToCÚ¡Poš‹r
) {

4484 
	gM©ch”
<
ACÏss
* cÚ¡&> 
	gm
 = 
Prİ”ty
(&ACÏss::
s
, 
S¹sW™h
("hi"));

4486 
ACÏss
 
	ga
;

4487 
	ga
.
£t_s
("hill");

4488 
EXPECT_TRUE
(
m
.
M©ches
(&
a
));

4490 
	ga
.
£t_s
("hole");

4491 
EXPECT_FALSE
(
m
.
M©ches
(&
a
));

4495 
TEST
(
Prİ”tyFÜPoš‹rTe¡
, 
WÜksFÜReã»nûToNÚCÚ¡Prİ”ty
) {

4496 
	gM©ch”
<cÚ¡ 
	gACÏss
*> 
	gm
 = 
Prİ”ty
(&
ACÏss
::
x
, 
_
);

4497 
EXPECT_FALSE
(
m
.
M©ches
(
nuÎ±r
));

4502 
TEST
(
Prİ”tyFÜPoš‹rTe¡
, 
WÜksFÜArgum’tOfSubTy³
) {

4505 
	gM©ch”
<cÚ¡ 
	gD”ivedCÏss
*> 
	gm
 = 
Prİ”ty
(&
ACÏss
::
n
, 
Ge
(0));

4507 
D”ivedCÏss
 
	gd
;

4508 
	gd
.
£t_n
(1);

4509 
EXPECT_TRUE
(
m
.
M©ches
(&
d
));

4511 
	gd
.
£t_n
(-1);

4512 
EXPECT_FALSE
(
m
.
M©ches
(&
d
));

4516 
TEST
(
Prİ”tyFÜPoš‹rTe¡
, 
CªDesüibeS–f
) {

4517 
	gM©ch”
<cÚ¡ 
	gACÏss
*> 
	gm
 = 
Prİ”ty
(&
ACÏss
::
n
, 
Ge
(0));

4519 
EXPECT_EQ
("i ª objeù who£ giv’…rİ”ty i >ğ0", 
Desüibe
(
m
));

4520 
EXPECT_EQ
("is‡n object whose given…roperty isn't >= 0",

4521 
DesüibeNeg©iÚ
(
m
));

4524 
TEST
(
Prİ”tyFÜPoš‹rTe¡
, 
CªDesüibeS–fW™hPrİ”tyDesütiÚ
) {

4525 
	gM©ch”
<cÚ¡ 
	gACÏss
*> 
	gm
 = 
Prİ”ty
("çncy_Çme", &
ACÏss
::
n
, 
Ge
(0));

4527 
EXPECT_EQ
("i ª objeù who£…rİ”ty `çncy_Çme` i >ğ0", 
Desüibe
(
m
));

4528 
EXPECT_EQ
("is‡n object whose…roperty `fancy_name` isn't >= 0",

4529 
DesüibeNeg©iÚ
(
m
));

4533 
TEST
(
Prİ”tyFÜPoš‹rTe¡
, 
CªEx¶ašM©chResuÉ
) {

4534 
	gM©ch”
<cÚ¡ 
	gACÏss
*> 
	gm
 = 
Prİ”ty
(&
ACÏss
::
n
, 
Ge
(0));

4536 
ACÏss
 
	ga
;

4537 
	ga
.
£t_n
(1);

4538 
EXPECT_EQ
("", 
Ex¶aš
(
m
, 
¡©ic_ÿ¡
<cÚ¡ 
ACÏss
*>(
nuÎ±r
)));

4539 
EXPECT_EQ
(

4540 "which…ošt tØª objeù who£ giv’…rİ”ty i 1" + 
OfTy³
("int"),

4541 
Ex¶aš
(
m
, &
a
));

4543 
	gm
 = 
Prİ”ty
(&
ACÏss
::
n
, 
G»©”Thª
(0));

4544 
EXPECT_EQ
("which…ointso‡n object whose given…roperty is 1" +

4545 
OfTy³
("int") + ", which is 1 morehan 0",

4546 
Ex¶aš
(
m
, &
a
));

4549 
TEST
(
Prİ”tyFÜPoš‹rTe¡
, 
CªEx¶ašM©chResuÉW™hPrİ”tyName
) {

4550 
	gM©ch”
<cÚ¡ 
	gACÏss
*> 
	gm
 = 
Prİ”ty
("çncy_Çme", &
ACÏss
::
n
, 
Ge
(0));

4552 
ACÏss
 
	ga
;

4553 
	ga
.
£t_n
(1);

4554 
EXPECT_EQ
("", 
Ex¶aš
(
m
, 
¡©ic_ÿ¡
<cÚ¡ 
ACÏss
*>(
nuÎ±r
)));

4555 
EXPECT_EQ
("which…ointso‡n object whose…roperty `fancy_name` is 1" +

4556 
OfTy³
("int"),

4557 
Ex¶aš
(
m
, &
a
));

4559 
	gm
 = 
Prİ”ty
("çncy_Çme", &
ACÏss
::
n
, 
G»©”Thª
(0));

4560 
EXPECT_EQ
("which…ointso‡n object whose…roperty `fancy_name` is 1" +

4561 
OfTy³
("int") + ", which is 1 morehan 0",

4562 
Ex¶aš
(
m
, &
a
));

4569 
	g¡d
::
¡ršg
 
IÁToSŒšgFunùiÚ
(
šput
) {

4570  
šput
 == 1 ? "foo" : "bar";

4573 
TEST
(
ResuÉOfTe¡
, 
WÜksFÜFunùiÚPoš‹rs
) {

4574 
	gM©ch”
<> 
	gm©ch”
 = 
ResuÉOf
(&
IÁToSŒšgFunùiÚ
, 
Eq
(
¡d
::
¡ršg
("foo")));

4576 
EXPECT_TRUE
(
m©ch”
.
M©ches
(1));

4577 
EXPECT_FALSE
(
m©ch”
.
M©ches
(2));

4581 
TEST
(
ResuÉOfTe¡
, 
CªDesüibeIt£lf
) {

4582 
	gM©ch”
<> 
	gm©ch”
 = 
ResuÉOf
(&
IÁToSŒšgFunùiÚ
, 
SŒEq
("foo"));

4584 
EXPECT_EQ
("is mapped byhe given callableo‡ valuehat "

4585 "i equ®Ø\"foo\"", 
Desüibe
(
m©ch”
));

4586 
EXPECT_EQ
("is mapped byhe given callableo‡ valuehat "

4587 "i¢'ˆequ®Ø\"foo\"", 
DesüibeNeg©iÚ
(
m©ch”
));

4591 
IÁFunùiÚ
(
šput
è{  
	gšput
 == 42 ? 80 : 90; }

4593 
TEST
(
ResuÉOfTe¡
, 
CªEx¶ašM©chResuÉ
) {

4594 
	gM©ch”
<> 
	gm©ch”
 = 
ResuÉOf
(&
IÁFunùiÚ
, 
Ge
(85));

4595 
EXPECT_EQ
("which i m­³d byhgiv’ c®ÏbËØ90" + 
OfTy³
("int"),

4596 
Ex¶aš
(
m©ch”
, 36));

4598 
	gm©ch”
 = 
ResuÉOf
(&
IÁFunùiÚ
, 
G»©”Thª
(85));

4599 
EXPECT_EQ
("which i m­³d byhgiv’ c®ÏbËØ90" + 
OfTy³
("int") +

4600 ", which i 5 mÜthª 85", 
Ex¶aš
(
m©ch”
, 36));

4605 
TEST
(
ResuÉOfTe¡
, 
WÜksFÜNÚReã»nûResuÉs
) {

4606 
	gM©ch”
<> 
	gm©ch”
 = 
ResuÉOf
(&
IÁFunùiÚ
, 
Eq
(80));

4608 
EXPECT_TRUE
(
m©ch”
.
M©ches
(42));

4609 
EXPECT_FALSE
(
m©ch”
.
M©ches
(36));

4614 & 
DoubËFunùiÚ
(& 
šput
è{  
	gšput
; }

4616 
	gUncİyabË
& 
RefUncİyabËFunùiÚ
(
UncİyabË
& 
obj
) {

4617  
	gobj
;

4620 
TEST
(
ResuÉOfTe¡
, 
WÜksFÜReã»nûToNÚCÚ¡ResuÉs
) {

4621 
	gx
 = 3.14;

4622 
	gx2
 = 
x
;

4623 
	gM©ch”
<&> 
	gm©ch”
 = 
ResuÉOf
(&
DoubËFunùiÚ
, 
Ref
(
x
));

4625 
EXPECT_TRUE
(
m©ch”
.
M©ches
(
x
));

4626 
EXPECT_FALSE
(
m©ch”
.
M©ches
(
x2
));

4629 
UncİyabË
 
obj
(0);

4630 
UncİyabË
 
obj2
(0);

4631 
	gM©ch”
<
	gUncİyabË
&> 
	gm©ch”2
 =

4632 
ResuÉOf
(&
RefUncİyabËFunùiÚ
, 
Ref
(
obj
));

4634 
EXPECT_TRUE
(
m©ch”2
.
M©ches
(
obj
));

4635 
EXPECT_FALSE
(
m©ch”2
.
M©ches
(
obj2
));

4640 cÚ¡ 
	g¡d
::
¡ršg
& 
SŒšgFunùiÚ
(cÚ¡ 
¡d
::¡ršg& 
šput
) {  input; }

4642 
TEST
(
ResuÉOfTe¡
, 
WÜksFÜReã»nûToCÚ¡ResuÉs
) {

4643 
	g¡d
::
¡ršg
 
s
 = "foo";

4644 
	g¡d
::
¡ršg
 
s2
 = 
s
;

4645 
	gM©ch”
<cÚ¡ 
	g¡d
::
¡ršg
&> 
m©ch”
 = 
ResuÉOf
(&
SŒšgFunùiÚ
, 
Ref
(
s
));

4647 
EXPECT_TRUE
(
m©ch”
.
M©ches
(
s
));

4648 
EXPECT_FALSE
(
m©ch”
.
M©ches
(
s2
));

4653 
TEST
(
ResuÉOfTe¡
, 
WÜksFÜCom·tibËM©ch”Ty³s
) {

4655 
	gM©ch”
<> 
	gm©ch”
 = 
ResuÉOf
(
IÁFunùiÚ
, 
M©ch”
<sigÃd >(
Ge
(85)));

4657 
EXPECT_TRUE
(
m©ch”
.
M©ches
(36));

4658 
EXPECT_FALSE
(
m©ch”
.
M©ches
(42));

4663 
TEST
(
ResuÉOfD—thTe¡
, 
D›sOnNuÎFunùiÚPoš‹rs
) {

4664 
EXPECT_DEATH_IF_SUPPORTED
(

4665 
ResuÉOf
(
¡©ic_ÿ¡
<
¡d
::
¡ršg
 (*)(
dummy
)>(
nuÎ±r
),

4666 
Eq
(
¡d
::
¡ršg
("foo"))),

4672 
TEST
(
ResuÉOfTe¡
, 
WÜksFÜFunùiÚReã»nûs
) {

4673 
	gM©ch”
<> 
	gm©ch”
 = 
ResuÉOf
(
IÁToSŒšgFunùiÚ
, 
SŒEq
("foo"));

4674 
EXPECT_TRUE
(
m©ch”
.
M©ches
(1));

4675 
EXPECT_FALSE
(
m©ch”
.
M©ches
(2));

4680 
	sFunùÜ
 {

4681 
	g¡d
::
¡ršg
 
İ”©Ü
()(
šput
) const {

4682  
IÁToSŒšgFunùiÚ
(
šput
);

4686 
TEST
(
ResuÉOfTe¡
, 
WÜksFÜFunùÜs
) {

4687 
	gM©ch”
<> 
	gm©ch”
 = 
ResuÉOf
(
FunùÜ
(), 
Eq
(
¡d
::
¡ršg
("foo")));

4689 
EXPECT_TRUE
(
m©ch”
.
M©ches
(1));

4690 
EXPECT_FALSE
(
m©ch”
.
M©ches
(2));

4696 
	sPŞymÜphicFunùÜ
 {

4697 
	t»suÉ_ty³
;

4698 
İ”©Ü
()(
	gn
) { ‚; }

4699 
İ”©Ü
()(cÚ¡ * 
	gs
è{  
	g¡©ic_ÿ¡
<>(
¡¾’
(
s
)); }

4700 
	g¡d
::
¡ršg
 
İ”©Ü
()(*
p
) { … ? "good…tr" : "null"; }

4703 
TEST
(
ResuÉOfTe¡
, 
WÜksFÜPŞymÜphicFunùÜs
) {

4704 
	gM©ch”
<> 
	gm©ch”_št
 = 
ResuÉOf
(
PŞymÜphicFunùÜ
(), 
Ge
(5));

4706 
EXPECT_TRUE
(
m©ch”_št
.
M©ches
(10));

4707 
EXPECT_FALSE
(
m©ch”_št
.
M©ches
(2));

4709 
	gM©ch”
<cÚ¡ *> 
	gm©ch”_¡ršg
 = 
ResuÉOf
(
PŞymÜphicFunùÜ
(), 
Ge
(5));

4711 
EXPECT_TRUE
(
m©ch”_¡ršg
.
M©ches
("long string"));

4712 
EXPECT_FALSE
(
m©ch”_¡ršg
.
M©ches
("shrt"));

4715 
TEST
(
ResuÉOfTe¡
, 
WÜksFÜPŞymÜphicFunùÜsIgnÜšgResuÉTy³
) {

4716 
	gM©ch”
<*> 
	gm©ch”
 = 
ResuÉOf
(
PŞymÜphicFunùÜ
(), "good…tr");

4718 
	gn
 = 0;

4719 
EXPECT_TRUE
(
m©ch”
.
M©ches
(&
n
));

4720 
EXPECT_FALSE
(
m©ch”
.
M©ches
(
nuÎ±r
));

4723 
TEST
(
ResuÉOfTe¡
, 
WÜksFÜLambdas
) {

4724 
	gM©ch”
<> 
	gm©ch”
 = 
ResuÉOf
(

4725 [](
¡r_Ën
) {

4726  
¡d
::
¡ršg
(
¡©ic_ÿ¡
<
size_t
>(
¡r_Ën
), 'x');

4729 
EXPECT_TRUE
(
m©ch”
.
M©ches
(3));

4730 
EXPECT_FALSE
(
m©ch”
.
M©ches
(1));

4733 
TEST
(
ResuÉOfTe¡
, 
WÜksFÜNÚCİyabËArgum’ts
) {

4734 
	gM©ch”
<
	g¡d
::
unique_±r
<>> 
m©ch”
 = 
ResuÉOf
(

4735 [](cÚ¡ 
¡d
::
unique_±r
<>& 
¡r_Ën
) {

4736  
¡d
::
¡ršg
(
¡©ic_ÿ¡
<
size_t
>(*
¡r_Ën
), 'x');

4739 
EXPECT_TRUE
(
m©ch”
.
M©ches
(
¡d
::
unique_±r
<>(
Ãw
 (3))));

4740 
EXPECT_FALSE
(
m©ch”
.
M©ches
(
¡d
::
unique_±r
<>(
Ãw
 (1))));

4743 cÚ¡ * 
Reã»ncšgFunùiÚ
(cÚ¡ & 
n
è{  &
	gn
; }

4745 
	sReã»ncšgFunùÜ
 {

4746 cÚ¡ * 
	t»suÉ_ty³
;

4747 
»suÉ_ty³
 
İ”©Ü
()(cÚ¡ & 
	gn
) {  &n; }

4750 
TEST
(
ResuÉOfTe¡
, 
WÜksFÜReã»ncšgC®ÏbËs
) {

4751 cÚ¡ 
	gn
 = 1;

4752 cÚ¡ 
	gn2
 = 1;

4753 
	gM©ch”
<cÚ¡ &> 
	gm©ch”2
 = 
ResuÉOf
(
Reã»ncšgFunùiÚ
, 
Eq
(&
n
));

4754 
EXPECT_TRUE
(
m©ch”2
.
M©ches
(
n
));

4755 
EXPECT_FALSE
(
m©ch”2
.
M©ches
(
n2
));

4757 
	gM©ch”
<cÚ¡ &> 
	gm©ch”3
 = 
ResuÉOf
(
Reã»ncšgFunùÜ
(), 
Eq
(&
n
));

4758 
EXPECT_TRUE
(
m©ch”3
.
M©ches
(
n
));

4759 
EXPECT_FALSE
(
m©ch”3
.
M©ches
(
n2
));

4762 şas 
	cDivisibËByIm¶
 {

4763 
	gpublic
:

4764 
ex¶ic™
 
DivisibËByIm¶
(
a_divid”
è: 
divid”_
(a_divider) {}

4767 
‹m¶©e
 <
ty³Çme
 
T
>

4768 
boŞ
 
M©chAndEx¶aš
(cÚ¡ 
T
& 
n
, 
M©chResuÉLi¡’”
* 
li¡’”
) const {

4769 *
	gli¡’”
 << "which i " << (
	gn
 % 
	gdivid”_
) << " modulo "

4770 << 
	gdivid”_
;

4771  (
	gn
 % 
	gdivid”_
) == 0;

4774 
DesüibeTo
(
o¡»am
* 
os
) const {

4775 *
	gos
 << "i divisibË by " << 
	gdivid”_
;

4778 
DesüibeNeg©iÚTo
(
o¡»am
* 
os
) const {

4779 *
	gos
 << "i nÙ divisibË by " << 
	gdivid”_
;

4782 
£t_divid”
(
a_divid”
è{ 
	gdivid”_
 =‡_divider; }

4783 
divid”
(ècÚ¡ {  
	gdivid”_
; }

4785 
	g´iv©e
:

4786 
divid”_
;

4789 
	gPŞymÜphicM©ch”
<
	gDivisibËByIm¶
> 
DivisibËBy
(
n
) {

4790  
MakePŞymÜphicM©ch”
(
DivisibËByIm¶
(
n
));

4795 
TEST
(
Ex¶ašM©chResuÉTe¡
, 
AÎOf_F®£_F®£
) {

4796 cÚ¡ 
	gM©ch”
<> 
	gm
 = 
AÎOf
(
DivisibËBy
(4), DivisibleBy(3));

4797 
EXPECT_EQ
("which i 1 modulØ4", 
Ex¶aš
(
m
, 5));

4802 
TEST
(
Ex¶ašM©chResuÉTe¡
, 
AÎOf_F®£_True
) {

4803 cÚ¡ 
	gM©ch”
<> 
	gm
 = 
AÎOf
(
DivisibËBy
(4), DivisibleBy(3));

4804 
EXPECT_EQ
("which i 2 modulØ4", 
Ex¶aš
(
m
, 6));

4809 
TEST
(
Ex¶ašM©chResuÉTe¡
, 
AÎOf_True_F®£
) {

4810 cÚ¡ 
	gM©ch”
<> 
	gm
 = 
AÎOf
(
Ge
(1), 
DivisibËBy
(3));

4811 
EXPECT_EQ
("which i 2 modulØ3", 
Ex¶aš
(
m
, 5));

4816 
TEST
(
Ex¶ašM©chResuÉTe¡
, 
AÎOf_True_True
) {

4817 cÚ¡ 
	gM©ch”
<> 
	gm
 = 
AÎOf
(
DivisibËBy
(2), DivisibleBy(3));

4818 
EXPECT_EQ
("which i 0 modulØ2,‡nd which i 0 modulØ3", 
Ex¶aš
(
m
, 6));

4821 
TEST
(
Ex¶ašM©chResuÉTe¡
, 
AÎOf_True_True_2
) {

4822 cÚ¡ 
	gM©ch”
<> 
	gm
 = 
AÎOf
(
Ge
(2), 
Le
(3));

4823 
EXPECT_EQ
("", 
Ex¶aš
(
m
, 2));

4826 
TEST
(
Ex¶ašm©ch”ResuÉTe¡
, 
MÚomÜphicM©ch”
) {

4827 cÚ¡ 
	gM©ch”
<> 
	gm
 = 
G»©”Thª
(5);

4828 
EXPECT_EQ
("which i 1 mÜthª 5", 
Ex¶aš
(
m
, 6));

4835 şas 
	cNÙCİyabË
 {

4836 
	gpublic
:

4837 
ex¶ic™
 
NÙCİyabË
(
a_v®ue
è: 
v®ue_
(a_value) {}

4839 
v®ue
(ècÚ¡ {  
v®ue_
; }

4841 
boŞ
 
	gİ”©Ü
==(cÚ¡ 
NÙCİyabË
& 
rhs
) const {

4842  
v®ue
(è=ğ
rhs
.value();

4845 
boŞ
 
	gİ”©Ü
>=(cÚ¡ 
NÙCİyabË
& 
rhs
) const {

4846  
v®ue
(è>ğ
rhs
.value();

4848 
	g´iv©e
:

4849 
v®ue_
;

4851 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
NÙCİyabË
);

4854 
TEST
(
ByRefTe¡
, 
AÎowsNÙCİyabËCÚ¡V®ueInM©ch”s
) {

4855 cÚ¡ 
NÙCİyabË
 
cÚ¡_v®ue1
(1);

4856 cÚ¡ 
	gM©ch”
<cÚ¡ 
	gNÙCİyabË
&> 
	gm
 = 
Eq
(
ByRef
(
cÚ¡_v®ue1
));

4858 cÚ¡ 
NÙCİyabË
 
n1
(1), 
n2
(2);

4859 
EXPECT_TRUE
(
m
.
M©ches
(
n1
));

4860 
EXPECT_FALSE
(
m
.
M©ches
(
n2
));

4863 
TEST
(
ByRefTe¡
, 
AÎowsNÙCİyabËV®ueInM©ch”s
) {

4864 
NÙCİyabË
 
v®ue2
(2);

4865 cÚ¡ 
	gM©ch”
<
	gNÙCİyabË
&> 
	gm
 = 
Ge
(
ByRef
(
v®ue2
));

4867 
NÙCİyabË
 
n1
(1), 
n2
(2);

4868 
EXPECT_FALSE
(
m
.
M©ches
(
n1
));

4869 
EXPECT_TRUE
(
m
.
M©ches
(
n2
));

4872 
TEST
(
IsEm±yTe¡
, 
Im¶em’tsIsEm±y
) {

4873 
	gveùÜ
<> 
	gcÚš”
;

4874 
EXPECT_THAT
(
cÚš”
, 
IsEm±y
());

4875 
	gcÚš”
.
push_back
(0);

4876 
EXPECT_THAT
(
cÚš”
, 
NÙ
(
IsEm±y
()));

4877 
	gcÚš”
.
push_back
(1);

4878 
EXPECT_THAT
(
cÚš”
, 
NÙ
(
IsEm±y
()));

4881 
TEST
(
IsEm±yTe¡
, 
WÜksW™hSŒšg
) {

4882 
	g¡d
::
¡ršg
 
‹xt
;

4883 
EXPECT_THAT
(
‹xt
, 
IsEm±y
());

4884 
	g‹xt
 = "foo";

4885 
EXPECT_THAT
(
‹xt
, 
NÙ
(
IsEm±y
()));

4886 
	g‹xt
 = 
¡d
::
¡ršg
("\0", 1);

4887 
EXPECT_THAT
(
‹xt
, 
NÙ
(
IsEm±y
()));

4890 
TEST
(
IsEm±yTe¡
, 
CªDesüibeS–f
) {

4891 
	gM©ch”
<
	gveùÜ
<> > 
	gm
 = 
IsEm±y
();

4892 
EXPECT_EQ
("i em±y", 
Desüibe
(
m
));

4893 
EXPECT_EQ
("i¢'ˆem±y", 
DesüibeNeg©iÚ
(
m
));

4896 
TEST
(
IsEm±yTe¡
, 
Ex¶ašsResuÉ
) {

4897 
	gM©ch”
<
	gveùÜ
<> > 
	gm
 = 
IsEm±y
();

4898 
	gveùÜ
<> 
	gcÚš”
;

4899 
EXPECT_EQ
("", 
Ex¶aš
(
m
, 
cÚš”
));

4900 
	gcÚš”
.
push_back
(0);

4901 
EXPECT_EQ
("who£ sizi 1", 
Ex¶aš
(
m
, 
cÚš”
));

4904 
TEST
(
IsEm±yTe¡
, 
WÜksW™hMoveOÆy
) {

4905 
CÚš”H–³r
 
	gh–³r
;

4906 
EXPECT_CALL
(
h–³r
, 
C®l
(
IsEm±y
()));

4907 
	gh–³r
.
C®l
({});

4910 
TEST
(
IsTrueTe¡
, 
IsTrueIsF®£
) {

4911 
EXPECT_THAT
(
Œue
, 
IsTrue
());

4912 
EXPECT_THAT
(
çl£
, 
IsF®£
());

4913 
EXPECT_THAT
(
Œue
, 
NÙ
(
IsF®£
()));

4914 
EXPECT_THAT
(
çl£
, 
NÙ
(
IsTrue
()));

4915 
EXPECT_THAT
(0, 
NÙ
(
IsTrue
()));

4916 
EXPECT_THAT
(0, 
IsF®£
());

4917 
EXPECT_THAT
(
nuÎ±r
, 
NÙ
(
IsTrue
()));

4918 
EXPECT_THAT
(
nuÎ±r
, 
IsF®£
());

4919 
EXPECT_THAT
(-1, 
IsTrue
());

4920 
EXPECT_THAT
(-1, 
NÙ
(
IsF®£
()));

4921 
EXPECT_THAT
(1, 
IsTrue
());

4922 
EXPECT_THAT
(1, 
NÙ
(
IsF®£
()));

4923 
EXPECT_THAT
(2, 
IsTrue
());

4924 
EXPECT_THAT
(2, 
NÙ
(
IsF®£
()));

4925 
	ga
 = 42;

4926 
EXPECT_THAT
(
a
, 
IsTrue
());

4927 
EXPECT_THAT
(
a
, 
NÙ
(
IsF®£
()));

4928 
EXPECT_THAT
(&
a
, 
IsTrue
());

4929 
EXPECT_THAT
(&
a
, 
NÙ
(
IsF®£
()));

4930 
EXPECT_THAT
(
çl£
, 
NÙ
(
IsTrue
()));

4931 
EXPECT_THAT
(
Œue
, 
NÙ
(
IsF®£
()));

4932 
EXPECT_THAT
(
¡d
::
Œue_ty³
(), 
IsTrue
());

4933 
EXPECT_THAT
(
¡d
::
Œue_ty³
(), 
NÙ
(
IsF®£
()));

4934 
EXPECT_THAT
(
¡d
::
çl£_ty³
(), 
IsF®£
());

4935 
EXPECT_THAT
(
¡d
::
çl£_ty³
(), 
NÙ
(
IsTrue
()));

4936 
EXPECT_THAT
(
nuÎ±r
, 
NÙ
(
IsTrue
()));

4937 
EXPECT_THAT
(
nuÎ±r
, 
IsF®£
());

4938 
	g¡d
::
unique_±r
<> 
nuÎ_unique
;

4939 
	g¡d
::
unique_±r
<> 
nÚnuÎ_unique
(
Ãw
 (0));

4940 
EXPECT_THAT
(
nuÎ_unique
, 
NÙ
(
IsTrue
()));

4941 
EXPECT_THAT
(
nuÎ_unique
, 
IsF®£
());

4942 
EXPECT_THAT
(
nÚnuÎ_unique
, 
IsTrue
());

4943 
EXPECT_THAT
(
nÚnuÎ_unique
, 
NÙ
(
IsF®£
()));

4946 
TEST
(
SizeIsTe¡
, 
Im¶em’tsSizeIs
) {

4947 
	gveùÜ
<> 
	gcÚš”
;

4948 
EXPECT_THAT
(
cÚš”
, 
SizeIs
(0));

4949 
EXPECT_THAT
(
cÚš”
, 
NÙ
(
SizeIs
(1)));

4950 
	gcÚš”
.
push_back
(0);

4951 
EXPECT_THAT
(
cÚš”
, 
NÙ
(
SizeIs
(0)));

4952 
EXPECT_THAT
(
cÚš”
, 
SizeIs
(1));

4953 
	gcÚš”
.
push_back
(0);

4954 
EXPECT_THAT
(
cÚš”
, 
NÙ
(
SizeIs
(0)));

4955 
EXPECT_THAT
(
cÚš”
, 
SizeIs
(2));

4958 
TEST
(
SizeIsTe¡
, 
WÜksW™hM­
) {

4959 
	gm­
<
	g¡d
::
¡ršg
, > 
	gcÚš”
;

4960 
EXPECT_THAT
(
cÚš”
, 
SizeIs
(0));

4961 
EXPECT_THAT
(
cÚš”
, 
NÙ
(
SizeIs
(1)));

4962 
	gcÚš”
.
š£¹
(
make_·œ
("foo", 1));

4963 
EXPECT_THAT
(
cÚš”
, 
NÙ
(
SizeIs
(0)));

4964 
EXPECT_THAT
(
cÚš”
, 
SizeIs
(1));

4965 
	gcÚš”
.
š£¹
(
make_·œ
("bar", 2));

4966 
EXPECT_THAT
(
cÚš”
, 
NÙ
(
SizeIs
(0)));

4967 
EXPECT_THAT
(
cÚš”
, 
SizeIs
(2));

4970 
TEST
(
SizeIsTe¡
, 
WÜksW™hReã»nûs
) {

4971 
	gveùÜ
<> 
	gcÚš”
;

4972 
	gM©ch”
<cÚ¡ 
	gveùÜ
<>&> 
	gm
 = 
SizeIs
(1);

4973 
EXPECT_THAT
(
cÚš”
, 
NÙ
(
m
));

4974 
	gcÚš”
.
push_back
(0);

4975 
EXPECT_THAT
(
cÚš”
, 
m
);

4978 
TEST
(
SizeIsTe¡
, 
WÜksW™hMoveOÆy
) {

4979 
CÚš”H–³r
 
	gh–³r
;

4980 
EXPECT_CALL
(
h–³r
, 
C®l
(
SizeIs
(3)));

4981 
	gh–³r
.
C®l
(
MakeUniquePŒs
({1, 2, 3}));

4986 
	sMšim®i¡Cu¡omTy³
 {

4987 
size
() const {  1; }

4989 
TEST
(
SizeIsTe¡
, 
WÜksW™hMšim®i¡Cu¡omTy³
) {

4990 
Mšim®i¡Cu¡omTy³
 
	gcÚš”
;

4991 
EXPECT_THAT
(
cÚš”
, 
SizeIs
(1));

4992 
EXPECT_THAT
(
cÚš”
, 
NÙ
(
SizeIs
(0)));

4995 
TEST
(
SizeIsTe¡
, 
CªDesüibeS–f
) {

4996 
	gM©ch”
<
	gveùÜ
<> > 
	gm
 = 
SizeIs
(2);

4997 
EXPECT_EQ
("sizi equ®Ø2", 
Desüibe
(
m
));

4998 
EXPECT_EQ
("sizi¢'ˆequ®Ø2", 
DesüibeNeg©iÚ
(
m
));

5001 
TEST
(
SizeIsTe¡
, 
Ex¶ašsResuÉ
) {

5002 
	gM©ch”
<
	gveùÜ
<> > 
	gm1
 = 
SizeIs
(2);

5003 
	gM©ch”
<
	gveùÜ
<> > 
	gm2
 = 
SizeIs
(
Lt
(2u));

5004 
	gM©ch”
<
	gveùÜ
<> > 
	gm3
 = 
SizeIs
(
AnyOf
(0, 3));

5005 
	gM©ch”
<
	gveùÜ
<> > 
	gm4
 = 
SizeIs
(
Gt
(1u));

5006 
	gveùÜ
<> 
	gcÚš”
;

5007 
EXPECT_EQ
("who£ siz0 dÛ¢'ˆm©ch", 
Ex¶aš
(
m1
, 
cÚš”
));

5008 
EXPECT_EQ
("who£ siz0 m©ches", 
Ex¶aš
(
m2
, 
cÚš”
));

5009 
EXPECT_EQ
("who£ siz0 m©ches", 
Ex¶aš
(
m3
, 
cÚš”
));

5010 
EXPECT_EQ
("who£ siz0 dÛ¢'ˆm©ch", 
Ex¶aš
(
m4
, 
cÚš”
));

5011 
	gcÚš”
.
push_back
(0);

5012 
	gcÚš”
.
push_back
(0);

5013 
EXPECT_EQ
("who£ siz2 m©ches", 
Ex¶aš
(
m1
, 
cÚš”
));

5014 
EXPECT_EQ
("who£ siz2 dÛ¢'ˆm©ch", 
Ex¶aš
(
m2
, 
cÚš”
));

5015 
EXPECT_EQ
("who£ siz2 dÛ¢'ˆm©ch", 
Ex¶aš
(
m3
, 
cÚš”
));

5016 
EXPECT_EQ
("who£ siz2 m©ches", 
Ex¶aš
(
m4
, 
cÚš”
));

5019 #ià
GTEST_HAS_TYPED_TEST


5023 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

5024 şas 
	cCÚš”EqTe¡
 : 
public
 
‹¡šg
::
Te¡
 {};

5026 
	g‹¡šg
::
	tTy³s
<

5027 
	t£t
<>,

5028 
	tveùÜ
<
	tsize_t
>,

5029 
	tmuÉi£t
<
	tsize_t
>,

5030 
	tli¡
<> >

5031 
	tCÚš”EqTe¡Ty³s
;

5033 
TYPED_TEST_SUITE
(
CÚš”EqTe¡
, 
CÚš”EqTe¡Ty³s
);

5036 
TYPED_TEST
(
CÚš”EqTe¡
, 
Equ®sS–f
) {

5037 cÚ¡ 
	gv®s
[] = {1, 1, 2, 3, 5, 8};

5038 
Ty³P¬am
 
my_£t
(
v®s
, vals + 6);

5039 cÚ¡ 
	gM©ch”
<
	gTy³P¬am
> 
	gm
 = 
CÚš”Eq
(
my_£t
);

5040 
EXPECT_TRUE
(
m
.
M©ches
(
my_£t
));

5041 
EXPECT_EQ
("", 
Ex¶aš
(
m
, 
my_£t
));

5045 
TYPED_TEST
(
CÚš”EqTe¡
, 
V®ueMissšg
) {

5046 cÚ¡ 
	gv®s
[] = {1, 1, 2, 3, 5, 8};

5047 cÚ¡ 
	g‹¡_v®s
[] = {2, 1, 8, 5};

5048 
Ty³P¬am
 
my_£t
(
v®s
, vals + 6);

5049 
Ty³P¬am
 
‹¡_£t
(
‹¡_v®s
,est_vals + 4);

5050 cÚ¡ 
	gM©ch”
<
	gTy³P¬am
> 
	gm
 = 
CÚš”Eq
(
my_£t
);

5051 
EXPECT_FALSE
(
m
.
M©ches
(
‹¡_£t
));

5052 
EXPECT_EQ
("which doesn't haveheseƒxpectedƒlements: 3",

5053 
Ex¶aš
(
m
, 
‹¡_£t
));

5057 
TYPED_TEST
(
CÚš”EqTe¡
, 
V®ueAdded
) {

5058 cÚ¡ 
	gv®s
[] = {1, 1, 2, 3, 5, 8};

5059 cÚ¡ 
	g‹¡_v®s
[] = {1, 2, 3, 5, 8, 46};

5060 
Ty³P¬am
 
my_£t
(
v®s
, vals + 6);

5061 
Ty³P¬am
 
‹¡_£t
(
‹¡_v®s
,est_vals + 6);

5062 cÚ¡ 
	gM©ch”
<cÚ¡ 
	gTy³P¬am
&> 
	gm
 = 
CÚš”Eq
(
my_£t
);

5063 
EXPECT_FALSE
(
m
.
M©ches
(
‹¡_£t
));

5064 
EXPECT_EQ
("which ha the£ uÃx³ùedƒËm’ts: 46", 
Ex¶aš
(
m
, 
‹¡_£t
));

5068 
TYPED_TEST
(
CÚš”EqTe¡
, 
V®ueAddedAndRemoved
) {

5069 cÚ¡ 
	gv®s
[] = {1, 1, 2, 3, 5, 8};

5070 cÚ¡ 
	g‹¡_v®s
[] = {1, 2, 3, 8, 46};

5071 
Ty³P¬am
 
my_£t
(
v®s
, vals + 6);

5072 
Ty³P¬am
 
‹¡_£t
(
‹¡_v®s
,est_vals + 5);

5073 cÚ¡ 
	gM©ch”
<
	gTy³P¬am
> 
	gm
 = 
CÚš”Eq
(
my_£t
);

5074 
EXPECT_FALSE
(
m
.
M©ches
(
‹¡_£t
));

5075 
EXPECT_EQ
("which hashese unexpectedƒlements: 46,\n"

5077 
Ex¶aš
(
m
, 
‹¡_£t
));

5081 
TYPED_TEST
(
CÚš”EqTe¡
, 
Du¶iÿ‹Difã»nû
) {

5082 cÚ¡ 
	gv®s
[] = {1, 1, 2, 3, 5, 8};

5083 cÚ¡ 
	g‹¡_v®s
[] = {1, 2, 3, 5, 8};

5084 
Ty³P¬am
 
my_£t
(
v®s
, vals + 6);

5085 
Ty³P¬am
 
‹¡_£t
(
‹¡_v®s
,est_vals + 5);

5086 cÚ¡ 
	gM©ch”
<cÚ¡ 
	gTy³P¬am
&> 
	gm
 = 
CÚš”Eq
(
my_£t
);

5089 
EXPECT_EQ
("", 
Ex¶aš
(
m
, 
‹¡_£t
));

5095 
TEST
(
CÚš”EqExŒaTe¡
, 
MuÉËV®uesMissšg
) {

5096 cÚ¡ 
	gv®s
[] = {1, 1, 2, 3, 5, 8};

5097 cÚ¡ 
	g‹¡_v®s
[] = {2, 1, 5};

5098 
	gveùÜ
<> 
my_£t
(
v®s
, vals + 6);

5099 
	gveùÜ
<> 
‹¡_£t
(
‹¡_v®s
,est_vals + 3);

5100 cÚ¡ 
	gM©ch”
<
	gveùÜ
<> > 
	gm
 = 
CÚš”Eq
(
my_£t
);

5101 
EXPECT_FALSE
(
m
.
M©ches
(
‹¡_£t
));

5102 
EXPECT_EQ
("which doesn't haveheseƒxpectedƒlements: 3, 8",

5103 
Ex¶aš
(
m
, 
‹¡_£t
));

5108 
TEST
(
CÚš”EqExŒaTe¡
, 
MuÉËV®uesAdded
) {

5109 cÚ¡ 
	gv®s
[] = {1, 1, 2, 3, 5, 8};

5110 cÚ¡ 
	g‹¡_v®s
[] = {1, 2, 92, 3, 5, 8, 46};

5111 
	gli¡
<
	gsize_t
> 
my_£t
(
v®s
, vals + 6);

5112 
	gli¡
<
	gsize_t
> 
‹¡_£t
(
‹¡_v®s
,est_vals + 7);

5113 cÚ¡ 
	gM©ch”
<cÚ¡ 
	gli¡
<
	gsize_t
>&> 
	gm
 = 
CÚš”Eq
(
my_£t
);

5114 
EXPECT_FALSE
(
m
.
M©ches
(
‹¡_£t
));

5115 
EXPECT_EQ
("which hashese unexpectedƒlements: 92, 46",

5116 
Ex¶aš
(
m
, 
‹¡_£t
));

5120 
TEST
(
CÚš”EqExŒaTe¡
, 
MuÉËV®uesAddedAndRemoved
) {

5121 cÚ¡ 
	gv®s
[] = {1, 1, 2, 3, 5, 8};

5122 cÚ¡ 
	g‹¡_v®s
[] = {1, 2, 3, 92, 46};

5123 
	gli¡
<
	gsize_t
> 
my_£t
(
v®s
, vals + 6);

5124 
	gli¡
<
	gsize_t
> 
‹¡_£t
(
‹¡_v®s
,est_vals + 5);

5125 cÚ¡ 
	gM©ch”
<cÚ¡ 
	gli¡
<
	gsize_t
> > 
	gm
 = 
CÚš”Eq
(
my_£t
);

5126 
EXPECT_FALSE
(
m
.
M©ches
(
‹¡_£t
));

5127 
EXPECT_EQ
("which hashese unexpectedƒlements: 92, 46,\n"

5129 
Ex¶aš
(
m
, 
‹¡_£t
));

5134 
TEST
(
CÚš”EqExŒaTe¡
, 
MuÉiS‘OfIÁDu¶iÿ‹Difã»nû
) {

5135 cÚ¡ 
	gv®s
[] = {1, 1, 2, 3, 5, 8};

5136 cÚ¡ 
	g‹¡_v®s
[] = {1, 2, 3, 5, 8};

5137 
	gveùÜ
<> 
my_£t
(
v®s
, vals + 6);

5138 
	gveùÜ
<> 
‹¡_£t
(
‹¡_v®s
,est_vals + 5);

5139 cÚ¡ 
	gM©ch”
<
	gveùÜ
<> > 
	gm
 = 
CÚš”Eq
(
my_£t
);

5140 
EXPECT_TRUE
(
m
.
M©ches
(
my_£t
));

5141 
EXPECT_FALSE
(
m
.
M©ches
(
‹¡_£t
));

5143 
EXPECT_EQ
("", 
Ex¶aš
(
m
, 
‹¡_£t
));

5148 
TEST
(
CÚš”EqExŒaTe¡
, 
WÜksFÜM­s
) {

5149 
	gm­
<, 
	g¡d
::
¡ršg
> 
my_m­
;

5150 
	gmy_m­
[0] = "a";

5151 
	gmy_m­
[1] = "b";

5153 
	gm­
<, 
	g¡d
::
¡ršg
> 
‹¡_m­
;

5154 
	g‹¡_m­
[0] = "aa";

5155 
	g‹¡_m­
[1] = "b";

5157 cÚ¡ 
	gM©ch”
<cÚ¡ 
	gm­
<, 
	g¡d
::
¡ršg
>&> 
m
 = 
CÚš”Eq
(
my_m­
);

5158 
EXPECT_TRUE
(
m
.
M©ches
(
my_m­
));

5159 
EXPECT_FALSE
(
m
.
M©ches
(
‹¡_m­
));

5161 
EXPECT_EQ
("which hashese unexpectedƒlements: (0, \"aa\"),\n"

5163 
Ex¶aš
(
m
, 
‹¡_m­
));

5166 
TEST
(
CÚš”EqExŒaTe¡
, 
WÜksFÜN©iveA¼ay
) {

5167 
	ga1
[] = {1, 2, 3};

5168 
	ga2
[] = {1, 2, 3};

5169 
	gb
[] = {1, 2, 4};

5171 
EXPECT_THAT
(
a1
, 
CÚš”Eq
(
a2
));

5172 
EXPECT_THAT
(
a1
, 
NÙ
(
CÚš”Eq
(
b
)));

5175 
TEST
(
CÚš”EqExŒaTe¡
, 
WÜksFÜTwoDim’siÚ®N©iveA¼ay
) {

5176 cÚ¡ 
	ga1
[][3] = {"hi", "lo"};

5177 cÚ¡ 
	ga2
[][3] = {"hi", "lo"};

5178 cÚ¡ 
	gb
[][3] = {"lo", "hi"};

5181 
EXPECT_THAT
(
a1
, 
CÚš”Eq
(
a2
));

5182 
EXPECT_THAT
(
a1
, 
NÙ
(
CÚš”Eq
(
b
)));

5185 
EXPECT_THAT
(
a1
, 
EËm’tsA»
(
CÚš”Eq
(
a2
[0]), ContainerEq(a2[1])));

5186 
EXPECT_THAT
(
a1
, 
EËm’tsA»
(
NÙ
(
CÚš”Eq
(
b
[0])), CÚš”Eq(
a2
[1])));

5189 
TEST
(
CÚš”EqExŒaTe¡
, 
WÜksFÜN©iveA¼ayAsTu¶e
) {

5190 cÚ¡ 
	ga1
[] = {1, 2, 3};

5191 cÚ¡ 
	ga2
[] = {1, 2, 3};

5192 cÚ¡ 
	gb
[] = {1, 2, 3, 4};

5194 cÚ¡ * cÚ¡ 
	gp1
 = 
a1
;

5195 
EXPECT_THAT
(
¡d
::
make_tu¶e
(
p1
, 3), 
CÚš”Eq
(
a2
));

5196 
EXPECT_THAT
(
¡d
::
make_tu¶e
(
p1
, 3), 
NÙ
(
CÚš”Eq
(
b
)));

5198 cÚ¡ 
	gc
[] = {1, 3, 2};

5199 
EXPECT_THAT
(
¡d
::
make_tu¶e
(
p1
, 3), 
NÙ
(
CÚš”Eq
(
c
)));

5202 
TEST
(
CÚš”EqExŒaTe¡
, 
Cİ›sN©iveA¼ayP¬am‘”
) {

5203 
	g¡d
::
¡ršg
 
a1
[][3] = {

5208 
	g¡d
::
¡ršg
 
a2
[][3] = {

5213 cÚ¡ 
	gM©ch”
<cÚ¡ 
	g¡d
::
¡ršg
(&)[2][3]> 
m
 = 
CÚš”Eq
(
a2
);

5214 
EXPECT_THAT
(
a1
, 
m
);

5216 
	ga2
[0][0] = "ha";

5217 
EXPECT_THAT
(
a1
, 
m
);

5220 
TEST
(
Wh’SÜ‹dByTe¡
, 
WÜksFÜEm±yCÚš”
) {

5221 cÚ¡ 
	gveùÜ
<> 
	gnumb”s
;

5222 
EXPECT_THAT
(
numb”s
, 
Wh’SÜ‹dBy
(
Ëss
<>(), 
EËm’tsA»
()));

5223 
EXPECT_THAT
(
numb”s
, 
NÙ
(
Wh’SÜ‹dBy
(
Ëss
<>(), 
EËm’tsA»
(1))));

5226 
TEST
(
Wh’SÜ‹dByTe¡
, 
WÜksFÜNÚEm±yCÚš”
) {

5227 
	gveùÜ
<> 
	gnumb”s
;

5228 
	gnumb”s
.
push_back
(3);

5229 
	gnumb”s
.
push_back
(1);

5230 
	gnumb”s
.
push_back
(2);

5231 
	gnumb”s
.
push_back
(2);

5232 
EXPECT_THAT
(
numb”s
, 
Wh’SÜ‹dBy
(
g»©”
<>(),

5233 
EËm’tsA»
(3, 2, 2, 1)));

5234 
EXPECT_THAT
(
numb”s
, 
NÙ
(
Wh’SÜ‹dBy
(
g»©”
<>(),

5235 
EËm’tsA»
(1, 2, 2, 3))));

5238 
TEST
(
Wh’SÜ‹dByTe¡
, 
WÜksFÜNÚVeùÜCÚš”
) {

5239 
	gli¡
<
	g¡d
::
¡ršg
> 
wÜds
;

5240 
	gwÜds
.
push_back
("say");

5241 
	gwÜds
.
push_back
("hello");

5242 
	gwÜds
.
push_back
("world");

5243 
EXPECT_THAT
(
wÜds
, 
Wh’SÜ‹dBy
(
Ëss
<
¡d
::
¡ršg
>(),

5244 
EËm’tsA»
("hello", "say", "world")));

5245 
EXPECT_THAT
(
wÜds
, 
NÙ
(
Wh’SÜ‹dBy
(
Ëss
<
¡d
::
¡ršg
>(),

5246 
EËm’tsA»
("say", "hello", "world"))));

5249 
TEST
(
Wh’SÜ‹dByTe¡
, 
WÜksFÜN©iveA¼ay
) {

5250 cÚ¡ 
	gnumb”s
[] = {1, 3, 2, 4};

5251 cÚ¡ 
	gsÜ‹d_numb”s
[] = {1, 2, 3, 4};

5252 
EXPECT_THAT
(
numb”s
, 
Wh’SÜ‹dBy
(
Ëss
<>(), 
EËm’tsA»
(1, 2, 3, 4)));

5253 
EXPECT_THAT
(
numb”s
, 
Wh’SÜ‹dBy
(
Ëss
<>(),

5254 
EËm’tsA»A¼ay
(
sÜ‹d_numb”s
)));

5255 
EXPECT_THAT
(
numb”s
, 
NÙ
(
Wh’SÜ‹dBy
(
Ëss
<>(), 
EËm’tsA»
(1, 3, 2, 4))));

5258 
TEST
(
Wh’SÜ‹dByTe¡
, 
CªDesüibeS–f
) {

5259 cÚ¡ 
	gM©ch”
<
	gveùÜ
<> > 
	gm
 = 
Wh’SÜ‹dBy
(
Ëss
<>(), 
EËm’tsA»
(1, 2));

5260 
EXPECT_EQ
("(when sorted) has 2ƒlements where\n"

5263 
Desüibe
(
m
));

5264 
EXPECT_EQ
("(when sorted) doesn't have 2ƒlements, or\n"

5267 
DesüibeNeg©iÚ
(
m
));

5270 
TEST
(
Wh’SÜ‹dByTe¡
, 
Ex¶ašsM©chResuÉ
) {

5271 cÚ¡ 
	ga
[] = {2, 1};

5272 
EXPECT_EQ
("which is { 1, 2 } when sorted, whoseƒlement #0 doesn't match",

5273 
Ex¶aš
(
Wh’SÜ‹dBy
(
Ëss
<>(), 
EËm’tsA»
(2, 3)), 
a
));

5274 
EXPECT_EQ
("which is { 1, 2 } when sorted",

5275 
Ex¶aš
(
Wh’SÜ‹dBy
(
Ëss
<>(), 
EËm’tsA»
(1, 2)), 
a
));

5281 
TEST
(
Wh’SÜ‹dTe¡
, 
WÜksFÜEm±yCÚš”
) {

5282 cÚ¡ 
	gveùÜ
<> 
	gnumb”s
;

5283 
EXPECT_THAT
(
numb”s
, 
Wh’SÜ‹d
(
EËm’tsA»
()));

5284 
EXPECT_THAT
(
numb”s
, 
NÙ
(
Wh’SÜ‹d
(
EËm’tsA»
(1))));

5287 
TEST
(
Wh’SÜ‹dTe¡
, 
WÜksFÜNÚEm±yCÚš”
) {

5288 
	gli¡
<
	g¡d
::
¡ršg
> 
wÜds
;

5289 
	gwÜds
.
push_back
("3");

5290 
	gwÜds
.
push_back
("1");

5291 
	gwÜds
.
push_back
("2");

5292 
	gwÜds
.
push_back
("2");

5293 
EXPECT_THAT
(
wÜds
, 
Wh’SÜ‹d
(
EËm’tsA»
("1", "2", "2", "3")));

5294 
EXPECT_THAT
(
wÜds
, 
NÙ
(
Wh’SÜ‹d
(
EËm’tsA»
("3", "1", "2", "2"))));

5297 
TEST
(
Wh’SÜ‹dTe¡
, 
WÜksFÜM­Ty³s
) {

5298 
	gm­
<
	g¡d
::
¡ršg
, > 
	gwÜd_couÁs
;

5299 
	gwÜd_couÁs
["and"] = 1;

5300 
	gwÜd_couÁs
["the"] = 1;

5301 
	gwÜd_couÁs
["buffalo"] = 2;

5302 
EXPECT_THAT
(
wÜd_couÁs
,

5303 
Wh’SÜ‹d
(
EËm’tsA»
(
Paœ
("and", 1), Pair("buffalo", 2),

5304 
Paœ
("the", 1))));

5305 
EXPECT_THAT
(
wÜd_couÁs
,

5306 
NÙ
(
Wh’SÜ‹d
(
EËm’tsA»
(
Paœ
("and", 1), Pair("the", 1),

5307 
Paœ
("buffalo", 2)))));

5310 
TEST
(
Wh’SÜ‹dTe¡
, 
WÜksFÜMuÉiM­Ty³s
) {

5311 
	gmuÉim­
<, > 
	gifib
;

5312 
	gifib
.
š£¹
(
make_·œ
(8, 6));

5313 
	gifib
.
š£¹
(
make_·œ
(2, 3));

5314 
	gifib
.
š£¹
(
make_·œ
(1, 1));

5315 
	gifib
.
š£¹
(
make_·œ
(3, 4));

5316 
	gifib
.
š£¹
(
make_·œ
(1, 2));

5317 
	gifib
.
š£¹
(
make_·œ
(5, 5));

5318 
EXPECT_THAT
(
ifib
, 
Wh’SÜ‹d
(
EËm’tsA»
(
Paœ
(1, 1),

5319 
Paœ
(1, 2),

5320 
Paœ
(2, 3),

5321 
Paœ
(3, 4),

5322 
Paœ
(5, 5),

5323 
Paœ
(8, 6))));

5324 
EXPECT_THAT
(
ifib
, 
NÙ
(
Wh’SÜ‹d
(
EËm’tsA»
(
Paœ
(8, 6),

5325 
Paœ
(2, 3),

5326 
Paœ
(1, 1),

5327 
Paœ
(3, 4),

5328 
Paœ
(1, 2),

5329 
Paœ
(5, 5)))));

5332 
TEST
(
Wh’SÜ‹dTe¡
, 
WÜksFÜPŞymÜphicM©ch”
) {

5333 
	g¡d
::
deque
<> 
d
;

5334 
	gd
.
push_back
(2);

5335 
	gd
.
push_back
(1);

5336 
EXPECT_THAT
(
d
, 
Wh’SÜ‹d
(
EËm’tsA»
(1, 2)));

5337 
EXPECT_THAT
(
d
, 
NÙ
(
Wh’SÜ‹d
(
EËm’tsA»
(2, 1))));

5340 
TEST
(
Wh’SÜ‹dTe¡
, 
WÜksFÜVeùÜCÚ¡RefM©ch”
) {

5341 
	g¡d
::
deque
<> 
d
;

5342 
	gd
.
push_back
(2);

5343 
	gd
.
push_back
(1);

5344 
	gM©ch”
<cÚ¡ 
	g¡d
::
veùÜ
<>&> 
veùÜ_m©ch
 = 
EËm’tsA»
(1, 2);

5345 
EXPECT_THAT
(
d
, 
Wh’SÜ‹d
(
veùÜ_m©ch
));

5346 
	gM©ch”
<cÚ¡ 
	g¡d
::
veùÜ
<>&> 
nÙ_veùÜ_m©ch
 = 
EËm’tsA»
(2, 1);

5347 
EXPECT_THAT
(
d
, 
NÙ
(
Wh’SÜ‹d
(
nÙ_veùÜ_m©ch
)));

5352 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

5353 şas 
	cSŒ—mlike
 {

5354 
	g´iv©e
:

5355 
şass
 
CÚ¡I‹r
;

5356 
	gpublic
:

5357 
CÚ¡I‹r
 
	tcÚ¡_™”©Ü
;

5358 
T
 
	tv®ue_ty³
;

5360 
	g‹m¶©e
 <
ty³Çme
 
	gInI‹r
>

5361 
SŒ—mlike
(
InI‹r
 
fœ¡
, InI‹¸
Ï¡
è: 
»mašd”_
(first,†ast) {}

5363 
cÚ¡_™”©Ü
 
begš
() const {

5364  
cÚ¡_™”©Ü
(
this
, 
»mašd”_
.
begš
());

5366 
cÚ¡_™”©Ü
 
’d
() const {

5367  
cÚ¡_™”©Ü
(
this
, 
»mašd”_
.
’d
());

5370 
	g´iv©e
:

5371 
şass
 
CÚ¡I‹r
 : 
public
 
¡d
::
™”©Ü
<¡d::
šput_™”©Ü_g
,

5372 
	gv®ue_ty³
,

5373 
	g±rdiff_t
,

5374 cÚ¡ 
	gv®ue_ty³
*,

5375 cÚ¡ 
	gv®ue_ty³
&> {

5376 
	gpublic
:

5377 
CÚ¡I‹r
(cÚ¡ 
SŒ—mlike
* 
s
,

5378 
ty³Çme
 
¡d
::
li¡
<
v®ue_ty³
>::
™”©Ü
 
pos
)

5379 : 
s_
(
s
), 
pos_
(
pos
) {}

5381 cÚ¡ 
	gv®ue_ty³
& 
	gİ”©Ü
*(ècÚ¡ {  *
	gpos_
; }

5382 cÚ¡ 
v®ue_ty³
* 
	gİ”©Ü
->(ècÚ¡ {  &*
	gpos_
; }

5383 
	gCÚ¡I‹r
& 
	gİ”©Ü
++() {

5384 
	gs_
->
	g»mašd”_
.
”a£
(
pos_
++);

5385  *
	gthis
;

5390 şas 
	cPo¡InüProxy
 {

5391 
	gpublic
:

5392 
ex¶ic™
 
Po¡InüProxy
(cÚ¡ 
v®ue_ty³
& 
v®ue
è: 
v®ue_
(value) {}

5393 
v®ue_ty³
 
İ”©Ü
*(ècÚ¡ {  
v®ue_
; }

5394 
	g´iv©e
:

5395 
v®ue_ty³
 
v®ue_
;

5397 
Po¡InüProxy
 
	gİ”©Ü
++() {

5398 
Po¡InüProxy
 
´oxy
(**
this
);

5399 ++(*
	gthis
);

5400  
	g´oxy
;

5403 
ä›nd
 
boŞ
 
	gİ”©Ü
==(cÚ¡ 
CÚ¡I‹r
& 
a
, cÚ¡ 
	gCÚ¡I‹r
& 
	gb
) {

5404  
	ga
.
	gs_
 =ğ
b
.
s_
 && 
a
.
pos_
 == b.pos_;

5406 
ä›nd
 
boŞ
 
	gİ”©Ü
!=(cÚ¡ 
CÚ¡I‹r
& 
a
, cÚ¡ 
	gCÚ¡I‹r
& 
	gb
) {

5407  !(
	ga
 =ğ
b
);

5410 
	g´iv©e
:

5411 cÚ¡ 
SŒ—mlike
* 
s_
;

5412 
ty³Çme
 
	g¡d
::
li¡
<
v®ue_ty³
>::
™”©Ü
 
pos_
;

5415 
ä›nd
 
	g¡d
::
o¡»am
& 
İ”©Ü
<<(
¡d
::o¡»am& 
os
, cÚ¡ 
	gSŒ—mlike
& 
	gs
) {

5416 
	gos
 << "[";

5417 
ty³Çme
 
	t¡d
::
	tli¡
<
	tv®ue_ty³
>::
	tcÚ¡_™”©Ü
 
	tI‹r
;

5418 cÚ¡ * 
	g£p
 = "";

5419 
I‹r
 
	g™
 = 
s
.
»mašd”_
.
begš
(); iˆ!ğs.»mašd”_.
’d
(); ++it) {

5420 
	gos
 << 
	g£p
 << *
	g™
;

5421 
	g£p
 = ",";

5423 
	gos
 << "]";

5424  
	gos
;

5427 
mubË
 
	g¡d
::
li¡
<
v®ue_ty³
> 
»mašd”_
;

5430 
TEST
(
SŒ—mlikeTe¡
, 
I‹¿tiÚ
) {

5431 cÚ¡ 
	ga
[5] = {2, 1, 4, 5, 3};

5432 
	gSŒ—mlike
<> 
s
(
a
,‡ + 5);

5433 
	gSŒ—mlike
<>::
cÚ¡_™”©Ü
 
™
 = 
s
.
begš
();

5434 cÚ¡ * 
	g
 = 
a
;

5435 
	g™
 !ğ
s
.
’d
()) {

5436 
SCOPED_TRACE
(

 - 
a
);

5437 
EXPECT_EQ
(*

++, *
™
++);

5441 
TEST
(
BegšEndDi¡ªûIsTe¡
, 
WÜksW™hFÜw¬dLi¡
) {

5442 
	g¡d
::
fÜw¬d_li¡
<> 
cÚš”
;

5443 
EXPECT_THAT
(
cÚš”
, 
BegšEndDi¡ªûIs
(0));

5444 
EXPECT_THAT
(
cÚš”
, 
NÙ
(
BegšEndDi¡ªûIs
(1)));

5445 
	gcÚš”
.
push_äÚt
(0);

5446 
EXPECT_THAT
(
cÚš”
, 
NÙ
(
BegšEndDi¡ªûIs
(0)));

5447 
EXPECT_THAT
(
cÚš”
, 
BegšEndDi¡ªûIs
(1));

5448 
	gcÚš”
.
push_äÚt
(0);

5449 
EXPECT_THAT
(
cÚš”
, 
NÙ
(
BegšEndDi¡ªûIs
(0)));

5450 
EXPECT_THAT
(
cÚš”
, 
BegšEndDi¡ªûIs
(2));

5453 
TEST
(
BegšEndDi¡ªûIsTe¡
, 
WÜksW™hNÚStdLi¡
) {

5454 cÚ¡ 
	ga
[5] = {1, 2, 3, 4, 5};

5455 
	gSŒ—mlike
<> 
s
(
a
,‡ + 5);

5456 
EXPECT_THAT
(
s
, 
BegšEndDi¡ªûIs
(5));

5459 
TEST
(
BegšEndDi¡ªûIsTe¡
, 
CªDesüibeS–f
) {

5460 
	gM©ch”
<
	gveùÜ
<> > 
	gm
 = 
BegšEndDi¡ªûIs
(2);

5461 
EXPECT_EQ
("di¡ªû b‘w“Àbegš(èªdƒnd(èi equ®Ø2", 
Desüibe
(
m
));

5462 
EXPECT_EQ
("distance between begin()‡ndƒnd() isn'tƒqualo 2",

5463 
DesüibeNeg©iÚ
(
m
));

5466 
TEST
(
BegšEndDi¡ªûIsTe¡
, 
WÜksW™hMoveOÆy
) {

5467 
CÚš”H–³r
 
	gh–³r
;

5468 
EXPECT_CALL
(
h–³r
, 
C®l
(
BegšEndDi¡ªûIs
(2)));

5469 
	gh–³r
.
C®l
(
MakeUniquePŒs
({1, 2}));

5472 
TEST
(
BegšEndDi¡ªûIsTe¡
, 
Ex¶ašsResuÉ
) {

5473 
	gM©ch”
<
	gveùÜ
<> > 
	gm1
 = 
BegšEndDi¡ªûIs
(2);

5474 
	gM©ch”
<
	gveùÜ
<> > 
	gm2
 = 
BegšEndDi¡ªûIs
(
Lt
(2));

5475 
	gM©ch”
<
	gveùÜ
<> > 
	gm3
 = 
BegšEndDi¡ªûIs
(
AnyOf
(0, 3));

5476 
	gM©ch”
<
	gveùÜ
<> > 
	gm4
 = 
BegšEndDi¡ªûIs
(
G»©”Thª
(1));

5477 
	gveùÜ
<> 
	gcÚš”
;

5478 
EXPECT_EQ
("whose distance between begin()‡ndƒnd() 0 doesn't match",

5479 
Ex¶aš
(
m1
, 
cÚš”
));

5480 
EXPECT_EQ
("whose distance between begin()‡ndƒnd() 0 matches",

5481 
Ex¶aš
(
m2
, 
cÚš”
));

5482 
EXPECT_EQ
("whose distance between begin()‡ndƒnd() 0 matches",

5483 
Ex¶aš
(
m3
, 
cÚš”
));

5484 
EXPECT_EQ
(

5487 
Ex¶aš
(
m4
, 
cÚš”
));

5488 
	gcÚš”
.
push_back
(0);

5489 
	gcÚš”
.
push_back
(0);

5490 
EXPECT_EQ
("whose distance between begin()‡ndƒnd() 2 matches",

5491 
Ex¶aš
(
m1
, 
cÚš”
));

5492 
EXPECT_EQ
("whose distance between begin()‡ndƒnd() 2 doesn't match",

5493 
Ex¶aš
(
m2
, 
cÚš”
));

5494 
EXPECT_EQ
("whose distance between begin()‡ndƒnd() 2 doesn't match",

5495 
Ex¶aš
(
m3
, 
cÚš”
));

5496 
EXPECT_EQ
(

5499 
Ex¶aš
(
m4
, 
cÚš”
));

5502 
TEST
(
Wh’SÜ‹dTe¡
, 
WÜksFÜSŒ—mlike
) {

5505 cÚ¡ 
	ga
[5] = {2, 1, 4, 5, 3};

5506 
	gSŒ—mlike
<> 
s
(
¡d
::
begš
(
a
), std::
’d
(a));

5507 
EXPECT_THAT
(
s
, 
Wh’SÜ‹d
(
EËm’tsA»
(1, 2, 3, 4, 5)));

5508 
EXPECT_THAT
(
s
, 
NÙ
(
Wh’SÜ‹d
(
EËm’tsA»
(2, 1, 4, 5, 3))));

5511 
TEST
(
Wh’SÜ‹dTe¡
, 
WÜksFÜVeùÜCÚ¡RefM©ch”OnSŒ—mlike
) {

5512 cÚ¡ 
	ga
[] = {2, 1, 4, 5, 3};

5513 
	gSŒ—mlike
<> 
s
(
¡d
::
begš
(
a
), std::
’d
(a));

5514 
	gM©ch”
<cÚ¡ 
	g¡d
::
veùÜ
<>&> 
veùÜ_m©ch
 = 
EËm’tsA»
(1, 2, 3, 4, 5);

5515 
EXPECT_THAT
(
s
, 
Wh’SÜ‹d
(
veùÜ_m©ch
));

5516 
EXPECT_THAT
(
s
, 
NÙ
(
Wh’SÜ‹d
(
EËm’tsA»
(2, 1, 4, 5, 3))));

5519 
TEST
(
IsSu³r£tOfTe¡
, 
WÜksFÜN©iveA¼ay
) {

5520 cÚ¡ 
	gsub£t
[] = {1, 4};

5521 cÚ¡ 
	gsu³r£t
[] = {1, 2, 4};

5522 cÚ¡ 
	gdisjošt
[] = {1, 0, 3};

5523 
EXPECT_THAT
(
sub£t
, 
IsSu³r£tOf
(subset));

5524 
EXPECT_THAT
(
sub£t
, 
NÙ
(
IsSu³r£tOf
(
su³r£t
)));

5525 
EXPECT_THAT
(
su³r£t
, 
IsSu³r£tOf
(
sub£t
));

5526 
EXPECT_THAT
(
sub£t
, 
NÙ
(
IsSu³r£tOf
(
disjošt
)));

5527 
EXPECT_THAT
(
disjošt
, 
NÙ
(
IsSu³r£tOf
(
sub£t
)));

5530 
TEST
(
IsSu³r£tOfTe¡
, 
WÜksW™hDu¶iÿ‹s
) {

5531 cÚ¡ 
	gnÙ_’ough
[] = {1, 2};

5532 cÚ¡ 
	g’ough
[] = {1, 1, 2};

5533 cÚ¡ 
	gex³ùed
[] = {1, 1};

5534 
EXPECT_THAT
(
nÙ_’ough
, 
NÙ
(
IsSu³r£tOf
(
ex³ùed
)));

5535 
EXPECT_THAT
(
’ough
, 
IsSu³r£tOf
(
ex³ùed
));

5538 
TEST
(
IsSu³r£tOfTe¡
, 
WÜksFÜEm±y
) {

5539 
	gveùÜ
<> 
	gnumb”s
;

5540 
	gveùÜ
<> 
	gex³ùed
;

5541 
EXPECT_THAT
(
numb”s
, 
IsSu³r£tOf
(
ex³ùed
));

5542 
	gex³ùed
.
push_back
(1);

5543 
EXPECT_THAT
(
numb”s
, 
NÙ
(
IsSu³r£tOf
(
ex³ùed
)));

5544 
	gex³ùed
.
ş—r
();

5545 
	gnumb”s
.
push_back
(1);

5546 
	gnumb”s
.
push_back
(2);

5547 
EXPECT_THAT
(
numb”s
, 
IsSu³r£tOf
(
ex³ùed
));

5548 
	gex³ùed
.
push_back
(1);

5549 
EXPECT_THAT
(
numb”s
, 
IsSu³r£tOf
(
ex³ùed
));

5550 
	gex³ùed
.
push_back
(2);

5551 
EXPECT_THAT
(
numb”s
, 
IsSu³r£tOf
(
ex³ùed
));

5552 
	gex³ùed
.
push_back
(3);

5553 
EXPECT_THAT
(
numb”s
, 
NÙ
(
IsSu³r£tOf
(
ex³ùed
)));

5556 
TEST
(
IsSu³r£tOfTe¡
, 
WÜksFÜSŒ—mlike
) {

5557 cÚ¡ 
	ga
[5] = {1, 2, 3, 4, 5};

5558 
	gSŒ—mlike
<> 
s
(
¡d
::
begš
(
a
), std::
’d
(a));

5560 
	gveùÜ
<> 
	gex³ùed
;

5561 
	gex³ùed
.
push_back
(1);

5562 
	gex³ùed
.
push_back
(2);

5563 
	gex³ùed
.
push_back
(5);

5564 
EXPECT_THAT
(
s
, 
IsSu³r£tOf
(
ex³ùed
));

5566 
	gex³ùed
.
push_back
(0);

5567 
EXPECT_THAT
(
s
, 
NÙ
(
IsSu³r£tOf
(
ex³ùed
)));

5570 
TEST
(
IsSu³r£tOfTe¡
, 
TakesSCÚš”
) {

5571 cÚ¡ 
	gaùu®
[] = {3, 1, 2};

5573 ::
¡d
::
li¡
<> 
ex³ùed
;

5574 
	gex³ùed
.
push_back
(1);

5575 
	gex³ùed
.
push_back
(3);

5576 
EXPECT_THAT
(
aùu®
, 
IsSu³r£tOf
(
ex³ùed
));

5578 
	gex³ùed
.
push_back
(4);

5579 
EXPECT_THAT
(
aùu®
, 
NÙ
(
IsSu³r£tOf
(
ex³ùed
)));

5582 
TEST
(
IsSu³r£tOfTe¡
, 
Desüibe
) {

5583 
	g¡d
::
	tveùÜ
<> 
	tIÁVec
;

5584 
IÁVec
 
	gex³ùed
;

5585 
	gex³ùed
.
push_back
(111);

5586 
	gex³ùed
.
push_back
(222);

5587 
	gex³ùed
.
push_back
(333);

5588 
EXPECT_THAT
(

5589 
Desüibe
<
IÁVec
>(
IsSu³r£tOf
(
ex³ùed
)),

5590 
Eq
("a surjection fromƒlementso„equirementsƒxists suchhat:\n"

5596 
TEST
(
IsSu³r£tOfTe¡
, 
DesüibeNeg©iÚ
) {

5597 
	g¡d
::
	tveùÜ
<> 
	tIÁVec
;

5598 
IÁVec
 
	gex³ùed
;

5599 
	gex³ùed
.
push_back
(111);

5600 
	gex³ùed
.
push_back
(222);

5601 
	gex³ùed
.
push_back
(333);

5602 
EXPECT_THAT
(

5603 
DesüibeNeg©iÚ
<
IÁVec
>(
IsSu³r£tOf
(
ex³ùed
)),

5604 
Eq
("no surjection fromƒlementso„equirementsƒxists suchhat:\n"

5610 
TEST
(
IsSu³r£tOfTe¡
, 
M©chAndEx¶aš
) {

5611 
	g¡d
::
veùÜ
<> 
v
;

5612 
	gv
.
push_back
(2);

5613 
	gv
.
push_back
(3);

5614 
	g¡d
::
veùÜ
<> 
ex³ùed
;

5615 
	gex³ùed
.
push_back
(1);

5616 
	gex³ùed
.
push_back
(2);

5617 
SŒšgM©chResuÉLi¡’”
 
	gli¡’”
;

5618 
ASSERT_FALSE
(
Ex¶ašM©chResuÉ
(
IsSu³r£tOf
(
ex³ùed
), 
v
, &
li¡’”
))

5619 << 
	gli¡’”
.
¡r
();

5620 
EXPECT_THAT
(
li¡’”
.
¡r
(),

5621 
Eq
("wherehe following matchers don't match‡nyƒlements:\n"

5624 
	gv
.
push_back
(1);

5625 
	gli¡’”
.
CË¬
();

5626 
ASSERT_TRUE
(
Ex¶ašM©chResuÉ
(
IsSu³r£tOf
(
ex³ùed
), 
v
, &
li¡’”
))

5627 << 
	gli¡’”
.
¡r
();

5628 
EXPECT_THAT
(
li¡’”
.
¡r
(), 
Eq
("where:\n"

5633 
TEST
(
IsSu³r£tOfTe¡
, 
WÜksFÜRhsIn™Ÿliz”Li¡
) {

5634 cÚ¡ 
	gnumb”s
[] = {1, 3, 6, 2, 4, 5};

5635 
EXPECT_THAT
(
numb”s
, 
IsSu³r£tOf
({1, 2}));

5636 
EXPECT_THAT
(
numb”s
, 
NÙ
(
IsSu³r£tOf
({3, 0})));

5639 
TEST
(
IsSu³r£tOfTe¡
, 
WÜksW™hMoveOÆy
) {

5640 
CÚš”H–³r
 
	gh–³r
;

5641 
EXPECT_CALL
(
h–³r
, 
C®l
(
IsSu³r£tOf
({
Poš‹e
(1)})));

5642 
	gh–³r
.
C®l
(
MakeUniquePŒs
({1, 2}));

5643 
EXPECT_CALL
(
h–³r
, 
C®l
(
NÙ
(
IsSu³r£tOf
({
Poš‹e
(1), Pointee(2)}))));

5644 
	gh–³r
.
C®l
(
MakeUniquePŒs
({2}));

5647 
TEST
(
IsSub£tOfTe¡
, 
WÜksFÜN©iveA¼ay
) {

5648 cÚ¡ 
	gsub£t
[] = {1, 4};

5649 cÚ¡ 
	gsu³r£t
[] = {1, 2, 4};

5650 cÚ¡ 
	gdisjošt
[] = {1, 0, 3};

5651 
EXPECT_THAT
(
sub£t
, 
IsSub£tOf
(subset));

5652 
EXPECT_THAT
(
sub£t
, 
IsSub£tOf
(
su³r£t
));

5653 
EXPECT_THAT
(
su³r£t
, 
NÙ
(
IsSub£tOf
(
sub£t
)));

5654 
EXPECT_THAT
(
sub£t
, 
NÙ
(
IsSub£tOf
(
disjošt
)));

5655 
EXPECT_THAT
(
disjošt
, 
NÙ
(
IsSub£tOf
(
sub£t
)));

5658 
TEST
(
IsSub£tOfTe¡
, 
WÜksW™hDu¶iÿ‹s
) {

5659 cÚ¡ 
	gnÙ_’ough
[] = {1, 2};

5660 cÚ¡ 
	g’ough
[] = {1, 1, 2};

5661 cÚ¡ 
	gaùu®
[] = {1, 1};

5662 
EXPECT_THAT
(
aùu®
, 
NÙ
(
IsSub£tOf
(
nÙ_’ough
)));

5663 
EXPECT_THAT
(
aùu®
, 
IsSub£tOf
(
’ough
));

5666 
TEST
(
IsSub£tOfTe¡
, 
WÜksFÜEm±y
) {

5667 
	gveùÜ
<> 
	gnumb”s
;

5668 
	gveùÜ
<> 
	gex³ùed
;

5669 
EXPECT_THAT
(
numb”s
, 
IsSub£tOf
(
ex³ùed
));

5670 
	gex³ùed
.
push_back
(1);

5671 
EXPECT_THAT
(
numb”s
, 
IsSub£tOf
(
ex³ùed
));

5672 
	gex³ùed
.
ş—r
();

5673 
	gnumb”s
.
push_back
(1);

5674 
	gnumb”s
.
push_back
(2);

5675 
EXPECT_THAT
(
numb”s
, 
NÙ
(
IsSub£tOf
(
ex³ùed
)));

5676 
	gex³ùed
.
push_back
(1);

5677 
EXPECT_THAT
(
numb”s
, 
NÙ
(
IsSub£tOf
(
ex³ùed
)));

5678 
	gex³ùed
.
push_back
(2);

5679 
EXPECT_THAT
(
numb”s
, 
IsSub£tOf
(
ex³ùed
));

5680 
	gex³ùed
.
push_back
(3);

5681 
EXPECT_THAT
(
numb”s
, 
IsSub£tOf
(
ex³ùed
));

5684 
TEST
(
IsSub£tOfTe¡
, 
WÜksFÜSŒ—mlike
) {

5685 cÚ¡ 
	ga
[5] = {1, 2};

5686 
	gSŒ—mlike
<> 
s
(
¡d
::
begš
(
a
), std::
’d
(a));

5688 
	gveùÜ
<> 
	gex³ùed
;

5689 
	gex³ùed
.
push_back
(1);

5690 
EXPECT_THAT
(
s
, 
NÙ
(
IsSub£tOf
(
ex³ùed
)));

5691 
	gex³ùed
.
push_back
(2);

5692 
	gex³ùed
.
push_back
(5);

5693 
EXPECT_THAT
(
s
, 
IsSub£tOf
(
ex³ùed
));

5696 
TEST
(
IsSub£tOfTe¡
, 
TakesSCÚš”
) {

5697 cÚ¡ 
	gaùu®
[] = {3, 1, 2};

5699 ::
¡d
::
li¡
<> 
ex³ùed
;

5700 
	gex³ùed
.
push_back
(1);

5701 
	gex³ùed
.
push_back
(3);

5702 
EXPECT_THAT
(
aùu®
, 
NÙ
(
IsSub£tOf
(
ex³ùed
)));

5704 
	gex³ùed
.
push_back
(2);

5705 
	gex³ùed
.
push_back
(4);

5706 
EXPECT_THAT
(
aùu®
, 
IsSub£tOf
(
ex³ùed
));

5709 
TEST
(
IsSub£tOfTe¡
, 
Desüibe
) {

5710 
	g¡d
::
	tveùÜ
<> 
	tIÁVec
;

5711 
IÁVec
 
	gex³ùed
;

5712 
	gex³ùed
.
push_back
(111);

5713 
	gex³ùed
.
push_back
(222);

5714 
	gex³ùed
.
push_back
(333);

5716 
EXPECT_THAT
(

5717 
Desüibe
<
IÁVec
>(
IsSub£tOf
(
ex³ùed
)),

5718 
Eq
("an injection fromƒlementso„equirementsƒxists suchhat:\n"

5724 
TEST
(
IsSub£tOfTe¡
, 
DesüibeNeg©iÚ
) {

5725 
	g¡d
::
	tveùÜ
<> 
	tIÁVec
;

5726 
IÁVec
 
	gex³ùed
;

5727 
	gex³ùed
.
push_back
(111);

5728 
	gex³ùed
.
push_back
(222);

5729 
	gex³ùed
.
push_back
(333);

5730 
EXPECT_THAT
(

5731 
DesüibeNeg©iÚ
<
IÁVec
>(
IsSub£tOf
(
ex³ùed
)),

5732 
Eq
("no injection fromƒlementso„equirementsƒxists suchhat:\n"

5738 
TEST
(
IsSub£tOfTe¡
, 
M©chAndEx¶aš
) {

5739 
	g¡d
::
veùÜ
<> 
v
;

5740 
	gv
.
push_back
(2);

5741 
	gv
.
push_back
(3);

5742 
	g¡d
::
veùÜ
<> 
ex³ùed
;

5743 
	gex³ùed
.
push_back
(1);

5744 
	gex³ùed
.
push_back
(2);

5745 
SŒšgM©chResuÉLi¡’”
 
	gli¡’”
;

5746 
ASSERT_FALSE
(
Ex¶ašM©chResuÉ
(
IsSub£tOf
(
ex³ùed
), 
v
, &
li¡’”
))

5747 << 
	gli¡’”
.
¡r
();

5748 
EXPECT_THAT
(
li¡’”
.
¡r
(),

5749 
Eq
("wherehe followingƒlements don't match‡ny matchers:\n"

5752 
	gex³ùed
.
push_back
(3);

5753 
	gli¡’”
.
CË¬
();

5754 
ASSERT_TRUE
(
Ex¶ašM©chResuÉ
(
IsSub£tOf
(
ex³ùed
), 
v
, &
li¡’”
))

5755 << 
	gli¡’”
.
¡r
();

5756 
EXPECT_THAT
(
li¡’”
.
¡r
(), 
Eq
("where:\n"

5761 
TEST
(
IsSub£tOfTe¡
, 
WÜksFÜRhsIn™Ÿliz”Li¡
) {

5762 cÚ¡ 
	gnumb”s
[] = {1, 2, 3};

5763 
EXPECT_THAT
(
numb”s
, 
IsSub£tOf
({1, 2, 3, 4}));

5764 
EXPECT_THAT
(
numb”s
, 
NÙ
(
IsSub£tOf
({1, 2})));

5767 
TEST
(
IsSub£tOfTe¡
, 
WÜksW™hMoveOÆy
) {

5768 
CÚš”H–³r
 
	gh–³r
;

5769 
EXPECT_CALL
(
h–³r
, 
C®l
(
IsSub£tOf
({
Poš‹e
(1), Pointee(2)})));

5770 
	gh–³r
.
C®l
(
MakeUniquePŒs
({1}));

5771 
EXPECT_CALL
(
h–³r
, 
C®l
(
NÙ
(
IsSub£tOf
({
Poš‹e
(1)}))));

5772 
	gh–³r
.
C®l
(
MakeUniquePŒs
({2}));

5778 
TEST
(
EËm’sA»SŒ—mTe¡
, 
WÜksFÜSŒ—mlike
) {

5779 cÚ¡ 
	ga
[5] = {1, 2, 3, 4, 5};

5780 
	gSŒ—mlike
<> 
s
(
¡d
::
begš
(
a
), std::
’d
(a));

5781 
EXPECT_THAT
(
s
, 
EËm’tsA»
(1, 2, 3, 4, 5));

5782 
EXPECT_THAT
(
s
, 
NÙ
(
EËm’tsA»
(2, 1, 4, 5, 3)));

5785 
TEST
(
EËm’sA»A¼aySŒ—mTe¡
, 
WÜksFÜSŒ—mlike
) {

5786 cÚ¡ 
	ga
[5] = {1, 2, 3, 4, 5};

5787 
	gSŒ—mlike
<> 
s
(
¡d
::
begš
(
a
), std::
’d
(a));

5789 
	gveùÜ
<> 
	gex³ùed
;

5790 
	gex³ùed
.
push_back
(1);

5791 
	gex³ùed
.
push_back
(2);

5792 
	gex³ùed
.
push_back
(3);

5793 
	gex³ùed
.
push_back
(4);

5794 
	gex³ùed
.
push_back
(5);

5795 
EXPECT_THAT
(
s
, 
EËm’tsA»A¼ay
(
ex³ùed
));

5797 
	gex³ùed
[3] = 0;

5798 
EXPECT_THAT
(
s
, 
NÙ
(
EËm’tsA»A¼ay
(
ex³ùed
)));

5801 
TEST
(
EËm’tsA»Te¡
, 
WÜksW™hUncİyabË
) {

5802 
UncİyabË
 
	gobjs
[2];

5803 
	gobjs
[0].
£t_v®ue
(-3);

5804 
	gobjs
[1].
£t_v®ue
(1);

5805 
EXPECT_THAT
(
objs
, 
EËm’tsA»
(
UncİyabËIs
(-3), 
Truly
(
V®ueIsPos™ive
)));

5808 
TEST
(
EËm’tsA»Te¡
, 
WÜksW™hMoveOÆy
) {

5809 
CÚš”H–³r
 
	gh–³r
;

5810 
EXPECT_CALL
(
h–³r
, 
C®l
(
EËm’tsA»
(
Poš‹e
(1), Pointee(2))));

5811 
	gh–³r
.
C®l
(
MakeUniquePŒs
({1, 2}));

5813 
EXPECT_CALL
(
h–³r
, 
C®l
(
EËm’tsA»A¼ay
({
Poš‹e
(3), Pointee(4)})));

5814 
	gh–³r
.
C®l
(
MakeUniquePŒs
({3, 4}));

5817 
TEST
(
EËm’tsA»Te¡
, 
TakesSCÚš”
) {

5818 cÚ¡ 
	gaùu®
[] = {3, 1, 2};

5820 ::
¡d
::
li¡
<> 
ex³ùed
;

5821 
	gex³ùed
.
push_back
(3);

5822 
	gex³ùed
.
push_back
(1);

5823 
	gex³ùed
.
push_back
(2);

5824 
EXPECT_THAT
(
aùu®
, 
EËm’tsA»A¼ay
(
ex³ùed
));

5826 
	gex³ùed
.
push_back
(4);

5827 
EXPECT_THAT
(
aùu®
, 
NÙ
(
EËm’tsA»A¼ay
(
ex³ùed
)));

5832 
TEST
(
UnÜd”edEËm’tsA»A¼ayTe¡
, 
SucûedsWh’Ex³ùed
) {

5833 cÚ¡ 
	ga
[] = {0, 1, 2, 3, 4};

5834 
	g¡d
::
veùÜ
<> 
s
(
¡d
::
begš
(
a
), std::
’d
(a));

5836 
SŒšgM©chResuÉLi¡’”
 
	gli¡’”
;

5837 
EXPECT_TRUE
(
Ex¶ašM©chResuÉ
(
UnÜd”edEËm’tsA»A¼ay
(
a
),

5838 
s
, &
li¡’”
)è<< 
	gli¡’”
.
¡r
();

5839 } 
	g¡d
::
Ãxt_³rmutiÚ
(
s
.
begš
(), s.
’d
()));

5842 
TEST
(
UnÜd”edEËm’tsA»A¼ayTe¡
, 
VeùÜBoŞ
) {

5843 cÚ¡ 
boŞ
 
	ga
[] = {0, 1, 0, 1, 1};

5844 cÚ¡ 
boŞ
 
	gb
[] = {1, 0, 1, 1, 0};

5845 
	g¡d
::
veùÜ
<
boŞ
> 
ex³ùed
(
¡d
::
begš
(
a
), std::
’d
(a));

5846 
	g¡d
::
veùÜ
<
boŞ
> 
aùu®
(
¡d
::
begš
(
b
), std::
’d
(b));

5847 
SŒšgM©chResuÉLi¡’”
 
	gli¡’”
;

5848 
EXPECT_TRUE
(
Ex¶ašM©chResuÉ
(
UnÜd”edEËm’tsA»A¼ay
(
ex³ùed
),

5849 
aùu®
, &
li¡’”
)è<< 
	gli¡’”
.
¡r
();

5852 
TEST
(
UnÜd”edEËm’tsA»A¼ayTe¡
, 
WÜksFÜSŒ—mlike
) {

5856 cÚ¡ 
	ga
[5] = {2, 1, 4, 5, 3};

5857 
	gSŒ—mlike
<> 
s
(
¡d
::
begš
(
a
), std::
’d
(a));

5859 ::
¡d
::
veùÜ
<> 
ex³ùed
;

5860 
	gex³ùed
.
push_back
(1);

5861 
	gex³ùed
.
push_back
(2);

5862 
	gex³ùed
.
push_back
(3);

5863 
	gex³ùed
.
push_back
(4);

5864 
	gex³ùed
.
push_back
(5);

5865 
EXPECT_THAT
(
s
, 
UnÜd”edEËm’tsA»A¼ay
(
ex³ùed
));

5867 
	gex³ùed
.
push_back
(6);

5868 
EXPECT_THAT
(
s
, 
NÙ
(
UnÜd”edEËm’tsA»A¼ay
(
ex³ùed
)));

5871 
TEST
(
UnÜd”edEËm’tsA»A¼ayTe¡
, 
TakesSCÚš”
) {

5872 cÚ¡ 
	gaùu®
[] = {3, 1, 2};

5874 ::
¡d
::
li¡
<> 
ex³ùed
;

5875 
	gex³ùed
.
push_back
(1);

5876 
	gex³ùed
.
push_back
(2);

5877 
	gex³ùed
.
push_back
(3);

5878 
EXPECT_THAT
(
aùu®
, 
UnÜd”edEËm’tsA»A¼ay
(
ex³ùed
));

5880 
	gex³ùed
.
push_back
(4);

5881 
EXPECT_THAT
(
aùu®
, 
NÙ
(
UnÜd”edEËm’tsA»A¼ay
(
ex³ùed
)));

5885 
TEST
(
UnÜd”edEËm’tsA»A¼ayTe¡
, 
TakesIn™Ÿliz”Li¡
) {

5886 cÚ¡ 
	ga
[5] = {2, 1, 4, 5, 3};

5887 
EXPECT_THAT
(
a
, 
UnÜd”edEËm’tsA»A¼ay
({1, 2, 3, 4, 5}));

5888 
EXPECT_THAT
(
a
, 
NÙ
(
UnÜd”edEËm’tsA»A¼ay
({1, 2, 3, 4, 6})));

5891 
TEST
(
UnÜd”edEËm’tsA»A¼ayTe¡
, 
TakesIn™Ÿliz”Li¡OfCSŒšgs
) {

5892 cÚ¡ 
	g¡d
::
¡ršg
 
a
[5] = {"a", "b", "c", "d", "e"};

5893 
EXPECT_THAT
(
a
, 
UnÜd”edEËm’tsA»A¼ay
({"a", "b", "c", "d", "e"}));

5894 
EXPECT_THAT
(
a
, 
NÙ
(
UnÜd”edEËm’tsA»A¼ay
({"a", "b", "c", "d", "ef"})));

5897 
TEST
(
UnÜd”edEËm’tsA»A¼ayTe¡
, 
TakesIn™Ÿliz”Li¡OfSameTy³dM©ch”s
) {

5898 cÚ¡ 
	ga
[5] = {2, 1, 4, 5, 3};

5899 
EXPECT_THAT
(
a
, 
UnÜd”edEËm’tsA»A¼ay
(

5900 {
Eq
(1), Eq(2), Eq(3), Eq(4), Eq(5)}));

5901 
EXPECT_THAT
(
a
, 
NÙ
(
UnÜd”edEËm’tsA»A¼ay
(

5902 {
Eq
(1), Eq(2), Eq(3), Eq(4), Eq(6)})));

5905 
TEST
(
UnÜd”edEËm’tsA»A¼ayTe¡
,

5906 
TakesIn™Ÿliz”Li¡OfDifã»ÁTy³dM©ch”s
) {

5907 cÚ¡ 
	ga
[5] = {2, 1, 4, 5, 3};

5911 
EXPECT_THAT
(
a
, 
UnÜd”edEËm’tsA»A¼ay
<
M©ch”
<> >(

5912 {
Eq
(1), 
Ne
(-2), 
Ge
(3), 
Le
(4), Eq(5)}));

5913 
EXPECT_THAT
(
a
, 
NÙ
(
UnÜd”edEËm’tsA»A¼ay
<
M©ch”
<> >(

5914 {
Eq
(1), 
Ne
(-2), 
Ge
(3), 
Le
(4), Eq(6)})));

5918 
TEST
(
UnÜd”edEËm’tsA»A¼ayTe¡
, 
WÜksW™hMoveOÆy
) {

5919 
CÚš”H–³r
 
	gh–³r
;

5920 
EXPECT_CALL
(
h–³r
,

5921 
C®l
(
UnÜd”edEËm’tsA»A¼ay
({
Poš‹e
(1), Pointee(2)})));

5922 
	gh–³r
.
C®l
(
MakeUniquePŒs
({2, 1}));

5925 şas 
	cUnÜd”edEËm’tsA»Te¡
 : 
public
 
‹¡šg
::
Te¡
 {

5926 
´Ùeùed
:

5927 
¡d
::
	tveùÜ
<> 
	tIÁVec
;

5930 
TEST_F
(
UnÜd”edEËm’tsA»Te¡
, 
WÜksW™hUncİyabË
) {

5931 
UncİyabË
 
	gobjs
[2];

5932 
	gobjs
[0].
£t_v®ue
(-3);

5933 
	gobjs
[1].
£t_v®ue
(1);

5934 
EXPECT_THAT
(
objs
,

5935 
UnÜd”edEËm’tsA»
(
Truly
(
V®ueIsPos™ive
), 
UncİyabËIs
(-3)));

5938 
TEST_F
(
UnÜd”edEËm’tsA»Te¡
, 
SucûedsWh’Ex³ùed
) {

5939 cÚ¡ 
	ga
[] = {1, 2, 3};

5940 
	g¡d
::
veùÜ
<> 
s
(
¡d
::
begš
(
a
), std::
’d
(a));

5942 
SŒšgM©chResuÉLi¡’”
 
	gli¡’”
;

5943 
EXPECT_TRUE
(
Ex¶ašM©chResuÉ
(
UnÜd”edEËm’tsA»
(1, 2, 3),

5944 
s
, &
li¡’”
)è<< 
	gli¡’”
.
¡r
();

5945 } 
	g¡d
::
Ãxt_³rmutiÚ
(
s
.
begš
(), s.
’d
()));

5948 
TEST_F
(
UnÜd”edEËm’tsA»Te¡
, 
FasWh’AnEËm’tM©chesNoM©ch”
) {

5949 cÚ¡ 
	ga
[] = {1, 2, 3};

5950 
	g¡d
::
veùÜ
<> 
s
(
¡d
::
begš
(
a
), std::
’d
(a));

5951 
	g¡d
::
veùÜ
<
M©ch”
<> > 
mv
;

5952 
	gmv
.
push_back
(1);

5953 
	gmv
.
push_back
(2);

5954 
	gmv
.
push_back
(2);

5956 
SŒšgM©chResuÉLi¡’”
 
	gli¡’”
;

5957 
EXPECT_FALSE
(
Ex¶ašM©chResuÉ
(
UnÜd”edEËm’tsA»A¼ay
(
mv
),

5958 
s
, &
li¡’”
)è<< 
	gli¡’”
.
¡r
();

5961 
TEST_F
(
UnÜd”edEËm’tsA»Te¡
, 
WÜksFÜSŒ—mlike
) {

5965 cÚ¡ 
	ga
[5] = {2, 1, 4, 5, 3};

5966 
	gSŒ—mlike
<> 
s
(
¡d
::
begš
(
a
), std::
’d
(a));

5968 
EXPECT_THAT
(
s
, 
UnÜd”edEËm’tsA»
(1, 2, 3, 4, 5));

5969 
EXPECT_THAT
(
s
, 
NÙ
(
UnÜd”edEËm’tsA»
(2, 2, 3, 4, 5)));

5972 
TEST_F
(
UnÜd”edEËm’tsA»Te¡
, 
WÜksW™hMoveOÆy
) {

5973 
CÚš”H–³r
 
	gh–³r
;

5974 
EXPECT_CALL
(
h–³r
, 
C®l
(
UnÜd”edEËm’tsA»
(
Poš‹e
(1), Pointee(2))));

5975 
	gh–³r
.
C®l
(
MakeUniquePŒs
({2, 1}));

5984 
TEST_F
(
UnÜd”edEËm’tsA»Te¡
, 
P”fÜmªû
) {

5985 
	g¡d
::
veùÜ
<> 
s
;

5986 
	g¡d
::
veùÜ
<
M©ch”
<> > 
mv
;

5987 
	gi
 = 0; i < 100; ++i) {

5988 
	gs
.
push_back
(
i
);

5989 
	gmv
.
push_back
(
_
);

5991 
	gmv
[50] = 
Eq
(0);

5992 
SŒšgM©chResuÉLi¡’”
 
	gli¡’”
;

5993 
EXPECT_TRUE
(
Ex¶ašM©chResuÉ
(
UnÜd”edEËm’tsA»A¼ay
(
mv
),

5994 
s
, &
li¡’”
)è<< 
	gli¡’”
.
¡r
();

6000 
TEST_F
(
UnÜd”edEËm’tsA»Te¡
, 
P”fÜmªûH®fSŒiù
) {

6001 
	g¡d
::
veùÜ
<> 
s
;

6002 
	g¡d
::
veùÜ
<
M©ch”
<> > 
mv
;

6003 
	gi
 = 0; i < 100; ++i) {

6004 
	gs
.
push_back
(
i
);

6005 ià(
	gi
 & 1) {

6006 
	gmv
.
push_back
(
_
);

6008 
	gmv
.
push_back
(
i
);

6011 
SŒšgM©chResuÉLi¡’”
 
	gli¡’”
;

6012 
EXPECT_TRUE
(
Ex¶ašM©chResuÉ
(
UnÜd”edEËm’tsA»A¼ay
(
mv
),

6013 
s
, &
li¡’”
)è<< 
	gli¡’”
.
¡r
();

6016 
TEST_F
(
UnÜd”edEËm’tsA»Te¡
, 
FaMes§geCouÁWrÚg
) {

6017 
	g¡d
::
veùÜ
<> 
v
;

6018 
	gv
.
push_back
(4);

6019 
SŒšgM©chResuÉLi¡’”
 
	gli¡’”
;

6020 
EXPECT_FALSE
(
Ex¶ašM©chResuÉ
(
UnÜd”edEËm’tsA»
(1, 2, 3),

6021 
v
, &
li¡’”
)è<< 
	gli¡’”
.
¡r
();

6022 
EXPECT_THAT
(
li¡’”
.
¡r
(), 
Eq
("which has 1ƒlement"));

6025 
TEST_F
(
UnÜd”edEËm’tsA»Te¡
, 
FaMes§geCouÁWrÚgZ”o
) {

6026 
	g¡d
::
veùÜ
<> 
v
;

6027 
SŒšgM©chResuÉLi¡’”
 
	gli¡’”
;

6028 
EXPECT_FALSE
(
Ex¶ašM©chResuÉ
(
UnÜd”edEËm’tsA»
(1, 2, 3),

6029 
v
, &
li¡’”
)è<< 
	gli¡’”
.
¡r
();

6030 
EXPECT_THAT
(
li¡’”
.
¡r
(), 
Eq
(""));

6033 
TEST_F
(
UnÜd”edEËm’tsA»Te¡
, 
FaMes§geUnm©chedM©ch”s
) {

6034 
	g¡d
::
veùÜ
<> 
v
;

6035 
	gv
.
push_back
(1);

6036 
	gv
.
push_back
(1);

6037 
SŒšgM©chResuÉLi¡’”
 
	gli¡’”
;

6038 
EXPECT_FALSE
(
Ex¶ašM©chResuÉ
(
UnÜd”edEËm’tsA»
(1, 2),

6039 
v
, &
li¡’”
)è<< 
	gli¡’”
.
¡r
();

6040 
EXPECT_THAT
(

6041 
li¡’”
.
¡r
(),

6042 
Eq
("wherehe following matchers don't match‡nyƒlements:\n"

6046 
TEST_F
(
UnÜd”edEËm’tsA»Te¡
, 
FaMes§geUnm©chedEËm’ts
) {

6047 
	g¡d
::
veùÜ
<> 
v
;

6048 
	gv
.
push_back
(1);

6049 
	gv
.
push_back
(2);

6050 
SŒšgM©chResuÉLi¡’”
 
	gli¡’”
;

6051 
EXPECT_FALSE
(
Ex¶ašM©chResuÉ
(
UnÜd”edEËm’tsA»
(1, 1),

6052 
v
, &
li¡’”
)è<< 
	gli¡’”
.
¡r
();

6053 
EXPECT_THAT
(

6054 
li¡’”
.
¡r
(),

6055 
Eq
("wherehe followingƒlements don't match‡ny matchers:\n"

6059 
TEST_F
(
UnÜd”edEËm’tsA»Te¡
, 
FaMes§geUnm©chedM©ch”AndEËm’t
) {

6060 
	g¡d
::
veùÜ
<> 
v
;

6061 
	gv
.
push_back
(2);

6062 
	gv
.
push_back
(3);

6063 
SŒšgM©chResuÉLi¡’”
 
	gli¡’”
;

6064 
EXPECT_FALSE
(
Ex¶ašM©chResuÉ
(
UnÜd”edEËm’tsA»
(1, 2),

6065 
v
, &
li¡’”
)è<< 
	gli¡’”
.
¡r
();

6066 
EXPECT_THAT
(

6067 
li¡’”
.
¡r
(),

6068 
Eq
("where"

6078 
	g¡d
::
¡ršg
 
EMSŒšg
(
–em’t
, 
m©ch”
) {

6079 
¡ršg¡»am
 
	gss
;

6080 
	gss
 << "ÓËm’ˆ#" << 
	g–em’t
 << ", m©ch” #" << 
	gm©ch”
 << ")";

6081  
	gss
.
¡r
();

6084 
TEST_F
(
UnÜd”edEËm’tsA»Te¡
, 
FaMes§geIm³rãùM©chOÆy
) {

6087 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> 
v
;

6088 
	gv
.
push_back
("a");

6089 
	gv
.
push_back
("b");

6090 
	gv
.
push_back
("c");

6091 
SŒšgM©chResuÉLi¡’”
 
	gli¡’”
;

6092 
EXPECT_FALSE
(
Ex¶ašM©chResuÉ
(

6093 
UnÜd”edEËm’tsA»
("a", "a", 
AnyOf
("b", "c")), 
v
, &
li¡’”
))

6094 << 
	gli¡’”
.
¡r
();

6096 
	g¡d
::
¡ršg
 
´efix
 =

6102 
EXPECT_THAT
(

6103 
li¡’”
.
¡r
(),

6104 
AnyOf
(
´efix
 + "{\À " + 
EMSŒšg
(0, 0) +

6105 ",\À " + 
EMSŒšg
(1, 2) + "\n}",

6106 
´efix
 + "{\À " + 
EMSŒšg
(0, 1) +

6107 ",\À " + 
EMSŒšg
(1, 2) + "\n}",

6108 
´efix
 + "{\À " + 
EMSŒšg
(0, 0) +

6109 ",\À " + 
EMSŒšg
(2, 2) + "\n}",

6110 
´efix
 + "{\À " + 
EMSŒšg
(0, 1) +

6111 ",\À " + 
EMSŒšg
(2, 2) + "\n}"));

6114 
TEST_F
(
UnÜd”edEËm’tsA»Te¡
, 
Desüibe
) {

6115 
EXPECT_THAT
(
Desüibe
<
IÁVec
>(
UnÜd”edEËm’tsA»
()),

6116 
Eq
("isƒmpty"));

6117 
EXPECT_THAT
(

6118 
Desüibe
<
IÁVec
>(
UnÜd”edEËm’tsA»
(345)),

6119 
Eq
("has 1ƒlement‡ndhatƒlement isƒqualo 345"));

6120 
EXPECT_THAT
(

6121 
Desüibe
<
IÁVec
>(
UnÜd”edEËm’tsA»
(111, 222, 333)),

6122 
Eq
("has 3ƒlements‡ndhereƒxists some…ermutation "

6129 
TEST_F
(
UnÜd”edEËm’tsA»Te¡
, 
DesüibeNeg©iÚ
) {

6130 
EXPECT_THAT
(
DesüibeNeg©iÚ
<
IÁVec
>(
UnÜd”edEËm’tsA»
()),

6131 
Eq
("isn'tƒmpty"));

6132 
EXPECT_THAT
(

6133 
DesüibeNeg©iÚ
<
IÁVec
>(
UnÜd”edEËm’tsA»
(345)),

6134 
Eq
("doesn't have 1ƒlement, or has 1ƒlementhat isn'tƒqualo 345"));

6135 
EXPECT_THAT
(

6136 
DesüibeNeg©iÚ
<
IÁVec
>(
UnÜd”edEËm’tsA»
(123, 234, 345)),

6137 
Eq
("doesn't have 3ƒlements, orhereƒxists‚o…ermutation "

6144 
	gÇme¥aû
 {

6150 
	g‹m¶©e
 <
ty³Çme
 
	gG¿ph
>

6151 şas 
	cBackŒackšgMaxBPMS‹
 {

6152 
	gpublic
:

6154 
ex¶ic™
 
BackŒackšgMaxBPMS‹
(cÚ¡ 
G¿ph
* 
g
è: 
g¿ph_
(g) { }

6156 
EËm’tM©ch”Paœs
 
Compu‹
() {

6157 ià(
g¿ph_
->
LhsSize
(è=ğ0 || g¿ph_->
RhsSize
() == 0) {

6158  
be¡_so_çr_
;

6160 
	glhs_u£d_
.
assign
(
g¿ph_
->
LhsSize
(), 
kUnu£d
);

6161 
	grhs_u£d_
.
assign
(
g¿ph_
->
RhsSize
(), 
kUnu£d
);

6162 
size_t
 
	gœhs
 = 0; irh < 
	gg¿ph_
->
RhsSize
(); ++irhs) {

6163 
	gm©ches_
.
ş—r
();

6164 
Recur£IÁo
(
œhs
);

6165 ià(
	gbe¡_so_çr_
.
size
(è=ğ
g¿ph_
->
RhsSize
())

6168  
	gbe¡_so_çr_
;

6171 
	g´iv©e
:

6172 cÚ¡ 
size_t
 
kUnu£d
 = 
¡©ic_ÿ¡
<size_t>(-1);

6174 
PushM©ch
(
size_t
 
lhs
, size_ˆ
rhs
) {

6175 
	gm©ches_
.
push_back
(
EËm’tM©ch”Paœ
(
lhs
, 
rhs
));

6176 
	glhs_u£d_
[
lhs
] = 
rhs
;

6177 
	grhs_u£d_
[
rhs
] = 
lhs
;

6178 ià(
	gm©ches_
.
size
(è> 
	gbe¡_so_çr_
.size()) {

6179 
	gbe¡_so_çr_
 = 
m©ches_
;

6183 
PİM©ch
() {

6184 cÚ¡ 
	gEËm’tM©ch”Paœ
& 
	gback
 = 
m©ches_
.
back
();

6185 
	glhs_u£d_
[
back
.
fœ¡
] = 
kUnu£d
;

6186 
	grhs_u£d_
[
back
.
£cÚd
] = 
kUnu£d
;

6187 
	gm©ches_
.
pİ_back
();

6190 
boŞ
 
Recur£IÁo
(
size_t
 
œhs
) {

6191 ià(
	grhs_u£d_
[
œhs
] !ğ
kUnu£d
) {

6192  
Œue
;

6194 
size_t
 
	ghs
 = 0; ilh < 
	gg¿ph_
->
LhsSize
(); ++ilhs) {

6195 ià(
	glhs_u£d_
[
hs
] !ğ
kUnu£d
) {

6198 ià(!
	gg¿ph_
->
HasEdge
(
hs
, 
œhs
)) {

6201 
PushM©ch
(
hs
, 
œhs
);

6202 ià(
	gbe¡_so_çr_
.
size
(è=ğ
g¿ph_
->
RhsSize
()) {

6203  
çl£
;

6205 
size_t
 
	gmi
 = 
œhs
 + 1; m˜< 
	gg¿ph_
->
RhsSize
(); ++mi) {

6206 ià(!
Recur£IÁo
(
mi
)è 
	gçl£
;

6208 
PİM©ch
();

6210  
	gŒue
;

6213 cÚ¡ 
G¿ph
* 
	gg¿ph_
;

6214 
	g¡d
::
veùÜ
<
size_t
> 
lhs_u£d_
;

6215 
	g¡d
::
veùÜ
<
size_t
> 
rhs_u£d_
;

6216 
EËm’tM©ch”Paœs
 
	gm©ches_
;

6217 
EËm’tM©ch”Paœs
 
	gbe¡_so_çr_
;

6220 
	g‹m¶©e
 <
ty³Çme
 
	gG¿ph
>

6221 cÚ¡ 
size_t
 
	gBackŒackšgMaxBPMS‹
<
	gG¿ph
>::
kUnu£d
;

6227 
	g‹m¶©e
 <
ty³Çme
 
	gG¿ph
>

6228 
EËm’tM©ch”Paœs


6229 
FšdBackŒackšgMaxBPM
(cÚ¡ 
G¿ph
& 
g
) {

6230  
	gBackŒackšgMaxBPMS‹
<
	gG¿ph
>(&
	gg
).
Compu‹
();

6233 şas 
	cBackŒackšgBPMTe¡
 : 
public
 ::
‹¡šg
::
Te¡
 { };

6237 
şass
 
	gB¬t™eTe¡
 : 
public
 ::
‹¡šg
::
Te¡W™hP¬am
<
size_t
> {};

6240 
TEST_P
(
B¬t™eTe¡
, 
Exhau¡ive
) {

6241 
size_t
 
	gnodes
 = 
G‘P¬am
();

6242 
M©chM©rix
 
g¿ph
(
nodes
,‚odes);

6244 
EËm’tM©ch”Paœs
 
	gm©ches
 =

6245 
š‹º®
::
FšdMaxB¬t™eM©chšg
(
g¿ph
);

6246 
EXPECT_EQ
(
FšdBackŒackšgMaxBPM
(
g¿ph
).
size
(), 
m©ches
.size())

6247 << "g¿ph: " << 
	gg¿ph
.
DebugSŒšg
();

6250 
	g¡d
::
veùÜ
<
boŞ
> 
£’_–em’t
(
g¿ph
.
LhsSize
());

6251 
	g¡d
::
veùÜ
<
boŞ
> 
£’_m©ch”
(
g¿ph
.
RhsSize
());

6252 
SCOPED_TRACE
(
PrštToSŒšg
(
m©ches
));

6253 
size_t
 
	gi
 = 0; i < 
	gm©ches
.
size
(); ++i) {

6254 
size_t
 
	ghs
 = 
m©ches
[
i
].
fœ¡
;

6255 
size_t
 
	gœhs
 = 
m©ches
[
i
].
£cÚd
;

6256 
EXPECT_TRUE
(
g¿ph
.
HasEdge
(
hs
, 
œhs
));

6257 
EXPECT_FALSE
(
£’_–em’t
[
hs
]);

6258 
EXPECT_FALSE
(
£’_m©ch”
[
œhs
]);

6259 
	g£’_–em’t
[
hs
] = 
Œue
;

6260 
	g£’_m©ch”
[
œhs
] = 
Œue
;

6262 } 
	gg¿ph
.
NextG¿ph
());

6265 
INSTANTIATE_TEST_SUITE_P
(
AÎG¿phs
, 
B¬t™eTe¡
,

6266 ::
‹¡šg
::
Rªge
(
size_t
{0}, size_t{5}));

6269 
şass
 
	gB¬t™eNÚSqu¬eTe¡


6270 : 
public
 ::
‹¡šg
::
Te¡W™hP¬am
<
¡d
::
·œ
<
size_t
, 
	gsize_t
> > {

6273 
TEST_F
(
B¬t™eNÚSqu¬eTe¡
, 
Sim¶eBackŒackšg
) {

6281 
M©chM©rix
 
g
(4, 3);

6282 
cÚ¡ex´
 
	g¡d
::
¬¿y
<
¡d
::¬¿y<
size_t
, 2>, 4> 
	gkEdges
 = {

6284 
size_t
 
	gi
 = 0; i < 
	gkEdges
.
size
(); ++i) {

6285 
	gg
.
S‘Edge
(
kEdges
[
i
][0], kEdges[i][1], 
Œue
);

6287 
EXPECT_THAT
(
FšdBackŒackšgMaxBPM
(
g
),

6288 
EËm’tsA»
(
Paœ
(3, 0),

6289 
Paœ
(
AnyOf
(1, 2), 1),

6290 
Paœ
(0, 2))è<< 
	gg
.
DebugSŒšg
();

6294 
TEST_P
(
B¬t™eNÚSqu¬eTe¡
, 
Exhau¡ive
) {

6295 
size_t
 
	gÆhs
 = 
G‘P¬am
().
fœ¡
;

6296 
size_t
 
	gÄhs
 = 
G‘P¬am
().
£cÚd
;

6297 
M©chM©rix
 
g¿ph
(
Æhs
, 
Ähs
);

6299 
EXPECT_EQ
(
FšdBackŒackšgMaxBPM
(
g¿ph
).
size
(),

6300 
š‹º®
::
FšdMaxB¬t™eM©chšg
(
g¿ph
).
size
())

6301 << "g¿ph: " << 
g¿ph
.
DebugSŒšg
()

6303 << 
PrštToSŒšg
(
FšdBackŒackšgMaxBPM
(
g¿ph
))

6305 << 
PrštToSŒšg
(
š‹º®
::
FšdMaxB¬t™eM©chšg
(
g¿ph
));

6306 } 
	gg¿ph
.
NextG¿ph
());

6309 
INSTANTIATE_TEST_SUITE_P
(
AÎG¿phs
, 
B¬t™eNÚSqu¬eTe¡
,

6310 
‹¡šg
::
V®ues
(

6311 
¡d
::
make_·œ
(1, 2),

6312 
¡d
::
make_·œ
(2, 1),

6313 
¡d
::
make_·œ
(3, 2),

6314 
¡d
::
make_·œ
(2, 3),

6315 
¡d
::
make_·œ
(4, 1),

6316 
¡d
::
make_·œ
(1, 4),

6317 
¡d
::
make_·œ
(4, 3),

6318 
¡d
::
make_·œ
(3, 4)));

6320 
şass
 
	gB¬t™eRªdomTe¡


6321 : 
public
 ::
‹¡šg
::
Te¡W™hP¬am
<
¡d
::
·œ
<, > > {

6325 
TEST_P
(
B¬t™eRªdomTe¡
, 
L¬g”N‘s
) {

6326 
	gnodes
 = 
G‘P¬am
().
fœ¡
;

6327 
	g™”s
 = 
G‘P¬am
().
£cÚd
;

6328 
M©chM©rix
 
g¿ph
(
¡©ic_ÿ¡
<
size_t
>(
nodes
), static_cast<size_t>(nodes));

6330 autØ
	g£ed
 = 
¡©ic_ÿ¡
<
ušt32_t
>(
GTEST_FLAG
(
¿ndom_£ed
));

6331 ià(
	g£ed
 == 0) {

6332 
£ed
 = 
¡©ic_ÿ¡
<
ušt32_t
>(
time
(
nuÎ±r
));

6335 ; 
	g™”s
 > 0; --™”s, ++
	g£ed
) {

6336 
¤ªd
(
¡©ic_ÿ¡
<>(
£ed
));

6337 
	gg¿ph
.
Rªdomize
();

6338 
EXPECT_EQ
(
FšdBackŒackšgMaxBPM
(
g¿ph
).
size
(),

6339 
š‹º®
::
FšdMaxB¬t™eM©chšg
(
g¿ph
).
size
())

6340 << " g¿ph: " << 
g¿ph
.
DebugSŒšg
()

6342 " --" << 
GTEST_FLAG_PREFIX_
 << "¿ndom_£ed=" << 
£ed
;

6347 
INSTANTIATE_TEST_SUITE_P
(
Sam¶es
, 
B¬t™eRªdomTe¡
,

6348 
‹¡šg
::
V®ues
(

6349 
¡d
::
make_·œ
(5, 10000),

6350 
¡d
::
make_·œ
(6, 5000),

6351 
¡d
::
make_·œ
(7, 2000),

6352 
¡d
::
make_·œ
(8, 500),

6353 
¡d
::
make_·œ
(9, 100)));

6357 
TEST
(
IsR—dabËTy³NameTe¡
, 
R‘uºsTrueFÜShÜtNames
) {

6358 
EXPECT_TRUE
(
IsR—dabËTy³Name
("int"));

6359 
EXPECT_TRUE
(
IsR—dabËTy³Name
("const unsigned char*"));

6360 
EXPECT_TRUE
(
IsR—dabËTy³Name
("MyMap<int, void*>"));

6361 
EXPECT_TRUE
(
IsR—dabËTy³Name
("void (*)(int, bool)"));

6364 
TEST
(
IsR—dabËTy³NameTe¡
, 
R‘uºsTrueFÜLÚgNÚTem¶©eNÚFunùiÚNames
) {

6365 
EXPECT_TRUE
(
IsR—dabËTy³Name
("my_long_namespace::MyClassName"));

6366 
EXPECT_TRUE
(
IsR—dabËTy³Name
("int [5][6][7][8][9][10][11]"));

6367 
EXPECT_TRUE
(
IsR—dabËTy³Name
("my_namespace::MyOuterClass::MyInnerClass"));

6370 
TEST
(
IsR—dabËTy³NameTe¡
, 
R‘uºsF®£FÜLÚgTem¶©eNames
) {

6371 
EXPECT_FALSE
(

6372 
IsR—dabËTy³Name
("basic_string<char, std::char_traits<char> >"));

6373 
EXPECT_FALSE
(
IsR—dabËTy³Name
("std::vector<int, std::alloc_traits<int> >"));

6376 
TEST
(
IsR—dabËTy³NameTe¡
, 
R‘uºsF®£FÜLÚgFunùiÚTy³Names
) {

6377 
EXPECT_FALSE
(
IsR—dabËTy³Name
("void (&)(int, bool, char, float)"));

6382 
TEST
(
FÜm©M©ch”DesütiÚTe¡
, 
WÜksFÜEm±yDesütiÚ
) {

6383 
EXPECT_EQ
("isƒven",

6384 
FÜm©M©ch”DesütiÚ
(
çl£
, "IsEv’", 
SŒšgs
()));

6385 
EXPECT_EQ
("not (isƒven)",

6386 
FÜm©M©ch”DesütiÚ
(
Œue
, "IsEv’", 
SŒšgs
()));

6388 cÚ¡ * 
	g·¿ms
[] = {"5"};

6389 
EXPECT_EQ
("equals 5",

6390 
FÜm©M©ch”DesütiÚ
(
çl£
, "Equals",

6391 
SŒšgs
(
·¿ms
,…arams + 1)));

6393 cÚ¡ * 
	g·¿ms2
[] = {"5", "8"};

6394 
EXPECT_EQ
("is in„ange (5, 8)",

6395 
FÜm©M©ch”DesütiÚ
(
çl£
, "IsInRange",

6396 
SŒšgs
(
·¿ms2
,…arams2 + 2)));

6400 
TEST
(
PŞymÜphicM©ch”Te¡
, 
CªAcûssMubËIm¶
) {

6401 
	gPŞymÜphicM©ch”
<
	gDivisibËByIm¶
> 
m
(
DivisibËByIm¶
(42));

6402 
	gDivisibËByIm¶
& 
	gim¶
 = 
m
.
mubË_im¶
();

6403 
EXPECT_EQ
(42, 
im¶
.
divid”
());

6405 
	gim¶
.
£t_divid”
(0);

6406 
EXPECT_EQ
(0, 
m
.
mubË_im¶
().
divid”
());

6410 
TEST
(
PŞymÜphicM©ch”Te¡
, 
CªAcûssIm¶
) {

6411 cÚ¡ 
	gPŞymÜphicM©ch”
<
	gDivisibËByIm¶
> 
m
(
DivisibËByIm¶
(42));

6412 cÚ¡ 
	gDivisibËByIm¶
& 
	gim¶
 = 
m
.
im¶
();

6413 
EXPECT_EQ
(42, 
im¶
.
divid”
());

6416 
TEST
(
M©ch”Tu¶eTe¡
, 
Ex¶ašsM©chFau»
) {

6417 
¡ršg¡»am
 
	gss1
;

6418 
Ex¶ašM©chFau»Tu¶eTo
(

6419 
¡d
::
make_tu¶e
(
M©ch”
<>(
Eq
('a')), 
G»©”Thª
(5)),

6420 
¡d
::
make_tu¶e
('a', 10), &
ss1
);

6421 
EXPECT_EQ
("", 
ss1
.
¡r
());

6423 
¡ršg¡»am
 
	gss2
;

6424 
Ex¶ašM©chFau»Tu¶eTo
(

6425 
¡d
::
make_tu¶e
(
G»©”Thª
(5), 
M©ch”
<>(
Eq
('a'))),

6426 
¡d
::
make_tu¶e
(2, 'b'), &
ss2
);

6427 
EXPECT_EQ
(" Expected‡rg #0: is > 5\n"

6431 
ss2
.
¡r
());

6433 
¡ršg¡»am
 
	gss3
;

6434 
Ex¶ašM©chFau»Tu¶eTo
(

6435 
¡d
::
make_tu¶e
(
G»©”Thª
(5), 
M©ch”
<>(
Eq
('a'))),

6436 
¡d
::
make_tu¶e
(2, 'a'), &
ss3
);

6437 
EXPECT_EQ
(" Expected‡rg #0: is > 5\n"

6439 
ss3
.
¡r
());

6445 
TEST
(
EachTe¡
, 
Ex¶ašsM©chResuÉCÜ»ùly
) {

6446 
	g£t
<> 
	ga
;

6448 
	gM©ch”
<
	g£t
<> > 
	gm
 = 
Each
(2);

6449 
EXPECT_EQ
("", 
Ex¶aš
(
m
, 
a
));

6451 
	gM©ch”
<cÚ¡ (&)[1]> 
	gn
 = 
Each
(1);

6453 cÚ¡ 
	gb
[1] = {1};

6454 
EXPECT_EQ
("", 
Ex¶aš
(
n
, 
b
));

6456 
	gn
 = 
Each
(3);

6457 
EXPECT_EQ
("who£ƒËm’ˆ#0 dÛ¢'ˆm©ch", 
Ex¶aš
(
n
, 
b
));

6459 
	ga
.
š£¹
(1);

6460 
	ga
.
š£¹
(2);

6461 
	ga
.
š£¹
(3);

6462 
	gm
 = 
Each
(
G»©”Thª
(0));

6463 
EXPECT_EQ
("", 
Ex¶aš
(
m
, 
a
));

6465 
	gm
 = 
Each
(
G»©”Thª
(10));

6466 
EXPECT_EQ
("whoseƒlement #0 doesn't match, which is 9†esshan 10",

6467 
Ex¶aš
(
m
, 
a
));

6470 
TEST
(
EachTe¡
, 
DesüibesIt£lfCÜ»ùly
) {

6471 
	gM©ch”
<
	gveùÜ
<> > 
	gm
 = 
Each
(1);

6472 
EXPECT_EQ
("Úly cÚš –em’t th© i equ®Ø1", 
Desüibe
(
m
));

6474 
	gM©ch”
<
	gveùÜ
<> > 
	gm2
 = 
NÙ
(
m
);

6475 
EXPECT_EQ
("cÚš som–em’ˆth© i¢'ˆequ®Ø1", 
Desüibe
(
m2
));

6478 
TEST
(
EachTe¡
, 
M©chesVeùÜWh’AÎEËm’tsM©ch
) {

6479 
	gveùÜ
<> 
	gsome_veùÜ
;

6480 
EXPECT_THAT
(
some_veùÜ
, 
Each
(1));

6481 
	gsome_veùÜ
.
push_back
(3);

6482 
EXPECT_THAT
(
some_veùÜ
, 
NÙ
(
Each
(1)));

6483 
EXPECT_THAT
(
some_veùÜ
, 
Each
(3));

6484 
	gsome_veùÜ
.
push_back
(1);

6485 
	gsome_veùÜ
.
push_back
(2);

6486 
EXPECT_THAT
(
some_veùÜ
, 
NÙ
(
Each
(3)));

6487 
EXPECT_THAT
(
some_veùÜ
, 
Each
(
Lt
(3.5)));

6489 
	gveùÜ
<
	g¡d
::
¡ršg
> 
ªÙh”_veùÜ
;

6490 
	gªÙh”_veùÜ
.
push_back
("fee");

6491 
EXPECT_THAT
(
ªÙh”_veùÜ
, 
Each
(
¡d
::
¡ršg
("fee")));

6492 
	gªÙh”_veùÜ
.
push_back
("fie");

6493 
	gªÙh”_veùÜ
.
push_back
("foe");

6494 
	gªÙh”_veùÜ
.
push_back
("fum");

6495 
EXPECT_THAT
(
ªÙh”_veùÜ
, 
NÙ
(
Each
(
¡d
::
¡ršg
("fee"))));

6498 
TEST
(
EachTe¡
, 
M©chesM­Wh’AÎEËm’tsM©ch
) {

6499 
	gm­
<cÚ¡ *, > 
	gmy_m­
;

6500 cÚ¡ * 
	gb¬
 = "a string";

6501 
	gmy_m­
[
b¬
] = 2;

6502 
EXPECT_THAT
(
my_m­
, 
Each
(
make_·œ
(
b¬
, 2)));

6504 
	gm­
<
	g¡d
::
¡ršg
, > 
	gªÙh”_m­
;

6505 
EXPECT_THAT
(
ªÙh”_m­
, 
Each
(
make_·œ
(
¡d
::
¡ršg
("fee"), 1)));

6506 
	gªÙh”_m­
["fee"] = 1;

6507 
EXPECT_THAT
(
ªÙh”_m­
, 
Each
(
make_·œ
(
¡d
::
¡ršg
("fee"), 1)));

6508 
	gªÙh”_m­
["fie"] = 2;

6509 
	gªÙh”_m­
["foe"] = 3;

6510 
	gªÙh”_m­
["fum"] = 4;

6511 
EXPECT_THAT
(
ªÙh”_m­
, 
NÙ
(
Each
(
make_·œ
(
¡d
::
¡ršg
("fee"), 1))));

6512 
EXPECT_THAT
(
ªÙh”_m­
, 
NÙ
(
Each
(
make_·œ
(
¡d
::
¡ršg
("fum"), 1))));

6513 
EXPECT_THAT
(
ªÙh”_m­
, 
Each
(
Paœ
(
_
, 
Gt
(0))));

6516 
TEST
(
EachTe¡
, 
Acû±sM©ch”
) {

6517 cÚ¡ 
	ga
[] = {1, 2, 3};

6518 
EXPECT_THAT
(
a
, 
Each
(
Gt
(0)));

6519 
EXPECT_THAT
(
a
, 
NÙ
(
Each
(
Gt
(1))));

6522 
TEST
(
EachTe¡
, 
WÜksFÜN©iveA¼ayAsTu¶e
) {

6523 cÚ¡ 
	ga
[] = {1, 2};

6524 cÚ¡ * cÚ¡ 
	gpoš‹r
 = 
a
;

6525 
EXPECT_THAT
(
¡d
::
make_tu¶e
(
poš‹r
, 2), 
Each
(
Gt
(0)));

6526 
EXPECT_THAT
(
¡d
::
make_tu¶e
(
poš‹r
, 2), 
NÙ
(
Each
(
Gt
(1))));

6529 
TEST
(
EachTe¡
, 
WÜksW™hMoveOÆy
) {

6530 
CÚš”H–³r
 
	gh–³r
;

6531 
EXPECT_CALL
(
h–³r
, 
C®l
(
Each
(
Poš‹e
(
Gt
(0)))));

6532 
	gh–³r
.
C®l
(
MakeUniquePŒs
({1, 2}));

6536 şas 
	cIsH®fOfM©ch”
 {

6537 
	gpublic
:

6538 
‹m¶©e
 <
ty³Çme
 
T1
,y³Çm
	gT2
>

6539 
boŞ
 
M©chAndEx¶aš
(cÚ¡ 
¡d
::
tu¶e
<
T1
, 
T2
>& 
a_·œ
,

6540 
M©chResuÉLi¡’”
* 
li¡’”
) const {

6541 ià(
	g¡d
::
g‘
<0>(
a_·œ
è=ğ
¡d
::get<1>(a_pair) / 2) {

6542 *
li¡’”
 << "wh”th£cÚd i " << 
¡d
::
g‘
<1>(
a_·œ
);

6543  
	gŒue
;

6545 *
	gli¡’”
 << "wh”th£cÚd/2 i " << 
	g¡d
::
g‘
<1>(
a_·œ
) / 2;

6546  
	gçl£
;

6550 
DesüibeTo
(
o¡»am
* 
os
) const {

6551 *
	gos
 << "are‡…air wherehe first is half ofhe second";

6554 
DesüibeNeg©iÚTo
(
o¡»am
* 
os
) const {

6555 *
	gos
 << "are‡…air wherehe first isn't half ofhe second";

6559 
	gPŞymÜphicM©ch”
<
	gIsH®fOfM©ch”
> 
IsH®fOf
() {

6560  
MakePŞymÜphicM©ch”
(
IsH®fOfM©ch”
());

6563 
TEST
(
Poštwi£Te¡
, 
DesüibesS–f
) {

6564 
	gveùÜ
<> 
	grhs
;

6565 
	grhs
.
push_back
(1);

6566 
	grhs
.
push_back
(2);

6567 
	grhs
.
push_back
(3);

6568 cÚ¡ 
	gM©ch”
<cÚ¡ 
	gveùÜ
<>&> 
	gm
 = 
Poštwi£
(
IsH®fOf
(), 
rhs
);

6569 
EXPECT_EQ
("contains 3 values, whereƒach value‡nd its corresponding value "

6571 
Desüibe
(
m
));

6572 
EXPECT_EQ
("doesn't containƒxactly 3 values, or contains‡ value x‡t some "

6575 
DesüibeNeg©iÚ
(
m
));

6578 
TEST
(
Poštwi£Te¡
, 
MakesCİyOfRhs
) {

6579 
	gli¡
<sigÃd > 
	grhs
;

6580 
	grhs
.
push_back
(2);

6581 
	grhs
.
push_back
(4);

6583 
	glhs
[] = {1, 2};

6584 cÚ¡ 
	gM©ch”
<cÚ¡ (&)[2]> 
	gm
 = 
Poštwi£
(
IsH®fOf
(), 
rhs
);

6585 
EXPECT_THAT
(
lhs
, 
m
);

6588 
	grhs
.
push_back
(6);

6589 
EXPECT_THAT
(
lhs
, 
m
);

6592 
TEST
(
Poštwi£Te¡
, 
WÜksFÜLhsN©iveA¼ay
) {

6593 cÚ¡ 
	glhs
[] = {1, 2, 3};

6594 
	gveùÜ
<> 
	grhs
;

6595 
	grhs
.
push_back
(2);

6596 
	grhs
.
push_back
(4);

6597 
	grhs
.
push_back
(6);

6598 
EXPECT_THAT
(
lhs
, 
Poštwi£
(
Lt
(), 
rhs
));

6599 
EXPECT_THAT
(
lhs
, 
NÙ
(
Poštwi£
(
Gt
(), 
rhs
)));

6602 
TEST
(
Poštwi£Te¡
, 
WÜksFÜRhsN©iveA¼ay
) {

6603 cÚ¡ 
	grhs
[] = {1, 2, 3};

6604 
	gveùÜ
<> 
	glhs
;

6605 
	glhs
.
push_back
(2);

6606 
	glhs
.
push_back
(4);

6607 
	glhs
.
push_back
(6);

6608 
EXPECT_THAT
(
lhs
, 
Poštwi£
(
Gt
(), 
rhs
));

6609 
EXPECT_THAT
(
lhs
, 
NÙ
(
Poštwi£
(
Lt
(), 
rhs
)));

6613 
TEST
(
Poštwi£Te¡
, 
WÜksFÜVeùÜOfBoŞ
) {

6614 
	gveùÜ
<
	gboŞ
> 
rhs
(3, 
çl£
);

6615 
	grhs
[1] = 
Œue
;

6616 
	gveùÜ
<
	gboŞ
> 
	glhs
 = 
rhs
;

6617 
EXPECT_THAT
(
lhs
, 
Poštwi£
(
Eq
(), 
rhs
));

6618 
	grhs
[0] = 
Œue
;

6619 
EXPECT_THAT
(
lhs
, 
NÙ
(
Poštwi£
(
Eq
(), 
rhs
)));

6623 
TEST
(
Poštwi£Te¡
, 
WÜksFÜRhsIn™Ÿliz”Li¡
) {

6624 cÚ¡ 
	gveùÜ
<> 
	glhs
{2, 4, 6};

6625 
EXPECT_THAT
(
lhs
, 
Poštwi£
(
Gt
(), {1, 2, 3}));

6626 
EXPECT_THAT
(
lhs
, 
NÙ
(
Poštwi£
(
Lt
(), {3, 3, 7})));

6630 
TEST
(
Poštwi£Te¡
, 
RejeùsWrÚgSize
) {

6631 cÚ¡ 
	glhs
[2] = {1, 2};

6632 cÚ¡ 
	grhs
[1] = {0};

6633 
EXPECT_THAT
(
lhs
, 
NÙ
(
Poštwi£
(
Gt
(), 
rhs
)));

6634 
EXPECT_EQ
("which contains 2 values",

6635 
Ex¶aš
(
Poštwi£
(
Gt
(), 
rhs
), 
lhs
));

6637 cÚ¡ 
	grhs2
[3] = {0, 1, 2};

6638 
EXPECT_THAT
(
lhs
, 
NÙ
(
Poštwi£
(
Gt
(), 
rhs2
)));

6641 
TEST
(
Poštwi£Te¡
, 
RejeùsWrÚgCÚ‹Á
) {

6642 cÚ¡ 
	glhs
[3] = {1, 2, 3};

6643 cÚ¡ 
	grhs
[3] = {2, 6, 4};

6644 
EXPECT_THAT
(
lhs
, 
NÙ
(
Poštwi£
(
IsH®fOf
(), 
rhs
)));

6645 
EXPECT_EQ
("wherehe value…air (2, 6)‡t index #1 don't match, "

6647 
Ex¶aš
(
Poštwi£
(
IsH®fOf
(), 
rhs
), 
lhs
));

6650 
TEST
(
Poštwi£Te¡
, 
Acû±sCÜ»ùCÚ‹Á
) {

6651 cÚ¡ 
	glhs
[3] = {1, 2, 3};

6652 cÚ¡ 
	grhs
[3] = {2, 4, 6};

6653 
EXPECT_THAT
(
lhs
, 
Poštwi£
(
IsH®fOf
(), 
rhs
));

6654 
EXPECT_EQ
("", 
Ex¶aš
(
Poštwi£
(
IsH®fOf
(), 
rhs
), 
lhs
));

6657 
TEST
(
Poštwi£Te¡
, 
AÎowsMÚomÜphicIÂ”M©ch”
) {

6658 cÚ¡ 
	glhs
[3] = {1, 2, 3};

6659 cÚ¡ 
	grhs
[3] = {2, 4, 6};

6660 cÚ¡ 
	gM©ch”
<
	g¡d
::
tu¶e
<cÚ¡ &, cÚ¡ &>> 
	gm1
 = 
IsH®fOf
();

6661 
EXPECT_THAT
(
lhs
, 
Poštwi£
(
m1
, 
rhs
));

6662 
EXPECT_EQ
("", 
Ex¶aš
(
Poštwi£
(
m1
, 
rhs
), 
lhs
));

6666 cÚ¡ 
	gM©ch”
<
	g¡d
::
tu¶e
<, >> 
	gm2
 = 
IsH®fOf
();

6667 
EXPECT_THAT
(
lhs
, 
Poštwi£
(
m2
, 
rhs
));

6668 
EXPECT_EQ
("", 
Ex¶aš
(
Poštwi£
(
m2
, 
rhs
), 
lhs
));

6671 
MATCHER
(
Poš‹eEqu®s
, "Pointso‡nƒqual value") {

6672  
Ex¶ašM©chResuÉ
(::
‹¡šg
::
Poš‹e
(::‹¡šg::
g‘
<1>(
¬g
)),

6673 ::
‹¡šg
::
g‘
<0>(
¬g
), 
»suÉ_li¡’”
);

6676 
TEST
(
Poštwi£Te¡
, 
WÜksW™hMoveOÆy
) {

6677 
CÚš”H–³r
 
	gh–³r
;

6678 
EXPECT_CALL
(
h–³r
, 
C®l
(
Poštwi£
(
Poš‹eEqu®s
(), 
¡d
::
veùÜ
<>{1, 2})));

6679 
	gh–³r
.
C®l
(
MakeUniquePŒs
({1, 2}));

6682 
TEST
(
UnÜd”edPoštwi£Te¡
, 
DesüibesS–f
) {

6683 
	gveùÜ
<> 
	grhs
;

6684 
	grhs
.
push_back
(1);

6685 
	grhs
.
push_back
(2);

6686 
	grhs
.
push_back
(3);

6687 cÚ¡ 
	gM©ch”
<cÚ¡ 
	gveùÜ
<>&> 
	gm
 = 
UnÜd”edPoštwi£
(
IsH®fOf
(), 
rhs
);

6688 
EXPECT_EQ
(

6696 
Desüibe
(
m
));

6697 
EXPECT_EQ
(

6705 
DesüibeNeg©iÚ
(
m
));

6708 
TEST
(
UnÜd”edPoštwi£Te¡
, 
MakesCİyOfRhs
) {

6709 
	gli¡
<sigÃd > 
	grhs
;

6710 
	grhs
.
push_back
(2);

6711 
	grhs
.
push_back
(4);

6713 
	glhs
[] = {2, 1};

6714 cÚ¡ 
	gM©ch”
<cÚ¡ (&)[2]> 
	gm
 = 
UnÜd”edPoštwi£
(
IsH®fOf
(), 
rhs
);

6715 
EXPECT_THAT
(
lhs
, 
m
);

6718 
	grhs
.
push_back
(6);

6719 
EXPECT_THAT
(
lhs
, 
m
);

6722 
TEST
(
UnÜd”edPoštwi£Te¡
, 
WÜksFÜLhsN©iveA¼ay
) {

6723 cÚ¡ 
	glhs
[] = {1, 2, 3};

6724 
	gveùÜ
<> 
	grhs
;

6725 
	grhs
.
push_back
(4);

6726 
	grhs
.
push_back
(6);

6727 
	grhs
.
push_back
(2);

6728 
EXPECT_THAT
(
lhs
, 
UnÜd”edPoštwi£
(
Lt
(), 
rhs
));

6729 
EXPECT_THAT
(
lhs
, 
NÙ
(
UnÜd”edPoštwi£
(
Gt
(), 
rhs
)));

6732 
TEST
(
UnÜd”edPoštwi£Te¡
, 
WÜksFÜRhsN©iveA¼ay
) {

6733 cÚ¡ 
	grhs
[] = {1, 2, 3};

6734 
	gveùÜ
<> 
	glhs
;

6735 
	glhs
.
push_back
(4);

6736 
	glhs
.
push_back
(2);

6737 
	glhs
.
push_back
(6);

6738 
EXPECT_THAT
(
lhs
, 
UnÜd”edPoštwi£
(
Gt
(), 
rhs
));

6739 
EXPECT_THAT
(
lhs
, 
NÙ
(
UnÜd”edPoštwi£
(
Lt
(), 
rhs
)));

6743 
TEST
(
UnÜd”edPoštwi£Te¡
, 
WÜksFÜRhsIn™Ÿliz”Li¡
) {

6744 cÚ¡ 
	gveùÜ
<> 
	glhs
{2, 4, 6};

6745 
EXPECT_THAT
(
lhs
, 
UnÜd”edPoštwi£
(
Gt
(), {5, 1, 3}));

6746 
EXPECT_THAT
(
lhs
, 
NÙ
(
UnÜd”edPoštwi£
(
Lt
(), {1, 1, 7})));

6750 
TEST
(
UnÜd”edPoštwi£Te¡
, 
RejeùsWrÚgSize
) {

6751 cÚ¡ 
	glhs
[2] = {1, 2};

6752 cÚ¡ 
	grhs
[1] = {0};

6753 
EXPECT_THAT
(
lhs
, 
NÙ
(
UnÜd”edPoštwi£
(
Gt
(), 
rhs
)));

6754 
EXPECT_EQ
("which has 2ƒlements",

6755 
Ex¶aš
(
UnÜd”edPoštwi£
(
Gt
(), 
rhs
), 
lhs
));

6757 cÚ¡ 
	grhs2
[3] = {0, 1, 2};

6758 
EXPECT_THAT
(
lhs
, 
NÙ
(
UnÜd”edPoštwi£
(
Gt
(), 
rhs2
)));

6761 
TEST
(
UnÜd”edPoštwi£Te¡
, 
RejeùsWrÚgCÚ‹Á
) {

6762 cÚ¡ 
	glhs
[3] = {1, 2, 3};

6763 cÚ¡ 
	grhs
[3] = {2, 6, 6};

6764 
EXPECT_THAT
(
lhs
, 
NÙ
(
UnÜd”edPoštwi£
(
IsH®fOf
(), 
rhs
)));

6765 
EXPECT_EQ
("wherehe followingƒlements don't match‡ny matchers:\n"

6767 
Ex¶aš
(
UnÜd”edPoštwi£
(
IsH®fOf
(), 
rhs
), 
lhs
));

6770 
TEST
(
UnÜd”edPoštwi£Te¡
, 
Acû±sCÜ»ùCÚ‹ÁInSameOrd”
) {

6771 cÚ¡ 
	glhs
[3] = {1, 2, 3};

6772 cÚ¡ 
	grhs
[3] = {2, 4, 6};

6773 
EXPECT_THAT
(
lhs
, 
UnÜd”edPoštwi£
(
IsH®fOf
(), 
rhs
));

6776 
TEST
(
UnÜd”edPoštwi£Te¡
, 
Acû±sCÜ»ùCÚ‹ÁInDifã»ÁOrd”
) {

6777 cÚ¡ 
	glhs
[3] = {1, 2, 3};

6778 cÚ¡ 
	grhs
[3] = {6, 4, 2};

6779 
EXPECT_THAT
(
lhs
, 
UnÜd”edPoštwi£
(
IsH®fOf
(), 
rhs
));

6782 
TEST
(
UnÜd”edPoštwi£Te¡
, 
AÎowsMÚomÜphicIÂ”M©ch”
) {

6783 cÚ¡ 
	glhs
[3] = {1, 2, 3};

6784 cÚ¡ 
	grhs
[3] = {4, 6, 2};

6785 cÚ¡ 
	gM©ch”
<
	g¡d
::
tu¶e
<cÚ¡ &, cÚ¡ &>> 
	gm1
 = 
IsH®fOf
();

6786 
EXPECT_THAT
(
lhs
, 
UnÜd”edPoštwi£
(
m1
, 
rhs
));

6790 cÚ¡ 
	gM©ch”
<
	g¡d
::
tu¶e
<, >> 
	gm2
 = 
IsH®fOf
();

6791 
EXPECT_THAT
(
lhs
, 
UnÜd”edPoštwi£
(
m2
, 
rhs
));

6794 
TEST
(
UnÜd”edPoštwi£Te¡
, 
WÜksW™hMoveOÆy
) {

6795 
CÚš”H–³r
 
	gh–³r
;

6796 
EXPECT_CALL
(
h–³r
, 
C®l
(
UnÜd”edPoštwi£
(
Poš‹eEqu®s
(),

6797 
¡d
::
veùÜ
<>{1, 2})));

6798 
	gh–³r
.
C®l
(
MakeUniquePŒs
({2, 1}));

6803 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

6804 şas 
	cSam¶eO±iÚ®
 {

6805 
	gpublic
:

6806 
usšg
 
v®ue_ty³
 = 
T
;

6807 
ex¶ic™
 
Sam¶eO±iÚ®
(
T
 
v®ue
)

6808 : 
v®ue_
(
¡d
::
move
(
v®ue
)), 
has_v®ue_
(
Œue
) {}

6809 
Sam¶eO±iÚ®
(è: 
v®ue_
(), 
has_v®ue_
(
çl£
) {}

6810 
İ”©Ü
 
boŞ
(ècÚ¡ {  
	ghas_v®ue_
; }

6811 cÚ¡ 
	gT
& 
	gİ”©Ü
*(ècÚ¡ {  
	gv®ue_
; }

6813 
	g´iv©e
:

6814 
T
 
v®ue_
;

6815 
boŞ
 
	ghas_v®ue_
;

6818 
TEST
(
O±iÚ®Te¡
, 
DesüibesS–f
) {

6819 cÚ¡ 
	gM©ch”
<
	gSam¶eO±iÚ®
<>> 
	gm
 = 
O±iÚ®
(
Eq
(1));

6820 
EXPECT_EQ
("v®ui equ®Ø1", 
Desüibe
(
m
));

6823 
TEST
(
O±iÚ®Te¡
, 
Ex¶ašsS–f
) {

6824 cÚ¡ 
	gM©ch”
<
	gSam¶eO±iÚ®
<>> 
	gm
 = 
O±iÚ®
(
Eq
(1));

6825 
EXPECT_EQ
("who£ v®u1 m©ches", 
Ex¶aš
(
m
, 
Sam¶eO±iÚ®
<>(1)));

6826 
EXPECT_EQ
("who£ v®u2 dÛ¢'ˆm©ch", 
Ex¶aš
(
m
, 
Sam¶eO±iÚ®
<>(2)));

6829 
TEST
(
O±iÚ®Te¡
, 
M©chesNÚEm±yO±iÚ®
) {

6830 cÚ¡ 
	gM©ch”
<
	gSam¶eO±iÚ®
<>> 
	gm1
 = 
O±iÚ®
(1);

6831 cÚ¡ 
	gM©ch”
<
	gSam¶eO±iÚ®
<>> 
	gm2
 = 
O±iÚ®
(
Eq
(2));

6832 cÚ¡ 
	gM©ch”
<
	gSam¶eO±iÚ®
<>> 
	gm3
 = 
O±iÚ®
(
Lt
(3));

6833 
	gSam¶eO±iÚ®
<> 
İt
(1);

6834 
EXPECT_TRUE
(
m1
.
M©ches
(
İt
));

6835 
EXPECT_FALSE
(
m2
.
M©ches
(
İt
));

6836 
EXPECT_TRUE
(
m3
.
M©ches
(
İt
));

6839 
TEST
(
O±iÚ®Te¡
, 
DÛsNÙM©chNuÎİt
) {

6840 cÚ¡ 
	gM©ch”
<
	gSam¶eO±iÚ®
<>> 
	gm
 = 
O±iÚ®
(1);

6841 
	gSam¶eO±iÚ®
<> 
	gem±y
;

6842 
EXPECT_FALSE
(
m
.
M©ches
(
em±y
));

6845 
TEST
(
O±iÚ®Te¡
, 
WÜksW™hMoveOÆy
) {

6846 
	gM©ch”
<
	gSam¶eO±iÚ®
<
	g¡d
::
unique_±r
<>>> 
m
 = 
O±iÚ®
(
Eq
(
nuÎ±r
));

6847 
EXPECT_TRUE
(
m
.
M©ches
(
Sam¶eO±iÚ®
<
¡d
::
unique_±r
<>>(
nuÎ±r
)));

6850 şas 
	cSam¶eV¬ŸÁIÁSŒšg
 {

6851 
	gpublic
:

6852 
Sam¶eV¬ŸÁIÁSŒšg
(
i
è: 
i_
(i), 
has_št_
(
Œue
) {}

6853 
Sam¶eV¬ŸÁIÁSŒšg
(cÚ¡ 
¡d
::
¡ršg
& 
s
è: 
s_
(s), 
has_št_
(
çl£
) {}

6855 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

6856 
ä›nd
 
boŞ
 
hŞds_®‹º©ive
(cÚ¡ 
Sam¶eV¬ŸÁIÁSŒšg
& 
v®ue
) {

6857  
	gv®ue
.
	ghas_št_
 =ğ
¡d
::
is_§me
<
T
, >::
v®ue
;

6860 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

6861 
ä›nd
 cÚ¡ 
	gT
& 
g‘
(cÚ¡ 
Sam¶eV¬ŸÁIÁSŒšg
& 
v®ue
) {

6862  
	gv®ue
.
g‘_im¶
(
¡©ic_ÿ¡
<
T
*>(
nuÎ±r
));

6865 
	g´iv©e
:

6866 cÚ¡ & 
g‘_im¶
(*ècÚ¡ {  
i_
; }

6867 cÚ¡ 
	g¡d
::
¡ršg
& 
g‘_im¶
(
¡d
::¡ršg*ècÚ¡ {  
s_
; }

6869 
	gi_
;

6870 
	g¡d
::
¡ršg
 
s_
;

6871 
boŞ
 
	ghas_št_
;

6874 
TEST
(
V¬ŸÁTe¡
, 
DesüibesS–f
) {

6875 cÚ¡ 
	gM©ch”
<
	gSam¶eV¬ŸÁIÁSŒšg
> 
	gm
 = 
V¬ŸÁW™h
<>(
Eq
(1));

6876 
EXPECT_THAT
(
Desüibe
(
m
), 
CÚšsRegex
("is‡ variant<> with value ofype "

6880 
TEST
(
V¬ŸÁTe¡
, 
Ex¶ašsS–f
) {

6881 cÚ¡ 
	gM©ch”
<
	gSam¶eV¬ŸÁIÁSŒšg
> 
	gm
 = 
V¬ŸÁW™h
<>(
Eq
(1));

6882 
EXPECT_THAT
(
Ex¶aš
(
m
, 
Sam¶eV¬ŸÁIÁSŒšg
(1)),

6883 
CÚšsRegex
("whose value 1"));

6884 
EXPECT_THAT
(
Ex¶aš
(
m
, 
Sam¶eV¬ŸÁIÁSŒšg
("A")),

6885 
HasSub¡r
("whose value is‚ot ofype '"));

6886 
EXPECT_THAT
(
Ex¶aš
(
m
, 
Sam¶eV¬ŸÁIÁSŒšg
(2)),

6890 
TEST
(
V¬ŸÁTe¡
, 
FuÎM©ch
) {

6891 
	gM©ch”
<
	gSam¶eV¬ŸÁIÁSŒšg
> 
	gm
 = 
V¬ŸÁW™h
<>(
Eq
(1));

6892 
EXPECT_TRUE
(
m
.
M©ches
(
Sam¶eV¬ŸÁIÁSŒšg
(1)));

6894 
	gm
 = 
V¬ŸÁW™h
<
¡d
::
¡ršg
>(
Eq
("1"));

6895 
EXPECT_TRUE
(
m
.
M©ches
(
Sam¶eV¬ŸÁIÁSŒšg
("1")));

6898 
TEST
(
V¬ŸÁTe¡
, 
Ty³DÛsNÙM©ch
) {

6899 
	gM©ch”
<
	gSam¶eV¬ŸÁIÁSŒšg
> 
	gm
 = 
V¬ŸÁW™h
<>(
Eq
(1));

6900 
EXPECT_FALSE
(
m
.
M©ches
(
Sam¶eV¬ŸÁIÁSŒšg
("1")));

6902 
	gm
 = 
V¬ŸÁW™h
<
¡d
::
¡ršg
>(
Eq
("1"));

6903 
EXPECT_FALSE
(
m
.
M©ches
(
Sam¶eV¬ŸÁIÁSŒšg
(1)));

6906 
TEST
(
V¬ŸÁTe¡
, 
IÂ”DÛsNÙM©ch
) {

6907 
	gM©ch”
<
	gSam¶eV¬ŸÁIÁSŒšg
> 
	gm
 = 
V¬ŸÁW™h
<>(
Eq
(1));

6908 
EXPECT_FALSE
(
m
.
M©ches
(
Sam¶eV¬ŸÁIÁSŒšg
(2)));

6910 
	gm
 = 
V¬ŸÁW™h
<
¡d
::
¡ršg
>(
Eq
("1"));

6911 
EXPECT_FALSE
(
m
.
M©ches
(
Sam¶eV¬ŸÁIÁSŒšg
("2")));

6914 şas 
	cSam¶eAnyTy³
 {

6915 
	gpublic
:

6916 
ex¶ic™
 
Sam¶eAnyTy³
(
i
è: 
šdex_
(0), 
i_
(i) {}

6917 
ex¶ic™
 
Sam¶eAnyTy³
(cÚ¡ 
¡d
::
¡ršg
& 
s
è: 
šdex_
(1), 
s_
(s) {}

6919 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

6920 
ä›nd
 cÚ¡ 
T
* 
ªy_ÿ¡
(cÚ¡ 
Sam¶eAnyTy³
* 
ªy
) {

6921  
	gªy
->
g‘_im¶
(
¡©ic_ÿ¡
<
T
*>(
nuÎ±r
));

6924 
	g´iv©e
:

6925 
šdex_
;

6926 
	gi_
;

6927 
	g¡d
::
¡ršg
 
s_
;

6929 cÚ¡ * 
g‘_im¶
(*ècÚ¡ {  
	gšdex_
 =ğ0 ? &
i_
 : 
nuÎ±r
; }

6930 cÚ¡ 
	g¡d
::
¡ršg
* 
g‘_im¶
(
¡d
::string*) const {

6931  
šdex_
 =ğ1 ? &
s_
 : 
nuÎ±r
;

6935 
TEST
(
AnyW™hTe¡
, 
FuÎM©ch
) {

6936 
	gM©ch”
<
	gSam¶eAnyTy³
> 
	gm
 = 
AnyW™h
<>(
Eq
(1));

6937 
EXPECT_TRUE
(
m
.
M©ches
(
Sam¶eAnyTy³
(1)));

6940 
TEST
(
AnyW™hTe¡
, 
Te¡BadCa¡Ty³
) {

6941 
	gM©ch”
<
	gSam¶eAnyTy³
> 
	gm
 = 
AnyW™h
<
¡d
::
¡ršg
>(
Eq
("fail"));

6942 
EXPECT_FALSE
(
m
.
M©ches
(
Sam¶eAnyTy³
(1)));

6945 
TEST
(
AnyW™hTe¡
, 
Te¡U£InCÚš”s
) {

6946 
	g¡d
::
veùÜ
<
Sam¶eAnyTy³
> 
a
;

6947 
	ga
.
em¶aû_back
(1);

6948 
	ga
.
em¶aû_back
(2);

6949 
	ga
.
em¶aû_back
(3);

6950 
EXPECT_THAT
(

6951 
a
, 
EËm’tsA»A¼ay
({
AnyW™h
<>(1), AnyWith<>(2), AnyWith<>(3)}));

6953 
	g¡d
::
veùÜ
<
Sam¶eAnyTy³
> 
b
;

6954 
	gb
.
em¶aû_back
("hello");

6955 
	gb
.
em¶aû_back
("merhaba");

6956 
	gb
.
em¶aû_back
("salut");

6957 
EXPECT_THAT
(
b
, 
EËm’tsA»A¼ay
({
AnyW™h
<
¡d
::
¡ršg
>("hello"),

6958 
AnyW™h
<
¡d
::
¡ršg
>("merhaba"),

6959 
AnyW™h
<
¡d
::
¡ršg
>("salut")}));

6961 
TEST
(
AnyW™hTe¡
, 
Te¡Com·»
) {

6962 
EXPECT_THAT
(
Sam¶eAnyTy³
(1), 
AnyW™h
<>(
Gt
(0)));

6965 
TEST
(
AnyW™hTe¡
, 
DesüibesS–f
) {

6966 cÚ¡ 
	gM©ch”
<cÚ¡ 
	gSam¶eAnyTy³
&> 
	gm
 = 
AnyW™h
<>(
Eq
(1));

6967 
EXPECT_THAT
(
Desüibe
(
m
), 
CÚšsRegex
("is‡n 'any'ype with value ofype "

6971 
TEST
(
AnyW™hTe¡
, 
Ex¶ašsS–f
) {

6972 cÚ¡ 
	gM©ch”
<cÚ¡ 
	gSam¶eAnyTy³
&> 
	gm
 = 
AnyW™h
<>(
Eq
(1));

6974 
EXPECT_THAT
(
Ex¶aš
(
m
, 
Sam¶eAnyTy³
(1)), 
CÚšsRegex
("whose value 1"));

6975 
EXPECT_THAT
(
Ex¶aš
(
m
, 
Sam¶eAnyTy³
("A")),

6976 
HasSub¡r
("whose value is‚ot ofype '"));

6977 
EXPECT_THAT
(
Ex¶aš
(
m
, 
Sam¶eAnyTy³
(2)), "whose value 2 doesn't match");

6980 
TEST
(
Poš‹eTe¡
, 
WÜksOnMoveOÆyTy³
) {

6981 
	g¡d
::
unique_±r
<> 
p
(
Ãw
 (3));

6982 
EXPECT_THAT
(
p
, 
Poš‹e
(
Eq
(3)));

6983 
EXPECT_THAT
(
p
, 
NÙ
(
Poš‹e
(
Eq
(2))));

6986 
TEST
(
NÙTe¡
, 
WÜksOnMoveOÆyTy³
) {

6987 
	g¡d
::
unique_±r
<> 
p
(
Ãw
 (3));

6988 
EXPECT_THAT
(
p
, 
Poš‹e
(
Eq
(3)));

6989 
EXPECT_THAT
(
p
, 
NÙ
(
Poš‹e
(
Eq
(2))));

6994 
TEST
(
ArgsTe¡
, 
Acû±sZ”oTem¶©eArg
) {

6995 cÚ¡ 
	g¡d
::
tu¶e
<, 
	gboŞ
> 
t
(5, 
Œue
);

6996 
EXPECT_THAT
(
t
, 
Args
<>(
Eq
(
¡d
::
tu¶e
<>())));

6997 
EXPECT_THAT
(
t
, 
NÙ
(
Args
<>(
Ne
(
¡d
::
tu¶e
<>()))));

7000 
TEST
(
ArgsTe¡
, 
Acû±sOÃTem¶©eArg
) {

7001 cÚ¡ 
	g¡d
::
tu¶e
<, 
	gboŞ
> 
t
(5, 
Œue
);

7002 
EXPECT_THAT
(
t
, 
Args
<0>(
Eq
(
¡d
::
make_tu¶e
(5))));

7003 
EXPECT_THAT
(
t
, 
Args
<1>(
Eq
(
¡d
::
make_tu¶e
(
Œue
))));

7004 
EXPECT_THAT
(
t
, 
NÙ
(
Args
<1>(
Eq
(
¡d
::
make_tu¶e
(
çl£
)))));

7007 
TEST
(
ArgsTe¡
, 
Acû±sTwoTem¶©eArgs
) {

7008 cÚ¡ 
	g¡d
::
tu¶e
<, , > 
t
(4, 5, 6L);

7010 
EXPECT_THAT
(
t
, (
Args
<0, 1>(
Lt
())));

7011 
EXPECT_THAT
(
t
, (
Args
<1, 2>(
Lt
())));

7012 
EXPECT_THAT
(
t
, 
NÙ
(
Args
<0, 2>(
Gt
())));

7015 
TEST
(
ArgsTe¡
, 
Acû±sR•—‹dTem¶©eArgs
) {

7016 cÚ¡ 
	g¡d
::
tu¶e
<, , > 
t
(4, 5, 6L);

7017 
EXPECT_THAT
(
t
, (
Args
<0, 0>(
Eq
())));

7018 
EXPECT_THAT
(
t
, 
NÙ
(
Args
<1, 1>(
Ne
())));

7021 
TEST
(
ArgsTe¡
, 
Acû±sDeü—sšgTem¶©eArgs
) {

7022 cÚ¡ 
	g¡d
::
tu¶e
<, , > 
t
(4, 5, 6L);

7023 
EXPECT_THAT
(
t
, (
Args
<2, 0>(
Gt
())));

7024 
EXPECT_THAT
(
t
, 
NÙ
(
Args
<2, 1>(
Lt
())));

7027 
MATCHER
(
SumIsZ”o
, "") {

7028  
	g¡d
::
g‘
<0>(
¬g
è+ 
¡d
::get<1>(arg) + std::get<2>(arg) == 0;

7031 
TEST
(
ArgsTe¡
, 
Acû±sMÜeTem¶©eArgsThªAr™yOfOrigš®Tu¶e
) {

7032 
EXPECT_THAT
(
¡d
::
make_tu¶e
(-1, 2), (
Args
<0, 0, 1>(
SumIsZ”o
())));

7033 
EXPECT_THAT
(
¡d
::
make_tu¶e
(1, 2), 
NÙ
(
Args
<0, 0, 1>(
SumIsZ”o
())));

7036 
TEST
(
ArgsTe¡
, 
CªBeNe¡ed
) {

7037 cÚ¡ 
	g¡d
::
tu¶e
<, , , > 
t
(4, 5, 6L, 6);

7038 
EXPECT_THAT
(
t
, (
Args
<1, 2, 3>(Args<1, 2>(
Eq
()))));

7039 
EXPECT_THAT
(
t
, (
Args
<0, 1, 3>(Args<0, 2>(
Lt
()))));

7042 
TEST
(
ArgsTe¡
, 
CªM©chTu¶eByV®ue
) {

7043 
	g¡d
::
	ttu¶e
<, , > 
	tTu¶e3
;

7044 cÚ¡ 
	gM©ch”
<
	gTu¶e3
> 
	gm
 = 
Args
<1, 2>(
Lt
());

7045 
EXPECT_TRUE
(
m
.
M©ches
(
Tu¶e3
('a', 1, 2)));

7046 
EXPECT_FALSE
(
m
.
M©ches
(
Tu¶e3
('b', 2, 2)));

7049 
TEST
(
ArgsTe¡
, 
CªM©chTu¶eByReã»nû
) {

7050 
	g¡d
::
	ttu¶e
<, , > 
	tTu¶e3
;

7051 cÚ¡ 
	gM©ch”
<cÚ¡ 
	gTu¶e3
&> 
	gm
 = 
Args
<0, 1>(
Lt
());

7052 
EXPECT_TRUE
(
m
.
M©ches
(
Tu¶e3
('a', 'b', 2)));

7053 
EXPECT_FALSE
(
m
.
M©ches
(
Tu¶e3
('b', 'b', 2)));

7057 
MATCHER_P
(
PrštsAs
, 
¡r
, "") {

7058  
	g‹¡šg
::
PrštToSŒšg
(
¬g
è=ğ
¡r
;

7061 
TEST
(
ArgsTe¡
, 
Acû±sT’Tem¶©eArgs
) {

7062 
EXPECT_THAT
(
¡d
::
make_tu¶e
(0, 1L, 2, 3L, 4, 5, 6, 7, 8, 9),

7063 (
Args
<9, 8, 7, 6, 5, 4, 3, 2, 1, 0>(

7064 
PrštsAs
("(9, 8, 7, 6, 5, 4, 3, 2, 1, 0)"))));

7065 
EXPECT_THAT
(
¡d
::
make_tu¶e
(0, 1L, 2, 3L, 4, 5, 6, 7, 8, 9),

7066 
NÙ
(
Args
<9, 8, 7, 6, 5, 4, 3, 2, 1, 0>(

7067 
PrštsAs
("(0, 8, 7, 6, 5, 4, 3, 2, 1, 0)"))));

7070 
TEST
(
ArgsTe¡
, 
DescœbesS–fCÜ»ùly
) {

7071 cÚ¡ 
	gM©ch”
<
	g¡d
::
tu¶e
<, 
	gboŞ
, > > 
	gm
 = 
Args
<2, 0>(
Lt
());

7072 
EXPECT_EQ
("are‡uple whose fields (#2, #0)‡re‡…air where "

7074 
Desüibe
(
m
));

7077 
TEST
(
ArgsTe¡
, 
DescœbesNe¡edArgsCÜ»ùly
) {

7078 cÚ¡ 
	gM©ch”
<cÚ¡ 
	g¡d
::
tu¶e
<, 
	gboŞ
, , >&> 
	gm
 =

7079 
Args
<0, 2, 3>(
	gArgs
<2, 0>(
Lt
()));

7080 
EXPECT_EQ
("are‡uple whose fields (#0, #2, #3)‡re‡uple "

7082 
Desüibe
(
m
));

7085 
TEST
(
ArgsTe¡
, 
DesüibesNeg©iÚCÜ»ùly
) {

7086 cÚ¡ 
	gM©ch”
<
	g¡d
::
tu¶e
<, > > 
	gm
 = 
Args
<1, 0>(
Gt
());

7087 
EXPECT_EQ
("are‡uple whose fields (#1, #0)‡ren't‡…air "

7089 
DesüibeNeg©iÚ
(
m
));

7092 
TEST
(
ArgsTe¡
, 
Ex¶ašsM©chResuÉW™houtIÂ”Ex¶ª©iÚ
) {

7093 cÚ¡ 
	gM©ch”
<
	g¡d
::
tu¶e
<
boŞ
, , > > 
	gm
 = 
Args
<1, 2>(
Eq
());

7094 
EXPECT_EQ
("whose fields (#1, #2)‡re (42, 42)",

7095 
Ex¶aš
(
m
, 
¡d
::
make_tu¶e
(
çl£
, 42, 42)));

7096 
EXPECT_EQ
("whose fields (#1, #2)‡re (42, 43)",

7097 
Ex¶aš
(
m
, 
¡d
::
make_tu¶e
(
çl£
, 42, 43)));

7101 
şass
 
	gLessThªM©ch”
 : 
public
 
M©ch”IÁ”çû
<
¡d
::
tu¶e
<, > > {

7102 
	gpublic
:

7103 
DesüibeTo
(::
¡d
::
o¡»am
* ) cÚ¡ 
ov”ride
 {}

7105 
boŞ
 
M©chAndEx¶aš
(
¡d
::
tu¶e
<, > 
v®ue
,

7106 
M©chResuÉLi¡’”
* 
li¡’”
ècÚ¡ 
	gov”ride
 {

7107 cÚ¡ 
	gdiff
 = 
¡d
::
g‘
<0>(
v®ue
) - std::get<1>(value);

7108 ià(
	gdiff
 > 0) {

7109 *
	gli¡’”
 << "wh”thfœ¡ v®ui " << 
	gdiff


7112  
	gdiff
 < 0;

7116 
	gM©ch”
<
	g¡d
::
tu¶e
<, > > 
LessThª
() {

7117  
MakeM©ch”
(
Ãw
 
LessThªM©ch”
);

7120 
TEST
(
ArgsTe¡
, 
Ex¶ašsM©chResuÉW™hIÂ”Ex¶ª©iÚ
) {

7121 cÚ¡ 
	gM©ch”
<
	g¡d
::
tu¶e
<, , > > 
	gm
 = 
Args
<0, 2>(
LessThª
());

7122 
EXPECT_EQ
(

7125 
Ex¶aš
(
m
, 
¡d
::
make_tu¶e
('a', 42, 42)));

7126 
EXPECT_EQ
("whose fields (#0, #2)‡re ('\\0', 43)",

7127 
Ex¶aš
(
m
, 
¡d
::
make_tu¶e
('\0', 42, 43)));

7130 şas 
	cP»diÿ‹FÜm©‹rFromM©ch”Te¡
 : 
public
 ::
‹¡šg
::
Te¡
 {

7131 
´Ùeùed
:

7132 
	eBehaviÜ
 { 
kIn™ŸlSucûss
, 
	gkAlwaysFa
, 
	gkFÏky
 };

7137 
şass
 
	gMockM©ch”
 : 
public
 
M©ch”IÁ”çû
<
BehaviÜ
> {

7138 
public
:

7139 
boŞ
 
M©chAndEx¶aš
(
BehaviÜ
 
behaviÜ
,

7140 
M©chResuÉLi¡’”
* 
li¡’”
ècÚ¡ 
	gov”ride
 {

7141 *
	gli¡’”
 << "[MatchAndExplain]";

7142 
	gbehaviÜ
) {

7143 
	gkIn™ŸlSucûss
:

7147  !
li¡’”
->
IsIÁ”e¡ed
();

7149 
	gkAlwaysFa
:

7150  
çl£
;

7152 
	gkFÏky
:

7157  
li¡’”
->
IsIÁ”e¡ed
();

7160 
GTEST_LOG_
(
FATAL
) << "This should‚ever be„eached";

7161  
	gçl£
;

7164 
DesüibeTo
(
o¡»am
* 
os
ècÚ¡ 
	gov”ride
 { *
	gos
 << "[DescribeTo]"; }

7166 
DesüibeNeg©iÚTo
(
o¡»am
* 
os
ècÚ¡ 
	gov”ride
 {

7167 *
	gos
 << "[DescribeNegationTo]";

7171 
As£¹iÚResuÉ
 
RunP»diÿ‹FÜm©‹r
(
BehaviÜ
 
behaviÜ
) {

7172 autØ
	gm©ch”
 = 
MakeM©ch”
(
Ãw
 
MockM©ch”
);

7173 
	gP»diÿ‹FÜm©‹rFromM©ch”
<
	gM©ch”
<
	gBehaviÜ
>> 
´ediÿ‹_fÜm©‹r
(

7174 
m©ch”
);

7175  
´ediÿ‹_fÜm©‹r
("dummy-Çme", 
behaviÜ
);

7179 
TEST_F
(
P»diÿ‹FÜm©‹rFromM©ch”Te¡
, 
ShÜtCœcu™OnSucûss
) {

7180 
As£¹iÚResuÉ
 
	g»suÉ
 = 
RunP»diÿ‹FÜm©‹r
(
kIn™ŸlSucûss
);

7181 
EXPECT_TRUE
(
»suÉ
);

7182 
	g¡d
::
¡ršg
 
ex³ù
;

7183 
EXPECT_EQ
(
ex³ù
, 
»suÉ
.
mes§ge
());

7186 
TEST_F
(
P»diÿ‹FÜm©‹rFromM©ch”Te¡
, 
NoShÜtCœcu™OnFau»
) {

7187 
As£¹iÚResuÉ
 
	g»suÉ
 = 
RunP»diÿ‹FÜm©‹r
(
kAlwaysFa
);

7188 
EXPECT_FALSE
(
»suÉ
);

7189 
	g¡d
::
¡ršg
 
ex³ù
 =

7192 
OfTy³
(
š‹º®
::
G‘Ty³Name
<
BehaviÜ
>()) + ", [MatchAndExplain]";

7193 
EXPECT_EQ
(
ex³ù
, 
»suÉ
.
mes§ge
());

7196 
TEST_F
(
P»diÿ‹FÜm©‹rFromM©ch”Te¡
, 
D‘eùsFÏkyShÜtCœcu™
) {

7197 
As£¹iÚResuÉ
 
	g»suÉ
 = 
RunP»diÿ‹FÜm©‹r
(
kFÏky
);

7198 
EXPECT_FALSE
(
»suÉ
);

7199 
	g¡d
::
¡ršg
 
ex³ù
 =

7204 
OfTy³
(
š‹º®
::
G‘Ty³Name
<
BehaviÜ
>()) + ", [MatchAndExplain]";

7205 
EXPECT_EQ
(
ex³ù
, 
»suÉ
.
mes§ge
());

7210 
TEST
(
EËm’tsA»Te¡
, 
CªDesüibeEx³ùšgNoEËm’t
) {

7211 
	gM©ch”
<cÚ¡ 
	gveùÜ
<>&> 
	gm
 = 
EËm’tsA»
();

7212 
EXPECT_EQ
("i em±y", 
Desüibe
(
m
));

7215 
TEST
(
EËm’tsA»Te¡
, 
CªDesüibeEx³ùšgOÃEËm’t
) {

7216 
	gM©ch”
<
	gveùÜ
<>> 
	gm
 = 
EËm’tsA»
(
Gt
(5));

7217 
EXPECT_EQ
("ha 1ƒËm’ˆth© i > 5", 
Desüibe
(
m
));

7220 
TEST
(
EËm’tsA»Te¡
, 
CªDesüibeEx³ùšgMªyEËm’ts
) {

7221 
	gM©ch”
<
	gli¡
<
	g¡d
::
¡ršg
>> 
m
 = 
EËm’tsA»
(
SŒEq
("one"), "two");

7222 
EXPECT_EQ
(

7226 
Desüibe
(
m
));

7229 
TEST
(
EËm’tsA»Te¡
, 
CªDesüibeNeg©iÚOfEx³ùšgNoEËm’t
) {

7230 
	gM©ch”
<
	gveùÜ
<>> 
	gm
 = 
EËm’tsA»
();

7231 
EXPECT_EQ
("i¢'ˆem±y", 
DesüibeNeg©iÚ
(
m
));

7234 
TEST
(
EËm’tsA»Te¡
, 
CªDesüibeNeg©iÚOfEx³ùšgOÃElm’t
) {

7235 
	gM©ch”
<cÚ¡ 
	gli¡
<>&> 
	gm
 = 
EËm’tsA»
(
Gt
(5));

7236 
EXPECT_EQ
(

7239 
DesüibeNeg©iÚ
(
m
));

7242 
TEST
(
EËm’tsA»Te¡
, 
CªDesüibeNeg©iÚOfEx³ùšgMªyEËm’ts
) {

7243 
	gM©ch”
<cÚ¡ 
	gli¡
<
	g¡d
::
¡ršg
>&> 
m
 = 
EËm’tsA»
("one", "two");

7244 
EXPECT_EQ
(

7248 
DesüibeNeg©iÚ
(
m
));

7251 
TEST
(
EËm’tsA»Te¡
, 
DÛsNÙEx¶ašTrivŸlM©ch
) {

7252 
	gM©ch”
<cÚ¡ 
	gli¡
<>&> 
	gm
 = 
EËm’tsA»
(1, 
Ne
(2));

7254 
	gli¡
<> 
	g‹¡_li¡
;

7255 
	g‹¡_li¡
.
push_back
(1);

7256 
	g‹¡_li¡
.
push_back
(3);

7257 
EXPECT_EQ
("", 
Ex¶aš
(
m
, 
‹¡_li¡
));

7260 
TEST
(
EËm’tsA»Te¡
, 
Ex¶ašsNÚTrivŸlM©ch
) {

7261 
	gM©ch”
<cÚ¡ 
	gveùÜ
<>&> 
	gm
 =

7262 
EËm’tsA»
(
G»©”Thª
(1), 0, GreaterThan(2));

7264 cÚ¡ 
	ga
[] = {10, 0, 100};

7265 
	gveùÜ
<> 
‹¡_veùÜ
(
¡d
::
begš
(
a
), std::
’d
(a));

7266 
EXPECT_EQ
(

7269 
Ex¶aš
(
m
, 
‹¡_veùÜ
));

7272 
TEST
(
EËm’tsA»Te¡
, 
CªEx¶ašMism©chWrÚgSize
) {

7273 
	gM©ch”
<cÚ¡ 
	gli¡
<>&> 
	gm
 = 
EËm’tsA»
(1, 3);

7275 
	gli¡
<> 
	g‹¡_li¡
;

7277 
EXPECT_EQ
("", 
Ex¶aš
(
m
, 
‹¡_li¡
));

7279 
	g‹¡_li¡
.
push_back
(1);

7280 
EXPECT_EQ
("which ha 1ƒËm’t", 
Ex¶aš
(
m
, 
‹¡_li¡
));

7283 
TEST
(
EËm’tsA»Te¡
, 
CªEx¶ašMism©chRightSize
) {

7284 
	gM©ch”
<cÚ¡ 
	gveùÜ
<>&> 
	gm
 = 
EËm’tsA»
(1, 
G»©”Thª
(5));

7286 
	gveùÜ
<> 
	gv
;

7287 
	gv
.
push_back
(2);

7288 
	gv
.
push_back
(1);

7289 
EXPECT_EQ
("who£ƒËm’ˆ#0 dÛ¢'ˆm©ch", 
Ex¶aš
(
m
, 
v
));

7291 
	gv
[0] = 1;

7292 
EXPECT_EQ
("whoseƒlement #1 doesn't match, which is 4†esshan 5",

7293 
Ex¶aš
(
m
, 
v
));

7296 
TEST
(
EËm’tsA»Te¡
, 
M©chesOÃEËm’tVeùÜ
) {

7297 
	gveùÜ
<
	g¡d
::
¡ršg
> 
‹¡_veùÜ
;

7298 
	g‹¡_veùÜ
.
push_back
("test string");

7300 
EXPECT_THAT
(
‹¡_veùÜ
, 
EËm’tsA»
(
SŒEq
("test string")));

7303 
TEST
(
EËm’tsA»Te¡
, 
M©chesOÃEËm’tLi¡
) {

7304 
	gli¡
<
	g¡d
::
¡ršg
> 
‹¡_li¡
;

7305 
	g‹¡_li¡
.
push_back
("test string");

7307 
EXPECT_THAT
(
‹¡_li¡
, 
EËm’tsA»
("test string"));

7310 
TEST
(
EËm’tsA»Te¡
, 
M©chesTh»eEËm’tVeùÜ
) {

7311 
	gveùÜ
<
	g¡d
::
¡ršg
> 
‹¡_veùÜ
;

7312 
	g‹¡_veùÜ
.
push_back
("one");

7313 
	g‹¡_veùÜ
.
push_back
("two");

7314 
	g‹¡_veùÜ
.
push_back
("three");

7316 
EXPECT_THAT
(
‹¡_veùÜ
, 
EËm’tsA»
("Úe", 
SŒEq
("two"), 
_
));

7319 
TEST
(
EËm’tsA»Te¡
, 
M©chesOÃEËm’tEqM©ch”
) {

7320 
	gveùÜ
<> 
	g‹¡_veùÜ
;

7321 
	g‹¡_veùÜ
.
push_back
(4);

7323 
EXPECT_THAT
(
‹¡_veùÜ
, 
EËm’tsA»
(
Eq
(4)));

7326 
TEST
(
EËm’tsA»Te¡
, 
M©chesOÃEËm’tAnyM©ch”
) {

7327 
	gveùÜ
<> 
	g‹¡_veùÜ
;

7328 
	g‹¡_veùÜ
.
push_back
(4);

7330 
EXPECT_THAT
(
‹¡_veùÜ
, 
EËm’tsA»
(
_
));

7333 
TEST
(
EËm’tsA»Te¡
, 
M©chesOÃEËm’tV®ue
) {

7334 
	gveùÜ
<> 
	g‹¡_veùÜ
;

7335 
	g‹¡_veùÜ
.
push_back
(4);

7337 
EXPECT_THAT
(
‹¡_veùÜ
, 
EËm’tsA»
(4));

7340 
TEST
(
EËm’tsA»Te¡
, 
M©chesTh»eEËm’tsMixedM©ch”s
) {

7341 
	gveùÜ
<> 
	g‹¡_veùÜ
;

7342 
	g‹¡_veùÜ
.
push_back
(1);

7343 
	g‹¡_veùÜ
.
push_back
(2);

7344 
	g‹¡_veùÜ
.
push_back
(3);

7346 
EXPECT_THAT
(
‹¡_veùÜ
, 
EËm’tsA»
(1, 
Eq
(2), 
_
));

7349 
TEST
(
EËm’tsA»Te¡
, 
M©chesT’EËm’tVeùÜ
) {

7350 cÚ¡ 
	ga
[] = {0, 1, 2, 3, 4, 5, 6, 7, 8, 9};

7351 
	gveùÜ
<> 
‹¡_veùÜ
(
¡d
::
begš
(
a
), std::
’d
(a));

7353 
EXPECT_THAT
(
‹¡_veùÜ
,

7356 
EËm’tsA»
(0, 
Ge
(0), 
_
, 3, 4, 
Ne
(2), 
Eq
(6), 7, 8, _));

7359 
TEST
(
EËm’tsA»Te¡
, 
DÛsNÙM©chWrÚgSize
) {

7360 
	gveùÜ
<
	g¡d
::
¡ršg
> 
‹¡_veùÜ
;

7361 
	g‹¡_veùÜ
.
push_back
("test string");

7362 
	g‹¡_veùÜ
.
push_back
("test string");

7364 
	gM©ch”
<
	gveùÜ
<
	g¡d
::
¡ršg
>> 
m
 = 
EËm’tsA»
(
SŒEq
("test string"));

7365 
EXPECT_FALSE
(
m
.
M©ches
(
‹¡_veùÜ
));

7368 
TEST
(
EËm’tsA»Te¡
, 
DÛsNÙM©chWrÚgV®ue
) {

7369 
	gveùÜ
<
	g¡d
::
¡ršg
> 
‹¡_veùÜ
;

7370 
	g‹¡_veùÜ
.
push_back
("other string");

7372 
	gM©ch”
<
	gveùÜ
<
	g¡d
::
¡ršg
>> 
m
 = 
EËm’tsA»
(
SŒEq
("test string"));

7373 
EXPECT_FALSE
(
m
.
M©ches
(
‹¡_veùÜ
));

7376 
TEST
(
EËm’tsA»Te¡
, 
DÛsNÙM©chWrÚgOrd”
) {

7377 
	gveùÜ
<
	g¡d
::
¡ršg
> 
‹¡_veùÜ
;

7378 
	g‹¡_veùÜ
.
push_back
("one");

7379 
	g‹¡_veùÜ
.
push_back
("three");

7380 
	g‹¡_veùÜ
.
push_back
("two");

7382 
	gM©ch”
<
	gveùÜ
<
	g¡d
::
¡ršg
>> 
m
 =

7383 
EËm’tsA»
(
SŒEq
("one"), StrEq("two"), StrEq("three"));

7384 
EXPECT_FALSE
(
m
.
M©ches
(
‹¡_veùÜ
));

7387 
TEST
(
EËm’tsA»Te¡
, 
WÜksFÜNe¡edCÚš”
) {

7388 
cÚ¡ex´
 
	g¡d
::
¬¿y
<cÚ¡ *, 2> 
	g¡ršgs
 = {{"Hi", "world"}};

7390 
	gveùÜ
<
	gli¡
<>> 
	gÃ¡ed
;

7391 cÚ¡‡uto& 
	gs
 : 
¡ršgs
) {

7392 
Ã¡ed
.
em¶aû_back
(
s
, s + 
¡¾’
(s));

7395 
EXPECT_THAT
(
Ã¡ed
, 
EËm’tsA»
(EËm’tsA»('H', 
Ne
('e')),

7396 
EËm’tsA»
('w', 'o', 
_
, _, 'd')));

7397 
EXPECT_THAT
(
Ã¡ed
, 
NÙ
(
EËm’tsA»
(ElementsAre('H', 'e'),

7398 
EËm’tsA»
('w', 'o', 
_
, _, 'd'))));

7401 
TEST
(
EËm’tsA»Te¡
, 
WÜksW™hByRefEËm’tM©ch”s
) {

7402 
	ga
[] = {0, 1, 2};

7403 
	gveùÜ
<> 
v
(
¡d
::
begš
(
a
), std::
’d
(a));

7405 
EXPECT_THAT
(
v
, 
EËm’tsA»
(
Ref
(v[0]), Ref(v[1]), Ref(v[2])));

7406 
EXPECT_THAT
(
v
, 
NÙ
(
EËm’tsA»
(
Ref
(v[0]), Ref(v[1]), Ref(
a
[2]))));

7409 
TEST
(
EËm’tsA»Te¡
, 
WÜksW™hCÚš”Poš‹rUsšgPoš‹e
) {

7410 
	ga
[] = {0, 1, 2};

7411 
	gveùÜ
<> 
v
(
¡d
::
begš
(
a
), std::
’d
(a));

7413 
EXPECT_THAT
(&
v
, 
Poš‹e
(
EËm’tsA»
(0, 1, 
_
)));

7414 
EXPECT_THAT
(&
v
, 
NÙ
(
Poš‹e
(
EËm’tsA»
(0, 
_
, 3))));

7417 
TEST
(
EËm’tsA»Te¡
, 
WÜksW™hN©iveA¼ayPas£dByReã»nû
) {

7418 
	g¬¿y
[] = {0, 1, 2};

7419 
EXPECT_THAT
(
¬¿y
, 
EËm’tsA»
(0, 1, 
_
));

7420 
EXPECT_THAT
(
¬¿y
, 
NÙ
(
EËm’tsA»
(1, 
_
, _)));

7421 
EXPECT_THAT
(
¬¿y
, 
NÙ
(
EËm’tsA»
(0, 
_
)));

7424 şas 
	cN©iveA¼ayPas£dAsPoš‹rAndSize
 {

7425 
	gpublic
:

7426 
N©iveA¼ayPas£dAsPoš‹rAndSize
() {}

7428 
MOCK_METHOD
(, 
H–³r
, (* 
¬¿y
, 
size
));

7430 
	g´iv©e
:

7431 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
N©iveA¼ayPas£dAsPoš‹rAndSize
);

7434 
TEST
(
EËm’tsA»Te¡
, 
WÜksW™hN©iveA¼ayPas£dAsPoš‹rAndSize
) {

7435 
	g¬¿y
[] = {0, 1};

7436 ::
¡d
::
tu¶e
<*, 
	gsize_t
> 
¬¿y_as_tu¶e
(
¬¿y
, 2);

7437 
EXPECT_THAT
(
¬¿y_as_tu¶e
, 
EËm’tsA»
(0, 1));

7438 
EXPECT_THAT
(
¬¿y_as_tu¶e
, 
NÙ
(
EËm’tsA»
(0)));

7440 
N©iveA¼ayPas£dAsPoš‹rAndSize
 
	gh–³r
;

7441 
EXPECT_CALL
(
h–³r
, 
H–³r
(
_
, _)).
W™h
(
EËm’tsA»
(0, 1));

7442 
	gh–³r
.
H–³r
(
¬¿y
, 2);

7445 
TEST
(
EËm’tsA»Te¡
, 
WÜksW™hTwoDim’siÚ®N©iveA¼ay
) {

7446 cÚ¡ 
	ga2
[][3] = {"hi", "lo"};

7447 
EXPECT_THAT
(
a2
, 
EËm’tsA»
(ElementsAre('h', 'i', '\0'),

7448 
EËm’tsA»
('l', 'o', '\0')));

7449 
EXPECT_THAT
(
a2
, 
EËm’tsA»
(
SŒEq
("hi"), StrEq("lo")));

7450 
EXPECT_THAT
(
a2
, 
EËm’tsA»
(
NÙ
(ElementsAre('h', 'o', '\0')),

7451 
EËm’tsA»
('l', 'o', '\0')));

7454 
TEST
(
EËm’tsA»Te¡
, 
Acû±sSŒšgL™”®
) {

7455 
	g¡d
::
¡ršg
 
¬¿y
[] = {"hi", "one", "two"};

7456 
EXPECT_THAT
(
¬¿y
, 
EËm’tsA»
("hi", "one", "two"));

7457 
EXPECT_THAT
(
¬¿y
, 
NÙ
(
EËm’tsA»
("hi", "one", "too")));

7461 cÚ¡ 
kHi
[];

7463 
TEST
(
EËm’tsA»Te¡
, 
Acû±sA¼ayW™hUnknownSize
) {

7467 
	g¡d
::
¡ršg
 
¬¿y1
[] = {"hi"};

7468 
EXPECT_THAT
(
¬¿y1
, 
EËm’tsA»
(
kHi
));

7470 
	g¡d
::
¡ršg
 
¬¿y2
[] = {"ho"};

7471 
EXPECT_THAT
(
¬¿y2
, 
NÙ
(
EËm’tsA»
(
kHi
)));

7474 cÚ¡ 
	gkHi
[] = "hi";

7476 
TEST
(
EËm’tsA»Te¡
, 
MakesCİyOfArgum’ts
) {

7477 
	gx
 = 1;

7478 
	gy
 = 2;

7480 ::
‹¡šg
::
š‹º®
::
EËm’tsA»M©ch”
<
¡d
::
tu¶e
<, >>

7481 
	gpŞymÜphic_m©ch”
 = 
EËm’tsA»
(
x
, 
y
);

7483 
	gx
 = 
y
 = 0;

7484 cÚ¡ 
	g¬¿y1
[] = {1, 2};

7485 
EXPECT_THAT
(
¬¿y1
, 
pŞymÜphic_m©ch”
);

7486 cÚ¡ 
	g¬¿y2
[] = {0, 0};

7487 
EXPECT_THAT
(
¬¿y2
, 
NÙ
(
pŞymÜphic_m©ch”
));

7494 
TEST
(
EËm’tsA»A¼ayTe¡
, 
CªBeC»©edW™hV®ueA¼ay
) {

7495 cÚ¡ 
	ga
[] = {1, 2, 3};

7497 
	gveùÜ
<> 
‹¡_veùÜ
(
¡d
::
begš
(
a
), std::
’d
(a));

7498 
EXPECT_THAT
(
‹¡_veùÜ
, 
EËm’tsA»A¼ay
(
a
));

7500 
	g‹¡_veùÜ
[2] = 0;

7501 
EXPECT_THAT
(
‹¡_veùÜ
, 
NÙ
(
EËm’tsA»A¼ay
(
a
)));

7504 
TEST
(
EËm’tsA»A¼ayTe¡
, 
CªBeC»©edW™hA¼aySize
) {

7505 
	g¡d
::
¬¿y
<cÚ¡ *, 3> 
	ga
 = {{"one", "two", "three"}};

7507 
	gveùÜ
<
	g¡d
::
¡ršg
> 
‹¡_veùÜ
(
¡d
::
begš
(
a
), std::
’d
(a));

7508 
EXPECT_THAT
(
‹¡_veùÜ
, 
EËm’tsA»A¼ay
(
a
.
d©a
(),‡.
size
()));

7510 cÚ¡ ** 
	gp
 = 
a
.
d©a
();

7511 
	g‹¡_veùÜ
[0] = "1";

7512 
EXPECT_THAT
(
‹¡_veùÜ
, 
NÙ
(
EËm’tsA»A¼ay
(
p
, 
a
.
size
())));

7515 
TEST
(
EËm’tsA»A¼ayTe¡
, 
CªBeC»©edW™houtA¼aySize
) {

7516 cÚ¡ * 
	ga
[] = {"one", "two", "three"};

7518 
	gveùÜ
<
	g¡d
::
¡ršg
> 
‹¡_veùÜ
(
¡d
::
begš
(
a
), std::
’d
(a));

7519 
EXPECT_THAT
(
‹¡_veùÜ
, 
EËm’tsA»A¼ay
(
a
));

7521 
	g‹¡_veùÜ
[0] = "1";

7522 
EXPECT_THAT
(
‹¡_veùÜ
, 
NÙ
(
EËm’tsA»A¼ay
(
a
)));

7525 
TEST
(
EËm’tsA»A¼ayTe¡
, 
CªBeC»©edW™hM©ch”A¼ay
) {

7526 cÚ¡ 
	gM©ch”
<
	g¡d
::
¡ršg
> 
kM©ch”A¼ay
[] = {
SŒEq
("one"), StrEq("two"),

7527 
SŒEq
("three")};

7529 
	gveùÜ
<
	g¡d
::
¡ršg
> 
‹¡_veùÜ
;

7530 
	g‹¡_veùÜ
.
push_back
("one");

7531 
	g‹¡_veùÜ
.
push_back
("two");

7532 
	g‹¡_veùÜ
.
push_back
("three");

7533 
EXPECT_THAT
(
‹¡_veùÜ
, 
EËm’tsA»A¼ay
(
kM©ch”A¼ay
));

7535 
	g‹¡_veùÜ
.
push_back
("three");

7536 
EXPECT_THAT
(
‹¡_veùÜ
, 
NÙ
(
EËm’tsA»A¼ay
(
kM©ch”A¼ay
)));

7539 
TEST
(
EËm’tsA»A¼ayTe¡
, 
CªBeC»©edW™hVeùÜ
) {

7540 cÚ¡ 
	ga
[] = {1, 2, 3};

7541 
	gveùÜ
<> 
‹¡_veùÜ
(
¡d
::
begš
(
a
), std::
’d
(a));

7542 cÚ¡ 
	gveùÜ
<> 
ex³ùed
(
¡d
::
begš
(
a
), std::
’d
(a));

7543 
EXPECT_THAT
(
‹¡_veùÜ
, 
EËm’tsA»A¼ay
(
ex³ùed
));

7544 
	g‹¡_veùÜ
.
push_back
(4);

7545 
EXPECT_THAT
(
‹¡_veùÜ
, 
NÙ
(
EËm’tsA»A¼ay
(
ex³ùed
)));

7548 
TEST
(
EËm’tsA»A¼ayTe¡
, 
TakesIn™Ÿliz”Li¡
) {

7549 cÚ¡ 
	ga
[5] = {1, 2, 3, 4, 5};

7550 
EXPECT_THAT
(
a
, 
EËm’tsA»A¼ay
({1, 2, 3, 4, 5}));

7551 
EXPECT_THAT
(
a
, 
NÙ
(
EËm’tsA»A¼ay
({1, 2, 3, 5, 4})));

7552 
EXPECT_THAT
(
a
, 
NÙ
(
EËm’tsA»A¼ay
({1, 2, 3, 4, 6})));

7555 
TEST
(
EËm’tsA»A¼ayTe¡
, 
TakesIn™Ÿliz”Li¡OfCSŒšgs
) {

7556 cÚ¡ 
	g¡d
::
¡ršg
 
a
[5] = {"a", "b", "c", "d", "e"};

7557 
EXPECT_THAT
(
a
, 
EËm’tsA»A¼ay
({"a", "b", "c", "d", "e"}));

7558 
EXPECT_THAT
(
a
, 
NÙ
(
EËm’tsA»A¼ay
({"a", "b", "c", "e", "d"})));

7559 
EXPECT_THAT
(
a
, 
NÙ
(
EËm’tsA»A¼ay
({"a", "b", "c", "d", "ef"})));

7562 
TEST
(
EËm’tsA»A¼ayTe¡
, 
TakesIn™Ÿliz”Li¡OfSameTy³dM©ch”s
) {

7563 cÚ¡ 
	ga
[5] = {1, 2, 3, 4, 5};

7564 
EXPECT_THAT
(
a
, 
EËm’tsA»A¼ay
({
Eq
(1), Eq(2), Eq(3), Eq(4), Eq(5)}));

7565 
EXPECT_THAT
(
a
, 
NÙ
(
EËm’tsA»A¼ay
({
Eq
(1), Eq(2), Eq(3), Eq(4), Eq(6)})));

7568 
TEST
(
EËm’tsA»A¼ayTe¡
, 
TakesIn™Ÿliz”Li¡OfDifã»ÁTy³dM©ch”s
) {

7569 cÚ¡ 
	ga
[5] = {1, 2, 3, 4, 5};

7573 
EXPECT_THAT
(

7574 
a
, 
EËm’tsA»A¼ay
<
M©ch”
<>>({
Eq
(1), 
Ne
(-2), 
Ge
(3), 
Le
(4), Eq(5)}));

7575 
EXPECT_THAT
(
a
, 
NÙ
(
EËm’tsA»A¼ay
<
M©ch”
<>>(

7576 {
Eq
(1), 
Ne
(-2), 
Ge
(3), 
Le
(4), Eq(6)})));

7579 
TEST
(
EËm’tsA»A¼ayTe¡
, 
CªBeC»©edW™hM©ch”VeùÜ
) {

7580 cÚ¡ 
	ga
[] = {1, 2, 3};

7581 cÚ¡ 
	gM©ch”
<> 
	gkM©ch”s
[] = {
Eq
(1), Eq(2), Eq(3)};

7582 
	gveùÜ
<> 
‹¡_veùÜ
(
¡d
::
begš
(
a
), std::
’d
(a));

7583 cÚ¡ 
	gveùÜ
<
	gM©ch”
<>> 
ex³ùed
(
¡d
::
begš
(
kM©ch”s
),

7584 
¡d
::
’d
(
kM©ch”s
));

7585 
EXPECT_THAT
(
‹¡_veùÜ
, 
EËm’tsA»A¼ay
(
ex³ùed
));

7586 
	g‹¡_veùÜ
.
push_back
(4);

7587 
EXPECT_THAT
(
‹¡_veùÜ
, 
NÙ
(
EËm’tsA»A¼ay
(
ex³ùed
)));

7590 
TEST
(
EËm’tsA»A¼ayTe¡
, 
CªBeC»©edW™hI‹¿tÜRªge
) {

7591 cÚ¡ 
	ga
[] = {1, 2, 3};

7592 cÚ¡ 
	gveùÜ
<> 
‹¡_veùÜ
(
¡d
::
begš
(
a
), std::
’d
(a));

7593 cÚ¡ 
	gveùÜ
<> 
ex³ùed
(
¡d
::
begš
(
a
), std::
’d
(a));

7594 
EXPECT_THAT
(
‹¡_veùÜ
, 
EËm’tsA»A¼ay
(
ex³ùed
.
begš
(),ƒx³ùed.
’d
()));

7596 
EXPECT_THAT
(
‹¡_veùÜ
, 
EËm’tsA»A¼ay
(
¡d
::
begš
(
a
), std::
’d
(a)));

7598 * cÚ¡ 
	gnuÎ_št
 = 
nuÎ±r
;

7599 
EXPECT_THAT
(
‹¡_veùÜ
, 
NÙ
(
EËm’tsA»A¼ay
(
nuÎ_št
,‚ull_int)));

7600 
EXPECT_THAT
((
veùÜ
<>()), 
EËm’tsA»A¼ay
(
nuÎ_št
,‚ull_int));

7605 
TEST
(
EËm’tsA»A¼ayTe¡
, 
WÜksW™hN©iveA¼ay
) {

7606 ::
¡d
::
¡ršg
 
a
[] = {"hi", "ho"};

7607 ::
¡d
::
¡ršg
 
b
[] = {"hi", "ho"};

7609 
EXPECT_THAT
(
a
, 
EËm’tsA»A¼ay
(
b
));

7610 
EXPECT_THAT
(
a
, 
EËm’tsA»A¼ay
(
b
, 2));

7611 
EXPECT_THAT
(
a
, 
NÙ
(
EËm’tsA»A¼ay
(
b
, 1)));

7614 
TEST
(
EËm’tsA»A¼ayTe¡
, 
SourûLiãS·n
) {

7615 cÚ¡ 
	ga
[] = {1, 2, 3};

7616 
	gveùÜ
<> 
‹¡_veùÜ
(
¡d
::
begš
(
a
), std::
’d
(a));

7617 
	gveùÜ
<> 
ex³ù
(
¡d
::
begš
(
a
), std::
’d
(a));

7618 
	gEËm’tsA»A¼ayM©ch”
<> 
	gm©ch”_mak”
 =

7619 
EËm’tsA»A¼ay
(
ex³ù
.
begš
(),ƒx³ù.
’d
());

7620 
EXPECT_THAT
(
‹¡_veùÜ
, 
m©ch”_mak”
);

7623 & 
	gi
 : 
ex³ù
) {

7624 
i
 += 10;

7626 
EXPECT_THAT
(
‹¡_veùÜ
, 
m©ch”_mak”
);

7627 
	g‹¡_veùÜ
.
push_back
(3);

7628 
EXPECT_THAT
(
‹¡_veùÜ
, 
NÙ
(
m©ch”_mak”
));

7635 
MATCHER
(
IsEv’
, ""è{  (
	g¬g
 % 2) == 0; }

7637 
TEST
(
M©ch”MaüoTe¡
, 
WÜks
) {

7638 cÚ¡ 
	gM©ch”
<> 
	gm
 = 
IsEv’
();

7639 
EXPECT_TRUE
(
m
.
M©ches
(6));

7640 
EXPECT_FALSE
(
m
.
M©ches
(7));

7642 
EXPECT_EQ
("i ev’", 
Desüibe
(
m
));

7643 
EXPECT_EQ
("nÙ (i ev’)", 
DesüibeNeg©iÚ
(
m
));

7644 
EXPECT_EQ
("", 
Ex¶aš
(
m
, 6));

7645 
EXPECT_EQ
("", 
Ex¶aš
(
m
, 7));

7649 
MATCHER
(
IsEv’2
, 
Ãg©iÚ
 ? "is odd" : "isƒven") {

7650 ià((
¬g
 % 2) == 0) {

7653 *
»suÉ_li¡’”
 << "OK";

7654  
	gŒue
;

7656 *
	g»suÉ_li¡’”
 << "% 2 =ğ" << (
	g¬g
 % 2);

7657  
	gçl£
;

7663 
MATCHER_P2
(
EqSumOf
, 
x
, 
y
,

7664 
¡d
::
¡ršg
(
Ãg©iÚ
 ? "doesn'tƒqual" : "equals") + "he sum of " +

7665 
PrštToSŒšg
(
x
è+ "‡nd " + PrštToSŒšg(
y
)) {

7666 ià(
¬g
 =ğ(
x
 + 
y
)) {

7667 *
»suÉ_li¡’”
 << "OK";

7668  
	gŒue
;

7672 ià(
	g»suÉ_li¡’”
->
¡»am
(è!ğ
nuÎ±r
) {

7673 *
»suÉ_li¡’”
->
¡»am
(è<< "difà=ğ" << (
x
 + 
y
 - 
¬g
);

7675  
	gçl£
;

7681 
TEST
(
M©ch”MaüoTe¡
, 
DesütiÚCªReã»nûNeg©iÚAndP¬am‘”s
) {

7682 cÚ¡ 
	gM©ch”
<> 
	gm1
 = 
IsEv’2
();

7683 
EXPECT_EQ
("i ev’", 
Desüibe
(
m1
));

7684 
EXPECT_EQ
("i odd", 
DesüibeNeg©iÚ
(
m1
));

7686 cÚ¡ 
	gM©ch”
<> 
	gm2
 = 
EqSumOf
(5, 9);

7687 
EXPECT_EQ
("equ® thsum oà5‡nd 9", 
Desüibe
(
m2
));

7688 
EXPECT_EQ
("dÛ¢'ˆequ®hsum oà5‡nd 9", 
DesüibeNeg©iÚ
(
m2
));

7692 
TEST
(
M©ch”MaüoTe¡
, 
CªEx¶ašM©chResuÉ
) {

7693 cÚ¡ 
	gM©ch”
<> 
	gm1
 = 
IsEv’2
();

7694 
EXPECT_EQ
("OK", 
Ex¶aš
(
m1
, 4));

7695 
EXPECT_EQ
("% 2 =ğ1", 
Ex¶aš
(
m1
, 5));

7697 cÚ¡ 
	gM©ch”
<> 
	gm2
 = 
EqSumOf
(1, 2);

7698 
EXPECT_EQ
("OK", 
Ex¶aš
(
m2
, 3));

7699 
EXPECT_EQ
("difà=ğ-1", 
Ex¶aš
(
m2
, 4));

7705 
MATCHER
(
IsEm±ySŒšg
, "") {

7706 
	gSticAs£¹Ty³Eq
<::
¡d
::
¡ršg
, 
	g¬g_ty³
>();

7707  
	g¬g
.
em±y
();

7710 
MATCHER
(
IsEm±ySŒšgByRef
, "") {

7711 
	gSticAs£¹Ty³Eq
<cÚ¡ ::
¡d
::
¡ršg
&, 
	g¬g_ty³
>();

7712  
	g¬g
.
em±y
();

7715 
TEST
(
M©ch”MaüoTe¡
, 
CªReã»nûArgTy³
) {

7716 cÚ¡ 
	gM©ch”
<::
¡d
::
¡ršg
> 
m1
 = 
IsEm±ySŒšg
();

7717 
EXPECT_TRUE
(
m1
.
M©ches
(""));

7719 cÚ¡ 
	gM©ch”
<cÚ¡ ::
¡d
::
¡ršg
&> 
m2
 = 
IsEm±ySŒšgByRef
();

7720 
EXPECT_TRUE
(
m2
.
M©ches
(""));

7725 
Çme¥aû
 
	gm©ch”_‹¡
 {

7726 
MATCHER
(
IsOdd
, ""è{  (
	g¬g
 % 2) != 0; }

7729 
TEST
(
M©ch”MaüoTe¡
, 
WÜksInName¥aû
) {

7730 
	gM©ch”
<> 
	gm
 = 
m©ch”_‹¡
::
IsOdd
();

7731 
EXPECT_FALSE
(
m
.
M©ches
(4));

7732 
EXPECT_TRUE
(
m
.
M©ches
(5));

7736 
MATCHER
(
IsPos™iveOdd
, "") {

7737  
V®ue
(
¬g
, 
m©ch”_‹¡
::
IsOdd
()) &&‡rg > 0;

7740 
TEST
(
M©ch”MaüoTe¡
, 
CªBeCompo£dUsšgV®ue
) {

7741 
EXPECT_THAT
(3, 
IsPos™iveOdd
());

7742 
EXPECT_THAT
(4, 
NÙ
(
IsPos™iveOdd
()));

7743 
EXPECT_THAT
(-1, 
NÙ
(
IsPos™iveOdd
()));

7748 
MATCHER_P
(
IsG»©”Thª32And
, 
n
, ""è{  
	g¬g
 > 32 &&‡rg > 
	gn
; }

7750 
TEST
(
M©ch”PMaüoTe¡
, 
WÜks
) {

7751 cÚ¡ 
	gM©ch”
<> 
	gm
 = 
IsG»©”Thª32And
(5);

7752 
EXPECT_TRUE
(
m
.
M©ches
(36));

7753 
EXPECT_FALSE
(
m
.
M©ches
(5));

7755 
EXPECT_EQ
("i g»©”hª 32‡nd 5", 
Desüibe
(
m
));

7756 
EXPECT_EQ
("nÙ (i g»©”hª 32‡nd 5)", 
DesüibeNeg©iÚ
(
m
));

7757 
EXPECT_EQ
("", 
Ex¶aš
(
m
, 36));

7758 
EXPECT_EQ
("", 
Ex¶aš
(
m
, 5));

7762 
MATCHER_P
(
_is_G»©”_Thª32ªd_
, 
n
, ""è{  
	g¬g
 > 32 &&‡rg > 
	gn
; }

7764 
TEST
(
M©ch”PMaüoTe¡
, 
G’”©esCÜ»ùDesütiÚ
) {

7765 cÚ¡ 
	gM©ch”
<> 
	gm
 = 
_is_G»©”_Thª32ªd_
(5);

7767 
EXPECT_EQ
("i g»©”hª 32‡nd 5", 
Desüibe
(
m
));

7768 
EXPECT_EQ
("nÙ (i g»©”hª 32‡nd 5)", 
DesüibeNeg©iÚ
(
m
));

7769 
EXPECT_EQ
("", 
Ex¶aš
(
m
, 36));

7770 
EXPECT_EQ
("", 
Ex¶aš
(
m
, 5));

7776 şas 
	cUncİyabËFoo
 {

7777 
	gpublic
:

7778 
ex¶ic™
 
UncİyabËFoo
(
v®ue
è: 
v®ue_
(value) { ()value_; }

7780 
UncİyabËFoo
(cÚ¡ UncİyabËFoo&èğ
d–‘e
;

7781 
	gİ”©Ü
=(cÚ¡ 
UncİyabËFoo
&èğ
d–‘e
;

7783 
	g´iv©e
:

7784 
v®ue_
;

7787 
MATCHER_P
(
Reã»nûsUncİyabË
, 
v¬ŸbË
, ""è{  &
	g¬g
 == &variable; }

7789 
TEST
(
M©ch”PMaüoTe¡
, 
WÜksWh’Ex¶ic™lyIn¡ªtŸ‹dW™hReã»nû
) {

7790 
UncİyabËFoo
 
foo1
('1'), 
foo2
('2');

7791 cÚ¡ 
	gM©ch”
<cÚ¡ 
	gUncİyabËFoo
&> 
	gm
 =

7792 
Reã»nûsUncİyabË
<cÚ¡ 
UncİyabËFoo
&>(
foo1
);

7794 
EXPECT_TRUE
(
m
.
M©ches
(
foo1
));

7795 
EXPECT_FALSE
(
m
.
M©ches
(
foo2
));

7801 
EXPECT_EQ
("»ã»nû uncİyabË 1-by‹ objeù <31>", 
Desüibe
(
m
));

7807 
MATCHER_P3
(
P¬amTy³sA»IÁLÚgAndCh¬
, 
foo
, 
b¬
, 
baz
, "") {

7808 
	gSticAs£¹Ty³Eq
<, 
	gfoo_ty³
>();

7809 
	gSticAs£¹Ty³Eq
<, 
	gb¬_ty³
>();

7810 
	gSticAs£¹Ty³Eq
<, 
	gbaz_ty³
>();

7811  
	g¬g
 == 0;

7814 
TEST
(
M©ch”PnMaüoTe¡
, 
CªReã»nûP¬amTy³s
) {

7815 
EXPECT_THAT
(0, 
P¬amTy³sA»IÁLÚgAndCh¬
(10, 20L, 'a'));

7821 
MATCHER_P2
(
Reã»nûsAnyOf
, 
v¬ŸbË1
, 
v¬ŸbË2
, "") {

7822  &
	g¬g
 =ğ&
v¬ŸbË1
 || &
¬g
 =ğ&
v¬ŸbË2
;

7825 
TEST
(
M©ch”PnMaüoTe¡
, 
WÜksWh’Ex¶ic™lyIn¡ªtŸ‹dW™hReã»nûs
) {

7826 
UncİyabËFoo
 
foo1
('1'), 
foo2
('2'), 
foo3
('3');

7827 cÚ¡ 
	gM©ch”
<cÚ¡ 
	gUncİyabËFoo
&> 
	gcÚ¡_m
 =

7828 
Reã»nûsAnyOf
<cÚ¡ 
UncİyabËFoo
&, cÚ¡ 
	gUncİyabËFoo
&>(
	gfoo1
, 
	gfoo2
);

7830 
EXPECT_TRUE
(
cÚ¡_m
.
M©ches
(
foo1
));

7831 
EXPECT_TRUE
(
cÚ¡_m
.
M©ches
(
foo2
));

7832 
EXPECT_FALSE
(
cÚ¡_m
.
M©ches
(
foo3
));

7834 cÚ¡ 
	gM©ch”
<
	gUncİyabËFoo
&> 
	gm
 =

7835 
Reã»nûsAnyOf
<
UncİyabËFoo
&, 
	gUncİyabËFoo
&>(
	gfoo1
, 
	gfoo2
);

7837 
EXPECT_TRUE
(
m
.
M©ches
(
foo1
));

7838 
EXPECT_TRUE
(
m
.
M©ches
(
foo2
));

7839 
EXPECT_FALSE
(
m
.
M©ches
(
foo3
));

7842 
TEST
(
M©ch”PnMaüoTe¡
,

7843 
G’”©esCÜ»tDesütiÚWh’Ex¶ic™lyIn¡ªtŸ‹dW™hReã»nûs
) {

7844 
UncİyabËFoo
 
foo1
('1'), 
foo2
('2');

7845 cÚ¡ 
	gM©ch”
<cÚ¡ 
	gUncİyabËFoo
&> 
	gm
 =

7846 
Reã»nûsAnyOf
<cÚ¡ 
UncİyabËFoo
&, cÚ¡ 
	gUncİyabËFoo
&>(
	gfoo1
, 
	gfoo2
);

7852 
EXPECT_EQ
("references‡ny of (1-byte object <31>, 1-byte object <32>)",

7853 
Desüibe
(
m
));

7858 
MATCHER_P2
(
IsNÙInClo£dRªge
, 
low
, 
hi
, ""è{  
	g¬g
 < 
	glow
 ||‡rg > 
	ghi
; }

7860 
TEST
(
M©ch”PnMaüoTe¡
, 
WÜks
) {

7861 cÚ¡ 
	gM©ch”
<cÚ¡ &> 
	gm
 = 
IsNÙInClo£dRªge
(10, 20);

7862 
EXPECT_TRUE
(
m
.
M©ches
(36L));

7863 
EXPECT_FALSE
(
m
.
M©ches
(15L));

7865 
EXPECT_EQ
("i nÙ iÀşo£d„ªg(10, 20)", 
Desüibe
(
m
));

7866 
EXPECT_EQ
("nÙ (i nÙ iÀşo£d„ªg(10, 20))", 
DesüibeNeg©iÚ
(
m
));

7867 
EXPECT_EQ
("", 
Ex¶aš
(
m
, 36L));

7868 
EXPECT_EQ
("", 
Ex¶aš
(
m
, 15L));

7874 
MATCHER
(
Equ®sSumOf
, ""è{  
	g¬g
 == 0; }

7875 
MATCHER_P
(
Equ®sSumOf
, 
a
, ""è{  
	g¬g
 ==‡; }

7876 
MATCHER_P2
(
Equ®sSumOf
, 
a
, 
b
, ""è{  
	g¬g
 ==‡ + b; }

7877 
MATCHER_P3
(
Equ®sSumOf
, 
a
, 
b
, 
c
, ""è{  
	g¬g
 ==‡ + b + c; }

7878 
MATCHER_P4
(
Equ®sSumOf
, 
a
, 
b
, 
c
, 
d
, ""è{  
	g¬g
 ==‡ + b + c + d; }

7879 
MATCHER_P5
(
Equ®sSumOf
, 
a
, 
b
, 
c
, 
d
, 
e
, ""è{  
	g¬g
 ==‡ + b + c + d +ƒ; }

7880 
MATCHER_P6
(
Equ®sSumOf
, 
a
, 
b
, 
c
, 
d
, 
e
, 
f
, "") {

7881  
	g¬g
 =ğ
a
 + 
b
 + 
c
 + 
d
 + 
e
 + 
f
;

7883 
MATCHER_P7
(
Equ®sSumOf
, 
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
, "") {

7884  
	g¬g
 =ğ
a
 + 
b
 + 
c
 + 
d
 + 
e
 + 
f
 + 
g
;

7886 
MATCHER_P8
(
Equ®sSumOf
, 
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
, 
h
, "") {

7887  
	g¬g
 =ğ
a
 + 
b
 + 
c
 + 
d
 + 
e
 + 
f
 + 
g
 + 
h
;

7889 
MATCHER_P9
(
Equ®sSumOf
, 
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
, 
h
, 
i
, "") {

7890  
	g¬g
 =ğ
a
 + 
b
 + 
c
 + 
d
 + 
e
 + 
f
 + 
g
 + 
h
 + 
i
;

7892 
MATCHER_P10
(
Equ®sSumOf
, 
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
, 
h
, 
i
, 
j
, "") {

7893  
	g¬g
 =ğ
a
 + 
b
 + 
c
 + 
d
 + 
e
 + 
f
 + 
g
 + 
h
 + 
i
 + 
j
;

7896 
TEST
(
M©ch”PnMaüoTe¡
, 
CªBeOv”lßdedOnNumb”OfP¬am‘”s
) {

7897 
EXPECT_THAT
(0, 
Equ®sSumOf
());

7898 
EXPECT_THAT
(1, 
Equ®sSumOf
(1));

7899 
EXPECT_THAT
(12, 
Equ®sSumOf
(10, 2));

7900 
EXPECT_THAT
(123, 
Equ®sSumOf
(100, 20, 3));

7901 
EXPECT_THAT
(1234, 
Equ®sSumOf
(1000, 200, 30, 4));

7902 
EXPECT_THAT
(12345, 
Equ®sSumOf
(10000, 2000, 300, 40, 5));

7903 
EXPECT_THAT
("abcdef",

7904 
Equ®sSumOf
(::
¡d
::
¡ršg
("a"), 'b', 'c', "d", "e", 'f'));

7905 
EXPECT_THAT
("abcdefg",

7906 
Equ®sSumOf
(::
¡d
::
¡ršg
("a"), 'b', 'c', "d", "e", 'f', 'g'));

7907 
EXPECT_THAT
("abcdefgh", 
Equ®sSumOf
(::
¡d
::
¡ršg
("a"), 'b', 'c', "d", "e",

7909 
EXPECT_THAT
("abcdefghi", 
Equ®sSumOf
(::
¡d
::
¡ršg
("a"), 'b', 'c', "d", "e",

7911 
EXPECT_THAT
("abcdefghij",

7912 
Equ®sSumOf
(::
¡d
::
¡ršg
("a"), 'b', 'c', "d", "e", 'f', 'g', "h",

7913 'i', ::
¡d
::
¡ršg
("j")));

7915 
EXPECT_THAT
(1, 
NÙ
(
Equ®sSumOf
()));

7916 
EXPECT_THAT
(-1, 
NÙ
(
Equ®sSumOf
(1)));

7917 
EXPECT_THAT
(-12, 
NÙ
(
Equ®sSumOf
(10, 2)));

7918 
EXPECT_THAT
(-123, 
NÙ
(
Equ®sSumOf
(100, 20, 3)));

7919 
EXPECT_THAT
(-1234, 
NÙ
(
Equ®sSumOf
(1000, 200, 30, 4)));

7920 
EXPECT_THAT
(-12345, 
NÙ
(
Equ®sSumOf
(10000, 2000, 300, 40, 5)));

7921 
EXPECT_THAT
("abcdef ",

7922 
NÙ
(
Equ®sSumOf
(::
¡d
::
¡ršg
("a"), 'b', 'c', "d", "e", 'f')));

7923 
EXPECT_THAT
("abcdefg ", 
NÙ
(
Equ®sSumOf
(::
¡d
::
¡ršg
("a"), 'b', 'c', "d",

7925 
EXPECT_THAT
("abcdefgh ", 
NÙ
(
Equ®sSumOf
(::
¡d
::
¡ršg
("a"), 'b', 'c', "d",

7927 
EXPECT_THAT
("abcdefgh˜", 
NÙ
(
Equ®sSumOf
(::
¡d
::
¡ršg
("a"), 'b', 'c', "d",

7929 
EXPECT_THAT
("abcdefghij ",

7930 
NÙ
(
Equ®sSumOf
(::
¡d
::
¡ršg
("a"), 'b', 'c', "d", "e", 'f', 'g',

7931 "h", 'i', ::
¡d
::
¡ršg
("j"))));

7936 
TEST
(
M©ch”PnMaüoTe¡
, 
WÜksFÜDifã»ÁP¬am‘”Ty³s
) {

7937 
EXPECT_THAT
(123, 
Equ®sSumOf
(100L, 20, 
¡©ic_ÿ¡
<>(3)));

7938 
EXPECT_THAT
("abcd", 
Equ®sSumOf
(::
¡d
::
¡ršg
("a"), "b", 'c', "d"));

7940 
EXPECT_THAT
(124, 
NÙ
(
Equ®sSumOf
(100L, 20, 
¡©ic_ÿ¡
<>(3))));

7941 
EXPECT_THAT
("abcde", 
NÙ
(
Equ®sSumOf
(::
¡d
::
¡ršg
("a"), "b", 'c', "d")));

7946 
MATCHER_P2
(
EqCÚÿt
, 
´efix
, 
suffix
, "") {

7948 
	g¡d
::
¡ršg
 
´efix_¡r
(
´efix
);

7949 
	gsuffix_ch¬
 = 
¡©ic_ÿ¡
<>(
suffix
);

7950  
	g¬g
 =ğ
´efix_¡r
 + 
suffix_ch¬
;

7953 
TEST
(
M©ch”PnMaüoTe¡
, 
Sim¶eTy³PromÙiÚ
) {

7954 
	gM©ch”
<
	g¡d
::
¡ršg
> 
no_´omo
 = 
EqCÚÿt
(
¡d
::string("foo"), 't');

7955 
	gM©ch”
<cÚ¡ 
	g¡d
::
¡ršg
&> 
´omo
 = 
EqCÚÿt
("foo", 
¡©ic_ÿ¡
<>('t'));

7956 
EXPECT_FALSE
(
no_´omo
.
M©ches
("fool"));

7957 
EXPECT_FALSE
(
´omo
.
M©ches
("fool"));

7958 
EXPECT_TRUE
(
no_´omo
.
M©ches
("foot"));

7959 
EXPECT_TRUE
(
´omo
.
M©ches
("foot"));

7964 
TEST
(
M©ch”PnMaüoTe¡
, 
Ty³sA»CÜ»ù
) {

7966 
Equ®sSumOfM©ch”
 
	ga0
 = 
Equ®sSumOf
();

7969 
	gEqu®sSumOfM©ch”P
<> 
	ga1
 = 
Equ®sSumOf
(1);

7973 
	gEqu®sSumOfM©ch”P2
<, > 
	ga2
 = 
Equ®sSumOf
(1, '2');

7974 
	gEqu®sSumOfM©ch”P3
<, , > 
	ga3
 = 
Equ®sSumOf
(1, 2, '3');

7975 
	gEqu®sSumOfM©ch”P4
<, , , > 
	ga4
 = 
Equ®sSumOf
(1, 2, 3, '4');

7976 
	gEqu®sSumOfM©ch”P5
<, , , , > 
	ga5
 =

7977 
Equ®sSumOf
(1, 2, 3, 4, '5');

7978 
	gEqu®sSumOfM©ch”P6
<, , , , , > 
	ga6
 =

7979 
Equ®sSumOf
(1, 2, 3, 4, 5, '6');

7980 
	gEqu®sSumOfM©ch”P7
<, , , , , , > 
	ga7
 =

7981 
Equ®sSumOf
(1, 2, 3, 4, 5, 6, '7');

7982 
	gEqu®sSumOfM©ch”P8
<, , , , , , , > 
	ga8
 =

7983 
Equ®sSumOf
(1, 2, 3, 4, 5, 6, 7, '8');

7984 
	gEqu®sSumOfM©ch”P9
<, , , , , , , , > 
	ga9
 =

7985 
Equ®sSumOf
(1, 2, 3, 4, 5, 6, 7, 8, '9');

7986 
	gEqu®sSumOfM©ch”P10
<, , , , , , , , , > 
	ga10
 =

7987 
Equ®sSumOf
(1, 2, 3, 4, 5, 6, 7, 8, 9, '0');

7990 ()
	ga0
;

7991 ()
	ga1
;

7992 ()
	ga2
;

7993 ()
	ga3
;

7994 ()
	ga4
;

7995 ()
	ga5
;

7996 ()
	ga6
;

7997 ()
	ga7
;

7998 ()
	ga8
;

7999 ()
	ga9
;

8000 ()
	ga10
;

8007 
MATCHER_P3
(
TwoOf
, 
m1
, 
m2
, 
m3
, "") {

8008 cÚ¡ 
	gcouÁ
 = 
¡©ic_ÿ¡
<>(
V®ue
(
¬g
, 
m1
)) +

8009 
	g¡©ic_ÿ¡
<>(
V®ue
(
¬g
, 
m2
)) +

8010 
	g¡©ic_ÿ¡
<>(
V®ue
(
¬g
, 
m3
));

8011  
	gcouÁ
 == 2;

8014 
TEST
(
M©ch”PnMaüoTe¡
, 
CªU£M©ch”Ty³dP¬am‘”InV®ue
) {

8015 
EXPECT_THAT
(42, 
TwoOf
(
Gt
(0), 
Lt
(50), 
Eq
(10)));

8016 
EXPECT_THAT
(0, 
NÙ
(
TwoOf
(
Gt
(-1), 
Lt
(1), 
Eq
(0))));

8021 
TEST
(
CÚšsTe¡
, 
Li¡M©chesWh’EËm’tIsInCÚš”
) {

8022 
	gli¡
<> 
	gsome_li¡
;

8023 
	gsome_li¡
.
push_back
(3);

8024 
	gsome_li¡
.
push_back
(1);

8025 
	gsome_li¡
.
push_back
(2);

8026 
EXPECT_THAT
(
some_li¡
, 
CÚšs
(1));

8027 
EXPECT_THAT
(
some_li¡
, 
CÚšs
(
Gt
(2.5)));

8028 
EXPECT_THAT
(
some_li¡
, 
CÚšs
(
Eq
(2.0f)));

8030 
	gli¡
<
	g¡d
::
¡ršg
> 
ªÙh”_li¡
;

8031 
	gªÙh”_li¡
.
push_back
("fee");

8032 
	gªÙh”_li¡
.
push_back
("fie");

8033 
	gªÙh”_li¡
.
push_back
("foe");

8034 
	gªÙh”_li¡
.
push_back
("fum");

8035 
EXPECT_THAT
(
ªÙh”_li¡
, 
CÚšs
(
¡d
::
¡ršg
("fee")));

8038 
TEST
(
CÚšsTe¡
, 
Li¡DÛsNÙM©chWh’EËm’tIsNÙInCÚš”
) {

8039 
	gli¡
<> 
	gsome_li¡
;

8040 
	gsome_li¡
.
push_back
(3);

8041 
	gsome_li¡
.
push_back
(1);

8042 
EXPECT_THAT
(
some_li¡
, 
NÙ
(
CÚšs
(4)));

8045 
TEST
(
CÚšsTe¡
, 
S‘M©chesWh’EËm’tIsInCÚš”
) {

8046 
	g£t
<> 
	gsome_£t
;

8047 
	gsome_£t
.
š£¹
(3);

8048 
	gsome_£t
.
š£¹
(1);

8049 
	gsome_£t
.
š£¹
(2);

8050 
EXPECT_THAT
(
some_£t
, 
CÚšs
(
Eq
(1.0)));

8051 
EXPECT_THAT
(
some_£t
, 
CÚšs
(
Eq
(3.0f)));

8052 
EXPECT_THAT
(
some_£t
, 
CÚšs
(2));

8054 
	g£t
<
	g¡d
::
¡ršg
> 
ªÙh”_£t
;

8055 
	gªÙh”_£t
.
š£¹
("fee");

8056 
	gªÙh”_£t
.
š£¹
("fie");

8057 
	gªÙh”_£t
.
š£¹
("foe");

8058 
	gªÙh”_£t
.
š£¹
("fum");

8059 
EXPECT_THAT
(
ªÙh”_£t
, 
CÚšs
(
Eq
(
¡d
::
¡ršg
("fum"))));

8062 
TEST
(
CÚšsTe¡
, 
S‘DÛsNÙM©chWh’EËm’tIsNÙInCÚš”
) {

8063 
	g£t
<> 
	gsome_£t
;

8064 
	gsome_£t
.
š£¹
(3);

8065 
	gsome_£t
.
š£¹
(1);

8066 
EXPECT_THAT
(
some_£t
, 
NÙ
(
CÚšs
(4)));

8068 
	g£t
<
	g¡d
::
¡ršg
> 
c_¡ršg_£t
;

8069 
	gc_¡ršg_£t
.
š£¹
("hello");

8070 
EXPECT_THAT
(
c_¡ršg_£t
, 
NÙ
(
CÚšs
(
¡d
::
¡ršg
("goodbye"))));

8073 
TEST
(
CÚšsTe¡
, 
Ex¶ašsM©chResuÉCÜ»ùly
) {

8074 cÚ¡ 
	ga
[2] = {1, 2};

8075 
	gM©ch”
<cÚ¡ (&)[2]> 
	gm
 = 
CÚšs
(2);

8076 
EXPECT_EQ
("who£ƒËm’ˆ#1 m©ches", 
Ex¶aš
(
m
, 
a
));

8078 
	gm
 = 
CÚšs
(3);

8079 
EXPECT_EQ
("", 
Ex¶aš
(
m
, 
a
));

8081 
	gm
 = 
CÚšs
(
G»©”Thª
(0));

8082 
EXPECT_EQ
("who£ƒËm’ˆ#0 m©ches, which i 1 mÜthª 0", 
Ex¶aš
(
m
, 
a
));

8084 
	gm
 = 
CÚšs
(
G»©”Thª
(10));

8085 
EXPECT_EQ
("", 
Ex¶aš
(
m
, 
a
));

8088 
TEST
(
CÚšsTe¡
, 
DesüibesIt£lfCÜ»ùly
) {

8089 
	gM©ch”
<
	gveùÜ
<>> 
	gm
 = 
CÚšs
(1);

8090 
EXPECT_EQ
("cÚš ©†—¡ oÃƒËm’ˆth© i equ®Ø1", 
Desüibe
(
m
));

8092 
	gM©ch”
<
	gveùÜ
<>> 
	gm2
 = 
NÙ
(
m
);

8093 
EXPECT_EQ
("dÛ¢'ˆcÚš‡nyƒËm’ˆth© i equ®Ø1", 
Desüibe
(
m2
));

8096 
TEST
(
CÚšsTe¡
, 
M­M©chesWh’EËm’tIsInCÚš”
) {

8097 
	gm­
<
	g¡d
::
¡ršg
, > 
	gmy_m­
;

8098 cÚ¡ * 
	gb¬
 = "a string";

8099 
	gmy_m­
[
b¬
] = 2;

8100 
EXPECT_THAT
(
my_m­
, 
CÚšs
(
·œ
<cÚ¡ * cÚ¡, >(
b¬
, 2)));

8102 
	gm­
<
	g¡d
::
¡ršg
, > 
	gªÙh”_m­
;

8103 
	gªÙh”_m­
["fee"] = 1;

8104 
	gªÙh”_m­
["fie"] = 2;

8105 
	gªÙh”_m­
["foe"] = 3;

8106 
	gªÙh”_m­
["fum"] = 4;

8107 
EXPECT_THAT
(
ªÙh”_m­
,

8108 
CÚšs
(
·œ
<cÚ¡ 
¡d
::
¡ršg
, >(std::string("fee"), 1)));

8109 
EXPECT_THAT
(
ªÙh”_m­
, 
CÚšs
(
·œ
<cÚ¡ 
¡d
::
¡ršg
, >("fie", 2)));

8112 
TEST
(
CÚšsTe¡
, 
M­DÛsNÙM©chWh’EËm’tIsNÙInCÚš”
) {

8113 
	gm­
<, > 
	gsome_m­
;

8114 
	gsome_m­
[1] = 11;

8115 
	gsome_m­
[2] = 22;

8116 
EXPECT_THAT
(
some_m­
, 
NÙ
(
CÚšs
(
·œ
<const , >(2, 23))));

8119 
TEST
(
CÚšsTe¡
, 
A¼ayM©chesWh’EËm’tIsInCÚš”
) {

8120 cÚ¡ * 
	g¡ršg_¬¿y
[] = {"fee", "fie", "foe", "fum"};

8121 
EXPECT_THAT
(
¡ršg_¬¿y
, 
CÚšs
(
Eq
(
¡d
::
¡ršg
("fum"))));

8124 
TEST
(
CÚšsTe¡
, 
A¼ayDÛsNÙM©chWh’EËm’tIsNÙInCÚš”
) {

8125 
	gšt_¬¿y
[] = {1, 2, 3, 4};

8126 
EXPECT_THAT
(
št_¬¿y
, 
NÙ
(
CÚšs
(5)));

8129 
TEST
(
CÚšsTe¡
, 
Acû±sM©ch”
) {

8130 cÚ¡ 
	ga
[] = {1, 2, 3};

8131 
EXPECT_THAT
(
a
, 
CÚšs
(
Gt
(2)));

8132 
EXPECT_THAT
(
a
, 
NÙ
(
CÚšs
(
Gt
(4))));

8135 
TEST
(
CÚšsTe¡
, 
WÜksFÜN©iveA¼ayAsTu¶e
) {

8136 cÚ¡ 
	ga
[] = {1, 2};

8137 cÚ¡ * cÚ¡ 
	gpoš‹r
 = 
a
;

8138 
EXPECT_THAT
(
¡d
::
make_tu¶e
(
poš‹r
, 2), 
CÚšs
(1));

8139 
EXPECT_THAT
(
¡d
::
make_tu¶e
(
poš‹r
, 2), 
NÙ
(
CÚšs
(
Gt
(3))));

8142 
TEST
(
CÚšsTe¡
, 
WÜksFÜTwoDim’siÚ®N©iveA¼ay
) {

8143 
	ga
[][3] = {{1, 2, 3}, {4, 5, 6}};

8144 
EXPECT_THAT
(
a
, 
CÚšs
(
EËm’tsA»
(4, 5, 6)));

8145 
EXPECT_THAT
(
a
, 
CÚšs
(Contains(5)));

8146 
EXPECT_THAT
(
a
, 
NÙ
(
CÚšs
(
EËm’tsA»
(3, 4, 5))));

8147 
EXPECT_THAT
(
a
, 
CÚšs
(
NÙ
(Contains(5))));

8150 
TEST
(
AÎOfA¼ayTe¡
, 
BasicFÜms
) {

8152 
	g¡d
::
veùÜ
<> 
v0
{};

8153 
	g¡d
::
veùÜ
<> 
v1
{1};

8154 
	g¡d
::
veùÜ
<> 
v2
{2, 3};

8155 
	g¡d
::
veùÜ
<> 
v3
{4, 4, 4};

8156 
EXPECT_THAT
(0, 
AÎOfA¼ay
(
v0
.
begš
(), v0.
’d
()));

8157 
EXPECT_THAT
(1, 
AÎOfA¼ay
(
v1
.
begš
(), v1.
’d
()));

8158 
EXPECT_THAT
(2, 
NÙ
(
AÎOfA¼ay
(
v1
.
begš
(), v1.
’d
())));

8159 
EXPECT_THAT
(3, 
NÙ
(
AÎOfA¼ay
(
v2
.
begš
(), v2.
’d
())));

8160 
EXPECT_THAT
(4, 
AÎOfA¼ay
(
v3
.
begš
(), v3.
’d
()));

8162 
	g¬
[6] = {1, 2, 3, 4, 4, 4};

8163 
EXPECT_THAT
(0, 
AÎOfA¼ay
(
¬
, 0));

8164 
EXPECT_THAT
(1, 
AÎOfA¼ay
(
¬
, 1));

8165 
EXPECT_THAT
(2, 
NÙ
(
AÎOfA¼ay
(
¬
, 1)));

8166 
EXPECT_THAT
(3, 
NÙ
(
AÎOfA¼ay
(
¬
 + 1, 3)));

8167 
EXPECT_THAT
(4, 
AÎOfA¼ay
(
¬
 + 3, 3));

8170 
	g¬1
[1] = {1};

8171 
	g¬2
[2] = {2, 3};

8172 
	g¬3
[3] = {4, 4, 4};

8174 
EXPECT_THAT
(1, 
AÎOfA¼ay
(
¬1
));

8175 
EXPECT_THAT
(2, 
NÙ
(
AÎOfA¼ay
(
¬1
)));

8176 
EXPECT_THAT
(3, 
NÙ
(
AÎOfA¼ay
(
¬2
)));

8177 
EXPECT_THAT
(4, 
AÎOfA¼ay
(
¬3
));

8179 
EXPECT_THAT
(0, 
AÎOfA¼ay
(
v0
));

8180 
EXPECT_THAT
(1, 
AÎOfA¼ay
(
v1
));

8181 
EXPECT_THAT
(2, 
NÙ
(
AÎOfA¼ay
(
v1
)));

8182 
EXPECT_THAT
(3, 
NÙ
(
AÎOfA¼ay
(
v2
)));

8183 
EXPECT_THAT
(4, 
AÎOfA¼ay
(
v3
));

8185 
EXPECT_THAT
(0, 
AÎOfA¼ay
<>({}));

8186 
EXPECT_THAT
(1, 
AÎOfA¼ay
({1}));

8187 
EXPECT_THAT
(2, 
NÙ
(
AÎOfA¼ay
({1})));

8188 
EXPECT_THAT
(3, 
NÙ
(
AÎOfA¼ay
({2, 3})));

8189 
EXPECT_THAT
(4, 
AÎOfA¼ay
({4, 4, 4}));

8192 
TEST
(
AÎOfA¼ayTe¡
, 
M©ch”s
) {

8194 
	g¡d
::
veùÜ
<
M©ch”
<>> 
m©ch”s
{
Ge
(1), 
Lt
(2)};

8195 
EXPECT_THAT
(0, 
NÙ
(
AÎOfA¼ay
(
m©ch”s
)));

8196 
EXPECT_THAT
(1, 
AÎOfA¼ay
(
m©ch”s
));

8197 
EXPECT_THAT
(2, 
NÙ
(
AÎOfA¼ay
(
m©ch”s
)));

8199 
EXPECT_THAT
(0, 
NÙ
(
AÎOfA¼ay
({
Ge
(0), Ge(1)})));

8200 
EXPECT_THAT
(1, 
AÎOfA¼ay
({
Ge
(0), Ge(1)}));

8203 
TEST
(
AnyOfA¼ayTe¡
, 
BasicFÜms
) {

8205 
	g¡d
::
veùÜ
<> 
v0
{};

8206 
	g¡d
::
veùÜ
<> 
v1
{1};

8207 
	g¡d
::
veùÜ
<> 
v2
{2, 3};

8208 
EXPECT_THAT
(0, 
NÙ
(
AnyOfA¼ay
(
v0
.
begš
(), v0.
’d
())));

8209 
EXPECT_THAT
(1, 
AnyOfA¼ay
(
v1
.
begš
(), v1.
’d
()));

8210 
EXPECT_THAT
(2, 
NÙ
(
AnyOfA¼ay
(
v1
.
begš
(), v1.
’d
())));

8211 
EXPECT_THAT
(3, 
AnyOfA¼ay
(
v2
.
begš
(), v2.
’d
()));

8212 
EXPECT_THAT
(4, 
NÙ
(
AnyOfA¼ay
(
v2
.
begš
(), v2.
’d
())));

8214 
	g¬
[3] = {1, 2, 3};

8215 
EXPECT_THAT
(0, 
NÙ
(
AnyOfA¼ay
(
¬
, 0)));

8216 
EXPECT_THAT
(1, 
AnyOfA¼ay
(
¬
, 1));

8217 
EXPECT_THAT
(2, 
NÙ
(
AnyOfA¼ay
(
¬
, 1)));

8218 
EXPECT_THAT
(3, 
AnyOfA¼ay
(
¬
 + 1, 2));

8219 
EXPECT_THAT
(4, 
NÙ
(
AnyOfA¼ay
(
¬
 + 1, 2)));

8222 
	g¬1
[1] = {1};

8223 
	g¬2
[2] = {2, 3};

8225 
EXPECT_THAT
(1, 
AnyOfA¼ay
(
¬1
));

8226 
EXPECT_THAT
(2, 
NÙ
(
AnyOfA¼ay
(
¬1
)));

8227 
EXPECT_THAT
(3, 
AnyOfA¼ay
(
¬2
));

8228 
EXPECT_THAT
(4, 
NÙ
(
AnyOfA¼ay
(
¬2
)));

8230 
EXPECT_THAT
(0, 
NÙ
(
AnyOfA¼ay
(
v0
)));

8231 
EXPECT_THAT
(1, 
AnyOfA¼ay
(
v1
));

8232 
EXPECT_THAT
(2, 
NÙ
(
AnyOfA¼ay
(
v1
)));

8233 
EXPECT_THAT
(3, 
AnyOfA¼ay
(
v2
));

8234 
EXPECT_THAT
(4, 
NÙ
(
AnyOfA¼ay
(
v2
)));

8236 
EXPECT_THAT
(0, 
NÙ
(
AnyOfA¼ay
<>({})));

8237 
EXPECT_THAT
(1, 
AnyOfA¼ay
({1}));

8238 
EXPECT_THAT
(2, 
NÙ
(
AnyOfA¼ay
({1})));

8239 
EXPECT_THAT
(3, 
AnyOfA¼ay
({2, 3}));

8240 
EXPECT_THAT
(4, 
NÙ
(
AnyOfA¼ay
({2, 3})));

8243 
TEST
(
AnyOfA¼ayTe¡
, 
M©ch”s
) {

8246 
	g¡d
::
veùÜ
<
M©ch”
<>> 
m©ch”s
{
Lt
(1), 
Ge
(2)};

8247 
EXPECT_THAT
(0, 
AnyOfA¼ay
(
m©ch”s
));

8248 
EXPECT_THAT
(1, 
NÙ
(
AnyOfA¼ay
(
m©ch”s
)));

8249 
EXPECT_THAT
(2, 
AnyOfA¼ay
(
m©ch”s
));

8251 
EXPECT_THAT
(0, 
AnyOfA¼ay
({
Lt
(0), Lt(1)}));

8252 
EXPECT_THAT
(1, 
NÙ
(
AÎOfA¼ay
({
Lt
(0), Lt(1)})));

8255 
TEST
(
AnyOfA¼ayTe¡
, 
Ex¶ašsM©chResuÉCÜ»ùly
) {

8258 cÚ¡ 
	g¡d
::
veùÜ
<> 
v0
{};

8259 cÚ¡ 
	g¡d
::
veùÜ
<> 
v1
{1};

8260 cÚ¡ 
	g¡d
::
veùÜ
<> 
v2
{2, 3};

8261 cÚ¡ 
	gM©ch”
<> 
	gm0
 = 
AnyOfA¼ay
(
v0
);

8262 cÚ¡ 
	gM©ch”
<> 
	gm1
 = 
AnyOfA¼ay
(
v1
);

8263 cÚ¡ 
	gM©ch”
<> 
	gm2
 = 
AnyOfA¼ay
(
v2
);

8264 
EXPECT_EQ
("", 
Ex¶aš
(
m0
, 0));

8265 
EXPECT_EQ
("", 
Ex¶aš
(
m1
, 1));

8266 
EXPECT_EQ
("", 
Ex¶aš
(
m1
, 2));

8267 
EXPECT_EQ
("", 
Ex¶aš
(
m2
, 3));

8268 
EXPECT_EQ
("", 
Ex¶aš
(
m2
, 4));

8269 
EXPECT_EQ
("()", 
Desüibe
(
m0
));

8270 
EXPECT_EQ
("(i equ®Ø1)", 
Desüibe
(
m1
));

8271 
EXPECT_EQ
("(i equ®Ø2èÜ (i equ®Ø3)", 
Desüibe
(
m2
));

8272 
EXPECT_EQ
("()", 
DesüibeNeg©iÚ
(
m0
));

8273 
EXPECT_EQ
("(i¢'ˆequ®Ø1)", 
DesüibeNeg©iÚ
(
m1
));

8274 
EXPECT_EQ
("(i¢'ˆequ®Ø2èªd (i¢'ˆequ®Ø3)", 
DesüibeNeg©iÚ
(
m2
));

8276 cÚ¡ 
	gM©ch”
<> 
	gg1
 = 
AnyOfA¼ay
({
G»©”Thª
(1)});

8277 cÚ¡ 
	gM©ch”
<> 
	gg2
 = 
AnyOfA¼ay
({
G»©”Thª
(1), GreaterThan(2)});

8279 
EXPECT_EQ
("which i 1†es thª 1", 
Ex¶aš
(
g1
, 0));

8280 
EXPECT_EQ
("which i th§ma 1", 
Ex¶aš
(
g1
, 1));

8281 
EXPECT_EQ
("which i 1 mÜthª 1", 
Ex¶aš
(
g1
, 2));

8282 
EXPECT_EQ
("which is 1†esshan 1,‡nd which is 2†esshan 2",

8283 
Ex¶aš
(
g2
, 0));

8284 
EXPECT_EQ
("which ishe same‡s 1,‡nd which is 1†esshan 2",

8285 
Ex¶aš
(
g2
, 1));

8286 
EXPECT_EQ
("which is 1 morehan 1",

8287 
Ex¶aš
(
g2
, 2));

8290 
TEST
(
AÎOfTe¡
, 
HugeM©ch”
) {

8293 
EXPECT_THAT
(0, 
‹¡šg
::
AÎOf
(
_
, _, _, _, _, _, _, _, _,

8294 
‹¡šg
::
AÎOf
(
_
, _, _, _, _, _, _, _, _, _)));

8297 
TEST
(
AnyOfTe¡
, 
HugeM©ch”
) {

8300 
EXPECT_THAT
(0, 
‹¡šg
::
AnyOf
(
_
, _, _, _, _, _, _, _, _,

8301 
‹¡šg
::
AnyOf
(
_
, _, _, _, _, _, _, _, _, _)));

8304 
Çme¥aû
 
	gadl_‹¡
 {

8313 
MATCHER
(
M
, "") {

8314 ()
	g¬g
;

8315  
	gŒue
;

8318 
	g‹m¶©e
 <
ty³Çme
 
	gT1
,y³Çm
	gT2
>

8319 
boŞ
 
AÎOf
(cÚ¡ 
T1
& , cÚ¡ 
T2
& ) {

8320  
	gŒue
;

8323 
TEST
(
AÎOfTe¡
, 
DÛsNÙC®lAÎOfUnqu®if›d
) {

8324 
EXPECT_THAT
(42,

8325 
‹¡šg
::
AÎOf
(
M
(), M(), M(), M(), M(), M(), M(), M(), M(), M()));

8328 
	g‹m¶©e
 <
ty³Çme
 
	gT1
,y³Çm
	gT2
>

8329 
boŞ
 
AnyOf
(cÚ¡ 
T1
&, cÚ¡ 
T2
&) {

8330  
	gŒue
;

8333 
TEST
(
AnyOfTe¡
, 
DÛsNÙC®lAnyOfUnqu®if›d
) {

8334 
EXPECT_THAT
(42,

8335 
‹¡šg
::
AnyOf
(
M
(), M(), M(), M(), M(), M(), M(), M(), M(), M()));

8340 
TEST
(
AÎOfTe¡
, 
WÜksOnMoveOÆyTy³
) {

8341 
	g¡d
::
unique_±r
<> 
p
(
Ãw
 (3));

8342 
EXPECT_THAT
(
p
, 
AÎOf
(
Poš‹e
(
Eq
(3)), Poš‹e(
Gt
(0)), Poš‹e(
Lt
(5))));

8343 
EXPECT_THAT
(
p
, 
NÙ
(
AÎOf
(
Poš‹e
(
Eq
(3)), Poš‹e(
Gt
(0)), Poš‹e(
Lt
(3)))));

8346 
TEST
(
AnyOfTe¡
, 
WÜksOnMoveOÆyTy³
) {

8347 
	g¡d
::
unique_±r
<> 
p
(
Ãw
 (3));

8348 
EXPECT_THAT
(
p
, 
AnyOf
(
Poš‹e
(
Eq
(5)), Poš‹e(
Lt
(0)), Pointee(Lt(5))));

8349 
EXPECT_THAT
(
p
, 
NÙ
(
AnyOf
(
Poš‹e
(
Eq
(5)), Poš‹e(
Lt
(0)), Poš‹e(
Gt
(5)))));

8352 
MATCHER
(
IsNÙNuÎ
, ""è{  
	g¬g
 !ğ
nuÎ±r
; }

8356 
TEST
(
M©ch”MaüoTe¡
, 
WÜksOnMoveOÆyTy³
) {

8357 
	g¡d
::
unique_±r
<> 
p
(
Ãw
 (3));

8358 
EXPECT_THAT
(
p
, 
IsNÙNuÎ
());

8359 
EXPECT_THAT
(
¡d
::
unique_±r
<>(), 
NÙ
(
IsNÙNuÎ
()));

8362 
MATCHER_P
(
UniquePoš‹e
, 
poš‹e
, ""è{  *
	g¬g
 ==…ointee; }

8366 
TEST
(
M©ch”PMaüoTe¡
, 
WÜksOnMoveOÆyTy³
) {

8367 
	g¡d
::
unique_±r
<> 
p
(
Ãw
 (3));

8368 
EXPECT_THAT
(
p
, 
UniquePoš‹e
(3));

8369 
EXPECT_THAT
(
p
, 
NÙ
(
UniquePoš‹e
(2)));

8372 #ià
GTEST_HAS_EXCEPTIONS


8378 
TEST
(
ThrowsTe¡
, 
Exam¶es
) {

8379 
EXPECT_THAT
(

8380 
¡d
::
funùiÚ
<()>([](è{ 
throw
 std::
ruÁime_”rÜ
("message"); }),

8381 
Throws
<
¡d
::
ruÁime_”rÜ
>());

8383 
EXPECT_THAT
(

8384 
¡d
::
funùiÚ
<()>([](è{ 
throw
 std::
ruÁime_”rÜ
("message"); }),

8385 
ThrowsMes§ge
<
¡d
::
ruÁime_”rÜ
>(
HasSub¡r
("message")));

8388 
TEST
(
ThrowsTe¡
, 
DÛsNÙG’”©eDu¶iÿ‹C©chCÏu£W¬nšg
) {

8389 
EXPECT_THAT
(
¡d
::
funùiÚ
<()>([](è{ 
throw
 std::
exû±iÚ
(); }),

8390 
Throws
<
¡d
::
exû±iÚ
>());

8393 
TEST
(
ThrowsTe¡
, 
C®ÏbËExecu‹dExaùlyOnû
) {

8394 
size_t
 
	ga
 = 0;

8396 
EXPECT_THAT
(
¡d
::
funùiÚ
<()>([&
a
]() {

8397 
a
++;

8398 
throw
 10;

8400 
Throws
<>());

8401 
EXPECT_EQ
(
a
, 1u);

8403 
EXPECT_THAT
(
¡d
::
funùiÚ
<()>([&
a
]() {

8404 
a
++;

8405 
throw
 
¡d
::
ruÁime_”rÜ
("message");

8407 
Throws
<
¡d
::
ruÁime_”rÜ
>());

8408 
EXPECT_EQ
(
a
, 2u);

8410 
EXPECT_THAT
(
¡d
::
funùiÚ
<()>([&
a
]() {

8411 
a
++;

8412 
throw
 
¡d
::
ruÁime_”rÜ
("message");

8414 
ThrowsMes§ge
<
¡d
::
ruÁime_”rÜ
>(
HasSub¡r
("message")));

8415 
EXPECT_EQ
(
a
, 3u);

8417 
EXPECT_THAT
(
¡d
::
funùiÚ
<()>([&
a
]() {

8418 
a
++;

8419 
throw
 
¡d
::
ruÁime_”rÜ
("message");

8421 
Throws
<
¡d
::
ruÁime_”rÜ
>(

8422 
Prİ”ty
(&
¡d
::
ruÁime_”rÜ
::
wh©
, 
HasSub¡r
("message"))));

8423 
EXPECT_EQ
(
a
, 4u);

8426 
TEST
(
ThrowsTe¡
, 
Desüibe
) {

8427 
	gM©ch”
<
	g¡d
::
funùiÚ
<()>> 
m©ch”
 = 
Throws
<
¡d
::
ruÁime_”rÜ
>();

8428 
	g¡d
::
¡ršg¡»am
 
ss
;

8429 
	gm©ch”
.
DesüibeTo
(&
ss
);

8430 autØ
	gex¶ª©iÚ
 = 
ss
.
¡r
();

8431 
EXPECT_THAT
(
ex¶ª©iÚ
, 
HasSub¡r
("std::runtime_error"));

8434 
TEST
(
ThrowsTe¡
, 
Sucûss
) {

8435 
	gM©ch”
<
	g¡d
::
funùiÚ
<()>> 
m©ch”
 = 
Throws
<
¡d
::
ruÁime_”rÜ
>();

8436 
SŒšgM©chResuÉLi¡’”
 
	gli¡’”
;

8437 
EXPECT_TRUE
(
m©ch”
.
M©chAndEx¶aš
(

8438 [](è{ 
throw
 
¡d
::
ruÁime_”rÜ
("”rÜ mes§ge"); }, &
li¡’”
));

8439 
EXPECT_THAT
(
li¡’”
.
¡r
(), 
HasSub¡r
("std::runtime_error"));

8442 
TEST
(
ThrowsTe¡
, 
FaWrÚgTy³
) {

8443 
	gM©ch”
<
	g¡d
::
funùiÚ
<()>> 
m©ch”
 = 
Throws
<
¡d
::
ruÁime_”rÜ
>();

8444 
SŒšgM©chResuÉLi¡’”
 
	gli¡’”
;

8445 
EXPECT_FALSE
(
m©ch”
.
M©chAndEx¶aš
(

8446 [](è{ 
throw
 
¡d
::
logic_”rÜ
("”rÜ mes§ge"); }, &
li¡’”
));

8447 
EXPECT_THAT
(
li¡’”
.
¡r
(), 
HasSub¡r
("std::logic_error"));

8448 
EXPECT_THAT
(
li¡’”
.
¡r
(), 
HasSub¡r
("\"error message\""));

8451 
TEST
(
ThrowsTe¡
, 
FaWrÚgTy³NÚStd
) {

8452 
	gM©ch”
<
	g¡d
::
funùiÚ
<()>> 
m©ch”
 = 
Throws
<
¡d
::
ruÁime_”rÜ
>();

8453 
SŒšgM©chResuÉLi¡’”
 
	gli¡’”
;

8454 
EXPECT_FALSE
(
m©ch”
.
M©chAndEx¶aš
([](è{ 
throw
 10; }, &
li¡’”
));

8455 
EXPECT_THAT
(
li¡’”
.
¡r
(),

8456 
HasSub¡r
("throws‡nƒxception of‡n unknownype"));

8459 
TEST
(
ThrowsTe¡
, 
FaNoThrow
) {

8460 
	gM©ch”
<
	g¡d
::
funùiÚ
<()>> 
m©ch”
 = 
Throws
<
¡d
::
ruÁime_”rÜ
>();

8461 
SŒšgM©chResuÉLi¡’”
 
	gli¡’”
;

8462 
EXPECT_FALSE
(
m©ch”
.
M©chAndEx¶aš
([](è{ ()0; }, &
li¡’”
));

8463 
EXPECT_THAT
(
li¡’”
.
¡r
(), 
HasSub¡r
("does‚othrow‡nyƒxception"));

8466 
şass
 
	gThrowsP»diÿ‹Te¡


8467 : 
public
 
Te¡W™hP¬am
<
M©ch”
<
¡d
::
funùiÚ
<()>>> {};

8469 
TEST_P
(
ThrowsP»diÿ‹Te¡
, 
Desüibe
) {

8470 
	gM©ch”
<
	g¡d
::
funùiÚ
<()>> 
m©ch”
 = 
G‘P¬am
();

8471 
	g¡d
::
¡ršg¡»am
 
ss
;

8472 
	gm©ch”
.
DesüibeTo
(&
ss
);

8473 autØ
	gex¶ª©iÚ
 = 
ss
.
¡r
();

8474 
EXPECT_THAT
(
ex¶ª©iÚ
, 
HasSub¡r
("std::runtime_error"));

8475 
EXPECT_THAT
(
ex¶ª©iÚ
, 
HasSub¡r
("error message"));

8478 
TEST_P
(
ThrowsP»diÿ‹Te¡
, 
Sucûss
) {

8479 
	gM©ch”
<
	g¡d
::
funùiÚ
<()>> 
m©ch”
 = 
G‘P¬am
();

8480 
SŒšgM©chResuÉLi¡’”
 
	gli¡’”
;

8481 
EXPECT_TRUE
(
m©ch”
.
M©chAndEx¶aš
(

8482 [](è{ 
throw
 
¡d
::
ruÁime_”rÜ
("”rÜ mes§ge"); }, &
li¡’”
));

8483 
EXPECT_THAT
(
li¡’”
.
¡r
(), 
HasSub¡r
("std::runtime_error"));

8486 
TEST_P
(
ThrowsP»diÿ‹Te¡
, 
FaWrÚgTy³
) {

8487 
	gM©ch”
<
	g¡d
::
funùiÚ
<()>> 
m©ch”
 = 
G‘P¬am
();

8488 
SŒšgM©chResuÉLi¡’”
 
	gli¡’”
;

8489 
EXPECT_FALSE
(
m©ch”
.
M©chAndEx¶aš
(

8490 [](è{ 
throw
 
¡d
::
logic_”rÜ
("”rÜ mes§ge"); }, &
li¡’”
));

8491 
EXPECT_THAT
(
li¡’”
.
¡r
(), 
HasSub¡r
("std::logic_error"));

8492 
EXPECT_THAT
(
li¡’”
.
¡r
(), 
HasSub¡r
("\"error message\""));

8495 
TEST_P
(
ThrowsP»diÿ‹Te¡
, 
FaWrÚgTy³NÚStd
) {

8496 
	gM©ch”
<
	g¡d
::
funùiÚ
<()>> 
m©ch”
 = 
G‘P¬am
();

8497 
SŒšgM©chResuÉLi¡’”
 
	gli¡’”
;

8498 
EXPECT_FALSE
(
m©ch”
.
M©chAndEx¶aš
([](è{ 
throw
 10; }, &
li¡’”
));

8499 
EXPECT_THAT
(
li¡’”
.
¡r
(),

8500 
HasSub¡r
("throws‡nƒxception of‡n unknownype"));

8503 
TEST_P
(
ThrowsP»diÿ‹Te¡
, 
FaWrÚgMes§ge
) {

8504 
	gM©ch”
<
	g¡d
::
funùiÚ
<()>> 
m©ch”
 = 
G‘P¬am
();

8505 
SŒšgM©chResuÉLi¡’”
 
	gli¡’”
;

8506 
EXPECT_FALSE
(
m©ch”
.
M©chAndEx¶aš
(

8507 [](è{ 
throw
 
¡d
::
ruÁime_”rÜ
("wrÚg mes§ge"); }, &
li¡’”
));

8508 
EXPECT_THAT
(
li¡’”
.
¡r
(), 
HasSub¡r
("std::runtime_error"));

8509 
EXPECT_THAT
(
li¡’”
.
¡r
(), 
NÙ
(
HasSub¡r
("wrong message")));

8512 
TEST_P
(
ThrowsP»diÿ‹Te¡
, 
FaNoThrow
) {

8513 
	gM©ch”
<
	g¡d
::
funùiÚ
<()>> 
m©ch”
 = 
G‘P¬am
();

8514 
SŒšgM©chResuÉLi¡’”
 
	gli¡’”
;

8515 
EXPECT_FALSE
(
m©ch”
.
M©chAndEx¶aš
([](è{}, &
li¡’”
));

8516 
EXPECT_THAT
(
li¡’”
.
¡r
(), 
HasSub¡r
("does‚othrow‡nyƒxception"));

8519 
INSTANTIATE_TEST_SUITE_P
(

8520 
AÎMes§geP»diÿ‹s
, 
ThrowsP»diÿ‹Te¡
,

8521 
V®ues
(
M©ch”
<
¡d
::
funùiÚ
<()>>(

8522 
ThrowsMes§ge
<
¡d
::
ruÁime_”rÜ
>(
HasSub¡r
("error message")))));

8525 
TEST
(
ThrowsP»diÿ‹CompesTe¡
, 
Exû±iÚM©ch”Acû±sBrßdTy³
) {

8527 
	gM©ch”
<
	g¡d
::
funùiÚ
<()>> 
m©ch”
 =

8528 
ThrowsMes§ge
<
¡d
::
ruÁime_”rÜ
>(
HasSub¡r
("error message"));

8529 
EXPECT_TRUE
(

8530 
m©ch”
.
M©ches
([](è{ 
throw
 
¡d
::
ruÁime_”rÜ
("error message"); }));

8531 
EXPECT_FALSE
(

8532 
m©ch”
.
M©ches
([](è{ 
throw
 
¡d
::
ruÁime_”rÜ
("wrong message"); }));

8536 
	gM©ch”
<
	gušt64_t
> 
	gšÃr
 = 
Eq
(10);

8537 
	gM©ch”
<
	g¡d
::
funùiÚ
<()>> 
m©ch”
 = 
Throws
<
ušt32_t
>(
šÃr
);

8538 
EXPECT_TRUE
(
m©ch”
.
M©ches
([](è{ 
throw
(
ušt32_t
) 10; }));

8539 
EXPECT_FALSE
(
m©ch”
.
M©ches
([](è{ 
throw
(
ušt32_t
) 11; }));

8545 
TEST
(
ThrowsP»diÿ‹CompesTe¡
, 
Mes§geM©ch”Acû±sNÚM©ch”
) {

8546 
	gM©ch”
<
	g¡d
::
funùiÚ
<()>> 
m©ch”
 =

8547 
ThrowsMes§ge
<
¡d
::
ruÁime_”rÜ
>("error message");

8548 
EXPECT_TRUE
(

8549 
m©ch”
.
M©ches
([](è{ 
throw
 
¡d
::
ruÁime_”rÜ
("error message"); }));

8550 
EXPECT_FALSE
(
m©ch”
.
M©ches
(

8551 [](è{ 
throw
 
¡d
::
ruÁime_”rÜ
("wrongƒrror message"); }));

8560 #ifdeà
_MSC_VER


8561 #´agm¨
w¬nšg
(
pİ
)

	@third_party/googletest/googlemock/test/gmock-more-actions_test.cc

34 #ifdeà
_MSC_VER


35 #´agm¨
w¬nšg
(
push
)

36 #´agm¨
w¬nšg
(
di§bË
 : 4577)

39 
	~"gmock/gmock-mÜe-aùiÚs.h
"

41 
	~<funùiÚ®
>

42 
	~<memÜy
>

43 
	~<s¡»am
>

44 
	~<¡ršg
>

46 
	~"gmock/gmock.h
"

47 
	~"g‹¡/g‹¡-¥i.h
"

48 
	~"g‹¡/g‹¡.h
"

50 
Çme¥aû
 
	g‹¡šg
 {

51 
Çme¥aû
 
	ggmock_mÜe_aùiÚs_‹¡
 {

53 
	gusšg
 ::
¡d
::
¶us
;

54 
	gusšg
 ::
¡d
::
¡ršg
;

55 
usšg
 
	g‹¡šg
::
AùiÚ
;

56 
usšg
 
	g‹¡šg
::
D–‘eArg
;

57 
usšg
 
	g‹¡šg
::
Invoke
;

58 
usšg
 
	g‹¡šg
::
R‘uºArg
;

59 
usšg
 
	g‹¡šg
::
R‘uºPoš‹e
;

60 
usšg
 
	g‹¡šg
::
SaveArg
;

61 
usšg
 
	g‹¡šg
::
SaveArgPoš‹e
;

62 
usšg
 
	g‹¡šg
::
S‘ArgReã»e
;

63 
usšg
 
	g‹¡šg
::
Unu£d
;

64 
usšg
 
	g‹¡šg
::
W™hArg
;

65 
usšg
 
	g‹¡šg
::
W™houtArgs
;

68 
šlše
 
ShÜt
(
n
è{  
	gn
; }

69 
šlše
 
Ch¬
(
ch
è{  
	gch
; }

72 
NuÎ¬y
() {  1; }

74 
boŞ
 
	gg_dÚe
 = 
çl£
;

76 
boŞ
 
UÇry
(
x
è{  
	gx
 < 0; }

78 
boŞ
 
ByCÚ¡Ref
(cÚ¡ 
¡d
::
¡ršg
& 
s
) {  s == "Hi"; }

80 cÚ¡ 
	gg_doubË
 = 0;

81 
boŞ
 
Reã»nûsGlob®DoubË
(cÚ¡ & 
x
è{  &
	gx
 =ğ&
g_doubË
; }

83 
	sUÇryFunùÜ
 {

84 
İ”©Ü
()(
boŞ
 
	gx
) {  x ? 1 : -1; }

87 cÚ¡ * 
Bš¬y
(cÚ¡ * 
šput
, 
n
è{  
	gšput
 + 
	gn
; }

89 
T”Çry
(
x
, 
y
, 
z
è{  
	gx
 + 
	gy
 + 
	gz
; }

91 
SumOf4
(
a
, 
b
, 
c
, 
d
è{  
	ga
 + 
	gb
 + 
	gc
 + 
	gd
; }

93 
SumOfFœ¡2
(
a
, 
b
, 
Unu£d
, Unu£dè{  
	ga
 + 
	gb
; }

95 
SumOf5
(
a
, 
b
, 
c
, 
d
, 
e
è{  
	ga
 + 
	gb
 + 
	gc
 + 
	gd
 + 
	ge
; }

97 
	sSumOf5FunùÜ
 {

98 
İ”©Ü
()(
	ga
, 
	gb
, 
	gc
, 
	gd
, 
	ge
) {

99  
	ga
 + 
	gb
 + 
	gc
 + 
	gd
 + 
	ge
;

103 
SumOf6
(
a
, 
b
, 
c
, 
d
, 
e
, 
f
) {

104  
	ga
 + 
	gb
 + 
	gc
 + 
	gd
 + 
	ge
 + 
	gf
;

107 
	sSumOf6FunùÜ
 {

108 
İ”©Ü
()(
	ga
, 
	gb
, 
	gc
, 
	gd
, 
	ge
, 
	gf
) {

109  
	ga
 + 
	gb
 + 
	gc
 + 
	gd
 + 
	ge
 + 
	gf
;

113 
	g¡d
::
¡ršg
 
CÚÿt7
(cÚ¡ * 
s1
, cÚ¡ * 
s2
, cÚ¡ * 
s3
,

114 cÚ¡ * 
s4
, cÚ¡ * 
s5
, cÚ¡ * 
s6
,

115 cÚ¡ * 
s7
) {

116  
	g¡d
::
¡ršg
(
s1
è+ 
s2
 + 
s3
 + 
s4
 + 
s5
 + 
s6
 + 
s7
;

119 
	g¡d
::
¡ršg
 
CÚÿt8
(cÚ¡ * 
s1
, cÚ¡ * 
s2
, cÚ¡ * 
s3
,

120 cÚ¡ * 
s4
, cÚ¡ * 
s5
, cÚ¡ * 
s6
,

121 cÚ¡ * 
s7
, cÚ¡ * 
s8
) {

122  
	g¡d
::
¡ršg
(
s1
è+ 
s2
 + 
s3
 + 
s4
 + 
s5
 + 
s6
 + 
s7
 + 
s8
;

125 
	g¡d
::
¡ršg
 
CÚÿt9
(cÚ¡ * 
s1
, cÚ¡ * 
s2
, cÚ¡ * 
s3
,

126 cÚ¡ * 
s4
, cÚ¡ * 
s5
, cÚ¡ * 
s6
,

127 cÚ¡ * 
s7
, cÚ¡ * 
s8
, cÚ¡ * 
s9
) {

128  
	g¡d
::
¡ršg
(
s1
è+ 
s2
 + 
s3
 + 
s4
 + 
s5
 + 
s6
 + 
s7
 + 
s8
 + 
s9
;

131 
	g¡d
::
¡ršg
 
CÚÿt10
(cÚ¡ * 
s1
, cÚ¡ * 
s2
, cÚ¡ * 
s3
,

132 cÚ¡ * 
s4
, cÚ¡ * 
s5
, cÚ¡ * 
s6
,

133 cÚ¡ * 
s7
, cÚ¡ * 
s8
, cÚ¡ * 
s9
,

134 cÚ¡ * 
s10
) {

135  
	g¡d
::
¡ršg
(
s1
è+ 
s2
 + 
s3
 + 
s4
 + 
s5
 + 
s6
 + 
s7
 + 
s8
 + 
s9
 + 
s10
;

138 şas 
	cFoo
 {

139 
	gpublic
:

140 
Foo
(è: 
v®ue_
(123) {}

142 
NuÎ¬y
(ècÚ¡ {  
v®ue_
; }

144 
UÇry
(
x
è{  
	g¡©ic_ÿ¡
<>(
	gv®ue_
 + 
	gx
); }

146 
	g¡d
::
¡ršg
 
Bš¬y
(cÚ¡ 
¡d
::¡ršg& 
¡r
, 
c
ècÚ¡ {  
	g¡r
 + 
	gc
; }

148 
T”Çry
(
x
, 
boŞ
 
y
, 
z
è{  
	gv®ue_
 + 
	gx
 + y*
	gz
; }

150 
SumOf4
(
a
, 
b
, 
c
, 
d
) const {

151  
	ga
 + 
	gb
 + 
	gc
 + 
	gd
 + 
	gv®ue_
;

154 
SumOfLa¡2
(
Unu£d
, Unu£d, 
a
, 
b
ècÚ¡ {  
	ga
 + 
	gb
; }

156 
SumOf5
(
a
, 
b
, 
c
, 
d
, 
e
è{  
	ga
 + 
	gb
 + 
	gc
 + 
	gd
 + 
	ge
; }

158 
SumOf6
(
a
, 
b
, 
c
, 
d
, 
e
, 
f
) {

159  
	ga
 + 
	gb
 + 
	gc
 + 
	gd
 + 
	ge
 + 
	gf
;

162 
	g¡d
::
¡ršg
 
CÚÿt7
(cÚ¡ * 
s1
, cÚ¡ * 
s2
, cÚ¡ * 
s3
,

163 cÚ¡ * 
s4
, cÚ¡ * 
s5
, cÚ¡ * 
s6
,

164 cÚ¡ * 
s7
) {

165  
	g¡d
::
¡ršg
(
s1
è+ 
s2
 + 
s3
 + 
s4
 + 
s5
 + 
s6
 + 
s7
;

168 
	g¡d
::
¡ršg
 
CÚÿt8
(cÚ¡ * 
s1
, cÚ¡ * 
s2
, cÚ¡ * 
s3
,

169 cÚ¡ * 
s4
, cÚ¡ * 
s5
, cÚ¡ * 
s6
,

170 cÚ¡ * 
s7
, cÚ¡ * 
s8
) {

171  
	g¡d
::
¡ršg
(
s1
è+ 
s2
 + 
s3
 + 
s4
 + 
s5
 + 
s6
 + 
s7
 + 
s8
;

174 
	g¡d
::
¡ršg
 
CÚÿt9
(cÚ¡ * 
s1
, cÚ¡ * 
s2
, cÚ¡ * 
s3
,

175 cÚ¡ * 
s4
, cÚ¡ * 
s5
, cÚ¡ * 
s6
,

176 cÚ¡ * 
s7
, cÚ¡ * 
s8
, cÚ¡ * 
s9
) {

177  
	g¡d
::
¡ršg
(
s1
è+ 
s2
 + 
s3
 + 
s4
 + 
s5
 + 
s6
 + 
s7
 + 
s8
 + 
s9
;

180 
	g¡d
::
¡ršg
 
CÚÿt10
(cÚ¡ * 
s1
, cÚ¡ * 
s2
, cÚ¡ * 
s3
,

181 cÚ¡ * 
s4
, cÚ¡ * 
s5
, cÚ¡ * 
s6
,

182 cÚ¡ * 
s7
, cÚ¡ * 
s8
, cÚ¡ * 
s9
,

183 cÚ¡ * 
s10
) {

184  
	g¡d
::
¡ršg
(
s1
è+ 
s2
 + 
s3
 + 
s4
 + 
s5
 + 
s6
 + 
s7
 + 
s8
 + 
s9
 + 
s10
;

187 
	g´iv©e
:

188 
v®ue_
;

192 
TEST
(
InvokeTe¡
, 
NuÎ¬y
) {

193 
	gAùiÚ
<()> 
	ga
 = 
Invoke
(
NuÎ¬y
);

194 
EXPECT_EQ
(1, 
a
.
P”fÜm
(
¡d
::
make_tu¶e
()));

198 
TEST
(
InvokeTe¡
, 
UÇry
) {

199 
	gAùiÚ
<
boŞ
()> 
	ga
 = 
Invoke
(
UÇry
);

200 
EXPECT_FALSE
(
a
.
P”fÜm
(
¡d
::
make_tu¶e
(1)));

201 
EXPECT_TRUE
(
a
.
P”fÜm
(
¡d
::
make_tu¶e
(-1)));

205 
TEST
(
InvokeTe¡
, 
Bš¬y
) {

206 
	gAùiÚ
<cÚ¡ *(cÚ¡ *, )> 
	ga
 = 
Invoke
(
Bš¬y
);

207 cÚ¡ * 
	gp
 = "Hello";

208 
EXPECT_EQ
(
p
 + 2, 
a
.
P”fÜm
(
¡d
::
make_tu¶e
Õ, 
ShÜt
(2))));

212 
TEST
(
InvokeTe¡
, 
T”Çry
) {

213 
	gAùiÚ
<(, , )> 
	ga
 = 
Invoke
(
T”Çry
);

214 
EXPECT_EQ
(6, 
a
.
P”fÜm
(
¡d
::
make_tu¶e
(1, '\2', 
ShÜt
(3))));

218 
TEST
(
InvokeTe¡
, 
FunùiÚTh©Takes4Argum’ts
) {

219 
	gAùiÚ
<(, , , )> 
	ga
 = 
Invoke
(
SumOf4
);

220 
EXPECT_EQ
(1234, 
a
.
P”fÜm
(
¡d
::
make_tu¶e
(1000, 200, 30, 4)));

224 
TEST
(
InvokeTe¡
, 
FunùiÚTh©Takes5Argum’ts
) {

225 
	gAùiÚ
<(, , , , )> 
	ga
 = 
Invoke
(
SumOf5
);

226 
EXPECT_EQ
(12345, 
a
.
P”fÜm
(
¡d
::
make_tu¶e
(10000, 2000, 300, 40, 5)));

230 
TEST
(
InvokeTe¡
, 
FunùiÚTh©Takes6Argum’ts
) {

231 
	gAùiÚ
<(, , , , , )> 
	ga
 = 
Invoke
(
SumOf6
);

232 
EXPECT_EQ
(123456,

233 
a
.
P”fÜm
(
¡d
::
make_tu¶e
(100000, 20000, 3000, 400, 50, 6)));

238 
šlše
 cÚ¡ * 
Ch¬PŒ
(cÚ¡ * 
s
è{  
	gs
; }

241 
TEST
(
InvokeTe¡
, 
FunùiÚTh©Takes7Argum’ts
) {

242 
	gAùiÚ
<
	g¡d
::
¡ršg
(const *, const *, const *, const *,

244 
	ga
 = 
Invoke
(
CÚÿt7
);

245 
EXPECT_EQ
("1234567",

246 
a
.
P”fÜm
(
¡d
::
make_tu¶e
(
Ch¬PŒ
("1"), CharPtr("2"), CharPtr("3"),

247 
Ch¬PŒ
("4"), CharPtr("5"), CharPtr("6"),

248 
Ch¬PŒ
("7"))));

252 
TEST
(
InvokeTe¡
, 
FunùiÚTh©Takes8Argum’ts
) {

253 
	gAùiÚ
<
	g¡d
::
¡ršg
(const *, const *, const *, const *,

255 
	ga
 = 
Invoke
(
CÚÿt8
);

256 
EXPECT_EQ
("12345678",

257 
a
.
P”fÜm
(
¡d
::
make_tu¶e
(
Ch¬PŒ
("1"), CharPtr("2"), CharPtr("3"),

258 
Ch¬PŒ
("4"), CharPtr("5"), CharPtr("6"),

259 
Ch¬PŒ
("7"), CharPtr("8"))));

263 
TEST
(
InvokeTe¡
, 
FunùiÚTh©Takes9Argum’ts
) {

264 
	gAùiÚ
<
	g¡d
::
¡ršg
(const *, const *, const *, const *,

267 
	ga
 = 
Invoke
(
CÚÿt9
);

268 
EXPECT_EQ
("123456789", 
a
.
P”fÜm
(
¡d
::
make_tu¶e
(

269 
Ch¬PŒ
("1"), CharPtr("2"), CharPtr("3"),

270 
Ch¬PŒ
("4"), CharPtr("5"), CharPtr("6"),

271 
Ch¬PŒ
("7"), CharPtr("8"), CharPtr("9"))));

275 
TEST
(
InvokeTe¡
, 
FunùiÚTh©Takes10Argum’ts
) {

276 
	gAùiÚ
<
	g¡d
::
¡ršg
(const *, const *, const *, const *,

279 
	ga
 = 
Invoke
(
CÚÿt10
);

280 
EXPECT_EQ
("1234567890",

281 
a
.
P”fÜm
(
¡d
::
make_tu¶e
(
Ch¬PŒ
("1"), CharPtr("2"), CharPtr("3"),

282 
Ch¬PŒ
("4"), CharPtr("5"), CharPtr("6"),

283 
Ch¬PŒ
("7"), CharPtr("8"), CharPtr("9"),

284 
Ch¬PŒ
("0"))));

288 
TEST
(
InvokeTe¡
, 
FunùiÚW™hUnu£dP¬am‘”s
) {

289 
	gAùiÚ
<(, , , cÚ¡ 
	g¡d
::
¡ršg
&)> 
a1
 = 
Invoke
(
SumOfFœ¡2
);

290 
	g¡d
::
tu¶e
<, , , std::
¡ršg
> 
dummy
 =

291 
¡d
::
make_tu¶e
(10, 2, 5.6, std::
¡ršg
("hi"));

292 
EXPECT_EQ
(12, 
a1
.
P”fÜm
(
dummy
));

294 
	gAùiÚ
<(, , 
	gboŞ
, *)> 
	ga2
 =

295 
Invoke
(
SumOfFœ¡2
);

296 
EXPECT_EQ
(

297 23, 
a2
.
P”fÜm
(
¡d
::
make_tu¶e
(20, 3, 
Œue
, 
¡©ic_ÿ¡
<*>(
nuÎ±r
))));

301 
TEST
(
InvokeTe¡
, 
M‘hodW™hUnu£dP¬am‘”s
) {

302 
Foo
 
	gfoo
;

303 
	gAùiÚ
<(
	g¡d
::
¡ršg
, 
	gboŞ
, , )> 
	ga1
 = 
Invoke
(&
foo
, &
Foo
::
SumOfLa¡2
);

304 
EXPECT_EQ
(12, 
a1
.
P”fÜm
(
¡d
::
make_tu¶e
(
Ch¬PŒ
("hi"), 
Œue
, 10, 2)));

306 
	gAùiÚ
<(, , , )> 
	ga2
 =

307 
Invoke
(&
foo
, &
Foo
::
SumOfLa¡2
);

308 
EXPECT_EQ
(23, 
a2
.
P”fÜm
(
¡d
::
make_tu¶e
('a', 2.5, 20, 3)));

312 
TEST
(
InvokeTe¡
, 
FunùÜ
) {

313 
	gAùiÚ
<(, )> 
	ga
 = 
Invoke
(
¶us
<>());

314 
EXPECT_EQ
(3L, 
a
.
P”fÜm
(
¡d
::
make_tu¶e
(1, 2)));

318 
TEST
(
InvokeTe¡
, 
FunùiÚW™hCom·tibËTy³
) {

319 
	gAùiÚ
<(, , , 
	gboŞ
)> 
	ga
 = 
Invoke
(
SumOf4
);

320 
EXPECT_EQ
(4321, 
a
.
P”fÜm
(
¡d
::
make_tu¶e
(4000, 
ShÜt
(300), 
Ch¬
(20), 
Œue
)));

326 
TEST
(
InvokeM‘hodTe¡
, 
NuÎ¬y
) {

327 
Foo
 
	gfoo
;

328 
	gAùiÚ
<()> 
	ga
 = 
Invoke
(&
foo
, &
Foo
::
NuÎ¬y
);

329 
EXPECT_EQ
(123, 
a
.
P”fÜm
(
¡d
::
make_tu¶e
()));

333 
TEST
(
InvokeM‘hodTe¡
, 
UÇry
) {

334 
Foo
 
	gfoo
;

335 
	gAùiÚ
<()> 
	ga
 = 
Invoke
(&
foo
, &
Foo
::
UÇry
);

336 
EXPECT_EQ
(4123, 
a
.
P”fÜm
(
¡d
::
make_tu¶e
(4000)));

340 
TEST
(
InvokeM‘hodTe¡
, 
Bš¬y
) {

341 
Foo
 
	gfoo
;

342 
	gAùiÚ
<
	g¡d
::
¡ršg
(cÚ¡ 
¡d
::¡ršg&, )> 
	ga
 = 
Invoke
(&
foo
, &
Foo
::
Bš¬y
);

343 
	g¡d
::
¡ršg
 
s
("Hell");

344 
	g¡d
::
tu¶e
<
¡d
::
¡ršg
, > 
	gdummy
 = std::
make_tu¶e
(
s
, 'o');

345 
EXPECT_EQ
("H–lo", 
a
.
P”fÜm
(
dummy
));

349 
TEST
(
InvokeM‘hodTe¡
, 
T”Çry
) {

350 
Foo
 
	gfoo
;

351 
	gAùiÚ
<(, 
	gboŞ
, )> 
	ga
 = 
Invoke
(&
foo
, &
Foo
::
T”Çry
);

352 
EXPECT_EQ
(1124, 
a
.
P”fÜm
(
¡d
::
make_tu¶e
(1000, 
Œue
, 
Ch¬
(1))));

356 
TEST
(
InvokeM‘hodTe¡
, 
M‘hodTh©Takes4Argum’ts
) {

357 
Foo
 
	gfoo
;

358 
	gAùiÚ
<(, , , )> 
	ga
 = 
Invoke
(&
foo
, &
Foo
::
SumOf4
);

359 
EXPECT_EQ
(1357, 
a
.
P”fÜm
(
¡d
::
make_tu¶e
(1000, 200, 30, 4)));

363 
TEST
(
InvokeM‘hodTe¡
, 
M‘hodTh©Takes5Argum’ts
) {

364 
Foo
 
	gfoo
;

365 
	gAùiÚ
<(, , , , )> 
	ga
 = 
Invoke
(&
foo
, &
Foo
::
SumOf5
);

366 
EXPECT_EQ
(12345, 
a
.
P”fÜm
(
¡d
::
make_tu¶e
(10000, 2000, 300, 40, 5)));

370 
TEST
(
InvokeM‘hodTe¡
, 
M‘hodTh©Takes6Argum’ts
) {

371 
Foo
 
	gfoo
;

372 
	gAùiÚ
<(, , , , , )> 
	ga
 =

373 
Invoke
(&
foo
, &
Foo
::
SumOf6
);

374 
EXPECT_EQ
(123456,

375 
a
.
P”fÜm
(
¡d
::
make_tu¶e
(100000, 20000, 3000, 400, 50, 6)));

379 
TEST
(
InvokeM‘hodTe¡
, 
M‘hodTh©Takes7Argum’ts
) {

380 
Foo
 
	gfoo
;

381 
	gAùiÚ
<
	g¡d
::
¡ršg
(const *, const *, const *, const *,

383 
	ga
 = 
Invoke
(&
foo
, &
Foo
::
CÚÿt7
);

384 
EXPECT_EQ
("1234567",

385 
a
.
P”fÜm
(
¡d
::
make_tu¶e
(
Ch¬PŒ
("1"), CharPtr("2"), CharPtr("3"),

386 
Ch¬PŒ
("4"), CharPtr("5"), CharPtr("6"),

387 
Ch¬PŒ
("7"))));

391 
TEST
(
InvokeM‘hodTe¡
, 
M‘hodTh©Takes8Argum’ts
) {

392 
Foo
 
	gfoo
;

393 
	gAùiÚ
<
	g¡d
::
¡ršg
(const *, const *, const *, const *,

395 
	ga
 = 
Invoke
(&
foo
, &
Foo
::
CÚÿt8
);

396 
EXPECT_EQ
("12345678",

397 
a
.
P”fÜm
(
¡d
::
make_tu¶e
(
Ch¬PŒ
("1"), CharPtr("2"), CharPtr("3"),

398 
Ch¬PŒ
("4"), CharPtr("5"), CharPtr("6"),

399 
Ch¬PŒ
("7"), CharPtr("8"))));

403 
TEST
(
InvokeM‘hodTe¡
, 
M‘hodTh©Takes9Argum’ts
) {

404 
Foo
 
	gfoo
;

405 
	gAùiÚ
<
	g¡d
::
¡ršg
(const *, const *, const *, const *,

408 
	ga
 = 
Invoke
(&
foo
, &
Foo
::
CÚÿt9
);

409 
EXPECT_EQ
("123456789", 
a
.
P”fÜm
(
¡d
::
make_tu¶e
(

410 
Ch¬PŒ
("1"), CharPtr("2"), CharPtr("3"),

411 
Ch¬PŒ
("4"), CharPtr("5"), CharPtr("6"),

412 
Ch¬PŒ
("7"), CharPtr("8"), CharPtr("9"))));

416 
TEST
(
InvokeM‘hodTe¡
, 
M‘hodTh©Takes10Argum’ts
) {

417 
Foo
 
	gfoo
;

418 
	gAùiÚ
<
	g¡d
::
¡ršg
(const *, const *, const *, const *,

421 
	ga
 = 
Invoke
(&
foo
, &
Foo
::
CÚÿt10
);

422 
EXPECT_EQ
("1234567890",

423 
a
.
P”fÜm
(
¡d
::
make_tu¶e
(
Ch¬PŒ
("1"), CharPtr("2"), CharPtr("3"),

424 
Ch¬PŒ
("4"), CharPtr("5"), CharPtr("6"),

425 
Ch¬PŒ
("7"), CharPtr("8"), CharPtr("9"),

426 
Ch¬PŒ
("0"))));

430 
TEST
(
InvokeM‘hodTe¡
, 
M‘hodW™hCom·tibËTy³
) {

431 
Foo
 
	gfoo
;

432 
	gAùiÚ
<(, , , 
	gboŞ
)> 
	ga
 =

433 
Invoke
(&
foo
, &
Foo
::
SumOf4
);

434 
EXPECT_EQ
(4444, 
a
.
P”fÜm
(
¡d
::
make_tu¶e
(4000, 
ShÜt
(300), 
Ch¬
(20), 
Œue
)));

438 
TEST
(
W™houtArgsTe¡
, 
NoArg
) {

439 
	gAùiÚ
<(
	gn
)> 
	ga
 = 
W™houtArgs
(
Invoke
(
NuÎ¬y
));

440 
EXPECT_EQ
(1, 
a
.
P”fÜm
(
¡d
::
make_tu¶e
(2)));

444 
TEST
(
W™hArgTe¡
, 
OÃArg
) {

445 
	gAùiÚ
<
boŞ
(
x
, 
n
)> 
	gb
 = 
W™hArg
<1>(
Invoke
(
UÇry
));

446 
EXPECT_TRUE
(
b
.
P”fÜm
(
¡d
::
make_tu¶e
(1.5, -1)));

447 
EXPECT_FALSE
(
b
.
P”fÜm
(
¡d
::
make_tu¶e
(1.5, 1)));

450 
TEST
(
R‘uºArgAùiÚTe¡
, 
WÜksFÜOÃArgIÁArg0
) {

451 cÚ¡ 
	gAùiÚ
<()> 
	ga
 = 
R‘uºArg
<0>();

452 
EXPECT_EQ
(5, 
a
.
P”fÜm
(
¡d
::
make_tu¶e
(5)));

455 
TEST
(
R‘uºArgAùiÚTe¡
, 
WÜksFÜMuÉiArgBoŞArg0
) {

456 cÚ¡ 
	gAùiÚ
<
boŞ
(boŞ, boŞ, boŞ)> 
	ga
 = 
R‘uºArg
<0>();

457 
EXPECT_TRUE
(
a
.
P”fÜm
(
¡d
::
make_tu¶e
(
Œue
, 
çl£
, false)));

460 
TEST
(
R‘uºArgAùiÚTe¡
, 
WÜksFÜMuÉiArgSŒšgArg2
) {

461 cÚ¡ 
	gAùiÚ
<
	g¡d
::
¡ršg
(, , 
¡d
::¡ršg, )> 
	ga
 = 
R‘uºArg
<2>();

462 
EXPECT_EQ
("£v’", 
a
.
P”fÜm
(
¡d
::
make_tu¶e
(5, 6, std::
¡ršg
("seven"), 8)));

465 
TEST
(
SaveArgAùiÚTe¡
, 
WÜksFÜSameTy³
) {

466 
	g»suÉ
 = 0;

467 cÚ¡ 
	gAùiÚ
<(
	gn
)> 
	ga1
 = 
SaveArg
<0>(&
»suÉ
);

468 
	ga1
.
P”fÜm
(
¡d
::
make_tu¶e
(5));

469 
EXPECT_EQ
(5, 
»suÉ
);

472 
TEST
(
SaveArgAùiÚTe¡
, 
WÜksFÜCom·tibËTy³
) {

473 
	g»suÉ
 = 0;

474 cÚ¡ 
	gAùiÚ
<(
	gboŞ
, )> 
	ga1
 = 
SaveArg
<1>(&
»suÉ
);

475 
	ga1
.
P”fÜm
(
¡d
::
make_tu¶e
(
Œue
, 'a'));

476 
EXPECT_EQ
('a', 
»suÉ
);

479 
TEST
(
SaveArgPoš‹eAùiÚTe¡
, 
WÜksFÜSameTy³
) {

480 
	g»suÉ
 = 0;

481 cÚ¡ 
	gv®ue
 = 5;

482 cÚ¡ 
	gAùiÚ
<(cÚ¡ *)> 
	ga1
 = 
SaveArgPoš‹e
<0>(&
»suÉ
);

483 
	ga1
.
P”fÜm
(
¡d
::
make_tu¶e
(&
v®ue
));

484 
EXPECT_EQ
(5, 
»suÉ
);

487 
TEST
(
SaveArgPoš‹eAùiÚTe¡
, 
WÜksFÜCom·tibËTy³
) {

488 
	g»suÉ
 = 0;

489 
	gv®ue
 = 'a';

490 cÚ¡ 
	gAùiÚ
<(
	gboŞ
, *)> 
	ga1
 = 
SaveArgPoš‹e
<1>(&
»suÉ
);

491 
	ga1
.
P”fÜm
(
¡d
::
make_tu¶e
(
Œue
, &
v®ue
));

492 
EXPECT_EQ
('a', 
»suÉ
);

495 
TEST
(
S‘ArgReã»eAùiÚTe¡
, 
WÜksFÜSameTy³
) {

496 
	gv®ue
 = 0;

497 cÚ¡ 
	gAùiÚ
<(&)> 
	ga1
 = 
S‘ArgReã»e
<0>(1);

498 
	ga1
.
P”fÜm
(
¡d
::
tu¶e
<&>(
v®ue
));

499 
EXPECT_EQ
(1, 
v®ue
);

502 
TEST
(
S‘ArgReã»eAùiÚTe¡
, 
WÜksFÜCom·tibËTy³
) {

503 
	gv®ue
 = 0;

504 cÚ¡ 
	gAùiÚ
<(, &)> 
	ga1
 = 
S‘ArgReã»e
<1>('a');

505 
	ga1
.
P”fÜm
(
¡d
::
tu¶e
<, &>(0, 
v®ue
));

506 
EXPECT_EQ
('a', 
v®ue
);

509 
TEST
(
S‘ArgReã»eAùiÚTe¡
, 
WÜksW™hExŒaArgum’ts
) {

510 
	gv®ue
 = 0;

511 cÚ¡ 
	gAùiÚ
<(
	gboŞ
, , &, cÚ¡ *)> 
	ga1
 = 
S‘ArgReã»e
<2>('a');

512 
	ga1
.
P”fÜm
(
¡d
::
tu¶e
<
boŞ
, , &, cÚ¡ *>(
Œue
, 0, 
v®ue
, "hi"));

513 
EXPECT_EQ
('a', 
v®ue
);

518 şas 
	cD–‘iÚTe¡”
 {

519 
	gpublic
:

520 
ex¶ic™
 
D–‘iÚTe¡”
(
boŞ
* 
is_d–‘ed
)

521 : 
is_d–‘ed_
(
is_d–‘ed
) {

523 *
is_d–‘ed_
 = 
çl£
;

526 ~
D–‘iÚTe¡”
() {

527 *
	gis_d–‘ed_
 = 
Œue
;

530 
	g´iv©e
:

531 
boŞ
* 
is_d–‘ed_
;

534 
TEST
(
D–‘eArgAùiÚTe¡
, 
OÃArg
) {

535 
boŞ
 
	gis_d–‘ed
 = 
çl£
;

536 
D–‘iÚTe¡”
* 
	gt
 = 
Ãw
 D–‘iÚTe¡”(&
is_d–‘ed
);

537 cÚ¡ 
	gAùiÚ
<(
	gD–‘iÚTe¡”
*)> 
	ga1
 = 
D–‘eArg
<0>();

538 
EXPECT_FALSE
(
is_d–‘ed
);

539 
	ga1
.
P”fÜm
(
¡d
::
make_tu¶e
(
t
));

540 
EXPECT_TRUE
(
is_d–‘ed
);

543 
TEST
(
D–‘eArgAùiÚTe¡
, 
T’Args
) {

544 
boŞ
 
	gis_d–‘ed
 = 
çl£
;

545 
D–‘iÚTe¡”
* 
	gt
 = 
Ãw
 D–‘iÚTe¡”(&
is_d–‘ed
);

546 cÚ¡ 
	gAùiÚ
<(
	gboŞ
, , , const *, bool,

547 , , , , 
	gD–‘iÚTe¡”
*)> 
	ga1
 = 
D–‘eArg
<9>();

548 
EXPECT_FALSE
(
is_d–‘ed
);

549 
	ga1
.
P”fÜm
(
¡d
::
make_tu¶e
(
Œue
, 5, 6, 
Ch¬PŒ
("hi"), 
çl£
, 7, 8, 9, 10, 
t
));

550 
EXPECT_TRUE
(
is_d–‘ed
);

553 #ià
GTEST_HAS_EXCEPTIONS


555 
TEST
(
ThrowAùiÚTe¡
, 
ThrowsGiv’Exû±iÚInVoidFunùiÚ
) {

556 cÚ¡ 
	gAùiÚ
<(
	gn
)> 
	ga
 = 
Throw
('a');

557 
EXPECT_THROW
(
a
.
P”fÜm
(
¡d
::
make_tu¶e
(0)), );

560 şas 
	cMyExû±iÚ
 {};

562 
TEST
(
ThrowAùiÚTe¡
, 
ThrowsGiv’Exû±iÚInNÚVoidFunùiÚ
) {

563 cÚ¡ 
	gAùiÚ
<(
	gch
)> 
	ga
 = 
Throw
(
MyExû±iÚ
());

564 
EXPECT_THROW
(
a
.
P”fÜm
(
¡d
::
make_tu¶e
('0')), 
MyExû±iÚ
);

567 
TEST
(
ThrowAùiÚTe¡
, 
ThrowsGiv’Exû±iÚInNuÎ¬yFunùiÚ
) {

568 cÚ¡ 
	gAùiÚ
<()> 
	ga
 = 
Throw
(
MyExû±iÚ
());

569 
EXPECT_THROW
(
a
.
P”fÜm
(
¡d
::
make_tu¶e
()), 
MyExû±iÚ
);

572 şas 
	cObjeù
 {

573 
	gpublic
:

574 
vœtu®
 ~
Objeù
() {}

575 
vœtu®
 
Func
() {}

578 şas 
	cMockObjeù
 : 
public
 
Objeù
 {

579 
public
:

580 ~
MockObjeù
(è
ov”ride
 {}

581 
MOCK_METHOD
(, 
Func
, (), (
ov”ride
));

584 
TEST
(
ThrowAùiÚTe¡
, 
Times0
) {

585 
EXPECT_NONFATAL_FAILURE
(

587 
Œy
 {

588 
MockObjeù
 
m
;

589 
ON_CALL
(
m
, 
Func
()).
WlByDeçuÉ
([] { 
throw
 "something"; });

590 
EXPECT_CALL
(
m
, 
Func
()).
Times
(0);

591 
m
.
Func
();

592 } 
ÿtch
 (...) {

603 
TEST
(
S‘A¼ayArgum’tTe¡
, 
S‘sTheNthA¼ay
) {

604 
usšg
 
	gMyFunùiÚ
 = (
boŞ
, *, *);

605 
	gnumb”s
[] = { 1, 2, 3 };

606 
	gAùiÚ
<
	gMyFunùiÚ
> 
	ga
 = 
S‘A¼ayArgum’t
<1>(
numb”s
, 
	gnumb”s
 + 3);

608 
	gn
[4] = {};

609 * 
	g²
 = 
n
;

610 
	gch
[4] = {};

611 * 
	gpch
 = 
ch
;

612 
	ga
.
P”fÜm
(
¡d
::
make_tu¶e
(
Œue
, 
²
, 
pch
));

613 
EXPECT_EQ
(1, 
n
[0]);

614 
EXPECT_EQ
(2, 
n
[1]);

615 
EXPECT_EQ
(3, 
n
[2]);

616 
EXPECT_EQ
(0, 
n
[3]);

617 
EXPECT_EQ
('\0', 
ch
[0]);

618 
EXPECT_EQ
('\0', 
ch
[1]);

619 
EXPECT_EQ
('\0', 
ch
[2]);

620 
EXPECT_EQ
('\0', 
ch
[3]);

623 
	g¡d
::
¡ršg
 
Ë‰”s
 = "abc";

624 
	ga
 = 
S‘A¼ayArgum’t
<2>(
Ë‰”s
.
begš
(), 
	gË‰”s
.
’d
());

625 
	g¡d
::
fl_n
(
n
, 4, 0);

626 
	g¡d
::
fl_n
(
ch
, 4, '\0');

627 
	ga
.
P”fÜm
(
¡d
::
make_tu¶e
(
Œue
, 
²
, 
pch
));

628 
EXPECT_EQ
(0, 
n
[0]);

629 
EXPECT_EQ
(0, 
n
[1]);

630 
EXPECT_EQ
(0, 
n
[2]);

631 
EXPECT_EQ
(0, 
n
[3]);

632 
EXPECT_EQ
('a', 
ch
[0]);

633 
EXPECT_EQ
('b', 
ch
[1]);

634 
EXPECT_EQ
('c', 
ch
[2]);

635 
EXPECT_EQ
('\0', 
ch
[3]);

639 
TEST
(
S‘A¼ayArgum’tTe¡
, 
S‘sTheNthA¼ayW™hEm±yRªge
) {

640 
usšg
 
	gMyFunùiÚ
 = (
boŞ
, *);

641 
	gnumb”s
[] = { 1, 2, 3 };

642 
	gAùiÚ
<
	gMyFunùiÚ
> 
	ga
 = 
S‘A¼ayArgum’t
<1>(
numb”s
, 
	gnumb”s
);

644 
	gn
[4] = {};

645 * 
	g²
 = 
n
;

646 
	ga
.
P”fÜm
(
¡d
::
make_tu¶e
(
Œue
, 
²
));

647 
EXPECT_EQ
(0, 
n
[0]);

648 
EXPECT_EQ
(0, 
n
[1]);

649 
EXPECT_EQ
(0, 
n
[2]);

650 
EXPECT_EQ
(0, 
n
[3]);

655 
TEST
(
S‘A¼ayArgum’tTe¡
, 
S‘sTheNthA¼ayW™hCÚv”tibËTy³
) {

656 
usšg
 
	gMyFunùiÚ
 = (
boŞ
, *);

657 
	gch¬s
[] = { 97, 98, 99 };

658 
	gAùiÚ
<
	gMyFunùiÚ
> 
	ga
 = 
S‘A¼ayArgum’t
<1>(
ch¬s
, 
	gch¬s
 + 3);

660 
	gcodes
[4] = { 111, 222, 333, 444 };

661 * 
	gpcodes
 = 
codes
;

662 
	ga
.
P”fÜm
(
¡d
::
make_tu¶e
(
Œue
, 
pcodes
));

663 
EXPECT_EQ
(97, 
codes
[0]);

664 
EXPECT_EQ
(98, 
codes
[1]);

665 
EXPECT_EQ
(99, 
codes
[2]);

666 
EXPECT_EQ
(444, 
codes
[3]);

670 
TEST
(
S‘A¼ayArgum’tTe¡
, 
S‘sTheNthA¼ayW™hI‹¿tÜArgum’t
) {

671 
usšg
 
	gMyFunùiÚ
 = (
boŞ
, 
	g¡d
::
back_š£¹_™”©Ü
<
¡d
::
¡ršg
>);

672 
	g¡d
::
¡ršg
 
Ë‰”s
 = "abc";

673 
	gAùiÚ
<
	gMyFunùiÚ
> 
	ga
 = 
S‘A¼ayArgum’t
<1>(
Ë‰”s
.
begš
(), 
	gË‰”s
.
’d
());

675 
	g¡d
::
¡ršg
 
s
;

676 
	ga
.
P”fÜm
(
¡d
::
make_tu¶e
(
Œue
, 
back_š£¹”
(
s
)));

677 
EXPECT_EQ
(
Ë‰”s
, 
s
);

680 
TEST
(
R‘uºPoš‹eTe¡
, 
WÜks
) {

681 
	gn
 = 42;

682 cÚ¡ 
	gAùiÚ
<()> 
	ga
 = 
R‘uºPoš‹e
(&
n
);

683 
EXPECT_EQ
(42, 
a
.
P”fÜm
(
¡d
::
make_tu¶e
()));

685 
	gn
 = 43;

686 
EXPECT_EQ
(43, 
a
.
P”fÜm
(
¡d
::
make_tu¶e
()));

692 
TEST
(
InvokeArgum’tTe¡
, 
FunùiÚ0
) {

693 
	gAùiÚ
<(, (*)())> 
	ga
 = 
InvokeArgum’t
<1>();

694 
EXPECT_EQ
(1, 
a
.
P”fÜm
(
¡d
::
make_tu¶e
(2, &
NuÎ¬y
)));

698 
TEST
(
InvokeArgum’tTe¡
, 
FunùÜ1
) {

699 
	gAùiÚ
<(
	gUÇryFunùÜ
)> 
	ga
 = 
InvokeArgum’t
<0>(
Œue
);

700 
EXPECT_EQ
(1, 
a
.
P”fÜm
(
¡d
::
make_tu¶e
(
UÇryFunùÜ
())));

704 
TEST
(
InvokeArgum’tTe¡
, 
FunùiÚ5
) {

705 
	gAùiÚ
<((*)(, , , , ))> 
	ga
 =

706 
InvokeArgum’t
<0>(10000, 2000, 300, 40, 5);

707 
EXPECT_EQ
(12345, 
a
.
P”fÜm
(
¡d
::
make_tu¶e
(&
SumOf5
)));

711 
TEST
(
InvokeArgum’tTe¡
, 
FunùÜ5
) {

712 
	gAùiÚ
<(
	gSumOf5FunùÜ
)> 
	ga
 =

713 
InvokeArgum’t
<0>(10000, 2000, 300, 40, 5);

714 
EXPECT_EQ
(12345, 
a
.
P”fÜm
(
¡d
::
make_tu¶e
(
SumOf5FunùÜ
())));

718 
TEST
(
InvokeArgum’tTe¡
, 
FunùiÚ6
) {

719 
	gAùiÚ
<((*)(, , , , , ))> 
	ga
 =

720 
InvokeArgum’t
<0>(100000, 20000, 3000, 400, 50, 6);

721 
EXPECT_EQ
(123456, 
a
.
P”fÜm
(
¡d
::
make_tu¶e
(&
SumOf6
)));

725 
TEST
(
InvokeArgum’tTe¡
, 
FunùÜ6
) {

726 
	gAùiÚ
<(
	gSumOf6FunùÜ
)> 
	ga
 =

727 
InvokeArgum’t
<0>(100000, 20000, 3000, 400, 50, 6);

728 
EXPECT_EQ
(123456, 
a
.
P”fÜm
(
¡d
::
make_tu¶e
(
SumOf6FunùÜ
())));

732 
TEST
(
InvokeArgum’tTe¡
, 
FunùiÚ7
) {

733 
	gAùiÚ
<
	g¡d
::
¡ršg
(
¡d
::string(*)(const *, const *, const *,

736 
	ga
 = 
InvokeArgum’t
<0>("1", "2", "3", "4", "5", "6", "7");

737 
EXPECT_EQ
("1234567", 
a
.
P”fÜm
(
¡d
::
make_tu¶e
(&
CÚÿt7
)));

741 
TEST
(
InvokeArgum’tTe¡
, 
FunùiÚ8
) {

742 
	gAùiÚ
<
	g¡d
::
¡ršg
(
¡d
::string(*)(const *, const *, const *,

745 
	ga
 = 
InvokeArgum’t
<0>("1", "2", "3", "4", "5", "6", "7", "8");

746 
EXPECT_EQ
("12345678", 
a
.
P”fÜm
(
¡d
::
make_tu¶e
(&
CÚÿt8
)));

750 
TEST
(
InvokeArgum’tTe¡
, 
FunùiÚ9
) {

751 
	gAùiÚ
<
	g¡d
::
¡ršg
(
¡d
::string(*)(const *, const *, const *,

754 
	ga
 = 
InvokeArgum’t
<0>("1", "2", "3", "4", "5", "6", "7", "8", "9");

755 
EXPECT_EQ
("123456789", 
a
.
P”fÜm
(
¡d
::
make_tu¶e
(&
CÚÿt9
)));

759 
TEST
(
InvokeArgum’tTe¡
, 
FunùiÚ10
) {

760 
	gAùiÚ
<
	g¡d
::
¡ršg
(
¡d
::string(*)(

763 
	ga
 = 
InvokeArgum’t
<0>("1", "2", "3", "4", "5", "6", "7", "8", "9", "0");

764 
EXPECT_EQ
("1234567890", 
a
.
P”fÜm
(
¡d
::
make_tu¶e
(&
CÚÿt10
)));

768 
TEST
(
InvokeArgum’tTe¡
, 
ByPoš‹rFunùiÚ
) {

769 
	gAùiÚ
<cÚ¡ *(cÚ¡ * (*)(cÚ¡ * 
	gšput
, 
	gn
))>

770 
	ga
 = 
InvokeArgum’t
<0>(
¡©ic_ÿ¡
<cÚ¡ *>("Hi"), 
ShÜt
(1));

771 
EXPECT_STREQ
("i", 
a
.
P”fÜm
(
¡d
::
make_tu¶e
(&
Bš¬y
)));

776 
TEST
(
InvokeArgum’tTe¡
, 
FunùiÚW™hCSŒšgL™”®
) {

777 
	gAùiÚ
<cÚ¡ *(cÚ¡ * (*)(cÚ¡ * 
	gšput
, 
	gn
))>

778 
	ga
 = 
InvokeArgum’t
<0>("Hi", 
ShÜt
(1));

779 
EXPECT_STREQ
("i", 
a
.
P”fÜm
(
¡d
::
make_tu¶e
(&
Bš¬y
)));

783 
TEST
(
InvokeArgum’tTe¡
, 
ByCÚ¡Reã»nûFunùiÚ
) {

784 
	gAùiÚ
<
boŞ
(boŞ (*
funùiÚ
)(cÚ¡ 
¡d
::
¡ršg
& 
s
))> 
a
 =

785 
InvokeArgum’t
<0>(
¡d
::
¡ršg
("Hi"));

789 
EXPECT_TRUE
(
a
.
P”fÜm
(
¡d
::
make_tu¶e
(&
ByCÚ¡Ref
)));

794 
TEST
(
InvokeArgum’tTe¡
, 
ByEx¶ic™CÚ¡Reã»nûFunùiÚ
) {

795 
	gAùiÚ
<
boŞ
(boŞ (*)(cÚ¡ & 
x
))> 
	ga
 =

796 
InvokeArgum’t
<0>(
ByRef
(
g_doubË
));

798 
EXPECT_TRUE
(
a
.
P”fÜm
(
¡d
::
make_tu¶e
(&
Reã»nûsGlob®DoubË
)));

800 
	gx
 = 0;

801 
	ga
 = 
InvokeArgum’t
<0>(
ByRef
(
x
));

802 
EXPECT_FALSE
(
a
.
P”fÜm
(
¡d
::
make_tu¶e
(&
Reã»nûsGlob®DoubË
)));

806 
TEST
(
DoAÎTe¡
, 
TwoAùiÚs
) {

807 
	gn
 = 0;

808 
	gAùiÚ
<(*)> 
	ga
 = 
DoAÎ
(
S‘ArgPoš‹e
<0>(1),

809 
R‘uº
(2));

810 
EXPECT_EQ
(2, 
a
.
P”fÜm
(
¡d
::
make_tu¶e
(&
n
)));

811 
EXPECT_EQ
(1, 
n
);

815 
TEST
(
DoAÎTe¡
, 
Th»eAùiÚs
) {

816 
	gm
 = 0, 
	gn
 = 0;

817 
	gAùiÚ
<(*, *)> 
	ga
 = 
DoAÎ
(
S‘ArgPoš‹e
<0>(1),

818 
S‘ArgPoš‹e
<1>(2), 
R‘uº
(3));

819 
EXPECT_EQ
(3, 
a
.
P”fÜm
(
¡d
::
make_tu¶e
(&
m
, &
n
)));

820 
EXPECT_EQ
(1, 
m
);

821 
EXPECT_EQ
(2, 
n
);

825 
TEST
(
DoAÎTe¡
, 
FourAùiÚs
) {

826 
	gm
 = 0, 
	gn
 = 0;

827 
	gch
 = '\0';

828 
	gAùiÚ
<(*, *, *)> 
	ga
 =

829 
DoAÎ
(
S‘ArgPoš‹e
<0>(1), SetArgPointee<1>(2), SetArgPointee<2>('a'),

830 
R‘uº
(3));

831 
EXPECT_EQ
(3, 
a
.
P”fÜm
(
¡d
::
make_tu¶e
(&
m
, &
n
, &
ch
)));

832 
EXPECT_EQ
(1, 
m
);

833 
EXPECT_EQ
(2, 
n
);

834 
EXPECT_EQ
('a', 
ch
);

838 
TEST
(
DoAÎTe¡
, 
FiveAùiÚs
) {

839 
	gm
 = 0, 
	gn
 = 0;

840 
	ga
 = '\0', 
	gb
 = '\0';

841 
	gAùiÚ
<(*, *, *, *)> 
	gaùiÚ
 =

842 
DoAÎ
(
S‘ArgPoš‹e
<0>(1), SetArgPointee<1>(2), SetArgPointee<2>('a'),

843 
S‘ArgPoš‹e
<3>('b'), 
R‘uº
(3));

844 
EXPECT_EQ
(3, 
aùiÚ
.
P”fÜm
(
¡d
::
make_tu¶e
(&
m
, &
n
, &
a
, &
b
)));

845 
EXPECT_EQ
(1, 
m
);

846 
EXPECT_EQ
(2, 
n
);

847 
EXPECT_EQ
('a', 
a
);

848 
EXPECT_EQ
('b', 
b
);

852 
TEST
(
DoAÎTe¡
, 
SixAùiÚs
) {

853 
	gm
 = 0, 
	gn
 = 0;

854 
	ga
 = '\0', 
	gb
 = '\0', 
	gc
 = '\0';

855 
	gAùiÚ
<(*, *, *, *, *)> 
	gaùiÚ
 =

856 
DoAÎ
(
S‘ArgPoš‹e
<0>(1), SetArgPointee<1>(2), SetArgPointee<2>('a'),

857 
S‘ArgPoš‹e
<3>('b'), S‘ArgPoš‹e<4>('c'), 
R‘uº
(3));

858 
EXPECT_EQ
(3, 
aùiÚ
.
P”fÜm
(
¡d
::
make_tu¶e
(&
m
, &
n
, &
a
, &
b
, &
c
)));

859 
EXPECT_EQ
(1, 
m
);

860 
EXPECT_EQ
(2, 
n
);

861 
EXPECT_EQ
('a', 
a
);

862 
EXPECT_EQ
('b', 
b
);

863 
EXPECT_EQ
('c', 
c
);

867 
TEST
(
DoAÎTe¡
, 
Sev’AùiÚs
) {

868 
	gm
 = 0, 
	gn
 = 0;

869 
	ga
 = '\0', 
	gb
 = '\0', 
	gc
 = '\0', 
	gd
 = '\0';

870 
	gAùiÚ
<(*, *, *, *, *, *)> 
	gaùiÚ
 =

871 
DoAÎ
(
S‘ArgPoš‹e
<0>(1), SetArgPointee<1>(2), SetArgPointee<2>('a'),

872 
S‘ArgPoš‹e
<3>('b'), SetArgPointee<4>('c'), SetArgPointee<5>('d'),

873 
R‘uº
(3));

874 
EXPECT_EQ
(3, 
aùiÚ
.
P”fÜm
(
¡d
::
make_tu¶e
(&
m
, &
n
, &
a
, &
b
, &
c
, &
d
)));

875 
EXPECT_EQ
(1, 
m
);

876 
EXPECT_EQ
(2, 
n
);

877 
EXPECT_EQ
('a', 
a
);

878 
EXPECT_EQ
('b', 
b
);

879 
EXPECT_EQ
('c', 
c
);

880 
EXPECT_EQ
('d', 
d
);

884 
TEST
(
DoAÎTe¡
, 
EightAùiÚs
) {

885 
	gm
 = 0, 
	gn
 = 0;

886 
	ga
 = '\0', 
	gb
 = '\0', 
	gc
 = '\0', 
	gd
 = '\0', 
	ge
 = '\0';

887 
	gAùiÚ
<(*, *, *, *, *, *,

889 
	gaùiÚ
 =

890 
DoAÎ
(
S‘ArgPoš‹e
<0>(1), SetArgPointee<1>(2), SetArgPointee<2>('a'),

891 
S‘ArgPoš‹e
<3>('b'), SetArgPointee<4>('c'),

892 
S‘ArgPoš‹e
<5>('d'), S‘ArgPoš‹e<6>('e'), 
R‘uº
(3));

893 
EXPECT_EQ
(3, 
aùiÚ
.
P”fÜm
(
¡d
::
make_tu¶e
(&
m
, &
n
, &
a
, &
b
, &
c
, &
d
, &
e
)));

894 
EXPECT_EQ
(1, 
m
);

895 
EXPECT_EQ
(2, 
n
);

896 
EXPECT_EQ
('a', 
a
);

897 
EXPECT_EQ
('b', 
b
);

898 
EXPECT_EQ
('c', 
c
);

899 
EXPECT_EQ
('d', 
d
);

900 
EXPECT_EQ
('e', 
e
);

904 
TEST
(
DoAÎTe¡
, 
NšeAùiÚs
) {

905 
	gm
 = 0, 
	gn
 = 0;

906 
	ga
 = '\0', 
	gb
 = '\0', 
	gc
 = '\0', 
	gd
 = '\0', 
	ge
 = '\0', 
	gf
 = '\0';

907 
	gAùiÚ
<(*, *, *, *, *, *,

909 
	gaùiÚ
 = 
DoAÎ
(
S‘ArgPoš‹e
<0>(1), SetArgPointee<1>(2),

910 
S‘ArgPoš‹e
<2>('a'), SetArgPointee<3>('b'),

911 
S‘ArgPoš‹e
<4>('c'), SetArgPointee<5>('d'),

912 
S‘ArgPoš‹e
<6>('e'), S‘ArgPoš‹e<7>('f'), 
R‘uº
(3));

913 
EXPECT_EQ
(3, 
aùiÚ
.
P”fÜm
(
¡d
::
make_tu¶e
(&
m
, &
n
, &
a
, &
b
, &
c
, &
d
, &
e
, &
f
)));

914 
EXPECT_EQ
(1, 
m
);

915 
EXPECT_EQ
(2, 
n
);

916 
EXPECT_EQ
('a', 
a
);

917 
EXPECT_EQ
('b', 
b
);

918 
EXPECT_EQ
('c', 
c
);

919 
EXPECT_EQ
('d', 
d
);

920 
EXPECT_EQ
('e', 
e
);

921 
EXPECT_EQ
('f', 
f
);

925 
TEST
(
DoAÎTe¡
, 
T’AùiÚs
) {

926 
	gm
 = 0, 
	gn
 = 0;

927 
	ga
 = '\0', 
	gb
 = '\0', 
	gc
 = '\0', 
	gd
 = '\0';

928 
	ge
 = '\0', 
	gf
 = '\0', 
	gg
 = '\0';

929 
	gAùiÚ
<(*, *, *, *, *, *,

931 
	gaùiÚ
 =

932 
DoAÎ
(
S‘ArgPoš‹e
<0>(1), SetArgPointee<1>(2), SetArgPointee<2>('a'),

933 
S‘ArgPoš‹e
<3>('b'), SetArgPointee<4>('c'),

934 
S‘ArgPoš‹e
<5>('d'), SetArgPointee<6>('e'),

935 
S‘ArgPoš‹e
<7>('f'), S‘ArgPoš‹e<8>('g'), 
R‘uº
(3));

936 
EXPECT_EQ
(

937 3, 
aùiÚ
.
P”fÜm
(
¡d
::
make_tu¶e
(&
m
, &
n
, &
a
, &
b
, &
c
, &
d
, &
e
, &
f
, &
g
)));

938 
EXPECT_EQ
(1, 
m
);

939 
EXPECT_EQ
(2, 
n
);

940 
EXPECT_EQ
('a', 
a
);

941 
EXPECT_EQ
('b', 
b
);

942 
EXPECT_EQ
('c', 
c
);

943 
EXPECT_EQ
('d', 
d
);

944 
EXPECT_EQ
('e', 
e
);

945 
EXPECT_EQ
('f', 
f
);

946 
EXPECT_EQ
('g', 
g
);

949 
TEST
(
DoAÎTe¡
, 
NoArgs
) {

950 
boŞ
 
	g¿n_fœ¡
 = 
çl£
;

951 
	gAùiÚ
<
boŞ
()> 
	ga
 =

952 
DoAÎ
([&] { 
¿n_fœ¡
 = 
Œue
; }, [&] { „an_first; });

953 
EXPECT_TRUE
(
a
.
P”fÜm
({}));

956 
TEST
(
DoAÎTe¡
, 
MoveOÆyArgs
) {

957 
boŞ
 
	g¿n_fœ¡
 = 
çl£
;

958 
	gAùiÚ
<(
	g¡d
::
unique_±r
<>)> 
a
 =

959 
DoAÎ
(
InvokeW™houtArgs
([&] { 
¿n_fœ¡
 = 
Œue
; }),

960 [](
¡d
::
unique_±r
<> 
p
) {  *p; });

961 
EXPECT_EQ
(7, 
a
.
P”fÜm
(
¡d
::
make_tu¶e
(¡d::
unique_±r
<>(
Ãw
 (7)))));

962 
EXPECT_TRUE
(
¿n_fœ¡
);

965 
TEST
(
DoAÎTe¡
, 
Im¶ic™lyCÚv”tsAùiÚArgum’ts
) {

966 
boŞ
 
	g¿n_fœ¡
 = 
çl£
;

969 
	gAùiÚ
<(
	g¡d
::
veùÜ
<>)> 
fœ¡
 = [&] { 
¿n_fœ¡
 = 
Œue
; };

970 
	gAùiÚ
<(
	g¡d
::
veùÜ
<>)> 
a
 =

971 
DoAÎ
(
fœ¡
, [](
¡d
::
veùÜ
<> 
¬g
è{ ‡rg.
äÚt
(); });

972 
EXPECT_EQ
(7, 
a
.
P”fÜm
(
¡d
::
make_tu¶e
(¡d::
veùÜ
<>{7})));

973 
EXPECT_TRUE
(
¿n_fœ¡
);

982 #ifdeà
_MSC_VER


983 #´agm¨
w¬nšg
(
push
)

984 #´agm¨
w¬nšg
(
di§bË
 : 4100)

985 #´agm¨
w¬nšg
(
di§bË
 : 4503)

991 
ACTION
(
R‘uº5
) {  5; }

993 
TEST
(
AùiÚMaüoTe¡
, 
WÜksWh’NÙReã»ncšgArgum’ts
) {

994 
	gAùiÚ
<()> 
	ga1
 = 
R‘uº5
();

995 
EXPECT_DOUBLE_EQ
(5, 
a1
.
P”fÜm
(
¡d
::
make_tu¶e
()));

997 
	gAùiÚ
<(, 
	gboŞ
)> 
	ga2
 = 
R‘uº5
();

998 
EXPECT_EQ
(5, 
a2
.
P”fÜm
(
¡d
::
make_tu¶e
(1, 
Œue
)));

1002 
ACTION
(
Inüem’tArg1
è{ (*
	g¬g1
)++; }

1004 
TEST
(
AùiÚMaüoTe¡
, 
WÜksWh’R‘uºšgVoid
) {

1005 
	gAùiÚ
<(, *)> 
	ga1
 = 
Inüem’tArg1
();

1006 
	gn
 = 0;

1007 
	ga1
.
P”fÜm
(
¡d
::
make_tu¶e
(5, &
n
));

1008 
EXPECT_EQ
(1, 
n
);

1013 
ACTION
(
Inüem’tArg2
) {

1014 
	gSticAs£¹Ty³Eq
<*, 
	g¬g2_ty³
>();

1015 
¬g2_ty³
 
	g‹mp
 = 
¬g2
;

1016 (*
	g‹mp
)++;

1019 
TEST
(
AùiÚMaüoTe¡
, 
CªReã»nûArgum’tTy³
) {

1020 
	gAùiÚ
<(, 
	gboŞ
, *)> 
	ga1
 = 
Inüem’tArg2
();

1021 
	gn
 = 0;

1022 
	ga1
.
P”fÜm
(
¡d
::
make_tu¶e
(5, 
çl£
, &
n
));

1023 
EXPECT_EQ
(1, 
n
);

1028 
ACTION
(
Sum2
) {

1029 
	gSticAs£¹Ty³Eq
<
	g¡d
::
tu¶e
<, , *>, 
	g¬gs_ty³
>();

1030 
¬gs_ty³
 
	g¬gs_cİy
 = 
¬gs
;

1031  
	g¡d
::
g‘
<0>(
¬gs_cİy
è+ 
¡d
::get<1>(args_copy);

1034 
TEST
(
AùiÚMaüoTe¡
, 
CªReã»nûArgum’tTu¶e
) {

1035 
	gAùiÚ
<(, , *)> 
	ga1
 = 
Sum2
();

1036 
	gdummy
 = 0;

1037 
EXPECT_EQ
(11, 
a1
.
P”fÜm
(
¡d
::
make_tu¶e
(5, 
Ch¬
(6), &
dummy
)));

1040 
	gÇme¥aû
 {

1044 
Dummy
(
boŞ
 
æag
è{  
	gæag
 ? 1 : 0; }

1048 
ACTION
(
InvokeDummy
) {

1049 
	gSticAs£¹Ty³Eq
<(
	gboŞ
), 
	gfunùiÚ_ty³
>();

1050 
funùiÚ_ty³
* 
	gå
 = &
Dummy
;

1051  (*
	gå
)(
	gŒue
);

1054 
TEST
(
AùiÚMaüoTe¡
, 
CªReã»nûMockFunùiÚTy³
) {

1055 
	gAùiÚ
<(
	gboŞ
)> 
	ga1
 = 
InvokeDummy
();

1056 
EXPECT_EQ
(1, 
a1
.
P”fÜm
(
¡d
::
make_tu¶e
(
Œue
)));

1057 
EXPECT_EQ
(1, 
a1
.
P”fÜm
(
¡d
::
make_tu¶e
(
çl£
)));

1062 
ACTION
(
InvokeDummy2
) {

1063 
	gSticAs£¹Ty³Eq
<, 
	g»tuº_ty³
>();

1064 
»tuº_ty³
 
	g»suÉ
 = 
Dummy
(
Œue
);

1065  
	g»suÉ
;

1068 
TEST
(
AùiÚMaüoTe¡
, 
CªReã»nûMockFunùiÚR‘uºTy³
) {

1069 
	gAùiÚ
<(
	gboŞ
)> 
	ga1
 = 
InvokeDummy2
();

1070 
EXPECT_EQ
(1, 
a1
.
P”fÜm
(
¡d
::
make_tu¶e
(
Œue
)));

1071 
EXPECT_EQ
(1, 
a1
.
P”fÜm
(
¡d
::
make_tu¶e
(
çl£
)));

1075 
ACTION
(
R‘uºAddrOfCÚ¡BoŞReã»nûArg
) {

1076 
	gSticAs£¹Ty³Eq
<cÚ¡ 
	gboŞ
&, 
	g¬g1_ty³
>();

1077  &
	g¬g1
;

1080 
TEST
(
AùiÚMaüoTe¡
, 
WÜksFÜCÚ¡Reã»nûArg
) {

1081 
	gAùiÚ
<cÚ¡ 
	gboŞ
*(, cÚ¡ boŞ&)> 
	ga
 = 
R‘uºAddrOfCÚ¡BoŞReã»nûArg
();

1082 cÚ¡ 
boŞ
 
	gb
 = 
çl£
;

1083 
EXPECT_EQ
(&
b
, 
a
.
P”fÜm
(
¡d
::
tu¶e
<, cÚ¡ 
boŞ
&>(0, b)));

1087 
ACTION
(
R‘uºAddrOfIÁReã»nûArg
) {

1088 
	gSticAs£¹Ty³Eq
<&, 
	g¬g0_ty³
>();

1089  &
	g¬g0
;

1092 
TEST
(
AùiÚMaüoTe¡
, 
WÜksFÜNÚCÚ¡Reã»nûArg
) {

1093 
	gAùiÚ
<*(&, 
	gboŞ
, )> 
	ga
 = 
R‘uºAddrOfIÁReã»nûArg
();

1094 
	gn
 = 0;

1095 
EXPECT_EQ
(&
n
, 
a
.
P”fÜm
(
¡d
::
tu¶e
<&, 
boŞ
, >Ò, 
Œue
, 1)));

1099 
Çme¥aû
 
	gaùiÚ_‹¡
 {

1100 
ACTION
(
Sum
è{  
	g¬g0
 + 
	g¬g1
; }

1103 
TEST
(
AùiÚMaüoTe¡
, 
WÜksInName¥aû
) {

1104 
	gAùiÚ
<(, )> 
	ga1
 = 
aùiÚ_‹¡
::
Sum
();

1105 
EXPECT_EQ
(3, 
a1
.
P”fÜm
(
¡d
::
make_tu¶e
(1, 2)));

1110 
ACTION
(
PlusTwo
è{  
	g¬g0
 + 2; }

1112 
TEST
(
AùiÚMaüoTe¡
, 
WÜksFÜDifã»ÁArgum’tNumb”s
) {

1113 
	gAùiÚ
<()> 
	ga1
 = 
PlusTwo
();

1114 
EXPECT_EQ
(4, 
a1
.
P”fÜm
(
¡d
::
make_tu¶e
(2)));

1116 
	gAùiÚ
<(, *)> 
	ga2
 = 
PlusTwo
();

1117 
	gdummy
;

1118 
EXPECT_DOUBLE_EQ
(6, 
a2
.
P”fÜm
(
¡d
::
make_tu¶e
(4.0f, &
dummy
)));

1122 
ACTION_P
(
Plus
, 
n
è{  
	g¬g0
 + 
	gn
; }

1124 
TEST
(
AùiÚPMaüoTe¡
, 
DefšesP¬am‘”izedAùiÚ
) {

1125 
	gAùiÚ
<(
	gm
, 
boŞ
 
	gt
)> 
	ga1
 = 
Plus
(9);

1126 
EXPECT_EQ
(10, 
a1
.
P”fÜm
(
¡d
::
make_tu¶e
(1, 
Œue
)));

1131 
ACTION_P
(
Ty³dPlus
, 
n
) {

1132 
¬g0_ty³
 
	gt1
 = 
¬g0
;

1133 
n_ty³
 
	gt2
 = 
n
;

1134  
	gt1
 + 
	gt2
;

1137 
TEST
(
AùiÚPMaüoTe¡
, 
CªReã»nûArgum’tAndP¬am‘”Ty³s
) {

1138 
	gAùiÚ
<(
	gm
, 
boŞ
 
	gt
)> 
	ga1
 = 
Ty³dPlus
(9);

1139 
EXPECT_EQ
(10, 
a1
.
P”fÜm
(
¡d
::
make_tu¶e
(
Ch¬
(1), 
Œue
)));

1144 
TEST
(
AùiÚPMaüoTe¡
, 
WÜksInCom·tibËMockFunùiÚ
) {

1145 
	gAùiÚ
<
	g¡d
::
¡ršg
(cÚ¡ 
¡d
::¡ršg& 
s
)> 
a1
 = 
Plus
("tail");

1146 cÚ¡ 
	g¡d
::
¡ršg
 
»
 = "re";

1147 
	g¡d
::
tu¶e
<cÚ¡ 
¡d
::
¡ršg
> 
dummy
 = std::
make_tu¶e
(
»
);

1148 
EXPECT_EQ
("»", 
a1
.
P”fÜm
(
dummy
));

1154 
ACTION
(
Ov”lßdedAùiÚ
è{  
	g¬g0
 ? 
	g¬g1
 : "hello"; }

1156 
ACTION_P
(
Ov”lßdedAùiÚ
, 
deçuÉ_v®ue
) {

1157  
	g¬g0
 ? 
	g¬g1
 : 
deçuÉ_v®ue
;

1160 
ACTION_P2
(
Ov”lßdedAùiÚ
, 
Œue_v®ue
, 
çl£_v®ue
) {

1161  
	g¬g0
 ? 
	gŒue_v®ue
 : 
çl£_v®ue
;

1164 
TEST
(
AùiÚMaüoTe¡
, 
CªDefšeOv”lßdedAùiÚs
) {

1165 
usšg
 
	gMyAùiÚ
 = 
AùiÚ
<cÚ¡ *(
boŞ
, const *)>;

1167 cÚ¡ 
MyAùiÚ
 
	ga1
 = 
Ov”lßdedAùiÚ
();

1168 
EXPECT_STREQ
("h–lo", 
a1
.
P”fÜm
(
¡d
::
make_tu¶e
(
çl£
, 
Ch¬PŒ
("world"))));

1169 
EXPECT_STREQ
("wÜld", 
a1
.
P”fÜm
(
¡d
::
make_tu¶e
(
Œue
, 
Ch¬PŒ
("world"))));

1171 cÚ¡ 
MyAùiÚ
 
	ga2
 = 
Ov”lßdedAùiÚ
("hi");

1172 
EXPECT_STREQ
("hi", 
a2
.
P”fÜm
(
¡d
::
make_tu¶e
(
çl£
, 
Ch¬PŒ
("world"))));

1173 
EXPECT_STREQ
("wÜld", 
a2
.
P”fÜm
(
¡d
::
make_tu¶e
(
Œue
, 
Ch¬PŒ
("world"))));

1175 cÚ¡ 
MyAùiÚ
 
	ga3
 = 
Ov”lßdedAùiÚ
("hi", "you");

1176 
EXPECT_STREQ
("hi", 
a3
.
P”fÜm
(
¡d
::
make_tu¶e
(
Œue
, 
Ch¬PŒ
("world"))));

1177 
EXPECT_STREQ
("you", 
a3
.
P”fÜm
(
¡d
::
make_tu¶e
(
çl£
, 
Ch¬PŒ
("world"))));

1182 
ACTION_P3
(
Plus
, 
m
, 
n
, 
k
è{  
	g¬g0
 + 
	gm
 + 
	gn
 + 
	gk
; }

1184 
TEST
(
AùiÚPnMaüoTe¡
, 
WÜksFÜ3P¬am‘”s
) {

1185 
	gAùiÚ
<(
	gm
, 
boŞ
 
	gt
)> 
	ga1
 = 
Plus
(100, 20, 3.4);

1186 
EXPECT_DOUBLE_EQ
(3123.4, 
a1
.
P”fÜm
(
¡d
::
make_tu¶e
(3000, 
Œue
)));

1188 
	gAùiÚ
<
	g¡d
::
¡ršg
(cÚ¡ 
¡d
::¡ršg& 
s
)> 
a2
 = 
Plus
("tail", "-", ">");

1189 cÚ¡ 
	g¡d
::
¡ršg
 
»
 = "re";

1190 
	g¡d
::
tu¶e
<cÚ¡ 
¡d
::
¡ršg
> 
dummy
 = std::
make_tu¶e
(
»
);

1191 
EXPECT_EQ
("»->", 
a2
.
P”fÜm
(
dummy
));

1194 
ACTION_P4
(
Plus
, 
p0
, 
p1
, 
p2
, 
p3
è{  
	g¬g0
 + 
	gp0
 + 
	gp1
 + 
	gp2
 + 
	gp3
; }

1196 
TEST
(
AùiÚPnMaüoTe¡
, 
WÜksFÜ4P¬am‘”s
) {

1197 
	gAùiÚ
<()> 
	ga1
 = 
Plus
(1, 2, 3, 4);

1198 
EXPECT_EQ
(10 + 1 + 2 + 3 + 4, 
a1
.
P”fÜm
(
¡d
::
make_tu¶e
(10)));

1201 
ACTION_P5
(
Plus
, 
p0
, 
p1
, 
p2
, 
p3
, 
p4
è{  
	g¬g0
 + 
	gp0
 + 
	gp1
 + 
	gp2
 + 
	gp3
 + 
	gp4
; }

1203 
TEST
(
AùiÚPnMaüoTe¡
, 
WÜksFÜ5P¬am‘”s
) {

1204 
	gAùiÚ
<()> 
	ga1
 = 
Plus
(1, 2, 3, 4, 5);

1205 
EXPECT_EQ
(10 + 1 + 2 + 3 + 4 + 5, 
a1
.
P”fÜm
(
¡d
::
make_tu¶e
(10)));

1208 
ACTION_P6
(
Plus
, 
p0
, 
p1
, 
p2
, 
p3
, 
p4
, 
p5
) {

1209  
	g¬g0
 + 
	gp0
 + 
	gp1
 + 
	gp2
 + 
	gp3
 + 
	gp4
 + 
	gp5
;

1212 
TEST
(
AùiÚPnMaüoTe¡
, 
WÜksFÜ6P¬am‘”s
) {

1213 
	gAùiÚ
<()> 
	ga1
 = 
Plus
(1, 2, 3, 4, 5, 6);

1214 
EXPECT_EQ
(10 + 1 + 2 + 3 + 4 + 5 + 6, 
a1
.
P”fÜm
(
¡d
::
make_tu¶e
(10)));

1217 
ACTION_P7
(
Plus
, 
p0
, 
p1
, 
p2
, 
p3
, 
p4
, 
p5
, 
p6
) {

1218  
	g¬g0
 + 
	gp0
 + 
	gp1
 + 
	gp2
 + 
	gp3
 + 
	gp4
 + 
	gp5
 + 
	gp6
;

1221 
TEST
(
AùiÚPnMaüoTe¡
, 
WÜksFÜ7P¬am‘”s
) {

1222 
	gAùiÚ
<()> 
	ga1
 = 
Plus
(1, 2, 3, 4, 5, 6, 7);

1223 
EXPECT_EQ
(10 + 1 + 2 + 3 + 4 + 5 + 6 + 7, 
a1
.
P”fÜm
(
¡d
::
make_tu¶e
(10)));

1226 
ACTION_P8
(
Plus
, 
p0
, 
p1
, 
p2
, 
p3
, 
p4
, 
p5
, 
p6
, 
p7
) {

1227  
	g¬g0
 + 
	gp0
 + 
	gp1
 + 
	gp2
 + 
	gp3
 + 
	gp4
 + 
	gp5
 + 
	gp6
 + 
	gp7
;

1230 
TEST
(
AùiÚPnMaüoTe¡
, 
WÜksFÜ8P¬am‘”s
) {

1231 
	gAùiÚ
<()> 
	ga1
 = 
Plus
(1, 2, 3, 4, 5, 6, 7, 8);

1232 
EXPECT_EQ
(10 + 1 + 2 + 3 + 4 + 5 + 6 + 7 + 8,

1233 
a1
.
P”fÜm
(
¡d
::
make_tu¶e
(10)));

1236 
ACTION_P9
(
Plus
, 
p0
, 
p1
, 
p2
, 
p3
, 
p4
, 
p5
, 
p6
, 
p7
, 
p8
) {

1237  
	g¬g0
 + 
	gp0
 + 
	gp1
 + 
	gp2
 + 
	gp3
 + 
	gp4
 + 
	gp5
 + 
	gp6
 + 
	gp7
 + 
	gp8
;

1240 
TEST
(
AùiÚPnMaüoTe¡
, 
WÜksFÜ9P¬am‘”s
) {

1241 
	gAùiÚ
<()> 
	ga1
 = 
Plus
(1, 2, 3, 4, 5, 6, 7, 8, 9);

1242 
EXPECT_EQ
(10 + 1 + 2 + 3 + 4 + 5 + 6 + 7 + 8 + 9,

1243 
a1
.
P”fÜm
(
¡d
::
make_tu¶e
(10)));

1246 
ACTION_P10
(
Plus
, 
p0
, 
p1
, 
p2
, 
p3
, 
p4
, 
p5
, 
p6
, 
p7
, 
p8
, 
Ï¡_·¿m
) {

1247 
¬g0_ty³
 
	gt0
 = 
¬g0
;

1248 
Ï¡_·¿m_ty³
 
	gt9
 = 
Ï¡_·¿m
;

1249  
	gt0
 + 
	gp0
 + 
	gp1
 + 
	gp2
 + 
	gp3
 + 
	gp4
 + 
	gp5
 + 
	gp6
 + 
	gp7
 + 
	gp8
 + 
	gt9
;

1252 
TEST
(
AùiÚPnMaüoTe¡
, 
WÜksFÜ10P¬am‘”s
) {

1253 
	gAùiÚ
<()> 
	ga1
 = 
Plus
(1, 2, 3, 4, 5, 6, 7, 8, 9, 10);

1254 
EXPECT_EQ
(10 + 1 + 2 + 3 + 4 + 5 + 6 + 7 + 8 + 9 + 10,

1255 
a1
.
P”fÜm
(
¡d
::
make_tu¶e
(10)));

1260 
ACTION_P2
(
PadArgum’t
, 
´efix
, 
suffix
) {

1262 
	g¡d
::
¡ršg
 
´efix_¡r
(
´efix
);

1263 
	gsuffix_ch¬
 = 
¡©ic_ÿ¡
<>(
suffix
);

1264  
	g´efix_¡r
 + 
	g¬g0
 + 
	gsuffix_ch¬
;

1267 
TEST
(
AùiÚPnMaüoTe¡
, 
Sim¶eTy³PromÙiÚ
) {

1268 
	gAùiÚ
<
	g¡d
::
¡ršg
(cÚ¡ *)> 
no_´omo
 =

1269 
PadArgum’t
(
¡d
::
¡ršg
("foo"), 'r');

1270 
	gAùiÚ
<
	g¡d
::
¡ršg
(cÚ¡ *)> 
´omo
 =

1271 
PadArgum’t
("foo", 
¡©ic_ÿ¡
<>('r'));

1272 
EXPECT_EQ
("foob¬", 
no_´omo
.
P”fÜm
(
¡d
::
make_tu¶e
(
Ch¬PŒ
("ba"))));

1273 
EXPECT_EQ
("foob¬", 
´omo
.
P”fÜm
(
¡d
::
make_tu¶e
(
Ch¬PŒ
("ba"))));

1281 
ACTION_P3
(
CÚÿtIm¶
, 
a
, 
b
, 
c
) {

1282 
	g¡d
::
¡ršg¡»am
 
ss
;

1283 
	gss
 << 
	ga
 << 
	gb
 << 
	gc
;

1284  
	gss
.
¡r
();

1292 
	g‹m¶©e
 <
ty³Çme
 
	gT1
,y³Çm
	gT2
>

1296 
	gCÚÿtIm¶AùiÚP3
<
	g¡d
::
¡ršg
, 
	gT1
, 
	gT2
> 
CÚÿt
(cÚ¡ 
¡d
::¡ršg& 
a
, 
T1
 
b
,

1297 
T2
 
c
) {

1298 
GTEST_INTENTIONAL_CONST_COND_PUSH_
()

1299 ià(
	gŒue
) {

1300 
GTEST_INTENTIONAL_CONST_COND_POP_
()

1303  
CÚÿtIm¶
(
a
, 
b
, 
c
);

1308  
	gCÚÿtIm¶
<
	g¡d
::
¡ršg
, 
	gT1
, 
	gT2
>(
	ga
, 
	gb
, 
	gc
);

1314 
	g‹m¶©e
 <
ty³Çme
 
	gT1
,y³Çm
	gT2
>

1315 
	gCÚÿtIm¶AùiÚP3
<
	gT1
, , 
	gT2
> 
CÚÿt
(
T1
 
a
, 
b
, 
T2
 
c
) {

1316  
CÚÿtIm¶
(
a
, 
b
, 
c
);

1319 
TEST
(
AùiÚPnMaüoTe¡
, 
CªP¬tŸÎyRe¡riùP¬am‘”Ty³s
) {

1320 
	gAùiÚ
<cÚ¡ 
	g¡d
::
¡ršg
()> 
a1
 = 
CÚÿt
("Hello", "1", 2);

1321 
EXPECT_EQ
("H–lo12", 
a1
.
P”fÜm
(
¡d
::
make_tu¶e
()));

1323 
	ga1
 = 
CÚÿt
(1, 2, 3);

1324 
EXPECT_EQ
("123", 
a1
.
P”fÜm
(
¡d
::
make_tu¶e
()));

1329 
ACTION
(
DoFoo
) {}

1330 
ACTION_P
(
DoFoo
, 
p
) {}

1331 
ACTION_P2
(
DoFoo
, 
p0
, 
p1
) {}

1333 
TEST
(
AùiÚPnMaüoTe¡
, 
Ty³sA»CÜ»ù
) {

1335 
DoFooAùiÚ
 
	ga0
 = 
DoFoo
();

1338 
	gDoFooAùiÚP
<> 
	ga1
 = 
DoFoo
(1);

1342 
	gDoFooAùiÚP2
<, > 
	ga2
 = 
DoFoo
(1, '2');

1343 
	gPlusAùiÚP3
<, , > 
	ga3
 = 
Plus
(1, 2, '3');

1344 
	gPlusAùiÚP4
<, , , > 
	ga4
 = 
Plus
(1, 2, 3, '4');

1345 
	gPlusAùiÚP5
<, , , , > 
	ga5
 = 
Plus
(1, 2, 3, 4, '5');

1346 
	gPlusAùiÚP6
<, , , , , > 
	ga6
 = 
Plus
(1, 2, 3, 4, 5, '6');

1347 
	gPlusAùiÚP7
<, , , , , , > 
	ga7
 =

1348 
Plus
(1, 2, 3, 4, 5, 6, '7');

1349 
	gPlusAùiÚP8
<, , , , , , , > 
	ga8
 =

1350 
Plus
(1, 2, 3, 4, 5, 6, 7, '8');

1351 
	gPlusAùiÚP9
<, , , , , , , , > 
	ga9
 =

1352 
Plus
(1, 2, 3, 4, 5, 6, 7, 8, '9');

1353 
	gPlusAùiÚP10
<, , , , , , , , , > 
	ga10
 =

1354 
Plus
(1, 2, 3, 4, 5, 6, 7, 8, 9, '0');

1357 ()
	ga0
;

1358 ()
	ga1
;

1359 ()
	ga2
;

1360 ()
	ga3
;

1361 ()
	ga4
;

1362 ()
	ga5
;

1363 ()
	ga6
;

1364 ()
	ga7
;

1365 ()
	ga8
;

1366 ()
	ga9
;

1367 ()
	ga10
;

1373 
ACTION_P
(
Plus1
, 
x
è{  
	gx
; }

1374 
ACTION_P2
(
Plus2
, 
x
, 
y
è{  
	gx
 + 
	gy
; }

1375 
ACTION_P3
(
Plus3
, 
x
, 
y
, 
z
è{  
	gx
 + 
	gy
 + 
	gz
; }

1376 
ACTION_P10
(
Plus10
, 
a0
, 
a1
, 
a2
, 
a3
, 
a4
, 
a5
, 
a6
, 
a7
, 
a8
, 
a9
) {

1377  
	ga0
 + 
	ga1
 + 
	ga2
 + 
	ga3
 + 
	ga4
 + 
	ga5
 + 
	ga6
 + 
	ga7
 + 
	ga8
 + 
	ga9
;

1380 
TEST
(
AùiÚPnMaüoTe¡
, 
CªEx¶ic™lyIn¡ªtŸ‹W™hReã»nûTy³s
) {

1381 
	gx
 = 1, 
	gy
 = 2, 
	gz
 = 3;

1382 cÚ¡ 
	g¡d
::
tu¶e
<> 
em±y
 = 
¡d
::
make_tu¶e
();

1384 
	gAùiÚ
<()> 
	ga
 = 
Plus1
<&>(
x
);

1385 
EXPECT_EQ
(1, 
a
.
P”fÜm
(
em±y
));

1387 
	ga
 = 
Plus2
<cÚ¡ &, &>(
	gx
, 
	gy
);

1388 
EXPECT_EQ
(3, 
a
.
P”fÜm
(
em±y
));

1390 
	ga
 = 
Plus3
<&, cÚ¡ &, &>(
	gx
, 
	gy
, 
	gz
);

1391 
EXPECT_EQ
(6, 
a
.
P”fÜm
(
em±y
));

1393 
	gn
[10] = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10};

1394 
	ga
 = 
Plus10
<const &, &, const &, &, const &, &, const &,

1395 &, cÚ¡ &, &>(
	gn
[0],‚[1],‚[2],‚[3],‚[4],‚[5],‚[6],

1396 
	gn
[7],‚[8],‚[9]);

1397 
EXPECT_EQ
(55, 
a
.
P”fÜm
(
em±y
));

1400 şas 
	cT’ArgCÚ¡ruùÜCÏss
 {

1401 
	gpublic
:

1402 
T’ArgCÚ¡ruùÜCÏss
(
a1
, 
a2
, 
a3
, 
a4
, 
a5
, 
a6
, 
a7
,

1403 
a8
, 
a9
, 
a10
)

1404 : 
v®ue_
(
a1
 + 
a2
 + 
a3
 + 
a4
 + 
a5
 + 
a6
 + 
a7
 + 
a8
 + 
a9
 + 
a10
) {}

1405 
v®ue_
;

1409 
ACTION_TEMPLATE
(
C»©eNew
, 
HAS_1_TEMPLATE_PARAMS
(
ty³Çme
, 
T
),

1410 
AND_0_VALUE_PARAMS
()) {

1411  
Ãw
 
	gT
;

1414 
TEST
(
AùiÚTem¶©eTe¡
, 
WÜksW™houtV®ueP¬am
) {

1415 cÚ¡ 
	gAùiÚ
<*()> 
	ga
 = 
C»©eNew
<>();

1416 * 
	gp
 = 
a
.
P”fÜm
(
¡d
::
make_tu¶e
());

1417 
d–‘e
 
	gp
;

1421 
ACTION_TEMPLATE
(
C»©eNew
, 
HAS_1_TEMPLATE_PARAMS
(
ty³Çme
, 
T
),

1422 
AND_1_VALUE_PARAMS
(
a0
)) {

1423  
Ãw
 
T
(
a0
);

1426 
TEST
(
AùiÚTem¶©eTe¡
, 
WÜksW™hV®ueP¬ams
) {

1427 cÚ¡ 
	gAùiÚ
<*()> 
	ga
 = 
C»©eNew
<>(42);

1428 * 
	gp
 = 
a
.
P”fÜm
(
¡d
::
make_tu¶e
());

1429 
EXPECT_EQ
(42, *
p
);

1430 
d–‘e
 
	gp
;

1434 
ACTION_TEMPLATE
(
MyD–‘eArg
, 
HAS_1_TEMPLATE_PARAMS
(, 
k
),

1435 
AND_0_VALUE_PARAMS
()) {

1436 
d–‘e
 
	g¡d
::
g‘
<
k
>(
¬gs
);

1440 şas 
	cBoŞRe£‰”
 {

1441 
	gpublic
:

1442 
ex¶ic™
 
BoŞRe£‰”
(
boŞ
* 
v®ue
è: 
v®ue_
(value) {}

1443 ~
BoŞRe£‰”
(è{ *
v®ue_
 = 
çl£
; }

1445 
	g´iv©e
:

1446 
boŞ
* 
v®ue_
;

1449 
TEST
(
AùiÚTem¶©eTe¡
, 
WÜksFÜIÁeg¿lTem¶©eP¬ams
) {

1450 cÚ¡ 
	gAùiÚ
<(*, 
	gBoŞRe£‰”
*)> 
	ga
 = 
MyD–‘eArg
<1>();

1451 
	gn
 = 0;

1452 
boŞ
 
	gb
 = 
Œue
;

1453 auto* 
	g»£‰”
 = 
Ãw
 
BoŞRe£‰”
(&
b
);

1454 
	ga
.
P”fÜm
(
¡d
::
make_tu¶e
(&
n
, 
»£‰”
));

1455 
EXPECT_FALSE
(
b
);

1459 
ACTION_TEMPLATE
(
R‘uºSm¬tPoš‹r
,

1460 
HAS_1_TEMPLATE_PARAMS
(
‹m¶©e
 <
ty³Çme
 
Poš‹e
> 
şass
,

1461 
Poš‹r
),

1462 
AND_1_VALUE_PARAMS
(
poš‹e
)) {

1463  
	gPoš‹r
<
	gpoš‹e_ty³
>(
Ãw
 
poš‹e_ty³
(
poš‹e
));

1466 
TEST
(
AùiÚTem¶©eTe¡
, 
WÜksFÜTem¶©eTem¶©eP¬am‘”s
) {

1467 cÚ¡ 
	gAùiÚ
<
	g¡d
::
sh¬ed_±r
<>()> 
a
 =

1468 
R‘uºSm¬tPoš‹r
<
¡d
::
sh¬ed_±r
>(42);

1469 
	g¡d
::
sh¬ed_±r
<> 
p
 = 
a
.
P”fÜm
(
¡d
::
make_tu¶e
());

1470 
EXPECT_EQ
(42, *
p
);

1474 
	g‹m¶©e
 <
ty³Çme
 
	gT1
,y³Çm
	gT2
,y³Çm
	gT3
, 
	gk4
, 
boŞ
 
	gk5
,

1475 
	gk6
, 
ty³Çme
 
	gT7
,y³Çm
	gT8
,y³Çm
	gT9
>

1476 
	sGŸÁTem¶©e
 {

1477 
	gpublic
:

1478 
ex¶ic™
 
GŸÁTem¶©e
(
a_v®ue
è: 
v®ue
(a_value) {}

1479 
v®ue
;

1482 
ACTION_TEMPLATE
(
R‘uºGŸÁ
,

1483 
HAS_10_TEMPLATE_PARAMS
(
ty³Çme
, 
T1
,y³Çme, 
T2
,y³Çme, 
T3
,

1484 , 
k4
, 
boŞ
, 
k5
, , 
k6
,

1485 
şass
, 
T7
, cÏss, 
T8
, cÏss, 
T9
,

1486 
‹m¶©e
 <
ty³Çme
 
T
> 
şass
, 
T10
),

1487 
AND_1_VALUE_PARAMS
(
v®ue
)) {

1488  
	gGŸÁTem¶©e
<
	gT10
<
	gT1
>, 
	gT2
, 
	gT3
, 
	gk4
, 
	gk5
, 
	gk6
, 
	gT7
, 
	gT8
, 
	gT9
>(
	gv®ue
);

1491 
TEST
(
AùiÚTem¶©eTe¡
, 
WÜksFÜ10Tem¶©eP¬am‘”s
) {

1492 
usšg
 
	gGŸÁ
 = 
GŸÁTem¶©e
<
¡d
::
sh¬ed_±r
<>, 
	gboŞ
, , 5, 
	gŒue
, 6,

1494 cÚ¡ 
	gAùiÚ
<
GŸÁ
()> 
	ga
 = 
R‘uºGŸÁ
<, 
	gboŞ
, , 5, 
	gŒue
, 6, ,

1495 , , 
	g¡d
::
sh¬ed_±r
>(42);

1496 
GŸÁ
 
	ggŸÁ
 = 
a
.
P”fÜm
(
¡d
::
make_tu¶e
());

1497 
EXPECT_EQ
(42, 
gŸÁ
.
v®ue
);

1501 
ACTION_TEMPLATE
(
R‘uºSum
, 
HAS_1_TEMPLATE_PARAMS
(
ty³Çme
, 
Numb”
),

1502 
AND_10_VALUE_PARAMS
(
v1
, 
v2
, 
v3
, 
v4
, 
v5
, 
v6
, 
v7
, 
v8
, 
v9
, 
v10
)) {

1503  
	g¡©ic_ÿ¡
<
	gNumb”
>(
	gv1
è+ 
	gv2
 + 
	gv3
 + 
	gv4
 + 
	gv5
 + 
	gv6
 + 
	gv7
 + 
	gv8
 + 
	gv9
 + 
	gv10
;

1506 
TEST
(
AùiÚTem¶©eTe¡
, 
WÜksFÜ10V®ueP¬am‘”s
) {

1507 cÚ¡ 
	gAùiÚ
<()> 
	ga
 = 
R‘uºSum
<>(1, 2, 3, 4, 5, 6, 7, 8, 9, 10);

1508 
EXPECT_EQ
(55, 
a
.
P”fÜm
(
¡d
::
make_tu¶e
()));

1514 
ACTION
(
R‘uºSum
) {  0; }

1516 
ACTION_P
(
R‘uºSum
, 
x
è{  
	gx
; }

1518 
ACTION_TEMPLATE
(
R‘uºSum
, 
HAS_1_TEMPLATE_PARAMS
(
ty³Çme
, 
Numb”
),

1519 
AND_2_VALUE_PARAMS
(
v1
, 
v2
)) {

1520  
	g¡©ic_ÿ¡
<
	gNumb”
>(
	gv1
è+ 
	gv2
;

1523 
ACTION_TEMPLATE
(
R‘uºSum
, 
HAS_1_TEMPLATE_PARAMS
(
ty³Çme
, 
Numb”
),

1524 
AND_3_VALUE_PARAMS
(
v1
, 
v2
, 
v3
)) {

1525  
	g¡©ic_ÿ¡
<
	gNumb”
>(
	gv1
è+ 
	gv2
 + 
	gv3
;

1528 
ACTION_TEMPLATE
(
R‘uºSum
, 
HAS_2_TEMPLATE_PARAMS
(
ty³Çme
, 
Numb”
, , 
k
),

1529 
AND_4_VALUE_PARAMS
(
v1
, 
v2
, 
v3
, 
v4
)) {

1530  
	g¡©ic_ÿ¡
<
	gNumb”
>(
	gv1
è+ 
	gv2
 + 
	gv3
 + 
	gv4
 + 
	gk
;

1533 
TEST
(
AùiÚTem¶©eTe¡
, 
CªBeOv”lßdedOnNumb”OfV®ueP¬am‘”s
) {

1534 cÚ¡ 
	gAùiÚ
<()> 
	ga0
 = 
R‘uºSum
();

1535 cÚ¡ 
	gAùiÚ
<()> 
	ga1
 = 
R‘uºSum
(1);

1536 cÚ¡ 
	gAùiÚ
<()> 
	ga2
 = 
R‘uºSum
<>(1, 2);

1537 cÚ¡ 
	gAùiÚ
<()> 
	ga3
 = 
R‘uºSum
<>(1, 2, 3);

1538 cÚ¡ 
	gAùiÚ
<()> 
	ga4
 = 
R‘uºSum
<, 10000>(2000, 300, 40, 5);

1539 
EXPECT_EQ
(0, 
a0
.
P”fÜm
(
¡d
::
make_tu¶e
()));

1540 
EXPECT_EQ
(1, 
a1
.
P”fÜm
(
¡d
::
make_tu¶e
()));

1541 
EXPECT_EQ
(3, 
a2
.
P”fÜm
(
¡d
::
make_tu¶e
()));

1542 
EXPECT_EQ
(6, 
a3
.
P”fÜm
(
¡d
::
make_tu¶e
()));

1543 
EXPECT_EQ
(12345, 
a4
.
P”fÜm
(
¡d
::
make_tu¶e
()));

	@third_party/googletest/googlemock/test/gmock-nice-strict_test.cc

30 
	~"gmock/gmock-niû-¡riù.h
"

32 
	~<¡ršg
>

33 
	~<ut™y
>

34 
	~"gmock/gmock.h
"

35 
	~"g‹¡/g‹¡-¥i.h
"

36 
	~"g‹¡/g‹¡.h
"

40 şas 
	cMock
 {

41 
	mpublic
:

42 
	$Mock
() {}

44 
	`MOCK_METHOD0
(
DoThis
, ());

46 
´iv©e
:

47 
	`GTEST_DISALLOW_COPY_AND_ASSIGN_
(
Mock
);

48 
	}
};

50 
Çme¥aû
 
	g‹¡šg
 {

51 
Çme¥aû
 
	ggmock_niû_¡riù_‹¡
 {

53 
usšg
 
	g‹¡šg
::
GMOCK_FLAG
(
v”bo£
);

54 
usšg
 
	g‹¡šg
::
HasSub¡r
;

55 
usšg
 
	g‹¡šg
::
NaggyMock
;

56 
usšg
 
	g‹¡šg
::
NiûMock
;

57 
usšg
 
	g‹¡šg
::
SŒiùMock
;

59 #ià
GTEST_HAS_STREAM_REDIRECTION


60 
usšg
 
	g‹¡šg
::
š‹º®
::
C­tu»Stdout
;

61 
usšg
 
	g‹¡šg
::
š‹º®
::
G‘C­tu»dStdout
;

65 şas 
	cNÙDeçuÉCÚ¡ruùibË
 {

66 
	gpublic
:

67 
ex¶ic™
 
NÙDeçuÉCÚ¡ruùibË
() {}

70 şas 
	cC®lsMockM‘hodInDe¡ruùÜ
 {

71 
	gpublic
:

72 ~
C®lsMockM‘hodInDe¡ruùÜ
(è{ 
OnDe¡roy
(); }

73 
MOCK_METHOD
(, 
OnDe¡roy
, ());

78 şas 
	cFoo
 {

79 
	gpublic
:

80 
vœtu®
 ~
Foo
() {}

82 
vœtu®
 
DoThis
() = 0;

83 
vœtu®
 
DoTh©
(
boŞ
 
æag
) = 0;

86 şas 
	cMockFoo
 : 
public
 
Foo
 {

87 
public
:

88 
MockFoo
() {}

89 
D–‘e
(è{ 
d–‘e
 
this
; }

91 
MOCK_METHOD0
(
DoThis
, ());

92 
MOCK_METHOD1
(
DoTh©
, (
boŞ
 
æag
));

93 
MOCK_METHOD0
(
R‘uºNÚDeçuÉCÚ¡ruùibË
, 
NÙDeçuÉCÚ¡ruùibË
());

95 
	g´iv©e
:

96 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
MockFoo
);

99 şas 
	cMockB¬
 {

100 
	gpublic
:

101 
ex¶ic™
 
MockB¬
(cÚ¡ 
¡d
::
¡ršg
& 
s
è: 
¡r_
(s) {}

103 
MockB¬
(
a1
, 
a2
, 
¡d
::
¡ršg
 
a3
, std::¡ršg 
a4
, 
a5
, 
a6
,

104 cÚ¡ 
¡d
::
¡ršg
& 
a7
, cÚ¡ std::¡ršg& 
a8
, 
boŞ
 
a9
, boŞ 
a10
) {

105 
	g¡r_
 = 
¡d
::
¡ršg
(è+ 
a1
 + 
a2
 + 
a3
 + 
a4
 + 
¡©ic_ÿ¡
<>(
a5
) +

106 
¡©ic_ÿ¡
<>(
a6
è+ 
a7
 + 
a8
 + (
a9
 ? 'T' : 'F'è+ (
a10
 ? 'T' : 'F');

109 
	gvœtu®
 ~
MockB¬
() {}

111 cÚ¡ 
	g¡d
::
¡ršg
& 
¡r
(ècÚ¡ {  
¡r_
; }

113 
MOCK_METHOD0
(
This
, ());

114 
MOCK_METHOD2
(
Th©
, 
¡d
::
¡ršg
(, 
boŞ
));

116 
	g´iv©e
:

117 
¡d
::
¡ršg
 
¡r_
;

119 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
MockB¬
);

123 şas 
	cMockBaz
 {

124 
	gpublic
:

125 şas 
	cMoveOÆy
 {

126 
public
:

127 
MoveOÆy
() = ;

129 
MoveOÆy
(cÚ¡ MoveOÆy&èğ
d–‘e
;

130 
	gMoveOÆy
& 
	gİ”©Ü
=(cÚ¡ 
MoveOÆy
&èğ
d–‘e
;

132 
MoveOÆy
(MoveOnly&&) = ;

133 
	gMoveOÆy
& 
	gİ”©Ü
=(
MoveOÆy
&&) = ;

136 
MockBaz
(
MoveOÆy
) {}

139 #ià
GTEST_HAS_STREAM_REDIRECTION


142 
TEST
(
RawMockTe¡
, 
W¬nšgFÜUnš‹»¡šgC®l
) {

143 cÚ¡ 
	g¡d
::
¡ršg
 
§ved_æag
 = 
GMOCK_FLAG
(
v”bo£
);

144 
GMOCK_FLAG
(
v”bo£
) = "warning";

146 
MockFoo
 
	g¿w_foo
;

148 
C­tu»Stdout
();

149 
	g¿w_foo
.
DoThis
();

150 
	g¿w_foo
.
DoTh©
(
Œue
);

151 
EXPECT_THAT
(
G‘C­tu»dStdout
(),

152 
HasSub¡r
("Uninteresting mock function call"));

154 
GMOCK_FLAG
(
v”bo£
èğ
§ved_æag
;

159 
TEST
(
RawMockTe¡
, 
W¬nšgFÜUnš‹»¡šgC®lAá”D—th
) {

160 cÚ¡ 
	g¡d
::
¡ršg
 
§ved_æag
 = 
GMOCK_FLAG
(
v”bo£
);

161 
GMOCK_FLAG
(
v”bo£
) = "warning";

163 
MockFoo
* cÚ¡ 
	g¿w_foo
 = 
Ãw
 MockFoo;

165 
ON_CALL
(*
¿w_foo
, 
DoThis
())

166 .
WlByDeçuÉ
(
Invoke
(
¿w_foo
, &
MockFoo
::
D–‘e
));

168 
C­tu»Stdout
();

169 
	g¿w_foo
->
DoThis
();

170 
EXPECT_THAT
(
G‘C­tu»dStdout
(),

171 
HasSub¡r
("Uninteresting mock function call"));

173 
GMOCK_FLAG
(
v”bo£
èğ
§ved_æag
;

178 
TEST
(
RawMockTe¡
, 
InfoFÜUnš‹»¡šgC®l
) {

179 
MockFoo
 
	g¿w_foo
;

181 cÚ¡ 
	g¡d
::
¡ršg
 
§ved_æag
 = 
GMOCK_FLAG
(
v”bo£
);

182 
GMOCK_FLAG
(
v”bo£
) = "info";

183 
C­tu»Stdout
();

184 
	g¿w_foo
.
DoThis
();

185 
EXPECT_THAT
(
G‘C­tu»dStdout
(),

186 
HasSub¡r
("Uninteresting mock function call"));

188 
GMOCK_FLAG
(
v”bo£
èğ
§ved_æag
;

191 
TEST
(
RawMockTe¡
, 
IsNaggy_IsNiû_IsSŒiù
) {

192 
MockFoo
 
	g¿w_foo
;

193 
EXPECT_TRUE
(
Mock
::
IsNaggy
(&
¿w_foo
));

194 
EXPECT_FALSE
(
Mock
::
IsNiû
(&
¿w_foo
));

195 
EXPECT_FALSE
(
Mock
::
IsSŒiù
(&
¿w_foo
));

199 
TEST
(
NiûMockTe¡
, 
NoW¬nšgFÜUnš‹»¡šgC®l
) {

200 
	gNiûMock
<
	gMockFoo
> 
	gniû_foo
;

202 
C­tu»Stdout
();

203 
	gniû_foo
.
DoThis
();

204 
	gniû_foo
.
DoTh©
(
Œue
);

205 
EXPECT_EQ
("", 
G‘C­tu»dStdout
());

210 
TEST
(
NiûMockTe¡
, 
NoW¬nšgFÜUnš‹»¡šgC®lAá”D—th
) {

211 
	gNiûMock
<
	gMockFoo
>* cÚ¡ 
	gniû_foo
 = 
Ãw
 
NiûMock
<
MockFoo
>;

213 
ON_CALL
(*
niû_foo
, 
DoThis
())

214 .
WlByDeçuÉ
(
Invoke
(
niû_foo
, &
MockFoo
::
D–‘e
));

216 
C­tu»Stdout
();

217 
	gniû_foo
->
DoThis
();

218 
EXPECT_EQ
("", 
G‘C­tu»dStdout
());

223 
TEST
(
NiûMockTe¡
, 
InfoFÜUnš‹»¡šgC®l
) {

224 
	gNiûMock
<
	gMockFoo
> 
	gniû_foo
;

226 cÚ¡ 
	g¡d
::
¡ršg
 
§ved_æag
 = 
GMOCK_FLAG
(
v”bo£
);

227 
GMOCK_FLAG
(
v”bo£
) = "info";

228 
C­tu»Stdout
();

229 
	gniû_foo
.
DoThis
();

230 
EXPECT_THAT
(
G‘C­tu»dStdout
(),

231 
HasSub¡r
("Uninteresting mock function call"));

233 
GMOCK_FLAG
(
v”bo£
èğ
§ved_æag
;

239 
TEST
(
NiûMockTe¡
, 
AÎowsEx³ùedC®l
) {

240 
	gNiûMock
<
	gMockFoo
> 
	gniû_foo
;

242 
EXPECT_CALL
(
niû_foo
, 
DoThis
());

243 
	gniû_foo
.
DoThis
();

249 
TEST
(
NiûMockTe¡
, 
ThrowsExû±iÚFÜUnknownR‘uºTy³s
) {

250 
	gNiûMock
<
	gMockFoo
> 
	gniû_foo
;

251 #ià
GTEST_HAS_EXCEPTIONS


252 
	gŒy
 {

253 
	gniû_foo
.
R‘uºNÚDeçuÉCÚ¡ruùibË
();

254 
FAIL
();

255 } 
ÿtch
 (cÚ¡ 
¡d
::
ruÁime_”rÜ
& 
ex
) {

256 
EXPECT_THAT
(
ex
.
wh©
(), 
HasSub¡r
("ReturnNonDefaultConstructible"));

259 
EXPECT_DEATH_IF_SUPPORTED
({ 
niû_foo
.
R‘uºNÚDeçuÉCÚ¡ruùibË
(); }, "");

264 
TEST
(
NiûMockTe¡
, 
UÃx³ùedC®lFas
) {

265 
	gNiûMock
<
	gMockFoo
> 
	gniû_foo
;

267 
EXPECT_CALL
(
niû_foo
, 
DoThis
()).
Times
(0);

268 
EXPECT_NONFATAL_FAILURE
(
niû_foo
.
DoThis
(), "called moreimeshanƒxpected");

273 
TEST
(
NiûMockTe¡
, 
NÚDeçuÉCÚ¡ruùÜ
) {

274 
	gNiûMock
<
	gMockB¬
> 
niû_b¬
("hi");

275 
EXPECT_EQ
("hi", 
niû_b¬
.
¡r
());

277 
	gniû_b¬
.
This
();

278 
	gniû_b¬
.
Th©
(5, 
Œue
);

283 
TEST
(
NiûMockTe¡
, 
NÚDeçuÉCÚ¡ruùÜ10
) {

284 
	gNiûMock
<
	gMockB¬
> 
niû_b¬
('a', 'b', "c", "d", 'e', 'f',

285 "g", "h", 
Œue
, 
çl£
);

286 
EXPECT_EQ
("abcdefghTF", 
niû_b¬
.
¡r
());

288 
	gniû_b¬
.
This
();

289 
	gniû_b¬
.
Th©
(5, 
Œue
);

292 
TEST
(
NiûMockTe¡
, 
AÎowL—k
) {

293 
	gNiûMock
<
	gMockFoo
>* 
	gËaked
 = 
Ãw
 
NiûMock
<
MockFoo
>;

294 
	gMock
::
AÎowL—k
(
Ëaked
);

295 
EXPECT_CALL
(*
Ëaked
, 
DoThis
());

296 
	gËaked
->
DoThis
();

299 
TEST
(
NiûMockTe¡
, 
MoveOÆyCÚ¡ruùÜ
) {

300 
	gNiûMock
<
	gMockBaz
> 
niû_baz
(
MockBaz
::
MoveOÆy
{});

305 
TEST
(
NiûMockTe¡
, 
Acû±sCÏssNamedMock
) {

306 
	gNiûMock
< ::
Mock
> 
niû
;

307 
EXPECT_CALL
(
niû
, 
DoThis
());

308 
	gniû
.
DoThis
();

311 
TEST
(
NiûMockTe¡
, 
IsNiûInDe¡ruùÜ
) {

313 
	gNiûMock
<
	gC®lsMockM‘hodInDe¡ruùÜ
> 
	gniû_Ú_de¡roy
;

318 
TEST
(
NiûMockTe¡
, 
IsNaggy_IsNiû_IsSŒiù
) {

319 
	gNiûMock
<
	gMockFoo
> 
	gniû_foo
;

320 
EXPECT_FALSE
(
Mock
::
IsNaggy
(&
niû_foo
));

321 
EXPECT_TRUE
(
Mock
::
IsNiû
(&
niû_foo
));

322 
EXPECT_FALSE
(
Mock
::
IsSŒiù
(&
niû_foo
));

325 #ià
GTEST_HAS_STREAM_REDIRECTION


328 
TEST
(
NaggyMockTe¡
, 
W¬nšgFÜUnš‹»¡šgC®l
) {

329 cÚ¡ 
	g¡d
::
¡ršg
 
§ved_æag
 = 
GMOCK_FLAG
(
v”bo£
);

330 
GMOCK_FLAG
(
v”bo£
) = "warning";

332 
	gNaggyMock
<
	gMockFoo
> 
	gÇggy_foo
;

334 
C­tu»Stdout
();

335 
	gÇggy_foo
.
DoThis
();

336 
	gÇggy_foo
.
DoTh©
(
Œue
);

337 
EXPECT_THAT
(
G‘C­tu»dStdout
(),

338 
HasSub¡r
("Uninteresting mock function call"));

340 
GMOCK_FLAG
(
v”bo£
èğ
§ved_æag
;

345 
TEST
(
NaggyMockTe¡
, 
W¬nšgFÜUnš‹»¡šgC®lAá”D—th
) {

346 cÚ¡ 
	g¡d
::
¡ršg
 
§ved_æag
 = 
GMOCK_FLAG
(
v”bo£
);

347 
GMOCK_FLAG
(
v”bo£
) = "warning";

349 
	gNaggyMock
<
	gMockFoo
>* cÚ¡ 
	gÇggy_foo
 = 
Ãw
 
NaggyMock
<
MockFoo
>;

351 
ON_CALL
(*
Çggy_foo
, 
DoThis
())

352 .
WlByDeçuÉ
(
Invoke
(
Çggy_foo
, &
MockFoo
::
D–‘e
));

354 
C­tu»Stdout
();

355 
	gÇggy_foo
->
DoThis
();

356 
EXPECT_THAT
(
G‘C­tu»dStdout
(),

357 
HasSub¡r
("Uninteresting mock function call"));

359 
GMOCK_FLAG
(
v”bo£
èğ
§ved_æag
;

365 
TEST
(
NaggyMockTe¡
, 
AÎowsEx³ùedC®l
) {

366 
	gNaggyMock
<
	gMockFoo
> 
	gÇggy_foo
;

368 
EXPECT_CALL
(
Çggy_foo
, 
DoThis
());

369 
	gÇggy_foo
.
DoThis
();

373 
TEST
(
NaggyMockTe¡
, 
UÃx³ùedC®lFas
) {

374 
	gNaggyMock
<
	gMockFoo
> 
	gÇggy_foo
;

376 
EXPECT_CALL
(
Çggy_foo
, 
DoThis
()).
Times
(0);

377 
EXPECT_NONFATAL_FAILURE
(
Çggy_foo
.
DoThis
(),

383 
TEST
(
NaggyMockTe¡
, 
NÚDeçuÉCÚ¡ruùÜ
) {

384 
	gNaggyMock
<
	gMockB¬
> 
Çggy_b¬
("hi");

385 
EXPECT_EQ
("hi", 
Çggy_b¬
.
¡r
());

387 
	gÇggy_b¬
.
This
();

388 
	gÇggy_b¬
.
Th©
(5, 
Œue
);

393 
TEST
(
NaggyMockTe¡
, 
NÚDeçuÉCÚ¡ruùÜ10
) {

394 
	gNaggyMock
<
	gMockB¬
> 
Çggy_b¬
('0', '1', "2", "3", '4', '5',

395 "6", "7", 
Œue
, 
çl£
);

396 
EXPECT_EQ
("01234567TF", 
Çggy_b¬
.
¡r
());

398 
	gÇggy_b¬
.
This
();

399 
	gÇggy_b¬
.
Th©
(5, 
Œue
);

402 
TEST
(
NaggyMockTe¡
, 
AÎowL—k
) {

403 
	gNaggyMock
<
	gMockFoo
>* 
	gËaked
 = 
Ãw
 
NaggyMock
<
MockFoo
>;

404 
	gMock
::
AÎowL—k
(
Ëaked
);

405 
EXPECT_CALL
(*
Ëaked
, 
DoThis
());

406 
	gËaked
->
DoThis
();

409 
TEST
(
NaggyMockTe¡
, 
MoveOÆyCÚ¡ruùÜ
) {

410 
	gNaggyMock
<
	gMockBaz
> 
Çggy_baz
(
MockBaz
::
MoveOÆy
{});

415 
TEST
(
NaggyMockTe¡
, 
Acû±sCÏssNamedMock
) {

416 
	gNaggyMock
< ::
Mock
> 
Çggy
;

417 
EXPECT_CALL
(
Çggy
, 
DoThis
());

418 
	gÇggy
.
DoThis
();

421 
TEST
(
NaggyMockTe¡
, 
IsNaggyInDe¡ruùÜ
) {

422 cÚ¡ 
	g¡d
::
¡ršg
 
§ved_æag
 = 
GMOCK_FLAG
(
v”bo£
);

423 
GMOCK_FLAG
(
v”bo£
) = "warning";

424 
C­tu»Stdout
();

427 
	gNaggyMock
<
	gC®lsMockM‘hodInDe¡ruùÜ
> 
	gÇggy_Ú_de¡roy
;

431 
EXPECT_THAT
(
G‘C­tu»dStdout
(),

432 
HasSub¡r
("Uninteresting mock function call"));

434 
GMOCK_FLAG
(
v”bo£
èğ
§ved_æag
;

437 
TEST
(
NaggyMockTe¡
, 
IsNaggy_IsNiû_IsSŒiù
) {

438 
	gNaggyMock
<
	gMockFoo
> 
	gÇggy_foo
;

439 
EXPECT_TRUE
(
Mock
::
IsNaggy
(&
Çggy_foo
));

440 
EXPECT_FALSE
(
Mock
::
IsNiû
(&
Çggy_foo
));

441 
EXPECT_FALSE
(
Mock
::
IsSŒiù
(&
Çggy_foo
));

445 
TEST
(
SŒiùMockTe¡
, 
AÎowsEx³ùedC®l
) {

446 
	gSŒiùMock
<
	gMockFoo
> 
	g¡riù_foo
;

448 
EXPECT_CALL
(
¡riù_foo
, 
DoThis
());

449 
	g¡riù_foo
.
DoThis
();

453 
TEST
(
SŒiùMockTe¡
, 
UÃx³ùedC®lFas
) {

454 
	gSŒiùMock
<
	gMockFoo
> 
	g¡riù_foo
;

456 
EXPECT_CALL
(
¡riù_foo
, 
DoThis
()).
Times
(0);

457 
EXPECT_NONFATAL_FAILURE
(
¡riù_foo
.
DoThis
(),

462 
TEST
(
SŒiùMockTe¡
, 
Unš‹»¡šgC®lFas
) {

463 
	gSŒiùMock
<
	gMockFoo
> 
	g¡riù_foo
;

465 
EXPECT_NONFATAL_FAILURE
(
¡riù_foo
.
DoThis
(),

471 
TEST
(
SŒiùMockTe¡
, 
Unš‹»¡šgC®lFasAá”D—th
) {

472 
	gSŒiùMock
<
	gMockFoo
>* cÚ¡ 
	g¡riù_foo
 = 
Ãw
 
SŒiùMock
<
MockFoo
>;

474 
ON_CALL
(*
¡riù_foo
, 
DoThis
())

475 .
WlByDeçuÉ
(
Invoke
(
¡riù_foo
, &
MockFoo
::
D–‘e
));

477 
EXPECT_NONFATAL_FAILURE
(
¡riù_foo
->
DoThis
(),

483 
TEST
(
SŒiùMockTe¡
, 
NÚDeçuÉCÚ¡ruùÜ
) {

484 
	gSŒiùMock
<
	gMockB¬
> 
¡riù_b¬
("hi");

485 
EXPECT_EQ
("hi", 
¡riù_b¬
.
¡r
());

487 
EXPECT_NONFATAL_FAILURE
(
¡riù_b¬
.
Th©
(5, 
Œue
),

493 
TEST
(
SŒiùMockTe¡
, 
NÚDeçuÉCÚ¡ruùÜ10
) {

494 
	gSŒiùMock
<
	gMockB¬
> 
¡riù_b¬
('a', 'b', "c", "d", 'e', 'f',

495 "g", "h", 
Œue
, 
çl£
);

496 
EXPECT_EQ
("abcdefghTF", 
¡riù_b¬
.
¡r
());

498 
EXPECT_NONFATAL_FAILURE
(
¡riù_b¬
.
Th©
(5, 
Œue
),

502 
TEST
(
SŒiùMockTe¡
, 
AÎowL—k
) {

503 
	gSŒiùMock
<
	gMockFoo
>* 
	gËaked
 = 
Ãw
 
SŒiùMock
<
MockFoo
>;

504 
	gMock
::
AÎowL—k
(
Ëaked
);

505 
EXPECT_CALL
(*
Ëaked
, 
DoThis
());

506 
	gËaked
->
DoThis
();

509 
TEST
(
SŒiùMockTe¡
, 
MoveOÆyCÚ¡ruùÜ
) {

510 
	gSŒiùMock
<
	gMockBaz
> 
¡riù_baz
(
MockBaz
::
MoveOÆy
{});

515 
TEST
(
SŒiùMockTe¡
, 
Acû±sCÏssNamedMock
) {

516 
	gSŒiùMock
< ::
Mock
> 
¡riù
;

517 
EXPECT_CALL
(
¡riù
, 
DoThis
());

518 
	g¡riù
.
DoThis
();

521 
TEST
(
SŒiùMockTe¡
, 
IsSŒiùInDe¡ruùÜ
) {

522 
EXPECT_NONFATAL_FAILURE
(

524 
SŒiùMock
<
C®lsMockM‘hodInDe¡ruùÜ
> 
¡riù_Ú_de¡roy
;

531 
TEST
(
SŒiùMockTe¡
, 
IsNaggy_IsNiû_IsSŒiù
) {

532 
	gSŒiùMock
<
	gMockFoo
> 
	g¡riù_foo
;

533 
EXPECT_FALSE
(
Mock
::
IsNaggy
(&
¡riù_foo
));

534 
EXPECT_FALSE
(
Mock
::
IsNiû
(&
¡riù_foo
));

535 
EXPECT_TRUE
(
Mock
::
IsSŒiù
(&
¡riù_foo
));

	@third_party/googletest/googlemock/test/gmock-port_test.cc

35 
	~"gmock/š‹º®/gmock-pÜt.h
"

36 
	~"g‹¡/g‹¡.h
"

42 
	$TEST
(
DummyTe¡
, 
Dummy
è{
	}
}

	@third_party/googletest/googlemock/test/gmock-pp-string_test.cc

33 
	~"gmock/š‹º®/gmock-µ.h
"

35 
	~<¡ršg
>

37 
	~"gmock/gmock.h
"

39 
Çme¥aû
 
	g‹¡šg
 {

40 
	gÇme¥aû
 {

44 ::
‹¡šg
::
M©ch”
<cÚ¡ 
¡d
::
¡ršg
&> 
SameExû±S·ûs
(cÚ¡ std::¡ršg& 
s
) {

45 autØ
»move_¥aûs
 = [](
¡d
::
¡ršg
 
to_¥l™
) {

46 
to_¥l™
.
”a£
(
¡d
::
»move
Ño_¥l™.
begš
(),o_¥l™.
’d
(), ' '),

47 
to_¥l™
.
’d
());

48  
	gto_¥l™
;

50  ::
‹¡šg
::
ResuÉOf
(
»move_¥aûs
,„emove_¥aûs(
s
));

56 
	#EXPECT_EXPANSION
(
ResuÉ
, 
Maüo
) \

57 
	`EXPECT_THAT
("" 
	`GMOCK_PP_STRINGIZE
(
Maüo
), 
	`SameExû±S·ûs
(
ResuÉ
))

	)

59 
TEST
(
Maüos
, 
C©
) {

60 
EXPECT_EXPANSION
("14", 
GMOCK_PP_CAT
(1, 4));

61 
EXPECT_EXPANSION
("+=", 
GMOCK_PP_CAT
(+, =));

64 
TEST
(
Maüos
, 
N¬g
) {

65 
EXPECT_EXPANSION
("1", 
GMOCK_PP_NARG
());

66 
EXPECT_EXPANSION
("1", 
GMOCK_PP_NARG
(
x
));

67 
EXPECT_EXPANSION
("2", 
GMOCK_PP_NARG
(
x
, 
y
));

68 
EXPECT_EXPANSION
("3", 
GMOCK_PP_NARG
(
x
, 
y
, 
z
));

69 
EXPECT_EXPANSION
("4", 
GMOCK_PP_NARG
(
x
, 
y
, 
z
, 
w
));

71 
EXPECT_EXPANSION
("0", 
GMOCK_PP_NARG0
());

72 
EXPECT_EXPANSION
("1", 
GMOCK_PP_NARG0
(
x
));

73 
EXPECT_EXPANSION
("2", 
GMOCK_PP_NARG0
(
x
, 
y
));

76 
TEST
(
Maüos
, 
Comma
) {

77 
EXPECT_EXPANSION
("0", 
GMOCK_PP_HAS_COMMA
());

78 
EXPECT_EXPANSION
("1", 
GMOCK_PP_HAS_COMMA
(, ));

79 
EXPECT_EXPANSION
("0", 
GMOCK_PP_HAS_COMMA
((, )));

82 
TEST
(
Maüos
, 
IsEm±y
) {

83 
EXPECT_EXPANSION
("1", 
GMOCK_PP_IS_EMPTY
());

84 
EXPECT_EXPANSION
("0", 
GMOCK_PP_IS_EMPTY
(, ));

85 
EXPECT_EXPANSION
("0", 
GMOCK_PP_IS_EMPTY
(
a
));

86 
EXPECT_EXPANSION
("0", 
GMOCK_PP_IS_EMPTY
(()));

88 
	#GMOCK_PP_INTERNAL_IS_EMPTY_TEST_1


	)

89 
EXPECT_EXPANSION
("1", 
GMOCK_PP_IS_EMPTY
(
GMOCK_PP_INTERNAL_IS_EMPTY_TEST_1
));

92 
TEST
(
Maüos
, 
If
) {

93 
EXPECT_EXPANSION
("1", 
GMOCK_PP_IF
(1, 1, 2));

94 
EXPECT_EXPANSION
("2", 
GMOCK_PP_IF
(0, 1, 2));

97 
TEST
(
Maüos
, 
H—dTa
) {

98 
EXPECT_EXPANSION
("1", 
GMOCK_PP_HEAD
(1));

99 
EXPECT_EXPANSION
("1", 
GMOCK_PP_HEAD
(1, 2));

100 
EXPECT_EXPANSION
("1", 
GMOCK_PP_HEAD
(1, 2, 3));

102 
EXPECT_EXPANSION
("", 
GMOCK_PP_TAIL
(1));

103 
EXPECT_EXPANSION
("2", 
GMOCK_PP_TAIL
(1, 2));

104 
EXPECT_EXPANSION
("2", 
GMOCK_PP_HEAD
(
GMOCK_PP_TAIL
(1, 2, 3)));

107 
TEST
(
Maüos
, 
P¬’the£s
) {

108 
EXPECT_EXPANSION
("0", 
GMOCK_PP_IS_BEGIN_PARENS
(
sss
));

109 
EXPECT_EXPANSION
("0", 
GMOCK_PP_IS_BEGIN_PARENS
(
sss
()));

110 
EXPECT_EXPANSION
("0", 
GMOCK_PP_IS_BEGIN_PARENS
(
sss
() sss));

111 
EXPECT_EXPANSION
("1", 
GMOCK_PP_IS_BEGIN_PARENS
((
sss
)));

112 
EXPECT_EXPANSION
("1", 
GMOCK_PP_IS_BEGIN_PARENS
((
sss
)
ss
));

114 
EXPECT_EXPANSION
("0", 
GMOCK_PP_IS_ENCLOSED_PARENS
(
sss
));

115 
EXPECT_EXPANSION
("0", 
GMOCK_PP_IS_ENCLOSED_PARENS
(
sss
()));

116 
EXPECT_EXPANSION
("0", 
GMOCK_PP_IS_ENCLOSED_PARENS
(
sss
() sss));

117 
EXPECT_EXPANSION
("1", 
GMOCK_PP_IS_ENCLOSED_PARENS
((
sss
)));

118 
EXPECT_EXPANSION
("0", 
GMOCK_PP_IS_ENCLOSED_PARENS
((
sss
)
ss
));

120 
EXPECT_EXPANSION
("1 + 1", 
GMOCK_PP_REMOVE_PARENS
((1 + 1)));

123 
TEST
(
Maüos
, 
Inüem’t
) {

124 
EXPECT_EXPANSION
("1", 
GMOCK_PP_INC
(0));

125 
EXPECT_EXPANSION
("2", 
GMOCK_PP_INC
(1));

126 
EXPECT_EXPANSION
("3", 
GMOCK_PP_INC
(2));

127 
EXPECT_EXPANSION
("4", 
GMOCK_PP_INC
(3));

128 
EXPECT_EXPANSION
("5", 
GMOCK_PP_INC
(4));

130 
EXPECT_EXPANSION
("16", 
GMOCK_PP_INC
(15));

133 
	#JOINER_CAT
(
a
, 
b
èa##
	)
b

134 
	#JOINER
(
_N
, 
_D©a
, 
_EËm
è
	`JOINER_CAT
(_D©a, _Nèğ
	)
_Elem

136 
TEST
(
Maüos
, 
R•—t
) {

137 
EXPECT_EXPANSION
("", 
GMOCK_PP_REPEAT
(
JOINER
, 
X
, 0));

138 
EXPECT_EXPANSION
("X0=", 
GMOCK_PP_REPEAT
(
JOINER
, 
X
, 1));

139 
EXPECT_EXPANSION
("X0ğX1=", 
GMOCK_PP_REPEAT
(
JOINER
, 
X
, 2));

140 
EXPECT_EXPANSION
("X0ğX1ğX2=", 
GMOCK_PP_REPEAT
(
JOINER
, 
X
, 3));

141 
EXPECT_EXPANSION
("X0ğX1ğX2ğX3=", 
GMOCK_PP_REPEAT
(
JOINER
, 
X
, 4));

142 
EXPECT_EXPANSION
("X0ğX1ğX2ğX3ğX4=", 
GMOCK_PP_REPEAT
(
JOINER
, 
X
, 5));

143 
EXPECT_EXPANSION
("X0ğX1ğX2ğX3ğX4ğX5=", 
GMOCK_PP_REPEAT
(
JOINER
, 
X
, 6));

144 
EXPECT_EXPANSION
("X0= X1= X2= X3= X4= X5= X6=",

145 
GMOCK_PP_REPEAT
(
JOINER
, 
X
, 7));

146 
EXPECT_EXPANSION
("X0= X1= X2= X3= X4= X5= X6= X7=",

147 
GMOCK_PP_REPEAT
(
JOINER
, 
X
, 8));

148 
EXPECT_EXPANSION
("X0= X1= X2= X3= X4= X5= X6= X7= X8=",

149 
GMOCK_PP_REPEAT
(
JOINER
, 
X
, 9));

150 
EXPECT_EXPANSION
("X0= X1= X2= X3= X4= X5= X6= X7= X8= X9=",

151 
GMOCK_PP_REPEAT
(
JOINER
, 
X
, 10));

152 
EXPECT_EXPANSION
("X0= X1= X2= X3= X4= X5= X6= X7= X8= X9= X10=",

153 
GMOCK_PP_REPEAT
(
JOINER
, 
X
, 11));

154 
EXPECT_EXPANSION
("X0= X1= X2= X3= X4= X5= X6= X7= X8= X9= X10= X11=",

155 
GMOCK_PP_REPEAT
(
JOINER
, 
X
, 12));

156 
EXPECT_EXPANSION
("X0= X1= X2= X3= X4= X5= X6= X7= X8= X9= X10= X11= X12=",

157 
GMOCK_PP_REPEAT
(
JOINER
, 
X
, 13));

158 
EXPECT_EXPANSION
(

160 
GMOCK_PP_REPEAT
(
JOINER
, 
X
, 14));

161 
EXPECT_EXPANSION
(

163 
GMOCK_PP_REPEAT
(
JOINER
, 
X
, 15));

165 
TEST
(
Maüos
, 
FÜEach
) {

166 
EXPECT_EXPANSION
("", 
GMOCK_PP_FOR_EACH
(
JOINER
, 
X
, ()));

167 
EXPECT_EXPANSION
("X0÷", 
GMOCK_PP_FOR_EACH
(
JOINER
, 
X
, (
a
)));

168 
EXPECT_EXPANSION
("X0÷ X1=b", 
GMOCK_PP_FOR_EACH
(
JOINER
, 
X
, (
a
, 
b
)));

169 
EXPECT_EXPANSION
("X0÷ X1=b X2=c", 
GMOCK_PP_FOR_EACH
(
JOINER
, 
X
, (
a
, 
b
, 
c
)));

170 
EXPECT_EXPANSION
("X0=a X1=b X2=c X3=d",

171 
GMOCK_PP_FOR_EACH
(
JOINER
, 
X
, (
a
, 
b
, 
c
, 
d
)));

172 
EXPECT_EXPANSION
("X0=a X1=b X2=c X3=d X4=e",

173 
GMOCK_PP_FOR_EACH
(
JOINER
, 
X
, (
a
, 
b
, 
c
, 
d
, 
e
)));

174 
EXPECT_EXPANSION
("X0=a X1=b X2=c X3=d X4=e X5=f",

175 
GMOCK_PP_FOR_EACH
(
JOINER
, 
X
, (
a
, 
b
, 
c
, 
d
, 
e
, 
f
)));

176 
EXPECT_EXPANSION
("X0=a X1=b X2=c X3=d X4=e X5=f X6=g",

177 
GMOCK_PP_FOR_EACH
(
JOINER
, 
X
, (
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
)));

178 
EXPECT_EXPANSION
("X0=a X1=b X2=c X3=d X4=e X5=f X6=g X7=h",

179 
GMOCK_PP_FOR_EACH
(
JOINER
, 
X
, (
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
, 
h
)));

180 
EXPECT_EXPANSION
("X0=a X1=b X2=c X3=d X4=e X5=f X6=g X7=h X8=i",

181 
GMOCK_PP_FOR_EACH
(
JOINER
, 
X
, (
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
, 
h
, 
i
)));

182 
EXPECT_EXPANSION
(

184 
GMOCK_PP_FOR_EACH
(
JOINER
, 
X
, (
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
, 
h
, 
i
, 
j
)));

185 
EXPECT_EXPANSION
(

187 
GMOCK_PP_FOR_EACH
(
JOINER
, 
X
, (
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
, 
h
, 
i
, 
j
, 
k
)));

188 
EXPECT_EXPANSION
(

190 
GMOCK_PP_FOR_EACH
(
JOINER
, 
X
, (
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
, 
h
, 
i
, 
j
, 
k
, 
l
)));

191 
EXPECT_EXPANSION
(

193 
GMOCK_PP_FOR_EACH
(
JOINER
, 
X
, (
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
, 
h
, 
i
, 
j
, 
k
, 
l
, 
m
)));

194 
EXPECT_EXPANSION
(

197 
GMOCK_PP_FOR_EACH
(
JOINER
, 
X
, (
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
, 
h
, 
i
, 
j
, 
k
, 
l
, 
m
, 
n
)));

198 
EXPECT_EXPANSION
(

201 
GMOCK_PP_FOR_EACH
(
JOINER
, 
X
,

202 (
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
, 
h
, 
i
, 
j
, 
k
, 
l
, 
m
, 
n
, 
o
)));

	@third_party/googletest/googlemock/test/gmock-pp_test.cc

1 
	~"gmock/š‹º®/gmock-µ.h
"

4 
	#GMOCK_TEST_REPLACE_comma_WITH_COMMA_I_comma
 ,

	)

5 
	#GMOCK_TEST_REPLACE_comma_WITH_COMMA
(
x
) \

6 
	`GMOCK_PP_CAT
(
GMOCK_TEST_REPLACE_comma_WITH_COMMA_I_
, 
x
)

	)

9 
Çme¥aû
 
	g‹¡šg
 {

10 
Çme¥aû
 
	gš‹º®
 {

11 
Çme¥aû
 
	ggmockµ
 {

13 
¡©ic_as£¹
(
GMOCK_PP_CAT
(1, 4) == 14, "");

14 
¡©ic_as£¹
(
GMOCK_PP_INTERNAL_INTERNAL_16TH
(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11,

17 
¡©ic_as£¹
(
GMOCK_PP_NARG
() == 1, "");

18 
¡©ic_as£¹
(
GMOCK_PP_NARG
(
x
) == 1, "");

19 
¡©ic_as£¹
(
GMOCK_PP_NARG
(
x
, 
y
) == 2, "");

20 
¡©ic_as£¹
(
GMOCK_PP_NARG
(
x
, 
y
, 
z
) == 3, "");

21 
¡©ic_as£¹
(
GMOCK_PP_NARG
(
x
, 
y
, 
z
, 
w
) == 4, "");

22 
¡©ic_as£¹
(!
GMOCK_PP_HAS_COMMA
(), "");

23 
¡©ic_as£¹
(
GMOCK_PP_HAS_COMMA
(
b
, ), "");

24 
¡©ic_as£¹
(!
GMOCK_PP_HAS_COMMA
((, )), "");

25 
¡©ic_as£¹
(
GMOCK_PP_HAS_COMMA
(
GMOCK_TEST_REPLACE_comma_WITH_COMMA
(
comma
)),

27 
¡©ic_as£¹
(

28 
GMOCK_PP_HAS_COMMA
(
GMOCK_TEST_REPLACE_comma_WITH_COMMA
(
comma
(
uÄ–©ed
))),

30 
¡©ic_as£¹
(!
GMOCK_PP_IS_EMPTY
(, ), "");

31 
¡©ic_as£¹
(!
GMOCK_PP_IS_EMPTY
(
a
), "");

32 
¡©ic_as£¹
(!
GMOCK_PP_IS_EMPTY
(()), "");

33 
¡©ic_as£¹
(
GMOCK_PP_IF
(1, 1, 2) == 1, "");

34 
¡©ic_as£¹
(
GMOCK_PP_IF
(0, 1, 2) == 2, "");

35 
¡©ic_as£¹
(
GMOCK_PP_NARG0
(
x
) == 1, "");

36 
¡©ic_as£¹
(
GMOCK_PP_NARG0
(
x
, 
y
) == 2, "");

37 
¡©ic_as£¹
(
GMOCK_PP_HEAD
(1) == 1, "");

38 
¡©ic_as£¹
(
GMOCK_PP_HEAD
(1, 2) == 1, "");

39 
¡©ic_as£¹
(
GMOCK_PP_HEAD
(1, 2, 3) == 1, "");

40 
¡©ic_as£¹
(
GMOCK_PP_TAIL
(1, 2) == 2, "");

41 
¡©ic_as£¹
(
GMOCK_PP_HEAD
(
GMOCK_PP_TAIL
(1, 2, 3)) == 2, "");

42 
¡©ic_as£¹
(!
GMOCK_PP_IS_BEGIN_PARENS
(
sss
), "");

43 
¡©ic_as£¹
(!
GMOCK_PP_IS_BEGIN_PARENS
(
sss
()), "");

44 
¡©ic_as£¹
(!
GMOCK_PP_IS_BEGIN_PARENS
(
sss
() sss), "");

45 
¡©ic_as£¹
(
GMOCK_PP_IS_BEGIN_PARENS
((
sss
)), "");

46 
¡©ic_as£¹
(
GMOCK_PP_IS_BEGIN_PARENS
((
sss
)
ss
), "");

47 
¡©ic_as£¹
(!
GMOCK_PP_IS_ENCLOSED_PARENS
(
sss
), "");

48 
¡©ic_as£¹
(!
GMOCK_PP_IS_ENCLOSED_PARENS
(
sss
()), "");

49 
¡©ic_as£¹
(!
GMOCK_PP_IS_ENCLOSED_PARENS
(
sss
() sss), "");

50 
¡©ic_as£¹
(!
GMOCK_PP_IS_ENCLOSED_PARENS
((
sss
)
ss
), "");

51 
¡©ic_as£¹
(
GMOCK_PP_REMOVE_PARENS
((1 + 1)) * 2 == 3, "");

52 
¡©ic_as£¹
(
GMOCK_PP_INC
(4) == 5, "");

54 
	g‹m¶©e
 <
	gşass
... 
	gArgs
>

55 
	sTe¡
 {

56 
cÚ¡ex´
 
	gkArgs
 = ...(
Args
);

58 
	#GMOCK_PP_INTERNAL_TYPE_TEST
(
_i
, 
_D©a
, 
_–em’t
) \

59 
	`GMOCK_PP_COMMA_IF
(
_i
è
_–em’t


	)

60 
¡©ic_as£¹
(
Te¡
<
GMOCK_PP_FOR_EACH
(
GMOCK_PP_INTERNAL_TYPE_TEST
, ~,

61 (, , , ))>::
kArgs
 == 4,

63 
	#GMOCK_PP_INTERNAL_VAR_TEST_1
(
_x
è1

	)

64 
	#GMOCK_PP_INTERNAL_VAR_TEST_2
(
_x
, 
_y
è2

	)

65 
	#GMOCK_PP_INTERNAL_VAR_TEST_3
(
_x
, 
_y
, 
_z
è3

	)

67 
	#GMOCK_PP_INTERNAL_VAR_TEST
(...) \

68 
	`GMOCK_PP_VARIADIC_CALL
(
GMOCK_PP_INTERNAL_VAR_TEST_
, 
__VA_ARGS__
)

	)

69 
¡©ic_as£¹
(
GMOCK_PP_INTERNAL_VAR_TEST
(
x
, 
y
) == 2, "");

70 
¡©ic_as£¹
(
GMOCK_PP_INTERNAL_VAR_TEST
(
sly
) == 1, "");

71 
¡©ic_as£¹
(
GMOCK_PP_INTERNAL_VAR_TEST
(
x
, 
y
, 
z
) == 3, "");

74 
	#GMOCK_PP_INTERNAL_IS_EMPTY_TEST_1


	)

75 
¡©ic_as£¹
(
GMOCK_PP_IS_EMPTY
(
GMOCK_PP_INTERNAL_IS_EMPTY_TEST_1
), "");

76 
¡©ic_as£¹
(
GMOCK_PP_IS_EMPTY
(), "");

77 
¡©ic_as£¹
(
GMOCK_PP_IS_ENCLOSED_PARENS
((
sss
)), "");

78 
¡©ic_as£¹
(
GMOCK_PP_IS_EMPTY
(
GMOCK_PP_TAIL
(1)), "");

79 
¡©ic_as£¹
(
GMOCK_PP_NARG0
() == 0, "");

	@third_party/googletest/googlemock/test/gmock-spec-builders_test.cc

35 
	~"gmock/gmock-¥ec-bud”s.h
"

37 
	~<memÜy
>

38 
	~<o¡»am
>

39 
	~<s¡»am
>

40 
	~<¡ršg
>

42 
	~"gmock/gmock.h
"

43 
	~"gmock/š‹º®/gmock-pÜt.h
"

44 
	~"g‹¡/g‹¡.h
"

45 
	~"g‹¡/g‹¡-¥i.h
"

46 
	~"g‹¡/š‹º®/g‹¡-pÜt.h
"

48 
Çme¥aû
 
	g‹¡šg
 {

49 
Çme¥aû
 
	gš‹º®
 {

52 şas 
	cEx³ù©iÚTe¡”
 {

53 
	gpublic
:

55 
S‘C®lCouÁ
(
n
, 
Ex³ù©iÚBa£
* 
exp
) {

56 
	gexp
->
	gÿÎ_couÁ_
 = 
n
;

63 
	gÇme¥aû
 {

65 
usšg
 
	g‹¡šg
::
_
;

66 
usšg
 
	g‹¡šg
::
AnyNumb”
;

67 
usšg
 
	g‹¡šg
::
AtL—¡
;

68 
usšg
 
	g‹¡šg
::
AtMo¡
;

69 
usšg
 
	g‹¡šg
::
B‘w“n
;

70 
usšg
 
	g‹¡šg
::
C¬dš®™y
;

71 
usšg
 
	g‹¡šg
::
C¬dš®™yIÁ”çû
;

72 
usšg
 
	g‹¡šg
::
CÚ¡
;

73 
usšg
 
	g‹¡šg
::
CÚšsRegex
;

74 
usšg
 
	g‹¡šg
::
DoAÎ
;

75 
usšg
 
	g‹¡šg
::
DoDeçuÉ
;

76 
usšg
 
	g‹¡šg
::
Eq
;

77 
usšg
 
	g‹¡šg
::
Ex³ù©iÚ
;

78 
usšg
 
	g‹¡šg
::
Ex³ù©iÚS‘
;

79 
usšg
 
	g‹¡šg
::
GMOCK_FLAG
(
v”bo£
);

80 
usšg
 
	g‹¡šg
::
Gt
;

81 
usšg
 
	g‹¡šg
::
IgnÜeResuÉ
;

82 
usšg
 
	g‹¡šg
::
InSequ’û
;

83 
usšg
 
	g‹¡šg
::
Invoke
;

84 
usšg
 
	g‹¡šg
::
InvokeW™houtArgs
;

85 
usšg
 
	g‹¡šg
::
IsNÙSub¡ršg
;

86 
usšg
 
	g‹¡šg
::
IsSub¡ršg
;

87 
usšg
 
	g‹¡šg
::
Lt
;

88 
usšg
 
	g‹¡šg
::
Mes§ge
;

89 
usšg
 
	g‹¡šg
::
Mock
;

90 
usšg
 
	g‹¡šg
::
NaggyMock
;

91 
usšg
 
	g‹¡šg
::
Ne
;

92 
usšg
 
	g‹¡šg
::
R‘uº
;

93 
usšg
 
	g‹¡šg
::
SaveArg
;

94 
usšg
 
	g‹¡šg
::
Sequ’û
;

95 
usšg
 
	g‹¡šg
::
S‘ArgPoš‹e
;

96 
usšg
 
	g‹¡šg
::
š‹º®
::
Ex³ù©iÚTe¡”
;

97 
usšg
 
	g‹¡šg
::
š‹º®
::
FÜm©FeLoÿtiÚ
;

98 
usšg
 
	g‹¡šg
::
š‹º®
::
kAÎow
;

99 
usšg
 
	g‹¡šg
::
š‹º®
::
kE¼ÜV”bos™y
;

100 
usšg
 
	g‹¡šg
::
š‹º®
::
kFa
;

101 
usšg
 
	g‹¡šg
::
š‹º®
::
kInfoV”bos™y
;

102 
usšg
 
	g‹¡šg
::
š‹º®
::
kW¬n
;

103 
usšg
 
	g‹¡šg
::
š‹º®
::
kW¬nšgV”bos™y
;

105 #ià
GTEST_HAS_STREAM_REDIRECTION


106 
usšg
 
	g‹¡šg
::
HasSub¡r
;

107 
usšg
 
	g‹¡šg
::
š‹º®
::
C­tu»Stdout
;

108 
usšg
 
	g‹¡šg
::
š‹º®
::
G‘C­tu»dStdout
;

111 
şass
 
	gIncom¶‘e
;

113 şas 
	cMockIncom¶‘e
 {

114 
	gpublic
:

117 
MOCK_METHOD1
(
ByRefFunc
, (cÚ¡ 
Incom¶‘e
& 
x
));

121 
PrštTo
(cÚ¡ 
Incom¶‘e
& 
x
, ::
¡d
::
o¡»am
* 
os
);

123 
	$TEST
(
MockM‘hodTe¡
, 
CªIn¡ªtŸ‹W™hIncom¶‘eArgTy³
) {

128 
MockIncom¶‘e
 
šcom¶‘e
;

129 
	`EXPECT_CALL
(
šcom¶‘e
, 
	`ByRefFunc
(
_
))

130 .
	`Times
(
	`AnyNumb”
());

131 
	}
}

135 
	$PrštTo
(cÚ¡ 
Incom¶‘e
& , ::
¡d
::
o¡»am
* 
os
) {

136 *
os
 << "incomplete";

137 
	}
}

139 şas 
	cResuÉ
 {};

142 şas 
	cNÚDeçuÉCÚ¡ruùibË
 {

143 
	gpublic
:

144 
ex¶ic™
 
NÚDeçuÉCÚ¡ruùibË
() {}

147 şas 
	cMockA
 {

148 
	gpublic
:

149 
MockA
() {}

151 
MOCK_METHOD1
(
DoA
, (
n
));

152 
MOCK_METHOD1
(
R‘uºResuÉ
, 
ResuÉ
(
n
));

153 
MOCK_METHOD0
(
R‘uºNÚDeçuÉCÚ¡ruùibË
, 
NÚDeçuÉCÚ¡ruùibË
());

154 
MOCK_METHOD2
(
Bš¬y
, 
boŞ
(
x
, 
y
));

155 
MOCK_METHOD2
(
R‘uºIÁ
, (
x
, 
y
));

157 
	g´iv©e
:

158 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
MockA
);

161 şas 
	cMockB
 {

162 
	gpublic
:

163 
MockB
() {}

165 
MOCK_CONST_METHOD0
(
DoB
, ());

166 
MOCK_METHOD1
(
DoB
, (
n
));

168 
	g´iv©e
:

169 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
MockB
);

172 şas 
	cReã»nûHŞdšgMock
 {

173 
	gpublic
:

174 
Reã»nûHŞdšgMock
() {}

176 
MOCK_METHOD1
(
Acû±Reã»nû
, (
¡d
::
sh¬ed_±r
<
MockA
>*));

178 
	g´iv©e
:

179 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
Reã»nûHŞdšgMock
);

187 
	#M‘hod
 
M‘hodW


	)

189 şas 
	cCC
 {

190 
	gpublic
:

191 
vœtu®
 ~
CC
() {}

192 
vœtu®
 
M‘hod
() = 0;

194 şas 
	cMockCC
 : 
public
 
CC
 {

195 
public
:

196 
MockCC
() {}

198 
MOCK_METHOD0
(
M‘hod
, ());

200 
	g´iv©e
:

201 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
MockCC
);

205 
	$TEST
(
OnC®lSyÁaxTe¡
, 
CompesW™hM‘hodNameEx·ndedFromMaüo
) {

206 
MockCC
 
cc
;

207 
	`ON_CALL
(
cc
, 
	`M‘hod
());

208 
	}
}

212 
	$TEST
(
OnC®lSyÁaxTe¡
, 
WÜksW™hM‘hodNameEx·ndedFromMaüo
) {

213 
MockCC
 
cc
;

214 
	`ON_CALL
(
cc
, 
	`M‘hod
()).
	`WlByDeçuÉ
(
	`R‘uº
(42));

215 
	`EXPECT_EQ
(42, 
cc
.
	`M‘hod
());

216 
	}
}

219 
	$TEST
(
Ex³ùC®lSyÁaxTe¡
, 
CompesW™hM‘hodNameEx·ndedFromMaüo
) {

220 
MockCC
 
cc
;

221 
	`EXPECT_CALL
(
cc
, 
	`M‘hod
());

222 
cc
.
	`M‘hod
();

223 
	}
}

226 
	$TEST
(
Ex³ùC®lSyÁaxTe¡
, 
WÜksW™hM‘hodNameEx·ndedFromMaüo
) {

227 
MockCC
 
cc
;

228 
	`EXPECT_CALL
(
cc
, 
	`M‘hod
()).
	`WlOnû
(
	`R‘uº
(42));

229 
	`EXPECT_EQ
(42, 
cc
.
	`M‘hod
());

230 
	}
}

232 #undeà
M‘hod


236 
	$TEST
(
OnC®lSyÁaxTe¡
, 
Ev®u©esFœ¡Argum’tOnû
) {

237 
MockA
 
a
;

238 
MockA
* 
·
 = &
a
;

240 
	`ON_CALL
(*
·
++, 
	`DoA
(
_
));

241 
	`EXPECT_EQ
(&
a
 + 1, 
·
);

242 
	}
}

244 
	$TEST
(
OnC®lSyÁaxTe¡
, 
Ev®u©esSecÚdArgum’tOnû
) {

245 
MockA
 
a
;

246 
n
 = 0;

248 
	`ON_CALL
(
a
, 
	`DoA
(
n
++));

249 
	`EXPECT_EQ
(1, 
n
);

250 
	}
}

254 
	$TEST
(
OnC®lSyÁaxTe¡
, 
W™hIsO±iÚ®
) {

255 
MockA
 
a
;

257 
	`ON_CALL
(
a
, 
	`DoA
(5))

258 .
	`WlByDeçuÉ
(
	`R‘uº
());

259 
	`ON_CALL
(
a
, 
	`DoA
(
_
))

260 .
	`W™h
(
_
)

261 .
	`WlByDeçuÉ
(
	`R‘uº
());

262 
	}
}

264 
	$TEST
(
OnC®lSyÁaxTe¡
, 
W™hCªAµ—rAtMo¡Onû
) {

265 
MockA
 
a
;

267 
	`EXPECT_NONFATAL_FAILURE
({

268 
	`ON_CALL
(
a
, 
	`R‘uºResuÉ
(
_
))

269 .
	`W™h
(
_
)

270 .
	`W™h
(
_
)

271 .
	`WlByDeçuÉ
(
	`R‘uº
(
	`ResuÉ
()));

273 
	}
}

275 
	$TEST
(
OnC®lSyÁaxTe¡
, 
WlByDeçuÉIsMªd©Üy
) {

276 
MockA
 
a
;

278 
	`EXPECT_DEATH_IF_SUPPORTED
({

279 
	`ON_CALL
(
a
, 
	`DoA
(5));

280 
a
.
	`DoA
(5);

282 
	}
}

284 
	$TEST
(
OnC®lSyÁaxTe¡
, 
WlByDeçuÉCªAµ—rAtMo¡Onû
) {

285 
MockA
 
a
;

287 
	`EXPECT_NONFATAL_FAILURE
({

288 
	`ON_CALL
(
a
, 
	`DoA
(5))

289 .
	`WlByDeçuÉ
(
	`R‘uº
())

290 .
	`WlByDeçuÉ
(
	`R‘uº
());

292 
	}
}

296 
	$TEST
(
Ex³ùC®lSyÁaxTe¡
, 
Ev®u©esFœ¡Argum’tOnû
) {

297 
MockA
 
a
;

298 
MockA
* 
·
 = &
a
;

300 
	`EXPECT_CALL
(*
·
++, 
	`DoA
(
_
));

301 
a
.
	`DoA
(0);

302 
	`EXPECT_EQ
(&
a
 + 1, 
·
);

303 
	}
}

305 
	$TEST
(
Ex³ùC®lSyÁaxTe¡
, 
Ev®u©esSecÚdArgum’tOnû
) {

306 
MockA
 
a
;

307 
n
 = 0;

309 
	`EXPECT_CALL
(
a
, 
	`DoA
(
n
++));

310 
a
.
	`DoA
(0);

311 
	`EXPECT_EQ
(1, 
n
);

312 
	}
}

316 
	$TEST
(
Ex³ùC®lSyÁaxTe¡
, 
W™hIsO±iÚ®
) {

317 
MockA
 
a
;

319 
	`EXPECT_CALL
(
a
, 
	`DoA
(5))

320 .
	`Times
(0);

321 
	`EXPECT_CALL
(
a
, 
	`DoA
(6))

322 .
	`W™h
(
_
)

323 .
	`Times
(0);

324 
	}
}

326 
	$TEST
(
Ex³ùC®lSyÁaxTe¡
, 
W™hCªAµ—rAtMo¡Onû
) {

327 
MockA
 
a
;

329 
	`EXPECT_NONFATAL_FAILURE
({

330 
	`EXPECT_CALL
(
a
, 
	`DoA
(6))

331 .
	`W™h
(
_
)

332 .
	`W™h
(
_
);

335 
a
.
	`DoA
(6);

336 
	}
}

338 
	$TEST
(
Ex³ùC®lSyÁaxTe¡
, 
W™hMu¡BeFœ¡CÏu£
) {

339 
MockA
 
a
;

341 
	`EXPECT_NONFATAL_FAILURE
({

342 
	`EXPECT_CALL
(
a
, 
	`DoA
(1))

343 .
	`Times
(1)

344 .
	`W™h
(
_
);

347 
a
.
	`DoA
(1);

349 
	`EXPECT_NONFATAL_FAILURE
({

350 
	`EXPECT_CALL
(
a
, 
	`DoA
(2))

351 .
	`WlOnû
(
	`R‘uº
())

352 .
	`W™h
(
_
);

355 
a
.
	`DoA
(2);

356 
	}
}

358 
	$TEST
(
Ex³ùC®lSyÁaxTe¡
, 
TimesCªBeInã¼ed
) {

359 
MockA
 
a
;

361 
	`EXPECT_CALL
(
a
, 
	`DoA
(1))

362 .
	`WlOnû
(
	`R‘uº
());

364 
	`EXPECT_CALL
(
a
, 
	`DoA
(2))

365 .
	`WlOnû
(
	`R‘uº
())

366 .
	`WlR•—‹dly
(
	`R‘uº
());

368 
a
.
	`DoA
(1);

369 
a
.
	`DoA
(2);

370 
a
.
	`DoA
(2);

371 
	}
}

373 
	$TEST
(
Ex³ùC®lSyÁaxTe¡
, 
TimesCªAµ—rAtMo¡Onû
) {

374 
MockA
 
a
;

376 
	`EXPECT_NONFATAL_FAILURE
({

377 
	`EXPECT_CALL
(
a
, 
	`DoA
(1))

378 .
	`Times
(1)

379 .
	`Times
(2);

382 
a
.
	`DoA
(1);

383 
a
.
	`DoA
(1);

384 
	}
}

386 
	$TEST
(
Ex³ùC®lSyÁaxTe¡
, 
TimesMu¡BeBefÜeInSequ’û
) {

387 
MockA
 
a
;

388 
Sequ’û
 
s
;

390 
	`EXPECT_NONFATAL_FAILURE
({

391 
	`EXPECT_CALL
(
a
, 
	`DoA
(1))

392 .
	`InSequ’û
(
s
)

393 .
	`Times
(1);

396 
a
.
	`DoA
(1);

397 
	}
}

399 
	$TEST
(
Ex³ùC®lSyÁaxTe¡
, 
InSequ’ûIsO±iÚ®
) {

400 
MockA
 
a
;

401 
Sequ’û
 
s
;

403 
	`EXPECT_CALL
(
a
, 
	`DoA
(1));

404 
	`EXPECT_CALL
(
a
, 
	`DoA
(2))

405 .
	`InSequ’û
(
s
);

407 
a
.
	`DoA
(1);

408 
a
.
	`DoA
(2);

409 
	}
}

411 
	$TEST
(
Ex³ùC®lSyÁaxTe¡
, 
InSequ’ûCªAµ—rMuÉËTimes
) {

412 
MockA
 
a
;

413 
Sequ’û
 
s1
, 
s2
;

415 
	`EXPECT_CALL
(
a
, 
	`DoA
(1))

416 .
	`InSequ’û
(
s1
, 
s2
)

417 .
	`InSequ’û
(
s1
);

419 
a
.
	`DoA
(1);

420 
	}
}

422 
	$TEST
(
Ex³ùC®lSyÁaxTe¡
, 
InSequ’ûMu¡BeBefÜeAá”
) {

423 
MockA
 
a
;

424 
Sequ’û
 
s
;

426 
Ex³ù©iÚ
 
e
 = 
	`EXPECT_CALL
(
a
, 
	`DoA
(1))

427 .
	`Times
(
	`AnyNumb”
());

428 
	`EXPECT_NONFATAL_FAILURE
({

429 
	`EXPECT_CALL
(
a
, 
	`DoA
(2))

430 .
	`Aá”
(
e
)

431 .
	`InSequ’û
(
s
);

434 
a
.
	`DoA
(2);

435 
	}
}

437 
	$TEST
(
Ex³ùC®lSyÁaxTe¡
, 
InSequ’ûMu¡BeBefÜeWlOnû
) {

438 
MockA
 
a
;

439 
Sequ’û
 
s
;

441 
	`EXPECT_NONFATAL_FAILURE
({

442 
	`EXPECT_CALL
(
a
, 
	`DoA
(1))

443 .
	`WlOnû
(
	`R‘uº
())

444 .
	`InSequ’û
(
s
);

447 
a
.
	`DoA
(1);

448 
	}
}

450 
	$TEST
(
Ex³ùC®lSyÁaxTe¡
, 
Aá”Mu¡BeBefÜeWlOnû
) {

451 
MockA
 
a
;

453 
Ex³ù©iÚ
 
e
 = 
	`EXPECT_CALL
(
a
, 
	`DoA
(1));

454 
	`EXPECT_NONFATAL_FAILURE
({

455 
	`EXPECT_CALL
(
a
, 
	`DoA
(2))

456 .
	`WlOnû
(
	`R‘uº
())

457 .
	`Aá”
(
e
);

460 
a
.
	`DoA
(1);

461 
a
.
	`DoA
(2);

462 
	}
}

464 
	$TEST
(
Ex³ùC®lSyÁaxTe¡
, 
WlIsO±iÚ®
) {

465 
MockA
 
a
;

467 
	`EXPECT_CALL
(
a
, 
	`DoA
(1));

468 
	`EXPECT_CALL
(
a
, 
	`DoA
(2))

469 .
	`WlOnû
(
	`R‘uº
());

471 
a
.
	`DoA
(1);

472 
a
.
	`DoA
(2);

473 
	}
}

475 
	$TEST
(
Ex³ùC®lSyÁaxTe¡
, 
WlCªAµ—rMuÉËTimes
) {

476 
MockA
 
a
;

478 
	`EXPECT_CALL
(
a
, 
	`DoA
(1))

479 .
	`Times
(
	`AnyNumb”
())

480 .
	`WlOnû
(
	`R‘uº
())

481 .
	`WlOnû
(
	`R‘uº
())

482 .
	`WlOnû
(
	`R‘uº
());

483 
	}
}

485 
	$TEST
(
Ex³ùC®lSyÁaxTe¡
, 
WlMu¡BeBefÜeWlR•—‹dly
) {

486 
MockA
 
a
;

488 
	`EXPECT_NONFATAL_FAILURE
({

489 
	`EXPECT_CALL
(
a
, 
	`DoA
(1))

490 .
	`WlR•—‹dly
(
	`R‘uº
())

491 .
	`WlOnû
(
	`R‘uº
());

494 
a
.
	`DoA
(1);

495 
	}
}

497 
	$TEST
(
Ex³ùC®lSyÁaxTe¡
, 
WlR•—‹dlyIsO±iÚ®
) {

498 
MockA
 
a
;

500 
	`EXPECT_CALL
(
a
, 
	`DoA
(1))

501 .
	`WlOnû
(
	`R‘uº
());

502 
	`EXPECT_CALL
(
a
, 
	`DoA
(2))

503 .
	`WlOnû
(
	`R‘uº
())

504 .
	`WlR•—‹dly
(
	`R‘uº
());

506 
a
.
	`DoA
(1);

507 
a
.
	`DoA
(2);

508 
a
.
	`DoA
(2);

509 
	}
}

511 
	$TEST
(
Ex³ùC®lSyÁaxTe¡
, 
WlR•—‹dlyCªnÙAµ—rMuÉËTimes
) {

512 
MockA
 
a
;

514 
	`EXPECT_NONFATAL_FAILURE
({

515 
	`EXPECT_CALL
(
a
, 
	`DoA
(1))

516 .
	`WlR•—‹dly
(
	`R‘uº
())

517 .
	`WlR•—‹dly
(
	`R‘uº
());

520 
	}
}

522 
	$TEST
(
Ex³ùC®lSyÁaxTe¡
, 
WlR•—‹dlyMu¡BeBefÜeR‘œesOnS©u¿tiÚ
) {

523 
MockA
 
a
;

525 
	`EXPECT_NONFATAL_FAILURE
({

526 
	`EXPECT_CALL
(
a
, 
	`DoA
(1))

527 .
	`R‘œesOnS©u¿tiÚ
()

528 .
	`WlR•—‹dly
(
	`R‘uº
());

530 
	}
}

532 
	$TEST
(
Ex³ùC®lSyÁaxTe¡
, 
R‘œesOnS©u¿tiÚIsO±iÚ®
) {

533 
MockA
 
a
;

535 
	`EXPECT_CALL
(
a
, 
	`DoA
(1));

536 
	`EXPECT_CALL
(
a
, 
	`DoA
(1))

537 .
	`R‘œesOnS©u¿tiÚ
();

539 
a
.
	`DoA
(1);

540 
a
.
	`DoA
(1);

541 
	}
}

543 
	$TEST
(
Ex³ùC®lSyÁaxTe¡
, 
R‘œesOnS©u¿tiÚCªnÙAµ—rMuÉËTimes
) {

544 
MockA
 
a
;

546 
	`EXPECT_NONFATAL_FAILURE
({

547 
	`EXPECT_CALL
(
a
, 
	`DoA
(1))

548 .
	`R‘œesOnS©u¿tiÚ
()

549 .
	`R‘œesOnS©u¿tiÚ
();

552 
a
.
	`DoA
(1);

553 
	}
}

555 
	$TEST
(
Ex³ùC®lSyÁaxTe¡
, 
DeçuÉC¬dš®™yIsOnû
) {

557 
MockA
 
a
;

558 
	`EXPECT_CALL
(
a
, 
	`DoA
(1));

559 
a
.
	`DoA
(1);

561 
	`EXPECT_NONFATAL_FAILURE
({

562 
MockA
 
a
;

563 
	`EXPECT_CALL
(
a
, 
	`DoA
(1));

565 
	`EXPECT_NONFATAL_FAILURE
({

566 
MockA
 
a
;

567 
	`EXPECT_CALL
(
a
, 
	`DoA
(1));

568 
a
.
	`DoA
(1);

569 
a
.
	`DoA
(1);

571 
	}
}

573 #ià
GTEST_HAS_STREAM_REDIRECTION


577 
	$TEST
(
Ex³ùC®lSyÁaxTe¡
, 
DÛsNÙW¬nOnAdequ©eAùiÚCouÁ
) {

578 
	`C­tu»Stdout
();

580 
MockB
 
b
;

583 
	`EXPECT_CALL
(
b
, 
	`DoB
())

584 .
	`Times
(0);

585 
	`EXPECT_CALL
(
b
, 
	`DoB
(1))

586 .
	`Times
(
	`AtMo¡
(1));

587 
	`EXPECT_CALL
(
b
, 
	`DoB
(2))

588 .
	`Times
(1)

589 .
	`WlR•—‹dly
(
	`R‘uº
(1));

592 
	`EXPECT_CALL
(
b
, 
	`DoB
(3))

593 .
	`Times
(
	`B‘w“n
(1, 2))

594 .
	`WlOnû
(
	`R‘uº
(1))

595 .
	`WlOnû
(
	`R‘uº
(2));

599 
	`EXPECT_CALL
(
b
, 
	`DoB
(4))

600 .
	`Times
(
	`AtMo¡
(3))

601 .
	`WlOnû
(
	`R‘uº
(1))

602 .
	`WlR•—‹dly
(
	`R‘uº
(2));

605 
b
.
	`DoB
(2);

606 
b
.
	`DoB
(3);

608 
	`EXPECT_STREQ
("", 
	`G‘C­tu»dStdout
().
	`c_¡r
());

609 
	}
}

613 
	$TEST
(
Ex³ùC®lSyÁaxTe¡
, 
W¬nsOnTooMªyAùiÚs
) {

614 
	`C­tu»Stdout
();

616 
MockB
 
b
;

619 
	`EXPECT_CALL
(
b
, 
	`DoB
())

620 .
	`Times
(0)

621 .
	`WlOnû
(
	`R‘uº
(1));

622 
	`EXPECT_CALL
(
b
, 
	`DoB
())

623 .
	`Times
(
	`AtMo¡
(1))

624 .
	`WlOnû
(
	`R‘uº
(1))

625 .
	`WlOnû
(
	`R‘uº
(2));

626 
	`EXPECT_CALL
(
b
, 
	`DoB
(1))

627 .
	`Times
(1)

628 .
	`WlOnû
(
	`R‘uº
(1))

629 .
	`WlOnû
(
	`R‘uº
(2))

630 .
	`R‘œesOnS©u¿tiÚ
();

634 
	`EXPECT_CALL
(
b
, 
	`DoB
())

635 .
	`Times
(0)

636 .
	`WlR•—‹dly
(
	`R‘uº
(1));

637 
	`EXPECT_CALL
(
b
, 
	`DoB
(2))

638 .
	`Times
(1)

639 .
	`WlOnû
(
	`R‘uº
(1))

640 .
	`WlR•—‹dly
(
	`R‘uº
(2));

643 
b
.
	`DoB
(1);

644 
b
.
	`DoB
(2);

646 cÚ¡ 
¡d
::
¡ršg
 
ouut
 = 
	`G‘C­tu»dStdout
();

647 
	`EXPECT_PRED_FORMAT2
(

648 
IsSub¡ršg
,

651 
ouut
);

652 
	`EXPECT_PRED_FORMAT2
(

653 
IsSub¡ršg
,

657 
ouut
);

658 
	`EXPECT_PRED_FORMAT2
(

659 
IsSub¡ršg
,

662 
ouut
);

663 
	`EXPECT_PRED_FORMAT2
(

664 
IsSub¡ršg
,

668 
ouut
);

669 
	`EXPECT_PRED_FORMAT2
(

670 
IsSub¡ršg
,

674 
ouut
);

675 
	}
}

679 
	$TEST
(
Ex³ùC®lSyÁaxTe¡
, 
W¬nsOnTooFewAùiÚs
) {

680 
MockB
 
b
;

682 
	`EXPECT_CALL
(
b
, 
	`DoB
())

683 .
	`Times
(
	`B‘w“n
(2, 3))

684 .
	`WlOnû
(
	`R‘uº
(1));

686 
	`C­tu»Stdout
();

687 
b
.
	`DoB
();

688 cÚ¡ 
¡d
::
¡ršg
 
ouut
 = 
	`G‘C­tu»dStdout
();

689 
	`EXPECT_PRED_FORMAT2
(

690 
IsSub¡ršg
,

694 
ouut
);

695 
b
.
	`DoB
();

696 
	}
}

698 
	$TEST
(
Ex³ùC®lSyÁaxTe¡
, 
W¬nšgIsE¼ÜW™hFÏg
) {

699 
Üigš®_behaviÜ
 = 
‹¡šg
::
	`GMOCK_FLAG
(
deçuÉ_mock_behaviÜ
);

701 
‹¡šg
::
	`GMOCK_FLAG
(
deçuÉ_mock_behaviÜ
èğ
kAÎow
;

702 
	`C­tu»Stdout
();

704 
MockA
 
a
;

705 
a
.
	`DoA
(0);

707 
¡d
::
¡ršg
 
ouut
 = 
	`G‘C­tu»dStdout
();

708 
	`EXPECT_TRUE
(
ouut
.
	`em±y
()) << output;

710 
‹¡šg
::
	`GMOCK_FLAG
(
deçuÉ_mock_behaviÜ
èğ
kW¬n
;

711 
	`C­tu»Stdout
();

713 
MockA
 
a
;

714 
a
.
	`DoA
(0);

716 
¡d
::
¡ršg
 
w¬nšg_ouut
 = 
	`G‘C­tu»dStdout
();

717 
	`EXPECT_PRED_FORMAT2
(
IsSub¡ršg
, "GMOCK WARNING", 
w¬nšg_ouut
);

718 
	`EXPECT_PRED_FORMAT2
(
IsSub¡ršg
, "Uninteresting mock function call",

719 
w¬nšg_ouut
);

721 
‹¡šg
::
	`GMOCK_FLAG
(
deçuÉ_mock_behaviÜ
èğ
kFa
;

722 
	`EXPECT_NONFATAL_FAILURE
({

723 
MockA
 
a
;

724 
a
.
	`DoA
(0);

728 
‹¡šg
::
	`GMOCK_FLAG
(
deçuÉ_mock_behaviÜ
) = -1;

729 
	`C­tu»Stdout
();

731 
MockA
 
a
;

732 
a
.
	`DoA
(0);

734 
w¬nšg_ouut
 = 
	`G‘C­tu»dStdout
();

735 
	`EXPECT_PRED_FORMAT2
(
IsSub¡ršg
, "GMOCK WARNING", 
w¬nšg_ouut
);

736 
	`EXPECT_PRED_FORMAT2
(
IsSub¡ršg
, "Uninteresting mock function call",

737 
w¬nšg_ouut
);

738 
‹¡šg
::
	`GMOCK_FLAG
(
deçuÉ_mock_behaviÜ
) = 3;

739 
	`C­tu»Stdout
();

741 
MockA
 
a
;

742 
a
.
	`DoA
(0);

744 
w¬nšg_ouut
 = 
	`G‘C­tu»dStdout
();

745 
	`EXPECT_PRED_FORMAT2
(
IsSub¡ršg
, "GMOCK WARNING", 
w¬nšg_ouut
);

746 
	`EXPECT_PRED_FORMAT2
(
IsSub¡ršg
, "Uninteresting mock function call",

747 
w¬nšg_ouut
);

749 
‹¡šg
::
	`GMOCK_FLAG
(
deçuÉ_mock_behaviÜ
èğ
Üigš®_behaviÜ
;

750 
	}
}

758 
	$TEST
(
OnC®lTe¡
, 
TakesButInDeçuÉAùiÚWh’NoOnC®l
) {

759 
MockB
 
b
;

760 
	`EXPECT_CALL
(
b
, 
	`DoB
());

762 
	`EXPECT_EQ
(0, 
b
.
	`DoB
());

763 
	}
}

767 
	$TEST
(
OnC®lTe¡
, 
TakesButInDeçuÉAùiÚWh’NoOnC®lM©ches
) {

768 
MockB
 
b
;

769 
	`ON_CALL
(
b
, 
	`DoB
(1))

770 .
	`WlByDeçuÉ
(
	`R‘uº
(1));

771 
	`EXPECT_CALL
(
b
, 
	`DoB
(
_
));

773 
	`EXPECT_EQ
(0, 
b
.
	`DoB
(2));

774 
	}
}

777 
	$TEST
(
OnC®lTe¡
, 
PicksLa¡M©chšgOnC®l
) {

778 
MockB
 
b
;

779 
	`ON_CALL
(
b
, 
	`DoB
(
_
))

780 .
	`WlByDeçuÉ
(
	`R‘uº
(3));

781 
	`ON_CALL
(
b
, 
	`DoB
(2))

782 .
	`WlByDeçuÉ
(
	`R‘uº
(2));

783 
	`ON_CALL
(
b
, 
	`DoB
(1))

784 .
	`WlByDeçuÉ
(
	`R‘uº
(1));

785 
	`EXPECT_CALL
(
b
, 
	`DoB
(
_
));

787 
	`EXPECT_EQ
(2, 
b
.
	`DoB
(2));

788 
	}
}

793 
	$TEST
(
Ex³ùC®lTe¡
, 
AÎowsAnyC®lWh’NoS³c
) {

794 
MockB
 
b
;

795 
	`EXPECT_CALL
(
b
, 
	`DoB
());

798 
b
.
	`DoB
();

801 
b
.
	`DoB
(1);

802 
b
.
	`DoB
(2);

803 
	}
}

806 
	$TEST
(
Ex³ùC®lTe¡
, 
PicksLa¡M©chšgEx³ùC®l
) {

807 
MockB
 
b
;

808 
	`EXPECT_CALL
(
b
, 
	`DoB
(
_
))

809 .
	`WlR•—‹dly
(
	`R‘uº
(2));

810 
	`EXPECT_CALL
(
b
, 
	`DoB
(1))

811 .
	`WlR•—‹dly
(
	`R‘uº
(1));

813 
	`EXPECT_EQ
(1, 
b
.
	`DoB
(1));

814 
	}
}

817 
	$TEST
(
Ex³ùC®lTe¡
, 
C©chesTooFewC®ls
) {

818 
	`EXPECT_NONFATAL_FAILURE
({

819 
MockB
 
b
;

820 
	`EXPECT_CALL
(
b
, 
	`DoB
(5))

821 .
	`Times
(
	`AtL—¡
(2));

823 
b
.
	`DoB
(5);

827 
	}
}

831 
	$TEST
(
Ex³ùC®lTe¡
, 
InãrsC¬dš®™yWh’Th”eIsNoWlR•—‹dly
) {

833 
MockB
 
b
;

834 
	`EXPECT_CALL
(
b
, 
	`DoB
())

835 .
	`WlOnû
(
	`R‘uº
(1))

836 .
	`WlOnû
(
	`R‘uº
(2));

838 
	`EXPECT_EQ
(1, 
b
.
	`DoB
());

839 
	`EXPECT_EQ
(2, 
b
.
	`DoB
());

842 
	`EXPECT_NONFATAL_FAILURE
({

843 
MockB
 
b
;

844 
	`EXPECT_CALL
(
b
, 
	`DoB
())

845 .
	`WlOnû
(
	`R‘uº
(1))

846 .
	`WlOnû
(
	`R‘uº
(2));

848 
	`EXPECT_EQ
(1, 
b
.
	`DoB
());

852 
MockB
 
b
;

853 
	`EXPECT_CALL
(
b
, 
	`DoB
())

854 .
	`WlOnû
(
	`R‘uº
(1))

855 .
	`WlOnû
(
	`R‘uº
(2));

857 
	`EXPECT_EQ
(1, 
b
.
	`DoB
());

858 
	`EXPECT_EQ
(2, 
b
.
	`DoB
());

859 
	`EXPECT_NONFATAL_FAILURE
(
b
.
	`DoB
(), "to be calledwice");

861 
	}
}

863 
	$TEST
(
Ex³ùC®lTe¡
, 
InãrsC¬dš®™y1Wh’Th”eIsWlR•—‹dly
) {

865 
MockB
 
b
;

866 
	`EXPECT_CALL
(
b
, 
	`DoB
())

867 .
	`WlOnû
(
	`R‘uº
(1))

868 .
	`WlR•—‹dly
(
	`R‘uº
(2));

870 
	`EXPECT_EQ
(1, 
b
.
	`DoB
());

874 
MockB
 
b
;

875 
	`EXPECT_CALL
(
b
, 
	`DoB
())

876 .
	`WlOnû
(
	`R‘uº
(1))

877 .
	`WlR•—‹dly
(
	`R‘uº
(2));

879 
	`EXPECT_EQ
(1, 
b
.
	`DoB
());

880 
	`EXPECT_EQ
(2, 
b
.
	`DoB
());

881 
	`EXPECT_EQ
(2, 
b
.
	`DoB
());

884 
	`EXPECT_NONFATAL_FAILURE
({

885 
MockB
 
b
;

886 
	`EXPECT_CALL
(
b
, 
	`DoB
())

887 .
	`WlOnû
(
	`R‘uº
(1))

888 .
	`WlR•—‹dly
(
	`R‘uº
(2));

890 
	}
}

894 
	$TEST
(
Ex³ùC®lTe¡
, 
NthM©chTakesNthAùiÚ
) {

895 
MockB
 
b
;

896 
	`EXPECT_CALL
(
b
, 
	`DoB
())

897 .
	`WlOnû
(
	`R‘uº
(1))

898 .
	`WlOnû
(
	`R‘uº
(2))

899 .
	`WlOnû
(
	`R‘uº
(3));

901 
	`EXPECT_EQ
(1, 
b
.
	`DoB
());

902 
	`EXPECT_EQ
(2, 
b
.
	`DoB
());

903 
	`EXPECT_EQ
(3, 
b
.
	`DoB
());

904 
	}
}

908 
	$TEST
(
Ex³ùC®lTe¡
, 
TakesR•—‹dAùiÚWh’WlLi¡IsExhau¡ed
) {

909 
MockB
 
b
;

910 
	`EXPECT_CALL
(
b
, 
	`DoB
())

911 .
	`WlOnû
(
	`R‘uº
(1))

912 .
	`WlR•—‹dly
(
	`R‘uº
(2));

914 
	`EXPECT_EQ
(1, 
b
.
	`DoB
());

915 
	`EXPECT_EQ
(2, 
b
.
	`DoB
());

916 
	`EXPECT_EQ
(2, 
b
.
	`DoB
());

917 
	}
}

919 #ià
GTEST_HAS_STREAM_REDIRECTION


923 
	$TEST
(
Ex³ùC®lTe¡
, 
TakesDeçuÉAùiÚWh’WlLi¡IsExhau¡ed
) {

924 
MockB
 
b
;

925 
	`EXPECT_CALL
(
b
, 
	`DoB
(
_
))

926 .
	`Times
(1);

927 
	`EXPECT_CALL
(
b
, 
	`DoB
())

928 .
	`Times
(
	`AnyNumb”
())

929 .
	`WlOnû
(
	`R‘uº
(1))

930 .
	`WlOnû
(
	`R‘uº
(2));

932 
	`C­tu»Stdout
();

933 
	`EXPECT_EQ
(0, 
b
.
	`DoB
(1));

935 
	`EXPECT_EQ
(1, 
b
.
	`DoB
());

936 
	`EXPECT_EQ
(2, 
b
.
	`DoB
());

937 cÚ¡ 
¡d
::
¡ršg
 
ouut1
 = 
	`G‘C­tu»dStdout
();

938 
	`EXPECT_STREQ
("", 
ouut1
.
	`c_¡r
());

940 
	`C­tu»Stdout
();

941 
	`EXPECT_EQ
(0, 
b
.
	`DoB
());

942 
	`EXPECT_EQ
(0, 
b
.
	`DoB
());

943 cÚ¡ 
¡d
::
¡ršg
 
ouut2
 = 
	`G‘C­tu»dStdout
();

944 
	`EXPECT_THAT
(
ouut2
.
	`c_¡r
(),

945 
	`HasSub¡r
("Actions„an out in EXPECT_CALL(b, DoB())...\n"

948 
	`EXPECT_THAT
(
ouut2
.
	`c_¡r
(),

949 
	`HasSub¡r
("Actions„an out in EXPECT_CALL(b, DoB())...\n"

952 
	}
}

954 
	$TEST
(
FunùiÚMock”Mes§geTe¡
, 
R•ÜtsEx³ùC®lLoÿtiÚFÜExhau£dAùiÚs
) {

955 
MockB
 
b
;

956 
¡d
::
¡ršg
 
ex³ù_ÿÎ_loÿtiÚ
 = 
	`FÜm©FeLoÿtiÚ
(
__FILE__
, 
__LINE__
 + 1);

957 
	`EXPECT_CALL
(
b
, 
	`DoB
()).
	`Times
(
	`AnyNumb”
()).
	`WlOnû
(
	`R‘uº
(1));

959 
	`EXPECT_EQ
(1, 
b
.
	`DoB
());

961 
	`C­tu»Stdout
();

962 
	`EXPECT_EQ
(0, 
b
.
	`DoB
());

963 cÚ¡ 
¡d
::
¡ršg
 
ouut
 = 
	`G‘C­tu»dStdout
();

965 
	`EXPECT_PRED_FORMAT2
(
IsSub¡ršg
, 
ex³ù_ÿÎ_loÿtiÚ
, 
ouut
);

966 
	}
}

968 
	$TEST
(
FunùiÚMock”Mes§geTe¡
,

969 
R•ÜtsDeçuÉAùiÚLoÿtiÚOfUnš‹»¡šgC®lsFÜNaggyMock
) {

970 
¡d
::
¡ršg
 
Ú_ÿÎ_loÿtiÚ
;

971 
	`C­tu»Stdout
();

973 
NaggyMock
<
MockB
> 
b
;

974 
Ú_ÿÎ_loÿtiÚ
 = 
	`FÜm©FeLoÿtiÚ
(
__FILE__
, 
__LINE__
 + 1);

975 
	`ON_CALL
(
b
, 
	`DoB
(
_
)).
	`WlByDeçuÉ
(
	`R‘uº
(0));

976 
b
.
	`DoB
(0);

978 
	`EXPECT_PRED_FORMAT2
(
IsSub¡ršg
, 
Ú_ÿÎ_loÿtiÚ
, 
	`G‘C­tu»dStdout
());

979 
	}
}

984 
	$TEST
(
Unš‹»¡šgC®lTe¡
, 
DÛsDeçuÉAùiÚ
) {

987 
MockA
 
a
;

988 
	`ON_CALL
(
a
, 
	`Bš¬y
(
_
, _))

989 .
	`WlByDeçuÉ
(
	`R‘uº
(
Œue
));

990 
	`EXPECT_TRUE
(
a
.
	`Bš¬y
(1, 2));

994 
MockB
 
b
;

995 
	`EXPECT_EQ
(0, 
b
.
	`DoB
());

996 
	}
}

999 
	$TEST
(
UÃx³ùedC®lTe¡
, 
DÛsDeçuÉAùiÚ
) {

1002 
MockA
 
a
;

1003 
	`ON_CALL
(
a
, 
	`Bš¬y
(
_
, _))

1004 .
	`WlByDeçuÉ
(
	`R‘uº
(
Œue
));

1005 
	`EXPECT_CALL
(
a
, 
	`Bš¬y
(0, 0));

1006 
a
.
	`Bš¬y
(0, 0);

1007 
boŞ
 
»suÉ
 = 
çl£
;

1008 
	`EXPECT_NONFATAL_FAILURE
(
»suÉ
 = 
a
.
	`Bš¬y
(1, 2),

1010 
	`EXPECT_TRUE
(
»suÉ
);

1014 
MockB
 
b
;

1015 
	`EXPECT_CALL
(
b
, 
	`DoB
(0))

1016 .
	`Times
(0);

1017 
n
 = -1;

1018 
	`EXPECT_NONFATAL_FAILURE
(
n
 = 
b
.
	`DoB
(1),

1020 
	`EXPECT_EQ
(0, 
n
);

1021 
	}
}

1025 
	$TEST
(
UÃx³ùedC®lTe¡
, 
G’”©esFau»FÜVoidFunùiÚ
) {

1027 
MockA
 
a1
;

1028 
	`EXPECT_CALL
(
a1
, 
	`DoA
(1));

1029 
a1
.
	`DoA
(1);

1033 
	`EXPECT_NONFATAL_FAILURE
(

1034 
a1
.
	`DoA
(9),

1038 
	`EXPECT_NONFATAL_FAILURE
(

1039 
a1
.
	`DoA
(9),

1046 
MockA
 
a2
;

1047 
	`EXPECT_CALL
(
a2
, 
	`DoA
(1));

1048 
	`EXPECT_CALL
(
a2
, 
	`DoA
(3));

1049 
a2
.
	`DoA
(1);

1050 
	`EXPECT_NONFATAL_FAILURE
(

1051 
a2
.
	`DoA
(2),

1055 
	`EXPECT_NONFATAL_FAILURE
(

1056 
a2
.
	`DoA
(2),

1062 
	`EXPECT_NONFATAL_FAILURE
(

1063 
a2
.
	`DoA
(2),

1069 
a2
.
	`DoA
(3);

1070 
	}
}

1074 
	$TEST
(
UÃx³ùedC®lTe¡
, 
G’—¹esFau»FÜNÚVoidFunùiÚ
) {

1075 
MockB
 
b1
;

1076 
	`EXPECT_CALL
(
b1
, 
	`DoB
(1));

1077 
b1
.
	`DoB
(1);

1078 
	`EXPECT_NONFATAL_FAILURE
(

1079 
b1
.
	`DoB
(2),

1084 
	`EXPECT_NONFATAL_FAILURE
(

1085 
b1
.
	`DoB
(2),

1090 
	}
}

1094 
	$TEST
(
UÃx³ùedC®lTe¡
, 
R‘œedEx³ù©iÚ
) {

1095 
MockB
 
b
;

1096 
	`EXPECT_CALL
(
b
, 
	`DoB
(1))

1097 .
	`R‘œesOnS©u¿tiÚ
();

1099 
b
.
	`DoB
(1);

1100 
	`EXPECT_NONFATAL_FAILURE
(

1101 
b
.
	`DoB
(1),

1104 
	}
}

1108 
	$TEST
(
UÃx³ùedC®lTe¡
, 
Unm©chedArgum’ts
) {

1109 
MockB
 
b
;

1110 
	`EXPECT_CALL
(
b
, 
	`DoB
(1));

1112 
	`EXPECT_NONFATAL_FAILURE
(

1113 
b
.
	`DoB
(2),

1116 
b
.
	`DoB
(1);

1117 
	}
}

1121 
	$TEST
(
UÃx³ùedC®lTe¡
, 
Un§tisif›dP»»quis™es
) {

1122 
Sequ’û
 
s1
, 
s2
;

1123 
MockB
 
b
;

1124 
	`EXPECT_CALL
(
b
, 
	`DoB
(1))

1125 .
	`InSequ’û
(
s1
);

1126 
	`EXPECT_CALL
(
b
, 
	`DoB
(2))

1127 .
	`Times
(
	`AnyNumb”
())

1128 .
	`InSequ’û
(
s1
);

1129 
	`EXPECT_CALL
(
b
, 
	`DoB
(3))

1130 .
	`InSequ’û
(
s2
);

1131 
	`EXPECT_CALL
(
b
, 
	`DoB
(4))

1132 .
	`InSequ’û
(
s1
, 
s2
);

1134 ::
‹¡šg
::
Te¡P¬tResuÉA¼ay
 
çu»s
;

1136 ::
‹¡šg
::
ScİedFakeTe¡P¬tResuÉR•Ü‹r
 
	`»pÜ‹r
(&
çu»s
);

1137 
b
.
	`DoB
(4);

1143 
	`ASSERT_EQ
(1, 
çu»s
.
	`size
());

1144 cÚ¡ ::
‹¡šg
::
Te¡P¬tResuÉ
& 
r
 = 
çu»s
.
	`G‘Te¡P¬tResuÉ
(0);

1145 
	`EXPECT_EQ
(::
‹¡šg
::
Te¡P¬tResuÉ
::
kNÚF©®Fau»
, 
r
.
	`ty³
());

1149 #ià
GTEST_USES_PCRE


1150 
	`EXPECT_THAT
(
r
.
	`mes§ge
(), 
	`CÚšsRegex
(

1156 #–ià
GTEST_USES_POSIX_RE


1157 
	`EXPECT_THAT
(
r
.
	`mes§ge
(), 
	`CÚšsRegex
(

1165 
	`EXPECT_THAT
(
r
.
	`mes§ge
(), 
	`CÚšsRegex
(

1167 
	`EXPECT_THAT
(
r
.
	`mes§ge
(), 
	`CÚšsRegex
(":…re-requisite #0"));

1168 
	`EXPECT_THAT
(
r
.
	`mes§ge
(), 
	`CÚšsRegex
(":…re-requisite #1"));

1171 
b
.
	`DoB
(1);

1172 
b
.
	`DoB
(3);

1173 
b
.
	`DoB
(4);

1174 
	}
}

1176 
	$TEST
(
UndefšedR‘uºV®ueTe¡
,

1177 
R‘uºV®ueIsMªd©ÜyWh’NÙDeçuÉCÚ¡ruùibË
) {

1178 
MockA
 
a
;

1182 #ià
GTEST_HAS_EXCEPTIONS


1183 
	`EXPECT_ANY_THROW
(
a
.
	`R‘uºNÚDeçuÉCÚ¡ruùibË
());

1185 
	`EXPECT_DEATH_IF_SUPPORTED
(
a
.
	`R‘uºNÚDeçuÉCÚ¡ruùibË
(), "");

1187 
	}
}

1191 
	$TEST
(
ExûssiveC®lTe¡
, 
DÛsDeçuÉAùiÚ
) {

1194 
MockA
 
a
;

1195 
	`ON_CALL
(
a
, 
	`Bš¬y
(
_
, _))

1196 .
	`WlByDeçuÉ
(
	`R‘uº
(
Œue
));

1197 
	`EXPECT_CALL
(
a
, 
	`Bš¬y
(0, 0));

1198 
a
.
	`Bš¬y
(0, 0);

1199 
boŞ
 
»suÉ
 = 
çl£
;

1200 
	`EXPECT_NONFATAL_FAILURE
(
»suÉ
 = 
a
.
	`Bš¬y
(0, 0),

1202 
	`EXPECT_TRUE
(
»suÉ
);

1206 
MockB
 
b
;

1207 
	`EXPECT_CALL
(
b
, 
	`DoB
(0))

1208 .
	`Times
(0);

1209 
n
 = -1;

1210 
	`EXPECT_NONFATAL_FAILURE
(
n
 = 
b
.
	`DoB
(0),

1212 
	`EXPECT_EQ
(0, 
n
);

1213 
	}
}

1217 
	$TEST
(
ExûssiveC®lTe¡
, 
G’”©esFau»FÜVoidFunùiÚ
) {

1218 
MockA
 
a
;

1219 
	`EXPECT_CALL
(
a
, 
	`DoA
(
_
))

1220 .
	`Times
(0);

1221 
	`EXPECT_NONFATAL_FAILURE
(

1222 
a
.
	`DoA
(9),

1227 
	}
}

1231 
	$TEST
(
ExûssiveC®lTe¡
, 
G’”©esFau»FÜNÚVoidFunùiÚ
) {

1232 
MockB
 
b
;

1233 
	`EXPECT_CALL
(
b
, 
	`DoB
(
_
));

1234 
b
.
	`DoB
(1);

1235 
	`EXPECT_NONFATAL_FAILURE
(

1236 
b
.
	`DoB
(2),

1243 
	}
}

1247 
	$TEST
(
InSequ’ûTe¡
, 
AÎEx³ù©iÚInScİeA»InSequ’û
) {

1248 
MockA
 
a
;

1250 
InSequ’û
 
dummy
;

1252 
	`EXPECT_CALL
(
a
, 
	`DoA
(1));

1253 
	`EXPECT_CALL
(
a
, 
	`DoA
(2));

1256 
	`EXPECT_NONFATAL_FAILURE
({

1257 
a
.
	`DoA
(2);

1260 
a
.
	`DoA
(1);

1261 
a
.
	`DoA
(2);

1262 
	}
}

1264 
	$TEST
(
InSequ’ûTe¡
, 
Ne¡edInSequ’û
) {

1265 
MockA
 
a
;

1267 
InSequ’û
 
dummy
;

1269 
	`EXPECT_CALL
(
a
, 
	`DoA
(1));

1271 
InSequ’û
 
dummy2
;

1273 
	`EXPECT_CALL
(
a
, 
	`DoA
(2));

1274 
	`EXPECT_CALL
(
a
, 
	`DoA
(3));

1278 
	`EXPECT_NONFATAL_FAILURE
({

1279 
a
.
	`DoA
(1);

1280 
a
.
	`DoA
(3);

1283 
a
.
	`DoA
(2);

1284 
a
.
	`DoA
(3);

1285 
	}
}

1287 
	$TEST
(
InSequ’ûTe¡
, 
Ex³ù©iÚsOutOfScİeA»NÙAfãùed
) {

1288 
MockA
 
a
;

1290 
InSequ’û
 
dummy
;

1292 
	`EXPECT_CALL
(
a
, 
	`DoA
(1));

1293 
	`EXPECT_CALL
(
a
, 
	`DoA
(2));

1295 
	`EXPECT_CALL
(
a
, 
	`DoA
(3));

1297 
	`EXPECT_NONFATAL_FAILURE
({

1298 
a
.
	`DoA
(2);

1301 
a
.
	`DoA
(3);

1302 
a
.
	`DoA
(1);

1303 
a
.
	`DoA
(2);

1304 
	}
}

1307 
	$TEST
(
Sequ’ûTe¡
, 
AnyOrd”IsOkByDeçuÉ
) {

1309 
MockA
 
a
;

1310 
MockB
 
b
;

1312 
	`EXPECT_CALL
(
a
, 
	`DoA
(1));

1313 
	`EXPECT_CALL
(
b
, 
	`DoB
())

1314 .
	`Times
(
	`AnyNumb”
());

1316 
a
.
	`DoA
(1);

1317 
b
.
	`DoB
();

1321 
MockA
 
a
;

1322 
MockB
 
b
;

1324 
	`EXPECT_CALL
(
a
, 
	`DoA
(1));

1325 
	`EXPECT_CALL
(
b
, 
	`DoB
())

1326 .
	`Times
(
	`AnyNumb”
());

1328 
b
.
	`DoB
();

1329 
a
.
	`DoA
(1);

1331 
	}
}

1335 
	$TEST
(
Sequ’ûTe¡
, 
C®lsMu¡BeInSŒiùOrd”Wh’SaidSo1
) {

1336 
MockA
 
a
;

1337 
	`ON_CALL
(
a
, 
	`R‘uºResuÉ
(
_
))

1338 .
	`WlByDeçuÉ
(
	`R‘uº
(
	`ResuÉ
()));

1340 
Sequ’û
 
s
;

1341 
	`EXPECT_CALL
(
a
, 
	`R‘uºResuÉ
(1))

1342 .
	`InSequ’û
(
s
);

1343 
	`EXPECT_CALL
(
a
, 
	`R‘uºResuÉ
(2))

1344 .
	`InSequ’û
(
s
);

1345 
	`EXPECT_CALL
(
a
, 
	`R‘uºResuÉ
(3))

1346 .
	`InSequ’û
(
s
);

1348 
a
.
	`R‘uºResuÉ
(1);

1351 
	`EXPECT_NONFATAL_FAILURE
(
a
.
	`R‘uºResuÉ
(3), "Unexpected mock function call");

1353 
a
.
	`R‘uºResuÉ
(2);

1354 
a
.
	`R‘uºResuÉ
(3);

1355 
	}
}

1359 
	$TEST
(
Sequ’ûTe¡
, 
C®lsMu¡BeInSŒiùOrd”Wh’SaidSo2
) {

1360 
MockA
 
a
;

1361 
	`ON_CALL
(
a
, 
	`R‘uºResuÉ
(
_
))

1362 .
	`WlByDeçuÉ
(
	`R‘uº
(
	`ResuÉ
()));

1364 
Sequ’û
 
s
;

1365 
	`EXPECT_CALL
(
a
, 
	`R‘uºResuÉ
(1))

1366 .
	`InSequ’û
(
s
);

1367 
	`EXPECT_CALL
(
a
, 
	`R‘uºResuÉ
(2))

1368 .
	`InSequ’û
(
s
);

1371 
	`EXPECT_NONFATAL_FAILURE
(
a
.
	`R‘uºResuÉ
(2), "Unexpected mock function call");

1373 
a
.
	`R‘uºResuÉ
(1);

1374 
a
.
	`R‘uºResuÉ
(2);

1375 
	}
}

1378 şas 
	cP¬tŸlOrd”Te¡
 : 
public
 
‹¡šg
::
Te¡
 {

1379 
´Ùeùed
:

1380 
P¬tŸlOrd”Te¡
() {

1381 
ON_CALL
(
a_
, 
R‘uºResuÉ
(
_
))

1382 .
WlByDeçuÉ
(
R‘uº
(
ResuÉ
()));

1389 
Sequ’û
 
	gx
, 
	gy
;

1390 
EXPECT_CALL
(
a_
, 
R‘uºResuÉ
(1))

1391 .
InSequ’û
(
x
);

1392 
EXPECT_CALL
(
b_
, 
DoB
())

1393 .
Times
(2)

1394 .
InSequ’û
(
y
);

1395 
EXPECT_CALL
(
a_
, 
R‘uºResuÉ
(2))

1396 .
Times
(
AnyNumb”
())

1397 .
InSequ’û
(
x
, 
y
);

1398 
EXPECT_CALL
(
a_
, 
R‘uºResuÉ
(3))

1399 .
InSequ’û
(
x
);

1402 
MockA
 
	ga_
;

1403 
MockB
 
	gb_
;

1406 
	$TEST_F
(
P¬tŸlOrd”Te¡
, 
C®lsMu¡CÚfÜmToS³cif›dDag1
) {

1407 
a_
.
	`R‘uºResuÉ
(1);

1408 
b_
.
	`DoB
();

1411 
	`EXPECT_NONFATAL_FAILURE
(
a_
.
	`R‘uºResuÉ
(2), "Unexpected mock function call");

1413 
b_
.
	`DoB
();

1414 
a_
.
	`R‘uºResuÉ
(3);

1415 
	}
}

1417 
	$TEST_F
(
P¬tŸlOrd”Te¡
, 
C®lsMu¡CÚfÜmToS³cif›dDag2
) {

1419 
	`EXPECT_NONFATAL_FAILURE
(
a_
.
	`R‘uºResuÉ
(2), "Unexpected mock function call");

1421 
a_
.
	`R‘uºResuÉ
(1);

1422 
b_
.
	`DoB
();

1423 
b_
.
	`DoB
();

1424 
a_
.
	`R‘uºResuÉ
(3);

1425 
	}
}

1427 
	$TEST_F
(
P¬tŸlOrd”Te¡
, 
C®lsMu¡CÚfÜmToS³cif›dDag3
) {

1429 
	`EXPECT_NONFATAL_FAILURE
(
a_
.
	`R‘uºResuÉ
(3), "Unexpected mock function call");

1431 
a_
.
	`R‘uºResuÉ
(1);

1432 
b_
.
	`DoB
();

1433 
b_
.
	`DoB
();

1434 
a_
.
	`R‘uºResuÉ
(3);

1435 
	}
}

1437 
	$TEST_F
(
P¬tŸlOrd”Te¡
, 
C®lsMu¡CÚfÜmToS³cif›dDag4
) {

1438 
a_
.
	`R‘uºResuÉ
(1);

1439 
b_
.
	`DoB
();

1440 
b_
.
	`DoB
();

1441 
a_
.
	`R‘uºResuÉ
(3);

1444 
	`EXPECT_NONFATAL_FAILURE
(
a_
.
	`R‘uºResuÉ
(2), "Unexpected mock function call");

1445 
	}
}

1447 
	$TEST
(
Sequ’ûTe¡
, 
R‘œem’t
) {

1448 
MockA
 
a
;

1449 
Sequ’û
 
s
;

1451 
	`EXPECT_CALL
(
a
, 
	`DoA
(1))

1452 .
	`InSequ’û
(
s
);

1453 
	`EXPECT_CALL
(
a
, 
	`DoA
(
_
))

1454 .
	`InSequ’û
(
s
)

1455 .
	`R‘œesOnS©u¿tiÚ
();

1456 
	`EXPECT_CALL
(
a
, 
	`DoA
(1))

1457 .
	`InSequ’û
(
s
);

1459 
a
.
	`DoA
(1);

1460 
a
.
	`DoA
(2);

1461 
a
.
	`DoA
(1);

1462 
	}
}

1466 
	$TEST
(
Ex³ù©iÚTe¡
, 
CÚ¡rutÜsWÜk
) {

1467 
MockA
 
a
;

1468 
Ex³ù©iÚ
 
e1
;

1471 
Ex³ù©iÚ
 
e2
 = 
	`EXPECT_CALL
(
a
, 
	`DoA
(2));

1472 
Ex³ù©iÚ
 
e3
 = 
	`EXPECT_CALL
(
a
, 
	`DoA
(3)).
	`W™h
(
_
);

1474 
Sequ’û
 
s
;

1475 
Ex³ù©iÚ
 
e4
 = 
	`EXPECT_CALL
(
a
, 
	`DoA
(4)).
	`Times
(1);

1476 
Ex³ù©iÚ
 
e5
 = 
	`EXPECT_CALL
(
a
, 
	`DoA
(5)).
	`InSequ’û
(
s
);

1478 
Ex³ù©iÚ
 
e6
 = 
	`EXPECT_CALL
(
a
, 
	`DoA
(6)).
	`Aá”
(
e2
);

1479 
Ex³ù©iÚ
 
e7
 = 
	`EXPECT_CALL
(
a
, 
	`DoA
(7)).
	`WlOnû
(
	`R‘uº
());

1480 
Ex³ù©iÚ
 
e8
 = 
	`EXPECT_CALL
(
a
, 
	`DoA
(8)).
	`WlR•—‹dly
(
	`R‘uº
());

1481 
Ex³ù©iÚ
 
e9
 = 
	`EXPECT_CALL
(
a
, 
	`DoA
(9)).
	`R‘œesOnS©u¿tiÚ
();

1483 
Ex³ù©iÚ
 
e10
 = 
e2
;

1485 
	`EXPECT_THAT
(
e1
, 
	`Ne
(
e2
));

1486 
	`EXPECT_THAT
(
e2
, 
	`Eq
(
e10
));

1488 
a
.
	`DoA
(2);

1489 
a
.
	`DoA
(3);

1490 
a
.
	`DoA
(4);

1491 
a
.
	`DoA
(5);

1492 
a
.
	`DoA
(6);

1493 
a
.
	`DoA
(7);

1494 
a
.
	`DoA
(8);

1495 
a
.
	`DoA
(9);

1496 
	}
}

1498 
	$TEST
(
Ex³ù©iÚTe¡
, 
Assignm’tWÜks
) {

1499 
MockA
 
a
;

1500 
Ex³ù©iÚ
 
e1
;

1501 
Ex³ù©iÚ
 
e2
 = 
	`EXPECT_CALL
(
a
, 
	`DoA
(1));

1503 
	`EXPECT_THAT
(
e1
, 
	`Ne
(
e2
));

1505 
e1
 = 
e2
;

1506 
	`EXPECT_THAT
(
e1
, 
	`Eq
(
e2
));

1508 
a
.
	`DoA
(1);

1509 
	}
}

1513 
	$TEST
(
Ex³ù©iÚS‘Te¡
, 
Memb”Ty³sA»CÜ»ù
) {

1514 ::
‹¡šg
::
SticAs£¹Ty³Eq
<
Ex³ù©iÚ
, 
Ex³ù©iÚS‘
::
v®ue_ty³
>();

1515 
	}
}

1517 
	$TEST
(
Ex³ù©iÚS‘Te¡
, 
CÚ¡ruùÜsWÜk
) {

1518 
MockA
 
a
;

1520 
Ex³ù©iÚ
 
e1
;

1521 cÚ¡ 
Ex³ù©iÚ
 
e2
;

1522 
Ex³ù©iÚS‘
 
es1
;

1523 
Ex³ù©iÚS‘
 
es2
 = 
	`EXPECT_CALL
(
a
, 
	`DoA
(1));

1524 
Ex³ù©iÚS‘
 
es3
 = 
e1
;

1525 
Ex³ù©iÚS‘
 
	`es4
(
e1
);

1526 
Ex³ù©iÚS‘
 
es5
 = 
e2
;

1527 
Ex³ù©iÚS‘
 
	`es6
(
e2
);

1528 
Ex³ù©iÚS‘
 
es7
 = 
es2
;

1530 
	`EXPECT_EQ
(0, 
es1
.
	`size
());

1531 
	`EXPECT_EQ
(1, 
es2
.
	`size
());

1532 
	`EXPECT_EQ
(1, 
es3
.
	`size
());

1533 
	`EXPECT_EQ
(1, 
es4
.
	`size
());

1534 
	`EXPECT_EQ
(1, 
es5
.
	`size
());

1535 
	`EXPECT_EQ
(1, 
es6
.
	`size
());

1536 
	`EXPECT_EQ
(1, 
es7
.
	`size
());

1538 
	`EXPECT_THAT
(
es3
, 
	`Ne
(
es2
));

1539 
	`EXPECT_THAT
(
es4
, 
	`Eq
(
es3
));

1540 
	`EXPECT_THAT
(
es5
, 
	`Eq
(
es4
));

1541 
	`EXPECT_THAT
(
es6
, 
	`Eq
(
es5
));

1542 
	`EXPECT_THAT
(
es7
, 
	`Eq
(
es2
));

1543 
a
.
	`DoA
(1);

1544 
	}
}

1546 
	$TEST
(
Ex³ù©iÚS‘Te¡
, 
Assignm’tWÜks
) {

1547 
Ex³ù©iÚS‘
 
es1
;

1548 
Ex³ù©iÚS‘
 
es2
 = 
	`Ex³ù©iÚ
();

1550 
es1
 = 
es2
;

1551 
	`EXPECT_EQ
(1, 
es1
.
	`size
());

1552 
	`EXPECT_THAT
(*(
es1
.
	`begš
()), 
	`Eq
(
	`Ex³ù©iÚ
()));

1553 
	`EXPECT_THAT
(
es1
, 
	`Eq
(
es2
));

1554 
	}
}

1556 
	$TEST
(
Ex³ù©iÚS‘Te¡
, 
In£¹iÚWÜks
) {

1557 
Ex³ù©iÚS‘
 
es1
;

1558 
Ex³ù©iÚ
 
e1
;

1559 
es1
 +ğ
e1
;

1560 
	`EXPECT_EQ
(1, 
es1
.
	`size
());

1561 
	`EXPECT_THAT
(*(
es1
.
	`begš
()), 
	`Eq
(
e1
));

1563 
MockA
 
a
;

1564 
Ex³ù©iÚ
 
e2
 = 
	`EXPECT_CALL
(
a
, 
	`DoA
(1));

1565 
es1
 +ğ
e2
;

1566 
	`EXPECT_EQ
(2, 
es1
.
	`size
());

1568 
Ex³ù©iÚS‘
::
cÚ¡_™”©Ü
 
™1
 = 
es1
.
	`begš
();

1569 
Ex³ù©iÚS‘
::
cÚ¡_™”©Ü
 
™2
 = 
™1
;

1570 ++
™2
;

1571 
	`EXPECT_TRUE
(*
™1
 =ğ
e1
 || *
™2
 ==ƒ1);

1572 
	`EXPECT_TRUE
(*
™1
 =ğ
e2
 || *
™2
 ==ƒ2);

1573 
a
.
	`DoA
(1);

1574 
	}
}

1576 
	$TEST
(
Ex³ù©iÚS‘Te¡
, 
SizeWÜks
) {

1577 
Ex³ù©iÚS‘
 
es
;

1578 
	`EXPECT_EQ
(0, 
es
.
	`size
());

1580 
es
 +ğ
	`Ex³ù©iÚ
();

1581 
	`EXPECT_EQ
(1, 
es
.
	`size
());

1583 
MockA
 
a
;

1584 
es
 +ğ
	`EXPECT_CALL
(
a
, 
	`DoA
(1));

1585 
	`EXPECT_EQ
(2, 
es
.
	`size
());

1587 
a
.
	`DoA
(1);

1588 
	}
}

1590 
	$TEST
(
Ex³ù©iÚS‘Te¡
, 
IsEnum”abË
) {

1591 
Ex³ù©iÚS‘
 
es
;

1592 
	`EXPECT_TRUE
(
es
.
	`begš
(è=ğes.
	`’d
());

1594 
es
 +ğ
	`Ex³ù©iÚ
();

1595 
Ex³ù©iÚS‘
::
cÚ¡_™”©Ü
 
™
 = 
es
.
	`begš
();

1596 
	`EXPECT_TRUE
(
™
 !ğ
es
.
	`’d
());

1597 
	`EXPECT_THAT
(*
™
, 
	`Eq
(
	`Ex³ù©iÚ
()));

1598 ++
™
;

1599 
	`EXPECT_TRUE
(
™
=ğ
es
.
	`’d
());

1600 
	}
}

1604 
	$TEST
(
Aá”Te¡
, 
SucûedsWh’P¬tŸlOrd”IsS©isf›d
) {

1605 
MockA
 
a
;

1606 
Ex³ù©iÚS‘
 
es
;

1607 
es
 +ğ
	`EXPECT_CALL
(
a
, 
	`DoA
(1));

1608 
es
 +ğ
	`EXPECT_CALL
(
a
, 
	`DoA
(2));

1609 
	`EXPECT_CALL
(
a
, 
	`DoA
(3))

1610 .
	`Aá”
(
es
);

1612 
a
.
	`DoA
(1);

1613 
a
.
	`DoA
(2);

1614 
a
.
	`DoA
(3);

1615 
	}
}

1617 
	$TEST
(
Aá”Te¡
, 
SucûedsWh’TÙ®Ord”IsS©isf›d
) {

1618 
MockA
 
a
;

1619 
MockB
 
b
;

1622 cÚ¡ 
Ex³ù©iÚ
 
e1
 = 
	`EXPECT_CALL
(
a
, 
	`DoA
(1));

1623 cÚ¡ 
Ex³ù©iÚ
 
e2
 = 
	`EXPECT_CALL
(
b
, 
	`DoB
())

1624 .
	`Times
(2)

1625 .
	`Aá”
(
e1
);

1626 
	`EXPECT_CALL
(
a
, 
	`DoA
(2)).
	`Aá”
(
e2
);

1628 
a
.
	`DoA
(1);

1629 
b
.
	`DoB
();

1630 
b
.
	`DoB
();

1631 
a
.
	`DoA
(2);

1632 
	}
}

1635 
	$TEST
(
Aá”Te¡
, 
C®lsMu¡BeInSŒiùOrd”Wh’S³cif›dSo1
) {

1636 
MockA
 
a
;

1637 
MockB
 
b
;

1641 
Ex³ù©iÚ
 
e1
 = 
	`EXPECT_CALL
(
a
, 
	`DoA
(1));

1642 
Ex³ù©iÚ
 
e2
 = 
	`EXPECT_CALL
(
b
, 
	`DoB
())

1643 .
	`Aá”
(
e1
);

1644 
	`EXPECT_CALL
(
a
, 
	`DoA
(2))

1645 .
	`Aá”
(
e2
);

1647 
a
.
	`DoA
(1);

1650 
	`EXPECT_NONFATAL_FAILURE
(
a
.
	`DoA
(2), "Unexpected mock function call");

1652 
b
.
	`DoB
();

1653 
a
.
	`DoA
(2);

1654 
	}
}

1657 
	$TEST
(
Aá”Te¡
, 
C®lsMu¡BeInSŒiùOrd”Wh’S³cif›dSo2
) {

1658 
MockA
 
a
;

1659 
MockB
 
b
;

1663 
Ex³ù©iÚ
 
e1
 = 
	`EXPECT_CALL
(
a
, 
	`DoA
(1));

1664 
Ex³ù©iÚ
 
e2
 = 
	`EXPECT_CALL
(
b
, 
	`DoB
())

1665 .
	`Times
(2)

1666 .
	`Aá”
(
e1
);

1667 
	`EXPECT_CALL
(
a
, 
	`DoA
(2))

1668 .
	`Aá”
(
e2
);

1670 
a
.
	`DoA
(1);

1671 
b
.
	`DoB
();

1674 
	`EXPECT_NONFATAL_FAILURE
(
a
.
	`DoA
(2), "Unexpected mock function call");

1676 
b
.
	`DoB
();

1677 
a
.
	`DoA
(2);

1678 
	}
}

1681 
	$TEST
(
Aá”Te¡
, 
C®lsMu¡S©isfyP¬tŸlOrd”Wh’S³cif›dSo
) {

1682 
MockA
 
a
;

1683 
	`ON_CALL
(
a
, 
	`R‘uºResuÉ
(
_
))

1684 .
	`WlByDeçuÉ
(
	`R‘uº
(
	`ResuÉ
()));

1689 
Ex³ù©iÚ
 
e
 = 
	`EXPECT_CALL
(
a
, 
	`DoA
(1));

1690 cÚ¡ 
Ex³ù©iÚS‘
 
es
 = 
	`EXPECT_CALL
(
a
, 
	`DoA
(2));

1691 
	`EXPECT_CALL
(
a
, 
	`R‘uºResuÉ
(3))

1692 .
	`Aá”
(
e
, 
es
);

1695 
	`EXPECT_NONFATAL_FAILURE
(
a
.
	`R‘uºResuÉ
(3), "Unexpected mock function call");

1697 
a
.
	`DoA
(2);

1698 
a
.
	`DoA
(1);

1699 
a
.
	`R‘uºResuÉ
(3);

1700 
	}
}

1703 
	$TEST
(
Aá”Te¡
, 
C®lsMu¡S©isfyP¬tŸlOrd”Wh’S³cif›dSo2
) {

1704 
MockA
 
a
;

1709 
Ex³ù©iÚ
 
e
 = 
	`EXPECT_CALL
(
a
, 
	`DoA
(1));

1710 cÚ¡ 
Ex³ù©iÚS‘
 
es
 = 
	`EXPECT_CALL
(
a
, 
	`DoA
(2));

1711 
	`EXPECT_CALL
(
a
, 
	`DoA
(3))

1712 .
	`Aá”
(
e
, 
es
);

1714 
a
.
	`DoA
(2);

1717 
	`EXPECT_NONFATAL_FAILURE
(
a
.
	`DoA
(3), "Unexpected mock function call");

1719 
a
.
	`DoA
(1);

1720 
a
.
	`DoA
(3);

1721 
	}
}

1724 
	$TEST
(
Aá”Te¡
, 
CªBeU£dW™hInSequ’û
) {

1725 
MockA
 
a
;

1726 
Sequ’û
 
s
;

1727 
Ex³ù©iÚ
 
e
 = 
	`EXPECT_CALL
(
a
, 
	`DoA
(1));

1728 
	`EXPECT_CALL
(
a
, 
	`DoA
(2)).
	`InSequ’û
(
s
);

1729 
	`EXPECT_CALL
(
a
, 
	`DoA
(3))

1730 .
	`InSequ’û
(
s
)

1731 .
	`Aá”
(
e
);

1733 
a
.
	`DoA
(1);

1736 
	`EXPECT_NONFATAL_FAILURE
(
a
.
	`DoA
(3), "Unexpected mock function call");

1738 
a
.
	`DoA
(2);

1739 
a
.
	`DoA
(3);

1740 
	}
}

1743 
	$TEST
(
Aá”Te¡
, 
CªBeC®ËdMªyTimes
) {

1744 
MockA
 
a
;

1745 
Ex³ù©iÚ
 
e1
 = 
	`EXPECT_CALL
(
a
, 
	`DoA
(1));

1746 
Ex³ù©iÚ
 
e2
 = 
	`EXPECT_CALL
(
a
, 
	`DoA
(2));

1747 
Ex³ù©iÚ
 
e3
 = 
	`EXPECT_CALL
(
a
, 
	`DoA
(3));

1748 
	`EXPECT_CALL
(
a
, 
	`DoA
(4))

1749 .
	`Aá”
(
e1
)

1750 .
	`Aá”
(
e2
)

1751 .
	`Aá”
(
e3
);

1753 
a
.
	`DoA
(3);

1754 
a
.
	`DoA
(1);

1755 
a
.
	`DoA
(2);

1756 
a
.
	`DoA
(4);

1757 
	}
}

1760 
	$TEST
(
Aá”Te¡
, 
Acû±sUpToFiveArgum’ts
) {

1761 
MockA
 
a
;

1762 
Ex³ù©iÚ
 
e1
 = 
	`EXPECT_CALL
(
a
, 
	`DoA
(1));

1763 
Ex³ù©iÚ
 
e2
 = 
	`EXPECT_CALL
(
a
, 
	`DoA
(2));

1764 
Ex³ù©iÚ
 
e3
 = 
	`EXPECT_CALL
(
a
, 
	`DoA
(3));

1765 
Ex³ù©iÚS‘
 
es1
 = 
	`EXPECT_CALL
(
a
, 
	`DoA
(4));

1766 
Ex³ù©iÚS‘
 
es2
 = 
	`EXPECT_CALL
(
a
, 
	`DoA
(5));

1767 
	`EXPECT_CALL
(
a
, 
	`DoA
(6))

1768 .
	`Aá”
(
e1
, 
e2
, 
e3
, 
es1
, 
es2
);

1770 
a
.
	`DoA
(5);

1771 
a
.
	`DoA
(2);

1772 
a
.
	`DoA
(4);

1773 
a
.
	`DoA
(1);

1774 
a
.
	`DoA
(3);

1775 
a
.
	`DoA
(6);

1776 
	}
}

1779 
	$TEST
(
Aá”Te¡
, 
Acû±sDu¶iÿ‹dIÅut
) {

1780 
MockA
 
a
;

1781 
	`ON_CALL
(
a
, 
	`R‘uºResuÉ
(
_
))

1782 .
	`WlByDeçuÉ
(
	`R‘uº
(
	`ResuÉ
()));

1787 
Ex³ù©iÚ
 
e1
 = 
	`EXPECT_CALL
(
a
, 
	`DoA
(1));

1788 
Ex³ù©iÚ
 
e2
 = 
	`EXPECT_CALL
(
a
, 
	`DoA
(2));

1789 
Ex³ù©iÚS‘
 
es
;

1790 
es
 +ğ
e1
;

1791 
es
 +ğ
e2
;

1792 
	`EXPECT_CALL
(
a
, 
	`R‘uºResuÉ
(3))

1793 .
	`Aá”
(
e1
, 
e2
, 
es
,ƒ1);

1795 
a
.
	`DoA
(1);

1798 
	`EXPECT_NONFATAL_FAILURE
(
a
.
	`R‘uºResuÉ
(3), "Unexpected mock function call");

1800 
a
.
	`DoA
(2);

1801 
a
.
	`R‘uºResuÉ
(3);

1802 
	}
}

1806 
	$TEST
(
Aá”Te¡
, 
ChªgesToEx³ù©iÚS‘HaveNoEfãùAá”w¬ds
) {

1807 
MockA
 
a
;

1808 
Ex³ù©iÚS‘
 
es1
 = 
	`EXPECT_CALL
(
a
, 
	`DoA
(1));

1809 
Ex³ù©iÚ
 
e2
 = 
	`EXPECT_CALL
(
a
, 
	`DoA
(2));

1810 
	`EXPECT_CALL
(
a
, 
	`DoA
(3))

1811 .
	`Aá”
(
es1
);

1812 
es1
 +ğ
e2
;

1814 
a
.
	`DoA
(1);

1815 
a
.
	`DoA
(3);

1816 
a
.
	`DoA
(2);

1817 
	}
}

1823 
	$TEST
(
D–‘šgMockE¬lyTe¡
, 
Sucûss1
) {

1824 
MockB
* cÚ¡ 
b1
 = 
Ãw
 MockB;

1825 
MockA
* cÚ¡ 
a
 = 
Ãw
 MockA;

1826 
MockB
* cÚ¡ 
b2
 = 
Ãw
 MockB;

1829 
InSequ’û
 
dummy
;

1830 
	`EXPECT_CALL
(*
b1
, 
	`DoB
(
_
))

1831 .
	`WlOnû
(
	`R‘uº
(1));

1832 
	`EXPECT_CALL
(*
a
, 
	`Bš¬y
(
_
, _))

1833 .
	`Times
(
	`AnyNumb”
())

1834 .
	`WlR•—‹dly
(
	`R‘uº
(
Œue
));

1835 
	`EXPECT_CALL
(*
b2
, 
	`DoB
(
_
))

1836 .
	`Times
(
	`AnyNumb”
())

1837 .
	`WlR•—‹dly
(
	`R‘uº
(2));

1840 
	`EXPECT_EQ
(1, 
b1
->
	`DoB
(1));

1841 
d–‘e
 
b1
;

1843 
	`EXPECT_TRUE
(
a
->
	`Bš¬y
(0, 1));

1844 
d–‘e
 
b2
;

1846 
	`EXPECT_TRUE
(
a
->
	`Bš¬y
(1, 2));

1847 
d–‘e
 
a
;

1848 
	}
}

1851 
	$TEST
(
D–‘šgMockE¬lyTe¡
, 
Sucûss2
) {

1852 
MockB
* cÚ¡ 
b1
 = 
Ãw
 MockB;

1853 
MockA
* cÚ¡ 
a
 = 
Ãw
 MockA;

1854 
MockB
* cÚ¡ 
b2
 = 
Ãw
 MockB;

1857 
InSequ’û
 
dummy
;

1858 
	`EXPECT_CALL
(*
b1
, 
	`DoB
(
_
))

1859 .
	`WlOnû
(
	`R‘uº
(1));

1860 
	`EXPECT_CALL
(*
a
, 
	`Bš¬y
(
_
, _))

1861 .
	`Times
(
	`AnyNumb”
());

1862 
	`EXPECT_CALL
(*
b2
, 
	`DoB
(
_
))

1863 .
	`Times
(
	`AnyNumb”
())

1864 .
	`WlR•—‹dly
(
	`R‘uº
(2));

1867 
d–‘e
 
a
;

1868 
	`EXPECT_EQ
(1, 
b1
->
	`DoB
(1));

1869 
	`EXPECT_EQ
(2, 
b2
->
	`DoB
(2));

1870 
d–‘e
 
b1
;

1871 
d–‘e
 
b2
;

1872 
	}
}

1878 #ifdeà
_MSC_VER


1879 #´agm¨
	$w¬nšg
(
push
)

1880 #´agm¨
	$w¬nšg
(
di§bË
:4100)

1883 
	$ACTION_P
(
D–‘e
, 
±r
è{ 
d–‘e
…Œ; 
	}
}

1885 #ifdeà
_MSC_VER


1886 #´agm¨
	$w¬nšg
(
pİ
)

1889 
	$TEST
(
D–‘šgMockE¬lyTe¡
, 
CªD–‘eS–fInAùiÚR‘uºšgVoid
) {

1890 
MockA
* cÚ¡ 
a
 = 
Ãw
 MockA;

1891 
	`EXPECT_CALL
(*
a
, 
	`DoA
(
_
)).
	`WlOnû
(
	`D–‘e
(a));

1892 
a
->
	`DoA
(42);

1893 
	}
}

1895 
	$TEST
(
D–‘šgMockE¬lyTe¡
, 
CªD–‘eS–fInAùiÚR‘uºšgV®ue
) {

1896 
MockA
* cÚ¡ 
a
 = 
Ãw
 MockA;

1897 
	`EXPECT_CALL
(*
a
, 
	`R‘uºResuÉ
(
_
))

1898 .
	`WlOnû
(
	`DoAÎ
(
	`D–‘e
(
a
), 
	`R‘uº
(
	`ResuÉ
())));

1899 
a
->
	`R‘uºResuÉ
(42);

1900 
	}
}

1903 
	$TEST
(
D–‘šgMockE¬lyTe¡
, 
Fau»1
) {

1904 
MockB
* cÚ¡ 
b1
 = 
Ãw
 MockB;

1905 
MockA
* cÚ¡ 
a
 = 
Ãw
 MockA;

1906 
MockB
* cÚ¡ 
b2
 = 
Ãw
 MockB;

1909 
InSequ’û
 
dummy
;

1910 
	`EXPECT_CALL
(*
b1
, 
	`DoB
(
_
))

1911 .
	`WlOnû
(
	`R‘uº
(1));

1912 
	`EXPECT_CALL
(*
a
, 
	`Bš¬y
(
_
, _))

1913 .
	`Times
(
	`AnyNumb”
());

1914 
	`EXPECT_CALL
(*
b2
, 
	`DoB
(
_
))

1915 .
	`Times
(
	`AnyNumb”
())

1916 .
	`WlR•—‹dly
(
	`R‘uº
(2));

1919 
d–‘e
 
a
;

1920 
	`EXPECT_NONFATAL_FAILURE
({

1921 
b2
->
	`DoB
(2);

1923 
	`EXPECT_EQ
(1, 
b1
->
	`DoB
(1));

1924 
d–‘e
 
b1
;

1925 
d–‘e
 
b2
;

1926 
	}
}

1929 
	$TEST
(
D–‘šgMockE¬lyTe¡
, 
Fau»2
) {

1930 
MockB
* cÚ¡ 
b1
 = 
Ãw
 MockB;

1931 
MockA
* cÚ¡ 
a
 = 
Ãw
 MockA;

1932 
MockB
* cÚ¡ 
b2
 = 
Ãw
 MockB;

1935 
InSequ’û
 
dummy
;

1936 
	`EXPECT_CALL
(*
b1
, 
	`DoB
(
_
));

1937 
	`EXPECT_CALL
(*
a
, 
	`Bš¬y
(
_
, _))

1938 .
	`Times
(
	`AnyNumb”
());

1939 
	`EXPECT_CALL
(*
b2
, 
	`DoB
(
_
))

1940 .
	`Times
(
	`AnyNumb”
());

1943 
	`EXPECT_NONFATAL_FAILURE
(
d–‘e
 
b1
,

1945 
	`EXPECT_NONFATAL_FAILURE
(
a
->
	`Bš¬y
(0, 1),

1947 
	`EXPECT_NONFATAL_FAILURE
(
b2
->
	`DoB
(1),

1949 
d–‘e
 
a
;

1950 
d–‘e
 
b2
;

1951 
	}
}

1953 şas 
	cEv’Numb”C¬dš®™y
 : 
public
 
C¬dš®™yIÁ”çû
 {

1954 
public
:

1957 
boŞ
 
IsS©isf›dByC®lCouÁ
(
ÿÎ_couÁ
ècÚ¡ 
ov”ride
 {

1958  
ÿÎ_couÁ
 % 2 == 0;

1963 
boŞ
 
IsS©u¿‹dByC®lCouÁ
(ècÚ¡ 
	gov”ride
 {

1964  
	gçl£
;

1968 
DesüibeTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

1969 *
os
 << "calledƒven‚umber ofimes";

1973 
C¬dš®™y
 
	$Ev’Numb”
() {

1974  
	`C¬dš®™y
(
Ãw
 
Ev’Numb”C¬dš®™y
);

1975 
	}
}

1977 
	$TEST
(
Ex³ù©iÚBa£Te¡
,

1978 
AÎP»»quis™esA»S©isf›dWÜksFÜNÚMÚÙÚicC¬dš®™y
) {

1979 
MockA
* 
a
 = 
Ãw
 MockA;

1980 
Sequ’û
 
s
;

1982 
	`EXPECT_CALL
(*
a
, 
	`DoA
(1))

1983 .
	`Times
(
	`Ev’Numb”
())

1984 .
	`InSequ’û
(
s
);

1985 
	`EXPECT_CALL
(*
a
, 
	`DoA
(2))

1986 .
	`Times
(
	`AnyNumb”
())

1987 .
	`InSequ’û
(
s
);

1988 
	`EXPECT_CALL
(*
a
, 
	`DoA
(3))

1989 .
	`Times
(
	`AnyNumb”
());

1991 
a
->
	`DoA
(3);

1992 
a
->
	`DoA
(1);

1993 
	`EXPECT_NONFATAL_FAILURE
(
a
->
	`DoA
(2), "Unexpected mock function call");

1994 
	`EXPECT_NONFATAL_FAILURE
(
d–‘e
 
a
, "to be calledƒven‚umber ofimes");

1995 
	}
}

2000 
	sPršbË
 {

2003 
šlše
 
	gİ”©Ü
<<(::
¡d
::
o¡»am
& 
os
, cÚ¡ 
	gPršbË
&) {

2004 
	gos
 << "Printable";

2007 
	sUÅršbË
 {

2008 
UÅršbË
(è: 
v®ue
(0) {}

2009 
v®ue
;

2012 şas 
	cMockC
 {

2013 
	gpublic
:

2014 
MockC
() {}

2016 
MOCK_METHOD6
(
VoidM‘hod
, (
boŞ
 
cÚd
, 
n
, 
¡d
::
¡ršg
 
s
, * 
p
,

2017 cÚ¡ 
PršbË
& 
x
, 
UÅršbË
 
y
));

2018 
MOCK_METHOD0
(
NÚVoidM‘hod
, ());

2020 
	g´iv©e
:

2021 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
MockC
);

2024 şas 
	cV”bo£FÏgP»£rvšgFixtu»
 : 
public
 
‹¡šg
::
Te¡
 {

2025 
´Ùeùed
:

2026 
V”bo£FÏgP»£rvšgFixtu»
()

2027 : 
§ved_v”bo£_æag_
(
GMOCK_FLAG
(
v”bo£
)) {}

2029 ~
V”bo£FÏgP»£rvšgFixtu»
(è
ov”ride
 {

2030 
GMOCK_FLAG
(
v”bo£
èğ
§ved_v”bo£_æag_
;

2033 
	g´iv©e
:

2034 cÚ¡ 
¡d
::
¡ršg
 
§ved_v”bo£_æag_
;

2036 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
V”bo£FÏgP»£rvšgFixtu»
);

2039 #ià
GTEST_HAS_STREAM_REDIRECTION


2044 
	$TEST
(
FunùiÚC®lMes§geTe¡
,

2045 
Unš‹»¡šgC®lOnNaggyMockG’”©esNoSckT¿ûWh’V”bo£W¬nšg
) {

2046 
	`GMOCK_FLAG
(
v”bo£
èğ
kW¬nšgV”bos™y
;

2047 
NaggyMock
<
MockC
> 
c
;

2048 
	`C­tu»Stdout
();

2049 
c
.
	`VoidM‘hod
(
çl£
, 5, "Hi", 
nuÎ±r
, 
	`PršbË
(), 
	`UÅršbË
());

2050 cÚ¡ 
¡d
::
¡ršg
 
ouut
 = 
	`G‘C­tu»dStdout
();

2051 
	`EXPECT_PRED_FORMAT2
(
IsSub¡ršg
, "GMOCK WARNING", 
ouut
);

2052 
	`EXPECT_PRED_FORMAT2
(
IsNÙSub¡ršg
, "Sck¿û:", 
ouut
);

2053 
	}
}

2058 
	$TEST
(
FunùiÚC®lMes§geTe¡
,

2059 
Unš‹»¡šgC®lOnNaggyMockG’”©esFyiW™hSckT¿ûWh’V”bo£Info
) {

2060 
	`GMOCK_FLAG
(
v”bo£
èğ
kInfoV”bos™y
;

2061 
NaggyMock
<
MockC
> 
c
;

2062 
	`C­tu»Stdout
();

2063 
c
.
	`VoidM‘hod
(
çl£
, 5, "Hi", 
nuÎ±r
, 
	`PršbË
(), 
	`UÅršbË
());

2064 cÚ¡ 
¡d
::
¡ršg
 
ouut
 = 
	`G‘C­tu»dStdout
();

2065 
	`EXPECT_PRED_FORMAT2
(
IsSub¡ršg
, "GMOCK WARNING", 
ouut
);

2066 
	`EXPECT_PRED_FORMAT2
(
IsSub¡ršg
, "Sck¿û:", 
ouut
);

2068 #iâdeà
NDEBUG


2075 
	`EXPECT_PRED_FORMAT2
(
IsSub¡ršg
, "VoidM‘hod(", 
ouut
);

2079 
	`C­tu»Stdout
();

2080 
c
.
	`NÚVoidM‘hod
();

2081 cÚ¡ 
¡d
::
¡ršg
 
ouut2
 = 
	`G‘C­tu»dStdout
();

2082 
	`EXPECT_PRED_FORMAT2
(
IsSub¡ršg
, "NÚVoidM‘hod(", 
ouut2
);

2085 
	}
}

2089 
	$TEST
(
FunùiÚC®lMes§geTe¡
,

2090 
Unš‹»¡šgC®lOnNaggyMockPrštsArgum’tsAndR‘uºV®ue
) {

2092 
NaggyMock
<
MockB
> 
b
;

2093 
	`C­tu»Stdout
();

2094 
b
.
	`DoB
();

2095 cÚ¡ 
¡d
::
¡ršg
 
ouut1
 = 
	`G‘C­tu»dStdout
();

2096 
	`EXPECT_PRED_FORMAT2
(

2097 
IsSub¡ršg
,

2100 " R‘uºs: 0\n", 
ouut1
.
	`c_¡r
());

2104 
NaggyMock
<
MockC
> 
c
;

2105 
	`C­tu»Stdout
();

2106 
c
.
	`VoidM‘hod
(
çl£
, 5, "Hi", 
nuÎ±r
, 
	`PršbË
(), 
	`UÅršbË
());

2107 cÚ¡ 
¡d
::
¡ršg
 
ouut2
 = 
	`G‘C­tu»dStdout
();

2108 
	`EXPECT_THAT
(
ouut2
.
	`c_¡r
(),

2109 
	`CÚšsRegex
(

2115 
	}
}

2119 şas 
	cGMockV”bo£FÏgTe¡
 : 
public
 
V”bo£FÏgP»£rvšgFixtu»
 {

2120 
public
:

2125 
V”ifyOuut
(cÚ¡ 
¡d
::
¡ršg
& 
ouut
, 
boŞ
 
should_´št
,

2126 cÚ¡ 
¡d
::
¡ršg
& 
ex³ùed_sub¡ršg
,

2127 cÚ¡ 
¡d
::
¡ršg
& 
funùiÚ_Çme
) {

2128 ià(
should_´št
) {

2129 
EXPECT_THAT
(
ouut
.
c_¡r
(), 
HasSub¡r
(
ex³ùed_sub¡ršg
));

2130 #iâdeà
NDEBUG


2133 
EXPECT_THAT
(
ouut
.
c_¡r
(), 
HasSub¡r
(
funùiÚ_Çme
));

2136 
	g¡©ic_ÿ¡
<>(
	gfunùiÚ_Çme
);

2139 
EXPECT_STREQ
("", 
ouut
.
c_¡r
());

2144 
Te¡Ex³ùedC®l
(
boŞ
 
should_´št
) {

2145 
MockA
 
	ga
;

2146 
EXPECT_CALL
(
a
, 
DoA
(5));

2147 
EXPECT_CALL
(
a
, 
Bš¬y
(
_
, 1))

2148 .
WlOnû
(
R‘uº
(
Œue
));

2151 
C­tu»Stdout
();

2152 
	ga
.
DoA
(5);

2153 
V”ifyOuut
(

2154 
G‘C­tu»dStdout
(),

2155 
should_´št
,

2162 
C­tu»Stdout
();

2163 
	ga
.
Bš¬y
(2, 1);

2164 
V”ifyOuut
(

2165 
G‘C­tu»dStdout
(),

2166 
should_´št
,

2175 
Te¡Unš‹»¡šgC®lOnNaggyMock
(
boŞ
 
should_´št
) {

2176 
	gNaggyMock
<
	gMockA
> 
	ga
;

2177 cÚ¡ 
	g¡d
::
¡ršg
 
nÙe
 =

2187 
C­tu»Stdout
();

2188 
	ga
.
DoA
(5);

2189 
V”ifyOuut
(

2190 
G‘C­tu»dStdout
(),

2191 
should_´št
,

2195 
nÙe
,

2199 
C­tu»Stdout
();

2200 
	ga
.
Bš¬y
(2, 1);

2201 
V”ifyOuut
(

2202 
G‘C­tu»dStdout
(),

2203 
should_´št
,

2208 
nÙe
,

2215 
	$TEST_F
(
GMockV”bo£FÏgTe¡
, 
Info
) {

2216 
	`GMOCK_FLAG
(
v”bo£
èğ
kInfoV”bos™y
;

2217 
	`Te¡Ex³ùedC®l
(
Œue
);

2218 
	`Te¡Unš‹»¡šgC®lOnNaggyMock
(
Œue
);

2219 
	}
}

2223 
	$TEST_F
(
GMockV”bo£FÏgTe¡
, 
W¬nšg
) {

2224 
	`GMOCK_FLAG
(
v”bo£
èğ
kW¬nšgV”bos™y
;

2225 
	`Te¡Ex³ùedC®l
(
çl£
);

2226 
	`Te¡Unš‹»¡šgC®lOnNaggyMock
(
Œue
);

2227 
	}
}

2231 
	$TEST_F
(
GMockV”bo£FÏgTe¡
, 
E¼Ü
) {

2232 
	`GMOCK_FLAG
(
v”bo£
èğ
kE¼ÜV”bos™y
;

2233 
	`Te¡Ex³ùedC®l
(
çl£
);

2234 
	`Te¡Unš‹»¡šgC®lOnNaggyMock
(
çl£
);

2235 
	}
}

2239 
	$TEST_F
(
GMockV”bo£FÏgTe¡
, 
Inv®idFÏgIsT»©edAsW¬nšg
) {

2240 
	`GMOCK_FLAG
(
v”bo£
) = "invalid";

2241 
	`Te¡Ex³ùedC®l
(
çl£
);

2242 
	`Te¡Unš‹»¡šgC®lOnNaggyMock
(
Œue
);

2243 
	}
}

2250 şas 
	cPrštMeNÙ
 {};

2252 
	$PrštTo
(
PrštMeNÙ
 , ::
¡d
::
o¡»am
* ) {

2253 
	`ADD_FAILURE
() << "Google Mock is…rinting‡ valuehat shouldn't be "

2255 
	}
}

2257 şas 
	cLogTe¡H–³r
 {

2258 
	gpublic
:

2259 
LogTe¡H–³r
() {}

2261 
MOCK_METHOD1
(
Foo
, 
PrštMeNÙ
(PrintMeNot));

2263 
	g´iv©e
:

2264 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
LogTe¡H–³r
);

2267 şas 
	cGMockLogTe¡
 : 
public
 
V”bo£FÏgP»£rvšgFixtu»
 {

2268 
´Ùeùed
:

2269 
LogTe¡H–³r
 
h–³r_
;

2272 
	$TEST_F
(
GMockLogTe¡
, 
DÛsNÙPrštGoodC®lIÁ”ÇÎyIfV”bos™yIsW¬nšg
) {

2273 
	`GMOCK_FLAG
(
v”bo£
èğ
kW¬nšgV”bos™y
;

2274 
	`EXPECT_CALL
(
h–³r_
, 
	`Foo
(
_
))

2275 .
	`WlOnû
(
	`R‘uº
(
	`PrštMeNÙ
()));

2276 
h–³r_
.
	`Foo
(
	`PrštMeNÙ
());

2277 
	}
}

2279 
	$TEST_F
(
GMockLogTe¡
, 
DÛsNÙPrštGoodC®lIÁ”ÇÎyIfV”bos™yIsE¼Ü
) {

2280 
	`GMOCK_FLAG
(
v”bo£
èğ
kE¼ÜV”bos™y
;

2281 
	`EXPECT_CALL
(
h–³r_
, 
	`Foo
(
_
))

2282 .
	`WlOnû
(
	`R‘uº
(
	`PrštMeNÙ
()));

2283 
h–³r_
.
	`Foo
(
	`PrštMeNÙ
());

2284 
	}
}

2286 
	$TEST_F
(
GMockLogTe¡
, 
DÛsNÙPrštW¬nšgIÁ”ÇÎyIfV”bos™yIsE¼Ü
) {

2287 
	`GMOCK_FLAG
(
v”bo£
èğ
kE¼ÜV”bos™y
;

2288 
	`ON_CALL
(
h–³r_
, 
	`Foo
(
_
))

2289 .
	`WlByDeçuÉ
(
	`R‘uº
(
	`PrštMeNÙ
()));

2290 
h–³r_
.
	`Foo
(
	`PrštMeNÙ
());

2291 
	}
}

2295 
	$TEST
(
AÎowL—kTe¡
, 
AÎowsL—kšgUnu£dMockObjeù
) {

2296 
MockA
* 
a
 = 
Ãw
 MockA;

2297 
Mock
::
	`AÎowL—k
(
a
);

2298 
	}
}

2300 
	$TEST
(
AÎowL—kTe¡
, 
CªBeC®ËdBefÜeOnC®l
) {

2301 
MockA
* 
a
 = 
Ãw
 MockA;

2302 
Mock
::
	`AÎowL—k
(
a
);

2303 
	`ON_CALL
(*
a
, 
	`DoA
(
_
)).
	`WlByDeçuÉ
(
	`R‘uº
());

2304 
a
->
	`DoA
(0);

2305 
	}
}

2307 
	$TEST
(
AÎowL—kTe¡
, 
CªBeC®ËdAá”OnC®l
) {

2308 
MockA
* 
a
 = 
Ãw
 MockA;

2309 
	`ON_CALL
(*
a
, 
	`DoA
(
_
)).
	`WlByDeçuÉ
(
	`R‘uº
());

2310 
Mock
::
	`AÎowL—k
(
a
);

2311 
	}
}

2313 
	$TEST
(
AÎowL—kTe¡
, 
CªBeC®ËdBefÜeEx³ùC®l
) {

2314 
MockA
* 
a
 = 
Ãw
 MockA;

2315 
Mock
::
	`AÎowL—k
(
a
);

2316 
	`EXPECT_CALL
(*
a
, 
	`DoA
(
_
));

2317 
a
->
	`DoA
(0);

2318 
	}
}

2320 
	$TEST
(
AÎowL—kTe¡
, 
CªBeC®ËdAá”Ex³ùC®l
) {

2321 
MockA
* 
a
 = 
Ãw
 MockA;

2322 
	`EXPECT_CALL
(*
a
, 
	`DoA
(
_
)).
	`Times
(
	`AnyNumb”
());

2323 
Mock
::
	`AÎowL—k
(
a
);

2324 
	}
}

2326 
	$TEST
(
AÎowL—kTe¡
, 
WÜksWh’BÙhOnC®lAndEx³ùC®lA»P»£Á
) {

2327 
MockA
* 
a
 = 
Ãw
 MockA;

2328 
	`ON_CALL
(*
a
, 
	`DoA
(
_
)).
	`WlByDeçuÉ
(
	`R‘uº
());

2329 
	`EXPECT_CALL
(*
a
, 
	`DoA
(
_
)).
	`Times
(
	`AnyNumb”
());

2330 
Mock
::
	`AÎowL—k
(
a
);

2331 
	}
}

2335 
	$TEST
(
V”ifyAndCË¬Ex³ù©iÚsTe¡
, 
NoM‘hodHasEx³ù©iÚs
) {

2336 
MockB
 
b
;

2337 
	`ASSERT_TRUE
(
Mock
::
	`V”ifyAndCË¬Ex³ù©iÚs
(&
b
));

2341 
	`EXPECT_EQ
(0, 
b
.
	`DoB
());

2342 
	`EXPECT_EQ
(0, 
b
.
	`DoB
(1));

2343 
	}
}

2348 
	$TEST
(
V”ifyAndCË¬Ex³ù©iÚsTe¡
, 
SomeM‘hodsHaveEx³ù©iÚsAndSucûed
) {

2349 
MockB
 
b
;

2350 
	`EXPECT_CALL
(
b
, 
	`DoB
())

2351 .
	`WlOnû
(
	`R‘uº
(1));

2352 
b
.
	`DoB
();

2353 
	`ASSERT_TRUE
(
Mock
::
	`V”ifyAndCË¬Ex³ù©iÚs
(&
b
));

2357 
	`EXPECT_EQ
(0, 
b
.
	`DoB
());

2358 
	`EXPECT_EQ
(0, 
b
.
	`DoB
(1));

2359 
	}
}

2364 
	$TEST
(
V”ifyAndCË¬Ex³ù©iÚsTe¡
, 
SomeM‘hodsHaveEx³ù©iÚsAndFa
) {

2365 
MockB
 
b
;

2366 
	`EXPECT_CALL
(
b
, 
	`DoB
())

2367 .
	`WlOnû
(
	`R‘uº
(1));

2368 
boŞ
 
»suÉ
 = 
Œue
;

2369 
	`EXPECT_NONFATAL_FAILURE
(
»suÉ
 = 
Mock
::
	`V”ifyAndCË¬Ex³ù©iÚs
(&
b
),

2371 
	`ASSERT_FALSE
(
»suÉ
);

2375 
	`EXPECT_EQ
(0, 
b
.
	`DoB
());

2376 
	`EXPECT_EQ
(0, 
b
.
	`DoB
(1));

2377 
	}
}

2381 
	$TEST
(
V”ifyAndCË¬Ex³ù©iÚsTe¡
, 
AÎM‘hodsHaveEx³ù©iÚs
) {

2382 
MockB
 
b
;

2383 
	`EXPECT_CALL
(
b
, 
	`DoB
())

2384 .
	`WlOnû
(
	`R‘uº
(1));

2385 
	`EXPECT_CALL
(
b
, 
	`DoB
(
_
))

2386 .
	`WlOnû
(
	`R‘uº
(2));

2387 
b
.
	`DoB
();

2388 
b
.
	`DoB
(1);

2389 
	`ASSERT_TRUE
(
Mock
::
	`V”ifyAndCË¬Ex³ù©iÚs
(&
b
));

2393 
	`EXPECT_EQ
(0, 
b
.
	`DoB
());

2394 
	`EXPECT_EQ
(0, 
b
.
	`DoB
(1));

2395 
	}
}

2399 
	$TEST
(
V”ifyAndCË¬Ex³ù©iÚsTe¡
, 
AM‘hodHasMªyEx³ù©iÚs
) {

2400 
MockB
 
b
;

2401 
	`EXPECT_CALL
(
b
, 
	`DoB
(0))

2402 .
	`WlOnû
(
	`R‘uº
(1));

2403 
	`EXPECT_CALL
(
b
, 
	`DoB
(
_
))

2404 .
	`WlOnû
(
	`R‘uº
(2));

2405 
b
.
	`DoB
(1);

2406 
boŞ
 
»suÉ
 = 
Œue
;

2407 
	`EXPECT_NONFATAL_FAILURE
(
»suÉ
 = 
Mock
::
	`V”ifyAndCË¬Ex³ù©iÚs
(&
b
),

2409 
	`ASSERT_FALSE
(
»suÉ
);

2413 
	`EXPECT_EQ
(0, 
b
.
	`DoB
());

2414 
	`EXPECT_EQ
(0, 
b
.
	`DoB
(1));

2415 
	}
}

2419 
	$TEST
(
V”ifyAndCË¬Ex³ù©iÚsTe¡
, 
CªC®lMªyTimes
) {

2420 
MockB
 
b
;

2421 
	`EXPECT_CALL
(
b
, 
	`DoB
());

2422 
b
.
	`DoB
();

2423 
Mock
::
	`V”ifyAndCË¬Ex³ù©iÚs
(&
b
);

2425 
	`EXPECT_CALL
(
b
, 
	`DoB
(
_
))

2426 .
	`WlOnû
(
	`R‘uº
(1));

2427 
b
.
	`DoB
(1);

2428 
Mock
::
	`V”ifyAndCË¬Ex³ù©iÚs
(&
b
);

2429 
Mock
::
	`V”ifyAndCË¬Ex³ù©iÚs
(&
b
);

2433 
	`EXPECT_EQ
(0, 
b
.
	`DoB
());

2434 
	`EXPECT_EQ
(0, 
b
.
	`DoB
(1));

2435 
	}
}

2439 
	$TEST
(
V”ifyAndCË¬Te¡
, 
NoM‘hodHasDeçuÉAùiÚs
) {

2440 
MockB
 
b
;

2442 
Mock
::
	`V”ifyAndCË¬
(&
b
);

2443 
	`EXPECT_EQ
(0, 
b
.
	`DoB
());

2444 
	}
}

2448 
	$TEST
(
V”ifyAndCË¬Te¡
, 
SomeM‘hodsHaveDeçuÉAùiÚs
) {

2449 
MockB
 
b
;

2450 
	`ON_CALL
(
b
, 
	`DoB
())

2451 .
	`WlByDeçuÉ
(
	`R‘uº
(1));

2453 
Mock
::
	`V”ifyAndCË¬
(&
b
);

2456 
	`EXPECT_EQ
(0, 
b
.
	`DoB
());

2457 
	}
}

2461 
	$TEST
(
V”ifyAndCË¬Te¡
, 
AÎM‘hodsHaveDeçuÉAùiÚs
) {

2462 
MockB
 
b
;

2463 
	`ON_CALL
(
b
, 
	`DoB
())

2464 .
	`WlByDeçuÉ
(
	`R‘uº
(1));

2465 
	`ON_CALL
(
b
, 
	`DoB
(
_
))

2466 .
	`WlByDeçuÉ
(
	`R‘uº
(2));

2468 
Mock
::
	`V”ifyAndCË¬
(&
b
);

2471 
	`EXPECT_EQ
(0, 
b
.
	`DoB
());

2474 
	`EXPECT_EQ
(0, 
b
.
	`DoB
(0));

2475 
	}
}

2479 
	$TEST
(
V”ifyAndCË¬Te¡
, 
AM‘hodHasMªyDeçuÉAùiÚs
) {

2480 
MockB
 
b
;

2481 
	`ON_CALL
(
b
, 
	`DoB
(0))

2482 .
	`WlByDeçuÉ
(
	`R‘uº
(1));

2483 
	`ON_CALL
(
b
, 
	`DoB
(
_
))

2484 .
	`WlByDeçuÉ
(
	`R‘uº
(2));

2486 
Mock
::
	`V”ifyAndCË¬
(&
b
);

2490 
	`EXPECT_EQ
(0, 
b
.
	`DoB
(0));

2491 
	`EXPECT_EQ
(0, 
b
.
	`DoB
(1));

2492 
	}
}

2496 
	$TEST
(
V”ifyAndCË¬Te¡
, 
CªC®lMªyTimes
) {

2497 
MockB
 
b
;

2498 
	`ON_CALL
(
b
, 
	`DoB
())

2499 .
	`WlByDeçuÉ
(
	`R‘uº
(1));

2500 
Mock
::
	`V”ifyAndCË¬
(&
b
);

2501 
Mock
::
	`V”ifyAndCË¬
(&
b
);

2503 
	`ON_CALL
(
b
, 
	`DoB
(
_
))

2504 .
	`WlByDeçuÉ
(
	`R‘uº
(1));

2505 
Mock
::
	`V”ifyAndCË¬
(&
b
);

2507 
	`EXPECT_EQ
(0, 
b
.
	`DoB
());

2508 
	`EXPECT_EQ
(0, 
b
.
	`DoB
(1));

2509 
	}
}

2512 
	$TEST
(
V”ifyAndCË¬Te¡
, 
Sucûss
) {

2513 
MockB
 
b
;

2514 
	`ON_CALL
(
b
, 
	`DoB
())

2515 .
	`WlByDeçuÉ
(
	`R‘uº
(1));

2516 
	`EXPECT_CALL
(
b
, 
	`DoB
(1))

2517 .
	`WlOnû
(
	`R‘uº
(2));

2519 
b
.
	`DoB
();

2520 
b
.
	`DoB
(1);

2521 
	`ASSERT_TRUE
(
Mock
::
	`V”ifyAndCË¬
(&
b
));

2525 
	`EXPECT_EQ
(0, 
b
.
	`DoB
());

2526 
	`EXPECT_EQ
(0, 
b
.
	`DoB
(1));

2527 
	}
}

2530 
	$TEST
(
V”ifyAndCË¬Te¡
, 
Fau»
) {

2531 
MockB
 
b
;

2532 
	`ON_CALL
(
b
, 
	`DoB
(
_
))

2533 .
	`WlByDeçuÉ
(
	`R‘uº
(1));

2534 
	`EXPECT_CALL
(
b
, 
	`DoB
())

2535 .
	`WlOnû
(
	`R‘uº
(2));

2537 
b
.
	`DoB
(1);

2538 
boŞ
 
»suÉ
 = 
Œue
;

2539 
	`EXPECT_NONFATAL_FAILURE
(
»suÉ
 = 
Mock
::
	`V”ifyAndCË¬
(&
b
),

2541 
	`ASSERT_FALSE
(
»suÉ
);

2545 
	`EXPECT_EQ
(0, 
b
.
	`DoB
());

2546 
	`EXPECT_EQ
(0, 
b
.
	`DoB
(1));

2547 
	}
}

2551 
	$TEST
(
V”ifyAndCË¬Te¡
, 
CÚ¡
) {

2552 
MockB
 
b
;

2553 
	`ON_CALL
(
	`CÚ¡
(
b
), 
	`DoB
())

2554 .
	`WlByDeçuÉ
(
	`R‘uº
(1));

2556 
	`EXPECT_CALL
(
	`CÚ¡
(
b
), 
	`DoB
())

2557 .
	`WlOnû
(
	`DoDeçuÉ
())

2558 .
	`WlOnû
(
	`R‘uº
(2));

2560 
b
.
	`DoB
();

2561 
b
.
	`DoB
();

2562 
	`ASSERT_TRUE
(
Mock
::
	`V”ifyAndCË¬
(&
b
));

2566 
	`EXPECT_EQ
(0, 
b
.
	`DoB
());

2567 
	`EXPECT_EQ
(0, 
b
.
	`DoB
(1));

2568 
	}
}

2572 
	$TEST
(
V”ifyAndCË¬Te¡
, 
CªS‘DeçuÉAùiÚsAndEx³ù©iÚsAá”w¬ds
) {

2573 
MockB
 
b
;

2574 
	`ON_CALL
(
b
, 
	`DoB
())

2575 .
	`WlByDeçuÉ
(
	`R‘uº
(1));

2576 
	`EXPECT_CALL
(
b
, 
	`DoB
(
_
))

2577 .
	`WlOnû
(
	`R‘uº
(2));

2578 
b
.
	`DoB
(1);

2580 
Mock
::
	`V”ifyAndCË¬
(&
b
);

2582 
	`EXPECT_CALL
(
b
, 
	`DoB
())

2583 .
	`WlOnû
(
	`R‘uº
(3));

2584 
	`ON_CALL
(
b
, 
	`DoB
(
_
))

2585 .
	`WlByDeçuÉ
(
	`R‘uº
(4));

2587 
	`EXPECT_EQ
(3, 
b
.
	`DoB
());

2588 
	`EXPECT_EQ
(4, 
b
.
	`DoB
(1));

2589 
	}
}

2593 
	$TEST
(
V”ifyAndCË¬Te¡
, 
DÛsNÙAfãùOth”MockObjeùs
) {

2594 
MockA
 
a
;

2595 
MockB
 
b1
;

2596 
MockB
 
b2
;

2598 
	`ON_CALL
(
a
, 
	`Bš¬y
(
_
, _))

2599 .
	`WlByDeçuÉ
(
	`R‘uº
(
Œue
));

2600 
	`EXPECT_CALL
(
a
, 
	`Bš¬y
(
_
, _))

2601 .
	`WlOnû
(
	`DoDeçuÉ
())

2602 .
	`WlOnû
(
	`R‘uº
(
çl£
));

2604 
	`ON_CALL
(
b1
, 
	`DoB
())

2605 .
	`WlByDeçuÉ
(
	`R‘uº
(1));

2606 
	`EXPECT_CALL
(
b1
, 
	`DoB
(
_
))

2607 .
	`WlOnû
(
	`R‘uº
(2));

2609 
	`ON_CALL
(
b2
, 
	`DoB
())

2610 .
	`WlByDeçuÉ
(
	`R‘uº
(3));

2611 
	`EXPECT_CALL
(
b2
, 
	`DoB
(
_
));

2613 
b2
.
	`DoB
(0);

2614 
Mock
::
	`V”ifyAndCË¬
(&
b2
);

2618 
	`EXPECT_TRUE
(
a
.
	`Bš¬y
(0, 0));

2619 
	`EXPECT_FALSE
(
a
.
	`Bš¬y
(0, 0));

2621 
	`EXPECT_EQ
(1, 
b1
.
	`DoB
());

2622 
	`EXPECT_EQ
(2, 
b1
.
	`DoB
(0));

2623 
	}
}

2625 
	$TEST
(
V”ifyAndCË¬Te¡
,

2626 
De¡royšgChašedMocksDÛsNÙD—dlockThroughEx³ù©iÚs
) {

2627 
¡d
::
sh¬ed_±r
<
MockA
> 
	`a
(
Ãw
 MockA);

2628 
Reã»nûHŞdšgMock
 
‹¡_mock
;

2631 
	`EXPECT_CALL
(
‹¡_mock
, 
	`Acû±Reã»nû
(
_
))

2632 .
	`WlR•—‹dly
(
S‘ArgPoš‹e
<0>(
a
));

2636 
a
.
	`»£t
();

2643 
	}
}

2645 
	$TEST
(
V”ifyAndCË¬Te¡
,

2646 
De¡royšgChašedMocksDÛsNÙD—dlockThroughDeçuÉAùiÚ
) {

2647 
¡d
::
sh¬ed_±r
<
MockA
> 
	`a
(
Ãw
 MockA);

2648 
Reã»nûHŞdšgMock
 
‹¡_mock
;

2651 
	`ON_CALL
(
‹¡_mock
, 
	`Acû±Reã»nû
(
_
))

2652 .
	`WlByDeçuÉ
(
S‘ArgPoš‹e
<0>(
a
));

2656 
a
.
	`»£t
();

2663 
	}
}

2670 
	$TEST
(
SynchrÚiz©iÚTe¡
, 
CªC®lMockM‘hodInAùiÚ
) {

2671 
MockA
 
a
;

2672 
MockC
 
c
;

2673 
	`ON_CALL
(
a
, 
	`DoA
(
_
))

2674 .
	`WlByDeçuÉ
(
	`IgnÜeResuÉ
(
	`InvokeW™houtArgs
(&
c
,

2675 &
MockC
::
NÚVoidM‘hod
)));

2676 
	`EXPECT_CALL
(
a
, 
	`DoA
(1));

2677 
	`EXPECT_CALL
(
a
, 
	`DoA
(1))

2678 .
	`WlOnû
(
	`Invoke
(&
a
, &
MockA
::
DoA
))

2679 .
	`R‘œesOnS©u¿tiÚ
();

2680 
	`EXPECT_CALL
(
c
, 
	`NÚVoidM‘hod
());

2682 
a
.
	`DoA
(1);

2687 
	}
}

2689 
	$TEST
(
P¬am‘”ËssEx³ù©iÚsTe¡
, 
CªS‘Ex³ù©iÚsW™houtM©ch”s
) {

2690 
MockA
 
a
;

2691 
do_a_¬g0
 = 0;

2692 
	`ON_CALL
(
a
, 
DoA
).
	`WlByDeçuÉ
(
SaveArg
<0>(&
do_a_¬g0
));

2693 
do_a_47_¬g0
 = 0;

2694 
	`ON_CALL
(
a
, 
	`DoA
(47)).
	`WlByDeçuÉ
(
SaveArg
<0>(&
do_a_47_¬g0
));

2696 
a
.
	`DoA
(17);

2697 
	`EXPECT_THAT
(
do_a_¬g0
, 17);

2698 
	`EXPECT_THAT
(
do_a_47_¬g0
, 0);

2699 
a
.
	`DoA
(47);

2700 
	`EXPECT_THAT
(
do_a_¬g0
, 17);

2701 
	`EXPECT_THAT
(
do_a_47_¬g0
, 47);

2703 
	`ON_CALL
(
a
, 
Bš¬y
).
	`WlByDeçuÉ
(
	`R‘uº
(
Œue
));

2704 
	`ON_CALL
(
a
, 
	`Bš¬y
(
_
, 14)).
	`WlByDeçuÉ
(
	`R‘uº
(
çl£
));

2705 
	`EXPECT_THAT
(
a
.
	`Bš¬y
(14, 17), 
Œue
);

2706 
	`EXPECT_THAT
(
a
.
	`Bš¬y
(17, 14), 
çl£
);

2707 
	}
}

2709 
	$TEST
(
P¬am‘”ËssEx³ù©iÚsTe¡
, 
CªS‘Ex³ù©iÚsFÜOv”lßdedM‘hods
) {

2710 
MockB
 
b
;

2711 
	`ON_CALL
(
b
, 
	`DoB
()).
	`WlByDeçuÉ
(
	`R‘uº
(9));

2712 
	`ON_CALL
(
b
, 
	`DoB
(5)).
	`WlByDeçuÉ
(
	`R‘uº
(11));

2714 
	`EXPECT_THAT
(
b
.
	`DoB
(), 9);

2715 
	`EXPECT_THAT
(
b
.
	`DoB
(1), 0);

2716 
	`EXPECT_THAT
(
b
.
	`DoB
(5), 11);

2717 
	}
}

2719 
	sMockW™hCÚ¡M‘hods
 {

2720 
	gpublic
:

2721 
MOCK_CONST_METHOD1
(
Foo
, ());

2722 
MOCK_CONST_METHOD2
(
B¬
, (, const *));

2725 
	$TEST
(
P¬am‘”ËssEx³ù©iÚsTe¡
, 
CªS‘Ex³ù©iÚsFÜCÚ¡M‘hods
) {

2726 
MockW™hCÚ¡M‘hods
 
mock
;

2727 
	`ON_CALL
(
mock
, 
Foo
).
	`WlByDeçuÉ
(
	`R‘uº
(7));

2728 
	`ON_CALL
(
mock
, 
B¬
).
	`WlByDeçuÉ
(
	`R‘uº
(33));

2730 
	`EXPECT_THAT
(
mock
.
	`Foo
(17), 7);

2731 
	`EXPECT_THAT
(
mock
.
	`B¬
(27, "purple"), 33);

2732 
	}
}

2734 şas 
	cMockCÚ¡Ov”lßd
 {

2735 
	gpublic
:

2736 
MOCK_METHOD1
(
Ov”lßded
, ());

2737 
MOCK_CONST_METHOD1
(
Ov”lßded
, ());

2740 
	$TEST
(
P¬am‘”ËssEx³ù©iÚsTe¡
,

2741 
CªS‘Ex³ù©iÚsFÜCÚ¡Ov”lßdedM‘hods
) {

2742 
MockCÚ¡Ov”lßd
 
mock
;

2743 
	`ON_CALL
(
mock
, 
	`Ov”lßded
(
_
)).
	`WlByDeçuÉ
(
	`R‘uº
(7));

2744 
	`ON_CALL
(
mock
, 
	`Ov”lßded
(5)).
	`WlByDeçuÉ
(
	`R‘uº
(9));

2745 
	`ON_CALL
(
	`CÚ¡
(
mock
), 
	`Ov”lßded
(5)).
	`WlByDeçuÉ
(
	`R‘uº
(11));

2746 
	`ON_CALL
(
	`CÚ¡
(
mock
), 
	`Ov”lßded
(7)).
	`WlByDeçuÉ
(
	`R‘uº
(13));

2748 
	`EXPECT_THAT
(
mock
.
	`Ov”lßded
(1), 7);

2749 
	`EXPECT_THAT
(
mock
.
	`Ov”lßded
(5), 9);

2750 
	`EXPECT_THAT
(
mock
.
	`Ov”lßded
(7), 7);

2752 cÚ¡ 
MockCÚ¡Ov”lßd
& 
cÚ¡_mock
 = 
mock
;

2753 
	`EXPECT_THAT
(
cÚ¡_mock
.
	`Ov”lßded
(1), 0);

2754 
	`EXPECT_THAT
(
cÚ¡_mock
.
	`Ov”lßded
(5), 11);

2755 
	`EXPECT_THAT
(
cÚ¡_mock
.
	`Ov”lßded
(7), 13);

2756 
	}
}

2763 #ià
GMOCK_RENAME_MAIN


2764 
	$gmock_maš
(
¬gc
, **
¬gv
) {

2766 
	$maš
(
¬gc
, **
¬gv
) {

2768 
‹¡šg
::
	`In™GoogËMock
(&
¬gc
, 
¬gv
);

2771 
‹¡šg
::
	`GMOCK_FLAG
(
ÿtch_Ëaked_mocks
èğ
Œue
;

2772 
‹¡šg
::
	`GMOCK_FLAG
(
v”bo£
èğ‹¡šg::
š‹º®
::
kW¬nšgV”bos™y
;

2774  
	`RUN_ALL_TESTS
();

2775 
	}
}

	@third_party/googletest/googlemock/test/gmock_all_test.cc

38 
	~"‹¡/gmock-aùiÚs_‹¡.cc
"

39 
	~"‹¡/gmock-ÿrdš®™›s_‹¡.cc
"

40 
	~"‹¡/gmock-š‹º®-uts_‹¡.cc
"

41 
	~"‹¡/gmock-m©ch”s_‹¡.cc
"

42 
	~"‹¡/gmock-mÜe-aùiÚs_‹¡.cc
"

43 
	~"‹¡/gmock-niû-¡riù_‹¡.cc
"

44 
	~"‹¡/gmock-pÜt_‹¡.cc
"

45 
	~"‹¡/gmock-¥ec-bud”s_‹¡.cc
"

46 
	~"‹¡/gmock_‹¡.cc
"

	@third_party/googletest/googlemock/test/gmock_ex_test.cc

33 
	~"gmock/gmock.h
"

34 
	~"g‹¡/g‹¡.h
"

36 #ià
GTEST_HAS_EXCEPTIONS


37 
	gÇme¥aû
 {

39 
usšg
 
	g‹¡šg
::
HasSub¡r
;

41 
usšg
 
	g‹¡šg
::
š‹º®
::
GoogËTe¡Fau»Exû±iÚ
;

44 şas 
	cNÚDeçuÉCÚ¡ruùibË
 {

45 
	gpublic
:

46 
ex¶ic™
 
NÚDeçuÉCÚ¡ruùibË
() {}

49 şas 
	cMockFoo
 {

50 
	gpublic
:

53 
MOCK_METHOD0
(
G‘NÚDeçuÉCÚ¡ruùibË
, 
NÚDeçuÉCÚ¡ruùibË
());

56 
	$TEST
(
DeçuÉV®ueTe¡
, 
ThrowsRuÁimeE¼ÜWh’NoDeçuÉV®ue
) {

57 
MockFoo
 
mock
;

58 
Œy
 {

64 
mock
.
	`G‘NÚDeçuÉCÚ¡ruùibË
();

65 
	`FAIL
() << "GetNonDefaultConstructible()'s„eturnype has‚o default "

67 } 
	`ÿtch
 (cÚ¡ 
GoogËTe¡Fau»Exû±iÚ
& ) {

68 
	`FAIL
() << "Google Test does‚otryo catch‡nƒxception ofype "

73 } 
	`ÿtch
 (cÚ¡ 
¡d
::
exû±iÚ
& 
ex
) {

74 
	`EXPECT_THAT
(
ex
.
	`wh©
(), 
	`HasSub¡r
("has‚o default value"));

76 
	}
}

	@third_party/googletest/googlemock/test/gmock_leak_test_.cc

36 
	~"gmock/gmock.h
"

38 
	gÇme¥aû
 {

40 
	gusšg
 ::
‹¡šg
::
R‘uº
;

42 şas 
	cFooIÁ”çû
 {

43 
	gpublic
:

44 
vœtu®
 ~
FooIÁ”çû
() {}

45 
vœtu®
 
DoThis
() = 0;

48 şas 
	cMockFoo
 : 
public
 
FooIÁ”çû
 {

49 
public
:

50 
MockFoo
() {}

52 
MOCK_METHOD0
(
DoThis
, ());

54 
	g´iv©e
:

55 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
MockFoo
);

58 
	$TEST
(
L—kTe¡
, 
L—kedMockW™hEx³ùC®lCau£sFau»Wh’L—kCheckšgIsEÇbËd
) {

59 
MockFoo
* 
foo
 = 
Ãw
 MockFoo;

61 
	`EXPECT_CALL
(*
foo
, 
	`DoThis
());

62 
foo
->
	`DoThis
();

68 
	`ex™
(0);

69 
	}
}

71 
	$TEST
(
L—kTe¡
, 
L—kedMockW™hOnC®lCau£sFau»Wh’L—kCheckšgIsEÇbËd
) {

72 
MockFoo
* 
foo
 = 
Ãw
 MockFoo;

74 
	`ON_CALL
(*
foo
, 
	`DoThis
()).
	`WlByDeçuÉ
(
	`R‘uº
());

80 
	`ex™
(0);

81 
	}
}

83 
	$TEST
(
L—kTe¡
, 
C©chesMuÉËL—kedMockObjeùs
) {

84 
MockFoo
* 
foo1
 = 
Ãw
 MockFoo;

85 
MockFoo
* 
foo2
 = 
Ãw
 MockFoo;

87 
	`ON_CALL
(*
foo1
, 
	`DoThis
()).
	`WlByDeçuÉ
(
	`R‘uº
());

88 
	`EXPECT_CALL
(*
foo2
, 
	`DoThis
());

89 
foo2
->
	`DoThis
();

96 
	`ex™
(0);

97 
	}
}

	@third_party/googletest/googlemock/test/gmock_link2_test.cc

37 
	#LškTe¡
 
LškTe¡2


	)

39 
	~"‹¡/gmock_lšk_‹¡.h
"

	@third_party/googletest/googlemock/test/gmock_link_test.cc

37 
	#LškTe¡
 
LškTe¡1


	)

39 
	~"‹¡/gmock_lšk_‹¡.h
"

	@third_party/googletest/googlemock/test/gmock_link_test.h

115 #iâdeà
GOOGLEMOCK_TEST_GMOCK_LINK_TEST_H_


116 
	#GOOGLEMOCK_TEST_GMOCK_LINK_TEST_H_


	)

118 
	~"gmock/gmock.h
"

120 #ià!
GTEST_OS_WINDOWS_MOBILE


121 
	~<”ºo.h
>

124 
	~<io¡»am
>

125 
	~<veùÜ
>

127 
	~"g‹¡/g‹¡.h
"

128 
	~"g‹¡/š‹º®/g‹¡-pÜt.h
"

130 
usšg
 
	g‹¡šg
::
_
;

131 
usšg
 
	g‹¡šg
::
A
;

132 
usšg
 
	g‹¡šg
::
AùiÚ
;

133 
usšg
 
	g‹¡šg
::
AÎOf
;

134 
usšg
 
	g‹¡šg
::
AnyOf
;

135 
usšg
 
	g‹¡šg
::
Assign
;

136 
usšg
 
	g‹¡šg
::
CÚš”Eq
;

137 
usšg
 
	g‹¡šg
::
DoAÎ
;

138 
usšg
 
	g‹¡šg
::
DoDeçuÉ
;

139 
usšg
 
	g‹¡šg
::
DoubËEq
;

140 
usšg
 
	g‹¡šg
::
EËm’tsA»
;

141 
usšg
 
	g‹¡šg
::
EËm’tsA»A¼ay
;

142 
usšg
 
	g‹¡šg
::
EndsW™h
;

143 
usšg
 
	g‹¡šg
::
Eq
;

144 
usšg
 
	g‹¡šg
::
F›ld
;

145 
usšg
 
	g‹¡šg
::
FlßtEq
;

146 
usšg
 
	g‹¡šg
::
Ge
;

147 
usšg
 
	g‹¡šg
::
Gt
;

148 
usšg
 
	g‹¡šg
::
HasSub¡r
;

149 
usšg
 
	g‹¡šg
::
IgnÜeResuÉ
;

150 
usšg
 
	g‹¡šg
::
Invoke
;

151 
usšg
 
	g‹¡šg
::
InvokeArgum’t
;

152 
usšg
 
	g‹¡šg
::
InvokeW™houtArgs
;

153 
usšg
 
	g‹¡šg
::
IsNuÎ
;

154 
usšg
 
	g‹¡šg
::
IsSub£tOf
;

155 
usšg
 
	g‹¡šg
::
IsSu³r£tOf
;

156 
usšg
 
	g‹¡šg
::
Le
;

157 
usšg
 
	g‹¡šg
::
Lt
;

158 
usšg
 
	g‹¡šg
::
M©ch”
;

159 
usšg
 
	g‹¡šg
::
M©ch”Ca¡
;

160 
usšg
 
	g‹¡šg
::
NªS’s™iveDoubËEq
;

161 
usšg
 
	g‹¡šg
::
NªS’s™iveFlßtEq
;

162 
usšg
 
	g‹¡šg
::
Ne
;

163 
usšg
 
	g‹¡šg
::
NÙ
;

164 
usšg
 
	g‹¡šg
::
NÙNuÎ
;

165 
usšg
 
	g‹¡šg
::
Poš‹e
;

166 
usšg
 
	g‹¡šg
::
Prİ”ty
;

167 
usšg
 
	g‹¡šg
::
Ref
;

168 
usšg
 
	g‹¡šg
::
ResuÉOf
;

169 
usšg
 
	g‹¡šg
::
R‘uº
;

170 
usšg
 
	g‹¡šg
::
R‘uºNuÎ
;

171 
usšg
 
	g‹¡šg
::
R‘uºRef
;

172 
usšg
 
	g‹¡šg
::
S‘ArgPoš‹e
;

173 
usšg
 
	g‹¡šg
::
S‘A¼ayArgum’t
;

174 
usšg
 
	g‹¡šg
::
S¹sW™h
;

175 
usšg
 
	g‹¡šg
::
SŒCa£Eq
;

176 
usšg
 
	g‹¡šg
::
SŒCa£Ne
;

177 
usšg
 
	g‹¡šg
::
SŒEq
;

178 
usšg
 
	g‹¡šg
::
SŒNe
;

179 
usšg
 
	g‹¡šg
::
Truly
;

180 
usšg
 
	g‹¡šg
::
Ty³dEq
;

181 
usšg
 
	g‹¡šg
::
W™hArg
;

182 
usšg
 
	g‹¡šg
::
W™hArgs
;

183 
usšg
 
	g‹¡šg
::
W™houtArgs
;

185 #ià!
GTEST_OS_WINDOWS_MOBILE


186 
usšg
 
	g‹¡šg
::
S‘E¼noAndR‘uº
;

189 #ià
GTEST_HAS_EXCEPTIONS


190 
usšg
 
	g‹¡šg
::
Throw
;

193 
usšg
 
	g‹¡šg
::
CÚšsRegex
;

194 
usšg
 
	g‹¡šg
::
M©chesRegex
;

196 şas 
	cIÁ”çû
 {

197 
	mpublic
:

198 
vœtu®
 ~
	$IÁ”çû
() {}

199 
vœtu®
 
	`VoidFromSŒšg
(* 
¡r
) = 0;

200 
vœtu®
 * 
	`SŒšgFromSŒšg
(* 
¡r
) = 0;

201 
vœtu®
 
	`IÁFromSŒšg
(* 
¡r
) = 0;

202 
vœtu®
 & 
	`IÁRefFromSŒšg
(* 
¡r
) = 0;

203 
vœtu®
 
	`VoidFromFunc
((*
func
)(* 
¡r
)) = 0;

204 
vœtu®
 
	`VoidFromIÁRef
(& 
n
) = 0;

205 
vœtu®
 
	`VoidFromFlßt
(
n
) = 0;

206 
vœtu®
 
	`VoidFromDoubË
(
n
) = 0;

207 
vœtu®
 
	`VoidFromVeùÜ
(cÚ¡ 
¡d
::
veùÜ
<>& 
v
) = 0;

208 
	}
};

210 şas 
	cMock
: 
public
 
IÁ”çû
 {

211 
public
:

212 
	$Mock
() {}

214 
	`MOCK_METHOD1
(
VoidFromSŒšg
, (* 
¡r
));

215 
	`MOCK_METHOD1
(
SŒšgFromSŒšg
, *(* 
¡r
));

216 
	`MOCK_METHOD1
(
IÁFromSŒšg
, (* 
¡r
));

217 
	`MOCK_METHOD1
(
IÁRefFromSŒšg
, &(* 
¡r
));

218 
	`MOCK_METHOD1
(
VoidFromFunc
, ((*
func
)(* 
¡r
)));

219 
	`MOCK_METHOD1
(
VoidFromIÁRef
, (& 
n
));

220 
	`MOCK_METHOD1
(
VoidFromFlßt
, (
n
));

221 
	`MOCK_METHOD1
(
VoidFromDoubË
, (
n
));

222 
	`MOCK_METHOD1
(
VoidFromVeùÜ
, (cÚ¡ 
¡d
::
veùÜ
<>& 
v
));

224 
´iv©e
:

225 
	`GTEST_DISALLOW_COPY_AND_ASSIGN_
(
Mock
);

226 
	}
};

228 şas 
	cInvokeH–³r
 {

229 
	mpublic
:

230 
	$SticVoidFromVoid
() {}

231 
	$VoidFromVoid
(è{
	}
}

232 
	$SticVoidFromSŒšg
(* ) {
	}
}

233 
	$VoidFromSŒšg
(* ) {
	}
}

234 
	$SticIÁFromSŒšg
(* ) {  1; 
	}
}

235 
boŞ
 
	$SticBoŞFromSŒšg
(cÚ¡ * ) {  
Œue
; 
	}
}

238 şas 
	cF›ldH–³r
 {

239 
	mpublic
:

240 
ex¶ic™
 
	$F›ldH–³r
(
a_f›ld
è: 
	$f›ld_
(
a_f›ld
) {}

241 
	$f›ld
(ècÚ¡ {  
f›ld_
; 
	}
}

242 
	gf›ld_
;

247 
	$TEST
(
LškTe¡
, 
Te¡R‘uºVoid
) {

248 
Mock
 
mock
;

250 
	`EXPECT_CALL
(
mock
, 
	`VoidFromSŒšg
(
_
)).
	`WlOnû
(
	`R‘uº
());

251 
mock
.
	`VoidFromSŒšg
(
nuÎ±r
);

252 
	}
}

255 
	$TEST
(
LškTe¡
, 
Te¡R‘uº
) {

256 
Mock
 
mock
;

257 
ch
 = 'x';

259 
	`EXPECT_CALL
(
mock
, 
	`SŒšgFromSŒšg
(
_
)).
	`WlOnû
(
	`R‘uº
(&
ch
));

260 
mock
.
	`SŒšgFromSŒšg
(
nuÎ±r
);

261 
	}
}

264 
	$TEST
(
LškTe¡
, 
Te¡R‘uºNuÎ
) {

265 
Mock
 
mock
;

267 
	`EXPECT_CALL
(
mock
, 
	`VoidFromSŒšg
(
_
)).
	`WlOnû
(
	`R‘uº
());

268 
mock
.
	`VoidFromSŒšg
(
nuÎ±r
);

269 
	}
}

272 
	$TEST
(
LškTe¡
, 
Te¡R‘uºRef
) {

273 
Mock
 
mock
;

274 
n
 = 42;

276 
	`EXPECT_CALL
(
mock
, 
	`IÁRefFromSŒšg
(
_
)).
	`WlOnû
(
	`R‘uºRef
(
n
));

277 
mock
.
	`IÁRefFromSŒšg
(
nuÎ±r
);

278 
	}
}

281 
	$TEST
(
LškTe¡
, 
Te¡Assign
) {

282 
Mock
 
mock
;

283 
ch
 = 'x';

285 
	`EXPECT_CALL
(
mock
, 
	`VoidFromSŒšg
(
_
)).
	`WlOnû
(
	`Assign
(&
ch
, 'y'));

286 
mock
.
	`VoidFromSŒšg
(
nuÎ±r
);

287 
	}
}

290 
	$TEST
(
LškTe¡
, 
Te¡S‘ArgPoš‹e
) {

291 
Mock
 
mock
;

292 
ch
 = 'x';

294 
	`EXPECT_CALL
(
mock
, 
	`VoidFromSŒšg
(
_
)).
	`WlOnû
(
S‘ArgPoš‹e
<0>('y'));

295 
mock
.
	`VoidFromSŒšg
(&
ch
);

296 
	}
}

299 
	$TEST
(
LškTe¡
, 
Te¡S‘A¼ayArgum’t
) {

300 
Mock
 
mock
;

301 
ch
 = 'x';

302 
ch2
 = 'y';

304 
	`EXPECT_CALL
(
mock
, 
	`VoidFromSŒšg
(
_
)).
	`WlOnû
(
S‘A¼ayArgum’t
<0>(&
ch2
,

305 &
ch2
 + 1));

306 
mock
.
	`VoidFromSŒšg
(&
ch
);

307 
	}
}

309 #ià!
GTEST_OS_WINDOWS_MOBILE


312 
	$TEST
(
LškTe¡
, 
Te¡S‘E¼noAndR‘uº
) {

313 
Mock
 
mock
;

315 
§ved_”ºo
 = 
”ºo
;

316 
	`EXPECT_CALL
(
mock
, 
	`IÁFromSŒšg
(
_
)).
	`WlOnû
(
	`S‘E¼noAndR‘uº
(1, -1));

317 
mock
.
	`IÁFromSŒšg
(
nuÎ±r
);

318 
”ºo
 = 
§ved_”ºo
;

319 
	}
}

324 
	$TEST
(
LškTe¡
, 
Te¡Invoke
) {

325 
Mock
 
mock
;

326 
InvokeH–³r
 
‹¡_švoke_h–³r
;

328 
	`EXPECT_CALL
(
mock
, 
	`VoidFromSŒšg
(
_
))

329 .
	`WlOnû
(
	`Invoke
(&
InvokeH–³r
::
SticVoidFromSŒšg
))

330 .
	`WlOnû
(
	`Invoke
(&
‹¡_švoke_h–³r
, &
InvokeH–³r
::
VoidFromSŒšg
));

331 
mock
.
	`VoidFromSŒšg
(
nuÎ±r
);

332 
mock
.
	`VoidFromSŒšg
(
nuÎ±r
);

333 
	}
}

336 
	$TEST
(
LškTe¡
, 
Te¡InvokeW™houtArgs
) {

337 
Mock
 
mock
;

338 
InvokeH–³r
 
‹¡_švoke_h–³r
;

340 
	`EXPECT_CALL
(
mock
, 
	`VoidFromSŒšg
(
_
))

341 .
	`WlOnû
(
	`InvokeW™houtArgs
(&
InvokeH–³r
::
SticVoidFromVoid
))

342 .
	`WlOnû
(
	`InvokeW™houtArgs
(&
‹¡_švoke_h–³r
,

343 &
InvokeH–³r
::
VoidFromVoid
));

344 
mock
.
	`VoidFromSŒšg
(
nuÎ±r
);

345 
mock
.
	`VoidFromSŒšg
(
nuÎ±r
);

346 
	}
}

349 
	$TEST
(
LškTe¡
, 
Te¡InvokeArgum’t
) {

350 
Mock
 
mock
;

351 
ch
 = 'x';

353 
	`EXPECT_CALL
(
mock
, 
	`VoidFromFunc
(
_
)).
	`WlOnû
(
InvokeArgum’t
<0>(&
ch
));

354 
mock
.
	`VoidFromFunc
(
InvokeH–³r
::
SticVoidFromSŒšg
);

355 
	}
}

358 
	$TEST
(
LškTe¡
, 
Te¡W™hArg
) {

359 
Mock
 
mock
;

361 
	`EXPECT_CALL
(
mock
, 
	`VoidFromSŒšg
(
_
))

362 .
	`WlOnû
(
W™hArg
<0>(
	`Invoke
(&
InvokeH–³r
::
SticVoidFromSŒšg
)));

363 
mock
.
	`VoidFromSŒšg
(
nuÎ±r
);

364 
	}
}

367 
	$TEST
(
LškTe¡
, 
Te¡W™hArgs
) {

368 
Mock
 
mock
;

370 
	`EXPECT_CALL
(
mock
, 
	`VoidFromSŒšg
(
_
))

371 .
	`WlOnû
(
W™hArgs
<0>(
	`Invoke
(&
InvokeH–³r
::
SticVoidFromSŒšg
)));

372 
mock
.
	`VoidFromSŒšg
(
nuÎ±r
);

373 
	}
}

376 
	$TEST
(
LškTe¡
, 
Te¡W™houtArgs
) {

377 
Mock
 
mock
;

379 
	`EXPECT_CALL
(
mock
, 
	`VoidFromSŒšg
(
_
)).
	`WlOnû
(
	`W™houtArgs
(
	`R‘uº
()));

380 
mock
.
	`VoidFromSŒšg
(
nuÎ±r
);

381 
	}
}

384 
	$TEST
(
LškTe¡
, 
Te¡DoAÎ
) {

385 
Mock
 
mock
;

386 
ch
 = 'x';

388 
	`EXPECT_CALL
(
mock
, 
	`VoidFromSŒšg
(
_
))

389 .
	`WlOnû
(
	`DoAÎ
(
S‘ArgPoš‹e
<0>('y'), 
	`R‘uº
()));

390 
mock
.
	`VoidFromSŒšg
(&
ch
);

391 
	}
}

394 
	$TEST
(
LškTe¡
, 
Te¡DoDeçuÉ
) {

395 
Mock
 
mock
;

396 
ch
 = 'x';

398 
	`ON_CALL
(
mock
, 
	`VoidFromSŒšg
(
_
)).
	`WlByDeçuÉ
(
	`R‘uº
());

399 
	`EXPECT_CALL
(
mock
, 
	`VoidFromSŒšg
(
_
)).
	`WlOnû
(
	`DoDeçuÉ
());

400 
mock
.
	`VoidFromSŒšg
(&
ch
);

401 
	}
}

404 
	$TEST
(
LškTe¡
, 
Te¡IgnÜeResuÉ
) {

405 
Mock
 
mock
;

407 
	`EXPECT_CALL
(
mock
, 
	`VoidFromSŒšg
(
_
)).
	`WlOnû
(
	`IgnÜeResuÉ
(
	`R‘uº
(42)));

408 
mock
.
	`VoidFromSŒšg
(
nuÎ±r
);

409 
	}
}

411 #ià
GTEST_HAS_EXCEPTIONS


413 
	$TEST
(
LškTe¡
, 
Te¡Throw
) {

414 
Mock
 
mock
;

416 
	`EXPECT_CALL
(
mock
, 
	`VoidFromSŒšg
(
_
)).
	`WlOnû
(
	`Throw
(42));

417 
	`EXPECT_THROW
(
mock
.
	`VoidFromSŒšg
(
nuÎ±r
), );

418 
	}
}

426 #ifdeà
_MSC_VER


427 #´agm¨
w¬nšg
(
push
)

428 #´agm¨
w¬nšg
(
di§bË
:4100)

432 
	gÇme¥aû
 {

433 
ACTION
(
R‘uº1
) {  1; }

436 
	$TEST
(
LškTe¡
, 
Te¡AùiÚMaüo
) {

437 
Mock
 
mock
;

439 
	`EXPECT_CALL
(
mock
, 
	`IÁFromSŒšg
(
_
)).
	`WlOnû
(
	`R‘uº1
());

440 
mock
.
	`IÁFromSŒšg
(
nuÎ±r
);

441 
	}
}

444 
	gÇme¥aû
 {

445 
ACTION_P
(
R‘uºArgum’t
, 
»t_v®ue
è{  
	g»t_v®ue
; }

448 
	$TEST
(
LškTe¡
, 
Te¡AùiÚPMaüo
) {

449 
Mock
 
mock
;

451 
	`EXPECT_CALL
(
mock
, 
	`IÁFromSŒšg
(
_
)).
	`WlOnû
(
	`R‘uºArgum’t
(42));

452 
mock
.
	`IÁFromSŒšg
(
nuÎ±r
);

453 
	}
}

456 
	gÇme¥aû
 {

457 
ACTION_P2
(
R‘uºEqu®sE™h”Of
, 
fœ¡
, 
£cÚd
) {

458  
	g¬g0
 =ğ
fœ¡
 || 
¬g0
 =ğ
£cÚd
;

462 #ifdeà
_MSC_VER


463 #´agm¨
w¬nšg
(
pİ
)

466 
	$TEST
(
LškTe¡
, 
Te¡AùiÚP2Maüo
) {

467 
Mock
 
mock
;

468 
ch
 = 'x';

470 
	`EXPECT_CALL
(
mock
, 
	`IÁFromSŒšg
(
_
))

471 .
	`WlOnû
(
	`R‘uºEqu®sE™h”Of
("one", "two"));

472 
mock
.
	`IÁFromSŒšg
(&
ch
);

473 
	}
}

476 
	$TEST
(
LškTe¡
, 
Te¡M©ch”Anythšg
) {

477 
Mock
 
mock
;

479 
	`ON_CALL
(
mock
, 
	`VoidFromSŒšg
(
_
)).
	`WlByDeçuÉ
(
	`R‘uº
());

480 
	}
}

483 
	$TEST
(
LškTe¡
, 
Te¡M©ch”A
) {

484 
Mock
 
mock
;

486 
	`ON_CALL
(
mock
, 
	`VoidFromSŒšg
(
A
<*>())).
	`WlByDeçuÉ
(
	`R‘uº
());

487 
	}
}

490 
	$TEST
(
LškTe¡
, 
Te¡M©ch”sEq
) {

491 
Mock
 
mock
;

492 cÚ¡ * 
p
 = "x";

494 
	`ON_CALL
(
mock
, 
	`VoidFromSŒšg
(
	`Eq
(
p
))).
	`WlByDeçuÉ
(
	`R‘uº
());

495 
	`ON_CALL
(
mock
, 
	`VoidFromSŒšg
(
cÚ¡_ÿ¡
<*>("y")))

496 .
	`WlByDeçuÉ
(
	`R‘uº
());

497 
	}
}

500 
	$TEST
(
LškTe¡
, 
Te¡M©ch”sR–©iÚs
) {

501 
Mock
 
mock
;

503 
	`ON_CALL
(
mock
, 
	`VoidFromFlßt
(
	`Lt
(1.0f))).
	`WlByDeçuÉ
(
	`R‘uº
());

504 
	`ON_CALL
(
mock
, 
	`VoidFromFlßt
(
	`Gt
(1.0f))).
	`WlByDeçuÉ
(
	`R‘uº
());

505 
	`ON_CALL
(
mock
, 
	`VoidFromFlßt
(
	`Le
(1.0f))).
	`WlByDeçuÉ
(
	`R‘uº
());

506 
	`ON_CALL
(
mock
, 
	`VoidFromFlßt
(
	`Ge
(1.0f))).
	`WlByDeçuÉ
(
	`R‘uº
());

507 
	`ON_CALL
(
mock
, 
	`VoidFromFlßt
(
	`Ne
(1.0f))).
	`WlByDeçuÉ
(
	`R‘uº
());

508 
	}
}

511 
	$TEST
(
LškTe¡
, 
Te¡M©ch”NÙNuÎ
) {

512 
Mock
 
mock
;

514 
	`ON_CALL
(
mock
, 
	`VoidFromSŒšg
(
	`NÙNuÎ
())).
	`WlByDeçuÉ
(
	`R‘uº
());

515 
	}
}

518 
	$TEST
(
LškTe¡
, 
Te¡M©ch”IsNuÎ
) {

519 
Mock
 
mock
;

521 
	`ON_CALL
(
mock
, 
	`VoidFromSŒšg
(
	`IsNuÎ
())).
	`WlByDeçuÉ
(
	`R‘uº
());

522 
	}
}

525 
	$TEST
(
LškTe¡
, 
Te¡M©ch”Ref
) {

526 
Mock
 
mock
;

527 
a
 = 0;

529 
	`ON_CALL
(
mock
, 
	`VoidFromIÁRef
(
	`Ref
(
a
))).
	`WlByDeçuÉ
(
	`R‘uº
());

530 
	}
}

533 
	$TEST
(
LškTe¡
, 
Te¡M©ch”Ty³dEq
) {

534 
Mock
 
mock
;

535 
a
 = 0;

537 
	`ON_CALL
(
mock
, 
	`VoidFromIÁRef
(
Ty³dEq
<&>(
a
))).
	`WlByDeçuÉ
(
	`R‘uº
());

538 
	}
}

542 
	$TEST
(
LškTe¡
, 
Te¡M©ch”sFlßtšgPošt
) {

543 
Mock
 
mock
;

544 
a
 = 0;

546 
	`ON_CALL
(
mock
, 
	`VoidFromFlßt
(
	`FlßtEq
(
a
))).
	`WlByDeçuÉ
(
	`R‘uº
());

547 
	`ON_CALL
(
mock
, 
	`VoidFromDoubË
(
	`DoubËEq
(
a
))).
	`WlByDeçuÉ
(
	`R‘uº
());

548 
	`ON_CALL
(
mock
, 
	`VoidFromFlßt
(
	`NªS’s™iveFlßtEq
(
a
))).
	`WlByDeçuÉ
(
	`R‘uº
());

549 
	`ON_CALL
(
mock
, 
	`VoidFromDoubË
(
	`NªS’s™iveDoubËEq
(
a
)))

550 .
	`WlByDeçuÉ
(
	`R‘uº
());

551 
	}
}

554 
	$TEST
(
LškTe¡
, 
Te¡M©ch”CÚšsRegex
) {

555 
Mock
 
mock
;

557 
	`ON_CALL
(
mock
, 
	`VoidFromSŒšg
(
	`CÚšsRegex
(".*"))).
	`WlByDeçuÉ
(
	`R‘uº
());

558 
	}
}

561 
	$TEST
(
LškTe¡
, 
Te¡M©ch”M©chesRegex
) {

562 
Mock
 
mock
;

564 
	`ON_CALL
(
mock
, 
	`VoidFromSŒšg
(
	`M©chesRegex
(".*"))).
	`WlByDeçuÉ
(
	`R‘uº
());

565 
	}
}

568 
	$TEST
(
LškTe¡
, 
Te¡M©ch”sSub¡ršgs
) {

569 
Mock
 
mock
;

571 
	`ON_CALL
(
mock
, 
	`VoidFromSŒšg
(
	`S¹sW™h
("a"))).
	`WlByDeçuÉ
(
	`R‘uº
());

572 
	`ON_CALL
(
mock
, 
	`VoidFromSŒšg
(
	`EndsW™h
("c"))).
	`WlByDeçuÉ
(
	`R‘uº
());

573 
	`ON_CALL
(
mock
, 
	`VoidFromSŒšg
(
	`HasSub¡r
("b"))).
	`WlByDeçuÉ
(
	`R‘uº
());

574 
	}
}

577 
	$TEST
(
LškTe¡
, 
Te¡M©ch”sSŒšgEqu®™y
) {

578 
Mock
 
mock
;

579 
	`ON_CALL
(
mock
, 
	`VoidFromSŒšg
(
	`SŒEq
("a"))).
	`WlByDeçuÉ
(
	`R‘uº
());

580 
	`ON_CALL
(
mock
, 
	`VoidFromSŒšg
(
	`SŒNe
("a"))).
	`WlByDeçuÉ
(
	`R‘uº
());

581 
	`ON_CALL
(
mock
, 
	`VoidFromSŒšg
(
	`SŒCa£Eq
("a"))).
	`WlByDeçuÉ
(
	`R‘uº
());

582 
	`ON_CALL
(
mock
, 
	`VoidFromSŒšg
(
	`SŒCa£Ne
("a"))).
	`WlByDeçuÉ
(
	`R‘uº
());

583 
	}
}

586 
	$TEST
(
LškTe¡
, 
Te¡M©ch”EËm’tsA»
) {

587 
Mock
 
mock
;

589 
	`ON_CALL
(
mock
, 
	`VoidFromVeùÜ
(
	`EËm’tsA»
('a', 
_
))).
	`WlByDeçuÉ
(
	`R‘uº
());

590 
	}
}

593 
	$TEST
(
LškTe¡
, 
Te¡M©ch”EËm’tsA»A¼ay
) {

594 
Mock
 
mock
;

595 
¬r
[] = { 'a', 'b' };

597 
	`ON_CALL
(
mock
, 
	`VoidFromVeùÜ
(
	`EËm’tsA»A¼ay
(
¬r
))).
	`WlByDeçuÉ
(
	`R‘uº
());

598 
	}
}

601 
	$TEST
(
LškTe¡
, 
Te¡M©ch”IsSub£tOf
) {

602 
Mock
 
mock
;

603 
¬r
[] = {'a', 'b'};

605 
	`ON_CALL
(
mock
, 
	`VoidFromVeùÜ
(
	`IsSub£tOf
(
¬r
))).
	`WlByDeçuÉ
(
	`R‘uº
());

606 
	}
}

609 
	$TEST
(
LškTe¡
, 
Te¡M©ch”IsSu³r£tOf
) {

610 
Mock
 
mock
;

611 
¬r
[] = {'a', 'b'};

613 
	`ON_CALL
(
mock
, 
	`VoidFromVeùÜ
(
	`IsSu³r£tOf
(
¬r
))).
	`WlByDeçuÉ
(
	`R‘uº
());

614 
	}
}

617 
	$TEST
(
LškTe¡
, 
Te¡M©ch”CÚš”Eq
) {

618 
Mock
 
mock
;

619 
¡d
::
veùÜ
<> 
v
;

621 
	`ON_CALL
(
mock
, 
	`VoidFromVeùÜ
(
	`CÚš”Eq
(
v
))).
	`WlByDeçuÉ
(
	`R‘uº
());

622 
	}
}

625 
	$TEST
(
LškTe¡
, 
Te¡M©ch”F›ld
) {

626 
F›ldH–³r
 
	`h–³r
(0);

628 
M©ch”
<cÚ¡ 
F›ldH–³r
&> 
m
 = 
	`F›ld
(&F›ldH–³r::
f›ld_
, 
	`Eq
(0));

629 
	`EXPECT_TRUE
(
m
.
	`M©ches
(
h–³r
));

631 
M©ch”
<cÚ¡ 
F›ldH–³r
*> 
m2
 = 
	`F›ld
(&F›ldH–³r::
f›ld_
, 
	`Eq
(0));

632 
	`EXPECT_TRUE
(
m2
.
	`M©ches
(&
h–³r
));

633 
	}
}

636 
	$TEST
(
LškTe¡
, 
Te¡M©ch”Prİ”ty
) {

637 
F›ldH–³r
 
	`h–³r
(0);

639 
M©ch”
<cÚ¡ 
F›ldH–³r
&> 
m
 = 
	`Prİ”ty
(&F›ldH–³r::
f›ld
, 
	`Eq
(0));

640 
	`EXPECT_TRUE
(
m
.
	`M©ches
(
h–³r
));

642 
M©ch”
<cÚ¡ 
F›ldH–³r
*> 
m2
 = 
	`Prİ”ty
(&F›ldH–³r::
f›ld
, 
	`Eq
(0));

643 
	`EXPECT_TRUE
(
m2
.
	`M©ches
(&
h–³r
));

644 
	}
}

647 
	$TEST
(
LškTe¡
, 
Te¡M©ch”ResuÉOf
) {

648 
M©ch”
<*> 
m
 = 
	`ResuÉOf
(&
InvokeH–³r
::
SticIÁFromSŒšg
, 
	`Eq
(1));

649 
	`EXPECT_TRUE
(
m
.
	`M©ches
(
nuÎ±r
));

650 
	}
}

653 
	$TEST
(
LškTe¡
, 
Te¡M©ch”Poš‹e
) {

654 
n
 = 1;

656 
M©ch”
<*> 
m
 = 
	`Poš‹e
(
	`Eq
(1));

657 
	`EXPECT_TRUE
(
m
.
	`M©ches
(&
n
));

658 
	}
}

661 
	$TEST
(
LškTe¡
, 
Te¡M©ch”Truly
) {

662 
M©ch”
<cÚ¡ *> 
m
 = 
	`Truly
(&
InvokeH–³r
::
SticBoŞFromSŒšg
);

663 
	`EXPECT_TRUE
(
m
.
	`M©ches
(
nuÎ±r
));

664 
	}
}

667 
	$TEST
(
LškTe¡
, 
Te¡M©ch”AÎOf
) {

668 
M©ch”
<> 
m
 = 
	`AÎOf
(
_
, 
	`Eq
(1));

669 
	`EXPECT_TRUE
(
m
.
	`M©ches
(1));

670 
	}
}

673 
	$TEST
(
LškTe¡
, 
Te¡M©ch”AnyOf
) {

674 
M©ch”
<> 
m
 = 
	`AnyOf
(
_
, 
	`Eq
(1));

675 
	`EXPECT_TRUE
(
m
.
	`M©ches
(1));

676 
	}
}

679 
	$TEST
(
LškTe¡
, 
Te¡M©ch”NÙ
) {

680 
M©ch”
<> 
m
 = 
	`NÙ
(
_
);

681 
	`EXPECT_FALSE
(
m
.
	`M©ches
(1));

682 
	}
}

685 
	$TEST
(
LškTe¡
, 
Te¡M©ch”Ca¡
) {

686 
M©ch”
<cÚ¡ *> 
m
 = 
M©ch”Ca¡
<cÚ¡ *>(
_
);

687 
	`EXPECT_TRUE
(
m
.
	`M©ches
(
nuÎ±r
));

688 
	}
}

	@third_party/googletest/googlemock/test/gmock_output_test_.cc

34 
	~"gmock/gmock.h
"

36 
	~<¡dio.h
>

37 
	~<¡ršg
>

39 
	~"g‹¡/g‹¡.h
"

42 #ifdeà
_MSC_VER


43 #´agm¨
w¬nšg
(
push
)

44 #´agm¨
w¬nšg
(
di§bË
:4100)

47 
usšg
 
	g‹¡šg
::
_
;

48 
usšg
 
	g‹¡šg
::
AnyNumb”
;

49 
usšg
 
	g‹¡šg
::
Ge
;

50 
usšg
 
	g‹¡šg
::
InSequ’û
;

51 
usšg
 
	g‹¡šg
::
NaggyMock
;

52 
usšg
 
	g‹¡šg
::
Ref
;

53 
usšg
 
	g‹¡šg
::
R‘uº
;

54 
usšg
 
	g‹¡šg
::
Sequ’û
;

55 
usšg
 
	g‹¡šg
::
V®ue
;

57 şas 
	cMockFoo
 {

58 
	mpublic
:

59 
	$MockFoo
() {}

61 
	`MOCK_METHOD3
(
B¬
, (cÚ¡ 
¡d
::
¡ršg
& 
s
, 
i
, 
x
));

62 
	`MOCK_METHOD2
(
B¬2
, 
	`boŞ
(
x
, 
y
));

63 
	`MOCK_METHOD2
(
B¬3
, (
x
, 
y
));

65 
´iv©e
:

66 
	`GTEST_DISALLOW_COPY_AND_ASSIGN_
(
MockFoo
);

67 
	}
};

69 şas 
	cGMockOuutTe¡
 : 
public
 
‹¡šg
::
Te¡
 {

70 
´Ùeùed
:

71 
NaggyMock
<
MockFoo
> 
foo_
;

74 
	$TEST_F
(
GMockOuutTe¡
, 
Ex³ùedC®l
) {

75 
‹¡šg
::
	`GMOCK_FLAG
(
v”bo£
) = "info";

77 
	`EXPECT_CALL
(
foo_
, 
	`B¬2
(0, 
_
));

78 
foo_
.
	`B¬2
(0, 0);

80 
‹¡šg
::
	`GMOCK_FLAG
(
v”bo£
) = "warning";

81 
	}
}

83 
	$TEST_F
(
GMockOuutTe¡
, 
Ex³ùedC®lToVoidFunùiÚ
) {

84 
‹¡šg
::
	`GMOCK_FLAG
(
v”bo£
) = "info";

86 
	`EXPECT_CALL
(
foo_
, 
	`B¬3
(0, 
_
));

87 
foo_
.
	`B¬3
(0, 0);

89 
‹¡šg
::
	`GMOCK_FLAG
(
v”bo£
) = "warning";

90 
	}
}

92 
	$TEST_F
(
GMockOuutTe¡
, 
Ex¶ic™AùiÚsRunOut
) {

93 
	`EXPECT_CALL
(
foo_
, 
	`B¬2
(
_
, _))

94 .
	`Times
(2)

95 .
	`WlOnû
(
	`R‘uº
(
çl£
));

96 
foo_
.
	`B¬2
(2, 2);

97 
foo_
.
	`B¬2
(1, 1);

98 
	}
}

100 
	$TEST_F
(
GMockOuutTe¡
, 
UÃx³ùedC®l
) {

101 
	`EXPECT_CALL
(
foo_
, 
	`B¬2
(0, 
_
));

103 
foo_
.
	`B¬2
(1, 0);

104 
foo_
.
	`B¬2
(0, 0);

105 
	}
}

107 
	$TEST_F
(
GMockOuutTe¡
, 
UÃx³ùedC®lToVoidFunùiÚ
) {

108 
	`EXPECT_CALL
(
foo_
, 
	`B¬3
(0, 
_
));

110 
foo_
.
	`B¬3
(1, 0);

111 
foo_
.
	`B¬3
(0, 0);

112 
	}
}

114 
	$TEST_F
(
GMockOuutTe¡
, 
ExûssiveC®l
) {

115 
	`EXPECT_CALL
(
foo_
, 
	`B¬2
(0, 
_
));

117 
foo_
.
	`B¬2
(0, 0);

118 
foo_
.
	`B¬2
(0, 1);

119 
	}
}

121 
	$TEST_F
(
GMockOuutTe¡
, 
ExûssiveC®lToVoidFunùiÚ
) {

122 
	`EXPECT_CALL
(
foo_
, 
	`B¬3
(0, 
_
));

124 
foo_
.
	`B¬3
(0, 0);

125 
foo_
.
	`B¬3
(0, 1);

126 
	}
}

128 
	$TEST_F
(
GMockOuutTe¡
, 
Unš‹»¡šgC®l
) {

129 
foo_
.
	`B¬2
(0, 1);

130 
	}
}

132 
	$TEST_F
(
GMockOuutTe¡
, 
Unš‹»¡šgC®lToVoidFunùiÚ
) {

133 
foo_
.
	`B¬3
(0, 1);

134 
	}
}

136 
	$TEST_F
(
GMockOuutTe¡
, 
R‘œedEx³ù©iÚ
) {

137 
	`EXPECT_CALL
(
foo_
, 
	`B¬2
(
_
, _))

138 .
	`R‘œesOnS©u¿tiÚ
();

139 
	`EXPECT_CALL
(
foo_
, 
	`B¬2
(0, 0));

141 
foo_
.
	`B¬2
(1, 1);

142 
foo_
.
	`B¬2
(1, 1);

143 
foo_
.
	`B¬2
(0, 0);

144 
	}
}

146 
	$TEST_F
(
GMockOuutTe¡
, 
Un§tisf›dP»»quis™e
) {

148 
InSequ’û
 
s
;

149 
	`EXPECT_CALL
(
foo_
, 
	`B¬
(
_
, 0, _));

150 
	`EXPECT_CALL
(
foo_
, 
	`B¬2
(0, 0));

151 
	`EXPECT_CALL
(
foo_
, 
	`B¬2
(1, 
_
));

154 
foo_
.
	`B¬2
(1, 0);

155 
foo_
.
	`B¬
("Hi", 0, 0);

156 
foo_
.
	`B¬2
(0, 0);

157 
foo_
.
	`B¬2
(1, 0);

158 
	}
}

160 
	$TEST_F
(
GMockOuutTe¡
, 
Un§tisf›dP»»quis™es
) {

161 
Sequ’û
 
s1
, 
s2
;

163 
	`EXPECT_CALL
(
foo_
, 
	`B¬
(
_
, 0, _))

164 .
	`InSequ’û
(
s1
);

165 
	`EXPECT_CALL
(
foo_
, 
	`B¬2
(0, 0))

166 .
	`InSequ’û
(
s2
);

167 
	`EXPECT_CALL
(
foo_
, 
	`B¬2
(1, 
_
))

168 .
	`InSequ’û
(
s1
, 
s2
);

170 
foo_
.
	`B¬2
(1, 0);

171 
foo_
.
	`B¬
("Hi", 0, 0);

172 
foo_
.
	`B¬2
(0, 0);

173 
foo_
.
	`B¬2
(1, 0);

174 
	}
}

176 
	$TEST_F
(
GMockOuutTe¡
, 
Un§tisf›dW™h
) {

177 
	`EXPECT_CALL
(
foo_
, 
	`B¬2
(
_
, _)).
	`W™h
(
	`Ge
());

178 
	}
}

180 
	$TEST_F
(
GMockOuutTe¡
, 
Un§tisf›dEx³ù©iÚ
) {

181 
	`EXPECT_CALL
(
foo_
, 
	`B¬
(
_
, _, _));

182 
	`EXPECT_CALL
(
foo_
, 
	`B¬2
(0, 
_
))

183 .
	`Times
(2);

185 
foo_
.
	`B¬2
(0, 1);

186 
	}
}

188 
	$TEST_F
(
GMockOuutTe¡
, 
Mism©chArgum’ts
) {

189 cÚ¡ 
¡d
::
¡ršg
 
s
 = "Hi";

190 
	`EXPECT_CALL
(
foo_
, 
	`B¬
(
	`Ref
(
s
), 
_
, 
	`Ge
(0)));

192 
foo_
.
	`B¬
("Ho", 0, -0.1);

193 
foo_
.
	`B¬
(
s
, 0, 0);

194 
	}
}

196 
	$TEST_F
(
GMockOuutTe¡
, 
Mism©chW™h
) {

197 
	`EXPECT_CALL
(
foo_
, 
	`B¬2
(
	`Ge
(2), Ge(1)))

198 .
	`W™h
(
	`Ge
());

200 
foo_
.
	`B¬2
(2, 3);

201 
foo_
.
	`B¬2
(2, 1);

202 
	}
}

204 
	$TEST_F
(
GMockOuutTe¡
, 
Mism©chArgum’tsAndW™h
) {

205 
	`EXPECT_CALL
(
foo_
, 
	`B¬2
(
	`Ge
(2), Ge(1)))

206 .
	`W™h
(
	`Ge
());

208 
foo_
.
	`B¬2
(1, 3);

209 
foo_
.
	`B¬2
(2, 1);

210 
	}
}

212 
	$TEST_F
(
GMockOuutTe¡
, 
UÃx³ùedC®lW™hDeçuÉAùiÚ
) {

213 
	`ON_CALL
(
foo_
, 
	`B¬2
(
_
, _))

214 .
	`WlByDeçuÉ
(
	`R‘uº
(
Œue
));

215 
	`ON_CALL
(
foo_
, 
	`B¬2
(1, 
_
))

216 .
	`WlByDeçuÉ
(
	`R‘uº
(
çl£
));

218 
	`EXPECT_CALL
(
foo_
, 
	`B¬2
(2, 2));

219 
foo_
.
	`B¬2
(1, 0);

220 
foo_
.
	`B¬2
(0, 0);

221 
foo_
.
	`B¬2
(2, 2);

222 
	}
}

224 
	$TEST_F
(
GMockOuutTe¡
, 
ExûssiveC®lW™hDeçuÉAùiÚ
) {

225 
	`ON_CALL
(
foo_
, 
	`B¬2
(
_
, _))

226 .
	`WlByDeçuÉ
(
	`R‘uº
(
Œue
));

227 
	`ON_CALL
(
foo_
, 
	`B¬2
(1, 
_
))

228 .
	`WlByDeçuÉ
(
	`R‘uº
(
çl£
));

230 
	`EXPECT_CALL
(
foo_
, 
	`B¬2
(2, 2));

231 
	`EXPECT_CALL
(
foo_
, 
	`B¬2
(1, 1));

233 
foo_
.
	`B¬2
(2, 2);

234 
foo_
.
	`B¬2
(2, 2);

235 
foo_
.
	`B¬2
(1, 1);

236 
foo_
.
	`B¬2
(1, 1);

237 
	}
}

239 
	$TEST_F
(
GMockOuutTe¡
, 
Unš‹»¡šgC®lW™hDeçuÉAùiÚ
) {

240 
	`ON_CALL
(
foo_
, 
	`B¬2
(
_
, _))

241 .
	`WlByDeçuÉ
(
	`R‘uº
(
Œue
));

242 
	`ON_CALL
(
foo_
, 
	`B¬2
(1, 
_
))

243 .
	`WlByDeçuÉ
(
	`R‘uº
(
çl£
));

245 
foo_
.
	`B¬2
(2, 2);

246 
foo_
.
	`B¬2
(1, 1);

247 
	}
}

249 
	$TEST_F
(
GMockOuutTe¡
, 
Ex¶ic™AùiÚsRunOutW™hDeçuÉAùiÚ
) {

250 
	`ON_CALL
(
foo_
, 
	`B¬2
(
_
, _))

251 .
	`WlByDeçuÉ
(
	`R‘uº
(
Œue
));

253 
	`EXPECT_CALL
(
foo_
, 
	`B¬2
(
_
, _))

254 .
	`Times
(2)

255 .
	`WlOnû
(
	`R‘uº
(
çl£
));

256 
foo_
.
	`B¬2
(2, 2);

257 
foo_
.
	`B¬2
(1, 1);

258 
	}
}

260 
	$TEST_F
(
GMockOuutTe¡
, 
C©chesL—kedMocks
) {

261 
MockFoo
* 
foo1
 = 
Ãw
 MockFoo;

262 
MockFoo
* 
foo2
 = 
Ãw
 MockFoo;

265 
	`ON_CALL
(*
foo1
, 
	`B¬
(
_
, _, _)).
	`WlByDeçuÉ
(
	`R‘uº
('a'));

268 
	`EXPECT_CALL
(*
foo2
, 
	`B¬2
(
_
, _));

269 
	`EXPECT_CALL
(*
foo2
, 
	`B¬2
(1, 
_
));

270 
	`EXPECT_CALL
(*
foo2
, 
	`B¬3
(
_
, _)).
	`Times
(
	`AnyNumb”
());

271 
foo2
->
	`B¬2
(2, 1);

272 
foo2
->
	`B¬2
(1, 1);

275 
	}
}

277 
MATCHER_P2
(
IsPaœ
, 
fœ¡
, 
£cÚd
, "") {

278  
V®ue
(
¬g
.
fœ¡
, fœ¡è&& V®ue×rg.
£cÚd
, second);

281 
	$TEST_F
(
GMockOuutTe¡
, 
PrštsM©ch”
) {

282 cÚ¡ 
‹¡šg
::
M©ch”
<> 
m1
 = 
	`Ge
(48);

283 
	`EXPECT_THAT
((
¡d
::
·œ
<, 
boŞ
>(42, 
Œue
)), 
	`IsPaœ
(
m1
,rue));

284 
	}
}

286 
	$Te¡C©chesL—kedMocksInAdHocTe¡s
() {

287 
MockFoo
* 
foo
 = 
Ãw
 MockFoo;

290 
	`EXPECT_CALL
(*
foo
, 
	`B¬2
(
_
, _));

291 
foo
->
	`B¬2
(2, 1);

294 
	}
}

296 
	$maš
(
¬gc
, **
¬gv
) {

297 
‹¡šg
::
	`In™GoogËMock
(&
¬gc
, 
¬gv
);

300 
‹¡šg
::
	`GMOCK_FLAG
(
ÿtch_Ëaked_mocks
èğ
Œue
;

301 
‹¡šg
::
	`GMOCK_FLAG
(
v”bo£
) = "warning";

303 
	`Te¡C©chesL—kedMocksInAdHocTe¡s
();

304  
	`RUN_ALL_TESTS
();

305 
	}
}

307 #ifdeà
_MSC_VER


308 #´agm¨
w¬nšg
(
pİ
)

	@third_party/googletest/googlemock/test/gmock_stress_test.cc

34 
	~"gmock/gmock.h
"

35 
	~"g‹¡/g‹¡.h
"

37 
Çme¥aû
 
	g‹¡šg
 {

38 
	gÇme¥aû
 {

41 
	gusšg
 ::
‹¡šg
::
š‹º®
::
Th»adW™hP¬am
;

45 cÚ¡ 
	gkMaxTe¡Th»ads
 = 50;

48 cÚ¡ 
	gkR•—t
 = 50;

50 şas 
	cMockFoo
 {

51 
	gpublic
:

52 
MOCK_METHOD1
(
B¬
, (
n
));

53 
MOCK_METHOD2
(
Baz
, (cÚ¡ * 
s1
, cÚ¡ 
¡d
::
¡ršg
& 
s2
));

57 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

58 
JošAndD–‘e
(
Th»adW™hP¬am
<
T
>* 
t
) {

59 
	gt
->
Još
();

60 
d–‘e
 
	gt
;

63 
	sDummy
 {};

68 
Te¡CÚcu¼’tMockObjeùs
(
Dummy
 ) {

70 
MockFoo
 
	gfoo
;

71 
ON_CALL
(
foo
, 
B¬
(
_
))

72 .
WlByDeçuÉ
(
R‘uº
(1));

73 
ON_CALL
(
foo
, 
Baz
(
_
, _))

74 .
WlByDeçuÉ
(
R‘uº
('b'));

75 
ON_CALL
(
foo
, 
Baz
(
_
, "you"))

76 .
WlByDeçuÉ
(
R‘uº
('a'));

78 
EXPECT_CALL
(
foo
, 
B¬
(0))

79 .
Times
(
AtMo¡
(3));

80 
EXPECT_CALL
(
foo
, 
Baz
(
_
, _));

81 
EXPECT_CALL
(
foo
, 
Baz
("hi", "you"))

82 .
WlOnû
(
R‘uº
('z'))

83 .
WlR•—‹dly
(
DoDeçuÉ
());

85 
EXPECT_EQ
(1, 
foo
.
B¬
(0));

86 
EXPECT_EQ
(1, 
foo
.
B¬
(0));

87 
EXPECT_EQ
('z', 
foo
.
Baz
("hi", "you"));

88 
EXPECT_EQ
('a', 
foo
.
Baz
("hi", "you"));

89 
EXPECT_EQ
('b', 
foo
.
Baz
("hi", "me"));

94 
	sH–³r1P¬am
 {

95 
MockFoo
* 
	gmock_foo
;

96 * 
	gcouÁ
;

99 
H–³r1
(
H–³r1P¬am
 
·¿m
) {

100 
	gi
 = 0; i < 
	gkR•—t
; i++) {

101 cÚ¡ 
	gch
 = 
·¿m
.
mock_foo
->
Baz
("a", "b");

102 ià(
	gch
 == 'a') {

104 (*
·¿m
.
couÁ
)++;

107 
EXPECT_EQ
('\0', 
ch
);

111 
EXPECT_EQ
('\0', 
·¿m
.
mock_foo
->
Baz
("x", "y")) << "Expected failure.";

114 
EXPECT_EQ
(1, 
·¿m
.
mock_foo
->
B¬
(5));

119 
Te¡CÚcu¼’tC®lsOnSameObjeù
(
Dummy
 ) {

120 
MockFoo
 
	gfoo
;

122 
ON_CALL
(
foo
, 
B¬
(
_
))

123 .
WlByDeçuÉ
(
R‘uº
(1));

124 
EXPECT_CALL
(
foo
, 
Baz
(
_
, "b"))

125 .
Times
(
kR•—t
)

126 .
WlR•—‹dly
(
R‘uº
('a'));

127 
EXPECT_CALL
(
foo
, 
Baz
(
_
, "c"));

131 
	gcouÁ1
 = 0;

132 cÚ¡ 
H–³r1P¬am
 
	g·¿m
 = { &
foo
, &
couÁ1
 };

133 
	gTh»adW™hP¬am
<
	gH–³r1P¬am
>* cÚ¡ 
	gt
 =

134 
Ãw
 
Th»adW™hP¬am
<
H–³r1P¬am
>(
H–³r1
, 
	g·¿m
, 
	gnuÎ±r
);

136 
	gcouÁ2
 = 0;

137 cÚ¡ 
H–³r1P¬am
 
	g·¿m2
 = { &
foo
, &
couÁ2
 };

138 
H–³r1
(
·¿m2
);

139 
JošAndD–‘e
(
t
);

141 
EXPECT_EQ
(
kR•—t
, 
couÁ1
 + 
couÁ2
);

150 
H–³r2
(
MockFoo
* 
foo
) {

151 
	gi
 = 0; i < 
	gkR•—t
; i++) {

152 
	gfoo
->
B¬
(2);

153 
	gfoo
->
B¬
(3);

158 
Te¡P¬tŸÎyOrd”edEx³ù©iÚsW™hTh»ads
(
Dummy
 ) {

159 
MockFoo
 
	gfoo
;

160 
Sequ’û
 
	gs1
, 
	gs2
;

163 
InSequ’û
 
	gdummy
;

164 
EXPECT_CALL
(
foo
, 
B¬
(0));

165 
EXPECT_CALL
(
foo
, 
B¬
(1))

166 .
InSequ’û
(
s1
, 
s2
);

169 
EXPECT_CALL
(
foo
, 
B¬
(2))

170 .
Times
(2*
kR•—t
)

171 .
InSequ’û
(
s1
)

172 .
R‘œesOnS©u¿tiÚ
();

173 
EXPECT_CALL
(
foo
, 
B¬
(3))

174 .
Times
(2*
kR•—t
)

175 .
InSequ’û
(
s2
);

178 
InSequ’û
 
	gdummy
;

179 
EXPECT_CALL
(
foo
, 
B¬
(2))

180 .
InSequ’û
(
s1
, 
s2
);

181 
EXPECT_CALL
(
foo
, 
B¬
(4));

184 
	gfoo
.
B¬
(0);

185 
	gfoo
.
B¬
(1);

187 
	gTh»adW™hP¬am
<
	gMockFoo
*>* cÚ¡ 
	gt
 =

188 
Ãw
 
Th»adW™hP¬am
<
MockFoo
*>(
H–³r2
, &
	gfoo
, 
	gnuÎ±r
);

189 
H–³r2
(&
foo
);

190 
JošAndD–‘e
(
t
);

192 
	gfoo
.
B¬
(2);

193 
	gfoo
.
B¬
(4);

197 
TEST
(
SŒessTe¡
, 
CªU£GMockW™hTh»ads
) {

198 (*
	g‹¡_routšes
[])(
Dummy
 
	gdummy
) = {

199 &
Te¡CÚcu¼’tMockObjeùs
,

200 &
Te¡CÚcu¼’tC®lsOnSameObjeù
,

201 &
Te¡P¬tŸÎyOrd”edEx³ù©iÚsW™hTh»ads
,

204 cÚ¡ 
	gkRoutšes
 = (
‹¡_routšes
)/(test_routines[0]);

205 cÚ¡ 
	gkCİ›sOfEachRoutše
 = 
kMaxTe¡Th»ads
 / 
kRoutšes
;

206 cÚ¡ 
	gkTe¡Th»ads
 = 
kCİ›sOfEachRoutše
 * 
kRoutšes
;

207 
	gTh»adW™hP¬am
<
	gDummy
>* 
	gth»ads
[
kTe¡Th»ads
] = {};

208 
	gi
 = 0; i < 
	gkTe¡Th»ads
; i++) {

210 
	gth»ads
[
i
] = 
Ãw
 
Th»adW™hP¬am
<
Dummy
>(
‹¡_routšes
[˜% 
kRoutšes
],

211 
Dummy
(), 
	gnuÎ±r
);

212 
GTEST_LOG_
(
INFO
è<< "Th»ad #" << 
	gi
 << "„unning . . .";

216 
	gi
 = 0; i < 
	gkTe¡Th»ads
; i++) {

217 
JošAndD–‘e
(
th»ads
[
i
]);

221 cÚ¡ 
Te¡Info
* cÚ¡ 
	gšfo
 = 
Un™Te¡
::
G‘In¡ªû
()->
cu¼’t_‹¡_šfo
();

222 cÚ¡ 
	gTe¡ResuÉ
& 
	g»suÉ
 = *
šfo
->
»suÉ
();

223 cÚ¡ 
	gkEx³ùedFau»s
 = (3*
kR•—t
 + 1)*
kCİ›sOfEachRoutše
;

224 
GTEST_CHECK_
(
kEx³ùedFau»s
 =ğ
»suÉ
.
tÙ®_·¹_couÁ
())

225 << "Ex³ùed " << 
kEx³ùedFau»s
 << " failures, but got "

226 << 
»suÉ
.
tÙ®_·¹_couÁ
();

232 
	$maš
(
¬gc
, **
¬gv
) {

233 
‹¡šg
::
	`In™GoogËMock
(&
¬gc
, 
¬gv
);

235 cÚ¡ 
ex™_code
 = 
	`RUN_ALL_TESTS
();

236 
	`GTEST_CHECK_
(
ex™_code
 != 0) << "RUN_ALL_TESTS() did‚ot fail‡sƒxpected";

238 
	`´štf
("\nPASS\n");

240 
	}
}

	@third_party/googletest/googlemock/test/gmock_test.cc

35 
	~"gmock/gmock.h
"

37 
	~<¡ršg
>

38 
	~"g‹¡/g‹¡.h
"

39 
	~"g‹¡/š‹º®/cu¡om/g‹¡.h
"

41 #ià!
defšed
(
GTEST_CUSTOM_INIT_GOOGLE_TEST_FUNCTION_
)

43 
usšg
 
	g‹¡šg
::
GMOCK_FLAG
(
deçuÉ_mock_behaviÜ
);

44 
usšg
 
	g‹¡šg
::
GMOCK_FLAG
(
v”bo£
);

45 
usšg
 
	g‹¡šg
::
In™GoogËMock
;

49 
	g‹m¶©e
 <
ty³Çme
 
	gCh¬
, 
	gM
, 
	gN
>

50 
Te¡In™GoogËMock
(cÚ¡ 
Ch¬
* (&
¬gv
)[
M
], cÚ¡ Ch¬* (&
Ãw_¬gv
)[
N
],

51 cÚ¡ ::
¡d
::
¡ršg
& 
ex³ùed_gmock_v”bo£
) {

52 cÚ¡ ::
¡d
::
¡ršg
 
Şd_v”bo£
 = 
GMOCK_FLAG
(
v”bo£
);

54 
	g¬gc
 = 
M
 - 1;

55 
In™GoogËMock
(&
¬gc
, 
cÚ¡_ÿ¡
<
Ch¬
**>(
¬gv
));

56 
ASSERT_EQ
(
N
 - 1, 
¬gc
) << "The‚ew‡rgv has wrong‚umber ofƒlements.";

58 
	gi
 = 0; i < 
	gN
; i++) {

59 
EXPECT_STREQ
(
Ãw_¬gv
[
i
], 
¬gv
[i]);

62 
EXPECT_EQ
(
ex³ùed_gmock_v”bo£
, 
GMOCK_FLAG
(
v”bo£
).
c_¡r
());

63 
GMOCK_FLAG
(
v”bo£
èğ
Şd_v”bo£
;

66 
	$TEST
(
In™GoogËMockTe¡
, 
P¬£sInv®idCommªdLše
) {

67 cÚ¡ * 
¬gv
[] = {
nuÎ±r
};

69 cÚ¡ * 
Ãw_¬gv
[] = {
nuÎ±r
};

71 
	`Te¡In™GoogËMock
(
¬gv
, 
Ãw_¬gv
, 
	`GMOCK_FLAG
(
v”bo£
));

72 
	}
}

74 
	$TEST
(
In™GoogËMockTe¡
, 
P¬£sEm±yCommªdLše
) {

75 cÚ¡ * 
¬gv
[] = {"foo.exe", 
nuÎ±r
};

77 cÚ¡ * 
Ãw_¬gv
[] = {"foo.exe", 
nuÎ±r
};

79 
	`Te¡In™GoogËMock
(
¬gv
, 
Ãw_¬gv
, 
	`GMOCK_FLAG
(
v”bo£
));

80 
	}
}

82 
	$TEST
(
In™GoogËMockTe¡
, 
P¬£sSšgËFÏg
) {

83 cÚ¡ * 
¬gv
[] = {"foo.exe", "--gmock_v”bo£=šfo", 
nuÎ±r
};

85 cÚ¡ * 
Ãw_¬gv
[] = {"foo.exe", 
nuÎ±r
};

87 
	`Te¡In™GoogËMock
(
¬gv
, 
Ãw_¬gv
, "info");

88 
	}
}

90 
	$TEST
(
In™GoogËMockTe¡
, 
P¬£sMuÉËFÏgs
) {

91 
Şd_deçuÉ_behaviÜ
 = 
	`GMOCK_FLAG
(
deçuÉ_mock_behaviÜ
);

92 cÚ¡ 
wch¬_t
* 
¬gv
[] = {
L
"foo.exe", L"--gmock_verbose=info",

93 
L
"--gmock_deçuÉ_mock_behaviÜ=2", 
nuÎ±r
};

95 cÚ¡ 
wch¬_t
* 
Ãw_¬gv
[] = {
L
"foo.exe", 
nuÎ±r
};

97 
	`Te¡In™GoogËMock
(
¬gv
, 
Ãw_¬gv
, "info");

98 
	`EXPECT_EQ
(2, 
	`GMOCK_FLAG
(
deçuÉ_mock_behaviÜ
));

99 
	`EXPECT_NE
(2, 
Şd_deçuÉ_behaviÜ
);

100 
	`GMOCK_FLAG
(
deçuÉ_mock_behaviÜ
èğ
Şd_deçuÉ_behaviÜ
;

101 
	}
}

103 
	$TEST
(
In™GoogËMockTe¡
, 
P¬£sUÄecognizedFÏg
) {

104 cÚ¡ * 
¬gv
[] = {"foo.exe", "--nÚ_gmock_æag=bÏh", 
nuÎ±r
};

106 cÚ¡ * 
Ãw_¬gv
[] = {"foo.exe", "--nÚ_gmock_æag=bÏh", 
nuÎ±r
};

108 
	`Te¡In™GoogËMock
(
¬gv
, 
Ãw_¬gv
, 
	`GMOCK_FLAG
(
v”bo£
));

109 
	}
}

111 
	$TEST
(
In™GoogËMockTe¡
, 
P¬£sGoogËMockFÏgAndUÄecognizedFÏg
) {

112 cÚ¡ * 
¬gv
[] = {"foo.exe", "--non_gmock_flag=blah",

113 "--gmock_v”bo£ó¼Ü", 
nuÎ±r
};

115 cÚ¡ * 
Ãw_¬gv
[] = {"foo.exe", "--nÚ_gmock_æag=bÏh", 
nuÎ±r
};

117 
	`Te¡In™GoogËMock
(
¬gv
, 
Ãw_¬gv
, "error");

118 
	}
}

120 
	$TEST
(
WideIn™GoogËMockTe¡
, 
P¬£sInv®idCommªdLše
) {

121 cÚ¡ 
wch¬_t
* 
¬gv
[] = {
nuÎ±r
};

123 cÚ¡ 
wch¬_t
* 
Ãw_¬gv
[] = {
nuÎ±r
};

125 
	`Te¡In™GoogËMock
(
¬gv
, 
Ãw_¬gv
, 
	`GMOCK_FLAG
(
v”bo£
));

126 
	}
}

128 
	$TEST
(
WideIn™GoogËMockTe¡
, 
P¬£sEm±yCommªdLše
) {

129 cÚ¡ 
wch¬_t
* 
¬gv
[] = {
L
"foo.exe", 
nuÎ±r
};

131 cÚ¡ 
wch¬_t
* 
Ãw_¬gv
[] = {
L
"foo.exe", 
nuÎ±r
};

133 
	`Te¡In™GoogËMock
(
¬gv
, 
Ãw_¬gv
, 
	`GMOCK_FLAG
(
v”bo£
));

134 
	}
}

136 
	$TEST
(
WideIn™GoogËMockTe¡
, 
P¬£sSšgËFÏg
) {

137 cÚ¡ 
wch¬_t
* 
¬gv
[] = {
L
"foo.exe", L"--gmock_v”bo£=šfo", 
nuÎ±r
};

139 cÚ¡ 
wch¬_t
* 
Ãw_¬gv
[] = {
L
"foo.exe", 
nuÎ±r
};

141 
	`Te¡In™GoogËMock
(
¬gv
, 
Ãw_¬gv
, "info");

142 
	}
}

144 
	$TEST
(
WideIn™GoogËMockTe¡
, 
P¬£sMuÉËFÏgs
) {

145 
Şd_deçuÉ_behaviÜ
 = 
	`GMOCK_FLAG
(
deçuÉ_mock_behaviÜ
);

146 cÚ¡ 
wch¬_t
* 
¬gv
[] = {
L
"foo.exe", L"--gmock_verbose=info",

147 
L
"--gmock_deçuÉ_mock_behaviÜ=2", 
nuÎ±r
};

149 cÚ¡ 
wch¬_t
* 
Ãw_¬gv
[] = {
L
"foo.exe", 
nuÎ±r
};

151 
	`Te¡In™GoogËMock
(
¬gv
, 
Ãw_¬gv
, "info");

152 
	`EXPECT_EQ
(2, 
	`GMOCK_FLAG
(
deçuÉ_mock_behaviÜ
));

153 
	`EXPECT_NE
(2, 
Şd_deçuÉ_behaviÜ
);

154 
	`GMOCK_FLAG
(
deçuÉ_mock_behaviÜ
èğ
Şd_deçuÉ_behaviÜ
;

155 
	}
}

157 
	$TEST
(
WideIn™GoogËMockTe¡
, 
P¬£sUÄecognizedFÏg
) {

158 cÚ¡ 
wch¬_t
* 
¬gv
[] = {
L
"foo.exe", L"--nÚ_gmock_æag=bÏh", 
nuÎ±r
};

160 cÚ¡ 
wch¬_t
* 
Ãw_¬gv
[] = {
L
"foo.exe", L"--nÚ_gmock_æag=bÏh", 
nuÎ±r
};

162 
	`Te¡In™GoogËMock
(
¬gv
, 
Ãw_¬gv
, 
	`GMOCK_FLAG
(
v”bo£
));

163 
	}
}

165 
	$TEST
(
WideIn™GoogËMockTe¡
, 
P¬£sGoogËMockFÏgAndUÄecognizedFÏg
) {

166 cÚ¡ 
wch¬_t
* 
¬gv
[] = {
L
"foo.exe", L"--non_gmock_flag=blah",

167 
L
"--gmock_v”bo£ó¼Ü", 
nuÎ±r
};

169 cÚ¡ 
wch¬_t
* 
Ãw_¬gv
[] = {
L
"foo.exe", L"--nÚ_gmock_æag=bÏh", 
nuÎ±r
};

171 
	`Te¡In™GoogËMock
(
¬gv
, 
Ãw_¬gv
, "error");

172 
	}
}

177 
	$TEST
(
FÏgTe¡
, 
IsAcûssibËInCode
) {

178 
boŞ
 
dummy
 = 
‹¡šg
::
	`GMOCK_FLAG
(
ÿtch_Ëaked_mocks
) &&

179 
‹¡šg
::
	`GMOCK_FLAG
(
v”bo£
) == "";

180 ()
dummy
;

181 
	}
}

	@third_party/googletest/googletest/include/gtest/gtest-death-test.h

38 #iâdeà
GOOGLETEST_INCLUDE_GTEST_GTEST_DEATH_TEST_H_


39 
	#GOOGLETEST_INCLUDE_GTEST_GTEST_DEATH_TEST_H_


	)

41 
	~"g‹¡/š‹º®/g‹¡-d—th-‹¡-š‹º®.h
"

43 
Çme¥aû
 
	g‹¡šg
 {

50 
GTEST_DECLARE_¡ršg_
(
d—th_‹¡_¡yË
);

52 #ià
GTEST_HAS_DEATH_TEST


54 
Çme¥aû
 
	gš‹º®
 {

61 
GTEST_API_
 
boŞ
 
InD—thTe¡Chd
();

172 
	#ASSERT_EXIT
(
¡©em’t
, 
´ediÿ‹
, 
m©ch”
) \

173 
	`GTEST_DEATH_TEST_
(
¡©em’t
, 
´ediÿ‹
, 
m©ch”
, 
GTEST_FATAL_FAILURE_
)

	)

177 
	#EXPECT_EXIT
(
¡©em’t
, 
´ediÿ‹
, 
m©ch”
) \

178 
	`GTEST_DEATH_TEST_
(
¡©em’t
, 
´ediÿ‹
, 
m©ch”
, 
GTEST_NONFATAL_FAILURE_
)

	)

183 
	#ASSERT_DEATH
(
¡©em’t
, 
m©ch”
) \

184 
	`ASSERT_EXIT
(
¡©em’t
, ::
‹¡šg
::
š‹º®
::
Ex™edUnsucûssfuÎy
, 
m©ch”
)

	)

188 
	#EXPECT_DEATH
(
¡©em’t
, 
m©ch”
) \

189 
	`EXPECT_EXIT
(
¡©em’t
, ::
‹¡šg
::
š‹º®
::
Ex™edUnsucûssfuÎy
, 
m©ch”
)

	)

194 şas 
	cGTEST_API_
 
	gEx™edW™hCode
 {

195 
	gpublic
:

196 
ex¶ic™
 
Ex™edW™hCode
(
ex™_code
);

197 
Ex™edW™hCode
(const ExitedWithCode&) = ;

198 
	gİ”©Ü
=(cÚ¡ 
Ex™edW™hCode
& 
Ùh”
èğ
d–‘e
;

199 
boŞ
 
İ”©Ü
()(
	gex™_¡©us
) const;

200 
	g´iv©e
:

201 cÚ¡ 
ex™_code_
;

204 #ià!
GTEST_OS_WINDOWS
 && !
GTEST_OS_FUCHSIA


208 şas 
	cGTEST_API_
 
	gKËdBySigÇl
 {

209 
	gpublic
:

210 
ex¶ic™
 
KËdBySigÇl
(
signum
);

211 
boŞ
 
İ”©Ü
()(
	gex™_¡©us
) const;

212 
	g´iv©e
:

213 cÚ¡ 
signum_
;

260 #ifdeà
NDEBUG


262 
	#EXPECT_DEBUG_DEATH
(
¡©em’t
, 
»gex
) \

263 
	$GTEST_EXECUTE_STATEMENT_
(
¡©em’t
, 
»gex
)

	)

265 
	#ASSERT_DEBUG_DEATH
(
¡©em’t
, 
»gex
) \

266 
	$GTEST_EXECUTE_STATEMENT_
(
¡©em’t
, 
»gex
)

	)

270 
	#EXPECT_DEBUG_DEATH
(
¡©em’t
, 
»gex
) \

271 
	$EXPECT_DEATH
(
¡©em’t
, 
»gex
)

	)

273 
	#ASSERT_DEBUG_DEATH
(
¡©em’t
, 
»gex
) \

274 
	$ASSERT_DEATH
(
¡©em’t
, 
»gex
)

	)

314 
	#GTEST_UNSUPPORTED_DEATH_TEST
(
¡©em’t
, 
»gex
, 
‹rmš©Ü
) \

315 
GTEST_AMBIGUOUS_ELSE_BLOCKER_
 \

316 ià(::
‹¡šg
::
š‹º®
::
	$AlwaysTrue
()) { \

317 
	`GTEST_LOG_
(
WARNING
) \

320 
	}
} ià(::
‹¡šg
::
š‹º®
::
	$AlwaysF®£
()) { \

321 ::
‹¡šg
::
š‹º®
::
RE
::
	`P¬tŸlM©ch
(".*", (
»gex
)); \

322 
	`GTEST_SUPPRESS_UNREACHABLE_CODE_WARNING_BELOW_
(
¡©em’t
); \

323 
‹rmš©Ü
; \

324 
	}
} \

325 ::
‹¡šg
::
	$Mes§ge
()

	)

332 #ià
GTEST_HAS_DEATH_TEST


333 
	#EXPECT_DEATH_IF_SUPPORTED
(
¡©em’t
, 
»gex
) \

334 
	$EXPECT_DEATH
(
¡©em’t
, 
»gex
)

	)

335 
	#ASSERT_DEATH_IF_SUPPORTED
(
¡©em’t
, 
»gex
) \

336 
	$ASSERT_DEATH
(
¡©em’t
, 
»gex
)

	)

338 
	#EXPECT_DEATH_IF_SUPPORTED
(
¡©em’t
, 
»gex
) \

339 
	$GTEST_UNSUPPORTED_DEATH_TEST
(
¡©em’t
, 
»gex
, )

	)

340 
	#ASSERT_DEATH_IF_SUPPORTED
(
¡©em’t
, 
»gex
) \

341 
	$GTEST_UNSUPPORTED_DEATH_TEST
(
¡©em’t
, 
»gex
, )

	)

344 
	}
}

	@third_party/googletest/googletest/include/gtest/gtest-matchers.h

35 #iâdeà
GOOGLETEST_INCLUDE_GTEST_GTEST_MATCHERS_H_


36 
	#GOOGLETEST_INCLUDE_GTEST_GTEST_MATCHERS_H_


	)

38 
	~<©omic
>

39 
	~<memÜy
>

40 
	~<o¡»am
>

41 
	~<¡ršg
>

42 
	~<ty³_Œa™s
>

44 
	~"g‹¡/g‹¡-´š‹rs.h
"

45 
	~"g‹¡/š‹º®/g‹¡-š‹º®.h
"

46 
	~"g‹¡/š‹º®/g‹¡-pÜt.h
"

49 #ià
defšed
(
_MSC_VER
) && _MSC_VER >= 1915

50 
	#GTEST_MAYBE_5046_
 5046

	)

52 
	#GTEST_MAYBE_5046_


	)

55 
	$GTEST_DISABLE_MSC_WARNINGS_PUSH_
(

56 4251 
GTEST_MAYBE_5046_


60 
Çme¥aû
 
‹¡šg
 {

73 şas 
	cM©chResuÉLi¡’”
 {

74 
public
:

78 
ex¶ic™
 
	`M©chResuÉLi¡’”
(::
¡d
::
o¡»am
* 
os
è: 
	`¡»am_
(os) {}

79 
vœtu®
 ~
	`M©chResuÉLi¡’”
() = 0;

83 
‹m¶©e
 <
ty³Çme
 
T
>

84 
M©chResuÉLi¡’”
& 
İ”©Ü
<<(cÚ¡ 
T
& 
x
) {

85 ià(
¡»am_
 !ğ
nuÎ±r
è*¡»am_ << 
x
;

86  *
this
;

90 ::
¡d
::
o¡»am
* 
	`¡»am
(è{  
¡»am_
; }

96 
boŞ
 
	`IsIÁ”e¡ed
(ècÚ¡ {  
¡»am_
 !ğ
nuÎ±r
; }

98 
´iv©e
:

99 ::
¡d
::
o¡»am
* cÚ¡ 
¡»am_
;

101 
	`GTEST_DISALLOW_COPY_AND_ASSIGN_
(
M©chResuÉLi¡’”
);

102 
	}
};

104 
šlše
 
	gM©chResuÉLi¡’”
::~
	$M©chResuÉLi¡’”
() {

105 
	}
}

109 şas 
	cM©ch”Desüib”IÁ”çû
 {

110 
public
:

111 
vœtu®
 ~
M©ch”Desüib”IÁ”çû
() {}

118 
vœtu®
 
DesüibeTo
(::
¡d
::
o¡»am
* 
os
) const = 0;

126 
vœtu®
 
DesüibeNeg©iÚTo
(::
¡d
::
o¡»am
* 
os
) const {

127 *
os
 << "not (";

128 
DesüibeTo
(
os
);

129 *
	gos
 << ")";

134 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

135 şas 
	cM©ch”IÁ”çû
 : 
public
 
M©ch”Desüib”IÁ”çû
 {

136 
public
:

168 
vœtu®
 
boŞ
 
M©chAndEx¶aš
(
T
 
x
, 
M©chResuÉLi¡’”
* 
li¡’”
) const = 0;

175 
Çme¥aû
 
	gš‹º®
 {

177 
	sAnyEq
 {

178 
	g‹m¶©e
 <
ty³Çme
 
	gA
,y³Çm
	gB
>

179 
boŞ
 
İ”©Ü
()(cÚ¡ 
	gA
& 
	ga
, cÚ¡ 
	gB
& 
	gb
ècÚ¡ { ‡ =ğ
b
; }

181 
	sAnyNe
 {

182 
	g‹m¶©e
 <
ty³Çme
 
	gA
,y³Çm
	gB
>

183 
boŞ
 
İ”©Ü
()(cÚ¡ 
	gA
& 
	ga
, cÚ¡ 
	gB
& 
	gb
ècÚ¡ { ‡ !ğ
b
; }

185 
	sAnyLt
 {

186 
	g‹m¶©e
 <
ty³Çme
 
	gA
,y³Çm
	gB
>

187 
boŞ
 
İ”©Ü
()(cÚ¡ 
	gA
& 
	ga
, cÚ¡ 
	gB
& 
	gb
) const { ‡ < b; }

189 
	sAnyGt
 {

190 
	g‹m¶©e
 <
ty³Çme
 
	gA
,y³Çm
	gB
>

191 
boŞ
 
İ”©Ü
()(cÚ¡ 
	gA
& 
	ga
, cÚ¡ 
	gB
& 
	gb
) const { ‡ > b; }

193 
	sAnyLe
 {

194 
	g‹m¶©e
 <
ty³Çme
 
	gA
,y³Çm
	gB
>

195 
boŞ
 
İ”©Ü
()(cÚ¡ 
	gA
& 
	ga
, cÚ¡ 
	gB
& 
	gb
ècÚ¡ { ‡ <ğ
b
; }

197 
	sAnyGe
 {

198 
	g‹m¶©e
 <
ty³Çme
 
	gA
,y³Çm
	gB
>

199 
boŞ
 
İ”©Ü
()(cÚ¡ 
	gA
& 
	ga
, cÚ¡ 
	gB
& 
	gb
ècÚ¡ { ‡ >ğ
b
; }

203 şas 
	cDummyM©chResuÉLi¡’”
 : 
public
 
M©chResuÉLi¡’”
 {

204 
public
:

205 
DummyM©chResuÉLi¡’”
(è: 
M©chResuÉLi¡’”
(
nuÎ±r
) {}

207 
´iv©e
:

208 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
DummyM©chResuÉLi¡’”
);

214 şas 
	cSŒ—mM©chResuÉLi¡’”
 : 
public
 
M©chResuÉLi¡’”
 {

215 
public
:

216 
ex¶ic™
 
SŒ—mM©chResuÉLi¡’”
(::
¡d
::
o¡»am
* 
os
)

217 : 
M©chResuÉLi¡’”
(
os
) {}

219 
´iv©e
:

220 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
SŒ—mM©chResuÉLi¡’”
);

223 
	sSh¬edPaylßdBa£
 {

224 
	g¡d
::
©omic
<> 
»f
{1};

225 
Ref
(è{ 
	g»f
.
ãtch_add
(1, 
¡d
::
memÜy_Üd”_»Ïxed
); }

226 
boŞ
 
UÄef
(è{  
	g»f
.
ãtch_sub
(1, 
¡d
::
memÜy_Üd”_acq_»l
) == 1; }

229 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

230 
	gSh¬edPaylßd
 : 
Sh¬edPaylßdBa£
 {

231 
ex¶ic™
 
Sh¬edPaylßd
(cÚ¡ 
T
& 
v
è: 
v®ue
(v) {}

232 
ex¶ic™
 
Sh¬edPaylßd
(
T
&& 
v
è: 
v®ue
(
¡d
::
move
(v)) {}

234 
De¡roy
(
Sh¬edPaylßdBa£
* 
sh¬ed
) {

235 
d–‘e
 
¡©ic_ÿ¡
<
Sh¬edPaylßd
*>(
sh¬ed
);

238 
T
 
	gv®ue
;

244 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

245 şas 
	cM©ch”Ba£
 : 
´iv©e
 
M©ch”Desüib”IÁ”çû
 {

246 
public
:

249 
boŞ
 
M©chAndEx¶aš
(cÚ¡ 
T
& 
x
, 
M©chResuÉLi¡’”
* 
li¡’”
) const {

250 
GTEST_CHECK_
(
vbË_
 !ğ
nuÎ±r
);

251  
	gvbË_
->
m©ch_ªd_ex¶aš
(*
this
, 
x
, 
li¡’”
);

255 
boŞ
 
M©ches
(cÚ¡ 
T
& 
x
) const {

256 
DummyM©chResuÉLi¡’”
 
	gdummy
;

257  
M©chAndEx¶aš
(
x
, &
dummy
);

261 
DesüibeTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
fš®
 {

262 
GTEST_CHECK_
(
vbË_
 !ğ
nuÎ±r
);

263 
	gvbË_
->
desüibe
(*
this
, 
os
, 
çl£
);

267 
DesüibeNeg©iÚTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
fš®
 {

268 
GTEST_CHECK_
(
vbË_
 !ğ
nuÎ±r
);

269 
	gvbË_
->
desüibe
(*
this
, 
os
, 
Œue
);

273 
Ex¶ašM©chResuÉTo
(cÚ¡ 
T
& 
x
, ::
¡d
::
o¡»am
* 
os
) const {

274 
SŒ—mM©chResuÉLi¡’”
 
li¡’”
(
os
);

275 
M©chAndEx¶aš
(
x
, &
li¡’”
);

281 cÚ¡ 
M©ch”Desüib”IÁ”çû
* 
G‘Desüib”
() const {

282 ià(
	gvbË_
 =ğ
nuÎ±r
) ‚ullptr;

283  
	gvbË_
->
g‘_desüib”
(*
this
);

286 
	g´Ùeùed
:

287 
M©ch”Ba£
(è: 
vbË_
(
nuÎ±r
) {}

290 
‹m¶©e
 <
ty³Çme
 
U
>

291 
ex¶ic™
 
M©ch”Ba£
(cÚ¡ 
M©ch”IÁ”çû
<
U
>* 
im¶
) {

292 
In™
(
im¶
);

295 
	g‹m¶©e
 <
ty³Çme
 
	gM
, 
	gty³Çme
 =y³Çm
¡d
::
»move_»ã»nû
<

296 
M
>::
ty³
::
is_g‹¡_m©ch”
>

297 
M©ch”Ba£
(
M
&& 
m
) {

298 
In™
(
¡d
::
fÜw¬d
<
M
>(
m
));

301 
M©ch”Ba£
(cÚ¡ M©ch”Ba£& 
Ùh”
)

302 : 
vbË_
(
Ùh”
.vbË_), 
bufãr_
(other.buffer_) {

303 ià(
IsSh¬ed
()è
	gbufãr_
.
	gsh¬ed
->
Ref
();

306 
	gM©ch”Ba£
& 
	gİ”©Ü
=(cÚ¡ 
M©ch”Ba£
& 
Ùh”
) {

307 ià(
this
 =ğ&
Ùh”
)  *this;

308 
De¡roy
();

309 
	gvbË_
 = 
Ùh”
.
vbË_
;

310 
	gbufãr_
 = 
Ùh”
.
bufãr_
;

311 ià(
IsSh¬ed
()è
	gbufãr_
.
	gsh¬ed
->
Ref
();

312  *
	gthis
;

315 
M©ch”Ba£
(M©ch”Ba£&& 
Ùh”
)

316 : 
vbË_
(
Ùh”
.vbË_), 
bufãr_
(other.buffer_) {

317 
	gÙh”
.
	gvbË_
 = 
nuÎ±r
;

320 
	gM©ch”Ba£
& 
	gİ”©Ü
=(
M©ch”Ba£
&& 
Ùh”
) {

321 ià(
this
 =ğ&
Ùh”
)  *this;

322 
De¡roy
();

323 
	gvbË_
 = 
Ùh”
.
vbË_
;

324 
	gbufãr_
 = 
Ùh”
.
bufãr_
;

325 
	gÙh”
.
	gvbË_
 = 
nuÎ±r
;

326  *
	gthis
;

329 ~
M©ch”Ba£
(è
	gov”ride
 { 
De¡roy
(); }

331 
	g´iv©e
:

332 
	sVTabË
 {

333 
boŞ
 (*
m©ch_ªd_ex¶aš
)(cÚ¡ 
M©ch”Ba£
&, cÚ¡ 
	gT
&,

334 
	gM©chResuÉLi¡’”
*);

335 (*
	gdesüibe
)(cÚ¡ 
	gM©ch”Ba£
&, 
	g¡d
::
o¡»am
*, 
boŞ
 
	gÃg©iÚ
);

338 cÚ¡ 
	gM©ch”Desüib”IÁ”çû
* (*
	gg‘_desüib”
)(cÚ¡ 
	gM©ch”Ba£
&);

340 (*
	gsh¬ed_de¡roy
)(
	gSh¬edPaylßdBa£
*);

343 
boŞ
 
IsSh¬ed
() const {

344  
	gvbË_
 !ğ
nuÎ±r
 && 
vbË_
->
sh¬ed_de¡roy
 !=‚ullptr;

348 
	g‹m¶©e
 <
ty³Çme
 
	gP
>

349 autØ
M©chAndEx¶ašIm¶
(cÚ¡ 
M©ch”Ba£
& 
m
, cÚ¡ 
T
& 
v®ue
,

350 
M©chResuÉLi¡’”
* 
li¡’”
)

351 -> 
deşty³
(
P
::
G‘
(
m
).
M©chAndEx¶aš
(
v®ue
, 
li¡’”
->
¡»am
())) {

352  
	gP
::
G‘
(
m
).
M©chAndEx¶aš
(
v®ue
, 
li¡’”
->
¡»am
());

355 
	g‹m¶©e
 <
ty³Çme
 
	gP
>

356 autØ
M©chAndEx¶ašIm¶
(cÚ¡ 
M©ch”Ba£
& 
m
, cÚ¡ 
T
& 
v®ue
,

357 
M©chResuÉLi¡’”
* 
li¡’”
)

358 -> 
deşty³
(
P
::
G‘
(
m
).
M©chAndEx¶aš
(
v®ue
, 
li¡’”
)) {

359  
	gP
::
G‘
(
m
).
M©chAndEx¶aš
(
v®ue
, 
li¡’”
);

362 
	g‹m¶©e
 <
ty³Çme
 
	gP
>

363 
DesüibeIm¶
(cÚ¡ 
M©ch”Ba£
& 
m
, 
¡d
::
o¡»am
* 
os
,

364 
boŞ
 
Ãg©iÚ
) {

365 ià(
	gÃg©iÚ
) {

366 
	gP
::
G‘
(
m
).
DesüibeNeg©iÚTo
(
os
);

368 
	gP
::
G‘
(
m
).
DesüibeTo
(
os
);

372 
	g‹m¶©e
 <
ty³Çme
 
	gP
>

373 cÚ¡ 
M©ch”Desüib”IÁ”çû
* 
G‘Desüib”Im¶
(

374 cÚ¡ 
M©ch”Ba£
& 
m
) {

381  
	g¡d
::
g‘
<(

382 
¡d
::
is_cÚv”tibË
<
deşty³
(&
P
::
G‘
(
m
)),

383 cÚ¡ 
	gM©ch”Desüib”IÁ”çû
*>::
v®ue


385 : 0)>(
¡d
::
make_tu¶e
(&
m
, &
P
::
G‘
(m)));

388 
	g‹m¶©e
 <
ty³Çme
 
	gP
>

389 cÚ¡ 
VTabË
* 
G‘VTabË
() {

390 
cÚ¡ex´
 
VTabË
 
	gkVTabË
 = {&
M©chAndEx¶ašIm¶
<
P
>,

391 &
DesüibeIm¶
<
P
>, &
G‘Desüib”Im¶
<P>,

392 
P
::
sh¬ed_de¡roy
};

393  &
	gkVTabË
;

396 
	uBufãr
 {

398 * 
	g±r
;

399 
	gd
;

400 
št64_t
 
	gi
;

402 
Sh¬edPaylßdBa£
* 
	gsh¬ed
;

405 
De¡roy
() {

406 ià(
IsSh¬ed
(è&& 
	gbufãr_
.
	gsh¬ed
->
UÄef
()) {

407 
	gvbË_
->
sh¬ed_de¡roy
(
bufãr_
.
sh¬ed
);

411 
	g‹m¶©e
 <
ty³Çme
 
	gM
>

412 
cÚ¡ex´
 
boŞ
 
IsIÆšed
() {

413  (
	gM
è<ğ(
Bufãr
è&& 
®ignof
(
M
) <=‡lignof(Buffer) &&

414 
¡d
::
is_ŒivŸÎy_cİy_cÚ¡ruùibË
<
M
>::
v®ue
 &&

415 
¡d
::
is_ŒivŸÎy_de¡ruùibË
<
M
>::
v®ue
;

418 
	g‹m¶©e
 <
ty³Çme
 
	gM
, 
	gboŞ
 = 
M©ch”Ba£
::
IsIÆšed
<
M
>()>

419 
	sV®uePŞicy
 {

420 cÚ¡ 
M
& 
G‘
(cÚ¡ 
M©ch”Ba£
& 
m
) {

423 cÚ¡ 
M
 *
±r
 = 
¡©ic_ÿ¡
<const M*>(

424 
¡©ic_ÿ¡
<cÚ¡ *>(&
m
.
bufãr_
));

425  *
	g±r
;

427 
In™
(
M©ch”Ba£
& 
m
, 
M
 
im¶
) {

428 ::
Ãw
 (
¡©ic_ÿ¡
<*>(&
m
.
bufãr_
)è
M
(
im¶
);

430 
cÚ¡ex´
‡utØ
	gsh¬ed_de¡roy
 = 
nuÎ±r
;

433 
	g‹m¶©e
 <
ty³Çme
 
	gM
>

434 
	gV®uePŞicy
<
	gM
, 
	gçl£
> {

435 
usšg
 
	gSh¬ed
 = 
Sh¬edPaylßd
<
M
>;

436 cÚ¡ 
	gM
& 
G‘
(cÚ¡ 
M©ch”Ba£
& 
m
) {

437  
	g¡©ic_ÿ¡
<
	gSh¬ed
*>(
	gm
.
	gbufãr_
.
	gsh¬ed
)->
	gv®ue
;

439 
	g‹m¶©e
 <
ty³Çme
 
	gArg
>

440 
In™
(
M©ch”Ba£
& 
m
, 
Arg
&& 
¬g
) {

441 
	gm
.
	gbufãr_
.
	gsh¬ed
 = 
Ãw
 
Sh¬ed
(
¡d
::
fÜw¬d
<
Arg
>(
¬g
));

443 
cÚ¡ex´
‡utØ
	gsh¬ed_de¡roy
 = &
Sh¬ed
::
De¡roy
;

446 
	g‹m¶©e
 <
ty³Çme
 
	gU
, 
boŞ
 
	gB
>

447 
	gV®uePŞicy
<cÚ¡ 
	gM©ch”IÁ”çû
<
	gU
>*, 
	gB
> {

448 
usšg
 
	gM
 = cÚ¡ 
M©ch”IÁ”çû
<
U
>;

449 
usšg
 
	gSh¬ed
 = 
Sh¬edPaylßd
<
¡d
::
unique_±r
<
M
>>;

450 cÚ¡ 
	gM
& 
G‘
(cÚ¡ 
M©ch”Ba£
& 
m
) {

451  *
	g¡©ic_ÿ¡
<
	gSh¬ed
*>(
	gm
.
	gbufãr_
.
	gsh¬ed
)->
	gv®ue
;

453 
In™
(
M©ch”Ba£
& 
m
, 
M
* 
im¶
) {

454 
	gm
.
	gbufãr_
.
	gsh¬ed
 = 
Ãw
 
Sh¬ed
(
¡d
::
unique_±r
<
M
>(
im¶
));

457 
cÚ¡ex´
‡utØ
	gsh¬ed_de¡roy
 = &
Sh¬ed
::
De¡roy
;

460 
	g‹m¶©e
 <
ty³Çme
 
	gM
>

461 
In™
(
M
&& 
m
) {

462 
usšg
 
	gMM
 = 
ty³Çme
 
¡d
::
deÿy
<
M
>::
ty³
;

463 
usšg
 
	gPŞicy
 = 
V®uePŞicy
<
MM
>;

464 
	gvbË_
 = 
G‘VTabË
<
PŞicy
>();

465 
	gPŞicy
::
In™
(*
this
, 
¡d
::
fÜw¬d
<
M
>(
m
));

468 cÚ¡ 
VTabË
* 
	gvbË_
;

469 
Bufãr
 
	gbufãr_
;

478 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

479 
şass
 
	gM©ch”
 : 
public
 
š‹º®
::
M©ch”Ba£
<
T
> {

480 
public
:

484 
ex¶ic™
 
M©ch”
() {}

487 
ex¶ic™
 
M©ch”
(cÚ¡ 
M©ch”IÁ”çû
<cÚ¡ 
T
&>* 
im¶
)

488 : 
š‹º®
::
M©ch”Ba£
<
T
>(
im¶
) {}

490 
‹m¶©e
 <
ty³Çme
 
U
>

491 
ex¶ic™
 
M©ch”
(

492 cÚ¡ 
M©ch”IÁ”çû
<
U
>* 
im¶
,

493 
ty³Çme
 
¡d
::
’abË_if
<!¡d::
is_§me
<
U
, cÚ¡ U&>::
v®ue
>::
ty³
* =

494 
nuÎ±r
)

495 : 
š‹º®
::
M©ch”Ba£
<
T
>(
im¶
) {}

497 
‹m¶©e
 <
ty³Çme
 
M
, 
	gty³Çme
 =y³Çm
¡d
::
»move_»ã»nû
<

498 
M
>::
ty³
::
is_g‹¡_m©ch”
>

499 
M©ch”
(
M
&& 
m
è: 
š‹º®
::
M©ch”Ba£
<
T
>(
¡d
::
fÜw¬d
<M>(m)) {}

503 
M©ch”
(
T
 
v®ue
);

509 
	g‹m¶©e
 <>

510 
şass
 
GTEST_API_
 
	gM©ch”
<cÚ¡ 
	g¡d
::
¡ršg
&>

511 : 
public
 
š‹º®
::
M©ch”Ba£
<cÚ¡ 
¡d
::
¡ršg
&> {

512 
public
:

513 
M©ch”
() {}

515 
ex¶ic™
 
M©ch”
(cÚ¡ 
M©ch”IÁ”çû
<cÚ¡ 
¡d
::
¡ršg
&>* 
im¶
)

516 : 
š‹º®
::
M©ch”Ba£
<cÚ¡ 
¡d
::
¡ršg
&>(
im¶
) {}

518 
‹m¶©e
 <
ty³Çme
 
M
, 
	gty³Çme
 =y³Çm
¡d
::
»move_»ã»nû
<

519 
M
>::
ty³
::
is_g‹¡_m©ch”
>

520 
M©ch”
(
M
&& 
m
)

521 : 
š‹º®
::
M©ch”Ba£
<cÚ¡ 
¡d
::
¡ršg
&>(¡d::
fÜw¬d
<
M
>(
m
)) {}

525 
M©ch”
(cÚ¡ 
¡d
::
¡ršg
& 
s
);

528 
M©ch”
(cÚ¡ * 
s
);

531 
	g‹m¶©e
 <>

532 
şass
 
GTEST_API_
 
	gM©ch”
<
	g¡d
::
¡ršg
>

533 : 
public
 
š‹º®
::
M©ch”Ba£
<
¡d
::
¡ršg
> {

534 
public
:

535 
M©ch”
() {}

537 
ex¶ic™
 
M©ch”
(cÚ¡ 
M©ch”IÁ”çû
<cÚ¡ 
¡d
::
¡ršg
&>* 
im¶
)

538 : 
š‹º®
::
M©ch”Ba£
<
¡d
::
¡ršg
>(
im¶
) {}

539 
ex¶ic™
 
M©ch”
(cÚ¡ 
M©ch”IÁ”çû
<
¡d
::
¡ršg
>* 
im¶
)

540 : 
š‹º®
::
M©ch”Ba£
<
¡d
::
¡ršg
>(
im¶
) {}

542 
‹m¶©e
 <
ty³Çme
 
M
, 
	gty³Çme
 =y³Çm
¡d
::
»move_»ã»nû
<

543 
M
>::
ty³
::
is_g‹¡_m©ch”
>

544 
M©ch”
(
M
&& 
m
)

545 : 
š‹º®
::
M©ch”Ba£
<
¡d
::
¡ršg
>(¡d::
fÜw¬d
<
M
>(
m
)) {}

549 
M©ch”
(cÚ¡ 
¡d
::
¡ršg
& 
s
);

552 
M©ch”
(cÚ¡ * 
s
);

555 #ià
GTEST_INTERNAL_HAS_STRING_VIEW


559 
	g‹m¶©e
 <>

560 
şass
 
GTEST_API_
 
	gM©ch”
<cÚ¡ 
	gš‹º®
::
SŒšgV›w
&>

561 : 
public
 
š‹º®
::
M©ch”Ba£
<cÚ¡ iÁ”Çl::
SŒšgV›w
&> {

562 
public
:

563 
M©ch”
() {}

565 
ex¶ic™
 
M©ch”
(cÚ¡ 
M©ch”IÁ”çû
<cÚ¡ 
š‹º®
::
SŒšgV›w
&>* 
im¶
)

566 : 
š‹º®
::
M©ch”Ba£
<cÚ¡ iÁ”Çl::
SŒšgV›w
&>(
im¶
) {}

568 
‹m¶©e
 <
ty³Çme
 
M
, 
	gty³Çme
 =y³Çm
¡d
::
»move_»ã»nû
<

569 
M
>::
ty³
::
is_g‹¡_m©ch”
>

570 
M©ch”
(
M
&& 
m
)

571 : 
š‹º®
::
M©ch”Ba£
<cÚ¡ iÁ”Çl::
SŒšgV›w
&>(
¡d
::
fÜw¬d
<
M
>(
m
)) {

576 
M©ch”
(cÚ¡ 
¡d
::
¡ršg
& 
s
);

579 
M©ch”
(cÚ¡ * 
s
);

582 
M©ch”
(
š‹º®
::
SŒšgV›w
 
s
);

585 
	g‹m¶©e
 <>

586 
şass
 
GTEST_API_
 
	gM©ch”
<
	gš‹º®
::
SŒšgV›w
>

587 : 
public
 
š‹º®
::
M©ch”Ba£
<š‹º®::
SŒšgV›w
> {

588 
public
:

589 
M©ch”
() {}

591 
ex¶ic™
 
M©ch”
(cÚ¡ 
M©ch”IÁ”çû
<cÚ¡ 
š‹º®
::
SŒšgV›w
&>* 
im¶
)

592 : 
š‹º®
::
M©ch”Ba£
<š‹º®::
SŒšgV›w
>(
im¶
) {}

593 
ex¶ic™
 
M©ch”
(cÚ¡ 
M©ch”IÁ”çû
<
š‹º®
::
SŒšgV›w
>* 
im¶
)

594 : 
š‹º®
::
M©ch”Ba£
<š‹º®::
SŒšgV›w
>(
im¶
) {}

596 
‹m¶©e
 <
ty³Çme
 
M
, 
	gty³Çme
 =y³Çm
¡d
::
»move_»ã»nû
<

597 
M
>::
ty³
::
is_g‹¡_m©ch”
>

598 
M©ch”
(
M
&& 
m
)

599 : 
š‹º®
::
M©ch”Ba£
<š‹º®::
SŒšgV›w
>(
¡d
::
fÜw¬d
<
M
>(
m
)) {}

603 
M©ch”
(cÚ¡ 
¡d
::
¡ršg
& 
s
);

606 
M©ch”
(cÚ¡ * 
s
);

609 
M©ch”
(
š‹º®
::
SŒšgV›w
 
s
);

614 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

615 
	g¡d
::
o¡»am
& 
İ”©Ü
<<(
¡d
::o¡»am& 
os
, cÚ¡ 
	gM©ch”
<
	gT
>& 
	gm©ch”
) {

616 
	gm©ch”
.
DesüibeTo
(&
os
);

617  
	gos
;

632 
	g‹m¶©e
 <
şass
 
	gIm¶
>

633 şas 
	cPŞymÜphicM©ch”
 {

634 
	gpublic
:

635 
ex¶ic™
 
PŞymÜphicM©ch”
(cÚ¡ 
Im¶
& 
ª_im¶
è: 
im¶_
(an_impl) {}

639 
Im¶
& 
mubË_im¶
(è{  
im¶_
; }

643 cÚ¡ 
	gIm¶
& 
im¶
(ècÚ¡ {  
	gim¶_
; }

645 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

646 
İ”©Ü
 
	gM©ch”
<
	gT
>() const {

647  
	gM©ch”
<
	gT
>(
Ãw
 
	gMÚomÜphicIm¶
<cÚ¡ T&>(
	gim¶_
));

650 
	g´iv©e
:

651 
‹m¶©e
 <
ty³Çme
 
T
>

652 
şass
 
MÚomÜphicIm¶
 : 
public
 
M©ch”IÁ”çû
<
T
> {

653 
public
:

654 
ex¶ic™
 
MÚomÜphicIm¶
(cÚ¡ 
Im¶
& 
im¶
è: 
im¶_
(impl) {}

656 
DesüibeTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 { 
im¶_
.DescribeTo(os); }

658 
DesüibeNeg©iÚTo
(::
¡d
::
o¡»am
* 
os
ècÚ¡ 
ov”ride
 {

659 
im¶_
.
DesüibeNeg©iÚTo
(
os
);

662 
boŞ
 
M©chAndEx¶aš
(
T
 
x
, 
M©chResuÉLi¡’”
* 
li¡’”
ècÚ¡ 
	gov”ride
 {

663  
	gim¶_
.
M©chAndEx¶aš
(
x
, 
li¡’”
);

666 
	g´iv©e
:

667 cÚ¡ 
Im¶
 
im¶_
;

670 
Im¶
 
	gim¶_
;

679 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

680 
šlše
 
	gM©ch”
<
	gT
> 
MakeM©ch”
(cÚ¡ 
M©ch”IÁ”çû
<
T
>* 
im¶
) {

681  
	gM©ch”
<
	gT
>(
	gim¶
);

691 
	g‹m¶©e
 <
şass
 
	gIm¶
>

692 
šlše
 
	gPŞymÜphicM©ch”
<
	gIm¶
> 
	$MakePŞymÜphicM©ch”
(cÚ¡ 
Im¶
& 
im¶
) {

693  
PŞymÜphicM©ch”
<
Im¶
>(
im¶
);

694 
	}
}

696 
Çme¥aû
 
	gš‹º®
 {

707 
	g‹m¶©e
 <
ty³Çme
 
	gD
,y³Çm
	gRhs
,y³Çm
	gOp
>

708 şas 
	cCom·risÚBa£
 {

709 
	gpublic
:

710 
ex¶ic™
 
Com·risÚBa£
(cÚ¡ 
Rhs
& 
rhs
è: 
rhs_
(rhs) {}

712 
usšg
 
is_g‹¡_m©ch”
 = ;

714 
	g‹m¶©e
 <
ty³Çme
 
	gLhs
>

715 
boŞ
 
M©chAndEx¶aš
(cÚ¡ 
Lhs
& 
lhs
, 
¡d
::
o¡»am
*) const {

716  
Op
()(
lhs
, 
Unw¿p
(
rhs_
));

718 
DesüibeTo
(
¡d
::
o¡»am
* 
os
) const {

719 *
os
 << 
D
::
Desc
() << " ";

720 
Univ”§lPršt
(
Unw¿p
(
rhs_
), 
os
);

722 
DesüibeNeg©iÚTo
(
¡d
::
o¡»am
* 
os
) const {

723 *
os
 << 
D
::
Neg©edDesc
() << " ";

724 
Univ”§lPršt
(
Unw¿p
(
rhs_
), 
os
);

727 
	g´iv©e
:

728 
‹m¶©e
 <
ty³Çme
 
T
>

729 cÚ¡ 
T
& 
Unw¿p
(cÚ¡ T& 
v
) {

730  
v
;

732 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

733 cÚ¡ 
	gT
& 
Unw¿p
(
¡d
::
»ã»nû_w¿µ”
<
T
> 
v
) {

734  
v
;

737 
Rhs
 
	grhs_
;

740 
	g‹m¶©e
 <
ty³Çme
 
	gRhs
>

741 
şass
 
	gEqM©ch”
 : 
public
 
Com·risÚBa£
<
EqM©ch”
<
Rhs
>, 
	gRhs
, 
	gAnyEq
> {

742 
	gpublic
:

743 
ex¶ic™
 
EqM©ch”
(cÚ¡ 
Rhs
& 
rhs
)

744 : 
Com·risÚBa£
<
EqM©ch”
<
Rhs
>, 
	gRhs
, 
	gAnyEq
>(
	grhs
) { }

745 cÚ¡ * 
Desc
() {  "isƒqualo"; }

746 cÚ¡ * 
Neg©edDesc
() {  "isn'tƒqualo"; }

748 
	g‹m¶©e
 <
ty³Çme
 
	gRhs
>

749 
şass
 
	gNeM©ch”
 : 
public
 
Com·risÚBa£
<
NeM©ch”
<
Rhs
>, 
	gRhs
, 
	gAnyNe
> {

750 
	gpublic
:

751 
ex¶ic™
 
NeM©ch”
(cÚ¡ 
Rhs
& 
rhs
)

752 : 
Com·risÚBa£
<
NeM©ch”
<
Rhs
>, 
	gRhs
, 
	gAnyNe
>(
	grhs
) { }

753 cÚ¡ * 
Desc
() {  "isn'tƒqualo"; }

754 cÚ¡ * 
Neg©edDesc
() {  "isƒqualo"; }

756 
	g‹m¶©e
 <
ty³Çme
 
	gRhs
>

757 
şass
 
	gLtM©ch”
 : 
public
 
Com·risÚBa£
<
LtM©ch”
<
Rhs
>, 
	gRhs
, 
	gAnyLt
> {

758 
	gpublic
:

759 
ex¶ic™
 
LtM©ch”
(cÚ¡ 
Rhs
& 
rhs
)

760 : 
Com·risÚBa£
<
LtM©ch”
<
Rhs
>, 
	gRhs
, 
	gAnyLt
>(
	grhs
) { }

761 cÚ¡ * 
Desc
() {  "is <"; }

762 cÚ¡ * 
Neg©edDesc
() {  "isn't <"; }

764 
	g‹m¶©e
 <
ty³Çme
 
	gRhs
>

765 
şass
 
	gGtM©ch”
 : 
public
 
Com·risÚBa£
<
GtM©ch”
<
Rhs
>, 
	gRhs
, 
	gAnyGt
> {

766 
	gpublic
:

767 
ex¶ic™
 
GtM©ch”
(cÚ¡ 
Rhs
& 
rhs
)

768 : 
Com·risÚBa£
<
GtM©ch”
<
Rhs
>, 
	gRhs
, 
	gAnyGt
>(
	grhs
) { }

769 cÚ¡ * 
Desc
() {  "is >"; }

770 cÚ¡ * 
Neg©edDesc
() {  "isn't >"; }

772 
	g‹m¶©e
 <
ty³Çme
 
	gRhs
>

773 
şass
 
	gLeM©ch”
 : 
public
 
Com·risÚBa£
<
LeM©ch”
<
Rhs
>, 
	gRhs
, 
	gAnyLe
> {

774 
	gpublic
:

775 
ex¶ic™
 
LeM©ch”
(cÚ¡ 
Rhs
& 
rhs
)

776 : 
Com·risÚBa£
<
LeM©ch”
<
Rhs
>, 
	gRhs
, 
	gAnyLe
>(
	grhs
) { }

777 cÚ¡ * 
Desc
() {  "is <="; }

778 cÚ¡ * 
Neg©edDesc
() {  "isn't <="; }

780 
	g‹m¶©e
 <
ty³Çme
 
	gRhs
>

781 
şass
 
	gGeM©ch”
 : 
public
 
Com·risÚBa£
<
GeM©ch”
<
Rhs
>, 
	gRhs
, 
	gAnyGe
> {

782 
	gpublic
:

783 
ex¶ic™
 
GeM©ch”
(cÚ¡ 
Rhs
& 
rhs
)

784 : 
Com·risÚBa£
<
GeM©ch”
<
Rhs
>, 
	gRhs
, 
	gAnyGe
>(
	grhs
) { }

785 cÚ¡ * 
Desc
() {  "is >="; }

786 cÚ¡ * 
Neg©edDesc
() {  "isn't >="; }

789 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
	gty³Çme
 =y³Çm
¡d
::
’abË_if
<

790 
¡d
::
is_cÚ¡ruùibË
<¡d::
¡ršg
, 
	gT
>::
v®ue
>::
ty³
>

791 
usšg
 
SŒšgLike
 = 
T
;

796 şas 
	cM©chesRegexM©ch”
 {

797 
	gpublic
:

798 
M©chesRegexM©ch”
(cÚ¡ 
RE
* 
»gex
, 
boŞ
 
fuÎ_m©ch
)

799 : 
»gex_
(
»gex
), 
fuÎ_m©ch_
(
fuÎ_m©ch
) {}

801 #ià
GTEST_INTERNAL_HAS_STRING_VIEW


802 
boŞ
 
M©chAndEx¶aš
(cÚ¡ 
š‹º®
::
SŒšgV›w
& 
s
,

803 
M©chResuÉLi¡’”
* 
li¡’”
) const {

804  
M©chAndEx¶aš
(
¡d
::
¡ršg
(
s
), 
li¡’”
);

813 
	g‹m¶©e
 <
ty³Çme
 
	gCh¬Ty³
>

814 
boŞ
 
M©chAndEx¶aš
(
Ch¬Ty³
* 
s
, 
M©chResuÉLi¡’”
* 
li¡’”
) const {

815  
	gs
 !ğ
nuÎ±r
 && 
M©chAndEx¶aš
(
¡d
::
¡ršg
(
s
), 
li¡’”
);

822 
	g‹m¶©e
 <
şass
 
	gM©ch“SŒšgTy³
>

823 
boŞ
 
M©chAndEx¶aš
(cÚ¡ 
M©ch“SŒšgTy³
& 
s
,

824 
M©chResuÉLi¡’”
* ) const {

825 cÚ¡ 
	g¡d
::
¡ršg
& 
s2
(
s
);

826  
	gfuÎ_m©ch_
 ? 
	gRE
::
FuÎM©ch
(
s2
, *
»gex_
)

827 : 
RE
::
P¬tŸlM©ch
(
s2
, *
»gex_
);

830 
DesüibeTo
(::
¡d
::
o¡»am
* 
os
) const {

831 *
os
 << (
fuÎ_m©ch_
 ? "matches" : "contains") << "„egularƒxpression ";

832 
	gUniv”§lPrš‹r
<
	g¡d
::
¡ršg
>::
Pršt
(
»gex_
->
·‰”n
(), 
os
);

835 
DesüibeNeg©iÚTo
(::
¡d
::
o¡»am
* 
os
) const {

836 *
os
 << "dÛ¢'ˆ" << (
fuÎ_m©ch_
 ? "match" : "contain")

838 
	gUniv”§lPrš‹r
<
	g¡d
::
¡ršg
>::
Pršt
(
»gex_
->
·‰”n
(), 
os
);

841 
	g´iv©e
:

842 cÚ¡ 
¡d
::
sh¬ed_±r
<cÚ¡ 
RE
> 
»gex_
;

843 cÚ¡ 
boŞ
 
	gfuÎ_m©ch_
;

849 
šlše
 
	gPŞymÜphicM©ch”
<
	gš‹º®
::
M©chesRegexM©ch”
> 
	$M©chesRegex
(

850 cÚ¡ 
š‹º®
::
RE
* 
»gex
) {

851  
	`MakePŞymÜphicM©ch”
(
š‹º®
::
	`M©chesRegexM©ch”
(
»gex
, 
Œue
));

852 
	}
}

853 
	g‹m¶©e
 <
ty³Çme
 
	gT
 = 
¡d
::
¡ršg
>

854 
PŞymÜphicM©ch”
<
š‹º®
::
M©chesRegexM©ch”
> 
M©chesRegex
(

855 cÚ¡ 
š‹º®
::
SŒšgLike
<
T
>& 
»gex
) {

856  
M©chesRegex
(
Ãw
 
š‹º®
::
RE
(
¡d
::
¡ršg
(
»gex
)));

861 
šlše
 
	gPŞymÜphicM©ch”
<
	gš‹º®
::
M©chesRegexM©ch”
> 
	$CÚšsRegex
(

862 cÚ¡ 
š‹º®
::
RE
* 
»gex
) {

863  
	`MakePŞymÜphicM©ch”
(
š‹º®
::
	`M©chesRegexM©ch”
(
»gex
, 
çl£
));

864 
	}
}

865 
	g‹m¶©e
 <
ty³Çme
 
	gT
 = 
¡d
::
¡ršg
>

866 
PŞymÜphicM©ch”
<
š‹º®
::
M©chesRegexM©ch”
> 
CÚšsRegex
(

867 cÚ¡ 
š‹º®
::
SŒšgLike
<
T
>& 
»gex
) {

868  
CÚšsRegex
(
Ãw
 
š‹º®
::
RE
(
¡d
::
¡ršg
(
»gex
)));

874 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

875 
šlše
 
	gš‹º®
::
EqM©ch”
<
T
> 
	$Eq
(
T
 
x
è{  
š‹º®
::
EqM©ch”
<T>(x); 
	}
}

879 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

880 
	gM©ch”
<
	gT
>::
	$M©ch”
(
T
 
v®ue
è{ *
this
 = 
	`Eq
(v®ue); 
	}
}

894 
	g‹m¶©e
 <
ty³Çme
 
	gLhs
,y³Çm
	gRhs
>

895 
šlše
 
	gM©ch”
<
	gLhs
> 
	$Ty³dEq
(cÚ¡ 
Rhs
& 
rhs
è{  
	`Eq
Ôhs); 
	}
}

898 
	g‹m¶©e
 <
ty³Çme
 
	gRhs
>

899 
šlše
 
	gš‹º®
::
GeM©ch”
<
Rhs
> 
	$Ge
(
Rhs
 
x
) {

900  
š‹º®
::
GeM©ch”
<
Rhs
>(
x
);

901 
	}
}

904 
	g‹m¶©e
 <
ty³Çme
 
	gRhs
>

905 
šlše
 
	gš‹º®
::
GtM©ch”
<
Rhs
> 
	$Gt
(
Rhs
 
x
) {

906  
š‹º®
::
GtM©ch”
<
Rhs
>(
x
);

907 
	}
}

910 
	g‹m¶©e
 <
ty³Çme
 
	gRhs
>

911 
šlše
 
	gš‹º®
::
LeM©ch”
<
Rhs
> 
	$Le
(
Rhs
 
x
) {

912  
š‹º®
::
LeM©ch”
<
Rhs
>(
x
);

913 
	}
}

916 
	g‹m¶©e
 <
ty³Çme
 
	gRhs
>

917 
šlše
 
	gš‹º®
::
LtM©ch”
<
Rhs
> 
	$Lt
(
Rhs
 
x
) {

918  
š‹º®
::
LtM©ch”
<
Rhs
>(
x
);

919 
	}
}

922 
	g‹m¶©e
 <
ty³Çme
 
	gRhs
>

923 
šlše
 
	gš‹º®
::
NeM©ch”
<
Rhs
> 
	$Ne
(
Rhs
 
x
) {

924  
š‹º®
::
NeM©ch”
<
Rhs
>(
x
);

925 
	}
}

928 
	$GTEST_DISABLE_MSC_WARNINGS_POP_
()

	@third_party/googletest/googletest/include/gtest/gtest-message.h

47 #iâdeà
GOOGLETEST_INCLUDE_GTEST_GTEST_MESSAGE_H_


48 
	#GOOGLETEST_INCLUDE_GTEST_GTEST_MESSAGE_H_


	)

50 
	~<lim™s
>

51 
	~<memÜy
>

52 
	~<s¡»am
>

54 
	~"g‹¡/š‹º®/g‹¡-pÜt.h
"

56 
GTEST_DISABLE_MSC_WARNINGS_PUSH_
(4251 \

61 
	gİ”©Ü
<<(cÚ¡ 
	g‹¡šg
::
š‹º®
::
Seü‘
&, );

63 
Çme¥aû
 
	g‹¡šg
 {

91 şas 
	cGTEST_API_
 
	gMes§ge
 {

92 
	g´iv©e
:

95 
¡d
::
	to¡»am
& (*
	tBasicN¬rowIoMª
)(
	t¡d
::ostream&);

97 
	gpublic
:

99 
Mes§ge
();

102 
Mes§ge
(cÚ¡ Mes§ge& 
msg
è: 
ss_
(
Ãw
 ::
¡d
::
¡ršg¡»am
) {

103 *
ss_
 << 
msg
.
G‘SŒšg
();

107 
ex¶ic™
 
Mes§ge
(cÚ¡ * 
¡r
è: 
ss_
(
Ãw
 ::
¡d
::
¡ršg¡»am
) {

108 *
ss_
 << 
¡r
;

112 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

113 
šlše
 
	gMes§ge
& 
	gİ”©Ü
 <<(cÚ¡ 
	gT
& 
	gv®
) {

128 
	gusšg
 ::
İ”©Ü
 <<;

129 *
	gss_
 << 
	gv®
;

130  *
	gthis
;

146 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

147 
šlše
 
	gMes§ge
& 
	gİ”©Ü
 <<(
T
* cÚ¡& 
	gpoš‹r
) {

148 ià(
	gpoš‹r
 =ğ
nuÎ±r
) {

149 *
ss_
 << "(null)";

151 *
	gss_
 << 
	gpoš‹r
;

153  *
	gthis
;

162 
	gMes§ge
& 
	gİ”©Ü
 <<(
BasicN¬rowIoMª
 
	gv®
) {

163 *
	gss_
 << 
	gv®
;

164  *
	gthis
;

168 
	gMes§ge
& 
	gİ”©Ü
 <<(
boŞ
 
	gb
) {

169  *
	gthis
 << (
	gb
 ? "true" : "false");

174 
	gMes§ge
& 
	gİ”©Ü
 <<(cÚ¡ 
wch¬_t
* 
	gwide_c_¡r
);

175 
	gMes§ge
& 
	gİ”©Ü
 <<(
wch¬_t
* 
	gwide_c_¡r
);

177 #ià
GTEST_HAS_STD_WSTRING


180 
	gMes§ge
& 
	gİ”©Ü
 <<(cÚ¡ ::
¡d
::
w¡ršg
& 
w¡r
);

187 
	g¡d
::
¡ršg
 
G‘SŒšg
() const;

189 
	g´iv©e
:

191 cÚ¡ 
¡d
::
unique_±r
< ::¡d::
¡ršg¡»am
> 
ss_
;

195 
	gİ”©Ü
=(cÚ¡ 
Mes§ge
&);

199 
šlše
 
	g¡d
::
o¡»am
& 
İ”©Ü
 <<(
¡d
::o¡»am& 
os
, cÚ¡ 
	gMes§ge
& 
	gsb
) {

200  
	gos
 << 
	gsb
.
G‘SŒšg
();

203 
Çme¥aû
 
	gš‹º®
 {

209 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

210 
	g¡d
::
¡ršg
 
SŒ—mabËToSŒšg
(cÚ¡ 
T
& 
¡»amabË
) {

211  (
Mes§ge
(è<< 
¡»amabË
).
G‘SŒšg
();

217 
	$GTEST_DISABLE_MSC_WARNINGS_POP_
()

	@third_party/googletest/googletest/include/gtest/gtest-param-test.h

34 #iâdeà
GOOGLETEST_INCLUDE_GTEST_GTEST_PARAM_TEST_H_


35 
	#GOOGLETEST_INCLUDE_GTEST_GTEST_PARAM_TEST_H_


	)

52 
şass
 
	gFooTe¡
 : 
public
 ::
‹¡šg
::
Te¡W™hP¬am
<const *> {

60 
	$TEST_P
(
FooTe¡
, 
DÛsBÏh
) {

63 
	`EXPECT_TRUE
(
foo
.
	`BÏh
(
	`G‘P¬am
()));

65 
	}
}

67 
	$TEST_P
(
FooTe¡
, 
HasBÏhBÏh
) {

69 
	}
}

95 
INSTANTIATE_TEST_SUITE_P
(
In¡ªtŸtiÚName
,

96 
FooTe¡
,

97 
V®ues
("meeny", "miny", "moe"));

118 cÚ¡ * 
	g³ts
[] = {"cat", "dog"};

119 
INSTANTIATE_TEST_SUITE_P
(
AnÙh”In¡ªtŸtiÚName
, 
FooTe¡
, 
V®uesIn
(
³ts
));

154 şas 
	cBa£Te¡
 : 
public
 ::
‹¡šg
::
Te¡
 {

159 
şass
 
	gD”ivedTe¡
 : 
public
 
Ba£Te¡
, 
	gpublic
 ::
‹¡šg
::
W™hP¬amIÁ”çû
<> {

163 
	$TEST_F
(
Ba£Te¡
, 
HasFoo
) {

165 
	}
}

167 
	$TEST_P
(
D”ivedTe¡
, 
DÛsBÏh
) {

169 
	`EXPECT_TRUE
(
foo
.
	`BÏh
(
	`G‘P¬am
()));

170 
	}
}

174 
	~<™”©Ü
>

175 
	~<ut™y
>

177 
	~"g‹¡/š‹º®/g‹¡-š‹º®.h
"

178 
	~"g‹¡/š‹º®/g‹¡-·¿m-ut.h
"

179 
	~"g‹¡/š‹º®/g‹¡-pÜt.h
"

181 
Çme¥aû
 
	g‹¡šg
 {

225 
	g‹m¶©e
 <
ty³Çme
 
	gT
,y³Çm
	gInüem’tT
>

226 
	gš‹º®
::
P¬amG’”©Ü
<
T
> 
Rªge
(T 
¡¬t
, T 
’d
, 
Inüem’tT
 
¡•
) {

227  
	gš‹º®
::
P¬amG’”©Ü
<
T
>(

228 
Ãw
 
š‹º®
::
RªgeG’”©Ü
<
T
, 
	gInüem’tT
>(
	g¡¬t
, 
	g’d
, 
	g¡•
));

231 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

232 
	gš‹º®
::
P¬amG’”©Ü
<
T
> 
Rªge
(T 
¡¬t
, T 
’d
) {

233  
Rªge
(
¡¬t
, 
’d
, 1);

291 
	g‹m¶©e
 <
ty³Çme
 
	gFÜw¬dI‹¿tÜ
>

292 
	gš‹º®
::
P¬amG’”©Ü
<

293 
ty³Çme
 
¡d
::
™”©Ü_Œa™s
<
FÜw¬dI‹¿tÜ
>::
v®ue_ty³
>

294 
V®uesIn
(
FÜw¬dI‹¿tÜ
 
begš
, FÜw¬dI‹¿tÜ 
’d
) {

295 
ty³Çme
 
	t¡d
::
	t™”©Ü_Œa™s
<
	tFÜw¬dI‹¿tÜ
>::
	tv®ue_ty³
 
	tP¬amTy³
;

296  
	gš‹º®
::
P¬amG’”©Ü
<
P¬amTy³
>(

297 
Ãw
 
š‹º®
::
V®uesInI‹¿tÜRªgeG’”©Ü
<
P¬amTy³
>(
begš
, 
	g’d
));

300 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
size_t
 
	gN
>

301 
	gš‹º®
::
P¬amG’”©Ü
<
T
> 
V®uesIn
(cÚ¡ T (&
¬¿y
)[
N
]) {

302  
V®uesIn
(
¬¿y
,‡¼ay + 
N
);

305 
	g‹m¶©e
 <
şass
 
	gCÚš”
>

306 
	gš‹º®
::
P¬amG’”©Ü
<
ty³Çme
 
CÚš”
::
v®ue_ty³
> 
V®uesIn
(

307 cÚ¡ 
CÚš”
& 
cÚš”
) {

308  
V®uesIn
(
cÚš”
.
begš
(), cÚš”.
’d
());

331 
	g‹m¶©e
 <
	gty³Çme
... 
	gT
>

332 
	gš‹º®
::
V®ueA¼ay
<
T
...> 
V®ues
(T... 
v
) {

333  
š‹º®
::
V®ueA¼ay
<
T
...>(
¡d
::
move
(
v
)...);

356 
šlše
 
	gš‹º®
::
P¬amG’”©Ü
<
boŞ
> 
BoŞ
() {

357  
V®ues
(
çl£
, 
Œue
);

404 
	g‹m¶©e
 <
	gty³Çme
... 
	gG’”©Ü
>

405 
	gš‹º®
::
C¬‹sŸnProduùHŞd”
<
G’”©Ü
...> 
Combše
(cÚ¡ G’”©Ü&... 
g
) {

406  
š‹º®
::
C¬‹sŸnProduùHŞd”
<
G’”©Ü
...>(
g
...);

409 
	#TEST_P
(
‹¡_su™e_Çme
, 
‹¡_Çme
) \

410 
şass
 
	`GTEST_TEST_CLASS_NAME_
(
‹¡_su™e_Çme
, 
‹¡_Çme
) \

411 : 
public
 
‹¡_su™e_Çme
 { \

412 
public
: \

413 
	`GTEST_TEST_CLASS_NAME_
(
‹¡_su™e_Çme
, 
‹¡_Çme
)() {} \

414 
	`Te¡Body
(è
ov”ride
; \

416 
´iv©e
: \

417 
	`AddToRegi¡ry
() { \

418 ::
‹¡šg
::
Un™Te¡
::
	`G‘In¡ªû
() \

419 ->
	`·¿m‘”ized_‹¡_»gi¡ry
() \

420 .
G‘Te¡Su™eP©‹ºHŞd”
<
‹¡_su™e_Çme
>( \

421 
	`GTEST_STRINGIFY_
(
‹¡_su™e_Çme
), \

422 ::
‹¡šg
::
š‹º®
::
	`CodeLoÿtiÚ
(
__FILE__
, 
__LINE__
)) \

423 ->
	`AddTe¡P©‹º
( \

424 
	`GTEST_STRINGIFY_
(
‹¡_su™e_Çme
), GTEST_STRINGIFY_(
‹¡_Çme
), \

425 
Ãw
 ::
‹¡šg
::
š‹º®
::
Te¡M‘aFaùÜy
<
	`GTEST_TEST_CLASS_NAME_
( \

426 
‹¡_su™e_Çme
, 
‹¡_Çme
)>(), \

427 ::
‹¡šg
::
š‹º®
::
	`CodeLoÿtiÚ
(
__FILE__
, 
__LINE__
)); \

430 
g‹¡_»gi¡”šg_dummy_
 
GTEST_ATTRIBUTE_UNUSED_
; \

431 
	`GTEST_DISALLOW_COPY_AND_ASSIGN_
(
	`GTEST_TEST_CLASS_NAME_
(
‹¡_su™e_Çme
, \

432 
‹¡_Çme
)); \

434 
	`GTEST_TEST_CLASS_NAME_
(
‹¡_su™e_Çme
, \

435 
‹¡_Çme
)::
g‹¡_»gi¡”šg_dummy_
 = \

436 
	`GTEST_TEST_CLASS_NAME_
(
‹¡_su™e_Çme
, 
‹¡_Çme
)::
	`AddToRegi¡ry
(); \

437 
	`GTEST_TEST_CLASS_NAME_
(
‹¡_su™e_Çme
, 
‹¡_Çme
)::
	`Te¡Body
()

	)

452 
	#GTEST_EXPAND_
(
¬g
è
	)
arg

453 
	#GTEST_GET_FIRST_
(
fœ¡
, ...è
	)
first

454 
	#GTEST_GET_SECOND_
(
fœ¡
, 
£cÚd
, ...è
	)
second

456 
	#INSTANTIATE_TEST_SUITE_P
(
´efix
, 
‹¡_su™e_Çme
, ...) \

457 ::
‹¡šg
::
š‹º®
::
P¬amG’”©Ü
<
‹¡_su™e_Çme
::
P¬amTy³
> \

458 
g‹¡_
##
´efix
##
‹¡_su™e_Çme
##
	`_Ev®G’”©Ü_
() { \

459  
	`GTEST_EXPAND_
(
	`GTEST_GET_FIRST_
(
__VA_ARGS__
, 
DUMMY_PARAM_
)); \

461 ::
¡d
::
¡ršg
 
g‹¡_
##
´efix
##
‹¡_su™e_Çme
##
	`_Ev®G’”©eName_
( \

462 cÚ¡ ::
‹¡šg
::
Te¡P¬amInfo
<
‹¡_su™e_Çme
::
P¬amTy³
>& 
šfo
) { \

463 ià(::
‹¡šg
::
š‹º®
::
	`AlwaysF®£
()) { \

464 ::
‹¡šg
::
š‹º®
::
	`Te¡NÙEm±y
(
	`GTEST_EXPAND_
(
	`GTEST_GET_SECOND_
( \

465 
__VA_ARGS__
, \

466 ::
‹¡šg
::
š‹º®
::
DeçuÉP¬amName
<
‹¡_su™e_Çme
::
P¬amTy³
>, \

467 
DUMMY_PARAM_
))); \

468 autØ
t
 = 
¡d
::
	`make_tu¶e
(
__VA_ARGS__
); \

469 
	`¡©ic_as£¹
(
¡d
::
tu¶e_size
<
	`deşty³
(
t
)>::
v®ue
 <= 2, \

472  ((
	`GTEST_EXPAND_
(
	`GTEST_GET_SECOND_
( \

473 
__VA_ARGS__
, \

474 ::
‹¡šg
::
š‹º®
::
DeçuÉP¬amName
<
‹¡_su™e_Çme
::
P¬amTy³
>, \

475 
DUMMY_PARAM_
))))(
šfo
); \

477 
g‹¡_
##
´efix
##
‹¡_su™e_Çme
##
_dummy_
 \

478 
GTEST_ATTRIBUTE_UNUSED_
 = \

479 ::
‹¡šg
::
Un™Te¡
::
	`G‘In¡ªû
() \

480 ->
	`·¿m‘”ized_‹¡_»gi¡ry
() \

481 .
G‘Te¡Su™eP©‹ºHŞd”
<
‹¡_su™e_Çme
>( \

482 
	`GTEST_STRINGIFY_
(
‹¡_su™e_Çme
), \

483 ::
‹¡šg
::
š‹º®
::
	`CodeLoÿtiÚ
(
__FILE__
, 
__LINE__
)) \

484 ->
	`AddTe¡Su™eIn¡ªtŸtiÚ
( \

485 
	`GTEST_STRINGIFY_
(
´efix
), \

486 &
g‹¡_
##
´efix
##
‹¡_su™e_Çme
##
_Ev®G’”©Ü_
, \

487 &
g‹¡_
##
´efix
##
‹¡_su™e_Çme
##
_Ev®G’”©eName_
, \

488 
__FILE__
, 
__LINE__
)

	)

492 
	#GTEST_ALLOW_UNINSTANTIATED_PARAMETERIZED_TEST
(
T
) \

493 
Çme¥aû
 
g‹¡_do_nÙ_u£_outside_Çme¥aû_scİe
 {} \

494 cÚ¡ ::
‹¡šg
::
š‹º®
::
M¬kAsIgnÜed
 
g‹¡_®low_ignÜe_
##
	`T
( \

495 
	`GTEST_STRINGIFY_
(
T
))

	)

498 #iâdeà
GTEST_REMOVE_LEGACY_TEST_CASEAPI_


499 
	#INSTANTIATE_TEST_CASE_P
 \

500 
	`¡©ic_as£¹
(::
‹¡šg
::
š‹º®
::
	`In¡ªtŸ‹Te¡Ca£_P_IsD•»ÿ‹d
(), \

502 
INSTANTIATE_TEST_SUITE_P


	)

	@third_party/googletest/googletest/include/gtest/gtest-printers.h

100 #iâdeà
GOOGLETEST_INCLUDE_GTEST_GTEST_PRINTERS_H_


101 
	#GOOGLETEST_INCLUDE_GTEST_GTEST_PRINTERS_H_


	)

103 
	~<funùiÚ®
>

104 
	~<memÜy
>

105 
	~<o¡»am
>

106 
	~<s¡»am
>

107 
	~<¡ršg
>

108 
	~<tu¶e
>

109 
	~<ty³_Œa™s
>

110 
	~<ut™y
>

111 
	~<veùÜ
>

113 
	~"g‹¡/š‹º®/g‹¡-š‹º®.h
"

114 
	~"g‹¡/š‹º®/g‹¡-pÜt.h
"

116 
Çme¥aû
 
	g‹¡šg
 {

120 
Çme¥aû
 
	gš‹º®
 {

122 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

123 
Univ”§lPršt
(cÚ¡ 
T
& 
v®ue
, ::
¡d
::
o¡»am
* 
os
);

127 
	sCÚš”Prš‹r
 {

128 
	g‹m¶©e
 <
ty³Çme
 
	gT
,

129 
	gty³Çme
 = 
ty³Çme
 
¡d
::
’abË_if
<

130 ((
IsCÚš”Te¡
<
T
>(0)è=ğ(
IsCÚš”
)) &&

131 !
IsRecursiveCÚš”
<
T
>::
v®ue
>::
ty³
>

132 
PrštV®ue
(cÚ¡ 
T
& 
cÚš”
, 
¡d
::
o¡»am
* 
os
) {

133 cÚ¡ 
size_t
 
kMaxCouÁ
 = 32;

134 *
	gos
 << '{';

135 
size_t
 
	gcouÁ
 = 0;

136 auto&& 
	g–em
 : 
cÚš”
) {

137 ià(
couÁ
 > 0) {

138 *
os
 << ',';

139 ià(
	gcouÁ
 =ğ
kMaxCouÁ
) {

140 *
os
 << " ...";

144 *
	gos
 << ' ';

147 
	gš‹º®
::
Univ”§lPršt
(
–em
, 
os
);

148 ++
	gcouÁ
;

151 ià(
	gcouÁ
 > 0) {

152 *
	gos
 << ' ';

154 *
	gos
 << '}';

164 
	sFunùiÚPoš‹rPrš‹r
 {

165 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
	gty³Çme
 =y³Çm
¡d
::
’abË_if
<

166 
¡d
::
is_funùiÚ
<
T
>::
v®ue
>::
ty³
>

167 
PrštV®ue
(
T
* 
p
, ::
¡d
::
o¡»am
* 
os
) {

168 ià(
p
 =ğ
nuÎ±r
) {

169 *
os
 << "NULL";

174 *
	gos
 << 
	g»š‹½»t_ÿ¡
<cÚ¡ *>(
	gp
);

179 
	sPoš‹rPrš‹r
 {

180 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

181 
PrštV®ue
(
T
* 
p
, ::
¡d
::
o¡»am
* 
os
) {

182 ià(
p
 =ğ
nuÎ±r
) {

183 *
os
 << "NULL";

188 *
	gos
 << 
	gp
;

193 
Çme¥aû
 
	gš‹º®_¡»am_İ”©Ü_w™hout_Ëxiÿl_Çme_lookup
 {

199 
	sLookupBlock”
 {};

200 
	gİ”©Ü
<<(
	gLookupBlock”
, LookupBlocker);

202 
	sSŒ—mPrš‹r
 {

203 
	g‹m¶©e
 <
ty³Çme
 
	gT
,

206 
	gty³Çme
 = 
ty³Çme
 
¡d
::
’abË_if
<

207 !
¡d
::
is_memb”_poš‹r
<
T
>::
v®ue
>::
ty³
,

210 
	gty³Çme
 = 
deşty³
(
¡d
::
deşv®
<¡d::
o¡»am
&>()

211 << 
¡d
::
deşv®
<cÚ¡ 
T
&>())>

212 
PrštV®ue
(cÚ¡ 
T
& 
v®ue
, ::
¡d
::
o¡»am
* 
os
) {

215 *
os
 << 
v®ue
;

221 
	sPrÙobufPrš‹r
 {

225 cÚ¡ 
size_t
 
	gkPrÙobufOÃLš”MaxL’gth
 = 50;

227 
	g‹m¶©e
 <
ty³Çme
 
	gT
,

228 
	gty³Çme
 = 
ty³Çme
 
¡d
::
’abË_if
<

229 
š‹º®
::
HasDebugSŒšgAndShÜtDebugSŒšg
<
T
>::
v®ue
>::
ty³
>

230 
PrštV®ue
(cÚ¡ 
T
& 
v®ue
, ::
¡d
::
o¡»am
* 
os
) {

231 
¡d
::
¡ršg
 
´‘ty_¡r
 = 
v®ue
.
ShÜtDebugSŒšg
();

232 ià(
	g´‘ty_¡r
.
Ëngth
(è> 
	gkPrÙobufOÃLš”MaxL’gth
) {

233 
	g´‘ty_¡r
 = "\n" + 
v®ue
.
DebugSŒšg
();

235 *
	gos
 << ("<" + 
	g´‘ty_¡r
 + ">");

239 
	sCÚv”tibËToIÁeg”Prš‹r
 {

247 
PrštV®ue
(
š‹º®
::
Bigge¡IÁ
 
v®ue
, ::
¡d
::
o¡»am
* 
os
) {

248 *
os
 << 
v®ue
;

252 
	sCÚv”tibËToSŒšgV›wPrš‹r
 {

253 #ià
GTEST_INTERNAL_HAS_STRING_VIEW


254 
PrštV®ue
(
š‹º®
::
SŒšgV›w
 
v®ue
, ::
¡d
::
o¡»am
* 
os
) {

255 
š‹º®
::
Univ”§lPršt
(
v®ue
, 
os
);

263 
GTEST_API_
 
PrštBy‹sInObjeùTo
(cÚ¡ * 
obj_by‹s
,

264 
size_t
 
couÁ
,

265 ::
¡d
::
o¡»am
* 
os
);

266 
	sRawBy‹sPrš‹r
 {

268 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
	gsize_t
 = (
T
)>

269 
PrštV®ue
(cÚ¡ 
T
& 
v®ue
, ::
¡d
::
o¡»am
* 
os
) {

270 
PrštBy‹sInObjeùTo
(

271 
¡©ic_ÿ¡
<const *>(

273 
»š‹½»t_ÿ¡
<cÚ¡ *>(
¡d
::
add»ssof
(
v®ue
))),

274 (
v®ue
), 
os
);

278 
	sF®lbackPrš‹r
 {

279 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

280 
PrštV®ue
(cÚ¡ 
T
&, ::
¡d
::
o¡»am
* 
os
) {

281 *
os
 << "(incompleteype)";

286 
	g‹m¶©e
 <
ty³Çme
 
	gT
,y³Çm
	gE
,y³Çm
	gPrš‹r
, 
	gty³Çme
... 
	gPrš‹rs
>

287 
	gFšdFœ¡Prš‹r
 : 
FšdFœ¡Prš‹r
<
T
, 
	gE
, 
	gPrš‹rs
...> {};

289 
	g‹m¶©e
 <
ty³Çme
 
	gT
,y³Çm
	gPrš‹r
, 
	gty³Çme
... 
	gPrš‹rs
>

290 
	gFšdFœ¡Prš‹r
<

291 
	gT
, 
deşty³
(
Prš‹r
::
PrštV®ue
(
¡d
::
deşv®
<cÚ¡ 
T
&>(), 
nuÎ±r
)),

292 
	gPrš‹r
, 
	gPrš‹rs
...> {

293 
usšg
 
	gty³
 = 
Prš‹r
;

305 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

306 
PrštW™hF®lback
(cÚ¡ 
T
& 
v®ue
, ::
¡d
::
o¡»am
* 
os
) {

307 
usšg
 
Prš‹r
 = 
ty³Çme
 
FšdFœ¡Prš‹r
<

308 
T
, , 
	gCÚš”Prš‹r
, 
	gFunùiÚPoš‹rPrš‹r
, 
	gPoš‹rPrš‹r
,

309 
	gš‹º®_¡»am_İ”©Ü_w™hout_Ëxiÿl_Çme_lookup
::
SŒ—mPrš‹r
,

310 
	gPrÙobufPrš‹r
, 
	gCÚv”tibËToIÁeg”Prš‹r
,

311 
	gCÚv”tibËToSŒšgV›wPrš‹r
, 
	gRawBy‹sPrš‹r
, 
	gF®lbackPrš‹r
>::
ty³
;

312 
	gPrš‹r
::
PrštV®ue
(
v®ue
, 
os
);

330 
	g‹m¶©e
 <
ty³Çme
 
	gToPršt
,y³Çm
	gOth”O³¿nd
>

331 şas 
	cFÜm©FÜCom·risÚ
 {

332 
	gpublic
:

333 ::
¡d
::
¡ršg
 
FÜm©
(cÚ¡ 
ToPršt
& 
v®ue
) {

334  ::
‹¡šg
::
PrštToSŒšg
(
v®ue
);

339 
	g‹m¶©e
 <
ty³Çme
 
	gToPršt
, 
size_t
 
	gN
,y³Çm
	gOth”O³¿nd
>

340 
şass
 
	gFÜm©FÜCom·risÚ
<
	gToPršt
[
N
], 
	gOth”O³¿nd
> {

341 
	gpublic
:

342 ::
¡d
::
¡ršg
 
FÜm©
(cÚ¡ 
ToPršt
* 
v®ue
) {

343  
FÜm©FÜCom·risÚ
<cÚ¡ 
ToPršt
*, 
	gOth”O³¿nd
>::
FÜm©
(
v®ue
);

350 
	#GTEST_IMPL_FORMAT_C_STRING_AS_POINTER_
(
Ch¬Ty³
) \

351 
‹m¶©e
 <
ty³Çme
 
Oth”O³¿nd
> \

352 
şass
 
FÜm©FÜCom·risÚ
<
Ch¬Ty³
*, 
Oth”O³¿nd
> { \

353 
public
: \

354 ::
¡d
::
¡ršg
 
	`FÜm©
(
Ch¬Ty³
* 
v®ue
) { \

355  ::
‹¡šg
::
	`PrštToSŒšg
(
¡©ic_ÿ¡
<cÚ¡ *>(
v®ue
)); \

357 }

	)

359 
GTEST_IMPL_FORMAT_C_STRING_AS_POINTER_
();

360 
GTEST_IMPL_FORMAT_C_STRING_AS_POINTER_
(const );

361 
GTEST_IMPL_FORMAT_C_STRING_AS_POINTER_
(
wch¬_t
);

362 
GTEST_IMPL_FORMAT_C_STRING_AS_POINTER_
(cÚ¡ 
wch¬_t
);

363 #ifdeà
__ıp_ch¬8_t


364 
GTEST_IMPL_FORMAT_C_STRING_AS_POINTER_
(
ch¬8_t
);

365 
GTEST_IMPL_FORMAT_C_STRING_AS_POINTER_
(cÚ¡ 
ch¬8_t
);

367 
GTEST_IMPL_FORMAT_C_STRING_AS_POINTER_
(
ch¬16_t
);

368 
GTEST_IMPL_FORMAT_C_STRING_AS_POINTER_
(cÚ¡ 
ch¬16_t
);

369 
GTEST_IMPL_FORMAT_C_STRING_AS_POINTER_
(
ch¬32_t
);

370 
GTEST_IMPL_FORMAT_C_STRING_AS_POINTER_
(cÚ¡ 
ch¬32_t
);

372 #undeà
GTEST_IMPL_FORMAT_C_STRING_AS_POINTER_


377 
	#GTEST_IMPL_FORMAT_C_STRING_AS_STRING_
(
Ch¬Ty³
, 
Oth”SŒšgTy³
) \

378 
‹m¶©e
 <> \

379 
şass
 
FÜm©FÜCom·risÚ
<
Ch¬Ty³
*, 
Oth”SŒšgTy³
> { \

380 
public
: \

381 ::
¡d
::
¡ršg
 
	`FÜm©
(
Ch¬Ty³
* 
v®ue
) { \

382  ::
‹¡šg
::
	`PrštToSŒšg
(
v®ue
); \

384 }

	)

386 
GTEST_IMPL_FORMAT_C_STRING_AS_STRING_
(, ::
¡d
::
¡ršg
);

387 
GTEST_IMPL_FORMAT_C_STRING_AS_STRING_
(cÚ¡ , ::
¡d
::
¡ršg
);

388 #ifdeà
__ıp_ch¬8_t


389 
GTEST_IMPL_FORMAT_C_STRING_AS_STRING_
(
ch¬8_t
, ::
¡d
::
u8¡ršg
);

390 
GTEST_IMPL_FORMAT_C_STRING_AS_STRING_
(cÚ¡ 
ch¬8_t
, ::
¡d
::
u8¡ršg
);

392 
GTEST_IMPL_FORMAT_C_STRING_AS_STRING_
(
ch¬16_t
, ::
¡d
::
u16¡ršg
);

393 
GTEST_IMPL_FORMAT_C_STRING_AS_STRING_
(cÚ¡ 
ch¬16_t
, ::
¡d
::
u16¡ršg
);

394 
GTEST_IMPL_FORMAT_C_STRING_AS_STRING_
(
ch¬32_t
, ::
¡d
::
u32¡ršg
);

395 
GTEST_IMPL_FORMAT_C_STRING_AS_STRING_
(cÚ¡ 
ch¬32_t
, ::
¡d
::
u32¡ršg
);

397 #ià
GTEST_HAS_STD_WSTRING


398 
GTEST_IMPL_FORMAT_C_STRING_AS_STRING_
(
wch¬_t
, ::
¡d
::
w¡ršg
);

399 
GTEST_IMPL_FORMAT_C_STRING_AS_STRING_
(cÚ¡ 
wch¬_t
, ::
¡d
::
w¡ršg
);

402 #undeà
GTEST_IMPL_FORMAT_C_STRING_AS_STRING_


412 
	g‹m¶©e
 <
ty³Çme
 
	gT1
,y³Çm
	gT2
>

413 
	g¡d
::
¡ršg
 
FÜm©FÜCom·risÚFau»Mes§ge
(

414 cÚ¡ 
T1
& 
v®ue
, cÚ¡ 
T2
& ) {

415  
	gFÜm©FÜCom·risÚ
<
	gT1
, 
	gT2
>::
FÜm©
(
v®ue
);

425 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

426 
şass
 
	gUniv”§lPrš‹r
;

439 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

440 
PrštTo
(cÚ¡ 
T
& 
v®ue
, ::
¡d
::
o¡»am
* 
os
) {

441 
š‹º®
::
PrštW™hF®lback
(
v®ue
, 
os
);

449 
GTEST_API_
 
PrštTo
(
c
, ::
¡d
::
o¡»am
* 
os
);

450 
GTEST_API_
 
PrštTo
(sigÃd 
c
, ::
¡d
::
o¡»am
* 
os
);

451 
šlše
 
PrštTo
(
c
, ::
¡d
::
o¡»am
* 
os
) {

455 
PrštTo
(
¡©ic_ÿ¡
<>(
c
), 
os
);

459 
šlše
 
PrštTo
(
boŞ
 
x
, ::
¡d
::
o¡»am
* 
os
) {

460 *
os
 << (
x
 ? "true" : "false");

470 
GTEST_API_
 
PrštTo
(
wch¬_t
 
wc
, ::
¡d
::
o¡»am
* 
os
);

472 
GTEST_API_
 
PrštTo
(
ch¬32_t
 
c
, ::
¡d
::
o¡»am
* 
os
);

473 
šlše
 
PrštTo
(
ch¬16_t
 
c
, ::
¡d
::
o¡»am
* 
os
) {

474 
PrštTo
(
Im¶ic™Ca¡_
<
ch¬32_t
>(
c
), 
os
);

476 #ifdeà
__ıp_ch¬8_t


477 
šlše
 
PrštTo
(
ch¬8_t
 
c
, ::
¡d
::
o¡»am
* 
os
) {

478 
PrštTo
(
Im¶ic™Ca¡_
<
ch¬32_t
>(
c
), 
os
);

483 
GTEST_API_
 
PrštTo
(cÚ¡ * 
s
, ::
¡d
::
o¡»am
* 
os
);

484 
šlše
 
PrštTo
(* 
s
, ::
¡d
::
o¡»am
* 
os
) {

485 
PrštTo
(
Im¶ic™Ca¡_
<cÚ¡ *>(
s
), 
os
);

490 
šlše
 
PrštTo
(cÚ¡ sigÃd * 
s
, ::
¡d
::
o¡»am
* 
os
) {

491 
PrštTo
(
Im¶ic™Ca¡_
<cÚ¡ *>(
s
), 
os
);

493 
šlše
 
PrštTo
(sigÃd * 
s
, ::
¡d
::
o¡»am
* 
os
) {

494 
PrštTo
(
Im¶ic™Ca¡_
<cÚ¡ *>(
s
), 
os
);

496 
šlše
 
PrštTo
(cÚ¡ * 
s
, ::
¡d
::
o¡»am
* 
os
) {

497 
PrštTo
(
Im¶ic™Ca¡_
<cÚ¡ *>(
s
), 
os
);

499 
šlše
 
PrštTo
(* 
s
, ::
¡d
::
o¡»am
* 
os
) {

500 
PrštTo
(
Im¶ic™Ca¡_
<cÚ¡ *>(
s
), 
os
);

502 #ifdeà
__ıp_ch¬8_t


504 
PrštTo
(cÚ¡ 
ch¬8_t
* 
s
, ::
¡d
::
o¡»am
* 
os
);

505 
šlše
 
PrštTo
(
ch¬8_t
* 
s
, ::
¡d
::
o¡»am
* 
os
) {

506 
PrštTo
(
Im¶ic™Ca¡_
<cÚ¡ 
ch¬8_t
*>(
s
), 
os
);

510 
PrštTo
(cÚ¡ 
ch¬16_t
* 
s
, ::
¡d
::
o¡»am
* 
os
);

511 
šlše
 
PrštTo
(
ch¬16_t
* 
s
, ::
¡d
::
o¡»am
* 
os
) {

512 
PrštTo
(
Im¶ic™Ca¡_
<cÚ¡ 
ch¬16_t
*>(
s
), 
os
);

515 
PrštTo
(cÚ¡ 
ch¬32_t
* 
s
, ::
¡d
::
o¡»am
* 
os
);

516 
šlše
 
PrštTo
(
ch¬32_t
* 
s
, ::
¡d
::
o¡»am
* 
os
) {

517 
PrštTo
(
Im¶ic™Ca¡_
<cÚ¡ 
ch¬32_t
*>(
s
), 
os
);

525 #ià!
defšed
(
_MSC_VER
è|| defšed(
_NATIVE_WCHAR_T_DEFINED
)

527 
GTEST_API_
 
PrštTo
(cÚ¡ 
wch¬_t
* 
s
, ::
¡d
::
o¡»am
* 
os
);

528 
šlše
 
PrštTo
(
wch¬_t
* 
s
, ::
¡d
::
o¡»am
* 
os
) {

529 
PrštTo
(
Im¶ic™Ca¡_
<cÚ¡ 
wch¬_t
*>(
s
), 
os
);

538 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

539 
PrštRawA¼ayTo
(cÚ¡ 
T
 
a
[], 
size_t
 
couÁ
, ::
¡d
::
o¡»am
* 
os
) {

540 
Univ”§lPršt
(
a
[0], 
os
);

541 
size_t
 
	gi
 = 1; i !ğ
couÁ
; i++) {

542 *
	gos
 << ", ";

543 
Univ”§lPršt
(
a
[
i
], 
os
);

548 
GTEST_API_
 
PrštSŒšgTo
(cÚ¡ ::
¡d
::
¡ršg
&
s
, ::¡d::
o¡»am
* 
os
);

549 
šlše
 
PrštTo
(cÚ¡ ::
¡d
::
¡ršg
& 
s
, ::¡d::
o¡»am
* 
os
) {

550 
PrštSŒšgTo
(
s
, 
os
);

554 #ifdeà
__ıp_ch¬8_t


555 
GTEST_API_
 
PrštU8SŒšgTo
(cÚ¡ ::
¡d
::
u8¡ršg
& 
s
, ::¡d::
o¡»am
* 
os
);

556 
šlše
 
PrštTo
(cÚ¡ ::
¡d
::
u8¡ršg
& 
s
, ::¡d::
o¡»am
* 
os
) {

557 
PrštU8SŒšgTo
(
s
, 
os
);

562 
GTEST_API_
 
PrštU16SŒšgTo
(cÚ¡ ::
¡d
::
u16¡ršg
& 
s
, ::¡d::
o¡»am
* 
os
);

563 
šlše
 
PrštTo
(cÚ¡ ::
¡d
::
u16¡ršg
& 
s
, ::¡d::
o¡»am
* 
os
) {

564 
PrštU16SŒšgTo
(
s
, 
os
);

568 
GTEST_API_
 
PrštU32SŒšgTo
(cÚ¡ ::
¡d
::
u32¡ršg
& 
s
, ::¡d::
o¡»am
* 
os
);

569 
šlše
 
PrštTo
(cÚ¡ ::
¡d
::
u32¡ršg
& 
s
, ::¡d::
o¡»am
* 
os
) {

570 
PrštU32SŒšgTo
(
s
, 
os
);

574 #ià
GTEST_HAS_STD_WSTRING


575 
GTEST_API_
 
PrštWideSŒšgTo
(cÚ¡ ::
¡d
::
w¡ršg
&
s
, ::¡d::
o¡»am
* 
os
);

576 
šlše
 
PrštTo
(cÚ¡ ::
¡d
::
w¡ršg
& 
s
, ::¡d::
o¡»am
* 
os
) {

577 
PrštWideSŒšgTo
(
s
, 
os
);

581 #ià
GTEST_INTERNAL_HAS_STRING_VIEW


583 
šlše
 
PrštTo
(
š‹º®
::
SŒšgV›w
 
¥
, ::
¡d
::
o¡»am
* 
os
) {

584 
PrštTo
(::
¡d
::
¡ršg
(
¥
), 
os
);

588 
šlše
 
PrštTo
(
¡d
::
nuÎ±r_t
, ::¡d::
o¡»am
* 
os
) { *os << "(nullptr)"; }

590 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

591 
PrštTo
(
¡d
::
»ã»nû_w¿µ”
<
T
> 
»f
, ::¡d::
o¡»am
* 
os
) {

592 
Univ”§lPrš‹r
<
T
&>::
Pršt
(
»f
.
g‘
(), 
os
);

595 
šlše
 cÚ¡ * 
VoidifyPoš‹r
(cÚ¡ * 
p
è{  
	gp
; }

596 
šlše
 cÚ¡ * 
VoidifyPoš‹r
(vŞ©cÚ¡ * 
p
) {

597  
	gcÚ¡_ÿ¡
<cÚ¡ *>(
	gp
);

600 
	g‹m¶©e
 <
ty³Çme
 
	gT
,y³Çm
	gPŒ
>

601 
PrštSm¬tPoš‹r
(cÚ¡ 
PŒ
& 
±r
, 
¡d
::
o¡»am
* 
os
, ) {

602 ià(
	g±r
 =ğ
nuÎ±r
) {

603 *
os
 << "(nullptr)";

606 *
	gos
 << "(" << (
	gVoidifyPoš‹r
)(
	g±r
.
g‘
()) << ")";

609 
	g‹m¶©e
 <
ty³Çme
 
	gT
,y³Çm
	gPŒ
,

610 
	gty³Çme
 = 
ty³Çme
 
¡d
::
’abË_if
<!¡d::
is_void
<
T
>::
v®ue
 &&

611 !
¡d
::
is_¬¿y
<
T
>::
v®ue
>::
ty³
>

612 
PrštSm¬tPoš‹r
(cÚ¡ 
PŒ
& 
±r
, 
¡d
::
o¡»am
* 
os
, ) {

613 ià(
	g±r
 =ğ
nuÎ±r
) {

614 *
os
 << "(nullptr)";

616 *
	gos
 << "ÕŒ = " << (
	gVoidifyPoš‹r
)(
	g±r
.
g‘
()) << ", value = ";

617 
	gUniv”§lPrš‹r
<
	gT
>::
Pršt
(*
±r
, 
os
);

618 *
	gos
 << ")";

622 
	g‹m¶©e
 <
ty³Çme
 
	gT
,y³Çm
	gD
>

623 
PrštTo
(cÚ¡ 
¡d
::
unique_±r
<
T
, 
D
>& 
±r
, std::
o¡»am
* 
os
) {

624 (
PrštSm¬tPoš‹r
<
T
>)(
±r
, 
	gos
, 0);

627 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

628 
PrštTo
(cÚ¡ 
¡d
::
sh¬ed_±r
<
T
>& 
±r
, std::
o¡»am
* 
os
) {

629 (
PrštSm¬tPoš‹r
<
T
>)(
±r
, 
	gos
, 0);

634 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

635 
PrštTu¶eTo
(cÚ¡ 
T
&, 
¡d
::
š‹g¿l_cÚ¡ªt
<
size_t
, 0>,

636 ::
¡d
::
o¡»am
*) {}

638 
‹m¶©e
 <
ty³Çme
 
T
, 
size_t
 
	gI
>

639 
PrštTu¶eTo
(cÚ¡ 
T
& 
t
, 
¡d
::
š‹g¿l_cÚ¡ªt
<
size_t
, 
I
>,

640 ::
¡d
::
o¡»am
* 
os
) {

641 
PrštTu¶eTo
(
t
, 
¡d
::
š‹g¿l_cÚ¡ªt
<
size_t
, 
I
 - 1>(), 
os
);

642 
GTEST_INTENTIONAL_CONST_COND_PUSH_
()

643 ià(
	gI
 > 1) {

644 
GTEST_INTENTIONAL_CONST_COND_POP_
()

645 *
	gos
 << ", ";

647 
	gUniv”§lPrš‹r
<
ty³Çme
 
	g¡d
::
tu¶e_–em’t
<
I
 - 1, 
	gT
>::
ty³
>::
Pršt
(

648 
¡d
::
g‘
<
I
 - 1>(
t
), 
os
);

651 
	g‹m¶©e
 <
	gty³Çme
... 
	gTy³s
>

652 
PrštTo
(cÚ¡ ::
¡d
::
tu¶e
<
Ty³s
...>& 
t
, ::¡d::
o¡»am
* 
os
) {

653 *
os
 << "(";

654 
PrštTu¶eTo
(
t
, 
¡d
::
š‹g¿l_cÚ¡ªt
<
size_t
, ...(
Ty³s
)>(), 
os
);

655 *
	gos
 << ")";

659 
	g‹m¶©e
 <
ty³Çme
 
	gT1
,y³Çm
	gT2
>

660 
PrštTo
(cÚ¡ ::
¡d
::
·œ
<
T1
, 
T2
>& 
v®ue
, ::¡d::
o¡»am
* 
os
) {

661 *
os
 << '(';

664 
	gUniv”§lPrš‹r
<
	gT1
>::
Pršt
(
v®ue
.
fœ¡
, 
os
);

665 *
	gos
 << ", ";

666 
	gUniv”§lPrš‹r
<
	gT2
>::
Pršt
(
v®ue
.
£cÚd
, 
os
);

667 *
	gos
 << ')';

672 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

673 şas 
	cUniv”§lPrš‹r
 {

674 
	gpublic
:

677 
GTEST_DISABLE_MSC_WARNINGS_PUSH_
(4180)

682 
Pršt
(cÚ¡ 
T
& 
v®ue
, ::
¡d
::
o¡»am
* 
os
) {

691 
PrštTo
(
v®ue
, 
os
);

694 
GTEST_DISABLE_MSC_WARNINGS_POP_
()

698 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

699 
şass
 
	gUniv”§lPrš‹r
<cÚ¡ 
	gT
> : 
public
 
Univ”§lPrš‹r
<
T
> {};

701 #ià
GTEST_INTERNAL_HAS_ANY


705 
	g‹m¶©e
 <>

706 
şass
 
	gUniv”§lPrš‹r
<
	gAny
> {

707 
	gpublic
:

708 
Pršt
(cÚ¡ 
Any
& 
v®ue
, ::
¡d
::
o¡»am
* 
os
) {

709 ià(
v®ue
.
has_v®ue
()) {

710 *
os
 << "v®uoàty³ " << 
G‘Ty³Name
(
v®ue
);

712 *
	gos
 << "no value";

716 
	g´iv©e
:

717 
¡d
::
¡ršg
 
G‘Ty³Name
(cÚ¡ 
Any
& 
v®ue
) {

718 #ià
GTEST_HAS_RTTI


719  
š‹º®
::
G‘Ty³Name
(
v®ue
.
ty³
());

721 
	g¡©ic_ÿ¡
<>(
	gv®ue
);

729 #ià
GTEST_INTERNAL_HAS_OPTIONAL


733 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

734 
şass
 
	gUniv”§lPrš‹r
<
	gO±iÚ®
<
	gT
>> {

735 
	gpublic
:

736 
Pršt
(cÚ¡ 
O±iÚ®
<
T
>& 
v®ue
, ::
¡d
::
o¡»am
* 
os
) {

737 *
os
 << '(';

738 ià(!
	gv®ue
) {

739 *
	gos
 << "nullopt";

741 
Univ”§lPršt
(*
v®ue
, 
os
);

743 *
	gos
 << ')';

749 #ià
GTEST_INTERNAL_HAS_VARIANT


753 
	g‹m¶©e
 <
	gty³Çme
... 
	gT
>

754 
şass
 
	gUniv”§lPrš‹r
<
	gV¬ŸÁ
<
	gT
...>> {

755 
	gpublic
:

756 
Pršt
(cÚ¡ 
V¬ŸÁ
<
T
...>& 
v®ue
, ::
¡d
::
o¡»am
* 
os
) {

757 *
os
 << '(';

758 #ià
GTEST_HAS_ABSL


759 
	gab¦
::
vis™
(
Vis™Ü
{
os
, 
v®ue
.
šdex
()}, value);

761 
	g¡d
::
vis™
(
Vis™Ü
{
os
, 
v®ue
.
šdex
()}, value);

763 *
	gos
 << ')';

766 
	g´iv©e
:

767 
	sVis™Ü
 {

768 
‹m¶©e
 <
ty³Çme
 
U
>

769 
İ”©Ü
()(cÚ¡ 
U
& 
u
) const {

770 *
os
 << "'" << 
G‘Ty³Name
<
U
>(è<< "(šdex = " << 
šdex


772 
Univ”§lPršt
(
u
, 
os
);

774 ::
¡d
::
o¡»am
* 
os
;

775 
	g¡d
::
size_t
 
šdex
;

783 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

784 
Univ”§lPrštA¼ay
(cÚ¡ 
T
* 
begš
, 
size_t
 
Ën
, ::
¡d
::
o¡»am
* 
os
) {

785 ià(
Ën
 == 0) {

786 *
os
 << "{}";

788 *
	gos
 << "{ ";

789 cÚ¡ 
size_t
 
	gkTh»shŞd
 = 18;

790 cÚ¡ 
size_t
 
	gkChunkSize
 = 8;

794 ià(
	gËn
 <ğ
kTh»shŞd
) {

795 
PrštRawA¼ayTo
(
begš
, 
Ën
, 
os
);

797 
PrštRawA¼ayTo
(
begš
, 
kChunkSize
, 
os
);

798 *
	gos
 << ", ..., ";

799 
PrštRawA¼ayTo
(
begš
 + 
Ën
 - 
kChunkSize
, kChunkSize, 
os
);

801 *
	gos
 << " }";

805 
GTEST_API_
 
Univ”§lPrštA¼ay
(

806 cÚ¡ * 
begš
, 
size_t
 
Ën
, ::
¡d
::
o¡»am
* 
os
);

808 #ifdeà
__ıp_ch¬8_t


810 
GTEST_API_
 
Univ”§lPrštA¼ay
(cÚ¡ 
ch¬8_t
* 
begš
, 
size_t
 
Ën
,

811 ::
¡d
::
o¡»am
* 
os
);

815 
GTEST_API_
 
Univ”§lPrštA¼ay
(cÚ¡ 
ch¬16_t
* 
begš
, 
size_t
 
Ën
,

816 ::
¡d
::
o¡»am
* 
os
);

819 
GTEST_API_
 
Univ”§lPrštA¼ay
(cÚ¡ 
ch¬32_t
* 
begš
, 
size_t
 
Ën
,

820 ::
¡d
::
o¡»am
* 
os
);

823 
GTEST_API_
 
Univ”§lPrštA¼ay
(

824 cÚ¡ 
wch¬_t
* 
begš
, 
size_t
 
Ën
, ::
¡d
::
o¡»am
* 
os
);

827 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
size_t
 
	gN
>

828 
şass
 
	gUniv”§lPrš‹r
<
	gT
[
N
]> {

829 
	gpublic
:

832 
Pršt
(cÚ¡ 
T
 (&
a
)[
N
], ::
¡d
::
o¡»am
* 
os
) {

833 
Univ”§lPrštA¼ay
(
a
, 
N
, 
os
);

838 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

839 
şass
 
	gUniv”§lPrš‹r
<
	gT
&> {

840 
	gpublic
:

843 
GTEST_DISABLE_MSC_WARNINGS_PUSH_
(4180)

845 
Pršt
(cÚ¡ 
T
& 
v®ue
, ::
¡d
::
o¡»am
* 
os
) {

848 *
os
 << "@" << 
»š‹½»t_ÿ¡
<cÚ¡ *>(&
v®ue
) << " ";

851 
Univ”§lPršt
(
v®ue
, 
os
);

854 
GTEST_DISABLE_MSC_WARNINGS_POP_
()

861 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

862 şas 
	cUniv”§lT”£Prš‹r
 {

863 
	gpublic
:

864 
Pršt
(cÚ¡ 
T
& 
v®ue
, ::
¡d
::
o¡»am
* 
os
) {

865 
Univ”§lPršt
(
v®ue
, 
os
);

868 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

869 
şass
 
	gUniv”§lT”£Prš‹r
<
	gT
&> {

870 
	gpublic
:

871 
Pršt
(cÚ¡ 
T
& 
v®ue
, ::
¡d
::
o¡»am
* 
os
) {

872 
Univ”§lPršt
(
v®ue
, 
os
);

875 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
size_t
 
	gN
>

876 
şass
 
	gUniv”§lT”£Prš‹r
<
	gT
[
N
]> {

877 
	gpublic
:

878 
Pršt
(cÚ¡ 
T
 (&
v®ue
)[
N
], ::
¡d
::
o¡»am
* 
os
) {

879 
Univ”§lPrš‹r
<
T
[
N
]>::
Pršt
(
v®ue
, 
os
);

882 
	g‹m¶©e
 <>

883 
şass
 
	gUniv”§lT”£Prš‹r
<const *> {

884 
	gpublic
:

885 
Pršt
(cÚ¡ * 
¡r
, ::
¡d
::
o¡»am
* 
os
) {

886 ià(
¡r
 =ğ
nuÎ±r
) {

887 *
os
 << "NULL";

889 
Univ”§lPršt
(
¡d
::
¡ršg
(
¡r
), 
os
);

893 
	g‹m¶©e
 <>

894 
şass
 
	gUniv”§lT”£Prš‹r
<*> : 
public
 
Univ”§lT”£Prš‹r
<const *> {

897 #ifdeà
__ıp_ch¬8_t


898 
	g‹m¶©e
 <>

899 
şass
 
	gUniv”§lT”£Prš‹r
<cÚ¡ 
	gch¬8_t
*> {

900 
	gpublic
:

901 
Pršt
(cÚ¡ 
ch¬8_t
* 
¡r
, ::
¡d
::
o¡»am
* 
os
) {

902 ià(
¡r
 =ğ
nuÎ±r
) {

903 *
os
 << "NULL";

905 
Univ”§lPršt
(::
¡d
::
u8¡ršg
(
¡r
), 
os
);

909 
	g‹m¶©e
 <>

910 
şass
 
	gUniv”§lT”£Prš‹r
<
	gch¬8_t
*>

911 : 
public
 
Univ”§lT”£Prš‹r
<cÚ¡ 
ch¬8_t
*> {};

914 
	g‹m¶©e
 <>

915 
şass
 
	gUniv”§lT”£Prš‹r
<cÚ¡ 
	gch¬16_t
*> {

916 
	gpublic
:

917 
Pršt
(cÚ¡ 
ch¬16_t
* 
¡r
, ::
¡d
::
o¡»am
* 
os
) {

918 ià(
¡r
 =ğ
nuÎ±r
) {

919 *
os
 << "NULL";

921 
Univ”§lPršt
(::
¡d
::
u16¡ršg
(
¡r
), 
os
);

925 
	g‹m¶©e
 <>

926 
şass
 
	gUniv”§lT”£Prš‹r
<
	gch¬16_t
*>

927 : 
public
 
Univ”§lT”£Prš‹r
<cÚ¡ 
ch¬16_t
*> {};

929 
	g‹m¶©e
 <>

930 
şass
 
	gUniv”§lT”£Prš‹r
<cÚ¡ 
	gch¬32_t
*> {

931 
	gpublic
:

932 
Pršt
(cÚ¡ 
ch¬32_t
* 
¡r
, ::
¡d
::
o¡»am
* 
os
) {

933 ià(
¡r
 =ğ
nuÎ±r
) {

934 *
os
 << "NULL";

936 
Univ”§lPršt
(::
¡d
::
u32¡ršg
(
¡r
), 
os
);

940 
	g‹m¶©e
 <>

941 
şass
 
	gUniv”§lT”£Prš‹r
<
	gch¬32_t
*>

942 : 
public
 
Univ”§lT”£Prš‹r
<cÚ¡ 
ch¬32_t
*> {};

944 #ià
GTEST_HAS_STD_WSTRING


945 
	g‹m¶©e
 <>

946 
şass
 
	gUniv”§lT”£Prš‹r
<cÚ¡ 
	gwch¬_t
*> {

947 
	gpublic
:

948 
Pršt
(cÚ¡ 
wch¬_t
* 
¡r
, ::
¡d
::
o¡»am
* 
os
) {

949 ià(
¡r
 =ğ
nuÎ±r
) {

950 *
os
 << "NULL";

952 
Univ”§lPršt
(::
¡d
::
w¡ršg
(
¡r
), 
os
);

958 
	g‹m¶©e
 <>

959 
şass
 
	gUniv”§lT”£Prš‹r
<
	gwch¬_t
*> {

960 
	gpublic
:

961 
Pršt
(
wch¬_t
* 
¡r
, ::
¡d
::
o¡»am
* 
os
) {

962 
Univ”§lT”£Prš‹r
<cÚ¡ 
wch¬_t
*>::
Pršt
(
¡r
, 
os
);

966 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

967 
Univ”§lT”£Pršt
(cÚ¡ 
T
& 
v®ue
, ::
¡d
::
o¡»am
* 
os
) {

968 
Univ”§lT”£Prš‹r
<
T
>::
Pršt
(
v®ue
, 
os
);

975 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

976 
Univ”§lPršt
(cÚ¡ 
T
& 
v®ue
, ::
¡d
::
o¡»am
* 
os
) {

979 
T
 
	tT1
;

980 
	gUniv”§lPrš‹r
<
	gT1
>::
Pršt
(
v®ue
, 
os
);

983 ::
¡d
::
	tveùÜ
< ::
	t¡d
::
	t¡ršg
> 
	tSŒšgs
;

987 
	g‹m¶©e
 <
ty³Çme
 
	gTu¶e
>

988 
T”£PrštP»fixToSŒšgs
(cÚ¡ 
Tu¶e
&, 
¡d
::
š‹g¿l_cÚ¡ªt
<
size_t
, 0>,

989 
SŒšgs
*) {}

990 
	g‹m¶©e
 <
ty³Çme
 
	gTu¶e
, 
size_t
 
	gI
>

991 
T”£PrštP»fixToSŒšgs
(cÚ¡ 
Tu¶e
& 
t
,

992 
¡d
::
š‹g¿l_cÚ¡ªt
<
size_t
, 
I
>,

993 
SŒšgs
* 
¡ršgs
) {

994 
T”£PrštP»fixToSŒšgs
(
t
, 
¡d
::
š‹g¿l_cÚ¡ªt
<
size_t
, 
I
 - 1>(),

995 
¡ršgs
);

996 ::
¡d
::
¡ršg¡»am
 
ss
;

997 
Univ”§lT”£Pršt
(
¡d
::
g‘
<
I
 - 1>(
t
), &
ss
);

998 
	g¡ršgs
->
push_back
(
ss
.
¡r
());

1004 
	g‹m¶©e
 <
ty³Çme
 
	gTu¶e
>

1005 
SŒšgs
 
Univ”§lT”£PrštTu¶eF›ldsToSŒšgs
(cÚ¡ 
Tu¶e
& 
v®ue
) {

1006 
SŒšgs
 
	g»suÉ
;

1007 
T”£PrštP»fixToSŒšgs
(

1008 
v®ue
, 
¡d
::
š‹g¿l_cÚ¡ªt
<
size_t
, std::
tu¶e_size
<
Tu¶e
>::value>(),

1009 &
»suÉ
);

1010  
	g»suÉ
;

1015 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

1016 ::
¡d
::
¡ršg
 
	$PrštToSŒšg
(cÚ¡ 
T
& 
v®ue
) {

1017 ::
¡d
::
¡ršg¡»am
 
ss
;

1018 
š‹º®
::
Univ”§lT”£Prš‹r
<
T
>::
	`Pršt
(
v®ue
, &
ss
);

1019  
ss
.
	`¡r
();

1020 
	}
}

1027 
	~"g‹¡/š‹º®/cu¡om/g‹¡-´š‹rs.h
"

	@third_party/googletest/googletest/include/gtest/gtest-spi.h

36 #iâdeà
GOOGLETEST_INCLUDE_GTEST_GTEST_SPI_H_


37 
	#GOOGLETEST_INCLUDE_GTEST_GTEST_SPI_H_


	)

39 
	~"g‹¡/g‹¡.h
"

41 
GTEST_DISABLE_MSC_WARNINGS_PUSH_
(4251 \

44 
Çme¥aû
 
	g‹¡šg
 {

55 şas 
	cGTEST_API_
 
	gScİedFakeTe¡P¬tResuÉR•Ü‹r


56 : 
public
 
Te¡P¬tResuÉR•Ü‹rIÁ”çû
 {

57 
public
:

59 
	eIÁ”û±Mode
 {

60 
INTERCEPT_ONLY_CURRENT_THREAD
,

61 
	gINTERCEPT_ALL_THREADS


68 
ex¶ic™
 
ScİedFakeTe¡P¬tResuÉR•Ü‹r
(
Te¡P¬tResuÉA¼ay
* 
»suÉ
);

71 
ScİedFakeTe¡P¬tResuÉR•Ü‹r
(
IÁ”û±Mode
 
š‹rû±_mode
,

72 
Te¡P¬tResuÉA¼ay
* 
»suÉ
);

75 ~
ScİedFakeTe¡P¬tResuÉR•Ü‹r
(è
	gov”ride
;

82 
R•ÜtTe¡P¬tResuÉ
(cÚ¡ 
Te¡P¬tResuÉ
& 
»suÉ
è
	gov”ride
;

84 
	g´iv©e
:

85 
In™
();

87 cÚ¡ 
IÁ”û±Mode
 
	gš‹rû±_mode_
;

88 
Te¡P¬tResuÉR•Ü‹rIÁ”çû
* 
	gŞd_»pÜ‹r_
;

89 
Te¡P¬tResuÉA¼ay
* cÚ¡ 
	g»suÉ_
;

91 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
ScİedFakeTe¡P¬tResuÉR•Ü‹r
);

94 
Çme¥aû
 
	gš‹º®
 {

101 şas 
	cGTEST_API_
 
	gSšgËFau»Check”
 {

102 
	gpublic
:

104 
SšgËFau»Check”
(cÚ¡ 
Te¡P¬tResuÉA¼ay
* 
»suÉs
,

105 
Te¡P¬tResuÉ
::
Ty³
 
ty³
, cÚ¡ 
¡d
::
¡ršg
& 
sub¡r
);

106 ~
SšgËFau»Check”
();

107 
	g´iv©e
:

108 cÚ¡ 
Te¡P¬tResuÉA¼ay
* cÚ¡ 
»suÉs_
;

109 cÚ¡ 
	gTe¡P¬tResuÉ
::
Ty³
 
ty³_
;

110 cÚ¡ 
	g¡d
::
¡ršg
 
sub¡r_
;

112 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
SšgËFau»Check”
);

119 
	$GTEST_DISABLE_MSC_WARNINGS_POP_
()

144 
	#EXPECT_FATAL_FAILURE
(
¡©em’t
, 
sub¡r
) \

146 şas 
	cGTe¡Ex³ùF©®Fau»H–³r
 {\

147 
public
:\

148 
	`Execu‹
(è{ 
¡©em’t
; }\

149 
	}
};\

150 ::
‹¡šg
::
Te¡P¬tResuÉA¼ay
 
g‹¡_çu»s
;\

151 ::
‹¡šg
::
š‹º®
::
SšgËFau»Check”
 
	`g‹¡_check”
(\

152 &
g‹¡_çu»s
, ::
‹¡šg
::
Te¡P¬tResuÉ
::
kF©®Fau»
, (
sub¡r
));\

154 ::
‹¡šg
::
ScİedFakeTe¡P¬tResuÉR•Ü‹r
 
	`g‹¡_»pÜ‹r
(\

155 ::
‹¡šg
::
ScİedFakeTe¡P¬tResuÉR•Ü‹r
:: \

156 
INTERCEPT_ONLY_CURRENT_THREAD
, &
g‹¡_çu»s
);\

157 
GTe¡Ex³ùF©®Fau»H–³r
::
	`Execu‹
();\

159 } ::
‹¡šg
::
š‹º®
::
	`AlwaysF®£
())

	)

161 
	#EXPECT_FATAL_FAILURE_ON_ALL_THREADS
(
¡©em’t
, 
sub¡r
) \

163 şas 
	cGTe¡Ex³ùF©®Fau»H–³r
 {\

164 
public
:\

165 
	`Execu‹
(è{ 
¡©em’t
; }\

167 ::
‹¡šg
::
Te¡P¬tResuÉA¼ay
 
g‹¡_çu»s
;\

168 ::
‹¡šg
::
š‹º®
::
SšgËFau»Check”
 
	`g‹¡_check”
(\

169 &
g‹¡_çu»s
, ::
‹¡šg
::
Te¡P¬tResuÉ
::
kF©®Fau»
, (
sub¡r
));\

171 ::
‹¡šg
::
ScİedFakeTe¡P¬tResuÉR•Ü‹r
 
	`g‹¡_»pÜ‹r
(\

172 ::
‹¡šg
::
ScİedFakeTe¡P¬tResuÉR•Ü‹r
:: \

173 
INTERCEPT_ALL_THREADS
, &
g‹¡_çu»s
);\

174 
GTe¡Ex³ùF©®Fau»H–³r
::
	`Execu‹
();\

176 } ::
‹¡šg
::
š‹º®
::
	`AlwaysF®£
())

	)

210 
	#EXPECT_NONFATAL_FAILURE
(
¡©em’t
, 
sub¡r
) \

212 ::
‹¡šg
::
Te¡P¬tResuÉA¼ay
 
g‹¡_çu»s
;\

213 ::
‹¡šg
::
š‹º®
::
SšgËFau»Check”
 
	`g‹¡_check”
(\

214 &
g‹¡_çu»s
, ::
‹¡šg
::
Te¡P¬tResuÉ
::
kNÚF©®Fau»
, \

215 (
sub¡r
));\

217 ::
‹¡šg
::
ScİedFakeTe¡P¬tResuÉR•Ü‹r
 
	`g‹¡_»pÜ‹r
(\

218 ::
‹¡šg
::
ScİedFakeTe¡P¬tResuÉR•Ü‹r
:: \

219 
INTERCEPT_ONLY_CURRENT_THREAD
, &
g‹¡_çu»s
);\

220 ià(::
‹¡šg
::
š‹º®
::
	`AlwaysTrue
()è{ 
¡©em’t
; }\

222 } ::
‹¡šg
::
š‹º®
::
	`AlwaysF®£
())

	)

224 
	#EXPECT_NONFATAL_FAILURE_ON_ALL_THREADS
(
¡©em’t
, 
sub¡r
) \

226 ::
‹¡šg
::
Te¡P¬tResuÉA¼ay
 
g‹¡_çu»s
;\

227 ::
‹¡šg
::
š‹º®
::
SšgËFau»Check”
 
	`g‹¡_check”
(\

228 &
g‹¡_çu»s
, ::
‹¡šg
::
Te¡P¬tResuÉ
::
kNÚF©®Fau»
, \

229 (
sub¡r
));\

231 ::
‹¡šg
::
ScİedFakeTe¡P¬tResuÉR•Ü‹r
 
	`g‹¡_»pÜ‹r
(\

232 ::
‹¡šg
::
ScİedFakeTe¡P¬tResuÉR•Ü‹r
::
INTERCEPT_ALL_THREADS
, \

233 &
g‹¡_çu»s
);\

234 ià(::
‹¡šg
::
š‹º®
::
	`AlwaysTrue
()è{ 
¡©em’t
; }\

236 } ::
‹¡šg
::
š‹º®
::
	`AlwaysF®£
())

	)

	@third_party/googletest/googletest/include/gtest/gtest-test-part.h

32 #iâdeà
GOOGLETEST_INCLUDE_GTEST_GTEST_TEST_PART_H_


33 
	#GOOGLETEST_INCLUDE_GTEST_GTEST_TEST_PART_H_


	)

35 
	~<iosfwd
>

36 
	~<veùÜ
>

37 
	~"g‹¡/š‹º®/g‹¡-š‹º®.h
"

38 
	~"g‹¡/š‹º®/g‹¡-¡ršg.h
"

40 
GTEST_DISABLE_MSC_WARNINGS_PUSH_
(4251 \

43 
Çme¥aû
 
	g‹¡šg
 {

49 şas 
	cGTEST_API_
 
	gTe¡P¬tResuÉ
 {

50 
	gpublic
:

53 
	eTy³
 {

54 
kSucûss
,

55 
	gkNÚF©®Fau»
,

56 
	gkF©®Fau»
,

57 
	gkSk


63 
Te¡P¬tResuÉ
(
Ty³
 
a_ty³
, cÚ¡ * 
a_fe_Çme
, 
a_lše_numb”
,

64 cÚ¡ * 
a_mes§ge
)

65 : 
ty³_
(
a_ty³
),

66 
fe_Çme_
(
a_fe_Çme
 =ğ
nuÎ±r
 ? "" :‡_file_name),

67 
lše_numb”_
(
a_lše_numb”
),

68 
summ¬y_
(
ExŒaùSumm¬y
(
a_mes§ge
)),

69 
mes§ge_
(
a_mes§ge
) {}

72 
Ty³
 
ty³
(ècÚ¡ {  
	gty³_
; }

76 cÚ¡ * 
fe_Çme
() const {

77  
	gfe_Çme_
.
em±y
(è? 
	gnuÎ±r
 : 
fe_Çme_
.
c_¡r
();

82 
lše_numb”
(ècÚ¡ {  
	glše_numb”_
; }

85 cÚ¡ * 
summ¬y
(ècÚ¡ {  
	gsumm¬y_
.
c_¡r
(); }

88 cÚ¡ * 
mes§ge
(ècÚ¡ {  
	gmes§ge_
.
c_¡r
(); }

91 
boŞ
 
sk³d
(ècÚ¡ {  
	gty³_
 =ğ
kSk
; }

94 
boŞ
 
·s£d
(ècÚ¡ {  
	gty³_
 =ğ
kSucûss
; }

97 
boŞ
 
nÚçÎy_çed
(ècÚ¡ {  
	gty³_
 =ğ
kNÚF©®Fau»
; }

100 
boŞ
 
çÎy_çed
(ècÚ¡ {  
	gty³_
 =ğ
kF©®Fau»
; }

103 
boŞ
 
çed
(ècÚ¡ {  
çÎy_çed
(è|| 
nÚçÎy_çed
(); }

105 
	g´iv©e
:

106 
Ty³
 
ty³_
;

110 
	g¡d
::
¡ršg
 
ExŒaùSumm¬y
(cÚ¡ * 
mes§ge
);

114 
	g¡d
::
¡ršg
 
fe_Çme_
;

117 
	glše_numb”_
;

118 
	g¡d
::
¡ršg
 
summ¬y_
;

119 
	g¡d
::
¡ršg
 
mes§ge_
;

123 
	g¡d
::
o¡»am
& 
İ”©Ü
<<(
¡d
::o¡»am& 
os
, cÚ¡ 
	gTe¡P¬tResuÉ
& 
	g»suÉ
);

129 şas 
	cGTEST_API_
 
	gTe¡P¬tResuÉA¼ay
 {

130 
	gpublic
:

131 
Te¡P¬tResuÉA¼ay
() {}

134 
Aµ’d
(cÚ¡ 
Te¡P¬tResuÉ
& 
»suÉ
);

137 cÚ¡ 
	gTe¡P¬tResuÉ
& 
G‘Te¡P¬tResuÉ
(
šdex
) const;

140 
size
() const;

142 
	g´iv©e
:

143 
¡d
::
veùÜ
<
Te¡P¬tResuÉ
> 
¬¿y_
;

145 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
Te¡P¬tResuÉA¼ay
);

149 şas 
	cGTEST_API_
 
	gTe¡P¬tResuÉR•Ü‹rIÁ”çû
 {

150 
	gpublic
:

151 
vœtu®
 ~
Te¡P¬tResuÉR•Ü‹rIÁ”çû
() {}

153 
vœtu®
 
R•ÜtTe¡P¬tResuÉ
(cÚ¡ 
Te¡P¬tResuÉ
& 
»suÉ
) = 0;

156 
Çme¥aû
 
	gš‹º®
 {

164 şas 
	cGTEST_API_
 
	gHasNewF©®Fau»H–³r


165 : 
public
 
Te¡P¬tResuÉR•Ü‹rIÁ”çû
 {

166 
public
:

167 
HasNewF©®Fau»H–³r
();

168 ~
HasNewF©®Fau»H–³r
(è
	gov”ride
;

169 
R•ÜtTe¡P¬tResuÉ
(cÚ¡ 
Te¡P¬tResuÉ
& 
»suÉ
è
	gov”ride
;

170 
boŞ
 
has_Ãw_çl_çu»
(ècÚ¡ {  
	ghas_Ãw_çl_çu»_
; }

171 
	g´iv©e
:

172 
boŞ
 
has_Ãw_çl_çu»_
;

173 
Te¡P¬tResuÉR•Ü‹rIÁ”çû
* 
	gÜigš®_»pÜ‹r_
;

175 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
HasNewF©®Fau»H–³r
);

182 
	$GTEST_DISABLE_MSC_WARNINGS_POP_
()

	@third_party/googletest/googletest/include/gtest/gtest-typed-test.h

32 #iâdeà
GOOGLETEST_INCLUDE_GTEST_GTEST_TYPED_TEST_H_


33 
	#GOOGLETEST_INCLUDE_GTEST_GTEST_TYPED_TEST_H_


	)

45 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

46 şas 
	cFooTe¡
 : 
public
 
‹¡šg
::
Te¡
 {

47 
public
:

49 
¡d
::
	tli¡
<
	tT
> 
	tLi¡
;

50 
T
 
	msh¬ed_
;

51 
T
 
	mv®ue_
;

57 
	g‹¡šg
::
	tTy³s
<, , > 
	tMyTy³s
;

58 
TYPED_TEST_SUITE
(
FooTe¡
, 
MyTy³s
);

66 
	$TYPED_TEST
(
FooTe¡
, 
DÛsBÏh
) {

70 
Ty³P¬am
 
n
 = 
this
->
v®ue_
;

74 
n
 +ğ
Te¡Fixtu»
::
sh¬ed_
;

78 
ty³Çme
 
Te¡Fixtu»
::
Li¡
 
v®ues
;

79 
v®ues
.
	`push_back
(
n
);

81 
	}
}

83 
	$TYPED_TEST
(
FooTe¡
, 
HasPrİ”tyA
è{ ... 
	}
}

123 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

124 şas 
	cFooTe¡
 : 
public
 
‹¡šg
::
Te¡
 {

131 
TYPED_TEST_SUITE_P
(
FooTe¡
);

135 
	$TYPED_TEST_P
(
FooTe¡
, 
DÛsBÏh
) {

137 
Ty³P¬am
 
n
 = 0;

139 
	}
}

141 
	$TYPED_TEST_P
(
FooTe¡
, 
HasPrİ”tyA
è{ ... 
	}
}

147 
REGISTER_TYPED_TEST_SUITE_P
(
FooTe¡
,

148 
DÛsBÏh
, 
HasPrİ”tyA
);

158 
	g‹¡šg
::
	tTy³s
<, , > 
	tMyTy³s
;

159 
INSTANTIATE_TYPED_TEST_SUITE_P
(
My
, 
FooTe¡
, 
MyTy³s
);

172 
	~"g‹¡/š‹º®/g‹¡-š‹º®.h
"

173 
	~"g‹¡/š‹º®/g‹¡-pÜt.h
"

174 
	~"g‹¡/š‹º®/g‹¡-ty³-ut.h
"

182 
	#GTEST_TYPE_PARAMS_
(
Te¡Su™eName
è
g‹¡_ty³_·¿ms_
##Te¡Su™eName##
_


	)

186 
	#GTEST_NAME_GENERATOR_
(
Te¡Su™eName
) \

187 
g‹¡_ty³_·¿ms_
##
Te¡Su™eName
##
_NameG’”©Ü


	)

189 
	#TYPED_TEST_SUITE
(
Ca£Name
, 
Ty³s
, ...) \

190 ::
‹¡šg
::
	tš‹º®
::
	tG’”©eTy³Li¡
<
	tTy³s
>::
	tty³
 \

191 
	tGTEST_TYPE_PARAMS_
(
	tCa£Name
); \

192 ::
‹¡šg
::
	tš‹º®
::
	tNameG’”©ÜS–eùÜ
<
	t__VA_ARGS__
>::
	tty³
 \

193 
	tGTEST_NAME_GENERATOR_
(
	tCa£Name
)

	)

195 
	tTYPED_TEST
(
	tCa£Name
, 
	tTe¡Name
) \

196 
	t¡©ic_as£¹
((
	tGTEST_STRINGIFY_
(
	tTe¡Name
)) > 1, \

198 
‹m¶©e
 <
ty³Çme
 
g‹¡_Ty³P¬am_
> \

199 
şass
 
	`GTEST_TEST_CLASS_NAME_
(
Ca£Name
, 
Te¡Name
) \

200 : 
public
 
Ca£Name
<
g‹¡_Ty³P¬am_
> { \

201 
´iv©e
: \

202 
Ca£Name
<
	tg‹¡_Ty³P¬am_
> 
	tTe¡Fixtu»
; \

203 
g‹¡_Ty³P¬am_
 
	tTy³P¬am
; \

204 
	`Te¡Body
(è
ov”ride
; \

206 
boŞ
 
g‹¡_
##
Ca£Name
##
_
##
Te¡Name
##
_»gi¡”ed_
 \

207 
GTEST_ATTRIBUTE_UNUSED_
 = ::
‹¡šg
::
š‹º®
::
Ty³P¬am‘”izedTe¡
< \

208 
Ca£Name
, \

209 ::
‹¡šg
::
š‹º®
::
Tem¶©eS–
<
	`GTEST_TEST_CLASS_NAME_
(
Ca£Name
, \

210 
Te¡Name
)>, \

211 
	`GTEST_TYPE_PARAMS_
( \

212 
Ca£Name
)>::
	`Regi¡”
("", \

213 ::
‹¡šg
::
š‹º®
::
	`CodeLoÿtiÚ
( \

214 
__FILE__
, 
__LINE__
), \

215 
	`GTEST_STRINGIFY_
(
Ca£Name
), \

216 
	`GTEST_STRINGIFY_
(
Te¡Name
), 0, \

217 ::
‹¡šg
::
š‹º®
::
G’”©eNames
< \

218 
	`GTEST_NAME_GENERATOR_
(
Ca£Name
), \

219 
	`GTEST_TYPE_PARAMS_
(
Ca£Name
)>()); \

220 
‹m¶©e
 <
ty³Çme
 
g‹¡_Ty³P¬am_
> \

221 
	`GTEST_TEST_CLASS_NAME_
(
Ca£Name
, \

222 
Te¡Name
)<
g‹¡_Ty³P¬am_
>::
	`Te¡Body
()

	)

225 #iâdeà
GTEST_REMOVE_LEGACY_TEST_CASEAPI_


226 
	#TYPED_TEST_CASE
 \

227 
	`¡©ic_as£¹
(::
‹¡šg
::
š‹º®
::
	`Ty³dTe¡Ca£IsD•»ÿ‹d
(), ""); \

228 
TYPED_TEST_SUITE


	)

238 
	#GTEST_SUITE_NAMESPACE_
(
Te¡Su™eName
è
g‹¡_su™e_
##Te¡Su™eName##
_


	)

244 
	#GTEST_TYPED_TEST_SUITE_P_STATE_
(
Te¡Su™eName
) \

245 
g‹¡_ty³d_‹¡_su™e_p_¡©e_
##
Te¡Su™eName
##
_


	)

251 
	#GTEST_REGISTERED_TEST_NAMES_
(
Te¡Su™eName
) \

252 
g‹¡_»gi¡”ed_‹¡_Çmes_
##
Te¡Su™eName
##
_


	)

257 
	#TYPED_TEST_SUITE_P
(
Su™eName
) \

258 ::
‹¡šg
::
š‹º®
::
Ty³dTe¡Su™ePS‹
 \

259 
	`GTEST_TYPED_TEST_SUITE_P_STATE_
(
Su™eName
)

	)

262 #iâdeà
GTEST_REMOVE_LEGACY_TEST_CASEAPI_


263 
	#TYPED_TEST_CASE_P
 \

264 
	`¡©ic_as£¹
(::
‹¡šg
::
š‹º®
::
	`Ty³dTe¡Ca£_P_IsD•»ÿ‹d
(), ""); \

265 
TYPED_TEST_SUITE_P


	)

268 
	#TYPED_TEST_P
(
Su™eName
, 
Te¡Name
) \

269 
Çme¥aû
 
	`GTEST_SUITE_NAMESPACE_
(
Su™eName
) { \

270 
‹m¶©e
 <
ty³Çme
 
g‹¡_Ty³P¬am_
> \

271 
şass
 
Te¡Name
 : 
public
 
Su™eName
<
g‹¡_Ty³P¬am_
> { \

272 
´iv©e
: \

273 
Su™eName
<
	tg‹¡_Ty³P¬am_
> 
	tTe¡Fixtu»
; \

274 
g‹¡_Ty³P¬am_
 
	tTy³P¬am
; \

275 
	`Te¡Body
(è
ov”ride
; \

277 
boŞ
 
g‹¡_
##
Te¡Name
##
_defšed_
 
GTEST_ATTRIBUTE_UNUSED_
 = \

278 
	`GTEST_TYPED_TEST_SUITE_P_STATE_
(
Su™eName
).
	`AddTe¡Name
( \

279 
__FILE__
, 
__LINE__
, 
	`GTEST_STRINGIFY_
(
Su™eName
), \

280 
	`GTEST_STRINGIFY_
(
Te¡Name
)); \

282 
‹m¶©e
 <
ty³Çme
 
g‹¡_Ty³P¬am_
> \

283 
	`GTEST_SUITE_NAMESPACE_
( \

284 
Su™eName
)::
Te¡Name
<
g‹¡_Ty³P¬am_
>::
	`Te¡Body
()

	)

287 
	#REGISTER_TYPED_TEST_SUITE_P
(
Su™eName
, ...) \

288 
Çme¥aû
 
	`GTEST_SUITE_NAMESPACE_
(
Su™eName
) { \

289 ::
‹¡šg
::
	tš‹º®
::
	tTem¶©es
<
	t__VA_ARGS__
> 
	tg‹¡_AÎTe¡s_
; \

291 cÚ¡ * cÚ¡ 
	`GTEST_REGISTERED_TEST_NAMES_
( \

292 
Su™eName
è
GTEST_ATTRIBUTE_UNUSED_
 = \

293 
	`GTEST_TYPED_TEST_SUITE_P_STATE_
(
Su™eName
).
	`V”ifyRegi¡”edTe¡Names
( \

294 
	`GTEST_STRINGIFY_
(
Su™eName
), 
__FILE__
, 
__LINE__
, #__VA_ARGS__)

	)

297 #iâdeà
GTEST_REMOVE_LEGACY_TEST_CASEAPI_


298 
	#REGISTER_TYPED_TEST_CASE_P
 \

299 
	`¡©ic_as£¹
(::
‹¡šg
::
š‹º®
::
	`Regi¡”Ty³dTe¡Ca£_P_IsD•»ÿ‹d
(), \

301 
REGISTER_TYPED_TEST_SUITE_P


	)

304 
	#INSTANTIATE_TYPED_TEST_SUITE_P
(
P»fix
, 
Su™eName
, 
Ty³s
, ...) \

305 
	`¡©ic_as£¹
((
	`GTEST_STRINGIFY_
(
P»fix
)) > 1, \

307 
boŞ
 
g‹¡_
##
P»fix
##
_
##
Su™eName
 
GTEST_ATTRIBUTE_UNUSED_
 = \

308 ::
‹¡šg
::
š‹º®
::
Ty³P¬am‘”izedTe¡Su™e
< \

309 
Su™eName
, 
	`GTEST_SUITE_NAMESPACE_
(Su™eName)::
g‹¡_AÎTe¡s_
, \

310 ::
‹¡šg
::
š‹º®
::
G’”©eTy³Li¡
<
Ty³s
>::
ty³
>:: \

311 
	`Regi¡”
(
	`GTEST_STRINGIFY_
(
P»fix
), \

312 ::
‹¡šg
::
š‹º®
::
	`CodeLoÿtiÚ
(
__FILE__
, 
__LINE__
), \

313 &
	`GTEST_TYPED_TEST_SUITE_P_STATE_
(
Su™eName
), \

314 
	`GTEST_STRINGIFY_
(
Su™eName
), \

315 
	`GTEST_REGISTERED_TEST_NAMES_
(
Su™eName
), \

316 ::
‹¡šg
::
š‹º®
::
G’”©eNames
< \

317 ::
‹¡šg
::
š‹º®
::
NameG’”©ÜS–eùÜ
< \

318 
__VA_ARGS__
>::
ty³
, \

319 ::
‹¡šg
::
š‹º®
::
G’”©eTy³Li¡
<
Ty³s
>::
ty³
>())

	)

322 #iâdeà
GTEST_REMOVE_LEGACY_TEST_CASEAPI_


323 
	#INSTANTIATE_TYPED_TEST_CASE_P
 \

324 
	`¡©ic_as£¹
( \

325 ::
‹¡šg
::
š‹º®
::
	`In¡ªtŸ‹Ty³dTe¡Ca£_P_IsD•»ÿ‹d
(), ""); \

326 
INSTANTIATE_TYPED_TEST_SUITE_P


	)

	@third_party/googletest/googletest/include/gtest/gtest.h

52 #iâdeà
GOOGLETEST_INCLUDE_GTEST_GTEST_H_


53 
	#GOOGLETEST_INCLUDE_GTEST_GTEST_H_


	)

55 
	~<c¡ddef
>

56 
	~<lim™s
>

57 
	~<memÜy
>

58 
	~<o¡»am
>

59 
	~<ty³_Œa™s
>

60 
	~<veùÜ
>

62 
	~"g‹¡/š‹º®/g‹¡-š‹º®.h
"

63 
	~"g‹¡/š‹º®/g‹¡-¡ršg.h
"

64 
	~"g‹¡/g‹¡-d—th-‹¡.h
"

65 
	~"g‹¡/g‹¡-m©ch”s.h
"

66 
	~"g‹¡/g‹¡-mes§ge.h
"

67 
	~"g‹¡/g‹¡-·¿m-‹¡.h
"

68 
	~"g‹¡/g‹¡-´š‹rs.h
"

69 
	~"g‹¡/g‹¡_´od.h
"

70 
	~"g‹¡/g‹¡-‹¡-·¹.h
"

71 
	~"g‹¡/g‹¡-ty³d-‹¡.h
"

73 
GTEST_DISABLE_MSC_WARNINGS_PUSH_
(4251 \

76 
Çme¥aû
 
	g‹¡šg
 {

80 #ifdeà
_MSC_VER


81 #´agm¨
w¬nšg
(
push
)

82 #´agm¨
w¬nšg
(
di§bË
:4805)

83 #´agm¨
w¬nšg
(
di§bË
:4100)

90 
GTEST_DECLARE_boŞ_
(
®so_run_di§bËd_‹¡s
);

93 
GTEST_DECLARE_boŞ_
(
b»ak_Ú_çu»
);

97 
GTEST_DECLARE_boŞ_
(
ÿtch_exû±iÚs
);

102 
GTEST_DECLARE_¡ršg_
(
cŞÜ
);

106 
GTEST_DECLARE_boŞ_
(
ç_ç¡
);

110 
GTEST_DECLARE_¡ršg_
(
f‹r
);

114 
GTEST_DECLARE_boŞ_
(
š¡®l_çu»_sigÇl_hªdËr
);

118 
GTEST_DECLARE_boŞ_
(
li¡_‹¡s
);

122 
GTEST_DECLARE_¡ršg_
(
ouut
);

125 
GTEST_DECLARE_boŞ_
(
br›f
);

129 
GTEST_DECLARE_boŞ_
(
´št_time
);

132 
GTEST_DECLARE_boŞ_
(
´št_utf8
);

135 
GTEST_DECLARE_št32_
(
¿ndom_£ed
);

139 
GTEST_DECLARE_št32_
(
»³©
);

143 
GTEST_DECLARE_boŞ_
(
show_š‹º®_¡ack_äames
);

146 
GTEST_DECLARE_boŞ_
(
shufæe
);

150 
GTEST_DECLARE_št32_
(
¡ack_Œaû_d•th
);

155 
GTEST_DECLARE_boŞ_
(
throw_Ú_çu»
);

160 
GTEST_DECLARE_¡ršg_
(
¡»am_»suÉ_to
);

162 #ià
GTEST_USE_OWN_FLAGFILE_FLAG_


163 
GTEST_DECLARE_¡ršg_
(
æagfe
);

167 cÚ¡ 
	gkMaxSckT¿ûD•th
 = 100;

169 
Çme¥aû
 
	gš‹º®
 {

171 
şass
 
	gAs£¹H–³r
;

172 
şass
 
	gDeçuÉGlob®Te¡P¬tResuÉR•Ü‹r
;

173 
şass
 
	gExecD—thTe¡
;

174 
şass
 
	gNoExecD—thTe¡
;

175 
şass
 
	gFš®SucûssCheck”
;

176 
şass
 
	gGTe¡FÏgSav”
;

177 
şass
 
	gSŒ—mšgLi¡’”Te¡
;

178 
şass
 
	gTe¡ResuÉAcûssÜ
;

179 
şass
 
	gTe¡Ev’tLi¡’”sAcûssÜ
;

180 
şass
 
	gTe¡Ev’tR•—‹r
;

181 
şass
 
	gUn™Te¡RecÜdPrİ”tyTe¡H–³r
;

182 
şass
 
	gWšdowsD—thTe¡
;

183 
şass
 
	gFuchsŸD—thTe¡
;

184 
şass
 
Un™Te¡Im¶
* 
G‘Un™Te¡Im¶
();

185 
R•ÜtFau»InUnknownLoÿtiÚ
(
Te¡P¬tResuÉ
::
Ty³
 
»suÉ_ty³
,

186 cÚ¡ 
¡d
::
¡ršg
& 
mes§ge
);

187 
	g¡d
::
£t
<
¡d
::
¡ršg
>* 
G‘IgnÜedP¬am‘”izedTe¡Su™es
();

194 
şass
 
	gTe¡
;

195 
şass
 
	gTe¡Su™e
;

198 #iâdeà
GTEST_REMOVE_LEGACY_TEST_CASEAPI_


199 
usšg
 
	gTe¡Ca£
 = 
Te¡Su™e
;

201 
şass
 
	gTe¡Info
;

202 
şass
 
	gUn™Te¡
;

283 şas 
	cGTEST_API_
 
	gAs£¹iÚResuÉ
 {

284 
	gpublic
:

287 
As£¹iÚResuÉ
(cÚ¡ As£¹iÚResuÉ& 
Ùh”
);

293 #ià
defšed
(
_MSC_VER
) && (_MSC_VER < 1910 || _MSC_VER >= 1920)

294 
GTEST_DISABLE_MSC_WARNINGS_PUSH_
(4800 )

304 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

305 
ex¶ic™
 
As£¹iÚResuÉ
(

306 cÚ¡ 
T
& 
sucûss
,

307 
ty³Çme
 
¡d
::
’abË_if
<

308 !
¡d
::
is_cÚv”tibË
<
T
, 
As£¹iÚResuÉ
>::
v®ue
>::
ty³
*

310 ğ
nuÎ±r
)

311 : 
sucûss_
(
sucûss
) {}

313 #ià
defšed
(
_MSC_VER
) && (_MSC_VER < 1910 || _MSC_VER >= 1920)

314 
GTEST_DISABLE_MSC_WARNINGS_POP_
()

318 
As£¹iÚResuÉ
& 
İ”©Ü
=(As£¹iÚResuÉ 
Ùh”
) {

319 
sw­
(
Ùh”
);

320  *
	gthis
;

324 
İ”©Ü
 
boŞ
(ècÚ¡ {  
	gsucûss_
; }

327 
As£¹iÚResuÉ
 
	gİ”©Ü
!() const;

333 cÚ¡ * 
mes§ge
() const {

334  
	gmes§ge_
.
g‘
(è!ğ
nuÎ±r
 ? 
mes§ge_
->
c_¡r
() : "";

337 cÚ¡ * 
çu»_mes§ge
(ècÚ¡ {  
mes§ge
(); }

340 
	g‹m¶©e
 <
ty³Çme
 
	gT
> 
	gAs£¹iÚResuÉ
& 
	gİ”©Ü
<<(cÚ¡ T& 
	gv®ue
) {

341 
Aµ’dMes§ge
(
Mes§ge
(è<< 
v®ue
);

342  *
	gthis
;

347 
	gAs£¹iÚResuÉ
& 
	gİ”©Ü
<<(

348 ::
¡d
::
o¡»am
& (*
basic_mªuÏtÜ
)(::¡d::o¡»am& 
¡»am
)) {

349 
Aµ’dMes§ge
(
Mes§ge
(è<< 
basic_mªuÏtÜ
);

350  *
	gthis
;

353 
	g´iv©e
:

355 
Aµ’dMes§ge
(cÚ¡ 
Mes§ge
& 
a_mes§ge
) {

356 ià(
mes§ge_
.
g‘
(è=ğ
nuÎ±r
èmes§ge_.
»£t
(
Ãw
 ::
¡d
::
¡ršg
);

357 
	gmes§ge_
->
­³nd
(
a_mes§ge
.
G‘SŒšg
().
c_¡r
());

361 
sw­
(
As£¹iÚResuÉ
& 
Ùh”
);

364 
boŞ
 
	gsucûss_
;

369 
	g¡d
::
unique_±r
< ::
¡d
::
¡ršg
> 
mes§ge_
;

373 
GTEST_API_
 
As£¹iÚResuÉ
 
As£¹iÚSucûss
();

376 
GTEST_API_
 
As£¹iÚResuÉ
 
As£¹iÚFau»
();

380 
GTEST_API_
 
As£¹iÚResuÉ
 
As£¹iÚFau»
(cÚ¡ 
Mes§ge
& 
msg
);

387 
	~"g‹¡/g‹¡_´ed_im¶.h
"

389 
Çme¥aû
 
	g‹¡šg
 {

414 şas 
	cGTEST_API_
 
	gTe¡
 {

415 
	gpublic
:

416 
ä›nd
 
şass
 
Te¡Info
;

419 
	gvœtu®
 ~
Te¡
();

427 
S‘UpTe¡Su™e
() {}

435 
T—rDownTe¡Su™e
() {}

439 #iâdeà
GTEST_REMOVE_LEGACY_TEST_CASEAPI_


440 
T—rDownTe¡Ca£
() {}

441 
S‘UpTe¡Ca£
() {}

445 
boŞ
 
HasF©®Fau»
();

448 
boŞ
 
HasNÚçlFau»
();

451 
boŞ
 
IsSk³d
();

455 
boŞ
 
HasFau»
(è{  
HasF©®Fau»
(è|| 
HasNÚçlFau»
(); }

470 
RecÜdPrİ”ty
(cÚ¡ 
¡d
::
¡ršg
& 
key
, cÚ¡ std::¡ršg& 
v®ue
);

471 
RecÜdPrİ”ty
(cÚ¡ 
¡d
::
¡ršg
& 
key
, 
v®ue
);

473 
	g´Ùeùed
:

475 
Te¡
();

478 
vœtu®
 
S‘Up
();

481 
vœtu®
 
T—rDown
();

483 
	g´iv©e
:

486 
boŞ
 
HasSameFixtu»CÏss
();

494 
vœtu®
 
Te¡Body
() = 0;

497 
Run
();

501 
D–‘eS–f_
(è{ 
d–‘e
 
	gthis
; }

503 cÚ¡ 
	g¡d
::
unique_±r
<
GTEST_FLAG_SAVER_
> 
g‹¡_æag_§v”_
;

521 
	sS‘up_should_be_¥–Ëd_S‘Up
 {};

522 
vœtu®
 
S‘up_should_be_¥–Ëd_S‘Up
* 
S‘up
(è{  
	gnuÎ±r
; }

525 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
Te¡
);

528 
	gš‹º®
::
	tTimeInMlis
 TimeInMillis;

534 şas 
	cTe¡Prİ”ty
 {

535 
	gpublic
:

539 
Te¡Prİ”ty
(cÚ¡ 
¡d
::
¡ršg
& 
a_key
, cÚ¡ std::¡ršg& 
a_v®ue
) :

540 
key_
(
a_key
), 
v®ue_
(
a_v®ue
) {

544 cÚ¡ * 
key
() const {

545  
	gkey_
.
c_¡r
();

549 cÚ¡ * 
v®ue
() const {

550  
	gv®ue_
.
c_¡r
();

554 
S‘V®ue
(cÚ¡ 
¡d
::
¡ršg
& 
Ãw_v®ue
) {

555 
v®ue_
 = 
Ãw_v®ue
;

558 
	g´iv©e
:

560 
¡d
::
¡ršg
 
key_
;

562 
	g¡d
::
¡ršg
 
v®ue_
;

571 şas 
	cGTEST_API_
 
	gTe¡ResuÉ
 {

572 
	gpublic
:

574 
Te¡ResuÉ
();

577 ~
Te¡ResuÉ
();

581 
tÙ®_·¹_couÁ
() const;

584 
‹¡_´İ”ty_couÁ
() const;

587 
boŞ
 
Pas£d
(ècÚ¡ {  !
Sk³d
(è&& !
Faed
(); }

590 
boŞ
 
Sk³d
() const;

593 
boŞ
 
Faed
() const;

596 
boŞ
 
HasF©®Fau»
() const;

599 
boŞ
 
HasNÚçlFau»
() const;

602 
TimeInMlis
 
–­£d_time
(ècÚ¡ {  
	g–­£d_time_
; }

606 
TimeInMlis
 
¡¬t_time¡amp
(ècÚ¡ {  
	g¡¬t_time¡amp_
; }

610 cÚ¡ 
	gTe¡P¬tResuÉ
& 
G‘Te¡P¬tResuÉ
(
i
) const;

615 cÚ¡ 
	gTe¡Prİ”ty
& 
G‘Te¡Prİ”ty
(
i
) const;

617 
	g´iv©e
:

618 
ä›nd
 
şass
 
Te¡Info
;

619 
ä›nd
 
şass
 
	gTe¡Su™e
;

620 
ä›nd
 
şass
 
	gUn™Te¡
;

621 
ä›nd
 
şass
 
	gš‹º®
::
DeçuÉGlob®Te¡P¬tResuÉR•Ü‹r
;

622 
ä›nd
 
şass
 
	gš‹º®
::
ExecD—thTe¡
;

623 
ä›nd
 
şass
 
	gš‹º®
::
Te¡ResuÉAcûssÜ
;

624 
ä›nd
 
şass
 
	gš‹º®
::
Un™Te¡Im¶
;

625 
ä›nd
 
şass
 
	gš‹º®
::
WšdowsD—thTe¡
;

626 
ä›nd
 
şass
 
	gš‹º®
::
FuchsŸD—thTe¡
;

629 cÚ¡ 
	g¡d
::
veùÜ
<
Te¡P¬tResuÉ
>& 
‹¡_·¹_»suÉs
() const {

630  
‹¡_·¹_»suÉs_
;

634 cÚ¡ 
	g¡d
::
veùÜ
<
Te¡Prİ”ty
>& 
‹¡_´İ”t›s
() const {

635  
‹¡_´İ”t›s_
;

639 
£t_¡¬t_time¡amp
(
TimeInMlis
 
¡¬t
è{ 
	g¡¬t_time¡amp_
 = start; }

642 
£t_–­£d_time
(
TimeInMlis
 
–­£d
è{ 
	g–­£d_time_
 =ƒlapsed; }

650 
RecÜdPrİ”ty
(cÚ¡ 
¡d
::
¡ršg
& 
xml_–em’t
,

651 cÚ¡ 
Te¡Prİ”ty
& 
‹¡_´İ”ty
);

656 
boŞ
 
V®id©eTe¡Prİ”ty
(cÚ¡ 
¡d
::
¡ršg
& 
xml_–em’t
,

657 cÚ¡ 
Te¡Prİ”ty
& 
‹¡_´İ”ty
);

660 
AddTe¡P¬tResuÉ
(cÚ¡ 
Te¡P¬tResuÉ
& 
‹¡_·¹_»suÉ
);

663 
d—th_‹¡_couÁ
(ècÚ¡ {  
	gd—th_‹¡_couÁ_
; }

666 
šüem’t_d—th_‹¡_couÁ
(è{  ++
	gd—th_‹¡_couÁ_
; }

669 
CË¬Te¡P¬tResuÉs
();

672 
CË¬
();

676 
	gš‹º®
::
Mu‹x
 
‹¡_´İ”t›s_mu‹x_
;

679 
	g¡d
::
veùÜ
<
Te¡P¬tResuÉ
> 
‹¡_·¹_»suÉs_
;

681 
	g¡d
::
veùÜ
<
Te¡Prİ”ty
> 
‹¡_´İ”t›s_
;

683 
	gd—th_‹¡_couÁ_
;

685 
TimeInMlis
 
	g¡¬t_time¡amp_
;

687 
TimeInMlis
 
	g–­£d_time_
;

690 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
Te¡ResuÉ
);

704 şas 
	cGTEST_API_
 
	gTe¡Info
 {

705 
	gpublic
:

708 ~
Te¡Info
();

711 cÚ¡ * 
‹¡_su™e_Çme
(ècÚ¡ {  
	g‹¡_su™e_Çme_
.
c_¡r
(); }

714 #iâdeà
GTEST_REMOVE_LEGACY_TEST_CASEAPI_


715 cÚ¡ * 
‹¡_ÿ£_Çme
(ècÚ¡ {  
‹¡_su™e_Çme
(); }

719 cÚ¡ * 
Çme
(ècÚ¡ {  
	gÇme_
.
c_¡r
(); }

723 cÚ¡ * 
ty³_·¿m
() const {

724 ià(
	gty³_·¿m_
.
g‘
(è!ğ
nuÎ±r
è 
ty³_·¿m_
->
c_¡r
();

725  
	gnuÎ±r
;

730 cÚ¡ * 
v®ue_·¿m
() const {

731 ià(
	gv®ue_·¿m_
.
g‘
(è!ğ
nuÎ±r
è 
v®ue_·¿m_
->
c_¡r
();

732  
	gnuÎ±r
;

736 cÚ¡ * 
fe
(ècÚ¡ {  
	gloÿtiÚ_
.
	gfe
.
c_¡r
(); }

739 
lše
(ècÚ¡ {  
	gloÿtiÚ_
.
	glše
; }

742 
boŞ
 
is_š_ªÙh”_sh¬d
(ècÚ¡ {  
	gis_š_ªÙh”_sh¬d_
; }

760 
boŞ
 
should_run
(ècÚ¡ {  
	gshould_run_
; }

763 
boŞ
 
is_»pÜbË
() const {

766  
	gm©ches_f‹r_
 && !
	gis_š_ªÙh”_sh¬d_
;

770 cÚ¡ 
Te¡ResuÉ
* 
»suÉ
(ècÚ¡ {  &
	g»suÉ_
; }

772 
	g´iv©e
:

773 #ià
GTEST_HAS_DEATH_TEST


774 
ä›nd
 
şass
 
š‹º®
::
DeçuÉD—thTe¡FaùÜy
;

776 
ä›nd
 
şass
 
	gTe¡
;

777 
ä›nd
 
şass
 
	gTe¡Su™e
;

778 
ä›nd
 
şass
 
	gš‹º®
::
Un™Te¡Im¶
;

779 
ä›nd
 
şass
 
	gš‹º®
::
SŒ—mšgLi¡’”Te¡
;

780 
ä›nd
 
Te¡Info
* 
	gš‹º®
::
MakeAndRegi¡”Te¡Info
(

781 cÚ¡ * 
‹¡_su™e_Çme
, cÚ¡ * 
Çme
, cÚ¡ * 
ty³_·¿m
,

782 cÚ¡ * 
v®ue_·¿m
, 
š‹º®
::
CodeLoÿtiÚ
 
code_loÿtiÚ
,

783 
š‹º®
::
Ty³Id
 
fixtu»_şass_id
, iÁ”Çl::
S‘UpTe¡Su™eFunc
 
£t_up_tc
,

784 
š‹º®
::
T—rDownTe¡Su™eFunc
 
‹¬_down_tc
,

785 
š‹º®
::
Te¡FaùÜyBa£
* 
çùÜy
);

789 
Te¡Info
(cÚ¡ 
¡d
::
¡ršg
& 
‹¡_su™e_Çme
, cÚ¡ std::¡ršg& 
Çme
,

790 cÚ¡ * 
a_ty³_·¿m
,

791 cÚ¡ * 
a_v®ue_·¿m
,

792 
š‹º®
::
CodeLoÿtiÚ
 
a_code_loÿtiÚ
,

793 
š‹º®
::
Ty³Id
 
fixtu»_şass_id
,

794 
š‹º®
::
Te¡FaùÜyBa£
* 
çùÜy
);

798 
šüem’t_d—th_‹¡_couÁ
() {

799  
	g»suÉ_
.
šüem’t_d—th_‹¡_couÁ
();

804 
Run
();

807 
Sk
();

809 
CË¬Te¡ResuÉ
(
Te¡Info
* 
‹¡_šfo
) {

810 
	g‹¡_šfo
->
	g»suÉ_
.
CË¬
();

814 cÚ¡ 
	g¡d
::
¡ršg
 
‹¡_su™e_Çme_
;

815 cÚ¡ 
	g¡d
::
¡ršg
 
Çme_
;

818 cÚ¡ 
	g¡d
::
unique_±r
<cÚ¡ ::
¡d
::
¡ršg
> 
ty³_·¿m_
;

821 cÚ¡ 
	g¡d
::
unique_±r
<cÚ¡ ::
¡d
::
¡ršg
> 
v®ue_·¿m_
;

822 
	gš‹º®
::
CodeLoÿtiÚ
 
loÿtiÚ_
;

823 cÚ¡ 
	gš‹º®
::
Ty³Id
 
fixtu»_şass_id_
;

824 
boŞ
 
	gshould_run_
;

825 
boŞ
 
	gis_di§bËd_
;

826 
boŞ
 
	gm©ches_f‹r_
;

828 
boŞ
 
	gis_š_ªÙh”_sh¬d_
;

829 
	gš‹º®
::
Te¡FaùÜyBa£
* cÚ¡ 
çùÜy_
;

834 
Te¡ResuÉ
 
	g»suÉ_
;

836 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
Te¡Info
);

842 şas 
	cGTEST_API_
 
	gTe¡Su™e
 {

843 
	gpublic
:

856 
Te¡Su™e
(cÚ¡ * 
Çme
, cÚ¡ * 
a_ty³_·¿m
,

857 
š‹º®
::
S‘UpTe¡Su™eFunc
 
£t_up_tc
,

858 
š‹º®
::
T—rDownTe¡Su™eFunc
 
‹¬_down_tc
);

861 
	gvœtu®
 ~
Te¡Su™e
();

864 cÚ¡ * 
Çme
(ècÚ¡ {  
	gÇme_
.
c_¡r
(); }

868 cÚ¡ * 
ty³_·¿m
() const {

869 ià(
	gty³_·¿m_
.
g‘
(è!ğ
nuÎ±r
è 
ty³_·¿m_
->
c_¡r
();

870  
	gnuÎ±r
;

874 
boŞ
 
should_run
(ècÚ¡ {  
	gshould_run_
; }

877 
sucûssful_‹¡_couÁ
() const;

880 
sk³d_‹¡_couÁ
() const;

883 
çed_‹¡_couÁ
() const;

886 
»pÜbË_di§bËd_‹¡_couÁ
() const;

889 
di§bËd_‹¡_couÁ
() const;

892 
»pÜbË_‹¡_couÁ
() const;

895 
‹¡_to_run_couÁ
() const;

898 
tÙ®_‹¡_couÁ
() const;

901 
boŞ
 
Pas£d
(ècÚ¡ {  !
Faed
(); }

904 
boŞ
 
Faed
() const {

905  
çed_‹¡_couÁ
(è> 0 || 
ad_hoc_‹¡_»suÉ
().
Faed
();

909 
TimeInMlis
 
–­£d_time
(ècÚ¡ {  
	g–­£d_time_
; }

913 
TimeInMlis
 
¡¬t_time¡amp
(ècÚ¡ {  
	g¡¬t_time¡amp_
; }

917 cÚ¡ 
Te¡Info
* 
G‘Te¡Info
(
i
) const;

921 cÚ¡ 
	gTe¡ResuÉ
& 
ad_hoc_‹¡_»suÉ
(ècÚ¡ {  
	gad_hoc_‹¡_»suÉ_
; }

923 
	g´iv©e
:

924 
ä›nd
 
şass
 
Te¡
;

925 
ä›nd
 
şass
 
	gš‹º®
::
Un™Te¡Im¶
;

928 
	g¡d
::
veùÜ
<
Te¡Info
*>& 
‹¡_šfo_li¡
(è{  
‹¡_šfo_li¡_
; }

931 cÚ¡ 
	g¡d
::
veùÜ
<
Te¡Info
*>& 
‹¡_šfo_li¡
() const {

932  
‹¡_šfo_li¡_
;

937 
Te¡Info
* 
G‘MubËTe¡Info
(
i
);

940 
£t_should_run
(
boŞ
 
should
è{ 
	gshould_run_
 = should; }

944 
AddTe¡Info
(
Te¡Info
 * 
‹¡_šfo
);

947 
CË¬ResuÉ
();

950 
CË¬Te¡Su™eResuÉ
(
Te¡Su™e
* 
‹¡_su™e
) {

951 
	g‹¡_su™e
->
CË¬ResuÉ
();

955 
Run
();

958 
Sk
();

962 
RunS‘UpTe¡Su™e
() {

963 ià(
	g£t_up_tc_
 !ğ
nuÎ±r
) {

964 (*
£t_up_tc_
)();

970 
RunT—rDownTe¡Su™e
() {

971 ià(
	g‹¬_down_tc_
 !ğ
nuÎ±r
) {

972 (*
‹¬_down_tc_
)();

977 
boŞ
 
Te¡Pas£d
(cÚ¡ 
Te¡Info
* 
‹¡_šfo
) {

978  
	g‹¡_šfo
->
should_run
(è&&e¡_šfo->
»suÉ
()->
Pas£d
();

982 
boŞ
 
Te¡Sk³d
(cÚ¡ 
Te¡Info
* 
‹¡_šfo
) {

983  
	g‹¡_šfo
->
should_run
(è&&e¡_šfo->
»suÉ
()->
Sk³d
();

987 
boŞ
 
Te¡Faed
(cÚ¡ 
Te¡Info
* 
‹¡_šfo
) {

988  
	g‹¡_šfo
->
should_run
(è&&e¡_šfo->
»suÉ
()->
Faed
();

993 
boŞ
 
Te¡R•ÜbËDi§bËd
(cÚ¡ 
Te¡Info
* 
‹¡_šfo
) {

994  
	g‹¡_šfo
->
is_»pÜbË
(è&&e¡_šfo->
	gis_di§bËd_
;

998 
boŞ
 
Te¡Di§bËd
(cÚ¡ 
Te¡Info
* 
‹¡_šfo
) {

999  
	g‹¡_šfo
->
	gis_di§bËd_
;

1003 
boŞ
 
Te¡R•ÜbË
(cÚ¡ 
Te¡Info
* 
‹¡_šfo
) {

1004  
	g‹¡_šfo
->
is_»pÜbË
();

1008 
boŞ
 
ShouldRunTe¡
(cÚ¡ 
Te¡Info
* 
‹¡_šfo
) {

1009  
	g‹¡_šfo
->
should_run
();

1013 
ShufæeTe¡s
(
š‹º®
::
Rªdom
* 
¿ndom
);

1016 
UnshufæeTe¡s
();

1019 
	g¡d
::
¡ršg
 
Çme_
;

1022 cÚ¡ 
	g¡d
::
unique_±r
<cÚ¡ ::
¡d
::
¡ršg
> 
ty³_·¿m_
;

1025 
	g¡d
::
veùÜ
<
Te¡Info
*> 
‹¡_šfo_li¡_
;

1029 
	g¡d
::
veùÜ
<> 
‹¡_šdiûs_
;

1031 
	gš‹º®
::
S‘UpTe¡Su™eFunc
 
£t_up_tc_
;

1033 
	gš‹º®
::
T—rDownTe¡Su™eFunc
 
‹¬_down_tc_
;

1035 
boŞ
 
	gshould_run_
;

1037 
TimeInMlis
 
	g¡¬t_time¡amp_
;

1039 
TimeInMlis
 
	g–­£d_time_
;

1042 
Te¡ResuÉ
 
	gad_hoc_‹¡_»suÉ_
;

1045 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
Te¡Su™e
);

1062 şas 
	cEnvœÚm’t
 {

1063 
	gpublic
:

1065 
vœtu®
 ~
EnvœÚm’t
() {}

1068 
vœtu®
 
S‘Up
() {}

1071 
vœtu®
 
T—rDown
() {}

1072 
´iv©e
:

1075 
	sS‘up_should_be_¥–Ëd_S‘Up
 {};

1076 
vœtu®
 
S‘up_should_be_¥–Ëd_S‘Up
* 
S‘up
(è{  
	gnuÎ±r
; }

1079 #ià
GTEST_HAS_EXCEPTIONS


1082 şas 
	cGTEST_API_
 
	gAs£¹iÚExû±iÚ


1083 : 
public
 
š‹º®
::
GoogËTe¡Fau»Exû±iÚ
 {

1084 
public
:

1085 
ex¶ic™
 
As£¹iÚExû±iÚ
(cÚ¡ 
Te¡P¬tResuÉ
& 
»suÉ
)

1086 : 
GoogËTe¡Fau»Exû±iÚ
(
»suÉ
) {}

1093 şas 
	cTe¡Ev’tLi¡’”
 {

1094 
	gpublic
:

1095 
vœtu®
 ~
Te¡Ev’tLi¡’”
() {}

1098 
vœtu®
 
OnTe¡Prog¿mS¹
(cÚ¡ 
Un™Te¡
& 
un™_‹¡
) = 0;

1103 
vœtu®
 
OnTe¡I‹¿tiÚS¹
(cÚ¡ 
Un™Te¡
& 
un™_‹¡
,

1104 
™”©iÚ
) = 0;

1107 
vœtu®
 
OnEnvœÚm’tsS‘UpS¹
(cÚ¡ 
Un™Te¡
& 
un™_‹¡
) = 0;

1110 
vœtu®
 
OnEnvœÚm’tsS‘UpEnd
(cÚ¡ 
Un™Te¡
& 
un™_‹¡
) = 0;

1113 
vœtu®
 
OnTe¡Su™eS¹
(cÚ¡ 
Te¡Su™e
& ) {}

1116 #iâdeà
GTEST_REMOVE_LEGACY_TEST_CASEAPI_


1117 
vœtu®
 
OnTe¡Ca£S¹
(cÚ¡ 
Te¡Ca£
& ) {}

1121 
vœtu®
 
OnTe¡S¹
(cÚ¡ 
Te¡Info
& 
‹¡_šfo
) = 0;

1126 
vœtu®
 
OnTe¡P¬tResuÉ
(cÚ¡ 
Te¡P¬tResuÉ
& 
‹¡_·¹_»suÉ
) = 0;

1129 
vœtu®
 
OnTe¡End
(cÚ¡ 
Te¡Info
& 
‹¡_šfo
) = 0;

1132 
vœtu®
 
OnTe¡Su™eEnd
(cÚ¡ 
Te¡Su™e
& ) {}

1135 #iâdeà
GTEST_REMOVE_LEGACY_TEST_CASEAPI_


1136 
vœtu®
 
OnTe¡Ca£End
(cÚ¡ 
Te¡Ca£
& ) {}

1140 
vœtu®
 
OnEnvœÚm’tsT—rDownS¹
(cÚ¡ 
Un™Te¡
& 
un™_‹¡
) = 0;

1143 
vœtu®
 
OnEnvœÚm’tsT—rDownEnd
(cÚ¡ 
Un™Te¡
& 
un™_‹¡
) = 0;

1146 
vœtu®
 
OnTe¡I‹¿tiÚEnd
(cÚ¡ 
Un™Te¡
& 
un™_‹¡
,

1147 
™”©iÚ
) = 0;

1150 
vœtu®
 
OnTe¡Prog¿mEnd
(cÚ¡ 
Un™Te¡
& 
un™_‹¡
) = 0;

1158 şas 
	cEm±yTe¡Ev’tLi¡’”
 : 
public
 
Te¡Ev’tLi¡’”
 {

1159 
public
:

1160 
OnTe¡Prog¿mS¹
(cÚ¡ 
Un™Te¡
& ) 
ov”ride
 {}

1161 
OnTe¡I‹¿tiÚS¹
(cÚ¡ 
Un™Te¡
& ,

1162 è
	gov”ride
 {}

1163 
OnEnvœÚm’tsS‘UpS¹
(cÚ¡ 
Un™Te¡
& ) 
	gov”ride
 {}

1164 
OnEnvœÚm’tsS‘UpEnd
(cÚ¡ 
Un™Te¡
& ) 
	gov”ride
 {}

1165 
OnTe¡Su™eS¹
(cÚ¡ 
Te¡Su™e
& ) 
	gov”ride
 {}

1167 #iâdeà
GTEST_REMOVE_LEGACY_TEST_CASEAPI_


1168 
OnTe¡Ca£S¹
(cÚ¡ 
Te¡Ca£
& ) 
	gov”ride
 {}

1171 
OnTe¡S¹
(cÚ¡ 
Te¡Info
& ) 
	gov”ride
 {}

1172 
OnTe¡P¬tResuÉ
(cÚ¡ 
Te¡P¬tResuÉ
& ) 
	gov”ride
 {}

1173 
OnTe¡End
(cÚ¡ 
Te¡Info
& ) 
	gov”ride
 {}

1174 
OnTe¡Su™eEnd
(cÚ¡ 
Te¡Su™e
& ) 
	gov”ride
 {}

1175 #iâdeà
GTEST_REMOVE_LEGACY_TEST_CASEAPI_


1176 
OnTe¡Ca£End
(cÚ¡ 
Te¡Ca£
& ) 
	gov”ride
 {}

1179 
OnEnvœÚm’tsT—rDownS¹
(cÚ¡ 
Un™Te¡
& ) 
	gov”ride
 {}

1180 
OnEnvœÚm’tsT—rDownEnd
(cÚ¡ 
Un™Te¡
& ) 
	gov”ride
 {}

1181 
OnTe¡I‹¿tiÚEnd
(cÚ¡ 
Un™Te¡
& ,

1182 è
	gov”ride
 {}

1183 
OnTe¡Prog¿mEnd
(cÚ¡ 
Un™Te¡
& ) 
	gov”ride
 {}

1187 şas 
	cGTEST_API_
 
	gTe¡Ev’tLi¡’”s
 {

1188 
	gpublic
:

1189 
Te¡Ev’tLi¡’”s
();

1190 ~
Te¡Ev’tLi¡’”s
();

1195 
Aµ’d
(
Te¡Ev’tLi¡’”
* 
li¡’”
);

1200 
Te¡Ev’tLi¡’”
* 
R–—£
(Te¡Ev’tLi¡’”* 
li¡’”
);

1207 
Te¡Ev’tLi¡’”
* 
deçuÉ_»suÉ_´š‹r
() const {

1208  
	gdeçuÉ_»suÉ_´š‹r_
;

1218 
Te¡Ev’tLi¡’”
* 
deçuÉ_xml_g’”©Ü
() const {

1219  
	gdeçuÉ_xml_g’”©Ü_
;

1222 
	g´iv©e
:

1223 
ä›nd
 
şass
 
Te¡Su™e
;

1224 
ä›nd
 
şass
 
	gTe¡Info
;

1225 
ä›nd
 
şass
 
	gš‹º®
::
DeçuÉGlob®Te¡P¬tResuÉR•Ü‹r
;

1226 
ä›nd
 
şass
 
	gš‹º®
::
NoExecD—thTe¡
;

1227 
ä›nd
 
şass
 
	gš‹º®
::
Te¡Ev’tLi¡’”sAcûssÜ
;

1228 
ä›nd
 
şass
 
	gš‹º®
::
Un™Te¡Im¶
;

1232 
Te¡Ev’tLi¡’”
* 
»³©”
();

1239 
S‘DeçuÉResuÉPrš‹r
(
Te¡Ev’tLi¡’”
* 
li¡’”
);

1246 
S‘DeçuÉXmlG’”©Ü
(
Te¡Ev’tLi¡’”
* 
li¡’”
);

1250 
boŞ
 
Ev’tFÜw¬dšgEÇbËd
() const;

1251 
Suµ»ssEv’tFÜw¬dšg
();

1254 
	gš‹º®
::
Te¡Ev’tR•—‹r
* 
»³©”_
;

1256 
Te¡Ev’tLi¡’”
* 
	gdeçuÉ_»suÉ_´š‹r_
;

1258 
Te¡Ev’tLi¡’”
* 
	gdeçuÉ_xml_g’”©Ü_
;

1261 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
Te¡Ev’tLi¡’”s
);

1274 şas 
	cGTEST_API_
 
	gUn™Te¡
 {

1275 
	gpublic
:

1279 
Un™Te¡
* 
G‘In¡ªû
();

1287 
Run
(è
	gGTEST_MUST_USE_RESULT_
;

1291 cÚ¡ * 
Üigš®_wÜkšg_dœ
() const;

1295 cÚ¡ 
Te¡Su™e
* 
cu¼’t_‹¡_su™e
(ècÚ¡ 
GTEST_LOCK_EXCLUDED_
(
mu‹x_
);

1298 #iâdeà
GTEST_REMOVE_LEGACY_TEST_CASEAPI_


1299 cÚ¡ 
Te¡Ca£
* 
cu¼’t_‹¡_ÿ£
(ècÚ¡ 
GTEST_LOCK_EXCLUDED_
(
mu‹x_
);

1304 cÚ¡ 
Te¡Info
* 
cu¼’t_‹¡_šfo
() const

1305 
GTEST_LOCK_EXCLUDED_
(
mu‹x_
);

1308 
¿ndom_£ed
() const;

1314 
	gš‹º®
::
P¬am‘”izedTe¡Su™eRegi¡ry
& 
·¿m‘”ized_‹¡_»gi¡ry
()

1315 
GTEST_LOCK_EXCLUDED_
(
mu‹x_
);

1318 
sucûssful_‹¡_su™e_couÁ
() const;

1321 
çed_‹¡_su™e_couÁ
() const;

1324 
tÙ®_‹¡_su™e_couÁ
() const;

1328 
‹¡_su™e_to_run_couÁ
() const;

1331 #iâdeà
GTEST_REMOVE_LEGACY_TEST_CASEAPI_


1332 
sucûssful_‹¡_ÿ£_couÁ
() const;

1333 
çed_‹¡_ÿ£_couÁ
() const;

1334 
tÙ®_‹¡_ÿ£_couÁ
() const;

1335 
‹¡_ÿ£_to_run_couÁ
() const;

1339 
sucûssful_‹¡_couÁ
() const;

1342 
sk³d_‹¡_couÁ
() const;

1345 
çed_‹¡_couÁ
() const;

1348 
»pÜbË_di§bËd_‹¡_couÁ
() const;

1351 
di§bËd_‹¡_couÁ
() const;

1354 
»pÜbË_‹¡_couÁ
() const;

1357 
tÙ®_‹¡_couÁ
() const;

1360 
‹¡_to_run_couÁ
() const;

1364 
TimeInMlis
 
¡¬t_time¡amp
() const;

1367 
TimeInMlis
 
–­£d_time
() const;

1371 
boŞ
 
Pas£d
() const;

1375 
boŞ
 
Faed
() const;

1379 cÚ¡ 
Te¡Su™e
* 
G‘Te¡Su™e
(
i
) const;

1382 #iâdeà
GTEST_REMOVE_LEGACY_TEST_CASEAPI_


1383 cÚ¡ 
Te¡Ca£
* 
G‘Te¡Ca£
(
i
) const;

1388 cÚ¡ 
	gTe¡ResuÉ
& 
ad_hoc_‹¡_»suÉ
() const;

1392 
	gTe¡Ev’tLi¡’”s
& 
li¡’”s
();

1394 
	g´iv©e
:

1404 
EnvœÚm’t
* 
AddEnvœÚm’t
(EnvœÚm’t* 
’v
);

1410 
AddTe¡P¬tResuÉ
(
Te¡P¬tResuÉ
::
Ty³
 
»suÉ_ty³
,

1411 cÚ¡ * 
fe_Çme
,

1412 
lše_numb”
,

1413 cÚ¡ 
¡d
::
¡ršg
& 
mes§ge
,

1414 cÚ¡ 
¡d
::
¡ršg
& 
os_¡ack_Œaû
)

1415 
GTEST_LOCK_EXCLUDED_
(
mu‹x_
);

1422 
RecÜdPrİ”ty
(cÚ¡ 
¡d
::
¡ršg
& 
key
, cÚ¡ std::¡ršg& 
v®ue
);

1426 
Te¡Su™e
* 
G‘MubËTe¡Su™e
(
i
);

1429 
	gš‹º®
::
Un™Te¡Im¶
* 
im¶
(è{  
im¶_
; }

1430 cÚ¡ 
	gš‹º®
::
Un™Te¡Im¶
* 
im¶
(ècÚ¡ {  
im¶_
; }

1434 
ä›nd
 
şass
 
	gScİedT¿û
;

1435 
ä›nd
 
şass
 
	gTe¡
;

1436 
ä›nd
 
şass
 
	gš‹º®
::
As£¹H–³r
;

1437 
ä›nd
 
şass
 
	gš‹º®
::
SŒ—mšgLi¡’”Te¡
;

1438 
ä›nd
 
şass
 
	gš‹º®
::
Un™Te¡RecÜdPrİ”tyTe¡H–³r
;

1439 
ä›nd
 
EnvœÚm’t
* 
AddGlob®Te¡EnvœÚm’t
(EnvœÚm’t* 
’v
);

1440 
ä›nd
 
	g¡d
::
£t
<
¡d
::
¡ršg
>* 
š‹º®
::
G‘IgnÜedP¬am‘”izedTe¡Su™es
();

1441 
ä›nd
 
	gš‹º®
::
Un™Te¡Im¶
* 
š‹º®
::
G‘Un™Te¡Im¶
();

1442 
ä›nd
 
	gš‹º®
::
R•ÜtFau»InUnknownLoÿtiÚ
(

1443 
Te¡P¬tResuÉ
::
Ty³
 
»suÉ_ty³
,

1444 cÚ¡ 
¡d
::
¡ršg
& 
mes§ge
);

1447 
Un™Te¡
();

1450 
	gvœtu®
 ~
Un™Te¡
();

1454 
PushGTe¡T¿û
(cÚ¡ 
š‹º®
::
T¿ûInfo
& 
Œaû
)

1455 
GTEST_LOCK_EXCLUDED_
(
mu‹x_
);

1458 
PİGTe¡T¿û
()

1459 
GTEST_LOCK_EXCLUDED_
(
mu‹x_
);

1463 
mubË
 
	gš‹º®
::
Mu‹x
 
mu‹x_
;

1469 
	gš‹º®
::
Un™Te¡Im¶
* 
im¶_
;

1472 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
Un™Te¡
);

1493 
šlše
 
EnvœÚm’t
* 
	$AddGlob®Te¡EnvœÚm’t
(
EnvœÚm’t
* 
’v
) {

1494  
Un™Te¡
::
	`G‘In¡ªû
()->
	`AddEnvœÚm’t
(
’v
);

1495 
	}
}

1506 
GTEST_API_
 
In™GoogËTe¡
(* 
¬gc
, ** 
¬gv
);

1510 
GTEST_API_
 
In™GoogËTe¡
(* 
¬gc
, 
wch¬_t
** 
¬gv
);

1514 
GTEST_API_
 
In™GoogËTe¡
();

1516 
Çme¥aû
 
	gš‹º®
 {

1521 
	g‹m¶©e
 <
ty³Çme
 
	gT1
,y³Çm
	gT2
>

1522 
As£¹iÚResuÉ
 
CmpH–³rEQFau»
(cÚ¡ * 
lhs_ex´essiÚ
,

1523 cÚ¡ * 
rhs_ex´essiÚ
,

1524 cÚ¡ 
T1
& 
lhs
, cÚ¡ 
T2
& 
rhs
) {

1525  
EqFau»
(
lhs_ex´essiÚ
,

1526 
rhs_ex´essiÚ
,

1527 
FÜm©FÜCom·risÚFau»Mes§ge
(
lhs
, 
rhs
),

1528 
FÜm©FÜCom·risÚFau»Mes§ge
(
rhs
, 
lhs
),

1529 
çl£
);

1535 
	sçk‘y³
 {};

1536 
šlše
 
boŞ
 
	gİ”©Ü
==(
çk‘y³
, 
	gçk‘y³
è{  
	gŒue
; }

1537 
šlše
 
boŞ
 
	gİ”©Ü
!=(
çk‘y³
, 
	gçk‘y³
è{  
	gçl£
; }

1540 
	g‹m¶©e
 <
ty³Çme
 
	gT1
,y³Çm
	gT2
>

1541 
As£¹iÚResuÉ
 
CmpH–³rEQ
(cÚ¡ * 
lhs_ex´essiÚ
,

1542 cÚ¡ * 
rhs_ex´essiÚ
,

1543 cÚ¡ 
T1
& 
lhs
,

1544 cÚ¡ 
T2
& 
rhs
) {

1545 ià(
	glhs
 =ğ
rhs
) {

1546  
As£¹iÚSucûss
();

1549  
CmpH–³rEQFau»
(
lhs_ex´essiÚ
, 
rhs_ex´essiÚ
, 
lhs
, 
rhs
);

1552 şas 
	cEqH–³r
 {

1553 
	gpublic
:

1555 
‹m¶©e
 <

1556 
ty³Çme
 
T1
,y³Çm
	gT2
,

1559 
ty³Çme
 
	g¡d
::
’abË_if
<!
¡d
::
is_š‹g¿l
<
T1
>::
v®ue
 ||

1560 !
¡d
::
is_poš‹r
<
T2
>::
v®ue
>::
ty³
* = 
nuÎ±r
>

1561 
As£¹iÚResuÉ
 
Com·»
(cÚ¡ * 
lhs_ex´essiÚ
,

1562 cÚ¡ * 
rhs_ex´essiÚ
, cÚ¡ 
T1
& 
lhs
,

1563 cÚ¡ 
T2
& 
rhs
) {

1564  
CmpH–³rEQ
(
lhs_ex´essiÚ
, 
rhs_ex´essiÚ
, 
lhs
, 
rhs
);

1573 
As£¹iÚResuÉ
 
Com·»
(cÚ¡ * 
lhs_ex´essiÚ
,

1574 cÚ¡ * 
rhs_ex´essiÚ
,

1575 
Bigge¡IÁ
 
lhs
,

1576 
Bigge¡IÁ
 
rhs
) {

1577  
CmpH–³rEQ
(
lhs_ex´essiÚ
, 
rhs_ex´essiÚ
, 
lhs
, 
rhs
);

1580 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

1581 
As£¹iÚResuÉ
 
Com·»
(

1582 cÚ¡ * 
lhs_ex´essiÚ
, cÚ¡ * 
rhs_ex´essiÚ
,

1584 
¡d
::
nuÎ±r_t
 , 
T
* 
rhs
) {

1586  
CmpH–³rEQ
(
lhs_ex´essiÚ
, 
rhs_ex´essiÚ
, 
¡©ic_ÿ¡
<
T
*>(
nuÎ±r
),

1587 
rhs
);

1594 
	g‹m¶©e
 <
ty³Çme
 
	gT1
,y³Çm
	gT2
>

1595 
As£¹iÚResuÉ
 
CmpH–³rOpFau»
(cÚ¡ * 
ex´1
, cÚ¡ * 
ex´2
,

1596 cÚ¡ 
T1
& 
v®1
, cÚ¡ 
T2
& 
v®2
,

1597 cÚ¡ * 
İ
) {

1598  
As£¹iÚFau»
()

1599 << "Ex³ùed: (" << 
	gex´1
 << "è" << 
	gİ
 << " (" << 
	gex´2


1600 << "),‡ùu®: " << 
FÜm©FÜCom·risÚFau»Mes§ge
(
v®1
, 
v®2
)

1601 << " v " << 
FÜm©FÜCom·risÚFau»Mes§ge
(
v®2
, 
v®1
);

1610 
	#GTEST_IMPL_CMP_HELPER_
(
İ_Çme
, 
İ
)\

1611 
‹m¶©e
 <
ty³Çme
 
T1
,y³Çm
T2
>\

1612 
As£¹iÚResuÉ
 
CmpH–³r
##
	`İ_Çme
(cÚ¡ * 
ex´1
, cÚ¡ * 
ex´2
, \

1613 cÚ¡ 
T1
& 
v®1
, cÚ¡ 
T2
& 
v®2
) {\

1614 ià(
v®1
 
İ
 
v®2
) {\

1615  
	`As£¹iÚSucûss
();\

1617  
	`CmpH–³rOpFau»
(
ex´1
, 
ex´2
, 
v®1
, 
v®2
, #op);\

1619 }

	)

1624 
GTEST_IMPL_CMP_HELPER_
(
NE
, !=)

1626 
GTEST_IMPL_CMP_HELPER_
(
LE
, <=)

1628 
GTEST_IMPL_CMP_HELPER_
(
LT
, <)

1630 
GTEST_IMPL_CMP_HELPER_
(
GE
, >=)

1632 
GTEST_IMPL_CMP_HELPER_
(
GT
, >)

1634 #undeà
GTEST_IMPL_CMP_HELPER_


1639 
GTEST_API_
 
As£¹iÚResuÉ
 
CmpH–³rSTREQ
(cÚ¡ * 
s1_ex´essiÚ
,

1640 cÚ¡ * 
s2_ex´essiÚ
,

1641 cÚ¡ * 
s1
,

1642 cÚ¡ * 
s2
);

1647 
GTEST_API_
 
As£¹iÚResuÉ
 
CmpH–³rSTRCASEEQ
(cÚ¡ * 
s1_ex´essiÚ
,

1648 cÚ¡ * 
s2_ex´essiÚ
,

1649 cÚ¡ * 
s1
,

1650 cÚ¡ * 
s2
);

1655 
GTEST_API_
 
As£¹iÚResuÉ
 
CmpH–³rSTRNE
(cÚ¡ * 
s1_ex´essiÚ
,

1656 cÚ¡ * 
s2_ex´essiÚ
,

1657 cÚ¡ * 
s1
,

1658 cÚ¡ * 
s2
);

1663 
GTEST_API_
 
As£¹iÚResuÉ
 
CmpH–³rSTRCASENE
(cÚ¡ * 
s1_ex´essiÚ
,

1664 cÚ¡ * 
s2_ex´essiÚ
,

1665 cÚ¡ * 
s1
,

1666 cÚ¡ * 
s2
);

1672 
GTEST_API_
 
As£¹iÚResuÉ
 
CmpH–³rSTREQ
(cÚ¡ * 
s1_ex´essiÚ
,

1673 cÚ¡ * 
s2_ex´essiÚ
,

1674 cÚ¡ 
wch¬_t
* 
s1
,

1675 cÚ¡ 
wch¬_t
* 
s2
);

1680 
GTEST_API_
 
As£¹iÚResuÉ
 
CmpH–³rSTRNE
(cÚ¡ * 
s1_ex´essiÚ
,

1681 cÚ¡ * 
s2_ex´essiÚ
,

1682 cÚ¡ 
wch¬_t
* 
s1
,

1683 cÚ¡ 
wch¬_t
* 
s2
);

1695 
GTEST_API_
 
As£¹iÚResuÉ
 
IsSub¡ršg
(

1696 cÚ¡ * 
ÃedË_ex´
, cÚ¡ * 
hay¡ack_ex´
,

1697 cÚ¡ * 
ÃedË
, cÚ¡ * 
hay¡ack
);

1698 
GTEST_API_
 
As£¹iÚResuÉ
 
IsSub¡ršg
(

1699 cÚ¡ * 
ÃedË_ex´
, cÚ¡ * 
hay¡ack_ex´
,

1700 cÚ¡ 
wch¬_t
* 
ÃedË
, cÚ¡ wch¬_t* 
hay¡ack
);

1701 
GTEST_API_
 
As£¹iÚResuÉ
 
IsNÙSub¡ršg
(

1702 cÚ¡ * 
ÃedË_ex´
, cÚ¡ * 
hay¡ack_ex´
,

1703 cÚ¡ * 
ÃedË
, cÚ¡ * 
hay¡ack
);

1704 
GTEST_API_
 
As£¹iÚResuÉ
 
IsNÙSub¡ršg
(

1705 cÚ¡ * 
ÃedË_ex´
, cÚ¡ * 
hay¡ack_ex´
,

1706 cÚ¡ 
wch¬_t
* 
ÃedË
, cÚ¡ wch¬_t* 
hay¡ack
);

1707 
GTEST_API_
 
As£¹iÚResuÉ
 
IsSub¡ršg
(

1708 cÚ¡ * 
ÃedË_ex´
, cÚ¡ * 
hay¡ack_ex´
,

1709 cÚ¡ ::
¡d
::
¡ršg
& 
ÃedË
, cÚ¡ ::¡d::¡ršg& 
hay¡ack
);

1710 
GTEST_API_
 
As£¹iÚResuÉ
 
IsNÙSub¡ršg
(

1711 cÚ¡ * 
ÃedË_ex´
, cÚ¡ * 
hay¡ack_ex´
,

1712 cÚ¡ ::
¡d
::
¡ršg
& 
ÃedË
, cÚ¡ ::¡d::¡ršg& 
hay¡ack
);

1714 #ià
GTEST_HAS_STD_WSTRING


1715 
GTEST_API_
 
As£¹iÚResuÉ
 
IsSub¡ršg
(

1716 cÚ¡ * 
ÃedË_ex´
, cÚ¡ * 
hay¡ack_ex´
,

1717 cÚ¡ ::
¡d
::
w¡ršg
& 
ÃedË
, cÚ¡ ::¡d::w¡ršg& 
hay¡ack
);

1718 
GTEST_API_
 
As£¹iÚResuÉ
 
IsNÙSub¡ršg
(

1719 cÚ¡ * 
ÃedË_ex´
, cÚ¡ * 
hay¡ack_ex´
,

1720 cÚ¡ ::
¡d
::
w¡ršg
& 
ÃedË
, cÚ¡ ::¡d::w¡ršg& 
hay¡ack
);

1723 
Çme¥aû
 
	gš‹º®
 {

1732 
	g‹m¶©e
 <
ty³Çme
 
	gRawTy³
>

1733 
As£¹iÚResuÉ
 
CmpH–³rFlßtšgPoštEQ
(cÚ¡ * 
lhs_ex´essiÚ
,

1734 cÚ¡ * 
rhs_ex´essiÚ
,

1735 
RawTy³
 
lhs_v®ue
,

1736 
RawTy³
 
rhs_v®ue
) {

1737 cÚ¡ 
	gFlßtšgPošt
<
	gRawTy³
> 
lhs
(
lhs_v®ue
), 
rhs
(
rhs_v®ue
);

1739 ià(
	glhs
.
Almo¡Equ®s
(
rhs
)) {

1740  
As£¹iÚSucûss
();

1743 ::
¡d
::
¡ršg¡»am
 
lhs_ss
;

1744 
	glhs_ss
 << 
	g¡d
::
£»cisiÚ
(
¡d
::
num”ic_lim™s
<
RawTy³
>::
dig™s10
 + 2)

1745 << 
lhs_v®ue
;

1747 ::
¡d
::
¡ršg¡»am
 
rhs_ss
;

1748 
	grhs_ss
 << 
	g¡d
::
£»cisiÚ
(
¡d
::
num”ic_lim™s
<
RawTy³
>::
dig™s10
 + 2)

1749 << 
rhs_v®ue
;

1751  
EqFau»
(
lhs_ex´essiÚ
,

1752 
rhs_ex´essiÚ
,

1753 
SŒšgSŒ—mToSŒšg
(&
lhs_ss
),

1754 
SŒšgSŒ—mToSŒšg
(&
rhs_ss
),

1755 
çl£
);

1761 
GTEST_API_
 
As£¹iÚResuÉ
 
DoubËN—rP»dFÜm©
(cÚ¡ * 
ex´1
,

1762 cÚ¡ * 
ex´2
,

1763 cÚ¡ * 
abs_”rÜ_ex´
,

1764 
v®1
,

1765 
v®2
,

1766 
abs_”rÜ
);

1770 şas 
	cGTEST_API_
 
	gAs£¹H–³r
 {

1771 
	gpublic
:

1773 
As£¹H–³r
(
Te¡P¬tResuÉ
::
Ty³
 
ty³
,

1774 cÚ¡ * 
fe
,

1775 
lše
,

1776 cÚ¡ * 
mes§ge
);

1777 ~
As£¹H–³r
();

1781 
	gİ”©Ü
=(cÚ¡ 
Mes§ge
& 
mes§ge
) const;

1783 
	g´iv©e
:

1788 
	sAs£¹H–³rD©a
 {

1789 
As£¹H–³rD©a
(
Te¡P¬tResuÉ
::
Ty³
 
t
,

1790 cÚ¡ * 
¤cfe
,

1791 
lše_num
,

1792 cÚ¡ * 
msg
)

1793 : 
ty³
(
t
), 
fe
(
¤cfe
), 
lše
(
lše_num
), 
mes§ge
(
msg
) { }

1795 
	gTe¡P¬tResuÉ
::
Ty³
 cÚ¡ 
ty³
;

1796 cÚ¡ * cÚ¡ 
	gfe
;

1797 cÚ¡ 
	glše
;

1798 
	g¡d
::
¡ršg
 cÚ¡ 
mes§ge
;

1800 
	g´iv©e
:

1801 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
As£¹H–³rD©a
);

1804 
As£¹H–³rD©a
* cÚ¡ 
	gd©a_
;

1806 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
As£¹H–³r
);

1845 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

1846 şas 
	cW™hP¬amIÁ”çû
 {

1847 
	gpublic
:

1848 
T
 
	tP¬amTy³
;

1849 
	gvœtu®
 ~
W™hP¬amIÁ”çû
() {}

1853 cÚ¡ 
	gP¬amTy³
& 
G‘P¬am
() {

1854 
GTEST_CHECK_
(
·¿m‘”_
 !ğ
nuÎ±r
)

1857  *
	g·¿m‘”_
;

1860 
	g´iv©e
:

1863 
S‘P¬am
(cÚ¡ 
P¬amTy³
* 
·¿m‘”
) {

1864 
·¿m‘”_
 = 
·¿m‘”
;

1868 cÚ¡ 
P¬amTy³
* 
	g·¿m‘”_
;

1871 
	g‹m¶©e
 <
şass
 
	gTe¡CÏss
> 
ä›nd
 cÏs 
	gš‹º®
::
P¬am‘”izedTe¡FaùÜy
;

1874 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

1875 cÚ¡ 
T
* 
	gW™hP¬amIÁ”çû
<
	gT
>::
·¿m‘”_
 = 
nuÎ±r
;

1880 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

1881 
şass
 
	gTe¡W™hP¬am
 : 
public
 
Te¡
,…ubliø
	gW™hP¬amIÁ”çû
<
	gT
> {

1889 
	#GTEST_SKIP
(è
	`GTEST_SKIP_
("")

	)

1909 
	#ADD_FAILURE
(è
	`GTEST_NONFATAL_FAILURE_
("Faed")

	)

1913 
	#ADD_FAILURE_AT
(
fe
, 
lše
) \

1914 
	`GTEST_MESSAGE_AT_
(
fe
, 
lše
, "Failed", \

1915 ::
‹¡šg
::
Te¡P¬tResuÉ
::
kNÚF©®Fau»
)

	)

1918 
	#GTEST_FAIL
(è
	`GTEST_FATAL_FAILURE_
("Faed")

	)

1921 
	#GTEST_FAIL_AT
(
fe
, 
lše
) \

1922 
	`GTEST_MESSAGE_AT_
(
fe
, 
lše
, "Failed", \

1923 ::
‹¡šg
::
Te¡P¬tResuÉ
::
kF©®Fau»
)

	)

1927 #ià!
GTEST_DONT_DEFINE_FAIL


1928 
	#FAIL
(è
	$GTEST_FAIL
()

	)

1932 
	#GTEST_SUCCEED
(è
	`GTEST_SUCCESS_
("Sucûeded")

	)

1936 #ià!
GTEST_DONT_DEFINE_SUCCEED


1937 
	#SUCCEED
(è
	$GTEST_SUCCEED
()

	)

1949 
	#EXPECT_THROW
(
¡©em’t
, 
ex³ùed_exû±iÚ
) \

1950 
	$GTEST_TEST_THROW_
(
¡©em’t
, 
ex³ùed_exû±iÚ
, 
GTEST_NONFATAL_FAILURE_
)

	)

1951 
	#EXPECT_NO_THROW
(
¡©em’t
) \

1952 
	$GTEST_TEST_NO_THROW_
(
¡©em’t
, 
GTEST_NONFATAL_FAILURE_
)

	)

1953 
	#EXPECT_ANY_THROW
(
¡©em’t
) \

1954 
	$GTEST_TEST_ANY_THROW_
(
¡©em’t
, 
GTEST_NONFATAL_FAILURE_
)

	)

1955 
	#ASSERT_THROW
(
¡©em’t
, 
ex³ùed_exû±iÚ
) \

1956 
	$GTEST_TEST_THROW_
(
¡©em’t
, 
ex³ùed_exû±iÚ
, 
GTEST_FATAL_FAILURE_
)

	)

1957 
	#ASSERT_NO_THROW
(
¡©em’t
) \

1958 
	$GTEST_TEST_NO_THROW_
(
¡©em’t
, 
GTEST_FATAL_FAILURE_
)

	)

1959 
	#ASSERT_ANY_THROW
(
¡©em’t
) \

1960 
	$GTEST_TEST_ANY_THROW_
(
¡©em’t
, 
GTEST_FATAL_FAILURE_
)

	)

1965 
	#GTEST_EXPECT_TRUE
(
cÚd™iÚ
) \

1966 
	`GTEST_TEST_BOOLEAN_
(
cÚd™iÚ
, #cÚd™iÚ, 
çl£
, 
Œue
, \

1967 
GTEST_NONFATAL_FAILURE_
)

	)

1968 
	#GTEST_EXPECT_FALSE
(
cÚd™iÚ
) \

1969 
	`GTEST_TEST_BOOLEAN_
(!(
cÚd™iÚ
), #cÚd™iÚ, 
Œue
, 
çl£
, \

1970 
GTEST_NONFATAL_FAILURE_
)

	)

1971 
	#GTEST_ASSERT_TRUE
(
cÚd™iÚ
) \

1972 
	`GTEST_TEST_BOOLEAN_
(
cÚd™iÚ
, #cÚd™iÚ, 
çl£
, 
Œue
, \

1973 
GTEST_FATAL_FAILURE_
)

	)

1974 
	#GTEST_ASSERT_FALSE
(
cÚd™iÚ
) \

1975 
	`GTEST_TEST_BOOLEAN_
(!(
cÚd™iÚ
), #cÚd™iÚ, 
Œue
, 
çl£
, \

1976 
GTEST_FATAL_FAILURE_
)

	)

1981 #ià!
GTEST_DONT_DEFINE_EXPECT_TRUE


1982 
	#EXPECT_TRUE
(
cÚd™iÚ
è
	$GTEST_EXPECT_TRUE
(
cÚd™iÚ
)

	)

1985 #ià!
GTEST_DONT_DEFINE_EXPECT_FALSE


1986 
	#EXPECT_FALSE
(
cÚd™iÚ
è
	$GTEST_EXPECT_FALSE
(
cÚd™iÚ
)

	)

1989 #ià!
GTEST_DONT_DEFINE_ASSERT_TRUE


1990 
	#ASSERT_TRUE
(
cÚd™iÚ
è
	$GTEST_ASSERT_TRUE
(
cÚd™iÚ
)

	)

1993 #ià!
GTEST_DONT_DEFINE_ASSERT_FALSE


1994 
	#ASSERT_FALSE
(
cÚd™iÚ
è
	$GTEST_ASSERT_FALSE
(
cÚd™iÚ
)

	)

2043 
	#EXPECT_EQ
(
v®1
, 
v®2
) \

2044 
	$EXPECT_PRED_FORMAT2
(::
‹¡šg
::
š‹º®
::
EqH–³r
::
Com·»
, 
v®1
, 
v®2
)

	)

2045 
	#EXPECT_NE
(
v®1
, 
v®2
) \

2046 
	$EXPECT_PRED_FORMAT2
(::
‹¡šg
::
š‹º®
::
CmpH–³rNE
, 
v®1
, 
v®2
)

	)

2047 
	#EXPECT_LE
(
v®1
, 
v®2
) \

2048 
	$EXPECT_PRED_FORMAT2
(::
‹¡šg
::
š‹º®
::
CmpH–³rLE
, 
v®1
, 
v®2
)

	)

2049 
	#EXPECT_LT
(
v®1
, 
v®2
) \

2050 
	$EXPECT_PRED_FORMAT2
(::
‹¡šg
::
š‹º®
::
CmpH–³rLT
, 
v®1
, 
v®2
)

	)

2051 
	#EXPECT_GE
(
v®1
, 
v®2
) \

2052 
	$EXPECT_PRED_FORMAT2
(::
‹¡šg
::
š‹º®
::
CmpH–³rGE
, 
v®1
, 
v®2
)

	)

2053 
	#EXPECT_GT
(
v®1
, 
v®2
) \

2054 
	$EXPECT_PRED_FORMAT2
(::
‹¡šg
::
š‹º®
::
CmpH–³rGT
, 
v®1
, 
v®2
)

	)

2056 
	#GTEST_ASSERT_EQ
(
v®1
, 
v®2
) \

2057 
	$ASSERT_PRED_FORMAT2
(::
‹¡šg
::
š‹º®
::
EqH–³r
::
Com·»
, 
v®1
, 
v®2
)

	)

2058 
	#GTEST_ASSERT_NE
(
v®1
, 
v®2
) \

2059 
	$ASSERT_PRED_FORMAT2
(::
‹¡šg
::
š‹º®
::
CmpH–³rNE
, 
v®1
, 
v®2
)

	)

2060 
	#GTEST_ASSERT_LE
(
v®1
, 
v®2
) \

2061 
	$ASSERT_PRED_FORMAT2
(::
‹¡šg
::
š‹º®
::
CmpH–³rLE
, 
v®1
, 
v®2
)

	)

2062 
	#GTEST_ASSERT_LT
(
v®1
, 
v®2
) \

2063 
	$ASSERT_PRED_FORMAT2
(::
‹¡šg
::
š‹º®
::
CmpH–³rLT
, 
v®1
, 
v®2
)

	)

2064 
	#GTEST_ASSERT_GE
(
v®1
, 
v®2
) \

2065 
	$ASSERT_PRED_FORMAT2
(::
‹¡šg
::
š‹º®
::
CmpH–³rGE
, 
v®1
, 
v®2
)

	)

2066 
	#GTEST_ASSERT_GT
(
v®1
, 
v®2
) \

2067 
	$ASSERT_PRED_FORMAT2
(::
‹¡šg
::
š‹º®
::
CmpH–³rGT
, 
v®1
, 
v®2
)

	)

2072 #ià!
GTEST_DONT_DEFINE_ASSERT_EQ


2073 
	#ASSERT_EQ
(
v®1
, 
v®2
è
	$GTEST_ASSERT_EQ
(
v®1
, 
v®2
)

	)

2076 #ià!
GTEST_DONT_DEFINE_ASSERT_NE


2077 
	#ASSERT_NE
(
v®1
, 
v®2
è
	$GTEST_ASSERT_NE
(
v®1
, 
v®2
)

	)

2080 #ià!
GTEST_DONT_DEFINE_ASSERT_LE


2081 
	#ASSERT_LE
(
v®1
, 
v®2
è
	$GTEST_ASSERT_LE
(
v®1
, 
v®2
)

	)

2084 #ià!
GTEST_DONT_DEFINE_ASSERT_LT


2085 
	#ASSERT_LT
(
v®1
, 
v®2
è
	$GTEST_ASSERT_LT
(
v®1
, 
v®2
)

	)

2088 #ià!
GTEST_DONT_DEFINE_ASSERT_GE


2089 
	#ASSERT_GE
(
v®1
, 
v®2
è
	$GTEST_ASSERT_GE
(
v®1
, 
v®2
)

	)

2092 #ià!
GTEST_DONT_DEFINE_ASSERT_GT


2093 
	#ASSERT_GT
(
v®1
, 
v®2
è
	$GTEST_ASSERT_GT
(
v®1
, 
v®2
)

	)

2112 
	#EXPECT_STREQ
(
s1
, 
s2
) \

2113 
	$EXPECT_PRED_FORMAT2
(::
‹¡šg
::
š‹º®
::
CmpH–³rSTREQ
, 
s1
, 
s2
)

	)

2114 
	#EXPECT_STRNE
(
s1
, 
s2
) \

2115 
	$EXPECT_PRED_FORMAT2
(::
‹¡šg
::
š‹º®
::
CmpH–³rSTRNE
, 
s1
, 
s2
)

	)

2116 
	#EXPECT_STRCASEEQ
(
s1
, 
s2
) \

2117 
	$EXPECT_PRED_FORMAT2
(::
‹¡šg
::
š‹º®
::
CmpH–³rSTRCASEEQ
, 
s1
, 
s2
)

	)

2118 
	#EXPECT_STRCASENE
(
s1
, 
s2
)\

2119 
	$EXPECT_PRED_FORMAT2
(::
‹¡šg
::
š‹º®
::
CmpH–³rSTRCASENE
, 
s1
, 
s2
)

	)

2121 
	#ASSERT_STREQ
(
s1
, 
s2
) \

2122 
	$ASSERT_PRED_FORMAT2
(::
‹¡šg
::
š‹º®
::
CmpH–³rSTREQ
, 
s1
, 
s2
)

	)

2123 
	#ASSERT_STRNE
(
s1
, 
s2
) \

2124 
	$ASSERT_PRED_FORMAT2
(::
‹¡šg
::
š‹º®
::
CmpH–³rSTRNE
, 
s1
, 
s2
)

	)

2125 
	#ASSERT_STRCASEEQ
(
s1
, 
s2
) \

2126 
	$ASSERT_PRED_FORMAT2
(::
‹¡šg
::
š‹º®
::
CmpH–³rSTRCASEEQ
, 
s1
, 
s2
)

	)

2127 
	#ASSERT_STRCASENE
(
s1
, 
s2
)\

2128 
	$ASSERT_PRED_FORMAT2
(::
‹¡šg
::
š‹º®
::
CmpH–³rSTRCASENE
, 
s1
, 
s2
)

	)

2144 
	#EXPECT_FLOAT_EQ
(
v®1
, 
v®2
)\

2145 
	`EXPECT_PRED_FORMAT2
(::
‹¡šg
::
š‹º®
::
CmpH–³rFlßtšgPoštEQ
<>, \

2146 
v®1
, 
v®2
)

	)

2148 
	#EXPECT_DOUBLE_EQ
(
v®1
, 
v®2
)\

2149 
	`EXPECT_PRED_FORMAT2
(::
‹¡šg
::
š‹º®
::
CmpH–³rFlßtšgPoštEQ
<>, \

2150 
v®1
, 
v®2
)

	)

2152 
	#ASSERT_FLOAT_EQ
(
v®1
, 
v®2
)\

2153 
	`ASSERT_PRED_FORMAT2
(::
‹¡šg
::
š‹º®
::
CmpH–³rFlßtšgPoštEQ
<>, \

2154 
v®1
, 
v®2
)

	)

2156 
	#ASSERT_DOUBLE_EQ
(
v®1
, 
v®2
)\

2157 
	`ASSERT_PRED_FORMAT2
(::
‹¡šg
::
š‹º®
::
CmpH–³rFlßtšgPoštEQ
<>, \

2158 
v®1
, 
v®2
)

	)

2160 
	#EXPECT_NEAR
(
v®1
, 
v®2
, 
abs_”rÜ
)\

2161 
	`EXPECT_PRED_FORMAT3
(::
‹¡šg
::
š‹º®
::
DoubËN—rP»dFÜm©
, \

2162 
v®1
, 
v®2
, 
abs_”rÜ
)

	)

2164 
	#ASSERT_NEAR
(
v®1
, 
v®2
, 
abs_”rÜ
)\

2165 
	`ASSERT_PRED_FORMAT3
(::
‹¡šg
::
š‹º®
::
DoubËN—rP»dFÜm©
, \

2166 
v®1
, 
v®2
, 
abs_”rÜ
)

	)

2175 
GTEST_API_
 
As£¹iÚResuÉ
 
	`FlßtLE
(cÚ¡ * 
ex´1
, cÚ¡ * 
ex´2
,

2176 
v®1
, 
v®2
);

2177 
GTEST_API_
 
As£¹iÚResuÉ
 
	`DoubËLE
(cÚ¡ * 
ex´1
, cÚ¡ * 
ex´2
,

2178 
v®1
, 
v®2
);

2181 #ià
GTEST_OS_WINDOWS


2192 
	#EXPECT_HRESULT_SUCCEEDED
(
ex´
) \

2193 
	`EXPECT_PRED_FORMAT1
(::
‹¡šg
::
š‹º®
::
IsHRESULTSucûss
, (
ex´
))

	)

2195 
	#ASSERT_HRESULT_SUCCEEDED
(
ex´
) \

2196 
	`ASSERT_PRED_FORMAT1
(::
‹¡šg
::
š‹º®
::
IsHRESULTSucûss
, (
ex´
))

	)

2198 
	#EXPECT_HRESULT_FAILED
(
ex´
) \

2199 
	`EXPECT_PRED_FORMAT1
(::
‹¡šg
::
š‹º®
::
IsHRESULTFau»
, (
ex´
))

	)

2201 
	#ASSERT_HRESULT_FAILED
(
ex´
) \

2202 
	`ASSERT_PRED_FORMAT1
(::
‹¡šg
::
š‹º®
::
IsHRESULTFau»
, (
ex´
))

	)

2216 
	#ASSERT_NO_FATAL_FAILURE
(
¡©em’t
) \

2217 
	$GTEST_TEST_NO_FATAL_FAILURE_
(
¡©em’t
, 
GTEST_FATAL_FAILURE_
)

	)

2218 
	#EXPECT_NO_FATAL_FAILURE
(
¡©em’t
) \

2219 
	$GTEST_TEST_NO_FATAL_FAILURE_
(
¡©em’t
, 
GTEST_NONFATAL_FAILURE_
)

	)

2231 şas 
	cGTEST_API_
 
ScİedT¿û
 {

2232 
public
:

2238 
‹m¶©e
 <
ty³Çme
 
T
>

2239 
	`ScİedT¿û
(cÚ¡ * 
fe
, 
lše
, cÚ¡ 
T
& 
mes§ge
) {

2240 
	`PushT¿û
(
fe
, 
lše
, (
	`Mes§ge
(è<< 
mes§ge
).
	`G‘SŒšg
());

2244 
	`ScİedT¿û
(cÚ¡ * 
fe
, 
lše
, cÚ¡ * 
mes§ge
) {

2245 
	`PushT¿û
(
fe
, 
lše
, 
mes§ge
 ? message : "(null)");

2248 
	`ScİedT¿û
(cÚ¡ * 
fe
, 
lše
, cÚ¡ 
¡d
::
¡ršg
& 
mes§ge
) {

2249 
	`PushT¿û
(
fe
, 
lše
, 
mes§ge
);

2256 ~
	`ScİedT¿û
();

2258 
´iv©e
:

2259 
	`PushT¿û
(cÚ¡ * 
fe
, 
lše
, 
¡d
::
¡ršg
 
mes§ge
);

2261 
	`GTEST_DISALLOW_COPY_AND_ASSIGN_
(
ScİedT¿û
);

2262 
	}
} 
	gGTEST_ATTRIBUTE_UNUSED_
;

2281 
	#SCOPED_TRACE
(
mes§ge
) \

2282 ::
‹¡šg
::
ScİedT¿û
 
	`GTEST_CONCAT_TOKEN_
(
g‹¡_Œaû_
, 
__LINE__
)(\

2283 
__FILE__
, 
__LINE__
, (
mes§ge
))

	)

2315 
	g‹m¶©e
 <
ty³Çme
 
	gT1
,y³Çm
	gT2
>

2316 
cÚ¡ex´
 
boŞ
 
	$SticAs£¹Ty³Eq
(è
nÛxû±
 {

2317 
	`¡©ic_as£¹
(
¡d
::
is_§me
<
T1
, 
T2
>::
v®ue
, "T1‡nd T2‡re‚othe sameype");

2318  
Œue
;

2319 
	}
}

2346 
	#GTEST_TEST
(
‹¡_su™e_Çme
, 
‹¡_Çme
) \

2347 
	`GTEST_TEST_
(
‹¡_su™e_Çme
, 
‹¡_Çme
, ::
‹¡šg
::
Te¡
, \

2348 ::
‹¡šg
::
š‹º®
::
	$G‘Te¡Ty³Id
())

	)

2352 #ià!
GTEST_DONT_DEFINE_TEST


2353 
	#TEST
(
‹¡_su™e_Çme
, 
‹¡_Çme
è
	$GTEST_TEST
(
‹¡_su™e_Çme
, 
‹¡_Çme
)

	)

2383 #ià!
GTEST_DONT_DEFINE_TEST


2384 
	#TEST_F
(
‹¡_fixtu»
, 
‹¡_Çme
)\

2385 
	`GTEST_TEST_
(
‹¡_fixtu»
, 
‹¡_Çme
,est_fixture, \

2386 ::
‹¡šg
::
š‹º®
::
G‘Ty³Id
<
‹¡_fixtu»
>())

	)

2391 
GTEST_API_
 
¡d
::
¡ršg
 
	`TempDœ
();

2393 #ifdeà
_MSC_VER


2394 #´agm¨
	$w¬nšg
(
pİ
)

2454 
‹m¶©e
 <&... 
Ex¶ic™P¬am‘”B¬r›r
, 
ty³Çme
 
FaùÜy
>

2455 
Te¡Info
* 
	$Regi¡”Te¡
(cÚ¡ * 
‹¡_su™e_Çme
, cÚ¡ * 
‹¡_Çme
,

2456 cÚ¡ * 
ty³_·¿m
, cÚ¡ * 
v®ue_·¿m
,

2457 cÚ¡ * 
fe
, 
lše
, 
FaùÜy
 
çùÜy
) {

2458 
usšg
 
Te¡T
 = 
ty³Çme
 
¡d
::
»move_poš‹r
<
	`deşty³
(
	`çùÜy
())>::
ty³
;

2460 şas 
	cFaùÜyIm¶
 : 
public
 
š‹º®
::
Te¡FaùÜyBa£
 {

2461 
public
:

2462 
ex¶ic™
 
	`FaùÜyIm¶
(
FaùÜy
 
f
è: 
	`çùÜy_
(
¡d
::
	`move
(f)) {}

2463 
Te¡
* 
	`C»©eTe¡
(è
ov”ride
 {  
	`çùÜy_
(); }

2465 
´iv©e
:

2466 
FaùÜy
 
çùÜy_
;

2469  
š‹º®
::
	`MakeAndRegi¡”Te¡Info
(

2470 
‹¡_su™e_Çme
, 
‹¡_Çme
, 
ty³_·¿m
, 
v®ue_·¿m
,

2471 
š‹º®
::
	`CodeLoÿtiÚ
(
fe
, 
lše
), iÁ”Çl::
G‘Ty³Id
<
Te¡T
>(),

2472 
š‹º®
::
Su™eApiResŞv”
<
Te¡T
>::
	`G‘S‘UpCa£OrSu™e
(
fe
, 
lše
),

2473 
š‹º®
::
Su™eApiResŞv”
<
Te¡T
>::
	`G‘T—rDownCa£OrSu™e
(
fe
, 
lše
),

2474 
Ãw
 
FaùÜyIm¶
{
¡d
::
	`move
(
çùÜy
)});

2475 
	}
}

2487 
	$RUN_ALL_TESTS
(è
GTEST_MUST_USE_RESULT_
;

2489 
šlše
 
	$RUN_ALL_TESTS
() {

2490  ::
‹¡šg
::
Un™Te¡
::
	`G‘In¡ªû
()->
	`Run
();

2491 
	}
}

2493 
	$GTEST_DISABLE_MSC_WARNINGS_POP_
()

	@third_party/googletest/googletest/include/gtest/gtest_pred_impl.h

36 #iâdeà
GOOGLETEST_INCLUDE_GTEST_GTEST_PRED_IMPL_H_


37 
	#GOOGLETEST_INCLUDE_GTEST_GTEST_PRED_IMPL_H_


	)

39 
	~"g‹¡/g‹¡.h
"

41 
Çme¥aû
 
	g‹¡šg
 {

75 
	#GTEST_ASSERT_
(
ex´essiÚ
, 
Ú_çu»
) \

76 
GTEST_AMBIGUOUS_ELSE_BLOCKER_
 \

77 ià(cÚ¡ ::
‹¡šg
::
As£¹iÚResuÉ
 
g‹¡_¬
 = (
ex´essiÚ
)) \

80 
	`Ú_çu»
(
g‹¡_¬
.
	`çu»_mes§ge
())

	)

85 
	g‹m¶©e
 <
ty³Çme
 
	gP»d
,

86 
ty³Çme
 
	gT1
>

87 
As£¹iÚResuÉ
 
As£¹P»d1H–³r
(cÚ¡ * 
´ed_‹xt
,

88 cÚ¡ * 
e1
,

89 
P»d
 
´ed
,

90 cÚ¡ 
T1
& 
v1
) {

91 ià(
´ed
(
v1
)è 
As£¹iÚSucûss
();

93  
As£¹iÚFau»
()

94 << 
	g´ed_‹xt
 << "(" << 
	ge1
 << ")ƒvaluateso false, where"

96 << 
	ge1
 << "ƒv®u©e tØ" << ::
‹¡šg
::
PrštToSŒšg
(
v1
);

101 
	#GTEST_PRED_FORMAT1_
(
´ed_fÜm©
, 
v1
, 
Ú_çu»
)\

102 
	`GTEST_ASSERT_
(
	`´ed_fÜm©
(#v1, 
v1
), \

103 
Ú_çu»
)

	)

107 
	#GTEST_PRED1_
(
´ed
, 
v1
, 
Ú_çu»
)\

108 
	`GTEST_ASSERT_
(::
‹¡šg
::
	`As£¹P»d1H–³r
(#pred, \

110 
´ed
, \

111 
v1
), 
Ú_çu»
)

	)

114 
	#EXPECT_PRED_FORMAT1
(
´ed_fÜm©
, 
v1
) \

115 
	`GTEST_PRED_FORMAT1_
(
´ed_fÜm©
, 
v1
, 
GTEST_NONFATAL_FAILURE_
)

	)

116 
	#EXPECT_PRED1
(
´ed
, 
v1
) \

117 
	`GTEST_PRED1_
(
´ed
, 
v1
, 
GTEST_NONFATAL_FAILURE_
)

	)

118 
	#ASSERT_PRED_FORMAT1
(
´ed_fÜm©
, 
v1
) \

119 
	`GTEST_PRED_FORMAT1_
(
´ed_fÜm©
, 
v1
, 
GTEST_FATAL_FAILURE_
)

	)

120 
	#ASSERT_PRED1
(
´ed
, 
v1
) \

121 
	`GTEST_PRED1_
(
´ed
, 
v1
, 
GTEST_FATAL_FAILURE_
)

	)

127 
	g‹m¶©e
 <
ty³Çme
 
	gP»d
,

128 
ty³Çme
 
	gT1
,

129 
ty³Çme
 
	gT2
>

130 
As£¹iÚResuÉ
 
As£¹P»d2H–³r
(cÚ¡ * 
´ed_‹xt
,

131 cÚ¡ * 
e1
,

132 cÚ¡ * 
e2
,

133 
P»d
 
´ed
,

134 cÚ¡ 
T1
& 
v1
,

135 cÚ¡ 
T2
& 
v2
) {

136 ià(
´ed
(
v1
, 
v2
)è 
As£¹iÚSucûss
();

138  
As£¹iÚFau»
()

139 << 
	g´ed_‹xt
 << "(" << 
	ge1
 << ", " << 
	ge2


142 << 
	ge1
 << "ƒv®u©e tØ" << ::
‹¡šg
::
PrštToSŒšg
(
v1
) << "\n"

143 << 
e2
 << "ƒv®u©e tØ" << ::
‹¡šg
::
PrštToSŒšg
(
v2
);

148 
	#GTEST_PRED_FORMAT2_
(
´ed_fÜm©
, 
v1
, 
v2
, 
Ú_çu»
)\

149 
	`GTEST_ASSERT_
(
	`´ed_fÜm©
(#v1, #v2, 
v1
, 
v2
), \

150 
Ú_çu»
)

	)

154 
	#GTEST_PRED2_
(
´ed
, 
v1
, 
v2
, 
Ú_çu»
)\

155 
	`GTEST_ASSERT_
(::
‹¡šg
::
	`As£¹P»d2H–³r
(#pred, \

158 
´ed
, \

159 
v1
, \

160 
v2
), 
Ú_çu»
)

	)

163 
	#EXPECT_PRED_FORMAT2
(
´ed_fÜm©
, 
v1
, 
v2
) \

164 
	`GTEST_PRED_FORMAT2_
(
´ed_fÜm©
, 
v1
, 
v2
, 
GTEST_NONFATAL_FAILURE_
)

	)

165 
	#EXPECT_PRED2
(
´ed
, 
v1
, 
v2
) \

166 
	`GTEST_PRED2_
(
´ed
, 
v1
, 
v2
, 
GTEST_NONFATAL_FAILURE_
)

	)

167 
	#ASSERT_PRED_FORMAT2
(
´ed_fÜm©
, 
v1
, 
v2
) \

168 
	`GTEST_PRED_FORMAT2_
(
´ed_fÜm©
, 
v1
, 
v2
, 
GTEST_FATAL_FAILURE_
)

	)

169 
	#ASSERT_PRED2
(
´ed
, 
v1
, 
v2
) \

170 
	`GTEST_PRED2_
(
´ed
, 
v1
, 
v2
, 
GTEST_FATAL_FAILURE_
)

	)

176 
	g‹m¶©e
 <
ty³Çme
 
	gP»d
,

177 
ty³Çme
 
	gT1
,

178 
ty³Çme
 
	gT2
,

179 
ty³Çme
 
	gT3
>

180 
As£¹iÚResuÉ
 
As£¹P»d3H–³r
(cÚ¡ * 
´ed_‹xt
,

181 cÚ¡ * 
e1
,

182 cÚ¡ * 
e2
,

183 cÚ¡ * 
e3
,

184 
P»d
 
´ed
,

185 cÚ¡ 
T1
& 
v1
,

186 cÚ¡ 
T2
& 
v2
,

187 cÚ¡ 
T3
& 
v3
) {

188 ià(
´ed
(
v1
, 
v2
, 
v3
)è 
As£¹iÚSucûss
();

190  
As£¹iÚFau»
()

191 << 
	g´ed_‹xt
 << "(" << 
	ge1
 << ", " << 
	ge2
 << ", " << 
	ge3


194 << 
	ge1
 << "ƒv®u©e tØ" << ::
‹¡šg
::
PrštToSŒšg
(
v1
) << "\n"

195 << 
e2
 << "ƒv®u©e tØ" << ::
‹¡šg
::
PrštToSŒšg
(
v2
) << "\n"

196 << 
e3
 << "ƒv®u©e tØ" << ::
‹¡šg
::
PrštToSŒšg
(
v3
);

201 
	#GTEST_PRED_FORMAT3_
(
´ed_fÜm©
, 
v1
, 
v2
, 
v3
, 
Ú_çu»
)\

202 
	`GTEST_ASSERT_
(
	`´ed_fÜm©
(#v1, #v2, #v3, 
v1
, 
v2
, 
v3
), \

203 
Ú_çu»
)

	)

207 
	#GTEST_PRED3_
(
´ed
, 
v1
, 
v2
, 
v3
, 
Ú_çu»
)\

208 
	`GTEST_ASSERT_
(::
‹¡šg
::
	`As£¹P»d3H–³r
(#pred, \

212 
´ed
, \

213 
v1
, \

214 
v2
, \

215 
v3
), 
Ú_çu»
)

	)

218 
	#EXPECT_PRED_FORMAT3
(
´ed_fÜm©
, 
v1
, 
v2
, 
v3
) \

219 
	`GTEST_PRED_FORMAT3_
(
´ed_fÜm©
, 
v1
, 
v2
, 
v3
, 
GTEST_NONFATAL_FAILURE_
)

	)

220 
	#EXPECT_PRED3
(
´ed
, 
v1
, 
v2
, 
v3
) \

221 
	`GTEST_PRED3_
(
´ed
, 
v1
, 
v2
, 
v3
, 
GTEST_NONFATAL_FAILURE_
)

	)

222 
	#ASSERT_PRED_FORMAT3
(
´ed_fÜm©
, 
v1
, 
v2
, 
v3
) \

223 
	`GTEST_PRED_FORMAT3_
(
´ed_fÜm©
, 
v1
, 
v2
, 
v3
, 
GTEST_FATAL_FAILURE_
)

	)

224 
	#ASSERT_PRED3
(
´ed
, 
v1
, 
v2
, 
v3
) \

225 
	`GTEST_PRED3_
(
´ed
, 
v1
, 
v2
, 
v3
, 
GTEST_FATAL_FAILURE_
)

	)

231 
	g‹m¶©e
 <
ty³Çme
 
	gP»d
,

232 
ty³Çme
 
	gT1
,

233 
ty³Çme
 
	gT2
,

234 
ty³Çme
 
	gT3
,

235 
ty³Çme
 
	gT4
>

236 
As£¹iÚResuÉ
 
As£¹P»d4H–³r
(cÚ¡ * 
´ed_‹xt
,

237 cÚ¡ * 
e1
,

238 cÚ¡ * 
e2
,

239 cÚ¡ * 
e3
,

240 cÚ¡ * 
e4
,

241 
P»d
 
´ed
,

242 cÚ¡ 
T1
& 
v1
,

243 cÚ¡ 
T2
& 
v2
,

244 cÚ¡ 
T3
& 
v3
,

245 cÚ¡ 
T4
& 
v4
) {

246 ià(
´ed
(
v1
, 
v2
, 
v3
, 
v4
)è 
As£¹iÚSucûss
();

248  
As£¹iÚFau»
()

249 << 
	g´ed_‹xt
 << "(" << 
	ge1
 << ", " << 
	ge2
 << ", " << 
	ge3
 << ", " << 
	ge4


252 << 
	ge1
 << "ƒv®u©e tØ" << ::
‹¡šg
::
PrštToSŒšg
(
v1
) << "\n"

253 << 
e2
 << "ƒv®u©e tØ" << ::
‹¡šg
::
PrštToSŒšg
(
v2
) << "\n"

254 << 
e3
 << "ƒv®u©e tØ" << ::
‹¡šg
::
PrštToSŒšg
(
v3
) << "\n"

255 << 
e4
 << "ƒv®u©e tØ" << ::
‹¡šg
::
PrštToSŒšg
(
v4
);

260 
	#GTEST_PRED_FORMAT4_
(
´ed_fÜm©
, 
v1
, 
v2
, 
v3
, 
v4
, 
Ú_çu»
)\

261 
	`GTEST_ASSERT_
(
	`´ed_fÜm©
(#v1, #v2, #v3, #v4, 
v1
, 
v2
, 
v3
, 
v4
), \

262 
Ú_çu»
)

	)

266 
	#GTEST_PRED4_
(
´ed
, 
v1
, 
v2
, 
v3
, 
v4
, 
Ú_çu»
)\

267 
	`GTEST_ASSERT_
(::
‹¡šg
::
	`As£¹P»d4H–³r
(#pred, \

272 
´ed
, \

273 
v1
, \

274 
v2
, \

275 
v3
, \

276 
v4
), 
Ú_çu»
)

	)

279 
	#EXPECT_PRED_FORMAT4
(
´ed_fÜm©
, 
v1
, 
v2
, 
v3
, 
v4
) \

280 
	`GTEST_PRED_FORMAT4_
(
´ed_fÜm©
, 
v1
, 
v2
, 
v3
, 
v4
, 
GTEST_NONFATAL_FAILURE_
)

	)

281 
	#EXPECT_PRED4
(
´ed
, 
v1
, 
v2
, 
v3
, 
v4
) \

282 
	`GTEST_PRED4_
(
´ed
, 
v1
, 
v2
, 
v3
, 
v4
, 
GTEST_NONFATAL_FAILURE_
)

	)

283 
	#ASSERT_PRED_FORMAT4
(
´ed_fÜm©
, 
v1
, 
v2
, 
v3
, 
v4
) \

284 
	`GTEST_PRED_FORMAT4_
(
´ed_fÜm©
, 
v1
, 
v2
, 
v3
, 
v4
, 
GTEST_FATAL_FAILURE_
)

	)

285 
	#ASSERT_PRED4
(
´ed
, 
v1
, 
v2
, 
v3
, 
v4
) \

286 
	`GTEST_PRED4_
(
´ed
, 
v1
, 
v2
, 
v3
, 
v4
, 
GTEST_FATAL_FAILURE_
)

	)

292 
	g‹m¶©e
 <
ty³Çme
 
	gP»d
,

293 
ty³Çme
 
	gT1
,

294 
ty³Çme
 
	gT2
,

295 
ty³Çme
 
	gT3
,

296 
ty³Çme
 
	gT4
,

297 
ty³Çme
 
	gT5
>

298 
As£¹iÚResuÉ
 
As£¹P»d5H–³r
(cÚ¡ * 
´ed_‹xt
,

299 cÚ¡ * 
e1
,

300 cÚ¡ * 
e2
,

301 cÚ¡ * 
e3
,

302 cÚ¡ * 
e4
,

303 cÚ¡ * 
e5
,

304 
P»d
 
´ed
,

305 cÚ¡ 
T1
& 
v1
,

306 cÚ¡ 
T2
& 
v2
,

307 cÚ¡ 
T3
& 
v3
,

308 cÚ¡ 
T4
& 
v4
,

309 cÚ¡ 
T5
& 
v5
) {

310 ià(
´ed
(
v1
, 
v2
, 
v3
, 
v4
, 
v5
)è 
As£¹iÚSucûss
();

312  
As£¹iÚFau»
()

313 << 
	g´ed_‹xt
 << "(" << 
	ge1
 << ", " << 
	ge2
 << ", " << 
	ge3
 << ", " << 
	ge4


314 << ", " << 
	ge5
 << ")ƒvaluateso false, where"

316 << 
	ge1
 << "ƒv®u©e tØ" << ::
‹¡šg
::
PrštToSŒšg
(
v1
) << "\n"

317 << 
e2
 << "ƒv®u©e tØ" << ::
‹¡šg
::
PrštToSŒšg
(
v2
) << "\n"

318 << 
e3
 << "ƒv®u©e tØ" << ::
‹¡šg
::
PrštToSŒšg
(
v3
) << "\n"

319 << 
e4
 << "ƒv®u©e tØ" << ::
‹¡šg
::
PrštToSŒšg
(
v4
) << "\n"

320 << 
e5
 << "ƒv®u©e tØ" << ::
‹¡šg
::
PrštToSŒšg
(
v5
);

325 
	#GTEST_PRED_FORMAT5_
(
´ed_fÜm©
, 
v1
, 
v2
, 
v3
, 
v4
, 
v5
, 
Ú_çu»
)\

326 
	`GTEST_ASSERT_
(
	`´ed_fÜm©
(#v1, #v2, #v3, #v4, #v5, 
v1
, 
v2
, 
v3
, 
v4
, 
v5
), \

327 
Ú_çu»
)

	)

331 
	#GTEST_PRED5_
(
´ed
, 
v1
, 
v2
, 
v3
, 
v4
, 
v5
, 
Ú_çu»
)\

332 
	`GTEST_ASSERT_
(::
‹¡šg
::
	`As£¹P»d5H–³r
(#pred, \

338 
´ed
, \

339 
v1
, \

340 
v2
, \

341 
v3
, \

342 
v4
, \

343 
v5
), 
Ú_çu»
)

	)

346 
	#EXPECT_PRED_FORMAT5
(
´ed_fÜm©
, 
v1
, 
v2
, 
v3
, 
v4
, 
v5
) \

347 
	`GTEST_PRED_FORMAT5_
(
´ed_fÜm©
, 
v1
, 
v2
, 
v3
, 
v4
, 
v5
, 
GTEST_NONFATAL_FAILURE_
)

	)

348 
	#EXPECT_PRED5
(
´ed
, 
v1
, 
v2
, 
v3
, 
v4
, 
v5
) \

349 
	`GTEST_PRED5_
(
´ed
, 
v1
, 
v2
, 
v3
, 
v4
, 
v5
, 
GTEST_NONFATAL_FAILURE_
)

	)

350 
	#ASSERT_PRED_FORMAT5
(
´ed_fÜm©
, 
v1
, 
v2
, 
v3
, 
v4
, 
v5
) \

351 
	`GTEST_PRED_FORMAT5_
(
´ed_fÜm©
, 
v1
, 
v2
, 
v3
, 
v4
, 
v5
, 
GTEST_FATAL_FAILURE_
)

	)

352 
	#ASSERT_PRED5
(
´ed
, 
v1
, 
v2
, 
v3
, 
v4
, 
v5
) \

353 
	`GTEST_PRED5_
(
´ed
, 
v1
, 
v2
, 
v3
, 
v4
, 
v5
, 
GTEST_FATAL_FAILURE_
)

	)

	@third_party/googletest/googletest/include/gtest/gtest_prod.h

34 #iâdeà
GOOGLETEST_INCLUDE_GTEST_GTEST_PROD_H_


35 
	#GOOGLETEST_INCLUDE_GTEST_GTEST_PROD_H_


	)

58 
	#FRIEND_TEST
(
‹¡_ÿ£_Çme
, 
‹¡_Çme
)\

59 
ä›nd
 
şass
 
‹¡_ÿ£_Çme
##
_
##
‹¡_Çme
##
_Te¡


	)

	@third_party/googletest/googletest/include/gtest/internal/custom/gtest-port.h

34 #iâdeà
GOOGLETEST_INCLUDE_GTEST_INTERNAL_CUSTOM_GTEST_PORT_H_


35 
	#GOOGLETEST_INCLUDE_GTEST_INTERNAL_CUSTOM_GTEST_PORT_H_


	)

	@third_party/googletest/googletest/include/gtest/internal/custom/gtest-printers.h

39 #iâdeà
GOOGLETEST_INCLUDE_GTEST_INTERNAL_CUSTOM_GTEST_PRINTERS_H_


40 
	#GOOGLETEST_INCLUDE_GTEST_INTERNAL_CUSTOM_GTEST_PRINTERS_H_


	)

	@third_party/googletest/googletest/include/gtest/internal/custom/gtest.h

34 #iâdeà
GOOGLETEST_INCLUDE_GTEST_INTERNAL_CUSTOM_GTEST_H_


35 
	#GOOGLETEST_INCLUDE_GTEST_INTERNAL_CUSTOM_GTEST_H_


	)

	@third_party/googletest/googletest/include/gtest/internal/gtest-death-test-internal.h

36 #iâdeà
GOOGLETEST_INCLUDE_GTEST_INTERNAL_GTEST_DEATH_TEST_INTERNAL_H_


37 
	#GOOGLETEST_INCLUDE_GTEST_INTERNAL_GTEST_DEATH_TEST_INTERNAL_H_


	)

39 
	~"g‹¡/g‹¡-m©ch”s.h
"

40 
	~"g‹¡/š‹º®/g‹¡-š‹º®.h
"

42 
	~<¡dio.h
>

43 
	~<memÜy
>

45 
Çme¥aû
 
	g‹¡šg
 {

46 
Çme¥aû
 
	gš‹º®
 {

48 
GTEST_DECLARE_¡ršg_
(
š‹º®_run_d—th_‹¡
);

51 cÚ¡ 
	gkD—thTe¡StyËFÏg
[] = "death_test_style";

52 cÚ¡ 
	gkD—thTe¡U£FÜk
[] = "death_test_use_fork";

53 cÚ¡ 
	gkIÁ”ÇlRunD—thTe¡FÏg
[] = "internal_run_death_test";

55 #ià
GTEST_HAS_DEATH_TEST


57 
GTEST_DISABLE_MSC_WARNINGS_PUSH_
(4251 \

73 şas 
	cGTEST_API_
 
	gD—thTe¡
 {

74 
	gpublic
:

83 
boŞ
 
C»©e
(cÚ¡ * 
¡©em’t
, 
M©ch”
<cÚ¡ 
¡d
::
¡ršg
&> 
m©ch”
,

84 cÚ¡ * 
fe
, 
lše
, 
D—thTe¡
** 
‹¡
);

85 
D—thTe¡
();

86 
	gvœtu®
 ~
D—thTe¡
() { }

89 şas 
	cR‘uºS’tš–
 {

90 
	gpublic
:

91 
ex¶ic™
 
R‘uºS’tš–
(
D—thTe¡
* 
‹¡
è: 
‹¡_
(test) { }

92 ~
R‘uºS’tš–
(è{ 
‹¡_
->
AbÜt
(
TEST_ENCOUNTERED_RETURN_STATEMENT
); }

93 
	g´iv©e
:

94 
D—thTe¡
* cÚ¡ 
‹¡_
;

95 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
R‘uºS’tš–
);

96 } 
	gGTEST_ATTRIBUTE_UNUSED_
;

103 
	eTe¡RŞe
 { 
	gOVERSEE_TEST
, 
	gEXECUTE_TEST
 };

106 
	eAbÜtR—sÚ
 {

107 
	gTEST_ENCOUNTERED_RETURN_STATEMENT
,

108 
	gTEST_THREW_EXCEPTION
,

109 
	gTEST_DID_NOT_DIE


113 
vœtu®
 
Te¡RŞe
 
AssumeRŞe
() = 0;

116 
vœtu®
 
Wa™
() = 0;

125 
vœtu®
 
boŞ
 
Pas£d
(boŞ 
ex™_¡©us_ok
) = 0;

128 
vœtu®
 
AbÜt
(
AbÜtR—sÚ
 
»asÚ
) = 0;

132 cÚ¡ * 
La¡Mes§ge
();

134 
£t_Ï¡_d—th_‹¡_mes§ge
(cÚ¡ 
¡d
::
¡ršg
& 
mes§ge
);

136 
	g´iv©e
:

138 
¡d
::
¡ršg
 
Ï¡_d—th_‹¡_mes§ge_
;

140 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
D—thTe¡
);

143 
GTEST_DISABLE_MSC_WARNINGS_POP_
()

146 şas 
	cD—thTe¡FaùÜy
 {

147 
	gpublic
:

148 
vœtu®
 ~
D—thTe¡FaùÜy
() { }

149 
vœtu®
 
boŞ
 
C»©e
(cÚ¡ * 
¡©em’t
,

150 
M©ch”
<cÚ¡ 
¡d
::
¡ršg
&> 
m©ch”
, cÚ¡ * 
fe
,

151 
lše
, 
D—thTe¡
** 
‹¡
) = 0;

155 şas 
	cDeçuÉD—thTe¡FaùÜy
 : 
public
 
D—thTe¡FaùÜy
 {

156 
public
:

157 
boŞ
 
C»©e
(cÚ¡ * 
¡©em’t
, 
M©ch”
<cÚ¡ 
¡d
::
¡ršg
&> 
m©ch”
,

158 cÚ¡ * 
fe
, 
lše
, 
D—thTe¡
** 
‹¡
è
	gov”ride
;

163 
GTEST_API_
 
boŞ
 
Ex™edUnsucûssfuÎy
(
ex™_¡©us
);

168 
šlše
 
	gM©ch”
<cÚ¡ ::
¡d
::
¡ršg
&> 
MakeD—thTe¡M©ch”
(

169 ::
‹¡šg
::
š‹º®
::
RE
 
»gex
) {

170  
CÚšsRegex
(
»gex
.
·‰”n
());

172 
šlše
 
	gM©ch”
<cÚ¡ ::
¡d
::
¡ršg
&> 
MakeD—thTe¡M©ch”
(cÚ¡ * 
»gex
) {

173  
CÚšsRegex
(
»gex
);

175 
šlše
 
	gM©ch”
<cÚ¡ ::
¡d
::
¡ršg
&> 
MakeD—thTe¡M©ch”
(

176 cÚ¡ ::
¡d
::
¡ršg
& 
»gex
) {

177  
CÚšsRegex
(
»gex
);

182 
šlše
 
	gM©ch”
<cÚ¡ ::
¡d
::
¡ršg
&> 
MakeD—thTe¡M©ch”
(

183 
M©ch”
<cÚ¡ ::
¡d
::
¡ršg
&> 
m©ch”
) {

184  
m©ch”
;

189 #ià
GTEST_HAS_EXCEPTIONS


190 
	#GTEST_EXECUTE_DEATH_TEST_STATEMENT_
(
¡©em’t
, 
d—th_‹¡
) \

191 
Œy
 { \

192 
	`GTEST_SUPPRESS_UNREACHABLE_CODE_WARNING_BELOW_
(
¡©em’t
); \

193 } 
	`ÿtch
 (cÚ¡ ::
¡d
::
exû±iÚ
& 
g‹¡_exû±iÚ
) { \

194 
	`årštf
(\

195 
¡d”r
, \

198 ::
‹¡šg
::
š‹º®
::
	`FÜm©FeLoÿtiÚ
(
__FILE__
, 
__LINE__
).
	`c_¡r
(), \

199 
g‹¡_exû±iÚ
.
	`wh©
()); \

200 
	`fæush
(
¡d”r
); \

201 
d—th_‹¡
->
	`AbÜt
(::
‹¡šg
::
š‹º®
::
D—thTe¡
::
TEST_THREW_EXCEPTION
); \

202 } 
	`ÿtch
 (...) { \

203 
d—th_‹¡
->
	`AbÜt
(::
‹¡šg
::
š‹º®
::
D—thTe¡
::
TEST_THREW_EXCEPTION
); \

204 }

	)

207 
	#GTEST_EXECUTE_DEATH_TEST_STATEMENT_
(
¡©em’t
, 
d—th_‹¡
) \

208 
	`GTEST_SUPPRESS_UNREACHABLE_CODE_WARNING_BELOW_
(
¡©em’t
)

	)

214 
	#GTEST_DEATH_TEST_
(
¡©em’t
, 
´ediÿ‹
, 
»gex_Ü_m©ch”
, 
ç
) \

215 
GTEST_AMBIGUOUS_ELSE_BLOCKER_
 \

216 ià(::
‹¡šg
::
š‹º®
::
	`AlwaysTrue
()) { \

217 ::
‹¡šg
::
š‹º®
::
D—thTe¡
* 
g‹¡_dt
; \

218 ià(!::
‹¡šg
::
š‹º®
::
D—thTe¡
::
	`C»©e
( \

220 ::
‹¡šg
::
š‹º®
::
	`MakeD—thTe¡M©ch”
(
»gex_Ü_m©ch”
), \

221 
__FILE__
, 
__LINE__
, &
g‹¡_dt
)) { \

222 
	`GTEST_CONCAT_TOKEN_
(
g‹¡_Ïb–_
, 
__LINE__
); \

224 ià(
g‹¡_dt
 !ğ
nuÎ±r
) { \

225 
¡d
::
unique_±r
< ::
‹¡šg
::
š‹º®
::
D—thTe¡
> 
	`g‹¡_dt_±r
(
g‹¡_dt
); \

226 
g‹¡_dt
->
	`AssumeRŞe
()) { \

227 ::
‹¡šg
::
š‹º®
::
D—thTe¡
::
OVERSEE_TEST
: \

228 ià(!
g‹¡_dt
->
	`Pas£d
(
	`´ediÿ‹
(g‹¡_dt->
	`Wa™
()))) { \

229 
	`GTEST_CONCAT_TOKEN_
(
g‹¡_Ïb–_
, 
__LINE__
); \

232 ::
‹¡šg
::
š‹º®
::
D—thTe¡
::
EXECUTE_TEST
: { \

233 ::
‹¡šg
::
š‹º®
::
D—thTe¡
::
R‘uºS’tš–
 
	`g‹¡_£Áš–
( \

234 
g‹¡_dt
); \

235 
	`GTEST_EXECUTE_DEATH_TEST_STATEMENT_
(
¡©em’t
, 
g‹¡_dt
); \

236 
g‹¡_dt
->
	`AbÜt
(::
‹¡šg
::
š‹º®
::
D—thTe¡
::
TEST_DID_NOT_DIE
); \

244 
	`GTEST_CONCAT_TOKEN_
(
g‹¡_Ïb–_
, 
__LINE__
) \

245 : 
	`ç
(::
‹¡šg
::
š‹º®
::
D—thTe¡
::
	`La¡Mes§ge
())

	)

254 
	#GTEST_EXECUTE_STATEMENT_
(
¡©em’t
, 
»gex_Ü_m©ch”
) \

255 
GTEST_AMBIGUOUS_ELSE_BLOCKER_
 \

256 ià(::
‹¡šg
::
š‹º®
::
	`AlwaysTrue
()) { \

257 
	`GTEST_SUPPRESS_UNREACHABLE_CODE_WARNING_BELOW_
(
¡©em’t
); \

258 } ià(!::
‹¡šg
::
š‹º®
::
	`AlwaysTrue
()) { \

259 ::
‹¡šg
::
š‹º®
::
	`MakeD—thTe¡M©ch”
(
»gex_Ü_m©ch”
); \

261 ::
‹¡šg
::
	`Mes§ge
()

	)

266 şas 
	cIÁ”ÇlRunD—thTe¡FÏg
 {

267 
	gpublic
:

268 
IÁ”ÇlRunD—thTe¡FÏg
(cÚ¡ 
¡d
::
¡ršg
& 
a_fe
,

269 
a_lše
,

270 
ª_šdex
,

271 
a_wr™e_fd
)

272 : 
fe_
(
a_fe
), 
lše_
(
a_lše
), 
šdex_
(
ª_šdex
),

273 
wr™e_fd_
(
a_wr™e_fd
) {}

275 ~
IÁ”ÇlRunD—thTe¡FÏg
() {

276 ià(
	gwr™e_fd_
 >= 0)

277 
posix
::
Clo£
(
wr™e_fd_
);

280 cÚ¡ 
	g¡d
::
¡ršg
& 
fe
(ècÚ¡ {  
fe_
; }

281 
lše
(ècÚ¡ {  
	glše_
; }

282 
šdex
(ècÚ¡ {  
	gšdex_
; }

283 
wr™e_fd
(ècÚ¡ {  
	gwr™e_fd_
; }

285 
	g´iv©e
:

286 
¡d
::
¡ršg
 
fe_
;

287 
	glše_
;

288 
	gšdex_
;

289 
	gwr™e_fd_
;

291 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
IÁ”ÇlRunD—thTe¡FÏg
);

297 
IÁ”ÇlRunD—thTe¡FÏg
* 
P¬£IÁ”ÇlRunD—thTe¡FÏg
();

	@third_party/googletest/googletest/include/gtest/internal/gtest-filepath.h

40 #iâdeà
GOOGLETEST_INCLUDE_GTEST_INTERNAL_GTEST_FILEPATH_H_


41 
	#GOOGLETEST_INCLUDE_GTEST_INTERNAL_GTEST_FILEPATH_H_


	)

43 
	~"g‹¡/š‹º®/g‹¡-¡ršg.h
"

45 
GTEST_DISABLE_MSC_WARNINGS_PUSH_
(4251 \

48 
Çme¥aû
 
	g‹¡šg
 {

49 
Çme¥aû
 
	gš‹º®
 {

62 şas 
	cGTEST_API_
 
	gFeP©h
 {

63 
	gpublic
:

64 
FeP©h
(è: 
·thÇme_
("") { }

65 
FeP©h
(cÚ¡ FeP©h& 
rhs
è: 
·thÇme_
(rhs.pathname_) { }

67 
ex¶ic™
 
FeP©h
(cÚ¡ 
¡d
::
¡ršg
& 
·thÇme
è: 
·thÇme_
(pathname) {

68 
NÜm®ize
();

71 
	gFeP©h
& 
	gİ”©Ü
=(cÚ¡ 
FeP©h
& 
rhs
) {

72 
S‘
(
rhs
);

73  *
	gthis
;

76 
S‘
(cÚ¡ 
FeP©h
& 
rhs
) {

77 
	g·thÇme_
 = 
rhs
.
·thÇme_
;

80 cÚ¡ 
	g¡d
::
¡ršg
& sŒšg(ècÚ¡ {  
·thÇme_
; }

81 cÚ¡ * 
c_¡r
(ècÚ¡ {  
	g·thÇme_
.c_str(); }

84 
FeP©h
 
G‘Cu¼’tDœ
();

90 
FeP©h
 
MakeFeName
(cÚ¡ FeP©h& 
dœeùÜy
,

91 cÚ¡ 
FeP©h
& 
ba£_Çme
,

92 
numb”
,

93 cÚ¡ * 
ex‹nsiÚ
);

98 
FeP©h
 
CÚÿtP©hs
(cÚ¡ FeP©h& 
dœeùÜy
,

99 cÚ¡ 
FeP©h
& 
»Ïtive_·th
);

109 
FeP©h
 
G’”©eUniqueFeName
(cÚ¡ FeP©h& 
dœeùÜy
,

110 cÚ¡ 
FeP©h
& 
ba£_Çme
,

111 cÚ¡ * 
ex‹nsiÚ
);

114 
boŞ
 
IsEm±y
(ècÚ¡ {  
	g·thÇme_
.
em±y
(); }

119 
FeP©h
 
RemoveT¿šgP©hS•¬©Ü
() const;

127 
FeP©h
 
RemoveDœeùÜyName
() const;

135 
FeP©h
 
RemoveFeName
() const;

141 
FeP©h
 
RemoveEx‹nsiÚ
(cÚ¡ * 
ex‹nsiÚ
) const;

147 
boŞ
 
C»©eDœeùÜ›sRecursiv–y
() const;

153 
boŞ
 
C»©eFŞd”
() const;

157 
boŞ
 
FeOrDœeùÜyExi¡s
() const;

161 
boŞ
 
DœeùÜyExi¡s
() const;

166 
boŞ
 
IsDœeùÜy
() const;

170 
boŞ
 
IsRoÙDœeùÜy
() const;

173 
boŞ
 
IsAbsŞu‹P©h
() const;

175 
	g´iv©e
:

196 
NÜm®ize
();

201 cÚ¡ * 
FšdLa¡P©hS•¬©Ü
() const;

203 
	g¡d
::
¡ršg
 
·thÇme_
;

209 
	$GTEST_DISABLE_MSC_WARNINGS_POP_
()

	@third_party/googletest/googletest/include/gtest/internal/gtest-internal.h

37 #iâdeà
GOOGLETEST_INCLUDE_GTEST_INTERNAL_GTEST_INTERNAL_H_


38 
	#GOOGLETEST_INCLUDE_GTEST_INTERNAL_GTEST_INTERNAL_H_


	)

40 
	~"g‹¡/š‹º®/g‹¡-pÜt.h
"

42 #ià
GTEST_OS_LINUX


43 
	~<¡dlib.h
>

44 
	~<sys/ty³s.h
>

45 
	~<sys/wa™.h
>

46 
	~<uni¡d.h
>

49 #ià
GTEST_HAS_EXCEPTIONS


50 
	~<¡dexû±
>

53 
	~<ùy³.h
>

54 
	~<æßt.h
>

55 
	~<¡ršg.h
>

56 
	~<c¡dšt
>

57 
	~<iomª
>

58 
	~<lim™s
>

59 
	~<m­
>

60 
	~<£t
>

61 
	~<¡ršg
>

62 
	~<ty³_Œa™s
>

63 
	~<veùÜ
>

65 
	~"g‹¡/g‹¡-mes§ge.h
"

66 
	~"g‹¡/š‹º®/g‹¡-f•©h.h
"

67 
	~"g‹¡/š‹º®/g‹¡-¡ršg.h
"

68 
	~"g‹¡/š‹º®/g‹¡-ty³-ut.h
"

78 
	#GTEST_CONCAT_TOKEN_
(
foo
, 
b¬
è
	`GTEST_CONCAT_TOKEN_IMPL_
(foo, b¬)

	)

79 
	#GTEST_CONCAT_TOKEN_IMPL_
(
foo
, 
b¬
èfoØ## 
	)
bar

90 
	#GTEST_STRINGIFY_HELPER_
(
Çme
, ...è#Çme

	)

91 
	#GTEST_STRINGIFY_
(...è
	`GTEST_STRINGIFY_HELPER_
(
__VA_ARGS__
, )

	)

93 
Çme¥aû
 
	g´Ùo2
 {

94 
şass
 
	gMes§geL™e
;

97 
Çme¥aû
 
	g‹¡šg
 {

101 
şass
 
	gAs£¹iÚResuÉ
;

102 
şass
 
	gMes§ge
;

103 
şass
 
	gTe¡
;

104 
şass
 
	gTe¡Info
;

105 
şass
 
	gTe¡P¬tResuÉ
;

106 
şass
 
	gUn™Te¡
;

108 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

109 ::
¡d
::
¡ršg
 
PrštToSŒšg
(cÚ¡ 
T
& 
v®ue
);

111 
Çme¥aû
 
	gš‹º®
 {

113 
	gT¿ûInfo
;

114 
şass
 
	gTe¡InfoIm¶
;

115 
şass
 
	gUn™Te¡Im¶
;

119 
GTEST_API_
 cÚ¡ 
kSckT¿ûM¬k”
[];

122 şas 
	cIgnÜedV®ue
 {

123 
	sSšk
 {};

124 
	gpublic
:

132 
‹m¶©e
 <
ty³Çme
 
T
,

133 
ty³Çme
 
	g¡d
::
’abË_if
<!
¡d
::
is_cÚv”tibË
<
T
, 
	gSšk
>::
v®ue
,

134 >::
ty³
 = 0>

135 
IgnÜedV®ue
(cÚ¡ 
T
& ) {}

139 
GTEST_API_
 
	g¡d
::
¡ršg
 
Aµ’dU£rMes§ge
(

140 cÚ¡ 
¡d
::
¡ršg
& 
g‹¡_msg
, cÚ¡ 
Mes§ge
& 
u£r_msg
);

142 #ià
GTEST_HAS_EXCEPTIONS


144 
GTEST_DISABLE_MSC_WARNINGS_PUSH_
(4275 \

153 şas 
	cGTEST_API_
 
	gGoogËTe¡Fau»Exû±iÚ
 : 
public
 ::
¡d
::
ruÁime_”rÜ
 {

154 
public
:

155 
ex¶ic™
 
GoogËTe¡Fau»Exû±iÚ
(cÚ¡ 
Te¡P¬tResuÉ
& 
çu»
);

158 
GTEST_DISABLE_MSC_WARNINGS_POP_
()

162 
Çme¥aû
 
	ged™_di¡ªû
 {

168 
	eEd™Ty³
 { 
	gkM©ch
, 
	gkAdd
, 
	gkRemove
, 
	gkR•Ïû
 };

169 
GTEST_API_
 
	g¡d
::
veùÜ
<
Ed™Ty³
> 
C®cuÏ‹O±im®Ed™s
(

170 cÚ¡ 
¡d
::
veùÜ
<
size_t
>& 
Ëá
, cÚ¡ std::veùÜ<size_t>& 
right
);

173 
GTEST_API_
 
	g¡d
::
veùÜ
<
Ed™Ty³
> 
C®cuÏ‹O±im®Ed™s
(

174 cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
>& 
Ëá
,

175 cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
>& 
right
);

178 
GTEST_API_
 
	g¡d
::
¡ršg
 
C»©eUnif›dDiff
(cÚ¡ 
¡d
::
veùÜ
<¡d::¡ršg>& 
Ëá
,

179 cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
>& 
right
,

180 
size_t
 
cÚ‹xt
 = 2);

188 
GTEST_API_
 
	g¡d
::
¡ršg
 
DiffSŒšgs
(cÚ¡ 
¡d
::¡ršg& 
Ëá
,

189 cÚ¡ 
¡d
::
¡ršg
& 
right
,

190 
size_t
* 
tÙ®_lše_couÁ
);

207 
GTEST_API_
 
As£¹iÚResuÉ
 
EqFau»
(cÚ¡ * 
ex³ùed_ex´essiÚ
,

208 cÚ¡ * 
aùu®_ex´essiÚ
,

209 cÚ¡ 
¡d
::
¡ršg
& 
ex³ùed_v®ue
,

210 cÚ¡ 
¡d
::
¡ršg
& 
aùu®_v®ue
,

211 
boŞ
 
ignÜšg_ÿ£
);

214 
GTEST_API_
 
	g¡d
::
¡ršg
 
G‘BoŞAs£¹iÚFau»Mes§ge
(

215 cÚ¡ 
As£¹iÚResuÉ
& 
as£¹iÚ_»suÉ
,

216 cÚ¡ * 
ex´essiÚ_‹xt
,

217 cÚ¡ * 
aùu®_´ediÿ‹_v®ue
,

218 cÚ¡ * 
ex³ùed_´ediÿ‹_v®ue
);

249 
	g‹m¶©e
 <
ty³Çme
 
	gRawTy³
>

250 şas 
	cFlßtšgPošt
 {

251 
	gpublic
:

254 
ty³Çme
 
	tTy³W™hSize
<(
	tRawTy³
)>::
	tUIÁ
 
	tB™s
;

259 cÚ¡ 
size_t
 
	gkB™CouÁ
 = 8*(
RawTy³
);

262 cÚ¡ 
size_t
 
	gkF¿ùiÚB™CouÁ
 =

263 
¡d
::
num”ic_lim™s
<
RawTy³
>::
dig™s
 - 1;

266 cÚ¡ 
size_t
 
	gkExpÚ’tB™CouÁ
 = 
kB™CouÁ
 - 1 - 
kF¿ùiÚB™CouÁ
;

269 cÚ¡ 
B™s
 
	gkSignB™Mask
 = 
¡©ic_ÿ¡
<B™s>(1è<< (
kB™CouÁ
 - 1);

272 cÚ¡ 
B™s
 
	gkF¿ùiÚB™Mask
 =

273 ~
¡©ic_ÿ¡
<
B™s
>(0è>> (
kExpÚ’tB™CouÁ
 + 1);

276 cÚ¡ 
B™s
 
	gkExpÚ’tB™Mask
 = ~(
kSignB™Mask
 | 
kF¿ùiÚB™Mask
);

290 cÚ¡ 
ušt32_t
 
	gkMaxUÍs
 = 4;

298 
ex¶ic™
 
FlßtšgPošt
(cÚ¡ 
RawTy³
& 
x
è{ 
	gu_
.
	gv®ue_
 = x; }

305 
RawTy³
 
Reš‹½»tB™s
(cÚ¡ 
B™s
 
b™s
) {

306 
FlßtšgPošt
 
å
(0);

307 
	gå
.
	gu_
.
	gb™s_
 = 
b™s
;

308  
	gå
.
	gu_
.
	gv®ue_
;

312 
RawTy³
 
Infš™y
() {

313  
Reš‹½»tB™s
(
kExpÚ’tB™Mask
);

317 
RawTy³
 
Max
();

322 cÚ¡ 
	gB™s
 &
b™s
(ècÚ¡ {  
	gu_
.
	gb™s_
; }

325 
B™s
 
expÚ’t_b™s
(ècÚ¡ {  
	gkExpÚ’tB™Mask
 & 
	gu_
.
	gb™s_
; }

328 
B™s
 
äaùiÚ_b™s
(ècÚ¡ {  
	gkF¿ùiÚB™Mask
 & 
	gu_
.
	gb™s_
; }

331 
B™s
 
sign_b™
(ècÚ¡ {  
	gkSignB™Mask
 & 
	gu_
.
	gb™s_
; }

334 
boŞ
 
is_Çn
() const {

337  (
expÚ’t_b™s
(è=ğ
kExpÚ’tB™Mask
è&& (
äaùiÚ_b™s
() != 0);

346 
boŞ
 
Almo¡Equ®s
(cÚ¡ 
FlßtšgPošt
& 
rhs
) const {

349 ià(
is_Çn
(è|| 
	grhs
.is_Çn()è 
	gçl£
;

351  
Di¡ªûB‘w“nSignAndMagn™udeNumb”s
(
u_
.
b™s_
, 
rhs
.u_.bits_)

352 <ğ
kMaxUÍs
;

355 
	g´iv©e
:

357 
	uFlßtšgPoštUniÚ
 {

358 
RawTy³
 
v®ue_
;

359 
B™s
 
	gb™s_
;

377 
B™s
 
SignAndMagn™udeToBŸ£d
(cÚ¡ B™ &
§m
) {

378 ià(
	gkSignB™Mask
 & 
	g§m
) {

380  ~
	g§m
 + 1;

383  
	gkSignB™Mask
 | 
	g§m
;

389 
B™s
 
Di¡ªûB‘w“nSignAndMagn™udeNumb”s
(cÚ¡ B™ &
§m1
,

390 cÚ¡ 
B™s
 &
§m2
) {

391 cÚ¡ 
B™s
 
	gbŸ£d1
 = 
SignAndMagn™udeToBŸ£d
(
§m1
);

392 cÚ¡ 
B™s
 
	gbŸ£d2
 = 
SignAndMagn™udeToBŸ£d
(
§m2
);

393  (
	gbŸ£d1
 >ğ
bŸ£d2
è? (
bŸ£d1
 - biased2) : (biased2 - biased1);

396 
FlßtšgPoštUniÚ
 
	gu_
;

401 
	g‹m¶©e
 <>

402 
šlše
 
	gFlßtšgPošt
<>::
Max
(è{  
FLT_MAX
; }

403 
	g‹m¶©e
 <>

404 
šlše
 
	gFlßtšgPošt
<>::
Max
(è{  
DBL_MAX
; }

408 
	gFlßtšgPošt
<> 
	tFlßt
;

409 
	gFlßtšgPošt
<> 
	tDoubË
;

417 cÚ¡ * 
	tTy³Id
;

419 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

420 şas 
	cTy³IdH–³r
 {

421 
	gpublic
:

425 
boŞ
 
dummy_
;

428 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

429 
boŞ
 
	gTy³IdH–³r
<
	gT
>::
dummy_
 = 
çl£
;

434 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

435 
Ty³Id
 
G‘Ty³Id
() {

440  &(
	gTy³IdH–³r
<
	gT
>::
dummy_
);

448 
GTEST_API_
 
Ty³Id
 
G‘Te¡Ty³Id
();

452 şas 
	cTe¡FaùÜyBa£
 {

453 
	gpublic
:

454 
vœtu®
 ~
Te¡FaùÜyBa£
() {}

458 
vœtu®
 
Te¡
* 
C»©eTe¡
() = 0;

460 
	g´Ùeùed
:

461 
Te¡FaùÜyBa£
() {}

463 
´iv©e
:

464 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
Te¡FaùÜyBa£
);

469 
	g‹m¶©e
 <
şass
 
	gTe¡CÏss
>

470 şas 
	cTe¡FaùÜyIm¶
 : 
public
 
Te¡FaùÜyBa£
 {

471 
public
:

472 
Te¡
* 
C»©eTe¡
(è
ov”ride
 {  
Ãw
 
Te¡CÏss
; }

475 #ià
GTEST_OS_WINDOWS


481 
GTEST_API_
 
As£¹iÚResuÉ
 
IsHRESULTSucûss
(cÚ¡ * 
ex´
,

482 
hr
);

483 
GTEST_API_
 
As£¹iÚResuÉ
 
IsHRESULTFau»
(cÚ¡ * 
ex´
,

484 
hr
);

489 
usšg
 
	gS‘UpTe¡Su™eFunc
 = (*)();

490 
usšg
 
	gT—rDownTe¡Su™eFunc
 = (*)();

492 
	sCodeLoÿtiÚ
 {

493 
CodeLoÿtiÚ
(cÚ¡ 
¡d
::
¡ršg
& 
a_fe
, 
a_lše
)

494 : 
fe
(
a_fe
), 
lše
(
a_lše
) {}

496 
	g¡d
::
¡ršg
 
fe
;

497 
	glše
;

504 
usšg
 
	gS‘UpT—rDownSu™eFuncTy³
 = (*)();

506 
šlše
 
S‘UpT—rDownSu™eFuncTy³
 
G‘NÙDeçuÉOrNuÎ
(

507 
S‘UpT—rDownSu™eFuncTy³
 
a
, S‘UpT—rDownSu™eFuncTy³ 
def
) {

508  
	ga
 =ğ
def
 ? 
nuÎ±r
 : 
a
;

511 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

515 
	gSu™eApiResŞv”
 : 
T
 {

518 
usšg
 
Te¡
 =

519 
ty³Çme
 
¡d
::
cÚd™iÚ®
<(
T
è!ğ0, ::
‹¡šg
::
Te¡
, >::
ty³
;

521 
S‘UpT—rDownSu™eFuncTy³
 
G‘S‘UpCa£OrSu™e
(cÚ¡ * 
f’ame
,

522 
lše_num
) {

523 #iâdeà
GTEST_REMOVE_LEGACY_TEST_CASEAPI_


524 
S‘UpT—rDownSu™eFuncTy³
 
	g‹¡_ÿ£_å
 =

525 
G‘NÙDeçuÉOrNuÎ
(&
T
::
S‘UpTe¡Ca£
, &
Te¡
::SetUpTestCase);

526 
S‘UpT—rDownSu™eFuncTy³
 
	g‹¡_su™e_å
 =

527 
G‘NÙDeçuÉOrNuÎ
(&
T
::
S‘UpTe¡Su™e
, &
Te¡
::SetUpTestSuite);

529 
GTEST_CHECK_
(!
‹¡_ÿ£_å
 || !
‹¡_su™e_å
)

532 << 
	gf’ame
 << ":" << 
	glše_num
;

534  
	g‹¡_ÿ£_å
 !ğ
nuÎ±r
 ? 
‹¡_ÿ£_å
 : 
‹¡_su™e_å
;

536 ()(
	gf’ame
);

537 ()(
	glše_num
);

538  &
	gT
::
S‘UpTe¡Su™e
;

542 
S‘UpT—rDownSu™eFuncTy³
 
G‘T—rDownCa£OrSu™e
(cÚ¡ * 
f’ame
,

543 
lše_num
) {

544 #iâdeà
GTEST_REMOVE_LEGACY_TEST_CASEAPI_


545 
S‘UpT—rDownSu™eFuncTy³
 
	g‹¡_ÿ£_å
 =

546 
G‘NÙDeçuÉOrNuÎ
(&
T
::
T—rDownTe¡Ca£
, &
Te¡
::TearDownTestCase);

547 
S‘UpT—rDownSu™eFuncTy³
 
	g‹¡_su™e_å
 =

548 
G‘NÙDeçuÉOrNuÎ
(&
T
::
T—rDownTe¡Su™e
, &
Te¡
::TearDownTestSuite);

550 
GTEST_CHECK_
(!
‹¡_ÿ£_å
 || !
‹¡_su™e_å
)

553 << 
	gf’ame
 << ":" << 
	glše_num
;

555  
	g‹¡_ÿ£_å
 !ğ
nuÎ±r
 ? 
‹¡_ÿ£_å
 : 
‹¡_su™e_å
;

557 ()(
	gf’ame
);

558 ()(
	glše_num
);

559  &
	gT
::
T—rDownTe¡Su™e
;

582 
GTEST_API_
 
Te¡Info
* 
MakeAndRegi¡”Te¡Info
(

583 cÚ¡ * 
‹¡_su™e_Çme
, cÚ¡ * 
Çme
, cÚ¡ * 
ty³_·¿m
,

584 cÚ¡ * 
v®ue_·¿m
, 
CodeLoÿtiÚ
 
code_loÿtiÚ
,

585 
Ty³Id
 
fixtu»_şass_id
, 
S‘UpTe¡Su™eFunc
 
£t_up_tc
,

586 
T—rDownTe¡Su™eFunc
 
‹¬_down_tc
, 
Te¡FaùÜyBa£
* 
çùÜy
);

591 
GTEST_API_
 
boŞ
 
SkP»fix
(cÚ¡ * 
´efix
, cÚ¡ ** 
p¡r
);

593 
GTEST_DISABLE_MSC_WARNINGS_PUSH_
(4251 \

597 şas 
	cGTEST_API_
 
	gTy³dTe¡Su™ePS‹
 {

598 
	gpublic
:

599 
Ty³dTe¡Su™ePS‹
(è: 
»gi¡”ed_
(
çl£
) {}

604 
boŞ
 
AddTe¡Name
(cÚ¡ * 
fe
, 
lše
, cÚ¡ * 
ÿ£_Çme
,

605 cÚ¡ * 
‹¡_Çme
) {

606 ià(
	g»gi¡”ed_
) {

607 
årštf
(
¡d”r
,

610 
FÜm©FeLoÿtiÚ
(
fe
, 
lše
).
c_¡r
(), 
‹¡_Çme
, 
ÿ£_Çme
);

611 
fæush
(
¡d”r
);

612 
	gposix
::
AbÜt
();

614 
	g»gi¡”ed_‹¡s_
.
š£¹
(

615 ::
¡d
::
make_·œ
(
‹¡_Çme
, 
CodeLoÿtiÚ
(
fe
, 
lše
)));

616  
	gŒue
;

619 
boŞ
 
Te¡Exi¡s
(cÚ¡ 
¡d
::
¡ršg
& 
‹¡_Çme
) const {

620  
»gi¡”ed_‹¡s_
.
couÁ
(
‹¡_Çme
) > 0;

623 cÚ¡ 
	gCodeLoÿtiÚ
& 
G‘CodeLoÿtiÚ
(cÚ¡ 
¡d
::
¡ršg
& 
‹¡_Çme
) const {

624 
Regi¡”edTe¡sM­
::
cÚ¡_™”©Ü
 
™
 = 
»gi¡”ed_‹¡s_
.
fšd
(
‹¡_Çme
);

625 
GTEST_CHECK_
(
™
 !ğ
»gi¡”ed_‹¡s_
.
’d
());

626  
	g™
->
	g£cÚd
;

632 cÚ¡ * 
V”ifyRegi¡”edTe¡Names
(cÚ¡ * 
‹¡_su™e_Çme
,

633 cÚ¡ * 
fe
, 
lše
,

634 cÚ¡ * 
»gi¡”ed_‹¡s
);

636 
	g´iv©e
:

637 ::
¡d
::
	tm­
<
	t¡d
::
	t¡ršg
, 
	tCodeLoÿtiÚ
> 
	tRegi¡”edTe¡sM­
;

639 
boŞ
 
	g»gi¡”ed_
;

640 
Regi¡”edTe¡sM­
 
	g»gi¡”ed_‹¡s_
;

644 #iâdeà
GTEST_REMOVE_LEGACY_TEST_CASEAPI_


645 
usšg
 
	gTy³dTe¡Ca£PS‹
 = 
Ty³dTe¡Su™ePS‹
;

648 
GTEST_DISABLE_MSC_WARNINGS_POP_
()

652 
šlše
 cÚ¡ * 
SkComma
(cÚ¡ * 
¡r
) {

653 cÚ¡ * 
	gcomma
 = 
¡rchr
(
¡r
, ',');

654 ià(
	gcomma
 =ğ
nuÎ±r
) {

655  
nuÎ±r
;

657 
IsS·û
(*(++
comma
))) {}

658  
	gcomma
;

663 
šlše
 
	g¡d
::
¡ršg
 
G‘P»fixUÁComma
(cÚ¡ * 
¡r
) {

664 cÚ¡ * 
comma
 = 
¡rchr
(
¡r
, ',');

665  
	gcomma
 =ğ
nuÎ±r
 ? 
¡r
 : 
¡d
::
¡ršg
(¡r, 
comma
);

670 
S¶™SŒšg
(cÚ¡ ::
¡d
::
¡ršg
& 
¡r
, 
d–im™”
,

671 ::
¡d
::
veùÜ
< ::¡d::
¡ršg
>* 
de¡
);

675 
	sDeçuÉNameG’”©Ü
 {

676 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

677 
	g¡d
::
¡ršg
 
G‘Name
(
i
) {

678  
SŒ—mabËToSŒšg
(
i
);

682 
	g‹m¶©e
 <
ty³Çme
 
	gProvided
 = 
DeçuÉNameG’”©Ü
>

683 
	sNameG’”©ÜS–eùÜ
 {

684 
Provided
 
	tty³
;

687 
	g‹m¶©e
 <
ty³Çme
 
	gNameG’”©Ü
>

688 
G’”©eNamesRecursiv–y
(
š‹º®
::
NÚe
, 
¡d
::
veùÜ
<¡d::
¡ršg
>*, ) {}

690 
	g‹m¶©e
 <
ty³Çme
 
	gNameG’”©Ü
,y³Çm
	gTy³s
>

691 
G’”©eNamesRecursiv–y
(
Ty³s
, 
¡d
::
veùÜ
<¡d::
¡ršg
>* 
»suÉ
, 
i
) {

692 
	g»suÉ
->
push_back
(
NameG’”©Ü
::
‹m¶©e
 
G‘Name
<
ty³Çme
 
Ty³s
::
H—d
>(
i
));

693 
	gG’”©eNamesRecursiv–y
<
	gNameG’”©Ü
>(
ty³Çme
 
	gTy³s
::
Ta
(), 
	g»suÉ
,

694 
	gi
 + 1);

697 
	g‹m¶©e
 <
ty³Çme
 
	gNameG’”©Ü
,y³Çm
	gTy³s
>

698 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> 
G’”©eNames
() {

699 
¡d
::
veùÜ
<¡d::
¡ršg
> 
»suÉ
;

700 
	gG’”©eNamesRecursiv–y
<
	gNameG’”©Ü
>(
Ty³s
(), &
	g»suÉ
, 0);

701  
	g»suÉ
;

711 
	g‹m¶©e
 <
GTEST_TEMPLATE_
 
	gFixtu»
, 
şass
 
	gTe¡S–
, 
ty³Çme
 
	gTy³s
>

712 şas 
	cTy³P¬am‘”izedTe¡
 {

713 
	gpublic
:

718 
boŞ
 
Regi¡”
(cÚ¡ * 
´efix
, cÚ¡ 
CodeLoÿtiÚ
& 
code_loÿtiÚ
,

719 cÚ¡ * 
ÿ£_Çme
, cÚ¡ * 
‹¡_Çmes
, 
šdex
,

720 cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
>& 
ty³_Çmes
 =

721 
G’”©eNames
<
DeçuÉNameG’”©Ü
, 
Ty³s
>()) {

722 
ty³Çme
 
	tTy³s
::
	tH—d
 
	tTy³
;

723 
	gFixtu»
<
	tTy³
> 
	tFixtu»CÏss
;

724 
ty³Çme
 
	tGTEST_BIND_
(
	tTe¡S–
, 
	tTy³
è
	tTe¡CÏss
;

728 
MakeAndRegi¡”Te¡Info
(

729 (
¡d
::
¡ršg
(
´efix
è+ (´efix[0] =ğ'\0' ? "" : "/"è+ 
ÿ£_Çme
 +

730 "/" + 
ty³_Çmes
[
¡©ic_ÿ¡
<
size_t
>(
šdex
)])

731 .
c_¡r
(),

732 
SŒT¿šgS·ûs
(
G‘P»fixUÁComma
(
‹¡_Çmes
)).
c_¡r
(),

733 
G‘Ty³Name
<
Ty³
>().
c_¡r
(),

734 
nuÎ±r
,

735 
code_loÿtiÚ
, 
G‘Ty³Id
<
Fixtu»CÏss
>(),

736 
Su™eApiResŞv”
<
Te¡CÏss
>::
G‘S‘UpCa£OrSu™e
(

737 
code_loÿtiÚ
.
fe
.
c_¡r
(), code_loÿtiÚ.
lše
),

738 
Su™eApiResŞv”
<
Te¡CÏss
>::
G‘T—rDownCa£OrSu™e
(

739 
code_loÿtiÚ
.
fe
.
c_¡r
(), code_loÿtiÚ.
lše
),

740 
Ãw
 
Te¡FaùÜyIm¶
<
Te¡CÏss
>);

743  
	gTy³P¬am‘”izedTe¡
<
	gFixtu»
, 
	gTe¡S–
,

744 
ty³Çme
 
	gTy³s
::
Ta
>::
Regi¡”
(
´efix
,

745 
code_loÿtiÚ
,

746 
ÿ£_Çme
,

747 
‹¡_Çmes
,

748 
šdex
 + 1,

749 
ty³_Çmes
);

754 
	g‹m¶©e
 <
GTEST_TEMPLATE_
 
	gFixtu»
, 
şass
 
	gTe¡S–
>

755 
şass
 
	gTy³P¬am‘”izedTe¡
<
	gFixtu»
, 
	gTe¡S–
, 
	gš‹º®
::
NÚe
> {

756 
public
:

757 
boŞ
 
Regi¡”
(cÚ¡ * , cÚ¡ 
CodeLoÿtiÚ
&,

760 cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
>& =

761 
¡d
::
veùÜ
<¡d::
¡ršg
>() ) {

762  
Œue
;

766 
GTEST_API_
 
Regi¡”Ty³P¬am‘”izedTe¡Su™e
(cÚ¡ * 
‹¡_su™e_Çme
,

767 
CodeLoÿtiÚ
 
code_loÿtiÚ
);

768 
GTEST_API_
 
Regi¡”Ty³P¬am‘”izedTe¡Su™eIn¡ªtŸtiÚ
(

769 cÚ¡ * 
ÿ£_Çme
);

775 
	g‹m¶©e
 <
GTEST_TEMPLATE_
 
	gFixtu»
, 
ty³Çme
 
	gTe¡s
,y³Çm
	gTy³s
>

776 şas 
	cTy³P¬am‘”izedTe¡Su™e
 {

777 
	gpublic
:

778 
boŞ
 
Regi¡”
(cÚ¡ * 
´efix
, 
CodeLoÿtiÚ
 
code_loÿtiÚ
,

779 cÚ¡ 
Ty³dTe¡Su™ePS‹
* 
¡©e
, cÚ¡ * 
ÿ£_Çme
,

780 cÚ¡ * 
‹¡_Çmes
,

781 cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
>& 
ty³_Çmes
 =

782 
G’”©eNames
<
DeçuÉNameG’”©Ü
, 
Ty³s
>()) {

783 
Regi¡”Ty³P¬am‘”izedTe¡Su™eIn¡ªtŸtiÚ
(
ÿ£_Çme
);

784 
	g¡d
::
¡ršg
 
‹¡_Çme
 = 
SŒT¿šgS·ûs
(

785 
G‘P»fixUÁComma
(
‹¡_Çmes
));

786 ià(!
	g¡©e
->
Te¡Exi¡s
(
‹¡_Çme
)) {

787 
årštf
(
¡d”r
, "Failedo get code†ocation forest %s.%s‡t %s.",

788 
ÿ£_Çme
, 
‹¡_Çme
.
c_¡r
(),

789 
FÜm©FeLoÿtiÚ
(
code_loÿtiÚ
.
fe
.
c_¡r
(),

790 
code_loÿtiÚ
.
lše
).
c_¡r
());

791 
fæush
(
¡d”r
);

792 
	gposix
::
AbÜt
();

794 cÚ¡ 
	gCodeLoÿtiÚ
& 
	g‹¡_loÿtiÚ
 = 
¡©e
->
G‘CodeLoÿtiÚ
(
‹¡_Çme
);

796 
ty³Çme
 
	tTe¡s
::
	tH—d
 Head;

799 
	gTy³P¬am‘”izedTe¡
<
	gFixtu»
, 
	gH—d
, 
	gTy³s
>::
Regi¡”
(

800 
´efix
, 
‹¡_loÿtiÚ
, 
ÿ£_Çme
, 
‹¡_Çmes
, 0, 
ty³_Çmes
);

803  
	gTy³P¬am‘”izedTe¡Su™e
<
	gFixtu»
, 
ty³Çme
 
	gTe¡s
::
Ta
,

804 
	gTy³s
>::
Regi¡”
(
´efix
, 
code_loÿtiÚ
,

805 
¡©e
, 
ÿ£_Çme
,

806 
SkComma
(
‹¡_Çmes
),

807 
ty³_Çmes
);

812 
	g‹m¶©e
 <
GTEST_TEMPLATE_
 
	gFixtu»
, 
ty³Çme
 
	gTy³s
>

813 
şass
 
	gTy³P¬am‘”izedTe¡Su™e
<
	gFixtu»
, 
	gš‹º®
::
NÚe
, 
	gTy³s
> {

814 
	gpublic
:

815 
boŞ
 
Regi¡”
(cÚ¡ * , cÚ¡ 
CodeLoÿtiÚ
&,

816 cÚ¡ 
Ty³dTe¡Su™ePS‹
* ,

818 cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
>& =

819 
¡d
::
veùÜ
<¡d::
¡ršg
>() ) {

820  
Œue
;

834 
GTEST_API_
 
	g¡d
::
¡ršg
 
G‘Cu¼’tOsSckT¿ûExû±Tİ
(

835 
Un™Te¡
* 
un™_‹¡
, 
sk_couÁ
);

841 
GTEST_API_
 
boŞ
 
AlwaysTrue
();

844 
šlše
 
boŞ
 
AlwaysF®£
(è{  !
AlwaysTrue
(); }

849 
GTEST_API_
 
	gCÚ¡Ch¬PŒ
 {

850 
CÚ¡Ch¬PŒ
(cÚ¡ * 
¡r
è: 
v®ue
(str) {}

851 
İ”©Ü
 
boŞ
(ècÚ¡ {  
Œue
; }

852 cÚ¡ * 
	gv®ue
;

857 
	sTrueW™hSŒšg
 {

858 
TrueW™hSŒšg
() = ;

859 
ex¶ic™
 
TrueW™hSŒšg
(cÚ¡ * 
¡r
è: 
v®ue
(str) {}

860 
ex¶ic™
 
TrueW™hSŒšg
(cÚ¡ 
¡d
::
¡ršg
& 
¡r
è: 
v®ue
(str) {}

861 
ex¶ic™
 
İ”©Ü
 
boŞ
(ècÚ¡ {  
Œue
; }

862 
	g¡d
::
¡ršg
 
v®ue
;

870 şas 
	cGTEST_API_
 
	gRªdom
 {

871 
	gpublic
:

872 cÚ¡ 
ušt32_t
 
kMaxRªge
 = 1u << 31;

874 
ex¶ic™
 
Rªdom
(
ušt32_t
 
£ed
è: 
¡©e_
(seed) {}

876 
Re£ed
(
ušt32_t
 
£ed
è{ 
¡©e_
 = seed; }

880 
ušt32_t
 
G’”©e
(ušt32_ˆ
¿nge
);

882 
	g´iv©e
:

883 
ušt32_t
 
¡©e_
;

884 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
Rªdom
);

888 
	#GTEST_REMOVE_REFERENCE_AND_CONST_
(
T
) \

889 
ty³Çme
 
¡d
::
»move_cÚ¡
<ty³Çm¡d::
»move_»ã»nû
<
T
>::
ty³
>::
	)
type

894 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

895 şas 
	cHasDebugSŒšgAndShÜtDebugSŒšg
 {

896 
	g´iv©e
:

897 
‹m¶©e
 <
ty³Çme
 
C
>

898 autØ
CheckDebugSŒšg
(
C
*è-> 
ty³Çme
 
¡d
::
is_§me
<

899 
¡d
::
¡ršg
, 
deşty³
(¡d::
deşv®
<cÚ¡ 
C
>().
DebugSŒšg
())>::
ty³
;

900 
	g‹m¶©e
 <
	gty³Çme
>

901 
	g¡d
::
çl£_ty³
 
CheckDebugSŒšg
(...);

903 
	g‹m¶©e
 <
ty³Çme
 
	gC
>

904 autØ
CheckShÜtDebugSŒšg
(
C
*è-> 
ty³Çme
 
	g¡d
::
is_§me
<

905 
¡d
::
¡ršg
, 
deşty³
(¡d::
deşv®
<cÚ¡ 
C
>().
ShÜtDebugSŒšg
())>::
ty³
;

906 
	g‹m¶©e
 <
	gty³Çme
>

907 
	g¡d
::
çl£_ty³
 
CheckShÜtDebugSŒšg
(...);

909 
usšg
 
	gHasDebugSŒšgTy³
 = 
deşty³
(
CheckDebugSŒšg
<
T
>(
nuÎ±r
));

910 
usšg
 
	gHasShÜtDebugSŒšgTy³
 = 
deşty³
(
CheckShÜtDebugSŒšg
<
T
>(
nuÎ±r
));

912 
	gpublic
:

913 
cÚ¡ex´
 
boŞ
 
v®ue
 =

914 
HasDebugSŒšgTy³
::
v®ue
 && 
HasShÜtDebugSŒšgTy³
::value;

917 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

918 
cÚ¡ex´
 
boŞ
 
	gHasDebugSŒšgAndShÜtDebugSŒšg
<
	gT
>::
v®ue
;

944 
	tIsCÚš”
;

945 
	g‹m¶©e
 <
şass
 
	gC
,

946 
şass
 
	gI‹¿tÜ
 = 
deşty³
(::
¡d
::
deşv®
<cÚ¡ 
C
&>().
begš
()),

947 
	gşass
 = 
deşty³
(::
¡d
::
deşv®
<cÚ¡ 
C
&>().
’d
()),

948 
	gşass
 = 
deşty³
(++::
¡d
::
deşv®
<
I‹¿tÜ
&>()),

949 
	gşass
 = 
deşty³
(*::
¡d
::
deşv®
<
I‹¿tÜ
>()),

950 
	gşass
 = 
ty³Çme
 
C
::
cÚ¡_™”©Ü
>

951 
IsCÚš”
 
IsCÚš”Te¡
() {

955 
	tIsNÙCÚš”
;

956 
	g‹m¶©e
 <
şass
 
	gC
>

957 
IsNÙCÚš”
 
IsCÚš”Te¡
() {  '\0'; }

963 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

964 
	sIsHashTabË
 {

965 
	g´iv©e
:

966 
‹m¶©e
 <
ty³Çme
 
U
>

967 
‹¡
(
ty³Çme
 
U
::
hash”
*,y³ÇmU::
»v”£_™”©Ü
*);

968 
	g‹m¶©e
 <
ty³Çme
 
	gU
>

969 
‹¡
(
ty³Çme
 
U
::
hash”
*, ...);

970 
	g‹m¶©e
 <
ty³Çme
 
	gU
>

971 
‹¡
(...);

973 
	gpublic
:

974 cÚ¡ 
boŞ
 
v®ue
 = (
‹¡
<
T
>(
nuÎ±r
, 
	gnuÎ±r
)) == ();

977 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

978 cÚ¡ 
boŞ
 
	gIsHashTabË
<
	gT
>::
v®ue
;

980 
	g‹m¶©e
 <
ty³Çme
 
	gC
,

981 
	gboŞ
 = (
IsCÚš”Te¡
<
C
>(0)è=ğ(
IsCÚš”
)>

982 
IsRecursiveCÚš”Im¶
;

984 
	g‹m¶©e
 <
ty³Çme
 
	gC
>

985 
	gIsRecursiveCÚš”Im¶
<
	gC
, 
	gçl£
> : 
public
 
¡d
::
çl£_ty³
 {};

991 
	g‹m¶©e
 <
ty³Çme
 
	gC
>

992 
	gIsRecursiveCÚš”Im¶
<
	gC
, 
	gŒue
> {

993 
usšg
 
	gv®ue_ty³
 = 
deşty³
(*
¡d
::
deşv®
<
ty³Çme
 
C
::
cÚ¡_™”©Ü
>());

994 
usšg
 
	gty³
 =

995 
¡d
::
is_§me
<
ty³Çme
 std::
»move_cÚ¡
<

996 
ty³Çme
 
¡d
::
»move_»ã»nû
<
v®ue_ty³
>::
ty³
>::type,

997 
	gC
>;

1006 
	g‹m¶©e
 <
ty³Çme
 
	gC
>

1007 
	gIsRecursiveCÚš”
 : 
public
 
IsRecursiveCÚš”Im¶
<
C
>::
ty³
 {};

1015 
	g‹m¶©e
 <
ty³Çme
 
	gT
,y³Çm
	gU
>

1016 
boŞ
 
A¼ayEq
(cÚ¡ 
T
* 
lhs
, 
size_t
 
size
, cÚ¡ 
U
* 
rhs
);

1019 
	g‹m¶©e
 <
ty³Çme
 
	gT
,y³Çm
	gU
>

1020 
šlše
 
boŞ
 
A¼ayEq
(cÚ¡ 
T
& 
lhs
, cÚ¡ 
U
& 
rhs
è{  
	glhs
 ==„hs; }

1023 
	g‹m¶©e
 <
ty³Çme
 
	gT
,y³Çm
	gU
, 
size_t
 
	gN
>

1024 
šlše
 
boŞ
 
A¼ayEq
(cÚ¡ 
T
(&
lhs
)[
N
], cÚ¡ 
U
(&
rhs
)[N]) {

1025  
	gš‹º®
::
A¼ayEq
(
lhs
, 
N
, 
rhs
);

1031 
	g‹m¶©e
 <
ty³Çme
 
	gT
,y³Çm
	gU
>

1032 
boŞ
 
A¼ayEq
(cÚ¡ 
T
* 
lhs
, 
size_t
 
size
, cÚ¡ 
U
* 
rhs
) {

1033 
size_t
 
	gi
 = 0; i !ğ
size
; i++) {

1034 ià(!
	gš‹º®
::
A¼ayEq
(
lhs
[
i
], 
rhs
[i]))

1035  
	gçl£
;

1037  
	gŒue
;

1042 
	g‹m¶©e
 <
ty³Çme
 
	gI‹r
,y³Çm
	gEËm’t
>

1043 
I‹r
 
A¼ayAw¬eFšd
(I‹¸
begš
, I‹¸
’d
, cÚ¡ 
EËm’t
& 
–em
) {

1044 
I‹r
 
	g™
 = 
begš
; iˆ!ğ
’d
; ++it) {

1045 ià(
	gš‹º®
::
A¼ayEq
(*
™
, 
–em
))

1046  
	g™
;

1048  
	g’d
;

1055 
	g‹m¶©e
 <
ty³Çme
 
	gT
,y³Çm
	gU
>

1056 
CİyA¼ay
(cÚ¡ 
T
* 
äom
, 
size_t
 
size
, 
U
* 
to
);

1059 
	g‹m¶©e
 <
ty³Çme
 
	gT
,y³Çm
	gU
>

1060 
šlše
 
CİyA¼ay
(cÚ¡ 
T
& 
äom
, 
U
* 
to
è{ *
	gto
 = from; }

1063 
	g‹m¶©e
 <
ty³Çme
 
	gT
,y³Çm
	gU
, 
size_t
 
	gN
>

1064 
šlše
 
CİyA¼ay
(cÚ¡ 
T
(&
äom
)[
N
], 
U
(*
to
)[N]) {

1065 
	gš‹º®
::
CİyA¼ay
(
äom
, 
N
, *
to
);

1071 
	g‹m¶©e
 <
ty³Çme
 
	gT
,y³Çm
	gU
>

1072 
CİyA¼ay
(cÚ¡ 
T
* 
äom
, 
size_t
 
size
, 
U
* 
to
) {

1073 
size_t
 
	gi
 = 0; i !ğ
size
; i++) {

1074 
	gš‹º®
::
CİyA¼ay
(
äom
[
i
], 
to
 + i);

1082 
	sR–©iÚToSourûReã»nû
 {};

1083 
	sR–©iÚToSourûCİy
 {};

1093 
	g‹m¶©e
 <
ty³Çme
 
	gEËm’t
>

1094 şas 
	cN©iveA¼ay
 {

1095 
	gpublic
:

1097 
EËm’t
 
	tv®ue_ty³
;

1098 
EËm’t
* 
	t™”©Ü
;

1099 cÚ¡ 
	tEËm’t
* 
	tcÚ¡_™”©Ü
;

1102 
N©iveA¼ay
(cÚ¡ 
EËm’t
* 
¬¿y
, 
size_t
 
couÁ
, 
R–©iÚToSourûReã»nû
) {

1103 
In™Ref
(
¬¿y
, 
couÁ
);

1107 
N©iveA¼ay
(cÚ¡ 
EËm’t
* 
¬¿y
, 
size_t
 
couÁ
, 
R–©iÚToSourûCİy
) {

1108 
In™Cİy
(
¬¿y
, 
couÁ
);

1112 
N©iveA¼ay
(cÚ¡ N©iveA¼ay& 
rhs
) {

1113 (
	gthis
->*
	grhs
.
	gşÚe_
)Ôhs.
	g¬¿y_
,„hs.
	gsize_
);

1116 ~
N©iveA¼ay
() {

1117 ià(
	gşÚe_
 !ğ&
N©iveA¼ay
::
In™Ref
)

1118 
d–‘e
[] 
¬¿y_
;

1122 
size_t
 
size
(ècÚ¡ {  
	gsize_
; }

1123 
cÚ¡_™”©Ü
 
begš
(ècÚ¡ {  
	g¬¿y_
; }

1124 
cÚ¡_™”©Ü
 
’d
(ècÚ¡ {  
	g¬¿y_
 + 
	gsize_
; }

1125 
boŞ
 
	gİ”©Ü
==(cÚ¡ 
N©iveA¼ay
& 
rhs
) const {

1126  
size
(è=ğ
rhs
.size() &&

1127 
A¼ayEq
(
begš
(), 
size
(), 
rhs
.begin());

1130 
	g´iv©e
:

1131 
¡©ic_as£¹
(!
¡d
::
is_cÚ¡
<
EËm’t
>::
v®ue
, "Type must‚ot be const");

1132 
¡©ic_as£¹
(!
¡d
::
is_»ã»nû
<
EËm’t
>::
v®ue
,

1136 
In™Cİy
(cÚ¡ 
EËm’t
* 
¬¿y
, 
size_t
 
a_size
) {

1137 
EËm’t
* cÚ¡ 
	gcİy
 = 
Ãw
 EËm’t[
a_size
];

1138 
CİyA¼ay
(
¬¿y
, 
a_size
, 
cİy
);

1139 
	g¬¿y_
 = 
cİy
;

1140 
	gsize_
 = 
a_size
;

1141 
	gşÚe_
 = &
N©iveA¼ay
::
In™Cİy
;

1145 
In™Ref
(cÚ¡ 
EËm’t
* 
¬¿y
, 
size_t
 
a_size
) {

1146 
	g¬¿y_
 = 
¬¿y
;

1147 
	gsize_
 = 
a_size
;

1148 
	gşÚe_
 = &
N©iveA¼ay
::
In™Ref
;

1151 cÚ¡ 
EËm’t
* 
	g¬¿y_
;

1152 
size_t
 
	gsize_
;

1153 (
	gN©iveA¼ay
::*
şÚe_
)(cÚ¡ 
EËm’t
*, 
	gsize_t
);

1157 
	g‹m¶©e
 <
	gsize_t
... 
	gIs
>

1158 
	sIndexSequ’û
 {

1159 
usšg
 
	gty³
 = 
IndexSequ’û
;

1163 
	g‹m¶©e
 <
boŞ
 
	g¶us_Úe
, 
ty³Çme
 
	gT
, 
size_t
 
	gsizeofT
>

1164 
	gDoubËSequ’û
;

1165 
	g‹m¶©e
 <
	gsize_t
... 
	gI
, 
size_t
 
	gsizeofT
>

1166 
	gDoubËSequ’û
<
	gŒue
, 
	gIndexSequ’û
<
	gI
...>, 
	gsizeofT
> {

1167 
usšg
 
	gty³
 = 
IndexSequ’û
<
I
..., (
	gsizeofT
 + 
	gI
)..., 2 * sizeofT>;

1169 
	g‹m¶©e
 <
	gsize_t
... 
	gI
, 
size_t
 
	gsizeofT
>

1170 
	gDoubËSequ’û
<
	gçl£
, 
	gIndexSequ’û
<
	gI
...>, 
	gsizeofT
> {

1171 
usšg
 
	gty³
 = 
IndexSequ’û
<
I
..., (
	gsizeofT
 + 
	gI
)...>;

1176 
	g‹m¶©e
 <
size_t
 
	gN
>

1177 
	gMakeIndexSequ’ûIm¶


1178 : 
DoubËSequ’û
<
N
 % 2 =ğ1, 
ty³Çme
 
	gMakeIndexSequ’ûIm¶
<
	gN
 / 2>::
ty³
,

1179 
	gN
 / 2>::
ty³
 {};

1181 
	g‹m¶©e
 <>

1182 
	gMakeIndexSequ’ûIm¶
<0> : 
IndexSequ’û
<> {};

1184 
	g‹m¶©e
 <
size_t
 
	gN
>

1185 
usšg
 
	gMakeIndexSequ’û
 = 
ty³Çme
 
MakeIndexSequ’ûIm¶
<
N
>::
ty³
;

1187 
	g‹m¶©e
 <
	gty³Çme
... 
	gT
>

1188 
usšg
 
	gIndexSequ’ûFÜ
 = 
ty³Çme
 
MakeIndexSequ’û
<...(
T
)>::
ty³
;

1190 
	g‹m¶©e
 <
	gsize_t
>

1191 
	sIgnÜe
 {

1192 
IgnÜe
(...);

1195 
	g‹m¶©e
 <
	gty³Çme
>

1196 
	gEËmFromLi¡Im¶
;

1197 
	g‹m¶©e
 <
	gsize_t
... 
	gI
>

1198 
	gEËmFromLi¡Im¶
<
	gIndexSequ’û
<
	gI
...>> {

1203 
	g‹m¶©e
 <
ty³Çme
 
	gR
>

1204 
R
 
Aµly
(
IgnÜe
<0 * 
I
>..., R (*)(), ...);

1207 
	g‹m¶©e
 <
size_t
 
	gN
, 
	gty³Çme
... 
	gT
>

1208 
	sEËmFromLi¡
 {

1209 
usšg
 
	gty³
 =

1210 
deşty³
(
EËmFromLi¡Im¶
<
ty³Çme
 
MakeIndexSequ’û
<
N
>::
ty³
>::
Aµly
(

1211 
¡©ic_ÿ¡
<
T
 (*)()>(
nuÎ±r
)...));

1214 
	sFÏtTu¶eCÚ¡ruùTag
 {};

1216 
	g‹m¶©e
 <
	gty³Çme
... 
	gT
>

1217 
şass
 
	gFÏtTu¶e
;

1219 
	g‹m¶©e
 <
ty³Çme
 
	gD”ived
, 
size_t
 
	gI
>

1220 
	gFÏtTu¶eEËmBa£
;

1222 
	g‹m¶©e
 <
	gty³Çme
... 
	gT
, 
size_t
 
	gI
>

1223 
	gFÏtTu¶eEËmBa£
<
	gFÏtTu¶e
<
	gT
...>, 
	gI
> {

1224 
usšg
 
	gv®ue_ty³
 = 
ty³Çme
 
EËmFromLi¡
<
I
, 
	gT
...>::
ty³
;

1225 
FÏtTu¶eEËmBa£
() = ;

1226 
	g‹m¶©e
 <
ty³Çme
 
	gArg
>

1227 
ex¶ic™
 
FÏtTu¶eEËmBa£
(
FÏtTu¶eCÚ¡ruùTag
, 
Arg
&& 
t
)

1228 : 
v®ue
(
¡d
::
fÜw¬d
<
Arg
>(
t
)) {}

1229 
v®ue_ty³
 
v®ue
;

1232 
	g‹m¶©e
 <
ty³Çme
 
	gD”ived
,y³Çm
	gIdx
>

1233 
	gFÏtTu¶eBa£
;

1235 
	g‹m¶©e
 <
	gsize_t
... 
	gIdx
, 
	gty³Çme
... 
	gT
>

1236 
	gFÏtTu¶eBa£
<
	gFÏtTu¶e
<
	gT
...>, 
	gIndexSequ’û
<
	gIdx
...>>

1237 : 
FÏtTu¶eEËmBa£
<
FÏtTu¶e
<
T
...>, 
	gIdx
>... {

1238 
usšg
 
	gIndiûs
 = 
IndexSequ’û
<
Idx
...>;

1239 
FÏtTu¶eBa£
() = ;

1240 
	g‹m¶©e
 <
	gty³Çme
... 
	gArgs
>

1241 
ex¶ic™
 
FÏtTu¶eBa£
(
FÏtTu¶eCÚ¡ruùTag
, 
Args
&&... 
¬gs
)

1242 : 
FÏtTu¶eEËmBa£
<
FÏtTu¶e
<
T
...>, 
	gIdx
>(
	gFÏtTu¶eCÚ¡ruùTag
{},

1243 
	g¡d
::
fÜw¬d
<
Args
>(
¬gs
))... {}

1245 
‹m¶©e
 <
size_t
 
I
>

1246 cÚ¡ 
ty³Çme
 
EËmFromLi¡
<
I
, 
	gT
...>::
ty³
& 
G‘
() const {

1247  
FÏtTu¶eEËmBa£
<
FÏtTu¶e
<
T
...>, 
	gI
>::
v®ue
;

1250 
	g‹m¶©e
 <
size_t
 
	gI
>

1251 
ty³Çme
 
	gEËmFromLi¡
<
	gI
, 
	gT
...>::
ty³
& 
G‘
() {

1252  
FÏtTu¶eEËmBa£
<
FÏtTu¶e
<
T
...>, 
	gI
>::
v®ue
;

1255 
	g‹m¶©e
 <
ty³Çme
 
	gF
>

1256 autØ
Aµly
(
F
&& 
f
è-> 
deşty³
(
¡d
::
fÜw¬d
<F>(f)(
this
->
G‘
<
Idx
>()...)) {

1257  
¡d
::
fÜw¬d
<
F
>(
f
)(
G‘
<
Idx
>()...);

1260 
	g‹m¶©e
 <
ty³Çme
 
	gF
>

1261 autØ
Aµly
(
F
&& 
f
ècÚ¡ -> 
deşty³
(
¡d
::
fÜw¬d
<F>(f)(
this
->
G‘
<
Idx
>()...)) {

1262  
¡d
::
fÜw¬d
<
F
>(
f
)(
G‘
<
Idx
>()...);

1275 
	g‹m¶©e
 <
	gty³Çme
... 
	gT
>

1276 
şass
 
	gFÏtTu¶e


1277 : 
´iv©e
 
FÏtTu¶eBa£
<
FÏtTu¶e
<
T
...>,

1278 
ty³Çme
 
	gMakeIndexSequ’û
<...(
	gT
)>::
ty³
> {

1279 
usšg
 
Indiûs
 = 
ty³Çme
 
FÏtTu¶eBa£
<

1280 
FÏtTu¶e
<
T
...>, 
ty³Çme
 
	gMakeIndexSequ’û
<...(
	gT
)>::
ty³
>::
Indiûs
;

1282 
	gpublic
:

1283 
FÏtTu¶e
() = ;

1284 
	g‹m¶©e
 <
	gty³Çme
... 
	gArgs
>

1285 
ex¶ic™
 
FÏtTu¶e
(
FÏtTu¶eCÚ¡ruùTag
 
g
, 
Args
&&... 
¬gs
)

1286 : 
FÏtTu¶e
::
FÏtTu¶eBa£
(
g
, 
¡d
::
fÜw¬d
<
Args
>(
¬gs
)...) {}

1288 
usšg
 
FÏtTu¶e
::
FÏtTu¶eBa£
::
Aµly
;

1289 
usšg
 
	gFÏtTu¶e
::
FÏtTu¶eBa£
::
G‘
;

1294 
GTEST_INTERNAL_DEPRECATED
(

1297 
cÚ¡ex´
 
boŞ
 
In¡ªtŸ‹Te¡Ca£_P_IsD•»ÿ‹d
(è{  
	gŒue
; }

1299 
GTEST_INTERNAL_DEPRECATED
(

1302 
cÚ¡ex´
 
boŞ
 
Ty³dTe¡Ca£_P_IsD•»ÿ‹d
(è{  
	gŒue
; }

1304 
GTEST_INTERNAL_DEPRECATED
(

1307 
cÚ¡ex´
 
boŞ
 
Ty³dTe¡Ca£IsD•»ÿ‹d
(è{  
	gŒue
; }

1309 
GTEST_INTERNAL_DEPRECATED
(

1312 
cÚ¡ex´
 
boŞ
 
Regi¡”Ty³dTe¡Ca£_P_IsD•»ÿ‹d
(è{  
	gŒue
; }

1314 
GTEST_INTERNAL_DEPRECATED
(

1317 
cÚ¡ex´
 
boŞ
 
In¡ªtŸ‹Ty³dTe¡Ca£_P_IsD•»ÿ‹d
(è{  
	gŒue
; }

1322 
Çme¥aû
 
	g¡d
 {

1326 #ifdeà
__şªg__


1327 #´agm¨
şªg
 
dŸgno¡ic
 
push


1328 #´agm¨
şªg
 
dŸgno¡ic
 
ignÜed
 "-Wmismatched-tags"

1330 
	g‹m¶©e
 <
	gty³Çme
... 
	gTs
>

1331 
	gtu¶e_size
<
	g‹¡šg
::
š‹º®
::
FÏtTu¶e
<
Ts
...>>

1332 : 
¡d
::
š‹g¿l_cÚ¡ªt
<
size_t
, ...(
	gTs
)> {};

1333 #ifdeà
__şªg__


1334 #´agm¨
şªg
 
dŸgno¡ic
 
pİ


1338 
	#GTEST_MESSAGE_AT_
(
fe
, 
lše
, 
mes§ge
, 
»suÉ_ty³
) \

1339 ::
‹¡šg
::
š‹º®
::
	`As£¹H–³r
(
»suÉ_ty³
, 
fe
, 
lše
, 
mes§ge
) \

1340 ğ::
‹¡šg
::
	`Mes§ge
()

	)

1342 
	#GTEST_MESSAGE_
(
mes§ge
, 
»suÉ_ty³
) \

1343 
	`GTEST_MESSAGE_AT_
(
__FILE__
, 
__LINE__
, 
mes§ge
, 
»suÉ_ty³
)

	)

1345 
	#GTEST_FATAL_FAILURE_
(
mes§ge
) \

1346  
	`GTEST_MESSAGE_
(
mes§ge
, ::
‹¡šg
::
Te¡P¬tResuÉ
::
kF©®Fau»
)

	)

1348 
	#GTEST_NONFATAL_FAILURE_
(
mes§ge
) \

1349 
	`GTEST_MESSAGE_
(
mes§ge
, ::
‹¡šg
::
Te¡P¬tResuÉ
::
kNÚF©®Fau»
)

	)

1351 
	#GTEST_SUCCESS_
(
mes§ge
) \

1352 
	`GTEST_MESSAGE_
(
mes§ge
, ::
‹¡šg
::
Te¡P¬tResuÉ
::
kSucûss
)

	)

1354 
	#GTEST_SKIP_
(
mes§ge
) \

1355  
	`GTEST_MESSAGE_
(
mes§ge
, ::
‹¡šg
::
Te¡P¬tResuÉ
::
kSk
)

	)

1362 
	#GTEST_SUPPRESS_UNREACHABLE_CODE_WARNING_BELOW_
(
¡©em’t
) \

1363 ià(::
‹¡šg
::
š‹º®
::
	`AlwaysTrue
()) { \

1364 
¡©em’t
; \

1366 
	`¡©ic_as£¹
(
Œue
, "")

1367 

	)

1368 #ià
GTEST_HAS_EXCEPTIONS


1370 
Çme¥aû
 
	g‹¡šg
 {

1371 
Çme¥aû
 
	gš‹º®
 {

1373 şas 
	cNev”Thrown
 {

1374 
	gpublic
:

1375 cÚ¡ * 
wh©
(ècÚ¡ 
nÛxû±
 {

1383 #ià
GTEST_HAS_RTTI


1385 
	#GTEST_EXCEPTION_TYPE_
(
e
è::
‹¡šg
::
š‹º®
::
	`G‘Ty³Name
(
	`ty³id
Ó))

	)

1389 
	#GTEST_EXCEPTION_TYPE_
(
e
) \

1390 
¡d
::
¡ršg
 { "ª std::exû±iÚ-d”ivedƒ¼Ü" }

	)

1394 
	#GTEST_TEST_THROW_CATCH_STD_EXCEPTION_
(
¡©em’t
, 
ex³ùed_exû±iÚ
) \

1395 
	`ÿtch
 (
ty³Çme
 
¡d
::
cÚd™iÚ®
< \

1396 
¡d
::
is_§me
<
ty³Çme
 std::
»move_cv
<ty³Çm¡d::
»move_»ã»nû
< \

1397 
ex³ùed_exû±iÚ
>::
ty³
>::type, \

1398 
¡d
::
exû±iÚ
>::
v®ue
, \

1399 cÚ¡ ::
‹¡šg
::
š‹º®
::
Nev”Thrown
&, cÚ¡ 
¡d
::
exû±iÚ
&>::
ty³
 \

1400 
e
) { \

1401 
g‹¡_msg
.
v®ue
 = "Expected: " #statement \

1404 
g‹¡_msg
.
v®ue
 +ğ
	`GTEST_EXCEPTION_TYPE_
(
e
); \

1405 
g‹¡_msg
.
v®ue
 += " with description \""; \

1406 
g‹¡_msg
.
v®ue
 +ğ
e
.
	`wh©
(); \

1407 
g‹¡_msg
.
v®ue
 += "\"."; \

1408 
	`GTEST_CONCAT_TOKEN_
(
g‹¡_Ïb–_‹¡throw_
, 
__LINE__
); \

1409 }

	)

1413 
	#GTEST_TEST_THROW_CATCH_STD_EXCEPTION_
(
¡©em’t
, 
ex³ùed_exû±iÚ
)

	)

1417 
	#GTEST_TEST_THROW_
(
¡©em’t
, 
ex³ùed_exû±iÚ
, 
ç
) \

1418 
GTEST_AMBIGUOUS_ELSE_BLOCKER_
 \

1419 ià(::
‹¡šg
::
š‹º®
::
TrueW™hSŒšg
 
g‹¡_msg
{}) { \

1420 
boŞ
 
g‹¡_ÿught_ex³ùed
 = 
çl£
; \

1421 
Œy
 { \

1422 
	`GTEST_SUPPRESS_UNREACHABLE_CODE_WARNING_BELOW_
(
¡©em’t
); \

1423 } 
	`ÿtch
 (
ex³ùed_exû±iÚ
 const&) { \

1424 
g‹¡_ÿught_ex³ùed
 = 
Œue
; \

1426 
	`GTEST_TEST_THROW_CATCH_STD_EXCEPTION_
(
¡©em’t
, 
ex³ùed_exû±iÚ
) \

1427 
	`ÿtch
 (...) { \

1428 
g‹¡_msg
.
v®ue
 = "Expected: " #statement \

1431 
	`GTEST_CONCAT_TOKEN_
(
g‹¡_Ïb–_‹¡throw_
, 
__LINE__
); \

1433 ià(!
g‹¡_ÿught_ex³ùed
) { \

1434 
g‹¡_msg
.
v®ue
 = "Expected: " #statement \

1437 
	`GTEST_CONCAT_TOKEN_
(
g‹¡_Ïb–_‹¡throw_
, 
__LINE__
); \

1440 
	`GTEST_CONCAT_TOKEN_
(
g‹¡_Ïb–_‹¡throw_
, 
__LINE__
) \

1441 : 
	`ç
(
g‹¡_msg
.
v®ue
.
	`c_¡r
())

	)

1443 #ià
GTEST_HAS_EXCEPTIONS


1445 
	#GTEST_TEST_NO_THROW_CATCH_STD_EXCEPTION_
() \

1446 
	`ÿtch
 (
¡d
::
exû±iÚ
 cÚ¡& 
e
) { \

1447 
g‹¡_msg
.
v®ue
 = "ithrows "; \

1448 
g‹¡_msg
.
v®ue
 +ğ
	`GTEST_EXCEPTION_TYPE_
(
e
); \

1449 
g‹¡_msg
.
v®ue
 += " with description \""; \

1450 
g‹¡_msg
.
v®ue
 +ğ
e
.
	`wh©
(); \

1451 
g‹¡_msg
.
v®ue
 += "\"."; \

1452 
	`GTEST_CONCAT_TOKEN_
(
g‹¡_Ïb–_‹¡nÙhrow_
, 
__LINE__
); \

1453 }

	)

1457 
	#GTEST_TEST_NO_THROW_CATCH_STD_EXCEPTION_
()

	)

1461 
	#GTEST_TEST_NO_THROW_
(
¡©em’t
, 
ç
) \

1462 
GTEST_AMBIGUOUS_ELSE_BLOCKER_
 \

1463 ià(::
‹¡šg
::
š‹º®
::
TrueW™hSŒšg
 
g‹¡_msg
{}) { \

1464 
Œy
 { \

1465 
	`GTEST_SUPPRESS_UNREACHABLE_CODE_WARNING_BELOW_
(
¡©em’t
); \

1467 
	`GTEST_TEST_NO_THROW_CATCH_STD_EXCEPTION_
() \

1468 
	`ÿtch
 (...) { \

1469 
g‹¡_msg
.
v®ue
 = "ithrows."; \

1470 
	`GTEST_CONCAT_TOKEN_
(
g‹¡_Ïb–_‹¡nÙhrow_
, 
__LINE__
); \

1473 
	`GTEST_CONCAT_TOKEN_
(
g‹¡_Ïb–_‹¡nÙhrow_
, 
__LINE__
): \

1474 
	`ç
(("Expected: " #statement " doesn'throw‡nƒxception.\n" \

1475 " Aùu®: " + 
g‹¡_msg
.
v®ue
).
	`c_¡r
())

	)

1477 
	#GTEST_TEST_ANY_THROW_
(
¡©em’t
, 
ç
) \

1478 
GTEST_AMBIGUOUS_ELSE_BLOCKER_
 \

1479 ià(::
‹¡šg
::
š‹º®
::
	`AlwaysTrue
()) { \

1480 
boŞ
 
g‹¡_ÿught_ªy
 = 
çl£
; \

1481 
Œy
 { \

1482 
	`GTEST_SUPPRESS_UNREACHABLE_CODE_WARNING_BELOW_
(
¡©em’t
); \

1484 
	`ÿtch
 (...) { \

1485 
g‹¡_ÿught_ªy
 = 
Œue
; \

1487 ià(!
g‹¡_ÿught_ªy
) { \

1488 
	`GTEST_CONCAT_TOKEN_
(
g‹¡_Ïb–_‹¡ªythrow_
, 
__LINE__
); \

1491 
	`GTEST_CONCAT_TOKEN_
(
g‹¡_Ïb–_‹¡ªythrow_
, 
__LINE__
): \

1492 
	`ç
("Expected: " #statement "hrows‡nƒxception.\n" \

1493 " Aùu®: iˆdÛ¢'t.")

	)

1499 
	#GTEST_TEST_BOOLEAN_
(
ex´essiÚ
, 
‹xt
, 
aùu®
, 
ex³ùed
, 
ç
) \

1500 
GTEST_AMBIGUOUS_ELSE_BLOCKER_
 \

1501 ià(cÚ¡ ::
‹¡šg
::
As£¹iÚResuÉ
 
g‹¡_¬_
 = \

1502 ::
‹¡šg
::
	`As£¹iÚResuÉ
(
ex´essiÚ
)) \

1505 
	`ç
(::
‹¡šg
::
š‹º®
::
	`G‘BoŞAs£¹iÚFau»Mes§ge
(\

1506 
g‹¡_¬_
, 
‹xt
, #aùu®, #ex³ùed).
	`c_¡r
())

	)

1508 
	#GTEST_TEST_NO_FATAL_FAILURE_
(
¡©em’t
, 
ç
) \

1509 
GTEST_AMBIGUOUS_ELSE_BLOCKER_
 \

1510 ià(::
‹¡šg
::
š‹º®
::
	`AlwaysTrue
()) { \

1511 ::
‹¡šg
::
š‹º®
::
HasNewF©®Fau»H–³r
 
g‹¡_çl_çu»_check”
; \

1512 
	`GTEST_SUPPRESS_UNREACHABLE_CODE_WARNING_BELOW_
(
¡©em’t
); \

1513 ià(
g‹¡_çl_çu»_check”
.
	`has_Ãw_çl_çu»
()) { \

1514 
	`GTEST_CONCAT_TOKEN_
(
g‹¡_Ïb–_‹¡noçl_
, 
__LINE__
); \

1517 
	`GTEST_CONCAT_TOKEN_
(
g‹¡_Ïb–_‹¡noçl_
, 
__LINE__
): \

1518 
	`ç
("Expected: " #statement " doesn't generate‚ew fatal " \

1520 " Aùu®: iˆdÛs.")

	)

1523 
	#GTEST_TEST_CLASS_NAME_
(
‹¡_su™e_Çme
, 
‹¡_Çme
) \

1524 
‹¡_su™e_Çme
##
_
##
‹¡_Çme
##
_Te¡


	)

1527 
	#GTEST_TEST_
(
‹¡_su™e_Çme
, 
‹¡_Çme
, 
·»Á_şass
, 
·»Á_id
) \

1528 
	`¡©ic_as£¹
((
	`GTEST_STRINGIFY_
(
‹¡_su™e_Çme
)) > 1, \

1530 
	`¡©ic_as£¹
((
	`GTEST_STRINGIFY_
(
‹¡_Çme
)) > 1, \

1532 
şass
 
	`GTEST_TEST_CLASS_NAME_
(
‹¡_su™e_Çme
, 
‹¡_Çme
) \

1533 : 
public
 
·»Á_şass
 { \

1534 
public
: \

1535 
	`GTEST_TEST_CLASS_NAME_
(
‹¡_su™e_Çme
, 
‹¡_Çme
)() = ; \

1536 ~
	`GTEST_TEST_CLASS_NAME_
(
‹¡_su™e_Çme
, 
‹¡_Çme
)(è
ov”ride
 = ; \

1537 
	`GTEST_DISALLOW_COPY_AND_ASSIGN_
(
	`GTEST_TEST_CLASS_NAME_
(
‹¡_su™e_Çme
, \

1538 
‹¡_Çme
)); \

1539 
	`GTEST_DISALLOW_MOVE_AND_ASSIGN_
(
	`GTEST_TEST_CLASS_NAME_
(
‹¡_su™e_Çme
, \

1540 
‹¡_Çme
)); \

1542 
´iv©e
: \

1543 
	`Te¡Body
(è
ov”ride
; \

1544 ::
‹¡šg
::
Te¡Info
* cÚ¡ 
‹¡_šfo_
 
GTEST_ATTRIBUTE_UNUSED_
; \

1547 ::
‹¡šg
::
Te¡Info
* cÚ¡ 
	`GTEST_TEST_CLASS_NAME_
(
‹¡_su™e_Çme
, \

1548 
‹¡_Çme
)::
‹¡_šfo_
 = \

1549 ::
‹¡šg
::
š‹º®
::
	`MakeAndRegi¡”Te¡Info
( \

1550 #‹¡_su™e_Çme, #‹¡_Çme, 
nuÎ±r
,‚ullptr, \

1551 ::
‹¡šg
::
š‹º®
::
	`CodeLoÿtiÚ
(
__FILE__
, 
__LINE__
), (
·»Á_id
), \

1552 ::
‹¡šg
::
š‹º®
::
Su™eApiResŞv”
< \

1553 
·»Á_şass
>::
	`G‘S‘UpCa£OrSu™e
(
__FILE__
, 
__LINE__
), \

1554 ::
‹¡šg
::
š‹º®
::
Su™eApiResŞv”
< \

1555 
·»Á_şass
>::
	`G‘T—rDownCa£OrSu™e
(
__FILE__
, 
__LINE__
), \

1556 
Ãw
 ::
‹¡šg
::
š‹º®
::
Te¡FaùÜyIm¶
<
	`GTEST_TEST_CLASS_NAME_
( \

1557 
‹¡_su™e_Çme
, 
‹¡_Çme
)>); \

1558 
	`GTEST_TEST_CLASS_NAME_
(
‹¡_su™e_Çme
, 
‹¡_Çme
)::
	`Te¡Body
()

	)

	@third_party/googletest/googletest/include/gtest/internal/gtest-param-util.h

35 #iâdeà
GOOGLETEST_INCLUDE_GTEST_INTERNAL_GTEST_PARAM_UTIL_H_


36 
	#GOOGLETEST_INCLUDE_GTEST_INTERNAL_GTEST_PARAM_UTIL_H_


	)

38 
	~<ùy³.h
>

40 
	~<ÿs£¹
>

41 
	~<™”©Ü
>

42 
	~<memÜy
>

43 
	~<£t
>

44 
	~<tu¶e
>

45 
	~<ty³_Œa™s
>

46 
	~<ut™y
>

47 
	~<veùÜ
>

49 
	~"g‹¡/š‹º®/g‹¡-š‹º®.h
"

50 
	~"g‹¡/š‹º®/g‹¡-pÜt.h
"

51 
	~"g‹¡/g‹¡-´š‹rs.h
"

52 
	~"g‹¡/g‹¡-‹¡-·¹.h
"

54 
Çme¥aû
 
	g‹¡šg
 {

57 
	g‹m¶©e
 <
şass
 
	gP¬amTy³
>

58 
	sTe¡P¬amInfo
 {

59 
Te¡P¬amInfo
(cÚ¡ 
P¬amTy³
& 
a_·¿m
, 
size_t
 
ª_šdex
) :

60 
·¿m
(
a_·¿m
),

61 
šdex
(
ª_šdex
) {}

62 
P¬amTy³
 
	g·¿m
;

63 
size_t
 
	gšdex
;

68 
	sPrštToSŒšgP¬amName
 {

69 
	g‹m¶©e
 <
şass
 
	gP¬amTy³
>

70 
	g¡d
::
¡ršg
 
İ”©Ü
()(cÚ¡ 
Te¡P¬amInfo
<
P¬amTy³
>& 
šfo
) const {

71  
PrštToSŒšg
(
šfo
.
·¿m
);

75 
Çme¥aû
 
	gš‹º®
 {

84 
GTEST_API_
 
R•ÜtInv®idTe¡Su™eTy³
(cÚ¡ * 
‹¡_su™e_Çme
,

85 
CodeLoÿtiÚ
 
code_loÿtiÚ
);

87 
	g‹m¶©e
 <
	gty³Çme
> 
şass
 
	gP¬amG’”©ÜIÁ”çû
;

88 
	g‹m¶©e
 <
	gty³Çme
> 
şass
 
	gP¬amG’”©Ü
;

92 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

93 şas 
	cP¬amI‹¿tÜIÁ”çû
 {

94 
	gpublic
:

95 
vœtu®
 ~
P¬amI‹¿tÜIÁ”çû
() {}

99 
vœtu®
 cÚ¡ 
P¬amG’”©ÜIÁ”çû
<
T
>* 
Ba£G’”©Ü
() const = 0;

104 
vœtu®
 
Advªû
() = 0;

107 
vœtu®
 
P¬amI‹¿tÜIÁ”çû
* 
ClÚe
() const = 0;

112 
vœtu®
 cÚ¡ 
T
* 
Cu¼’t
() const = 0;

116 
vœtu®
 
boŞ
 
Equ®s
(cÚ¡ 
P¬amI‹¿tÜIÁ”çû
& 
Ùh”
) const = 0;

122 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

123 şas 
	cP¬amI‹¿tÜ
 {

124 
	gpublic
:

125 
T
 
	tv®ue_ty³
;

126 cÚ¡ 
	tT
& 
	t»ã»nû
;

127 
±rdiff_t
 
	tdifã»nû_ty³
;

130 
P¬amI‹¿tÜ
(cÚ¡ P¬amI‹¿tÜ& 
Ùh”
è: 
im¶_
(Ùh”.im¶_->
ClÚe
()) {}

131 
P¬amI‹¿tÜ
& 
İ”©Ü
=(cÚ¡ P¬amI‹¿tÜ& 
Ùh”
) {

132 ià(
this
 !ğ&
Ùh”
)

133 
im¶_
.
»£t
(
Ùh”
.im¶_->
ClÚe
());

134  *
	gthis
;

137 cÚ¡ 
	gT
& 
	gİ”©Ü
*(ècÚ¡ {  *
	gim¶_
->
Cu¼’t
(); }

138 cÚ¡ 
T
* 
	gİ”©Ü
->(ècÚ¡ {  
	gim¶_
->
Cu¼’t
(); }

140 
	gP¬amI‹¿tÜ
& 
	gİ”©Ü
++() {

141 
	gim¶_
->
Advªû
();

142  *
	gthis
;

145 
P¬amI‹¿tÜ
 
	gİ”©Ü
++() {

146 
	gP¬amI‹¿tÜIÁ”çû
<
	gT
>* 
	gşÚe
 = 
im¶_
->
ClÚe
();

147 
	gim¶_
->
Advªû
();

148  
P¬amI‹¿tÜ
(
şÚe
);

150 
boŞ
 
	gİ”©Ü
==(cÚ¡ 
P¬amI‹¿tÜ
& 
Ùh”
) const {

151  
im¶_
.
g‘
(è=ğ
Ùh”
.im¶_.g‘(è|| im¶_->
Equ®s
(*other.impl_);

153 
boŞ
 
	gİ”©Ü
!=(cÚ¡ 
P¬amI‹¿tÜ
& 
Ùh”
) const {

154  !(*
this
 =ğ
Ùh”
);

157 
	g´iv©e
:

158 
ä›nd
 
şass
 
P¬amG’”©Ü
<
T
>;

159 
ex¶ic™
 
P¬amI‹¿tÜ
(
P¬amI‹¿tÜIÁ”çû
<
T
>* 
im¶
è: 
im¶_
(impl) {}

160 
¡d
::
unique_±r
<
P¬amI‹¿tÜIÁ”çû
<
T
> > 
im¶_
;

165 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

166 şas 
	cP¬amG’”©ÜIÁ”çû
 {

167 
	gpublic
:

168 
T
 
	tP¬amTy³
;

170 
	gvœtu®
 ~
P¬amG’”©ÜIÁ”çû
() {}

173 
vœtu®
 
	gP¬amI‹¿tÜIÁ”çû
<
	gT
>* 
Begš
() const = 0;

174 
vœtu®
 
	gP¬amI‹¿tÜIÁ”çû
<
	gT
>* 
End
() const = 0;

182 
	g‹m¶©e
<
ty³Çme
 
	gT
>

183 şas 
	cP¬amG’”©Ü
 {

184 
	gpublic
:

185 
P¬amI‹¿tÜ
<
	tT
> 
	t™”©Ü
;

187 
ex¶ic™
 
P¬amG’”©Ü
(
P¬amG’”©ÜIÁ”çû
<
T
>* 
im¶
è: 
im¶_
(impl) {}

188 
P¬amG’”©Ü
(cÚ¡ P¬amG’”©Ü& 
Ùh”
è: 
im¶_
(other.impl_) {}

190 
P¬amG’”©Ü
& 
İ”©Ü
=(cÚ¡ P¬amG’”©Ü& 
Ùh”
) {

191 
im¶_
 = 
Ùh”
.impl_;

192  *
	gthis
;

195 
™”©Ü
 
begš
(ècÚ¡ {  i‹¿tÜ(
im¶_
->
Begš
()); }

196 
™”©Ü
 
’d
(ècÚ¡ {  i‹¿tÜ(
im¶_
->
End
()); }

198 
	g´iv©e
:

199 
¡d
::
sh¬ed_±r
<cÚ¡ 
P¬amG’”©ÜIÁ”çû
<
T
> > 
im¶_
;

206 
	g‹m¶©e
 <
ty³Çme
 
	gT
,y³Çm
	gInüem’tT
>

207 
şass
 
	gRªgeG’”©Ü
 : 
public
 
P¬amG’”©ÜIÁ”çû
<
T
> {

208 
public
:

209 
RªgeG’”©Ü
(
T
 
begš
, T 
’d
, 
Inüem’tT
 
¡•
)

210 : 
begš_
(
begš
), 
’d_
(
’d
),

211 
¡•_
(
¡•
), 
’d_šdex_
(
C®cuÏ‹EndIndex
(
begš
, 
’d
, step)) {}

212 ~
RªgeG’”©Ü
(è
	gov”ride
 {}

214 
	gP¬amI‹¿tÜIÁ”çû
<
	gT
>* 
Begš
(ècÚ¡ 
	gov”ride
 {

215  
Ãw
 
I‹¿tÜ
(
this
, 
begš_
, 0, 
¡•_
);

217 
	gP¬amI‹¿tÜIÁ”çû
<
	gT
>* 
End
(ècÚ¡ 
	gov”ride
 {

218  
Ãw
 
I‹¿tÜ
(
this
, 
’d_
, 
’d_šdex_
, 
¡•_
);

221 
	g´iv©e
:

222 
şass
 
I‹¿tÜ
 : 
public
 
P¬amI‹¿tÜIÁ”çû
<
T
> {

223 
public
:

224 
I‹¿tÜ
(cÚ¡ 
P¬amG’”©ÜIÁ”çû
<
T
>* 
ba£
, T 
v®ue
, 
šdex
,

225 
Inüem’tT
 
¡•
)

226 : 
ba£_
(
ba£
), 
v®ue_
(
v®ue
), 
šdex_
(
šdex
), 
¡•_
(
¡•
) {}

227 ~
I‹¿tÜ
(è
	gov”ride
 {}

229 cÚ¡ 
	gP¬amG’”©ÜIÁ”çû
<
	gT
>* 
Ba£G’”©Ü
(ècÚ¡ 
	gov”ride
 {

230  
	gba£_
;

232 
Advªû
(è
	gov”ride
 {

233 
	gv®ue_
 = 
¡©ic_ÿ¡
<
T
>(
v®ue_
 + 
¡•_
);

234 
	gšdex_
++;

236 
	gP¬amI‹¿tÜIÁ”çû
<
	gT
>* 
ClÚe
(ècÚ¡ 
	gov”ride
 {

237  
Ãw
 
I‹¿tÜ
(*
this
);

239 cÚ¡ 
T
* 
Cu¼’t
(ècÚ¡ 
	gov”ride
 {  &
	gv®ue_
; }

240 
boŞ
 
Equ®s
(cÚ¡ 
P¬amI‹¿tÜIÁ”çû
<
T
>& 
Ùh”
ècÚ¡ 
	gov”ride
 {

243 
GTEST_CHECK_
(
Ba£G’”©Ü
(è=ğ
Ùh”
.BaseGenerator())

245 << "äom difã»Á g’”©Üs." << 
¡d
::
’dl
;

246 cÚ¡ 
	gÙh”_šdex
 =

247 
CheckedDownÿ¡ToAùu®Ty³
<cÚ¡ 
I‹¿tÜ
>(&
Ùh”
)->
šdex_
;

248  
	gšdex_
 =ğ
Ùh”_šdex
;

251 
	g´iv©e
:

252 
I‹¿tÜ
(cÚ¡ I‹¿tÜ& 
Ùh”
)

253 : 
P¬amI‹¿tÜIÁ”çû
<
T
>(),

254 
ba£_
(
Ùh”
.ba£_), 
v®ue_
(Ùh”.v®ue_), 
šdex_
(other.index_),

255 
¡•_
(
Ùh”
.step_) {}

258 
	gİ”©Ü
=(cÚ¡ 
I‹¿tÜ
& 
Ùh”
);

260 cÚ¡ 
	gP¬amG’”©ÜIÁ”çû
<
	gT
>* cÚ¡ 
	gba£_
;

261 
T
 
	gv®ue_
;

262 
	gšdex_
;

263 cÚ¡ 
Inüem’tT
 
	g¡•_
;

266 
C®cuÏ‹EndIndex
(cÚ¡ 
T
& 
begš
,

267 cÚ¡ 
T
& 
’d
,

268 cÚ¡ 
Inüem’tT
& 
¡•
) {

269 
	g’d_šdex
 = 0;

270 
T
 
	gi
 = 
begš
; i < 
	g’d
; i = 
¡©ic_ÿ¡
<T>(
i
 + 
¡•
))

271 
’d_šdex
++;

272  
	g’d_šdex
;

276 
	gİ”©Ü
=(cÚ¡ 
RªgeG’”©Ü
& 
Ùh”
);

278 cÚ¡ 
T
 
	gbegš_
;

279 cÚ¡ 
T
 
	g’d_
;

280 cÚ¡ 
Inüem’tT
 
	g¡•_
;

283 cÚ¡ 
	g’d_šdex_
;

291 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

292 
şass
 
	gV®uesInI‹¿tÜRªgeG’”©Ü
 : 
public
 
P¬amG’”©ÜIÁ”çû
<
T
> {

293 
public
:

294 
‹m¶©e
 <
ty³Çme
 
FÜw¬dI‹¿tÜ
>

295 
V®uesInI‹¿tÜRªgeG’”©Ü
(
FÜw¬dI‹¿tÜ
 
begš
, FÜw¬dI‹¿tÜ 
’d
)

296 : 
cÚš”_
(
begš
, 
’d
) {}

297 ~
V®uesInI‹¿tÜRªgeG’”©Ü
(è
	gov”ride
 {}

299 
	gP¬amI‹¿tÜIÁ”çû
<
	gT
>* 
Begš
(ècÚ¡ 
	gov”ride
 {

300  
Ãw
 
I‹¿tÜ
(
this
, 
cÚš”_
.
begš
());

302 
	gP¬amI‹¿tÜIÁ”çû
<
	gT
>* 
End
(ècÚ¡ 
	gov”ride
 {

303  
Ãw
 
I‹¿tÜ
(
this
, 
cÚš”_
.
’d
());

306 
	g´iv©e
:

307 
ty³Çme
 ::
	t¡d
::
	tveùÜ
<
	tT
> 
	tCÚš”Ty³
;

309 
şass
 
	gI‹¿tÜ
 : 
public
 
P¬amI‹¿tÜIÁ”çû
<
T
> {

310 
public
:

311 
I‹¿tÜ
(cÚ¡ 
P¬amG’”©ÜIÁ”çû
<
T
>* 
ba£
,

312 
ty³Çme
 
CÚš”Ty³
::
cÚ¡_™”©Ü
 
™”©Ü
)

313 : 
ba£_
(
ba£
), 
™”©Ü_
(
™”©Ü
) {}

314 ~
I‹¿tÜ
(è
	gov”ride
 {}

316 cÚ¡ 
	gP¬amG’”©ÜIÁ”çû
<
	gT
>* 
Ba£G’”©Ü
(ècÚ¡ 
	gov”ride
 {

317  
	gba£_
;

319 
Advªû
(è
	gov”ride
 {

320 ++
	g™”©Ü_
;

321 
	gv®ue_
.
»£t
();

323 
	gP¬amI‹¿tÜIÁ”çû
<
	gT
>* 
ClÚe
(ècÚ¡ 
	gov”ride
 {

324  
Ãw
 
I‹¿tÜ
(*
this
);

333 cÚ¡ 
T
* 
Cu¼’t
(ècÚ¡ 
	gov”ride
 {

334 ià(
	gv®ue_
.
g‘
(è=ğ
nuÎ±r
è
v®ue_
.
»£t
(
Ãw
 
T
(*
™”©Ü_
));

335  
	gv®ue_
.
g‘
();

337 
boŞ
 
Equ®s
(cÚ¡ 
P¬amI‹¿tÜIÁ”çû
<
T
>& 
Ùh”
ècÚ¡ 
	gov”ride
 {

340 
GTEST_CHECK_
(
Ba£G’”©Ü
(è=ğ
Ùh”
.BaseGenerator())

342 << "äom difã»Á g’”©Üs." << 
¡d
::
’dl
;

343  
	g™”©Ü_
 ==

344 
CheckedDownÿ¡ToAùu®Ty³
<cÚ¡ 
I‹¿tÜ
>(&
Ùh”
)->
™”©Ü_
;

347 
	g´iv©e
:

348 
I‹¿tÜ
(cÚ¡ I‹¿tÜ& 
Ùh”
)

351 : 
P¬amI‹¿tÜIÁ”çû
<
T
>(),

352 
ba£_
(
Ùh”
.base_),

353 
™”©Ü_
(
Ùh”
.iterator_) {}

355 cÚ¡ 
	gP¬amG’”©ÜIÁ”çû
<
	gT
>* cÚ¡ 
	gba£_
;

356 
ty³Çme
 
	gCÚš”Ty³
::
cÚ¡_™”©Ü
 
™”©Ü_
;

362 
mubË
 
	g¡d
::
unique_±r
<cÚ¡ 
T
> 
v®ue_
;

366 
	gİ”©Ü
=(cÚ¡ 
V®uesInI‹¿tÜRªgeG’”©Ü
& 
Ùh”
);

368 cÚ¡ 
CÚš”Ty³
 
	gcÚš”_
;

375 
	g‹m¶©e
 <
şass
 
	gP¬amTy³
>

376 
	g¡d
::
¡ršg
 
DeçuÉP¬amName
(cÚ¡ 
Te¡P¬amInfo
<
P¬amTy³
>& 
šfo
) {

377 
Mes§ge
 
Çme_¡»am
;

378 
	gÇme_¡»am
 << 
	gšfo
.
	gšdex
;

379  
	gÇme_¡»am
.
G‘SŒšg
();

382 
	g‹m¶©e
 <
ty³Çme
 
	gT
 = >

383 
Te¡NÙEm±y
() {

384 
¡©ic_as£¹
((
T
) == 0, "Empty‡rguments‡re‚ot‡llowed.");

386 
	g‹m¶©e
 <
ty³Çme
 
	gT
 = >

387 
Te¡NÙEm±y
(cÚ¡ 
T
&) {}

393 
‹m¶©e
 <
şass
 
Te¡CÏss
>

394 şas 
	cP¬am‘”izedTe¡FaùÜy
 : 
public
 
Te¡FaùÜyBa£
 {

395 
public
:

396 
ty³Çme
 
	tTe¡CÏss
::
	tP¬amTy³
 ParamType;

397 
ex¶ic™
 
P¬am‘”izedTe¡FaùÜy
(
P¬amTy³
 
·¿m‘”
) :

398 
·¿m‘”_
(
·¿m‘”
) {}

399 
Te¡
* 
C»©eTe¡
(è
ov”ride
 {

400 
Te¡CÏss
::
S‘P¬am
(&
·¿m‘”_
);

401  
Ãw
 
Te¡CÏss
();

404 
	g´iv©e
:

405 cÚ¡ 
P¬amTy³
 
·¿m‘”_
;

407 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
P¬am‘”izedTe¡FaùÜy
);

414 
	g‹m¶©e
 <
şass
 
	gP¬amTy³
>

415 şas 
	cTe¡M‘aFaùÜyBa£
 {

416 
	gpublic
:

417 
vœtu®
 ~
Te¡M‘aFaùÜyBa£
() {}

419 
vœtu®
 
Te¡FaùÜyBa£
* 
C»©eTe¡FaùÜy
(
P¬amTy³
 
·¿m‘”
) = 0;

430 
	g‹m¶©e
 <
şass
 
	gTe¡Su™e
>

431 
şass
 
	gTe¡M‘aFaùÜy


432 : 
public
 
Te¡M‘aFaùÜyBa£
<
ty³Çme
 
Te¡Su™e
::
P¬amTy³
> {

433 
public
:

434 
usšg
 
P¬amTy³
 = 
ty³Çme
 
Te¡Su™e
::ParamType;

436 
Te¡M‘aFaùÜy
() {}

438 
Te¡FaùÜyBa£
* 
C»©eTe¡FaùÜy
(
P¬amTy³
 
·¿m‘”
è
	gov”ride
 {

439  
Ãw
 
	gP¬am‘”izedTe¡FaùÜy
<
	gTe¡Su™e
>(
	g·¿m‘”
);

442 
	g´iv©e
:

443 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
Te¡M‘aFaùÜy
);

456 şas 
	cP¬am‘”izedTe¡Su™eInfoBa£
 {

457 
	gpublic
:

458 
vœtu®
 ~
P¬am‘”izedTe¡Su™eInfoBa£
() {}

461 
vœtu®
 cÚ¡ 
¡d
::
¡ršg
& 
G‘Te¡Su™eName
() const = 0;

463 
vœtu®
 
Ty³Id
 
G‘Te¡Su™eTy³Id
() const = 0;

468 
vœtu®
 
Regi¡”Te¡s
() = 0;

470 
	g´Ùeùed
:

471 
P¬am‘”izedTe¡Su™eInfoBa£
() {}

473 
´iv©e
:

474 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
P¬am‘”izedTe¡Su™eInfoBa£
);

481 
	sM¬kAsIgnÜed
 {

482 
ex¶ic™
 
M¬kAsIgnÜed
(cÚ¡ * 
‹¡_su™e
);

485 
GTEST_API_
 
In£¹SyÁh‘icTe¡Ca£
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
,

486 
CodeLoÿtiÚ
 
loÿtiÚ
, 
boŞ
 
has_‹¡_p
);

495 
	g‹m¶©e
 <
şass
 
	gTe¡Su™e
>

496 şas 
	cP¬am‘”izedTe¡Su™eInfo
 : 
public
 
P¬am‘”izedTe¡Su™eInfoBa£
 {

497 
public
:

501 
usšg
 
P¬amTy³
 = 
ty³Çme
 
Te¡Su™e
::ParamType;

503 
	gP¬amG’”©Ü
<
	tP¬amTy³
>(
	tG’”©ÜC»©iÚFunc
)();

504 
usšg
 
	gP¬amNameG’”©ÜFunc
 = 
¡d
::
¡ršg
(cÚ¡ 
Te¡P¬amInfo
<
P¬amTy³
>&);

506 
ex¶ic™
 
P¬am‘”izedTe¡Su™eInfo
(cÚ¡ * 
Çme
,

507 
CodeLoÿtiÚ
 
code_loÿtiÚ
)

508 : 
‹¡_su™e_Çme_
(
Çme
), 
code_loÿtiÚ_
(
code_loÿtiÚ
) {}

511 cÚ¡ 
	g¡d
::
¡ršg
& 
G‘Te¡Su™eName
(ècÚ¡ 
ov”ride
 {

512  
‹¡_su™e_Çme_
;

515 
Ty³Id
 
G‘Te¡Su™eTy³Id
(ècÚ¡ 
	gov”ride
 {  
	gG‘Ty³Id
<
	gTe¡Su™e
>(); }

522 
AddTe¡P©‹º
(cÚ¡ * 
‹¡_su™e_Çme
, cÚ¡ * 
‹¡_ba£_Çme
,

523 
Te¡M‘aFaùÜyBa£
<
P¬amTy³
>* 
m‘a_çùÜy
,

524 
CodeLoÿtiÚ
 
code_loÿtiÚ
) {

525 
	g‹¡s_
.
push_back
(
¡d
::
sh¬ed_±r
<
Te¡Info
>(
Ãw
 TestInfo(

526 
‹¡_su™e_Çme
, 
‹¡_ba£_Çme
, 
m‘a_çùÜy
, 
code_loÿtiÚ
)));

530 
AddTe¡Su™eIn¡ªtŸtiÚ
(cÚ¡ 
¡d
::
¡ršg
& 
š¡ªtŸtiÚ_Çme
,

531 
G’”©ÜC»©iÚFunc
* 
func
,

532 
P¬amNameG’”©ÜFunc
* 
Çme_func
,

533 cÚ¡ * 
fe
, 
lše
) {

534 
	gš¡ªtŸtiÚs_
.
push_back
(

535 
In¡ªtŸtiÚInfo
(
š¡ªtŸtiÚ_Çme
, 
func
, 
Çme_func
, 
fe
, 
lše
));

543 
Regi¡”Te¡s
(è
	gov”ride
 {

544 
boŞ
 
	gg’”©ed_š¡ªtŸtiÚs
 = 
çl£
;

546 
ty³Çme
 
	gTe¡InfoCÚš”
::
™”©Ü
 
‹¡_™
 = 
‹¡s_
.
begš
();

547 
	g‹¡_™
 !ğ
‹¡s_
.
’d
(); ++test_it) {

548 
	g¡d
::
sh¬ed_±r
<
Te¡Info
> 
‹¡_šfo
 = *
‹¡_™
;

549 
ty³Çme
 
	gIn¡ªtŸtiÚCÚš”
::
™”©Ü
 
g’_™
 =

550 
š¡ªtŸtiÚs_
.
begš
(); 
	gg’_™
 !ğš¡ªtŸtiÚs_.
’d
();

551 ++
	gg’_™
) {

552 cÚ¡ 
	g¡d
::
¡ršg
& 
š¡ªtŸtiÚ_Çme
 = 
g’_™
->
Çme
;

553 
	gP¬amG’”©Ü
<
	gP¬amTy³
> 
g’”©Ü
((*
g’_™
->generator)());

554 
P¬amNameG’”©ÜFunc
* 
	gÇme_func
 = 
g’_™
->
Çme_func
;

555 cÚ¡ * 
	gfe
 = 
g’_™
->
fe
;

556 
	glše
 = 
g’_™
->
lše
;

558 
	g¡d
::
¡ršg
 
‹¡_su™e_Çme
;

559 iàĞ!
	gš¡ªtŸtiÚ_Çme
.
em±y
() )

560 
	g‹¡_su™e_Çme
 = 
š¡ªtŸtiÚ_Çme
 + "/";

561 
	g‹¡_su™e_Çme
 +ğ
‹¡_šfo
->
‹¡_su™e_ba£_Çme
;

563 
size_t
 
	gi
 = 0;

564 
	g¡d
::
£t
<
¡d
::
¡ršg
> 
‹¡_·¿m_Çmes
;

565 
ty³Çme
 
	gP¬amG’”©Ü
<
	gP¬amTy³
>::
™”©Ü
 
·¿m_™
 =

566 
g’”©Ü
.
begš
();

567 
	g·¿m_™
 !ğ
g’”©Ü
.
’d
(); ++·¿m_™, ++
	gi
) {

568 
	gg’”©ed_š¡ªtŸtiÚs
 = 
Œue
;

570 
Mes§ge
 
	g‹¡_Çme_¡»am
;

572 
	g¡d
::
¡ršg
 
·¿m_Çme
 = 
Çme_func
(

573 
Te¡P¬amInfo
<
P¬amTy³
>(*
·¿m_™
, 
i
));

575 
GTEST_CHECK_
(
IsV®idP¬amName
(
·¿m_Çme
))

576 << "P¬am‘”izede¡‚am'" << 
	g·¿m_Çme


577 << "' i šv®id, iÀ" << 
	gfe


578 << "†š" << 
	glše
 << 
	g¡d
::
’dl
;

580 
GTEST_CHECK_
(
‹¡_·¿m_Çmes
.
couÁ
(
·¿m_Çme
) == 0)

581 << "Du¶iÿ‹…¬am‘”izede¡‚am'" << 
·¿m_Çme


582 << "', iÀ" << 
fe
 << "†š" << 
lše
 << 
¡d
::
’dl
;

584 
	g‹¡_·¿m_Çmes
.
š£¹
(
·¿m_Çme
);

586 ià(!
	g‹¡_šfo
->
	g‹¡_ba£_Çme
.
em±y
()) {

587 
	g‹¡_Çme_¡»am
 << 
	g‹¡_šfo
->
	g‹¡_ba£_Çme
 << "/";

589 
	g‹¡_Çme_¡»am
 << 
	g·¿m_Çme
;

590 
MakeAndRegi¡”Te¡Info
(

591 
‹¡_su™e_Çme
.
c_¡r
(), 
‹¡_Çme_¡»am
.
G‘SŒšg
().c_str(),

592 
nuÎ±r
,

593 
PrštToSŒšg
(*
·¿m_™
).
c_¡r
(), 
‹¡_šfo
->
code_loÿtiÚ
,

594 
G‘Te¡Su™eTy³Id
(),

595 
Su™eApiResŞv”
<
Te¡Su™e
>::
G‘S‘UpCa£OrSu™e
(
fe
, 
lše
),

596 
Su™eApiResŞv”
<
Te¡Su™e
>::
G‘T—rDownCa£OrSu™e
(
fe
, 
lše
),

597 
‹¡_šfo
->
‹¡_m‘a_çùÜy
->
C»©eTe¡FaùÜy
(*
·¿m_™
));

602 ià(!
	gg’”©ed_š¡ªtŸtiÚs
) {

604 
In£¹SyÁh‘icTe¡Ca£
(
G‘Te¡Su™eName
(), 
code_loÿtiÚ_
,

605 !
‹¡s_
.
em±y
());

609 
	g´iv©e
:

612 
	sTe¡Info
 {

613 
Te¡Info
(cÚ¡ * 
a_‹¡_su™e_ba£_Çme
, cÚ¡ * 
a_‹¡_ba£_Çme
,

614 
Te¡M‘aFaùÜyBa£
<
P¬amTy³
>* 
a_‹¡_m‘a_çùÜy
,

615 
CodeLoÿtiÚ
 
a_code_loÿtiÚ
)

616 : 
‹¡_su™e_ba£_Çme
(
a_‹¡_su™e_ba£_Çme
),

617 
‹¡_ba£_Çme
(
a_‹¡_ba£_Çme
),

618 
‹¡_m‘a_çùÜy
(
a_‹¡_m‘a_çùÜy
),

619 
code_loÿtiÚ
(
a_code_loÿtiÚ
) {}

621 cÚ¡ 
	g¡d
::
¡ršg
 
‹¡_su™e_ba£_Çme
;

622 cÚ¡ 
	g¡d
::
¡ršg
 
‹¡_ba£_Çme
;

623 cÚ¡ 
	g¡d
::
unique_±r
<
Te¡M‘aFaùÜyBa£
<
P¬amTy³
> > 
‹¡_m‘a_çùÜy
;

624 cÚ¡ 
CodeLoÿtiÚ
 
	gcode_loÿtiÚ
;

626 
usšg
 
	gTe¡InfoCÚš”
 = ::
¡d
::
veùÜ
<¡d::
sh¬ed_±r
<
Te¡Info
> >;

630 
	sIn¡ªtŸtiÚInfo
 {

631 
In¡ªtŸtiÚInfo
(cÚ¡ 
¡d
::
¡ršg
 &
Çme_š
,

632 
G’”©ÜC»©iÚFunc
* 
g’”©Ü_š
,

633 
P¬amNameG’”©ÜFunc
* 
Çme_func_š
,

634 cÚ¡ * 
fe_š
,

635 
lše_š
)

636 : 
Çme
(
Çme_š
),

637 
g’”©Ü
(
g’”©Ü_š
),

638 
Çme_func
(
Çme_func_š
),

639 
fe
(
fe_š
),

640 
lše
(
lše_š
) {}

642 
	g¡d
::
¡ršg
 
Çme
;

643 
G’”©ÜC»©iÚFunc
* 
	gg’”©Ü
;

644 
P¬amNameG’”©ÜFunc
* 
	gÇme_func
;

645 cÚ¡ * 
	gfe
;

646 
	glše
;

648 ::
¡d
::
	tveùÜ
<
	tIn¡ªtŸtiÚInfo
> 
	tIn¡ªtŸtiÚCÚš”
;

650 
boŞ
 
IsV®idP¬amName
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
) {

652 ià(
Çme
.
em±y
())

653  
çl£
;

656 
	g¡d
::
¡ršg
::
size_ty³
 
šdex
 = 0; 
	gšdex
 < 
	gÇme
.
size
(); ++index) {

657 ià(!
i§Êum
(
Çme
[
šdex
]è&& 
	gÇme
[index] != '_')

658  
çl£
;

661  
	gŒue
;

664 cÚ¡ 
	g¡d
::
¡ršg
 
‹¡_su™e_Çme_
;

665 
CodeLoÿtiÚ
 
	gcode_loÿtiÚ_
;

666 
Te¡InfoCÚš”
 
	g‹¡s_
;

667 
In¡ªtŸtiÚCÚš”
 
	gš¡ªtŸtiÚs_
;

669 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
P¬am‘”izedTe¡Su™eInfo
);

673 #iâdeà
GTEST_REMOVE_LEGACY_TEST_CASEAPI_


674 
	g‹m¶©e
 <
şass
 
	gTe¡Ca£
>

675 
usšg
 
	gP¬am‘”izedTe¡Ca£Info
 = 
P¬am‘”izedTe¡Su™eInfo
<
Te¡Ca£
>;

684 şas 
	cP¬am‘”izedTe¡Su™eRegi¡ry
 {

685 
	gpublic
:

686 
P¬am‘”izedTe¡Su™eRegi¡ry
() {}

687 ~
P¬am‘”izedTe¡Su™eRegi¡ry
() {

688 auto& 
‹¡_su™e_šfo
 : 
‹¡_su™e_šfos_
) {

689 
d–‘e
 
‹¡_su™e_šfo
;

695 
	g‹m¶©e
 <
şass
 
	gTe¡Su™e
>

696 
	gP¬am‘”izedTe¡Su™eInfo
<
	gTe¡Su™e
>* 
G‘Te¡Su™eP©‹ºHŞd”
(

697 cÚ¡ * 
‹¡_su™e_Çme
, 
CodeLoÿtiÚ
 
code_loÿtiÚ
) {

698 
	gP¬am‘”izedTe¡Su™eInfo
<
	gTe¡Su™e
>* 
	gty³d_‹¡_šfo
 = 
nuÎ±r
;

699 auto& 
	g‹¡_su™e_šfo
 : 
‹¡_su™e_šfos_
) {

700 ià(
‹¡_su™e_šfo
->
G‘Te¡Su™eName
(è=ğ
‹¡_su™e_Çme
) {

701 ià(
‹¡_su™e_šfo
->
G‘Te¡Su™eTy³Id
(è!ğ
G‘Ty³Id
<
Te¡Su™e
>()) {

705 
R•ÜtInv®idTe¡Su™eTy³
(
‹¡_su™e_Çme
, 
code_loÿtiÚ
);

706 
	gposix
::
AbÜt
();

711 
	gty³d_‹¡_šfo
 = 
CheckedDownÿ¡ToAùu®Ty³
<

712 
P¬am‘”izedTe¡Su™eInfo
<
Te¡Su™e
> >(
‹¡_su™e_šfo
);

717 ià(
	gty³d_‹¡_šfo
 =ğ
nuÎ±r
) {

718 
ty³d_‹¡_šfo
 = 
Ãw
 
P¬am‘”izedTe¡Su™eInfo
<
Te¡Su™e
>(

719 
‹¡_su™e_Çme
, 
	gcode_loÿtiÚ
);

720 
	g‹¡_su™e_šfos_
.
push_back
(
ty³d_‹¡_šfo
);

722  
	gty³d_‹¡_šfo
;

724 
Regi¡”Te¡s
() {

725 auto& 
	g‹¡_su™e_šfo
 : 
‹¡_su™e_šfos_
) {

726 
‹¡_su™e_šfo
->
Regi¡”Te¡s
();

730 #iâdeà
GTEST_REMOVE_LEGACY_TEST_CASEAPI_


731 
	g‹m¶©e
 <
şass
 
	gTe¡Ca£
>

732 
	gP¬am‘”izedTe¡Ca£Info
<
	gTe¡Ca£
>* 
G‘Te¡Ca£P©‹ºHŞd”
(

733 cÚ¡ * 
‹¡_ÿ£_Çme
, 
CodeLoÿtiÚ
 
code_loÿtiÚ
) {

734  
	gG‘Te¡Su™eP©‹ºHŞd”
<
	gTe¡Ca£
>(
	g‹¡_ÿ£_Çme
, 
	gcode_loÿtiÚ
);

739 
	g´iv©e
:

740 
usšg
 
Te¡Su™eInfoCÚš”
 = ::
¡d
::
veùÜ
<
P¬am‘”izedTe¡Su™eInfoBa£
*>;

742 
Te¡Su™eInfoCÚš”
 
	g‹¡_su™e_šfos_
;

744 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
P¬am‘”izedTe¡Su™eRegi¡ry
);

750 şas 
	cTy³P¬am‘”izedTe¡Su™eRegi¡ry
 {

751 
	gpublic
:

753 
Regi¡”Te¡Su™e
(cÚ¡ * 
‹¡_su™e_Çme
,

754 
CodeLoÿtiÚ
 
code_loÿtiÚ
);

757 
Regi¡”In¡ªtŸtiÚ
(cÚ¡ * 
‹¡_su™e_Çme
);

761 
CheckFÜIn¡ªtŸtiÚs
();

763 
	g´iv©e
:

764 
	sTy³P¬am‘”izedTe¡Su™eInfo
 {

765 
ex¶ic™
 
Ty³P¬am‘”izedTe¡Su™eInfo
(
CodeLoÿtiÚ
 
c
)

766 : 
code_loÿtiÚ
(
c
), 
š¡ªtŸ‹d
(
çl£
) {}

768 
CodeLoÿtiÚ
 
	gcode_loÿtiÚ
;

769 
boŞ
 
	gš¡ªtŸ‹d
;

772 
	g¡d
::
m­
<
¡d
::
¡ršg
, 
	gTy³P¬am‘”izedTe¡Su™eInfo
> 
	gsu™es_
;

779 
	g‹m¶©e
 <
şass
 
	gCÚš”
>

780 
	gš‹º®
::
P¬amG’”©Ü
<
ty³Çme
 
CÚš”
::
v®ue_ty³
> 
V®uesIn
(

781 cÚ¡ 
CÚš”
& 
cÚš”
);

783 
Çme¥aû
 
	gš‹º®
 {

786 #ifdeà
_MSC_VER


787 #´agm¨
w¬nšg
(
push
)

788 #´agm¨
w¬nšg
(
di§bË
 : 4100)

791 
	g‹m¶©e
 <
	gty³Çme
... 
	gTs
>

792 şas 
	cV®ueA¼ay
 {

793 
	gpublic
:

794 
ex¶ic™
 
V®ueA¼ay
(
Ts
... 
v
è: 
v_
(
FÏtTu¶eCÚ¡ruùTag
{}, 
¡d
::
move
(v)...) {}

796 
‹m¶©e
 <
ty³Çme
 
T
>

797 
İ”©Ü
 
P¬amG’”©Ü
<
T
>() const {

798  
V®uesIn
(
MakeVeùÜ
<
T
>(
MakeIndexSequ’û
<...(
Ts
)>()));

801 
	g´iv©e
:

802 
‹m¶©e
 <
ty³Çme
 
T
, 
	gsize_t
... 
	gI
>

803 
	g¡d
::
veùÜ
<
T
> 
MakeVeùÜ
(
IndexSequ’û
<
I
...>) const {

804  
¡d
::
veùÜ
<
T
>{
¡©ic_ÿ¡
<T>(
v_
.
‹m¶©e
 
G‘
<
I
>())...};

807 
	gFÏtTu¶e
<
	gTs
...> 
	gv_
;

810 #ifdeà
_MSC_VER


811 #´agm¨
w¬nšg
(
pİ
)

814 
	g‹m¶©e
 <
	gty³Çme
... 
	gT
>

815 
şass
 
	gC¬‹sŸnProduùG’”©Ü


816 : 
public
 
P¬amG’”©ÜIÁ”çû
<::
¡d
::
tu¶e
<
T
...>> {

817 
public
:

818 ::
¡d
::
	ttu¶e
<
	tT
...> 
	tP¬amTy³
;

820 
C¬‹sŸnProduùG’”©Ü
(cÚ¡ 
¡d
::
tu¶e
<
P¬amG’”©Ü
<
T
>...>& 
g
)

821 : 
g’”©Üs_
(
g
) {}

822 ~
C¬‹sŸnProduùG’”©Ü
(è
ov”ride
 {}

824 
P¬amI‹¿tÜIÁ”çû
<
P¬amTy³
>* 
Begš
(ècÚ¡ 
ov”ride
 {

825  
Ãw
 
I‹¿tÜ
(
this
, 
g’”©Üs_
, 
çl£
);

827 
	gP¬amI‹¿tÜIÁ”çû
<
	gP¬amTy³
>* 
End
(ècÚ¡ 
	gov”ride
 {

828  
Ãw
 
I‹¿tÜ
(
this
, 
g’”©Üs_
, 
Œue
);

831 
	g´iv©e
:

832 
‹m¶©e
 <
şass
 
I
>

833 
şass
 
I‹¿tÜIm¶
;

834 
	g‹m¶©e
 <
	gsize_t
... 
	gI
>

835 
şass
 
	gI‹¿tÜIm¶
<
	gIndexSequ’û
<
	gI
...>>

836 : 
public
 
P¬amI‹¿tÜIÁ”çû
<
P¬amTy³
> {

837 
public
:

838 
I‹¿tÜIm¶
(cÚ¡ 
P¬amG’”©ÜIÁ”çû
<
P¬amTy³
>* 
ba£
,

839 cÚ¡ 
¡d
::
tu¶e
<
P¬amG’”©Ü
<
T
>...>& 
g’”©Üs
, 
boŞ
 
is_’d
)

840 : 
ba£_
(
ba£
),

841 
begš_
(
¡d
::
g‘
<
I
>(
g’”©Üs
).
begš
()...),

842 
’d_
(
¡d
::
g‘
<
I
>(
g’”©Üs
).
’d
()...),

843 
cu¼’t_
(
is_’d
 ? 
’d_
 : 
begš_
) {

844 
Compu‹Cu¼’tV®ue
();

846 ~
I‹¿tÜIm¶
(è
	gov”ride
 {}

848 cÚ¡ 
	gP¬amG’”©ÜIÁ”çû
<
	gP¬amTy³
>* 
Ba£G’”©Ü
(ècÚ¡ 
	gov”ride
 {

849  
	gba£_
;

853 
Advªû
(è
	gov”ride
 {

854 
as£¹
(!
AtEnd
());

856 ++
	g¡d
::
g‘
<...(
T
è- 1>(
cu¼’t_
);

858 
	gAdvªûIfEnd
<...(
	gT
) - 1>();

859 
Compu‹Cu¼’tV®ue
();

861 
	gP¬amI‹¿tÜIÁ”çû
<
	gP¬amTy³
>* 
ClÚe
(ècÚ¡ 
	gov”ride
 {

862  
Ãw
 
I‹¿tÜIm¶
(*
this
);

865 cÚ¡ 
P¬amTy³
* 
Cu¼’t
(ècÚ¡ 
	gov”ride
 {  
	gcu¼’t_v®ue_
.
g‘
(); }

867 
boŞ
 
Equ®s
(cÚ¡ 
P¬amI‹¿tÜIÁ”çû
<
P¬amTy³
>& 
Ùh”
ècÚ¡ 
	gov”ride
 {

870 
GTEST_CHECK_
(
Ba£G’”©Ü
(è=ğ
Ùh”
.BaseGenerator())

872 << "äom difã»Á g’”©Üs." << 
¡d
::
’dl
;

873 cÚ¡ 
I‹¿tÜIm¶
* 
	gty³d_Ùh”
 =

874 
CheckedDownÿ¡ToAùu®Ty³
<cÚ¡ 
I‹¿tÜIm¶
>(&
Ùh”
);

879 ià(
AtEnd
(è&& 
	gty³d_Ùh”
->AtEnd()è 
	gŒue
;

881 
boŞ
 
	g§me
 = 
Œue
;

882 
boŞ
 
	gdummy
[] = {

883 (
§me
 = sam&& 
¡d
::
g‘
<
I
>(
cu¼’t_
) ==

884 
¡d
::
g‘
<
I
>(
ty³d_Ùh”
->
cu¼’t_
))...};

885 ()
	gdummy
;

886  
	g§me
;

889 
	g´iv©e
:

890 
‹m¶©e
 <
size_t
 
ThisI
>

891 
AdvªûIfEnd
() {

892 ià(
¡d
::
g‘
<
ThisI
>(
cu¼’t_
è!ğ¡d::g‘<ThisI>(
’d_
)) ;

894 
boŞ
 
	gÏ¡
 = 
ThisI
 == 0;

895 ià(
	gÏ¡
) {

900 
cÚ¡ex´
 
size_t
 
	gNextI
 = 
ThisI
 - (ThisI != 0);

901 
	g¡d
::
g‘
<
ThisI
>(
cu¼’t_
èğ
¡d
::g‘<ThisI>(
begš_
);

902 ++
	g¡d
::
g‘
<
NextI
>(
cu¼’t_
);

903 
	gAdvªûIfEnd
<
	gNextI
>();

906 
Compu‹Cu¼’tV®ue
() {

907 ià(!
AtEnd
())

908 
	gcu¼’t_v®ue_
 = 
¡d
::
make_sh¬ed
<
P¬amTy³
>(*¡d::
g‘
<
I
>(
cu¼’t_
)...);

910 
boŞ
 
AtEnd
() const {

911 
boŞ
 
	g©_’d
 = 
çl£
;

912 
boŞ
 
	gdummy
[] = {

913 (
©_’d
 =‡t_’d || 
¡d
::
g‘
<
I
>(
cu¼’t_
è=ğ¡d::g‘<I>(
’d_
))...};

914 ()
	gdummy
;

915  
	g©_’d
;

918 cÚ¡ 
	gP¬amG’”©ÜIÁ”çû
<
	gP¬amTy³
>* cÚ¡ 
	gba£_
;

919 
	g¡d
::
tu¶e
<
ty³Çme
 
P¬amG’”©Ü
<
T
>::
™”©Ü
...> 
begš_
;

920 
	g¡d
::
tu¶e
<
ty³Çme
 
P¬amG’”©Ü
<
T
>::
™”©Ü
...> 
’d_
;

921 
	g¡d
::
tu¶e
<
ty³Çme
 
P¬amG’”©Ü
<
T
>::
™”©Ü
...> 
cu¼’t_
;

922 
	g¡d
::
sh¬ed_±r
<
P¬amTy³
> 
cu¼’t_v®ue_
;

925 
usšg
 
	gI‹¿tÜ
 = 
I‹¿tÜIm¶
<
ty³Çme
 
MakeIndexSequ’û
<...(
T
)>::
ty³
>;

927 
	g¡d
::
tu¶e
<
P¬amG’”©Ü
<
T
>...> 
g’”©Üs_
;

930 
	g‹m¶©e
 <
	gşass
... 
	gG’
>

931 şas 
	cC¬‹sŸnProduùHŞd”
 {

932 
	gpublic
:

933 
C¬‹sŸnProduùHŞd”
(cÚ¡ 
G’
&... 
g
è: 
g’”©Üs_
(g...) {}

934 
‹m¶©e
 <
ty³Çme
... 
T
>

935 
İ”©Ü
 
P¬amG’”©Ü
<::
¡d
::
tu¶e
<
T
...>>() const {

936  
P¬amG’”©Ü
<::
¡d
::
tu¶e
<
T
...>>(

937 
Ãw
 
C¬‹sŸnProduùG’”©Ü
<
T
...>(
g’”©Üs_
));

940 
	g´iv©e
:

941 
¡d
::
tu¶e
<
G’
...> 
g’”©Üs_
;

	@third_party/googletest/googletest/include/gtest/internal/gtest-port-arch.h

35 #iâdeà
GOOGLETEST_INCLUDE_GTEST_INTERNAL_GTEST_PORT_ARCH_H_


36 
	#GOOGLETEST_INCLUDE_GTEST_INTERNAL_GTEST_PORT_ARCH_H_


	)

39 #ifdeà
__CYGWIN__


40 
	#GTEST_OS_CYGWIN
 1

	)

41 #–ià
defšed
(
__MINGW__
è|| defšed(
__MINGW32__
è|| defšed(
__MINGW64__
)

42 
	#GTEST_OS_WINDOWS_MINGW
 1

	)

43 
	#GTEST_OS_WINDOWS
 1

	)

44 #–ià
defšed
 
_WIN32


45 
	#GTEST_OS_WINDOWS
 1

	)

46 #ifdeà
_WIN32_WCE


47 
	#GTEST_OS_WINDOWS_MOBILE
 1

	)

48 #–ià
defšed
(
WINAPI_FAMILY
)

49 
	~<wš­içmy.h
>

50 #ià
WINAPI_FAMILY_PARTITION
(
WINAPI_PARTITION_DESKTOP
)

51 
	#GTEST_OS_WINDOWS_DESKTOP
 1

	)

52 #–ià
WINAPI_FAMILY_PARTITION
(
WINAPI_PARTITION_PHONE_APP
)

53 
	#GTEST_OS_WINDOWS_PHONE
 1

	)

54 #–ià
WINAPI_FAMILY_PARTITION
(
WINAPI_PARTITION_APP
)

55 
	#GTEST_OS_WINDOWS_RT
 1

	)

56 #–ià
WINAPI_FAMILY_PARTITION
(
WINAPI_PARTITION_TV_TITLE
)

57 
	#GTEST_OS_WINDOWS_PHONE
 1

	)

58 
	#GTEST_OS_WINDOWS_TV_TITLE
 1

	)

62 
	#GTEST_OS_WINDOWS_DESKTOP
 1

	)

65 
	#GTEST_OS_WINDOWS_DESKTOP
 1

	)

67 #–ià
defšed
 
__OS2__


68 
	#GTEST_OS_OS2
 1

	)

69 #–ià
defšed
 
__APPLE__


70 
	#GTEST_OS_MAC
 1

	)

71 
	~<T¬g‘CÚd™iÚ®s.h
>

72 #ià
TARGET_OS_IPHONE


73 
	#GTEST_OS_IOS
 1

	)

75 #–ià
defšed
 
__D¿gÚFly__


76 
	#GTEST_OS_DRAGONFLY
 1

	)

77 #–ià
defšed
 
__F»eBSD__


78 
	#GTEST_OS_FREEBSD
 1

	)

79 #–ià
defšed
 
__FuchsŸ__


80 
	#GTEST_OS_FUCHSIA
 1

	)

81 #–ià
defšed
(
__GLIBC__
è&& defšed(
__F»eBSD_k”Ãl__
)

82 
	#GTEST_OS_GNU_KFREEBSD
 1

	)

83 #–ià
defšed
 
__lšux__


84 
	#GTEST_OS_LINUX
 1

	)

85 #ià
defšed
 
__ANDROID__


86 
	#GTEST_OS_LINUX_ANDROID
 1

	)

88 #–ià
defšed
 
__MVS__


89 
	#GTEST_OS_ZOS
 1

	)

90 #–ià
defšed
(
__sun
è&& defšed(
__SVR4
)

91 
	#GTEST_OS_SOLARIS
 1

	)

92 #–ià
defšed
(
_AIX
)

93 
	#GTEST_OS_AIX
 1

	)

94 #–ià
defšed
(
__hpux
)

95 
	#GTEST_OS_HPUX
 1

	)

96 #–ià
defšed
 
__Çtive_ş›Á__


97 
	#GTEST_OS_NACL
 1

	)

98 #–ià
defšed
 
__N‘BSD__


99 
	#GTEST_OS_NETBSD
 1

	)

100 #–ià
defšed
 
__O³nBSD__


101 
	#GTEST_OS_OPENBSD
 1

	)

102 #–ià
defšed
 
__QNX__


103 
	#GTEST_OS_QNX
 1

	)

104 #–ià
defšed
(
__HAIKU__
)

105 
	#GTEST_OS_HAIKU
 1

	)

106 #–ià
defšed
 
ESP8266


107 
	#GTEST_OS_ESP8266
 1

	)

108 #–ià
defšed
 
ESP32


109 
	#GTEST_OS_ESP32
 1

	)

110 #–ià
defšed
(
__XTENSA__
)

111 
	#GTEST_OS_XTENSA
 1

	)

	@third_party/googletest/googletest/include/gtest/internal/gtest-port.h

43 #iâdeà
GOOGLETEST_INCLUDE_GTEST_INTERNAL_GTEST_PORT_H_


44 
	#GOOGLETEST_INCLUDE_GTEST_INTERNAL_GTEST_PORT_H_


	)

259 
	~<ùy³.h
>

260 
	~<¡ddef.h
>

261 
	~<¡dio.h
>

262 
	~<¡dlib.h
>

263 
	~<¡ršg.h
>

265 
	~<û¼no
>

266 
	~<c¡dšt
>

267 
	~<lim™s
>

268 
	~<ty³_Œa™s
>

270 #iâdeà
_WIN32_WCE


271 
	~<sys/ty³s.h
>

272 
	~<sys/¡©.h
>

275 #ià
defšed
 
__APPLE__


276 
	~<Avaab™yMaüos.h
>

277 
	~<T¬g‘CÚd™iÚ®s.h
>

280 
	~<io¡»am
>

281 
	~<loÿË
>

282 
	~<memÜy
>

283 
	~<¡ršg
>

284 
	~<tu¶e
>

285 
	~<veùÜ
>

287 
	~"g‹¡/š‹º®/cu¡om/g‹¡-pÜt.h
"

288 
	~"g‹¡/š‹º®/g‹¡-pÜt-¬ch.h
"

290 #ià!
defšed
(
GTEST_DEV_EMAIL_
)

291 
	#GTEST_DEV_EMAIL_
 "googË‹¡äamewÜk@@googËgroups.com"

	)

292 
	#GTEST_FLAG_PREFIX_
 "g‹¡_"

	)

293 
	#GTEST_FLAG_PREFIX_DASH_
 "g‹¡-"

	)

294 
	#GTEST_FLAG_PREFIX_UPPER_
 "GTEST_"

	)

295 
	#GTEST_NAME_
 "GoogË Te¡"

	)

296 
	#GTEST_PROJECT_URL_
 "h‰ps://g™hub.com/googË/googË‹¡/"

	)

299 #ià!
defšed
(
GTEST_INIT_GOOGLE_TEST_NAME_
)

300 
	#GTEST_INIT_GOOGLE_TEST_NAME_
 "‹¡šg::In™GoogËTe¡"

	)

304 #ifdeà
__GNUC__


306 
	#GTEST_GCC_VER_
 \

307 (
__GNUC__
*10000 + 
__GNUC_MINOR__
*100 + 
__GNUC_PATCHLEVEL__
)

	)

315 #ià
defšed
(
_MSC_VER
)

316 
	#GTEST_DISABLE_MSC_WARNINGS_PUSH_
(
w¬nšgs
) \

317 
	`__´agma
(
	`w¬nšg
(
push
)) \

318 
	`__´agma
(
	`w¬nšg
(
di§bË
: 
w¬nšgs
))

	)

319 
	#GTEST_DISABLE_MSC_WARNINGS_POP_
() \

320 
	`__´agma
(
	`w¬nšg
(
pİ
))

	)

323 
	#GTEST_DISABLE_MSC_WARNINGS_PUSH_
(
w¬nšgs
)

	)

324 
	#GTEST_DISABLE_MSC_WARNINGS_POP_
()

	)

329 #ifdeà
__şªg__


330 
	#GTEST_DISABLE_MSC_DEPRECATED_PUSH_
() \

331 
	`_P¿gma
("clang diagnostic…ush") \

332 
	`_P¿gma
("clang diagnostic ignored \"-Wdeprecated-declarations\"") \

333 
	`_P¿gma
("şªg dŸgno¡iøignÜed \"-Wd•»ÿ‹d-im¶em’tiÚs\"")

	)

334 
	#GTEST_DISABLE_MSC_DEPRECATED_POP_
() \

335 
	`_P¿gma
("şªg dŸgno¡iøpİ")

	)

337 
	#GTEST_DISABLE_MSC_DEPRECATED_PUSH_
() \

338 
	`GTEST_DISABLE_MSC_WARNINGS_PUSH_
(4996)

	)

339 
	#GTEST_DISABLE_MSC_DEPRECATED_POP_
() \

340 
	`GTEST_DISABLE_MSC_WARNINGS_POP_
()

	)

346 #ià
GTEST_OS_WINDOWS


347 #ià!
GTEST_OS_WINDOWS_MOBILE


348 
	~<dœeù.h
>

349 
	~<io.h
>

352 #ià
GTEST_OS_WINDOWS_MINGW
 && !
defšed
(
__MINGW64_VERSION_MAJOR
)

355 
_CRITICAL_SECTION
 
	tGTEST_CRITICAL_SECTION
;

360 
_RTL_CRITICAL_SECTION
 
	tGTEST_CRITICAL_SECTION
;

362 #–ià
GTEST_OS_XTENSA


363 
	~<uni¡d.h
>

370 
	~<uni¡d.h
>

371 
	~<¡ršgs.h
>

374 #ià
GTEST_OS_LINUX_ANDROID


376 
	~<ªdroid/­i-Ëv–.h
>

381 #iâdeà
GTEST_HAS_POSIX_RE


382 #ià
GTEST_OS_LINUX_ANDROID


384 
	#GTEST_HAS_POSIX_RE
 (
__ANDROID_API__
 >ğ9)

	)

386 
	#GTEST_HAS_POSIX_RE
 (!
GTEST_OS_WINDOWS
 && !
GTEST_OS_XTENSA
)

	)

390 #ià
GTEST_USES_PCRE


393 #–ià
GTEST_HAS_POSIX_RE


399 
	~<»gex.h
>

401 
	#GTEST_USES_POSIX_RE
 1

	)

403 #–ià
GTEST_OS_WINDOWS


407 
	#GTEST_USES_SIMPLE_RE
 1

	)

413 
	#GTEST_USES_SIMPLE_RE
 1

	)

417 #iâdeà
GTEST_HAS_EXCEPTIONS


420 #ià
defšed
(
_MSC_VER
è&& defšed(
_CPPUNWIND
)

422 
	#GTEST_HAS_EXCEPTIONS
 1

	)

423 #–ià
defšed
(
__BORLANDC__
)

427 #iâdeà
_HAS_EXCEPTIONS


428 
	#_HAS_EXCEPTIONS
 1

	)

430 
	#GTEST_HAS_EXCEPTIONS
 
_HAS_EXCEPTIONS


	)

431 #–ià
defšed
(
__şªg__
)

440 
	#GTEST_HAS_EXCEPTIONS
 (
__EXCEPTIONS
 && 
	`__has_ã©u»
(
cxx_exû±iÚs
))

	)

441 #–ià
defšed
(
__GNUC__
è&& 
__EXCEPTIONS


443 
	#GTEST_HAS_EXCEPTIONS
 1

	)

444 #–ià
defšed
(
__SUNPRO_CC
)

448 
	#GTEST_HAS_EXCEPTIONS
 1

	)

449 #–ià
defšed
(
__IBMCPP__
è&& 
__EXCEPTIONS


451 
	#GTEST_HAS_EXCEPTIONS
 1

	)

452 #–ià
defšed
(
__HP_aCC
)

455 
	#GTEST_HAS_EXCEPTIONS
 1

	)

459 
	#GTEST_HAS_EXCEPTIONS
 0

	)

463 #iâdeà
GTEST_HAS_STD_WSTRING


469 
	#GTEST_HAS_STD_WSTRING
 \

470 (!(
GTEST_OS_LINUX_ANDROID
 || 
GTEST_OS_CYGWIN
 || 
GTEST_OS_SOLARIS
 || \

471 
GTEST_OS_HAIKU
 || 
GTEST_OS_ESP32
 || 
GTEST_OS_ESP8266
 || 
GTEST_OS_XTENSA
))

	)

476 #iâdeà
GTEST_HAS_RTTI


480 #ifdeà
_MSC_VER


482 #ifdeà
_CPPRTTI


483 
	#GTEST_HAS_RTTI
 1

	)

485 
	#GTEST_HAS_RTTI
 0

	)

490 #–ià
defšed
(
__GNUC__
)

492 #ifdeà
__GXX_RTTI


497 #ià
GTEST_OS_LINUX_ANDROID
 && 
defšed
(
_STLPORT_MAJOR
) && \

498 !
	$defšed
(
__EXCEPTIONS
)

499 
	#GTEST_HAS_RTTI
 0

	)

501 
	#GTEST_HAS_RTTI
 1

	)

504 
	#GTEST_HAS_RTTI
 0

	)

510 #–ià
	`defšed
(
__şªg__
)

512 
	#GTEST_HAS_RTTI
 
	`__has_ã©u»
(
cxx_¹ti
)

	)

516 #–ià
	`defšed
(
__IBMCPP__
) && (__IBMCPP__ >= 900)

518 #ifdeà
__RTTI_ALL__


519 
	#GTEST_HAS_RTTI
 1

	)

521 
	#GTEST_HAS_RTTI
 0

	)

527 
	#GTEST_HAS_RTTI
 1

	)

535 #ià
GTEST_HAS_RTTI


536 
	~<ty³šfo
>

540 #iâdeà
GTEST_HAS_PTHREAD


546 
	#GTEST_HAS_PTHREAD
 \

547 (
GTEST_OS_LINUX
 || 
GTEST_OS_MAC
 || 
GTEST_OS_HPUX
 || 
GTEST_OS_QNX
 || \

548 
GTEST_OS_FREEBSD
 || 
GTEST_OS_NACL
 || 
GTEST_OS_NETBSD
 || 
GTEST_OS_FUCHSIA
 || \

549 
GTEST_OS_DRAGONFLY
 || 
GTEST_OS_GNU_KFREEBSD
 || 
GTEST_OS_OPENBSD
 || \

550 
GTEST_OS_HAIKU
)

	)

553 #ià
GTEST_HAS_PTHREAD


556 
	~<±h»ad.h
>

559 
	~<time.h
>

566 #iâdeà
GTEST_HAS_CLONE


569 #ià
GTEST_OS_LINUX
 && !
	`defšed
(
__Ÿ64__
)

570 #ià
GTEST_OS_LINUX_ANDROID


573 #ià
	`defšed
(
__LP64__
) || \

574 (
	`defšed
(
__¬m__
è&& 
__ANDROID_API__
 >= 9) || \

575 (
	`defšed
(
__ms__
è&& 
__ANDROID_API__
 >= 12) || \

576 (
	`defšed
(
__i386__
è&& 
__ANDROID_API__
 >= 17)

577 
	#GTEST_HAS_CLONE
 1

	)

579 
	#GTEST_HAS_CLONE
 0

	)

582 
	#GTEST_HAS_CLONE
 1

	)

585 
	#GTEST_HAS_CLONE
 0

	)

592 #iâdeà
GTEST_HAS_STREAM_REDIRECTION


595 #ià
GTEST_OS_WINDOWS_MOBILE
 || 
GTEST_OS_WINDOWS_PHONE
 || \

596 
GTEST_OS_WINDOWS_RT
 || 
GTEST_OS_ESP8266
 || 
GTEST_OS_XTENSA


597 
	#GTEST_HAS_STREAM_REDIRECTION
 0

	)

599 
	#GTEST_HAS_STREAM_REDIRECTION
 1

	)

605 #ià(
GTEST_OS_LINUX
 || 
GTEST_OS_CYGWIN
 || 
GTEST_OS_SOLARIS
 || \

606 (
GTEST_OS_MAC
 && !
GTEST_OS_IOS
) || \

607 (
GTEST_OS_WINDOWS_DESKTOP
 && 
_MSC_VER
è|| 
GTEST_OS_WINDOWS_MINGW
 || \

608 
GTEST_OS_AIX
 || 
GTEST_OS_HPUX
 || 
GTEST_OS_OPENBSD
 || 
GTEST_OS_QNX
 || \

609 
GTEST_OS_FREEBSD
 || 
GTEST_OS_NETBSD
 || 
GTEST_OS_FUCHSIA
 || \

610 
GTEST_OS_DRAGONFLY
 || 
GTEST_OS_GNU_KFREEBSD
 || 
GTEST_OS_HAIKU
)

611 
	#GTEST_HAS_DEATH_TEST
 1

	)

618 #ià
	`defšed
(
__GNUC__
è|| defšed(
_MSC_VER
è|| defšed(
__SUNPRO_CC
) || \

619 
	`defšed
(
__IBMCPP__
è|| 
	$defšed
(
__HP_aCC
)

620 
	#GTEST_HAS_TYPED_TEST
 1

	)

621 
	#GTEST_HAS_TYPED_TEST_P
 1

	)

625 
	#GTEST_WIDE_STRING_USES_UTF16_
 \

626 (
GTEST_OS_WINDOWS
 || 
GTEST_OS_CYGWIN
 || 
GTEST_OS_AIX
 || 
GTEST_OS_OS2
)

	)

629 #ià
GTEST_OS_LINUX
 || 
GTEST_OS_GNU_KFREEBSD
 || 
GTEST_OS_DRAGONFLY
 || \

630 
GTEST_OS_FREEBSD
 || 
GTEST_OS_NETBSD
 || 
GTEST_OS_OPENBSD


631 
	#GTEST_CAN_STREAM_RESULTS_
 1

	)

644 #ifdeà
__INTEL_COMPILER


645 
	#GTEST_AMBIGUOUS_ELSE_BLOCKER_


	)

647 
	#GTEST_AMBIGUOUS_ELSE_BLOCKER_
 0) 0: :

649 

	)

661 #ià
	`defšed
(
__GNUC__
è&& !defšed(
COMPILER_ICC
)

662 
	#GTEST_ATTRIBUTE_UNUSED_
 
	`__©Œibu‹__
 ((
unu£d
))

	)

663 #–ià
	`defšed
(
__şªg__
)

664 #ià
	`__has_©Œibu‹
(
unu£d
)

665 
	#GTEST_ATTRIBUTE_UNUSED_
 
	`__©Œibu‹__
 ((
unu£d
))

	)

668 #iâdeà
GTEST_ATTRIBUTE_UNUSED_


669 
	#GTEST_ATTRIBUTE_UNUSED_


	)

673 #ià(
	`defšed
(
__GNUC__
è|| defšed(
__şªg__
)è&& !defšed(
COMPILER_ICC
)

674 #ià
	`defšed
(
__MINGW_PRINTF_FORMAT
)

678 
	#GTEST_ATTRIBUTE_PRINTF_
(
¡ršg_šdex
, 
fœ¡_to_check
) \

679 
	`__©Œibu‹__
((
	`__fÜm©__
(
__MINGW_PRINTF_FORMAT
, 
¡ršg_šdex
, \

680 
fœ¡_to_check
)))

	)

682 
	#GTEST_ATTRIBUTE_PRINTF_
(
¡ršg_šdex
, 
fœ¡_to_check
) \

683 
	`__©Œibu‹__
((
	`__fÜm©__
(
__´štf__
, 
¡ršg_šdex
, 
fœ¡_to_check
)))

	)

686 
	#GTEST_ATTRIBUTE_PRINTF_
(
¡ršg_šdex
, 
fœ¡_to_check
)

	)

692 
	#GTEST_DISALLOW_ASSIGN_
(
ty³
) \

693 
ty³
& 
İ”©Ü
=Ñy³ cÚ¡ &èğ
d–‘e


	)

697 
	#GTEST_DISALLOW_COPY_AND_ASSIGN_
(
ty³
) \

698 
	`ty³
(
ty³
 cÚ¡&èğ
d–‘e
; \

699 
ty³
& 
İ”©Ü
=Ñy³ cÚ¡&èğ
d–‘e


	)

703 
	#GTEST_DISALLOW_MOVE_ASSIGN_
(
ty³
) \

704 
ty³
& 
İ”©Ü
=Ñy³ &&è
nÛxû±
 = 
d–‘e


	)

708 
	#GTEST_DISALLOW_MOVE_AND_ASSIGN_
(
ty³
) \

709 
	`ty³
(
ty³
&&è
nÛxû±
 = 
d–‘e
; \

710 
ty³
& 
İ”©Ü
=Ñy³&&è
nÛxû±
 = 
d–‘e


	)

717 #ià
	`defšed
(
__GNUC__
è&& !defšed(
COMPILER_ICC
)

718 
	#GTEST_MUST_USE_RESULT_
 
	`__©Œibu‹__
 ((
w¬n_unu£d_»suÉ
))

	)

720 
	#GTEST_MUST_USE_RESULT_


	)

731 
	#GTEST_INTENTIONAL_CONST_COND_PUSH_
() \

732 
	`GTEST_DISABLE_MSC_WARNINGS_PUSH_
(4127)

	)

733 
	#GTEST_INTENTIONAL_CONST_COND_POP_
() \

734 
	`GTEST_DISABLE_MSC_WARNINGS_POP_
()

	)

739 #iâdeà
GTEST_HAS_SEH


742 #ià
	`defšed
(
_MSC_VER
è|| defšed(
__BORLANDC__
)

744 
	#GTEST_HAS_SEH
 1

	)

747 
	#GTEST_HAS_SEH
 0

	)

752 #iâdeà
GTEST_IS_THREADSAFE


754 
	#GTEST_IS_THREADSAFE
 \

755 (
GTEST_HAS_MUTEX_AND_THREAD_LOCAL_
 || \

756 (
GTEST_OS_WINDOWS
 && !
GTEST_OS_WINDOWS_PHONE
 && !
GTEST_OS_WINDOWS_RT
) || \

757 
GTEST_HAS_PTHREAD
)

	)

764 #iâdeà
GTEST_API_


766 #ifdeà
_MSC_VER


767 #ià
GTEST_LINKED_AS_SHARED_LIBRARY


768 
	#GTEST_API_
 
	`__deş¥ec
(
dÎimpÜt
)

	)

769 #–ià
GTEST_CREATE_SHARED_LIBRARY


770 
	#GTEST_API_
 
	`__deş¥ec
(
dÎexpÜt
)

	)

772 #–ià
__GNUC__
 >ğ4 || 
	`defšed
(
__şªg__
)

773 
	#GTEST_API_
 
	`__©Œibu‹__
((
	`visib™y
 ("deçuÉ")))

	)

778 #iâdeà
GTEST_API_


779 
	#GTEST_API_


	)

782 #iâdeà
GTEST_DEFAULT_DEATH_TEST_STYLE


783 
	#GTEST_DEFAULT_DEATH_TEST_STYLE
 "ç¡"

	)

786 #ifdeà
__GNUC__


788 
	#GTEST_NO_INLINE_
 
	`__©Œibu‹__
((
nošlše
))

	)

790 
	#GTEST_NO_INLINE_


	)

794 #ià!
	`defšed
(
GTEST_HAS_CXXABI_H_
)

795 #ià
	`defšed
(
__GLIBCXX__
è|| (defšed(
_LIBCPP_VERSION
è&& !defšed(
_MSC_VER
))

796 
	#GTEST_HAS_CXXABI_H_
 1

	)

798 
	#GTEST_HAS_CXXABI_H_
 0

	)

804 #ià
	`defšed
(
__şªg__
)

805 #ià
	`__has_ã©u»
(
memÜy_§n™iz”
)

806 
	#GTEST_ATTRIBUTE_NO_SANITIZE_MEMORY_
 \

807 
	`__©Œibu‹__
((
no_§n™ize_memÜy
))

	)

809 
	#GTEST_ATTRIBUTE_NO_SANITIZE_MEMORY_


	)

812 
	#GTEST_ATTRIBUTE_NO_SANITIZE_MEMORY_


	)

816 #ià
	`defšed
(
__şªg__
)

817 #ià
	`__has_ã©u»
(
add»ss_§n™iz”
)

818 
	#GTEST_ATTRIBUTE_NO_SANITIZE_ADDRESS_
 \

819 
	`__©Œibu‹__
((
no_§n™ize_add»ss
))

	)

821 
	#GTEST_ATTRIBUTE_NO_SANITIZE_ADDRESS_


	)

824 
	#GTEST_ATTRIBUTE_NO_SANITIZE_ADDRESS_


	)

828 #ià
	`defšed
(
__şªg__
)

829 #ià
	`__has_ã©u»
(
hwadd»ss_§n™iz”
)

830 
	#GTEST_ATTRIBUTE_NO_SANITIZE_HWADDRESS_
 \

831 
	`__©Œibu‹__
((
	`no_§n™ize
("hwadd»ss")))

	)

833 
	#GTEST_ATTRIBUTE_NO_SANITIZE_HWADDRESS_


	)

836 
	#GTEST_ATTRIBUTE_NO_SANITIZE_HWADDRESS_


	)

840 #ià
	`defšed
(
__şªg__
)

841 #ià
	`__has_ã©u»
(
th»ad_§n™iz”
)

842 
	#GTEST_ATTRIBUTE_NO_SANITIZE_THREAD_
 \

843 
	`__©Œibu‹__
((
no_§n™ize_th»ad
))

	)

845 
	#GTEST_ATTRIBUTE_NO_SANITIZE_THREAD_


	)

848 
	#GTEST_ATTRIBUTE_NO_SANITIZE_THREAD_


	)

851 
Çme¥aû
 
‹¡šg
 {

853 
şass
 
Mes§ge
;

857 
usšg
 
¡d
::
g‘
;

858 
usšg
 
¡d
::
make_tu¶e
;

859 
usšg
 
¡d
::
tu¶e
;

860 
usšg
 
¡d
::
tu¶e_–em’t
;

861 
usšg
 
¡d
::
tu¶e_size
;

863 
Çme¥aû
 
š‹º®
 {

868 
şass
 
Seü‘
;

879 
	#GTEST_COMPILE_ASSERT_
(
ex´
, 
msg
è
	`¡©ic_as£¹
Óx´, #msg)

	)

883 
GTEST_API_
 
boŞ
 
	`IsTrue
(boŞ 
cÚd™iÚ
);

887 #ià
GTEST_USES_PCRE


889 #–ià
GTEST_USES_POSIX_RE
 || 
GTEST_USES_SIMPLE_RE


893 şas 
	cGTEST_API_
 
RE
 {

894 
public
:

897 
	`RE
(cÚ¡ 
RE
& 
Ùh”
è{ 
	`In™
(Ùh”.
	`·‰”n
()); }

900 
	`RE
(cÚ¡ ::
¡d
::
¡ršg
& 
»gex
è{ 
	`In™
Ôegex.
	`c_¡r
()); }

902 
	`RE
(cÚ¡ * 
»gex
è{ 
	`In™
(regex); }

903 ~
	`RE
();

906 cÚ¡ * 
	`·‰”n
(ècÚ¡ {  
·‰”n_
; }

912 
boŞ
 
	`FuÎM©ch
(cÚ¡ ::
¡d
::
¡ršg
& 
¡r
, cÚ¡ 
RE
& 
»
) {

913  
	`FuÎM©ch
(
¡r
.
	`c_¡r
(), 
»
);

915 
boŞ
 
	`P¬tŸlM©ch
(cÚ¡ ::
¡d
::
¡ršg
& 
¡r
, cÚ¡ 
RE
& 
»
) {

916  
	`P¬tŸlM©ch
(
¡r
.
	`c_¡r
(), 
»
);

919 
boŞ
 
	`FuÎM©ch
(cÚ¡ * 
¡r
, cÚ¡ 
RE
& 
»
);

920 
boŞ
 
	`P¬tŸlM©ch
(cÚ¡ * 
¡r
, cÚ¡ 
RE
& 
»
);

922 
´iv©e
:

923 
	`In™
(cÚ¡ * 
»gex
);

924 cÚ¡ * 
·‰”n_
;

925 
boŞ
 
is_v®id_
;

927 #ià
GTEST_USES_POSIX_RE


929 
»gex_t
 
fuÎ_»gex_
;

930 
»gex_t
 
·¹Ÿl_»gex_
;

934 cÚ¡ * 
fuÎ_·‰”n_
;

943 
GTEST_API_
 ::
¡d
::
¡ršg
 
	`FÜm©FeLoÿtiÚ
(cÚ¡ * 
fe
, 
lše
);

948 
GTEST_API_
 ::
¡d
::
¡ršg
 
	`FÜm©Comp”Ind•’d’tFeLoÿtiÚ
(cÚ¡ * 
fe
,

949 
lše
);

957 
	eGTe¡LogSev”™y
 {

958 
GTEST_INFO
,

959 
GTEST_WARNING
,

960 
GTEST_ERROR
,

961 
GTEST_FATAL


967 şas 
	cGTEST_API_
 
GTe¡Log
 {

968 
public
:

969 
	`GTe¡Log
(
GTe¡LogSev”™y
 
£v”™y
, cÚ¡ * 
fe
, 
lše
);

972 ~
	`GTe¡Log
();

974 ::
¡d
::
o¡»am
& 
	`G‘SŒ—m
(è{  ::¡d::
û¼
; }

976 
´iv©e
:

977 cÚ¡ 
GTe¡LogSev”™y
 
£v”™y_
;

979 
	`GTEST_DISALLOW_COPY_AND_ASSIGN_
(
GTe¡Log
);

982 #ià!
	`defšed
(
GTEST_LOG_
)

984 
	#GTEST_LOG_
(
£v”™y
) \

985 ::
‹¡šg
::
š‹º®
::
	`GTe¡Log
(::‹¡šg::š‹º®::
GTEST_
##
£v”™y
, \

986 
__FILE__
, 
__LINE__
).
	`G‘SŒ—m
()

	)

988 
šlše
 
	`LogToStd”r
() {}

989 
šlše
 
	`FlushInfoLog
(è{ 
	`fæush
(
nuÎ±r
); }

993 #ià!
	`defšed
(
GTEST_CHECK_
)

1008 
	#GTEST_CHECK_
(
cÚd™iÚ
) \

1009 
GTEST_AMBIGUOUS_ELSE_BLOCKER_
 \

1010 ià(::
‹¡šg
::
š‹º®
::
	`IsTrue
(
cÚd™iÚ
)) \

1013 
	`GTEST_LOG_
(
FATAL
è<< "CÚd™iÚ " #cÚd™iÚ " faed. "

	)

1021 
	#GTEST_CHECK_POSIX_SUCCESS_
(
posix_ÿÎ
) \

1022 ià(cÚ¡ 
g‹¡_”rÜ
 = (
posix_ÿÎ
)) \

1023 
	`GTEST_LOG_
(
FATAL
) << #posix_call << "failed withƒrror " \

1024 << 
g‹¡_”rÜ


	)

1037 
‹m¶©e
 <
ty³Çme
 
T
>

1038 
	sCÚ¡Ref
 { cÚ¡ 
	tT
& 
	tty³
; };

1039 
‹m¶©e
 <
ty³Çme
 
T
>

1040 
CÚ¡Ref
<
T
&> { T& 
	tty³
; };

1043 
	#GTEST_REFERENCE_TO_CONST_
(
T
) \

1044 
ty³Çme
 ::
‹¡šg
::
š‹º®
::
CÚ¡Ref
<
T
>::
ty³


	)

1066 
‹m¶©e
<
ty³Çme
 
To
>

1067 
šlše
 
To
 
	`Im¶ic™Ca¡_
(TØ
x
) {  x; }

1090 
‹m¶©e
<
ty³Çme
 
To
,y³Çm
From
>

1091 
šlše
 
To
 
	`DownCa¡_
(
From
* 
f
) {

1096 
	`GTEST_INTENTIONAL_CONST_COND_PUSH_
()

1097 ià(
çl£
) {

1098 
	`GTEST_INTENTIONAL_CONST_COND_POP_
()

1099 cÚ¡ 
To
 
to
 = 
nuÎ±r
;

1100 ::
‹¡šg
::
š‹º®
::
Im¶ic™Ca¡_
<
From
*>(
to
);

1103 #ià
GTEST_HAS_RTTI


1105 
	`GTEST_CHECK_
(
f
 =ğ
nuÎ±r
 || 
dyÇmic_ÿ¡
<
To
>(f) !=‚ullptr);

1107  
¡©ic_ÿ¡
<
To
>(
f
);

1115 
‹m¶©e
 <
şass
 
D”ived
, cÏs 
Ba£
>

1116 
D”ived
* 
	`CheckedDownÿ¡ToAùu®Ty³
(
Ba£
* 
ba£
) {

1117 #ià
GTEST_HAS_RTTI


1118 
	`GTEST_CHECK_
(
	`ty³id
(*
ba£
è=ğty³id(
D”ived
));

1121 #ià
GTEST_HAS_DOWNCAST_


1122  ::
down_ÿ¡
<
D”ived
*>(
ba£
);

1123 #–ià
GTEST_HAS_RTTI


1124  
dyÇmic_ÿ¡
<
D”ived
*>(
ba£
);

1126  
¡©ic_ÿ¡
<
D”ived
*>(
ba£
);

1130 #ià
GTEST_HAS_STREAM_REDIRECTION


1138 
GTEST_API_
 
	`C­tu»Stdout
();

1139 
GTEST_API_
 
¡d
::
¡ršg
 
	`G‘C­tu»dStdout
();

1140 
GTEST_API_
 
	`C­tu»Std”r
();

1141 
GTEST_API_
 
¡d
::
¡ršg
 
	`G‘C­tu»dStd”r
();

1145 
GTEST_API_
 
size_t
 
	`G‘FeSize
(
FILE
* 
fe
);

1148 
GTEST_API_
 
¡d
::
¡ršg
 
	`R—dEÁœeFe
(
FILE
* 
fe
);

1151 
GTEST_API_
 
¡d
::
veùÜ
<¡d::
¡ršg
> 
	`G‘Argvs
();

1153 #ià
GTEST_HAS_DEATH_TEST


1155 
¡d
::
veùÜ
<¡d::
¡ršg
> 
	`G‘InjeùabËArgvs
();

1157 
	`S‘InjeùabËArgvs
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
>* 
Ãw_¬gvs
);

1158 
	`S‘InjeùabËArgvs
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
>& 
Ãw_¬gvs
);

1159 
	`CË¬InjeùabËArgvs
();

1164 #ià
GTEST_IS_THREADSAFE


1165 #ià
GTEST_HAS_PTHREAD


1169 
šlše
 
	`SË•Mli£cÚds
(
n
) {

1170 cÚ¡ 
time¥ec
 
time
 = {

1172 
n
 * 1000L * 1000L,

1174 
	`Çno¦“p
(&
time
, 
nuÎ±r
);

1178 #ià
GTEST_HAS_NOTIFICATION_


1182 #–ià
GTEST_HAS_PTHREAD


1189 şas 
	cNÙifiÿtiÚ
 {

1190 
public
:

1191 
	`NÙifiÿtiÚ
(è: 
	`nÙif›d_
(
çl£
) {

1192 
	`GTEST_CHECK_POSIX_SUCCESS_
(
	`±h»ad_mu‹x_š™
(&
mu‹x_
, 
nuÎ±r
));

1194 ~
	`NÙifiÿtiÚ
() {

1195 
	`±h»ad_mu‹x_de¡roy
(&
mu‹x_
);

1200 
	`NÙify
() {

1201 
	`±h»ad_mu‹x_lock
(&
mu‹x_
);

1202 
nÙif›d_
 = 
Œue
;

1203 
	`±h»ad_mu‹x_uÆock
(&
mu‹x_
);

1208 
	`Wa™FÜNÙifiÿtiÚ
() {

1210 
	`±h»ad_mu‹x_lock
(&
mu‹x_
);

1211 cÚ¡ 
boŞ
 
nÙif›d
 = 
nÙif›d_
;

1212 
	`±h»ad_mu‹x_uÆock
(&
mu‹x_
);

1213 ià(
nÙif›d
)

1215 
	`SË•Mli£cÚds
(10);

1219 
´iv©e
:

1220 
±h»ad_mu‹x_t
 
mu‹x_
;

1221 
boŞ
 
nÙif›d_
;

1223 
	`GTEST_DISALLOW_COPY_AND_ASSIGN_
(
NÙifiÿtiÚ
);

1226 #–ià
GTEST_OS_WINDOWS
 && !
GTEST_OS_WINDOWS_PHONE
 && !
GTEST_OS_WINDOWS_RT


1228 
GTEST_API_
 
	`SË•Mli£cÚds
(
n
);

1232 şas 
	cGTEST_API_
 
AutoHªdË
 {

1233 
public
:

1239 * 
	tHªdË
;

1240 
	`AutoHªdË
();

1241 
ex¶ic™
 
	`AutoHªdË
(
HªdË
 
hªdË
);

1243 ~
	`AutoHªdË
();

1245 
HªdË
 
	`G‘
() const;

1246 
	`Re£t
();

1247 
	`Re£t
(
HªdË
 
hªdË
);

1249 
´iv©e
:

1252 
boŞ
 
	`IsClo£abË
() const;

1254 
HªdË
 
hªdË_
;

1256 
	`GTEST_DISALLOW_COPY_AND_ASSIGN_
(
AutoHªdË
);

1265 şas 
	cGTEST_API_
 
NÙifiÿtiÚ
 {

1266 
public
:

1267 
	`NÙifiÿtiÚ
();

1268 
	`NÙify
();

1269 
	`Wa™FÜNÙifiÿtiÚ
();

1271 
´iv©e
:

1272 
AutoHªdË
 
ev’t_
;

1274 
	`GTEST_DISALLOW_COPY_AND_ASSIGN_
(
NÙifiÿtiÚ
);

1281 #ià
GTEST_HAS_PTHREAD
 && !
GTEST_OS_WINDOWS_MINGW


1288 şas 
	cTh»adW™hP¬amBa£
 {

1289 
public
:

1290 
vœtu®
 ~
	`Th»adW™hP¬amBa£
() {}

1291 
vœtu®
 
	`Run
() = 0;

1300 "C" 
šlše
 * 
	`Th»adFuncW™hCLškage
(* 
th»ad
) {

1301 
¡©ic_ÿ¡
<
Th»adW™hP¬amBa£
*>(
th»ad
)->
	`Run
();

1302  
nuÎ±r
;

1317 
‹m¶©e
 <
ty³Çme
 
T
>

1318 şas 
	cTh»adW™hP¬am
 : 
public
 
Th»adW™hP¬amBa£
 {

1319 
public
:

1320 
	tU£rTh»adFunc
(
	tT
);

1322 
	`Th»adW™hP¬am
(
U£rTh»adFunc
* 
func
, 
T
 
·¿m
, 
NÙifiÿtiÚ
* 
th»ad_ÿn_¡¬t
)

1323 : 
	`func_
(
func
),

1324 
	`·¿m_
(
·¿m
),

1325 
	`th»ad_ÿn_¡¬t_
(
th»ad_ÿn_¡¬t
),

1326 
	`fšished_
(
çl£
) {

1327 
Th»adW™hP¬amBa£
* cÚ¡ 
ba£
 = 
this
;

1330 
	`GTEST_CHECK_POSIX_SUCCESS_
(

1331 
	`±h»ad_ü—‹
(&
th»ad_
, 
nuÎ±r
, &
Th»adFuncW™hCLškage
, 
ba£
));

1333 ~
	`Th»adW™hP¬am
(è
ov”ride
 { 
	`Još
(); }

1335 
	`Još
() {

1336 ià(!
fšished_
) {

1337 
	`GTEST_CHECK_POSIX_SUCCESS_
(
	`±h»ad_još
(
th»ad_
, 
nuÎ±r
));

1338 
fšished_
 = 
Œue
;

1342 
	`Run
(è
ov”ride
 {

1343 ià(
th»ad_ÿn_¡¬t_
 !ğ
nuÎ±r
èth»ad_ÿn_¡¬t_->
	`Wa™FÜNÙifiÿtiÚ
();

1344 
	`func_
(
·¿m_
);

1347 
´iv©e
:

1348 
U£rTh»adFunc
* cÚ¡ 
func_
;

1349 cÚ¡ 
T
 
·¿m_
;

1352 
NÙifiÿtiÚ
* cÚ¡ 
th»ad_ÿn_¡¬t_
;

1353 
boŞ
 
fšished_
;

1355 
±h»ad_t
 
th»ad_
;

1357 
	`GTEST_DISALLOW_COPY_AND_ASSIGN_
(
Th»adW™hP¬am
);

1362 #ià
GTEST_HAS_MUTEX_AND_THREAD_LOCAL_


1366 #–ià
GTEST_OS_WINDOWS
 && !
GTEST_OS_WINDOWS_PHONE
 && !
GTEST_OS_WINDOWS_RT


1382 şas 
	cGTEST_API_
 
Mu‹x
 {

1383 
public
:

1384 
	eMu‹xTy³
 { 
kStic
 = 0, 
kDyÇmic
 = 1 };

1388 
	eSticCÚ¡ruùÜS–eùÜ
 { 
kSticMu‹x
 = 0 };

1393 
ex¶ic™
 
	`Mu‹x
(
SticCÚ¡ruùÜS–eùÜ
 ) {}

1395 
	`Mu‹x
();

1396 ~
	`Mu‹x
();

1398 
	`Lock
();

1400 
	`UÆock
();

1404 
	`As£¹H–d
();

1406 
´iv©e
:

1408 
	`Th»adSaãLazyIn™
();

1412 
owÃr_th»ad_id_
;

1416 
Mu‹xTy³
 
ty³_
;

1417 
ü™iÿl_£ùiÚ_š™_pha£_
;

1418 
GTEST_CRITICAL_SECTION
* 
ü™iÿl_£ùiÚ_
;

1420 
	`GTEST_DISALLOW_COPY_AND_ASSIGN_
(
Mu‹x
);

1423 
	#GTEST_DECLARE_STATIC_MUTEX_
(
mu‹x
) \

1424 ::
‹¡šg
::
š‹º®
::
Mu‹x
 
mu‹x


	)

1426 
	#GTEST_DEFINE_STATIC_MUTEX_
(
mu‹x
) \

1427 ::
‹¡šg
::
š‹º®
::
Mu‹x
 
	`mu‹x
(::‹¡šg::š‹º®::Mu‹x::
kSticMu‹x
)

	)

1434 şas 
	cGTe¡Mu‹xLock
 {

1435 
public
:

1436 
ex¶ic™
 
	`GTe¡Mu‹xLock
(
Mu‹x
* 
mu‹x
)

1437 : 
	`mu‹x_
(
mu‹x
è{ 
mu‹x_
->
	`Lock
(); }

1439 ~
	`GTe¡Mu‹xLock
(è{ 
mu‹x_
->
	`UÆock
(); }

1441 
´iv©e
:

1442 
Mu‹x
* cÚ¡ 
mu‹x_
;

1444 
	`GTEST_DISALLOW_COPY_AND_ASSIGN_
(
GTe¡Mu‹xLock
);

1447 
GTe¡Mu‹xLock
 
	tMu‹xLock
;

1451 şas 
	cTh»adLoÿlV®ueHŞd”Ba£
 {

1452 
public
:

1453 
vœtu®
 ~
	`Th»adLoÿlV®ueHŞd”Ba£
() {}

1458 şas 
	cTh»adLoÿlBa£
 {

1459 
public
:

1464 
vœtu®
 
Th»adLoÿlV®ueHŞd”Ba£
* 
	`NewV®ueFÜCu¼’tTh»ad
() const = 0;

1466 
´Ùeùed
:

1467 
	`Th»adLoÿlBa£
() {}

1468 
vœtu®
 ~
	`Th»adLoÿlBa£
() {}

1470 
´iv©e
:

1471 
	`GTEST_DISALLOW_COPY_AND_ASSIGN_
(
Th»adLoÿlBa£
);

1477 şas 
	cGTEST_API_
 
Th»adLoÿlRegi¡ry
 {

1478 
public
:

1481 
Th»adLoÿlV®ueHŞd”Ba£
* 
	`G‘V®ueOnCu¼’tTh»ad
(

1482 cÚ¡ 
Th»adLoÿlBa£
* 
th»ad_loÿl_š¡ªû
);

1485 
	`OnTh»adLoÿlDe¡royed
(

1486 cÚ¡ 
Th»adLoÿlBa£
* 
th»ad_loÿl_š¡ªû
);

1489 şas 
	cGTEST_API_
 
Th»adW™hP¬amBa£
 {

1490 
public
:

1491 
	`Još
();

1493 
´Ùeùed
:

1494 şas 
	cRuÂabË
 {

1495 
public
:

1496 
vœtu®
 ~
	`RuÂabË
() {}

1497 
vœtu®
 
	`Run
() = 0;

1500 
	`Th»adW™hP¬amBa£
(
RuÂabË
 *
ruÂabË
, 
NÙifiÿtiÚ
* 
th»ad_ÿn_¡¬t
);

1501 
vœtu®
 ~
	`Th»adW™hP¬amBa£
();

1503 
´iv©e
:

1504 
AutoHªdË
 
th»ad_
;

1508 
‹m¶©e
 <
ty³Çme
 
T
>

1509 şas 
	cTh»adW™hP¬am
 : 
public
 
Th»adW™hP¬amBa£
 {

1510 
public
:

1511 
	tU£rTh»adFunc
(
	tT
);

1513 
	`Th»adW™hP¬am
(
U£rTh»adFunc
* 
func
, 
T
 
·¿m
, 
NÙifiÿtiÚ
* 
th»ad_ÿn_¡¬t
)

1514 : 
	`Th»adW™hP¬amBa£
(
Ãw
 
	`RuÂabËIm¶
(
func
, 
·¿m
), 
th»ad_ÿn_¡¬t
) {

1516 
vœtu®
 ~
	`Th»adW™hP¬am
() {}

1518 
´iv©e
:

1519 şas 
	cRuÂabËIm¶
 : 
public
 
RuÂabË
 {

1520 
public
:

1521 
	`RuÂabËIm¶
(
U£rTh»adFunc
* 
func
, 
T
 
·¿m
)

1522 : 
	`func_
(
func
),

1523 
	`·¿m_
(
·¿m
) {

1525 
vœtu®
 ~
	`RuÂabËIm¶
() {}

1526 
vœtu®
 
	`Run
() {

1527 
	`func_
(
·¿m_
);

1530 
´iv©e
:

1531 
U£rTh»adFunc
* cÚ¡ 
func_
;

1532 cÚ¡ 
T
 
·¿m_
;

1534 
	`GTEST_DISALLOW_COPY_AND_ASSIGN_
(
RuÂabËIm¶
);

1537 
	`GTEST_DISALLOW_COPY_AND_ASSIGN_
(
Th»adW™hP¬am
);

1567 
‹m¶©e
 <
ty³Çme
 
T
>

1568 şas 
	cTh»adLoÿl
 : 
public
 
Th»adLoÿlBa£
 {

1569 
public
:

1570 
	`Th»adLoÿl
(è: 
	`deçuÉ_çùÜy_
(
Ãw
 
	`DeçuÉV®ueHŞd”FaùÜy
()) {}

1571 
ex¶ic™
 
	`Th»adLoÿl
(cÚ¡ 
T
& 
v®ue
)

1572 : 
	`deçuÉ_çùÜy_
(
Ãw
 
	`In¡ªûV®ueHŞd”FaùÜy
(
v®ue
)) {}

1574 ~
	`Th»adLoÿl
(è{ 
Th»adLoÿlRegi¡ry
::
	`OnTh»adLoÿlDe¡royed
(
this
); }

1576 
T
* 
	`poš‹r
(è{  
	`G‘OrC»©eV®ue
(); }

1577 cÚ¡ 
T
* 
	`poš‹r
(ècÚ¡ {  
	`G‘OrC»©eV®ue
(); }

1578 cÚ¡ 
T
& 
	`g‘
(ècÚ¡ {  *
	`poš‹r
(); }

1579 
	`£t
(cÚ¡ 
T
& 
v®ue
è{ *
	`poš‹r
() = value; }

1581 
´iv©e
:

1584 şas 
	cV®ueHŞd”
 : 
public
 
Th»adLoÿlV®ueHŞd”Ba£
 {

1585 
public
:

1586 
	`V®ueHŞd”
(è: 
	`v®ue_
() {}

1587 
ex¶ic™
 
	`V®ueHŞd”
(cÚ¡ 
T
& 
v®ue
è: 
	`v®ue_
(value) {}

1589 
T
* 
	`poš‹r
(è{  &
v®ue_
; }

1591 
´iv©e
:

1592 
T
 
v®ue_
;

1593 
	`GTEST_DISALLOW_COPY_AND_ASSIGN_
(
V®ueHŞd”
);

1597 
T
* 
	`G‘OrC»©eV®ue
() const {

1598  
¡©ic_ÿ¡
<
V®ueHŞd”
*>(

1599 
Th»adLoÿlRegi¡ry
::
	`G‘V®ueOnCu¼’tTh»ad
(
this
))->
	`poš‹r
();

1602 
vœtu®
 
Th»adLoÿlV®ueHŞd”Ba£
* 
	`NewV®ueFÜCu¼’tTh»ad
() const {

1603  
deçuÉ_çùÜy_
->
	`MakeNewHŞd”
();

1606 şas 
	cV®ueHŞd”FaùÜy
 {

1607 
public
:

1608 
	`V®ueHŞd”FaùÜy
() {}

1609 
vœtu®
 ~
	`V®ueHŞd”FaùÜy
() {}

1610 
vœtu®
 
V®ueHŞd”
* 
	`MakeNewHŞd”
() const = 0;

1612 
´iv©e
:

1613 
	`GTEST_DISALLOW_COPY_AND_ASSIGN_
(
V®ueHŞd”FaùÜy
);

1616 şas 
	cDeçuÉV®ueHŞd”FaùÜy
 : 
public
 
V®ueHŞd”FaùÜy
 {

1617 
public
:

1618 
	`DeçuÉV®ueHŞd”FaùÜy
() {}

1619 
V®ueHŞd”
* 
	`MakeNewHŞd”
(ècÚ¡ 
ov”ride
 {  
Ãw
 
	`V®ueHŞd”
(); }

1621 
´iv©e
:

1622 
	`GTEST_DISALLOW_COPY_AND_ASSIGN_
(
DeçuÉV®ueHŞd”FaùÜy
);

1625 şas 
	cIn¡ªûV®ueHŞd”FaùÜy
 : 
public
 
V®ueHŞd”FaùÜy
 {

1626 
public
:

1627 
ex¶ic™
 
	`In¡ªûV®ueHŞd”FaùÜy
(cÚ¡ 
T
& 
v®ue
è: 
	`v®ue_
(value) {}

1628 
V®ueHŞd”
* 
	`MakeNewHŞd”
(ècÚ¡ 
ov”ride
 {

1629  
Ãw
 
	`V®ueHŞd”
(
v®ue_
);

1632 
´iv©e
:

1633 cÚ¡ 
T
 
v®ue_
;

1635 
	`GTEST_DISALLOW_COPY_AND_ASSIGN_
(
In¡ªûV®ueHŞd”FaùÜy
);

1638 
¡d
::
unique_±r
<
V®ueHŞd”FaùÜy
> 
deçuÉ_çùÜy_
;

1640 
	`GTEST_DISALLOW_COPY_AND_ASSIGN_
(
Th»adLoÿl
);

1643 #–ià
GTEST_HAS_PTHREAD


1646 şas 
	cMu‹xBa£
 {

1647 
public
:

1649 
	`Lock
() {

1650 
	`GTEST_CHECK_POSIX_SUCCESS_
(
	`±h»ad_mu‹x_lock
(&
mu‹x_
));

1651 
owÃr_
 = 
	`±h»ad_£lf
();

1652 
has_owÃr_
 = 
Œue
;

1656 
	`UÆock
() {

1661 
has_owÃr_
 = 
çl£
;

1662 
	`GTEST_CHECK_POSIX_SUCCESS_
(
	`±h»ad_mu‹x_uÆock
(&
mu‹x_
));

1667 
	`As£¹H–d
() const {

1668 
	`GTEST_CHECK_
(
has_owÃr_
 && 
	`±h»ad_equ®
(
owÃr_
, 
	`±h»ad_£lf
()))

1669 << "Thcu¼’ˆth»ad i nÙ hŞdšghmu‹x @" << 
this
;

1677 
public
:

1678 
±h»ad_mu‹x_t
 
mu‹x_
;

1685 
boŞ
 
has_owÃr_
;

1686 
±h»ad_t
 
owÃr_
;

1690 
	#GTEST_DECLARE_STATIC_MUTEX_
(
mu‹x
) \

1691 ::
‹¡šg
::
š‹º®
::
Mu‹xBa£
 
mu‹x


	)

1699 
	#GTEST_DEFINE_STATIC_MUTEX_
(
mu‹x
) \

1700 ::
‹¡šg
::
š‹º®
::
Mu‹xBa£
 
mu‹x
 = {
PTHREAD_MUTEX_INITIALIZER
, 
çl£
, 0}

	)

1704 şas 
	cMu‹x
 : 
public
 
Mu‹xBa£
 {

1705 
public
:

1706 
	`Mu‹x
() {

1707 
	`GTEST_CHECK_POSIX_SUCCESS_
(
	`±h»ad_mu‹x_š™
(&
mu‹x_
, 
nuÎ±r
));

1708 
has_owÃr_
 = 
çl£
;

1710 ~
	`Mu‹x
() {

1711 
	`GTEST_CHECK_POSIX_SUCCESS_
(
	`±h»ad_mu‹x_de¡roy
(&
mu‹x_
));

1714 
´iv©e
:

1715 
	`GTEST_DISALLOW_COPY_AND_ASSIGN_
(
Mu‹x
);

1723 şas 
	cGTe¡Mu‹xLock
 {

1724 
public
:

1725 
ex¶ic™
 
	`GTe¡Mu‹xLock
(
Mu‹xBa£
* 
mu‹x
)

1726 : 
	`mu‹x_
(
mu‹x
è{ 
mu‹x_
->
	`Lock
(); }

1728 ~
	`GTe¡Mu‹xLock
(è{ 
mu‹x_
->
	`UÆock
(); }

1730 
´iv©e
:

1731 
Mu‹xBa£
* cÚ¡ 
mu‹x_
;

1733 
	`GTEST_DISALLOW_COPY_AND_ASSIGN_
(
GTe¡Mu‹xLock
);

1736 
GTe¡Mu‹xLock
 
	tMu‹xLock
;

1744 şas 
	cTh»adLoÿlV®ueHŞd”Ba£
 {

1745 
public
:

1746 
vœtu®
 ~
	`Th»adLoÿlV®ueHŞd”Ba£
() {}

1751 "C" 
šlše
 
	`D–‘eTh»adLoÿlV®ue
(* 
v®ue_hŞd”
) {

1752 
d–‘e
 
¡©ic_ÿ¡
<
Th»adLoÿlV®ueHŞd”Ba£
*>(
v®ue_hŞd”
);

1756 
‹m¶©e
 <
ty³Çme
 
T
>

1757 şas 
	cGTEST_API_
 
Th»adLoÿl
 {

1758 
public
:

1759 
	`Th»adLoÿl
()

1760 : 
	`key_
(
	`C»©eKey
()), 
	`deçuÉ_çùÜy_
(
Ãw
 
	`DeçuÉV®ueHŞd”FaùÜy
()) {}

1761 
ex¶ic™
 
	`Th»adLoÿl
(cÚ¡ 
T
& 
v®ue
)

1762 : 
	`key_
(
	`C»©eKey
()),

1763 
	`deçuÉ_çùÜy_
(
Ãw
 
	`In¡ªûV®ueHŞd”FaùÜy
(
v®ue
)) {}

1765 ~
	`Th»adLoÿl
() {

1767 
	`D–‘eTh»adLoÿlV®ue
(
	`±h»ad_g‘¥ecific
(
key_
));

1771 
	`GTEST_CHECK_POSIX_SUCCESS_
(
	`±h»ad_key_d–‘e
(
key_
));

1774 
T
* 
	`poš‹r
(è{  
	`G‘OrC»©eV®ue
(); }

1775 cÚ¡ 
T
* 
	`poš‹r
(ècÚ¡ {  
	`G‘OrC»©eV®ue
(); }

1776 cÚ¡ 
T
& 
	`g‘
(ècÚ¡ {  *
	`poš‹r
(); }

1777 
	`£t
(cÚ¡ 
T
& 
v®ue
è{ *
	`poš‹r
() = value; }

1779 
´iv©e
:

1781 şas 
	cV®ueHŞd”
 : 
public
 
Th»adLoÿlV®ueHŞd”Ba£
 {

1782 
public
:

1783 
	`V®ueHŞd”
(è: 
	`v®ue_
() {}

1784 
ex¶ic™
 
	`V®ueHŞd”
(cÚ¡ 
T
& 
v®ue
è: 
	`v®ue_
(value) {}

1786 
T
* 
	`poš‹r
(è{  &
v®ue_
; }

1788 
´iv©e
:

1789 
T
 
v®ue_
;

1790 
	`GTEST_DISALLOW_COPY_AND_ASSIGN_
(
V®ueHŞd”
);

1793 
±h»ad_key_t
 
	`C»©eKey
() {

1794 
±h»ad_key_t
 
key
;

1797 
	`GTEST_CHECK_POSIX_SUCCESS_
(

1798 
	`±h»ad_key_ü—‹
(&
key
, &
D–‘eTh»adLoÿlV®ue
));

1799  
key
;

1802 
T
* 
	`G‘OrC»©eV®ue
() const {

1803 
Th»adLoÿlV®ueHŞd”Ba£
* cÚ¡ 
hŞd”
 =

1804 
¡©ic_ÿ¡
<
Th»adLoÿlV®ueHŞd”Ba£
*>(
	`±h»ad_g‘¥ecific
(
key_
));

1805 ià(
hŞd”
 !ğ
nuÎ±r
) {

1806  
CheckedDownÿ¡ToAùu®Ty³
<
V®ueHŞd”
>(
hŞd”
)->
	`poš‹r
();

1809 
V®ueHŞd”
* cÚ¡ 
Ãw_hŞd”
 = 
deçuÉ_çùÜy_
->
	`MakeNewHŞd”
();

1810 
Th»adLoÿlV®ueHŞd”Ba£
* cÚ¡ 
hŞd”_ba£
 = 
Ãw_hŞd”
;

1811 
	`GTEST_CHECK_POSIX_SUCCESS_
(
	`±h»ad_£t¥ecific
(
key_
, 
hŞd”_ba£
));

1812  
Ãw_hŞd”
->
	`poš‹r
();

1815 şas 
	cV®ueHŞd”FaùÜy
 {

1816 
public
:

1817 
	`V®ueHŞd”FaùÜy
() {}

1818 
vœtu®
 ~
	`V®ueHŞd”FaùÜy
() {}

1819 
vœtu®
 
V®ueHŞd”
* 
	`MakeNewHŞd”
() const = 0;

1821 
´iv©e
:

1822 
	`GTEST_DISALLOW_COPY_AND_ASSIGN_
(
V®ueHŞd”FaùÜy
);

1825 şas 
	cDeçuÉV®ueHŞd”FaùÜy
 : 
public
 
V®ueHŞd”FaùÜy
 {

1826 
public
:

1827 
	`DeçuÉV®ueHŞd”FaùÜy
() {}

1828 
V®ueHŞd”
* 
	`MakeNewHŞd”
(ècÚ¡ 
ov”ride
 {  
Ãw
 
	`V®ueHŞd”
(); }

1830 
´iv©e
:

1831 
	`GTEST_DISALLOW_COPY_AND_ASSIGN_
(
DeçuÉV®ueHŞd”FaùÜy
);

1834 şas 
	cIn¡ªûV®ueHŞd”FaùÜy
 : 
public
 
V®ueHŞd”FaùÜy
 {

1835 
public
:

1836 
ex¶ic™
 
	`In¡ªûV®ueHŞd”FaùÜy
(cÚ¡ 
T
& 
v®ue
è: 
	`v®ue_
(value) {}

1837 
V®ueHŞd”
* 
	`MakeNewHŞd”
(ècÚ¡ 
ov”ride
 {

1838  
Ãw
 
	`V®ueHŞd”
(
v®ue_
);

1841 
´iv©e
:

1842 cÚ¡ 
T
 
v®ue_
;

1844 
	`GTEST_DISALLOW_COPY_AND_ASSIGN_
(
In¡ªûV®ueHŞd”FaùÜy
);

1848 cÚ¡ 
±h»ad_key_t
 
key_
;

1849 
¡d
::
unique_±r
<
V®ueHŞd”FaùÜy
> 
deçuÉ_çùÜy_
;

1851 
	`GTEST_DISALLOW_COPY_AND_ASSIGN_
(
Th»adLoÿl
);

1863 şas 
	cMu‹x
 {

1864 
public
:

1865 
	`Mu‹x
() {}

1866 
	`Lock
() {}

1867 
	`UÆock
() {}

1868 
	`As£¹H–d
() const {}

1871 
	#GTEST_DECLARE_STATIC_MUTEX_
(
mu‹x
) \

1872 ::
‹¡šg
::
š‹º®
::
Mu‹x
 
mu‹x


	)

1874 
	#GTEST_DEFINE_STATIC_MUTEX_
(
mu‹x
è::
‹¡šg
::
š‹º®
::
Mu‹x
 
	)
mutex

1881 şas 
	cGTe¡Mu‹xLock
 {

1882 
public
:

1883 
ex¶ic™
 
	`GTe¡Mu‹xLock
(
Mu‹x
*) {}

1886 
GTe¡Mu‹xLock
 
	tMu‹xLock
;

1888 
‹m¶©e
 <
ty³Çme
 
T
>

1889 şas 
	cGTEST_API_
 
Th»adLoÿl
 {

1890 
public
:

1891 
	`Th»adLoÿl
(è: 
	`v®ue_
() {}

1892 
ex¶ic™
 
	`Th»adLoÿl
(cÚ¡ 
T
& 
v®ue
è: 
	`v®ue_
(value) {}

1893 
T
* 
	`poš‹r
(è{  &
v®ue_
; }

1894 cÚ¡ 
T
* 
	`poš‹r
(ècÚ¡ {  &
v®ue_
; }

1895 cÚ¡ 
T
& 
	`g‘
(ècÚ¡ {  
v®ue_
; }

1896 
	`£t
(cÚ¡ 
T
& 
v®ue
è{ 
v®ue_
 = value; }

1897 
´iv©e
:

1898 
T
 
v®ue_
;

1905 
GTEST_API_
 
size_t
 
	`G‘Th»adCouÁ
();

1907 #ià
GTEST_OS_WINDOWS


1908 
	#GTEST_PATH_SEP_
 "\\"

	)

1909 
	#GTEST_HAS_ALT_PATH_SEP_
 1

	)

1911 
	#GTEST_PATH_SEP_
 "/"

	)

1912 
	#GTEST_HAS_ALT_PATH_SEP_
 0

	)

1922 
šlše
 
boŞ
 
	`IsAÍha
(
ch
) {

1923  
	`i§Íha
(
¡©ic_ÿ¡
<>(
ch
)) != 0;

1925 
šlše
 
boŞ
 
	`IsAlNum
(
ch
) {

1926  
	`i§Êum
(
¡©ic_ÿ¡
<>(
ch
)) != 0;

1928 
šlše
 
boŞ
 
	`IsDig™
(
ch
) {

1929  
	`isdig™
(
¡©ic_ÿ¡
<>(
ch
)) != 0;

1931 
šlše
 
boŞ
 
	`IsLow”
(
ch
) {

1932  
	`i¦ow”
(
¡©ic_ÿ¡
<>(
ch
)) != 0;

1934 
šlše
 
boŞ
 
	`IsS·û
(
ch
) {

1935  
	`is¥aû
(
¡©ic_ÿ¡
<>(
ch
)) != 0;

1937 
šlše
 
boŞ
 
	`IsUµ”
(
ch
) {

1938  
	`isuµ”
(
¡©ic_ÿ¡
<>(
ch
)) != 0;

1940 
šlše
 
boŞ
 
	`IsXDig™
(
ch
) {

1941  
	`isxdig™
(
¡©ic_ÿ¡
<>(
ch
)) != 0;

1943 #ifdeà
__ıp_ch¬8_t


1944 
šlše
 
boŞ
 
	`IsXDig™
(
ch¬8_t
 
ch
) {

1945  
	`isxdig™
(
¡©ic_ÿ¡
<>(
ch
)) != 0;

1948 
šlše
 
boŞ
 
	`IsXDig™
(
ch¬16_t
 
ch
) {

1949 cÚ¡ 
low_by‹
 = 
¡©ic_ÿ¡
<>(
ch
);

1950  
ch
 =ğ
low_by‹
 && 
	`isxdig™
(low_byte) != 0;

1952 
šlše
 
boŞ
 
	`IsXDig™
(
ch¬32_t
 
ch
) {

1953 cÚ¡ 
low_by‹
 = 
¡©ic_ÿ¡
<>(
ch
);

1954  
ch
 =ğ
low_by‹
 && 
	`isxdig™
(low_byte) != 0;

1956 
šlše
 
boŞ
 
	`IsXDig™
(
wch¬_t
 
ch
) {

1957 cÚ¡ 
low_by‹
 = 
¡©ic_ÿ¡
<>(
ch
);

1958  
ch
 =ğ
low_by‹
 && 
	`isxdig™
(low_byte) != 0;

1961 
šlše
 
	`ToLow”
(
ch
) {

1962  
¡©ic_ÿ¡
<>(
	`tŞow”
(¡©ic_ÿ¡<>(
ch
)));

1964 
šlše
 
	`ToUµ”
(
ch
) {

1965  
¡©ic_ÿ¡
<>(
	`touµ”
(¡©ic_ÿ¡<>(
ch
)));

1968 
šlše
 
¡d
::
¡ršg
 
	`SŒT¿šgS·ûs
(¡d::¡ršg 
¡r
) {

1969 
¡d
::
¡ršg
::
™”©Ü
 
™
 = 
¡r
.
	`’d
();

1970 
™
 !ğ
¡r
.
	`begš
(è&& 
	`IsS·û
(*--it))

1971 
™
 = 
¡r
.
	`”a£
(it);

1972  
¡r
;

1981 
Çme¥aû
 
posix
 {

1985 #ià
GTEST_OS_WINDOWS


1987 
_¡©
 
	tStSŒuù
;

1989 #ifdeà
__BORLANDC__


1990 
šlše
 
	`DoIsATTY
(
fd
è{  
	`i§‰y
(fd); }

1991 
šlše
 
	`SŒCa£Cmp
(cÚ¡ * 
s1
, cÚ¡ * 
s2
) {

1992  
	`¡ricmp
(
s1
, 
s2
);

1994 
šlše
 * 
	`SŒDup
(cÚ¡ * 
¤c
è{  
	`¡rdup
(src); }

1996 #ià
GTEST_OS_WINDOWS_MOBILE


1997 
šlše
 
	`DoIsATTY
() {  0; }

1999 
šlše
 
	`DoIsATTY
(
fd
è{  
	`_i§‰y
(fd); }

2001 
šlše
 
	`SŒCa£Cmp
(cÚ¡ * 
s1
, cÚ¡ * 
s2
) {

2002  
	`_¡ricmp
(
s1
, 
s2
);

2004 
šlše
 * 
	`SŒDup
(cÚ¡ * 
¤c
è{  
	`_¡rdup
(src); }

2007 #ià
GTEST_OS_WINDOWS_MOBILE


2008 
šlše
 
	`FeNo
(
FILE
* 
fe
è{  
»š‹½»t_ÿ¡
<>(
	`_f’o
(file)); }

2012 
šlše
 
	`FeNo
(
FILE
* 
fe
è{  
	`_f’o
(file); }

2013 
šlše
 
	`St
(cÚ¡ * 
·th
, 
StSŒuù
* 
buf
è{  
	`_¡©
(path, buf); }

2014 
šlše
 
	`RmDœ
(cÚ¡ * 
dœ
è{  
	`_rmdœ
(dir); }

2015 
šlše
 
boŞ
 
	`IsDœ
(cÚ¡ 
StSŒuù
& 
¡
) {

2016  (
_S_IFDIR
 & 
¡
.
¡_mode
) != 0;

2020 #–ià
GTEST_OS_ESP8266


2021 
¡©
 
	tStSŒuù
;

2023 
šlše
 
	`FeNo
(
FILE
* 
fe
è{  
	`f’o
(file); }

2024 
šlše
 
	`DoIsATTY
(
fd
è{  
	`i§‰y
(fd); }

2025 
šlše
 
	`St
(cÚ¡ * 
·th
, 
StSŒuù
* 
buf
) {

2029 
šlše
 
	`SŒCa£Cmp
(cÚ¡ * 
s1
, cÚ¡ * 
s2
) {

2030  
	`¡rÿ£cmp
(
s1
, 
s2
);

2032 
šlše
 * 
	`SŒDup
(cÚ¡ * 
¤c
è{  
	`¡rdup
(src); }

2033 
šlše
 
	`RmDœ
(cÚ¡ * 
dœ
è{  
	`rmdœ
(dir); }

2034 
šlše
 
boŞ
 
	`IsDœ
(cÚ¡ 
StSŒuù
& 
¡
è{  
	`S_ISDIR
(¡.
¡_mode
); }

2038 
¡©
 
	tStSŒuù
;

2040 
šlše
 
	`FeNo
(
FILE
* 
fe
è{  
	`f’o
(file); }

2041 
šlše
 
	`DoIsATTY
(
fd
è{  
	`i§‰y
(fd); }

2042 
šlše
 
	`St
(cÚ¡ * 
·th
, 
StSŒuù
* 
buf
è{  
	`¡©
(path, buf); }

2043 
šlše
 
	`SŒCa£Cmp
(cÚ¡ * 
s1
, cÚ¡ * 
s2
) {

2044  
	`¡rÿ£cmp
(
s1
, 
s2
);

2046 
šlše
 * 
	`SŒDup
(cÚ¡ * 
¤c
è{  
	`¡rdup
(src); }

2047 
šlše
 
	`RmDœ
(cÚ¡ * 
dœ
è{  
	`rmdœ
(dir); }

2048 
šlše
 
boŞ
 
	`IsDœ
(cÚ¡ 
StSŒuù
& 
¡
è{  
	`S_ISDIR
(¡.
¡_mode
); }

2052 
šlše
 
	`IsATTY
(
fd
) {

2056 
§vedE¼no
 = 
”ºo
;

2057 
isA‰yV®ue
 = 
	`DoIsATTY
(
fd
);

2058 
”ºo
 = 
§vedE¼no
;

2060  
isA‰yV®ue
;

2065 
	`GTEST_DISABLE_MSC_DEPRECATED_PUSH_
()

2071 #ià!
GTEST_OS_WINDOWS_MOBILE
 && !
GTEST_OS_WINDOWS_PHONE
 && \

2072 !
GTEST_OS_WINDOWS_RT
 && !
GTEST_OS_ESP8266
 && !
GTEST_OS_XTENSA


2073 
šlše
 
	`ChDœ
(cÚ¡ * 
dœ
è{  
	`chdœ
(dir); }

2075 
šlše
 
FILE
* 
	`FO³n
(cÚ¡ * 
·th
, cÚ¡ * 
mode
) {

2076 #ià
GTEST_OS_WINDOWS
 && !
GTEST_OS_WINDOWS_MINGW


2077 
wch¬_codecvt
 : 
public
 
¡d
::
codecvt
<
wch¬_t
, , std::
mb¡©e_t
> {};

2078 
¡d
::
w¡ršg_cÚv”t
<
wch¬_codecvt
> 
cÚv”‹r
;

2079 
¡d
::
w¡ršg
 
wide_·th
 = 
cÚv”‹r
.
	`äom_by‹s
(
·th
);

2080 
¡d
::
w¡ršg
 
wide_mode
 = 
cÚv”‹r
.
	`äom_by‹s
(
mode
);

2081  
	`_wfİ’
(
wide_·th
.
	`c_¡r
(), 
wide_mode
.c_str());

2083  
	`fİ’
(
·th
, 
mode
);

2086 #ià!
GTEST_OS_WINDOWS_MOBILE


2087 
šlše
 
FILE
 *
	`FReİ’
(cÚ¡ * 
·th
, cÚ¡ * 
mode
, FILE* 
¡»am
) {

2088  
	`äeİ’
(
·th
, 
mode
, 
¡»am
);

2090 
šlše
 
FILE
* 
	`FDO³n
(
fd
, cÚ¡ * 
mode
è{  
	`fdİ’
(fd, mode); }

2092 
šlše
 
	`FClo£
(
FILE
* 
å
è{  
	`fşo£
(fp); }

2093 #ià!
GTEST_OS_WINDOWS_MOBILE


2094 
šlše
 
	`R—d
(
fd
, * 
buf
, 
couÁ
) {

2095  
¡©ic_ÿ¡
<>(
	`»ad
(
fd
, 
buf
, 
couÁ
));

2097 
šlše
 
	`Wr™e
(
fd
, cÚ¡ * 
buf
, 
couÁ
) {

2098  
¡©ic_ÿ¡
<>(
	`wr™e
(
fd
, 
buf
, 
couÁ
));

2100 
šlše
 
	`Clo£
(
fd
è{  
	`şo£
(fd); }

2101 
šlše
 cÚ¡ * 
	`SŒE¼Ü
(
”ºum
è{  
	`¡»¼Ü
(errnum); }

2103 
šlše
 cÚ¡ * 
	`G‘Env
(cÚ¡ * 
Çme
) {

2104 #ià
GTEST_OS_WINDOWS_MOBILE
 || 
GTEST_OS_WINDOWS_PHONE
 || \

2105 
GTEST_OS_WINDOWS_RT
 || 
GTEST_OS_ESP8266
 || 
GTEST_OS_XTENSA


2107 
¡©ic_ÿ¡
<>(
Çme
);

2108  
nuÎ±r
;

2109 #–ià
	`defšed
(
__BORLANDC__
è|| defšed(
__SunOS_5_8
è|| defšed(
__SunOS_5_9
)

2112 cÚ¡ * cÚ¡ 
’v
 = 
	`g‘’v
(
Çme
);

2113  (
’v
 !ğ
nuÎ±r
 &&ƒnv[0] != '\0') ?ƒnv :‚ullptr;

2115  
	`g‘’v
(
Çme
);

2119 
	`GTEST_DISABLE_MSC_DEPRECATED_POP_
()

2121 #ià
GTEST_OS_WINDOWS_MOBILE


2125 [[
nÜ‘uº
]] 
	`AbÜt
();

2127 [[
nÜ‘uº
]] 
šlše
 
	`AbÜt
(è{ 
	`abÜt
(); }

2137 #ià
_MSC_VER
 && !
GTEST_OS_WINDOWS_MOBILE


2139 
	#GTEST_SNPRINTF_
(
bufãr
, 
size
, 
fÜm©
, ...) \

2140 
	`_¢´štf_s
(
bufãr
, 
size
, size, 
fÜm©
, 
__VA_ARGS__
)

	)

2141 #–ià
	`defšed
(
_MSC_VER
)

2143 
	#GTEST_SNPRINTF_
 
_¢´štf


	)

2145 
	#GTEST_SNPRINTF_
 
¢´štf


	)

2151 
usšg
 
Bigge¡IÁ
 = ;

2154 
cÚ¡ex´
 
Bigge¡IÁ
 
kMaxBigge¡IÁ
 = (
¡d
::
num”ic_lim™s
<Bigge¡IÁ>::
max
)();

2174 
‹m¶©e
 <
size_t
 
size
>

2175 şas 
	cTy³W™hSize
 {

2176 
public
:

2179 
usšg
 
UIÁ
 = ;

2183 
‹m¶©e
 <>

2184 
şass
 
Ty³W™hSize
<4> {

2185 
public
:

2186 
usšg
 
IÁ
 = 
¡d
::
št32_t
;

2187 
usšg
 
UIÁ
 = 
¡d
::
ušt32_t
;

2191 
‹m¶©e
 <>

2192 
şass
 
Ty³W™hSize
<8> {

2193 
public
:

2194 
usšg
 
IÁ
 = 
¡d
::
št64_t
;

2195 
usšg
 
UIÁ
 = 
¡d
::
ušt64_t
;

2199 
usšg
 
TimeInMlis
 = 
št64_t
;

2204 #ià!
	`defšed
(
GTEST_FLAG
)

2205 
	#GTEST_FLAG
(
Çme
è
FLAGS_g‹¡_
##
	)
name

2208 #ià!
	`defšed
(
GTEST_USE_OWN_FLAGFILE_FLAG_
)

2209 
	#GTEST_USE_OWN_FLAGFILE_FLAG_
 1

	)

2212 #ià!
	`defšed
(
GTEST_DECLARE_boŞ_
)

2213 
	#GTEST_FLAG_SAVER_
 ::
‹¡šg
::
š‹º®
::
GTe¡FÏgSav”


	)

2216 
	#GTEST_DECLARE_boŞ_
(
Çme
è
GTEST_API_
 
boŞ
 
	`GTEST_FLAG
Òame)

	)

2217 
	#GTEST_DECLARE_št32_
(
Çme
) \

2218 
GTEST_API_
 
¡d
::
št32_t
 
	`GTEST_FLAG
(
Çme
)

	)

2219 
	#GTEST_DECLARE_¡ršg_
(
Çme
) \

2220 
GTEST_API_
 ::
¡d
::
¡ršg
 
	`GTEST_FLAG
(
Çme
)

	)

2223 
	#GTEST_DEFINE_boŞ_
(
Çme
, 
deçuÉ_v®
, 
doc
) \

2224 
GTEST_API_
 
boŞ
 
	`GTEST_FLAG
(
Çme
èğ(
deçuÉ_v®
)

	)

2225 
	#GTEST_DEFINE_št32_
(
Çme
, 
deçuÉ_v®
, 
doc
) \

2226 
GTEST_API_
 
¡d
::
št32_t
 
	`GTEST_FLAG
(
Çme
èğ(
deçuÉ_v®
)

	)

2227 
	#GTEST_DEFINE_¡ršg_
(
Çme
, 
deçuÉ_v®
, 
doc
) \

2228 
GTEST_API_
 ::
¡d
::
¡ršg
 
	`GTEST_FLAG
(
Çme
èğ(
deçuÉ_v®
)

	)

2233 #ià!
	`defšed
(
GTEST_EXCLUSIVE_LOCK_REQUIRED_
)

2234 
	#GTEST_EXCLUSIVE_LOCK_REQUIRED_
(
locks
)

	)

2235 
	#GTEST_LOCK_EXCLUDED_
(
locks
)

	)

2241 
GTEST_API_
 
boŞ
 
	`P¬£IÁ32
(cÚ¡ 
Mes§ge
& 
¤c_‹xt
, cÚ¡ * 
¡r
,

2242 
št32_t
* 
v®ue
);

2246 
boŞ
 
	`BoŞFromGTe¡Env
(cÚ¡ * 
æag
, boŞ 
deçuÉ_v®
);

2247 
GTEST_API_
 
št32_t
 
	`IÁ32FromGTe¡Env
(cÚ¡ * 
æag
, iÁ32_ˆ
deçuÉ_v®
);

2248 
¡d
::
¡ršg
 
	`OuutFÏgAlsoCheckEnvV¬
();

2249 cÚ¡ * 
	`SŒšgFromGTe¡Env
(cÚ¡ * 
æag
, cÚ¡ * 
deçuÉ_v®
);

2251 
	}
}

2254 #ià!
defšed
(
GTEST_INTERNAL_DEPRECATED
)

2264 #ià
defšed
(
_MSC_VER
)

2265 
	#GTEST_INTERNAL_DEPRECATED
(
mes§ge
è
	`__deş¥ec
(
	`d•»ÿ‹d
(mes§ge))

	)

2266 #–ià
defšed
(
__GNUC__
)

2267 
	#GTEST_INTERNAL_DEPRECATED
(
mes§ge
è
	`__©Œibu‹__
((
	`d•»ÿ‹d
(mes§ge)))

	)

2269 
	#GTEST_INTERNAL_DEPRECATED
(
mes§ge
)

	)

2274 #ià
GTEST_HAS_ABSL


2277 
	#GTEST_INTERNAL_HAS_ANY
 1

	)

2278 
	~"ab¦/ty³s/ªy.h
"

2279 
Çme¥aû
 
	g‹¡šg
 {

2280 
Çme¥aû
 
	gš‹º®
 {

2281 
usšg
 
	gAny
 = ::
ab¦
::
ªy
;

2285 #ifdeà
__has_šşude


2286 #ià
__has_šşude
(<
ªy
>è&& 
__ılu¥lus
 >= 201703L

2289 
	#GTEST_INTERNAL_HAS_ANY
 1

	)

2290 
	~<ªy
>

2291 
Çme¥aû
 
	g‹¡šg
 {

2292 
Çme¥aû
 
	gš‹º®
 {

2293 
usšg
 
	gAny
 = ::
¡d
::
ªy
;

2302 #ià
GTEST_HAS_ABSL


2305 
	#GTEST_INTERNAL_HAS_OPTIONAL
 1

	)

2306 
	~"ab¦/ty³s/İtiÚ®.h
"

2307 
Çme¥aû
 
	g‹¡šg
 {

2308 
Çme¥aû
 
	gš‹º®
 {

2309 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

2310 
usšg
 
	gO±iÚ®
 = ::
ab¦
::
İtiÚ®
<
T
>;

2314 #ifdeà
__has_šşude


2315 #ià
__has_šşude
(<
İtiÚ®
>è&& 
__ılu¥lus
 >= 201703L

2318 
	#GTEST_INTERNAL_HAS_OPTIONAL
 1

	)

2319 
	~<İtiÚ®
>

2320 
Çme¥aû
 
	g‹¡šg
 {

2321 
Çme¥aû
 
	gš‹º®
 {

2322 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

2323 
usšg
 
	gO±iÚ®
 = ::
¡d
::
İtiÚ®
<
T
>;

2332 #ià
GTEST_HAS_ABSL


2335 
	#GTEST_INTERNAL_HAS_STRING_VIEW
 1

	)

2336 
	~"ab¦/¡ršgs/¡ršg_v›w.h
"

2337 
Çme¥aû
 
	g‹¡šg
 {

2338 
Çme¥aû
 
	gš‹º®
 {

2339 
usšg
 
	gSŒšgV›w
 = ::
ab¦
::
¡ršg_v›w
;

2343 #ifdeà
__has_šşude


2344 #ià
__has_šşude
(<
¡ršg_v›w
>è&& 
__ılu¥lus
 >= 201703L

2347 
	#GTEST_INTERNAL_HAS_STRING_VIEW
 1

	)

2348 
	~<¡ršg_v›w
>

2349 
Çme¥aû
 
	g‹¡šg
 {

2350 
Çme¥aû
 
	gš‹º®
 {

2351 
usšg
 
	gSŒšgV›w
 = ::
¡d
::
¡ršg_v›w
;

2360 #ià
GTEST_HAS_ABSL


2363 
	#GTEST_INTERNAL_HAS_VARIANT
 1

	)

2364 
	~"ab¦/ty³s/v¬ŸÁ.h
"

2365 
Çme¥aû
 
	g‹¡šg
 {

2366 
Çme¥aû
 
	gš‹º®
 {

2367 
	g‹m¶©e
 <
	gty³Çme
... 
	gT
>

2368 
usšg
 
	gV¬ŸÁ
 = ::
ab¦
::
v¬ŸÁ
<
T
...>;

2372 #ifdeà
__has_šşude


2373 #ià
__has_šşude
(<
v¬ŸÁ
>è&& 
__ılu¥lus
 >= 201703L

2376 
	#GTEST_INTERNAL_HAS_VARIANT
 1

	)

2377 
	~<v¬ŸÁ
>

2378 
Çme¥aû
 
	g‹¡šg
 {

2379 
Çme¥aû
 
	gš‹º®
 {

2380 
	g‹m¶©e
 <
	gty³Çme
... 
	gT
>

2381 
usšg
 
	gV¬ŸÁ
 = ::
¡d
::
v¬ŸÁ
<
T
...>;

	@third_party/googletest/googletest/include/gtest/internal/gtest-string.h

41 #iâdeà
GOOGLETEST_INCLUDE_GTEST_INTERNAL_GTEST_STRING_H_


42 
	#GOOGLETEST_INCLUDE_GTEST_INTERNAL_GTEST_STRING_H_


	)

44 #ifdeà
__BORLANDC__


46 
	~<mem.h
>

49 
	~<¡ršg.h
>

50 
	~<c¡dšt
>

51 
	~<¡ršg
>

53 
	~"g‹¡/š‹º®/g‹¡-pÜt.h
"

55 
Çme¥aû
 
	g‹¡šg
 {

56 
Çme¥aû
 
	gš‹º®
 {

59 şas 
	cGTEST_API_
 
	gSŒšg
 {

60 
	gpublic
:

70 cÚ¡ * 
ClÚeCSŒšg
(cÚ¡ * 
c_¡r
);

72 #ià
GTEST_OS_WINDOWS_MOBILE


85 
LPCWSTR
 
AnsiToUtf16
(cÚ¡ * 
c_¡r
);

95 cÚ¡ * 
Utf16ToAnsi
(
LPCWSTR
 
utf16_¡r
);

104 
boŞ
 
CSŒšgEqu®s
(cÚ¡ * 
lhs
, cÚ¡ * 
rhs
);

110 
	g¡d
::
¡ršg
 
ShowWideCSŒšg
(cÚ¡ 
wch¬_t
* 
wide_c_¡r
);

118 
boŞ
 
WideCSŒšgEqu®s
(cÚ¡ 
wch¬_t
* 
lhs
, cÚ¡ wch¬_t* 
rhs
);

126 
boŞ
 
Ca£In£ns™iveCSŒšgEqu®s
(cÚ¡ * 
lhs
,

127 cÚ¡ * 
rhs
);

141 
boŞ
 
Ca£In£ns™iveWideCSŒšgEqu®s
(cÚ¡ 
wch¬_t
* 
lhs
,

142 cÚ¡ 
wch¬_t
* 
rhs
);

146 
boŞ
 
EndsW™hCa£In£ns™ive
(

147 cÚ¡ 
¡d
::
¡ršg
& 
¡r
, cÚ¡ std::¡ršg& 
suffix
);

150 
	g¡d
::
¡ršg
 
FÜm©IÁWidth2
(
v®ue
);

153 
	g¡d
::
¡ršg
 
FÜm©IÁWidthN
(
v®ue
, 
width
);

156 
	g¡d
::
¡ršg
 
FÜm©HexIÁ
(
v®ue
);

159 
	g¡d
::
¡ršg
 
FÜm©HexUIÁ32
(
ušt32_t
 
v®ue
);

162 
	g¡d
::
¡ršg
 
FÜm©By‹
(
v®ue
);

164 
	g´iv©e
:

165 
SŒšg
();

170 
GTEST_API_
 
	g¡d
::
¡ršg
 
SŒšgSŒ—mToSŒšg
(::
¡d
::
¡ršg¡»am
* 
¡»am
);

	@third_party/googletest/googletest/include/gtest/internal/gtest-type-util.h

35 #iâdeà
GOOGLETEST_INCLUDE_GTEST_INTERNAL_GTEST_TYPE_UTIL_H_


36 
	#GOOGLETEST_INCLUDE_GTEST_INTERNAL_GTEST_TYPE_UTIL_H_


	)

38 
	~"g‹¡/š‹º®/g‹¡-pÜt.h
"

42 #ià
GTEST_HAS_CXXABI_H_


43 
	~<cxxabi.h
>

44 #–ià
defšed
(
__HP_aCC
)

45 
	~<acxx_demªgË.h
>

48 
Çme¥aû
 
	g‹¡šg
 {

49 
Çme¥aû
 
	gš‹º®
 {

55 
šlše
 
	g¡d
::
¡ršg
 
CªÚiÿlizeFÜStdLibV”siÚšg
(
¡d
::¡ršg 
s
) {

56 cÚ¡ 
´efix
[] = "std::__";

57 ià(
	gs
.
com·»
(0, 
¡¾’
(
´efix
),…refix) == 0) {

58 
¡d
::
¡ršg
::
size_ty³
 
’d
 = 
s
.
fšd
("::", 
¡¾’
(
´efix
));

59 ià(
	g’d
 !ğ
s
.
Åos
) {

61 
s
.
”a£
(
¡¾’
("¡d"), 
’d
 - strlen("std"));

64  
	gs
;

67 #ià
GTEST_HAS_RTTI


69 
šlše
 
	g¡d
::
¡ršg
 
G‘Ty³Name
(cÚ¡ 
¡d
::
ty³_šfo
& 
ty³
) {

70 cÚ¡ * cÚ¡ 
Çme
 = 
ty³
.name();

71 #ià
GTEST_HAS_CXXABI_H_
 || 
defšed
(
__HP_aCC
)

72 
	g¡©us
 = 0;

75 #ià
GTEST_HAS_CXXABI_H_


76 
usšg
 
	gabi
::
__cxa_demªgË
;

78 * cÚ¡ 
	g»adabË_Çme
 = 
__cxa_demªgË
(
Çme
, 
nuÎ±r
,‚uÎ±r, &
¡©us
);

79 cÚ¡ 
	g¡d
::
¡ršg
 
Çme_¡r
(
¡©us
 =ğ0 ? 
»adabË_Çme
 : 
Çme
);

80 
ä“
(
»adabË_Çme
);

81  
CªÚiÿlizeFÜStdLibV”siÚšg
(
Çme_¡r
);

83  
	gÇme
;

92 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

93 
	g¡d
::
¡ršg
 
G‘Ty³Name
() {

94 #ià
GTEST_HAS_RTTI


95  
G‘Ty³Name
(
ty³id
(
T
));

102 
	sNÚe
 {};

104 
	#GTEST_TEMPLATE_
 
‹m¶©e
 <
ty³Çme
 
T
> 
şass


	)

114 
	g‹m¶©e
 <
GTEST_TEMPLATE_
 
	gTm¶
>

115 
	sTem¶©eS–
 {

116 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

117 
	sBšd
 {

118 
	gTm¶
<
	tT
> 
	tty³
;

122 
	#GTEST_BIND_
(
Tm¶S–
, 
T
) \

123 
Tm¶S–
::
‹m¶©e
 
Bšd
<
T
>::
ty³


	)

125 
	g‹m¶©e
 <
GTEST_TEMPLATE_
 
	gH—d_
, 
	gGTEST_TEMPLATE_
... 
	gTa_
>

126 
	sTem¶©es
 {

127 
usšg
 
	gH—d
 = 
Tem¶©eS–
<
H—d_
>;

128 
usšg
 
	gTa
 = 
Tem¶©es
<
Ta_
...>;

131 
	g‹m¶©e
 <
GTEST_TEMPLATE_
 
	gH—d_
>

132 
	gTem¶©es
<
	gH—d_
> {

133 
usšg
 
	gH—d
 = 
Tem¶©eS–
<
H—d_
>;

134 
usšg
 
	gTa
 = 
NÚe
;

138 
	g‹m¶©e
 <
ty³Çme
 
	gH—d_
, 
	gty³Çme
... 
	gTa_
>

139 
	sTy³s
 {

140 
usšg
 
	gH—d
 = 
H—d_
;

141 
usšg
 
	gTa
 = 
Ty³s
<
Ta_
...>;

144 
	g‹m¶©e
 <
ty³Çme
 
	gH—d_
>

145 
	gTy³s
<
	gH—d_
> {

146 
usšg
 
	gH—d
 = 
H—d_
;

147 
usšg
 
	gTa
 = 
NÚe
;

152 
	g‹m¶©e
 <
	gty³Çme
... 
	gTs
>

153 
	sProxyTy³Li¡
 {

154 
usšg
 
	gty³
 = 
Ty³s
<
Ts
...>;

157 
	g‹m¶©e
 <
	gty³Çme
>

158 
	gis_´oxy_ty³_li¡
 : 
¡d
::
çl£_ty³
 {};

160 
	g‹m¶©e
 <
	gty³Çme
... 
	gTs
>

161 
	gis_´oxy_ty³_li¡
<
	gProxyTy³Li¡
<
	gTs
...>> : 
¡d
::
Œue_ty³
 {};

166 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

167 
	sG’”©eTy³Li¡
 {

168 
	g´iv©e
:

169 
usšg
 
´oxy
 = 
ty³Çme
 
¡d
::
cÚd™iÚ®
<
is_´oxy_ty³_li¡
<
T
>::
v®ue
, 
	gT
,

170 
	gProxyTy³Li¡
<
	gT
>>::
ty³
;

172 
	gpublic
:

173 
usšg
 
ty³
 = 
ty³Çme
 
´oxy
::type;

178 
	g‹m¶©e
 <
	gty³Çme
... 
	gTs
>

179 
usšg
 
	gTy³s
 = 
š‹º®
::
ProxyTy³Li¡
<
Ts
...>;

	@third_party/googletest/googletest/samples/prime_tables.h

36 #iâdeà
GOOGLETEST_SAMPLES_PRIME_TABLES_H_


37 
	#GOOGLETEST_SAMPLES_PRIME_TABLES_H_


	)

39 
	~<®gÜ™hm
>

42 şas 
	cPrimeTabË
 {

43 
	mpublic
:

44 
vœtu®
 ~
	$PrimeTabË
() {}

47 
vœtu®
 
boŞ
 
	$IsPrime
(
n
) const = 0;

51 
vœtu®
 
	$G‘NextPrime
(
p
) const = 0;

52 
	}
};

55 şas 
	cOnTheFlyPrimeTabË
 : 
public
 
PrimeTabË
 {

56 
public
:

57 
boŞ
 
	$IsPrime
(
n
ècÚ¡ 
ov”ride
 {

58 ià(
n
 <ğ1è 
çl£
;

60 
i
 = 2; i*˜<ğ
n
; i++) {

62 ià((
n
 % 
i
è=ğ0è 
çl£
;

65  
Œue
;

68 
	$G‘NextPrime
(
p
ècÚ¡ 
ov”ride
 {

69 ià(
p
 < 0)  -1;

71 
n
 = 
p
 + 1;;‚++) {

72 ià(
	`IsPrime
(
n
)) ‚;

74 
	}
}

79 şas 
	cP»C®cuÏ‹dPrimeTabË
 : 
public
 
PrimeTabË
 {

80 
public
:

82 
ex¶ic™
 
	$P»C®cuÏ‹dPrimeTabË
(
max
)

83 : 
	`is_´ime_size_
(
max
 + 1), 
	`is_´ime_
(
Ãw
 
boŞ
[max + 1]) {

84 
	`C®cuÏ‹PrimesUpTo
(
max
);

86 ~
	$P»C®cuÏ‹dPrimeTabË
(è
ov”ride
 { 
d–‘e
[] 
is_´ime_
; 
	}
}

88 
boŞ
 
	$IsPrime
(
n
ècÚ¡ 
ov”ride
 {

89  0 <ğ
n
 &&‚ < 
is_´ime_size_
 && 
is_´ime_
[n];

90 
	}
}

92 
	$G‘NextPrime
(
p
ècÚ¡ 
ov”ride
 {

93 
n
 = 
p
 + 1;‚ < 
is_´ime_size_
;‚++) {

94 ià(
is_´ime_
[
n
]) ‚;

98 
	}
}

100 
	g´iv©e
:

101 
	$C®cuÏ‹PrimesUpTo
(
max
) {

102 ::
¡d
::
	`fl
(
is_´ime_
, is_´ime_ + 
is_´ime_size_
, 
Œue
);

103 
is_´ime_
[0] = is_´ime_[1] = 
çl£
;

107 
i
 = 2; i*˜<ğ
max
; i += i%2+1) {

108 ià(!
is_´ime_
[
i
]) ;

113 
j
 = 
i
*i; j <ğ
max
; j += i) {

114 
is_´ime_
[
j
] = 
çl£
;

117 
	}
}

119 cÚ¡ 
	gis_´ime_size_
;

120 
boŞ
* cÚ¡ 
	gis_´ime_
;

123 
	gİ”©Ü
=(cÚ¡ 
P»C®cuÏ‹dPrimeTabË
& 
rhs
);

	@third_party/googletest/googletest/samples/sample1.cc

32 
	~"§m¶e1.h
"

35 
	$FaùÜŸl
(
n
) {

36 
»suÉ
 = 1;

37 
i
 = 1; i <ğ
n
; i++) {

38 
»suÉ
 *ğ
i
;

41  
»suÉ
;

42 
	}
}

45 
boŞ
 
	$IsPrime
(
n
) {

47 ià(
n
 <ğ1è 
çl£
;

50 ià(
n
 % 2 == 0) ‚ == 2;

55 
i
 = 3; ; i += 2) {

57 ià(
i
 > 
n
/i) ;

61 ià(
n
 % 
i
 =ğ0è 
çl£
;

65  
Œue
;

66 
	}
}

	@third_party/googletest/googletest/samples/sample1.h

32 #iâdeà
GOOGLETEST_SAMPLES_SAMPLE1_H_


33 
	#GOOGLETEST_SAMPLES_SAMPLE1_H_


	)

36 
FaùÜŸl
(
n
);

39 
boŞ
 
IsPrime
(
n
);

	@third_party/googletest/googletest/samples/sample10_unittest.cc

33 
	~<¡dio.h
>

34 
	~<¡dlib.h
>

36 
	~"g‹¡/g‹¡.h
"

37 
	gusšg
 ::
‹¡šg
::
Em±yTe¡Ev’tLi¡’”
;

38 
	gusšg
 ::
‹¡šg
::
In™GoogËTe¡
;

39 
	gusšg
 ::
‹¡šg
::
Te¡
;

40 
	gusšg
 ::
‹¡šg
::
Te¡Ev’tLi¡’”s
;

41 
	gusšg
 ::
‹¡šg
::
Te¡Info
;

42 
	gusšg
 ::
‹¡šg
::
Te¡P¬tResuÉ
;

43 
	gusšg
 ::
‹¡šg
::
Un™Te¡
;

45 
	gÇme¥aû
 {

47 şas 
	cW©”
 {

48 
	gpublic
:

52 * 
İ”©Ü
 
Ãw
(
size_t
 
®loÿtiÚ_size
) {

53 
®loÿ‹d_
++;

54  
m®loc
(
®loÿtiÚ_size
);

57 
İ”©Ü
 
d–‘e
(* 
block
, 
size_t
 ) {

58 
	g®loÿ‹d_
--;

59 
ä“
(
block
);

62 
®loÿ‹d
(è{  
	g®loÿ‹d_
; }

64 
	g´iv©e
:

65 
®loÿ‹d_
;

68 
	gW©”
::
®loÿ‹d_
 = 0;

74 şas 
	cL—kCheck”
 : 
public
 
Em±yTe¡Ev’tLi¡’”
 {

75 
´iv©e
:

77 
OnTe¡S¹
(cÚ¡ 
Te¡Info
& ) 
ov”ride
 {

78 
š™ŸÎy_®loÿ‹d_
 = 
W©”
::
®loÿ‹d
();

82 
OnTe¡End
(cÚ¡ 
Te¡Info
& ) 
	gov”ride
 {

83 
	gdifã»nû
 = 
W©”
::
®loÿ‹d
(è- 
š™ŸÎy_®loÿ‹d_
;

88 
EXPECT_LE
(
difã»nû
, 0è<< "L—ked " << 
	gdifã»nû
 << " unit(s) of Water!";

91 
	gš™ŸÎy_®loÿ‹d_
;

94 
	$TEST
(
Li¡’”sTe¡
, 
DÛsNÙL—k
) {

95 
W©”
* 
w©”
 = 
Ãw
 Water;

96 
d–‘e
 
w©”
;

97 
	}
}

101 
	$TEST
(
Li¡’”sTe¡
, 
L—ksW©”
) {

102 
W©”
* 
w©”
 = 
Ãw
 Water;

103 
	`EXPECT_TRUE
(
w©”
 !ğ
nuÎ±r
);

104 
	}
}

107 
	$maš
(
¬gc
, **
¬gv
) {

108 
	`In™GoogËTe¡
(&
¬gc
, 
¬gv
);

110 
boŞ
 
check_fÜ_Ëaks
 = 
çl£
;

111 ià(
¬gc
 > 1 && 
	`¡rcmp
(
¬gv
[1], "--check_for_leaks") == 0 )

112 
check_fÜ_Ëaks
 = 
Œue
;

114 
	`´štf
("%s\n", "Runhis…rogram with --check_for_leaksoƒnable "

119 ià(
check_fÜ_Ëaks
) {

120 
Te¡Ev’tLi¡’”s
& 
li¡’”s
 = 
Un™Te¡
::
	`G‘In¡ªû
()->
	`li¡’”s
();

136 
li¡’”s
.
	`Aµ’d
(
Ãw
 
L—kCheck”
);

138  
	`RUN_ALL_TESTS
();

139 
	}
}

	@third_party/googletest/googletest/samples/sample1_unittest.cc

43 
	~<lim™s.h
>

44 
	~"§m¶e1.h
"

45 
	~"g‹¡/g‹¡.h
"

46 
	gÇme¥aû
 {

76 
TEST
(
FaùÜŸlTe¡
, 
Neg©ive
) {

79 
EXPECT_EQ
(1, 
FaùÜŸl
(-5));

80 
EXPECT_EQ
(1, 
FaùÜŸl
(-1));

81 
EXPECT_GT
(
FaùÜŸl
(-10), 0);

100 
TEST
(
FaùÜŸlTe¡
, 
Z”o
) {

101 
EXPECT_EQ
(1, 
FaùÜŸl
(0));

105 
TEST
(
FaùÜŸlTe¡
, 
Pos™ive
) {

106 
EXPECT_EQ
(1, 
FaùÜŸl
(1));

107 
EXPECT_EQ
(2, 
FaùÜŸl
(2));

108 
EXPECT_EQ
(6, 
FaùÜŸl
(3));

109 
EXPECT_EQ
(40320, 
FaùÜŸl
(8));

116 
TEST
(
IsPrimeTe¡
, 
Neg©ive
) {

119 
EXPECT_FALSE
(
IsPrime
(-1));

120 
EXPECT_FALSE
(
IsPrime
(-2));

121 
EXPECT_FALSE
(
IsPrime
(
INT_MIN
));

125 
TEST
(
IsPrimeTe¡
, 
TrivŸl
) {

126 
EXPECT_FALSE
(
IsPrime
(0));

127 
EXPECT_FALSE
(
IsPrime
(1));

128 
EXPECT_TRUE
(
IsPrime
(2));

129 
EXPECT_TRUE
(
IsPrime
(3));

133 
TEST
(
IsPrimeTe¡
, 
Pos™ive
) {

134 
EXPECT_FALSE
(
IsPrime
(4));

135 
EXPECT_TRUE
(
IsPrime
(5));

136 
EXPECT_FALSE
(
IsPrime
(6));

137 
EXPECT_TRUE
(
IsPrime
(23));

	@third_party/googletest/googletest/samples/sample2.cc

32 
	~"§m¶e2.h
"

34 
	~<¡ršg.h
>

37 cÚ¡ * 
	gMySŒšg
::
	$ClÚeCSŒšg
(cÚ¡ * 
a_c_¡ršg
) {

38 ià(
a_c_¡ršg
 =ğ
nuÎ±r
) ‚ullptr;

40 cÚ¡ 
size_t
 
Ën
 = 
	`¡¾’
(
a_c_¡ršg
);

41 * cÚ¡ 
şÚe
 = 
Ãw
 [ 
Ën
 + 1 ];

42 
	`memıy
(
şÚe
, 
a_c_¡ršg
, 
Ën
 + 1);

44  
şÚe
;

45 
	}
}

49 
	gMySŒšg
::
	$S‘
(cÚ¡ * 
a_c_¡ršg
) {

51 cÚ¡ * cÚ¡ 
‹mp
 = 
MySŒšg
::
	`ClÚeCSŒšg
(
a_c_¡ršg
);

52 
d–‘e
[] 
c_¡ršg_
;

53 
c_¡ršg_
 = 
‹mp
;

54 
	}
}

	@third_party/googletest/googletest/samples/sample2.h

32 #iâdeà
GOOGLETEST_SAMPLES_SAMPLE2_H_


33 
	#GOOGLETEST_SAMPLES_SAMPLE2_H_


	)

35 
	~<¡ršg.h
>

39 şas 
	cMySŒšg
 {

40 
	m´iv©e
:

41 cÚ¡ * 
c_¡ršg_
;

42 cÚ¡ 
	mMySŒšg
& 
	mİ”©Ü
=(cÚ¡ 
MySŒšg
& 
rhs
);

44 
	mpublic
:

46 cÚ¡ * 
ClÚeCSŒšg
(cÚ¡ * 
a_c_¡ršg
);

53 
	$MySŒšg
(è: 
	$c_¡ršg_
(
nuÎ±r
) {}

56 
ex¶ic™
 
	$MySŒšg
(cÚ¡ * 
a_c_¡ršg
è: 
	$c_¡ršg_
(
nuÎ±r
) {

57 
	`S‘
(
a_c_¡ršg
);

58 
	}
}

61 
	$MySŒšg
(cÚ¡ 
MySŒšg
& 
¡ršg
è: 
	$c_¡ršg_
(
nuÎ±r
) {

62 
	`S‘
(
¡ršg
.
c_¡ršg_
);

63 
	}
}

69 ~
	$MySŒšg
(è{ 
d–‘e
[] 
c_¡ršg_
; 
	}
}

72 cÚ¡ * 
	$c_¡ršg
(ècÚ¡ {  
c_¡ršg_
; 
	}
}

74 
size_t
 
	$L’gth
(ècÚ¡ {  
c_¡ršg_
 =ğ
nuÎ±r
 ? 0 : 
	`¡¾’
(c_¡ršg_); 
	}
}

77 
S‘
(cÚ¡ * 
c_¡ršg
);

	@third_party/googletest/googletest/samples/sample2_unittest.cc

40 
	~"§m¶e2.h
"

41 
	~"g‹¡/g‹¡.h
"

42 
	gÇme¥aû
 {

46 
TEST
(
MySŒšg
, 
DeçuÉCÚ¡ruùÜ
) {

47 cÚ¡ 
MySŒšg
 
	gs
;

69 
EXPECT_STREQ
(
nuÎ±r
, 
s
.
c_¡ršg
());

71 
EXPECT_EQ
(0u, 
s
.
L’gth
());

74 cÚ¡ 
	gkH–loSŒšg
[] = "Hello, world!";

77 
TEST
(
MySŒšg
, 
CÚ¡ruùÜFromCSŒšg
) {

78 cÚ¡ 
MySŒšg
 
s
(
kH–loSŒšg
);

79 
EXPECT_EQ
(0, 
¡rcmp
(
s
.
c_¡ršg
(), 
kH–loSŒšg
));

80 
EXPECT_EQ
((
kH–loSŒšg
)/(kHelloString[0]) - 1,

81 
s
.
L’gth
());

85 
TEST
(
MySŒšg
, 
CİyCÚ¡ruùÜ
) {

86 cÚ¡ 
MySŒšg
 
s1
(
kH–loSŒšg
);

87 cÚ¡ 
MySŒšg
 
	gs2
 = 
s1
;

88 
EXPECT_EQ
(0, 
¡rcmp
(
s2
.
c_¡ršg
(), 
kH–loSŒšg
));

92 
TEST
(
MySŒšg
, 
S‘
) {

93 
MySŒšg
 
	gs
;

95 
	gs
.
S‘
(
kH–loSŒšg
);

96 
EXPECT_EQ
(0, 
¡rcmp
(
s
.
c_¡ršg
(), 
kH–loSŒšg
));

100 
	gs
.
S‘
(
s
.
c_¡ršg
());

101 
EXPECT_EQ
(0, 
¡rcmp
(
s
.
c_¡ršg
(), 
kH–loSŒšg
));

104 
	gs
.
S‘
(
nuÎ±r
);

105 
EXPECT_STREQ
(
nuÎ±r
, 
s
.
c_¡ršg
());

	@third_party/googletest/googletest/samples/sample3-inl.h

32 #iâdeà
GOOGLETEST_SAMPLES_SAMPLE3_INL_H_


33 
	#GOOGLETEST_SAMPLES_SAMPLE3_INL_H_


	)

35 
	~<¡ddef.h
>

41 
	g‹m¶©e
 <
ty³Çme
 
	gE
>

42 
şass
 
	gQueue
;

46 
	g‹m¶©e
 <
ty³Çme
 
	gE
>

47 şas 
	cQueueNode
 {

48 
ä›nd
 
şass
 
	mQueue
<
	mE
>;

50 
	mpublic
:

52 cÚ¡ 
E
& 
	$–em’t
(ècÚ¡ {  
–em’t_
; }

55 
QueueNode
* 
	$Ãxt
(è{  
Ãxt_
; 
	}
}

56 cÚ¡ 
QueueNode
* 
	$Ãxt
(ècÚ¡ {  
Ãxt_
; 
	}
}

58 
	g´iv©e
:

61 
ex¶ic™
 
	$QueueNode
(cÚ¡ 
E
& 
ª_–em’t
)

62 : 
	`–em’t_
(
ª_–em’t
), 
	$Ãxt_
(
nuÎ±r
è{
	}
}

65 cÚ¡ 
	gQueueNode
& 
	gİ”©Ü
 = (cÚ¡ 
QueueNode
&);

66 
QueueNode
(const QueueNode&);

68 
E
 
	g–em’t_
;

69 
QueueNode
* 
	gÃxt_
;

72 
	g‹m¶©e
 <
ty³Çme
 
	gE
>

73 şas 
	cQueue
 {

74 
	mpublic
:

76 
	$Queue
(è: 
	`h—d_
(
nuÎ±r
), 
	`Ï¡_
ÒuÎ±r), 
	$size_
(0) {}

79 ~
	$Queue
(è{ 
	`CË¬
(); 
	}
}

82 
	$CË¬
() {

83 ià(
size_
 > 0) {

85 
QueueNode
<
E
>* 
node
 = 
h—d_
;

86 
QueueNode
<
E
>* 
Ãxt
 = 
node
->
	`Ãxt
();

88 
d–‘e
 
node
;

89 
node
 = 
Ãxt
;

90 ià(
node
 =ğ
nuÎ±r
) ;

91 
Ãxt
 = 
node
->
	`Ãxt
();

95 
h—d_
 = 
Ï¡_
 = 
nuÎ±r
;

96 
size_
 = 0;

98 
	}
}

101 
size_t
 
	$Size
(ècÚ¡ {  
size_
; 
	}
}

104 
	gQueueNode
<
	gE
>* 
	$H—d
(è{  
h—d_
; 
	}
}

105 cÚ¡ 
	gQueueNode
<
	gE
>* 
	$H—d
(ècÚ¡ {  
h—d_
; 
	}
}

108 
	gQueueNode
<
	gE
>* 
	$La¡
(è{  
Ï¡_
; 
	}
}

109 cÚ¡ 
	gQueueNode
<
	gE
>* 
	$La¡
(ècÚ¡ {  
Ï¡_
; 
	}
}

115 
	$Enqueue
(cÚ¡ 
E
& 
–em’t
) {

116 
QueueNode
<
E
>* 
Ãw_node
 = 
Ãw
 QueueNode<E>(
–em’t
);

118 ià(
size_
 == 0) {

119 
h—d_
 = 
Ï¡_
 = 
Ãw_node
;

120 
size_
 = 1;

122 
Ï¡_
->
Ãxt_
 = 
Ãw_node
;

123 
Ï¡_
 = 
Ãw_node
;

124 
size_
++;

126 
	}
}

130 
E
* 
	$Dequeue
() {

131 ià(
size_
 == 0) {

132  
nuÎ±r
;

135 cÚ¡ 
QueueNode
<
E
>* cÚ¡ 
Şd_h—d
 = 
h—d_
;

136 
h—d_
 = h—d_->
Ãxt_
;

137 
size_
--;

138 ià(
size_
 == 0) {

139 
Ï¡_
 = 
nuÎ±r
;

142 
E
* 
–em’t
 = 
Ãw
 
	`E
(
Şd_h—d
->
	`–em’t
());

143 
d–‘e
 
Şd_h—d
;

145  
–em’t
;

146 
	}
}

151 
	g‹m¶©e
 <
ty³Çme
 
	gF
>

152 
Queue
* 
	$M­
(
F
 
funùiÚ
) const {

153 
Queue
* 
Ãw_queue
 = 
Ãw
 
	`Queue
();

154 cÚ¡ 
QueueNode
<
E
>* 
node
 = 
h—d_
;‚od!ğ
nuÎ±r
;

155 
node
 =‚ode->
Ãxt_
) {

156 
Ãw_queue
->
	`Enqueue
(
	`funùiÚ
(
node
->
	`–em’t
()));

159  
Ãw_queue
;

160 
	}
}

162 
	g´iv©e
:

163 
QueueNode
<
E
>* 
h—d_
;

164 
	gQueueNode
<
	gE
>* 
	gÏ¡_
;

165 
size_t
 
	gsize_
;

168 
Queue
(const Queue&);

169 cÚ¡ 
	gQueue
& 
	gİ”©Ü
 = (cÚ¡ 
Queue
&);

	@third_party/googletest/googletest/samples/sample3_unittest.cc

63 
	~"§m¶e3-šl.h
"

64 
	~"g‹¡/g‹¡.h
"

65 
	gÇme¥aû
 {

67 şas 
	cQueueTe¡Sm¶3
 : 
public
 
‹¡šg
::
Te¡
 {

68 
´Ùeùed
:

74 
S‘Up
(è
ov”ride
 {

75 
q1_
.
Enqueue
(1);

76 
	gq2_
.
Enqueue
(2);

77 
	gq2_
.
Enqueue
(3);

88 
DoubË
(
n
) {

89  2*
	gn
;

93 
M­Te¡”
(cÚ¡ 
Queue
<> * 
q
) {

96 cÚ¡ 
	gQueue
<> * cÚ¡ 
	gÃw_q
 = 
q
->
M­
(
DoubË
);

99 
ASSERT_EQ
(
q
->
Size
(), 
Ãw_q
->Size());

102 cÚ¡ 
	gQueueNode
<>*
	gn1
 = 
q
->
H—d
(), *
	gn2
 = 
Ãw_q
->Head();

103 
	gn1
 !ğ
nuÎ±r
;‚1 = 
n1
->
Ãxt
(), 
	gn2
 = 
n2
->next()) {

104 
EXPECT_EQ
(2 * 
n1
->
–em’t
(), 
n2
->element());

107 
d–‘e
 
	gÃw_q
;

111 
	gQueue
<> 
	gq0_
;

112 
	gQueue
<> 
	gq1_
;

113 
	gQueue
<> 
	gq2_
;

120 
	$TEST_F
(
QueueTe¡Sm¶3
, 
DeçuÉCÚ¡ruùÜ
) {

122 
	`EXPECT_EQ
(0u, 
q0_
.
	`Size
());

123 
	}
}

126 
	$TEST_F
(
QueueTe¡Sm¶3
, 
Dequeue
) {

127 * 
n
 = 
q0_
.
	`Dequeue
();

128 
	`EXPECT_TRUE
(
n
 =ğ
nuÎ±r
);

130 
n
 = 
q1_
.
	`Dequeue
();

131 
	`ASSERT_TRUE
(
n
 !ğ
nuÎ±r
);

132 
	`EXPECT_EQ
(1, *
n
);

133 
	`EXPECT_EQ
(0u, 
q1_
.
	`Size
());

134 
d–‘e
 
n
;

136 
n
 = 
q2_
.
	`Dequeue
();

137 
	`ASSERT_TRUE
(
n
 !ğ
nuÎ±r
);

138 
	`EXPECT_EQ
(2, *
n
);

139 
	`EXPECT_EQ
(1u, 
q2_
.
	`Size
());

140 
d–‘e
 
n
;

141 
	}
}

144 
	$TEST_F
(
QueueTe¡Sm¶3
, 
M­
) {

145 
	`M­Te¡”
(&
q0_
);

146 
	`M­Te¡”
(&
q1_
);

147 
	`M­Te¡”
(&
q2_
);

148 
	}
}

	@third_party/googletest/googletest/samples/sample4.cc

32 
	~<¡dio.h
>

34 
	~"§m¶e4.h
"

37 
	gCouÁ”
::
	$Inüem’t
() {

38  
couÁ”_
++;

39 
	}
}

43 
	gCouÁ”
::
	$Deüem’t
() {

44 ià(
couÁ”_
 == 0) {

45  
couÁ”_
;

47  
couÁ”_
--;

49 
	}
}

52 
	gCouÁ”
::
	$Pršt
() const {

53 
	`´štf
("%d", 
couÁ”_
);

54 
	}
}

	@third_party/googletest/googletest/samples/sample4.h

31 #iâdeà
GOOGLETEST_SAMPLES_SAMPLE4_H_


32 
	#GOOGLETEST_SAMPLES_SAMPLE4_H_


	)

35 şas 
	cCouÁ”
 {

36 
	m´iv©e
:

37 
couÁ”_
;

39 
	mpublic
:

41 
	$CouÁ”
(è: 
	$couÁ”_
(0) {}

44 
	`Inüem’t
();

47 
	`Deüem’t
();

50 
	$Pršt
() const;

51 
	}
};

	@third_party/googletest/googletest/samples/sample4_unittest.cc

31 
	~"§m¶e4.h
"

32 
	~"g‹¡/g‹¡.h
"

34 
	gÇme¥aû
 {

37 
TEST
(
CouÁ”
, 
Inüem’t
) {

38 
CouÁ”
 
	gc
;

41 
EXPECT_EQ
(0, 
c
.
Deüem’t
());

46 
EXPECT_EQ
(0, 
c
.
Inüem’t
());

47 
EXPECT_EQ
(1, 
c
.
Inüem’t
());

48 
EXPECT_EQ
(2, 
c
.
Inüem’t
());

50 
EXPECT_EQ
(3, 
c
.
Deüem’t
());

	@third_party/googletest/googletest/samples/sample5_unittest.cc

46 
	~<lim™s.h
>

47 
	~<time.h
>

48 
	~"g‹¡/g‹¡.h
"

49 
	~"§m¶e1.h
"

50 
	~"§m¶e3-šl.h
"

51 
	gÇme¥aû
 {

62 şas 
	cQuickTe¡
 : 
public
 
‹¡šg
::
Te¡
 {

63 
´Ùeùed
:

66 
S‘Up
(è
ov”ride
 { 
¡¬t_time_
 = 
time
(
nuÎ±r
); }

70 
T—rDown
(è
	gov”ride
 {

72 cÚ¡ 
time_t
 
	g’d_time
 = 
time
(
nuÎ±r
);

77 
EXPECT_TRUE
(
’d_time
 - 
¡¬t_time_
 <= 5) << "Theestookoo†ong.";

81 
time_t
 
	g¡¬t_time_
;

88 şas 
	cIÁeg”FunùiÚTe¡
 : 
public
 
QuickTe¡
 {

97 
	$TEST_F
(
IÁeg”FunùiÚTe¡
, 
FaùÜŸl
) {

99 
	`EXPECT_EQ
(1, 
	`FaùÜŸl
(-5));

100 
	`EXPECT_EQ
(1, 
	`FaùÜŸl
(-1));

101 
	`EXPECT_GT
(
	`FaùÜŸl
(-10), 0);

104 
	`EXPECT_EQ
(1, 
	`FaùÜŸl
(0));

107 
	`EXPECT_EQ
(1, 
	`FaùÜŸl
(1));

108 
	`EXPECT_EQ
(2, 
	`FaùÜŸl
(2));

109 
	`EXPECT_EQ
(6, 
	`FaùÜŸl
(3));

110 
	`EXPECT_EQ
(40320, 
	`FaùÜŸl
(8));

111 
	}
}

115 
	$TEST_F
(
IÁeg”FunùiÚTe¡
, 
IsPrime
) {

117 
	`EXPECT_FALSE
(
	`IsPrime
(-1));

118 
	`EXPECT_FALSE
(
	`IsPrime
(-2));

119 
	`EXPECT_FALSE
(
	`IsPrime
(
INT_MIN
));

122 
	`EXPECT_FALSE
(
	`IsPrime
(0));

123 
	`EXPECT_FALSE
(
	`IsPrime
(1));

124 
	`EXPECT_TRUE
(
	`IsPrime
(2));

125 
	`EXPECT_TRUE
(
	`IsPrime
(3));

128 
	`EXPECT_FALSE
(
	`IsPrime
(4));

129 
	`EXPECT_TRUE
(
	`IsPrime
(5));

130 
	`EXPECT_FALSE
(
	`IsPrime
(6));

131 
	`EXPECT_TRUE
(
	`IsPrime
(23));

132 
	}
}

141 şas 
	cQueueTe¡
 : 
public
 
QuickTe¡
 {

142 
´Ùeùed
:

143 
S‘Up
(è
ov”ride
 {

145 
QuickTe¡
::
S‘Up
();

148 
	gq1_
.
Enqueue
(1);

149 
	gq2_
.
Enqueue
(2);

150 
	gq2_
.
Enqueue
(3);

161 
	gQueue
<> 
	gq0_
;

162 
	gQueue
<> 
	gq1_
;

163 
	gQueue
<> 
	gq2_
;

170 
	$TEST_F
(
QueueTe¡
, 
DeçuÉCÚ¡ruùÜ
) {

171 
	`EXPECT_EQ
(0u, 
q0_
.
	`Size
());

172 
	}
}

175 
	$TEST_F
(
QueueTe¡
, 
Dequeue
) {

176 * 
n
 = 
q0_
.
	`Dequeue
();

177 
	`EXPECT_TRUE
(
n
 =ğ
nuÎ±r
);

179 
n
 = 
q1_
.
	`Dequeue
();

180 
	`EXPECT_TRUE
(
n
 !ğ
nuÎ±r
);

181 
	`EXPECT_EQ
(1, *
n
);

182 
	`EXPECT_EQ
(0u, 
q1_
.
	`Size
());

183 
d–‘e
 
n
;

185 
n
 = 
q2_
.
	`Dequeue
();

186 
	`EXPECT_TRUE
(
n
 !ğ
nuÎ±r
);

187 
	`EXPECT_EQ
(2, *
n
);

188 
	`EXPECT_EQ
(1u, 
q2_
.
	`Size
());

189 
d–‘e
 
n
;

190 
	}
}

	@third_party/googletest/googletest/samples/sample6_unittest.cc

35 
	~"´ime_bËs.h
"

37 
	~"g‹¡/g‹¡.h
"

38 
	gÇme¥aû
 {

43 
	g‹m¶©e
 <
şass
 
	gT
>

44 
PrimeTabË
* 
C»©ePrimeTabË
();

46 
	g‹m¶©e
 <>

47 
PrimeTabË
* 
	gC»©ePrimeTabË
<
	gOnTheFlyPrimeTabË
>() {

48  
Ãw
 
	gOnTheFlyPrimeTabË
;

51 
	g‹m¶©e
 <>

52 
PrimeTabË
* 
	gC»©ePrimeTabË
<
	gP»C®cuÏ‹dPrimeTabË
>() {

53  
Ãw
 
P»C®cuÏ‹dPrimeTabË
(10000);

57 
	g‹m¶©e
 <
şass
 
	gT
>

58 şas 
	cPrimeTabËTe¡
 : 
public
 
‹¡šg
::
Te¡
 {

59 
´Ùeùed
:

62 
PrimeTabËTe¡
(è: 
bË_
(
C»©ePrimeTabË
<
T
>()) {}

64 ~
PrimeTabËTe¡
(è
ov”ride
 { 
d–‘e
 
bË_
; }

73 
PrimeTabË
* cÚ¡ 
	gbË_
;

76 
usšg
 
	g‹¡šg
::
Ty³s
;

91 
	gTy³s
<
	tOnTheFlyPrimeTabË
, 
	tP»C®cuÏ‹dPrimeTabË
> 
	tIm¶em’tiÚs
;

93 
TYPED_TEST_SUITE
(
PrimeTabËTe¡
, 
Im¶em’tiÚs
);

97 
	$TYPED_TEST
(
PrimeTabËTe¡
, 
R‘uºsF®£FÜNÚPrimes
) {

105 
	`EXPECT_FALSE
(
this
->
bË_
->
	`IsPrime
(-5));

106 
	`EXPECT_FALSE
(
this
->
bË_
->
	`IsPrime
(0));

107 
	`EXPECT_FALSE
(
this
->
bË_
->
	`IsPrime
(1));

108 
	`EXPECT_FALSE
(
this
->
bË_
->
	`IsPrime
(4));

109 
	`EXPECT_FALSE
(
this
->
bË_
->
	`IsPrime
(6));

110 
	`EXPECT_FALSE
(
this
->
bË_
->
	`IsPrime
(100));

111 
	}
}

113 
	$TYPED_TEST
(
PrimeTabËTe¡
, 
R‘uºsTrueFÜPrimes
) {

114 
	`EXPECT_TRUE
(
this
->
bË_
->
	`IsPrime
(2));

115 
	`EXPECT_TRUE
(
this
->
bË_
->
	`IsPrime
(3));

116 
	`EXPECT_TRUE
(
this
->
bË_
->
	`IsPrime
(5));

117 
	`EXPECT_TRUE
(
this
->
bË_
->
	`IsPrime
(7));

118 
	`EXPECT_TRUE
(
this
->
bË_
->
	`IsPrime
(11));

119 
	`EXPECT_TRUE
(
this
->
bË_
->
	`IsPrime
(131));

120 
	}
}

122 
	$TYPED_TEST
(
PrimeTabËTe¡
, 
CªG‘NextPrime
) {

123 
	`EXPECT_EQ
(2, 
this
->
bË_
->
	`G‘NextPrime
(0));

124 
	`EXPECT_EQ
(3, 
this
->
bË_
->
	`G‘NextPrime
(2));

125 
	`EXPECT_EQ
(5, 
this
->
bË_
->
	`G‘NextPrime
(3));

126 
	`EXPECT_EQ
(7, 
this
->
bË_
->
	`G‘NextPrime
(5));

127 
	`EXPECT_EQ
(11, 
this
->
bË_
->
	`G‘NextPrime
(7));

128 
	`EXPECT_EQ
(131, 
this
->
bË_
->
	`G‘NextPrime
(128));

129 
	}
}

135 
usšg
 
	g‹¡šg
::
Ty³s
;

153 
	g‹m¶©e
 <
şass
 
	gT
>

154 
şass
 
	gPrimeTabËTe¡2
 : 
public
 
PrimeTabËTe¡
<
T
> {

160 
TYPED_TEST_SUITE_P
(
PrimeTabËTe¡2
);

164 
	$TYPED_TEST_P
(
PrimeTabËTe¡2
, 
R‘uºsF®£FÜNÚPrimes
) {

165 
	`EXPECT_FALSE
(
this
->
bË_
->
	`IsPrime
(-5));

166 
	`EXPECT_FALSE
(
this
->
bË_
->
	`IsPrime
(0));

167 
	`EXPECT_FALSE
(
this
->
bË_
->
	`IsPrime
(1));

168 
	`EXPECT_FALSE
(
this
->
bË_
->
	`IsPrime
(4));

169 
	`EXPECT_FALSE
(
this
->
bË_
->
	`IsPrime
(6));

170 
	`EXPECT_FALSE
(
this
->
bË_
->
	`IsPrime
(100));

171 
	}
}

173 
	$TYPED_TEST_P
(
PrimeTabËTe¡2
, 
R‘uºsTrueFÜPrimes
) {

174 
	`EXPECT_TRUE
(
this
->
bË_
->
	`IsPrime
(2));

175 
	`EXPECT_TRUE
(
this
->
bË_
->
	`IsPrime
(3));

176 
	`EXPECT_TRUE
(
this
->
bË_
->
	`IsPrime
(5));

177 
	`EXPECT_TRUE
(
this
->
bË_
->
	`IsPrime
(7));

178 
	`EXPECT_TRUE
(
this
->
bË_
->
	`IsPrime
(11));

179 
	`EXPECT_TRUE
(
this
->
bË_
->
	`IsPrime
(131));

180 
	}
}

182 
	$TYPED_TEST_P
(
PrimeTabËTe¡2
, 
CªG‘NextPrime
) {

183 
	`EXPECT_EQ
(2, 
this
->
bË_
->
	`G‘NextPrime
(0));

184 
	`EXPECT_EQ
(3, 
this
->
bË_
->
	`G‘NextPrime
(2));

185 
	`EXPECT_EQ
(5, 
this
->
bË_
->
	`G‘NextPrime
(3));

186 
	`EXPECT_EQ
(7, 
this
->
bË_
->
	`G‘NextPrime
(5));

187 
	`EXPECT_EQ
(11, 
this
->
bË_
->
	`G‘NextPrime
(7));

188 
	`EXPECT_EQ
(131, 
this
->
bË_
->
	`G‘NextPrime
(128));

189 
	}
}

193 
REGISTER_TYPED_TEST_SUITE_P
(

194 
PrimeTabËTe¡2
,

196 
R‘uºsF®£FÜNÚPrimes
, 
R‘uºsTrueFÜPrimes
, 
CªG‘NextPrime
);

211 
	gTy³s
<
	tOnTheFlyPrimeTabË
, 
	tP»C®cuÏ‹dPrimeTabË
>

212 
	tPrimeTabËIm¶em’tiÚs
;

213 
INSTANTIATE_TYPED_TEST_SUITE_P
(
OnTheFlyAndP»C®cuÏ‹d
,

214 
PrimeTabËTe¡2
,

215 
PrimeTabËIm¶em’tiÚs
);

	@third_party/googletest/googletest/samples/sample7_unittest.cc

38 
	~"´ime_bËs.h
"

40 
	~"g‹¡/g‹¡.h
"

41 
	gÇme¥aû
 {

43 
	gusšg
 ::
‹¡šg
::
Te¡W™hP¬am
;

44 
	gusšg
 ::
‹¡šg
::
V®ues
;

51 
PrimeTabË
* 
	tC»©ePrimeTabËFunc
();

53 
PrimeTabË
* 
C»©eOnTheFlyPrimeTabË
() {

54  
Ãw
 
OnTheFlyPrimeTabË
();

57 
	g‹m¶©e
 <
size_t
 
	gmax_´eÿlcuÏ‹d
>

58 
PrimeTabË
* 
C»©eP»C®cuÏ‹dPrimeTabË
() {

59  
Ãw
 
P»C®cuÏ‹dPrimeTabË
(
max_´eÿlcuÏ‹d
);

66 
şass
 
	gPrimeTabËTe¡Sm¶7
 : 
public
 
Te¡W™hP¬am
<
C»©ePrimeTabËFunc
*> {

67 
public
:

68 ~
PrimeTabËTe¡Sm¶7
(è
ov”ride
 { 
d–‘e
 
bË_
; }

69 
S‘Up
(è
	gov”ride
 { 
	gbË_
 = (*
G‘P¬am
())(); }

70 
T—rDown
(è
	gov”ride
 {

71 
d–‘e
 
	gbË_
;

72 
	gbË_
 = 
nuÎ±r
;

75 
	g´Ùeùed
:

76 
PrimeTabË
* 
bË_
;

79 
TEST_P
(
PrimeTabËTe¡Sm¶7
, 
R‘uºsF®£FÜNÚPrimes
) {

80 
EXPECT_FALSE
(
bË_
->
IsPrime
(-5));

81 
EXPECT_FALSE
(
bË_
->
IsPrime
(0));

82 
EXPECT_FALSE
(
bË_
->
IsPrime
(1));

83 
EXPECT_FALSE
(
bË_
->
IsPrime
(4));

84 
EXPECT_FALSE
(
bË_
->
IsPrime
(6));

85 
EXPECT_FALSE
(
bË_
->
IsPrime
(100));

88 
TEST_P
(
PrimeTabËTe¡Sm¶7
, 
R‘uºsTrueFÜPrimes
) {

89 
EXPECT_TRUE
(
bË_
->
IsPrime
(2));

90 
EXPECT_TRUE
(
bË_
->
IsPrime
(3));

91 
EXPECT_TRUE
(
bË_
->
IsPrime
(5));

92 
EXPECT_TRUE
(
bË_
->
IsPrime
(7));

93 
EXPECT_TRUE
(
bË_
->
IsPrime
(11));

94 
EXPECT_TRUE
(
bË_
->
IsPrime
(131));

97 
TEST_P
(
PrimeTabËTe¡Sm¶7
, 
CªG‘NextPrime
) {

98 
EXPECT_EQ
(2, 
bË_
->
G‘NextPrime
(0));

99 
EXPECT_EQ
(3, 
bË_
->
G‘NextPrime
(2));

100 
EXPECT_EQ
(5, 
bË_
->
G‘NextPrime
(3));

101 
EXPECT_EQ
(7, 
bË_
->
G‘NextPrime
(5));

102 
EXPECT_EQ
(11, 
bË_
->
G‘NextPrime
(7));

103 
EXPECT_EQ
(131, 
bË_
->
G‘NextPrime
(128));

113 
INSTANTIATE_TEST_SUITE_P
(
OnTheFlyAndP»C®cuÏ‹d
, 
PrimeTabËTe¡Sm¶7
,

114 
V®ues
(&
C»©eOnTheFlyPrimeTabË
,

115 &
C»©eP»C®cuÏ‹dPrimeTabË
<1000>));

	@third_party/googletest/googletest/samples/sample8_unittest.cc

36 
	~"´ime_bËs.h
"

38 
	~"g‹¡/g‹¡.h
"

39 
	gÇme¥aû
 {

48 şas 
	cHybridPrimeTabË
 : 
public
 
PrimeTabË
 {

49 
public
:

50 
HybridPrimeTabË
(
boŞ
 
fÜû_Ú_the_æy
, 
max_´eÿlcuÏ‹d
)

51 : 
Ú_the_æy_im¶_
(
Ãw
 
OnTheFlyPrimeTabË
),

52 
´eÿlc_im¶_
(
fÜû_Ú_the_æy


53 ? 
nuÎ±r


54 : 
Ãw
 
P»C®cuÏ‹dPrimeTabË
(
max_´eÿlcuÏ‹d
)),

55 
max_´eÿlcuÏ‹d_
(
max_´eÿlcuÏ‹d
) {}

56 ~
HybridPrimeTabË
(è
	gov”ride
 {

57 
d–‘e
 
	gÚ_the_æy_im¶_
;

58 
d–‘e
 
	g´eÿlc_im¶_
;

61 
boŞ
 
IsPrime
(
n
ècÚ¡ 
	gov”ride
 {

62 ià(
	g´eÿlc_im¶_
 !ğ
nuÎ±r
 && 
n
 < 
max_´eÿlcuÏ‹d_
)

63  
´eÿlc_im¶_
->
IsPrime
(
n
);

65  
	gÚ_the_æy_im¶_
->
IsPrime
(
n
);

68 
G‘NextPrime
(
p
ècÚ¡ 
	gov”ride
 {

69 
	gÃxt_´ime
 = -1;

70 ià(
	g´eÿlc_im¶_
 !ğ
nuÎ±r
 && 
p
 < 
max_´eÿlcuÏ‹d_
)

71 
Ãxt_´ime
 = 
´eÿlc_im¶_
->
G‘NextPrime
(
p
);

73  
	gÃxt_´ime
 !ğ-1 ? 
Ãxt_´ime
 : 
Ú_the_æy_im¶_
->
G‘NextPrime
(
p
);

76 
	g´iv©e
:

77 
OnTheFlyPrimeTabË
* 
Ú_the_æy_im¶_
;

78 
P»C®cuÏ‹dPrimeTabË
* 
	g´eÿlc_im¶_
;

79 
	gmax_´eÿlcuÏ‹d_
;

82 
	gusšg
 ::
‹¡šg
::
Te¡W™hP¬am
;

83 
	gusšg
 ::
‹¡šg
::
BoŞ
;

84 
	gusšg
 ::
‹¡šg
::
V®ues
;

85 
	gusšg
 ::
‹¡šg
::
Combše
;

92 
şass
 
	gPrimeTabËTe¡
 : 
public
 
Te¡W™hP¬am
< ::
¡d
::
tu¶e
<
boŞ
, > > {

93 
	g´Ùeùed
:

94 
S‘Up
(è
ov”ride
 {

95 
boŞ
 
fÜû_Ú_the_æy
;

96 
	gmax_´eÿlcuÏ‹d
;

97 
	g¡d
::
t›
(
fÜû_Ú_the_æy
, 
max_´eÿlcuÏ‹d
èğ
G‘P¬am
();

98 
	gbË_
 = 
Ãw
 
HybridPrimeTabË
(
fÜû_Ú_the_æy
, 
max_´eÿlcuÏ‹d
);

100 
T—rDown
(è
	gov”ride
 {

101 
d–‘e
 
	gbË_
;

102 
	gbË_
 = 
nuÎ±r
;

104 
HybridPrimeTabË
* 
	gbË_
;

107 
	$TEST_P
(
PrimeTabËTe¡
, 
R‘uºsF®£FÜNÚPrimes
) {

114 
	`EXPECT_FALSE
(
bË_
->
	`IsPrime
(-5));

115 
	`EXPECT_FALSE
(
bË_
->
	`IsPrime
(0));

116 
	`EXPECT_FALSE
(
bË_
->
	`IsPrime
(1));

117 
	`EXPECT_FALSE
(
bË_
->
	`IsPrime
(4));

118 
	`EXPECT_FALSE
(
bË_
->
	`IsPrime
(6));

119 
	`EXPECT_FALSE
(
bË_
->
	`IsPrime
(100));

120 
	}
}

122 
	$TEST_P
(
PrimeTabËTe¡
, 
R‘uºsTrueFÜPrimes
) {

123 
	`EXPECT_TRUE
(
bË_
->
	`IsPrime
(2));

124 
	`EXPECT_TRUE
(
bË_
->
	`IsPrime
(3));

125 
	`EXPECT_TRUE
(
bË_
->
	`IsPrime
(5));

126 
	`EXPECT_TRUE
(
bË_
->
	`IsPrime
(7));

127 
	`EXPECT_TRUE
(
bË_
->
	`IsPrime
(11));

128 
	`EXPECT_TRUE
(
bË_
->
	`IsPrime
(131));

129 
	}
}

131 
	$TEST_P
(
PrimeTabËTe¡
, 
CªG‘NextPrime
) {

132 
	`EXPECT_EQ
(2, 
bË_
->
	`G‘NextPrime
(0));

133 
	`EXPECT_EQ
(3, 
bË_
->
	`G‘NextPrime
(2));

134 
	`EXPECT_EQ
(5, 
bË_
->
	`G‘NextPrime
(3));

135 
	`EXPECT_EQ
(7, 
bË_
->
	`G‘NextPrime
(5));

136 
	`EXPECT_EQ
(11, 
bË_
->
	`G‘NextPrime
(7));

137 
	`EXPECT_EQ
(131, 
bË_
->
	`G‘NextPrime
(128));

138 
	}
}

151 
INSTANTIATE_TEST_SUITE_P
(
M—nšgfulTe¡P¬am‘”s
, 
PrimeTabËTe¡
,

152 
Combše
(
BoŞ
(), 
V®ues
(1, 10)));

	@third_party/googletest/googletest/samples/sample9_unittest.cc

34 
	~<¡dio.h
>

36 
	~"g‹¡/g‹¡.h
"

38 
	gusšg
 ::
‹¡šg
::
Em±yTe¡Ev’tLi¡’”
;

39 
	gusšg
 ::
‹¡šg
::
In™GoogËTe¡
;

40 
	gusšg
 ::
‹¡šg
::
Te¡
;

41 
	gusšg
 ::
‹¡šg
::
Te¡Ca£
;

42 
	gusšg
 ::
‹¡šg
::
Te¡Ev’tLi¡’”s
;

43 
	gusšg
 ::
‹¡šg
::
Te¡Info
;

44 
	gusšg
 ::
‹¡šg
::
Te¡P¬tResuÉ
;

45 
	gusšg
 ::
‹¡šg
::
Un™Te¡
;

46 
	gÇme¥aû
 {

49 şas 
	cT”£Prš‹r
 : 
public
 
Em±yTe¡Ev’tLi¡’”
 {

50 
´iv©e
:

52 
OnTe¡Prog¿mS¹
(cÚ¡ 
Un™Te¡
& ) 
ov”ride
 {}

55 
OnTe¡Prog¿mEnd
(cÚ¡ 
Un™Te¡
& 
un™_‹¡
è
ov”ride
 {

56 
årštf
(
¡dout
, "TEST %s\n", 
un™_‹¡
.
Pas£d
() ? "PASSED" : "FAILED");

57 
fæush
(
¡dout
);

61 
OnTe¡S¹
(cÚ¡ 
Te¡Info
& 
‹¡_šfo
è
	gov”ride
 {

62 
årštf
(
¡dout
,

64 
‹¡_šfo
.
‹¡_ÿ£_Çme
(),

65 
‹¡_šfo
.
Çme
());

66 
fæush
(
¡dout
);

70 
OnTe¡P¬tResuÉ
(cÚ¡ 
Te¡P¬tResuÉ
& 
‹¡_·¹_»suÉ
è
	gov”ride
 {

71 
årštf
(
¡dout
,

73 
‹¡_·¹_»suÉ
.
çed
() ? "*** Failure" : "Success",

74 
‹¡_·¹_»suÉ
.
fe_Çme
(),

75 
‹¡_·¹_»suÉ
.
lše_numb”
(),

76 
‹¡_·¹_»suÉ
.
summ¬y
());

77 
fæush
(
¡dout
);

81 
OnTe¡End
(cÚ¡ 
Te¡Info
& 
‹¡_šfo
è
	gov”ride
 {

82 
årštf
(
¡dout
,

84 
‹¡_šfo
.
‹¡_ÿ£_Çme
(),

85 
‹¡_šfo
.
Çme
());

86 
fæush
(
¡dout
);

90 
	$TEST
(
Cu¡omOuutTe¡
, 
PrštsMes§ge
) {

91 
	`´štf
("Printing something fromheest body...\n");

92 
	}
}

94 
	$TEST
(
Cu¡omOuutTe¡
, 
Sucûeds
) {

95 
	`SUCCEED
() << "SUCCEED() has been invoked from here";

96 
	}
}

98 
	$TEST
(
Cu¡omOuutTe¡
, 
Fas
) {

99 
	`EXPECT_EQ
(1, 2)

101 
	}
}

104 
	$maš
(
¬gc
, **
¬gv
) {

105 
	`In™GoogËTe¡
(&
¬gc
, 
¬gv
);

107 
boŞ
 
‹r£_ouut
 = 
çl£
;

108 ià(
¬gc
 > 1 && 
	`¡rcmp
(
¬gv
[1], "--terse_output") == 0 )

109 
‹r£_ouut
 = 
Œue
;

111 
	`´štf
("%s\n", "Runhis…rogram with --terse_outputo changehe way "

114 
Un™Te¡
& 
un™_‹¡
 = *Un™Te¡::
	`G‘In¡ªû
();

118 ià(
‹r£_ouut
) {

119 
Te¡Ev’tLi¡’”s
& 
li¡’”s
 = 
un™_‹¡
.
	`li¡’”s
();

125 
d–‘e
 
li¡’”s
.
	`R–—£
Öi¡’”s.
	`deçuÉ_»suÉ_´š‹r
());

131 
li¡’”s
.
	`Aµ’d
(
Ãw
 
T”£Prš‹r
);

133 
»t_v®
 = 
	`RUN_ALL_TESTS
();

137 
uÃx³ùedly_çed_‹¡s
 = 0;

138 
i
 = 0; i < 
un™_‹¡
.
	`tÙ®_‹¡_su™e_couÁ
(); ++i) {

139 cÚ¡ 
‹¡šg
::
Te¡Su™e
& 
‹¡_su™e
 = *
un™_‹¡
.
	`G‘Te¡Su™e
(
i
);

140 
j
 = 0; j < 
‹¡_su™e
.
	`tÙ®_‹¡_couÁ
(); ++j) {

141 cÚ¡ 
Te¡Info
& 
‹¡_šfo
 = *
‹¡_su™e
.
	`G‘Te¡Info
(
j
);

144 ià(
‹¡_šfo
.
	`»suÉ
()->
	`Faed
() &&

145 
	`¡rcmp
(
‹¡_šfo
.
	`Çme
(), "Fails") != 0) {

146 
uÃx³ùedly_çed_‹¡s
++;

152 ià(
uÃx³ùedly_çed_‹¡s
 == 0)

153 
»t_v®
 = 0;

155  
»t_v®
;

156 
	}
}

	@third_party/googletest/googletest/src/gtest-all.cc

38 
	~"g‹¡/g‹¡.h
"

41 
	~"¤c/g‹¡.cc
"

42 
	~"¤c/g‹¡-d—th-‹¡.cc
"

43 
	~"¤c/g‹¡-f•©h.cc
"

44 
	~"¤c/g‹¡-m©ch”s.cc
"

45 
	~"¤c/g‹¡-pÜt.cc
"

46 
	~"¤c/g‹¡-´š‹rs.cc
"

47 
	~"¤c/g‹¡-‹¡-·¹.cc
"

48 
	~"¤c/g‹¡-ty³d-‹¡.cc
"

	@third_party/googletest/googletest/src/gtest-death-test.cc

33 
	~"g‹¡/g‹¡-d—th-‹¡.h
"

35 
	~<funùiÚ®
>

36 
	~<ut™y
>

38 
	~"g‹¡/š‹º®/g‹¡-pÜt.h
"

39 
	~"g‹¡/š‹º®/cu¡om/g‹¡.h
"

41 #ià
GTEST_HAS_DEATH_TEST


43 #ià
GTEST_OS_MAC


44 
	~<üt_ex‹ºs.h
>

47 
	~<”ºo.h
>

48 
	~<fú.h
>

49 
	~<lim™s.h
>

51 #ià
GTEST_OS_LINUX


52 
	~<sigÇl.h
>

55 
	~<¡d¬g.h
>

57 #ià
GTEST_OS_WINDOWS


58 
	~<wšdows.h
>

60 
	~<sys/mmª.h
>

61 
	~<sys/wa™.h
>

64 #ià
GTEST_OS_QNX


65 
	~<¥awn.h
>

68 #ià
GTEST_OS_FUCHSIA


69 
	~<lib/fdio/fd.h
>

70 
	~<lib/fdio/io.h
>

71 
	~<lib/fdio/¥awn.h
>

72 
	~<lib/zx/chªÃl.h
>

73 
	~<lib/zx/pÜt.h
>

74 
	~<lib/zx/´oûss.h
>

75 
	~<lib/zx/sock‘.h
>

76 
	~<zœcÚ/´oûs§rgs.h
>

77 
	~<zœcÚ/sysÿÎs.h
>

78 
	~<zœcÚ/sysÿÎs/pŞicy.h
>

79 
	~<zœcÚ/sysÿÎs/pÜt.h
>

84 
	~"g‹¡/g‹¡-mes§ge.h
"

85 
	~"g‹¡/š‹º®/g‹¡-¡ršg.h
"

86 
	~"¤c/g‹¡-š‹º®-šl.h
"

88 
Çme¥aû
 
	g‹¡šg
 {

97 cÚ¡ 
	gkDeçuÉD—thTe¡StyË
[] = 
GTEST_DEFAULT_DEATH_TEST_STYLE
;

99 
GTEST_DEFINE_¡ršg_
(

100 
d—th_‹¡_¡yË
,

101 
š‹º®
::
SŒšgFromGTe¡Env
("d—th_‹¡_¡yË", 
kDeçuÉD—thTe¡StyË
),

108 
GTEST_DEFINE_boŞ_
(

109 
d—th_‹¡_u£_fÜk
,

110 
š‹º®
::
BoŞFromGTe¡Env
("d—th_‹¡_u£_fÜk", 
çl£
),

120 
Çme¥aû
 
	gš‹º®
 {

121 
GTEST_DEFINE_¡ršg_
(

122 
š‹º®_run_d—th_‹¡
, "",

131 #ià
GTEST_HAS_DEATH_TEST


133 
Çme¥aû
 
	gš‹º®
 {

137 #ià!
GTEST_OS_WINDOWS
 && !
GTEST_OS_FUCHSIA


138 
boŞ
 
	gg_š_ç¡_d—th_‹¡_chd
 = 
çl£
;

146 
boŞ
 
InD—thTe¡Chd
() {

147 #ià
GTEST_OS_WINDOWS
 || 
GTEST_OS_FUCHSIA


151  !
GTEST_FLAG
(
š‹º®_run_d—th_‹¡
).
em±y
();

155 ià(
GTEST_FLAG
(
d—th_‹¡_¡yË
) == "threadsafe")

156  !
GTEST_FLAG
(
š‹º®_run_d—th_‹¡
).
em±y
();

158  
	gg_š_ç¡_d—th_‹¡_chd
;

165 
	gEx™edW™hCode
::
Ex™edW™hCode
(
ex™_code
è: 
ex™_code_
(exit_code) {

169 
boŞ
 
Ex™edW™hCode
::
İ”©Ü
()(
ex™_¡©us
) const {

170 #ià
GTEST_OS_WINDOWS
 || 
GTEST_OS_FUCHSIA


172  
ex™_¡©us
 =ğ
ex™_code_
;

176  
WIFEXITED
(
ex™_¡©us
è&& 
WEXITSTATUS
Óx™_¡©usè=ğ
ex™_code_
;

181 #ià!
GTEST_OS_WINDOWS
 && !
GTEST_OS_FUCHSIA


183 
	gKËdBySigÇl
::
KËdBySigÇl
(
signum
è: 
signum_
(signum) {

187 
boŞ
 
KËdBySigÇl
::
İ”©Ü
()(
ex™_¡©us
) const {

188 #ià
defšed
(
GTEST_KILLED_BY_SIGNAL_OVERRIDE_
)

190 
boŞ
 
»suÉ
;

191 ià(
GTEST_KILLED_BY_SIGNAL_OVERRIDE_
(
signum_
, 
ex™_¡©us
, &
»suÉ
)) {

192  
	g»suÉ
;

196  
WIFSIGNALED
(
ex™_¡©us
è&& 
WTERMSIG
Óx™_¡©usè=ğ
signum_
;

200 
Çme¥aû
 
	gš‹º®
 {

206 
	g¡d
::
¡ršg
 
Ex™Summ¬y
(
ex™_code
) {

207 
Mes§ge
 
m
;

209 #ià
GTEST_OS_WINDOWS
 || 
GTEST_OS_FUCHSIA


211 
	gm
 << "Ex™ed w™hƒx™ stu " << 
	gex™_code
;

215 ià(
WIFEXITED
(
ex™_code
)) {

216 
	gm
 << "Ex™ed w™hƒx™ stu " << 
WEXITSTATUS
(
ex™_code
);

217 } ià(
WIFSIGNALED
(
ex™_code
)) {

218 
	gm
 << "T”mš©ed by sigÇÈ" << 
WTERMSIG
(
ex™_code
);

220 #ifdeà
WCOREDUMP


221 ià(
WCOREDUMP
(
ex™_code
)) {

222 
	gm
 << " (core dumped)";

227  
	gm
.
G‘SŒšg
();

232 
boŞ
 
Ex™edUnsucûssfuÎy
(
ex™_¡©us
) {

233  !
Ex™edW™hCode
(0)(
	gex™_¡©us
);

236 #ià!
GTEST_OS_WINDOWS
 && !
GTEST_OS_FUCHSIA


241 
	g¡d
::
¡ršg
 
D—thTe¡Th»adW¬nšg
(
size_t
 
th»ad_couÁ
) {

242 
Mes§ge
 
msg
;

243 
	gmsg
 << "Deathests use fork(), which is unsafe…articularly"

244 << " iÀ¨th»aded cÚ‹xt. FÜhi ‹¡, " << 
	gGTEST_NAME_
 << " ";

245 ià(
	gth»ad_couÁ
 == 0) {

246 
msg
 << "couldn't detecthe‚umber ofhreads.";

248 
	gmsg
 << "d‘eùed " << 
	gth»ad_couÁ
 << "hreads.";

250 
	gmsg
 << " See "

255  
	gmsg
.
G‘SŒšg
();

260 cÚ¡ 
	gkD—thTe¡Lived
 = 'L';

261 cÚ¡ 
	gkD—thTe¡R‘uºed
 = 'R';

262 cÚ¡ 
	gkD—thTe¡Th»w
 = 'T';

263 cÚ¡ 
	gkD—thTe¡IÁ”ÇlE¼Ü
 = 'I';

265 #ià
GTEST_OS_FUCHSIA


268 cÚ¡ 
	gkFuchsŸR—dPeFd
 = 3;

279 
	eD—thTe¡Outcome
 { 
	gIN_PROGRESS
, 
	gDIED
, 
	gLIVED
, 
	gRETURNED
, 
	gTHREW
 };

286 
D—thTe¡AbÜt
(cÚ¡ 
¡d
::
¡ršg
& 
mes§ge
) {

290 cÚ¡ 
IÁ”ÇlRunD—thTe¡FÏg
* cÚ¡ 
æag
 =

291 
G‘Un™Te¡Im¶
()->
š‹º®_run_d—th_‹¡_æag
();

292 ià(
	gæag
 !ğ
nuÎ±r
) {

293 
FILE
* 
·»Á
 = 
posix
::
FDO³n
(
æag
->
wr™e_fd
(), "w");

294 
åutc
(
kD—thTe¡IÁ”ÇlE¼Ü
, 
·»Á
);

295 
årštf
(
·»Á
, "%s", 
mes§ge
.
c_¡r
());

296 
fæush
(
·»Á
);

297 
_ex™
(1);

299 
årštf
(
¡d”r
, "%s", 
mes§ge
.
c_¡r
());

300 
fæush
(
¡d”r
);

301 
	gposix
::
AbÜt
();

307 
	#GTEST_DEATH_TEST_CHECK_
(
ex´essiÚ
) \

309 ià(!::
‹¡šg
::
š‹º®
::
	`IsTrue
(
ex´essiÚ
)) { \

310 
	`D—thTe¡AbÜt
( \

311 ::
¡d
::
	`¡ršg
("CHECK faed: F"è+ 
__FILE__
 + ",†ine " \

312 + ::
‹¡šg
::
š‹º®
::
	`SŒ—mabËToSŒšg
(
__LINE__
) + ": " \

315 } ::
‹¡šg
::
š‹º®
::
	`AlwaysF®£
())

	)

324 
	#GTEST_DEATH_TEST_CHECK_SYSCALL_
(
ex´essiÚ
) \

326 
g‹¡_»tv®
; \

328 
g‹¡_»tv®
 = (
ex´essiÚ
); \

329 } 
g‹¡_»tv®
 =ğ-1 && 
”ºo
 =ğ
EINTR
); \

330 ià(
g‹¡_»tv®
 == -1) { \

331 
	`D—thTe¡AbÜt
( \

332 ::
¡d
::
	`¡ršg
("CHECK faed: F"è+ 
__FILE__
 + ",†ine " \

333 + ::
‹¡šg
::
š‹º®
::
	`SŒ—mabËToSŒšg
(
__LINE__
) + ": " \

336 } ::
‹¡šg
::
š‹º®
::
	`AlwaysF®£
())

	)

339 
	g¡d
::
¡ršg
 
G‘La¡E¼noDesütiÚ
() {

340  
”ºo
 =ğ0 ? "" : 
posix
::
SŒE¼Ü
(errno);

347 
FaFromIÁ”ÇlE¼Ü
(
fd
) {

348 
Mes§ge
 
	g”rÜ
;

349 
	gbufãr
[256];

350 
	gnum_»ad
;

353 (
	gnum_»ad
 = 
posix
::
R—d
(
fd
, 
bufãr
, 255)) > 0) {

354 
	gbufãr
[
num_»ad
] = '\0';

355 
	g”rÜ
 << 
	gbufãr
;

357 } 
	gnum_»ad
 =ğ-1 && 
”ºo
 =ğ
EINTR
);

359 ià(
	gnum_»ad
 == 0) {

360 
GTEST_LOG_
(
FATAL
è<< 
”rÜ
.
G‘SŒšg
();

362 cÚ¡ 
	gÏ¡_”rÜ
 = 
”ºo
;

363 
GTEST_LOG_
(
FATAL
) << "Error while„eading deathest internal: "

364 << 
G‘La¡E¼noDesütiÚ
(è<< " [" << 
	gÏ¡_”rÜ
 << "]";

370 
	gD—thTe¡
::
D—thTe¡
() {

371 
Te¡Info
* cÚ¡ 
šfo
 = 
G‘Un™Te¡Im¶
()->
cu¼’t_‹¡_šfo
();

372 ià(
	gšfo
 =ğ
nuÎ±r
) {

373 
D—thTe¡AbÜt
("Cannot„un‡ deathest outside of‡ TEST or "

380 
boŞ
 
	gD—thTe¡
::
C»©e
(cÚ¡ * 
¡©em’t
,

381 
M©ch”
<cÚ¡ 
¡d
::
¡ršg
&> 
m©ch”
, cÚ¡ * 
fe
,

382 
lše
, 
D—thTe¡
** 
‹¡
) {

383  
G‘Un™Te¡Im¶
()->
d—th_‹¡_çùÜy
()->
C»©e
(

384 
¡©em’t
, 
¡d
::
move
(
m©ch”
), 
fe
, 
lše
, 
‹¡
);

387 cÚ¡ * 
	gD—thTe¡
::
La¡Mes§ge
() {

388  
Ï¡_d—th_‹¡_mes§ge_
.
c_¡r
();

391 
	gD—thTe¡
::
£t_Ï¡_d—th_‹¡_mes§ge
(cÚ¡ 
¡d
::
¡ršg
& 
mes§ge
) {

392 
Ï¡_d—th_‹¡_mes§ge_
 = 
mes§ge
;

395 
	g¡d
::
¡ršg
 
D—thTe¡
::
Ï¡_d—th_‹¡_mes§ge_
;

398 şas 
	cD—thTe¡Im¶
 : 
public
 
D—thTe¡
 {

399 
´Ùeùed
:

400 
D—thTe¡Im¶
(cÚ¡ * 
a_¡©em’t
, 
M©ch”
<cÚ¡ 
¡d
::
¡ršg
&> 
m©ch”
)

401 : 
¡©em’t_
(
a_¡©em’t
),

402 
m©ch”_
(
¡d
::
move
(
m©ch”
)),

403 
¥awÃd_
(
çl£
),

404 
¡©us_
(-1),

405 
outcome_
(
IN_PROGRESS
),

406 
»ad_fd_
(-1),

407 
wr™e_fd_
(-1) {}

410 ~
D—thTe¡Im¶
(è
	gov”ride
 { 
GTEST_DEATH_TEST_CHECK_
(
»ad_fd_
 == -1); }

412 
AbÜt
(
AbÜtR—sÚ
 
»asÚ
è
	gov”ride
;

413 
boŞ
 
Pas£d
(boŞ 
¡©us_ok
è
	gov”ride
;

415 cÚ¡ * 
¡©em’t
(ècÚ¡ {  
	g¡©em’t_
; }

416 
boŞ
 
¥awÃd
(ècÚ¡ {  
	g¥awÃd_
; }

417 
£t_¥awÃd
(
boŞ
 
is_¥awÃd
è{ 
	g¥awÃd_
 = is_spawned; }

418 
¡©us
(ècÚ¡ {  
	g¡©us_
; }

419 
£t_¡©us
(
a_¡©us
è{ 
	g¡©us_
 =‡_status; }

420 
D—thTe¡Outcome
 
outcome
(ècÚ¡ {  
	goutcome_
; }

421 
£t_outcome
(
D—thTe¡Outcome
 
ª_outcome
è{ 
	goutcome_
 =‡n_outcome; }

422 
»ad_fd
(ècÚ¡ {  
	g»ad_fd_
; }

423 
£t_»ad_fd
(
fd
è{ 
	g»ad_fd_
 = fd; }

424 
wr™e_fd
(ècÚ¡ {  
	gwr™e_fd_
; }

425 
£t_wr™e_fd
(
fd
è{ 
	gwr™e_fd_
 = fd; }

431 
R—dAndIÁ”´‘StusBy‹
();

434 
vœtu®
 
	g¡d
::
¡ršg
 
G‘E¼ÜLogs
();

436 
	g´iv©e
:

439 cÚ¡ * cÚ¡ 
¡©em’t_
;

441 
	gM©ch”
<cÚ¡ 
	g¡d
::
¡ršg
&> 
m©ch”_
;

443 
boŞ
 
	g¥awÃd_
;

445 
	g¡©us_
;

447 
D—thTe¡Outcome
 
	goutcome_
;

451 
	g»ad_fd_
;

455 
	gwr™e_fd_
;

462 
	gD—thTe¡Im¶
::
R—dAndIÁ”´‘StusBy‹
() {

463 
æag
;

464 
	gby‹s_»ad
;

471 
	gby‹s_»ad
 = 
posix
::
R—d
(
»ad_fd
(), &
æag
, 1);

472 } 
	gby‹s_»ad
 =ğ-1 && 
”ºo
 =ğ
EINTR
);

474 ià(
	gby‹s_»ad
 == 0) {

475 
£t_outcome
(
DIED
);

476 } ià(
	gby‹s_»ad
 == 1) {

477 
æag
) {

478 
kD—thTe¡R‘uºed
:

479 
£t_outcome
(
RETURNED
);

481 
	gkD—thTe¡Th»w
:

482 
£t_outcome
(
THREW
);

484 
	gkD—thTe¡Lived
:

485 
£t_outcome
(
LIVED
);

487 
	gkD—thTe¡IÁ”ÇlE¼Ü
:

488 
FaFromIÁ”ÇlE¼Ü
(
»ad_fd
());

491 
GTEST_LOG_
(
FATAL
) << "Deathest child…rocess„eported "

493 << 
¡©ic_ÿ¡
<>(
æag
) << ")";

496 
GTEST_LOG_
(
FATAL
) << "Read from deathest child…rocess failed: "

497 << 
G‘La¡E¼noDesütiÚ
();

499 
GTEST_DEATH_TEST_CHECK_SYSCALL_
(
posix
::
Clo£
(
»ad_fd
()));

500 
£t_»ad_fd
(-1);

503 
	g¡d
::
¡ršg
 
D—thTe¡Im¶
::
G‘E¼ÜLogs
() {

504  
G‘C­tu»dStd”r
();

511 
	gD—thTe¡Im¶
::
AbÜt
(
AbÜtR—sÚ
 
»asÚ
) {

515 cÚ¡ 
¡©us_ch
 =

516 
»asÚ
 =ğ
TEST_DID_NOT_DIE
 ? 
kD—thTe¡Lived
 :

517 
»asÚ
 =ğ
TEST_THREW_EXCEPTION
 ? 
kD—thTe¡Th»w
 : 
kD—thTe¡R‘uºed
;

519 
GTEST_DEATH_TEST_CHECK_SYSCALL_
(
posix
::
Wr™e
(
wr™e_fd
(), &
¡©us_ch
, 1));

528 
_ex™
(1);

534 ::
¡d
::
¡ršg
 
FÜm©D—thTe¡Ouut
(cÚ¡ ::¡d::¡ršg& 
ouut
) {

535 ::
¡d
::
¡ršg
 
»t
;

536 
size_t
 
	g©
 = 0; ; ) {

537 cÚ¡ 
size_t
 
	glše_’d
 = 
ouut
.
fšd
('\n', 
©
);

538 
	g»t
 += "[ DEATH ] ";

539 ià(
	glše_’d
 =ğ::
¡d
::
¡ršg
::
Åos
) {

540 
»t
 +ğ
ouut
.
sub¡r
(
©
);

543 
	g»t
 +ğ
ouut
.
sub¡r
(
©
, 
lše_’d
 + 1 -‡t);

544 
	g©
 = 
lše_’d
 + 1;

546  
	g»t
;

570 
boŞ
 
	gD—thTe¡Im¶
::
Pas£d
(boŞ 
¡©us_ok
) {

571 ià(!
¥awÃd
())

572  
çl£
;

574 cÚ¡ 
	g¡d
::
¡ršg
 
”rÜ_mes§ge
 = 
G‘E¼ÜLogs
();

576 
boŞ
 
	gsucûss
 = 
çl£
;

577 
Mes§ge
 
	gbufãr
;

579 
	gbufãr
 << "D—the¡: " << 
¡©em’t
() << "\n";

580 
outcome
()) {

581 
	gLIVED
:

582 
bufãr
 << " Result: failedo die.\n"

583 << " E¼Ü msg:\n" << 
FÜm©D—thTe¡Ouut
(
”rÜ_mes§ge
);

585 
	gTHREW
:

586 
bufãr
 << " Result:hrew‡nƒxception.\n"

587 << " E¼Ü msg:\n" << 
FÜm©D—thTe¡Ouut
(
”rÜ_mes§ge
);

589 
	gRETURNED
:

590 
bufãr
 << " Result: illegal„eturn inest statement.\n"

591 << " E¼Ü msg:\n" << 
FÜm©D—thTe¡Ouut
(
”rÜ_mes§ge
);

593 
	gDIED
:

594 ià(
¡©us_ok
) {

595 ià(
m©ch”_
.
M©ches
(
”rÜ_mes§ge
)) {

596 
sucûss
 = 
Œue
;

598 
	g¡d
::
o¡ršg¡»am
 
¡»am
;

599 
	gm©ch”_
.
DesüibeTo
(&
¡»am
);

600 
	gbufãr
 << " Result: died but‚ot withƒxpectedƒrror.\n"

601 << " Ex³ùed: " << 
	g¡»am
.
¡r
() << "\n"

603 << 
FÜm©D—thTe¡Ouut
(
”rÜ_mes§ge
);

606 
	gbufãr
 << " Result: died but‚ot withƒxpectedƒxit code:\n"

607 << " " << 
Ex™Summ¬y
(
¡©us
()) << "\n"

608 << "Aùu® msg:\n" << 
FÜm©D—thTe¡Ouut
(
”rÜ_mes§ge
);

611 
	gIN_PROGRESS
:

613 
GTEST_LOG_
(
FATAL
)

617 
	gD—thTe¡
::
£t_Ï¡_d—th_‹¡_mes§ge
(
bufãr
.
G‘SŒšg
());

618  
	gsucûss
;

621 #ià
GTEST_OS_WINDOWS


650 şas 
	cWšdowsD—thTe¡
 : 
public
 
D—thTe¡Im¶
 {

651 
public
:

652 
WšdowsD—thTe¡
(cÚ¡ * 
a_¡©em’t
, 
M©ch”
<cÚ¡ 
¡d
::
¡ršg
&> 
m©ch”
,

653 cÚ¡ * 
fe
, 
lše
)

654 : 
D—thTe¡Im¶
(
a_¡©em’t
, 
¡d
::
move
(
m©ch”
)),

655 
fe_
(
fe
),

656 
lše_
(
lše
) {}

659 
vœtu®
 
Wa™
();

660 
vœtu®
 
Te¡RŞe
 
AssumeRŞe
();

662 
	g´iv©e
:

664 cÚ¡ * cÚ¡ 
fe_
;

666 cÚ¡ 
	glše_
;

668 
AutoHªdË
 
	gwr™e_hªdË_
;

670 
AutoHªdË
 
	gchd_hªdË_
;

675 
AutoHªdË
 
	gev’t_hªdË_
;

681 
	gWšdowsD—thTe¡
::
Wa™
() {

682 ià(!
¥awÃd
())

687 cÚ¡ 
HANDLE
 
	gwa™_hªdËs
[2] = { 
chd_hªdË_
.
G‘
(), 
ev’t_hªdË_
.Get() };

688 ::
Wa™FÜMuÉËObjeùs
(2,

689 
wa™_hªdËs
,

690 
FALSE
,

691 
INFINITE
)) {

692 
	gWAIT_OBJECT_0
:

693 
WAIT_OBJECT_0
 + 1:

696 
GTEST_DEATH_TEST_CHECK_
(
çl£
);

701 
	gwr™e_hªdË_
.
Re£t
();

702 
	gev’t_hªdË_
.
Re£t
();

704 
R—dAndIÁ”´‘StusBy‹
();

710 
GTEST_DEATH_TEST_CHECK_
(

711 
WAIT_OBJECT_0
 =ğ::
Wa™FÜSšgËObjeù
(
chd_hªdË_
.
G‘
(),

712 
INFINITE
));

713 
DWORD
 
	g¡©us_code
;

714 
GTEST_DEATH_TEST_CHECK_
(

715 ::
G‘Ex™CodeProûss
(
chd_hªdË_
.
G‘
(), &
¡©us_code
è!ğ
FALSE
);

716 
	gchd_hªdË_
.
Re£t
();

717 
£t_¡©us
(
¡©ic_ÿ¡
<>(
¡©us_code
));

718  
¡©us
();

726 
	gD—thTe¡
::
Te¡RŞe
 
WšdowsD—thTe¡
::
AssumeRŞe
() {

727 cÚ¡ 
Un™Te¡Im¶
* cÚ¡ 
im¶
 = 
G‘Un™Te¡Im¶
();

728 cÚ¡ 
IÁ”ÇlRunD—thTe¡FÏg
* cÚ¡ 
	gæag
 =

729 
im¶
->
š‹º®_run_d—th_‹¡_æag
();

730 cÚ¡ 
Te¡Info
* cÚ¡ 
	gšfo
 = 
im¶
->
cu¼’t_‹¡_šfo
();

731 cÚ¡ 
	gd—th_‹¡_šdex
 = 
šfo
->
»suÉ
()->
d—th_‹¡_couÁ
();

733 ià(
	gæag
 !ğ
nuÎ±r
) {

736 
£t_wr™e_fd
(
æag
->
wr™e_fd
());

737  
	gEXECUTE_TEST
;

742 
SECURITY_ATTRIBUTES
 
	ghªdËs_¬e_šh”™abË
 = {(SECURITY_ATTRIBUTES),

743 
nuÎ±r
, 
TRUE
};

744 
HANDLE
 
	g»ad_hªdË
, 
	gwr™e_hªdË
;

745 
GTEST_DEATH_TEST_CHECK_
(

746 ::
C»©ePe
(&
»ad_hªdË
, &
wr™e_hªdË
, &
hªdËs_¬e_šh”™abË
,

748 !ğ
FALSE
);

749 
£t_»ad_fd
(::
_İ’_osfhªdË
(
»š‹½»t_ÿ¡
<
šŒ_t
>(
»ad_hªdË
),

750 
O_RDONLY
));

751 
	gwr™e_hªdË_
.
Re£t
(
wr™e_hªdË
);

752 
	gev’t_hªdË_
.
Re£t
(::
C»©eEv’t
(

753 &
hªdËs_¬e_šh”™abË
,

754 
TRUE
,

755 
FALSE
,

756 
nuÎ±r
));

757 
GTEST_DEATH_TEST_CHECK_
(
ev’t_hªdË_
.
G‘
(è!ğ
nuÎ±r
);

758 cÚ¡ 
	g¡d
::
¡ršg
 
f‹r_æag
 = 
¡d
::¡ršg("--"è+ 
GTEST_FLAG_PREFIX_
 +

759 
kF‹rFÏg
 + "=" + 
šfo
->
‹¡_su™e_Çme
() +

760 "." + 
šfo
->
Çme
();

761 cÚ¡ 
	g¡d
::
¡ršg
 
š‹º®_æag
 =

762 
¡d
::
¡ršg
("--"è+ 
GTEST_FLAG_PREFIX_
 + 
kIÁ”ÇlRunD—thTe¡FÏg
 +

763 "=" + 
fe_
 + "|" + 
SŒ—mabËToSŒšg
(
lše_
) + "|" +

764 
SŒ—mabËToSŒšg
(
d—th_‹¡_šdex
) + "|" +

765 
SŒ—mabËToSŒšg
(
¡©ic_ÿ¡
<>(::
G‘Cu¼’tProûssId
())) +

769 "|" + 
SŒ—mabËToSŒšg
(
»š‹½»t_ÿ¡
<
size_t
>(
wr™e_hªdË
)) +

770 "|" + 
SŒ—mabËToSŒšg
(
»š‹½»t_ÿ¡
<
size_t
>(
ev’t_hªdË_
.
G‘
()));

772 
	gexecubË_·th
[
_MAX_PATH
 + 1];

773 
GTEST_DEATH_TEST_CHECK_
(
_MAX_PATH
 + 1 !ğ::
G‘ModuËFeNameA
(
nuÎ±r
,

774 
execubË_·th
,

775 
_MAX_PATH
));

777 
	g¡d
::
¡ršg
 
commªd_lše
 =

778 
¡d
::
¡ršg
(::
G‘CommªdLšeA
()è+ " " + 
f‹r_æag
 + " \"" +

779 
š‹º®_æag
 + "\"";

781 
	gD—thTe¡
::
£t_Ï¡_d—th_‹¡_mes§ge
("");

783 
C­tu»Std”r
();

785 
FlushInfoLog
();

788 
STARTUPINFOA
 
	g¡¬tup_šfo
;

789 
mem£t
(&
¡¬tup_šfo
, 0, (
STARTUPINFO
));

790 
	g¡¬tup_šfo
.
	gdwFÏgs
 = 
STARTF_USESTDHANDLES
;

791 
	g¡¬tup_šfo
.
	ghStdIÅut
 = ::
G‘StdHªdË
(
STD_INPUT_HANDLE
);

792 
	g¡¬tup_šfo
.
	ghStdOuut
 = ::
G‘StdHªdË
(
STD_OUTPUT_HANDLE
);

793 
	g¡¬tup_šfo
.
	ghStdE¼Ü
 = ::
G‘StdHªdË
(
STD_ERROR_HANDLE
);

795 
PROCESS_INFORMATION
 
	g´oûss_šfo
;

796 
GTEST_DEATH_TEST_CHECK_
(

797 ::
C»©eProûssA
(

798 
execubË_·th
, 
cÚ¡_ÿ¡
<*>(
commªd_lše
.
c_¡r
()),

799 
nuÎ±r
,

800 
nuÎ±r
,

801 
TRUE
,

803 
nuÎ±r
,

804 
Un™Te¡
::
G‘In¡ªû
()->
Üigš®_wÜkšg_dœ
(), &
¡¬tup_šfo
,

805 &
´oûss_šfo
è!ğ
FALSE
);

806 
	gchd_hªdË_
.
Re£t
(
´oûss_šfo
.
hProûss
);

807 ::
Clo£HªdË
(
´oûss_šfo
.
hTh»ad
);

808 
£t_¥awÃd
(
Œue
);

809  
	gOVERSEE_TEST
;

812 #–ià
GTEST_OS_FUCHSIA


814 şas 
	cFuchsŸD—thTe¡
 : 
public
 
D—thTe¡Im¶
 {

815 
public
:

816 
FuchsŸD—thTe¡
(cÚ¡ * 
a_¡©em’t
, 
M©ch”
<cÚ¡ 
¡d
::
¡ršg
&> 
m©ch”
,

817 cÚ¡ * 
fe
, 
lše
)

818 : 
D—thTe¡Im¶
(
a_¡©em’t
, 
¡d
::
move
(
m©ch”
)),

819 
fe_
(
fe
),

820 
lše_
(
lše
) {}

823 
Wa™
(è
	gov”ride
;

824 
Te¡RŞe
 
AssumeRŞe
(è
	gov”ride
;

825 
	g¡d
::
¡ršg
 
G‘E¼ÜLogs
(è
ov”ride
;

827 
	g´iv©e
:

829 cÚ¡ * cÚ¡ 
fe_
;

831 cÚ¡ 
	glše_
;

833 
	g¡d
::
¡ršg
 
ÿ±u»d_¡d”r_
;

835 
	gzx
::
´oûss
 
chd_´oûss_
;

836 
	gzx
::
chªÃl
 
exû±iÚ_chªÃl_
;

837 
	gzx
::
sock‘
 
¡d”r_sock‘_
;

841 şas 
	cArgum’ts
 {

842 
	gpublic
:

843 
Argum’ts
(è{ 
¬gs_
.
push_back
(
nuÎ±r
); }

845 ~
Argum’ts
() {

846 
	g¡d
::
veùÜ
<*>::
™”©Ü
 
i
 = 
¬gs_
.
begš
(); 
	gi
 !ğ¬gs_.
’d
();

847 ++
	gi
) {

848 
ä“
(*
i
);

851 
AddArgum’t
(cÚ¡ * 
¬gum’t
) {

852 
	g¬gs_
.
š£¹
(
¬gs_
.
’d
(è- 1, 
posix
::
SŒDup
(
¬gum’t
));

855 
	g‹m¶©e
 <
ty³Çme
 
	gSŒ
>

856 
AddArgum’ts
(cÚ¡ ::
¡d
::
veùÜ
<
SŒ
>& 
¬gum’ts
) {

857 
ty³Çme
 ::
¡d
::
veùÜ
<
SŒ
>::
cÚ¡_™”©Ü
 
i
 = 
¬gum’ts
.
begš
();

858 
	gi
 !ğ
¬gum’ts
.
’d
();

859 ++
	gi
) {

860 
	g¬gs_
.
š£¹
(
¬gs_
.
’d
(è- 1, 
posix
::
SŒDup
(
i
->
c_¡r
()));

863 * cÚ¡* 
Argv
() {

864  &
	g¬gs_
[0];

867 
size
() {

868  
	g¡©ic_ÿ¡
<>(
	g¬gs_
.
size
()) - 1;

871 
	g´iv©e
:

872 
¡d
::
veùÜ
<*> 
¬gs_
;

878 
	gFuchsŸD—thTe¡
::
Wa™
() {

879 cÚ¡ 
kProûssKey
 = 0;

880 cÚ¡ 
	gkSock‘Key
 = 1;

881 cÚ¡ 
	gkExû±iÚKey
 = 2;

883 ià(!
¥awÃd
())

887 
zx_¡©us_t
 
	g¡©us_zx
;

888 
	gzx
::
pÜt
…ort;

889 
	g¡©us_zx
 = 
zx
::
pÜt
::
ü—‹
(0, &port);

890 
GTEST_DEATH_TEST_CHECK_
(
¡©us_zx
 =ğ
ZX_OK
);

893 
	g¡©us_zx
 = 
chd_´oûss_
.
wa™_async
(

894 
pÜt
, 
kProûssKey
, 
ZX_PROCESS_TERMINATED
, 0);

895 
GTEST_DEATH_TEST_CHECK_
(
¡©us_zx
 =ğ
ZX_OK
);

898 
	g¡©us_zx
 = 
¡d”r_sock‘_
.
wa™_async
(

899 
pÜt
, 
kSock‘Key
, 
ZX_SOCKET_READABLE
 | 
ZX_SOCKET_PEER_CLOSED
, 0);

900 
GTEST_DEATH_TEST_CHECK_
(
¡©us_zx
 =ğ
ZX_OK
);

903 
	g¡©us_zx
 = 
exû±iÚ_chªÃl_
.
wa™_async
(

904 
pÜt
, 
kExû±iÚKey
, 
ZX_CHANNEL_READABLE
, 0);

905 
GTEST_DEATH_TEST_CHECK_
(
¡©us_zx
 =ğ
ZX_OK
);

907 
boŞ
 
	g´oûss_‹rmš©ed
 = 
çl£
;

908 
boŞ
 
	gsock‘_şo£d
 = 
çl£
;

910 
zx_pÜt_·ck‘_t
 
	g·ck‘
 = {};

911 
	g¡©us_zx
 = 
pÜt
.
wa™
(
zx
::
time
::
šfš™e
(), &
·ck‘
);

912 
GTEST_DEATH_TEST_CHECK_
(
¡©us_zx
 =ğ
ZX_OK
);

914 ià(
	g·ck‘
.
	gkey
 =ğ
kExû±iÚKey
) {

918 
¡©us_zx
 = 
chd_´oûss_
.
kl
();

919 
GTEST_DEATH_TEST_CHECK_
(
¡©us_zx
 =ğ
ZX_OK
);

920 } ià(
	g·ck‘
.
	gkey
 =ğ
kProûssKey
) {

922 
GTEST_DEATH_TEST_CHECK_
(
ZX_PKT_IS_SIGNAL_ONE
(
·ck‘
.
ty³
));

923 
GTEST_DEATH_TEST_CHECK_
(
·ck‘
.
sigÇl
.
ob£rved
 & 
ZX_PROCESS_TERMINATED
);

924 
	g´oûss_‹rmš©ed
 = 
Œue
;

925 } ià(
	g·ck‘
.
	gkey
 =ğ
kSock‘Key
) {

926 
GTEST_DEATH_TEST_CHECK_
(
ZX_PKT_IS_SIGNAL_ONE
(
·ck‘
.
ty³
));

927 ià(
	g·ck‘
.
	gsigÇl
.
	gob£rved
 & 
	gZX_SOCKET_READABLE
) {

929 
cÚ¡ex´
 
size_t
 
	gkBufãrSize
 = 1024;

931 
size_t
 
	gŞd_Ëngth
 = 
ÿ±u»d_¡d”r_
.
Ëngth
();

932 
size_t
 
	gby‹s_»ad
 = 0;

933 
	gÿ±u»d_¡d”r_
.
»size
(
Şd_Ëngth
 + 
kBufãrSize
);

934 
	g¡©us_zx
 = 
¡d”r_sock‘_
.
»ad
(

935 0, &
ÿ±u»d_¡d”r_
.
äÚt
(è+ 
Şd_Ëngth
, 
kBufãrSize
,

936 &
by‹s_»ad
);

937 
	gÿ±u»d_¡d”r_
.
»size
(
Şd_Ëngth
 + 
by‹s_»ad
);

938 } 
	g¡©us_zx
 =ğ
ZX_OK
);

939 ià(
	g¡©us_zx
 =ğ
ZX_ERR_PEER_CLOSED
) {

940 
sock‘_şo£d
 = 
Œue
;

942 
GTEST_DEATH_TEST_CHECK_
(
¡©us_zx
 =ğ
ZX_ERR_SHOULD_WAIT
);

943 
	g¡©us_zx
 = 
¡d”r_sock‘_
.
wa™_async
(

944 
pÜt
, 
kSock‘Key
, 
ZX_SOCKET_READABLE
 | 
ZX_SOCKET_PEER_CLOSED
, 0);

945 
GTEST_DEATH_TEST_CHECK_
(
¡©us_zx
 =ğ
ZX_OK
);

948 
GTEST_DEATH_TEST_CHECK_
(
·ck‘
.
sigÇl
.
ob£rved
 & 
ZX_SOCKET_PEER_CLOSED
);

949 
	gsock‘_şo£d
 = 
Œue
;

952 } !
	g´oûss_‹rmš©ed
 && !
	gsock‘_şo£d
);

954 
R—dAndIÁ”´‘StusBy‹
();

956 
zx_šfo_´oûss_t
 
	gbufãr
;

957 
	g¡©us_zx
 = 
chd_´oûss_
.
g‘_šfo
(
ZX_INFO_PROCESS
, &
bufãr
, (buffer),

958 
nuÎ±r
,‚ullptr);

959 
GTEST_DEATH_TEST_CHECK_
(
¡©us_zx
 =ğ
ZX_OK
);

961 
GTEST_DEATH_TEST_CHECK_
(
bufãr
.
æags
 & 
ZX_INFO_PROCESS_FLAG_EXITED
);

962 
£t_¡©us
(
¡©ic_ÿ¡
<>(
bufãr
.
»tuº_code
));

963  
¡©us
();

971 
	gD—thTe¡
::
Te¡RŞe
 
FuchsŸD—thTe¡
::
AssumeRŞe
() {

972 cÚ¡ 
Un™Te¡Im¶
* cÚ¡ 
im¶
 = 
G‘Un™Te¡Im¶
();

973 cÚ¡ 
IÁ”ÇlRunD—thTe¡FÏg
* cÚ¡ 
	gæag
 =

974 
im¶
->
š‹º®_run_d—th_‹¡_æag
();

975 cÚ¡ 
Te¡Info
* cÚ¡ 
	gšfo
 = 
im¶
->
cu¼’t_‹¡_šfo
();

976 cÚ¡ 
	gd—th_‹¡_šdex
 = 
šfo
->
»suÉ
()->
d—th_‹¡_couÁ
();

978 ià(
	gæag
 !ğ
nuÎ±r
) {

981 
£t_wr™e_fd
(
kFuchsŸR—dPeFd
);

982  
	gEXECUTE_TEST
;

986 
FlushInfoLog
();

989 cÚ¡ 
	g¡d
::
¡ršg
 
f‹r_æag
 = 
¡d
::¡ršg("--"è+ 
GTEST_FLAG_PREFIX_
 +

990 
kF‹rFÏg
 + "=" + 
šfo
->
‹¡_su™e_Çme
() +

991 "." + 
šfo
->
Çme
();

992 cÚ¡ 
	g¡d
::
¡ršg
 
š‹º®_æag
 =

993 
¡d
::
¡ršg
("--"è+ 
GTEST_FLAG_PREFIX_
 + 
kIÁ”ÇlRunD—thTe¡FÏg
 + "="

994 + 
fe_
 + "|"

995 + 
SŒ—mabËToSŒšg
(
lše_
) + "|"

996 + 
SŒ—mabËToSŒšg
(
d—th_‹¡_šdex
);

997 
Argum’ts
 
	g¬gs
;

998 
	g¬gs
.
AddArgum’ts
(
G‘InjeùabËArgvs
());

999 
	g¬gs
.
AddArgum’t
(
f‹r_æag
.
c_¡r
());

1000 
	g¬gs
.
AddArgum’t
(
š‹º®_æag
.
c_¡r
());

1003 
zx_¡©us_t
 
	g¡©us
;

1004 
zx_hªdË_t
 
	gchd_pe_hªdË
;

1005 
	gchd_pe_fd
;

1006 
	g¡©us
 = 
fdio_pe_h®f
(&
chd_pe_fd
, &
chd_pe_hªdË
);

1007 
GTEST_DEATH_TEST_CHECK_
(
¡©us
 =ğ
ZX_OK
);

1008 
£t_»ad_fd
(
chd_pe_fd
);

1011 
fdio_¥awn_aùiÚ_t
 
	g¥awn_aùiÚs
[2] = {};

1012 
fdio_¥awn_aùiÚ_t
* 
	gadd_hªdË_aùiÚ
 = &
¥awn_aùiÚs
[0];

1013 
	gadd_hªdË_aùiÚ
->
	gaùiÚ
 = 
FDIO_SPAWN_ACTION_ADD_HANDLE
;

1014 
	gadd_hªdË_aùiÚ
->
	gh
.
	gid
 = 
PA_HND
(
PA_FD
, 
kFuchsŸR—dPeFd
);

1015 
	gadd_hªdË_aùiÚ
->
	gh
.
	ghªdË
 = 
chd_pe_hªdË
;

1018 
	gzx
::
sock‘
 
¡d”r_´oduûr_sock‘
;

1019 
	g¡©us
 =

1020 
zx
::
sock‘
::
ü—‹
(0, &
¡d”r_´oduûr_sock‘
, &
¡d”r_sock‘_
);

1021 
GTEST_DEATH_TEST_CHECK_
(
¡©us
 >= 0);

1022 
	g¡d”r_´oduûr_fd
 = -1;

1023 
	g¡©us
 =

1024 
fdio_fd_ü—‹
(
¡d”r_´oduûr_sock‘
.
»Ëa£
(), &
¡d”r_´oduûr_fd
);

1025 
GTEST_DEATH_TEST_CHECK_
(
¡©us
 >= 0);

1028 
GTEST_DEATH_TEST_CHECK_
(
fú
(
¡d”r_´oduûr_fd
, 
F_SETFL
, 0) == 0);

1030 
fdio_¥awn_aùiÚ_t
* 
	gadd_¡d”r_aùiÚ
 = &
¥awn_aùiÚs
[1];

1031 
	gadd_¡d”r_aùiÚ
->
	gaùiÚ
 = 
FDIO_SPAWN_ACTION_CLONE_FD
;

1032 
	gadd_¡d”r_aùiÚ
->
	gfd
.
	gloÿl_fd
 = 
¡d”r_´oduûr_fd
;

1033 
	gadd_¡d”r_aùiÚ
->
	gfd
.
	grg‘_fd
 = 
STDERR_FILENO
;

1036 
zx_hªdË_t
 
	gchd_job
 = 
ZX_HANDLE_INVALID
;

1037 
	g¡©us
 = 
zx_job_ü—‹
(
zx_job_deçuÉ
(), 0, & 
chd_job
);

1038 
GTEST_DEATH_TEST_CHECK_
(
¡©us
 =ğ
ZX_OK
);

1039 
zx_pŞicy_basic_t
 
	gpŞicy
;

1040 
	gpŞicy
.
	gcÚd™iÚ
 = 
ZX_POL_NEW_ANY
;

1041 
	gpŞicy
.pŞicy = 
ZX_POL_ACTION_ALLOW
;

1042 
	g¡©us
 = 
zx_job_£t_pŞicy
(

1043 
chd_job
, 
ZX_JOB_POL_RELATIVE
, 
ZX_JOB_POL_BASIC
, &
pŞicy
, 1);

1044 
GTEST_DEATH_TEST_CHECK_
(
¡©us
 =ğ
ZX_OK
);

1048 
	g¡©us
 =

1049 
zx_sk_ü—‹_exû±iÚ_chªÃl
(

1050 
chd_job
, 0, 
exû±iÚ_chªÃl_
.
»£t_ªd_g‘_add»ss
());

1051 
GTEST_DEATH_TEST_CHECK_
(
¡©us
 =ğ
ZX_OK
);

1054 
	g¡©us
 = 
fdio_¥awn_‘c
(

1055 
chd_job
, 
FDIO_SPAWN_CLONE_ALL
, 
¬gs
.
Argv
()[0],‡rgs.Argv(), 
nuÎ±r
,

1056 2, 
¥awn_aùiÚs
, 
chd_´oûss_
.
»£t_ªd_g‘_add»ss
(), 
nuÎ±r
);

1057 
GTEST_DEATH_TEST_CHECK_
(
¡©us
 =ğ
ZX_OK
);

1059 
£t_¥awÃd
(
Œue
);

1060  
	gOVERSEE_TEST
;

1063 
	g¡d
::
¡ršg
 
FuchsŸD—thTe¡
::
G‘E¼ÜLogs
() {

1064  
ÿ±u»d_¡d”r_
;

1072 şas 
	cFÜkšgD—thTe¡
 : 
public
 
D—thTe¡Im¶
 {

1073 
public
:

1074 
FÜkšgD—thTe¡
(cÚ¡ * 
¡©em’t
, 
M©ch”
<cÚ¡ 
¡d
::
¡ršg
&> 
m©ch”
);

1077 
Wa™
(è
	gov”ride
;

1079 
	g´Ùeùed
:

1080 
£t_chd_pid
(
pid_t
 
chd_pid
è{ 
chd_pid_
 = child_pid; }

1082 
	g´iv©e
:

1084 
pid_t
 
chd_pid_
;

1088 
	gFÜkšgD—thTe¡
::
FÜkšgD—thTe¡
(cÚ¡ * 
a_¡©em’t
,

1089 
M©ch”
<cÚ¡ 
¡d
::
¡ršg
&> 
m©ch”
)

1090 : 
D—thTe¡Im¶
(
a_¡©em’t
, 
¡d
::
move
(
m©ch”
)), 
chd_pid_
(-1) {}

1095 
	gFÜkšgD—thTe¡
::
Wa™
() {

1096 ià(!
¥awÃd
())

1099 
R—dAndIÁ”´‘StusBy‹
();

1101 
	g¡©us_v®ue
;

1102 
GTEST_DEATH_TEST_CHECK_SYSCALL_
(
wa™pid
(
chd_pid_
, &
¡©us_v®ue
, 0));

1103 
£t_¡©us
(
¡©us_v®ue
);

1104  
	g¡©us_v®ue
;

1109 şas 
	cNoExecD—thTe¡
 : 
public
 
FÜkšgD—thTe¡
 {

1110 
public
:

1111 
NoExecD—thTe¡
(cÚ¡ * 
a_¡©em’t
, 
M©ch”
<cÚ¡ 
¡d
::
¡ršg
&> 
m©ch”
)

1112 : 
FÜkšgD—thTe¡
(
a_¡©em’t
, 
¡d
::
move
(
m©ch”
)) {}

1113 
Te¡RŞe
 
AssumeRŞe
(è
ov”ride
;

1118 
	gD—thTe¡
::
Te¡RŞe
 
NoExecD—thTe¡
::
AssumeRŞe
() {

1119 cÚ¡ 
size_t
 
th»ad_couÁ
 = 
G‘Th»adCouÁ
();

1120 ià(
	gth»ad_couÁ
 != 1) {

1121 
GTEST_LOG_
(
WARNING
è<< 
D—thTe¡Th»adW¬nšg
(
th»ad_couÁ
);

1124 
	gpe_fd
[2];

1125 
GTEST_DEATH_TEST_CHECK_
(
pe
(
pe_fd
) != -1);

1127 
	gD—thTe¡
::
£t_Ï¡_d—th_‹¡_mes§ge
("");

1128 
C­tu»Std”r
();

1136 
FlushInfoLog
();

1138 cÚ¡ 
pid_t
 
	gchd_pid
 = 
fÜk
();

1139 
GTEST_DEATH_TEST_CHECK_
(
chd_pid
 != -1);

1140 
£t_chd_pid
(
chd_pid
);

1141 ià(
	gchd_pid
 == 0) {

1142 
GTEST_DEATH_TEST_CHECK_SYSCALL_
(
şo£
(
pe_fd
[0]));

1143 
£t_wr™e_fd
(
pe_fd
[1]);

1147 
LogToStd”r
();

1150 
G‘Un™Te¡Im¶
()->
li¡’”s
()->
Suµ»ssEv’tFÜw¬dšg
();

1151 
	gg_š_ç¡_d—th_‹¡_chd
 = 
Œue
;

1152  
	gEXECUTE_TEST
;

1154 
GTEST_DEATH_TEST_CHECK_SYSCALL_
(
şo£
(
pe_fd
[1]));

1155 
£t_»ad_fd
(
pe_fd
[0]);

1156 
£t_¥awÃd
(
Œue
);

1157  
	gOVERSEE_TEST
;

1164 şas 
	cExecD—thTe¡
 : 
public
 
FÜkšgD—thTe¡
 {

1165 
public
:

1166 
ExecD—thTe¡
(cÚ¡ * 
a_¡©em’t
, 
M©ch”
<cÚ¡ 
¡d
::
¡ršg
&> 
m©ch”
,

1167 cÚ¡ * 
fe
, 
lše
)

1168 : 
FÜkšgD—thTe¡
(
a_¡©em’t
, 
¡d
::
move
(
m©ch”
)),

1169 
fe_
(
fe
),

1170 
lše_
(
lše
) {}

1171 
Te¡RŞe
 
AssumeRŞe
(è
	gov”ride
;

1173 
	g´iv©e
:

1174 ::
¡d
::
veùÜ
<¡d::
¡ršg
> 
G‘ArgvsFÜD—thTe¡ChdProûss
() {

1175 ::
¡d
::
veùÜ
<¡d::
¡ršg
> 
¬gs
 = 
G‘InjeùabËArgvs
();

1176 #ià
defšed
(
GTEST_EXTRA_DEATH_TEST_COMMAND_LINE_ARGS_
)

1177 ::
¡d
::
veùÜ
<¡d::
¡ršg
> 
exŒa_¬gs
 =

1178 
GTEST_EXTRA_DEATH_TEST_COMMAND_LINE_ARGS_
();

1179 
	g¬gs
.
š£¹
(
¬gs
.
’d
(), 
exŒa_¬gs
.
begš
(),ƒxtra_args.end());

1181  
	g¬gs
;

1184 cÚ¡ * cÚ¡ 
	gfe_
;

1186 cÚ¡ 
	glše_
;

1190 şas 
	cArgum’ts
 {

1191 
	gpublic
:

1192 
Argum’ts
(è{ 
¬gs_
.
push_back
(
nuÎ±r
); }

1194 ~
Argum’ts
() {

1195 
	g¡d
::
veùÜ
<*>::
™”©Ü
 
i
 = 
¬gs_
.
begš
(); 
	gi
 !ğ¬gs_.
’d
();

1196 ++
	gi
) {

1197 
ä“
(*
i
);

1200 
AddArgum’t
(cÚ¡ * 
¬gum’t
) {

1201 
	g¬gs_
.
š£¹
(
¬gs_
.
’d
(è- 1, 
posix
::
SŒDup
(
¬gum’t
));

1204 
	g‹m¶©e
 <
ty³Çme
 
	gSŒ
>

1205 
AddArgum’ts
(cÚ¡ ::
¡d
::
veùÜ
<
SŒ
>& 
¬gum’ts
) {

1206 
ty³Çme
 ::
¡d
::
veùÜ
<
SŒ
>::
cÚ¡_™”©Ü
 
i
 = 
¬gum’ts
.
begš
();

1207 
	gi
 !ğ
¬gum’ts
.
’d
();

1208 ++
	gi
) {

1209 
	g¬gs_
.
š£¹
(
¬gs_
.
’d
(è- 1, 
posix
::
SŒDup
(
i
->
c_¡r
()));

1212 * cÚ¡* 
Argv
() {

1213  &
	g¬gs_
[0];

1216 
	g´iv©e
:

1217 
¡d
::
veùÜ
<*> 
¬gs_
;

1222 
	sExecD—thTe¡Args
 {

1223 * cÚ¡* 
	g¬gv
;

1224 
	gşo£_fd
;

1227 #ià
GTEST_OS_QNX


1228 "C" ** 
’vœÚ
;

1233 
ExecD—thTe¡ChdMaš
(* 
chd_¬g
) {

1234 
ExecD—thTe¡Args
* cÚ¡ 
	g¬gs
 = 
¡©ic_ÿ¡
<ExecD—thTe¡Args*>(
chd_¬g
);

1235 
GTEST_DEATH_TEST_CHECK_SYSCALL_
(
şo£
(
¬gs
->
şo£_fd
));

1240 cÚ¡ * cÚ¡ 
	gÜigš®_dœ
 =

1241 
Un™Te¡
::
G‘In¡ªû
()->
Üigš®_wÜkšg_dœ
();

1243 ià(
chdœ
(
Üigš®_dœ
) != 0) {

1244 
D—thTe¡AbÜt
(
¡d
::
¡ršg
("chdœ(\""è+ 
Üigš®_dœ
 + "\") failed: " +

1245 
G‘La¡E¼noDesütiÚ
());

1246  
	gEXIT_FAILURE
;

1254 
execv
(
¬gs
->
¬gv
[0],‡rgs->argv);

1255 
D—thTe¡AbÜt
(
¡d
::
¡ršg
("execv("è+ 
¬gs
->
¬gv
[0] + ", ...) in " +

1256 
Üigš®_dœ
 + " failed: " +

1257 
G‘La¡E¼noDesütiÚ
());

1258  
	gEXIT_FAILURE
;

1262 #ià
GTEST_HAS_CLONE


1272 
SckLow”ThªAdd»ss
(cÚ¡ * 
±r
,

1273 
boŞ
* 
»suÉ
è
	gGTEST_NO_INLINE_
;

1280 
GTEST_ATTRIBUTE_NO_SANITIZE_ADDRESS_


1281 
GTEST_ATTRIBUTE_NO_SANITIZE_HWADDRESS_


1282 
SckLow”ThªAdd»ss
(cÚ¡ * 
±r
, 
boŞ
* 
»suÉ
) {

1283 
	gdummy
 = 0;

1284 *
	g»suÉ
 = 
¡d
::
Ëss
<cÚ¡ *>()(&
dummy
, 
	g±r
);

1288 
GTEST_ATTRIBUTE_NO_SANITIZE_ADDRESS_


1289 
GTEST_ATTRIBUTE_NO_SANITIZE_HWADDRESS_


1290 
boŞ
 
SckGrowsDown
() {

1291 
	gdummy
 = 0;

1292 
boŞ
 
	g»suÉ
;

1293 
SckLow”ThªAdd»ss
(&
dummy
, &
»suÉ
);

1294  
	g»suÉ
;

1305 
pid_t
 
ExecD—thTe¡S·wnChd
(* cÚ¡* 
¬gv
, 
şo£_fd
) {

1306 
ExecD—thTe¡Args
 
	g¬gs
 = { 
¬gv
, 
şo£_fd
 };

1307 
pid_t
 
	gchd_pid
 = -1;

1309 #ià
GTEST_OS_QNX


1312 cÚ¡ 
	gcwd_fd
 = 
İ’
(".", 
O_RDONLY
);

1313 
GTEST_DEATH_TEST_CHECK_
(
cwd_fd
 != -1);

1314 
GTEST_DEATH_TEST_CHECK_SYSCALL_
(
fú
(
cwd_fd
, 
F_SETFD
, 
FD_CLOEXEC
));

1318 cÚ¡ * cÚ¡ 
	gÜigš®_dœ
 =

1319 
Un™Te¡
::
G‘In¡ªû
()->
Üigš®_wÜkšg_dœ
();

1321 ià(
chdœ
(
Üigš®_dœ
) != 0) {

1322 
D—thTe¡AbÜt
(
¡d
::
¡ršg
("chdœ(\""è+ 
Üigš®_dœ
 + "\") failed: " +

1323 
G‘La¡E¼noDesütiÚ
());

1324  
	gEXIT_FAILURE
;

1327 
	gfd_æags
;

1329 
GTEST_DEATH_TEST_CHECK_SYSCALL_
(
fd_æags
 = 
fú
(
şo£_fd
, 
F_GETFD
));

1330 
GTEST_DEATH_TEST_CHECK_SYSCALL_
(
fú
(
şo£_fd
, 
F_SETFD
,

1331 
fd_æags
 | 
FD_CLOEXEC
));

1332 
šh”™ªû
 
	gšh”™
 = {0};

1334 
	gchd_pid
 = 
¥awn
(
¬gs
.
¬gv
[0], 0, 
nuÎ±r
, &
šh”™
,‡rgs.¬gv, 
’vœÚ
);

1336 
GTEST_DEATH_TEST_CHECK_
(
fchdœ
(
cwd_fd
) != -1);

1337 
GTEST_DEATH_TEST_CHECK_SYSCALL_
(
şo£
(
cwd_fd
));

1340 #ià
GTEST_OS_LINUX


1344 
sigaùiÚ
 
	g§ved_sig´of_aùiÚ
;

1345 
sigaùiÚ
 
	gignÜe_sig´of_aùiÚ
;

1346 
mem£t
(&
ignÜe_sig´of_aùiÚ
, 0, (ignore_sigprof_action));

1347 
sigem±y£t
(&
ignÜe_sig´of_aùiÚ
.
§_mask
);

1348 
	gignÜe_sig´of_aùiÚ
.
	g§_hªdËr
 = 
SIG_IGN
;

1349 
GTEST_DEATH_TEST_CHECK_SYSCALL_
(
sigaùiÚ
(

1350 
SIGPROF
, &
ignÜe_sig´of_aùiÚ
, &
§ved_sig´of_aùiÚ
));

1353 #ià
GTEST_HAS_CLONE


1354 cÚ¡ 
boŞ
 
	gu£_fÜk
 = 
GTEST_FLAG
(
d—th_‹¡_u£_fÜk
);

1356 ià(!
	gu£_fÜk
) {

1357 cÚ¡ 
boŞ
 
	g¡ack_grows_down
 = 
SckGrowsDown
();

1358 cÚ¡‡utØ
	g¡ack_size
 = 
¡©ic_ÿ¡
<
size_t
>(
g‘·gesize
() * 2);

1360 * cÚ¡ 
	g¡ack
 = 
mm­
(
nuÎ±r
, 
¡ack_size
, 
PROT_READ
 | 
PROT_WRITE
,

1361 
MAP_ANON
 | 
MAP_PRIVATE
, -1, 0);

1362 
GTEST_DEATH_TEST_CHECK_
(
¡ack
 !ğ
MAP_FAILED
);

1370 cÚ¡ 
size_t
 
	gkMaxSckAlignm’t
 = 64;

1371 * cÚ¡ 
	g¡ack_tİ
 =

1372 
¡©ic_ÿ¡
<*>(
¡ack
) +

1373 (
¡ack_grows_down
 ? 
¡ack_size
 - 
kMaxSckAlignm’t
 : 0);

1374 
GTEST_DEATH_TEST_CHECK_
(

1375 
¡©ic_ÿ¡
<
size_t
>(
¡ack_size
è> 
kMaxSckAlignm’t
 &&

1376 
»š‹½»t_ÿ¡
<
ušŒ_t
>(
¡ack_tİ
è% 
kMaxSckAlignm’t
 == 0);

1378 
	gchd_pid
 = 
şÚe
(&
ExecD—thTe¡ChdMaš
, 
¡ack_tİ
, 
SIGCHLD
, &
¬gs
);

1380 
GTEST_DEATH_TEST_CHECK_
(
munm­
(
¡ack
, 
¡ack_size
) != -1);

1383 cÚ¡ 
boŞ
 
	gu£_fÜk
 = 
Œue
;

1386 ià(
	gu£_fÜk
 && (
	gchd_pid
 = 
fÜk
()) == 0) {

1387 
ExecD—thTe¡ChdMaš
(&
¬gs
);

1388 
_ex™
(0);

1391 #ià
GTEST_OS_LINUX


1392 
GTEST_DEATH_TEST_CHECK_SYSCALL_
(

1393 
sigaùiÚ
(
SIGPROF
, &
§ved_sig´of_aùiÚ
, 
nuÎ±r
));

1396 
GTEST_DEATH_TEST_CHECK_
(
chd_pid
 != -1);

1397  
	gchd_pid
;

1404 
	gD—thTe¡
::
Te¡RŞe
 
ExecD—thTe¡
::
AssumeRŞe
() {

1405 cÚ¡ 
Un™Te¡Im¶
* cÚ¡ 
im¶
 = 
G‘Un™Te¡Im¶
();

1406 cÚ¡ 
IÁ”ÇlRunD—thTe¡FÏg
* cÚ¡ 
	gæag
 =

1407 
im¶
->
š‹º®_run_d—th_‹¡_æag
();

1408 cÚ¡ 
Te¡Info
* cÚ¡ 
	gšfo
 = 
im¶
->
cu¼’t_‹¡_šfo
();

1409 cÚ¡ 
	gd—th_‹¡_šdex
 = 
šfo
->
»suÉ
()->
d—th_‹¡_couÁ
();

1411 ià(
	gæag
 !ğ
nuÎ±r
) {

1412 
£t_wr™e_fd
(
æag
->
wr™e_fd
());

1413  
	gEXECUTE_TEST
;

1416 
	gpe_fd
[2];

1417 
GTEST_DEATH_TEST_CHECK_
(
pe
(
pe_fd
) != -1);

1420 
GTEST_DEATH_TEST_CHECK_
(
fú
(
pe_fd
[1], 
F_SETFD
, 0) != -1);

1422 cÚ¡ 
	g¡d
::
¡ršg
 
f‹r_æag
 = 
¡d
::¡ršg("--"è+ 
GTEST_FLAG_PREFIX_
 +

1423 
kF‹rFÏg
 + "=" + 
šfo
->
‹¡_su™e_Çme
() +

1424 "." + 
šfo
->
Çme
();

1425 cÚ¡ 
	g¡d
::
¡ršg
 
š‹º®_æag
 =

1426 
¡d
::
¡ršg
("--"è+ 
GTEST_FLAG_PREFIX_
 + 
kIÁ”ÇlRunD—thTe¡FÏg
 + "="

1427 + 
fe_
 + "|" + 
SŒ—mabËToSŒšg
(
lše_
) + "|"

1428 + 
SŒ—mabËToSŒšg
(
d—th_‹¡_šdex
) + "|"

1429 + 
SŒ—mabËToSŒšg
(
pe_fd
[1]);

1430 
Argum’ts
 
	g¬gs
;

1431 
	g¬gs
.
AddArgum’ts
(
G‘ArgvsFÜD—thTe¡ChdProûss
());

1432 
	g¬gs
.
AddArgum’t
(
f‹r_æag
.
c_¡r
());

1433 
	g¬gs
.
AddArgum’t
(
š‹º®_æag
.
c_¡r
());

1435 
	gD—thTe¡
::
£t_Ï¡_d—th_‹¡_mes§ge
("");

1437 
C­tu»Std”r
();

1440 
FlushInfoLog
();

1442 cÚ¡ 
pid_t
 
	gchd_pid
 = 
ExecD—thTe¡S·wnChd
(
¬gs
.
Argv
(), 
pe_fd
[0]);

1443 
GTEST_DEATH_TEST_CHECK_SYSCALL_
(
şo£
(
pe_fd
[1]));

1444 
£t_chd_pid
(
chd_pid
);

1445 
£t_»ad_fd
(
pe_fd
[0]);

1446 
£t_¥awÃd
(
Œue
);

1447  
	gOVERSEE_TEST
;

1457 
boŞ
 
	gDeçuÉD—thTe¡FaùÜy
::
C»©e
(cÚ¡ * 
¡©em’t
,

1458 
M©ch”
<cÚ¡ 
¡d
::
¡ršg
&> 
m©ch”
,

1459 cÚ¡ * 
fe
, 
lše
,

1460 
D—thTe¡
** 
‹¡
) {

1461 
Un™Te¡Im¶
* cÚ¡ 
	gim¶
 = 
G‘Un™Te¡Im¶
();

1462 cÚ¡ 
IÁ”ÇlRunD—thTe¡FÏg
* cÚ¡ 
	gæag
 =

1463 
im¶
->
š‹º®_run_d—th_‹¡_æag
();

1464 cÚ¡ 
	gd—th_‹¡_šdex
 = 
im¶
->
cu¼’t_‹¡_šfo
()

1465 ->
šüem’t_d—th_‹¡_couÁ
();

1467 ià(
	gæag
 !ğ
nuÎ±r
) {

1468 ià(
d—th_‹¡_šdex
 > 
æag
->
šdex
()) {

1469 
D—thTe¡
::
£t_Ï¡_d—th_‹¡_mes§ge
(

1470 "D—the¡ couÁ (" + 
SŒ—mabËToSŒšg
(
d—th_‹¡_šdex
)

1472 + 
SŒ—mabËToSŒšg
(
æag
->
šdex
()) + ")");

1473  
	gçl£
;

1476 ià(!(
	gæag
->
fe
(è=ğf&& 
æag
->
lše
() ==†ine &&

1477 
æag
->
šdex
(è=ğ
d—th_‹¡_šdex
)) {

1478 *
‹¡
 = 
nuÎ±r
;

1479  
	gŒue
;

1483 #ià
GTEST_OS_WINDOWS


1485 ià(
GTEST_FLAG
(
d—th_‹¡_¡yË
) == "threadsafe" ||

1486 
GTEST_FLAG
(
d—th_‹¡_¡yË
) == "fast") {

1487 *
‹¡
 = 
Ãw
 
WšdowsD—thTe¡
(
¡©em’t
, 
¡d
::
move
(
m©ch”
), 
fe
, 
lše
);

1490 #–ià
GTEST_OS_FUCHSIA


1492 ià(
GTEST_FLAG
(
d—th_‹¡_¡yË
) == "threadsafe" ||

1493 
GTEST_FLAG
(
d—th_‹¡_¡yË
) == "fast") {

1494 *
‹¡
 = 
Ãw
 
FuchsŸD—thTe¡
(
¡©em’t
, 
¡d
::
move
(
m©ch”
), 
fe
, 
lše
);

1499 ià(
GTEST_FLAG
(
d—th_‹¡_¡yË
) == "threadsafe") {

1500 *
‹¡
 = 
Ãw
 
ExecD—thTe¡
(
¡©em’t
, 
¡d
::
move
(
m©ch”
), 
fe
, 
lše
);

1501 } ià(
GTEST_FLAG
(
d—th_‹¡_¡yË
) == "fast") {

1502 *
‹¡
 = 
Ãw
 
NoExecD—thTe¡
(
¡©em’t
, 
¡d
::
move
(
m©ch”
));

1508 
	gD—thTe¡
::
£t_Ï¡_d—th_‹¡_mes§ge
(

1509 "UnknowÀd—the¡ styË \"" + 
GTEST_FLAG
(
d—th_‹¡_¡yË
)

1511  
	gçl£
;

1514  
	gŒue
;

1517 #ià
GTEST_OS_WINDOWS


1521 
G‘StusFeDesütÜ
(
·»Á_´oûss_id
,

1522 
size_t
 
wr™e_hªdË_as_size_t
,

1523 
size_t
 
ev’t_hªdË_as_size_t
) {

1524 
AutoHªdË
 
·»Á_´oûss_hªdË
(::
O³nProûss
(
PROCESS_DUP_HANDLE
,

1525 
FALSE
,

1526 
·»Á_´oûss_id
));

1527 ià(
	g·»Á_´oûss_hªdË
.
G‘
(è=ğ
INVALID_HANDLE_VALUE
) {

1528 
D—thTe¡AbÜt
("Unableo open…arent…rocess " +

1529 
SŒ—mabËToSŒšg
(
·»Á_´oûss_id
));

1532 
GTEST_CHECK_
((
HANDLE
è<ğ(
size_t
));

1534 cÚ¡ 
HANDLE
 
	gwr™e_hªdË
 =

1535 
»š‹½»t_ÿ¡
<
HANDLE
>(
wr™e_hªdË_as_size_t
);

1536 
HANDLE
 
	gdup_wr™e_hªdË
;

1541 ià(!::
Du¶iÿ‹HªdË
(
·»Á_´oûss_hªdË
.
G‘
(), 
wr™e_hªdË
,

1542 ::
G‘Cu¼’tProûss
(), &
dup_wr™e_hªdË
,

1545 
FALSE
,

1546 
DUPLICATE_SAME_ACCESS
)) {

1547 
D—thTe¡AbÜt
("Unableo duplicatehe…ipe handle " +

1548 
SŒ—mabËToSŒšg
(
wr™e_hªdË_as_size_t
) +

1550 
SŒ—mabËToSŒšg
(
·»Á_´oûss_id
));

1553 cÚ¡ 
HANDLE
 
	gev’t_hªdË
 = 
»š‹½»t_ÿ¡
<HANDLE>(
ev’t_hªdË_as_size_t
);

1554 
HANDLE
 
	gdup_ev’t_hªdË
;

1556 ià(!::
Du¶iÿ‹HªdË
(
·»Á_´oûss_hªdË
.
G‘
(), 
ev’t_hªdË
,

1557 ::
G‘Cu¼’tProûss
(), &
dup_ev’t_hªdË
,

1559 
FALSE
,

1560 
DUPLICATE_SAME_ACCESS
)) {

1561 
D—thTe¡AbÜt
("Unableo duplicateheƒvent handle " +

1562 
SŒ—mabËToSŒšg
(
ev’t_hªdË_as_size_t
) +

1564 
SŒ—mabËToSŒšg
(
·»Á_´oûss_id
));

1567 cÚ¡ 
	gwr™e_fd
 =

1568 ::
_İ’_osfhªdË
(
»š‹½»t_ÿ¡
<
šŒ_t
>(
dup_wr™e_hªdË
), 
O_APPEND
);

1569 ià(
	gwr™e_fd
 == -1) {

1570 
D—thTe¡AbÜt
("Unableo convert…ipe handle " +

1571 
SŒ—mabËToSŒšg
(
wr™e_hªdË_as_size_t
) +

1577 ::
S‘Ev’t
(
dup_ev’t_hªdË
);

1579  
	gwr™e_fd
;

1586 
IÁ”ÇlRunD—thTe¡FÏg
* 
P¬£IÁ”ÇlRunD—thTe¡FÏg
() {

1587 ià(
GTEST_FLAG
(
š‹º®_run_d—th_‹¡
è=ğ""è 
nuÎ±r
;

1591 
	glše
 = -1;

1592 
	gšdex
 = -1;

1593 ::
¡d
::
veùÜ
< ::¡d::
¡ršg
> 
f›lds
;

1594 
S¶™SŒšg
(
GTEST_FLAG
(
š‹º®_run_d—th_‹¡
).
c_¡r
(), '|', &
f›lds
);

1595 
	gwr™e_fd
 = -1;

1597 #ià
GTEST_OS_WINDOWS


1599 
	g·»Á_´oûss_id
 = 0;

1600 
size_t
 
	gwr™e_hªdË_as_size_t
 = 0;

1601 
size_t
 
	gev’t_hªdË_as_size_t
 = 0;

1603 ià(
	gf›lds
.
size
() != 6

1604 || !
P¬£N©u¿lNumb”
(
f›lds
[1], &
lše
)

1605 || !
P¬£N©u¿lNumb”
(
f›lds
[2], &
šdex
)

1606 || !
P¬£N©u¿lNumb”
(
f›lds
[3], &
·»Á_´oûss_id
)

1607 || !
P¬£N©u¿lNumb”
(
f›lds
[4], &
wr™e_hªdË_as_size_t
)

1608 || !
P¬£N©u¿lNumb”
(
f›lds
[5], &
ev’t_hªdË_as_size_t
)) {

1609 
D—thTe¡AbÜt
("Bad --gtest_internal_run_death_test flag: " +

1610 
GTEST_FLAG
(
š‹º®_run_d—th_‹¡
));

1612 
	gwr™e_fd
 = 
G‘StusFeDesütÜ
(
·»Á_´oûss_id
,

1613 
wr™e_hªdË_as_size_t
,

1614 
ev’t_hªdË_as_size_t
);

1616 #–ià
GTEST_OS_FUCHSIA


1618 ià(
	gf›lds
.
size
() != 3

1619 || !
P¬£N©u¿lNumb”
(
f›lds
[1], &
lše
)

1620 || !
P¬£N©u¿lNumb”
(
f›lds
[2], &
šdex
)) {

1621 
D—thTe¡AbÜt
("Bad --gtest_internal_run_death_test flag: "

1622 + 
GTEST_FLAG
(
š‹º®_run_d—th_‹¡
));

1627 ià(
	gf›lds
.
size
() != 4

1628 || !
P¬£N©u¿lNumb”
(
f›lds
[1], &
lše
)

1629 || !
P¬£N©u¿lNumb”
(
f›lds
[2], &
šdex
)

1630 || !
P¬£N©u¿lNumb”
(
f›lds
[3], &
wr™e_fd
)) {

1631 
D—thTe¡AbÜt
("Bad --gtest_internal_run_death_test flag: "

1632 + 
GTEST_FLAG
(
š‹º®_run_d—th_‹¡
));

1637  
Ãw
 
IÁ”ÇlRunD—thTe¡FÏg
(
f›lds
[0], 
lše
, 
šdex
, 
wr™e_fd
);

	@third_party/googletest/googletest/src/gtest-filepath.cc

30 
	~"g‹¡/š‹º®/g‹¡-f•©h.h
"

32 
	~<¡dlib.h
>

33 
	~"g‹¡/š‹º®/g‹¡-pÜt.h
"

34 
	~"g‹¡/g‹¡-mes§ge.h
"

36 #ià
GTEST_OS_WINDOWS_MOBILE


37 
	~<wšdows.h
>

38 #–ià
GTEST_OS_WINDOWS


39 
	~<dœeù.h
>

40 
	~<io.h
>

42 
	~<lim™s.h
>

43 
	~<şim™s
>

46 
	~"g‹¡/š‹º®/g‹¡-¡ršg.h
"

48 #ià
GTEST_OS_WINDOWS


49 
	#GTEST_PATH_MAX_
 
_MAX_PATH


	)

50 #–ià
defšed
(
PATH_MAX
)

51 
	#GTEST_PATH_MAX_
 
PATH_MAX


	)

52 #–ià
defšed
(
_XOPEN_PATH_MAX
)

53 
	#GTEST_PATH_MAX_
 
_XOPEN_PATH_MAX


	)

55 
	#GTEST_PATH_MAX_
 
_POSIX_PATH_MAX


	)

58 
Çme¥aû
 
	g‹¡šg
 {

59 
Çme¥aû
 
	gš‹º®
 {

61 #ià
GTEST_OS_WINDOWS


66 cÚ¡ 
	gkP©hS•¬©Ü
 = '\\';

67 cÚ¡ 
	gkAÉ”Ç‹P©hS•¬©Ü
 = '/';

68 cÚ¡ 
	gkAÉ”Ç‹P©hS•¬©ÜSŒšg
[] = "/";

69 #ià
GTEST_OS_WINDOWS_MOBILE


73 cÚ¡ 
	gkCu¼’tDœeùÜySŒšg
[] = "\\";

75 cÚ¡ 
DWORD
 
	gkInv®idFeA‰ribu‹s
 = 0xffffffff;

77 cÚ¡ 
	gkCu¼’tDœeùÜySŒšg
[] = ".\\";

80 cÚ¡ 
	gkP©hS•¬©Ü
 = '/';

81 cÚ¡ 
	gkCu¼’tDœeùÜySŒšg
[] = "./";

85 
boŞ
 
IsP©hS•¬©Ü
(
c
) {

86 #ià
GTEST_HAS_ALT_PATH_SEP_


87  (
	gc
 =ğ
kP©hS•¬©Ü
è|| (
c
 =ğ
kAÉ”Ç‹P©hS•¬©Ü
);

89  
	gc
 =ğ
kP©hS•¬©Ü
;

94 
FeP©h
 
	gFeP©h
::
G‘Cu¼’tDœ
() {

95 #ià
GTEST_OS_WINDOWS_MOBILE
 || 
GTEST_OS_WINDOWS_PHONE
 || \

96 
GTEST_OS_WINDOWS_RT
 || 
GTEST_OS_ESP8266
 || 
GTEST_OS_ESP32
 || \

97 
GTEST_OS_XTENSA


100  
FeP©h
(
kCu¼’tDœeùÜySŒšg
);

101 #–ià
GTEST_OS_WINDOWS


102 
	gcwd
[
GTEST_PATH_MAX_
 + 1] = { '\0' };

103  
FeP©h
(
_g‘cwd
(
cwd
, (cwd)è=ğ
nuÎ±r
 ? "" : cwd);

105 
	gcwd
[
GTEST_PATH_MAX_
 + 1] = { '\0' };

106 * 
	g»suÉ
 = 
g‘cwd
(
cwd
, (cwd));

107 #ià
GTEST_OS_NACL


111  
FeP©h
(
»suÉ
 =ğ
nuÎ±r
 ? 
kCu¼’tDœeùÜySŒšg
 : 
cwd
);

113  
FeP©h
(
»suÉ
 =ğ
nuÎ±r
 ? "" : 
cwd
);

121 
FeP©h
 
	gFeP©h
::
RemoveEx‹nsiÚ
(cÚ¡ * 
ex‹nsiÚ
) const {

122 cÚ¡ 
¡d
::
¡ršg
 
dÙ_ex‹nsiÚ
 = std::¡ršg("."è+ 
ex‹nsiÚ
;

123 ià(
	gSŒšg
::
EndsW™hCa£In£ns™ive
(
·thÇme_
, 
dÙ_ex‹nsiÚ
)) {

124  
FeP©h
(
·thÇme_
.
sub¡r
(

125 0, 
·thÇme_
.
Ëngth
(è- 
dÙ_ex‹nsiÚ
.length()));

127  *
	gthis
;

133 cÚ¡ * 
	gFeP©h
::
FšdLa¡P©hS•¬©Ü
() const {

134 cÚ¡ * cÚ¡ 
Ï¡_£p
 = 
¡¼chr
(
c_¡r
(), 
kP©hS•¬©Ü
);

135 #ià
GTEST_HAS_ALT_PATH_SEP_


136 cÚ¡ * cÚ¡ 
	gÏ¡_®t_£p
 = 
¡¼chr
(
c_¡r
(), 
kAÉ”Ç‹P©hS•¬©Ü
);

138 ià(
	gÏ¡_®t_£p
 !ğ
nuÎ±r
 &&

139 (
Ï¡_£p
 =ğ
nuÎ±r
 || 
Ï¡_®t_£p
 >†ast_sep)) {

140  
Ï¡_®t_£p
;

143  
	gÏ¡_£p
;

152 
FeP©h
 
	gFeP©h
::
RemoveDœeùÜyName
() const {

153 cÚ¡ * cÚ¡ 
Ï¡_£p
 = 
FšdLa¡P©hS•¬©Ü
();

154  
	gÏ¡_£p
 ? 
FeP©h
(
Ï¡_£p
 + 1è: *
this
;

163 
FeP©h
 
	gFeP©h
::
RemoveFeName
() const {

164 cÚ¡ * cÚ¡ 
Ï¡_£p
 = 
FšdLa¡P©hS•¬©Ü
();

165 
	g¡d
::
¡ršg
 
dœ
;

166 ià(
	gÏ¡_£p
) {

167 
	gdœ
 = 
¡d
::
¡ršg
(
c_¡r
(), 
¡©ic_ÿ¡
<
size_t
>(
Ï¡_£p
 + 1 - c_str()));

169 
	gdœ
 = 
kCu¼’tDœeùÜySŒšg
;

171  
FeP©h
(
dœ
);

180 
FeP©h
 
	gFeP©h
::
MakeFeName
(cÚ¡ FeP©h& 
dœeùÜy
,

181 cÚ¡ 
FeP©h
& 
ba£_Çme
,

182 
numb”
,

183 cÚ¡ * 
ex‹nsiÚ
) {

184 
	g¡d
::
¡ršg
 
fe
;

185 ià(
	gnumb”
 == 0) {

186 
fe
 = 
ba£_Çme
.
¡ršg
(è+ "." + 
ex‹nsiÚ
;

188 
	gfe
 = 
ba£_Çme
.
¡ršg
(è+ "_" + 
SŒ—mabËToSŒšg
(
numb”
)

189 + "." + 
ex‹nsiÚ
;

191  
CÚÿtP©hs
(
dœeùÜy
, 
FeP©h
(
fe
));

196 
FeP©h
 
	gFeP©h
::
CÚÿtP©hs
(cÚ¡ FeP©h& 
dœeùÜy
,

197 cÚ¡ 
FeP©h
& 
»Ïtive_·th
) {

198 ià(
	gdœeùÜy
.
IsEm±y
())

199  
	g»Ïtive_·th
;

200 cÚ¡ 
FeP©h
 
dœ
(
dœeùÜy
.
RemoveT¿šgP©hS•¬©Ü
());

201  
FeP©h
(
dœ
.
¡ršg
(è+ 
kP©hS•¬©Ü
 + 
»Ïtive_·th
.string());

206 
boŞ
 
	gFeP©h
::
FeOrDœeùÜyExi¡s
() const {

207 #ià
GTEST_OS_WINDOWS_MOBILE


208 
LPCWSTR
 
unicode
 = 
SŒšg
::
AnsiToUtf16
(
·thÇme_
.
c_¡r
());

209 cÚ¡ 
DWORD
 
	g©Œibu‹s
 = 
G‘FeA‰ribu‹s
(
unicode
);

210 
	gd–‘e
 [] 
	gunicode
;

211  
	g©Œibu‹s
 !ğ
kInv®idFeA‰ribu‹s
;

213 
	gposix
::
StSŒuù
 
fe_¡©
;

214  
	gposix
::
St
(
·thÇme_
.
c_¡r
(), &
fe_¡©
) == 0;

220 
boŞ
 
	gFeP©h
::
DœeùÜyExi¡s
() const {

221 
boŞ
 
»suÉ
 = 
çl£
;

222 #ià
GTEST_OS_WINDOWS


225 cÚ¡ 
	gFeP©h
& 
·th
(
IsRoÙDœeùÜy
(è? *
this
 :

226 
RemoveT¿šgP©hS•¬©Ü
());

228 cÚ¡ 
	gFeP©h
& 
·th
(*
this
);

231 #ià
GTEST_OS_WINDOWS_MOBILE


232 
LPCWSTR
 
	gunicode
 = 
SŒšg
::
AnsiToUtf16
(
·th
.
c_¡r
());

233 cÚ¡ 
DWORD
 
	g©Œibu‹s
 = 
G‘FeA‰ribu‹s
(
unicode
);

234 
	gd–‘e
 [] 
	gunicode
;

235 ià((
	g©Œibu‹s
 !ğ
kInv®idFeA‰ribu‹s
) &&

236 (
©Œibu‹s
 & 
FILE_ATTRIBUTE_DIRECTORY
)) {

237 
»suÉ
 = 
Œue
;

240 
	gposix
::
StSŒuù
 
fe_¡©
;

241 
	g»suÉ
 = 
posix
::
St
(
·th
.
c_¡r
(), &
fe_¡©
) == 0 &&

242 
posix
::
IsDœ
(
fe_¡©
);

245  
	g»suÉ
;

250 
boŞ
 
	gFeP©h
::
IsRoÙDœeùÜy
() const {

251 #ià
GTEST_OS_WINDOWS


252  
·thÇme_
.
Ëngth
(è=ğ3 && 
IsAbsŞu‹P©h
();

254  
	g·thÇme_
.
Ëngth
(è=ğ1 && 
IsP©hS•¬©Ü
(
·thÇme_
.
c_¡r
()[0]);

259 
boŞ
 
	gFeP©h
::
IsAbsŞu‹P©h
() const {

260 cÚ¡ * cÚ¡ 
Çme
 = 
·thÇme_
.
c_¡r
();

261 #ià
GTEST_OS_WINDOWS


262  
	g·thÇme_
.
Ëngth
() >= 3 &&

263 ((
Çme
[0] >= 'a' &&‚ame[0] <= 'z') ||

264 (
Çme
[0] >= 'A' &&‚ame[0] <= 'Z')) &&

265 
Çme
[1] == ':' &&

266 
IsP©hS•¬©Ü
(
Çme
[2]);

268  
IsP©hS•¬©Ü
(
Çme
[0]);

280 
FeP©h
 
	gFeP©h
::
G’”©eUniqueFeName
(cÚ¡ FeP©h& 
dœeùÜy
,

281 cÚ¡ 
FeP©h
& 
ba£_Çme
,

282 cÚ¡ * 
ex‹nsiÚ
) {

283 
FeP©h
 
	gfuÎ_·thÇme
;

284 
	gnumb”
 = 0;

286 
	gfuÎ_·thÇme
.
S‘
(
MakeFeName
(
dœeùÜy
, 
ba£_Çme
, 
numb”
++, 
ex‹nsiÚ
));

287 } 
	gfuÎ_·thÇme
.
FeOrDœeùÜyExi¡s
());

288  
	gfuÎ_·thÇme
;

294 
boŞ
 
	gFeP©h
::
IsDœeùÜy
() const {

295  !
·thÇme_
.
em±y
() &&

296 
IsP©hS•¬©Ü
(
·thÇme_
.
c_¡r
()[·thÇme_.
Ëngth
() - 1]);

302 
boŞ
 
	gFeP©h
::
C»©eDœeùÜ›sRecursiv–y
() const {

303 ià(!
this
->
IsDœeùÜy
()) {

304  
çl£
;

307 ià(
	g·thÇme_
.
Ëngth
(è=ğ0 || 
this
->
DœeùÜyExi¡s
()) {

308  
Œue
;

311 cÚ¡ 
FeP©h
 
·»Á
(
this
->
RemoveT¿šgP©hS•¬©Ü
().
RemoveFeName
());

312  
	g·»Á
.
C»©eDœeùÜ›sRecursiv–y
(è&& 
	gthis
->
C»©eFŞd”
();

319 
boŞ
 
	gFeP©h
::
C»©eFŞd”
() const {

320 #ià
GTEST_OS_WINDOWS_MOBILE


321 
FeP©h
 
»moved_£p
(
this
->
RemoveT¿šgP©hS•¬©Ü
());

322 
LPCWSTR
 
	gunicode
 = 
SŒšg
::
AnsiToUtf16
(
»moved_£p
.
c_¡r
());

323 
	g»suÉ
 = 
C»©eDœeùÜy
(
unicode
, 
nuÎ±r
) ? 0 : -1;

324 
	gd–‘e
 [] 
	gunicode
;

325 #–ià
GTEST_OS_WINDOWS


326 
	g»suÉ
 = 
_mkdœ
(
·thÇme_
.
c_¡r
());

327 #–ià
GTEST_OS_ESP8266
 || 
GTEST_OS_XTENSA


329 
	g»suÉ
 = 0;

331 
	g»suÉ
 = 
mkdœ
(
·thÇme_
.
c_¡r
(), 0777);

334 ià(
	g»suÉ
 == -1) {

335  
this
->
DœeùÜyExi¡s
();

337  
	gŒue
;

343 
FeP©h
 
	gFeP©h
::
RemoveT¿šgP©hS•¬©Ü
() const {

344  
IsDœeùÜy
()

345 ? 
FeP©h
(
·thÇme_
.
sub¡r
(0,…©hÇme_.
Ëngth
() - 1))

346 : *
this
;

352 
	gFeP©h
::
NÜm®ize
() {

353 autØ
out
 = 
·thÇme_
.
begš
();

355 cÚ¡ 
	gch¬aù”
 : 
·thÇme_
) {

356 ià(!
IsP©hS•¬©Ü
(
ch¬aù”
)) {

357 *(
out
++èğ
ch¬aù”
;

358 } ià(
	gout
 =ğ
·thÇme_
.
begš
(è|| *
¡d
::
´ev
(
out
è!ğ
kP©hS•¬©Ü
) {

359 *(
out
++èğ
kP©hS•¬©Ü
;

365 
	g·thÇme_
.
”a£
(
out
, 
·thÇme_
.
’d
());

	@third_party/googletest/googletest/src/gtest-internal-inl.h

34 #iâdeà
GOOGLETEST_SRC_GTEST_INTERNAL_INL_H_


35 
	#GOOGLETEST_SRC_GTEST_INTERNAL_INL_H_


	)

37 #iâdeà
_WIN32_WCE


38 
	~<”ºo.h
>

40 
	~<¡ddef.h
>

41 
	~<¡dlib.h
>

42 
	~<¡ršg.h
>

44 
	~<®gÜ™hm
>

45 
	~<c¡dšt
>

46 
	~<memÜy
>

47 
	~<¡ršg
>

48 
	~<veùÜ
>

50 
	~"g‹¡/š‹º®/g‹¡-pÜt.h
"

52 #ià
GTEST_CAN_STREAM_RESULTS_


53 
	~<¬·/š‘.h
>

54 
	~<Ãtdb.h
>

57 #ià
GTEST_OS_WINDOWS


58 
	~<wšdows.h
>

61 
	~"g‹¡/g‹¡.h
"

62 
	~"g‹¡/g‹¡-¥i.h
"

64 
GTEST_DISABLE_MSC_WARNINGS_PUSH_
(4251 \

67 
Çme¥aû
 
	g‹¡šg
 {

74 
GTEST_DECLARE_boŞ_
(
d—th_‹¡_u£_fÜk
);

76 
Çme¥aû
 
	gš‹º®
 {

80 
GTEST_API_
 cÚ¡ 
Ty³Id
 
kTe¡Ty³IdInGoogËTe¡
;

83 cÚ¡ 
	gkAlsoRunDi§bËdTe¡sFÏg
[] = "also_run_disabled_tests";

84 cÚ¡ 
	gkB»akOnFau»FÏg
[] = "break_on_failure";

85 cÚ¡ 
	gkC©chExû±iÚsFÏg
[] = "catch_exceptions";

86 cÚ¡ 
	gkCŞÜFÏg
[] = "color";

87 cÚ¡ 
	gkFaFa¡
[] = "fail_fast";

88 cÚ¡ 
	gkF‹rFÏg
[] = "filter";

89 cÚ¡ 
	gkLi¡Te¡sFÏg
[] = "list_tests";

90 cÚ¡ 
	gkOuutFÏg
[] = "output";

91 cÚ¡ 
	gkBr›fFÏg
[] = "brief";

92 cÚ¡ 
	gkPrštTimeFÏg
[] = "print_time";

93 cÚ¡ 
	gkPrštUTF8FÏg
[] = "print_utf8";

94 cÚ¡ 
	gkRªdomS“dFÏg
[] = "random_seed";

95 cÚ¡ 
	gkR•—tFÏg
[] = "repeat";

96 cÚ¡ 
	gkShufæeFÏg
[] = "shuffle";

97 cÚ¡ 
	gkSckT¿ûD•thFÏg
[] = "stack_trace_depth";

98 cÚ¡ 
	gkSŒ—mResuÉToFÏg
[] = "stream_result_to";

99 cÚ¡ 
	gkThrowOnFau»FÏg
[] = "throw_on_failure";

100 cÚ¡ 
	gkFÏgfeFÏg
[] = "flagfile";

103 cÚ¡ 
	gkMaxRªdomS“d
 = 99999;

107 
GTEST_API_
 
boŞ
 
g_h–p_æag
;

110 
GTEST_API_
 
TimeInMlis
 
G‘TimeInMlis
();

113 
GTEST_API_
 
boŞ
 
ShouldU£CŞÜ
(boŞ 
¡dout_is_‰y
);

116 
GTEST_API_
 
	g¡d
::
¡ršg
 
FÜm©TimeInMlisAsSecÚds
(
TimeInMlis
 
ms
);

122 
GTEST_API_
 
	g¡d
::
¡ršg
 
FÜm©EpochTimeInMlisAsIso8601
(
TimeInMlis
 
ms
);

128 
GTEST_API_
 
boŞ
 
P¬£IÁ32FÏg
(

129 cÚ¡ * 
¡r
, cÚ¡ * 
æag
, 
št32_t
* 
v®ue
);

133 
šlše
 
G‘RªdomS“dFromFÏg
(
št32_t
 
¿ndom_£ed_æag
) {

134 cÚ¡ 
	g¿w_£ed
 = (
¿ndom_£ed_æag
 == 0) ?

135 
¡©ic_ÿ¡
<>(
G‘TimeInMlis
()) :

136 
¡©ic_ÿ¡
<>(
¿ndom_£ed_æag
);

140 cÚ¡ 
	gnÜm®ized_£ed
 =

141 
¡©ic_ÿ¡
<>((
¿w_£ed
 - 1U) %

142 
¡©ic_ÿ¡
<>(
kMaxRªdomS“d
)) + 1;

143  
	gnÜm®ized_£ed
;

149 
šlše
 
G‘NextRªdomS“d
(
£ed
) {

150 
GTEST_CHECK_
(1 <ğ
£ed
 && s“d <ğ
kMaxRªdomS“d
)

151 << "Inv®id„ªdom s“d " << 
£ed
 << " - must be in [1, "

152 << 
kMaxRªdomS“d
 << "].";

153 cÚ¡ 
	gÃxt_£ed
 = 
£ed
 + 1;

154  (
	gÃxt_£ed
 > 
	gkMaxRªdomS“d
è? 1 : 
Ãxt_£ed
;

159 şas 
	cGTe¡FÏgSav”
 {

160 
	gpublic
:

162 
GTe¡FÏgSav”
() {

163 
®so_run_di§bËd_‹¡s_
 = 
GTEST_FLAG
(
®so_run_di§bËd_‹¡s
);

164 
	gb»ak_Ú_çu»_
 = 
GTEST_FLAG
(
b»ak_Ú_çu»
);

165 
	gÿtch_exû±iÚs_
 = 
GTEST_FLAG
(
ÿtch_exû±iÚs
);

166 
	gcŞÜ_
 = 
GTEST_FLAG
(
cŞÜ
);

167 
	gd—th_‹¡_¡yË_
 = 
GTEST_FLAG
(
d—th_‹¡_¡yË
);

168 
	gd—th_‹¡_u£_fÜk_
 = 
GTEST_FLAG
(
d—th_‹¡_u£_fÜk
);

169 
	gç_ç¡_
 = 
GTEST_FLAG
(
ç_ç¡
);

170 
	gf‹r_
 = 
GTEST_FLAG
(
f‹r
);

171 
	gš‹º®_run_d—th_‹¡_
 = 
GTEST_FLAG
(
š‹º®_run_d—th_‹¡
);

172 
	gli¡_‹¡s_
 = 
GTEST_FLAG
(
li¡_‹¡s
);

173 
	gouut_
 = 
GTEST_FLAG
(
ouut
);

174 
	gbr›f_
 = 
GTEST_FLAG
(
br›f
);

175 
	g´št_time_
 = 
GTEST_FLAG
(
´št_time
);

176 
	g´št_utf8_
 = 
GTEST_FLAG
(
´št_utf8
);

177 
	g¿ndom_£ed_
 = 
GTEST_FLAG
(
¿ndom_£ed
);

178 
	g»³©_
 = 
GTEST_FLAG
(
»³©
);

179 
	gshufæe_
 = 
GTEST_FLAG
(
shufæe
);

180 
	g¡ack_Œaû_d•th_
 = 
GTEST_FLAG
(
¡ack_Œaû_d•th
);

181 
	g¡»am_»suÉ_to_
 = 
GTEST_FLAG
(
¡»am_»suÉ_to
);

182 
	gthrow_Ú_çu»_
 = 
GTEST_FLAG
(
throw_Ú_çu»
);

186 ~
GTe¡FÏgSav”
() {

187 
GTEST_FLAG
(
®so_run_di§bËd_‹¡s
èğ
®so_run_di§bËd_‹¡s_
;

188 
GTEST_FLAG
(
b»ak_Ú_çu»
èğ
b»ak_Ú_çu»_
;

189 
GTEST_FLAG
(
ÿtch_exû±iÚs
èğ
ÿtch_exû±iÚs_
;

190 
GTEST_FLAG
(
cŞÜ
èğ
cŞÜ_
;

191 
GTEST_FLAG
(
d—th_‹¡_¡yË
èğ
d—th_‹¡_¡yË_
;

192 
GTEST_FLAG
(
d—th_‹¡_u£_fÜk
èğ
d—th_‹¡_u£_fÜk_
;

193 
GTEST_FLAG
(
f‹r
èğ
f‹r_
;

194 
GTEST_FLAG
(
ç_ç¡
èğ
ç_ç¡_
;

195 
GTEST_FLAG
(
š‹º®_run_d—th_‹¡
èğ
š‹º®_run_d—th_‹¡_
;

196 
GTEST_FLAG
(
li¡_‹¡s
èğ
li¡_‹¡s_
;

197 
GTEST_FLAG
(
ouut
èğ
ouut_
;

198 
GTEST_FLAG
(
br›f
èğ
br›f_
;

199 
GTEST_FLAG
(
´št_time
èğ
´št_time_
;

200 
GTEST_FLAG
(
´št_utf8
èğ
´št_utf8_
;

201 
GTEST_FLAG
(
¿ndom_£ed
èğ
¿ndom_£ed_
;

202 
GTEST_FLAG
(
»³©
èğ
»³©_
;

203 
GTEST_FLAG
(
shufæe
èğ
shufæe_
;

204 
GTEST_FLAG
(
¡ack_Œaû_d•th
èğ
¡ack_Œaû_d•th_
;

205 
GTEST_FLAG
(
¡»am_»suÉ_to
èğ
¡»am_»suÉ_to_
;

206 
GTEST_FLAG
(
throw_Ú_çu»
èğ
throw_Ú_çu»_
;

209 
	g´iv©e
:

211 
boŞ
 
®so_run_di§bËd_‹¡s_
;

212 
boŞ
 
	gb»ak_Ú_çu»_
;

213 
boŞ
 
	gÿtch_exû±iÚs_
;

214 
	g¡d
::
¡ršg
 
cŞÜ_
;

215 
	g¡d
::
¡ršg
 
d—th_‹¡_¡yË_
;

216 
boŞ
 
	gd—th_‹¡_u£_fÜk_
;

217 
boŞ
 
	gç_ç¡_
;

218 
	g¡d
::
¡ršg
 
f‹r_
;

219 
	g¡d
::
¡ršg
 
š‹º®_run_d—th_‹¡_
;

220 
boŞ
 
	gli¡_‹¡s_
;

221 
	g¡d
::
¡ršg
 
ouut_
;

222 
boŞ
 
	gbr›f_
;

223 
boŞ
 
	g´št_time_
;

224 
boŞ
 
	g´št_utf8_
;

225 
št32_t
 
	g¿ndom_£ed_
;

226 
št32_t
 
	g»³©_
;

227 
boŞ
 
	gshufæe_
;

228 
št32_t
 
	g¡ack_Œaû_d•th_
;

229 
	g¡d
::
¡ršg
 
¡»am_»suÉ_to_
;

230 
boŞ
 
	gthrow_Ú_çu»_
;

231 } 
	gGTEST_ATTRIBUTE_UNUSED_
;

239 
GTEST_API_
 
	g¡d
::
¡ršg
 
CodePoštToUtf8
(
ušt32_t
 
code_pošt
);

254 
GTEST_API_
 
	g¡d
::
¡ršg
 
WideSŒšgToUtf8
(cÚ¡ 
wch¬_t
* 
¡r
, 
num_ch¬s
);

260 
Wr™eToSh¬dStusFeIfN“ded
();

268 
GTEST_API_
 
boŞ
 
ShouldSh¬d
(cÚ¡ * 
tÙ®_sh¬ds_¡r
,

269 cÚ¡ * 
sh¬d_šdex_¡r
,

270 
boŞ
 
š_sub´oûss_fÜ_d—th_‹¡
);

275 
GTEST_API_
 
št32_t
 
IÁ32FromEnvOrD›
(cÚ¡ * 
’v_v¬
, iÁ32_ˆ
deçuÉ_v®
);

281 
GTEST_API_
 
boŞ
 
ShouldRunTe¡OnSh¬d
(

282 
tÙ®_sh¬ds
, 
sh¬d_šdex
, 
‹¡_id
);

288 
	g‹m¶©e
 <
şass
 
	gCÚš”
, 
ty³Çme
 
	gP»diÿ‹
>

289 
šlše
 
CouÁIf
(cÚ¡ 
CÚš”
& 
c
, 
P»diÿ‹
 
´ediÿ‹
) {

292 
	gcouÁ
 = 0;

293 
ty³Çme
 
	gCÚš”
::
cÚ¡_™”©Ü
 
™
 = 
c
.
begš
(); 
	g™
 !ğc.
’d
(); ++it) {

294 ià(
´ediÿ‹
(*
™
))

295 ++
	gcouÁ
;

297  
	gcouÁ
;

301 
	g‹m¶©e
 <
şass
 
	gCÚš”
, 
ty³Çme
 
	gFunùÜ
>

302 
FÜEach
(cÚ¡ 
CÚš”
& 
c
, 
FunùÜ
 
funùÜ
) {

303 
	g¡d
::
fÜ_—ch
(
c
.
begš
(), c.
’d
(), 
funùÜ
);

308 
	g‹m¶©e
 <
ty³Çme
 
	gE
>

309 
šlše
 
E
 
G‘EËm’tOr
(cÚ¡ 
¡d
::
veùÜ
<E>& 
v
, 
i
, E 
deçuÉ_v®ue
) {

310  (
	gi
 < 0 || i >ğ
¡©ic_ÿ¡
<>(
v
.
size
())è? 
deçuÉ_v®ue


311 : 
v
[
¡©ic_ÿ¡
<
size_t
>(
i
)];

318 
	g‹m¶©e
 <
ty³Çme
 
	gE
>

319 
ShufæeRªge
(
š‹º®
::
Rªdom
* 
¿ndom
, 
begš
, 
’d
,

320 
¡d
::
veùÜ
<
E
>* 
v
) {

321 cÚ¡ 
size
 = 
¡©ic_ÿ¡
<>(
v
->size());

322 
GTEST_CHECK_
(0 <ğ
begš
 && begš <ğ
size
)

323 << "Inv®id shufæ¿ng¡¬ˆ" << 
begš
 << ": must be in„ange [0, "

324 << 
size
 << "].";

325 
GTEST_CHECK_
(
begš
 <ğ
’d
 &&ƒnd <ğ
size
)

326 << "Inv®id shufæ¿ngfšish " << 
’d
 << ": must be in„ange ["

327 << 
begš
 << ", " << 
size
 << "].";

331 
	g¿nge_width
 = 
’d
 - 
begš
;„ange_width >= 2;„ange_width--) {

332 cÚ¡ 
	gÏ¡_š_¿nge
 = 
begš
 + 
¿nge_width
 - 1;

333 cÚ¡ 
	g£Ëùed
 =

334 
begš
 +

335 
¡©ic_ÿ¡
<>(
¿ndom
->
G’”©e
(¡©ic_ÿ¡<
ušt32_t
>(
¿nge_width
)));

336 
	g¡d
::
sw­
((*
v
)[
¡©ic_ÿ¡
<
size_t
>(
£Ëùed
)],

337 (*
v
)[
¡©ic_ÿ¡
<
size_t
>(
Ï¡_š_¿nge
)]);

342 
	g‹m¶©e
 <
ty³Çme
 
	gE
>

343 
šlše
 
Shufæe
(
š‹º®
::
Rªdom
* 
¿ndom
, 
¡d
::
veùÜ
<
E
>* 
v
) {

344 
ShufæeRªge
(
¿ndom
, 0, 
¡©ic_ÿ¡
<>(
v
->
size
()), v);

349 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

350 
D–‘e
(
T
* 
x
) {

351 
d–‘e
 
	gx
;

357 şas 
	cTe¡Prİ”tyKeyIs
 {

358 
	gpublic
:

362 
ex¶ic™
 
Te¡Prİ”tyKeyIs
(cÚ¡ 
¡d
::
¡ršg
& 
key
è: 
key_
(key) {}

365 
boŞ
 
İ”©Ü
()(cÚ¡ 
Te¡Prİ”ty
& 
‹¡_´İ”ty
) const {

366  
‹¡_´İ”ty
.
key
(è=ğ
key_
;

369 
	g´iv©e
:

370 
¡d
::
¡ršg
 
key_
;

383 şas 
	cGTEST_API_
 
	gUn™Te¡O±iÚs
 {

384 
	gpublic
:

388 
¡d
::
¡ršg
 
G‘OuutFÜm©
();

393 
	g¡d
::
¡ršg
 
G‘AbsŞu‹P©hToOuutFe
();

399 
boŞ
 
F‹rM©chesTe¡
(cÚ¡ 
¡d
::
¡ršg
& 
‹¡_su™e_Çme
,

400 cÚ¡ 
¡d
::
¡ršg
& 
‹¡_Çme
);

402 #ià
GTEST_OS_WINDOWS


408 
GTe¡ShouldProûssSEH
(
DWORD
 
exû±iÚ_code
);

413 
boŞ
 
M©chesF‹r
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
, cÚ¡ * 
f‹r
);

418 
GTEST_API_
 
FeP©h
 
G‘Cu¼’tExecubËName
();

421 şas 
	cOsSckT¿ûG‘‹rIÁ”çû
 {

422 
	gpublic
:

423 
OsSckT¿ûG‘‹rIÁ”çû
() {}

424 
vœtu®
 ~
OsSckT¿ûG‘‹rIÁ”çû
() {}

432 
vœtu®
 
¡d
::
¡ršg
 
Cu¼’tSckT¿û
(
max_d•th
, 
sk_couÁ
) = 0;

437 
vœtu®
 
UpÚL—všgGTe¡
() = 0;

441 cÚ¡ * cÚ¡ 
	gkElidedF¿mesM¬k”
;

443 
	g´iv©e
:

444 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
OsSckT¿ûG‘‹rIÁ”çû
);

448 şas 
	cOsSckT¿ûG‘‹r
 : 
public
 
OsSckT¿ûG‘‹rIÁ”çû
 {

449 
public
:

450 
OsSckT¿ûG‘‹r
() {}

452 
¡d
::
¡ršg
 
Cu¼’tSckT¿û
(
max_d•th
, 
sk_couÁ
è
	gov”ride
;

453 
UpÚL—všgGTe¡
(è
	gov”ride
;

455 
	g´iv©e
:

456 #ià
GTEST_HAS_ABSL


457 
Mu‹x
 
mu‹x_
;

463 * 
	gÿÎ”_äame_
 = 
nuÎ±r
;

466 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
OsSckT¿ûG‘‹r
);

470 
	sT¿ûInfo
 {

471 cÚ¡ * 
	gfe
;

472 
	glše
;

473 
	g¡d
::
¡ršg
 
mes§ge
;

478 şas 
	cDeçuÉGlob®Te¡P¬tResuÉR•Ü‹r


479 : 
public
 
Te¡P¬tResuÉR•Ü‹rIÁ”çû
 {

480 
public
:

481 
ex¶ic™
 
DeçuÉGlob®Te¡P¬tResuÉR•Ü‹r
(
Un™Te¡Im¶
* 
un™_‹¡
);

484 
R•ÜtTe¡P¬tResuÉ
(cÚ¡ 
Te¡P¬tResuÉ
& 
»suÉ
è
	gov”ride
;

486 
	g´iv©e
:

487 
Un™Te¡Im¶
* cÚ¡ 
un™_‹¡_
;

489 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
DeçuÉGlob®Te¡P¬tResuÉR•Ü‹r
);

494 şas 
	cDeçuÉP”Th»adTe¡P¬tResuÉR•Ü‹r


495 : 
public
 
Te¡P¬tResuÉR•Ü‹rIÁ”çû
 {

496 
public
:

497 
ex¶ic™
 
DeçuÉP”Th»adTe¡P¬tResuÉR•Ü‹r
(
Un™Te¡Im¶
* 
un™_‹¡
);

500 
R•ÜtTe¡P¬tResuÉ
(cÚ¡ 
Te¡P¬tResuÉ
& 
»suÉ
è
	gov”ride
;

502 
	g´iv©e
:

503 
Un™Te¡Im¶
* cÚ¡ 
un™_‹¡_
;

505 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
DeçuÉP”Th»adTe¡P¬tResuÉR•Ü‹r
);

512 şas 
	cGTEST_API_
 
	gUn™Te¡Im¶
 {

513 
	gpublic
:

514 
ex¶ic™
 
Un™Te¡Im¶
(
Un™Te¡
* 
·»Á
);

515 
	gvœtu®
 ~
Un™Te¡Im¶
();

525 
Te¡P¬tResuÉR•Ü‹rIÁ”çû
* 
G‘Glob®Te¡P¬tResuÉR•Ü‹r
();

528 
S‘Glob®Te¡P¬tResuÉR•Ü‹r
(

529 
Te¡P¬tResuÉR•Ü‹rIÁ”çû
* 
»pÜ‹r
);

532 
Te¡P¬tResuÉR•Ü‹rIÁ”çû
* 
G‘Te¡P¬tResuÉR•Ü‹rFÜCu¼’tTh»ad
();

535 
S‘Te¡P¬tResuÉR•Ü‹rFÜCu¼’tTh»ad
(

536 
Te¡P¬tResuÉR•Ü‹rIÁ”çû
* 
»pÜ‹r
);

539 
sucûssful_‹¡_su™e_couÁ
() const;

542 
çed_‹¡_su™e_couÁ
() const;

545 
tÙ®_‹¡_su™e_couÁ
() const;

549 
‹¡_su™e_to_run_couÁ
() const;

552 
sucûssful_‹¡_couÁ
() const;

555 
sk³d_‹¡_couÁ
() const;

558 
çed_‹¡_couÁ
() const;

561 
»pÜbË_di§bËd_‹¡_couÁ
() const;

564 
di§bËd_‹¡_couÁ
() const;

567 
»pÜbË_‹¡_couÁ
() const;

570 
tÙ®_‹¡_couÁ
() const;

573 
‹¡_to_run_couÁ
() const;

577 
TimeInMlis
 
¡¬t_time¡amp
(ècÚ¡ {  
	g¡¬t_time¡amp_
; }

580 
TimeInMlis
 
–­£d_time
(ècÚ¡ {  
	g–­£d_time_
; }

584 
boŞ
 
Pas£d
(ècÚ¡ {  !
Faed
(); }

588 
boŞ
 
Faed
() const {

589  
çed_‹¡_su™e_couÁ
(è> 0 || 
ad_hoc_‹¡_»suÉ
()->
Faed
();

594 cÚ¡ 
Te¡Su™e
* 
G‘Te¡Su™e
(
i
) const {

595 cÚ¡ 
	gšdex
 = 
G‘EËm’tOr
(
‹¡_su™e_šdiûs_
, 
i
, -1);

596  
	gšdex
 < 0 ? 
	gnuÎ±r
 : 
‹¡_su™es_
[
¡©ic_ÿ¡
<
size_t
>(
i
)];

600 #iâdeà
GTEST_REMOVE_LEGACY_TEST_CASEAPI_


601 cÚ¡ 
Te¡Ca£
* 
G‘Te¡Ca£
(
i
ècÚ¡ {  
G‘Te¡Su™e
(i); }

606 
Te¡Su™e
* 
G‘MubËSu™eCa£
(
i
) {

607 cÚ¡ 
	gšdex
 = 
G‘EËm’tOr
(
‹¡_su™e_šdiûs_
, 
i
, -1);

608  
	gšdex
 < 0 ? 
	gnuÎ±r
 : 
‹¡_su™es_
[
¡©ic_ÿ¡
<
size_t
>(
šdex
)];

612 
Te¡Ev’tLi¡’”s
* 
li¡’”s
(è{  &
	gli¡’”s_
; }

616 
Te¡ResuÉ
* 
cu¼’t_‹¡_»suÉ
();

619 cÚ¡ 
Te¡ResuÉ
* 
ad_hoc_‹¡_»suÉ
(ècÚ¡ {  &
	gad_hoc_‹¡_»suÉ_
; }

626 
£t_os_¡ack_Œaû_g‘‹r
(
OsSckT¿ûG‘‹rIÁ”çû
* 
g‘‹r
);

631 
OsSckT¿ûG‘‹rIÁ”çû
* 
os_¡ack_Œaû_g‘‹r
();

643 
	g¡d
::
¡ršg
 
Cu¼’tOsSckT¿ûExû±Tİ
(
sk_couÁ
è
GTEST_NO_INLINE_
;

655 
Te¡Su™e
* 
G‘Te¡Su™e
(cÚ¡ * 
‹¡_su™e_Çme
, cÚ¡ * 
ty³_·¿m
,

656 
š‹º®
::
S‘UpTe¡Su™eFunc
 
£t_up_tc
,

657 
š‹º®
::
T—rDownTe¡Su™eFunc
 
‹¬_down_tc
);

660 #iâdeà
GTEST_REMOVE_LEGACY_TEST_CASEAPI_


661 
Te¡Ca£
* 
G‘Te¡Ca£
(cÚ¡ * 
‹¡_ÿ£_Çme
, cÚ¡ * 
ty³_·¿m
,

662 
š‹º®
::
S‘UpTe¡Su™eFunc
 
£t_up_tc
,

663 
š‹º®
::
T—rDownTe¡Su™eFunc
 
‹¬_down_tc
) {

664  
G‘Te¡Su™e
(
‹¡_ÿ£_Çme
, 
ty³_·¿m
, 
£t_up_tc
, 
‹¬_down_tc
);

675 
AddTe¡Info
(
š‹º®
::
S‘UpTe¡Su™eFunc
 
£t_up_tc
,

676 
š‹º®
::
T—rDownTe¡Su™eFunc
 
‹¬_down_tc
,

677 
Te¡Info
* 
‹¡_šfo
) {

678 #ià
GTEST_HAS_DEATH_TEST


686 ià(
	gÜigš®_wÜkšg_dœ_
.
IsEm±y
()) {

687 
	gÜigš®_wÜkšg_dœ_
.
S‘
(
FeP©h
::
G‘Cu¼’tDœ
());

688 
GTEST_CHECK_
(!
Üigš®_wÜkšg_dœ_
.
IsEm±y
())

693 
G‘Te¡Su™e
(
‹¡_šfo
->
‹¡_su™e_Çme
(),e¡_šfo->
ty³_·¿m
(),

694 
£t_up_tc
, 
‹¬_down_tc
)

695 ->
AddTe¡Info
(
‹¡_šfo
);

700 
	gš‹º®
::
P¬am‘”izedTe¡Su™eRegi¡ry
& 
·¿m‘”ized_‹¡_»gi¡ry
() {

701  
·¿m‘”ized_‹¡_»gi¡ry_
;

704 
	g¡d
::
£t
<
¡d
::
¡ršg
>* 
ignÜed_·¿m‘”ized_‹¡_su™es
() {

705  &
ignÜed_·¿m‘”ized_‹¡_su™es_
;

710 
	gš‹º®
::
Ty³P¬am‘”izedTe¡Su™eRegi¡ry
&

711 
ty³_·¿m‘”ized_‹¡_»gi¡ry
() {

712  
ty³_·¿m‘”ized_‹¡_»gi¡ry_
;

716 
£t_cu¼’t_‹¡_su™e
(
Te¡Su™e
* 
a_cu¼’t_‹¡_su™e
) {

717 
	gcu¼’t_‹¡_su™e_
 = 
a_cu¼’t_‹¡_su™e
;

723 
£t_cu¼’t_‹¡_šfo
(
Te¡Info
* 
a_cu¼’t_‹¡_šfo
) {

724 
	gcu¼’t_‹¡_šfo_
 = 
a_cu¼’t_‹¡_šfo
;

733 
Regi¡”P¬am‘”izedTe¡s
();

739 
boŞ
 
RunAÎTe¡s
();

742 
CË¬NÚAdHocTe¡ResuÉ
() {

743 
FÜEach
(
‹¡_su™es_
, 
Te¡Su™e
::
CË¬Te¡Su™eResuÉ
);

747 
CË¬AdHocTe¡ResuÉ
() {

748 
	gad_hoc_‹¡_»suÉ_
.
CË¬
();

755 
RecÜdPrİ”ty
(cÚ¡ 
Te¡Prİ”ty
& 
‹¡_´İ”ty
);

757 
	eR—ùiÚToSh¬dšg
 {

758 
	gHONOR_SHARDING_PROTOCOL
,

759 
	gIGNORE_SHARDING_PROTOCOL


768 
F‹rTe¡s
(
R—ùiÚToSh¬dšg
 
sh¬d_‹¡s
);

771 
Li¡Te¡sM©chšgF‹r
();

773 cÚ¡ 
Te¡Su™e
* 
cu¼’t_‹¡_su™e
(ècÚ¡ {  
	gcu¼’t_‹¡_su™e_
; }

774 
Te¡Info
* 
cu¼’t_‹¡_šfo
(è{  
	gcu¼’t_‹¡_šfo_
; }

775 cÚ¡ 
Te¡Info
* 
cu¼’t_‹¡_šfo
(ècÚ¡ {  
	gcu¼’t_‹¡_šfo_
; }

779 
	g¡d
::
veùÜ
<
EnvœÚm’t
*>& 
’vœÚm’ts
(è{  
’vœÚm’ts_
; }

782 
	g¡d
::
veùÜ
<
T¿ûInfo
>& 
g‹¡_Œaû_¡ack
() {

783  *(
g‹¡_Œaû_¡ack_
.
poš‹r
());

785 cÚ¡ 
	g¡d
::
veùÜ
<
T¿ûInfo
>& 
g‹¡_Œaû_¡ack
() const {

786  
g‹¡_Œaû_¡ack_
.
g‘
();

789 #ià
GTEST_HAS_DEATH_TEST


790 
In™D—thTe¡Sub´oûssCÚŒŞInfo
() {

791 
	gš‹º®_run_d—th_‹¡_æag_
.
»£t
(
P¬£IÁ”ÇlRunD—thTe¡FÏg
());

797 cÚ¡ 
IÁ”ÇlRunD—thTe¡FÏg
* 
š‹º®_run_d—th_‹¡_æag
() const {

798  
	gš‹º®_run_d—th_‹¡_æag_
.
g‘
();

802 
	gš‹º®
::
D—thTe¡FaùÜy
* 
d—th_‹¡_çùÜy
() {

803  
d—th_‹¡_çùÜy_
.
g‘
();

806 
Suµ»ssTe¡Ev’tsIfInSub´oûss
();

808 
ä›nd
 
şass
 
	gR•ÏûD—thTe¡FaùÜy
;

813 
CÚfigu»XmlOuut
();

815 #ià
GTEST_CAN_STREAM_RESULTS_


818 
CÚfigu»SŒ—mšgOuut
();

826 
Po¡FÏgP¬sšgIn™
();

829 
¿ndom_£ed
(ècÚ¡ {  
	g¿ndom_£ed_
; }

832 
	gš‹º®
::
Rªdom
* 
¿ndom
(è{  &
¿ndom_
; }

836 
ShufæeTe¡s
();

839 
UnshufæeTe¡s
();

843 
boŞ
 
ÿtch_exû±iÚs
(ècÚ¡ {  
	gÿtch_exû±iÚs_
; }

845 
	g´iv©e
:

846 
ä›nd
 
şass
 ::
‹¡šg
::
Un™Te¡
;

850 
£t_ÿtch_exû±iÚs
(
boŞ
 
v®ue
è{ 
	gÿtch_exû±iÚs_
 = value; }

853 
Un™Te¡
* cÚ¡ 
	g·»Á_
;

857 
	gš‹º®
::
FeP©h
 
Üigš®_wÜkšg_dœ_
;

860 
DeçuÉGlob®Te¡P¬tResuÉR•Ü‹r
 
	gdeçuÉ_glob®_‹¡_·¹_»suÉ_»pÜ‹r_
;

861 
DeçuÉP”Th»adTe¡P¬tResuÉR•Ü‹r


862 
	gdeçuÉ_³r_th»ad_‹¡_·¹_»suÉ_»pÜ‹r_
;

865 
Te¡P¬tResuÉR•Ü‹rIÁ”çû
* 
	gglob®_‹¡_·¹_»suÉ_»pÙ”_
;

868 
	gš‹º®
::
Mu‹x
 
glob®_‹¡_·¹_»suÉ_»pÜ‹r_mu‹x_
;

871 
	gš‹º®
::
Th»adLoÿl
<
Te¡P¬tResuÉR•Ü‹rIÁ”çû
*>

872 
³r_th»ad_‹¡_·¹_»suÉ_»pÜ‹r_
;

876 
	g¡d
::
veùÜ
<
EnvœÚm’t
*> 
’vœÚm’ts_
;

880 
	g¡d
::
veùÜ
<
Te¡Su™e
*> 
‹¡_su™es_
;

886 
	g¡d
::
veùÜ
<> 
‹¡_su™e_šdiûs_
;

890 
	gš‹º®
::
P¬am‘”izedTe¡Su™eRegi¡ry
 
·¿m‘”ized_‹¡_»gi¡ry_
;

891 
	gš‹º®
::
Ty³P¬am‘”izedTe¡Su™eRegi¡ry


892 
ty³_·¿m‘”ized_‹¡_»gi¡ry_
;

896 
	g¡d
::
£t
<
¡d
::
¡ršg
> 
ignÜed_·¿m‘”ized_‹¡_su™es_
;

899 
boŞ
 
	g·¿m‘”ized_‹¡s_»gi¡”ed_
;

902 
	gÏ¡_d—th_‹¡_su™e_
;

908 
Te¡Su™e
* 
	gcu¼’t_‹¡_su™e_
;

914 
Te¡Info
* 
	gcu¼’t_‹¡_šfo_
;

924 
Te¡ResuÉ
 
	gad_hoc_‹¡_»suÉ_
;

928 
Te¡Ev’tLi¡’”s
 
	gli¡’”s_
;

934 
OsSckT¿ûG‘‹rIÁ”çû
* 
	gos_¡ack_Œaû_g‘‹r_
;

937 
boŞ
 
	gpo¡_æag_·r£_š™_³rfÜmed_
;

940 
	g¿ndom_£ed_
;

943 
	gš‹º®
::
Rªdom
 
¿ndom_
;

947 
TimeInMlis
 
	g¡¬t_time¡amp_
;

950 
TimeInMlis
 
	g–­£d_time_
;

952 #ià
GTEST_HAS_DEATH_TEST


955 
	g¡d
::
unique_±r
<
IÁ”ÇlRunD—thTe¡FÏg
> 
š‹º®_run_d—th_‹¡_æag_
;

956 
	g¡d
::
unique_±r
<
š‹º®
::
D—thTe¡FaùÜy
> 
d—th_‹¡_çùÜy_
;

960 
	gš‹º®
::
Th»adLoÿl
<
¡d
::
veùÜ
<
T¿ûInfo
> > 
g‹¡_Œaû_¡ack_
;

964 
boŞ
 
	gÿtch_exû±iÚs_
;

966 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
Un™Te¡Im¶
);

971 
šlše
 
Un™Te¡Im¶
* 
G‘Un™Te¡Im¶
() {

972  
	gUn™Te¡
::
G‘In¡ªû
()->
im¶
();

975 #ià
GTEST_USES_SIMPLE_RE


979 
GTEST_API_
 
boŞ
 
IsInS‘
(
ch
, cÚ¡ * 
¡r
);

980 
GTEST_API_
 
boŞ
 
IsAsciiDig™
(
ch
);

981 
GTEST_API_
 
boŞ
 
IsAsciiPunù
(
ch
);

982 
GTEST_API_
 
boŞ
 
IsR•—t
(
ch
);

983 
GTEST_API_
 
boŞ
 
IsAsciiWh™eS·û
(
ch
);

984 
GTEST_API_
 
boŞ
 
IsAsciiWÜdCh¬
(
ch
);

985 
GTEST_API_
 
boŞ
 
IsV®idEsÿ³
(
ch
);

986 
GTEST_API_
 
boŞ
 
AtomM©chesCh¬
(boŞ 
esÿ³d
, 
·‰”n
, 
ch
);

987 
GTEST_API_
 
boŞ
 
V®id©eRegex
(cÚ¡ * 
»gex
);

988 
GTEST_API_
 
boŞ
 
M©chRegexAtH—d
(cÚ¡ * 
»gex
, cÚ¡ * 
¡r
);

989 
GTEST_API_
 
boŞ
 
M©chR•‘™iÚAndRegexAtH—d
(

990 
boŞ
 
esÿ³d
, 
ch
, 
»³©
, cÚ¡ * 
»gex
, cÚ¡ * 
¡r
);

991 
GTEST_API_
 
boŞ
 
M©chRegexAnywh”e
(cÚ¡ * 
»gex
, cÚ¡ * 
¡r
);

997 
GTEST_API_
 
P¬£GoogËTe¡FÏgsOÆy
(* 
¬gc
, ** 
¬gv
);

998 
GTEST_API_
 
P¬£GoogËTe¡FÏgsOÆy
(* 
¬gc
, 
wch¬_t
** 
¬gv
);

1000 #ià
GTEST_HAS_DEATH_TEST


1004 
GTEST_API_
 
	g¡d
::
¡ršg
 
G‘La¡E¼noDesütiÚ
();

1010 
	g‹m¶©e
 <
ty³Çme
 
	gIÁeg”
>

1011 
boŞ
 
P¬£N©u¿lNumb”
(cÚ¡ ::
¡d
::
¡ršg
& 
¡r
, 
IÁeg”
* 
numb”
) {

1015 ià(
	g¡r
.
em±y
(è|| !
IsDig™
(
¡r
[0])) {

1016  
	gçl£
;

1018 
	g”ºo
 = 0;

1020 * 
	g’d
;

1023 
usšg
 
	gBigge¡CÚv”tibË
 = ;

1025 cÚ¡ 
Bigge¡CÚv”tibË
 
	g·r£d
 = 
¡¹ouÎ
(
¡r
.
c_¡r
(), &
’d
, 10);

1026 cÚ¡ 
boŞ
 
	g·r£_sucûss
 = *
’d
 =ğ'\0' && 
”ºo
 == 0;

1028 
GTEST_CHECK_
((
IÁeg”
è<ğ(
·r£d
));

1030 cÚ¡ 
IÁeg”
 
	g»suÉ
 = 
¡©ic_ÿ¡
<IÁeg”>(
·r£d
);

1031 ià(
	g·r£_sucûss
 && 
	g¡©ic_ÿ¡
<
	gBigge¡CÚv”tibË
>(
	g»suÉ
è=ğ
·r£d
) {

1032 *
numb”
 = 
»suÉ
;

1033  
	gŒue
;

1035  
	gçl£
;

1045 şas 
	cTe¡ResuÉAcûssÜ
 {

1046 
	gpublic
:

1047 
RecÜdPrİ”ty
(
Te¡ResuÉ
* 
‹¡_»suÉ
,

1048 cÚ¡ 
¡d
::
¡ršg
& 
xml_–em’t
,

1049 cÚ¡ 
Te¡Prİ”ty
& 
´İ”ty
) {

1050 
	g‹¡_»suÉ
->
RecÜdPrİ”ty
(
xml_–em’t
, 
´İ”ty
);

1053 
CË¬Te¡P¬tResuÉs
(
Te¡ResuÉ
* 
‹¡_»suÉ
) {

1054 
	g‹¡_»suÉ
->
CË¬Te¡P¬tResuÉs
();

1057 cÚ¡ 
	g¡d
::
veùÜ
<
‹¡šg
::
Te¡P¬tResuÉ
>& 
‹¡_·¹_»suÉs
(

1058 cÚ¡ 
Te¡ResuÉ
& 
‹¡_»suÉ
) {

1059  
‹¡_»suÉ
.
‹¡_·¹_»suÉs
();

1063 #ià
GTEST_CAN_STREAM_RESULTS_


1066 şas 
	cSŒ—mšgLi¡’”
 : 
public
 
Em±yTe¡Ev’tLi¡’”
 {

1067 
public
:

1069 şas 
	cAb¡¿ùSock‘Wr™”
 {

1070 
public
:

1071 
vœtu®
 ~
Ab¡¿ùSock‘Wr™”
() {}

1074 
vœtu®
 
S’d
(cÚ¡ 
¡d
::
¡ršg
& 
mes§ge
) = 0;

1077 
vœtu®
 
Clo£CÚÃùiÚ
() {}

1080 
S’dLn
(cÚ¡ 
¡d
::
¡ršg
& 
mes§ge
è{ 
S’d
(message + "\n"); }

1084 şas 
	cSock‘Wr™”
 : 
public
 
Ab¡¿ùSock‘Wr™”
 {

1085 
public
:

1086 
Sock‘Wr™”
(cÚ¡ 
¡d
::
¡ršg
& 
ho¡
, cÚ¡ std::¡ršg& 
pÜt
)

1087 : 
sockfd_
(-1), 
ho¡_Çme_
(
ho¡
), 
pÜt_num_
(
pÜt
) {

1088 
MakeCÚÃùiÚ
();

1091 ~
Sock‘Wr™”
(è
	gov”ride
 {

1092 ià(
	gsockfd_
 != -1)

1093 
Clo£CÚÃùiÚ
();

1097 
S’d
(cÚ¡ 
¡d
::
¡ršg
& 
mes§ge
è
ov”ride
 {

1098 
GTEST_CHECK_
(
sockfd_
 != -1)

1101 cÚ¡‡utØ
	gËn
 = 
¡©ic_ÿ¡
<
size_t
>(
mes§ge
.
Ëngth
());

1102 ià(
wr™e
(
sockfd_
, 
mes§ge
.
c_¡r
(), 
Ën
è!ğ
¡©ic_ÿ¡
<
ssize_t
>(len)) {

1103 
GTEST_LOG_
(
WARNING
)

1105 << 
ho¡_Çme_
 << ":" << 
pÜt_num_
;

1109 
	g´iv©e
:

1111 
MakeCÚÃùiÚ
();

1114 
Clo£CÚÃùiÚ
(è
	gov”ride
 {

1115 
GTEST_CHECK_
(
sockfd_
 != -1)

1118 
şo£
(
sockfd_
);

1119 
	gsockfd_
 = -1;

1122 
	gsockfd_
;

1123 cÚ¡ 
	g¡d
::
¡ršg
 
ho¡_Çme_
;

1124 cÚ¡ 
	g¡d
::
¡ršg
 
pÜt_num_
;

1126 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
Sock‘Wr™”
);

1130 
	g¡d
::
¡ršg
 
U¾Encode
(cÚ¡ * 
¡r
);

1132 
SŒ—mšgLi¡’”
(cÚ¡ 
¡d
::
¡ršg
& 
ho¡
, cÚ¡ std::¡ršg& 
pÜt
)

1133 : 
sock‘_wr™”_
(
Ãw
 
Sock‘Wr™”
(
ho¡
, 
pÜt
)) {

1134 
S¹
();

1137 
ex¶ic™
 
SŒ—mšgLi¡’”
(
Ab¡¿ùSock‘Wr™”
* 
sock‘_wr™”
)

1138 : 
sock‘_wr™”_
(
sock‘_wr™”
è{ 
S¹
(); }

1140 
OnTe¡Prog¿mS¹
(cÚ¡ 
Un™Te¡
& ) 
	gov”ride
 {

1141 
S’dLn
("event=TestProgramStart");

1144 
OnTe¡Prog¿mEnd
(cÚ¡ 
Un™Te¡
& 
un™_‹¡
è
	gov”ride
 {

1147 
S’dLn
("ev’t=Te¡Prog¿mEnd&·s£d=" + 
FÜm©BoŞ
(
un™_‹¡
.
Pas£d
()));

1150 
	gsock‘_wr™”_
->
Clo£CÚÃùiÚ
();

1153 
OnTe¡I‹¿tiÚS¹
(cÚ¡ 
Un™Te¡
& ,

1154 
™”©iÚ
è
	gov”ride
 {

1155 
S’dLn
("event=TestIterationStart&iteration=" +

1156 
SŒ—mabËToSŒšg
(
™”©iÚ
));

1159 
OnTe¡I‹¿tiÚEnd
(cÚ¡ 
Un™Te¡
& 
un™_‹¡
,

1160 è
	gov”ride
 {

1161 
S’dLn
("event=TestIterationEnd&passed=" +

1162 
FÜm©BoŞ
(
un™_‹¡
.
Pas£d
()) + "&elapsed_time=" +

1163 
SŒ—mabËToSŒšg
(
un™_‹¡
.
–­£d_time
()) + "ms");

1168 
OnTe¡Ca£S¹
(cÚ¡ 
Te¡Ca£
& 
‹¡_ÿ£
è
	gov”ride
 {

1169 
S’dLn
(
¡d
::
¡ršg
("ev’t=Te¡Ca£S¹&Çme="è+ 
‹¡_ÿ£
.
Çme
());

1174 
OnTe¡Ca£End
(cÚ¡ 
Te¡Ca£
& 
‹¡_ÿ£
è
	gov”ride
 {

1175 
S’dLn
("ev’t=Te¡Ca£End&·s£d=" + 
FÜm©BoŞ
(
‹¡_ÿ£
.
Pas£d
()) +

1176 "&–­£d_time=" + 
SŒ—mabËToSŒšg
(
‹¡_ÿ£
.
–­£d_time
()) +

1180 
OnTe¡S¹
(cÚ¡ 
Te¡Info
& 
‹¡_šfo
è
	gov”ride
 {

1181 
S’dLn
(
¡d
::
¡ršg
("ev’t=Te¡S¹&Çme="è+ 
‹¡_šfo
.
Çme
());

1184 
OnTe¡End
(cÚ¡ 
Te¡Info
& 
‹¡_šfo
è
	gov”ride
 {

1185 
S’dLn
("event=TestEnd&passed=" +

1186 
FÜm©BoŞ
((
‹¡_šfo
.
»suÉ
())->
Pas£d
()) +

1188 
SŒ—mabËToSŒšg
((
‹¡_šfo
.
»suÉ
())->
–­£d_time
()) + "ms");

1191 
OnTe¡P¬tResuÉ
(cÚ¡ 
Te¡P¬tResuÉ
& 
‹¡_·¹_»suÉ
è
	gov”ride
 {

1192 cÚ¡ * 
	gfe_Çme
 = 
‹¡_·¹_»suÉ
.
fe_Çme
();

1193 ià(
	gfe_Çme
 =ğ
nuÎ±r
è
fe_Çme
 = "";

1194 
S’dLn
("ev’t=Te¡P¬tResuÉ&fe=" + 
U¾Encode
(
fe_Çme
) +

1195 "&lše=" + 
SŒ—mabËToSŒšg
(
‹¡_·¹_»suÉ
.
lše_numb”
()) +

1196 "&mes§ge=" + 
U¾Encode
(
‹¡_·¹_»suÉ
.
mes§ge
()));

1199 
	g´iv©e
:

1201 
S’dLn
(cÚ¡ 
¡d
::
¡ršg
& 
mes§ge
è{ 
sock‘_wr™”_
->SendLn(message); }

1205 
S¹
(è{ 
S’dLn
("gtest_streaming_protocol_version=1.0"); }

1207 
	g¡d
::
¡ršg
 
FÜm©BoŞ
(
boŞ
 
v®ue
) {  value ? "1" : "0"; }

1209 cÚ¡ 
	g¡d
::
unique_±r
<
Ab¡¿ùSock‘Wr™”
> 
sock‘_wr™”_
;

1211 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
SŒ—mšgLi¡’”
);

1219 
	$GTEST_DISABLE_MSC_WARNINGS_POP_
()

	@third_party/googletest/googletest/src/gtest-matchers.cc

35 
	~"g‹¡/š‹º®/g‹¡-š‹º®.h
"

36 
	~"g‹¡/š‹º®/g‹¡-pÜt.h
"

37 
	~"g‹¡/g‹¡-m©ch”s.h
"

39 
	~<¡ršg
>

41 
Çme¥aû
 
	g‹¡šg
 {

45 
	gM©ch”
<cÚ¡ 
	g¡d
::
¡ršg
&>::
M©ch”
(cÚ¡ 
¡d
::¡ršg& 
s
è{ *
this
 = 
Eq
(s); }

49 
	gM©ch”
<cÚ¡ 
	g¡d
::
¡ršg
&>::
M©ch”
(cÚ¡ * 
s
) {

50 *
this
 = 
Eq
(
¡d
::
¡ršg
(
s
));

55 
	gM©ch”
<
	g¡d
::
¡ršg
>::
M©ch”
(cÚ¡ 
¡d
::¡ršg& 
s
è{ *
this
 = 
Eq
(s); }

59 
	gM©ch”
<
	g¡d
::
¡ršg
>::
M©ch”
(cÚ¡ * 
s
è{ *
this
 = 
Eq
(
¡d
::string(s)); }

61 #ià
GTEST_INTERNAL_HAS_STRING_VIEW


64 
	gM©ch”
<cÚ¡ 
	gš‹º®
::
SŒšgV›w
&>::
M©ch”
(cÚ¡ 
¡d
::
¡ršg
& 
s
) {

65 *
this
 = 
Eq
(
s
);

70 
	gM©ch”
<cÚ¡ 
	gš‹º®
::
SŒšgV›w
&>::
M©ch”
(cÚ¡ * 
s
) {

71 *
this
 = 
Eq
(
¡d
::
¡ršg
(
s
));

76 
	gM©ch”
<cÚ¡ 
	gš‹º®
::
SŒšgV›w
&>::
M©ch”
(
š‹º®
::SŒšgV›w 
s
) {

77 *
this
 = 
Eq
(
¡d
::
¡ršg
(
s
));

82 
	gM©ch”
<
	gš‹º®
::
SŒšgV›w
>::
M©ch”
(cÚ¡ 
¡d
::
¡ršg
& 
s
è{ *
this
 = 
Eq
(s); }

86 
	gM©ch”
<
	gš‹º®
::
SŒšgV›w
>::
M©ch”
(cÚ¡ * 
s
) {

87 *
this
 = 
Eq
(
¡d
::
¡ršg
(
s
));

92 
	gM©ch”
<
	gš‹º®
::
SŒšgV›w
>::
M©ch”
(
š‹º®
::SŒšgV›w 
s
) {

93 *
this
 = 
Eq
(
¡d
::
¡ršg
(
s
));

	@third_party/googletest/googletest/src/gtest-port.cc

31 
	~"g‹¡/š‹º®/g‹¡-pÜt.h
"

33 
	~<lim™s.h
>

34 
	~<¡dio.h
>

35 
	~<¡dlib.h
>

36 
	~<¡ršg.h
>

37 
	~<c¡dšt
>

38 
	~<f¡»am
>

39 
	~<memÜy
>

41 #ià
GTEST_OS_WINDOWS


42 
	~<wšdows.h
>

43 
	~<io.h
>

44 
	~<sys/¡©.h
>

45 
	~<m­
>

46 #ifdeà
_MSC_VER


47 
	~<ütdbg.h
>

50 
	~<uni¡d.h
>

53 #ià
GTEST_OS_MAC


54 
	~<mach/mach_š™.h
>

55 
	~<mach/sk.h
>

56 
	~<mach/vm_m­.h
>

59 #ià
GTEST_OS_DRAGONFLY
 || 
GTEST_OS_FREEBSD
 || 
GTEST_OS_GNU_KFREEBSD
 || \

60 
	gGTEST_OS_NETBSD
 || 
	gGTEST_OS_OPENBSD


61 
	~<sys/sysùl.h
>

62 #ià
GTEST_OS_DRAGONFLY
 || 
GTEST_OS_FREEBSD
 || 
GTEST_OS_GNU_KFREEBSD


63 
	~<sys/u£r.h
>

67 #ià
GTEST_OS_QNX


68 
	~<devùl.h
>

69 
	~<fú.h
>

70 
	~<sys/´ocfs.h
>

73 #ià
GTEST_OS_AIX


74 
	~<´ocšfo.h
>

75 
	~<sys/ty³s.h
>

78 #ià
GTEST_OS_FUCHSIA


79 
	~<zœcÚ/´oûss.h
>

80 
	~<zœcÚ/sysÿÎs.h
>

83 #ià
GTEST_OS_IOS


84 #impÜˆ<
Found©iÚ
/Found©iÚ.
h
>

87 
	~"g‹¡/g‹¡-¥i.h
"

88 
	~"g‹¡/g‹¡-mes§ge.h
"

89 
	~"g‹¡/š‹º®/g‹¡-š‹º®.h
"

90 
	~"g‹¡/š‹º®/g‹¡-¡ršg.h
"

91 
	~"¤c/g‹¡-š‹º®-šl.h
"

93 
Çme¥aû
 
	g‹¡šg
 {

94 
Çme¥aû
 
	gš‹º®
 {

96 #ià
defšed
(
_MSC_VER
è|| defšed(
__BORLANDC__
)

98 cÚ¡ 
	gkStdOutF’o
 = 1;

99 cÚ¡ 
	gkStdE¼F’o
 = 2;

101 cÚ¡ 
	gkStdOutF’o
 = 
STDOUT_FILENO
;

102 cÚ¡ 
	gkStdE¼F’o
 = 
STDERR_FILENO
;

105 #ià
GTEST_OS_LINUX


107 
	gÇme¥aû
 {

108 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

109 
T
 
R—dProcFeF›ld
(cÚ¡ 
¡d
::
¡ršg
& 
f’ame
, 
f›ld
) {

110 
	g¡d
::
¡ršg
 
dummy
;

111 
	g¡d
::
if¡»am
 
fe
(
f’ame
.
c_¡r
());

112 
	gf›ld
-- > 0) {

113 
	gfe
 >> 
	gdummy
;

115 
T
 
	gouut
 = 0;

116 
	gfe
 >> 
	gouut
;

117  
	gouut
;

122 
size_t
 
G‘Th»adCouÁ
() {

123 cÚ¡ 
	g¡d
::
¡ršg
 
f’ame
 =

124 (
Mes§ge
(è<< "/´oc/" << 
g‘pid
(è<< "/¡©").
G‘SŒšg
();

125  
	gR—dProcFeF›ld
<
	gsize_t
>(
	gf’ame
, 19);

128 #–ià
GTEST_OS_MAC


130 
size_t
 
G‘Th»adCouÁ
() {

131 cÚ¡ 
sk_t
 
	gsk
 = 
mach_sk_£lf
();

132 
mach_msg_ty³_numb”_t
 
	gth»ad_couÁ
;

133 
th»ad_aù_¬¿y_t
 
	gth»ad_li¡
;

134 cÚ¡ 
k”n_»tuº_t
 
	g¡©us
 = 
sk_th»ads
(
sk
, &
th»ad_li¡
, &
th»ad_couÁ
);

135 ià(
	g¡©us
 =ğ
KERN_SUCCESS
) {

138 
vm_d—Îoÿ‹
(
sk
,

139 
»š‹½»t_ÿ¡
<
vm_add»ss_t
>(
th»ad_li¡
),

140 (
th»ad_t
è* 
th»ad_couÁ
);

141  
	g¡©ic_ÿ¡
<
	gsize_t
>(
	gth»ad_couÁ
);

147 #–ià
GTEST_OS_DRAGONFLY
 || 
GTEST_OS_FREEBSD
 || 
GTEST_OS_GNU_KFREEBSD
 || \

148 
	gGTEST_OS_NETBSD


150 #ià
GTEST_OS_NETBSD


151 #undeà
KERN_PROC


152 
	#KERN_PROC
 
KERN_PROC2


	)

153 
	#kšfo_´oc
 
kšfo_´oc2


	)

156 #ià
GTEST_OS_DRAGONFLY


157 
	#KP_NLWP
(
kp
è(kp.
kp_Áh»ads
)

	)

158 #–ià
GTEST_OS_FREEBSD
 || 
GTEST_OS_GNU_KFREEBSD


159 
	#KP_NLWP
(
kp
è(kp.
ki_numth»ads
)

	)

160 #–ià
GTEST_OS_NETBSD


161 
	#KP_NLWP
(
kp
è(kp.
p_Æwps
)

	)

166 
size_t
 
G‘Th»adCouÁ
() {

167 
	gmib
[] = {

168 
CTL_KERN
,

169 
KERN_PROC
,

170 
KERN_PROC_PID
,

171 
g‘pid
(),

172 #ià
GTEST_OS_NETBSD


173 (
kšfo_´oc
),

177 
u_št
 
	gmibËn
 = (
mib
) / (mib[0]);

178 
kšfo_´oc
 
	gšfo
;

179 
size_t
 
	gsize
 = (
šfo
);

180 ià(
sysùl
(
mib
, 
mibËn
, &
šfo
, &
size
, 
NULL
, 0)) {

183  
	g¡©ic_ÿ¡
<
	gsize_t
>(
KP_NLWP
(
šfo
));

185 #–ià
GTEST_OS_OPENBSD


189 
size_t
 
G‘Th»adCouÁ
() {

190 
	gmib
[] = {

191 
CTL_KERN
,

192 
KERN_PROC
,

193 
KERN_PROC_PID
 | 
KERN_PROC_SHOW_THREADS
,

194 
g‘pid
(),

195 (
kšfo_´oc
),

198 
u_št
 
	gmibËn
 = (
mib
) / (mib[0]);

201 
size_t
 
	gsize
;

202 ià(
sysùl
(
mib
, 
mibËn
, 
NULL
, &
size
, NULL, 0)) {

206 
	gmib
[5] = 
¡©ic_ÿ¡
<>(
size
 / stic_ÿ¡<
size_t
>(
mib
[4]));

209 
kšfo_´oc
 
	gšfo
[
mib
[5]];

210 ià(
sysùl
(
mib
, 
mibËn
, &
šfo
, &
size
, 
NULL
, 0)) {

215 
size_t
 
	gÁh»ads
 = 0;

216 
size_t
 
	gi
 = 0; i < 
	gsize
 / 
	g¡©ic_ÿ¡
<
	gsize_t
>(
	gmib
[4]); i++) {

217 ià(
	gšfo
[
i
].
	gp_tid
 != -1)

218 
Áh»ads
++;

220  
	gÁh»ads
;

223 #–ià
GTEST_OS_QNX


227 
size_t
 
G‘Th»adCouÁ
() {

228 cÚ¡ 
	gfd
 = 
İ’
("/´oc/£lf/as", 
O_RDONLY
);

229 ià(
	gfd
 < 0) {

232 
´ocfs_šfo
 
	g´oûss_šfo
;

233 cÚ¡ 
	g¡©us
 =

234 
devùl
(
fd
, 
DCMD_PROC_INFO
, &
´oûss_šfo
, Õroûss_šfo), 
nuÎ±r
);

235 
şo£
(
fd
);

236 ià(
	g¡©us
 =ğ
EOK
) {

237  
¡©ic_ÿ¡
<
size_t
>(
´oûss_šfo
.
num_th»ads
);

243 #–ià
GTEST_OS_AIX


245 
size_t
 
G‘Th»adCouÁ
() {

246 
´oûÁry64
 
	g’Œy
;

247 
pid_t
 
	gpid
 = 
g‘pid
();

248 
	g¡©us
 = 
g‘´ocs64
(&
’Œy
, ÓÁry), 
nuÎ±r
, 0, &
pid
, 1);

249 ià(
	g¡©us
 == 1) {

250  
’Œy
.
pi_thcouÁ
;

256 #–ià
GTEST_OS_FUCHSIA


258 
size_t
 
G‘Th»adCouÁ
() {

259 
	gdummy_bufãr
;

260 
size_t
 
	gava
;

261 
zx_¡©us_t
 
	g¡©us
 = 
zx_objeù_g‘_šfo
(

262 
zx_´oûss_£lf
(),

263 
ZX_INFO_PROCESS_THREADS
,

264 &
dummy_bufãr
,

266 
nuÎ±r
,

267 &
ava
);

268 ià(
	g¡©us
 =ğ
ZX_OK
) {

269  
ava
;

277 
size_t
 
G‘Th»adCouÁ
() {

285 #ià
GTEST_IS_THREADSAFE
 && 
GTEST_OS_WINDOWS


287 
SË•Mli£cÚds
(
n
) {

288 ::
SË•
(
¡©ic_ÿ¡
<
DWORD
>(
n
));

291 
	gAutoHªdË
::
AutoHªdË
()

292 : 
hªdË_
(
INVALID_HANDLE_VALUE
) {}

294 
AutoHªdË
::AutoHªdË(
HªdË
 
hªdË
)

295 : 
hªdË_
(
hªdË
) {}

297 
AutoHªdË
::~AutoHandle() {

298 
Re£t
();

301 
	gAutoHªdË
::
HªdË
 
AutoHªdË
::
G‘
() const {

302  
hªdË_
;

305 
	gAutoHªdË
::
Re£t
() {

306 
Re£t
(
INVALID_HANDLE_VALUE
);

309 
	gAutoHªdË
::
Re£t
(
HANDLE
 
hªdË
) {

311 ià(
hªdË_
 !ğ
hªdË
) {

312 ià(
IsClo£abË
()) {

313 ::
Clo£HªdË
(
hªdË_
);

315 
	ghªdË_
 = 
hªdË
;

317 
GTEST_CHECK_
(!
IsClo£abË
())

323 
boŞ
 
	gAutoHªdË
::
IsClo£abË
() const {

326  
hªdË_
 !ğ
nuÎ±r
 && hªdË_ !ğ
INVALID_HANDLE_VALUE
;

329 
	gNÙifiÿtiÚ
::
NÙifiÿtiÚ
()

330 : 
ev’t_
(::
C»©eEv’t
(
nuÎ±r
,

331 
TRUE
,

332 
FALSE
,

333 
nuÎ±r
)) {

334 
GTEST_CHECK_
(
ev’t_
.
G‘
(è!ğ
nuÎ±r
);

337 
	gNÙifiÿtiÚ
::
NÙify
() {

338 
GTEST_CHECK_
(::
S‘Ev’t
(
ev’t_
.
G‘
()è!ğ
FALSE
);

341 
	gNÙifiÿtiÚ
::
Wa™FÜNÙifiÿtiÚ
() {

342 
GTEST_CHECK_
(

343 ::
Wa™FÜSšgËObjeù
(
ev’t_
.
G‘
(), 
INFINITE
è=ğ
WAIT_OBJECT_0
);

346 
	gMu‹x
::
Mu‹x
()

347 : 
owÃr_th»ad_id_
(0),

348 
ty³_
(
kDyÇmic
),

349 
ü™iÿl_£ùiÚ_š™_pha£_
(0),

350 
ü™iÿl_£ùiÚ_
(
Ãw
 
CRITICAL_SECTION
) {

351 ::
In™ŸlizeCr™iÿlSeùiÚ
(
ü™iÿl_£ùiÚ_
);

354 
	gMu‹x
::~
Mu‹x
() {

357 ià(
ty³_
 =ğ
kDyÇmic
) {

358 ::
D–‘eCr™iÿlSeùiÚ
(
ü™iÿl_£ùiÚ_
);

359 
d–‘e
 
	gü™iÿl_£ùiÚ_
;

360 
	gü™iÿl_£ùiÚ_
 = 
nuÎ±r
;

364 
	gMu‹x
::
Lock
() {

365 
Th»adSaãLazyIn™
();

366 ::
EÁ”Cr™iÿlSeùiÚ
(
ü™iÿl_£ùiÚ_
);

367 
	gowÃr_th»ad_id_
 = ::
G‘Cu¼’tTh»adId
();

370 
	gMu‹x
::
UÆock
() {

371 
Th»adSaãLazyIn™
();

375 
	gowÃr_th»ad_id_
 = 0;

376 ::
L—veCr™iÿlSeùiÚ
(
ü™iÿl_£ùiÚ_
);

381 
	gMu‹x
::
As£¹H–d
() {

382 
Th»adSaãLazyIn™
();

383 
GTEST_CHECK_
(
owÃr_th»ad_id_
 =ğ::
G‘Cu¼’tTh»adId
())

384 << "Thcu¼’ˆth»ad i nÙ hŞdšghmu‹x @" << 
this
;

387 
	gÇme¥aû
 {

389 #ifdeà
_MSC_VER


398 şas 
	cMemÜyIsNÙD—Îoÿ‹d


400 
	gpublic
:

401 
MemÜyIsNÙD—Îoÿ‹d
(è: 
Şd_ütdbg_æag_
(0) {

402 
Şd_ütdbg_æag_
 = 
_C¹S‘DbgFÏg
(
_CRTDBG_REPORT_FLAG
);

405 
_C¹S‘DbgFÏg
(
Şd_ütdbg_æag_
 & ~
_CRTDBG_ALLOC_MEM_DF
);

408 ~
MemÜyIsNÙD—Îoÿ‹d
() {

410 
_C¹S‘DbgFÏg
(
Şd_ütdbg_æag_
);

413 
	g´iv©e
:

414 
Şd_ütdbg_æag_
;

416 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
MemÜyIsNÙD—Îoÿ‹d
);

423 
	gMu‹x
::
Th»adSaãLazyIn™
() {

425 ià(
ty³_
 =ğ
kStic
) {

427 ::
IÁ”lockedCom·»Exchªge
(&
ü™iÿl_£ùiÚ_š™_pha£_
, 1L, 0L)) {

431 
owÃr_th»ad_id_
 = 0;

434 #ifdeà
_MSC_VER


435 
MemÜyIsNÙD—Îoÿ‹d
 
	gmemÜy_is_nÙ_d—Îoÿ‹d
;

437 
	gü™iÿl_£ùiÚ_
 = 
Ãw
 
CRITICAL_SECTION
;

439 ::
In™ŸlizeCr™iÿlSeùiÚ
(
ü™iÿl_£ùiÚ_
);

442 
GTEST_CHECK_
(::
IÁ”lockedCom·»Exchªge
(

443 &
ü™iÿl_£ùiÚ_š™_pha£_
, 2L, 1L) ==

449 ::
IÁ”lockedCom·»Exchªge
(&
ü™iÿl_£ùiÚ_š™_pha£_
,

454 ::
SË•
(0);

462 
GTEST_CHECK_
(
çl£
)

469 
	gÇme¥aû
 {

471 şas 
	cTh»adW™hP¬amSuµÜt
 : 
public
 
Th»adW™hP¬amBa£
 {

472 
public
:

473 
HANDLE
 
C»©eTh»ad
(
RuÂabË
* 
ruÂabË
,

474 
NÙifiÿtiÚ
* 
th»ad_ÿn_¡¬t
) {

475 
Th»adMašP¬am
* 
	g·¿m
 = 
Ãw
 Th»adMašP¬am(
ruÂabË
, 
th»ad_ÿn_¡¬t
);

476 
DWORD
 
	gth»ad_id
;

477 
HANDLE
 
	gth»ad_hªdË
 = ::
C»©eTh»ad
(

478 
nuÎ±r
,

480 &
Th»adW™hP¬amSuµÜt
::
Th»adMaš
,

481 
·¿m
,

483 &
th»ad_id
);

484 
GTEST_CHECK_
(
th»ad_hªdË
 !ğ
nuÎ±r
)

485 << "C»©eTh»ad faed w™hƒ¼Ü " << ::
G‘La¡E¼Ü
() << ".";

486 ià(
	gth»ad_hªdË
 =ğ
nuÎ±r
) {

487 
d–‘e
 
·¿m
;

489  
	gth»ad_hªdË
;

492 
	g´iv©e
:

493 
	sTh»adMašP¬am
 {

494 
Th»adMašP¬am
(
RuÂabË
* 
ruÂabË
, 
NÙifiÿtiÚ
* 
th»ad_ÿn_¡¬t
)

495 : 
ruÂabË_
(
ruÂabË
),

496 
th»ad_ÿn_¡¬t_
(
th»ad_ÿn_¡¬t
) {

498 
	g¡d
::
unique_±r
<
RuÂabË
> 
ruÂabË_
;

500 
NÙifiÿtiÚ
* 
	gth»ad_ÿn_¡¬t_
;

503 
DWORD
 
WINAPI
 
Th»adMaš
(* 
±r
) {

505 
	g¡d
::
unique_±r
<
Th»adMašP¬am
> 
·¿m
(
¡©ic_ÿ¡
<Th»adMašP¬am*>(
±r
));

506 ià(
	g·¿m
->
	gth»ad_ÿn_¡¬t_
 !ğ
nuÎ±r
)

507 
·¿m
->
th»ad_ÿn_¡¬t_
->
Wa™FÜNÙifiÿtiÚ
();

508 
	g·¿m
->
	gruÂabË_
->
Run
();

513 
Th»adW™hP¬amSuµÜt
();

515 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
Th»adW™hP¬amSuµÜt
);

520 
	gTh»adW™hP¬amBa£
::
Th»adW™hP¬amBa£
(
RuÂabË
 *
ruÂabË
,

521 
NÙifiÿtiÚ
* 
th»ad_ÿn_¡¬t
)

522 : 
th»ad_
(
Th»adW™hP¬amSuµÜt
::
C»©eTh»ad
(
ruÂabË
,

523 
th»ad_ÿn_¡¬t
)) {

526 
	gTh»adW™hP¬amBa£
::~
Th»adW™hP¬amBa£
() {

527 
Još
();

530 
	gTh»adW™hP¬amBa£
::
Još
() {

531 
GTEST_CHECK_
(::
Wa™FÜSšgËObjeù
(
th»ad_
.
G‘
(), 
INFINITE
è=ğ
WAIT_OBJECT_0
)

532 << "FaedØjošhth»ad w™hƒ¼Ü " << ::
G‘La¡E¼Ü
() << ".";

539 şas 
	cTh»adLoÿlRegi¡ryIm¶
 {

540 
	gpublic
:

543 
Th»adLoÿlV®ueHŞd”Ba£
* 
G‘V®ueOnCu¼’tTh»ad
(

544 cÚ¡ 
Th»adLoÿlBa£
* 
th»ad_loÿl_š¡ªû
) {

545 #ifdeà
_MSC_VER


546 
MemÜyIsNÙD—Îoÿ‹d
 
memÜy_is_nÙ_d—Îoÿ‹d
;

548 
DWORD
 
	gcu¼’t_th»ad
 = ::
G‘Cu¼’tTh»adId
();

549 
Mu‹xLock
 
lock
(&
mu‹x_
);

550 
Th»adIdToTh»adLoÿls
* cÚ¡ 
	gth»ad_to_th»ad_loÿls
 =

551 
G‘Th»adLoÿlsM­Locked
();

552 
	gTh»adIdToTh»adLoÿls
::
™”©Ü
 
th»ad_loÿl_pos
 =

553 
th»ad_to_th»ad_loÿls
->
fšd
(
cu¼’t_th»ad
);

554 ià(
	gth»ad_loÿl_pos
 =ğ
th»ad_to_th»ad_loÿls
->
’d
()) {

555 
th»ad_loÿl_pos
 = 
th»ad_to_th»ad_loÿls
->
š£¹
(

556 
¡d
::
make_·œ
(
cu¼’t_th»ad
, 
Th»adLoÿlV®ues
())).
	gfœ¡
;

557 
S¹W©ch”Th»adFÜ
(
cu¼’t_th»ad
);

559 
	gTh»adLoÿlV®ues
& 
	gth»ad_loÿl_v®ues
 = 
th»ad_loÿl_pos
->
£cÚd
;

560 
	gTh»adLoÿlV®ues
::
™”©Ü
 
v®ue_pos
 =

561 
th»ad_loÿl_v®ues
.
fšd
(
th»ad_loÿl_š¡ªû
);

562 ià(
	gv®ue_pos
 =ğ
th»ad_loÿl_v®ues
.
’d
()) {

563 
v®ue_pos
 =

564 
th»ad_loÿl_v®ues


565 .
š£¹
(
¡d
::
make_·œ
(

566 
th»ad_loÿl_š¡ªû
,

567 
¡d
::
sh¬ed_±r
<
Th»adLoÿlV®ueHŞd”Ba£
>(

568 
th»ad_loÿl_š¡ªû
->
NewV®ueFÜCu¼’tTh»ad
())))

569 .
fœ¡
;

571  
	gv®ue_pos
->
	g£cÚd
.
g‘
();

574 
OnTh»adLoÿlDe¡royed
(

575 cÚ¡ 
Th»adLoÿlBa£
* 
th»ad_loÿl_š¡ªû
) {

576 
	g¡d
::
veùÜ
<
¡d
::
sh¬ed_±r
<
Th»adLoÿlV®ueHŞd”Ba£
> > 
v®ue_hŞd”s
;

580 
Mu‹xLock
 
lock
(&
mu‹x_
);

581 
Th»adIdToTh»adLoÿls
* cÚ¡ 
	gth»ad_to_th»ad_loÿls
 =

582 
G‘Th»adLoÿlsM­Locked
();

583 
	gTh»adIdToTh»adLoÿls
::
™”©Ü
 
™
 =

584 
th»ad_to_th»ad_loÿls
->
begš
();

585 
	g™
 !ğ
th»ad_to_th»ad_loÿls
->
’d
();

586 ++
	g™
) {

587 
	gTh»adLoÿlV®ues
& 
	gth»ad_loÿl_v®ues
 = 
™
->
£cÚd
;

588 
	gTh»adLoÿlV®ues
::
™”©Ü
 
v®ue_pos
 =

589 
th»ad_loÿl_v®ues
.
fšd
(
th»ad_loÿl_š¡ªû
);

590 ià(
	gv®ue_pos
 !ğ
th»ad_loÿl_v®ues
.
’d
()) {

591 
v®ue_hŞd”s
.
push_back
(
v®ue_pos
->
£cÚd
);

592 
	gth»ad_loÿl_v®ues
.
”a£
(
v®ue_pos
);

602 
OnTh»adEx™
(
DWORD
 
th»ad_id
) {

603 
GTEST_CHECK_
(
th»ad_id
 !ğ0è<< ::
G‘La¡E¼Ü
();

604 
	g¡d
::
veùÜ
<
¡d
::
sh¬ed_±r
<
Th»adLoÿlV®ueHŞd”Ba£
> > 
v®ue_hŞd”s
;

608 
Mu‹xLock
 
lock
(&
mu‹x_
);

609 
Th»adIdToTh»adLoÿls
* cÚ¡ 
	gth»ad_to_th»ad_loÿls
 =

610 
G‘Th»adLoÿlsM­Locked
();

611 
	gTh»adIdToTh»adLoÿls
::
™”©Ü
 
th»ad_loÿl_pos
 =

612 
th»ad_to_th»ad_loÿls
->
fšd
(
th»ad_id
);

613 ià(
	gth»ad_loÿl_pos
 !ğ
th»ad_to_th»ad_loÿls
->
’d
()) {

614 
Th»adLoÿlV®ues
& 
th»ad_loÿl_v®ues
 = 
th»ad_loÿl_pos
->
£cÚd
;

615 
	gTh»adLoÿlV®ues
::
™”©Ü
 
v®ue_pos
 =

616 
th»ad_loÿl_v®ues
.
begš
();

617 
	gv®ue_pos
 !ğ
th»ad_loÿl_v®ues
.
’d
();

618 ++
	gv®ue_pos
) {

619 
	gv®ue_hŞd”s
.
push_back
(
v®ue_pos
->
£cÚd
);

621 
	gth»ad_to_th»ad_loÿls
->
”a£
(
th»ad_loÿl_pos
);

628 
	g´iv©e
:

630 
¡d
::
	tm­
<cÚ¡ 
	tTh»adLoÿlBa£
*,

631 
	t¡d
::
	tsh¬ed_±r
<
	tTh»adLoÿlV®ueHŞd”Ba£
> >

632 
	tTh»adLoÿlV®ues
;

635 
	g¡d
::
	tm­
<
	tDWORD
, 
	tTh»adLoÿlV®ues
> 
	tTh»adIdToTh»adLoÿls
;

639 
	g¡d
::
	t·œ
<
	tDWORD
, 
	tHANDLE
> 
	tTh»adIdAndHªdË
;

641 
S¹W©ch”Th»adFÜ
(
DWORD
 
th»ad_id
) {

644 
HANDLE
 
	gth»ad
 = ::
O³nTh»ad
(
SYNCHRONIZE
 | 
THREAD_QUERY_INFORMATION
,

645 
FALSE
,

646 
th»ad_id
);

647 
GTEST_CHECK_
(
th»ad
 !ğ
nuÎ±r
);

650 
DWORD
 
	gw©ch”_th»ad_id
;

651 
HANDLE
 
	gw©ch”_th»ad
 = ::
C»©eTh»ad
(

652 
nuÎ±r
,

654 &
Th»adLoÿlRegi¡ryIm¶
::
W©ch”Th»adFunc
,

655 
»š‹½»t_ÿ¡
<
LPVOID
>(
Ãw
 
Th»adIdAndHªdË
(
th»ad_id
, 
th»ad
)),

656 
CREATE_SUSPENDED
, &
w©ch”_th»ad_id
);

657 
GTEST_CHECK_
(
w©ch”_th»ad
 !ğ
nuÎ±r
);

660 ::
S‘Th»adPriÜ™y
(
w©ch”_th»ad
,

661 ::
G‘Th»adPriÜ™y
(::
G‘Cu¼’tTh»ad
()));

662 ::
ResumeTh»ad
(
w©ch”_th»ad
);

663 ::
Clo£HªdË
(
w©ch”_th»ad
);

668 
DWORD
 
WINAPI
 
W©ch”Th»adFunc
(
LPVOID
 
·¿m
) {

669 cÚ¡ 
Th»adIdAndHªdË
* 
	gh
 =

670 
»š‹½»t_ÿ¡
<cÚ¡ 
Th»adIdAndHªdË
*>(
·¿m
);

671 
GTEST_CHECK_
(

672 ::
Wa™FÜSšgËObjeù
(
h
->
£cÚd
, 
INFINITE
è=ğ
WAIT_OBJECT_0
);

673 
OnTh»adEx™
(
h
->
fœ¡
);

674 ::
Clo£HªdË
(
h
->
£cÚd
);

675 
d–‘e
 
	gh
;

680 
Th»adIdToTh»adLoÿls
* 
G‘Th»adLoÿlsM­Locked
() {

681 
	gmu‹x_
.
As£¹H–d
();

682 #ifdeà
_MSC_VER


683 
MemÜyIsNÙD—Îoÿ‹d
 
	gmemÜy_is_nÙ_d—Îoÿ‹d
;

685 
Th»adIdToTh»adLoÿls
* 
	gm­
 = 
Ãw
 ThreadIdToThreadLocals();

686  
	gm­
;

690 
Mu‹x
 
	gmu‹x_
;

692 
Mu‹x
 
	gth»ad_m­_mu‹x_
;

695 
Mu‹x
 
	gTh»adLoÿlRegi¡ryIm¶
::
mu‹x_
(Mu‹x::
kSticMu‹x
);

696 
Mu‹x
 
	gTh»adLoÿlRegi¡ryIm¶
::
th»ad_m­_mu‹x_
(Mu‹x::
kSticMu‹x
);

698 
Th»adLoÿlV®ueHŞd”Ba£
* 
	gTh»adLoÿlRegi¡ry
::
G‘V®ueOnCu¼’tTh»ad
(

699 cÚ¡ 
Th»adLoÿlBa£
* 
th»ad_loÿl_š¡ªû
) {

700  
Th»adLoÿlRegi¡ryIm¶
::
G‘V®ueOnCu¼’tTh»ad
(

701 
th»ad_loÿl_š¡ªû
);

704 
	gTh»adLoÿlRegi¡ry
::
OnTh»adLoÿlDe¡royed
(

705 cÚ¡ 
Th»adLoÿlBa£
* 
th»ad_loÿl_š¡ªû
) {

706 
Th»adLoÿlRegi¡ryIm¶
::
OnTh»adLoÿlDe¡royed
(
th»ad_loÿl_š¡ªû
);

711 #ià
GTEST_USES_POSIX_RE


715 
	gRE
::~
RE
() {

716 ià(
is_v®id_
) {

721 
»gä“
(&
·¹Ÿl_»gex_
);

722 
»gä“
(&
fuÎ_»gex_
);

724 
ä“
(
cÚ¡_ÿ¡
<*>(
·‰”n_
));

728 
boŞ
 
	gRE
::
FuÎM©ch
(cÚ¡ * 
¡r
, cÚ¡ 
RE
& 
»
) {

729 ià(!
	g»
.
	gis_v®id_
è 
	gçl£
;

731 
»gm©ch_t
 
	gm©ch
;

732  
»gexec
(&
»
.
fuÎ_»gex_
, 
¡r
, 1, &
m©ch
, 0) == 0;

737 
boŞ
 
	gRE
::
P¬tŸlM©ch
(cÚ¡ * 
¡r
, cÚ¡ 
RE
& 
»
) {

738 ià(!
	g»
.
	gis_v®id_
è 
	gçl£
;

740 
»gm©ch_t
 
	gm©ch
;

741  
»gexec
(&
»
.
·¹Ÿl_»gex_
, 
¡r
, 1, &
m©ch
, 0) == 0;

745 
	gRE
::
In™
(cÚ¡ * 
»gex
) {

746 
·‰”n_
 = 
posix
::
SŒDup
(
»gex
);

750 cÚ¡ 
size_t
 
	gfuÎ_»gex_Ën
 = 
¡¾’
(
»gex
) + 10;

751 * cÚ¡ 
	gfuÎ_·‰”n
 = 
Ãw
 [
fuÎ_»gex_Ën
];

753 
¢´štf
(
fuÎ_·‰”n
, 
fuÎ_»gex_Ën
, "^(%s)$", 
»gex
);

754 
	gis_v®id_
 = 
»gcomp
(&
fuÎ_»gex_
, 
fuÎ_·‰”n
, 
REG_EXTENDED
) == 0;

763 ià(
	gis_v®id_
) {

764 cÚ¡ * cÚ¡ 
	g·¹Ÿl_»gex
 = (*
»gex
 == '\0') ? "()" :„egex;

765 
	gis_v®id_
 = 
»gcomp
(&
·¹Ÿl_»gex_
, 
·¹Ÿl_»gex
, 
REG_EXTENDED
) == 0;

767 
EXPECT_TRUE
(
is_v®id_
)

768 << "ReguÏ¸ex´essiÚ \"" << 
	g»gex


771 
	gd–‘e
[] 
	gfuÎ_·‰”n
;

774 #–ià
GTEST_USES_SIMPLE_RE


778 
boŞ
 
IsInS‘
(
ch
, cÚ¡ * 
¡r
) {

779  
	gch
 !ğ'\0' && 
¡rchr
(
¡r
, 
ch
è!ğ
nuÎ±r
;

785 
boŞ
 
IsAsciiDig™
(
ch
) {  '0' <= ch && ch <= '9'; }

786 
boŞ
 
IsAsciiPunù
(
ch
) {

787  
IsInS‘
(
ch
, "^-!\"#$%&'()*+,./:;<=>?@[\\]_`{|}~");

789 
boŞ
 
IsR•—t
(
ch
è{  
IsInS‘
(ch, "?*+"); }

790 
boŞ
 
IsAsciiWh™eS·û
(
ch
è{  
IsInS‘
(ch, " \f\n\r\t\v"); }

791 
boŞ
 
IsAsciiWÜdCh¬
(
ch
) {

792  ('a' <ğ
ch
 && ch <= 'z') || ('A' <= ch && ch <= 'Z') ||

793 ('0' <ğ
ch
 && ch <= '9') || ch == '_';

797 
boŞ
 
IsV®idEsÿ³
(
c
) {

798  (
IsAsciiPunù
(
c
è|| 
IsInS‘
(c, "dDfnrsStvwW"));

803 
boŞ
 
AtomM©chesCh¬
(boŞ 
esÿ³d
, 
·‰”n_ch¬
, 
ch
) {

804 ià(
	gesÿ³d
) {

805 
	g·‰”n_ch¬
) {

806 'd':  
IsAsciiDig™
(
ch
);

807 'D':  !
IsAsciiDig™
(
ch
);

808 'f':  
ch
 == '\f';

809 'n':  
ch
 == '\n';

810 'r':  
ch
 == '\r';

811 's':  
IsAsciiWh™eS·û
(
ch
);

812 'S':  !
IsAsciiWh™eS·û
(
ch
);

813 't':  
ch
 == '\t';

814 'v':  
ch
 == '\v';

815 'w':  
IsAsciiWÜdCh¬
(
ch
);

816 'W':  !
IsAsciiWÜdCh¬
(
ch
);

818  
IsAsciiPunù
(
·‰”n_ch¬
è&& 
	g·‰”n_ch¬
 =ğ
ch
;

821  (
	g·‰”n_ch¬
 =ğ'.' && 
ch
 !ğ'\n'è|| 
·‰”n_ch¬
 == ch;

825 
	g¡d
::
¡ršg
 
FÜm©RegexSyÁaxE¼Ü
(cÚ¡ * 
»gex
, 
šdex
) {

826  (
Mes§ge
(è<< "SyÁaxƒ¼Ü‡ˆšdex " << 
	gšdex


827 << " iÀsim¶»guÏ¸ex´essiÚ \"" << 
	g»gex
 << "\": ").
G‘SŒšg
();

832 
boŞ
 
V®id©eRegex
(cÚ¡ * 
»gex
) {

833 ià(
	g»gex
 =ğ
nuÎ±r
) {

834 
ADD_FAILURE
() << "NULL is‚ot‡ valid simple„egularƒxpression.";

835  
	gçl£
;

838 
boŞ
 
	gis_v®id
 = 
Œue
;

841 
boŞ
 
	g´ev_»³©abË
 = 
çl£
;

842 
	gi
 = 0; 
	g»gex
[
i
]; i++) {

843 ià(
	g»gex
[
i
] == '\\') {

844 
i
++;

845 ià(
	g»gex
[
i
] == '\0') {

846 
ADD_FAILURE
(è<< 
FÜm©RegexSyÁaxE¼Ü
(
»gex
, 
i
 - 1)

848  
	gçl£
;

851 ià(!
IsV®idEsÿ³
(
»gex
[
i
])) {

852 
ADD_FAILURE
(è<< 
FÜm©RegexSyÁaxE¼Ü
(
»gex
, 
i
 - 1)

853 << "šv®idƒsÿ³ sequ’û \"\\" << 
	g»gex
[
i
] << "\".";

854 
	gis_v®id
 = 
çl£
;

856 
	g´ev_»³©abË
 = 
Œue
;

858 cÚ¡ 
	gch
 = 
»gex
[
i
];

860 ià(
	gch
 =ğ'^' && 
i
 > 0) {

861 
ADD_FAILURE
(è<< 
FÜm©RegexSyÁaxE¼Ü
(
»gex
, 
i
)

863 
	gis_v®id
 = 
çl£
;

864 } ià(
	gch
 =ğ'$' && 
»gex
[
i
 + 1] != '\0') {

865 
ADD_FAILURE
(è<< 
FÜm©RegexSyÁaxE¼Ü
(
»gex
, 
i
)

867 
	gis_v®id
 = 
çl£
;

868 } ià(
IsInS‘
(
ch
, "()[]{}|")) {

869 
ADD_FAILURE
(è<< 
FÜm©RegexSyÁaxE¼Ü
(
»gex
, 
i
)

870 << "'" << 
	gch
 << "' is unsupported.";

871 
	gis_v®id
 = 
çl£
;

872 } ià(
IsR•—t
(
ch
è&& !
	g´ev_»³©abË
) {

873 
ADD_FAILURE
(è<< 
FÜm©RegexSyÁaxE¼Ü
(
»gex
, 
i
)

874 << "'" << 
	gch
 << "' can only follow‡„epeatableoken.";

875 
	gis_v®id
 = 
çl£
;

878 
	g´ev_»³©abË
 = !
IsInS‘
(
ch
, "^$?*+");

882  
	gis_v®id
;

892 
boŞ
 
M©chR•‘™iÚAndRegexAtH—d
(

893 
boŞ
 
esÿ³d
, 
c
, 
»³©
, cÚ¡ * 
»gex
,

894 cÚ¡ * 
¡r
) {

895 cÚ¡ 
size_t
 
	gmš_couÁ
 = (
»³©
 == '+') ? 1 : 0;

896 cÚ¡ 
size_t
 
	gmax_couÁ
 = (
»³©
 == '?') ? 1 :

897 
¡©ic_ÿ¡
<
size_t
>(-1) - 1;

901 
size_t
 
	gi
 = 0; i <ğ
max_couÁ
; ++i) {

903 ià(
	gi
 >ğ
mš_couÁ
 && 
M©chRegexAtH—d
(
»gex
, 
¡r
 + 
i
)) {

908  
	gŒue
;

910 ià(
	g¡r
[
i
] =ğ'\0' || !
AtomM©chesCh¬
(
esÿ³d
, 
c
, 
¡r
[i]))

911  
	gçl£
;

913  
	gçl£
;

919 
boŞ
 
M©chRegexAtH—d
(cÚ¡ * 
»gex
, cÚ¡ * 
¡r
) {

920 ià(*
	g»gex
 == '\0')

921  
Œue
;

925 ià(*
	g»gex
 == '$')

926  *
¡r
 == '\0';

929 cÚ¡ 
boŞ
 
	gesÿ³d
 = *
»gex
 == '\\';

930 ià(
	gesÿ³d
)

931 ++
	g»gex
;

932 ià(
IsR•—t
(
»gex
[1])) {

936  
M©chR•‘™iÚAndRegexAtH—d
(

937 
esÿ³d
, 
»gex
[0],„egex[1],„egex + 2, 
¡r
);

942  (*
	g¡r
 !ğ'\0'è&& 
AtomM©chesCh¬
(
esÿ³d
, *
»gex
, *
¡r
) &&

943 
M©chRegexAtH—d
(
»gex
 + 1, 
¡r
 + 1);

955 
boŞ
 
M©chRegexAnywh”e
(cÚ¡ * 
»gex
, cÚ¡ * 
¡r
) {

956 ià(
	g»gex
 =ğ
nuÎ±r
 || 
¡r
 =ğnuÎ±rè 
çl£
;

958 ià(*
	g»gex
 == '^')

959  
M©chRegexAtH—d
(
»gex
 + 1, 
¡r
);

963 ià(
M©chRegexAtH—d
(
»gex
, 
¡r
))

964  
	gŒue
;

965 } *
	g¡r
++ != '\0');

966  
	gçl£
;

971 
	gRE
::~
RE
() {

972 
ä“
(
cÚ¡_ÿ¡
<*>(
·‰”n_
));

973 
ä“
(
cÚ¡_ÿ¡
<*>(
fuÎ_·‰”n_
));

977 
boŞ
 
	gRE
::
FuÎM©ch
(cÚ¡ * 
¡r
, cÚ¡ 
RE
& 
»
) {

978  
	g»
.
	gis_v®id_
 && 
M©chRegexAnywh”e
(
»
.
fuÎ_·‰”n_
, 
¡r
);

983 
boŞ
 
	gRE
::
P¬tŸlM©ch
(cÚ¡ * 
¡r
, cÚ¡ 
RE
& 
»
) {

984  
	g»
.
	gis_v®id_
 && 
M©chRegexAnywh”e
(
»
.
·‰”n_
, 
¡r
);

988 
	gRE
::
In™
(cÚ¡ * 
»gex
) {

989 
·‰”n_
 = 
fuÎ_·‰”n_
 = 
nuÎ±r
;

990 ià(
	g»gex
 !ğ
nuÎ±r
) {

991 
·‰”n_
 = 
posix
::
SŒDup
(
»gex
);

994 
	gis_v®id_
 = 
V®id©eRegex
(
»gex
);

995 ià(!
	gis_v®id_
) {

1000 cÚ¡ 
size_t
 
	gËn
 = 
¡¾’
(
»gex
);

1004 * 
	gbufãr
 = 
¡©ic_ÿ¡
<*>(
m®loc
(
Ën
 + 3));

1005 
	gfuÎ_·‰”n_
 = 
bufãr
;

1007 ià(*
	g»gex
 != '^')

1008 *
bufãr
++ = '^';

1012 
memıy
(
bufãr
, 
»gex
, 
Ën
);

1013 
	gbufãr
 +ğ
Ën
;

1015 ià(
	gËn
 =ğ0 || 
»gex
[
Ën
 - 1] != '$')

1016 *
bufãr
++ = '$';

1018 *
	gbufãr
 = '\0';

1023 cÚ¡ 
	gkUnknownFe
[] = "unknown file";

1027 
	gGTEST_API_
 ::
¡d
::
¡ršg
 
FÜm©FeLoÿtiÚ
(cÚ¡ * 
fe
, 
lše
) {

1028 cÚ¡ 
	g¡d
::
¡ršg
 
fe_Çme
(
fe
 =ğ
nuÎ±r
 ? 
kUnknownFe
 : file);

1030 ià(
	glše
 < 0) {

1031  
	gfe_Çme
 + ":";

1033 #ifdeà
_MSC_VER


1034  
	gfe_Çme
 + "(" + 
SŒ—mabËToSŒšg
(
lše
) + "):";

1036  
	gfe_Çme
 + ":" + 
SŒ—mabËToSŒšg
(
lše
) + ":";

1045 
	gGTEST_API_
 ::
¡d
::
¡ršg
 
FÜm©Comp”Ind•’d’tFeLoÿtiÚ
(

1046 cÚ¡ * 
fe
, 
lše
) {

1047 cÚ¡ 
	g¡d
::
¡ršg
 
fe_Çme
(
fe
 =ğ
nuÎ±r
 ? 
kUnknownFe
 : file);

1049 ià(
	glše
 < 0)

1050  
	gfe_Çme
;

1052  
	gfe_Çme
 + ":" + 
SŒ—mabËToSŒšg
(
lše
);

1055 
	gGTe¡Log
::
GTe¡Log
(
GTe¡LogSev”™y
 
£v”™y
, cÚ¡ * 
fe
, 
lše
)

1056 : 
£v”™y_
(
£v”™y
) {

1057 cÚ¡ * cÚ¡ 
m¬k”
 =

1058 
£v”™y
 =ğ
GTEST_INFO
 ? "[ INFO ]" :

1059 
£v”™y
 =ğ
GTEST_WARNING
 ? "[WARNING]" :

1060 
£v”™y
 =ğ
GTEST_ERROR
 ? "[ ERROR ]" : "[ FATAL ]";

1061 
G‘SŒ—m
(è<< ::
¡d
::
’dl
 << 
m¬k”
 << " "

1062 << 
FÜm©FeLoÿtiÚ
(
fe
, 
lše
).
c_¡r
() << ": ";

1066 
	gGTe¡Log
::~
GTe¡Log
() {

1067 
G‘SŒ—m
(è<< ::
¡d
::
’dl
;

1068 ià(
	g£v”™y_
 =ğ
GTEST_FATAL
) {

1069 
fæush
(
¡d”r
);

1070 
	gposix
::
AbÜt
();

1076 
GTEST_DISABLE_MSC_DEPRECATED_PUSH_
()

1078 #ià
GTEST_HAS_STREAM_REDIRECTION


1081 şas 
	cC­tu»dSŒ—m
 {

1082 
	gpublic
:

1084 
ex¶ic™
 
C­tu»dSŒ—m
(
fd
è: 
fd_
(fd), 
unÿ±u»d_fd_
(
dup
(fd)) {

1085 #ià
GTEST_OS_WINDOWS


1086 
	g‹mp_dœ_·th
[
MAX_PATH
 + 1] = { '\0' };

1087 
	g‹mp_fe_·th
[
MAX_PATH
 + 1] = { '\0' };

1089 ::
G‘TempP©hA
((
‹mp_dœ_·th
),emp_dir_path);

1090 cÚ¡ 
UINT
 
	gsucûss
 = ::
G‘TempFeNameA
(
‹mp_dœ_·th
,

1093 
‹mp_fe_·th
);

1094 
GTEST_CHECK_
(
sucûss
 != 0)

1095 << "UÇbËØü—‹‡empÜ¬y fš " << 
‹mp_dœ_·th
;

1096 cÚ¡ 
	gÿ±u»d_fd
 = 
ü—t
(
‹mp_fe_·th
, 
_S_IREAD
 | 
_S_IWRITE
);

1097 
GTEST_CHECK_
(
ÿ±u»d_fd
 != -1) << "Unableo openemporary file "

1098 << 
‹mp_fe_·th
;

1099 
	gf’ame_
 = 
‹mp_fe_·th
;

1105 #ià
GTEST_OS_LINUX_ANDROID


1117 
	gÇme_‹m¶©e
[] = "/data/local/tmp/gtest_captured_stream.XXXXXX";

1118 #–ià
GTEST_OS_IOS


1119 
NSSŒšg
* 
	g‹mp_·th
 = [
NSTempÜ¬yDœeùÜy
()

1120 
¡ršgByAµ’dšgP©hCompÚ’t
:@"gtest_captured_stream.XXXXXX"];

1122 
	gÇme_‹m¶©e
[
PATH_MAX
 + 1];

1123 
¡ºıy
(
Çme_‹m¶©e
, [
‹mp_·th
 
UTF8SŒšg
], 
PATH_MAX
);

1125 
	gÇme_‹m¶©e
[] = "/tmp/captured_stream.XXXXXX";

1127 cÚ¡ 
	gÿ±u»d_fd
 = 
mk¡emp
(
Çme_‹m¶©e
);

1128 ià(
	gÿ±u»d_fd
 == -1) {

1129 
GTEST_LOG_
(
WARNING
)

1130 << "FaedØü—‹m°f" << 
Çme_‹m¶©e


1133 
	gf’ame_
 = 
Çme_‹m¶©e
;

1135 
fæush
(
nuÎ±r
);

1136 
dup2
(
ÿ±u»d_fd
, 
fd_
);

1137 
şo£
(
ÿ±u»d_fd
);

1140 ~
C­tu»dSŒ—m
() {

1141 
»move
(
f’ame_
.
c_¡r
());

1144 
	g¡d
::
¡ršg
 
G‘C­tu»dSŒšg
() {

1145 ià(
unÿ±u»d_fd_
 != -1) {

1147 
fæush
(
nuÎ±r
);

1148 
dup2
(
unÿ±u»d_fd_
, 
fd_
);

1149 
şo£
(
unÿ±u»d_fd_
);

1150 
	gunÿ±u»d_fd_
 = -1;

1153 
FILE
* cÚ¡ 
	gfe
 = 
posix
::
FO³n
(
f’ame_
.
c_¡r
(), "r");

1154 ià(
	gfe
 =ğ
nuÎ±r
) {

1155 
GTEST_LOG_
(
FATAL
è<< "FaedØİ’m°f" << 
f’ame_


1158 cÚ¡ 
	g¡d
::
¡ršg
 
cÚ‹Á
 = 
R—dEÁœeFe
(
fe
);

1159 
	gposix
::
FClo£
(
fe
);

1160  
	gcÚ‹Á
;

1163 
	g´iv©e
:

1164 cÚ¡ 
fd_
;

1165 
	gunÿ±u»d_fd_
;

1167 ::
¡d
::
¡ršg
 
f’ame_
;

1169 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
C­tu»dSŒ—m
);

1172 
GTEST_DISABLE_MSC_DEPRECATED_POP_
()

1174 
C­tu»dSŒ—m
* 
	gg_ÿ±u»d_¡d”r
 = 
nuÎ±r
;

1175 
C­tu»dSŒ—m
* 
	gg_ÿ±u»d_¡dout
 = 
nuÎ±r
;

1178 
C­tu»SŒ—m
(
fd
, cÚ¡ * 
¡»am_Çme
,

1179 
C­tu»dSŒ—m
** 
¡»am
) {

1180 ià(*
	g¡»am
 !ğ
nuÎ±r
) {

1181 
GTEST_LOG_
(
FATAL
è<< "OÆy oÃ " << 
¡»am_Çme


1184 *
	g¡»am
 = 
Ãw
 
C­tu»dSŒ—m
(
fd
);

1188 
	g¡d
::
¡ršg
 
G‘C­tu»dSŒ—m
(
C­tu»dSŒ—m
** 
ÿ±u»d_¡»am
) {

1189 cÚ¡ 
¡d
::
¡ršg
 
cÚ‹Á
 = (*
ÿ±u»d_¡»am
)->
G‘C­tu»dSŒšg
();

1191 
d–‘e
 *
	gÿ±u»d_¡»am
;

1192 *
	gÿ±u»d_¡»am
 = 
nuÎ±r
;

1194  
	gcÚ‹Á
;

1198 
C­tu»Stdout
() {

1199 
C­tu»SŒ—m
(
kStdOutF’o
, "¡dout", &
g_ÿ±u»d_¡dout
);

1203 
C­tu»Std”r
() {

1204 
C­tu»SŒ—m
(
kStdE¼F’o
, "¡d”r", &
g_ÿ±u»d_¡d”r
);

1208 
	g¡d
::
¡ršg
 
G‘C­tu»dStdout
() {

1209  
G‘C­tu»dSŒ—m
(&
g_ÿ±u»d_¡dout
);

1213 
	g¡d
::
¡ršg
 
G‘C­tu»dStd”r
() {

1214  
G‘C­tu»dSŒ—m
(&
g_ÿ±u»d_¡d”r
);

1223 
size_t
 
G‘FeSize
(
FILE
* 
fe
) {

1224 
f£ek
(
fe
, 0, 
SEEK_END
);

1225  
	g¡©ic_ÿ¡
<
	gsize_t
>(
á–l
(
fe
));

1228 
	g¡d
::
¡ršg
 
R—dEÁœeFe
(
FILE
* 
fe
) {

1229 cÚ¡ 
size_t
 
fe_size
 = 
G‘FeSize
(
fe
);

1230 * cÚ¡ 
	gbufãr
 = 
Ãw
 [
fe_size
];

1232 
size_t
 
	gby‹s_Ï¡_»ad
 = 0;

1233 
size_t
 
	gby‹s_»ad
 = 0;

1235 
f£ek
(
fe
, 0, 
SEEK_SET
);

1240 
	gby‹s_Ï¡_»ad
 = 
ä—d
(
bufãr
+
by‹s_»ad
, 1, 
fe_size
-by‹s_»ad, 
fe
);

1241 
	gby‹s_»ad
 +ğ
by‹s_Ï¡_»ad
;

1242 } 
	gby‹s_Ï¡_»ad
 > 0 && 
	gby‹s_»ad
 < 
	gfe_size
);

1244 cÚ¡ 
	g¡d
::
¡ršg
 
cÚ‹Á
(
bufãr
, 
by‹s_»ad
);

1245 
	gd–‘e
[] 
	gbufãr
;

1247  
	gcÚ‹Á
;

1250 #ià
GTEST_HAS_DEATH_TEST


1251 cÚ¡ 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
>* 
g_šjeùed_‹¡_¬gvs
 =

1252 
nuÎ±r
;

1254 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> 
G‘InjeùabËArgvs
() {

1255 ià(
g_šjeùed_‹¡_¬gvs
 !ğ
nuÎ±r
) {

1256  *
g_šjeùed_‹¡_¬gvs
;

1258  
G‘Argvs
();

1261 
S‘InjeùabËArgvs
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
>* 
Ãw_¬gvs
) {

1262 ià(
g_šjeùed_‹¡_¬gvs
 !ğ
Ãw_¬gvs
è
d–‘e
 g_injected_test_argvs;

1263 
	gg_šjeùed_‹¡_¬gvs
 = 
Ãw_¬gvs
;

1266 
S‘InjeùabËArgvs
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
>& 
Ãw_¬gvs
) {

1267 
S‘InjeùabËArgvs
(

1268 
Ãw
 
¡d
::
veùÜ
<¡d::
¡ršg
>(
Ãw_¬gvs
.
begš
(),‚ew_¬gvs.
’d
()));

1271 
CË¬InjeùabËArgvs
() {

1272 
d–‘e
 
	gg_šjeùed_‹¡_¬gvs
;

1273 
	gg_šjeùed_‹¡_¬gvs
 = 
nuÎ±r
;

1277 #ià
GTEST_OS_WINDOWS_MOBILE


1278 
Çme¥aû
 
	gposix
 {

1279 
AbÜt
() {

1280 
DebugB»ak
();

1281 
T”mš©eProûss
(
G‘Cu¼’tProûss
(), 1);

1289 
	g¡d
::
¡ršg
 
FÏgToEnvV¬
(cÚ¡ * 
æag
) {

1290 cÚ¡ 
¡d
::
¡ršg
 
fuÎ_æag
 =

1291 (
Mes§ge
(è<< 
GTEST_FLAG_PREFIX_
 << 
æag
).
G‘SŒšg
();

1293 
Mes§ge
 
	g’v_v¬
;

1294 
size_t
 
	gi
 = 0; i !ğ
fuÎ_æag
.
Ëngth
(); i++) {

1295 
	g’v_v¬
 << 
ToUµ”
(
fuÎ_æag
.
c_¡r
()[
i
]);

1298  
	g’v_v¬
.
G‘SŒšg
();

1304 
boŞ
 
P¬£IÁ32
(cÚ¡ 
Mes§ge
& 
¤c_‹xt
, cÚ¡ * 
¡r
, 
št32_t
* 
v®ue
) {

1306 * 
	g’d
 = 
nuÎ±r
;

1307 cÚ¡ 
	glÚg_v®ue
 = 
¡¹Ş
(
¡r
, &
’d
, 10);

1310 ià(*
	g’d
 != '\0') {

1312 
Mes§ge
 
msg
;

1313 
	gmsg
 << "WARNING: " << 
	g¤c_‹xt


1315 << " ha v®u\"" << 
	g¡r
 << "\".\n";

1316 
´štf
("%s", 
msg
.
G‘SŒšg
().
c_¡r
());

1317 
fæush
(
¡dout
);

1318  
	gçl£
;

1322 cÚ¡‡utØ
	g»suÉ
 = 
¡©ic_ÿ¡
<
št32_t
>(
lÚg_v®ue
);

1323 ià(
	glÚg_v®ue
 =ğ
LONG_MAX
 || 
lÚg_v®ue
 =ğ
LONG_MIN
 ||

1326 
»suÉ
 !ğ
lÚg_v®ue


1329 
Mes§ge
 
msg
;

1330 
	gmsg
 << "WARNING: " << 
	g¤c_‹xt


1332 << " ha v®u" << 
	g¡r
 << ", which overflows.\n";

1333 
´štf
("%s", 
msg
.
G‘SŒšg
().
c_¡r
());

1334 
fæush
(
¡dout
);

1335  
	gçl£
;

1338 *
	gv®ue
 = 
»suÉ
;

1339  
	gŒue
;

1346 
boŞ
 
BoŞFromGTe¡Env
(cÚ¡ * 
æag
, boŞ 
deçuÉ_v®ue
) {

1347 #ià
defšed
(
GTEST_GET_BOOL_FROM_ENV_
)

1348  
GTEST_GET_BOOL_FROM_ENV_
(
æag
, 
deçuÉ_v®ue
);

1350 cÚ¡ 
	g¡d
::
¡ršg
 
’v_v¬
 = 
FÏgToEnvV¬
(
æag
);

1351 cÚ¡ * cÚ¡ 
	g¡ršg_v®ue
 = 
posix
::
G‘Env
(
’v_v¬
.
c_¡r
());

1352  
	g¡ršg_v®ue
 =ğ
nuÎ±r
 ? 
deçuÉ_v®ue


1353 : 
¡rcmp
(
¡ršg_v®ue
, "0") != 0;

1360 
št32_t
 
IÁ32FromGTe¡Env
(cÚ¡ * 
æag
, iÁ32_ˆ
deçuÉ_v®ue
) {

1361 #ià
defšed
(
GTEST_GET_INT32_FROM_ENV_
)

1362  
GTEST_GET_INT32_FROM_ENV_
(
æag
, 
deçuÉ_v®ue
);

1364 cÚ¡ 
	g¡d
::
¡ršg
 
’v_v¬
 = 
FÏgToEnvV¬
(
æag
);

1365 cÚ¡ * cÚ¡ 
	g¡ršg_v®ue
 = 
posix
::
G‘Env
(
’v_v¬
.
c_¡r
());

1366 ià(
	g¡ršg_v®ue
 =ğ
nuÎ±r
) {

1368  
deçuÉ_v®ue
;

1371 
št32_t
 
	g»suÉ
 = 
deçuÉ_v®ue
;

1372 ià(!
P¬£IÁ32
(
Mes§ge
(è<< "EnvœÚm’ˆv¬ŸbË " << 
’v_v¬
,

1373 
¡ršg_v®ue
, &
»suÉ
)) {

1374 
´štf
("The default value %s is used.\n",

1375 (
Mes§ge
(è<< 
deçuÉ_v®ue
).
G‘SŒšg
().
c_¡r
());

1376 
fæush
(
¡dout
);

1377  
	gdeçuÉ_v®ue
;

1380  
	g»suÉ
;

1392 
	g¡d
::
¡ršg
 
OuutFÏgAlsoCheckEnvV¬
(){

1393 
¡d
::
¡ršg
 
deçuÉ_v®ue_fÜ_ouut_æag
 = "";

1394 cÚ¡ * 
	gxml_ouut_fe_’v
 = 
posix
::
G‘Env
("XML_OUTPUT_FILE");

1395 ià(
	gnuÎ±r
 !ğ
xml_ouut_fe_’v
) {

1396 
deçuÉ_v®ue_fÜ_ouut_æag
 = 
¡d
::
¡ršg
("xml:"è+ 
xml_ouut_fe_’v
;

1398  
	gdeçuÉ_v®ue_fÜ_ouut_æag
;

1403 cÚ¡ * 
SŒšgFromGTe¡Env
(cÚ¡ * 
æag
, cÚ¡ * 
deçuÉ_v®ue
) {

1404 #ià
defšed
(
GTEST_GET_STRING_FROM_ENV_
)

1405  
GTEST_GET_STRING_FROM_ENV_
(
æag
, 
deçuÉ_v®ue
);

1407 cÚ¡ 
	g¡d
::
¡ršg
 
’v_v¬
 = 
FÏgToEnvV¬
(
æag
);

1408 cÚ¡ * cÚ¡ 
	gv®ue
 = 
posix
::
G‘Env
(
’v_v¬
.
c_¡r
());

1409  
	gv®ue
 =ğ
nuÎ±r
 ? 
deçuÉ_v®ue
 : 
v®ue
;

	@third_party/googletest/googletest/src/gtest-printers.cc

44 
	~"g‹¡/g‹¡-´š‹rs.h
"

46 
	~<¡dio.h
>

48 
	~<cùy³
>

49 
	~<c¡dšt
>

50 
	~<cwch¬
>

51 
	~<o¡»am
>

52 
	~<¡ršg
>

53 
	~<ty³_Œa™s
>

55 
	~"g‹¡/š‹º®/g‹¡-pÜt.h
"

56 
	~"¤c/g‹¡-š‹º®-šl.h
"

58 
Çme¥aû
 
	g‹¡šg
 {

60 
	gÇme¥aû
 {

62 
	gusšg
 ::
¡d
::
o¡»am
;

65 
GTEST_ATTRIBUTE_NO_SANITIZE_MEMORY_


66 
GTEST_ATTRIBUTE_NO_SANITIZE_ADDRESS_


67 
GTEST_ATTRIBUTE_NO_SANITIZE_HWADDRESS_


68 
GTEST_ATTRIBUTE_NO_SANITIZE_THREAD_


69 
PrštBy‹Segm’tInObjeùTo
(cÚ¡ * 
obj_by‹s
, 
size_t
 
¡¬t
,

70 
size_t
 
couÁ
, 
o¡»am
* 
os
) {

71 
	g‹xt
[5] = "";

72 
size_t
 
	gi
 = 0; i !ğ
couÁ
; i++) {

73 cÚ¡ 
size_t
 
	gj
 = 
¡¬t
 + 
i
;

74 ià(
	gi
 != 0) {

77 ià((
j
 % 2) == 0)

78 *
os
 << ' ';

80 *
	gos
 << '-';

82 
GTEST_SNPRINTF_
(
‹xt
, Ñext), "%02X", 
obj_by‹s
[
j
]);

83 *
	gos
 << 
	g‹xt
;

88 
PrštBy‹sInObjeùToIm¶
(cÚ¡ * 
obj_by‹s
, 
size_t
 
couÁ
,

89 
o¡»am
* 
os
) {

91 *
	gos
 << 
	gcouÁ
 << "-byte object <";

93 cÚ¡ 
size_t
 
	gkTh»shŞd
 = 132;

94 cÚ¡ 
size_t
 
	gkChunkSize
 = 64;

98 ià(
	gcouÁ
 < 
	gkTh»shŞd
) {

99 
PrštBy‹Segm’tInObjeùTo
(
obj_by‹s
, 0, 
couÁ
, 
os
);

101 
PrštBy‹Segm’tInObjeùTo
(
obj_by‹s
, 0, 
kChunkSize
, 
os
);

102 *
	gos
 << " ... ";

104 cÚ¡ 
size_t
 
	g»sume_pos
 = (
couÁ
 - 
kChunkSize
 + 1)/2*2;

105 
PrštBy‹Segm’tInObjeùTo
(
obj_by‹s
, 
»sume_pos
, 
couÁ
 -„esume_pos, 
os
);

107 *
	gos
 << ">";

114 
	g‹m¶©e
 <
ty³Çme
 
	gCh¬Ty³
>

115 
ch¬32_t
 
ToCh¬32
(
Ch¬Ty³
 
š
) {

116  
	g¡©ic_ÿ¡
<
	gch¬32_t
>(

117 
	g¡©ic_ÿ¡
<
ty³Çme
 
	g¡d
::
make_unsigÃd
<
Ch¬Ty³
>::
ty³
>(
š
));

122 
Çme¥aû
 
	gš‹º®
 {

129 
PrštBy‹sInObjeùTo
(cÚ¡ * 
obj_by‹s
, 
size_t
 
couÁ
,

130 
o¡»am
* 
os
) {

131 
PrštBy‹sInObjeùToIm¶
(
obj_by‹s
, 
couÁ
, 
os
);

139 
	eCh¬FÜm©
 {

140 
	gkAsIs
,

141 
	gkHexEsÿ³
,

142 
	gkS³cŸlEsÿ³


148 
šlše
 
boŞ
 
IsPršbËAscii
(
ch¬32_t
 
c
) {  0x20 <= c && c <= 0x7E; }

153 
	g‹m¶©e
 <
ty³Çme
 
	gCh¬
>

154 
Ch¬FÜm©
 
PrštAsCh¬L™”®To
(
Ch¬
 
c
, 
o¡»am
* 
os
) {

155 cÚ¡ 
ch¬32_t
 
	gu_c
 = 
ToCh¬32
(
c
);

156 
	gu_c
) {

157 
	gL
'\0':

158 *
os
 << "\\0";

160 
	gL
'\'':

161 *
os
 << "\\'";

163 
	gL
'\\':

164 *
os
 << "\\\\";

166 
	gL
'\a':

167 *
os
 << "\\a";

169 
	gL
'\b':

170 *
os
 << "\\b";

172 
	gL
'\f':

173 *
os
 << "\\f";

175 
	gL
'\n':

176 *
os
 << "\\n";

178 
	gL
'\r':

179 *
os
 << "\\r";

181 
	gL
'\t':

182 *
os
 << "\\t";

184 
	gL
'\v':

185 *
os
 << "\\v";

188 ià(
IsPršbËAscii
(
u_c
)) {

189 *
os
 << 
¡©ic_ÿ¡
<>(
c
);

190  
	gkAsIs
;

192 
	go¡»am
::
fmtæags
 
æags
 = 
os
->flags();

193 *
	gos
 << "\\x" << 
	g¡d
::
hex
 << 
¡d
::
uµ”ÿ£
 << 
¡©ic_ÿ¡
<>(
u_c
);

194 
	gos
->
æags
(flags);

195  
	gkHexEsÿ³
;

198  
	gkS³cŸlEsÿ³
;

203 
Ch¬FÜm©
 
PrštAsSŒšgL™”®To
(
ch¬32_t
 
c
, 
o¡»am
* 
os
) {

204 
	gc
) {

205 
	gL
'\'':

206 *
os
 << "'";

207  
	gkAsIs
;

208 
	gL
'"':

209 *
os
 << "\\\"";

210  
	gkS³cŸlEsÿ³
;

212  
PrštAsCh¬L™”®To
(
c
, 
os
);

216 cÚ¡ * 
G‘Ch¬WidthP»fix
() {

220 cÚ¡ * 
G‘Ch¬WidthP»fix
(signed ) {

224 cÚ¡ * 
G‘Ch¬WidthP»fix
() {

228 #ifdeà
__ıp_ch¬8_t


229 cÚ¡ * 
G‘Ch¬WidthP»fix
(
ch¬8_t
) {

234 cÚ¡ * 
G‘Ch¬WidthP»fix
(
ch¬16_t
) {

238 cÚ¡ * 
G‘Ch¬WidthP»fix
(
ch¬32_t
) {

242 cÚ¡ * 
G‘Ch¬WidthP»fix
(
wch¬_t
) {

248 
Ch¬FÜm©
 
PrštAsSŒšgL™”®To
(
c
, 
o¡»am
* 
os
) {

249  
PrštAsSŒšgL™”®To
(
ToCh¬32
(
c
), 
os
);

252 #ifdeà
__ıp_ch¬8_t


253 
Ch¬FÜm©
 
PrštAsSŒšgL™”®To
(
ch¬8_t
 
c
, 
o¡»am
* 
os
) {

254  
PrštAsSŒšgL™”®To
(
ToCh¬32
(
c
), 
os
);

258 
Ch¬FÜm©
 
PrštAsSŒšgL™”®To
(
ch¬16_t
 
c
, 
o¡»am
* 
os
) {

259  
PrštAsSŒšgL™”®To
(
ToCh¬32
(
c
), 
os
);

262 
Ch¬FÜm©
 
PrštAsSŒšgL™”®To
(
wch¬_t
 
c
, 
o¡»am
* 
os
) {

263  
PrštAsSŒšgL™”®To
(
ToCh¬32
(
c
), 
os
);

269 
	g‹m¶©e
 <
ty³Çme
 
	gCh¬
>

270 
PrštCh¬AndCodeTo
(
Ch¬
 
c
, 
o¡»am
* 
os
) {

272 *
	gos
 << 
G‘Ch¬WidthP»fix
(
c
) << "'";

273 cÚ¡ 
Ch¬FÜm©
 
	gfÜm©
 = 
PrštAsCh¬L™”®To
(
c
, 
os
);

274 *
	gos
 << "'";

279 ià(
	gc
 == 0)

281 *
	gos
 << " (" << 
	g¡©ic_ÿ¡
<>(
	gc
);

286 ià(
	gfÜm©
 =ğ
kHexEsÿ³
 || (1 <ğ
c
 && c <= 9)) {

289 *
os
 << ", 0x" << 
SŒšg
::
FÜm©HexIÁ
(
¡©ic_ÿ¡
<>(
c
));

291 *
	gos
 << ")";

294 
PrštTo
(
c
, ::
¡d
::
o¡»am
* 
os
è{ 
PrštCh¬AndCodeTo
(c, os); }

295 
PrštTo
(sigÃd 
c
, ::
¡d
::
o¡»am
* 
os
è{ 
PrštCh¬AndCodeTo
(c, os); }

299 
PrštTo
(
wch¬_t
 
wc
, 
o¡»am
* 
os
è{ 
PrštCh¬AndCodeTo
(wc, os); }

302 
PrštTo
(
ch¬32_t
 
c
, ::
¡d
::
o¡»am
* 
os
) {

303 *
os
 << 
¡d
::
hex
 << "U+" << std::
uµ”ÿ£
 << std::
£tfl
('0'è<< std::
£tw
(4)

304 << 
¡©ic_ÿ¡
<
ušt32_t
>(
c
);

311 
	g‹m¶©e
 <
ty³Çme
 
	gCh¬Ty³
>

312 
GTEST_ATTRIBUTE_NO_SANITIZE_MEMORY_


313 
GTEST_ATTRIBUTE_NO_SANITIZE_ADDRESS_


314 
GTEST_ATTRIBUTE_NO_SANITIZE_HWADDRESS_


315 
GTEST_ATTRIBUTE_NO_SANITIZE_THREAD_


316 
Ch¬FÜm©
 
PrštCh¬sAsSŒšgTo
(

317 cÚ¡ 
Ch¬Ty³
* 
begš
, 
size_t
 
Ën
, 
o¡»am
* 
os
) {

318 cÚ¡ * cÚ¡ 
	gquÙe_´efix
 = 
G‘Ch¬WidthP»fix
(*
begš
);

319 *
	gos
 << 
	gquÙe_´efix
 << "\"";

320 
boŞ
 
	gis_´evious_hex
 = 
çl£
;

321 
Ch¬FÜm©
 
	g´št_fÜm©
 = 
kAsIs
;

322 
size_t
 
	gšdex
 = 0; index < 
	gËn
; ++index) {

323 cÚ¡ 
Ch¬Ty³
 
	gcur
 = 
begš
[
šdex
];

324 ià(
	gis_´evious_hex
 && 
IsXDig™
(
cur
)) {

328 *
	gos
 << "\" " << 
	gquÙe_´efix
 << "\"";

330 
	gis_´evious_hex
 = 
PrštAsSŒšgL™”®To
(
cur
, 
os
è=ğ
kHexEsÿ³
;

332 ià(
	gis_´evious_hex
) {

333 
	g´št_fÜm©
 = 
kHexEsÿ³
;

336 *
	gos
 << "\"";

337  
	g´št_fÜm©
;

342 
	g‹m¶©e
 <
ty³Çme
 
	gCh¬Ty³
>

343 
GTEST_ATTRIBUTE_NO_SANITIZE_MEMORY_


344 
GTEST_ATTRIBUTE_NO_SANITIZE_ADDRESS_


345 
GTEST_ATTRIBUTE_NO_SANITIZE_HWADDRESS_


346 
GTEST_ATTRIBUTE_NO_SANITIZE_THREAD_


347 
Univ”§lPrštCh¬A¼ay
(

348 cÚ¡ 
Ch¬Ty³
* 
begš
, 
size_t
 
Ën
, 
o¡»am
* 
os
) {

356 ià(
	gËn
 > 0 && 
	gbegš
[
Ën
 - 1] == '\0') {

357 
PrštCh¬sAsSŒšgTo
(
begš
, 
Ën
 - 1, 
os
);

365 
PrštCh¬sAsSŒšgTo
(
begš
, 
Ën
, 
os
);

366 *
	gos
 << " (noerminating NUL)";

370 
Univ”§lPrštA¼ay
(cÚ¡ * 
begš
, 
size_t
 
Ën
, 
o¡»am
* 
os
) {

371 
Univ”§lPrštCh¬A¼ay
(
begš
, 
Ën
, 
os
);

374 #ifdeà
__ıp_ch¬8_t


377 
Univ”§lPrštA¼ay
(cÚ¡ 
ch¬8_t
* 
begš
, 
size_t
 
Ën
, 
o¡»am
* 
os
) {

378 
Univ”§lPrštCh¬A¼ay
(
begš
, 
Ën
, 
os
);

384 
Univ”§lPrštA¼ay
(cÚ¡ 
ch¬16_t
* 
begš
, 
size_t
 
Ën
, 
o¡»am
* 
os
) {

385 
Univ”§lPrštCh¬A¼ay
(
begš
, 
Ën
, 
os
);

390 
Univ”§lPrštA¼ay
(cÚ¡ 
ch¬32_t
* 
begš
, 
size_t
 
Ën
, 
o¡»am
* 
os
) {

391 
Univ”§lPrštCh¬A¼ay
(
begš
, 
Ën
, 
os
);

396 
Univ”§lPrštA¼ay
(cÚ¡ 
wch¬_t
* 
begš
, 
size_t
 
Ën
, 
o¡»am
* 
os
) {

397 
Univ”§lPrštCh¬A¼ay
(
begš
, 
Ën
, 
os
);

400 
	gÇme¥aû
 {

403 
	g‹m¶©e
 <
ty³Çme
 
	gCh¬
>

404 
PrštCSŒšgTo
(cÚ¡ 
Ch¬
* 
s
, 
o¡»am
* 
os
) {

405 ià(
	gs
 =ğ
nuÎ±r
) {

406 *
os
 << "NULL";

408 *
	gos
 << 
	gIm¶ic™Ca¡_
<cÚ¡ *>(
	gs
) << "…ointingo ";

409 
PrštCh¬sAsSŒšgTo
(
s
, 
¡d
::
ch¬_Œa™s
<
Ch¬
>::
Ëngth
(s), 
os
);

415 
PrštTo
(cÚ¡ * 
s
, 
o¡»am
* 
os
è{ 
PrštCSŒšgTo
(s, os); }

417 #ifdeà
__ıp_ch¬8_t


418 
PrštTo
(cÚ¡ 
ch¬8_t
* 
s
, 
o¡»am
* 
os
è{ 
PrštCSŒšgTo
(s, os); }

421 
PrštTo
(cÚ¡ 
ch¬16_t
* 
s
, 
o¡»am
* 
os
è{ 
PrštCSŒšgTo
(s, os); }

423 
PrštTo
(cÚ¡ 
ch¬32_t
* 
s
, 
o¡»am
* 
os
è{ 
PrštCSŒšgTo
(s, os); }

431 #ià!
defšed
(
_MSC_VER
è|| defšed(
_NATIVE_WCHAR_T_DEFINED
)

433 
PrštTo
(cÚ¡ 
wch¬_t
* 
s
, 
o¡»am
* 
os
è{ 
PrštCSŒšgTo
(s, os); }

436 
	gÇme¥aû
 {

438 
boŞ
 
CÚšsUÅršbËCÚŒŞCodes
(cÚ¡ * 
¡r
, 
size_t
 
Ëngth
) {

439 cÚ¡ *
	gs
 = 
»š‹½»t_ÿ¡
<cÚ¡ *>(
¡r
);

441 
size_t
 
	gi
 = 0; i < 
	gËngth
; i++) {

442 
	gch
 = *
s
++;

443 ià(
	g¡d
::
isúŒl
(
ch
)) {

444 
ch
) {

450  
Œue
;

454  
	gçl£
;

457 
boŞ
 
IsUTF8T¿By‹
(
t
) {  0x80 <= &&<= 0xbf; }

459 
boŞ
 
IsV®idUTF8
(cÚ¡ * 
¡r
, 
size_t
 
Ëngth
) {

460 cÚ¡ *
	gs
 = 
»š‹½»t_ÿ¡
<cÚ¡ *>(
¡r
);

462 
size_t
 
	gi
 = 0; i < 
	gËngth
;) {

463 
	gËad
 = 
s
[
i
++];

465 ià(
	gËad
 <= 0x7f) {

468 ià(
	gËad
 < 0xc2) {

469  
	gçl£
;

470 } ià(
	gËad
 <ğ0xdà&& (
i
 + 1è<ğ
Ëngth
 && 
IsUTF8T¿By‹
(
s
[i])) {

471 ++
i
;

472 } ià(0xe0 <ğ
Ëad
 &&†—d <ğ0xeà&& (
i
 + 2è<ğ
Ëngth
 &&

473 
IsUTF8T¿By‹
(
s
[
i
]) &&

474 
IsUTF8T¿By‹
(
s
[
i
 + 1]) &&

476 (
Ëad
 !ğ0xe0 || 
s
[
i
] >= 0xa0) &&

477 (
Ëad
 !ğ0xed || 
s
[
i
] < 0xa0)) {

478 
i
 += 2;

479 } ià(0xf0 <ğ
Ëad
 &&†—d <ğ0xf4 && (
i
 + 3è<ğ
Ëngth
 &&

480 
IsUTF8T¿By‹
(
s
[
i
]) &&

481 
IsUTF8T¿By‹
(
s
[
i
 + 1]) &&

482 
IsUTF8T¿By‹
(
s
[
i
 + 2]) &&

484 (
Ëad
 !ğ0xf0 || 
s
[
i
] >= 0x90) &&

485 (
Ëad
 !ğ0xf4 || 
s
[
i
] < 0x90)) {

486 
i
 += 3;

488  
	gçl£
;

491  
	gŒue
;

494 
CÚd™iÚ®PrštAsText
(cÚ¡ * 
¡r
, 
size_t
 
Ëngth
, 
o¡»am
* 
os
) {

495 ià(!
CÚšsUÅršbËCÚŒŞCodes
(
¡r
, 
Ëngth
) &&

496 
IsV®idUTF8
(
¡r
, 
Ëngth
)) {

497 *
	gos
 << "\À A Text: \"" << 
	g¡r
 << "\"";

503 
PrštSŒšgTo
(cÚ¡ ::
¡d
::
¡ršg
& 
s
, 
o¡»am
* 
os
) {

504 ià(
PrštCh¬sAsSŒšgTo
(
s
.
d©a
(), s.
size
(), 
os
è=ğ
kHexEsÿ³
) {

505 ià(
GTEST_FLAG
(
´št_utf8
)) {

506 
CÚd™iÚ®PrštAsText
(
s
.
d©a
(), s.
size
(), 
os
);

511 #ifdeà
__ıp_ch¬8_t


512 
PrštU8SŒšgTo
(cÚ¡ ::
¡d
::
u8¡ršg
& 
s
, 
o¡»am
* 
os
) {

513 
PrštCh¬sAsSŒšgTo
(
s
.
d©a
(), s.
size
(), 
os
);

517 
PrštU16SŒšgTo
(cÚ¡ ::
¡d
::
u16¡ršg
& 
s
, 
o¡»am
* 
os
) {

518 
PrštCh¬sAsSŒšgTo
(
s
.
d©a
(), s.
size
(), 
os
);

521 
PrštU32SŒšgTo
(cÚ¡ ::
¡d
::
u32¡ršg
& 
s
, 
o¡»am
* 
os
) {

522 
PrštCh¬sAsSŒšgTo
(
s
.
d©a
(), s.
size
(), 
os
);

525 #ià
GTEST_HAS_STD_WSTRING


526 
PrštWideSŒšgTo
(cÚ¡ ::
¡d
::
w¡ršg
& 
s
, 
o¡»am
* 
os
) {

527 
PrštCh¬sAsSŒšgTo
(
s
.
d©a
(), s.
size
(), 
os
);

	@third_party/googletest/googletest/src/gtest-test-part.cc

33 
	~"g‹¡/g‹¡-‹¡-·¹.h
"

35 
	~"g‹¡/š‹º®/g‹¡-pÜt.h
"

36 
	~"¤c/g‹¡-š‹º®-šl.h
"

38 
Çme¥aû
 
	g‹¡šg
 {

40 
usšg
 
	gš‹º®
::
G‘Un™Te¡Im¶
;

44 
	g¡d
::
¡ršg
 
Te¡P¬tResuÉ
::
ExŒaùSumm¬y
(cÚ¡ * 
mes§ge
) {

45 cÚ¡ * cÚ¡ 
¡ack_Œaû
 = 
¡r¡r
(
mes§ge
, 
š‹º®
::
kSckT¿ûM¬k”
);

46  
	g¡ack_Œaû
 =ğ
nuÎ±r
 ? 
mes§ge
 : 
¡d
::
¡ršg
(mes§ge, 
¡ack_Œaû
);

50 
	g¡d
::
o¡»am
& 
İ”©Ü
<<(
¡d
::o¡»am& 
os
, cÚ¡ 
	gTe¡P¬tResuÉ
& 
	g»suÉ
) {

51  
	gos
 << 
	gš‹º®
::
FÜm©FeLoÿtiÚ
(
»suÉ
.
fe_Çme
(),

52 
»suÉ
.
lše_numb”
())

54 << (
	g»suÉ
.
ty³
(è=ğ
Te¡P¬tResuÉ
::
kSucûss


56 : 
»suÉ
.
ty³
(è=ğ
Te¡P¬tResuÉ
::
kSk


58 : 
»suÉ
.
ty³
(è=ğ
Te¡P¬tResuÉ
::
kF©®Fau»


62 << 
»suÉ
.
mes§ge
(è<< 
¡d
::
’dl
;

66 
	gTe¡P¬tResuÉA¼ay
::
Aµ’d
(cÚ¡ 
Te¡P¬tResuÉ
& 
»suÉ
) {

67 
¬¿y_
.
push_back
(
»suÉ
);

71 cÚ¡ 
	gTe¡P¬tResuÉ
& 
	gTe¡P¬tResuÉA¼ay
::
G‘Te¡P¬tResuÉ
(
šdex
) const {

72 ià(
šdex
 < 0 || index >ğ
size
()) {

73 
´štf
("\nInv®id index (%dèštØTe¡P¬tResuÉA¼ay.\n", 
šdex
);

74 
	gš‹º®
::
posix
::
AbÜt
();

77  
	g¬¿y_
[
¡©ic_ÿ¡
<
size_t
>(
šdex
)];

81 
	gTe¡P¬tResuÉA¼ay
::
size
() const {

82  
¡©ic_ÿ¡
<>(
¬¿y_
.
size
());

85 
Çme¥aû
 
	gš‹º®
 {

87 
	gHasNewF©®Fau»H–³r
::
HasNewF©®Fau»H–³r
()

88 : 
has_Ãw_çl_çu»_
(
çl£
),

89 
Üigš®_»pÜ‹r_
(
G‘Un™Te¡Im¶
()->

90 
G‘Te¡P¬tResuÉR•Ü‹rFÜCu¼’tTh»ad
()) {

91 
G‘Un™Te¡Im¶
()->
S‘Te¡P¬tResuÉR•Ü‹rFÜCu¼’tTh»ad
(
this
);

94 
	gHasNewF©®Fau»H–³r
::~
HasNewF©®Fau»H–³r
() {

95 
G‘Un™Te¡Im¶
()->
S‘Te¡P¬tResuÉR•Ü‹rFÜCu¼’tTh»ad
(

96 
Üigš®_»pÜ‹r_
);

99 
	gHasNewF©®Fau»H–³r
::
R•ÜtTe¡P¬tResuÉ
(

100 cÚ¡ 
Te¡P¬tResuÉ
& 
»suÉ
) {

101 ià(
»suÉ
.
çÎy_çed
())

102 
has_Ãw_çl_çu»_
 = 
Œue
;

103 
	gÜigš®_»pÜ‹r_
->
R•ÜtTe¡P¬tResuÉ
(
»suÉ
);

	@third_party/googletest/googletest/src/gtest-typed-test.cc

31 
	~"g‹¡/g‹¡-ty³d-‹¡.h
"

33 
	~"g‹¡/g‹¡.h
"

35 
Çme¥aû
 
	g‹¡šg
 {

36 
Çme¥aû
 
	gš‹º®
 {

40 cÚ¡ * 
SkS·ûs
(cÚ¡ * 
¡r
) {

41 
IsS·û
(*
¡r
))

42 
	g¡r
++;

43  
	g¡r
;

46 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> 
S¶™IÁoTe¡Names
(cÚ¡ * 
¤c
) {

47 
¡d
::
veùÜ
<¡d::
¡ršg
> 
Çme_vec
;

48 
	g¤c
 = 
SkS·ûs
(
¤c
);

49 ; 
	g¤c
 !ğ
nuÎ±r
; srøğ
SkComma
(
¤c
)) {

50 
Çme_vec
.
push_back
(
SŒT¿šgS·ûs
(
G‘P»fixUÁComma
(
¤c
)));

52  
	gÇme_vec
;

58 cÚ¡ * 
	gTy³dTe¡Su™ePS‹
::
V”ifyRegi¡”edTe¡Names
(

59 cÚ¡ * 
‹¡_su™e_Çme
, cÚ¡ * 
fe
, 
lše
,

60 cÚ¡ * 
»gi¡”ed_‹¡s
) {

61 
Regi¡”Ty³P¬am‘”izedTe¡Su™e
(
‹¡_su™e_Çme
, 
CodeLoÿtiÚ
(
fe
, 
lše
));

63 
	gRegi¡”edTe¡sM­
::
	tcÚ¡_™”©Ü
 
	tRegi¡”edTe¡I‹r
;

64 
	g»gi¡”ed_
 = 
Œue
;

66 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> 
Çme_vec
 = 
S¶™IÁoTe¡Names
(
»gi¡”ed_‹¡s
);

68 
Mes§ge
 
	g”rÜs
;

70 
	g¡d
::
£t
<
¡d
::
¡ršg
> 
‹¡s
;

71 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
>::
cÚ¡_™”©Ü
 
Çme_™
 = 
Çme_vec
.
begš
();

72 
	gÇme_™
 !ğ
Çme_vec
.
’d
(); ++name_it) {

73 cÚ¡ 
	g¡d
::
¡ršg
& 
Çme
 = *
Çme_™
;

74 ià(
	g‹¡s
.
couÁ
(
Çme
) != 0) {

75 
”rÜs
 << "Te¡ " << 
Çme
 << " is†isted morehan once.\n";

79 ià(
	g»gi¡”ed_‹¡s_
.
couÁ
(
Çme
) != 0) {

80 
‹¡s
.
š£¹
(
Çme
);

82 
	g”rÜs
 << "NØ‹¡‚amed " << 
	gÇme


87 
Regi¡”edTe¡I‹r
 
	g™
 = 
»gi¡”ed_‹¡s_
.
begš
();

88 
	g™
 !ğ
»gi¡”ed_‹¡s_
.
’d
();

89 ++
	g™
) {

90 ià(
	g‹¡s
.
couÁ
(
™
->
fœ¡
) == 0) {

91 
”rÜs
 << "You fÜgÙØli¡e¡ " << 
™
->
fœ¡
 << ".\n";

95 cÚ¡ 
	g¡d
::
¡ršg
& 
”rÜs_¡r
 = 
”rÜs
.
G‘SŒšg
();

96 ià(
	g”rÜs_¡r
 != "") {

97 
årštf
(
¡d”r
, "% %s", 
FÜm©FeLoÿtiÚ
(
fe
, 
lše
).
c_¡r
(),

98 
”rÜs_¡r
.
c_¡r
());

99 
fæush
(
¡d”r
);

100 
	gposix
::
AbÜt
();

103  
	g»gi¡”ed_‹¡s
;

	@third_party/googletest/googletest/src/gtest.cc

33 
	~"g‹¡/g‹¡.h
"

34 
	~"g‹¡/š‹º®/cu¡om/g‹¡.h
"

35 
	~"g‹¡/g‹¡-¥i.h
"

37 
	~<ùy³.h
>

38 
	~<¡d¬g.h
>

39 
	~<¡dio.h
>

40 
	~<¡dlib.h
>

41 
	~<time.h
>

42 
	~<wch¬.h
>

43 
	~<wùy³.h
>

45 
	~<®gÜ™hm
>

46 
	~<chrÚo
>

47 
	~<cm©h
>

48 
	~<c¡dšt
>

49 
	~<iomª
>

50 
	~<lim™s
>

51 
	~<li¡
>

52 
	~<m­
>

53 
	~<o¡»am
>

54 
	~<s¡»am
>

55 
	~<veùÜ
>

57 #ià
GTEST_OS_LINUX


59 
	~<fú.h
>

60 
	~<lim™s.h
>

61 
	~<sched.h
>

63 
	~<¡ršgs.h
>

64 
	~<sys/mmª.h
>

65 
	~<sys/time.h
>

66 
	~<uni¡d.h
>

67 
	~<¡ršg
>

69 #–ià
GTEST_OS_ZOS


70 
	~<sys/time.h
>

73 
	~<¡ršgs.h
>

75 #–ià
GTEST_OS_WINDOWS_MOBILE


77 
	~<wšdows.h
>

78 #undeà
mš


80 #–ià
GTEST_OS_WINDOWS


82 
	~<wšdows.h
>

83 #undeà
mš


85 #ifdeà
_MSC_VER


86 
	~<ütdbg.h
>

89 
	~<io.h
>

90 
	~<sys/timeb.h
>

91 
	~<sys/ty³s.h
>

92 
	~<sys/¡©.h
>

94 #ià
GTEST_OS_WINDOWS_MINGW


95 
	~<sys/time.h
>

102 
	~<sys/time.h
>

103 
	~<uni¡d.h
>

107 #ià
GTEST_HAS_EXCEPTIONS


108 
	~<¡dexû±
>

111 #ià
GTEST_CAN_STREAM_RESULTS_


112 
	~<¬·/š‘.h
>

113 
	~<Ãtdb.h
>

114 
	~<sys/sock‘.h
>

115 
	~<sys/ty³s.h
>

118 
	~"¤c/g‹¡-š‹º®-šl.h
"

120 #ià
GTEST_OS_WINDOWS


121 
	#v¢´štf
 
_v¢´štf


	)

124 #ià
GTEST_OS_MAC


125 #iâdeà
GTEST_OS_IOS


126 
	~<üt_ex‹ºs.h
>

130 #ià
GTEST_HAS_ABSL


131 
	~"ab¦/debuggšg/çu»_sigÇl_hªdËr.h
"

132 
	~"ab¦/debuggšg/¡ackŒaû.h
"

133 
	~"ab¦/debuggšg/symbŞize.h
"

134 
	~"ab¦/¡ršgs/¡r_ÿt.h
"

137 
Çme¥aû
 
	g‹¡šg
 {

139 
usšg
 
	gš‹º®
::
CouÁIf
;

140 
usšg
 
	gš‹º®
::
FÜEach
;

141 
usšg
 
	gš‹º®
::
G‘EËm’tOr
;

142 
usšg
 
	gš‹º®
::
Shufæe
;

148 cÚ¡ 
	gkDi§bËTe¡F‹r
[] = "DISABLED_*:*/DISABLED_*";

153 cÚ¡ 
	gkD—thTe¡Su™eF‹r
[] = "*DeathTest:*DeathTest/*";

156 cÚ¡ 
	gkUniv”§lF‹r
[] = "*";

159 cÚ¡ 
	gkDeçuÉOuutFÜm©
[] = "xml";

161 cÚ¡ 
	gkDeçuÉOuutFe
[] = "test_detail";

164 cÚ¡ 
	gkTe¡Sh¬dIndex
[] = "GTEST_SHARD_INDEX";

166 cÚ¡ 
	gkTe¡TÙ®Sh¬ds
[] = "GTEST_TOTAL_SHARDS";

168 cÚ¡ 
	gkTe¡Sh¬dStusFe
[] = "GTEST_SHARD_STATUS_FILE";

170 
Çme¥aû
 
	gš‹º®
 {

174 cÚ¡ 
	gkSckT¿ûM¬k”
[] = "\nStackrace:\n";

178 
boŞ
 
	gg_h–p_æag
 = 
çl£
;

181 
FILE
* 
O³nFeFÜWr™šg
(cÚ¡ 
¡d
::
¡ršg
& 
ouut_fe
) {

182 
FILE
* 
feout
 = 
nuÎ±r
;

183 
FeP©h
 
ouut_fe_·th
(
ouut_fe
);

184 
FeP©h
 
ouut_dœ
(
ouut_fe_·th
.
RemoveFeName
());

186 ià(
	gouut_dœ
.
C»©eDœeùÜ›sRecursiv–y
()) {

187 
	gfeout
 = 
posix
::
FO³n
(
ouut_fe
.
c_¡r
(), "w");

189 ià(
	gfeout
 =ğ
nuÎ±r
) {

190 
GTEST_LOG_
(
FATAL
è<< "UÇbËØİ’ f\"" << 
ouut_fe
 << "\"";

192  
	gfeout
;

199 cÚ¡ * 
G‘DeçuÉF‹r
() {

200 cÚ¡ * cÚ¡ 
	g‹¡bridge_‹¡_Úly
 =

201 
š‹º®
::
posix
::
G‘Env
("TESTBRIDGE_TEST_ONLY");

202 ià(
	g‹¡bridge_‹¡_Úly
 !ğ
nuÎ±r
) {

203  
‹¡bridge_‹¡_Úly
;

205  
	gkUniv”§lF‹r
;

210 
boŞ
 
G‘DeçuÉFaFa¡
() {

211 cÚ¡ * cÚ¡ 
	g‹¡bridge_‹¡_ruÂ”_ç_ç¡
 =

212 
š‹º®
::
posix
::
G‘Env
("TESTBRIDGE_TEST_RUNNER_FAIL_FAST");

213 ià(
	g‹¡bridge_‹¡_ruÂ”_ç_ç¡
 !ğ
nuÎ±r
) {

214  
¡rcmp
(
‹¡bridge_‹¡_ruÂ”_ç_ç¡
, "1") == 0;

216  
	gçl£
;

219 
GTEST_DEFINE_boŞ_
(

220 
ç_ç¡
, 
š‹º®
::
BoŞFromGTe¡Env
("ç_ç¡", 
G‘DeçuÉFaFa¡
()),

223 
GTEST_DEFINE_boŞ_
(

224 
®so_run_di§bËd_‹¡s
,

225 
š‹º®
::
BoŞFromGTe¡Env
("®so_run_di§bËd_‹¡s", 
çl£
),

228 
GTEST_DEFINE_boŞ_
(

229 
b»ak_Ú_çu»
, 
š‹º®
::
BoŞFromGTe¡Env
("b»ak_Ú_çu»", 
çl£
),

233 
GTEST_DEFINE_boŞ_
(
ÿtch_exû±iÚs
,

234 
š‹º®
::
BoŞFromGTe¡Env
("ÿtch_exû±iÚs", 
Œue
),

235 "Truiàªd oÆy ià" 
GTEST_NAME_


238 
GTEST_DEFINE_¡ršg_
(

239 
cŞÜ
,

240 
š‹º®
::
SŒšgFromGTe¡Env
("color", "auto"),

246 
GTEST_DEFINE_¡ršg_
(

247 
f‹r
,

248 
š‹º®
::
SŒšgFromGTe¡Env
("f‹r", 
G‘DeçuÉF‹r
()),

255 
GTEST_DEFINE_boŞ_
(

256 
š¡®l_çu»_sigÇl_hªdËr
,

257 
š‹º®
::
BoŞFromGTe¡Env
("š¡®l_çu»_sigÇl_hªdËr", 
çl£
),

258 "IàŒuªd suµÜ‹d oÀthcu¼’ˆ¶©fÜm, " 
GTEST_NAME_
 " should "

262 
GTEST_DEFINE_boŞ_
(
li¡_‹¡s
, 
çl£
,

270 
GTEST_DEFINE_¡ršg_
(

271 
ouut
,

272 
š‹º®
::
SŒšgFromGTe¡Env
("output",

273 
š‹º®
::
OuutFÏgAlsoCheckEnvV¬
().
c_¡r
()),

283 
GTEST_DEFINE_boŞ_
(

284 
br›f
, 
š‹º®
::
BoŞFromGTe¡Env
("br›f", 
çl£
),

287 
GTEST_DEFINE_boŞ_
(
´št_time
, 
š‹º®
::
BoŞFromGTe¡Env
("´št_time", 
Œue
),

288 "Truiàªd oÆy ià" 
GTEST_NAME_


291 
GTEST_DEFINE_boŞ_
(
´št_utf8
, 
š‹º®
::
BoŞFromGTe¡Env
("´št_utf8", 
Œue
),

292 "Truiàªd oÆy ià" 
GTEST_NAME_


295 
GTEST_DEFINE_št32_
(

296 
¿ndom_£ed
,

297 
š‹º®
::
IÁ32FromGTe¡Env
("random_seed", 0),

301 
GTEST_DEFINE_št32_
(

302 
»³©
,

303 
š‹º®
::
IÁ32FromGTe¡Env
("repeat", 1),

307 
GTEST_DEFINE_boŞ_
(
show_š‹º®_¡ack_äames
, 
çl£
,

308 "Truiàªd oÆy ià" 
GTEST_NAME_


312 
GTEST_DEFINE_boŞ_
(
shufæe
, 
š‹º®
::
BoŞFromGTe¡Env
("shufæe", 
çl£
),

313 "Truiàªd oÆy ià" 
GTEST_NAME_


316 
GTEST_DEFINE_št32_
(

317 
¡ack_Œaû_d•th
,

318 
š‹º®
::
IÁ32FromGTe¡Env
("¡ack_Œaû_d•th", 
kMaxSckT¿ûD•th
),

322 
GTEST_DEFINE_¡ršg_
(

323 
¡»am_»suÉ_to
,

324 
š‹º®
::
SŒšgFromGTe¡Env
("stream_result_to", ""),

329 
GTEST_DEFINE_boŞ_
(

330 
throw_Ú_çu»
,

331 
š‹º®
::
BoŞFromGTe¡Env
("throw_Ú_çu»", 
çl£
),

336 #ià
GTEST_USE_OWN_FLAGFILE_FLAG_


337 
GTEST_DEFINE_¡ršg_
(

338 
æagfe
,

339 
š‹º®
::
SŒšgFromGTe¡Env
("flagfile", ""),

343 
Çme¥aû
 
	gš‹º®
 {

348 
ušt32_t
 
	gRªdom
::
G’”©e
(ušt32_ˆ
¿nge
) {

351 
¡©e_
 = 
¡©ic_ÿ¡
<
ušt32_t
>(1103515245ULL*¡©e_ + 12345Uè% 
kMaxRªge
;

353 
GTEST_CHECK_
(
¿nge
 > 0)

355 
GTEST_CHECK_
(
¿nge
 <ğ
kMaxRªge
)

356 << "G’”©iÚ oà¨numb” iÀ[0, " << 
¿nge
 << ") was„equested, "

357 << "buˆthi ÿÀÚly g’”©numb” š [0, " << 
kMaxRªge
 << ").";

362  
	g¡©e_
 % 
	g¿nge
;

368 
boŞ
 
GTe¡IsIn™Ÿlized
(è{  
G‘Argvs
().
size
() > 0; }

373 
SumOv”Te¡Su™eLi¡
(cÚ¡ 
¡d
::
veùÜ
<
Te¡Su™e
*>& 
ÿ£_li¡
,

374 (
Te¡Su™e
::*
m‘hod
)() const) {

375 
sum
 = 0;

376 
size_t
 
	gi
 = 0; i < 
	gÿ£_li¡
.
size
(); i++) {

377 
	gsum
 +ğ(
ÿ£_li¡
[
i
]->*
m‘hod
)();

379  
	gsum
;

383 
boŞ
 
Te¡Su™ePas£d
(cÚ¡ 
Te¡Su™e
* 
‹¡_su™e
) {

384  
	g‹¡_su™e
->
should_run
(è&&e¡_su™e->
Pas£d
();

388 
boŞ
 
Te¡Su™eFaed
(cÚ¡ 
Te¡Su™e
* 
‹¡_su™e
) {

389  
	g‹¡_su™e
->
should_run
(è&&e¡_su™e->
Faed
();

394 
boŞ
 
ShouldRunTe¡Su™e
(cÚ¡ 
Te¡Su™e
* 
‹¡_su™e
) {

395  
	g‹¡_su™e
->
should_run
();

399 
	gAs£¹H–³r
::
As£¹H–³r
(
Te¡P¬tResuÉ
::
Ty³
 
ty³
,

400 cÚ¡ * 
fe
,

401 
lše
,

402 cÚ¡ * 
mes§ge
)

403 : 
d©a_
(
Ãw
 
As£¹H–³rD©a
(
ty³
, 
fe
, 
lše
, 
mes§ge
)) {

406 
	gAs£¹H–³r
::~
As£¹H–³r
() {

407 
d–‘e
 
d©a_
;

411 
	gAs£¹H–³r
::
İ”©Ü
=(cÚ¡ 
Mes§ge
& 
mes§ge
) const {

412 
Un™Te¡
::
G‘In¡ªû
()->

413 
AddTe¡P¬tResuÉ
(
d©a_
->
ty³
, d©a_->
fe
, d©a_->
lše
,

414 
Aµ’dU£rMes§ge
(
d©a_
->
mes§ge
, message),

415 
Un™Te¡
::
G‘In¡ªû
()->
im¶
()

416 ->
Cu¼’tOsSckT¿ûExû±Tİ
(1)

421 
	gÇme¥aû
 {

428 
cÚ¡ex´
 
boŞ
 
	gkE¼ÜOnUnš¡ªtŸ‹dP¬am‘”izedTe¡
 = 
Œue
;

429 
cÚ¡ex´
 
boŞ
 
	gkE¼ÜOnUnš¡ªtŸ‹dTy³P¬am‘”izedTe¡
 = 
Œue
;

432 şas 
	cFau»Te¡
 : 
public
 
Te¡
 {

433 
public
:

434 
ex¶ic™
 
Fau»Te¡
(cÚ¡ 
CodeLoÿtiÚ
& 
loc
, 
¡d
::
¡ršg
 
”rÜ_mes§ge
,

435 
boŞ
 
as_”rÜ
)

436 : 
loc_
(
loc
),

437 
”rÜ_mes§ge_
(
¡d
::
move
(
”rÜ_mes§ge
)),

438 
as_”rÜ_
(
as_”rÜ
) {}

440 
Te¡Body
(è
	gov”ride
 {

441 ià(
	gas_”rÜ_
) {

442 
As£¹H–³r
(
Te¡P¬tResuÉ
::
kNÚF©®Fau»
, 
loc_
.
fe
.
c_¡r
(),

443 
loc_
.
lše
, ""èğ
Mes§ge
(è<< 
”rÜ_mes§ge_
;

445 
	g¡d
::
cout
 << 
”rÜ_mes§ge_
 << 
¡d
::
’dl
;

449 
	g´iv©e
:

450 cÚ¡ 
CodeLoÿtiÚ
 
loc_
;

451 cÚ¡ 
	g¡d
::
¡ršg
 
”rÜ_mes§ge_
;

452 cÚ¡ 
boŞ
 
	gas_”rÜ_
;

458 
	g¡d
::
£t
<
¡d
::
¡ršg
>* 
G‘IgnÜedP¬am‘”izedTe¡Su™es
() {

459  
Un™Te¡
::
G‘In¡ªû
()->
im¶
()->
ignÜed_·¿m‘”ized_‹¡_su™es
();

463 
	gM¬kAsIgnÜed
::
M¬kAsIgnÜed
(cÚ¡ * 
‹¡_su™e
) {

464 
G‘IgnÜedP¬am‘”izedTe¡Su™es
()->
š£¹
(
‹¡_su™e
);

469 
In£¹SyÁh‘icTe¡Ca£
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
, 
CodeLoÿtiÚ
 
loÿtiÚ
,

470 
boŞ
 
has_‹¡_p
) {

471 cÚ¡‡uto& 
	gignÜed
 = *
G‘IgnÜedP¬am‘”izedTe¡Su™es
();

472 ià(
	gignÜed
.
fšd
(
Çme
è!ğ
ignÜed
.
’d
()) ;

474 cÚ¡ 
	gkMissšgIn¡ªtŸtiÚ
[] =

483 cÚ¡ 
	gkMissšgTe¡Ca£
[] =

492 
	g¡d
::
¡ršg
 
mes§ge
 =

493 "P¬am‘”izede¡ su™" + 
Çme
 +

494 (
has_‹¡_p
 ? 
kMissšgIn¡ªtŸtiÚ
 : 
kMissšgTe¡Ca£
) +

499 "GTEST_ALLOW_UNINSTANTIATED_PARAMETERIZED_TEST(" + 
Çme
 + ");";

501 
	g¡d
::
¡ršg
 
fuÎ_Çme
 = "Unš¡ªtŸ‹dP¬am‘”izedTe¡Su™e<" + 
Çme
 + ">";

502 
Regi¡”Te¡
(

503 "GoogËTe¡V”ifiÿtiÚ", 
fuÎ_Çme
.
c_¡r
(),

504 
nuÎ±r
,

505 
nuÎ±r
,

506 
loÿtiÚ
.
fe
.
c_¡r
(),†oÿtiÚ.
lše
, [
mes§ge
,†ocation] {

507  
Ãw
 
Fau»Te¡
(
loÿtiÚ
, 
mes§ge
,

508 
kE¼ÜOnUnš¡ªtŸ‹dP¬am‘”izedTe¡
);

512 
Regi¡”Ty³P¬am‘”izedTe¡Su™e
(cÚ¡ * 
‹¡_su™e_Çme
,

513 
CodeLoÿtiÚ
 
code_loÿtiÚ
) {

514 
G‘Un™Te¡Im¶
()->
ty³_·¿m‘”ized_‹¡_»gi¡ry
().
Regi¡”Te¡Su™e
(

515 
‹¡_su™e_Çme
, 
code_loÿtiÚ
);

518 
Regi¡”Ty³P¬am‘”izedTe¡Su™eIn¡ªtŸtiÚ
(cÚ¡ * 
ÿ£_Çme
) {

519 
G‘Un™Te¡Im¶
()

520 ->
ty³_·¿m‘”ized_‹¡_»gi¡ry
()

521 .
Regi¡”In¡ªtŸtiÚ
(
ÿ£_Çme
);

524 
	gTy³P¬am‘”izedTe¡Su™eRegi¡ry
::
Regi¡”Te¡Su™e
(

525 cÚ¡ * 
‹¡_su™e_Çme
, 
CodeLoÿtiÚ
 
code_loÿtiÚ
) {

526 
	gsu™es_
.
em¶aû
(
¡d
::
¡ršg
(
‹¡_su™e_Çme
),

527 
Ty³P¬am‘”izedTe¡Su™eInfo
(
code_loÿtiÚ
));

530 
	gTy³P¬am‘”izedTe¡Su™eRegi¡ry
::
Regi¡”In¡ªtŸtiÚ
(

531 cÚ¡ * 
‹¡_su™e_Çme
) {

532 autØ
™
 = 
su™es_
.
fšd
(
¡d
::
¡ršg
(
‹¡_su™e_Çme
));

533 ià(
	g™
 !ğ
su™es_
.
’d
()) {

534 
™
->
£cÚd
.
š¡ªtŸ‹d
 = 
Œue
;

536 
GTEST_LOG_
(
ERROR
) << "Unknownype…arameterizedest suit '"

537 << 
	g‹¡_su™e_Çme
 << "'";

541 
	gTy³P¬am‘”izedTe¡Su™eRegi¡ry
::
CheckFÜIn¡ªtŸtiÚs
() {

542 cÚ¡‡uto& 
ignÜed
 = *
G‘IgnÜedP¬am‘”izedTe¡Su™es
();

543 cÚ¡‡uto& 
	g‹¡ÿ£
 : 
su™es_
) {

544 ià(
‹¡ÿ£
.
£cÚd
.
š¡ªtŸ‹d
) ;

545 ià(
	gignÜed
.
fšd
(
‹¡ÿ£
.
fœ¡
è!ğ
ignÜed
.
’d
()) ;

547 
	g¡d
::
¡ršg
 
mes§ge
 =

548 "Ty³…¬am‘”izede¡ su™" + 
‹¡ÿ£
.
fœ¡
 +

561 
‹¡ÿ£
.
fœ¡
 + ");";

563 
	g¡d
::
¡ršg
 
fuÎ_Çme
 =

564 "Unš¡ªtŸ‹dTy³P¬am‘”izedTe¡Su™e<" + 
‹¡ÿ£
.
fœ¡
 + ">";

565 
Regi¡”Te¡
(

566 "GoogËTe¡V”ifiÿtiÚ", 
fuÎ_Çme
.
c_¡r
(),

567 
nuÎ±r
,

568 
nuÎ±r
,

569 
‹¡ÿ£
.
£cÚd
.
code_loÿtiÚ
.
fe
.
c_¡r
(),

570 
‹¡ÿ£
.
£cÚd
.
code_loÿtiÚ
.
lše
, [
mes§ge
,estcase] {

571  
Ãw
 
Fau»Te¡
(
‹¡ÿ£
.
£cÚd
.
code_loÿtiÚ
, 
mes§ge
,

572 
kE¼ÜOnUnš¡ªtŸ‹dTy³P¬am‘”izedTe¡
);

578 ::
¡d
::
veùÜ
<¡d::
¡ršg
> 
g_¬gvs
;

580 ::
¡d
::
veùÜ
<¡d::
¡ršg
> 
G‘Argvs
() {

581 #ià
defšed
(
GTEST_CUSTOM_GET_ARGVS_
)

584 cÚ¡‡uto& 
cu¡om
 = 
GTEST_CUSTOM_GET_ARGVS_
();

585  ::
¡d
::
veùÜ
<¡d::
¡ršg
>(
cu¡om
.
begš
(), 
	gcu¡om
.
’d
());

587  
	gg_¬gvs
;

593 
FeP©h
 
G‘Cu¼’tExecubËName
() {

594 
FeP©h
 
	g»suÉ
;

596 #ià
GTEST_OS_WINDOWS
 || 
GTEST_OS_OS2


597 
	g»suÉ
.
S‘
(
FeP©h
(
G‘Argvs
()[0]).
RemoveEx‹nsiÚ
("exe"));

599 
	g»suÉ
.
S‘
(
FeP©h
(
G‘Argvs
()[0]));

602  
	g»suÉ
.
RemoveDœeùÜyName
();

608 
	g¡d
::
¡ršg
 
Un™Te¡O±iÚs
::
G‘OuutFÜm©
() {

609 cÚ¡ * cÚ¡ 
g‹¡_ouut_æag
 = 
GTEST_FLAG
(
ouut
).
c_¡r
();

610 cÚ¡ * cÚ¡ 
	gcŞÚ
 = 
¡rchr
(
g‹¡_ouut_æag
, ':');

611  (
	gcŞÚ
 =ğ
nuÎ±r
)

612 ? 
¡d
::
¡ršg
(
g‹¡_ouut_æag
)

613 : 
¡d
::
¡ršg
(
g‹¡_ouut_æag
,

614 
¡©ic_ÿ¡
<
size_t
>(
cŞÚ
 - 
g‹¡_ouut_æag
));

619 
	g¡d
::
¡ršg
 
Un™Te¡O±iÚs
::
G‘AbsŞu‹P©hToOuutFe
() {

620 cÚ¡ * cÚ¡ 
g‹¡_ouut_æag
 = 
GTEST_FLAG
(
ouut
).
c_¡r
();

622 
	g¡d
::
¡ršg
 
fÜm©
 = 
G‘OuutFÜm©
();

623 ià(
	gfÜm©
.
em±y
())

624 
	gfÜm©
 = 
¡d
::
¡ršg
(
kDeçuÉOuutFÜm©
);

626 cÚ¡ * cÚ¡ 
	gcŞÚ
 = 
¡rchr
(
g‹¡_ouut_æag
, ':');

627 ià(
	gcŞÚ
 =ğ
nuÎ±r
)

628  
š‹º®
::
FeP©h
::
MakeFeName
(

629 
š‹º®
::
FeP©h
(

630 
Un™Te¡
::
G‘In¡ªû
()->
Üigš®_wÜkšg_dœ
()),

631 
š‹º®
::
FeP©h
(
kDeçuÉOuutFe
), 0,

632 
fÜm©
.
c_¡r
()).
¡ršg
();

634 
	gš‹º®
::
FeP©h
 
ouut_Çme
(
cŞÚ
 + 1);

635 ià(!
	gouut_Çme
.
IsAbsŞu‹P©h
())

636 
	gouut_Çme
 = 
š‹º®
::
FeP©h
::
CÚÿtP©hs
(

637 
š‹º®
::
FeP©h
(
Un™Te¡
::
G‘In¡ªû
()->
Üigš®_wÜkšg_dœ
()),

638 
š‹º®
::
FeP©h
(
cŞÚ
 + 1));

640 ià(!
	gouut_Çme
.
IsDœeùÜy
())

641  
	gouut_Çme
.
¡ršg
();

643 
	gš‹º®
::
FeP©h
 
»suÉ
(
š‹º®
::FeP©h::
G’”©eUniqueFeName
(

644 
ouut_Çme
, 
š‹º®
::
G‘Cu¼’tExecubËName
(),

645 
G‘OuutFÜm©
().
c_¡r
()));

646  
	g»suÉ
.
¡ršg
();

655 
boŞ
 
P©‹ºM©chesSŒšg
(cÚ¡ 
¡d
::
¡ršg
& 
Çme_¡r
,

656 cÚ¡ * 
·‰”n
, cÚ¡ * 
·‰”n_’d
) {

657 cÚ¡ * 
	gÇme
 = 
Çme_¡r
.
c_¡r
();

658 cÚ¡ * cÚ¡ 
	gÇme_begš
 = 
Çme
;

659 cÚ¡ * cÚ¡ 
	gÇme_’d
 = 
Çme
 + 
Çme_¡r
.
size
();

661 cÚ¡ * 
	g·‰”n_Ãxt
 = 
·‰”n
;

662 cÚ¡ * 
	gÇme_Ãxt
 = 
Çme
;

664 
	g·‰”n
 < 
	g·‰”n_’d
 || 
	gÇme
 < 
	gÇme_’d
) {

665 ià(
	g·‰”n
 < 
	g·‰”n_’d
) {

666 *
	g·‰”n
) {

668 ià(
Çme
 < 
Çme_’d
 && *Çm=ğ*
·‰”n
) {

669 ++
·‰”n
;

670 ++
	gÇme
;

675 ià(
Çme
 < 
Çme_’d
) {

676 ++
·‰”n
;

677 ++
	gÇme
;

685 
·‰”n_Ãxt
 = 
·‰”n
;

686 
	gÇme_Ãxt
 = 
Çme
 + 1;

687 ++
	g·‰”n
;

692 ià(
	gÇme_begš
 < 
	gÇme_Ãxt
 &&‚ame_Ãxˆ<ğ
Çme_’d
) {

693 
·‰”n
 = 
·‰”n_Ãxt
;

694 
	gÇme
 = 
Çme_Ãxt
;

697  
	gçl£
;

699  
	gŒue
;

702 
boŞ
 
	gUn™Te¡O±iÚs
::
M©chesF‹r
(cÚ¡ 
¡d
::
¡ršg
& 
Çme_¡r
,

703 cÚ¡ * 
f‹r
) {

705 cÚ¡ * 
	g·‰”n
 = 
f‹r
;

706 
	gŒue
) {

708 cÚ¡ * cÚ¡ 
	gÃxt_£p
 = 
¡rchr
(
·‰”n
, ':');

709 cÚ¡ * cÚ¡ 
	g·‰”n_’d
 =

710 
Ãxt_£p
 !ğ
nuÎ±r
 ?‚ext_£°: 
·‰”n
 + 
¡¾’
(pattern);

713 ià(
P©‹ºM©chesSŒšg
(
Çme_¡r
, 
·‰”n
, 
·‰”n_’d
)) {

714  
	gŒue
;

719 ià(
	gÃxt_£p
 =ğ
nuÎ±r
) {

720  
çl£
;

722 
	g·‰”n
 = 
Ãxt_£p
 + 1;

724  
	gŒue
;

729 
boŞ
 
	gUn™Te¡O±iÚs
::
F‹rM©chesTe¡
(cÚ¡ 
¡d
::
¡ršg
& 
‹¡_su™e_Çme
,

730 cÚ¡ 
¡d
::
¡ršg
& 
‹¡_Çme
) {

731 cÚ¡ 
¡d
::
¡ršg
& 
fuÎ_Çme
 = 
‹¡_su™e_Çme
 + "." + 
‹¡_Çme
.
c_¡r
();

735 cÚ¡ * cÚ¡ 
	gp
 = 
GTEST_FLAG
(
f‹r
).
c_¡r
();

736 cÚ¡ * cÚ¡ 
	gdash
 = 
¡rchr
(
p
, '-');

737 
	g¡d
::
¡ršg
 
pos™ive
;

738 
	g¡d
::
¡ršg
 
Ãg©ive
;

739 ià(
	gdash
 =ğ
nuÎ±r
) {

740 
pos™ive
 = 
GTEST_FLAG
(
f‹r
).
c_¡r
();

741 
	gÃg©ive
 = "";

743 
	gpos™ive
 = 
¡d
::
¡ršg
(
p
, 
dash
);

744 
	gÃg©ive
 = 
¡d
::
¡ršg
(
dash
 + 1);

745 ià(
	gpos™ive
.
em±y
()) {

747 
	gpos™ive
 = 
kUniv”§lF‹r
;

753  (
M©chesF‹r
(
fuÎ_Çme
, 
pos™ive
.
c_¡r
()) &&

754 !
M©chesF‹r
(
fuÎ_Çme
, 
Ãg©ive
.
c_¡r
()));

757 #ià
GTEST_HAS_SEH


761 
	gUn™Te¡O±iÚs
::
GTe¡ShouldProûssSEH
(
DWORD
 
exû±iÚ_code
) {

770 cÚ¡ 
DWORD
 
kCxxExû±iÚCode
 = 0xe06d7363;

772 
boŞ
 
	gshould_hªdË
 = 
Œue
;

774 ià(!
GTEST_FLAG
(
ÿtch_exû±iÚs
))

775 
	gshould_hªdË
 = 
çl£
;

776 ià(
	gexû±iÚ_code
 =ğ
EXCEPTION_BREAKPOINT
)

777 
should_hªdË
 = 
çl£
;

778 ià(
	gexû±iÚ_code
 =ğ
kCxxExû±iÚCode
)

779 
should_hªdË
 = 
çl£
;

781  
	gshould_hªdË
 ? 
	gEXCEPTION_EXECUTE_HANDLER
 : 
EXCEPTION_CONTINUE_SEARCH
;

790 
	gScİedFakeTe¡P¬tResuÉR•Ü‹r
::
	$ScİedFakeTe¡P¬tResuÉR•Ü‹r
(

791 
Te¡P¬tResuÉA¼ay
* 
»suÉ
)

792 : 
	`š‹rû±_mode_
(
INTERCEPT_ONLY_CURRENT_THREAD
),

793 
	$»suÉ_
(
»suÉ
) {

794 
	`In™
();

795 
	}
}

800 
	gScİedFakeTe¡P¬tResuÉR•Ü‹r
::
	$ScİedFakeTe¡P¬tResuÉR•Ü‹r
(

801 
IÁ”û±Mode
 
š‹rû±_mode
, 
Te¡P¬tResuÉA¼ay
* 
»suÉ
)

802 : 
	`š‹rû±_mode_
(
š‹rû±_mode
),

803 
	$»suÉ_
(
»suÉ
) {

804 
	`In™
();

805 
	}
}

807 
	gScİedFakeTe¡P¬tResuÉR•Ü‹r
::
	$In™
() {

808 
š‹º®
::
Un™Te¡Im¶
* cÚ¡ 
im¶
 = iÁ”Çl::
	`G‘Un™Te¡Im¶
();

809 ià(
š‹rû±_mode_
 =ğ
INTERCEPT_ALL_THREADS
) {

810 
Şd_»pÜ‹r_
 = 
im¶
->
	`G‘Glob®Te¡P¬tResuÉR•Ü‹r
();

811 
im¶
->
	`S‘Glob®Te¡P¬tResuÉR•Ü‹r
(
this
);

813 
Şd_»pÜ‹r_
 = 
im¶
->
	`G‘Te¡P¬tResuÉR•Ü‹rFÜCu¼’tTh»ad
();

814 
im¶
->
	`S‘Te¡P¬tResuÉR•Ü‹rFÜCu¼’tTh»ad
(
this
);

816 
	}
}

820 
	gScİedFakeTe¡P¬tResuÉR•Ü‹r
::~
	$ScİedFakeTe¡P¬tResuÉR•Ü‹r
() {

821 
š‹º®
::
Un™Te¡Im¶
* cÚ¡ 
im¶
 = iÁ”Çl::
	`G‘Un™Te¡Im¶
();

822 ià(
š‹rû±_mode_
 =ğ
INTERCEPT_ALL_THREADS
) {

823 
im¶
->
	`S‘Glob®Te¡P¬tResuÉR•Ü‹r
(
Şd_»pÜ‹r_
);

825 
im¶
->
	`S‘Te¡P¬tResuÉR•Ü‹rFÜCu¼’tTh»ad
(
Şd_»pÜ‹r_
);

827 
	}
}

831 
	gScİedFakeTe¡P¬tResuÉR•Ü‹r
::
	$R•ÜtTe¡P¬tResuÉ
(

832 cÚ¡ 
Te¡P¬tResuÉ
& 
»suÉ
) {

833 
»suÉ_
->
	`Aµ’d
(
»suÉ
);

834 
	}
}

836 
Çme¥aû
 
	gš‹º®
 {

847 
Ty³Id
 
G‘Te¡Ty³Id
() {

848  
	gG‘Ty³Id
<
	gTe¡
>();

853 cÚ¡ 
Ty³Id
 
kTe¡Ty³IdInGoogËTe¡
 = 
G‘Te¡Ty³Id
();

858 
As£¹iÚResuÉ
 
HasOÃFau»
(const * ,

861 cÚ¡ 
Te¡P¬tResuÉA¼ay
& 
»suÉs
,

862 
Te¡P¬tResuÉ
::
Ty³
 
ty³
,

863 cÚ¡ 
¡d
::
¡ršg
& 
sub¡r
) {

864 cÚ¡ 
¡d
::
¡ršg
 
ex³ùed
(
ty³
 =ğ
Te¡P¬tResuÉ
::
kF©®Fau»
 ?

867 
Mes§ge
 
	gmsg
;

868 ià(
	g»suÉs
.
size
() != 1) {

869 
msg
 << "Ex³ùed: " << 
ex³ùed
 << "\n"

870 << " Aùu®: " << 
»suÉs
.
size
() << " failures";

871 
	gi
 = 0; i < 
	g»suÉs
.
size
(); i++) {

872 
	gmsg
 << "\n" << 
	g»suÉs
.
G‘Te¡P¬tResuÉ
(
i
);

874  
As£¹iÚFau»
(è<< 
	gmsg
;

877 cÚ¡ 
	gTe¡P¬tResuÉ
& 
	gr
 = 
»suÉs
.
G‘Te¡P¬tResuÉ
(0);

878 ià(
	gr
.
ty³
() !=ype) {

879  
As£¹iÚFau»
(è<< "Ex³ùed: " << 
ex³ùed
 << "\n"

881 << 
r
;

884 ià(
¡r¡r
(
r
.
mes§ge
(), 
sub¡r
.
c_¡r
()è=ğ
nuÎ±r
) {

885  
As£¹iÚFau»
(è<< "Ex³ùed: " << 
ex³ùed
 << " containing \""

886 << 
sub¡r
 << "\"\n"

888 << 
r
;

891  
As£¹iÚSucûss
();

897 
	gSšgËFau»Check”
::
SšgËFau»Check”
(cÚ¡ 
Te¡P¬tResuÉA¼ay
* 
»suÉs
,

898 
Te¡P¬tResuÉ
::
Ty³
 
ty³
,

899 cÚ¡ 
¡d
::
¡ršg
& 
sub¡r
)

900 : 
»suÉs_
(
»suÉs
), 
ty³_
(
ty³
), 
sub¡r_
(
sub¡r
) {}

906 
	gSšgËFau»Check”
::~
SšgËFau»Check”
() {

907 
EXPECT_PRED_FORMAT3
(
HasOÃFau»
, *
»suÉs_
, 
ty³_
, 
sub¡r_
);

910 
	gDeçuÉGlob®Te¡P¬tResuÉR•Ü‹r
::
DeçuÉGlob®Te¡P¬tResuÉR•Ü‹r
(

911 
Un™Te¡Im¶
* 
un™_‹¡
è: 
un™_‹¡_
(unit_test) {}

913 
DeçuÉGlob®Te¡P¬tResuÉR•Ü‹r
::
R•ÜtTe¡P¬tResuÉ
(

914 cÚ¡ 
Te¡P¬tResuÉ
& 
»suÉ
) {

915 
un™_‹¡_
->
cu¼’t_‹¡_»suÉ
()->
AddTe¡P¬tResuÉ
(
»suÉ
);

916 
	gun™_‹¡_
->
li¡’”s
()->
»³©”
()->
OnTe¡P¬tResuÉ
(
»suÉ
);

919 
	gDeçuÉP”Th»adTe¡P¬tResuÉR•Ü‹r
::
DeçuÉP”Th»adTe¡P¬tResuÉR•Ü‹r
(

920 
Un™Te¡Im¶
* 
un™_‹¡
è: 
un™_‹¡_
(unit_test) {}

922 
DeçuÉP”Th»adTe¡P¬tResuÉR•Ü‹r
::
R•ÜtTe¡P¬tResuÉ
(

923 cÚ¡ 
Te¡P¬tResuÉ
& 
»suÉ
) {

924 
un™_‹¡_
->
G‘Glob®Te¡P¬tResuÉR•Ü‹r
()->
R•ÜtTe¡P¬tResuÉ
(
»suÉ
);

928 
Te¡P¬tResuÉR•Ü‹rIÁ”çû
*

929 
	gUn™Te¡Im¶
::
G‘Glob®Te¡P¬tResuÉR•Ü‹r
() {

930 
š‹º®
::
Mu‹xLock
 
lock
(&
glob®_‹¡_·¹_»suÉ_»pÜ‹r_mu‹x_
);

931  
	gglob®_‹¡_·¹_»suÉ_»pÙ”_
;

935 
	gUn™Te¡Im¶
::
S‘Glob®Te¡P¬tResuÉR•Ü‹r
(

936 
Te¡P¬tResuÉR•Ü‹rIÁ”çû
* 
»pÜ‹r
) {

937 
š‹º®
::
Mu‹xLock
 
lock
(&
glob®_‹¡_·¹_»suÉ_»pÜ‹r_mu‹x_
);

938 
	gglob®_‹¡_·¹_»suÉ_»pÙ”_
 = 
»pÜ‹r
;

942 
Te¡P¬tResuÉR•Ü‹rIÁ”çû
*

943 
	gUn™Te¡Im¶
::
G‘Te¡P¬tResuÉR•Ü‹rFÜCu¼’tTh»ad
() {

944  
³r_th»ad_‹¡_·¹_»suÉ_»pÜ‹r_
.
g‘
();

948 
	gUn™Te¡Im¶
::
S‘Te¡P¬tResuÉR•Ü‹rFÜCu¼’tTh»ad
(

949 
Te¡P¬tResuÉR•Ü‹rIÁ”çû
* 
»pÜ‹r
) {

950 
³r_th»ad_‹¡_·¹_»suÉ_»pÜ‹r_
.
£t
(
»pÜ‹r
);

954 
	gUn™Te¡Im¶
::
sucûssful_‹¡_su™e_couÁ
() const {

955  
CouÁIf
(
‹¡_su™es_
, 
Te¡Su™ePas£d
);

959 
	gUn™Te¡Im¶
::
çed_‹¡_su™e_couÁ
() const {

960  
CouÁIf
(
‹¡_su™es_
, 
Te¡Su™eFaed
);

964 
	gUn™Te¡Im¶
::
tÙ®_‹¡_su™e_couÁ
() const {

965  
¡©ic_ÿ¡
<>(
‹¡_su™es_
.
size
());

970 
	gUn™Te¡Im¶
::
‹¡_su™e_to_run_couÁ
() const {

971  
CouÁIf
(
‹¡_su™es_
, 
ShouldRunTe¡Su™e
);

975 
	gUn™Te¡Im¶
::
sucûssful_‹¡_couÁ
() const {

976  
SumOv”Te¡Su™eLi¡
(
‹¡_su™es_
, &
Te¡Su™e
::
sucûssful_‹¡_couÁ
);

980 
	gUn™Te¡Im¶
::
sk³d_‹¡_couÁ
() const {

981  
SumOv”Te¡Su™eLi¡
(
‹¡_su™es_
, &
Te¡Su™e
::
sk³d_‹¡_couÁ
);

985 
	gUn™Te¡Im¶
::
çed_‹¡_couÁ
() const {

986  
SumOv”Te¡Su™eLi¡
(
‹¡_su™es_
, &
Te¡Su™e
::
çed_‹¡_couÁ
);

990 
	gUn™Te¡Im¶
::
»pÜbË_di§bËd_‹¡_couÁ
() const {

991  
SumOv”Te¡Su™eLi¡
(
‹¡_su™es_
,

992 &
Te¡Su™e
::
»pÜbË_di§bËd_‹¡_couÁ
);

996 
	gUn™Te¡Im¶
::
di§bËd_‹¡_couÁ
() const {

997  
SumOv”Te¡Su™eLi¡
(
‹¡_su™es_
, &
Te¡Su™e
::
di§bËd_‹¡_couÁ
);

1001 
	gUn™Te¡Im¶
::
»pÜbË_‹¡_couÁ
() const {

1002  
SumOv”Te¡Su™eLi¡
(
‹¡_su™es_
, &
Te¡Su™e
::
»pÜbË_‹¡_couÁ
);

1006 
	gUn™Te¡Im¶
::
tÙ®_‹¡_couÁ
() const {

1007  
SumOv”Te¡Su™eLi¡
(
‹¡_su™es_
, &
Te¡Su™e
::
tÙ®_‹¡_couÁ
);

1011 
	gUn™Te¡Im¶
::
‹¡_to_run_couÁ
() const {

1012  
SumOv”Te¡Su™eLi¡
(
‹¡_su™es_
, &
Te¡Su™e
::
‹¡_to_run_couÁ
);

1025 
	g¡d
::
¡ršg
 
Un™Te¡Im¶
::
Cu¼’tOsSckT¿ûExû±Tİ
(
sk_couÁ
) {

1026  
os_¡ack_Œaû_g‘‹r
()->
Cu¼’tSckT¿û
(

1027 
¡©ic_ÿ¡
<>(
GTEST_FLAG
(
¡ack_Œaû_d•th
)),

1028 
sk_couÁ
 + 1

1035 şas 
	cTim”
 {

1036 
	gpublic
:

1037 
Tim”
(è: 
¡¬t_
(
¡d
::
chrÚo
::
¡—dy_şock
::
now
()) {}

1040 
TimeInMlis
 
EÏp£d
() {

1041  
¡d
::
chrÚo
::
du¿tiÚ_ÿ¡
<¡d::chrÚo::
mli£cÚds
>(

1042 
¡d
::
chrÚo
::
¡—dy_şock
::
now
(è- 
¡¬t_
)

1043 .
couÁ
();

1046 
	g´iv©e
:

1047 
¡d
::
chrÚo
::
¡—dy_şock
::
time_pošt
 
¡¬t_
;

1053 
TimeInMlis
 
G‘TimeInMlis
() {

1054  
	g¡d
::
chrÚo
::
du¿tiÚ_ÿ¡
<
¡d
::chrÚo::
mli£cÚds
>(

1055 
¡d
::
chrÚo
::
sy¡em_şock
::
now
() -

1056 
¡d
::
chrÚo
::
sy¡em_şock
::
äom_time_t
(0))

1057 .
couÁ
();

1064 #ià
GTEST_OS_WINDOWS_MOBILE


1069 
LPCWSTR
 
	gSŒšg
::
AnsiToUtf16
(cÚ¡ * 
ªsi
) {

1070 ià(!
ªsi
è 
nuÎ±r
;

1071 cÚ¡ 
	gËngth
 = 
¡¾’
(
ªsi
);

1072 cÚ¡ 
	gunicode_Ëngth
 =

1073 
MuÉiBy‹ToWideCh¬
(
CP_ACP
, 0, 
ªsi
, 
Ëngth
, 
nuÎ±r
, 0);

1074 
WCHAR
* 
	gunicode
 = 
Ãw
 WCHAR[
unicode_Ëngth
 + 1];

1075 
MuÉiBy‹ToWideCh¬
(
CP_ACP
, 0, 
ªsi
, 
Ëngth
,

1076 
unicode
, 
unicode_Ëngth
);

1077 
	gunicode
[
unicode_Ëngth
] = 0;

1078  
	gunicode
;

1085 cÚ¡ * 
	gSŒšg
::
Utf16ToAnsi
(
LPCWSTR
 
utf16_¡r
) {

1086 ià(!
utf16_¡r
è 
nuÎ±r
;

1087 cÚ¡ 
	gªsi_Ëngth
 = 
WideCh¬ToMuÉiBy‹
(
CP_ACP
, 0, 
utf16_¡r
, -1, 
nuÎ±r
,

1088 0, 
nuÎ±r
,‚ullptr);

1089 * 
	gªsi
 = 
Ãw
 [
ªsi_Ëngth
 + 1];

1090 
WideCh¬ToMuÉiBy‹
(
CP_ACP
, 0, 
utf16_¡r
, -1, 
ªsi
, 
ªsi_Ëngth
, 
nuÎ±r
,

1091 
nuÎ±r
);

1092 
	gªsi
[
ªsi_Ëngth
] = 0;

1093  
	gªsi
;

1104 
boŞ
 
	gSŒšg
::
CSŒšgEqu®s
(cÚ¡ * 
lhs
, cÚ¡ * 
rhs
) {

1105 ià(
	glhs
 =ğ
nuÎ±r
è 
rhs
 ==‚ullptr;

1107 ià(
	grhs
 =ğ
nuÎ±r
è 
çl£
;

1109  
¡rcmp
(
lhs
, 
rhs
) == 0;

1112 #ià
GTEST_HAS_STD_WSTRING


1116 
SŒ—mWideCh¬sToMes§ge
(cÚ¡ 
wch¬_t
* 
w¡r
, 
size_t
 
Ëngth
,

1117 
Mes§ge
* 
msg
) {

1118 
size_t
 
	gi
 = 0; i !ğ
Ëngth
; ) {

1119 ià(
	gw¡r
[
i
] !ğ
L
'\0') {

1120 *
msg
 << 
WideSŒšgToUtf8
(
w¡r
 + 
i
, 
¡©ic_ÿ¡
<>(
Ëngth
 - i));

1121 
	gi
 !ğ
Ëngth
 && 
w¡r
[
i
] !ğ
L
'\0')

1122 
i
++;

1124 *
	gmsg
 << '\0';

1125 
	gi
++;

1132 
S¶™SŒšg
(cÚ¡ ::
¡d
::
¡ršg
& 
¡r
, 
d–im™”
,

1133 ::
¡d
::
veùÜ
< ::¡d::
¡ršg
>* 
de¡
) {

1134 ::
¡d
::
veùÜ
< ::¡d::
¡ršg
> 
·r£d
;

1135 ::
¡d
::
¡ršg
::
size_ty³
 
pos
 = 0;

1136 ::
‹¡šg
::
š‹º®
::
AlwaysTrue
()) {

1137 cÚ¡ ::
¡d
::
¡ršg
::
size_ty³
 
cŞÚ
 = 
¡r
.
fšd
(
d–im™”
, 
pos
);

1138 ià(
	gcŞÚ
 =ğ::
¡d
::
¡ršg
::
Åos
) {

1139 
·r£d
.
push_back
(
¡r
.
sub¡r
(
pos
));

1142 
	g·r£d
.
push_back
(
¡r
.
sub¡r
(
pos
, 
cŞÚ
 -…os));

1143 
	gpos
 = 
cŞÚ
 + 1;

1146 
	gde¡
->
sw­
(
·r£d
);

1156 
	gMes§ge
::
	$Mes§ge
(è: 
	$ss_
(
Ãw
 ::
¡d
::
¡ršg¡»am
) {

1159 *
ss_
 << 
¡d
::
	`£»cisiÚ
(¡d::
num”ic_lim™s
<>::
dig™s10
 + 2);

1160 
	}
}

1164 
	gMes§ge
& Mes§ge::
İ”©Ü
 <<(cÚ¡ 
wch¬_t
* 
wide_c_¡r
) {

1165  *
this
 << 
š‹º®
::
SŒšg
::
ShowWideCSŒšg
(
wide_c_¡r
);

1167 
	gMes§ge
& Mes§ge::
İ”©Ü
 <<(
wch¬_t
* 
wide_c_¡r
) {

1168  *
this
 << 
š‹º®
::
SŒšg
::
ShowWideCSŒšg
(
wide_c_¡r
);

1171 #ià
GTEST_HAS_STD_WSTRING


1174 
	gMes§ge
& Mes§ge::
İ”©Ü
 <<(cÚ¡ ::
¡d
::
w¡ršg
& 
w¡r
) {

1175 
š‹º®
::
SŒ—mWideCh¬sToMes§ge
(
w¡r
.
c_¡r
(), w¡r.
Ëngth
(), 
this
);

1176  *
	gthis
;

1182 
	g¡d
::
¡ršg
 
Mes§ge
::
	$G‘SŒšg
() const {

1183  
š‹º®
::
	`SŒšgSŒ—mToSŒšg
(
ss_
.
	`g‘
());

1184 
	}
}

1188 
	gAs£¹iÚResuÉ
::
	$As£¹iÚResuÉ
(cÚ¡ 
As£¹iÚResuÉ
& 
Ùh”
)

1189 : 
	`sucûss_
(
Ùh”
.
sucûss_
),

1190 
	`mes§ge_
(
Ùh”
.
mes§ge_
.
	`g‘
(è!ğ
nuÎ±r


1191 ? 
Ãw
 ::
¡d
::
	$¡ršg
(*
Ùh”
.
mes§ge_
)

1192 : 
¡©ic_ÿ¡
< ::
¡d
::
¡ršg
*>(
nuÎ±r
)è{
	}
}

1195 
As£¹iÚResuÉ
::
	$sw­
(
As£¹iÚResuÉ
& 
Ùh”
) {

1196 
usšg
 
¡d
::
sw­
;

1197 
	`sw­
(
sucûss_
, 
Ùh”
.success_);

1198 
	`sw­
(
mes§ge_
, 
Ùh”
.message_);

1199 
	}
}

1202 
As£¹iÚResuÉ
 
	gAs£¹iÚResuÉ
::
İ”©Ü
!() const {

1203 
As£¹iÚResuÉ
 
Ãg©iÚ
(!
sucûss_
);

1204 ià(
	gmes§ge_
.
g‘
(è!ğ
nuÎ±r
è
Ãg©iÚ
 << *
mes§ge_
;

1205  
	gÃg©iÚ
;

1209 
As£¹iÚResuÉ
 
	$As£¹iÚSucûss
() {

1210  
	`As£¹iÚResuÉ
(
Œue
);

1211 
	}
}

1214 
As£¹iÚResuÉ
 
	$As£¹iÚFau»
() {

1215  
	`As£¹iÚResuÉ
(
çl£
);

1216 
	}
}

1220 
As£¹iÚResuÉ
 
	$As£¹iÚFau»
(cÚ¡ 
Mes§ge
& 
mes§ge
) {

1221  
	`As£¹iÚFau»
(è<< 
mes§ge
;

1222 
	}
}

1224 
Çme¥aû
 
	gš‹º®
 {

1226 
Çme¥aû
 
	ged™_di¡ªû
 {

1227 
	g¡d
::
veùÜ
<
Ed™Ty³
> 
C®cuÏ‹O±im®Ed™s
(cÚ¡ 
¡d
::veùÜ<
size_t
>& 
Ëá
,

1228 cÚ¡ 
¡d
::
veùÜ
<
size_t
>& 
right
) {

1229 
¡d
::
veùÜ
<¡d::veùÜ<> > 
co¡s
(

1230 
Ëá
.
size
(è+ 1, 
¡d
::
veùÜ
<>(
right
.size() + 1));

1231 
	g¡d
::
veùÜ
<
¡d
::veùÜ<
Ed™Ty³
> > 
be¡_move
(

1232 
Ëá
.
size
(è+ 1, 
¡d
::
veùÜ
<
Ed™Ty³
>(
right
.size() + 1));

1235 
size_t
 
	gl_i
 = 0;†_˜< 
	gco¡s
.
size
(); ++l_i) {

1236 
	gco¡s
[
l_i
][0] = 
¡©ic_ÿ¡
<>(l_i);

1237 
	gbe¡_move
[
l_i
][0] = 
kRemove
;

1240 
size_t
 
	gr_i
 = 1;„_˜< 
	gco¡s
[0].
size
(); ++r_i) {

1241 
	gco¡s
[0][
r_i
] = 
¡©ic_ÿ¡
<>(r_i);

1242 
	gbe¡_move
[0][
r_i
] = 
kAdd
;

1245 
size_t
 
	gl_i
 = 0;†_˜< 
	gËá
.
size
(); ++l_i) {

1246 
size_t
 
	gr_i
 = 0;„_˜< 
	gright
.
size
(); ++r_i) {

1247 ià(
	gËá
[
l_i
] =ğ
right
[
r_i
]) {

1249 
co¡s
[
l_i
 + 1][
r_i
 + 1] = costs[l_i][r_i];

1250 
	gbe¡_move
[
l_i
 + 1][
r_i
 + 1] = 
kM©ch
;

1254 cÚ¡ 
	gadd
 = 
co¡s
[
l_i
 + 1][
r_i
];

1255 cÚ¡ 
	g»move
 = 
co¡s
[
l_i
][
r_i
 + 1];

1256 cÚ¡ 
	g»¶aû
 = 
co¡s
[
l_i
][
r_i
];

1257 ià(
	gadd
 < 
	g»move
 &&‡dd < 
	g»¶aû
) {

1258 
	gco¡s
[
l_i
 + 1][
r_i
 + 1] = 
add
 + 1;

1259 
	gbe¡_move
[
l_i
 + 1][
r_i
 + 1] = 
kAdd
;

1260 } ià(
	g»move
 < 
	gadd
 &&„emov< 
	g»¶aû
) {

1261 
	gco¡s
[
l_i
 + 1][
r_i
 + 1] = 
»move
 + 1;

1262 
	gbe¡_move
[
l_i
 + 1][
r_i
 + 1] = 
kRemove
;

1266 
	gco¡s
[
l_i
 + 1][
r_i
 + 1] = 
»¶aû
 + 1.00001;

1267 
	gbe¡_move
[
l_i
 + 1][
r_i
 + 1] = 
kR•Ïû
;

1273 
	g¡d
::
veùÜ
<
Ed™Ty³
> 
be¡_·th
;

1274 
size_t
 
	gl_i
 = 
Ëá
.
size
(), 
	gr_i
 = 
right
.size();†_i > 0 ||„_i > 0;) {

1275 
Ed™Ty³
 
	gmove
 = 
be¡_move
[
l_i
][
r_i
];

1276 
	gbe¡_·th
.
push_back
(
move
);

1277 
	gl_i
 -ğ
move
 !ğ
kAdd
;

1278 
	gr_i
 -ğ
move
 !ğ
kRemove
;

1280 
	g¡d
::
»v”£
(
be¡_·th
.
begš
(), be¡_·th.
’d
());

1281  
	gbe¡_·th
;

1284 
	gÇme¥aû
 {

1287 şas 
	cIÁ”ÇlSŒšgs
 {

1288 
	gpublic
:

1289 
size_t
 
G‘Id
(cÚ¡ 
¡d
::
¡ršg
& 
¡r
) {

1290 
IdM­
::
™”©Ü
 
™
 = 
ids_
.
fšd
(
¡r
);

1291 ià(
	g™
 !ğ
ids_
.
’d
()è 
™
->
£cÚd
;

1292 
size_t
 
	gid
 = 
ids_
.
size
();

1293  
	gids_
[
¡r
] = 
id
;

1296 
	g´iv©e
:

1297 
¡d
::
	tm­
<
	t¡d
::
	t¡ršg
, 
	tsize_t
> 
	tIdM­
;

1298 
IdM­
 
	gids_
;

1303 
	g¡d
::
veùÜ
<
Ed™Ty³
> 
C®cuÏ‹O±im®Ed™s
(

1304 cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
>& 
Ëá
,

1305 cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
>& 
right
) {

1306 
¡d
::
veùÜ
<
size_t
> 
Ëá_ids
, 
	gright_ids
;

1308 
IÁ”ÇlSŒšgs
 
	gš‹º_bË
;

1309 
size_t
 
	gi
 = 0; i < 
	gËá
.
size
(); ++i) {

1310 
	gËá_ids
.
push_back
(
š‹º_bË
.
G‘Id
(
Ëá
[
i
]));

1312 
size_t
 
	gi
 = 0; i < 
	gright
.
size
(); ++i) {

1313 
	gright_ids
.
push_back
(
š‹º_bË
.
G‘Id
(
right
[
i
]));

1316  
C®cuÏ‹O±im®Ed™s
(
Ëá_ids
, 
right_ids
);

1319 
	gÇme¥aû
 {

1325 şas 
	cHunk
 {

1326 
	gpublic
:

1327 
Hunk
(
size_t
 
Ëá_¡¬t
, size_ˆ
right_¡¬t
)

1328 : 
Ëá_¡¬t_
(
Ëá_¡¬t
),

1329 
right_¡¬t_
(
right_¡¬t
),

1330 
adds_
(),

1331 
»moves_
(),

1332 
commÚ_
() {}

1334 
PushLše
(
ed™
, cÚ¡ * 
lše
) {

1335 
	ged™
) {

1337 ++
commÚ_
;

1338 
FlushEd™s
();

1339 
	ghunk_
.
push_back
(
¡d
::
make_·œ
(' ', 
lše
));

1342 ++
»moves_
;

1343 
	ghunk_»moves_
.
push_back
(
¡d
::
make_·œ
('-', 
lše
));

1346 ++
adds_
;

1347 
	ghunk_adds_
.
push_back
(
¡d
::
make_·œ
('+', 
lše
));

1352 
PrštTo
(
¡d
::
o¡»am
* 
os
) {

1353 
PrštH—d”
(
os
);

1354 
FlushEd™s
();

1355 
	g¡d
::
li¡
<
¡d
::
·œ
<, cÚ¡ *> >::
cÚ¡_™”©Ü
 
™
 =

1356 
hunk_
.
begš
();

1357 
	g™
 !ğ
hunk_
.
’d
(); ++it) {

1358 *
	gos
 << 
	g™
->
	gfœ¡
 << it->
	g£cÚd
 << "\n";

1362 
boŞ
 
has_ed™s
(ècÚ¡ {  
	gadds_
 || 
	g»moves_
; }

1364 
	g´iv©e
:

1365 
FlushEd™s
() {

1366 
hunk_
.
¥liû
(hunk_.
’d
(), 
hunk_»moves_
);

1367 
	ghunk_
.
¥liû
(
hunk_
.
’d
(), 
hunk_adds_
);

1374 
PrštH—d”
(
¡d
::
o¡»am
* 
ss
) const {

1375 *
ss
 << "@@ ";

1376 ià(
	g»moves_
) {

1377 *
	gss
 << "-" << 
	gËá_¡¬t_
 << "," << (
	g»moves_
 + 
	gcommÚ_
);

1379 ià(
	g»moves_
 && 
	gadds_
) {

1380 *
	gss
 << " ";

1382 ià(
	gadds_
) {

1383 *
	gss
 << "+" << 
	gright_¡¬t_
 << "," << (
	gadds_
 + 
	gcommÚ_
);

1385 *
	gss
 << " @@\n";

1388 
size_t
 
	gËá_¡¬t_
, 
	gright_¡¬t_
;

1389 
size_t
 
	gadds_
, 
	g»moves_
, 
	gcommÚ_
;

1390 
	g¡d
::
li¡
<
¡d
::
·œ
<, cÚ¡ *> > 
	ghunk_
, 
	ghunk_adds_
, 
	ghunk_»moves_
;

1402 
	g¡d
::
¡ršg
 
C»©eUnif›dDiff
(cÚ¡ 
¡d
::
veùÜ
<¡d::¡ršg>& 
Ëá
,

1403 cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
>& 
right
,

1404 
size_t
 
cÚ‹xt
) {

1405 cÚ¡ 
	g¡d
::
veùÜ
<
Ed™Ty³
> 
ed™s
 = 
C®cuÏ‹O±im®Ed™s
(
Ëá
, 
right
);

1407 
size_t
 
	gl_i
 = 0, 
	gr_i
 = 0, 
	ged™_i
 = 0;

1408 
	g¡d
::
¡ršg¡»am
 
ss
;

1409 
	ged™_i
 < 
	ged™s
.
size
()) {

1411 
	ged™_i
 < 
	ged™s
.
size
(è&&ƒd™s[
ed™_i
] =ğ
kM©ch
) {

1412 ++
l_i
;

1413 ++
	gr_i
;

1414 ++
	ged™_i
;

1418 cÚ¡ 
size_t
 
	g´efix_cÚ‹xt
 = 
¡d
::
mš
(
l_i
, 
cÚ‹xt
);

1419 
Hunk
 
hunk
(
l_i
 - 
´efix_cÚ‹xt
 + 1, 
r_i
 -…refix_context + 1);

1420 
size_t
 
	gi
 = 
´efix_cÚ‹xt
; i > 0; --i) {

1421 
	ghunk
.
PushLše
(' ', 
Ëá
[
l_i
 - 
i
].
c_¡r
());

1426 
size_t
 
	gn_suffix
 = 0;

1427 ; 
	ged™_i
 < 
	ged™s
.
size
(); ++edit_i) {

1428 ià(
	gn_suffix
 >ğ
cÚ‹xt
) {

1430 autØ
™
 = 
ed™s
.
begš
(è+ 
¡©ic_ÿ¡
<>(
ed™_i
);

1431 
	g™
 !ğ
ed™s
.
’d
(è&& *
™
 =ğ
kM©ch
) ++it;

1432 ià(
	g™
 =ğ
ed™s
.
’d
() ||

1433 
¡©ic_ÿ¡
<
size_t
>(
™
 - 
ed™s
.
begš
()è- 
ed™_i
 >ğ
cÚ‹xt
) {

1439 
Ed™Ty³
 
	ged™
 = 
ed™s
[
ed™_i
];

1441 
	gn_suffix
 = 
ed™
 =ğ
kM©ch
 ? 
n_suffix
 + 1 : 0;

1443 ià(
	ged™
 =ğ
kM©ch
 || 
ed™
 =ğ
kRemove
 ||ƒd™ =ğ
kR•Ïû
) {

1444 
hunk
.
PushLše
(
ed™
 =ğ
kM©ch
 ? ' ' : '-', 
Ëá
[
l_i
].
c_¡r
());

1446 ià(
	ged™
 =ğ
kAdd
 || 
ed™
 =ğ
kR•Ïû
) {

1447 
hunk
.
PushLše
('+', 
right
[
r_i
].
c_¡r
());

1451 
	gl_i
 +ğ
ed™
 !ğ
kAdd
;

1452 
	gr_i
 +ğ
ed™
 !ğ
kRemove
;

1455 ià(!
	ghunk
.
has_ed™s
()) {

1460 
	ghunk
.
PrštTo
(&
ss
);

1462  
	gss
.
¡r
();

1467 
	gÇme¥aû
 {

1472 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> 
S¶™Esÿ³dSŒšg
(cÚ¡ std::¡ršg& 
¡r
) {

1473 
¡d
::
veùÜ
<¡d::
¡ršg
> 
lšes
;

1474 
size_t
 
	g¡¬t
 = 0, 
	g’d
 = 
¡r
.
size
();

1475 ià(
	g’d
 > 2 && 
	g¡r
[0] =ğ'"' && 
¡r
[
’d
 - 1] == '"') {

1476 ++
¡¬t
;

1477 --
	g’d
;

1479 
boŞ
 
	gesÿ³d
 = 
çl£
;

1480 
size_t
 
	gi
 = 
¡¬t
; i + 1 < 
	g’d
; ++i) {

1481 ià(
	gesÿ³d
) {

1482 
	gesÿ³d
 = 
çl£
;

1483 ià(
	g¡r
[
i
] == 'n') {

1484 
lšes
.
push_back
(
¡r
.
sub¡r
(
¡¬t
, 
i
 - start - 1));

1485 
	g¡¬t
 = 
i
 + 1;

1488 
	gesÿ³d
 = 
¡r
[
i
] == '\\';

1491 
	glšes
.
push_back
(
¡r
.
sub¡r
(
¡¬t
, 
’d
 - start));

1492  
	glšes
;

1512 
As£¹iÚResuÉ
 
EqFau»
(cÚ¡ * 
lhs_ex´essiÚ
,

1513 cÚ¡ * 
rhs_ex´essiÚ
,

1514 cÚ¡ 
¡d
::
¡ršg
& 
lhs_v®ue
,

1515 cÚ¡ 
¡d
::
¡ršg
& 
rhs_v®ue
,

1516 
boŞ
 
ignÜšg_ÿ£
) {

1517 
Mes§ge
 
	gmsg
;

1518 
	gmsg
 << "Expectedƒquality ofhese values:";

1519 
	gmsg
 << "\À " << 
	glhs_ex´essiÚ
;

1520 ià(
	glhs_v®ue
 !ğ
lhs_ex´essiÚ
) {

1521 
msg
 << "\À Which is: " << 
lhs_v®ue
;

1523 
	gmsg
 << "\À " << 
	grhs_ex´essiÚ
;

1524 ià(
	grhs_v®ue
 !ğ
rhs_ex´essiÚ
) {

1525 
msg
 << "\À Which is: " << 
rhs_v®ue
;

1528 ià(
	gignÜšg_ÿ£
) {

1529 
	gmsg
 << "\nIgnoring case";

1532 ià(!
	glhs_v®ue
.
em±y
(è&& !
	grhs_v®ue
.empty()) {

1533 cÚ¡ 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> 
lhs_lšes
 =

1534 
S¶™Esÿ³dSŒšg
(
lhs_v®ue
);

1535 cÚ¡ 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> 
rhs_lšes
 =

1536 
S¶™Esÿ³dSŒšg
(
rhs_v®ue
);

1537 ià(
	glhs_lšes
.
size
(è> 1 || 
	grhs_lšes
.size() > 1) {

1538 
	gmsg
 << "\nWith diff:\n"

1539 << 
	ged™_di¡ªû
::
C»©eUnif›dDiff
(
lhs_lšes
, 
rhs_lšes
);

1543  
As£¹iÚFau»
(è<< 
	gmsg
;

1547 
	g¡d
::
¡ršg
 
G‘BoŞAs£¹iÚFau»Mes§ge
(

1548 cÚ¡ 
As£¹iÚResuÉ
& 
as£¹iÚ_»suÉ
,

1549 cÚ¡ * 
ex´essiÚ_‹xt
,

1550 cÚ¡ * 
aùu®_´ediÿ‹_v®ue
,

1551 cÚ¡ * 
ex³ùed_´ediÿ‹_v®ue
) {

1552 cÚ¡ * 
	gaùu®_mes§ge
 = 
as£¹iÚ_»suÉ
.
mes§ge
();

1553 
Mes§ge
 
	gmsg
;

1554 
	gmsg
 << "V®uof: " << 
	gex´essiÚ_‹xt


1555 << "\À Aùu®: " << 
	gaùu®_´ediÿ‹_v®ue
;

1556 ià(
	gaùu®_mes§ge
[0] != '\0')

1557 
msg
 << " (" << 
aùu®_mes§ge
 << ")";

1558 
	gmsg
 << "\nEx³ùed: " << 
	gex³ùed_´ediÿ‹_v®ue
;

1559  
	gmsg
.
G‘SŒšg
();

1563 
As£¹iÚResuÉ
 
DoubËN—rP»dFÜm©
(cÚ¡ * 
ex´1
,

1564 cÚ¡ * 
ex´2
,

1565 cÚ¡ * 
abs_”rÜ_ex´
,

1566 
v®1
,

1567 
v®2
,

1568 
abs_”rÜ
) {

1569 cÚ¡ 
	gdiff
 = 
çbs
(
v®1
 - 
v®2
);

1570 ià(
	gdiff
 <ğ
abs_”rÜ
è 
As£¹iÚSucûss
();

1573 cÚ¡ 
	gmš_abs
 = 
¡d
::
mš
(
çbs
(
v®1
), fabs(
v®2
));

1575 cÚ¡ 
	g•sÚ
 =

1576 
Ãxá”
(
mš_abs
, 
¡d
::
num”ic_lim™s
<>::
šfš™y
()) - min_abs;

1583 ià(!(
	g¡d
::
i¢ª
)(
v®1
è&& !(
¡d
::i¢ª)(
v®2
è&& 
abs_”rÜ
 > 0 &&

1584 
abs_”rÜ
 < 
•sÚ
) {

1585  
As£¹iÚFau»
()

1586 << "Thdifã»nû b‘w“À" << 
ex´1
 << "‡nd " << 
ex´2
 << " is "

1587 << 
diff
 << ", where\n"

1588 << 
ex´1
 << "ƒv®u©e tØ" << 
v®1
 << ",\n"

1589 << 
ex´2
 << "ƒv®u©e tØ" << 
v®2
 << ".\nThe‡bs_error…arameter "

1590 << 
abs_”rÜ_ex´
 << "ƒv®u©e tØ" << 
abs_”rÜ


1593 << 
•sÚ


1597  
As£¹iÚFau»
()

1598 << "Thdifã»nû b‘w“À" << 
	gex´1
 << "‡nd " << 
	gex´2


1599 << " i " << 
	gdiff
 << ", whichƒxûed " << 
	gabs_”rÜ_ex´
 << ", where\n"

1600 << 
	gex´1
 << "ƒv®u©e tØ" << 
	gv®1
 << ",\n"

1601 << 
	gex´2
 << "ƒv®u©e tØ" << 
	gv®2
 << ",‡nd\n"

1602 << 
	gabs_”rÜ_ex´
 << "ƒv®u©e tØ" << 
	gabs_”rÜ
 << ".";

1607 
	g‹m¶©e
 <
ty³Çme
 
	gRawTy³
>

1608 
As£¹iÚResuÉ
 
FlßtšgPoštLE
(cÚ¡ * 
ex´1
,

1609 cÚ¡ * 
ex´2
,

1610 
RawTy³
 
v®1
,

1611 
RawTy³
 
v®2
) {

1613 ià(
	gv®1
 < 
	gv®2
) {

1614  
As£¹iÚSucûss
();

1618 cÚ¡ 
	gFlßtšgPošt
<
	gRawTy³
> 
lhs
(
v®1
), 
rhs
(
v®2
);

1619 ià(
	glhs
.
Almo¡Equ®s
(
rhs
)) {

1620  
As£¹iÚSucûss
();

1627 ::
¡d
::
¡ršg¡»am
 
v®1_ss
;

1628 
	gv®1_ss
 << 
	g¡d
::
£»cisiÚ
(
¡d
::
num”ic_lim™s
<
RawTy³
>::
dig™s10
 + 2)

1629 << 
v®1
;

1631 ::
¡d
::
¡ršg¡»am
 
v®2_ss
;

1632 
	gv®2_ss
 << 
	g¡d
::
£»cisiÚ
(
¡d
::
num”ic_lim™s
<
RawTy³
>::
dig™s10
 + 2)

1633 << 
v®2
;

1635  
As£¹iÚFau»
()

1636 << "Ex³ùed: (" << 
	gex´1
 << "è<ğ(" << 
	gex´2
 << ")\n"

1637 << " Aùu®: " << 
SŒšgSŒ—mToSŒšg
(&
v®1_ss
) << " vs "

1638 << 
SŒšgSŒ—mToSŒšg
(&
v®2_ss
);

1645 
As£¹iÚResuÉ
 
	$FlßtLE
(cÚ¡ * 
ex´1
, cÚ¡ * 
ex´2
,

1646 
v®1
, 
v®2
) {

1647  
š‹º®
::
FlßtšgPoštLE
<>(
ex´1
, 
ex´2
, 
v®1
, 
v®2
);

1648 
	}
}

1652 
As£¹iÚResuÉ
 
	$DoubËLE
(cÚ¡ * 
ex´1
, cÚ¡ * 
ex´2
,

1653 
v®1
, 
v®2
) {

1654  
š‹º®
::
FlßtšgPoštLE
<>(
ex´1
, 
ex´2
, 
v®1
, 
v®2
);

1655 
	}
}

1657 
Çme¥aû
 
	gš‹º®
 {

1660 
As£¹iÚResuÉ
 
CmpH–³rSTREQ
(cÚ¡ * 
lhs_ex´essiÚ
,

1661 cÚ¡ * 
rhs_ex´essiÚ
,

1662 cÚ¡ * 
lhs
,

1663 cÚ¡ * 
rhs
) {

1664 ià(
	gSŒšg
::
CSŒšgEqu®s
(
lhs
, 
rhs
)) {

1665  
As£¹iÚSucûss
();

1668  
EqFau»
(
lhs_ex´essiÚ
,

1669 
rhs_ex´essiÚ
,

1670 
PrštToSŒšg
(
lhs
),

1671 
PrštToSŒšg
(
rhs
),

1672 
çl£
);

1676 
As£¹iÚResuÉ
 
CmpH–³rSTRCASEEQ
(cÚ¡ * 
lhs_ex´essiÚ
,

1677 cÚ¡ * 
rhs_ex´essiÚ
,

1678 cÚ¡ * 
lhs
,

1679 cÚ¡ * 
rhs
) {

1680 ià(
	gSŒšg
::
Ca£In£ns™iveCSŒšgEqu®s
(
lhs
, 
rhs
)) {

1681  
As£¹iÚSucûss
();

1684  
EqFau»
(
lhs_ex´essiÚ
,

1685 
rhs_ex´essiÚ
,

1686 
PrštToSŒšg
(
lhs
),

1687 
PrštToSŒšg
(
rhs
),

1688 
Œue
);

1692 
As£¹iÚResuÉ
 
CmpH–³rSTRNE
(cÚ¡ * 
s1_ex´essiÚ
,

1693 cÚ¡ * 
s2_ex´essiÚ
,

1694 cÚ¡ * 
s1
,

1695 cÚ¡ * 
s2
) {

1696 ià(!
	gSŒšg
::
CSŒšgEqu®s
(
s1
, 
s2
)) {

1697  
As£¹iÚSucûss
();

1699  
As£¹iÚFau»
(è<< "Ex³ùed: (" << 
	gs1_ex´essiÚ
 << ") != ("

1700 << 
	gs2_ex´essiÚ
 << "),‡ctual: \""

1701 << 
	gs1
 << "\" v \"" << 
	gs2
 << "\"";

1706 
As£¹iÚResuÉ
 
CmpH–³rSTRCASENE
(cÚ¡ * 
s1_ex´essiÚ
,

1707 cÚ¡ * 
s2_ex´essiÚ
,

1708 cÚ¡ * 
s1
,

1709 cÚ¡ * 
s2
) {

1710 ià(!
	gSŒšg
::
Ca£In£ns™iveCSŒšgEqu®s
(
s1
, 
s2
)) {

1711  
As£¹iÚSucûss
();

1713  
As£¹iÚFau»
()

1714 << "Ex³ùed: (" << 
	gs1_ex´essiÚ
 << ") != ("

1715 << 
	gs2_ex´essiÚ
 << ") (ignoring case),‡ctual: \""

1716 << 
	gs1
 << "\" v \"" << 
	gs2
 << "\"";

1722 
	gÇme¥aû
 {

1730 
boŞ
 
IsSub¡ršgP»d
(cÚ¡ * 
ÃedË
, cÚ¡ * 
hay¡ack
) {

1731 ià(
	gÃedË
 =ğ
nuÎ±r
 || 
hay¡ack
 =ğnuÎ±rè 
ÃedË
 == haystack;

1733  
¡r¡r
(
hay¡ack
, 
ÃedË
è!ğ
nuÎ±r
;

1736 
boŞ
 
IsSub¡ršgP»d
(cÚ¡ 
wch¬_t
* 
ÃedË
, cÚ¡ wch¬_t* 
hay¡ack
) {

1737 ià(
	gÃedË
 =ğ
nuÎ±r
 || 
hay¡ack
 =ğnuÎ±rè 
ÃedË
 == haystack;

1739  
wcs¡r
(
hay¡ack
, 
ÃedË
è!ğ
nuÎ±r
;

1743 
	g‹m¶©e
 <
ty³Çme
 
	gSŒšgTy³
>

1744 
boŞ
 
IsSub¡ršgP»d
(cÚ¡ 
SŒšgTy³
& 
ÃedË
,

1745 cÚ¡ 
SŒšgTy³
& 
hay¡ack
) {

1746  
	ghay¡ack
.
fšd
(
ÃedË
è!ğ
SŒšgTy³
::
Åos
;

1753 
	g‹m¶©e
 <
ty³Çme
 
	gSŒšgTy³
>

1754 
As£¹iÚResuÉ
 
IsSub¡ršgIm¶
(

1755 
boŞ
 
ex³ùed_to_be_sub¡ršg
,

1756 cÚ¡ * 
ÃedË_ex´
, cÚ¡ * 
hay¡ack_ex´
,

1757 cÚ¡ 
SŒšgTy³
& 
ÃedË
, cÚ¡ SŒšgTy³& 
hay¡ack
) {

1758 ià(
IsSub¡ršgP»d
(
ÃedË
, 
hay¡ack
è=ğ
ex³ùed_to_be_sub¡ršg
)

1759  
As£¹iÚSucûss
();

1761 cÚ¡ 
boŞ
 
	gis_wide_¡ršg
 = (
ÃedË
[0]) > 1;

1762 cÚ¡ * cÚ¡ 
	gbegš_¡ršg_quÙe
 = 
is_wide_¡ršg
 ? "L\"" : "\"";

1763  
As£¹iÚFau»
()

1764 << "V®uof: " << 
	gÃedË_ex´
 << "\n"

1765 << " Aùu®: " << 
	gbegš_¡ršg_quÙe
 << 
	gÃedË
 << "\"\n"

1766 << "Ex³ùed: " << (
	gex³ùed_to_be_sub¡ršg
 ? "" : "not ")

1767 << "¨sub¡ršg oà" << 
hay¡ack_ex´
 << "\n"

1768 << "Which is: " << 
begš_¡ršg_quÙe
 << 
hay¡ack
 << "\"";

1777 
As£¹iÚResuÉ
 
	$IsSub¡ršg
(

1778 cÚ¡ * 
ÃedË_ex´
, cÚ¡ * 
hay¡ack_ex´
,

1779 cÚ¡ * 
ÃedË
, cÚ¡ * 
hay¡ack
) {

1780  
	`IsSub¡ršgIm¶
(
Œue
, 
ÃedË_ex´
, 
hay¡ack_ex´
, 
ÃedË
, 
hay¡ack
);

1781 
	}
}

1783 
As£¹iÚResuÉ
 
	$IsSub¡ršg
(

1784 cÚ¡ * 
ÃedË_ex´
, cÚ¡ * 
hay¡ack_ex´
,

1785 cÚ¡ 
wch¬_t
* 
ÃedË
, cÚ¡ wch¬_t* 
hay¡ack
) {

1786  
	`IsSub¡ršgIm¶
(
Œue
, 
ÃedË_ex´
, 
hay¡ack_ex´
, 
ÃedË
, 
hay¡ack
);

1787 
	}
}

1789 
As£¹iÚResuÉ
 
	$IsNÙSub¡ršg
(

1790 cÚ¡ * 
ÃedË_ex´
, cÚ¡ * 
hay¡ack_ex´
,

1791 cÚ¡ * 
ÃedË
, cÚ¡ * 
hay¡ack
) {

1792  
	`IsSub¡ršgIm¶
(
çl£
, 
ÃedË_ex´
, 
hay¡ack_ex´
, 
ÃedË
, 
hay¡ack
);

1793 
	}
}

1795 
As£¹iÚResuÉ
 
	$IsNÙSub¡ršg
(

1796 cÚ¡ * 
ÃedË_ex´
, cÚ¡ * 
hay¡ack_ex´
,

1797 cÚ¡ 
wch¬_t
* 
ÃedË
, cÚ¡ wch¬_t* 
hay¡ack
) {

1798  
	`IsSub¡ršgIm¶
(
çl£
, 
ÃedË_ex´
, 
hay¡ack_ex´
, 
ÃedË
, 
hay¡ack
);

1799 
	}
}

1801 
As£¹iÚResuÉ
 
	$IsSub¡ršg
(

1802 cÚ¡ * 
ÃedË_ex´
, cÚ¡ * 
hay¡ack_ex´
,

1803 cÚ¡ ::
¡d
::
¡ršg
& 
ÃedË
, cÚ¡ ::¡d::¡ršg& 
hay¡ack
) {

1804  
	`IsSub¡ršgIm¶
(
Œue
, 
ÃedË_ex´
, 
hay¡ack_ex´
, 
ÃedË
, 
hay¡ack
);

1805 
	}
}

1807 
As£¹iÚResuÉ
 
	$IsNÙSub¡ršg
(

1808 cÚ¡ * 
ÃedË_ex´
, cÚ¡ * 
hay¡ack_ex´
,

1809 cÚ¡ ::
¡d
::
¡ršg
& 
ÃedË
, cÚ¡ ::¡d::¡ršg& 
hay¡ack
) {

1810  
	`IsSub¡ršgIm¶
(
çl£
, 
ÃedË_ex´
, 
hay¡ack_ex´
, 
ÃedË
, 
hay¡ack
);

1811 
	}
}

1813 #ià
GTEST_HAS_STD_WSTRING


1814 
As£¹iÚResuÉ
 
	$IsSub¡ršg
(

1815 cÚ¡ * 
ÃedË_ex´
, cÚ¡ * 
hay¡ack_ex´
,

1816 cÚ¡ ::
¡d
::
w¡ršg
& 
ÃedË
, cÚ¡ ::¡d::w¡ršg& 
hay¡ack
) {

1817  
	`IsSub¡ršgIm¶
(
Œue
, 
ÃedË_ex´
, 
hay¡ack_ex´
, 
ÃedË
, 
hay¡ack
);

1818 
	}
}

1820 
As£¹iÚResuÉ
 
	$IsNÙSub¡ršg
(

1821 cÚ¡ * 
ÃedË_ex´
, cÚ¡ * 
hay¡ack_ex´
,

1822 cÚ¡ ::
¡d
::
w¡ršg
& 
ÃedË
, cÚ¡ ::¡d::w¡ršg& 
hay¡ack
) {

1823  
	`IsSub¡ršgIm¶
(
çl£
, 
ÃedË_ex´
, 
hay¡ack_ex´
, 
ÃedË
, 
hay¡ack
);

1824 
	}
}

1827 
Çme¥aû
 
	gš‹º®
 {

1829 #ià
GTEST_OS_WINDOWS


1831 
	gÇme¥aû
 {

1834 
As£¹iÚResuÉ
 
HRESULTFau»H–³r
(cÚ¡ * 
ex´
,

1835 cÚ¡ * 
ex³ùed
,

1836 
hr
) {

1837 #ià
GTEST_OS_WINDOWS_MOBILE
 || 
GTEST_OS_WINDOWS_TV_TITLE


1840 cÚ¡ 
	g”rÜ_‹xt
[] = "";

1847 cÚ¡ 
DWORD
 
	gkFÏgs
 = 
FORMAT_MESSAGE_FROM_SYSTEM
 |

1848 
FORMAT_MESSAGE_IGNORE_INSERTS
;

1849 cÚ¡ 
DWORD
 
	gkBufSize
 = 4096;

1851 
	g”rÜ_‹xt
[
kBufSize
] = { '\0' };

1852 
DWORD
 
	gmes§ge_Ëngth
 = ::
FÜm©Mes§geA
(
kFÏgs
,

1854 
¡©ic_ÿ¡
<
DWORD
>(
hr
),

1856 
”rÜ_‹xt
,

1857 
kBufSize
,

1858 
nuÎ±r
);

1860 ; 
	gmes§ge_Ëngth
 && 
IsS·û
(
”rÜ_‹xt
[
mes§ge_Ëngth
 - 1]);

1861 --
	gmes§ge_Ëngth
) {

1862 
	g”rÜ_‹xt
[
mes§ge_Ëngth
 - 1] = '\0';

1867 cÚ¡ 
	g¡d
::
¡ršg
 
”rÜ_hex
("0x" + 
SŒšg
::
FÜm©HexIÁ
(
hr
));

1868  ::
‹¡šg
::
As£¹iÚFau»
()

1869 << "Ex³ùed: " << 
ex´
 << " " << 
ex³ùed
 << ".\n"

1870 << " Aùu®: " << 
”rÜ_hex
 << " " << 
”rÜ_‹xt
 << "\n";

1875 
As£¹iÚResuÉ
 
IsHRESULTSucûss
(cÚ¡ * 
ex´
, 
hr
) {

1876 ià(
SUCCEEDED
(
hr
)) {

1877  
As£¹iÚSucûss
();

1879  
HRESULTFau»H–³r
(
ex´
, "sucûeds", 
hr
);

1882 
As£¹iÚResuÉ
 
IsHRESULTFau»
(cÚ¡ * 
ex´
, 
hr
) {

1883 ià(
FAILED
(
hr
)) {

1884  
As£¹iÚSucûss
();

1886  
HRESULTFau»H–³r
(
ex´
, "çs", 
hr
);

1904 
cÚ¡ex´
 
ušt32_t
 
	gkMaxCodePošt1
 = (
¡©ic_ÿ¡
<uint32_t>(1) << 7) - 1;

1907 
cÚ¡ex´
 
ušt32_t
 
	gkMaxCodePošt2
 = (
¡©ic_ÿ¡
<uint32_t>(1) << (5 + 6)) - 1;

1910 
cÚ¡ex´
 
ušt32_t
 
	gkMaxCodePošt3
 = (
¡©ic_ÿ¡
<uint32_t>(1) << (4 + 2*6)) - 1;

1913 
cÚ¡ex´
 
ušt32_t
 
	gkMaxCodePošt4
 = (
¡©ic_ÿ¡
<uint32_t>(1) << (3 + 3*6)) - 1;

1918 
šlše
 
ušt32_t
 
ChİLowB™s
(ušt32_t* 
b™s
, 
n
) {

1919 cÚ¡ 
ušt32_t
 
	glow_b™s
 = *
b™s
 & ((
¡©ic_ÿ¡
<ušt32_t>(1è<< 
n
) - 1);

1920 *
	gb™s
 >>ğ
n
;

1921  
	glow_b™s
;

1930 
	g¡d
::
¡ršg
 
CodePoštToUtf8
(
ušt32_t
 
code_pošt
) {

1931 ià(
code_pošt
 > 
kMaxCodePošt4
) {

1932  "(Inv®id Unicod0x" + 
SŒšg
::
FÜm©HexUIÁ32
(
code_pošt
) + ")";

1935 
	g¡r
[5];

1936 ià(
	gcode_pošt
 <ğ
kMaxCodePošt1
) {

1937 
¡r
[1] = '\0';

1938 
	g¡r
[0] = 
¡©ic_ÿ¡
<>(
code_pošt
);

1939 } ià(
	gcode_pošt
 <ğ
kMaxCodePošt2
) {

1940 
¡r
[2] = '\0';

1941 
	g¡r
[1] = 
¡©ic_ÿ¡
<>(0x80 | 
ChİLowB™s
(&
code_pošt
, 6));

1942 
	g¡r
[0] = 
¡©ic_ÿ¡
<>(0xC0 | 
code_pošt
);

1943 } ià(
	gcode_pošt
 <ğ
kMaxCodePošt3
) {

1944 
¡r
[3] = '\0';

1945 
	g¡r
[2] = 
¡©ic_ÿ¡
<>(0x80 | 
ChİLowB™s
(&
code_pošt
, 6));

1946 
	g¡r
[1] = 
¡©ic_ÿ¡
<>(0x80 | 
ChİLowB™s
(&
code_pošt
, 6));

1947 
	g¡r
[0] = 
¡©ic_ÿ¡
<>(0xE0 | 
code_pošt
);

1949 
	g¡r
[4] = '\0';

1950 
	g¡r
[3] = 
¡©ic_ÿ¡
<>(0x80 | 
ChİLowB™s
(&
code_pošt
, 6));

1951 
	g¡r
[2] = 
¡©ic_ÿ¡
<>(0x80 | 
ChİLowB™s
(&
code_pošt
, 6));

1952 
	g¡r
[1] = 
¡©ic_ÿ¡
<>(0x80 | 
ChİLowB™s
(&
code_pošt
, 6));

1953 
	g¡r
[0] = 
¡©ic_ÿ¡
<>(0xF0 | 
code_pošt
);

1955  
	g¡r
;

1965 
šlše
 
boŞ
 
IsUtf16Su¼og©ePaœ
(
wch¬_t
 
fœ¡
, wch¬_ˆ
£cÚd
) {

1966  (
	gwch¬_t
) == 2 &&

1967 (
fœ¡
 & 0xFC00è=ğ0xD800 && (
£cÚd
 & 0xFC00) == 0xDC00;

1971 
šlše
 
ušt32_t
 
C»©eCodePoštFromUtf16Su¼og©ePaœ
(
wch¬_t
 
fœ¡
,

1972 
wch¬_t
 
£cÚd
) {

1973 cÚ¡‡utØ
	gfœ¡_u
 = 
¡©ic_ÿ¡
<
ušt32_t
>(
fœ¡
);

1974 cÚ¡‡utØ
	g£cÚd_u
 = 
¡©ic_ÿ¡
<
ušt32_t
>(
£cÚd
);

1975 cÚ¡ 
ušt32_t
 
	gmask
 = (1 << 10) - 1;

1976  ((
	gwch¬_t
) == 2)

1977 ? (((
fœ¡_u
 & 
mask
è<< 10è| (
£cÚd_u
 & mask)) + 0x10000

1981 
fœ¡_u
;

1997 
	g¡d
::
¡ršg
 
WideSŒšgToUtf8
(cÚ¡ 
wch¬_t
* 
¡r
, 
num_ch¬s
) {

1998 ià(
	gnum_ch¬s
 == -1)

1999 
num_ch¬s
 = 
¡©ic_ÿ¡
<>(
wc¦’
(
¡r
));

2001 ::
¡d
::
¡ršg¡»am
 
¡»am
;

2002 
	gi
 = 0; i < 
	gnum_ch¬s
; ++i) {

2003 
ušt32_t
 
	gunicode_code_pošt
;

2005 ià(
	g¡r
[
i
] =ğ
L
'\0') {

2007 } ià(
	gi
 + 1 < 
	gnum_ch¬s
 && 
IsUtf16Su¼og©ePaœ
(
¡r
[
i
], str[i + 1])) {

2008 
	gunicode_code_pošt
 = 
C»©eCodePoštFromUtf16Su¼og©ePaœ
(
¡r
[
i
],

2009 
¡r
[
i
 + 1]);

2010 
	gi
++;

2012 
	gunicode_code_pošt
 = 
¡©ic_ÿ¡
<
ušt32_t
>(
¡r
[
i
]);

2015 
	g¡»am
 << 
CodePoštToUtf8
(
unicode_code_pošt
);

2017  
SŒšgSŒ—mToSŒšg
(&
¡»am
);

2022 
	g¡d
::
¡ršg
 
SŒšg
::
ShowWideCSŒšg
(cÚ¡ 
wch¬_t
 * 
wide_c_¡r
) {

2023 ià(
wide_c_¡r
 =ğ
nuÎ±r
)  "(null)";

2025  
	gš‹º®
::
WideSŒšgToUtf8
(
wide_c_¡r
, -1);

2034 
boŞ
 
	gSŒšg
::
WideCSŒšgEqu®s
(cÚ¡ 
wch¬_t
 * 
lhs
, cÚ¡ wch¬_ˆ* 
rhs
) {

2035 ià(
	glhs
 =ğ
nuÎ±r
è 
rhs
 ==‚ullptr;

2037 ià(
	grhs
 =ğ
nuÎ±r
è 
çl£
;

2039  
wcscmp
(
lhs
, 
rhs
) == 0;

2043 
As£¹iÚResuÉ
 
CmpH–³rSTREQ
(cÚ¡ * 
lhs_ex´essiÚ
,

2044 cÚ¡ * 
rhs_ex´essiÚ
,

2045 cÚ¡ 
wch¬_t
* 
lhs
,

2046 cÚ¡ 
wch¬_t
* 
rhs
) {

2047 ià(
	gSŒšg
::
WideCSŒšgEqu®s
(
lhs
, 
rhs
)) {

2048  
As£¹iÚSucûss
();

2051  
EqFau»
(
lhs_ex´essiÚ
,

2052 
rhs_ex´essiÚ
,

2053 
PrštToSŒšg
(
lhs
),

2054 
PrštToSŒšg
(
rhs
),

2055 
çl£
);

2059 
As£¹iÚResuÉ
 
CmpH–³rSTRNE
(cÚ¡ * 
s1_ex´essiÚ
,

2060 cÚ¡ * 
s2_ex´essiÚ
,

2061 cÚ¡ 
wch¬_t
* 
s1
,

2062 cÚ¡ 
wch¬_t
* 
s2
) {

2063 ià(!
	gSŒšg
::
WideCSŒšgEqu®s
(
s1
, 
s2
)) {

2064  
As£¹iÚSucûss
();

2067  
As£¹iÚFau»
(è<< "Ex³ùed: (" << 
	gs1_ex´essiÚ
 << ") != ("

2068 << 
	gs2_ex´essiÚ
 << "),‡ctual: "

2069 << 
PrštToSŒšg
(
s1
)

2070 << " v " << 
PrštToSŒšg
(
s2
);

2079 
boŞ
 
	gSŒšg
::
Ca£In£ns™iveCSŒšgEqu®s
(cÚ¡ * 
lhs
, cÚ¡ * 
rhs
) {

2080 ià(
	glhs
 =ğ
nuÎ±r
è 
rhs
 ==‚ullptr;

2081 ià(
	grhs
 =ğ
nuÎ±r
è 
çl£
;

2082  
	gposix
::
SŒCa£Cmp
(
lhs
, 
rhs
) == 0;

2097 
boŞ
 
	gSŒšg
::
Ca£In£ns™iveWideCSŒšgEqu®s
(cÚ¡ 
wch¬_t
* 
lhs
,

2098 cÚ¡ 
wch¬_t
* 
rhs
) {

2099 ià(
	glhs
 =ğ
nuÎ±r
è 
rhs
 ==‚ullptr;

2101 ià(
	grhs
 =ğ
nuÎ±r
è 
çl£
;

2103 #ià
GTEST_OS_WINDOWS


2104  
_wcsicmp
(
lhs
, 
rhs
) == 0;

2105 #–ià
GTEST_OS_LINUX
 && !
GTEST_OS_LINUX_ANDROID


2106  
wcsÿ£cmp
(
lhs
, 
rhs
) == 0;

2110 
wšt_t
 
	gËá
, 
	gright
;

2112 
	gËá
 = 
towlow”
(
¡©ic_ÿ¡
<
wšt_t
>(*
lhs
++));

2113 
	gright
 = 
towlow”
(
¡©ic_ÿ¡
<
wšt_t
>(*
rhs
++));

2114 } 
	gËá
 &&†eá =ğ
right
);

2115  
	gËá
 =ğ
right
;

2121 
boŞ
 
	gSŒšg
::
EndsW™hCa£In£ns™ive
(

2122 cÚ¡ 
¡d
::
¡ršg
& 
¡r
, cÚ¡ std::¡ršg& 
suffix
) {

2123 cÚ¡ 
size_t
 
¡r_Ën
 = 
¡r
.
Ëngth
();

2124 cÚ¡ 
size_t
 
	gsuffix_Ën
 = 
suffix
.
Ëngth
();

2125  (
	g¡r_Ën
 >ğ
suffix_Ën
) &&

2126 
Ca£In£ns™iveCSŒšgEqu®s
(
¡r
.
c_¡r
(è+ 
¡r_Ën
 - 
suffix_Ën
,

2127 
suffix
.
c_¡r
());

2131 
	g¡d
::
¡ršg
 
SŒšg
::
FÜm©IÁWidth2
(
v®ue
) {

2132  
FÜm©IÁWidthN
(
v®ue
, 2);

2136 
	g¡d
::
¡ršg
 
SŒšg
::
FÜm©IÁWidthN
(
v®ue
, 
width
) {

2137 
	g¡d
::
¡ršg¡»am
 
ss
;

2138 
	gss
 << 
	g¡d
::
£tfl
('0'è<< 
¡d
::
£tw
(
width
è<< 
v®ue
;

2139  
	gss
.
¡r
();

2143 
	g¡d
::
¡ršg
 
SŒšg
::
FÜm©HexUIÁ32
(
ušt32_t
 
v®ue
) {

2144 
¡d
::
¡ršg¡»am
 
ss
;

2145 
	gss
 << 
	g¡d
::
hex
 << 
¡d
::
uµ”ÿ£
 << 
v®ue
;

2146  
	gss
.
¡r
();

2150 
	g¡d
::
¡ršg
 
SŒšg
::
FÜm©HexIÁ
(
v®ue
) {

2151  
FÜm©HexUIÁ32
(
¡©ic_ÿ¡
<
ušt32_t
>(
v®ue
));

2155 
	g¡d
::
¡ršg
 
SŒšg
::
FÜm©By‹
(
v®ue
) {

2156 
¡d
::
¡ršg¡»am
 
ss
;

2157 
	gss
 << 
	g¡d
::
£tfl
('0'è<< 
¡d
::
£tw
(2è<< std::
hex
 << std::
uµ”ÿ£


2158 << 
¡©ic_ÿ¡
<>(
v®ue
);

2159  
	gss
.
¡r
();

2164 
	g¡d
::
¡ršg
 
SŒšgSŒ—mToSŒšg
(::
¡d
::
¡ršg¡»am
* 
ss
) {

2165 cÚ¡ ::
¡d
::
¡ršg
& 
¡r
 = 
ss
->str();

2166 cÚ¡ * cÚ¡ 
	g¡¬t
 = 
¡r
.
c_¡r
();

2167 cÚ¡ * cÚ¡ 
	g’d
 = 
¡¬t
 + 
¡r
.
Ëngth
();

2169 
	g¡d
::
¡ršg
 
»suÉ
;

2170 
	g»suÉ
.
»£rve
(
¡©ic_ÿ¡
<
size_t
>(2 * (
’d
 - 
¡¬t
)));

2171 cÚ¡ * 
	gch
 = 
¡¬t
; ch !ğ
’d
; ++ch) {

2172 ià(*
	gch
 == '\0') {

2173 
»suÉ
 += "\\0";

2175 
	g»suÉ
 +ğ*
ch
;

2179  
	g»suÉ
;

2183 
	g¡d
::
¡ršg
 
Aµ’dU£rMes§ge
(cÚ¡ 
¡d
::¡ršg& 
g‹¡_msg
,

2184 cÚ¡ 
Mes§ge
& 
u£r_msg
) {

2186 cÚ¡ 
	g¡d
::
¡ršg
 
u£r_msg_¡ršg
 = 
u£r_msg
.
G‘SŒšg
();

2187 ià(
	gu£r_msg_¡ršg
.
em±y
()) {

2188  
	gg‹¡_msg
;

2190 ià(
	gg‹¡_msg
.
em±y
()) {

2191  
	gu£r_msg_¡ršg
;

2193  
	gg‹¡_msg
 + "\n" + 
	gu£r_msg_¡ršg
;

2201 
	gTe¡ResuÉ
::
	$Te¡ResuÉ
()

2202 : 
	`d—th_‹¡_couÁ_
(0), 
	`¡¬t_time¡amp_
(0), 
	$–­£d_time_
(0è{
	}
}

2205 
	gTe¡ResuÉ
::~
	$Te¡ResuÉ
() {

2206 
	}
}

2211 cÚ¡ 
Te¡P¬tResuÉ
& 
Te¡ResuÉ
::
	$G‘Te¡P¬tResuÉ
(
i
) const {

2212 ià(
i
 < 0 || i >ğ
	`tÙ®_·¹_couÁ
())

2213 
š‹º®
::
posix
::
	`AbÜt
();

2214  
‹¡_·¹_»suÉs_
.
	`©
(
¡©ic_ÿ¡
<
size_t
>(
i
));

2215 
	}
}

2220 cÚ¡ 
	gTe¡Prİ”ty
& 
	gTe¡ResuÉ
::
	$G‘Te¡Prİ”ty
(
i
) const {

2221 ià(
i
 < 0 || i >ğ
	`‹¡_´İ”ty_couÁ
())

2222 
š‹º®
::
posix
::
	`AbÜt
();

2223  
‹¡_´İ”t›s_
.
	`©
(
¡©ic_ÿ¡
<
size_t
>(
i
));

2224 
	}
}

2227 
	gTe¡ResuÉ
::
	$CË¬Te¡P¬tResuÉs
() {

2228 
‹¡_·¹_»suÉs_
.
	`ş—r
();

2229 
	}
}

2232 
	gTe¡ResuÉ
::
	$AddTe¡P¬tResuÉ
(cÚ¡ 
Te¡P¬tResuÉ
& 
‹¡_·¹_»suÉ
) {

2233 
‹¡_·¹_»suÉs_
.
	`push_back
(
‹¡_·¹_»suÉ
);

2234 
	}
}

2239 
	gTe¡ResuÉ
::
	$RecÜdPrİ”ty
(cÚ¡ 
¡d
::
¡ršg
& 
xml_–em’t
,

2240 cÚ¡ 
Te¡Prİ”ty
& 
‹¡_´İ”ty
) {

2241 ià(!
	`V®id©eTe¡Prİ”ty
(
xml_–em’t
, 
‹¡_´İ”ty
)) {

2244 
š‹º®
::
Mu‹xLock
 
	`lock
(&
‹¡_´İ”t›s_mu‹x_
);

2245 cÚ¡ 
¡d
::
veùÜ
<
Te¡Prİ”ty
>::
™”©Ü
 
´İ”ty_w™h_m©chšg_key
 =

2246 
¡d
::
	`fšd_if
(
‹¡_´İ”t›s_
.
	`begš
(),e¡_´İ”t›s_.
	`’d
(),

2247 
š‹º®
::
	`Te¡Prİ”tyKeyIs
(
‹¡_´İ”ty
.
	`key
()));

2248 ià(
´İ”ty_w™h_m©chšg_key
 =ğ
‹¡_´İ”t›s_
.
	`’d
()) {

2249 
‹¡_´İ”t›s_
.
	`push_back
(
‹¡_´İ”ty
);

2252 
´İ”ty_w™h_m©chšg_key
->
	`S‘V®ue
(
‹¡_´İ”ty
.
	`v®ue
());

2253 
	}
}

2257 cÚ¡ * cÚ¡ 
	gkRe£rvedTe¡Su™esA‰ribu‹s
[] = {

2270 cÚ¡ * cÚ¡ 
	gkRe£rvedTe¡Su™eA‰ribu‹s
[] = {

2275 cÚ¡ * cÚ¡ 
	gkRe£rvedTe¡Ca£A‰ribu‹s
[] = {

2281 cÚ¡ * cÚ¡ 
	gkRe£rvedOuutTe¡Ca£A‰ribu‹s
[] = {

2285 
	g‹m¶©e
 <
size_t
 
	gkSize
>

2286 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> 
A¼ayAsVeùÜ
(cÚ¡ * cÚ¡ (&
¬¿y
)[
kSize
]) {

2287  
¡d
::
veùÜ
<¡d::
¡ršg
>(
¬¿y
, 
	g¬¿y
 + 
	gkSize
);

2290 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> 
	$G‘Re£rvedA‰ribu‹sFÜEËm’t
(

2291 cÚ¡ 
¡d
::
¡ršg
& 
xml_–em’t
) {

2292 ià(
xml_–em’t
 == "testsuites") {

2293  
	`A¼ayAsVeùÜ
(
kRe£rvedTe¡Su™esA‰ribu‹s
);

2294 } ià(
xml_–em’t
 == "testsuite") {

2295  
	`A¼ayAsVeùÜ
(
kRe£rvedTe¡Su™eA‰ribu‹s
);

2296 } ià(
xml_–em’t
 == "testcase") {

2297  
	`A¼ayAsVeùÜ
(
kRe£rvedTe¡Ca£A‰ribu‹s
);

2299 
	`GTEST_CHECK_
(
çl£
è<< "UÄecognized xml_–em’ˆ´ovided: " << 
xml_–em’t
;

2302  
¡d
::
veùÜ
<¡d::
¡ršg
>();

2303 
	}
}

2306 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> 
	$G‘Re£rvedOuutA‰ribu‹sFÜEËm’t
(

2307 cÚ¡ 
¡d
::
¡ršg
& 
xml_–em’t
) {

2308 ià(
xml_–em’t
 == "testsuites") {

2309  
	`A¼ayAsVeùÜ
(
kRe£rvedTe¡Su™esA‰ribu‹s
);

2310 } ià(
xml_–em’t
 == "testsuite") {

2311  
	`A¼ayAsVeùÜ
(
kRe£rvedTe¡Su™eA‰ribu‹s
);

2312 } ià(
xml_–em’t
 == "testcase") {

2313  
	`A¼ayAsVeùÜ
(
kRe£rvedOuutTe¡Ca£A‰ribu‹s
);

2315 
	`GTEST_CHECK_
(
çl£
è<< "UÄecognized xml_–em’ˆ´ovided: " << 
xml_–em’t
;

2318  
¡d
::
veùÜ
<¡d::
¡ršg
>();

2319 
	}
}

2321 
	g¡d
::
¡ršg
 
FÜm©WÜdLi¡
(cÚ¡ 
¡d
::
veùÜ
<¡d::¡ršg>& 
wÜds
) {

2322 
Mes§ge
 
wÜd_li¡
;

2323 
size_t
 
	gi
 = 0; i < 
	gwÜds
.
size
(); ++i) {

2324 ià(
	gi
 > 0 && 
	gwÜds
.
size
() > 2) {

2325 
	gwÜd_li¡
 << ", ";

2327 ià(
	gi
 =ğ
wÜds
.
size
() - 1) {

2328 
wÜd_li¡
 << "and ";

2330 
	gwÜd_li¡
 << "'" << 
	gwÜds
[
i
] << "'";

2332  
	gwÜd_li¡
.
G‘SŒšg
();

2335 
boŞ
 
V®id©eTe¡Prİ”tyName
(

2336 cÚ¡ 
¡d
::
¡ršg
& 
´İ”ty_Çme
,

2337 cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
>& 
»£rved_Çmes
) {

2338 ià(
¡d
::
fšd
(
»£rved_Çmes
.
begš
(),„e£rved_Çmes.
’d
(), 
´İ”ty_Çme
) !=

2339 
»£rved_Çmes
.
’d
()) {

2340 
ADD_FAILURE
(è<< "Re£rved key u£d iÀRecÜdPrİ”ty(): " << 
´İ”ty_Çme


2341 << " (" << 
FÜm©WÜdLi¡
(
»£rved_Çmes
)

2342 << "‡»„e£rved by " << 
GTEST_NAME_
 << ")";

2343  
	gçl£
;

2345  
	gŒue
;

2350 
boŞ
 
	gTe¡ResuÉ
::
	$V®id©eTe¡Prİ”ty
(cÚ¡ 
¡d
::
¡ršg
& 
xml_–em’t
,

2351 cÚ¡ 
Te¡Prİ”ty
& 
‹¡_´İ”ty
) {

2352  
	`V®id©eTe¡Prİ”tyName
(
‹¡_´İ”ty
.
	`key
(),

2353 
	`G‘Re£rvedA‰ribu‹sFÜEËm’t
(
xml_–em’t
));

2354 
	}
}

2357 
	gTe¡ResuÉ
::
	$CË¬
() {

2358 
‹¡_·¹_»suÉs_
.
	`ş—r
();

2359 
‹¡_´İ”t›s_
.
	`ş—r
();

2360 
d—th_‹¡_couÁ_
 = 0;

2361 
–­£d_time_
 = 0;

2362 
	}
}

2365 
boŞ
 
	$Te¡P¬tSk³d
(cÚ¡ 
Te¡P¬tResuÉ
& 
»suÉ
) {

2366  
»suÉ
.
	`sk³d
();

2367 
	}
}

2370 
boŞ
 
	gTe¡ResuÉ
::
	$Sk³d
() const {

2371  !
	`Faed
(è&& 
	`CouÁIf
(
‹¡_·¹_»suÉs_
, 
Te¡P¬tSk³d
) > 0;

2372 
	}
}

2375 
boŞ
 
	gTe¡ResuÉ
::
	$Faed
() const {

2376 
i
 = 0; i < 
	`tÙ®_·¹_couÁ
(); ++i) {

2377 ià(
	`G‘Te¡P¬tResuÉ
(
i
).
	`çed
())

2378  
Œue
;

2380  
çl£
;

2381 
	}
}

2384 
boŞ
 
	$Te¡P¬tF©®lyFaed
(cÚ¡ 
Te¡P¬tResuÉ
& 
»suÉ
) {

2385  
»suÉ
.
	`çÎy_çed
();

2386 
	}
}

2389 
boŞ
 
	gTe¡ResuÉ
::
	$HasF©®Fau»
() const {

2390  
	`CouÁIf
(
‹¡_·¹_»suÉs_
, 
Te¡P¬tF©®lyFaed
) > 0;

2391 
	}
}

2394 
boŞ
 
	$Te¡P¬tNÚçÎyFaed
(cÚ¡ 
Te¡P¬tResuÉ
& 
»suÉ
) {

2395  
»suÉ
.
	`nÚçÎy_çed
();

2396 
	}
}

2399 
boŞ
 
	gTe¡ResuÉ
::
	$HasNÚçlFau»
() const {

2400  
	`CouÁIf
(
‹¡_·¹_»suÉs_
, 
Te¡P¬tNÚçÎyFaed
) > 0;

2401 
	}
}

2405 
	gTe¡ResuÉ
::
	$tÙ®_·¹_couÁ
() const {

2406  
¡©ic_ÿ¡
<>(
‹¡_·¹_»suÉs_
.
	`size
());

2407 
	}
}

2410 
	gTe¡ResuÉ
::
	$‹¡_´İ”ty_couÁ
() const {

2411  
¡©ic_ÿ¡
<>(
‹¡_´İ”t›s_
.
	`size
());

2412 
	}
}

2419 
	gTe¡
::
	$Te¡
()

2420 : 
	$g‹¡_æag_§v”_
(
Ãw
 
GTEST_FLAG_SAVER_
) {

2421 
	}
}

2426 
Te¡
::~
	$Te¡
() {

2427 
	}
}

2432 
Te¡
::
	$S‘Up
() {

2433 
	}
}

2438 
Te¡
::
	$T—rDown
() {

2439 
	}
}

2442 
Te¡
::
	$RecÜdPrİ”ty
(cÚ¡ 
¡d
::
¡ršg
& 
key
, cÚ¡ std::¡ršg& 
v®ue
) {

2443 
Un™Te¡
::
	`G‘In¡ªû
()->
	`RecÜdPrİ”ty
(
key
, 
v®ue
);

2444 
	}
}

2447 
	gTe¡
::
	$RecÜdPrİ”ty
(cÚ¡ 
¡d
::
¡ršg
& 
key
, 
v®ue
) {

2448 
Mes§ge
 
v®ue_mes§ge
;

2449 
v®ue_mes§ge
 << 
v®ue
;

2450 
	`RecÜdPrİ”ty
(
key
, 
v®ue_mes§ge
.
	`G‘SŒšg
().
	`c_¡r
());

2451 
	}
}

2453 
Çme¥aû
 
	gš‹º®
 {

2455 
R•ÜtFau»InUnknownLoÿtiÚ
(
Te¡P¬tResuÉ
::
Ty³
 
»suÉ_ty³
,

2456 cÚ¡ 
¡d
::
¡ršg
& 
mes§ge
) {

2459 
Un™Te¡
::
G‘In¡ªû
()->
AddTe¡P¬tResuÉ
(

2460 
»suÉ_ty³
,

2461 
nuÎ±r
,

2463 
mes§ge
,

2474 
boŞ
 
	gTe¡
::
	$HasSameFixtu»CÏss
() {

2475 
š‹º®
::
Un™Te¡Im¶
* cÚ¡ 
im¶
 = iÁ”Çl::
	`G‘Un™Te¡Im¶
();

2476 cÚ¡ 
Te¡Su™e
* cÚ¡ 
‹¡_su™e
 = 
im¶
->
	`cu¼’t_‹¡_su™e
();

2479 cÚ¡ 
Te¡Info
* cÚ¡ 
fœ¡_‹¡_šfo
 = 
‹¡_su™e
->
	`‹¡_šfo_li¡
()[0];

2480 cÚ¡ 
š‹º®
::
Ty³Id
 
fœ¡_fixtu»_id
 = 
fœ¡_‹¡_šfo
->
fixtu»_şass_id_
;

2481 cÚ¡ * cÚ¡ 
fœ¡_‹¡_Çme
 = 
fœ¡_‹¡_šfo
->
	`Çme
();

2484 cÚ¡ 
Te¡Info
* cÚ¡ 
this_‹¡_šfo
 = 
im¶
->
	`cu¼’t_‹¡_šfo
();

2485 cÚ¡ 
š‹º®
::
Ty³Id
 
this_fixtu»_id
 = 
this_‹¡_šfo
->
fixtu»_şass_id_
;

2486 cÚ¡ * cÚ¡ 
this_‹¡_Çme
 = 
this_‹¡_šfo
->
	`Çme
();

2488 ià(
this_fixtu»_id
 !ğ
fœ¡_fixtu»_id
) {

2490 cÚ¡ 
boŞ
 
fœ¡_is_TEST
 = 
fœ¡_fixtu»_id
 =ğ
š‹º®
::
	`G‘Te¡Ty³Id
();

2492 cÚ¡ 
boŞ
 
this_is_TEST
 = 
this_fixtu»_id
 =ğ
š‹º®
::
	`G‘Te¡Ty³Id
();

2494 ià(
fœ¡_is_TEST
 || 
this_is_TEST
) {

2501 cÚ¡ * cÚ¡ 
TEST_Çme
 =

2502 
fœ¡_is_TEST
 ? 
fœ¡_‹¡_Çme
 : 
this_‹¡_Çme
;

2503 cÚ¡ * cÚ¡ 
TEST_F_Çme
 =

2504 
fœ¡_is_TEST
 ? 
this_‹¡_Çme
 : 
fœ¡_‹¡_Çme
;

2506 
	`ADD_FAILURE
()

2509 << "Ëg®. IÀ‹¡ su™" << 
this_‹¡_šfo
->
	`‹¡_su™e_Çme
()

2511 << "‹¡ " << 
TEST_F_Çme
 << " is defined using TEST_F but\n"

2512 << "‹¡ " << 
TEST_Çme
 << " is defined using TEST. You…robably\n"

2518 
	`ADD_FAILURE
()

2521 << 
this_‹¡_šfo
->
	`‹¡_su™e_Çme
() << ",\n"

2522 << "you defšede¡ " << 
fœ¡_‹¡_Çme
 << "‡ndest "

2523 << 
this_‹¡_Çme
 << "\n"

2529  
çl£
;

2532  
Œue
;

2533 
	}
}

2535 #ià
GTEST_HAS_SEH


2541 
	g¡d
::
¡ršg
* 
	$FÜm©SehExû±iÚMes§ge
(
DWORD
 
exû±iÚ_code
,

2542 cÚ¡ * 
loÿtiÚ
) {

2543 
Mes§ge
 
mes§ge
;

2544 
mes§ge
 << "SEHƒxû±iÚ w™h cod0x" << 
¡d
::
	`£tba£
(16) <<

2545 
exû±iÚ_code
 << 
¡d
::
	`£tba£
(10è<< "hrowÀš " << 
loÿtiÚ
 << ".";

2547  
Ãw
 
¡d
::
	`¡ršg
(
mes§ge
.
	`G‘SŒšg
());

2548 
	}
}

2552 
Çme¥aû
 
	gš‹º®
 {

2554 #ià
GTEST_HAS_EXCEPTIONS


2557 
	g¡d
::
¡ršg
 
FÜm©CxxExû±iÚMes§ge
(cÚ¡ * 
desütiÚ
,

2558 cÚ¡ * 
loÿtiÚ
) {

2559 
Mes§ge
 
	gmes§ge
;

2560 ià(
	gdesütiÚ
 !ğ
nuÎ±r
) {

2561 
mes§ge
 << "C++ƒxû±iÚ w™h desütiÚ \"" << 
desütiÚ
 << "\"";

2563 
	gmes§ge
 << "Unknown C++ƒxception";

2565 
	gmes§ge
 << "hrowÀš " << 
	gloÿtiÚ
 << ".";

2567  
	gmes§ge
.
G‘SŒšg
();

2570 
	g¡d
::
¡ršg
 
PrštTe¡P¬tResuÉToSŒšg
(

2571 cÚ¡ 
Te¡P¬tResuÉ
& 
‹¡_·¹_»suÉ
);

2573 
	gGoogËTe¡Fau»Exû±iÚ
::
GoogËTe¡Fau»Exû±iÚ
(

2574 cÚ¡ 
Te¡P¬tResuÉ
& 
çu»
)

2575 : ::
¡d
::
ruÁime_”rÜ
(
PrštTe¡P¬tResuÉToSŒšg
(
çu»
).
c_¡r
()) {}

2587 
‹m¶©e
 <
şass
 
T
, 
ty³Çme
 
	gResuÉ
>

2588 
ResuÉ
 
HªdËSehExû±iÚsInM‘hodIfSuµÜ‹d
(

2589 
T
* 
objeù
, 
ResuÉ
 (T::*
m‘hod
)(), cÚ¡ * 
loÿtiÚ
) {

2590 #ià
GTEST_HAS_SEH


2591 
	g__Œy
 {

2592  (
	gobjeù
->*
	gm‘hod
)();

2593 } 
__exû±
 (
š‹º®
::
Un™Te¡O±iÚs
::
GTe¡ShouldProûssSEH
(

2594 
G‘Exû±iÚCode
())) {

2598 
¡d
::
¡ršg
* 
exû±iÚ_mes§ge
 = 
FÜm©SehExû±iÚMes§ge
(

2599 
G‘Exû±iÚCode
(), 
loÿtiÚ
);

2600 
	gš‹º®
::
R•ÜtFau»InUnknownLoÿtiÚ
(
Te¡P¬tResuÉ
::
kF©®Fau»
,

2601 *
exû±iÚ_mes§ge
);

2602 
d–‘e
 
	gexû±iÚ_mes§ge
;

2603  
	g¡©ic_ÿ¡
<
	gResuÉ
>(0);

2606 ()
	gloÿtiÚ
;

2607  (
	gobjeù
->*
	gm‘hod
)();

2614 
	g‹m¶©e
 <
şass
 
	gT
, 
ty³Çme
 
	gResuÉ
>

2615 
ResuÉ
 
HªdËExû±iÚsInM‘hodIfSuµÜ‹d
(

2616 
T
* 
objeù
, 
ResuÉ
 (T::*
m‘hod
)(), cÚ¡ * 
loÿtiÚ
) {

2640 ià(
	gš‹º®
::
G‘Un™Te¡Im¶
()->
ÿtch_exû±iÚs
()) {

2641 #ià
GTEST_HAS_EXCEPTIONS


2642 
Œy
 {

2643  
HªdËSehExû±iÚsInM‘hodIfSuµÜ‹d
(
objeù
, 
m‘hod
, 
loÿtiÚ
);

2644 } 
ÿtch
 (cÚ¡ 
As£¹iÚExû±iÚ
&) {

2646 } 
ÿtch
 (cÚ¡ 
š‹º®
::
GoogËTe¡Fau»Exû±iÚ
&) {

2650 
throw
;

2651 } 
ÿtch
 (cÚ¡ 
¡d
::
exû±iÚ
& 
e
) {

2652 
š‹º®
::
R•ÜtFau»InUnknownLoÿtiÚ
(

2653 
Te¡P¬tResuÉ
::
kF©®Fau»
,

2654 
FÜm©CxxExû±iÚMes§ge
(
e
.
wh©
(), 
loÿtiÚ
));

2655 } 
ÿtch
 (...) {

2656 
	gš‹º®
::
R•ÜtFau»InUnknownLoÿtiÚ
(

2657 
Te¡P¬tResuÉ
::
kF©®Fau»
,

2658 
FÜm©CxxExû±iÚMes§ge
(
nuÎ±r
, 
loÿtiÚ
));

2660  
	g¡©ic_ÿ¡
<
	gResuÉ
>(0);

2662  
HªdËSehExû±iÚsInM‘hodIfSuµÜ‹d
(
objeù
, 
m‘hod
, 
loÿtiÚ
);

2665  (
	gobjeù
->*
	gm‘hod
)();

2672 
	gTe¡
::
	$Run
() {

2673 ià(!
	`HasSameFixtu»CÏss
()) ;

2675 
š‹º®
::
Un™Te¡Im¶
* cÚ¡ 
im¶
 = iÁ”Çl::
	`G‘Un™Te¡Im¶
();

2676 
im¶
->
	`os_¡ack_Œaû_g‘‹r
()->
	`UpÚL—všgGTe¡
();

2677 
š‹º®
::
	`HªdËExû±iÚsInM‘hodIfSuµÜ‹d
(
this
, &
Te¡
::
S‘Up
, "SetUp()");

2680 ià(!
	`HasF©®Fau»
(è&& !
	`IsSk³d
()) {

2681 
im¶
->
	`os_¡ack_Œaû_g‘‹r
()->
	`UpÚL—všgGTe¡
();

2682 
š‹º®
::
	`HªdËExû±iÚsInM‘hodIfSuµÜ‹d
(

2683 
this
, &
Te¡
::
Te¡Body
, "theest body");

2689 
im¶
->
	`os_¡ack_Œaû_g‘‹r
()->
	`UpÚL—všgGTe¡
();

2690 
š‹º®
::
	`HªdËExû±iÚsInM‘hodIfSuµÜ‹d
(

2691 
this
, &
Te¡
::
T—rDown
, "TearDown()");

2692 
	}
}

2695 
boŞ
 
	gTe¡
::
	$HasF©®Fau»
() {

2696  
š‹º®
::
	`G‘Un™Te¡Im¶
()->
	`cu¼’t_‹¡_»suÉ
()->
	`HasF©®Fau»
();

2697 
	}
}

2700 
boŞ
 
	gTe¡
::
	$HasNÚçlFau»
() {

2701  
š‹º®
::
	`G‘Un™Te¡Im¶
()->
	`cu¼’t_‹¡_»suÉ
()->

2702 
	`HasNÚçlFau»
();

2703 
	}
}

2706 
boŞ
 
	gTe¡
::
	$IsSk³d
() {

2707  
š‹º®
::
	`G‘Un™Te¡Im¶
()->
	`cu¼’t_‹¡_»suÉ
()->
	`Sk³d
();

2708 
	}
}

2714 
	gTe¡Info
::
	$Te¡Info
(cÚ¡ 
¡d
::
¡ršg
& 
a_‹¡_su™e_Çme
,

2715 cÚ¡ 
¡d
::
¡ršg
& 
a_Çme
, cÚ¡ * 
a_ty³_·¿m
,

2716 cÚ¡ * 
a_v®ue_·¿m
,

2717 
š‹º®
::
CodeLoÿtiÚ
 
a_code_loÿtiÚ
,

2718 
š‹º®
::
Ty³Id
 
fixtu»_şass_id
,

2719 
š‹º®
::
Te¡FaùÜyBa£
* 
çùÜy
)

2720 : 
	`‹¡_su™e_Çme_
(
a_‹¡_su™e_Çme
),

2721 
	`Çme_
(
a_Çme
),

2722 
	`ty³_·¿m_
(
a_ty³_·¿m
 ? 
Ãw
 
¡d
::
	$¡ršg
(
a_ty³_·¿m
è: 
nuÎ±r
),

2723 
	`v®ue_·¿m_
(
a_v®ue_·¿m
 ? 
Ãw
 
¡d
::
	$¡ršg
(
a_v®ue_·¿m
è: 
nuÎ±r
),

2724 
	`loÿtiÚ_
(
a_code_loÿtiÚ
),

2725 
	`fixtu»_şass_id_
(
fixtu»_şass_id
),

2726 
	`should_run_
(
çl£
),

2727 
	`is_di§bËd_
(
çl£
),

2728 
	`m©ches_f‹r_
(
çl£
),

2729 
	`is_š_ªÙh”_sh¬d_
(
çl£
),

2730 
	`çùÜy_
(
çùÜy
),

2731 
	$»suÉ_
(è{
	}
}

2734 
	gTe¡Info
::~
	$Te¡Info
(è{ 
d–‘e
 
çùÜy_
; 
	}
}

2736 
Çme¥aû
 
	gš‹º®
 {

2756 
Te¡Info
* 
MakeAndRegi¡”Te¡Info
(

2757 cÚ¡ * 
‹¡_su™e_Çme
, cÚ¡ * 
Çme
, cÚ¡ * 
ty³_·¿m
,

2758 cÚ¡ * 
v®ue_·¿m
, 
CodeLoÿtiÚ
 
code_loÿtiÚ
,

2759 
Ty³Id
 
fixtu»_şass_id
, 
S‘UpTe¡Su™eFunc
 
£t_up_tc
,

2760 
T—rDownTe¡Su™eFunc
 
‹¬_down_tc
, 
Te¡FaùÜyBa£
* 
çùÜy
) {

2761 
Te¡Info
* cÚ¡ 
	g‹¡_šfo
 =

2762 
Ãw
 
Te¡Info
(
‹¡_su™e_Çme
, 
Çme
, 
ty³_·¿m
, 
v®ue_·¿m
,

2763 
code_loÿtiÚ
, 
fixtu»_şass_id
, 
çùÜy
);

2764 
G‘Un™Te¡Im¶
()->
AddTe¡Info
(
£t_up_tc
, 
‹¬_down_tc
, 
‹¡_šfo
);

2765  
	g‹¡_šfo
;

2768 
R•ÜtInv®idTe¡Su™eTy³
(cÚ¡ * 
‹¡_su™e_Çme
,

2769 
CodeLoÿtiÚ
 
code_loÿtiÚ
) {

2770 
Mes§ge
 
	g”rÜs
;

2771 
	g”rÜs


2772 << "A‰em±ed„edefš™iÚ oà‹¡ su™" << 
	g‹¡_su™e_Çme
 << ".\n"

2774 << "şass. Howev”, iÀ‹¡ su™" << 
	g‹¡_su™e_Çme
 << ", youried\n"

2781 
GTEST_LOG_
(
ERROR
è<< 
FÜm©FeLoÿtiÚ
(
code_loÿtiÚ
.
fe
.
c_¡r
(),

2782 
code_loÿtiÚ
.
lše
)

2783 << " " << 
	g”rÜs
.
G‘SŒšg
();

2787 
	gÇme¥aû
 {

2797 şas 
	cTe¡NameIs
 {

2798 
	gpublic
:

2802 
ex¶ic™
 
Te¡NameIs
(cÚ¡ * 
Çme
)

2803 : 
Çme_
(
Çme
) {}

2806 
boŞ
 
İ”©Ü
()(cÚ¡ 
Te¡Info
 * 
‹¡_šfo
) const {

2807  
‹¡_šfo
 &&e¡_šfo->
Çme
(è=ğ
Çme_
;

2810 
	g´iv©e
:

2811 
¡d
::
¡ršg
 
Çme_
;

2816 
Çme¥aû
 
	gš‹º®
 {

2821 
	gUn™Te¡Im¶
::
Regi¡”P¬am‘”izedTe¡s
() {

2822 ià(!
·¿m‘”ized_‹¡s_»gi¡”ed_
) {

2823 
·¿m‘”ized_‹¡_»gi¡ry_
.
Regi¡”Te¡s
();

2824 
	gty³_·¿m‘”ized_‹¡_»gi¡ry_
.
CheckFÜIn¡ªtŸtiÚs
();

2825 
	g·¿m‘”ized_‹¡s_»gi¡”ed_
 = 
Œue
;

2833 
	gTe¡Info
::
	$Run
() {

2834 ià(!
should_run_
) ;

2837 
š‹º®
::
Un™Te¡Im¶
* cÚ¡ 
im¶
 = iÁ”Çl::
	`G‘Un™Te¡Im¶
();

2838 
im¶
->
	`£t_cu¼’t_‹¡_šfo
(
this
);

2840 
Te¡Ev’tLi¡’”
* 
»³©”
 = 
Un™Te¡
::
	`G‘In¡ªû
()->
	`li¡’”s
().
	`»³©”
();

2843 
»³©”
->
	`OnTe¡S¹
(*
this
);

2845 
»suÉ_
.
	`£t_¡¬t_time¡amp
(
š‹º®
::
	`G‘TimeInMlis
());

2846 
š‹º®
::
Tim”
 
tim”
;

2848 
im¶
->
	`os_¡ack_Œaû_g‘‹r
()->
	`UpÚL—všgGTe¡
();

2851 
Te¡
* cÚ¡ 
‹¡
 = 
š‹º®
::
	`HªdËExû±iÚsInM‘hodIfSuµÜ‹d
(

2852 
çùÜy_
, &
š‹º®
::
Te¡FaùÜyBa£
::
C»©eTe¡
,

2858 ià(!
Te¡
::
	`HasF©®Fau»
(è&& !Te¡::
	`IsSk³d
()) {

2861 
‹¡
->
	`Run
();

2864 ià(
‹¡
 !ğ
nuÎ±r
) {

2866 
im¶
->
	`os_¡ack_Œaû_g‘‹r
()->
	`UpÚL—všgGTe¡
();

2867 
š‹º®
::
	`HªdËExû±iÚsInM‘hodIfSuµÜ‹d
(

2868 
‹¡
, &
Te¡
::
D–‘eS–f_
, "theest fixture's destructor");

2871 
»suÉ_
.
	`£t_–­£d_time
(
tim”
.
	`EÏp£d
());

2874 
»³©”
->
	`OnTe¡End
(*
this
);

2878 
im¶
->
	`£t_cu¼’t_‹¡_šfo
(
nuÎ±r
);

2879 
	}
}

2882 
	gTe¡Info
::
	$Sk
() {

2883 ià(!
should_run_
) ;

2885 
š‹º®
::
Un™Te¡Im¶
* cÚ¡ 
im¶
 = iÁ”Çl::
	`G‘Un™Te¡Im¶
();

2886 
im¶
->
	`£t_cu¼’t_‹¡_šfo
(
this
);

2888 
Te¡Ev’tLi¡’”
* 
»³©”
 = 
Un™Te¡
::
	`G‘In¡ªû
()->
	`li¡’”s
().
	`»³©”
();

2891 
»³©”
->
	`OnTe¡S¹
(*
this
);

2893 cÚ¡ 
Te¡P¬tResuÉ
 
‹¡_·¹_»suÉ
 =

2894 
	`Te¡P¬tResuÉ
(
Te¡P¬tResuÉ
::
kSk
, 
this
->
	`fe
(),his->
	`lše
(), "");

2895 
im¶
->
	`G‘Te¡P¬tResuÉR•Ü‹rFÜCu¼’tTh»ad
()->
	`R•ÜtTe¡P¬tResuÉ
(

2896 
‹¡_·¹_»suÉ
);

2899 
»³©”
->
	`OnTe¡End
(*
this
);

2900 
im¶
->
	`£t_cu¼’t_‹¡_šfo
(
nuÎ±r
);

2901 
	}
}

2906 
	gTe¡Su™e
::
	$sucûssful_‹¡_couÁ
() const {

2907  
	`CouÁIf
(
‹¡_šfo_li¡_
, 
Te¡Pas£d
);

2908 
	}
}

2911 
	gTe¡Su™e
::
	$sk³d_‹¡_couÁ
() const {

2912  
	`CouÁIf
(
‹¡_šfo_li¡_
, 
Te¡Sk³d
);

2913 
	}
}

2916 
	gTe¡Su™e
::
	$çed_‹¡_couÁ
() const {

2917  
	`CouÁIf
(
‹¡_šfo_li¡_
, 
Te¡Faed
);

2918 
	}
}

2921 
	gTe¡Su™e
::
	$»pÜbË_di§bËd_‹¡_couÁ
() const {

2922  
	`CouÁIf
(
‹¡_šfo_li¡_
, 
Te¡R•ÜbËDi§bËd
);

2923 
	}
}

2926 
	gTe¡Su™e
::
	$di§bËd_‹¡_couÁ
() const {

2927  
	`CouÁIf
(
‹¡_šfo_li¡_
, 
Te¡Di§bËd
);

2928 
	}
}

2931 
	gTe¡Su™e
::
	$»pÜbË_‹¡_couÁ
() const {

2932  
	`CouÁIf
(
‹¡_šfo_li¡_
, 
Te¡R•ÜbË
);

2933 
	}
}

2936 
	gTe¡Su™e
::
	$‹¡_to_run_couÁ
() const {

2937  
	`CouÁIf
(
‹¡_šfo_li¡_
, 
ShouldRunTe¡
);

2938 
	}
}

2941 
	gTe¡Su™e
::
	$tÙ®_‹¡_couÁ
() const {

2942  
¡©ic_ÿ¡
<>(
‹¡_šfo_li¡_
.
	`size
());

2943 
	}
}

2954 
	gTe¡Su™e
::
	$Te¡Su™e
(cÚ¡ * 
a_Çme
, cÚ¡ * 
a_ty³_·¿m
,

2955 
š‹º®
::
S‘UpTe¡Su™eFunc
 
£t_up_tc
,

2956 
š‹º®
::
T—rDownTe¡Su™eFunc
 
‹¬_down_tc
)

2957 : 
	`Çme_
(
a_Çme
),

2958 
	`ty³_·¿m_
(
a_ty³_·¿m
 ? 
Ãw
 
¡d
::
	$¡ršg
(
a_ty³_·¿m
è: 
nuÎ±r
),

2959 
	`£t_up_tc_
(
£t_up_tc
),

2960 
	`‹¬_down_tc_
(
‹¬_down_tc
),

2961 
	`should_run_
(
çl£
),

2962 
	`¡¬t_time¡amp_
(0),

2963 
	$–­£d_time_
(0è{
	}
}

2966 
	gTe¡Su™e
::~
	$Te¡Su™e
() {

2968 
	`FÜEach
(
‹¡_šfo_li¡_
, 
š‹º®
::
D–‘e
<
Te¡Info
>);

2969 
	}
}

2973 cÚ¡ 
Te¡Info
* 
	gTe¡Su™e
::
	$G‘Te¡Info
(
i
) const {

2974 cÚ¡ 
šdex
 = 
	`G‘EËm’tOr
(
‹¡_šdiûs_
, 
i
, -1);

2975  
šdex
 < 0 ? 
nuÎ±r
 : 
‹¡_šfo_li¡_
[
¡©ic_ÿ¡
<
size_t
>(index)];

2976 
	}
}

2980 
Te¡Info
* 
	gTe¡Su™e
::
	$G‘MubËTe¡Info
(
i
) {

2981 cÚ¡ 
šdex
 = 
	`G‘EËm’tOr
(
‹¡_šdiûs_
, 
i
, -1);

2982  
šdex
 < 0 ? 
nuÎ±r
 : 
‹¡_šfo_li¡_
[
¡©ic_ÿ¡
<
size_t
>(index)];

2983 
	}
}

2987 
	gTe¡Su™e
::
	$AddTe¡Info
(
Te¡Info
* 
‹¡_šfo
) {

2988 
‹¡_šfo_li¡_
.
	`push_back
(
‹¡_šfo
);

2989 
‹¡_šdiûs_
.
	`push_back
(
¡©ic_ÿ¡
<>Ñe¡_šdiûs_.
	`size
()));

2990 
	}
}

2993 
	gTe¡Su™e
::
	$Run
() {

2994 ià(!
should_run_
) ;

2996 
š‹º®
::
Un™Te¡Im¶
* cÚ¡ 
im¶
 = iÁ”Çl::
	`G‘Un™Te¡Im¶
();

2997 
im¶
->
	`£t_cu¼’t_‹¡_su™e
(
this
);

2999 
Te¡Ev’tLi¡’”
* 
»³©”
 = 
Un™Te¡
::
	`G‘In¡ªû
()->
	`li¡’”s
().
	`»³©”
();

3002 
»³©”
->
	`OnTe¡Su™eS¹
(*
this
);

3004 #iâdeà
GTEST_REMOVE_LEGACY_TEST_CASEAPI_


3005 
»³©”
->
	`OnTe¡Ca£S¹
(*
this
);

3008 
im¶
->
	`os_¡ack_Œaû_g‘‹r
()->
	`UpÚL—všgGTe¡
();

3009 
š‹º®
::
	`HªdËExû±iÚsInM‘hodIfSuµÜ‹d
(

3010 
this
, &
Te¡Su™e
::
RunS‘UpTe¡Su™e
, "SetUpTestSuite()");

3012 
¡¬t_time¡amp_
 = 
š‹º®
::
	`G‘TimeInMlis
();

3013 
š‹º®
::
Tim”
 
tim”
;

3014 
i
 = 0; i < 
	`tÙ®_‹¡_couÁ
(); i++) {

3015 
	`G‘MubËTe¡Info
(
i
)->
	`Run
();

3016 ià(
	`GTEST_FLAG
(
ç_ç¡
è&& 
	`G‘MubËTe¡Info
(
i
)->
	`»suÉ
()->
	`Faed
()) {

3017 
j
 = 
i
 + 1; j < 
	`tÙ®_‹¡_couÁ
(); j++) {

3018 
	`G‘MubËTe¡Info
(
j
)->
	`Sk
();

3023 
–­£d_time_
 = 
tim”
.
	`EÏp£d
();

3025 
im¶
->
	`os_¡ack_Œaû_g‘‹r
()->
	`UpÚL—všgGTe¡
();

3026 
š‹º®
::
	`HªdËExû±iÚsInM‘hodIfSuµÜ‹d
(

3027 
this
, &
Te¡Su™e
::
RunT—rDownTe¡Su™e
, "TearDownTestSuite()");

3030 
»³©”
->
	`OnTe¡Su™eEnd
(*
this
);

3032 #iâdeà
GTEST_REMOVE_LEGACY_TEST_CASEAPI_


3033 
»³©”
->
	`OnTe¡Ca£End
(*
this
);

3036 
im¶
->
	`£t_cu¼’t_‹¡_su™e
(
nuÎ±r
);

3037 
	}
}

3040 
	gTe¡Su™e
::
	$Sk
() {

3041 ià(!
should_run_
) ;

3043 
š‹º®
::
Un™Te¡Im¶
* cÚ¡ 
im¶
 = iÁ”Çl::
	`G‘Un™Te¡Im¶
();

3044 
im¶
->
	`£t_cu¼’t_‹¡_su™e
(
this
);

3046 
Te¡Ev’tLi¡’”
* 
»³©”
 = 
Un™Te¡
::
	`G‘In¡ªû
()->
	`li¡’”s
().
	`»³©”
();

3049 
»³©”
->
	`OnTe¡Su™eS¹
(*
this
);

3051 #iâdeà
GTEST_REMOVE_LEGACY_TEST_CASEAPI_


3052 
»³©”
->
	`OnTe¡Ca£S¹
(*
this
);

3055 
i
 = 0; i < 
	`tÙ®_‹¡_couÁ
(); i++) {

3056 
	`G‘MubËTe¡Info
(
i
)->
	`Sk
();

3060 
»³©”
->
	`OnTe¡Su™eEnd
(*
this
);

3062 #iâdeà
GTEST_REMOVE_LEGACY_TEST_CASEAPI_


3063 
»³©”
->
	`OnTe¡Ca£End
(*
this
);

3066 
im¶
->
	`£t_cu¼’t_‹¡_su™e
(
nuÎ±r
);

3067 
	}
}

3070 
	gTe¡Su™e
::
	$CË¬ResuÉ
() {

3071 
ad_hoc_‹¡_»suÉ_
.
	`CË¬
();

3072 
	`FÜEach
(
‹¡_šfo_li¡_
, 
Te¡Info
::
CË¬Te¡ResuÉ
);

3073 
	}
}

3076 
	gTe¡Su™e
::
	$ShufæeTe¡s
(
š‹º®
::
Rªdom
* 
¿ndom
) {

3077 
	`Shufæe
(
¿ndom
, &
‹¡_šdiûs_
);

3078 
	}
}

3081 
	gTe¡Su™e
::
	$UnshufæeTe¡s
() {

3082 
size_t
 
i
 = 0; i < 
‹¡_šdiûs_
.
	`size
(); i++) {

3083 
‹¡_šdiûs_
[
i
] = 
¡©ic_ÿ¡
<>(i);

3085 
	}
}

3092 
	g¡d
::
¡ršg
 
	$FÜm©CouÁabËNoun
(
couÁ
,

3093 cÚ¡ * 
sšguÏr_fÜm
,

3094 cÚ¡ * 
¶u¿l_fÜm
) {

3095  
š‹º®
::
	`SŒ—mabËToSŒšg
(
couÁ
) + " " +

3096 (
couÁ
 =ğ1 ? 
sšguÏr_fÜm
 : 
¶u¿l_fÜm
);

3097 
	}
}

3100 
	g¡d
::
¡ršg
 
	$FÜm©Te¡CouÁ
(
‹¡_couÁ
) {

3101  
	`FÜm©CouÁabËNoun
(
‹¡_couÁ
, "test", "tests");

3102 
	}
}

3105 
	g¡d
::
¡ršg
 
	$FÜm©Te¡Su™eCouÁ
(
‹¡_su™e_couÁ
) {

3106  
	`FÜm©CouÁabËNoun
(
‹¡_su™e_couÁ
, "test suite", "test suites");

3107 
	}
}

3113 cÚ¡ * 
	$Te¡P¬tResuÉTy³ToSŒšg
(
Te¡P¬tResuÉ
::
Ty³
 
ty³
) {

3114 
ty³
) {

3115 
Te¡P¬tResuÉ
::
kSk
:

3117 
Te¡P¬tResuÉ
::
kSucûss
:

3120 
Te¡P¬tResuÉ
::
kNÚF©®Fau»
:

3121 
Te¡P¬tResuÉ
::
kF©®Fau»
:

3122 #ifdeà
_MSC_VER


3130 
	}
}

3132 
Çme¥aû
 
	gš‹º®
 {

3133 
	gÇme¥aû
 {

3134 şas 
	cGTe¡CŞÜ
 { 
	gkDeçuÉ
, 
	gkRed
, 
	gkG»’
, 
	gkY–low
 };

3138 
	g¡d
::
¡ršg
 
PrštTe¡P¬tResuÉToSŒšg
(

3139 cÚ¡ 
Te¡P¬tResuÉ
& 
‹¡_·¹_»suÉ
) {

3140  (
Mes§ge
()

3141 << 
š‹º®
::
FÜm©FeLoÿtiÚ
(
‹¡_·¹_»suÉ
.
fe_Çme
(),

3142 
‹¡_·¹_»suÉ
.
lše_numb”
())

3143 << " " << 
Te¡P¬tResuÉTy³ToSŒšg
(
‹¡_·¹_»suÉ
.
ty³
())

3144 << 
	g‹¡_·¹_»suÉ
.
mes§ge
()).
G‘SŒšg
();

3148 
PrštTe¡P¬tResuÉ
(cÚ¡ 
Te¡P¬tResuÉ
& 
‹¡_·¹_»suÉ
) {

3149 cÚ¡ 
	g¡d
::
¡ršg
& 
»suÉ
 =

3150 
PrštTe¡P¬tResuÉToSŒšg
(
‹¡_·¹_»suÉ
);

3151 
´štf
("%s\n", 
»suÉ
.
c_¡r
());

3152 
fæush
(
¡dout
);

3157 #ià
GTEST_OS_WINDOWS
 && !
GTEST_OS_WINDOWS_MOBILE


3161 ::
OuutDebugSŒšgA
(
»suÉ
.
c_¡r
());

3162 ::
OuutDebugSŒšgA
("\n");

3167 #ià
GTEST_OS_WINDOWS
 && !
GTEST_OS_WINDOWS_MOBILE
 && \

3168 !
	gGTEST_OS_WINDOWS_PHONE
 && !
	gGTEST_OS_WINDOWS_RT
 && !
GTEST_OS_WINDOWS_MINGW


3171 
WORD
 
G‘CŞÜA‰ribu‹
(
GTe¡CŞÜ
 
cŞÜ
) {

3172 
	gcŞÜ
) {

3173 
	gGTe¡CŞÜ
::
kRed
:

3174  
FOREGROUND_RED
;

3175 
	gGTe¡CŞÜ
::
kG»’
:

3176  
FOREGROUND_GREEN
;

3177 
	gGTe¡CŞÜ
::
kY–low
:

3178  
FOREGROUND_RED
 | 
FOREGROUND_GREEN
;

3183 
G‘B™Off£t
(
WORD
 
cŞÜ_mask
) {

3184 ià(
	gcŞÜ_mask
 == 0)  0;

3186 
	gb™Off£t
 = 0;

3187 (
	gcŞÜ_mask
 & 1) == 0) {

3188 
cŞÜ_mask
 >>= 1;

3189 ++
	gb™Off£t
;

3191  
	gb™Off£t
;

3194 
WORD
 
G‘NewCŞÜ
(
GTe¡CŞÜ
 
cŞÜ
, WORD 
Şd_cŞÜ_©Œs
) {

3196 cÚ¡ 
WORD
 
	gbackground_mask
 = 
BACKGROUND_BLUE
 | 
BACKGROUND_GREEN
 |

3197 
BACKGROUND_RED
 | 
BACKGROUND_INTENSITY
;

3198 cÚ¡ 
WORD
 
	gfÜeground_mask
 = 
FOREGROUND_BLUE
 | 
FOREGROUND_GREEN
 |

3199 
FOREGROUND_RED
 | 
FOREGROUND_INTENSITY
;

3200 cÚ¡ 
WORD
 
	gexi¡šg_bg
 = 
Şd_cŞÜ_©Œs
 & 
background_mask
;

3202 
WORD
 
	gÃw_cŞÜ
 =

3203 
G‘CŞÜA‰ribu‹
(
cŞÜ
è| 
exi¡šg_bg
 | 
FOREGROUND_INTENSITY
;

3204 cÚ¡ 
	gbg_b™Off£t
 = 
G‘B™Off£t
(
background_mask
);

3205 cÚ¡ 
	gfg_b™Off£t
 = 
G‘B™Off£t
(
fÜeground_mask
);

3207 ià(((
	gÃw_cŞÜ
 & 
	gbackground_mask
è>> 
	gbg_b™Off£t
) ==

3208 ((
Ãw_cŞÜ
 & 
fÜeground_mask
è>> 
fg_b™Off£t
)) {

3209 
Ãw_cŞÜ
 ^ğ
FOREGROUND_INTENSITY
;

3211  
	gÃw_cŞÜ
;

3218 cÚ¡ * 
G‘AnsiCŞÜCode
(
GTe¡CŞÜ
 
cŞÜ
) {

3219 
	gcŞÜ
) {

3220 
	gGTe¡CŞÜ
::
kRed
:

3222 
	gGTe¡CŞÜ
::
kG»’
:

3224 
	gGTe¡CŞÜ
::
kY–low
:

3227  
nuÎ±r
;

3234 
boŞ
 
ShouldU£CŞÜ
(boŞ 
¡dout_is_‰y
) {

3235 cÚ¡ * cÚ¡ 
	gg‹¡_cŞÜ
 = 
GTEST_FLAG
(
cŞÜ
).
c_¡r
();

3237 ià(
	gSŒšg
::
Ca£In£ns™iveCSŒšgEqu®s
(
g‹¡_cŞÜ
, "auto")) {

3238 #ià
GTEST_OS_WINDOWS
 && !
GTEST_OS_WINDOWS_MINGW


3241  
	g¡dout_is_‰y
;

3244 cÚ¡ * cÚ¡ 
	g‹rm
 = 
posix
::
G‘Env
("TERM");

3245 cÚ¡ 
boŞ
 
	g‹rm_suµÜts_cŞÜ
 =

3246 
SŒšg
::
CSŒšgEqu®s
(
‹rm
, "xterm") ||

3247 
	gSŒšg
::
CSŒšgEqu®s
(
‹rm
, "xterm-color") ||

3248 
	gSŒšg
::
CSŒšgEqu®s
(
‹rm
, "xterm-256color") ||

3249 
	gSŒšg
::
CSŒšgEqu®s
(
‹rm
, "screen") ||

3250 
	gSŒšg
::
CSŒšgEqu®s
(
‹rm
, "screen-256color") ||

3251 
	gSŒšg
::
CSŒšgEqu®s
(
‹rm
, "tmux") ||

3252 
	gSŒšg
::
CSŒšgEqu®s
(
‹rm
, "tmux-256color") ||

3253 
	gSŒšg
::
CSŒšgEqu®s
(
‹rm
, "rxvt-unicode") ||

3254 
	gSŒšg
::
CSŒšgEqu®s
(
‹rm
, "rxvt-unicode-256color") ||

3255 
	gSŒšg
::
CSŒšgEqu®s
(
‹rm
, "linux") ||

3256 
	gSŒšg
::
CSŒšgEqu®s
(
‹rm
, "cygwin");

3257  
	g¡dout_is_‰y
 && 
	g‹rm_suµÜts_cŞÜ
;

3261  
	gSŒšg
::
Ca£In£ns™iveCSŒšgEqu®s
(
g‹¡_cŞÜ
, "yes") ||

3262 
	gSŒšg
::
Ca£In£ns™iveCSŒšgEqu®s
(
g‹¡_cŞÜ
, "true") ||

3263 
	gSŒšg
::
Ca£In£ns™iveCSŒšgEqu®s
(
g‹¡_cŞÜ
, "t") ||

3264 
	gSŒšg
::
CSŒšgEqu®s
(
g‹¡_cŞÜ
, "1");

3275 
GTEST_ATTRIBUTE_PRINTF_
(2, 3)

3276 
CŞÜedPrštf
(
GTe¡CŞÜ
 
cŞÜ
, cÚ¡ *
fmt
, ...) {

3277 
va_li¡
 
	g¬gs
;

3278 
va_¡¬t
(
¬gs
, 
fmt
);

3280 #ià
GTEST_OS_WINDOWS_MOBILE
 || 
GTEST_OS_ZOS
 || 
GTEST_OS_IOS
 || \

3281 
	gGTEST_OS_WINDOWS_PHONE
 || 
	gGTEST_OS_WINDOWS_RT
 || 
defšed
(
ESP_PLATFORM
)

3282 cÚ¡ 
boŞ
 
	gu£_cŞÜ
 = 
AlwaysF®£
();

3284 cÚ¡ 
boŞ
 
	gš_cŞÜ_mode
 =

3285 
ShouldU£CŞÜ
(
posix
::
IsATTY
Õosix::
FeNo
(
¡dout
)) != 0);

3286 cÚ¡ 
boŞ
 
	gu£_cŞÜ
 = 
š_cŞÜ_mode
 && (
cŞÜ
 !ğ
GTe¡CŞÜ
::
kDeçuÉ
);

3289 ià(!
	gu£_cŞÜ
) {

3290 
v´štf
(
fmt
, 
¬gs
);

3291 
va_’d
(
¬gs
);

3295 #ià
GTEST_OS_WINDOWS
 && !
GTEST_OS_WINDOWS_MOBILE
 && \

3296 !
	gGTEST_OS_WINDOWS_PHONE
 && !
	gGTEST_OS_WINDOWS_RT
 && !
GTEST_OS_WINDOWS_MINGW


3297 cÚ¡ 
HANDLE
 
	g¡dout_hªdË
 = 
G‘StdHªdË
(
STD_OUTPUT_HANDLE
);

3300 
CONSOLE_SCREEN_BUFFER_INFO
 
	gbufãr_šfo
;

3301 
G‘CÚsŞeSü“nBufãrInfo
(
¡dout_hªdË
, &
bufãr_šfo
);

3302 cÚ¡ 
WORD
 
	gŞd_cŞÜ_©Œs
 = 
bufãr_šfo
.
wA‰ribu‹s
;

3303 cÚ¡ 
WORD
 
	gÃw_cŞÜ
 = 
G‘NewCŞÜ
(
cŞÜ
, 
Şd_cŞÜ_©Œs
);

3308 
fæush
(
¡dout
);

3309 
S‘CÚsŞeTextA‰ribu‹
(
¡dout_hªdË
, 
Ãw_cŞÜ
);

3311 
v´štf
(
fmt
, 
¬gs
);

3313 
fæush
(
¡dout
);

3315 
S‘CÚsŞeTextA‰ribu‹
(
¡dout_hªdË
, 
Şd_cŞÜ_©Œs
);

3317 
´štf
("\033[0;3%sm", 
G‘AnsiCŞÜCode
(
cŞÜ
));

3318 
v´štf
(
fmt
, 
¬gs
);

3319 
´štf
("\033[m");

3321 
va_’d
(
¬gs
);

3326 cÚ¡ 
	gkTy³P¬amLab–
[] = "TypeParam";

3327 cÚ¡ 
	gkV®ueP¬amLab–
[] = "GetParam()";

3329 
PrštFuÎTe¡Comm’tIfP»£Á
(cÚ¡ 
Te¡Info
& 
‹¡_šfo
) {

3330 cÚ¡ * cÚ¡ 
	gty³_·¿m
 = 
‹¡_šfo
.
ty³_·¿m
();

3331 cÚ¡ * cÚ¡ 
	gv®ue_·¿m
 = 
‹¡_šfo
.
v®ue_·¿m
();

3333 ià(
	gty³_·¿m
 !ğ
nuÎ±r
 || 
v®ue_·¿m
 !=‚ullptr) {

3334 
´štf
(", where ");

3335 ià(
	gty³_·¿m
 !ğ
nuÎ±r
) {

3336 
´štf
("% ğ%s", 
kTy³P¬amLab–
, 
ty³_·¿m
);

3337 ià(
	gv®ue_·¿m
 !ğ
nuÎ±r
è
´štf
("‡nd ");

3339 ià(
	gv®ue_·¿m
 !ğ
nuÎ±r
) {

3340 
´štf
("% ğ%s", 
kV®ueP¬amLab–
, 
v®ue_·¿m
);

3348 şas 
	cP»‰yUn™Te¡ResuÉPrš‹r
 : 
public
 
Te¡Ev’tLi¡’”
 {

3349 
public
:

3350 
P»‰yUn™Te¡ResuÉPrš‹r
() {}

3351 
PrštTe¡Name
(cÚ¡ * 
‹¡_su™e
, cÚ¡ * 
‹¡
) {

3352 
´štf
("%s.%s", 
‹¡_su™e
, 
‹¡
);

3356 
OnTe¡Prog¿mS¹
(cÚ¡ 
Un™Te¡
& ) 
	gov”ride
 {}

3357 
OnTe¡I‹¿tiÚS¹
(cÚ¡ 
Un™Te¡
& 
un™_‹¡
, 
™”©iÚ
è
	gov”ride
;

3358 
OnEnvœÚm’tsS‘UpS¹
(cÚ¡ 
Un™Te¡
& 
un™_‹¡
è
	gov”ride
;

3359 
OnEnvœÚm’tsS‘UpEnd
(cÚ¡ 
Un™Te¡
& ) 
	gov”ride
 {}

3360 #iâdeà
GTEST_REMOVE_LEGACY_TEST_CASEAPI_


3361 
OnTe¡Ca£S¹
(cÚ¡ 
Te¡Ca£
& 
‹¡_ÿ£
è
	gov”ride
;

3363 
OnTe¡Su™eS¹
(cÚ¡ 
Te¡Su™e
& 
‹¡_su™e
è
	gov”ride
;

3366 
OnTe¡S¹
(cÚ¡ 
Te¡Info
& 
‹¡_šfo
è
	gov”ride
;

3368 
OnTe¡P¬tResuÉ
(cÚ¡ 
Te¡P¬tResuÉ
& 
»suÉ
è
	gov”ride
;

3369 
OnTe¡End
(cÚ¡ 
Te¡Info
& 
‹¡_šfo
è
	gov”ride
;

3370 #iâdeà
GTEST_REMOVE_LEGACY_TEST_CASEAPI_


3371 
OnTe¡Ca£End
(cÚ¡ 
Te¡Ca£
& 
‹¡_ÿ£
è
	gov”ride
;

3373 
OnTe¡Su™eEnd
(cÚ¡ 
Te¡Su™e
& 
‹¡_su™e
è
	gov”ride
;

3376 
OnEnvœÚm’tsT—rDownS¹
(cÚ¡ 
Un™Te¡
& 
un™_‹¡
è
	gov”ride
;

3377 
OnEnvœÚm’tsT—rDownEnd
(cÚ¡ 
Un™Te¡
& ) 
	gov”ride
 {}

3378 
OnTe¡I‹¿tiÚEnd
(cÚ¡ 
Un™Te¡
& 
un™_‹¡
, 
™”©iÚ
è
	gov”ride
;

3379 
OnTe¡Prog¿mEnd
(cÚ¡ 
Un™Te¡
& ) 
	gov”ride
 {}

3381 
	g´iv©e
:

3382 
PrštFaedTe¡s
(cÚ¡ 
Un™Te¡
& 
un™_‹¡
);

3383 
PrštFaedTe¡Su™es
(cÚ¡ 
Un™Te¡
& 
un™_‹¡
);

3384 
PrštSk³dTe¡s
(cÚ¡ 
Un™Te¡
& 
un™_‹¡
);

3388 
	gP»‰yUn™Te¡ResuÉPrš‹r
::
OnTe¡I‹¿tiÚS¹
(

3389 cÚ¡ 
Un™Te¡
& 
un™_‹¡
, 
™”©iÚ
) {

3390 ià(
GTEST_FLAG
(
»³©
) != 1)

3391 
´štf
("\nR•—tšg‡Îe¡ (™”©iÚ %dè. . .\n\n", 
™”©iÚ
 + 1);

3393 cÚ¡ * cÚ¡ 
	gf‹r
 = 
GTEST_FLAG
(
f‹r
).
c_¡r
();

3397 ià(!
	gSŒšg
::
CSŒšgEqu®s
(
f‹r
, 
kUniv”§lF‹r
)) {

3398 
CŞÜedPrštf
(
GTe¡CŞÜ
::
kY–low
, "NÙe: % f‹¸ğ%s\n", 
GTEST_NAME_
,

3399 
f‹r
);

3402 ià(
	gš‹º®
::
ShouldSh¬d
(
kTe¡TÙ®Sh¬ds
, 
kTe¡Sh¬dIndex
, 
çl£
)) {

3403 cÚ¡ 
št32_t
 
	gsh¬d_šdex
 = 
IÁ32FromEnvOrD›
(
kTe¡Sh¬dIndex
, -1);

3404 
CŞÜedPrštf
(
GTe¡CŞÜ
::
kY–low
, "Note: This isest shard %d of %s.\n",

3405 
¡©ic_ÿ¡
<>(
sh¬d_šdex
) + 1,

3406 
š‹º®
::
posix
::
G‘Env
(
kTe¡TÙ®Sh¬ds
));

3409 ià(
GTEST_FLAG
(
shufæe
)) {

3410 
CŞÜedPrštf
(
GTe¡CŞÜ
::
kY–low
,

3412 
un™_‹¡
.
¿ndom_£ed
());

3415 
CŞÜedPrštf
(
GTe¡CŞÜ
::
kG»’
, "[==========] ");

3416 
´štf
("Running %s from %s.\n",

3417 
FÜm©Te¡CouÁ
(
un™_‹¡
.
‹¡_to_run_couÁ
()).
c_¡r
(),

3418 
FÜm©Te¡Su™eCouÁ
(
un™_‹¡
.
‹¡_su™e_to_run_couÁ
()).
c_¡r
());

3419 
fæush
(
¡dout
);

3422 
	gP»‰yUn™Te¡ResuÉPrš‹r
::
OnEnvœÚm’tsS‘UpS¹
(

3423 cÚ¡ 
Un™Te¡
& ) {

3424 
CŞÜedPrštf
(
GTe¡CŞÜ
::
kG»’
, "[----------] ");

3425 
´štf
("Globalestƒnvironment set-up.\n");

3426 
fæush
(
¡dout
);

3429 #iâdeà
GTEST_REMOVE_LEGACY_TEST_CASEAPI_


3430 
	gP»‰yUn™Te¡ResuÉPrš‹r
::
OnTe¡Ca£S¹
(cÚ¡ 
Te¡Ca£
& 
‹¡_ÿ£
) {

3431 cÚ¡ 
¡d
::
¡ršg
 
couÁs
 =

3432 
FÜm©CouÁabËNoun
(
‹¡_ÿ£
.
‹¡_to_run_couÁ
(), "test", "tests");

3433 
CŞÜedPrštf
(
GTe¡CŞÜ
::
kG»’
, "[----------] ");

3434 
´štf
("% äom %s", 
couÁs
.
c_¡r
(), 
‹¡_ÿ£
.
Çme
());

3435 ià(
	g‹¡_ÿ£
.
ty³_·¿m
(è=ğ
nuÎ±r
) {

3436 
´štf
("\n");

3438 
´štf
(", wh”% ğ%s\n", 
kTy³P¬amLab–
, 
‹¡_ÿ£
.
ty³_·¿m
());

3440 
fæush
(
¡dout
);

3443 
	gP»‰yUn™Te¡ResuÉPrš‹r
::
OnTe¡Su™eS¹
(

3444 cÚ¡ 
Te¡Su™e
& 
‹¡_su™e
) {

3445 cÚ¡ 
¡d
::
¡ršg
 
couÁs
 =

3446 
FÜm©CouÁabËNoun
(
‹¡_su™e
.
‹¡_to_run_couÁ
(), "test", "tests");

3447 
CŞÜedPrštf
(
GTe¡CŞÜ
::
kG»’
, "[----------] ");

3448 
´štf
("% äom %s", 
couÁs
.
c_¡r
(), 
‹¡_su™e
.
Çme
());

3449 ià(
	g‹¡_su™e
.
ty³_·¿m
(è=ğ
nuÎ±r
) {

3450 
´štf
("\n");

3452 
´štf
(", wh”% ğ%s\n", 
kTy³P¬amLab–
, 
‹¡_su™e
.
ty³_·¿m
());

3454 
fæush
(
¡dout
);

3458 
	gP»‰yUn™Te¡ResuÉPrš‹r
::
OnTe¡S¹
(cÚ¡ 
Te¡Info
& 
‹¡_šfo
) {

3459 
CŞÜedPrštf
(
GTe¡CŞÜ
::
kG»’
, "[ RUN ] ");

3460 
PrštTe¡Name
(
‹¡_šfo
.
‹¡_su™e_Çme
(),e¡_šfo.
Çme
());

3461 
´štf
("\n");

3462 
fæush
(
¡dout
);

3466 
	gP»‰yUn™Te¡ResuÉPrš‹r
::
OnTe¡P¬tResuÉ
(

3467 cÚ¡ 
Te¡P¬tResuÉ
& 
»suÉ
) {

3468 
»suÉ
.
ty³
()) {

3470 
Te¡P¬tResuÉ
::
kSucûss
:

3475 
PrštTe¡P¬tResuÉ
(
»suÉ
);

3476 
fæush
(
¡dout
);

3480 
	gP»‰yUn™Te¡ResuÉPrš‹r
::
OnTe¡End
(cÚ¡ 
Te¡Info
& 
‹¡_šfo
) {

3481 ià(
‹¡_šfo
.
»suÉ
()->
Pas£d
()) {

3482 
CŞÜedPrštf
(
GTe¡CŞÜ
::
kG»’
, "[ OK ] ");

3483 } ià(
	g‹¡_šfo
.
»suÉ
()->
Sk³d
()) {

3484 
CŞÜedPrštf
(
GTe¡CŞÜ
::
kG»’
, "[ SKIPPED ] ");

3486 
CŞÜedPrštf
(
GTe¡CŞÜ
::
kRed
, "[ FAILED ] ");

3488 
PrštTe¡Name
(
‹¡_šfo
.
‹¡_su™e_Çme
(),e¡_šfo.
Çme
());

3489 ià(
	g‹¡_šfo
.
»suÉ
()->
Faed
())

3490 
PrštFuÎTe¡Comm’tIfP»£Á
(
‹¡_šfo
);

3492 ià(
GTEST_FLAG
(
´št_time
)) {

3493 
´štf
(" (% ms)\n", 
š‹º®
::
SŒ—mabËToSŒšg
(

3494 
‹¡_šfo
.
»suÉ
()->
–­£d_time
()).
c_¡r
());

3496 
´štf
("\n");

3498 
fæush
(
¡dout
);

3501 #iâdeà
GTEST_REMOVE_LEGACY_TEST_CASEAPI_


3502 
	gP»‰yUn™Te¡ResuÉPrš‹r
::
OnTe¡Ca£End
(cÚ¡ 
Te¡Ca£
& 
‹¡_ÿ£
) {

3503 ià(!
GTEST_FLAG
(
´št_time
)) ;

3505 cÚ¡ 
	g¡d
::
¡ršg
 
couÁs
 =

3506 
FÜm©CouÁabËNoun
(
‹¡_ÿ£
.
‹¡_to_run_couÁ
(), "test", "tests");

3507 
CŞÜedPrštf
(
GTe¡CŞÜ
::
kG»’
, "[----------] ");

3508 
´štf
("% äom % (% m tÙ®)\n\n", 
couÁs
.
c_¡r
(), 
‹¡_ÿ£
.
Çme
(),

3509 
š‹º®
::
SŒ—mabËToSŒšg
(
‹¡_ÿ£
.
–­£d_time
()).
c_¡r
());

3510 
fæush
(
¡dout
);

3513 
	gP»‰yUn™Te¡ResuÉPrš‹r
::
OnTe¡Su™eEnd
(cÚ¡ 
Te¡Su™e
& 
‹¡_su™e
) {

3514 ià(!
GTEST_FLAG
(
´št_time
)) ;

3516 cÚ¡ 
	g¡d
::
¡ršg
 
couÁs
 =

3517 
FÜm©CouÁabËNoun
(
‹¡_su™e
.
‹¡_to_run_couÁ
(), "test", "tests");

3518 
CŞÜedPrštf
(
GTe¡CŞÜ
::
kG»’
, "[----------] ");

3519 
´štf
("% äom % (% m tÙ®)\n\n", 
couÁs
.
c_¡r
(), 
‹¡_su™e
.
Çme
(),

3520 
š‹º®
::
SŒ—mabËToSŒšg
(
‹¡_su™e
.
–­£d_time
()).
c_¡r
());

3521 
fæush
(
¡dout
);

3525 
	gP»‰yUn™Te¡ResuÉPrš‹r
::
OnEnvœÚm’tsT—rDownS¹
(

3526 cÚ¡ 
Un™Te¡
& ) {

3527 
CŞÜedPrštf
(
GTe¡CŞÜ
::
kG»’
, "[----------] ");

3528 
´štf
("Globalestƒnvironmentear-down\n");

3529 
fæush
(
¡dout
);

3533 
	gP»‰yUn™Te¡ResuÉPrš‹r
::
PrštFaedTe¡s
(cÚ¡ 
Un™Te¡
& 
un™_‹¡
) {

3534 cÚ¡ 
çed_‹¡_couÁ
 = 
un™_‹¡
.failed_test_count();

3535 
CŞÜedPrštf
(
GTe¡CŞÜ
::
kRed
, "[ FAILED ] ");

3536 
´štf
("%s,†i¡ed b–ow:\n", 
FÜm©Te¡CouÁ
(
çed_‹¡_couÁ
).
c_¡r
());

3538 
	gi
 = 0; i < 
	gun™_‹¡
.
tÙ®_‹¡_su™e_couÁ
(); ++i) {

3539 cÚ¡ 
	gTe¡Su™e
& 
	g‹¡_su™e
 = *
un™_‹¡
.
G‘Te¡Su™e
(
i
);

3540 ià(!
	g‹¡_su™e
.
should_run
(è|| (‹¡_su™e.
çed_‹¡_couÁ
() == 0)) {

3543 
	gj
 = 0; j < 
	g‹¡_su™e
.
tÙ®_‹¡_couÁ
(); ++j) {

3544 cÚ¡ 
	gTe¡Info
& 
	g‹¡_šfo
 = *
‹¡_su™e
.
G‘Te¡Info
(
j
);

3545 ià(!
	g‹¡_šfo
.
should_run
(è|| !‹¡_šfo.
»suÉ
()->
Faed
()) {

3548 
CŞÜedPrštf
(
GTe¡CŞÜ
::
kRed
, "[ FAILED ] ");

3549 
´štf
("%s.%s", 
‹¡_su™e
.
Çme
(), 
‹¡_šfo
.name());

3550 
PrštFuÎTe¡Comm’tIfP»£Á
(
‹¡_šfo
);

3551 
´štf
("\n");

3554 
´štf
("\n%2d FAILED %s\n", 
çed_‹¡_couÁ
,

3555 
çed_‹¡_couÁ
 == 1 ? "TEST" : "TESTS");

3560 
	gP»‰yUn™Te¡ResuÉPrš‹r
::
PrštFaedTe¡Su™es
(

3561 cÚ¡ 
Un™Te¡
& 
un™_‹¡
) {

3562 
su™e_çu»_couÁ
 = 0;

3563 
	gi
 = 0; i < 
	gun™_‹¡
.
tÙ®_‹¡_su™e_couÁ
(); ++i) {

3564 cÚ¡ 
	gTe¡Su™e
& 
	g‹¡_su™e
 = *
un™_‹¡
.
G‘Te¡Su™e
(
i
);

3565 ià(!
	g‹¡_su™e
.
should_run
()) {

3568 ià(
	g‹¡_su™e
.
ad_hoc_‹¡_»suÉ
().
Faed
()) {

3569 
CŞÜedPrštf
(
GTe¡CŞÜ
::
kRed
, "[ FAILED ] ");

3570 
´štf
("%s: S‘UpTe¡Su™Ü T—rDownTe¡Su™e\n", 
‹¡_su™e
.
Çme
());

3571 ++
	gsu™e_çu»_couÁ
;

3574 ià(
	gsu™e_çu»_couÁ
 > 0) {

3575 
´štf
("\n%2d FAILED TEST %s\n", 
su™e_çu»_couÁ
,

3576 
su™e_çu»_couÁ
 == 1 ? "SUITE" : "SUITES");

3581 
	gP»‰yUn™Te¡ResuÉPrš‹r
::
PrštSk³dTe¡s
(cÚ¡ 
Un™Te¡
& 
un™_‹¡
) {

3582 cÚ¡ 
sk³d_‹¡_couÁ
 = 
un™_‹¡
.skipped_test_count();

3583 ià(
	gsk³d_‹¡_couÁ
 == 0) {

3587 
	gi
 = 0; i < 
	gun™_‹¡
.
tÙ®_‹¡_su™e_couÁ
(); ++i) {

3588 cÚ¡ 
	gTe¡Su™e
& 
	g‹¡_su™e
 = *
un™_‹¡
.
G‘Te¡Su™e
(
i
);

3589 ià(!
	g‹¡_su™e
.
should_run
(è|| (‹¡_su™e.
sk³d_‹¡_couÁ
() == 0)) {

3592 
	gj
 = 0; j < 
	g‹¡_su™e
.
tÙ®_‹¡_couÁ
(); ++j) {

3593 cÚ¡ 
	gTe¡Info
& 
	g‹¡_šfo
 = *
‹¡_su™e
.
G‘Te¡Info
(
j
);

3594 ià(!
	g‹¡_šfo
.
should_run
(è|| !‹¡_šfo.
»suÉ
()->
Sk³d
()) {

3597 
CŞÜedPrštf
(
GTe¡CŞÜ
::
kG»’
, "[ SKIPPED ] ");

3598 
´štf
("%s.%s", 
‹¡_su™e
.
Çme
(), 
‹¡_šfo
.name());

3599 
´štf
("\n");

3604 
	gP»‰yUn™Te¡ResuÉPrš‹r
::
OnTe¡I‹¿tiÚEnd
(cÚ¡ 
Un™Te¡
& 
un™_‹¡
,

3606 
CŞÜedPrštf
(
GTe¡CŞÜ
::
kG»’
, "[==========] ");

3607 
´štf
("%s from %s„an.",

3608 
FÜm©Te¡CouÁ
(
un™_‹¡
.
‹¡_to_run_couÁ
()).
c_¡r
(),

3609 
FÜm©Te¡Su™eCouÁ
(
un™_‹¡
.
‹¡_su™e_to_run_couÁ
()).
c_¡r
());

3610 ià(
GTEST_FLAG
(
´št_time
)) {

3611 
´štf
(" (%s msotal)",

3612 
š‹º®
::
SŒ—mabËToSŒšg
(
un™_‹¡
.
–­£d_time
()).
c_¡r
());

3614 
´štf
("\n");

3615 
CŞÜedPrštf
(
GTe¡CŞÜ
::
kG»’
, "[ PASSED ] ");

3616 
´štf
("%s.\n", 
FÜm©Te¡CouÁ
(
un™_‹¡
.
sucûssful_‹¡_couÁ
()).
c_¡r
());

3618 cÚ¡ 
	gsk³d_‹¡_couÁ
 = 
un™_‹¡
.
sk³d_‹¡_couÁ
();

3619 ià(
	gsk³d_‹¡_couÁ
 > 0) {

3620 
CŞÜedPrštf
(
GTe¡CŞÜ
::
kG»’
, "[ SKIPPED ] ");

3621 
´štf
("%s,†i¡ed b–ow:\n", 
FÜm©Te¡CouÁ
(
sk³d_‹¡_couÁ
).
c_¡r
());

3622 
PrštSk³dTe¡s
(
un™_‹¡
);

3625 ià(!
	gun™_‹¡
.
Pas£d
()) {

3626 
PrštFaedTe¡s
(
un™_‹¡
);

3627 
PrštFaedTe¡Su™es
(
un™_‹¡
);

3630 
	gnum_di§bËd
 = 
un™_‹¡
.
»pÜbË_di§bËd_‹¡_couÁ
();

3631 ià(
	gnum_di§bËd
 && !
GTEST_FLAG
(
®so_run_di§bËd_‹¡s
)) {

3632 ià(
	gun™_‹¡
.
Pas£d
()) {

3633 
´štf
("\n");

3635 
CŞÜedPrštf
(
GTe¡CŞÜ
::
kY–low
, " YOU HAVE %d DISABLED %s\n\n",

3636 
num_di§bËd
,‚um_disabled == 1 ? "TEST" : "TESTS");

3639 
fæush
(
¡dout
);

3647 şas 
	cBr›fUn™Te¡ResuÉPrš‹r
 : 
public
 
Te¡Ev’tLi¡’”
 {

3648 
public
:

3649 
Br›fUn™Te¡ResuÉPrš‹r
() {}

3650 
PrštTe¡Name
(cÚ¡ * 
‹¡_su™e
, cÚ¡ * 
‹¡
) {

3651 
´štf
("%s.%s", 
‹¡_su™e
, 
‹¡
);

3655 
OnTe¡Prog¿mS¹
(cÚ¡ 
Un™Te¡
& ) 
	gov”ride
 {}

3656 
OnTe¡I‹¿tiÚS¹
(cÚ¡ 
Un™Te¡
& ,

3657 è
	gov”ride
 {}

3658 
OnEnvœÚm’tsS‘UpS¹
(cÚ¡ 
Un™Te¡
& ) 
	gov”ride
 {}

3659 
OnEnvœÚm’tsS‘UpEnd
(cÚ¡ 
Un™Te¡
& ) 
	gov”ride
 {}

3660 #iâdeà
GTEST_REMOVE_LEGACY_TEST_CASEAPI_


3661 
OnTe¡Ca£S¹
(cÚ¡ 
Te¡Ca£
& ) 
	gov”ride
 {}

3663 
OnTe¡Su™eS¹
(cÚ¡ 
Te¡Su™e
& ) 
	gov”ride
 {}

3666 
OnTe¡S¹
(cÚ¡ 
Te¡Info
& ) 
	gov”ride
 {}

3668 
OnTe¡P¬tResuÉ
(cÚ¡ 
Te¡P¬tResuÉ
& 
»suÉ
è
	gov”ride
;

3669 
OnTe¡End
(cÚ¡ 
Te¡Info
& 
‹¡_šfo
è
	gov”ride
;

3670 #iâdeà
GTEST_REMOVE_LEGACY_TEST_CASEAPI_


3671 
OnTe¡Ca£End
(cÚ¡ 
Te¡Ca£
& ) 
	gov”ride
 {}

3673 
OnTe¡Su™eEnd
(cÚ¡ 
Te¡Su™e
& ) 
	gov”ride
 {}

3676 
OnEnvœÚm’tsT—rDownS¹
(cÚ¡ 
Un™Te¡
& ) 
	gov”ride
 {}

3677 
OnEnvœÚm’tsT—rDownEnd
(cÚ¡ 
Un™Te¡
& ) 
	gov”ride
 {}

3678 
OnTe¡I‹¿tiÚEnd
(cÚ¡ 
Un™Te¡
& 
un™_‹¡
, 
™”©iÚ
è
	gov”ride
;

3679 
OnTe¡Prog¿mEnd
(cÚ¡ 
Un™Te¡
& ) 
	gov”ride
 {}

3683 
	gBr›fUn™Te¡ResuÉPrš‹r
::
OnTe¡P¬tResuÉ
(

3684 cÚ¡ 
Te¡P¬tResuÉ
& 
»suÉ
) {

3685 
»suÉ
.
ty³
()) {

3687 
Te¡P¬tResuÉ
::
kSucûss
:

3692 
PrštTe¡P¬tResuÉ
(
»suÉ
);

3693 
fæush
(
¡dout
);

3697 
	gBr›fUn™Te¡ResuÉPrš‹r
::
OnTe¡End
(cÚ¡ 
Te¡Info
& 
‹¡_šfo
) {

3698 ià(
‹¡_šfo
.
»suÉ
()->
Faed
()) {

3699 
CŞÜedPrštf
(
GTe¡CŞÜ
::
kRed
, "[ FAILED ] ");

3700 
PrštTe¡Name
(
‹¡_šfo
.
‹¡_su™e_Çme
(),e¡_šfo.
Çme
());

3701 
PrštFuÎTe¡Comm’tIfP»£Á
(
‹¡_šfo
);

3703 ià(
GTEST_FLAG
(
´št_time
)) {

3704 
´štf
(" (%s ms)\n",

3705 
š‹º®
::
SŒ—mabËToSŒšg
(
‹¡_šfo
.
»suÉ
()->
–­£d_time
())

3706 .
c_¡r
());

3708 
´štf
("\n");

3710 
fæush
(
¡dout
);

3714 
	gBr›fUn™Te¡ResuÉPrš‹r
::
OnTe¡I‹¿tiÚEnd
(cÚ¡ 
Un™Te¡
& 
un™_‹¡
,

3716 
CŞÜedPrštf
(
GTe¡CŞÜ
::
kG»’
, "[==========] ");

3717 
´štf
("%s from %s„an.",

3718 
FÜm©Te¡CouÁ
(
un™_‹¡
.
‹¡_to_run_couÁ
()).
c_¡r
(),

3719 
FÜm©Te¡Su™eCouÁ
(
un™_‹¡
.
‹¡_su™e_to_run_couÁ
()).
c_¡r
());

3720 ià(
GTEST_FLAG
(
´št_time
)) {

3721 
´štf
(" (%s msotal)",

3722 
š‹º®
::
SŒ—mabËToSŒšg
(
un™_‹¡
.
–­£d_time
()).
c_¡r
());

3724 
´štf
("\n");

3725 
CŞÜedPrštf
(
GTe¡CŞÜ
::
kG»’
, "[ PASSED ] ");

3726 
´štf
("%s.\n", 
FÜm©Te¡CouÁ
(
un™_‹¡
.
sucûssful_‹¡_couÁ
()).
c_¡r
());

3728 cÚ¡ 
	gsk³d_‹¡_couÁ
 = 
un™_‹¡
.
sk³d_‹¡_couÁ
();

3729 ià(
	gsk³d_‹¡_couÁ
 > 0) {

3730 
CŞÜedPrštf
(
GTe¡CŞÜ
::
kG»’
, "[ SKIPPED ] ");

3731 
´štf
("%s.\n", 
FÜm©Te¡CouÁ
(
sk³d_‹¡_couÁ
).
c_¡r
());

3734 
	gnum_di§bËd
 = 
un™_‹¡
.
»pÜbË_di§bËd_‹¡_couÁ
();

3735 ià(
	gnum_di§bËd
 && !
GTEST_FLAG
(
®so_run_di§bËd_‹¡s
)) {

3736 ià(
	gun™_‹¡
.
Pas£d
()) {

3737 
´štf
("\n");

3739 
CŞÜedPrštf
(
GTe¡CŞÜ
::
kY–low
, " YOU HAVE %d DISABLED %s\n\n",

3740 
num_di§bËd
,‚um_disabled == 1 ? "TEST" : "TESTS");

3743 
fæush
(
¡dout
);

3751 şas 
	cTe¡Ev’tR•—‹r
 : 
public
 
Te¡Ev’tLi¡’”
 {

3752 
public
:

3753 
Te¡Ev’tR•—‹r
(è: 
fÜw¬dšg_’abËd_
(
Œue
) {}

3754 ~
Te¡Ev’tR•—‹r
(è
ov”ride
;

3755 
Aµ’d
(
Te¡Ev’tLi¡’”
 *
li¡’”
);

3756 
Te¡Ev’tLi¡’”
* 
R–—£
(Te¡Ev’tLi¡’”* 
li¡’”
);

3760 
boŞ
 
fÜw¬dšg_’abËd
(ècÚ¡ {  
	gfÜw¬dšg_’abËd_
; }

3761 
£t_fÜw¬dšg_’abËd
(
boŞ
 
’abË
è{ 
	gfÜw¬dšg_’abËd_
 =ƒnable; }

3763 
OnTe¡Prog¿mS¹
(cÚ¡ 
Un™Te¡
& 
un™_‹¡
è
	gov”ride
;

3764 
OnTe¡I‹¿tiÚS¹
(cÚ¡ 
Un™Te¡
& 
un™_‹¡
, 
™”©iÚ
è
	gov”ride
;

3765 
OnEnvœÚm’tsS‘UpS¹
(cÚ¡ 
Un™Te¡
& 
un™_‹¡
è
	gov”ride
;

3766 
OnEnvœÚm’tsS‘UpEnd
(cÚ¡ 
Un™Te¡
& 
un™_‹¡
è
	gov”ride
;

3768 #iâdeà
GTEST_REMOVE_LEGACY_TEST_CASEAPI_


3769 
OnTe¡Ca£S¹
(cÚ¡ 
Te¡Su™e
& 
·¿m‘”
è
	gov”ride
;

3771 
OnTe¡Su™eS¹
(cÚ¡ 
Te¡Su™e
& 
·¿m‘”
è
	gov”ride
;

3772 
OnTe¡S¹
(cÚ¡ 
Te¡Info
& 
‹¡_šfo
è
	gov”ride
;

3773 
OnTe¡P¬tResuÉ
(cÚ¡ 
Te¡P¬tResuÉ
& 
»suÉ
è
	gov”ride
;

3774 
OnTe¡End
(cÚ¡ 
Te¡Info
& 
‹¡_šfo
è
	gov”ride
;

3776 #iâdeà
GTEST_REMOVE_LEGACY_TEST_CASEAPI_


3777 
OnTe¡Ca£End
(cÚ¡ 
Te¡Ca£
& 
·¿m‘”
è
	gov”ride
;

3779 
OnTe¡Su™eEnd
(cÚ¡ 
Te¡Su™e
& 
·¿m‘”
è
	gov”ride
;

3780 
OnEnvœÚm’tsT—rDownS¹
(cÚ¡ 
Un™Te¡
& 
un™_‹¡
è
	gov”ride
;

3781 
OnEnvœÚm’tsT—rDownEnd
(cÚ¡ 
Un™Te¡
& 
un™_‹¡
è
	gov”ride
;

3782 
OnTe¡I‹¿tiÚEnd
(cÚ¡ 
Un™Te¡
& 
un™_‹¡
, 
™”©iÚ
è
	gov”ride
;

3783 
OnTe¡Prog¿mEnd
(cÚ¡ 
Un™Te¡
& 
un™_‹¡
è
	gov”ride
;

3785 
	g´iv©e
:

3788 
boŞ
 
fÜw¬dšg_’abËd_
;

3790 
	g¡d
::
veùÜ
<
Te¡Ev’tLi¡’”
*> 
li¡’”s_
;

3792 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
Te¡Ev’tR•—‹r
);

3795 
	gTe¡Ev’tR•—‹r
::~
Te¡Ev’tR•—‹r
() {

3796 
FÜEach
(
li¡’”s_
, 
D–‘e
<
Te¡Ev’tLi¡’”
>);

3799 
	gTe¡Ev’tR•—‹r
::
Aµ’d
(
Te¡Ev’tLi¡’”
 *
li¡’”
) {

3800 
li¡’”s_
.
push_back
(
li¡’”
);

3803 
Te¡Ev’tLi¡’”
* 
	gTe¡Ev’tR•—‹r
::
R–—£
(Te¡Ev’tLi¡’” *
li¡’”
) {

3804 
size_t
 
i
 = 0; 
	gi
 < 
	gli¡’”s_
.
size
(); ++i) {

3805 ià(
	gli¡’”s_
[
i
] =ğ
li¡’”
) {

3806 
li¡’”s_
.
”a£
Öi¡’”s_.
begš
(è+ 
¡©ic_ÿ¡
<>(
i
));

3807  
	gli¡’”
;

3811  
	gnuÎ±r
;

3816 
	#GTEST_REPEATER_METHOD_
(
Name
, 
Ty³
) \

3817 
Te¡Ev’tR•—‹r
::
	`Name
(cÚ¡ 
Ty³
& 
·¿m‘”
) { \

3818 ià(
fÜw¬dšg_’abËd_
) { \

3819 
size_t
 
i
 = 0; i < 
li¡’”s_
.
	`size
(); i++) { \

3820 
li¡’”s_
[
i
]->
	`Name
(
·¿m‘”
); \

3823 }

	)

3826 
	#GTEST_REVERSE_REPEATER_METHOD_
(
Name
, 
Ty³
) \

3827 
Te¡Ev’tR•—‹r
::
	`Name
(cÚ¡ 
Ty³
& 
·¿m‘”
) { \

3828 ià(
fÜw¬dšg_’abËd_
) { \

3829 
size_t
 
i
 = 
li¡’”s_
.
	`size
(); i != 0; i--) { \

3830 
li¡’”s_
[
i
 - 1]->
	`Name
(
·¿m‘”
); \

3833 }

	)

3835 
GTEST_REPEATER_METHOD_
(
OnTe¡Prog¿mS¹
, 
Un™Te¡
)

3836 
GTEST_REPEATER_METHOD_
(
OnEnvœÚm’tsS‘UpS¹
, 
Un™Te¡
)

3838 #iâdeà
GTEST_REMOVE_LEGACY_TEST_CASEAPI_


3839 
GTEST_REPEATER_METHOD_
(
OnTe¡Ca£S¹
, 
Te¡Su™e
)

3841 
GTEST_REPEATER_METHOD_
(
OnTe¡Su™eS¹
, 
Te¡Su™e
)

3842 
GTEST_REPEATER_METHOD_
(
OnTe¡S¹
, 
Te¡Info
)

3843 
GTEST_REPEATER_METHOD_
(
OnTe¡P¬tResuÉ
, 
Te¡P¬tResuÉ
)

3844 
GTEST_REPEATER_METHOD_
(
OnEnvœÚm’tsT—rDownS¹
, 
Un™Te¡
)

3845 
GTEST_REVERSE_REPEATER_METHOD_
(
OnEnvœÚm’tsS‘UpEnd
, 
Un™Te¡
)

3846 
GTEST_REVERSE_REPEATER_METHOD_
(
OnEnvœÚm’tsT—rDownEnd
, 
Un™Te¡
)

3847 
GTEST_REVERSE_REPEATER_METHOD_
(
OnTe¡End
, 
Te¡Info
)

3849 #iâdeà
GTEST_REMOVE_LEGACY_TEST_CASEAPI_


3850 
GTEST_REVERSE_REPEATER_METHOD_
(
OnTe¡Ca£End
, 
Te¡Su™e
)

3852 
GTEST_REVERSE_REPEATER_METHOD_
(
OnTe¡Su™eEnd
, 
Te¡Su™e
)

3853 
GTEST_REVERSE_REPEATER_METHOD_
(
OnTe¡Prog¿mEnd
, 
Un™Te¡
)

3855 #undeà
GTEST_REPEATER_METHOD_


3856 #undeà
GTEST_REVERSE_REPEATER_METHOD_


3858 
	gTe¡Ev’tR•—‹r
::
OnTe¡I‹¿tiÚS¹
(cÚ¡ 
Un™Te¡
& 
un™_‹¡
,

3859 
™”©iÚ
) {

3860 ià(
	gfÜw¬dšg_’abËd_
) {

3861 
size_t
 
	gi
 = 0; i < 
	gli¡’”s_
.
size
(); i++) {

3862 
	gli¡’”s_
[
i
]->
OnTe¡I‹¿tiÚS¹
(
un™_‹¡
, 
™”©iÚ
);

3867 
	gTe¡Ev’tR•—‹r
::
OnTe¡I‹¿tiÚEnd
(cÚ¡ 
Un™Te¡
& 
un™_‹¡
,

3868 
™”©iÚ
) {

3869 ià(
	gfÜw¬dšg_’abËd_
) {

3870 
size_t
 
	gi
 = 
li¡’”s_
.
size
(); i > 0; i--) {

3871 
	gli¡’”s_
[
i
 - 1]->
OnTe¡I‹¿tiÚEnd
(
un™_‹¡
, 
™”©iÚ
);

3879 şas 
	cXmlUn™Te¡ResuÉPrš‹r
 : 
public
 
Em±yTe¡Ev’tLi¡’”
 {

3880 
public
:

3881 
ex¶ic™
 
XmlUn™Te¡ResuÉPrš‹r
(cÚ¡ * 
ouut_fe
);

3883 
OnTe¡I‹¿tiÚEnd
(cÚ¡ 
Un™Te¡
& 
un™_‹¡
, 
™”©iÚ
è
	gov”ride
;

3884 
Li¡Te¡sM©chšgF‹r
(cÚ¡ 
¡d
::
veùÜ
<
Te¡Su™e
*>& 
‹¡_su™es
);

3887 
PrštXmlTe¡sLi¡
(
¡d
::
o¡»am
* 
¡»am
,

3888 cÚ¡ 
¡d
::
veùÜ
<
Te¡Su™e
*>& 
‹¡_su™es
);

3890 
	g´iv©e
:

3893 
boŞ
 
IsNÜm®izabËWh™e¥aû
(
c
) {

3894  
c
 == 0x9 || c == 0xA || c == 0xD;

3898 
boŞ
 
IsV®idXmlCh¬aù”
(
c
) {

3899  
IsNÜm®izabËWh™e¥aû
(
c
è|| 
	gc
 >= 0x20;

3906 
	g¡d
::
¡ršg
 
Esÿ³Xml
(cÚ¡ 
¡d
::¡ršg& 
¡r
, 
boŞ
 
is_©Œibu‹
);

3909 
	g¡d
::
¡ršg
 
RemoveInv®idXmlCh¬aù”s
(cÚ¡ 
¡d
::¡ršg& 
¡r
);

3912 
	g¡d
::
¡ršg
 
Esÿ³XmlA‰ribu‹
(cÚ¡ 
¡d
::¡ršg& 
¡r
) {

3913  
Esÿ³Xml
(
¡r
, 
Œue
);

3917 
	g¡d
::
¡ršg
 
Esÿ³XmlText
(cÚ¡ * 
¡r
) {

3918  
Esÿ³Xml
(
¡r
, 
çl£
);

3923 
OuutXmlA‰ribu‹
(
¡d
::
o¡»am
* 
¡»am
,

3924 cÚ¡ 
¡d
::
¡ršg
& 
–em’t_Çme
,

3925 cÚ¡ 
¡d
::
¡ršg
& 
Çme
,

3926 cÚ¡ 
¡d
::
¡ršg
& 
v®ue
);

3929 
OuutXmlCD©aSeùiÚ
(::
¡d
::
o¡»am
* 
¡»am
, cÚ¡ * 
d©a
);

3934 
OuutXmlTe¡Su™eFÜTe¡ResuÉ
(::
¡d
::
o¡»am
* 
¡»am
,

3935 cÚ¡ 
Te¡ResuÉ
& 
»suÉ
);

3938 
OuutXmlTe¡ResuÉ
(::
¡d
::
o¡»am
* 
¡»am
,

3939 cÚ¡ 
Te¡ResuÉ
& 
»suÉ
);

3942 
OuutXmlTe¡Info
(::
¡d
::
o¡»am
* 
¡»am
,

3943 cÚ¡ * 
‹¡_su™e_Çme
,

3944 cÚ¡ 
Te¡Info
& 
‹¡_šfo
);

3947 
PrštXmlTe¡Su™e
(::
¡d
::
o¡»am
* 
¡»am
,

3948 cÚ¡ 
Te¡Su™e
& 
‹¡_su™e
);

3951 
PrštXmlUn™Te¡
(::
¡d
::
o¡»am
* 
¡»am
,

3952 cÚ¡ 
Un™Te¡
& 
un™_‹¡
);

3958 
	g¡d
::
¡ršg
 
Te¡Prİ”t›sAsXmlA‰ribu‹s
(cÚ¡ 
Te¡ResuÉ
& 
»suÉ
);

3962 
OuutXmlTe¡Prİ”t›s
(
¡d
::
o¡»am
* 
¡»am
,

3963 cÚ¡ 
Te¡ResuÉ
& 
»suÉ
);

3966 cÚ¡ 
	g¡d
::
¡ršg
 
ouut_fe_
;

3968 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
XmlUn™Te¡ResuÉPrš‹r
);

3972 
	gXmlUn™Te¡ResuÉPrš‹r
::
XmlUn™Te¡ResuÉPrš‹r
(cÚ¡ * 
ouut_fe
)

3973 : 
ouut_fe_
(
ouut_fe
) {

3974 ià(
ouut_fe_
.
em±y
()) {

3975 
GTEST_LOG_
(
FATAL
) << "XML output file may‚ot be‚ull";

3980 
	gXmlUn™Te¡ResuÉPrš‹r
::
OnTe¡I‹¿tiÚEnd
(cÚ¡ 
Un™Te¡
& 
un™_‹¡
,

3982 
FILE
* 
	gxmlout
 = 
O³nFeFÜWr™šg
(
ouut_fe_
);

3983 
	g¡d
::
¡ršg¡»am
 
¡»am
;

3984 
PrštXmlUn™Te¡
(&
¡»am
, 
un™_‹¡
);

3985 
årštf
(
xmlout
, "%s", 
SŒšgSŒ—mToSŒšg
(&
¡»am
).
c_¡r
());

3986 
fşo£
(
xmlout
);

3989 
	gXmlUn™Te¡ResuÉPrš‹r
::
Li¡Te¡sM©chšgF‹r
(

3990 cÚ¡ 
¡d
::
veùÜ
<
Te¡Su™e
*>& 
‹¡_su™es
) {

3991 
FILE
* 
xmlout
 = 
O³nFeFÜWr™šg
(
ouut_fe_
);

3992 
	g¡d
::
¡ršg¡»am
 
¡»am
;

3993 
PrštXmlTe¡sLi¡
(&
¡»am
, 
‹¡_su™es
);

3994 
årštf
(
xmlout
, "%s", 
SŒšgSŒ—mToSŒšg
(&
¡»am
).
c_¡r
());

3995 
fşo£
(
xmlout
);

4008 
	g¡d
::
¡ršg
 
XmlUn™Te¡ResuÉPrš‹r
::
Esÿ³Xml
(

4009 cÚ¡ 
¡d
::
¡ršg
& 
¡r
, 
boŞ
 
is_©Œibu‹
) {

4010 
Mes§ge
 
	gm
;

4012 
size_t
 
	gi
 = 0; i < 
	g¡r
.
size
(); ++i) {

4013 cÚ¡ 
	gch
 = 
¡r
[
i
];

4014 
	gch
) {

4016 
m
 << "&lt;";

4019 
m
 << "&gt;";

4022 
m
 << "&amp;";

4025 ià(
is_©Œibu‹
)

4026 
m
 << "&apos;";

4028 
	gm
 << '\'';

4031 ià(
is_©Œibu‹
)

4032 
m
 << "&quot;";

4034 
	gm
 << '"';

4037 ià(
IsV®idXmlCh¬aù”
(
ch
)) {

4038 ià(
is_©Œibu‹
 && 
IsNÜm®izabËWh™e¥aû
(
ch
))

4039 
m
 << "&#x" << 
SŒšg
::
FÜm©By‹
(
¡©ic_ÿ¡
<>(
ch
))

4042 
	gm
 << 
	gch
;

4048  
	gm
.
G‘SŒšg
();

4054 
	g¡d
::
¡ršg
 
XmlUn™Te¡ResuÉPrš‹r
::
RemoveInv®idXmlCh¬aù”s
(

4055 cÚ¡ 
¡d
::
¡ršg
& 
¡r
) {

4056 
¡d
::
¡ršg
 
ouut
;

4057 
	gouut
.
»£rve
(
¡r
.
size
());

4058 
	g¡d
::
¡ršg
::
cÚ¡_™”©Ü
 
™
 = 
¡r
.
begš
(); 
	g™
 !ğ¡r.
’d
(); ++it)

4059 ià(
IsV®idXmlCh¬aù”
(*
™
))

4060 
	gouut
.
push_back
(*
™
);

4062  
	gouut
;

4083 
	g¡d
::
¡ršg
 
FÜm©TimeInMlisAsSecÚds
(
TimeInMlis
 
ms
) {

4084 ::
¡d
::
¡ršg¡»am
 
ss
;

4085 
	gss
 << (
	g¡©ic_ÿ¡
<>(
	gms
) * 1e-3);

4086  
	gss
.
¡r
();

4089 
boŞ
 
PÜbËLoÿÉime
(
time_t
 
£cÚds
, 
tm
* 
out
) {

4090 #ià
defšed
(
_MSC_VER
)

4091  
loÿÉime_s
(
out
, &
£cÚds
) == 0;

4092 #–ià
defšed
(
__MINGW32__
è|| defšed(
__MINGW64__
)

4095 
tm
* 
	gtm_±r
 = 
loÿÉime
(&
£cÚds
);

4096 ià(
	gtm_±r
 =ğ
nuÎ±r
è 
çl£
;

4097 *
	gout
 = *
tm_±r
;

4098  
	gŒue
;

4099 #–ià
defšed
(
__STDC_LIB_EXT1__
)

4102  
loÿÉime_s
(&
£cÚds
, 
out
è!ğ
nuÎ±r
;

4104  
loÿÉime_r
(&
£cÚds
, 
out
è!ğ
nuÎ±r
;

4110 
	g¡d
::
¡ršg
 
FÜm©EpochTimeInMlisAsIso8601
(
TimeInMlis
 
ms
) {

4111 
tm
 
time_¡ruù
;

4112 ià(!
PÜbËLoÿÉime
(
¡©ic_ÿ¡
<
time_t
>(
ms
 / 1000), &
time_¡ruù
))

4115  
SŒ—mabËToSŒšg
(
time_¡ruù
.
tm_y—r
 + 1900) + "-" +

4116 
	gSŒšg
::
FÜm©IÁWidth2
(
time_¡ruù
.
tm_mÚ
 + 1) + "-" +

4117 
SŒšg
::
FÜm©IÁWidth2
(
time_¡ruù
.
tm_mday
) + "T" +

4118 
SŒšg
::
FÜm©IÁWidth2
(
time_¡ruù
.
tm_hour
) + ":" +

4119 
SŒšg
::
FÜm©IÁWidth2
(
time_¡ruù
.
tm_mš
) + ":" +

4120 
SŒšg
::
FÜm©IÁWidth2
(
time_¡ruù
.
tm_£c
) + "." +

4121 
SŒšg
::
FÜm©IÁWidthN
(
¡©ic_ÿ¡
<>(
ms
 % 1000), 3);

4125 
	gXmlUn™Te¡ResuÉPrš‹r
::
OuutXmlCD©aSeùiÚ
(::
¡d
::
o¡»am
* 
¡»am
,

4126 cÚ¡ * 
d©a
) {

4127 cÚ¡ * 
	g£gm’t
 = 
d©a
;

4128 *
	g¡»am
 << "<![CDATA[";

4130 cÚ¡ * cÚ¡ 
	gÃxt_£gm’t
 = 
¡r¡r
(
£gm’t
, "]]>");

4131 ià(
	gÃxt_£gm’t
 !ğ
nuÎ±r
) {

4132 
¡»am
->
wr™e
(

4133 
£gm’t
, 
¡©ic_ÿ¡
<
¡d
::
¡»amsize
>(
Ãxt_£gm’t
 - segment));

4134 *
	g¡»am
 << "]]>]]&gt;<![CDATA[";

4135 
	g£gm’t
 = 
Ãxt_£gm’t
 + 
¡¾’
("]]>");

4137 *
	g¡»am
 << 
	g£gm’t
;

4141 *
	g¡»am
 << "]]>";

4144 
	gXmlUn™Te¡ResuÉPrš‹r
::
OuutXmlA‰ribu‹
(

4145 
¡d
::
o¡»am
* 
¡»am
,

4146 cÚ¡ 
¡d
::
¡ršg
& 
–em’t_Çme
,

4147 cÚ¡ 
¡d
::
¡ršg
& 
Çme
,

4148 cÚ¡ 
¡d
::
¡ršg
& 
v®ue
) {

4149 cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
>& 
®lowed_Çmes
 =

4150 
G‘Re£rvedOuutA‰ribu‹sFÜEËm’t
(
–em’t_Çme
);

4152 
GTEST_CHECK_
(
¡d
::
fšd
(
®lowed_Çmes
.
begš
(),‡Îowed_Çmes.
’d
(), 
Çme
) !=

4153 
®lowed_Çmes
.
’d
())

4154 << "A‰ribu‹ " << 
Çme
 << " i nÙ‡Îowed fÜƒËm’ˆ<" << 
–em’t_Çme


4157 *
	g¡»am
 << " " << 
	gÇme
 << "=\"" << 
Esÿ³XmlA‰ribu‹
(
v®ue
) << "\"";

4161 
	gXmlUn™Te¡ResuÉPrš‹r
::
OuutXmlTe¡Su™eFÜTe¡ResuÉ
(

4162 ::
¡d
::
o¡»am
* 
¡»am
, cÚ¡ 
Te¡ResuÉ
& 
»suÉ
) {

4164 *
	g¡»am
 << " <testsuite";

4165 
OuutXmlA‰ribu‹
(
¡»am
, "testsuite", "name", "NonTestSuiteFailure");

4166 
OuutXmlA‰ribu‹
(
¡»am
, "testsuite", "tests", "1");

4167 
OuutXmlA‰ribu‹
(
¡»am
, "testsuite", "failures", "1");

4168 
OuutXmlA‰ribu‹
(
¡»am
, "testsuite", "disabled", "0");

4169 
OuutXmlA‰ribu‹
(
¡»am
, "testsuite", "skipped", "0");

4170 
OuutXmlA‰ribu‹
(
¡»am
, "testsuite", "errors", "0");

4171 
OuutXmlA‰ribu‹
(
¡»am
, "testsuite", "time",

4172 
FÜm©TimeInMlisAsSecÚds
(
»suÉ
.
–­£d_time
()));

4173 
OuutXmlA‰ribu‹
(

4174 
¡»am
, "testsuite", "timestamp",

4175 
FÜm©EpochTimeInMlisAsIso8601
(
»suÉ
.
¡¬t_time¡amp
()));

4176 *
	g¡»am
 << ">";

4179 *
	g¡»am
 << " <testcase";

4180 
OuutXmlA‰ribu‹
(
¡»am
, "testcase", "name", "");

4181 
OuutXmlA‰ribu‹
(
¡»am
, "testcase", "status", "run");

4182 
OuutXmlA‰ribu‹
(
¡»am
, "testcase", "result", "completed");

4183 
OuutXmlA‰ribu‹
(
¡»am
, "testcase", "classname", "");

4184 
OuutXmlA‰ribu‹
(
¡»am
, "testcase", "time",

4185 
FÜm©TimeInMlisAsSecÚds
(
»suÉ
.
–­£d_time
()));

4186 
OuutXmlA‰ribu‹
(

4187 
¡»am
, "testcase", "timestamp",

4188 
FÜm©EpochTimeInMlisAsIso8601
(
»suÉ
.
¡¬t_time¡amp
()));

4191 
OuutXmlTe¡ResuÉ
(
¡»am
, 
»suÉ
);

4194 *
	g¡»am
 << " </testsuite>\n";

4198 
	gXmlUn™Te¡ResuÉPrš‹r
::
OuutXmlTe¡Info
(::
¡d
::
o¡»am
* 
¡»am
,

4199 cÚ¡ * 
‹¡_su™e_Çme
,

4200 cÚ¡ 
Te¡Info
& 
‹¡_šfo
) {

4201 cÚ¡ 
	gTe¡ResuÉ
& 
	g»suÉ
 = *
‹¡_šfo
.
»suÉ
();

4202 cÚ¡ 
	g¡d
::
¡ršg
 
kTe¡su™e
 = "testcase";

4204 ià(
	g‹¡_šfo
.
is_š_ªÙh”_sh¬d
()) {

4208 *
	g¡»am
 << " <testcase";

4209 
OuutXmlA‰ribu‹
(
¡»am
, 
kTe¡su™e
, "Çme", 
‹¡_šfo
.
Çme
());

4211 ià(
	g‹¡_šfo
.
v®ue_·¿m
(è!ğ
nuÎ±r
) {

4212 
OuutXmlA‰ribu‹
(
¡»am
, 
kTe¡su™e
, "value_param",

4213 
‹¡_šfo
.
v®ue_·¿m
());

4215 ià(
	g‹¡_šfo
.
ty³_·¿m
(è!ğ
nuÎ±r
) {

4216 
OuutXmlA‰ribu‹
(
¡»am
, 
kTe¡su™e
, "type_param",

4217 
‹¡_šfo
.
ty³_·¿m
());

4219 ià(
GTEST_FLAG
(
li¡_‹¡s
)) {

4220 
OuutXmlA‰ribu‹
(
¡»am
, 
kTe¡su™e
, "fe", 
‹¡_šfo
.
fe
());

4221 
OuutXmlA‰ribu‹
(
¡»am
, 
kTe¡su™e
, "line",

4222 
SŒ—mabËToSŒšg
(
‹¡_šfo
.
lše
()));

4223 *
	g¡»am
 << " />\n";

4227 
OuutXmlA‰ribu‹
(
¡»am
, 
kTe¡su™e
, "status",

4228 
‹¡_šfo
.
should_run
() ? "run" : "notrun");

4229 
OuutXmlA‰ribu‹
(
¡»am
, 
kTe¡su™e
, "result",

4230 
‹¡_šfo
.
should_run
()

4231 ? (
»suÉ
.
Sk³d
() ? "skipped" : "completed")

4233 
OuutXmlA‰ribu‹
(
¡»am
, 
kTe¡su™e
, "time",

4234 
FÜm©TimeInMlisAsSecÚds
(
»suÉ
.
–­£d_time
()));

4235 
OuutXmlA‰ribu‹
(

4236 
¡»am
, 
kTe¡su™e
, "timestamp",

4237 
FÜm©EpochTimeInMlisAsIso8601
(
»suÉ
.
¡¬t_time¡amp
()));

4238 
OuutXmlA‰ribu‹
(
¡»am
, 
kTe¡su™e
, "şas¢ame", 
‹¡_su™e_Çme
);

4240 
OuutXmlTe¡ResuÉ
(
¡»am
, 
»suÉ
);

4243 
	gXmlUn™Te¡ResuÉPrš‹r
::
OuutXmlTe¡ResuÉ
(::
¡d
::
o¡»am
* 
¡»am
,

4244 cÚ¡ 
Te¡ResuÉ
& 
»suÉ
) {

4245 
	gçu»s
 = 0;

4246 
	gsks
 = 0;

4247 
	gi
 = 0; i < 
	g»suÉ
.
tÙ®_·¹_couÁ
(); ++i) {

4248 cÚ¡ 
	gTe¡P¬tResuÉ
& 
	g·¹
 = 
»suÉ
.
G‘Te¡P¬tResuÉ
(
i
);

4249 ià(
	g·¹
.
çed
()) {

4250 ià(++
	gçu»s
 =ğ1 && 
sks
 == 0) {

4251 *
¡»am
 << ">\n";

4253 cÚ¡ 
	g¡d
::
¡ršg
 
loÿtiÚ
 =

4254 
š‹º®
::
FÜm©Comp”Ind•’d’tFeLoÿtiÚ
(
·¹
.
fe_Çme
(),

4255 
·¹
.
lše_numb”
());

4256 cÚ¡ 
	g¡d
::
¡ršg
 
summ¬y
 = 
loÿtiÚ
 + "\n" + 
·¹
.summary();

4257 *
	g¡»am
 << " <failure message=\""

4258 << 
Esÿ³XmlA‰ribu‹
(
summ¬y
)

4260 cÚ¡ 
	g¡d
::
¡ršg
 
d‘a
 = 
loÿtiÚ
 + "\n" + 
·¹
.
mes§ge
();

4261 
OuutXmlCD©aSeùiÚ
(
¡»am
, 
RemoveInv®idXmlCh¬aù”s
(
d‘a
).
c_¡r
());

4262 *
	g¡»am
 << "</failure>\n";

4263 } ià(
	g·¹
.
sk³d
()) {

4264 ià(++
	gsks
 =ğ1 && 
çu»s
 == 0) {

4265 *
¡»am
 << ">\n";

4267 cÚ¡ 
	g¡d
::
¡ršg
 
loÿtiÚ
 =

4268 
š‹º®
::
FÜm©Comp”Ind•’d’tFeLoÿtiÚ
(
·¹
.
fe_Çme
(),

4269 
·¹
.
lše_numb”
());

4270 cÚ¡ 
	g¡d
::
¡ršg
 
summ¬y
 = 
loÿtiÚ
 + "\n" + 
·¹
.summary();

4271 *
	g¡»am
 << " <skipped message=\""

4272 << 
Esÿ³XmlA‰ribu‹
(
summ¬y
.
c_¡r
()) << "\">";

4273 cÚ¡ 
	g¡d
::
¡ršg
 
d‘a
 = 
loÿtiÚ
 + "\n" + 
·¹
.
mes§ge
();

4274 
OuutXmlCD©aSeùiÚ
(
¡»am
, 
RemoveInv®idXmlCh¬aù”s
(
d‘a
).
c_¡r
());

4275 *
	g¡»am
 << "</skipped>\n";

4279 ià(
	gçu»s
 =ğ0 && 
sks
 =ğ0 && 
»suÉ
.
‹¡_´İ”ty_couÁ
() == 0) {

4280 *
¡»am
 << " />\n";

4282 ià(
	gçu»s
 =ğ0 && 
sks
 == 0) {

4283 *
¡»am
 << ">\n";

4285 
OuutXmlTe¡Prİ”t›s
(
¡»am
, 
»suÉ
);

4286 *
	g¡»am
 << " </testcase>\n";

4291 
	gXmlUn™Te¡ResuÉPrš‹r
::
PrštXmlTe¡Su™e
(
¡d
::
o¡»am
* 
¡»am
,

4292 cÚ¡ 
Te¡Su™e
& 
‹¡_su™e
) {

4293 cÚ¡ 
	g¡d
::
¡ršg
 
kTe¡su™e
 = "testsuite";

4294 *
	g¡»am
 << " <" << 
	gkTe¡su™e
;

4295 
OuutXmlA‰ribu‹
(
¡»am
, 
kTe¡su™e
, "Çme", 
‹¡_su™e
.
Çme
());

4296 
OuutXmlA‰ribu‹
(
¡»am
, 
kTe¡su™e
, "tests",

4297 
SŒ—mabËToSŒšg
(
‹¡_su™e
.
»pÜbË_‹¡_couÁ
()));

4298 ià(!
GTEST_FLAG
(
li¡_‹¡s
)) {

4299 
OuutXmlA‰ribu‹
(
¡»am
, 
kTe¡su™e
, "failures",

4300 
SŒ—mabËToSŒšg
(
‹¡_su™e
.
çed_‹¡_couÁ
()));

4301 
OuutXmlA‰ribu‹
(

4302 
¡»am
, 
kTe¡su™e
, "disabled",

4303 
SŒ—mabËToSŒšg
(
‹¡_su™e
.
»pÜbË_di§bËd_‹¡_couÁ
()));

4304 
OuutXmlA‰ribu‹
(
¡»am
, 
kTe¡su™e
, "skipped",

4305 
SŒ—mabËToSŒšg
(
‹¡_su™e
.
sk³d_‹¡_couÁ
()));

4307 
OuutXmlA‰ribu‹
(
¡»am
, 
kTe¡su™e
, "errors", "0");

4309 
OuutXmlA‰ribu‹
(
¡»am
, 
kTe¡su™e
, "time",

4310 
FÜm©TimeInMlisAsSecÚds
(
‹¡_su™e
.
–­£d_time
()));

4311 
OuutXmlA‰ribu‹
(

4312 
¡»am
, 
kTe¡su™e
, "timestamp",

4313 
FÜm©EpochTimeInMlisAsIso8601
(
‹¡_su™e
.
¡¬t_time¡amp
()));

4314 *
	g¡»am
 << 
Te¡Prİ”t›sAsXmlA‰ribu‹s
(
‹¡_su™e
.
ad_hoc_‹¡_»suÉ
());

4316 *
	g¡»am
 << ">\n";

4317 
	gi
 = 0; i < 
	g‹¡_su™e
.
tÙ®_‹¡_couÁ
(); ++i) {

4318 ià(
	g‹¡_su™e
.
G‘Te¡Info
(
i
)->
is_»pÜbË
())

4319 
OuutXmlTe¡Info
(
¡»am
, 
‹¡_su™e
.
Çme
(), *‹¡_su™e.
G‘Te¡Info
(
i
));

4321 *
	g¡»am
 << " </" << 
	gkTe¡su™e
 << ">\n";

4325 
	gXmlUn™Te¡ResuÉPrš‹r
::
PrštXmlUn™Te¡
(
¡d
::
o¡»am
* 
¡»am
,

4326 cÚ¡ 
Un™Te¡
& 
un™_‹¡
) {

4327 cÚ¡ 
	g¡d
::
¡ršg
 
kTe¡su™es
 = "testsuites";

4329 *
	g¡»am
 << "<?xml version=\"1.0\"ƒncoding=\"UTF-8\"?>\n";

4330 *
	g¡»am
 << "<" << 
	gkTe¡su™es
;

4332 
OuutXmlA‰ribu‹
(
¡»am
, 
kTe¡su™es
, "tests",

4333 
SŒ—mabËToSŒšg
(
un™_‹¡
.
»pÜbË_‹¡_couÁ
()));

4334 
OuutXmlA‰ribu‹
(
¡»am
, 
kTe¡su™es
, "failures",

4335 
SŒ—mabËToSŒšg
(
un™_‹¡
.
çed_‹¡_couÁ
()));

4336 
OuutXmlA‰ribu‹
(

4337 
¡»am
, 
kTe¡su™es
, "disabled",

4338 
SŒ—mabËToSŒšg
(
un™_‹¡
.
»pÜbË_di§bËd_‹¡_couÁ
()));

4339 
OuutXmlA‰ribu‹
(
¡»am
, 
kTe¡su™es
, "errors", "0");

4340 
OuutXmlA‰ribu‹
(
¡»am
, 
kTe¡su™es
, "time",

4341 
FÜm©TimeInMlisAsSecÚds
(
un™_‹¡
.
–­£d_time
()));

4342 
OuutXmlA‰ribu‹
(

4343 
¡»am
, 
kTe¡su™es
, "timestamp",

4344 
FÜm©EpochTimeInMlisAsIso8601
(
un™_‹¡
.
¡¬t_time¡amp
()));

4346 ià(
GTEST_FLAG
(
shufæe
)) {

4347 
OuutXmlA‰ribu‹
(
¡»am
, 
kTe¡su™es
, "random_seed",

4348 
SŒ—mabËToSŒšg
(
un™_‹¡
.
¿ndom_£ed
()));

4350 *
	g¡»am
 << 
Te¡Prİ”t›sAsXmlA‰ribu‹s
(
un™_‹¡
.
ad_hoc_‹¡_»suÉ
());

4352 
OuutXmlA‰ribu‹
(
¡»am
, 
kTe¡su™es
, "name", "AllTests");

4353 *
	g¡»am
 << ">\n";

4355 
	gi
 = 0; i < 
	gun™_‹¡
.
tÙ®_‹¡_su™e_couÁ
(); ++i) {

4356 ià(
	gun™_‹¡
.
G‘Te¡Su™e
(
i
)->
»pÜbË_‹¡_couÁ
() > 0)

4357 
PrštXmlTe¡Su™e
(
¡»am
, *
un™_‹¡
.
G‘Te¡Su™e
(
i
));

4362 ià(
	gun™_‹¡
.
ad_hoc_‹¡_»suÉ
().
Faed
()) {

4363 
OuutXmlTe¡Su™eFÜTe¡ResuÉ
(
¡»am
, 
un™_‹¡
.
ad_hoc_‹¡_»suÉ
());

4366 *
	g¡»am
 << "</" << 
	gkTe¡su™es
 << ">\n";

4369 
	gXmlUn™Te¡ResuÉPrš‹r
::
PrštXmlTe¡sLi¡
(

4370 
¡d
::
o¡»am
* 
¡»am
, cÚ¡ std::
veùÜ
<
Te¡Su™e
*>& 
‹¡_su™es
) {

4371 cÚ¡ 
¡d
::
¡ršg
 
kTe¡su™es
 = "testsuites";

4373 *
	g¡»am
 << "<?xml version=\"1.0\"ƒncoding=\"UTF-8\"?>\n";

4374 *
	g¡»am
 << "<" << 
	gkTe¡su™es
;

4376 
	gtÙ®_‹¡s
 = 0;

4377 autØ
	g‹¡_su™e
 : 
‹¡_su™es
) {

4378 
tÙ®_‹¡s
 +ğ
‹¡_su™e
->
tÙ®_‹¡_couÁ
();

4380 
OuutXmlA‰ribu‹
(
¡»am
, 
kTe¡su™es
, "tests",

4381 
SŒ—mabËToSŒšg
(
tÙ®_‹¡s
));

4382 
OuutXmlA‰ribu‹
(
¡»am
, 
kTe¡su™es
, "name", "AllTests");

4383 *
	g¡»am
 << ">\n";

4385 autØ
	g‹¡_su™e
 : 
‹¡_su™es
) {

4386 
PrštXmlTe¡Su™e
(
¡»am
, *
‹¡_su™e
);

4388 *
	g¡»am
 << "</" << 
	gkTe¡su™es
 << ">\n";

4393 
	g¡d
::
¡ršg
 
XmlUn™Te¡ResuÉPrš‹r
::
Te¡Prİ”t›sAsXmlA‰ribu‹s
(

4394 cÚ¡ 
Te¡ResuÉ
& 
»suÉ
) {

4395 
Mes§ge
 
©Œibu‹s
;

4396 
	gi
 = 0; i < 
	g»suÉ
.
‹¡_´İ”ty_couÁ
(); ++i) {

4397 cÚ¡ 
	gTe¡Prİ”ty
& 
	g´İ”ty
 = 
»suÉ
.
G‘Te¡Prİ”ty
(
i
);

4398 
	g©Œibu‹s
 << " " << 
	g´İ”ty
.
key
() << "="

4399 << "\"" << 
Esÿ³XmlA‰ribu‹
(
´İ”ty
.
v®ue
()) << "\"";

4401  
	g©Œibu‹s
.
G‘SŒšg
();

4404 
	gXmlUn™Te¡ResuÉPrš‹r
::
OuutXmlTe¡Prİ”t›s
(

4405 
¡d
::
o¡»am
* 
¡»am
, cÚ¡ 
Te¡ResuÉ
& 
»suÉ
) {

4406 cÚ¡ 
	g¡d
::
¡ršg
 
kPrİ”t›s
 = "properties";

4407 cÚ¡ 
	g¡d
::
¡ršg
 
kPrİ”ty
 = "property";

4409 ià(
	g»suÉ
.
‹¡_´İ”ty_couÁ
() <= 0) {

4413 *
	g¡»am
 << "<" << 
	gkPrİ”t›s
 << ">\n";

4414 
	gi
 = 0; i < 
	g»suÉ
.
‹¡_´İ”ty_couÁ
(); ++i) {

4415 cÚ¡ 
	gTe¡Prİ”ty
& 
	g´İ”ty
 = 
»suÉ
.
G‘Te¡Prİ”ty
(
i
);

4416 *
	g¡»am
 << "<" << 
	gkPrİ”ty
;

4417 *
	g¡»am
 << "‚ame=\"" << 
Esÿ³XmlA‰ribu‹
(
´İ”ty
.
key
()) << "\"";

4418 *
	g¡»am
 << " v®ue=\"" << 
Esÿ³XmlA‰ribu‹
(
´İ”ty
.
v®ue
()) << "\"";

4419 *
	g¡»am
 << "/>\n";

4421 *
	g¡»am
 << "</" << 
	gkPrİ”t›s
 << ">\n";

4427 şas 
	cJsÚUn™Te¡ResuÉPrš‹r
 : 
public
 
Em±yTe¡Ev’tLi¡’”
 {

4428 
public
:

4429 
ex¶ic™
 
JsÚUn™Te¡ResuÉPrš‹r
(cÚ¡ * 
ouut_fe
);

4431 
OnTe¡I‹¿tiÚEnd
(cÚ¡ 
Un™Te¡
& 
un™_‹¡
, 
™”©iÚ
è
	gov”ride
;

4434 
PrštJsÚTe¡Li¡
(::
¡d
::
o¡»am
* 
¡»am
,

4435 cÚ¡ 
¡d
::
veùÜ
<
Te¡Su™e
*>& 
‹¡_su™es
);

4437 
	g´iv©e
:

4439 
¡d
::
¡ršg
 
Esÿ³JsÚ
(cÚ¡ std::¡ršg& 
¡r
);

4443 
OuutJsÚKey
(
¡d
::
o¡»am
* 
¡»am
,

4444 cÚ¡ 
¡d
::
¡ršg
& 
–em’t_Çme
,

4445 cÚ¡ 
¡d
::
¡ršg
& 
Çme
,

4446 cÚ¡ 
¡d
::
¡ršg
& 
v®ue
,

4447 cÚ¡ 
¡d
::
¡ršg
& 
šd’t
,

4448 
boŞ
 
comma
 = 
Œue
);

4449 
OuutJsÚKey
(
¡d
::
o¡»am
* 
¡»am
,

4450 cÚ¡ 
¡d
::
¡ršg
& 
–em’t_Çme
,

4451 cÚ¡ 
¡d
::
¡ršg
& 
Çme
,

4452 
v®ue
,

4453 cÚ¡ 
¡d
::
¡ršg
& 
šd’t
,

4454 
boŞ
 
comma
 = 
Œue
);

4459 
OuutJsÚTe¡Su™eFÜTe¡ResuÉ
(::
¡d
::
o¡»am
* 
¡»am
,

4460 cÚ¡ 
Te¡ResuÉ
& 
»suÉ
);

4463 
OuutJsÚTe¡ResuÉ
(::
¡d
::
o¡»am
* 
¡»am
,

4464 cÚ¡ 
Te¡ResuÉ
& 
»suÉ
);

4467 
OuutJsÚTe¡Info
(::
¡d
::
o¡»am
* 
¡»am
,

4468 cÚ¡ * 
‹¡_su™e_Çme
,

4469 cÚ¡ 
Te¡Info
& 
‹¡_šfo
);

4472 
PrštJsÚTe¡Su™e
(::
¡d
::
o¡»am
* 
¡»am
,

4473 cÚ¡ 
Te¡Su™e
& 
‹¡_su™e
);

4476 
PrštJsÚUn™Te¡
(::
¡d
::
o¡»am
* 
¡»am
,

4477 cÚ¡ 
Un™Te¡
& 
un™_‹¡
);

4481 
	g¡d
::
¡ršg
 
Te¡Prİ”t›sAsJsÚ
(cÚ¡ 
Te¡ResuÉ
& 
»suÉ
,

4482 cÚ¡ 
¡d
::
¡ršg
& 
šd’t
);

4485 cÚ¡ 
	g¡d
::
¡ršg
 
ouut_fe_
;

4487 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
JsÚUn™Te¡ResuÉPrš‹r
);

4491 
	gJsÚUn™Te¡ResuÉPrš‹r
::
JsÚUn™Te¡ResuÉPrš‹r
(cÚ¡ * 
ouut_fe
)

4492 : 
ouut_fe_
(
ouut_fe
) {

4493 ià(
ouut_fe_
.
em±y
()) {

4494 
GTEST_LOG_
(
FATAL
) << "JSON output file may‚ot be‚ull";

4498 
	gJsÚUn™Te¡ResuÉPrš‹r
::
OnTe¡I‹¿tiÚEnd
(cÚ¡ 
Un™Te¡
& 
un™_‹¡
,

4500 
FILE
* 
	gjsÚout
 = 
O³nFeFÜWr™šg
(
ouut_fe_
);

4501 
	g¡d
::
¡ršg¡»am
 
¡»am
;

4502 
PrštJsÚUn™Te¡
(&
¡»am
, 
un™_‹¡
);

4503 
årštf
(
jsÚout
, "%s", 
SŒšgSŒ—mToSŒšg
(&
¡»am
).
c_¡r
());

4504 
fşo£
(
jsÚout
);

4508 
	g¡d
::
¡ršg
 
JsÚUn™Te¡ResuÉPrš‹r
::
Esÿ³JsÚ
(cÚ¡ 
¡d
::¡ršg& 
¡r
) {

4509 
Mes§ge
 
m
;

4511 
size_t
 
	gi
 = 0; i < 
	g¡r
.
size
(); ++i) {

4512 cÚ¡ 
	gch
 = 
¡r
[
i
];

4513 
	gch
) {

4517 
m
 << '\\' << 
ch
;

4520 
m
 << "\\b";

4523 
m
 << "\\t";

4526 
m
 << "\\n";

4529 
m
 << "\\f";

4532 
m
 << "\\r";

4535 ià(
ch
 < ' ') {

4536 
m
 << "\\u00" << 
SŒšg
::
FÜm©By‹
(
¡©ic_ÿ¡
<>(
ch
));

4538 
	gm
 << 
	gch
;

4544  
	gm
.
G‘SŒšg
();

4551 
	g¡d
::
¡ršg
 
FÜm©TimeInMlisAsDu¿tiÚ
(
TimeInMlis
 
ms
) {

4552 ::
¡d
::
¡ršg¡»am
 
ss
;

4553 
	gss
 << (
	g¡©ic_ÿ¡
<>(
	gms
) * 1e-3) << "s";

4554  
	gss
.
¡r
();

4559 
	g¡d
::
¡ršg
 
FÜm©EpochTimeInMlisAsRFC3339
(
TimeInMlis
 
ms
) {

4560 
tm
 
time_¡ruù
;

4561 ià(!
PÜbËLoÿÉime
(
¡©ic_ÿ¡
<
time_t
>(
ms
 / 1000), &
time_¡ruù
))

4564  
SŒ—mabËToSŒšg
(
time_¡ruù
.
tm_y—r
 + 1900) + "-" +

4565 
	gSŒšg
::
FÜm©IÁWidth2
(
time_¡ruù
.
tm_mÚ
 + 1) + "-" +

4566 
SŒšg
::
FÜm©IÁWidth2
(
time_¡ruù
.
tm_mday
) + "T" +

4567 
SŒšg
::
FÜm©IÁWidth2
(
time_¡ruù
.
tm_hour
) + ":" +

4568 
SŒšg
::
FÜm©IÁWidth2
(
time_¡ruù
.
tm_mš
) + ":" +

4569 
SŒšg
::
FÜm©IÁWidth2
(
time_¡ruù
.
tm_£c
) + "Z";

4572 
šlše
 
	g¡d
::
¡ršg
 
Ind’t
(
size_t
 
width
) {

4573  
¡d
::
¡ršg
(
width
, ' ');

4576 
	gJsÚUn™Te¡ResuÉPrš‹r
::
OuutJsÚKey
(

4577 
¡d
::
o¡»am
* 
¡»am
,

4578 cÚ¡ 
¡d
::
¡ršg
& 
–em’t_Çme
,

4579 cÚ¡ 
¡d
::
¡ršg
& 
Çme
,

4580 cÚ¡ 
¡d
::
¡ršg
& 
v®ue
,

4581 cÚ¡ 
¡d
::
¡ršg
& 
šd’t
,

4582 
boŞ
 
comma
) {

4583 cÚ¡ 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
>& 
®lowed_Çmes
 =

4584 
G‘Re£rvedOuutA‰ribu‹sFÜEËm’t
(
–em’t_Çme
);

4586 
GTEST_CHECK_
(
¡d
::
fšd
(
®lowed_Çmes
.
begš
(),‡Îowed_Çmes.
’d
(), 
Çme
) !=

4587 
®lowed_Çmes
.
’d
())

4588 << "Key \"" << 
Çme
 << "\" i nÙ‡Îowed fÜ v®u\"" << 
–em’t_Çme


4591 *
	g¡»am
 << 
	gšd’t
 << "\"" << 
	gÇme
 << "\": \"" << 
Esÿ³JsÚ
(
v®ue
) << "\"";

4592 ià(
	gcomma
)

4593 *
	g¡»am
 << ",\n";

4596 
	gJsÚUn™Te¡ResuÉPrš‹r
::
OuutJsÚKey
(

4597 
¡d
::
o¡»am
* 
¡»am
,

4598 cÚ¡ 
¡d
::
¡ršg
& 
–em’t_Çme
,

4599 cÚ¡ 
¡d
::
¡ršg
& 
Çme
,

4600 
v®ue
,

4601 cÚ¡ 
¡d
::
¡ršg
& 
šd’t
,

4602 
boŞ
 
comma
) {

4603 cÚ¡ 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
>& 
®lowed_Çmes
 =

4604 
G‘Re£rvedOuutA‰ribu‹sFÜEËm’t
(
–em’t_Çme
);

4606 
GTEST_CHECK_
(
¡d
::
fšd
(
®lowed_Çmes
.
begš
(),‡Îowed_Çmes.
’d
(), 
Çme
) !=

4607 
®lowed_Çmes
.
’d
())

4608 << "Key \"" << 
Çme
 << "\" i nÙ‡Îowed fÜ v®u\"" << 
–em’t_Çme


4611 *
	g¡»am
 << 
	gšd’t
 << "\"" << 
	gÇme
 << "\": " << 
SŒ—mabËToSŒšg
(
v®ue
);

4612 ià(
	gcomma
)

4613 *
	g¡»am
 << ",\n";

4617 
	gJsÚUn™Te¡ResuÉPrš‹r
::
OuutJsÚTe¡Su™eFÜTe¡ResuÉ
(

4618 ::
¡d
::
o¡»am
* 
¡»am
, cÚ¡ 
Te¡ResuÉ
& 
»suÉ
) {

4620 *
	g¡»am
 << 
Ind’t
(4) << "{\n";

4621 
OuutJsÚKey
(
¡»am
, "‹¡su™e", "Çme", "NÚTe¡Su™eFau»", 
Ind’t
(6));

4622 
OuutJsÚKey
(
¡»am
, "‹¡su™e", "‹¡s", 1, 
Ind’t
(6));

4623 ià(!
GTEST_FLAG
(
li¡_‹¡s
)) {

4624 
OuutJsÚKey
(
¡»am
, "‹¡su™e", "çu»s", 1, 
Ind’t
(6));

4625 
OuutJsÚKey
(
¡»am
, "‹¡su™e", "di§bËd", 0, 
Ind’t
(6));

4626 
OuutJsÚKey
(
¡»am
, "‹¡su™e", "sk³d", 0, 
Ind’t
(6));

4627 
OuutJsÚKey
(
¡»am
, "‹¡su™e", "”rÜs", 0, 
Ind’t
(6));

4628 
OuutJsÚKey
(
¡»am
, "testsuite", "time",

4629 
FÜm©TimeInMlisAsDu¿tiÚ
(
»suÉ
.
–­£d_time
()),

4630 
Ind’t
(6));

4631 
OuutJsÚKey
(
¡»am
, "testsuite", "timestamp",

4632 
FÜm©EpochTimeInMlisAsRFC3339
(
»suÉ
.
¡¬t_time¡amp
()),

4633 
Ind’t
(6));

4635 *
	g¡»am
 << 
Ind’t
(6) << "\"testsuite\": [\n";

4638 *
	g¡»am
 << 
Ind’t
(8) << "{\n";

4639 
OuutJsÚKey
(
¡»am
, "‹¡ÿ£", "Çme", "", 
Ind’t
(10));

4640 
OuutJsÚKey
(
¡»am
, "‹¡ÿ£", "¡©us", "RUN", 
Ind’t
(10));

4641 
OuutJsÚKey
(
¡»am
, "‹¡ÿ£", "»suÉ", "COMPLETED", 
Ind’t
(10));

4642 
OuutJsÚKey
(
¡»am
, "testcase", "timestamp",

4643 
FÜm©EpochTimeInMlisAsRFC3339
(
»suÉ
.
¡¬t_time¡amp
()),

4644 
Ind’t
(10));

4645 
OuutJsÚKey
(
¡»am
, "testcase", "time",

4646 
FÜm©TimeInMlisAsDu¿tiÚ
(
»suÉ
.
–­£d_time
()),

4647 
Ind’t
(10));

4648 
OuutJsÚKey
(
¡»am
, "‹¡ÿ£", "şas¢ame", "", 
Ind’t
(10), 
çl£
);

4649 *
	g¡»am
 << 
Te¡Prİ”t›sAsJsÚ
(
»suÉ
, 
Ind’t
(10));

4652 
OuutJsÚTe¡ResuÉ
(
¡»am
, 
»suÉ
);

4655 *
	g¡»am
 << "\n" << 
Ind’t
(6) << "]\n" << Indent(4) << "}";

4659 
	gJsÚUn™Te¡ResuÉPrš‹r
::
OuutJsÚTe¡Info
(::
¡d
::
o¡»am
* 
¡»am
,

4660 cÚ¡ * 
‹¡_su™e_Çme
,

4661 cÚ¡ 
Te¡Info
& 
‹¡_šfo
) {

4662 cÚ¡ 
	gTe¡ResuÉ
& 
	g»suÉ
 = *
‹¡_šfo
.
»suÉ
();

4663 cÚ¡ 
	g¡d
::
¡ršg
 
kTe¡su™e
 = "testcase";

4664 cÚ¡ 
	g¡d
::
¡ršg
 
kInd’t
 = 
Ind’t
(10);

4666 *
	g¡»am
 << 
Ind’t
(8) << "{\n";

4667 
OuutJsÚKey
(
¡»am
, 
kTe¡su™e
, "Çme", 
‹¡_šfo
.
Çme
(), 
kInd’t
);

4669 ià(
	g‹¡_šfo
.
v®ue_·¿m
(è!ğ
nuÎ±r
) {

4670 
OuutJsÚKey
(
¡»am
, 
kTe¡su™e
, "v®ue_·¿m", 
‹¡_šfo
.
v®ue_·¿m
(),

4671 
kInd’t
);

4673 ià(
	g‹¡_šfo
.
ty³_·¿m
(è!ğ
nuÎ±r
) {

4674 
OuutJsÚKey
(
¡»am
, 
kTe¡su™e
, "ty³_·¿m", 
‹¡_šfo
.
ty³_·¿m
(),

4675 
kInd’t
);

4677 ià(
GTEST_FLAG
(
li¡_‹¡s
)) {

4678 
OuutJsÚKey
(
¡»am
, 
kTe¡su™e
, "fe", 
‹¡_šfo
.
fe
(), 
kInd’t
);

4679 
OuutJsÚKey
(
¡»am
, 
kTe¡su™e
, "lše", 
‹¡_šfo
.
lše
(), 
kInd’t
, 
çl£
);

4680 *
	g¡»am
 << "\n" << 
Ind’t
(8) << "}";

4684 
OuutJsÚKey
(
¡»am
, 
kTe¡su™e
, "status",

4685 
‹¡_šfo
.
should_run
(è? "RUN" : "NOTRUN", 
kInd’t
);

4686 
OuutJsÚKey
(
¡»am
, 
kTe¡su™e
, "result",

4687 
‹¡_šfo
.
should_run
()

4688 ? (
»suÉ
.
Sk³d
() ? "SKIPPED" : "COMPLETED")

4690 
kInd’t
);

4691 
OuutJsÚKey
(
¡»am
, 
kTe¡su™e
, "timestamp",

4692 
FÜm©EpochTimeInMlisAsRFC3339
(
»suÉ
.
¡¬t_time¡amp
()),

4693 
kInd’t
);

4694 
OuutJsÚKey
(
¡»am
, 
kTe¡su™e
, "time",

4695 
FÜm©TimeInMlisAsDu¿tiÚ
(
»suÉ
.
–­£d_time
()), 
kInd’t
);

4696 
OuutJsÚKey
(
¡»am
, 
kTe¡su™e
, "şas¢ame", 
‹¡_su™e_Çme
, 
kInd’t
,

4697 
çl£
);

4698 *
	g¡»am
 << 
Te¡Prİ”t›sAsJsÚ
(
»suÉ
, 
kInd’t
);

4700 
OuutJsÚTe¡ResuÉ
(
¡»am
, 
»suÉ
);

4703 
	gJsÚUn™Te¡ResuÉPrš‹r
::
OuutJsÚTe¡ResuÉ
(::
¡d
::
o¡»am
* 
¡»am
,

4704 cÚ¡ 
Te¡ResuÉ
& 
»suÉ
) {

4705 cÚ¡ 
	g¡d
::
¡ršg
 
kInd’t
 = 
Ind’t
(10);

4707 
	gçu»s
 = 0;

4708 
	gi
 = 0; i < 
	g»suÉ
.
tÙ®_·¹_couÁ
(); ++i) {

4709 cÚ¡ 
	gTe¡P¬tResuÉ
& 
	g·¹
 = 
»suÉ
.
G‘Te¡P¬tResuÉ
(
i
);

4710 ià(
	g·¹
.
çed
()) {

4711 *
	g¡»am
 << ",\n";

4712 ià(++
	gçu»s
 == 1) {

4713 *
¡»am
 << 
kInd’t
 << "\"" << "failures" << "\": [\n";

4715 cÚ¡ 
	g¡d
::
¡ršg
 
loÿtiÚ
 =

4716 
š‹º®
::
FÜm©Comp”Ind•’d’tFeLoÿtiÚ
(
·¹
.
fe_Çme
(),

4717 
·¹
.
lše_numb”
());

4718 cÚ¡ 
	g¡d
::
¡ršg
 
mes§ge
 = 
Esÿ³JsÚ
(
loÿtiÚ
 + "\n" + 
·¹
.message());

4719 *
	g¡»am
 << 
	gkInd’t
 << " {\n"

4720 << 
	gkInd’t
 << " \"çu»\": \"" << 
	gmes§ge
 << "\",\n"

4721 << 
	gkInd’t
 << " \"type\": \"\"\n"

4722 << 
	gkInd’t
 << " }";

4726 ià(
	gçu»s
 > 0)

4727 *
	g¡»am
 << "\n" << 
	gkInd’t
 << "]";

4728 *
	g¡»am
 << "\n" << 
Ind’t
(8) << "}";

4732 
	gJsÚUn™Te¡ResuÉPrš‹r
::
PrštJsÚTe¡Su™e
(

4733 
¡d
::
o¡»am
* 
¡»am
, cÚ¡ 
Te¡Su™e
& 
‹¡_su™e
) {

4734 cÚ¡ 
	g¡d
::
¡ršg
 
kTe¡su™e
 = "testsuite";

4735 cÚ¡ 
	g¡d
::
¡ršg
 
kInd’t
 = 
Ind’t
(6);

4737 *
	g¡»am
 << 
Ind’t
(4) << "{\n";

4738 
OuutJsÚKey
(
¡»am
, 
kTe¡su™e
, "Çme", 
‹¡_su™e
.
Çme
(), 
kInd’t
);

4739 
OuutJsÚKey
(
¡»am
, 
kTe¡su™e
, "‹¡s", 
‹¡_su™e
.
»pÜbË_‹¡_couÁ
(),

4740 
kInd’t
);

4741 ià(!
GTEST_FLAG
(
li¡_‹¡s
)) {

4742 
OuutJsÚKey
(
¡»am
, 
kTe¡su™e
, "failures",

4743 
‹¡_su™e
.
çed_‹¡_couÁ
(), 
kInd’t
);

4744 
OuutJsÚKey
(
¡»am
, 
kTe¡su™e
, "disabled",

4745 
‹¡_su™e
.
»pÜbË_di§bËd_‹¡_couÁ
(), 
kInd’t
);

4746 
OuutJsÚKey
(
¡»am
, 
kTe¡su™e
, "”rÜs", 0, 
kInd’t
);

4747 
OuutJsÚKey
(

4748 
¡»am
, 
kTe¡su™e
, "timestamp",

4749 
FÜm©EpochTimeInMlisAsRFC3339
(
‹¡_su™e
.
¡¬t_time¡amp
()),

4750 
kInd’t
);

4751 
OuutJsÚKey
(
¡»am
, 
kTe¡su™e
, "time",

4752 
FÜm©TimeInMlisAsDu¿tiÚ
(
‹¡_su™e
.
–­£d_time
()),

4753 
kInd’t
, 
çl£
);

4754 *
	g¡»am
 << 
Te¡Prİ”t›sAsJsÚ
(
‹¡_su™e
.
ad_hoc_‹¡_»suÉ
(), 
kInd’t
)

4758 *
	g¡»am
 << 
	gkInd’t
 << "\"" << 
	gkTe¡su™e
 << "\": [\n";

4760 
boŞ
 
	gcomma
 = 
çl£
;

4761 
	gi
 = 0; i < 
	g‹¡_su™e
.
tÙ®_‹¡_couÁ
(); ++i) {

4762 ià(
	g‹¡_su™e
.
G‘Te¡Info
(
i
)->
is_»pÜbË
()) {

4763 ià(
	gcomma
) {

4764 *
	g¡»am
 << ",\n";

4766 
	gcomma
 = 
Œue
;

4768 
OuutJsÚTe¡Info
(
¡»am
, 
‹¡_su™e
.
Çme
(), *‹¡_su™e.
G‘Te¡Info
(
i
));

4771 *
	g¡»am
 << "\n" << 
	gkInd’t
 << "]\n" << 
Ind’t
(4) << "}";

4775 
	gJsÚUn™Te¡ResuÉPrš‹r
::
PrštJsÚUn™Te¡
(
¡d
::
o¡»am
* 
¡»am
,

4776 cÚ¡ 
Un™Te¡
& 
un™_‹¡
) {

4777 cÚ¡ 
	g¡d
::
¡ršg
 
kTe¡su™es
 = "testsuites";

4778 cÚ¡ 
	g¡d
::
¡ršg
 
kInd’t
 = 
Ind’t
(2);

4779 *
	g¡»am
 << "{\n";

4781 
OuutJsÚKey
(
¡»am
, 
kTe¡su™es
, "‹¡s", 
un™_‹¡
.
»pÜbË_‹¡_couÁ
(),

4782 
kInd’t
);

4783 
OuutJsÚKey
(
¡»am
, 
kTe¡su™es
, "çu»s", 
un™_‹¡
.
çed_‹¡_couÁ
(),

4784 
kInd’t
);

4785 
OuutJsÚKey
(
¡»am
, 
kTe¡su™es
, "disabled",

4786 
un™_‹¡
.
»pÜbË_di§bËd_‹¡_couÁ
(), 
kInd’t
);

4787 
OuutJsÚKey
(
¡»am
, 
kTe¡su™es
, "”rÜs", 0, 
kInd’t
);

4788 ià(
GTEST_FLAG
(
shufæe
)) {

4789 
OuutJsÚKey
(
¡»am
, 
kTe¡su™es
, "¿ndom_£ed", 
un™_‹¡
.
¿ndom_£ed
(),

4790 
kInd’t
);

4792 
OuutJsÚKey
(
¡»am
, 
kTe¡su™es
, "timestamp",

4793 
FÜm©EpochTimeInMlisAsRFC3339
(
un™_‹¡
.
¡¬t_time¡amp
()),

4794 
kInd’t
);

4795 
OuutJsÚKey
(
¡»am
, 
kTe¡su™es
, "time",

4796 
FÜm©TimeInMlisAsDu¿tiÚ
(
un™_‹¡
.
–­£d_time
()), 
kInd’t
,

4797 
çl£
);

4799 *
	g¡»am
 << 
Te¡Prİ”t›sAsJsÚ
(
un™_‹¡
.
ad_hoc_‹¡_»suÉ
(), 
kInd’t
)

4802 
OuutJsÚKey
(
¡»am
, 
kTe¡su™es
, "Çme", "AÎTe¡s", 
kInd’t
);

4803 *
	g¡»am
 << 
	gkInd’t
 << "\"" << 
	gkTe¡su™es
 << "\": [\n";

4805 
boŞ
 
	gcomma
 = 
çl£
;

4806 
	gi
 = 0; i < 
	gun™_‹¡
.
tÙ®_‹¡_su™e_couÁ
(); ++i) {

4807 ià(
	gun™_‹¡
.
G‘Te¡Su™e
(
i
)->
»pÜbË_‹¡_couÁ
() > 0) {

4808 ià(
	gcomma
) {

4809 *
	g¡»am
 << ",\n";

4811 
	gcomma
 = 
Œue
;

4813 
PrštJsÚTe¡Su™e
(
¡»am
, *
un™_‹¡
.
G‘Te¡Su™e
(
i
));

4819 ià(
	gun™_‹¡
.
ad_hoc_‹¡_»suÉ
().
Faed
()) {

4820 
OuutJsÚTe¡Su™eFÜTe¡ResuÉ
(
¡»am
, 
un™_‹¡
.
ad_hoc_‹¡_»suÉ
());

4823 *
	g¡»am
 << "\n" << 
	gkInd’t
 << "]\n" << "}\n";

4826 
	gJsÚUn™Te¡ResuÉPrš‹r
::
PrštJsÚTe¡Li¡
(

4827 
¡d
::
o¡»am
* 
¡»am
, cÚ¡ std::
veùÜ
<
Te¡Su™e
*>& 
‹¡_su™es
) {

4828 cÚ¡ 
¡d
::
¡ršg
 
kTe¡su™es
 = "testsuites";

4829 cÚ¡ 
	g¡d
::
¡ršg
 
kInd’t
 = 
Ind’t
(2);

4830 *
	g¡»am
 << "{\n";

4831 
	gtÙ®_‹¡s
 = 0;

4832 autØ
	g‹¡_su™e
 : 
‹¡_su™es
) {

4833 
tÙ®_‹¡s
 +ğ
‹¡_su™e
->
tÙ®_‹¡_couÁ
();

4835 
OuutJsÚKey
(
¡»am
, 
kTe¡su™es
, "‹¡s", 
tÙ®_‹¡s
, 
kInd’t
);

4837 
OuutJsÚKey
(
¡»am
, 
kTe¡su™es
, "Çme", "AÎTe¡s", 
kInd’t
);

4838 *
	g¡»am
 << 
	gkInd’t
 << "\"" << 
	gkTe¡su™es
 << "\": [\n";

4840 
size_t
 
	gi
 = 0; i < 
	g‹¡_su™es
.
size
(); ++i) {

4841 ià(
	gi
 != 0) {

4842 *
¡»am
 << ",\n";

4844 
PrštJsÚTe¡Su™e
(
¡»am
, *
‹¡_su™es
[
i
]);

4847 *
	g¡»am
 << "\n"

4848 << 
	gkInd’t
 << "]\n"

4853 
	g¡d
::
¡ršg
 
JsÚUn™Te¡ResuÉPrš‹r
::
Te¡Prİ”t›sAsJsÚ
(

4854 cÚ¡ 
Te¡ResuÉ
& 
»suÉ
, cÚ¡ 
¡d
::
¡ršg
& 
šd’t
) {

4855 
Mes§ge
 
©Œibu‹s
;

4856 
	gi
 = 0; i < 
	g»suÉ
.
‹¡_´İ”ty_couÁ
(); ++i) {

4857 cÚ¡ 
	gTe¡Prİ”ty
& 
	g´İ”ty
 = 
»suÉ
.
G‘Te¡Prİ”ty
(
i
);

4858 
	g©Œibu‹s
 << ",\n" << 
	gšd’t
 << "\"" << 
	g´İ”ty
.
key
() << "\": "

4859 << "\"" << 
Esÿ³JsÚ
(
´İ”ty
.
v®ue
()) << "\"";

4861  
	g©Œibu‹s
.
G‘SŒšg
();

4866 #ià
GTEST_CAN_STREAM_RESULTS_


4873 
	g¡d
::
¡ršg
 
SŒ—mšgLi¡’”
::
U¾Encode
(cÚ¡ * 
¡r
) {

4874 
¡d
::
¡ršg
 
»suÉ
;

4875 
	g»suÉ
.
»£rve
(
¡¾’
(
¡r
) + 1);

4876 
	gch
 = *
¡r
; ch != '\0'; ch = *++str) {

4877 
ch
) {

4882 
»suÉ
.
­³nd
("%" + 
SŒšg
::
FÜm©By‹
(
¡©ic_ÿ¡
<>(
ch
)));

4885 
»suÉ
.
push_back
(
ch
);

4889  
	g»suÉ
;

4892 
	gSŒ—mšgLi¡’”
::
Sock‘Wr™”
::
MakeCÚÃùiÚ
() {

4893 
GTEST_CHECK_
(
sockfd_
 == -1)

4896 
addršfo
 
	ghšts
;

4897 
mem£t
(&
hšts
, 0, (hints));

4898 
	ghšts
.
	gai_çmy
 = 
AF_UNSPEC
;

4899 
	ghšts
.
	gai_sockty³
 = 
SOCK_STREAM
;

4900 
addršfo
* 
	g£rvšfo
 = 
nuÎ±r
;

4904 cÚ¡ 
	g”rÜ_num
 = 
g‘addršfo
(

4905 
ho¡_Çme_
.
c_¡r
(), 
pÜt_num_
.c_¡r(), &
hšts
, &
£rvšfo
);

4906 ià(
	g”rÜ_num
 != 0) {

4907 
GTEST_LOG_
(
WARNING
) << "stream_result_to: getaddrinfo() failed: "

4908 << 
gai_¡»¼Ü
(
”rÜ_num
);

4912 
addršfo
* 
	gcur_addr
 = 
£rvšfo
; 
	gsockfd_
 =ğ-1 && 
cur_addr
 !ğ
nuÎ±r
;

4913 
	gcur_addr
 = 
cur_addr
->
ai_Ãxt
) {

4914 
sockfd_
 = 
sock‘
(

4915 
cur_addr
->
ai_çmy
, cur_addr->
ai_sockty³
, cur_addr->
ai_´ÙocŞ
);

4916 ià(
	gsockfd_
 != -1) {

4918 ià(
cÚÃù
(
sockfd_
, 
cur_addr
->
ai_addr
, cur_addr->
ai_add¾’
) == -1) {

4919 
şo£
(
sockfd_
);

4920 
	gsockfd_
 = -1;

4925 
ä“addršfo
(
£rvšfo
);

4927 ià(
	gsockfd_
 == -1) {

4928 
GTEST_LOG_
(
WARNING
) << "stream_result_to: failedo connecto "

4929 << 
ho¡_Çme_
 << ":" << 
pÜt_num_
;

4938 cÚ¡ * cÚ¡ 
	gOsSckT¿ûG‘‹rIÁ”çû
::
kElidedF¿mesM¬k”
 =

4939 "... " 
GTEST_NAME_
 " internal frames ...";

4941 
	g¡d
::
¡ršg
 
OsSckT¿ûG‘‹r
::
Cu¼’tSckT¿û
(
max_d•th
, 
sk_couÁ
)

4942 
GTEST_LOCK_EXCLUDED_
(
mu‹x_
) {

4943 #ià
GTEST_HAS_ABSL


4944 
	g¡d
::
¡ršg
 
»suÉ
;

4946 ià(
	gmax_d•th
 <= 0) {

4947  
»suÉ
;

4950 
	gmax_d•th
 = 
¡d
::
mš
(
max_d•th
, 
kMaxSckT¿ûD•th
);

4952 
	g¡d
::
veùÜ
<*> 
¿w_¡ack
(
max_d•th
);

4954 cÚ¡ 
	g¿w_¡ack_size
 =

4955 
ab¦
::
G‘SckT¿û
(&
¿w_¡ack
[0], 
max_d•th
, 
sk_couÁ
 + 1);

4957 * 
	gÿÎ”_äame
 = 
nuÎ±r
;

4959 
Mu‹xLock
 
lock
(&
mu‹x_
);

4960 
	gÿÎ”_äame
 = 
ÿÎ”_äame_
;

4963 
	gi
 = 0; i < 
	g¿w_¡ack_size
; ++i) {

4964 ià(
	g¿w_¡ack
[
i
] =ğ
ÿÎ”_äame
 &&

4965 !
GTEST_FLAG
(
show_š‹º®_¡ack_äames
)) {

4967 
ab¦
::
SŒAµ’d
(&
»suÉ
, 
kElidedF¿mesM¬k”
, "\n");

4971 
	gtmp
[1024];

4972 cÚ¡ * 
	gsymbŞ
 = "(unknown)";

4973 ià(
	gab¦
::
SymbŞize
(
¿w_¡ack
[
i
], 
tmp
, (tmp))) {

4974 
	gsymbŞ
 = 
tmp
;

4977 
	glše
[1024];

4978 
¢´štf
(
lše
, Öše), " %p: %s\n", 
¿w_¡ack
[
i
], 
symbŞ
);

4979 
	g»suÉ
 +ğ
lše
;

4982  
	g»suÉ
;

4985 
	g¡©ic_ÿ¡
<>(
	gmax_d•th
);

4986 
	g¡©ic_ÿ¡
<>(
	gsk_couÁ
);

4991 
	gOsSckT¿ûG‘‹r
::
UpÚL—všgGTe¡
(è
GTEST_LOCK_EXCLUDED_
(
mu‹x_
) {

4992 #ià
GTEST_HAS_ABSL


4993 * 
ÿÎ”_äame
 = 
nuÎ±r
;

4994 ià(
	gab¦
::
G‘SckT¿û
(&
ÿÎ”_äame
, 1, 3) <= 0) {

4995 
ÿÎ”_äame
 = 
nuÎ±r
;

4998 
Mu‹xLock
 
lock
(&
mu‹x_
);

4999 
	gÿÎ”_äame_
 = 
ÿÎ”_äame
;

5005 şas 
	cScİedP»m©u»Ex™Fe
 {

5006 
	gpublic
:

5007 
ex¶ic™
 
ScİedP»m©u»Ex™Fe
(cÚ¡ * 
´em©u»_ex™_f•©h
)

5008 : 
´em©u»_ex™_f•©h_
(
´em©u»_ex™_f•©h
 ?

5009 
´em©u»_ex™_f•©h
 : "") {

5011 ià(!
´em©u»_ex™_f•©h_
.
em±y
()) {

5015 
FILE
* 
pfe
 = 
posix
::
FO³n
(
´em©u»_ex™_f•©h
, "w");

5016 
fwr™e
("0", 1, 1, 
pfe
);

5017 
fşo£
(
pfe
);

5021 ~
ScİedP»m©u»Ex™Fe
() {

5022 #ià!
defšed
 
GTEST_OS_ESP8266


5023 ià(!
	g´em©u»_ex™_f•©h_
.
em±y
()) {

5024 
	g»tv®
 = 
»move
(
´em©u»_ex™_f•©h_
.
c_¡r
());

5025 ià(
	g»tv®
) {

5026 
GTEST_LOG_
(
ERROR
) << "Failedo„emove…rematureƒxit filepath \""

5027 << 
	g´em©u»_ex™_f•©h_
 << "\" withƒrror "

5028 << 
	g»tv®
;

5034 
	g´iv©e
:

5035 cÚ¡ 
¡d
::
¡ršg
 
´em©u»_ex™_f•©h_
;

5037 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
ScİedP»m©u»Ex™Fe
);

5044 
	gTe¡Ev’tLi¡’”s
::
	$Te¡Ev’tLi¡’”s
()

5045 : 
	`»³©”_
(
Ãw
 
š‹º®
::
	`Te¡Ev’tR•—‹r
()),

5046 
	`deçuÉ_»suÉ_´š‹r_
(
nuÎ±r
),

5047 
	$deçuÉ_xml_g’”©Ü_
(
nuÎ±r
è{
	}
}

5049 
	gTe¡Ev’tLi¡’”s
::~
	$Te¡Ev’tLi¡’”s
(è{ 
d–‘e
 
»³©”_
; 
	}
}

5055 
	gTe¡Ev’tLi¡’”s
::
	$Aµ’d
(
Te¡Ev’tLi¡’”
* 
li¡’”
) {

5056 
»³©”_
->
	`Aµ’d
(
li¡’”
);

5057 
	}
}

5062 
Te¡Ev’tLi¡’”
* 
	gTe¡Ev’tLi¡’”s
::
	$R–—£
(
Te¡Ev’tLi¡’”
* 
li¡’”
) {

5063 ià(
li¡’”
 =ğ
deçuÉ_»suÉ_´š‹r_
)

5064 
deçuÉ_»suÉ_´š‹r_
 = 
nuÎ±r
;

5065 ià(
li¡’”
 =ğ
deçuÉ_xml_g’”©Ü_
)

5066 
deçuÉ_xml_g’”©Ü_
 = 
nuÎ±r
;

5067  
»³©”_
->
	`R–—£
(
li¡’”
);

5068 
	}
}

5072 
Te¡Ev’tLi¡’”
* 
	gTe¡Ev’tLi¡’”s
::
	$»³©”
(è{  
»³©”_
; 
	}
}

5079 
	gTe¡Ev’tLi¡’”s
::
	$S‘DeçuÉResuÉPrš‹r
(
Te¡Ev’tLi¡’”
* 
li¡’”
) {

5080 ià(
deçuÉ_»suÉ_´š‹r_
 !ğ
li¡’”
) {

5083 
d–‘e
 
	`R–—£
(
deçuÉ_»suÉ_´š‹r_
);

5084 
deçuÉ_»suÉ_´š‹r_
 = 
li¡’”
;

5085 ià(
li¡’”
 !ğ
nuÎ±r
è
	`Aµ’d
(listener);

5087 
	}
}

5094 
	gTe¡Ev’tLi¡’”s
::
	$S‘DeçuÉXmlG’”©Ü
(
Te¡Ev’tLi¡’”
* 
li¡’”
) {

5095 ià(
deçuÉ_xml_g’”©Ü_
 !ğ
li¡’”
) {

5098 
d–‘e
 
	`R–—£
(
deçuÉ_xml_g’”©Ü_
);

5099 
deçuÉ_xml_g’”©Ü_
 = 
li¡’”
;

5100 ià(
li¡’”
 !ğ
nuÎ±r
è
	`Aµ’d
(listener);

5102 
	}
}

5106 
boŞ
 
	gTe¡Ev’tLi¡’”s
::
	$Ev’tFÜw¬dšgEÇbËd
() const {

5107  
»³©”_
->
	`fÜw¬dšg_’abËd
();

5108 
	}
}

5110 
	gTe¡Ev’tLi¡’”s
::
	$Suµ»ssEv’tFÜw¬dšg
() {

5111 
»³©”_
->
	`£t_fÜw¬dšg_’abËd
(
çl£
);

5112 
	}
}

5123 
Un™Te¡
* 
	gUn™Te¡
::
	$G‘In¡ªû
() {

5128 #ià
	`defšed
(
__BORLANDC__
)

5129 
Un™Te¡
* cÚ¡ 
š¡ªû
 = 
Ãw
 UnitTest;

5130  
š¡ªû
;

5132 
Un™Te¡
 
š¡ªû
;

5133  &
š¡ªû
;

5135 
	}
}

5138 
	gUn™Te¡
::
	$sucûssful_‹¡_su™e_couÁ
() const {

5139  
	`im¶
()->
	`sucûssful_‹¡_su™e_couÁ
();

5140 
	}
}

5143 
	gUn™Te¡
::
	$çed_‹¡_su™e_couÁ
() const {

5144  
	`im¶
()->
	`çed_‹¡_su™e_couÁ
();

5145 
	}
}

5148 
	gUn™Te¡
::
	$tÙ®_‹¡_su™e_couÁ
() const {

5149  
	`im¶
()->
	`tÙ®_‹¡_su™e_couÁ
();

5150 
	}
}

5154 
	gUn™Te¡
::
	$‹¡_su™e_to_run_couÁ
() const {

5155  
	`im¶
()->
	`‹¡_su™e_to_run_couÁ
();

5156 
	}
}

5159 #iâdeà
GTEST_REMOVE_LEGACY_TEST_CASEAPI_


5160 
	gUn™Te¡
::
	$sucûssful_‹¡_ÿ£_couÁ
() const {

5161  
	`im¶
()->
	`sucûssful_‹¡_su™e_couÁ
();

5162 
	}
}

5163 
	gUn™Te¡
::
	$çed_‹¡_ÿ£_couÁ
() const {

5164  
	`im¶
()->
	`çed_‹¡_su™e_couÁ
();

5165 
	}
}

5166 
	gUn™Te¡
::
	$tÙ®_‹¡_ÿ£_couÁ
() const {

5167  
	`im¶
()->
	`tÙ®_‹¡_su™e_couÁ
();

5168 
	}
}

5169 
	gUn™Te¡
::
	$‹¡_ÿ£_to_run_couÁ
() const {

5170  
	`im¶
()->
	`‹¡_su™e_to_run_couÁ
();

5171 
	}
}

5175 
	gUn™Te¡
::
	$sucûssful_‹¡_couÁ
() const {

5176  
	`im¶
()->
	`sucûssful_‹¡_couÁ
();

5177 
	}
}

5180 
	gUn™Te¡
::
	$sk³d_‹¡_couÁ
() const {

5181  
	`im¶
()->
	`sk³d_‹¡_couÁ
();

5182 
	}
}

5185 
	gUn™Te¡
::
	$çed_‹¡_couÁ
(ècÚ¡ {  
	`im¶
()->
	`çed_‹¡_couÁ
(); 
	}
}

5188 
	gUn™Te¡
::
	$»pÜbË_di§bËd_‹¡_couÁ
() const {

5189  
	`im¶
()->
	`»pÜbË_di§bËd_‹¡_couÁ
();

5190 
	}
}

5193 
	gUn™Te¡
::
	$di§bËd_‹¡_couÁ
() const {

5194  
	`im¶
()->
	`di§bËd_‹¡_couÁ
();

5195 
	}
}

5198 
	gUn™Te¡
::
	$»pÜbË_‹¡_couÁ
() const {

5199  
	`im¶
()->
	`»pÜbË_‹¡_couÁ
();

5200 
	}
}

5203 
	gUn™Te¡
::
	$tÙ®_‹¡_couÁ
(ècÚ¡ {  
	`im¶
()->
	`tÙ®_‹¡_couÁ
(); 
	}
}

5206 
	gUn™Te¡
::
	$‹¡_to_run_couÁ
(ècÚ¡ {  
	`im¶
()->
	`‹¡_to_run_couÁ
(); 
	}
}

5210 
	gš‹º®
::
TimeInMlis
 
Un™Te¡
::
	$¡¬t_time¡amp
() const {

5211  
	`im¶
()->
	`¡¬t_time¡amp
();

5212 
	}
}

5215 
	gš‹º®
::
TimeInMlis
 
Un™Te¡
::
	$–­£d_time
() const {

5216  
	`im¶
()->
	`–­£d_time
();

5217 
	}
}

5221 
boŞ
 
	gUn™Te¡
::
	$Pas£d
(ècÚ¡ {  
	`im¶
()->
	`Pas£d
(); 
	}
}

5225 
boŞ
 
	gUn™Te¡
::
	$Faed
(ècÚ¡ {  
	`im¶
()->
	`Faed
(); 
	}
}

5229 cÚ¡ 
Te¡Su™e
* 
	gUn™Te¡
::
	$G‘Te¡Su™e
(
i
) const {

5230  
	`im¶
()->
	`G‘Te¡Su™e
(
i
);

5231 
	}
}

5234 #iâdeà
GTEST_REMOVE_LEGACY_TEST_CASEAPI_


5235 cÚ¡ 
Te¡Ca£
* 
	gUn™Te¡
::
	$G‘Te¡Ca£
(
i
) const {

5236  
	`im¶
()->
	`G‘Te¡Ca£
(
i
);

5237 
	}
}

5242 cÚ¡ 
	gTe¡ResuÉ
& 
	gUn™Te¡
::
	$ad_hoc_‹¡_»suÉ
() const {

5243  *
	`im¶
()->
	`ad_hoc_‹¡_»suÉ
();

5244 
	}
}

5248 
Te¡Su™e
* 
	gUn™Te¡
::
	$G‘MubËTe¡Su™e
(
i
) {

5249  
	`im¶
()->
	`G‘MubËSu™eCa£
(
i
);

5250 
	}
}

5254 
	gTe¡Ev’tLi¡’”s
& 
	gUn™Te¡
::
	$li¡’”s
() {

5255  *
	`im¶
()->
	`li¡’”s
();

5256 
	}
}

5268 
EnvœÚm’t
* 
	gUn™Te¡
::
	$AddEnvœÚm’t
(
EnvœÚm’t
* 
’v
) {

5269 ià(
’v
 =ğ
nuÎ±r
) {

5270  
nuÎ±r
;

5273 
im¶_
->
	`’vœÚm’ts
().
	`push_back
(
’v
);

5274  
’v
;

5275 
	}
}

5281 
	gUn™Te¡
::
	$AddTe¡P¬tResuÉ
(

5282 
Te¡P¬tResuÉ
::
Ty³
 
»suÉ_ty³
,

5283 cÚ¡ * 
fe_Çme
,

5284 
lše_numb”
,

5285 cÚ¡ 
¡d
::
¡ršg
& 
mes§ge
,

5286 cÚ¡ 
¡d
::
¡ršg
& 
os_¡ack_Œaû
è
	$GTEST_LOCK_EXCLUDED_
(
mu‹x_
) {

5287 
Mes§ge
 
msg
;

5288 
msg
 << 
mes§ge
;

5290 
š‹º®
::
Mu‹xLock
 
	`lock
(&
mu‹x_
);

5291 ià(
im¶_
->
	`g‹¡_Œaû_¡ack
().
	`size
() > 0) {

5292 
msg
 << "\n" << 
GTEST_NAME_
 << "race:";

5294 
size_t
 
i
 = 
im¶_
->
	`g‹¡_Œaû_¡ack
().
	`size
(); i > 0; --i) {

5295 cÚ¡ 
š‹º®
::
T¿ûInfo
& 
Œaû
 = 
im¶_
->
	`g‹¡_Œaû_¡ack
()[
i
 - 1];

5296 
msg
 << "\n" << 
š‹º®
::
	`FÜm©FeLoÿtiÚ
(
Œaû
.
fe
,¿û.
lše
)

5297 << " " << 
Œaû
.
mes§ge
;

5301 ià(
os_¡ack_Œaû
.
	`c_¡r
(è!ğ
nuÎ±r
 && !os_¡ack_Œaû.
	`em±y
()) {

5302 
msg
 << 
š‹º®
::
kSckT¿ûM¬k”
 << 
os_¡ack_Œaû
;

5305 cÚ¡ 
Te¡P¬tResuÉ
 
»suÉ
 = 
	`Te¡P¬tResuÉ
(

5306 
»suÉ_ty³
, 
fe_Çme
, 
lše_numb”
, 
msg
.
	`G‘SŒšg
().
	`c_¡r
());

5307 
im¶_
->
	`G‘Te¡P¬tResuÉR•Ü‹rFÜCu¼’tTh»ad
()->

5308 
	`R•ÜtTe¡P¬tResuÉ
(
»suÉ
);

5310 ià(
»suÉ_ty³
 !ğ
Te¡P¬tResuÉ
::
kSucûss
 &&

5311 
»suÉ_ty³
 !ğ
Te¡P¬tResuÉ
::
kSk
) {

5317 ià(
	`GTEST_FLAG
(
b»ak_Ú_çu»
)) {

5318 #ià
GTEST_OS_WINDOWS
 && !
GTEST_OS_WINDOWS_PHONE
 && !
GTEST_OS_WINDOWS_RT


5322 
	`DebugB»ak
();

5323 #–ià(!
	`defšed
(
__Çtive_ş›Á__
)) && \

5324 ((
	`defšed
(
__şªg__
è|| defšed(
__GNUC__
)) && \

5325 (
	`defšed
(
__x86_64__
è|| defšed(
__i386__
)))

5327 
	`asm
("int3");

5332 *
¡©ic_ÿ¡
<vŞ©*>(
nuÎ±r
) = 1;

5334 } ià(
	`GTEST_FLAG
(
throw_Ú_çu»
)) {

5335 #ià
GTEST_HAS_EXCEPTIONS


5336 
throw
 
š‹º®
::
	`GoogËTe¡Fau»Exû±iÚ
(
»suÉ
);

5340 
	`ex™
(1);

5344 
	}
}

5351 
	gUn™Te¡
::
	$RecÜdPrİ”ty
(cÚ¡ 
¡d
::
¡ršg
& 
key
,

5352 cÚ¡ 
¡d
::
¡ršg
& 
v®ue
) {

5353 
im¶_
->
	`RecÜdPrİ”ty
(
	`Te¡Prİ”ty
(
key
, 
v®ue
));

5354 
	}
}

5361 
	gUn™Te¡
::
	$Run
() {

5362 cÚ¡ 
boŞ
 
š_d—th_‹¡_chd_´oûss
 =

5363 
š‹º®
::
	`GTEST_FLAG
(
š‹º®_run_d—th_‹¡
).
	`Ëngth
() > 0;

5386 cÚ¡ 
š‹º®
::
ScİedP»m©u»Ex™Fe
 
	`´em©u»_ex™_fe
(

5387 
š_d—th_‹¡_chd_´oûss


5388 ? 
nuÎ±r


5389 : 
š‹º®
::
posix
::
	`G‘Env
("TEST_PREMATURE_EXIT_FILE"));

5393 
	`im¶
()->
	`£t_ÿtch_exû±iÚs
(
	`GTEST_FLAG
(
ÿtch_exû±iÚs
));

5395 #ià
GTEST_OS_WINDOWS


5400 ià(
	`im¶
()->
	`ÿtch_exû±iÚs
(è|| 
š_d—th_‹¡_chd_´oûss
) {

5401 #ià!
GTEST_OS_WINDOWS_MOBILE
 && !
GTEST_OS_WINDOWS_PHONE
 && !
GTEST_OS_WINDOWS_RT


5403 
	`S‘E¼ÜMode
(
SEM_FAILCRITICALERRORS
 | 
SEM_NOALIGNMENTFAULTEXCEPT
 |

5404 
SEM_NOGPFAULTERRORBOX
 | 
SEM_NOOPENFILEERRORBOX
);

5407 #ià(
	`defšed
(
_MSC_VER
è|| 
GTEST_OS_WINDOWS_MINGW
è&& !
GTEST_OS_WINDOWS_MOBILE


5411 
	`_£t_”rÜ_mode
(
_OUT_TO_STDERR
);

5414 #ià
	`defšed
(
_MSC_VER
è&& !
GTEST_OS_WINDOWS_MOBILE


5420 ià(!
	`GTEST_FLAG
(
b»ak_Ú_çu»
))

5421 
	`_£t_abÜt_behaviÜ
(

5423 
_WRITE_ABORT_MSG
 | 
_CALL_REPORTFAULT
);

5429 ià(!
	`IsDebugg”P»£Á
()) {

5430 ()
	`_C¹S‘R•ÜtMode
(
_CRT_ASSERT
,

5431 
_CRTDBG_MODE_FILE
 | 
_CRTDBG_MODE_DEBUG
);

5432 ()
	`_C¹S‘R•ÜtFe
(
_CRT_ASSERT
, 
_CRTDBG_FILE_STDERR
);

5438  
š‹º®
::
	`HªdËExû±iÚsInM‘hodIfSuµÜ‹d
(

5439 
	`im¶
(),

5440 &
š‹º®
::
Un™Te¡Im¶
::
RunAÎTe¡s
,

5442 
	}
}

5446 cÚ¡ * 
	gUn™Te¡
::
	$Üigš®_wÜkšg_dœ
() const {

5447  
im¶_
->
Üigš®_wÜkšg_dœ_
.
	`c_¡r
();

5448 
	}
}

5452 cÚ¡ 
Te¡Su™e
* 
	gUn™Te¡
::
	$cu¼’t_‹¡_su™e
() const

5453 
	$GTEST_LOCK_EXCLUDED_
(
mu‹x_
) {

5454 
š‹º®
::
Mu‹xLock
 
	`lock
(&
mu‹x_
);

5455  
im¶_
->
	`cu¼’t_‹¡_su™e
();

5456 
	}
}

5459 #iâdeà
GTEST_REMOVE_LEGACY_TEST_CASEAPI_


5460 cÚ¡ 
Te¡Ca£
* 
	gUn™Te¡
::
	$cu¼’t_‹¡_ÿ£
() const

5461 
	$GTEST_LOCK_EXCLUDED_
(
mu‹x_
) {

5462 
š‹º®
::
Mu‹xLock
 
	`lock
(&
mu‹x_
);

5463  
im¶_
->
	`cu¼’t_‹¡_su™e
();

5464 
	}
}

5469 cÚ¡ 
Te¡Info
* 
	gUn™Te¡
::
	$cu¼’t_‹¡_šfo
() const

5470 
	$GTEST_LOCK_EXCLUDED_
(
mu‹x_
) {

5471 
š‹º®
::
Mu‹xLock
 
	`lock
(&
mu‹x_
);

5472  
im¶_
->
	`cu¼’t_‹¡_šfo
();

5473 
	}
}

5476 
	gUn™Te¡
::
	$¿ndom_£ed
(ècÚ¡ {  
im¶_
->
	`¿ndom_£ed
(); 
	}
}

5480 
	gš‹º®
::
P¬am‘”izedTe¡Su™eRegi¡ry
&

5481 
Un™Te¡
::
	$·¿m‘”ized_‹¡_»gi¡ry
(è
	$GTEST_LOCK_EXCLUDED_
(
mu‹x_
) {

5482  
im¶_
->
	`·¿m‘”ized_‹¡_»gi¡ry
();

5483 
	}
}

5486 
	gUn™Te¡
::
	$Un™Te¡
() {

5487 
im¶_
 = 
Ãw
 
š‹º®
::
	`Un™Te¡Im¶
(
this
);

5488 
	}
}

5491 
	gUn™Te¡
::~
	$Un™Te¡
() {

5492 
d–‘e
 
im¶_
;

5493 
	}
}

5497 
	gUn™Te¡
::
	$PushGTe¡T¿û
(cÚ¡ 
š‹º®
::
T¿ûInfo
& 
Œaû
)

5498 
	$GTEST_LOCK_EXCLUDED_
(
mu‹x_
) {

5499 
š‹º®
::
Mu‹xLock
 
	`lock
(&
mu‹x_
);

5500 
im¶_
->
	`g‹¡_Œaû_¡ack
().
	`push_back
(
Œaû
);

5501 
	}
}

5504 
	gUn™Te¡
::
	$PİGTe¡T¿û
()

5505 
	$GTEST_LOCK_EXCLUDED_
(
mu‹x_
) {

5506 
š‹º®
::
Mu‹xLock
 
	`lock
(&
mu‹x_
);

5507 
im¶_
->
	`g‹¡_Œaû_¡ack
().
	`pİ_back
();

5508 
	}
}

5510 
Çme¥aû
 
	gš‹º®
 {

5512 
	gUn™Te¡Im¶
::
Un™Te¡Im¶
(
Un™Te¡
* 
·»Á
)

5513 : 
·»Á_
(
·»Á
),

5514 
GTEST_DISABLE_MSC_WARNINGS_PUSH_
(4355 )

5515 
deçuÉ_glob®_‹¡_·¹_»suÉ_»pÜ‹r_
(
this
),

5516 
deçuÉ_³r_th»ad_‹¡_·¹_»suÉ_»pÜ‹r_
(
this
),

5517 
GTEST_DISABLE_MSC_WARNINGS_POP_
(è
glob®_‹¡_·¹_»suÉ_»pÙ”_
(

5518 &
deçuÉ_glob®_‹¡_·¹_»suÉ_»pÜ‹r_
),

5519 
³r_th»ad_‹¡_·¹_»suÉ_»pÜ‹r_
(

5520 &
deçuÉ_³r_th»ad_‹¡_·¹_»suÉ_»pÜ‹r_
),

5521 
·¿m‘”ized_‹¡_»gi¡ry_
(),

5522 
·¿m‘”ized_‹¡s_»gi¡”ed_
(
çl£
),

5523 
Ï¡_d—th_‹¡_su™e_
(-1),

5524 
cu¼’t_‹¡_su™e_
(
nuÎ±r
),

5525 
cu¼’t_‹¡_šfo_
(
nuÎ±r
),

5526 
ad_hoc_‹¡_»suÉ_
(),

5527 
os_¡ack_Œaû_g‘‹r_
(
nuÎ±r
),

5528 
po¡_æag_·r£_š™_³rfÜmed_
(
çl£
),

5529 
¿ndom_£ed_
(0),

5530 
¿ndom_
(0),

5531 
¡¬t_time¡amp_
(0),

5532 
–­£d_time_
(0),

5533 #ià
GTEST_HAS_DEATH_TEST


5534 
d—th_‹¡_çùÜy_
(
Ãw
 
DeçuÉD—thTe¡FaùÜy
),

5537 
ÿtch_exû±iÚs_
(
çl£
) {

5538 
li¡’”s
()->
S‘DeçuÉResuÉPrš‹r
(
Ãw
 
P»‰yUn™Te¡ResuÉPrš‹r
);

5541 
	gUn™Te¡Im¶
::~
Un™Te¡Im¶
() {

5543 
FÜEach
(
‹¡_su™es_
, 
š‹º®
::
D–‘e
<
Te¡Su™e
>);

5546 
FÜEach
(
’vœÚm’ts_
, 
š‹º®
::
D–‘e
<
EnvœÚm’t
>);

5548 
d–‘e
 
	gos_¡ack_Œaû_g‘‹r_
;

5556 
	gUn™Te¡Im¶
::
RecÜdPrİ”ty
(cÚ¡ 
Te¡Prİ”ty
& 
‹¡_´İ”ty
) {

5557 
¡d
::
¡ršg
 
xml_–em’t
;

5558 
Te¡ResuÉ
* 
	g‹¡_»suÉ
;

5560 ià(
	gcu¼’t_‹¡_šfo_
 !ğ
nuÎ±r
) {

5561 
xml_–em’t
 = "testcase";

5562 
	g‹¡_»suÉ
 = &(
cu¼’t_‹¡_šfo_
->
»suÉ_
);

5563 } ià(
	gcu¼’t_‹¡_su™e_
 !ğ
nuÎ±r
) {

5564 
xml_–em’t
 = "testsuite";

5565 
	g‹¡_»suÉ
 = &(
cu¼’t_‹¡_su™e_
->
ad_hoc_‹¡_»suÉ_
);

5567 
	gxml_–em’t
 = "testsuites";

5568 
	g‹¡_»suÉ
 = &
ad_hoc_‹¡_»suÉ_
;

5570 
	g‹¡_»suÉ
->
RecÜdPrİ”ty
(
xml_–em’t
, 
‹¡_´İ”ty
);

5573 #ià
GTEST_HAS_DEATH_TEST


5576 
	gUn™Te¡Im¶
::
Suµ»ssTe¡Ev’tsIfInSub´oûss
() {

5577 ià(
š‹º®_run_d—th_‹¡_æag_
.
g‘
(è!ğ
nuÎ±r
)

5578 
li¡’”s
()->
Suµ»ssEv’tFÜw¬dšg
();

5584 
	gUn™Te¡Im¶
::
CÚfigu»XmlOuut
() {

5585 cÚ¡ 
¡d
::
¡ršg
& 
ouut_fÜm©
 = 
Un™Te¡O±iÚs
::
G‘OuutFÜm©
();

5586 ià(
	gouut_fÜm©
 == "xml") {

5587 
li¡’”s
()->
S‘DeçuÉXmlG’”©Ü
(
Ãw
 
XmlUn™Te¡ResuÉPrš‹r
(

5588 
Un™Te¡O±iÚs
::
G‘AbsŞu‹P©hToOuutFe
().
c_¡r
()));

5589 } ià(
	gouut_fÜm©
 == "json") {

5590 
li¡’”s
()->
S‘DeçuÉXmlG’”©Ü
(
Ãw
 
JsÚUn™Te¡ResuÉPrš‹r
(

5591 
Un™Te¡O±iÚs
::
G‘AbsŞu‹P©hToOuutFe
().
c_¡r
()));

5592 } ià(
	gouut_fÜm©
 != "") {

5593 
GTEST_LOG_
(
WARNING
) << "WARNING: unrecognized output format \""

5594 << 
ouut_fÜm©
 << "\" ignored.";

5598 #ià
GTEST_CAN_STREAM_RESULTS_


5601 
	gUn™Te¡Im¶
::
CÚfigu»SŒ—mšgOuut
() {

5602 cÚ¡ 
¡d
::
¡ršg
& 
rg‘
 = 
GTEST_FLAG
(
¡»am_»suÉ_to
);

5603 ià(!
	grg‘
.
em±y
()) {

5604 cÚ¡ 
size_t
 
	gpos
 = 
rg‘
.
fšd
(':');

5605 ià(
	gpos
 !ğ
¡d
::
¡ršg
::
Åos
) {

5606 
li¡’”s
()->
Aµ’d
(
Ãw
 
SŒ—mšgLi¡’”
(
rg‘
.
sub¡r
(0, 
pos
),

5607 
rg‘
.
sub¡r
(
pos
+1)));

5609 
GTEST_LOG_
(
WARNING
è<< "uÄecognized sŒ—mšg¬g‘ \"" << 
	grg‘


5621 
	gUn™Te¡Im¶
::
Po¡FÏgP¬sšgIn™
() {

5623 ià(!
po¡_æag_·r£_š™_³rfÜmed_
) {

5624 
po¡_æag_·r£_š™_³rfÜmed_
 = 
Œue
;

5626 #ià
defšed
(
GTEST_CUSTOM_TEST_EVENT_LISTENER_
)

5628 
li¡’”s
()->
Aµ’d
(
Ãw
 
GTEST_CUSTOM_TEST_EVENT_LISTENER_
());

5631 #ià
GTEST_HAS_DEATH_TEST


5632 
In™D—thTe¡Sub´oûssCÚŒŞInfo
();

5633 
Suµ»ssTe¡Ev’tsIfInSub´oûss
();

5639 
Regi¡”P¬am‘”izedTe¡s
();

5643 
CÚfigu»XmlOuut
();

5645 ià(
GTEST_FLAG
(
br›f
)) {

5646 
li¡’”s
()->
S‘DeçuÉResuÉPrš‹r
(
Ãw
 
Br›fUn™Te¡ResuÉPrš‹r
);

5649 #ià
GTEST_CAN_STREAM_RESULTS_


5651 
CÚfigu»SŒ—mšgOuut
();

5654 #ià
GTEST_HAS_ABSL


5655 ià(
GTEST_FLAG
(
š¡®l_çu»_sigÇl_hªdËr
)) {

5656 
	gab¦
::
Fau»SigÇlHªdËrO±iÚs
 
İtiÚs
;

5657 
	gab¦
::
In¡®lFau»SigÇlHªdËr
(
İtiÚs
);

5671 şas 
	cTe¡Su™eNameIs
 {

5672 
	gpublic
:

5674 
ex¶ic™
 
Te¡Su™eNameIs
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
è: 
Çme_
(name) {}

5677 
boŞ
 
İ”©Ü
()(cÚ¡ 
Te¡Su™e
* 
‹¡_su™e
) const {

5678  
‹¡_su™e
 !ğ
nuÎ±r
 &&

5679 
¡rcmp
(
‹¡_su™e
->
Çme
(), 
Çme_
.
c_¡r
()) == 0;

5682 
	g´iv©e
:

5683 
¡d
::
¡ršg
 
Çme_
;

5698 
Te¡Su™e
* 
	gUn™Te¡Im¶
::
G‘Te¡Su™e
(

5699 cÚ¡ * 
‹¡_su™e_Çme
, cÚ¡ * 
ty³_·¿m
,

5700 
š‹º®
::
S‘UpTe¡Su™eFunc
 
£t_up_tc
,

5701 
š‹º®
::
T—rDownTe¡Su™eFunc
 
‹¬_down_tc
) {

5703 cÚ¡‡utØ
‹¡_su™e
 =

5704 
¡d
::
fšd_if
(
‹¡_su™es_
.
rbegš
(),e¡_su™es_.
»nd
(),

5705 
Te¡Su™eNameIs
(
‹¡_su™e_Çme
));

5707 ià(
	g‹¡_su™e
 !ğ
‹¡_su™es_
.
»nd
()è *
‹¡_su™e
;

5710 auto* cÚ¡ 
	gÃw_‹¡_su™e
 =

5711 
Ãw
 
Te¡Su™e
(
‹¡_su™e_Çme
, 
ty³_·¿m
, 
£t_up_tc
, 
‹¬_down_tc
);

5714 ià(
	gš‹º®
::
Un™Te¡O±iÚs
::
M©chesF‹r
(
‹¡_su™e_Çme
,

5715 
kD—thTe¡Su™eF‹r
)) {

5720 ++
	gÏ¡_d—th_‹¡_su™e_
;

5721 
	g‹¡_su™es_
.
š£¹
(
‹¡_su™es_
.
begš
(è+ 
Ï¡_d—th_‹¡_su™e_
,

5722 
Ãw_‹¡_su™e
);

5725 
	g‹¡_su™es_
.
push_back
(
Ãw_‹¡_su™e
);

5728 
	g‹¡_su™e_šdiûs_
.
push_back
(
¡©ic_ÿ¡
<>(
‹¡_su™e_šdiûs_
.
size
()));

5729  
	gÃw_‹¡_su™e
;

5734 
S‘UpEnvœÚm’t
(
EnvœÚm’t
* 
’v
è{ 
	g’v
->
S‘Up
(); }

5735 
T—rDownEnvœÚm’t
(
EnvœÚm’t
* 
’v
è{ 
	g’v
->
T—rDown
(); }

5746 
boŞ
 
	gUn™Te¡Im¶
::
RunAÎTe¡s
() {

5749 cÚ¡ 
boŞ
 
g‹¡_is_š™Ÿlized_befÜe_run_®l_‹¡s
 = 
GTe¡IsIn™Ÿlized
();

5752 ià(
	gg_h–p_æag
)

5753  
	gŒue
;

5757 
Po¡FÏgP¬sšgIn™
();

5762 
	gš‹º®
::
Wr™eToSh¬dStusFeIfN“ded
();

5766 
boŞ
 
	gš_sub´oûss_fÜ_d—th_‹¡
 = 
çl£
;

5768 #ià
GTEST_HAS_DEATH_TEST


5769 
	gš_sub´oûss_fÜ_d—th_‹¡
 =

5770 (
š‹º®_run_d—th_‹¡_æag_
.
g‘
(è!ğ
nuÎ±r
);

5771 #ià
defšed
(
GTEST_EXTRA_DEATH_TEST_CHILD_SETUP_
)

5772 ià(
	gš_sub´oûss_fÜ_d—th_‹¡
) {

5773 
GTEST_EXTRA_DEATH_TEST_CHILD_SETUP_
();

5778 cÚ¡ 
boŞ
 
	gshould_sh¬d
 = 
ShouldSh¬d
(
kTe¡TÙ®Sh¬ds
, 
kTe¡Sh¬dIndex
,

5779 
š_sub´oûss_fÜ_d—th_‹¡
);

5783 cÚ¡ 
boŞ
 
	ghas_‹¡s_to_run
 = 
F‹rTe¡s
(
should_sh¬d


5784 ? 
HONOR_SHARDING_PROTOCOL


5785 : 
IGNORE_SHARDING_PROTOCOL
) > 0;

5788 ià(
GTEST_FLAG
(
li¡_‹¡s
)) {

5790 
Li¡Te¡sM©chšgF‹r
();

5791  
	gŒue
;

5794 
	g¿ndom_£ed_
 = 
GTEST_FLAG
(
shufæe
) ?

5795 
G‘RªdomS“dFromFÏg
(
GTEST_FLAG
(
¿ndom_£ed
)) : 0;

5798 
boŞ
 
	gçed
 = 
çl£
;

5800 
Te¡Ev’tLi¡’”
* 
	g»³©”
 = 
li¡’”s
()->
»³©”
();

5802 
	g¡¬t_time¡amp_
 = 
G‘TimeInMlis
();

5803 
	g»³©”
->
OnTe¡Prog¿mS¹
(*
·»Á_
);

5807 cÚ¡ 
	g»³©
 = 
š_sub´oûss_fÜ_d—th_‹¡
 ? 1 : 
GTEST_FLAG
(
»³©
);

5809 cÚ¡ 
boŞ
 
	gg‹¡_»³©_fÜev”
 = 
»³©
 < 0;

5810 
	gi
 = 0; 
	gg‹¡_»³©_fÜev”
 || i !ğ
»³©
; i++) {

5813 
CË¬NÚAdHocTe¡ResuÉ
();

5815 
Tim”
 
	gtim”
;

5818 ià(
	ghas_‹¡s_to_run
 && 
GTEST_FLAG
(
shufæe
)) {

5819 
¿ndom
()->
Re£ed
(
¡©ic_ÿ¡
<
ušt32_t
>(
¿ndom_£ed_
));

5823 
ShufæeTe¡s
();

5827 
	g»³©”
->
OnTe¡I‹¿tiÚS¹
(*
·»Á_
, 
i
);

5830 ià(
	ghas_‹¡s_to_run
) {

5832 
	g»³©”
->
OnEnvœÚm’tsS‘UpS¹
(*
·»Á_
);

5833 
FÜEach
(
’vœÚm’ts_
, 
S‘UpEnvœÚm’t
);

5834 
	g»³©”
->
OnEnvœÚm’tsS‘UpEnd
(*
·»Á_
);

5838 ià(
	gTe¡
::
IsSk³d
()) {

5841 
Te¡ResuÉ
& 
‹¡_»suÉ
 =

5842 *
š‹º®
::
G‘Un™Te¡Im¶
()->
cu¼’t_‹¡_»suÉ
();

5843 
	gj
 = 0; j < 
	g‹¡_»suÉ
.
tÙ®_·¹_couÁ
(); ++j) {

5844 cÚ¡ 
	gTe¡P¬tResuÉ
& 
	g‹¡_·¹_»suÉ
 =

5845 
‹¡_»suÉ
.
G‘Te¡P¬tResuÉ
(
j
);

5846 ià(
	g‹¡_·¹_»suÉ
.
ty³
(è=ğ
Te¡P¬tResuÉ
::
kSk
) {

5847 cÚ¡ 
¡d
::
¡ršg
& 
»suÉ
 = 
‹¡_·¹_»suÉ
.
mes§ge
();

5848 
´štf
("%s\n", 
»suÉ
.
c_¡r
());

5851 
fæush
(
¡dout
);

5852 } ià(!
	gTe¡
::
HasF©®Fau»
()) {

5853 
‹¡_šdex
 = 0; 
	g‹¡_šdex
 < 
tÙ®_‹¡_su™e_couÁ
();

5854 
	g‹¡_šdex
++) {

5855 
G‘MubËSu™eCa£
(
‹¡_šdex
)->
Run
();

5856 ià(
GTEST_FLAG
(
ç_ç¡
) &&

5857 
G‘MubËSu™eCa£
(
‹¡_šdex
)->
Faed
()) {

5858 
	gj
 = 
‹¡_šdex
 + 1; j < 
tÙ®_‹¡_su™e_couÁ
(); j++) {

5859 
G‘MubËSu™eCa£
(
j
)->
Sk
();

5864 } ià(
	gTe¡
::
HasF©®Fau»
()) {

5868 
‹¡_šdex
 = 0; 
	g‹¡_šdex
 < 
tÙ®_‹¡_su™e_couÁ
();

5869 
	g‹¡_šdex
++) {

5870 
G‘MubËSu™eCa£
(
‹¡_šdex
)->
Sk
();

5875 
	g»³©”
->
OnEnvœÚm’tsT—rDownS¹
(*
·»Á_
);

5876 
	g¡d
::
fÜ_—ch
(
’vœÚm’ts_
.
rbegš
(),ƒnvœÚm’ts_.
»nd
(),

5877 
T—rDownEnvœÚm’t
);

5878 
	g»³©”
->
OnEnvœÚm’tsT—rDownEnd
(*
·»Á_
);

5881 
	g–­£d_time_
 = 
tim”
.
EÏp£d
();

5884 
	g»³©”
->
OnTe¡I‹¿tiÚEnd
(*
·»Á_
, 
i
);

5887 ià(!
Pas£d
()) {

5888 
	gçed
 = 
Œue
;

5897 
UnshufæeTe¡s
();

5899 ià(
GTEST_FLAG
(
shufæe
)) {

5901 
	g¿ndom_£ed_
 = 
G‘NextRªdomS“d
(
¿ndom_£ed_
);

5905 
	g»³©”
->
OnTe¡Prog¿mEnd
(*
·»Á_
);

5907 ià(!
	gg‹¡_is_š™Ÿlized_befÜe_run_®l_‹¡s
) {

5908 
CŞÜedPrštf
(

5909 
GTe¡CŞÜ
::
kRed
,

5911 "Thi ‹¡…rog¿m did NOT c®È" 
GTEST_INIT_GOOGLE_TEST_NAME_


5912 "(èbefÜÿÎšg RUN_ALL_TESTS(). Thi i INVALID. SoÚ " 
GTEST_NAME_


5915 #ià
GTEST_FOR_GOOGLE_


5916 
CŞÜedPrštf
(
GTe¡CŞÜ
::
kRed
,

5921  !
	gçed
;

5928 
Wr™eToSh¬dStusFeIfN“ded
() {

5929 cÚ¡ * cÚ¡ 
	g‹¡_sh¬d_fe
 = 
posix
::
G‘Env
(
kTe¡Sh¬dStusFe
);

5930 ià(
	g‹¡_sh¬d_fe
 !ğ
nuÎ±r
) {

5931 
FILE
* cÚ¡ 
fe
 = 
posix
::
FO³n
(
‹¡_sh¬d_fe
, "w");

5932 ià(
	gfe
 =ğ
nuÎ±r
) {

5933 
CŞÜedPrštf
(
GTe¡CŞÜ
::
kRed
,

5936 
‹¡_sh¬d_fe
, 
kTe¡Sh¬dStusFe
);

5937 
fæush
(
¡dout
);

5938 
ex™
(
EXIT_FAILURE
);

5940 
fşo£
(
fe
);

5950 
boŞ
 
ShouldSh¬d
(cÚ¡ * 
tÙ®_sh¬ds_’v
,

5951 cÚ¡ * 
sh¬d_šdex_’v
,

5952 
boŞ
 
š_sub´oûss_fÜ_d—th_‹¡
) {

5953 ià(
	gš_sub´oûss_fÜ_d—th_‹¡
) {

5954  
	gçl£
;

5957 cÚ¡ 
št32_t
 
	gtÙ®_sh¬ds
 = 
IÁ32FromEnvOrD›
(
tÙ®_sh¬ds_’v
, -1);

5958 cÚ¡ 
št32_t
 
	gsh¬d_šdex
 = 
IÁ32FromEnvOrD›
(
sh¬d_šdex_’v
, -1);

5960 ià(
	gtÙ®_sh¬ds
 =ğ-1 && 
sh¬d_šdex
 == -1) {

5961  
çl£
;

5962 } ià(
	gtÙ®_sh¬ds
 =ğ-1 && 
sh¬d_šdex
 != -1) {

5963 cÚ¡ 
Mes§ge
 
msg
 = Message()

5965 << 
kTe¡Sh¬dIndex
 << " = " << 
sh¬d_šdex


5966 << ", buˆhavËá " << 
kTe¡TÙ®Sh¬ds
 << " unset.\n";

5967 
CŞÜedPrštf
(
GTe¡CŞÜ
::
kRed
, "%s", 
msg
.
G‘SŒšg
().
c_¡r
());

5968 
fæush
(
¡dout
);

5969 
ex™
(
EXIT_FAILURE
);

5970 } ià(
	gtÙ®_sh¬ds
 !ğ-1 && 
sh¬d_šdex
 == -1) {

5971 cÚ¡ 
Mes§ge
 
msg
 = Message()

5973 << 
kTe¡TÙ®Sh¬ds
 << " = " << 
tÙ®_sh¬ds


5974 << ", buˆhavËá " << 
kTe¡Sh¬dIndex
 << " unset.\n";

5975 
CŞÜedPrštf
(
GTe¡CŞÜ
::
kRed
, "%s", 
msg
.
G‘SŒšg
().
c_¡r
());

5976 
fæush
(
¡dout
);

5977 
ex™
(
EXIT_FAILURE
);

5978 } ià(
	gsh¬d_šdex
 < 0 || sh¬d_šdex >ğ
tÙ®_sh¬ds
) {

5979 cÚ¡ 
Mes§ge
 
msg
 = Message()

5981 << 
kTe¡Sh¬dIndex
 << " < " << 
kTe¡TÙ®Sh¬ds


5982 << ", buˆyou hav" << 
kTe¡Sh¬dIndex
 << "=" << 
sh¬d_šdex


5983 << ", " << 
kTe¡TÙ®Sh¬ds
 << "=" << 
tÙ®_sh¬ds
 << ".\n";

5984 
CŞÜedPrštf
(
GTe¡CŞÜ
::
kRed
, "%s", 
msg
.
G‘SŒšg
().
c_¡r
());

5985 
fæush
(
¡dout
);

5986 
ex™
(
EXIT_FAILURE
);

5989  
	gtÙ®_sh¬ds
 > 1;

5995 
št32_t
 
IÁ32FromEnvOrD›
(cÚ¡ * 
v¬
, iÁ32_ˆ
deçuÉ_v®
) {

5996 cÚ¡ * 
	g¡r_v®
 = 
posix
::
G‘Env
(
v¬
);

5997 ià(
	g¡r_v®
 =ğ
nuÎ±r
) {

5998  
deçuÉ_v®
;

6001 
št32_t
 
	g»suÉ
;

6002 ià(!
P¬£IÁ32
(
Mes§ge
(è<< "Thv®uoà’vœÚm’ˆv¬ŸbË " << 
v¬
,

6003 
¡r_v®
, &
»suÉ
)) {

6004 
ex™
(
EXIT_FAILURE
);

6006  
	g»suÉ
;

6013 
boŞ
 
ShouldRunTe¡OnSh¬d
(
tÙ®_sh¬ds
, 
sh¬d_šdex
, 
‹¡_id
) {

6014  (
	g‹¡_id
 % 
	gtÙ®_sh¬ds
è=ğ
sh¬d_šdex
;

6024 
	gUn™Te¡Im¶
::
F‹rTe¡s
(
R—ùiÚToSh¬dšg
 
sh¬d_‹¡s
) {

6025 cÚ¡ 
št32_t
 
tÙ®_sh¬ds
 = 
sh¬d_‹¡s
 =ğ
HONOR_SHARDING_PROTOCOL
 ?

6026 
IÁ32FromEnvOrD›
(
kTe¡TÙ®Sh¬ds
, -1) : -1;

6027 cÚ¡ 
št32_t
 
	gsh¬d_šdex
 = 
sh¬d_‹¡s
 =ğ
HONOR_SHARDING_PROTOCOL
 ?

6028 
IÁ32FromEnvOrD›
(
kTe¡Sh¬dIndex
, -1) : -1;

6034 
	gnum_ruÂabË_‹¡s
 = 0;

6035 
	gnum_£Ëùed_‹¡s
 = 0;

6036 auto* 
	g‹¡_su™e
 : 
‹¡_su™es_
) {

6037 cÚ¡ 
¡d
::
¡ršg
& 
‹¡_su™e_Çme
 = 
‹¡_su™e
->
Çme
();

6038 
	g‹¡_su™e
->
£t_should_run
(
çl£
);

6040 
size_t
 
	gj
 = 0; j < 
	g‹¡_su™e
->
‹¡_šfo_li¡
().
size
(); j++) {

6041 
Te¡Info
* cÚ¡ 
	g‹¡_šfo
 = 
‹¡_su™e
->
‹¡_šfo_li¡
()[
j
];

6042 cÚ¡ 
	g¡d
::
¡ršg
 
‹¡_Çme
(
‹¡_šfo
->
Çme
());

6045 cÚ¡ 
boŞ
 
	gis_di§bËd
 = 
š‹º®
::
Un™Te¡O±iÚs
::
M©chesF‹r
(

6046 
‹¡_su™e_Çme
, 
kDi§bËTe¡F‹r
) ||

6047 
	gš‹º®
::
Un™Te¡O±iÚs
::
M©chesF‹r
(

6048 
‹¡_Çme
, 
kDi§bËTe¡F‹r
);

6049 
	g‹¡_šfo
->
	gis_di§bËd_
 = 
is_di§bËd
;

6051 cÚ¡ 
boŞ
 
	gm©ches_f‹r
 = 
š‹º®
::
Un™Te¡O±iÚs
::
F‹rM©chesTe¡
(

6052 
‹¡_su™e_Çme
, 
‹¡_Çme
);

6053 
	g‹¡_šfo
->
	gm©ches_f‹r_
 = 
m©ches_f‹r
;

6055 cÚ¡ 
boŞ
 
	gis_ruÂabË
 =

6056 (
GTEST_FLAG
(
®so_run_di§bËd_‹¡s
è|| !
is_di§bËd
) &&

6057 
m©ches_f‹r
;

6059 cÚ¡ 
boŞ
 
	gis_š_ªÙh”_sh¬d
 =

6060 
sh¬d_‹¡s
 !ğ
IGNORE_SHARDING_PROTOCOL
 &&

6061 !
ShouldRunTe¡OnSh¬d
(
tÙ®_sh¬ds
, 
sh¬d_šdex
, 
num_ruÂabË_‹¡s
);

6062 
	g‹¡_šfo
->
	gis_š_ªÙh”_sh¬d_
 = 
is_š_ªÙh”_sh¬d
;

6063 cÚ¡ 
boŞ
 
	gis_£Ëùed
 = 
is_ruÂabË
 && !
is_š_ªÙh”_sh¬d
;

6065 
	gnum_ruÂabË_‹¡s
 +ğ
is_ruÂabË
;

6066 
	gnum_£Ëùed_‹¡s
 +ğ
is_£Ëùed
;

6068 
	g‹¡_šfo
->
	gshould_run_
 = 
is_£Ëùed
;

6069 
	g‹¡_su™e
->
£t_should_run
(
‹¡_su™e
->
should_run
(è|| 
is_£Ëùed
);

6072  
	gnum_£Ëùed_‹¡s
;

6079 
PrštOnOÃLše
(cÚ¡ * 
¡r
, 
max_Ëngth
) {

6080 ià(
	g¡r
 !ğ
nuÎ±r
) {

6081 
i
 = 0; *
	g¡r
 != '\0'; ++str) {

6082 ià(
	gi
 >ğ
max_Ëngth
) {

6083 
´štf
("...");

6086 ià(*
	g¡r
 == '\n') {

6087 
´štf
("\\n");

6088 
	gi
 += 2;

6090 
´štf
("%c", *
¡r
);

6091 ++
	gi
;

6098 
	gUn™Te¡Im¶
::
Li¡Te¡sM©chšgF‹r
() {

6100 cÚ¡ 
kMaxP¬amL’gth
 = 250;

6102 auto* 
	g‹¡_su™e
 : 
‹¡_su™es_
) {

6103 
boŞ
 
´š‹d_‹¡_su™e_Çme
 = 
çl£
;

6105 
size_t
 
	gj
 = 0; j < 
	g‹¡_su™e
->
‹¡_šfo_li¡
().
size
(); j++) {

6106 cÚ¡ 
Te¡Info
* cÚ¡ 
	g‹¡_šfo
 = 
‹¡_su™e
->
‹¡_šfo_li¡
()[
j
];

6107 ià(
	g‹¡_šfo
->
	gm©ches_f‹r_
) {

6108 ià(!
	g´š‹d_‹¡_su™e_Çme
) {

6109 
	g´š‹d_‹¡_su™e_Çme
 = 
Œue
;

6110 
´štf
("%s.", 
‹¡_su™e
->
Çme
());

6111 ià(
	g‹¡_su™e
->
ty³_·¿m
(è!ğ
nuÎ±r
) {

6112 
´štf
(" # % ğ", 
kTy³P¬amLab–
);

6115 
PrštOnOÃLše
(
‹¡_su™e
->
ty³_·¿m
(), 
kMaxP¬amL’gth
);

6117 
´štf
("\n");

6119 
´štf
(" %s", 
‹¡_šfo
->
Çme
());

6120 ià(
	g‹¡_šfo
->
v®ue_·¿m
(è!ğ
nuÎ±r
) {

6121 
´štf
(" # % ğ", 
kV®ueP¬amLab–
);

6124 
PrštOnOÃLše
(
‹¡_šfo
->
v®ue_·¿m
(), 
kMaxP¬amL’gth
);

6126 
´štf
("\n");

6130 
fæush
(
¡dout
);

6131 cÚ¡ 
	g¡d
::
¡ršg
& 
ouut_fÜm©
 = 
Un™Te¡O±iÚs
::
G‘OuutFÜm©
();

6132 ià(
	gouut_fÜm©
 =ğ"xml" || 
ouut_fÜm©
 == "json") {

6133 
FILE
* 
feout
 = 
O³nFeFÜWr™šg
(

6134 
Un™Te¡O±iÚs
::
G‘AbsŞu‹P©hToOuutFe
().
c_¡r
());

6135 
	g¡d
::
¡ršg¡»am
 
¡»am
;

6136 ià(
	gouut_fÜm©
 == "xml") {

6137 
XmlUn™Te¡ResuÉPrš‹r
(

6138 
Un™Te¡O±iÚs
::
G‘AbsŞu‹P©hToOuutFe
().
c_¡r
())

6139 .
PrštXmlTe¡sLi¡
(&
¡»am
, 
‹¡_su™es_
);

6140 } ià(
	gouut_fÜm©
 == "json") {

6141 
JsÚUn™Te¡ResuÉPrš‹r
(

6142 
Un™Te¡O±iÚs
::
G‘AbsŞu‹P©hToOuutFe
().
c_¡r
())

6143 .
PrštJsÚTe¡Li¡
(&
¡»am
, 
‹¡_su™es_
);

6145 
årštf
(
feout
, "%s", 
SŒšgSŒ—mToSŒšg
(&
¡»am
).
c_¡r
());

6146 
fşo£
(
feout
);

6155 
	gUn™Te¡Im¶
::
£t_os_¡ack_Œaû_g‘‹r
(

6156 
OsSckT¿ûG‘‹rIÁ”çû
* 
g‘‹r
) {

6157 ià(
os_¡ack_Œaû_g‘‹r_
 !ğ
g‘‹r
) {

6158 
d–‘e
 
os_¡ack_Œaû_g‘‹r_
;

6159 
	gos_¡ack_Œaû_g‘‹r_
 = 
g‘‹r
;

6166 
OsSckT¿ûG‘‹rIÁ”çû
* 
	gUn™Te¡Im¶
::
os_¡ack_Œaû_g‘‹r
() {

6167 ià(
os_¡ack_Œaû_g‘‹r_
 =ğ
nuÎ±r
) {

6168 #ifdeà
GTEST_OS_STACK_TRACE_GETTER_


6169 
os_¡ack_Œaû_g‘‹r_
 = 
Ãw
 
GTEST_OS_STACK_TRACE_GETTER_
;

6171 
	gos_¡ack_Œaû_g‘‹r_
 = 
Ãw
 
OsSckT¿ûG‘‹r
;

6175  
	gos_¡ack_Œaû_g‘‹r_
;

6179 
Te¡ResuÉ
* 
	gUn™Te¡Im¶
::
cu¼’t_‹¡_»suÉ
() {

6180 ià(
cu¼’t_‹¡_šfo_
 !ğ
nuÎ±r
) {

6181  &
cu¼’t_‹¡_šfo_
->
»suÉ_
;

6183 ià(
	gcu¼’t_‹¡_su™e_
 !ğ
nuÎ±r
) {

6184  &
cu¼’t_‹¡_su™e_
->
ad_hoc_‹¡_»suÉ_
;

6186  &
	gad_hoc_‹¡_»suÉ_
;

6191 
	gUn™Te¡Im¶
::
ShufæeTe¡s
() {

6193 
ShufæeRªge
(
¿ndom
(), 0, 
Ï¡_d—th_‹¡_su™e_
 + 1, &
‹¡_su™e_šdiûs_
);

6196 
ShufæeRªge
(
¿ndom
(), 
Ï¡_d—th_‹¡_su™e_
 + 1,

6197 
¡©ic_ÿ¡
<>(
‹¡_su™es_
.
size
()), &
‹¡_su™e_šdiûs_
);

6200 auto& 
	g‹¡_su™e
 : 
‹¡_su™es_
) {

6201 
‹¡_su™e
->
ShufæeTe¡s
(
¿ndom
());

6206 
	gUn™Te¡Im¶
::
UnshufæeTe¡s
() {

6207 
size_t
 
i
 = 0; 
	gi
 < 
	g‹¡_su™es_
.
size
(); i++) {

6209 
	g‹¡_su™es_
[
i
]->
UnshufæeTe¡s
();

6211 
	g‹¡_su™e_šdiûs_
[
i
] = 
¡©ic_ÿ¡
<>(i);

6225 
	g¡d
::
¡ršg
 
G‘Cu¼’tOsSckT¿ûExû±Tİ
(
Un™Te¡
* ,

6226 
sk_couÁ
) {

6229  
G‘Un™Te¡Im¶
()->
Cu¼’tOsSckT¿ûExû±Tİ
(
sk_couÁ
 + 1);

6234 
	gÇme¥aû
 {

6235 şas 
	cCÏssUniqueToAlwaysTrue
 {};

6238 
boŞ
 
IsTrue
(boŞ 
cÚd™iÚ
è{  
	gcÚd™iÚ
; }

6240 
boŞ
 
AlwaysTrue
() {

6241 #ià
GTEST_HAS_EXCEPTIONS


6244 ià(
IsTrue
(
çl£
))

6245 
throw
 
CÏssUniqueToAlwaysTrue
();

6247  
	gŒue
;

6253 
boŞ
 
SkP»fix
(cÚ¡ * 
´efix
, cÚ¡ ** 
p¡r
) {

6254 cÚ¡ 
size_t
 
	g´efix_Ën
 = 
¡¾’
(
´efix
);

6255 ià(
¡ºcmp
(*
p¡r
, 
´efix
, 
´efix_Ën
) == 0) {

6256 *
p¡r
 +ğ
´efix_Ën
;

6257  
	gŒue
;

6259  
	gçl£
;

6267 cÚ¡ * 
P¬£FÏgV®ue
(cÚ¡ * 
¡r
, cÚ¡ * 
æag
,

6268 
boŞ
 
def_İtiÚ®
) {

6270 ià(
	g¡r
 =ğ
nuÎ±r
 || 
æag
 ==‚ullptr) ‚ullptr;

6273 cÚ¡ 
	g¡d
::
¡ršg
 
æag_¡r
 = 
¡d
::¡ršg("--"è+ 
GTEST_FLAG_PREFIX_
 + 
æag
;

6274 cÚ¡ 
size_t
 
	gæag_Ën
 = 
æag_¡r
.
Ëngth
();

6275 ià(
¡ºcmp
(
¡r
, 
æag_¡r
.
c_¡r
(), 
æag_Ën
è!ğ0è 
nuÎ±r
;

6278 cÚ¡ * 
	gæag_’d
 = 
¡r
 + 
æag_Ën
;

6281 ià(
	gdef_İtiÚ®
 && (
	gæag_’d
[0] == '\0')) {

6282  
æag_’d
;

6288 ià(
	gæag_’d
[0] !ğ'='è 
nuÎ±r
;

6291  
	gæag_’d
 + 1;

6304 
boŞ
 
P¬£BoŞFÏg
(cÚ¡ * 
¡r
, cÚ¡ * 
æag
, boŞ* 
v®ue
) {

6306 cÚ¡ * cÚ¡ 
	gv®ue_¡r
 = 
P¬£FÏgV®ue
(
¡r
, 
æag
, 
Œue
);

6309 ià(
	gv®ue_¡r
 =ğ
nuÎ±r
è 
çl£
;

6312 *
	gv®ue
 = !(*
v®ue_¡r
 == '0' || *value_str == 'f' || *value_str == 'F');

6313  
	gŒue
;

6320 
boŞ
 
P¬£IÁ32FÏg
(cÚ¡ * 
¡r
, cÚ¡ * 
æag
, 
št32_t
* 
v®ue
) {

6322 cÚ¡ * cÚ¡ 
	gv®ue_¡r
 = 
P¬£FÏgV®ue
(
¡r
, 
æag
, 
çl£
);

6325 ià(
	gv®ue_¡r
 =ğ
nuÎ±r
è 
çl£
;

6328  
P¬£IÁ32
(
Mes§ge
(è<< "Thv®uoàæag --" << 
æag
,

6329 
v®ue_¡r
, 
v®ue
);

6336 
	g‹m¶©e
 <
ty³Çme
 
	gSŒšg
>

6337 
boŞ
 
P¬£SŒšgFÏg
(cÚ¡ * 
¡r
, cÚ¡ * 
æag
, 
SŒšg
* 
v®ue
) {

6339 cÚ¡ * cÚ¡ 
	gv®ue_¡r
 = 
P¬£FÏgV®ue
(
¡r
, 
æag
, 
çl£
);

6342 ià(
	gv®ue_¡r
 =ğ
nuÎ±r
è 
çl£
;

6345 *
	gv®ue
 = 
v®ue_¡r
;

6346  
	gŒue
;

6355 
boŞ
 
HasGoogËTe¡FÏgP»fix
(cÚ¡ * 
¡r
) {

6356  (
SkP»fix
("--", &
¡r
) ||

6357 
SkP»fix
("-", &
¡r
) ||

6358 
SkP»fix
("/", &
¡r
)) &&

6359 !
SkP»fix
(
GTEST_FLAG_PREFIX_
 "š‹º®_", &
¡r
) &&

6360 (
SkP»fix
(
GTEST_FLAG_PREFIX_
, &
¡r
) ||

6361 
SkP»fix
(
GTEST_FLAG_PREFIX_DASH_
, &
¡r
));

6373 
PrštCŞÜEncoded
(cÚ¡ * 
¡r
) {

6374 
GTe¡CŞÜ
 
	gcŞÜ
 = GTe¡CŞÜ::
kDeçuÉ
;

6381 cÚ¡ * 
	gp
 = 
¡rchr
(
¡r
, '@');

6382 ià(
	gp
 =ğ
nuÎ±r
) {

6383 
CŞÜedPrštf
(
cŞÜ
, "%s", 
¡r
);

6387 
CŞÜedPrštf
(
cŞÜ
, "%s", 
¡d
::
¡ršg
(
¡r
, 
p
).
c_¡r
());

6389 cÚ¡ 
	gch
 = 
p
[1];

6390 
	g¡r
 = 
p
 + 2;

6391 ià(
	gch
 == '@') {

6392 
CŞÜedPrštf
(
cŞÜ
, "@");

6393 } ià(
	gch
 == 'D') {

6394 
cŞÜ
 = 
GTe¡CŞÜ
::
kDeçuÉ
;

6395 } ià(
	gch
 == 'R') {

6396 
cŞÜ
 = 
GTe¡CŞÜ
::
kRed
;

6397 } ià(
	gch
 == 'G') {

6398 
cŞÜ
 = 
GTe¡CŞÜ
::
kG»’
;

6399 } ià(
	gch
 == 'Y') {

6400 
cŞÜ
 = 
GTe¡CŞÜ
::
kY–low
;

6402 --
	g¡r
;

6407 cÚ¡ 
	gkCŞÜEncodedH–pMes§ge
[] =

6408 "Thi ´og¿m cÚš ‹¡ wr™‹Àusšg " 
GTEST_NAME_


6413 " @G--" 
GTEST_FLAG_PREFIX_


6417 " @G--" 
GTEST_FLAG_PREFIX_


6425 " @G--" 
GTEST_FLAG_PREFIX_


6430 " @G--" 
GTEST_FLAG_PREFIX_


6433 " @G--" 
GTEST_FLAG_PREFIX_


6436 " @G--" 
GTEST_FLAG_PREFIX_


6442 " @G--" 
GTEST_FLAG_PREFIX_


6445 " @G--" 
GTEST_FLAG_PREFIX_


6448 " @G--" 
GTEST_FLAG_PREFIX_


6451 " @G--" 
GTEST_FLAG_PREFIX_


6452 "ouut=@Y(@GjsÚ@Y|@Gxml@Y)[@G:@YDIRECTORY_PATH@G" 
GTEST_PATH_SEP_


6457 #ià
GTEST_CAN_STREAM_RESULTS_


6458 " @G--" 
GTEST_FLAG_PREFIX_


6464 #ià
GTEST_HAS_DEATH_TEST
 && !
GTEST_OS_WINDOWS


6465 " @G--" 
GTEST_FLAG_PREFIX_


6469 " @G--" 
GTEST_FLAG_PREFIX_


6472 " @G--" 
GTEST_FLAG_PREFIX_


6476 " @G--" 
GTEST_FLAG_PREFIX_


6481 "Exû± fÜ @G--" 
GTEST_FLAG_PREFIX_


6487 "@G--" 
GTEST_FLAG_PREFIX_


6489 "th@G" 
GTEST_FLAG_PREFIX_UPPER_


6492 "FÜ mÜšfÜm©iÚ,…Ëa£„—dh" 
GTEST_NAME_


6494 "@G" 
GTEST_PROJECT_URL_
 "@D. Iàyou fšd‡ bug iÀ" 
GTEST_NAME_


6497 "@G<" 
GTEST_DEV_EMAIL_
 ">@D.\n";

6499 
boŞ
 
P¬£GoogËTe¡FÏg
(cÚ¡ * cÚ¡ 
¬g
) {

6500  
P¬£BoŞFÏg
(
¬g
, 
kAlsoRunDi§bËdTe¡sFÏg
,

6501 &
GTEST_FLAG
(
®so_run_di§bËd_‹¡s
)) ||

6502 
P¬£BoŞFÏg
(
¬g
, 
kB»akOnFau»FÏg
,

6503 &
GTEST_FLAG
(
b»ak_Ú_çu»
)) ||

6504 
P¬£BoŞFÏg
(
¬g
, 
kC©chExû±iÚsFÏg
,

6505 &
GTEST_FLAG
(
ÿtch_exû±iÚs
)) ||

6506 
P¬£SŒšgFÏg
(
¬g
, 
kCŞÜFÏg
, &
GTEST_FLAG
(
cŞÜ
)) ||

6507 
P¬£SŒšgFÏg
(
¬g
, 
kD—thTe¡StyËFÏg
,

6508 &
GTEST_FLAG
(
d—th_‹¡_¡yË
)) ||

6509 
P¬£BoŞFÏg
(
¬g
, 
kD—thTe¡U£FÜk
,

6510 &
GTEST_FLAG
(
d—th_‹¡_u£_fÜk
)) ||

6511 
P¬£BoŞFÏg
(
¬g
, 
kFaFa¡
, &
GTEST_FLAG
(
ç_ç¡
)) ||

6512 
P¬£SŒšgFÏg
(
¬g
, 
kF‹rFÏg
, &
GTEST_FLAG
(
f‹r
)) ||

6513 
P¬£SŒšgFÏg
(
¬g
, 
kIÁ”ÇlRunD—thTe¡FÏg
,

6514 &
GTEST_FLAG
(
š‹º®_run_d—th_‹¡
)) ||

6515 
P¬£BoŞFÏg
(
¬g
, 
kLi¡Te¡sFÏg
, &
GTEST_FLAG
(
li¡_‹¡s
)) ||

6516 
P¬£SŒšgFÏg
(
¬g
, 
kOuutFÏg
, &
GTEST_FLAG
(
ouut
)) ||

6517 
P¬£BoŞFÏg
(
¬g
, 
kBr›fFÏg
, &
GTEST_FLAG
(
br›f
)) ||

6518 
P¬£BoŞFÏg
(
¬g
, 
kPrštTimeFÏg
, &
GTEST_FLAG
(
´št_time
)) ||

6519 
P¬£BoŞFÏg
(
¬g
, 
kPrštUTF8FÏg
, &
GTEST_FLAG
(
´št_utf8
)) ||

6520 
P¬£IÁ32FÏg
(
¬g
, 
kRªdomS“dFÏg
, &
GTEST_FLAG
(
¿ndom_£ed
)) ||

6521 
P¬£IÁ32FÏg
(
¬g
, 
kR•—tFÏg
, &
GTEST_FLAG
(
»³©
)) ||

6522 
P¬£BoŞFÏg
(
¬g
, 
kShufæeFÏg
, &
GTEST_FLAG
(
shufæe
)) ||

6523 
P¬£IÁ32FÏg
(
¬g
, 
kSckT¿ûD•thFÏg
,

6524 &
GTEST_FLAG
(
¡ack_Œaû_d•th
)) ||

6525 
P¬£SŒšgFÏg
(
¬g
, 
kSŒ—mResuÉToFÏg
,

6526 &
GTEST_FLAG
(
¡»am_»suÉ_to
)) ||

6527 
P¬£BoŞFÏg
(
¬g
, 
kThrowOnFau»FÏg
, &
GTEST_FLAG
(
throw_Ú_çu»
));

6530 #ià
GTEST_USE_OWN_FLAGFILE_FLAG_


6531 
LßdFÏgsFromFe
(cÚ¡ 
¡d
::
¡ršg
& 
·th
) {

6532 
FILE
* 
æagfe
 = 
posix
::
FO³n
(
·th
.
c_¡r
(), "r");

6533 ià(!
	gæagfe
) {

6534 
GTEST_LOG_
(
FATAL
è<< "UÇbËØİ’ f\"" << 
GTEST_FLAG
(
æagfe
)

6537 
	g¡d
::
¡ršg
 
cÚ‹Ás
(
R—dEÁœeFe
(
æagfe
));

6538 
	gposix
::
FClo£
(
æagfe
);

6539 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> 
lšes
;

6540 
S¶™SŒšg
(
cÚ‹Ás
, '\n', &
lšes
);

6541 
size_t
 
	gi
 = 0; i < 
	glšes
.
size
(); ++i) {

6542 ià(
	glšes
[
i
].
em±y
())

6544 ià(!
P¬£GoogËTe¡FÏg
(
lšes
[
i
].
c_¡r
()))

6545 
	gg_h–p_æag
 = 
Œue
;

6553 
	g‹m¶©e
 <
ty³Çme
 
	gCh¬Ty³
>

6554 
P¬£GoogËTe¡FÏgsOÆyIm¶
(* 
¬gc
, 
Ch¬Ty³
** 
¬gv
) {

6555 
	gi
 = 1; i < *
	g¬gc
; i++) {

6556 cÚ¡ 
	g¡d
::
¡ršg
 
¬g_¡ršg
 = 
SŒ—mabËToSŒšg
(
¬gv
[
i
]);

6557 cÚ¡ * cÚ¡ 
	g¬g
 = 
¬g_¡ršg
.
c_¡r
();

6559 
usšg
 
	gš‹º®
::
P¬£BoŞFÏg
;

6560 
usšg
 
	gš‹º®
::
P¬£IÁ32FÏg
;

6561 
usšg
 
	gš‹º®
::
P¬£SŒšgFÏg
;

6563 
boŞ
 
	g»move_æag
 = 
çl£
;

6564 ià(
P¬£GoogËTe¡FÏg
(
¬g
)) {

6565 
	g»move_æag
 = 
Œue
;

6566 #ià
GTEST_USE_OWN_FLAGFILE_FLAG_


6567 } ià(
P¬£SŒšgFÏg
(
¬g
, 
kFÏgfeFÏg
, &
GTEST_FLAG
(
æagfe
))) {

6568 
LßdFÏgsFromFe
(
GTEST_FLAG
(
æagfe
));

6569 
	g»move_æag
 = 
Œue
;

6571 } ià(
	g¬g_¡ršg
 =ğ"--h–p" || 
¬g_¡ršg
 == "-h" ||

6572 
¬g_¡ršg
 == "-?" ||‡rg_string == "/?" ||

6573 
HasGoogËTe¡FÏgP»fix
(
¬g
)) {

6576 
g_h–p_æag
 = 
Œue
;

6579 ià(
	g»move_æag
) {

6584 
	gj
 = 
i
; j !ğ*
¬gc
; j++) {

6585 
	g¬gv
[
j
] = 
¬gv
[j + 1];

6589 (*
	g¬gc
)--;

6593 
	gi
--;

6597 ià(
	gg_h–p_æag
) {

6601 
PrštCŞÜEncoded
(
kCŞÜEncodedH–pMes§ge
);

6607 
P¬£GoogËTe¡FÏgsOÆy
(* 
¬gc
, ** 
¬gv
) {

6608 
P¬£GoogËTe¡FÏgsOÆyIm¶
(
¬gc
, 
¬gv
);

6613 #ià
GTEST_OS_MAC


6614 #iâdeà
GTEST_OS_IOS


6615 ià(*
_NSG‘Argv
(è=ğ
¬gv
) {

6616 *
_NSG‘Argc
(èğ*
¬gc
;

6621 
P¬£GoogËTe¡FÏgsOÆy
(* 
¬gc
, 
wch¬_t
** 
¬gv
) {

6622 
P¬£GoogËTe¡FÏgsOÆyIm¶
(
¬gc
, 
¬gv
);

6629 
	g‹m¶©e
 <
ty³Çme
 
	gCh¬Ty³
>

6630 
In™GoogËTe¡Im¶
(* 
¬gc
, 
Ch¬Ty³
** 
¬gv
) {

6632 ià(
GTe¡IsIn™Ÿlized
()) ;

6634 ià(*
	g¬gc
 <= 0) ;

6636 
	gg_¬gvs
.
ş—r
();

6637 
	gi
 = 0; i !ğ*
¬gc
; i++) {

6638 
	gg_¬gvs
.
push_back
(
SŒ—mabËToSŒšg
(
¬gv
[
i
]));

6641 #ià
GTEST_HAS_ABSL


6642 
	gab¦
::
In™ŸlizeSymbŞiz”
(
g_¬gvs
[0].
c_¡r
());

6645 
P¬£GoogËTe¡FÏgsOÆy
(
¬gc
, 
¬gv
);

6646 
G‘Un™Te¡Im¶
()->
Po¡FÏgP¬sšgIn™
();

6660 
	$In™GoogËTe¡
(* 
¬gc
, ** 
¬gv
) {

6661 #ià
	`defšed
(
GTEST_CUSTOM_INIT_GOOGLE_TEST_FUNCTION_
)

6662 
	`GTEST_CUSTOM_INIT_GOOGLE_TEST_FUNCTION_
(
¬gc
, 
¬gv
);

6664 
š‹º®
::
	`In™GoogËTe¡Im¶
(
¬gc
, 
¬gv
);

6666 
	}
}

6670 
	$In™GoogËTe¡
(* 
¬gc
, 
wch¬_t
** 
¬gv
) {

6671 #ià
	`defšed
(
GTEST_CUSTOM_INIT_GOOGLE_TEST_FUNCTION_
)

6672 
	`GTEST_CUSTOM_INIT_GOOGLE_TEST_FUNCTION_
(
¬gc
, 
¬gv
);

6674 
š‹º®
::
	`In™GoogËTe¡Im¶
(
¬gc
, 
¬gv
);

6676 
	}
}

6680 
	$In™GoogËTe¡
() {

6682 
¬gc
 = 1;

6683 cÚ¡‡utØ
¬g0
 = "dummy";

6684 * 
¬gv0
 = 
cÚ¡_ÿ¡
<*>(
¬g0
);

6685 ** 
¬gv
 = &
¬gv0
;

6687 #ià
	`defšed
(
GTEST_CUSTOM_INIT_GOOGLE_TEST_FUNCTION_
)

6688 
	`GTEST_CUSTOM_INIT_GOOGLE_TEST_FUNCTION_
(&
¬gc
, 
¬gv
);

6690 
š‹º®
::
	`In™GoogËTe¡Im¶
(&
¬gc
, 
¬gv
);

6692 
	}
}

6694 
	g¡d
::
¡ršg
 
	$TempDœ
() {

6695 #ià
	`defšed
(
GTEST_CUSTOM_TEMPDIR_FUNCTION_
)

6696  
	`GTEST_CUSTOM_TEMPDIR_FUNCTION_
();

6697 #–ià
GTEST_OS_WINDOWS_MOBILE


6699 #–ià
GTEST_OS_WINDOWS


6700 cÚ¡ * 
‹mp_dœ
 = 
š‹º®
::
posix
::
	`G‘Env
("TEMP");

6701 ià(
‹mp_dœ
 =ğ
nuÎ±r
 ||emp_dir[0] == '\0') {

6703 } ià(
‹mp_dœ
[
	`¡¾’
(temp_dir) - 1] == '\\') {

6704  
‹mp_dœ
;

6706  
¡d
::
	`¡ršg
(
‹mp_dœ
) + "\\";

6708 #–ià
GTEST_OS_LINUX_ANDROID


6709 cÚ¡ * 
‹mp_dœ
 = 
š‹º®
::
posix
::
	`G‘Env
("TEST_TMPDIR");

6710 ià(
‹mp_dœ
 =ğ
nuÎ±r
 ||emp_dir[0] == '\0') {

6713  
‹mp_dœ
;

6715 #–ià
GTEST_OS_LINUX


6716 cÚ¡ * 
‹mp_dœ
 = 
š‹º®
::
posix
::
	`G‘Env
("TEST_TMPDIR");

6717 ià(
‹mp_dœ
 =ğ
nuÎ±r
 ||emp_dir[0] == '\0') {

6720  
‹mp_dœ
;

6725 
	}
}

6731 
	gScİedT¿û
::
	$PushT¿û
(cÚ¡ * 
fe
, 
lše
, 
¡d
::
¡ršg
 
mes§ge
) {

6732 
š‹º®
::
T¿ûInfo
 
Œaû
;

6733 
Œaû
.
fe
 = file;

6734 
Œaû
.
lše
 =†ine;

6735 
Œaû
.
mes§ge
.
	`sw­
(message);

6737 
Un™Te¡
::
	`G‘In¡ªû
()->
	`PushGTe¡T¿û
(
Œaû
);

6738 
	}
}

6741 
	gScİedT¿û
::~
	$ScİedT¿û
()

6742 
	$GTEST_LOCK_EXCLUDED_
(&
Un™Te¡
::
mu‹x_
) {

6743 
Un™Te¡
::
	`G‘In¡ªû
()->
	`PİGTe¡T¿û
();

6744 
	}
}

	@third_party/googletest/googletest/src/gtest_main.cc

30 
	~<c¡dio
>

31 
	~"g‹¡/g‹¡.h
"

33 #ià
GTEST_OS_ESP8266
 || 
GTEST_OS_ESP32


34 #ià
GTEST_OS_ESP8266


37 
£tup
() {

38 
‹¡šg
::
In™GoogËTe¡
();

41 
loİ
(è{ 
RUN_ALL_TESTS
(); }

43 #ià
GTEST_OS_ESP8266


49 
GTEST_API_
 
	$maš
(
¬gc
, **
¬gv
) {

50 
	`´štf
("RuÂšg maš(èäom %s\n", 
__FILE__
);

51 
‹¡šg
::
	`In™GoogËTe¡
(&
¬gc
, 
¬gv
);

52  
	`RUN_ALL_TESTS
();

53 
	}
}

	@third_party/googletest/googletest/test/googletest-break-on-failure-unittest_.cc

41 
	~"g‹¡/g‹¡.h
"

43 #ià
GTEST_OS_WINDOWS


44 
	~<wšdows.h
>

45 
	~<¡dlib.h
>

48 
	gÇme¥aû
 {

51 
TEST
(
Foo
, 
B¬
) {

52 
EXPECT_EQ
(2, 3);

55 #ià
GTEST_HAS_SEH
 && !
GTEST_OS_WINDOWS_MOBILE


57 
LONG
 
WINAPI
 
Ex™W™hExû±iÚCode
(

58 
_EXCEPTION_POINTERS
* 
exû±iÚ_poš‹rs
) {

59 
ex™
(
exû±iÚ_poš‹rs
->
Exû±iÚRecÜd
->
Exû±iÚCode
);

65 
	$maš
(
¬gc
, **
¬gv
) {

66 #ià
GTEST_OS_WINDOWS


69 
	`S‘E¼ÜMode
(
SEM_NOGPFAULTERRORBOX
 | 
SEM_FAILCRITICALERRORS
);

71 #ià
GTEST_HAS_SEH
 && !
GTEST_OS_WINDOWS_MOBILE


79 
	`S‘UnhªdËdExû±iÚF‹r
(
Ex™W™hExû±iÚCode
);

83 
‹¡šg
::
	`In™GoogËTe¡
(&
¬gc
, 
¬gv
);

85  
	`RUN_ALL_TESTS
();

86 
	}
}

	@third_party/googletest/googletest/test/googletest-catch-exceptions-test_.cc

35 
	~<¡dio.h
>

36 
	~<¡dlib.h
>

38 
	~"g‹¡/g‹¡.h
"

40 #ià
GTEST_HAS_SEH


41 
	~<wšdows.h
>

44 #ià
GTEST_HAS_EXCEPTIONS


45 
	~<exû±iÚ
>

46 
	~<¡dexû±
>

49 
usšg
 
	g‹¡šg
::
Te¡
;

51 #ià
GTEST_HAS_SEH


53 şas 
	cSehExû±iÚInCÚ¡ruùÜTe¡
 : 
public
 
Te¡
 {

54 
public
:

55 
	$SehExû±iÚInCÚ¡ruùÜTe¡
(è{ 
	`Rai£Exû±iÚ
(42, 0, 0, 
NULL
); }

56 
	}
};

58 
	$TEST_F
(
SehExû±iÚInCÚ¡ruùÜTe¡
, 
ThrowsExû±iÚInCÚ¡ruùÜ
è{
	}
}

60 şas 
	cSehExû±iÚInDe¡ruùÜTe¡
 : 
public
 
Te¡
 {

61 
public
:

62 ~
	$SehExû±iÚInDe¡ruùÜTe¡
(è{ 
	`Rai£Exû±iÚ
(42, 0, 0, 
NULL
); }

63 
	}
};

65 
	$TEST_F
(
SehExû±iÚInDe¡ruùÜTe¡
, 
ThrowsExû±iÚInDe¡ruùÜ
è{
	}
}

67 şas 
	cSehExû±iÚInS‘UpTe¡Su™eTe¡
 : 
public
 
Te¡
 {

68 
public
:

69 
	$S‘UpTe¡Su™e
(è{ 
	`Rai£Exû±iÚ
(42, 0, 0, 
NULL
); }

70 
	}
};

72 
	$TEST_F
(
SehExû±iÚInS‘UpTe¡Su™eTe¡
, 
ThrowsExû±iÚInS‘UpTe¡Su™e
è{
	}
}

74 şas 
	cSehExû±iÚInT—rDownTe¡Su™eTe¡
 : 
public
 
Te¡
 {

75 
public
:

76 
	$T—rDownTe¡Su™e
(è{ 
	`Rai£Exû±iÚ
(42, 0, 0, 
NULL
); }

77 
	}
};

79 
	$TEST_F
(
SehExû±iÚInT—rDownTe¡Su™eTe¡
,

80 
ThrowsExû±iÚInT—rDownTe¡Su™e
è{
	}
}

82 şas 
	cSehExû±iÚInS‘UpTe¡
 : 
public
 
Te¡
 {

83 
´Ùeùed
:

84 
vœtu®
 
	$S‘Up
(è{ 
	`Rai£Exû±iÚ
(42, 0, 0, 
NULL
); }

85 
	}
};

87 
	$TEST_F
(
SehExû±iÚInS‘UpTe¡
, 
ThrowsExû±iÚInS‘Up
è{
	}
}

89 şas 
	cSehExû±iÚInT—rDownTe¡
 : 
public
 
Te¡
 {

90 
´Ùeùed
:

91 
vœtu®
 
	$T—rDown
(è{ 
	`Rai£Exû±iÚ
(42, 0, 0, 
NULL
); }

92 
	}
};

94 
	$TEST_F
(
SehExû±iÚInT—rDownTe¡
, 
ThrowsExû±iÚInT—rDown
è{
	}
}

96 
	$TEST
(
SehExû±iÚTe¡
, 
ThrowsSehExû±iÚ
) {

97 
	`Rai£Exû±iÚ
(42, 0, 0, 
NULL
);

98 
	}
}

102 #ià
GTEST_HAS_EXCEPTIONS


104 şas 
	cCxxExû±iÚInCÚ¡ruùÜTe¡
 : 
public
 
Te¡
 {

105 
public
:

106 
	$CxxExû±iÚInCÚ¡ruùÜTe¡
() {

109 
	`GTEST_SUPPRESS_UNREACHABLE_CODE_WARNING_BELOW_
(

110 
throw
 
¡d
::
	`ruÁime_”rÜ
("Standard C++ƒxception"));

113 
	$T—rDownTe¡Su™e
() {

114 
	`´štf
("%s",

117 
	}
}

119 
	g´Ùeùed
:

120 ~
	$CxxExû±iÚInCÚ¡ruùÜTe¡
(è
ov”ride
 {

121 
	`ADD_FAILURE
() << "CxxExceptionInConstructorTest destructor "

123 
	}
}

125 
	$S‘Up
(è
ov”ride
 {

126 
	`ADD_FAILURE
() << "CxxExceptionInConstructorTest::SetUp() "

128 
	}
}

130 
	$T—rDown
(è
ov”ride
 {

131 
	`ADD_FAILURE
() << "CxxExceptionInConstructorTest::TearDown() "

133 
	}
}

136 
	$TEST_F
(
CxxExû±iÚInCÚ¡ruùÜTe¡
, 
ThrowsExû±iÚInCÚ¡ruùÜ
) {

137 
	`ADD_FAILURE
() << "CxxExceptionInConstructorTestest body "

139 
	}
}

141 şas 
	cCxxExû±iÚInS‘UpTe¡Su™eTe¡
 : 
public
 
Te¡
 {

142 
public
:

143 
	$CxxExû±iÚInS‘UpTe¡Su™eTe¡
() {

144 
	`´štf
("%s",

149 
	$S‘UpTe¡Su™e
() {

150 
throw
 
¡d
::
	`ruÁime_”rÜ
("Standard C++ƒxception");

151 
	}
}

153 
	$T—rDownTe¡Su™e
() {

154 
	`´štf
("%s",

157 
	}
}

159 
	g´Ùeùed
:

160 ~
	$CxxExû±iÚInS‘UpTe¡Su™eTe¡
(è
ov”ride
 {

161 
	`´štf
("%s",

164 
	}
}

166 
	$S‘Up
(è
ov”ride
 {

167 
	`´štf
("%s",

170 
	}
}

172 
	$T—rDown
(è
ov”ride
 {

173 
	`´štf
("%s",

176 
	}
}

179 
	$TEST_F
(
CxxExû±iÚInS‘UpTe¡Su™eTe¡
, 
ThrowsExû±iÚInS‘UpTe¡Su™e
) {

180 
	`´štf
("%s",

183 
	}
}

185 şas 
	cCxxExû±iÚInT—rDownTe¡Su™eTe¡
 : 
public
 
Te¡
 {

186 
public
:

187 
	$T—rDownTe¡Su™e
() {

188 
throw
 
¡d
::
	`ruÁime_”rÜ
("Standard C++ƒxception");

190 
	}
};

192 
	$TEST_F
(
CxxExû±iÚInT—rDownTe¡Su™eTe¡
,

193 
ThrowsExû±iÚInT—rDownTe¡Su™e
è{
	}
}

195 şas 
	cCxxExû±iÚInS‘UpTe¡
 : 
public
 
Te¡
 {

196 
public
:

197 
	$T—rDownTe¡Su™e
() {

198 
	`´štf
("%s",

203 
´Ùeùed
:

204 ~
	$CxxExû±iÚInS‘UpTe¡
(è
ov”ride
 {

205 
	`´štf
("%s",

208 
	}
}

210 
	$S‘Up
(è
ov”ride
 { 
throw
 
¡d
::
	`ruÁime_”rÜ
("Snd¬d C++ƒxû±iÚ"); 
	}
}

212 
	$T—rDown
(è
ov”ride
 {

213 
	`´štf
("%s",

216 
	}
}

219 
	$TEST_F
(
CxxExû±iÚInS‘UpTe¡
, 
ThrowsExû±iÚInS‘Up
) {

220 
	`ADD_FAILURE
() << "CxxExceptionInSetUpTestest body "

222 
	}
}

224 şas 
	cCxxExû±iÚInT—rDownTe¡
 : 
public
 
Te¡
 {

225 
public
:

226 
	$T—rDownTe¡Su™e
() {

227 
	`´štf
("%s",

232 
´Ùeùed
:

233 ~
	$CxxExû±iÚInT—rDownTe¡
(è
ov”ride
 {

234 
	`´štf
("%s",

237 
	}
}

239 
	$T—rDown
(è
ov”ride
 {

240 
throw
 
¡d
::
	`ruÁime_”rÜ
("Standard C++ƒxception");

241 
	}
}

244 
	$TEST_F
(
CxxExû±iÚInT—rDownTe¡
, 
ThrowsExû±iÚInT—rDown
è{
	}
}

246 şas 
	cCxxExû±iÚInTe¡BodyTe¡
 : 
public
 
Te¡
 {

247 
public
:

248 
	$T—rDownTe¡Su™e
() {

249 
	`´štf
("%s",

254 
´Ùeùed
:

255 ~
	$CxxExû±iÚInTe¡BodyTe¡
(è
ov”ride
 {

256 
	`´štf
("%s",

259 
	}
}

261 
	$T—rDown
(è
ov”ride
 {

262 
	`´štf
("%s",

265 
	}
}

268 
	$TEST_F
(
CxxExû±iÚInTe¡BodyTe¡
, 
ThrowsStdCxxExû±iÚ
) {

269 
throw
 
¡d
::
	`ruÁime_”rÜ
("Standard C++ƒxception");

270 
	}
}

272 
	$TEST
(
CxxExû±iÚTe¡
, 
ThrowsNÚStdCxxExû±iÚ
) {

273 
throw
 "C-string";

274 
	}
}

279 
	$T”mš©eHªdËr
() {

280 
	`årštf
(
¡d”r
, "%s\n", "Unhandled C++ƒxceptionerminatinghe…rogram.");

281 
	`fæush
(
nuÎ±r
);

282 
	`ex™
(3);

283 
	}
}

287 
	$maš
(
¬gc
, ** 
¬gv
) {

288 #ià
GTEST_HAS_EXCEPTIONS


289 
¡d
::
	`£t_‹rmš©e
(&
T”mš©eHªdËr
);

291 
‹¡šg
::
	`In™GoogËTe¡
(&
¬gc
, 
¬gv
);

292  
	`RUN_ALL_TESTS
();

293 
	}
}

	@third_party/googletest/googletest/test/googletest-color-test_.cc

35 
	~<¡dio.h
>

37 
	~"g‹¡/g‹¡.h
"

38 
	~"¤c/g‹¡-š‹º®-šl.h
"

40 
usšg
 
	g‹¡šg
::
š‹º®
::
ShouldU£CŞÜ
;

46 
	$TEST
(
GTe¡CŞÜTe¡
, 
Dummy
) {

47 
	}
}

49 
	$maš
(
¬gc
, ** 
¬gv
) {

50 
‹¡šg
::
	`In™GoogËTe¡
(&
¬gc
, 
¬gv
);

52 ià(
	`ShouldU£CŞÜ
(
Œue
)) {

55 
	`´štf
("YES\n");

59 
	`´štf
("NO\n");

62 
	}
}

	@third_party/googletest/googletest/test/googletest-death-test-test.cc

33 
	~"g‹¡/g‹¡-d—th-‹¡.h
"

35 
	~"g‹¡/g‹¡.h
"

36 
	~"g‹¡/š‹º®/g‹¡-f•©h.h
"

38 
usšg
 
	g‹¡šg
::
š‹º®
::
AlwaysF®£
;

39 
usšg
 
	g‹¡šg
::
š‹º®
::
AlwaysTrue
;

41 #ià
GTEST_HAS_DEATH_TEST


43 #ià
GTEST_OS_WINDOWS


44 
	~<fú.h
>

45 
	~<dœeù.h
>

46 
	~<io.h
>

48 
	~<uni¡d.h
>

49 
	~<sys/wa™.h
>

52 
	~<lim™s.h
>

53 
	~<sigÇl.h
>

54 
	~<¡dio.h
>

56 #ià
GTEST_OS_LINUX


57 
	~<sys/time.h
>

60 
	~"g‹¡/g‹¡-¥i.h
"

61 
	~"¤c/g‹¡-š‹º®-šl.h
"

63 
Çme¥aû
 
	gposix
 = ::
‹¡šg
::
š‹º®
::
posix
;

65 
usšg
 
	g‹¡šg
::
CÚšsRegex
;

66 
usšg
 
	g‹¡šg
::
M©ch”
;

67 
usšg
 
	g‹¡šg
::
Mes§ge
;

68 
usšg
 
	g‹¡šg
::
š‹º®
::
D—thTe¡
;

69 
usšg
 
	g‹¡šg
::
š‹º®
::
D—thTe¡FaùÜy
;

70 
usšg
 
	g‹¡šg
::
š‹º®
::
FeP©h
;

71 
usšg
 
	g‹¡šg
::
š‹º®
::
G‘La¡E¼noDesütiÚ
;

72 
usšg
 
	g‹¡šg
::
š‹º®
::
G‘Un™Te¡Im¶
;

73 
usšg
 
	g‹¡šg
::
š‹º®
::
InD—thTe¡Chd
;

74 
usšg
 
	g‹¡šg
::
š‹º®
::
P¬£N©u¿lNumb”
;

76 
Çme¥aû
 
	g‹¡šg
 {

77 
Çme¥aû
 
	gš‹º®
 {

81 şas 
	cR•ÏûD—thTe¡FaùÜy
 {

82 
	gpublic
:

83 
ex¶ic™
 
R•ÏûD—thTe¡FaùÜy
(
D—thTe¡FaùÜy
* 
Ãw_çùÜy
)

84 : 
un™_‹¡_im¶_
(
G‘Un™Te¡Im¶
()) {

85 
Şd_çùÜy_
 = 
un™_‹¡_im¶_
->
d—th_‹¡_çùÜy_
.
»Ëa£
();

86 
	gun™_‹¡_im¶_
->
	gd—th_‹¡_çùÜy_
.
»£t
(
Ãw_çùÜy
);

89 ~
R•ÏûD—thTe¡FaùÜy
() {

90 
	gun™_‹¡_im¶_
->
	gd—th_‹¡_çùÜy_
.
»Ëa£
();

91 
	gun™_‹¡_im¶_
->
	gd—th_‹¡_çùÜy_
.
»£t
(
Şd_çùÜy_
);

93 
	g´iv©e
:

95 
R•ÏûD—thTe¡FaùÜy
(const ReplaceDeathTestFactory&);

96 
	gİ”©Ü
=(cÚ¡ 
R•ÏûD—thTe¡FaùÜy
&);

98 
Un™Te¡Im¶
* 
	gun™_‹¡_im¶_
;

99 
D—thTe¡FaùÜy
* 
	gŞd_çùÜy_
;

105 
	gÇme¥aû
 {

107 
D›W™hMes§ge
(cÚ¡ ::
¡d
::
¡ršg
& 
mes§ge
) {

108 
årštf
(
¡d”r
, "%s", 
mes§ge
.
c_¡r
());

109 
fæush
(
¡d”r
);

119 ià(
AlwaysTrue
())

120 
_ex™
(1);

123 
D›Inside
(cÚ¡ ::
¡d
::
¡ršg
& 
funùiÚ
) {

124 
D›W™hMes§ge
("d—th insid" + 
funùiÚ
 + "().");

129 şas 
	cTe¡FÜD—thTe¡
 : 
public
 
‹¡šg
::
Te¡
 {

130 
´Ùeùed
:

131 
Te¡FÜD—thTe¡
(è: 
Üigš®_dœ_
(
FeP©h
::
G‘Cu¼’tDœ
()) {}

133 ~
Te¡FÜD—thTe¡
(è
ov”ride
 { 
posix
::
ChDœ
(
Üigš®_dœ_
.
c_¡r
()); }

136 
SticMemb”FunùiÚ
(è{ 
D›Inside
("StaticMemberFunction"); }

139 
Memb”FunùiÚ
() {

140 ià(
	gshould_d›_
)

141 
D›Inside
("MemberFunction");

145 
boŞ
 
	gshould_d›_
;

146 cÚ¡ 
FeP©h
 
	gÜigš®_dœ_
;

150 şas 
	cMayD›
 {

151 
	gpublic
:

152 
ex¶ic™
 
MayD›
(
boŞ
 
should_d›
è: 
should_d›_
(should_die) {}

155 
Memb”FunùiÚ
() const {

156 ià(
should_d›_
)

157 
D›Inside
("MayDie::MemberFunction");

160 
	g´iv©e
:

162 
boŞ
 
should_d›_
;

166 
	$Glob®FunùiÚ
(è{ 
	`D›Inside
("Glob®FunùiÚ"); 
	}
}

169 
	$NÚVoidFunùiÚ
() {

170 
	`D›Inside
("NonVoidFunction");

172 
	}
}

175 
	$D›If
(
boŞ
 
should_d›
) {

176 ià(
should_d›
)

177 
	`D›Inside
("DieIf");

178 
	}
}

181 
boŞ
 
	$D›IfLessThª
(
x
, 
y
) {

182 ià(
x
 < 
y
) {

183 
	`D›Inside
("DieIfLessThan");

185  
Œue
;

186 
	}
}

189 
	$D—thTe¡Subroutše
() {

190 
	`EXPECT_DEATH
(
	`Glob®FunùiÚ
(), "death.*GlobalFunction");

191 
	`ASSERT_DEATH
(
	`Glob®FunùiÚ
(), "death.*GlobalFunction");

192 
	}
}

195 
	$D›InDebugEl£12
(* 
sid“fãù
) {

196 ià(
sid“fãù
) *sideeffect = 12;

198 #iâdeà
NDEBUG


200 
	`D›Inside
("DieInDebugElse12");

205 
	}
}

207 #ià
GTEST_OS_WINDOWS


210 
	$D›InCRTDebugEl£12
(* 
sid“fãù
) {

211 ià(
sid“fãù
) *sideeffect = 12;

214 
fdpe
[2];

215 
	`EXPECT_EQ
(
	`_pe
(
fdpe
, 256, 
O_BINARY
), 0);

216 
	`EXPECT_EQ
(
	`_şo£
(
fdpe
[0]), 0);

217 
	`EXPECT_EQ
(
	`_şo£
(
fdpe
[1]), 0);

220 
	`EXPECT_EQ
(
	`_dup
(
fdpe
[0]), -1);

223 
	}
}

227 #ià
GTEST_OS_WINDOWS
 || 
GTEST_OS_FUCHSIA


230 
	$TEST
(
Ex™StusP»diÿ‹Te¡
, 
Ex™edW™hCode
) {

233 
	`EXPECT_TRUE
(
‹¡šg
::
	`Ex™edW™hCode
(0)(0));

234 
	`EXPECT_TRUE
(
‹¡šg
::
	`Ex™edW™hCode
(1)(1));

235 
	`EXPECT_TRUE
(
‹¡šg
::
	`Ex™edW™hCode
(42)(42));

236 
	`EXPECT_FALSE
(
‹¡šg
::
	`Ex™edW™hCode
(0)(1));

237 
	`EXPECT_FALSE
(
‹¡šg
::
	`Ex™edW™hCode
(1)(0));

238 
	}
}

245 
	$NÜm®Ex™Stus
(
ex™_code
) {

246 
pid_t
 
chd_pid
 = 
	`fÜk
();

247 ià(
chd_pid
 == 0) {

248 
	`_ex™
(
ex™_code
);

250 
¡©us
;

251 
	`wa™pid
(
chd_pid
, &
¡©us
, 0);

252  
¡©us
;

253 
	}
}

260 
	$KËdEx™Stus
(
signum
) {

261 
pid_t
 
chd_pid
 = 
	`fÜk
();

262 ià(
chd_pid
 == 0) {

263 
	`¿i£
(
signum
);

264 
	`_ex™
(1);

266 
¡©us
;

267 
	`wa™pid
(
chd_pid
, &
¡©us
, 0);

268  
¡©us
;

269 
	}
}

272 
	$TEST
(
Ex™StusP»diÿ‹Te¡
, 
Ex™edW™hCode
) {

273 cÚ¡ 
¡©us0
 = 
	`NÜm®Ex™Stus
(0);

274 cÚ¡ 
¡©us1
 = 
	`NÜm®Ex™Stus
(1);

275 cÚ¡ 
¡©us42
 = 
	`NÜm®Ex™Stus
(42);

276 cÚ¡ 
‹¡šg
::
Ex™edW™hCode
 
	`´ed0
(0);

277 cÚ¡ 
‹¡šg
::
Ex™edW™hCode
 
	`´ed1
(1);

278 cÚ¡ 
‹¡šg
::
Ex™edW™hCode
 
	`´ed42
(42);

279 
	`EXPECT_PRED1
(
´ed0
, 
¡©us0
);

280 
	`EXPECT_PRED1
(
´ed1
, 
¡©us1
);

281 
	`EXPECT_PRED1
(
´ed42
, 
¡©us42
);

282 
	`EXPECT_FALSE
(
	`´ed0
(
¡©us1
));

283 
	`EXPECT_FALSE
(
	`´ed42
(
¡©us0
));

284 
	`EXPECT_FALSE
(
	`´ed1
(
¡©us42
));

285 
	}
}

288 
	$TEST
(
Ex™StusP»diÿ‹Te¡
, 
KËdBySigÇl
) {

289 cÚ¡ 
¡©us_£gv
 = 
	`KËdEx™Stus
(
SIGSEGV
);

290 cÚ¡ 
¡©us_kl
 = 
	`KËdEx™Stus
(
SIGKILL
);

291 cÚ¡ 
‹¡šg
::
KËdBySigÇl
 
	`´ed_£gv
(
SIGSEGV
);

292 cÚ¡ 
‹¡šg
::
KËdBySigÇl
 
	`´ed_kl
(
SIGKILL
);

293 
	`EXPECT_PRED1
(
´ed_£gv
, 
¡©us_£gv
);

294 
	`EXPECT_PRED1
(
´ed_kl
, 
¡©us_kl
);

295 
	`EXPECT_FALSE
(
	`´ed_£gv
(
¡©us_kl
));

296 
	`EXPECT_FALSE
(
	`´ed_kl
(
¡©us_£gv
));

297 
	}
}

302 #ifdeà
__GNUC__


303 #´agm¨
GCC
 
dŸgno¡ic
 
push


304 #´agm¨
GCC
 
dŸgno¡ic
 
ignÜed
 "-Wdangling-else"

305 #´agm¨
GCC
 
dŸgno¡ic
 
ignÜed
 "-Wempty-body"

306 #´agm¨
GCC
 
dŸgno¡ic
 
ignÜed
 "-Wpragmas"

311 
	$TEST_F
(
Te¡FÜD—thTe¡
, 
SšgËS‹m’t
) {

312 ià(
	`AlwaysF®£
())

314 
	`ASSERT_DEATH
(, "");

316 ià(
	`AlwaysTrue
())

317 
	`EXPECT_DEATH
(
	`_ex™
(1), "");

323 ià(
	`AlwaysF®£
())

324 
	`ASSERT_DEATH
(, "") << "did‚ot die";

326 ià(
	`AlwaysF®£
())

329 
	`EXPECT_DEATH
(
	`_ex™
(1), "") << 1 << 2 << 3;

330 
	}
}

331 #ifdeà
__GNUC__


332 #´agm¨
GCC
 
dŸgno¡ic
 
pİ


335 #ià
GTEST_USES_PCRE


337 
	$D›W™hEmbeddedNul
() {

338 
	`årštf
(
¡d”r
, "Hello%cmy‚ull world.\n", '\0');

339 
	`fæush
(
¡d”r
);

340 
	`_ex™
(1);

341 
	}
}

345 
	$TEST_F
(
Te¡FÜD—thTe¡
, 
EmbeddedNulInMes§ge
) {

346 
	`EXPECT_DEATH
(
	`D›W™hEmbeddedNul
(), "my‚ull world");

347 
	`ASSERT_DEATH
(
	`D›W™hEmbeddedNul
(), "my‚ull world");

348 
	}
}

354 
	$TEST_F
(
Te¡FÜD—thTe¡
, 
Sw™chS‹m’t
) {

357 
	`GTEST_DISABLE_MSC_WARNINGS_PUSH_
(4065)

361 
	`ASSERT_DEATH
(
	`_ex™
(1), "") << "exit in default switch handler";

365 
	`EXPECT_DEATH
(
	`_ex™
(1), "") << "exit in switch case";

367 
	`GTEST_DISABLE_MSC_WARNINGS_POP_
()

368 
	}
}

372 
	$TEST_F
(
Te¡FÜD—thTe¡
, 
SticMemb”FunùiÚFa¡StyË
) {

373 
‹¡šg
::
	`GTEST_FLAG
(
d—th_‹¡_¡yË
) = "fast";

374 
	`ASSERT_DEATH
(
	`SticMemb”FunùiÚ
(), "death.*StaticMember");

375 
	}
}

379 
	$TEST_F
(
Te¡FÜD—thTe¡
, 
Memb”FunùiÚFa¡StyË
) {

380 
‹¡šg
::
	`GTEST_FLAG
(
d—th_‹¡_¡yË
) = "fast";

381 
should_d›_
 = 
Œue
;

382 
	`EXPECT_DEATH
(
	`Memb”FunùiÚ
(), "inside.*MemberFunction");

383 
	}
}

385 
	$ChªgeToRoÙDœ
(è{ 
posix
::
	`ChDœ
(
GTEST_PATH_SEP_
); 
	}
}

389 
	$TEST_F
(
Te¡FÜD—thTe¡
, 
Fa¡D—thTe¡InChªgedDœ
) {

390 
‹¡šg
::
	`GTEST_FLAG
(
d—th_‹¡_¡yË
) = "fast";

392 
	`ChªgeToRoÙDœ
();

393 
	`EXPECT_EXIT
(
	`_ex™
(1), 
‹¡šg
::
	`Ex™edW™hCode
(1), "");

395 
	`ChªgeToRoÙDœ
();

396 
	`ASSERT_DEATH
(
	`_ex™
(1), "");

397 
	}
}

399 #ià
GTEST_OS_LINUX


400 
	$Sig´ofAùiÚ
(, 
sigšfo_t
*, *è{ 
	}
}

403 
	$S‘Sig´ofAùiÚAndTim”
() {

404 
sigaùiÚ
 
sigÇl_aùiÚ
;

405 
	`mem£t
(&
sigÇl_aùiÚ
, 0, (signal_action));

406 
	`sigem±y£t
(&
sigÇl_aùiÚ
.
§_mask
);

407 
sigÇl_aùiÚ
.
§_sigaùiÚ
 = 
Sig´ofAùiÚ
;

408 
sigÇl_aùiÚ
.
§_æags
 = 
SA_RESTART
 | 
SA_SIGINFO
;

409 
	`ASSERT_EQ
(0, 
	`sigaùiÚ
(
SIGPROF
, &
sigÇl_aùiÚ
, 
nuÎ±r
));

412 
™im”v®
 
tim”
;

413 
tim”
.
™_š‹rv®
.
tv_£c
 = 0;

414 
tim”
.
™_š‹rv®
.
tv_u£c
 = 1;

415 
tim”
.
™_v®ue
 =im”.
™_š‹rv®
;

416 
	`ASSERT_EQ
(0, 
	`£t™im”
(
ITIMER_PROF
, &
tim”
, 
nuÎ±r
));

417 
	}
}

420 
	$Di§bËSig´ofAùiÚAndTim”
(
sigaùiÚ
* 
Şd_sigÇl_aùiÚ
) {

421 
™im”v®
 
tim”
;

422 
tim”
.
™_š‹rv®
.
tv_£c
 = 0;

423 
tim”
.
™_š‹rv®
.
tv_u£c
 = 0;

424 
tim”
.
™_v®ue
 =im”.
™_š‹rv®
;

425 
	`ASSERT_EQ
(0, 
	`£t™im”
(
ITIMER_PROF
, &
tim”
, 
nuÎ±r
));

426 
sigaùiÚ
 
sigÇl_aùiÚ
;

427 
	`mem£t
(&
sigÇl_aùiÚ
, 0, (signal_action));

428 
	`sigem±y£t
(&
sigÇl_aùiÚ
.
§_mask
);

429 
sigÇl_aùiÚ
.
§_hªdËr
 = 
SIG_IGN
;

430 
	`ASSERT_EQ
(0, 
	`sigaùiÚ
(
SIGPROF
, &
sigÇl_aùiÚ
, 
Şd_sigÇl_aùiÚ
));

431 
	}
}

434 
	$TEST_F
(
Te¡FÜD—thTe¡
, 
Fa¡Sig´ofAùiÚS‘
) {

435 
‹¡šg
::
	`GTEST_FLAG
(
d—th_‹¡_¡yË
) = "fast";

436 
	`S‘Sig´ofAùiÚAndTim”
();

437 
	`EXPECT_DEATH
(
	`_ex™
(1), "");

438 
sigaùiÚ
 
Şd_sigÇl_aùiÚ
;

439 
	`Di§bËSig´ofAùiÚAndTim”
(&
Şd_sigÇl_aùiÚ
);

440 
	`EXPECT_TRUE
(
Şd_sigÇl_aùiÚ
.
§_sigaùiÚ
 =ğ
Sig´ofAùiÚ
);

441 
	}
}

443 
	$TEST_F
(
Te¡FÜD—thTe¡
, 
Th»adSaãSig´ofAùiÚS‘
) {

444 
‹¡šg
::
	`GTEST_FLAG
(
d—th_‹¡_¡yË
) = "threadsafe";

445 
	`S‘Sig´ofAùiÚAndTim”
();

446 
	`EXPECT_DEATH
(
	`_ex™
(1), "");

447 
sigaùiÚ
 
Şd_sigÇl_aùiÚ
;

448 
	`Di§bËSig´ofAùiÚAndTim”
(&
Şd_sigÇl_aùiÚ
);

449 
	`EXPECT_TRUE
(
Şd_sigÇl_aùiÚ
.
§_sigaùiÚ
 =ğ
Sig´ofAùiÚ
);

450 
	}
}

455 
	$TEST_F
(
Te¡FÜD—thTe¡
, 
SticMemb”FunùiÚTh»ad§ãStyË
) {

456 
‹¡šg
::
	`GTEST_FLAG
(
d—th_‹¡_¡yË
) = "threadsafe";

457 
	`ASSERT_DEATH
(
	`SticMemb”FunùiÚ
(), "death.*StaticMember");

458 
	}
}

460 
	$TEST_F
(
Te¡FÜD—thTe¡
, 
Memb”FunùiÚTh»ad§ãStyË
) {

461 
‹¡šg
::
	`GTEST_FLAG
(
d—th_‹¡_¡yË
) = "threadsafe";

462 
should_d›_
 = 
Œue
;

463 
	`EXPECT_DEATH
(
	`Memb”FunùiÚ
(), "inside.*MemberFunction");

464 
	}
}

466 
	$TEST_F
(
Te¡FÜD—thTe¡
, 
Th»ad§ãD—thTe¡InLoİ
) {

467 
‹¡šg
::
	`GTEST_FLAG
(
d—th_‹¡_¡yË
) = "threadsafe";

469 
i
 = 0; i < 3; ++i)

470 
	`EXPECT_EXIT
(
	`_ex™
(
i
), 
‹¡šg
::
	`Ex™edW™hCode
(i), "") << ": i = " << i;

471 
	}
}

473 
	$TEST_F
(
Te¡FÜD—thTe¡
, 
Th»ad§ãD—thTe¡InChªgedDœ
) {

474 
‹¡šg
::
	`GTEST_FLAG
(
d—th_‹¡_¡yË
) = "threadsafe";

476 
	`ChªgeToRoÙDœ
();

477 
	`EXPECT_EXIT
(
	`_ex™
(1), 
‹¡šg
::
	`Ex™edW™hCode
(1), "");

479 
	`ChªgeToRoÙDœ
();

480 
	`ASSERT_DEATH
(
	`_ex™
(1), "");

481 
	}
}

483 
	$TEST_F
(
Te¡FÜD—thTe¡
, 
MixedStyËs
) {

484 
‹¡šg
::
	`GTEST_FLAG
(
d—th_‹¡_¡yË
) = "threadsafe";

485 
	`EXPECT_DEATH
(
	`_ex™
(1), "");

486 
‹¡šg
::
	`GTEST_FLAG
(
d—th_‹¡_¡yË
) = "fast";

487 
	`EXPECT_DEATH
(
	`_ex™
(1), "");

488 
	}
}

490 #ià
GTEST_HAS_CLONE
 && 
GTEST_HAS_PTHREAD


492 
boŞ
 
	g±h»ad_æag
;

494 
	$S‘Pth»adFÏg
() {

495 
±h»ad_æag
 = 
Œue
;

496 
	}
}

498 
	$TEST_F
(
Te¡FÜD—thTe¡
, 
DÛsNÙExecu‹AtfÜkHooks
) {

499 ià(!
‹¡šg
::
	`GTEST_FLAG
(
d—th_‹¡_u£_fÜk
)) {

500 
‹¡šg
::
	`GTEST_FLAG
(
d—th_‹¡_¡yË
) = "threadsafe";

501 
±h»ad_æag
 = 
çl£
;

502 
	`ASSERT_EQ
(0, 
	`±h»ad_©fÜk
(&
S‘Pth»adFÏg
, 
nuÎ±r
,‚ullptr));

503 
	`ASSERT_DEATH
(
	`_ex™
(1), "");

504 
	`ASSERT_FALSE
(
±h»ad_æag
);

506 
	}
}

511 
	$TEST_F
(
Te¡FÜD—thTe¡
, 
M‘hodOfAnÙh”CÏss
) {

512 cÚ¡ 
MayD›
 
	`x
(
Œue
);

513 
	`ASSERT_DEATH
(
x
.
	`Memb”FunùiÚ
(), "MayDie\\:\\:MemberFunction");

514 
	}
}

517 
	$TEST_F
(
Te¡FÜD—thTe¡
, 
Glob®FunùiÚ
) {

518 
	`EXPECT_DEATH
(
	`Glob®FunùiÚ
(), "GlobalFunction");

519 
	}
}

523 
	$TEST_F
(
Te¡FÜD—thTe¡
, 
Acû±sAnythšgCÚv”tibËToRE
) {

524 cÚ¡ 
»gex_c_¡r
[] = "GlobalFunction";

525 
	`EXPECT_DEATH
(
	`Glob®FunùiÚ
(), 
»gex_c_¡r
);

527 cÚ¡ 
‹¡šg
::
š‹º®
::
RE
 
	`»gex
(
»gex_c_¡r
);

528 
	`EXPECT_DEATH
(
	`Glob®FunùiÚ
(), 
»gex
);

530 #ià!
GTEST_USES_PCRE


532 cÚ¡ ::
¡d
::
¡ršg
 
	`»gex_¡d_¡r
(
»gex_c_¡r
);

533 
	`EXPECT_DEATH
(
	`Glob®FunùiÚ
(), 
»gex_¡d_¡r
);

537 
	`EXPECT_DEATH
(
	`Glob®FunùiÚ
(), ::
¡d
::
	`¡ršg
(
»gex_c_¡r
).
	`c_¡r
());

540 
	}
}

543 
	$TEST_F
(
Te¡FÜD—thTe¡
, 
NÚVoidFunùiÚ
) {

544 
	`ASSERT_DEATH
(
	`NÚVoidFunùiÚ
(), "NonVoidFunction");

545 
	}
}

548 
	$TEST_F
(
Te¡FÜD—thTe¡
, 
FunùiÚW™hP¬am‘”
) {

549 
	`EXPECT_DEATH
(
	`D›If
(
Œue
), "DieIf\\(\\)");

550 
	`EXPECT_DEATH
(
	`D›IfLessThª
(2, 3), "DieIfLessThan");

551 
	}
}

554 
	$TEST_F
(
Te¡FÜD—thTe¡
, 
OutsideFixtu»
) {

555 
	`D—thTe¡Subroutše
();

556 
	}
}

559 
	$TEST_F
(
Te¡FÜD—thTe¡
, 
InsideLoİ
) {

560 
i
 = 0; i < 5; i++) {

561 
	`EXPECT_DEATH
(
	`D›IfLessThª
(-1, 
i
), "DieIfLessThan") << "where i == " << i;

563 
	}
}

566 
	$TEST_F
(
Te¡FÜD—thTe¡
, 
CompoundS‹m’t
) {

567 
	`EXPECT_DEATH
({

568 cÚ¡ 
x
 = 2;

569 cÚ¡ 
y
 = 
x
 + 1;

570 
	`D›IfLessThª
(
x
, 
y
);

573 
	}
}

576 
	$TEST_F
(
Te¡FÜD—thTe¡
, 
DÛsNÙD›
) {

577 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_DEATH
(
	`D›If
(
çl£
), "DieIf"),

579 
	}
}

582 
	$TEST_F
(
Te¡FÜD—thTe¡
, 
E¼ÜMes§geMism©ch
) {

583 
	`EXPECT_NONFATAL_FAILURE
({

584 
	`EXPECT_DEATH
(
	`D›If
(
Œue
), "DieIfLessThan") << "End of deathest message.";

586 
	}
}

590 
	$Ex³ùD—thTe¡H–³r
(
boŞ
* 
abÜ‹d
) {

591 *
abÜ‹d
 = 
Œue
;

592 
	`EXPECT_DEATH
(
	`D›If
(
çl£
), "DieIf");

593 *
abÜ‹d
 = 
çl£
;

594 
	}
}

597 
	$TEST_F
(
Te¡FÜD—thTe¡
, 
EXPECT_DEATH
) {

598 
boŞ
 
abÜ‹d
 = 
Œue
;

599 
	`EXPECT_NONFATAL_FAILURE
(
	`Ex³ùD—thTe¡H–³r
(&
abÜ‹d
),

601 
	`EXPECT_FALSE
(
abÜ‹d
);

602 
	}
}

605 
	$TEST_F
(
Te¡FÜD—thTe¡
, 
ASSERT_DEATH
) {

606 
boŞ
 
abÜ‹d
;

607 
	`EXPECT_FATAL_FAILURE
({

608 
abÜ‹d
 = 
Œue
;

609 
	`ASSERT_DEATH
(
	`D›If
(
çl£
), "DieIf");

610 
abÜ‹d
 = 
çl£
;

612 
	`EXPECT_TRUE
(
abÜ‹d
);

613 
	}
}

616 
	$TEST_F
(
Te¡FÜD—thTe¡
, 
SšgËEv®u©iÚ
) {

617 
x
 = 3;

618 
	`EXPECT_DEATH
(
	`D›If
((++
x
) == 4), "DieIf");

620 cÚ¡ * 
»gex
 = "DieIf";

621 cÚ¡ * 
»gex_§ve
 = 
»gex
;

622 
	`EXPECT_DEATH
(
	`D›IfLessThª
(3, 4), 
»gex
++);

623 
	`EXPECT_EQ
(
»gex_§ve
 + 1, 
»gex
);

624 
	}
}

627 
	$TEST_F
(
Te¡FÜD—thTe¡
, 
RuÇwayIsFau»
) {

628 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_DEATH
(
¡©ic_ÿ¡
<>(0), "Foo"),

630 
	}
}

634 
	$TEST_F
(
Te¡FÜD—thTe¡
, 
R‘uºIsFau»
) {

635 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_DEATH
(, "Bar"),

637 
	}
}

646 
	$TEST_F
(
Te¡FÜD—thTe¡
, 
Te¡Ex³ùDebugD—th
) {

647 
sid“fãù
 = 0;

651 cÚ¡ * 
»gex
 = "death.*DieInDebugElse12";

653 
	`EXPECT_DEBUG_DEATH
(
	`D›InDebugEl£12
(&
sid“fãù
), 
»gex
)

656 #ifdeà
NDEBUG


659 
	`EXPECT_EQ
(12, 
sid“fãù
);

664 
	`EXPECT_EQ
(0, 
sid“fãù
);

667 
	}
}

669 #ià
GTEST_OS_WINDOWS


678 
	$TEST_F
(
Te¡FÜD—thTe¡
, 
CRTDebugD—th
) {

679 
sid“fãù
 = 0;

683 cÚ¡ * 
»gex
 = "dup.* : Assertion failed";

685 
	`EXPECT_DEBUG_DEATH
(
	`D›InCRTDebugEl£12
(&
sid“fãù
), 
»gex
)

688 #ifdeà
NDEBUG


691 
	`EXPECT_EQ
(12, 
sid“fãù
);

696 
	`EXPECT_EQ
(0, 
sid“fãù
);

699 
	}
}

710 
	$TEST_F
(
Te¡FÜD—thTe¡
, 
Te¡As£¹DebugD—th
) {

711 
sid“fãù
 = 0;

713 
	`ASSERT_DEBUG_DEATH
(
	`D›InDebugEl£12
(&
sid“fãù
), "death.*DieInDebugElse12")

716 #ifdeà
NDEBUG


719 
	`EXPECT_EQ
(12, 
sid“fãù
);

724 
	`EXPECT_EQ
(0, 
sid“fãù
);

727 
	}
}

729 #iâdeà
NDEBUG


731 
	$Ex³ùDebugD—thH–³r
(
boŞ
* 
abÜ‹d
) {

732 *
abÜ‹d
 = 
Œue
;

733 
	`EXPECT_DEBUG_DEATH
(, "") << "This isƒxpectedo fail.";

734 *
abÜ‹d
 = 
çl£
;

735 
	}
}

737 #ià
GTEST_OS_WINDOWS


738 
	$TEST
(
PİUpD—thTe¡
, 
DÛsNÙShowPİUpOnAbÜt
) {

739 
	`´štf
("Thisest should be considered failing if it shows "

741 
	`fæush
(
¡dout
);

743 
	`EXPECT_DEATH
({

744 
‹¡šg
::
	`GTEST_FLAG
(
ÿtch_exû±iÚs
èğ
çl£
;

745 
	`abÜt
();

747 
	}
}

752 
	$TEST_F
(
Te¡FÜD—thTe¡
, 
Ex³ùDebugD—thDÛsNÙAbÜt
) {

753 
boŞ
 
abÜ‹d
 = 
Œue
;

754 
	`EXPECT_NONFATAL_FAILURE
(
	`Ex³ùDebugD—thH–³r
(&
abÜ‹d
), "");

755 
	`EXPECT_FALSE
(
abÜ‹d
);

756 
	}
}

758 
	$As£¹DebugD—thH–³r
(
boŞ
* 
abÜ‹d
) {

759 *
abÜ‹d
 = 
Œue
;

760 
	`GTEST_LOG_
(
INFO
) << "Before ASSERT_DEBUG_DEATH";

761 
	`ASSERT_DEBUG_DEATH
(
	`GTEST_LOG_
(
INFO
) << "In ASSERT_DEBUG_DEATH"; , "")

763 
	`GTEST_LOG_
(
INFO
) << "After ASSERT_DEBUG_DEATH";

764 *
abÜ‹d
 = 
çl£
;

765 
	}
}

769 
	$TEST_F
(
Te¡FÜD—thTe¡
, 
As£¹DebugD—thAbÜts
) {

770 
boŞ
 
abÜ‹d
;

771 
abÜ‹d
 = 
çl£
;

772 
	`EXPECT_FATAL_FAILURE
(
	`As£¹DebugD—thH–³r
(&
abÜ‹d
), "");

773 
	`EXPECT_TRUE
(
abÜ‹d
);

774 
	}
}

776 
	$TEST_F
(
Te¡FÜD—thTe¡
, 
As£¹DebugD—thAbÜts2
) {

777 
boŞ
 
abÜ‹d
;

778 
abÜ‹d
 = 
çl£
;

779 
	`EXPECT_FATAL_FAILURE
(
	`As£¹DebugD—thH–³r
(&
abÜ‹d
), "");

780 
	`EXPECT_TRUE
(
abÜ‹d
);

781 
	}
}

783 
	$TEST_F
(
Te¡FÜD—thTe¡
, 
As£¹DebugD—thAbÜts3
) {

784 
boŞ
 
abÜ‹d
;

785 
abÜ‹d
 = 
çl£
;

786 
	`EXPECT_FATAL_FAILURE
(
	`As£¹DebugD—thH–³r
(&
abÜ‹d
), "");

787 
	`EXPECT_TRUE
(
abÜ‹d
);

788 
	}
}

790 
	$TEST_F
(
Te¡FÜD—thTe¡
, 
As£¹DebugD—thAbÜts4
) {

791 
boŞ
 
abÜ‹d
;

792 
abÜ‹d
 = 
çl£
;

793 
	`EXPECT_FATAL_FAILURE
(
	`As£¹DebugD—thH–³r
(&
abÜ‹d
), "");

794 
	`EXPECT_TRUE
(
abÜ‹d
);

795 
	}
}

797 
	$TEST_F
(
Te¡FÜD—thTe¡
, 
As£¹DebugD—thAbÜts5
) {

798 
boŞ
 
abÜ‹d
;

799 
abÜ‹d
 = 
çl£
;

800 
	`EXPECT_FATAL_FAILURE
(
	`As£¹DebugD—thH–³r
(&
abÜ‹d
), "");

801 
	`EXPECT_TRUE
(
abÜ‹d
);

802 
	}
}

804 
	$TEST_F
(
Te¡FÜD—thTe¡
, 
As£¹DebugD—thAbÜts6
) {

805 
boŞ
 
abÜ‹d
;

806 
abÜ‹d
 = 
çl£
;

807 
	`EXPECT_FATAL_FAILURE
(
	`As£¹DebugD—thH–³r
(&
abÜ‹d
), "");

808 
	`EXPECT_TRUE
(
abÜ‹d
);

809 
	}
}

811 
	$TEST_F
(
Te¡FÜD—thTe¡
, 
As£¹DebugD—thAbÜts7
) {

812 
boŞ
 
abÜ‹d
;

813 
abÜ‹d
 = 
çl£
;

814 
	`EXPECT_FATAL_FAILURE
(
	`As£¹DebugD—thH–³r
(&
abÜ‹d
), "");

815 
	`EXPECT_TRUE
(
abÜ‹d
);

816 
	}
}

818 
	$TEST_F
(
Te¡FÜD—thTe¡
, 
As£¹DebugD—thAbÜts8
) {

819 
boŞ
 
abÜ‹d
;

820 
abÜ‹d
 = 
çl£
;

821 
	`EXPECT_FATAL_FAILURE
(
	`As£¹DebugD—thH–³r
(&
abÜ‹d
), "");

822 
	`EXPECT_TRUE
(
abÜ‹d
);

823 
	}
}

825 
	$TEST_F
(
Te¡FÜD—thTe¡
, 
As£¹DebugD—thAbÜts9
) {

826 
boŞ
 
abÜ‹d
;

827 
abÜ‹d
 = 
çl£
;

828 
	`EXPECT_FATAL_FAILURE
(
	`As£¹DebugD—thH–³r
(&
abÜ‹d
), "");

829 
	`EXPECT_TRUE
(
abÜ‹d
);

830 
	}
}

832 
	$TEST_F
(
Te¡FÜD—thTe¡
, 
As£¹DebugD—thAbÜts10
) {

833 
boŞ
 
abÜ‹d
;

834 
abÜ‹d
 = 
çl£
;

835 
	`EXPECT_FATAL_FAILURE
(
	`As£¹DebugD—thH–³r
(&
abÜ‹d
), "");

836 
	`EXPECT_TRUE
(
abÜ‹d
);

837 
	}
}

842 
	$Te¡Ex™Maüos
() {

843 
	`EXPECT_EXIT
(
	`_ex™
(1), 
‹¡šg
::
	`Ex™edW™hCode
(1), "");

844 
	`ASSERT_EXIT
(
	`_ex™
(42), 
‹¡šg
::
	`Ex™edW™hCode
(42), "");

846 #ià
GTEST_OS_WINDOWS


851 
	`EXPECT_EXIT
(
	`¿i£
(
SIGABRT
), 
‹¡šg
::
	`Ex™edW™hCode
(3), "") << "b_ar";

853 #–ià!
GTEST_OS_FUCHSIA


856 
	`EXPECT_EXIT
(
	`¿i£
(
SIGKILL
), 
‹¡šg
::
	`KËdBySigÇl
(SIGKILL), "") << "foo";

857 
	`ASSERT_EXIT
(
	`¿i£
(
SIGUSR2
), 
‹¡šg
::
	`KËdBySigÇl
(SIGUSR2), "") << "bar";

859 
	`EXPECT_FATAL_FAILURE
({

860 
	`ASSERT_EXIT
(
	`_ex™
(0), 
‹¡šg
::
	`KËdBySigÇl
(
SIGSEGV
), "")

866 
	`EXPECT_NONFATAL_FAILURE
({

867 
	`EXPECT_EXIT
(
	`¿i£
(
SIGSEGV
), 
‹¡šg
::
	`Ex™edW™hCode
(0), "")

870 
	}
}

872 
	$TEST_F
(
Te¡FÜD—thTe¡
, 
Ex™Maüos
) {

873 
	`Te¡Ex™Maüos
();

874 
	}
}

876 
	$TEST_F
(
Te¡FÜD—thTe¡
, 
Ex™MaüosUsšgFÜk
) {

877 
‹¡šg
::
	`GTEST_FLAG
(
d—th_‹¡_u£_fÜk
èğ
Œue
;

878 
	`Te¡Ex™Maüos
();

879 
	}
}

881 
	$TEST_F
(
Te¡FÜD—thTe¡
, 
Inv®idStyË
) {

882 
‹¡šg
::
	`GTEST_FLAG
(
d—th_‹¡_¡yË
) = "rococo";

883 
	`EXPECT_NONFATAL_FAILURE
({

884 
	`EXPECT_DEATH
(
	`_ex™
(0), "") << "This failure isƒxpected.";

886 
	}
}

888 
	$TEST_F
(
Te¡FÜD—thTe¡
, 
D—thTe¡FaedOuut
) {

889 
‹¡šg
::
	`GTEST_FLAG
(
d—th_‹¡_¡yË
) = "fast";

890 
	`EXPECT_NONFATAL_FAILURE
(

891 
	`EXPECT_DEATH
(
	`D›W™hMes§ge
("death\n"),

895 
	}
}

897 
	$TEST_F
(
Te¡FÜD—thTe¡
, 
D—thTe¡UÃx³ùedR‘uºOuut
) {

898 
‹¡šg
::
	`GTEST_FLAG
(
d—th_‹¡_¡yË
) = "fast";

899 
	`EXPECT_NONFATAL_FAILURE
(

900 
	`EXPECT_DEATH
({

901 
	`årštf
(
¡d”r
, "returning\n");

902 
	`fæush
(
¡d”r
);

908 
	}
}

910 
	$TEST_F
(
Te¡FÜD—thTe¡
, 
D—thTe¡BadEx™CodeOuut
) {

911 
‹¡šg
::
	`GTEST_FLAG
(
d—th_‹¡_¡yË
) = "fast";

912 
	`EXPECT_NONFATAL_FAILURE
(

913 
	`EXPECT_EXIT
(
	`D›W™hMes§ge
("exiting with„c 1\n"),

914 
‹¡šg
::
	`Ex™edW™hCode
(3),

920 
	}
}

922 
	$TEST_F
(
Te¡FÜD—thTe¡
, 
D—thTe¡MuÉiLšeM©chFa
) {

923 
‹¡šg
::
	`GTEST_FLAG
(
d—th_‹¡_¡yË
) = "fast";

924 
	`EXPECT_NONFATAL_FAILURE
(

925 
	`EXPECT_DEATH
(
	`D›W™hMes§ge
("line 1\nline 2\nline 3\n"),

931 
	}
}

933 
	$TEST_F
(
Te¡FÜD—thTe¡
, 
D—thTe¡MuÉiLšeM©chPass
) {

934 
‹¡šg
::
	`GTEST_FLAG
(
d—th_‹¡_¡yË
) = "fast";

935 
	`EXPECT_DEATH
(
	`D›W™hMes§ge
("line 1\nline 2\nline 3\n"),

937 
	}
}

940 şas 
	cMockD—thTe¡FaùÜy
 : 
public
 
D—thTe¡FaùÜy
 {

941 
public
:

942 
MockD—thTe¡FaùÜy
();

943 
boŞ
 
C»©e
(cÚ¡ * 
¡©em’t
,

944 
‹¡šg
::
M©ch”
<cÚ¡ 
¡d
::
¡ršg
&> 
m©ch”
, cÚ¡ * 
fe
,

945 
lše
, 
D—thTe¡
** 
‹¡
è
	gov”ride
;

948 
S‘P¬am‘”s
(
boŞ
 
ü—‹
, 
D—thTe¡
::
Te¡RŞe
 
rŞe
,

949 
¡©us
, 
boŞ
 
·s£d
);

952 
AssumeRŞeC®ls
(ècÚ¡ {  
	gassume_rŞe_ÿÎs_
; }

953 
Wa™C®ls
(ècÚ¡ {  
	gwa™_ÿÎs_
; }

954 
size_t
 
Pas£dC®ls
(ècÚ¡ {  
	g·s£d_¬gs_
.
size
(); }

955 
boŞ
 
Pas£dArgum’t
(
n
) const {

956  
	g·s£d_¬gs_
[
¡©ic_ÿ¡
<
size_t
>(
n
)];

958 
size_t
 
AbÜtC®ls
(ècÚ¡ {  
	gabÜt_¬gs_
.
size
(); }

959 
	gD—thTe¡
::
AbÜtR—sÚ
 
AbÜtArgum’t
(
n
) const {

960  
abÜt_¬gs_
[
¡©ic_ÿ¡
<
size_t
>(
n
)];

962 
boŞ
 
Te¡D–‘ed
(ècÚ¡ {  
	g‹¡_d–‘ed_
; }

964 
	g´iv©e
:

965 
ä›nd
 
şass
 
MockD—thTe¡
;

968 
boŞ
 
	gü—‹_
;

970 
	gD—thTe¡
::
Te¡RŞe
 
rŞe_
;

972 
	g¡©us_
;

974 
boŞ
 
	g·s£d_
;

977 
	gassume_rŞe_ÿÎs_
;

979 
	gwa™_ÿÎs_
;

982 
	g¡d
::
veùÜ
<
boŞ
> 
·s£d_¬gs_
;

985 
	g¡d
::
veùÜ
<
D—thTe¡
::
AbÜtR—sÚ
> 
abÜt_¬gs_
;

988 
boŞ
 
	g‹¡_d–‘ed_
;

996 şas 
	cMockD—thTe¡
 : 
public
 
D—thTe¡
 {

997 
public
:

998 
MockD—thTe¡
(
MockD—thTe¡FaùÜy
 *
·»Á
,

999 
Te¡RŞe
 
rŞe
, 
¡©us
, 
boŞ
 
·s£d
) :

1000 
·»Á_
(
·»Á
), 
rŞe_
(
rŞe
), 
¡©us_
(
¡©us
), 
·s£d_
(
·s£d
) {

1002 ~
MockD—thTe¡
(è
	gov”ride
 { 
	g·»Á_
->
	g‹¡_d–‘ed_
 = 
Œue
; }

1003 
Te¡RŞe
 
AssumeRŞe
(è
	gov”ride
 {

1004 ++
	g·»Á_
->
	gassume_rŞe_ÿÎs_
;

1005  
	grŞe_
;

1007 
Wa™
(è
	gov”ride
 {

1008 ++
	g·»Á_
->
	gwa™_ÿÎs_
;

1009  
	g¡©us_
;

1011 
boŞ
 
Pas£d
(boŞ 
ex™_¡©us_ok
è
	gov”ride
 {

1012 
	g·»Á_
->
	g·s£d_¬gs_
.
push_back
(
ex™_¡©us_ok
);

1013  
	g·s£d_
;

1015 
AbÜt
(
AbÜtR—sÚ
 
»asÚ
è
	gov”ride
 {

1016 
	g·»Á_
->
	gabÜt_¬gs_
.
push_back
(
»asÚ
);

1019 
	g´iv©e
:

1020 
MockD—thTe¡FaùÜy
* cÚ¡ 
·»Á_
;

1021 cÚ¡ 
Te¡RŞe
 
	grŞe_
;

1022 cÚ¡ 
	g¡©us_
;

1023 cÚ¡ 
boŞ
 
	g·s£d_
;

1028 
	gMockD—thTe¡FaùÜy
::
	$MockD—thTe¡FaùÜy
()

1029 : 
	`ü—‹_
(
Œue
),

1030 
	`rŞe_
(
D—thTe¡
::
OVERSEE_TEST
),

1031 
	`¡©us_
(0),

1032 
	`·s£d_
(
Œue
),

1033 
	`assume_rŞe_ÿÎs_
(0),

1034 
	`wa™_ÿÎs_
(0),

1035 
	`·s£d_¬gs_
(),

1036 
	$abÜt_¬gs_
() {

1037 
	}
}

1041 
	gMockD—thTe¡FaùÜy
::
	$S‘P¬am‘”s
(
boŞ
 
ü—‹
,

1042 
D—thTe¡
::
Te¡RŞe
 
rŞe
,

1043 
¡©us
, 
boŞ
 
·s£d
) {

1044 
ü—‹_
 = 
ü—‹
;

1045 
rŞe_
 = 
rŞe
;

1046 
¡©us_
 = 
¡©us
;

1047 
·s£d_
 = 
·s£d
;

1049 
assume_rŞe_ÿÎs_
 = 0;

1050 
wa™_ÿÎs_
 = 0;

1051 
·s£d_¬gs_
.
	`ş—r
();

1052 
abÜt_¬gs_
.
	`ş—r
();

1053 
	}
}

1059 
boŞ
 
	gMockD—thTe¡FaùÜy
::
C»©e
(

1060 cÚ¡ * , 
‹¡šg
::
M©ch”
<cÚ¡ 
¡d
::
¡ršg
&> ,

1061 cÚ¡ * , , 
D—thTe¡
** 
‹¡
) {

1062 
	g‹¡_d–‘ed_
 = 
çl£
;

1063 ià(
	gü—‹_
) {

1064 *
	g‹¡
 = 
Ãw
 
MockD—thTe¡
(
this
, 
rŞe_
, 
¡©us_
, 
·s£d_
);

1066 *
	g‹¡
 = 
nuÎ±r
;

1068  
	gŒue
;

1074 şas 
	cMaüoLogicD—thTe¡
 : 
public
 
‹¡šg
::
Te¡
 {

1075 
´Ùeùed
:

1076 
‹¡šg
::
š‹º®
::
R•ÏûD—thTe¡FaùÜy
* 
»¶aûr_
;

1077 
MockD—thTe¡FaùÜy
* 
	gçùÜy_
;

1079 
S‘UpTe¡Su™e
() {

1080 
	gçùÜy_
 = 
Ãw
 
MockD—thTe¡FaùÜy
;

1081 
	g»¶aûr_
 = 
Ãw
 
‹¡šg
::
š‹º®
::
R•ÏûD—thTe¡FaùÜy
(
çùÜy_
);

1084 
T—rDownTe¡Su™e
() {

1085 
d–‘e
 
	g»¶aûr_
;

1086 
	g»¶aûr_
 = 
nuÎ±r
;

1087 
d–‘e
 
	gçùÜy_
;

1088 
	gçùÜy_
 = 
nuÎ±r
;

1094 
RunR‘uºšgD—thTe¡
(
boŞ
* 
æag
) {

1095 
ASSERT_DEATH
({

1096 *
æag
 = 
Œue
;

1102 
	g‹¡šg
::
š‹º®
::
R•ÏûD—thTe¡FaùÜy
* 
MaüoLogicD—thTe¡
::
»¶aûr_
 =

1103 
nuÎ±r
;

1104 
MockD—thTe¡FaùÜy
* 
	gMaüoLogicD—thTe¡
::
çùÜy_
 = 
nuÎ±r
;

1107 
	$TEST_F
(
MaüoLogicD—thTe¡
, 
NÙhšgH­³ns
) {

1108 
boŞ
 
æag
 = 
çl£
;

1109 
çùÜy_
->
	`S‘P¬am‘”s
(
çl£
, 
D—thTe¡
::
OVERSEE_TEST
, 0, 
Œue
);

1110 
	`EXPECT_DEATH
(
æag
 = 
Œue
, "");

1111 
	`EXPECT_FALSE
(
æag
);

1112 
	`EXPECT_EQ
(0, 
çùÜy_
->
	`AssumeRŞeC®ls
());

1113 
	`EXPECT_EQ
(0, 
çùÜy_
->
	`Wa™C®ls
());

1114 
	`EXPECT_EQ
(0U, 
çùÜy_
->
	`Pas£dC®ls
());

1115 
	`EXPECT_EQ
(0U, 
çùÜy_
->
	`AbÜtC®ls
());

1116 
	`EXPECT_FALSE
(
çùÜy_
->
	`Te¡D–‘ed
());

1117 
	}
}

1122 
	$TEST_F
(
MaüoLogicD—thTe¡
, 
ChdEx™sSucûssfuÎy
) {

1123 
boŞ
 
æag
 = 
çl£
;

1124 
çùÜy_
->
	`S‘P¬am‘”s
(
Œue
, 
D—thTe¡
::
OVERSEE_TEST
, 0,rue);

1125 
	`EXPECT_DEATH
(
æag
 = 
Œue
, "");

1126 
	`EXPECT_FALSE
(
æag
);

1127 
	`EXPECT_EQ
(1, 
çùÜy_
->
	`AssumeRŞeC®ls
());

1128 
	`EXPECT_EQ
(1, 
çùÜy_
->
	`Wa™C®ls
());

1129 
	`ASSERT_EQ
(1U, 
çùÜy_
->
	`Pas£dC®ls
());

1130 
	`EXPECT_FALSE
(
çùÜy_
->
	`Pas£dArgum’t
(0));

1131 
	`EXPECT_EQ
(0U, 
çùÜy_
->
	`AbÜtC®ls
());

1132 
	`EXPECT_TRUE
(
çùÜy_
->
	`Te¡D–‘ed
());

1133 
	}
}

1137 
	$TEST_F
(
MaüoLogicD—thTe¡
, 
ChdEx™sUnsucûssfuÎy
) {

1138 
boŞ
 
æag
 = 
çl£
;

1139 
çùÜy_
->
	`S‘P¬am‘”s
(
Œue
, 
D—thTe¡
::
OVERSEE_TEST
, 1,rue);

1140 
	`EXPECT_DEATH
(
æag
 = 
Œue
, "");

1141 
	`EXPECT_FALSE
(
æag
);

1142 
	`EXPECT_EQ
(1, 
çùÜy_
->
	`AssumeRŞeC®ls
());

1143 
	`EXPECT_EQ
(1, 
çùÜy_
->
	`Wa™C®ls
());

1144 
	`ASSERT_EQ
(1U, 
çùÜy_
->
	`Pas£dC®ls
());

1145 
	`EXPECT_TRUE
(
çùÜy_
->
	`Pas£dArgum’t
(0));

1146 
	`EXPECT_EQ
(0U, 
çùÜy_
->
	`AbÜtC®ls
());

1147 
	`EXPECT_TRUE
(
çùÜy_
->
	`Te¡D–‘ed
());

1148 
	}
}

1153 
	$TEST_F
(
MaüoLogicD—thTe¡
, 
ChdP”fÜmsR‘uº
) {

1154 
boŞ
 
æag
 = 
çl£
;

1155 
çùÜy_
->
	`S‘P¬am‘”s
(
Œue
, 
D—thTe¡
::
EXECUTE_TEST
, 0,rue);

1156 
	`RunR‘uºšgD—thTe¡
(&
æag
);

1157 
	`EXPECT_TRUE
(
æag
);

1158 
	`EXPECT_EQ
(1, 
çùÜy_
->
	`AssumeRŞeC®ls
());

1159 
	`EXPECT_EQ
(0, 
çùÜy_
->
	`Wa™C®ls
());

1160 
	`EXPECT_EQ
(0U, 
çùÜy_
->
	`Pas£dC®ls
());

1161 
	`EXPECT_EQ
(1U, 
çùÜy_
->
	`AbÜtC®ls
());

1162 
	`EXPECT_EQ
(
D—thTe¡
::
TEST_ENCOUNTERED_RETURN_STATEMENT
,

1163 
çùÜy_
->
	`AbÜtArgum’t
(0));

1164 
	`EXPECT_TRUE
(
çùÜy_
->
	`Te¡D–‘ed
());

1165 
	}
}

1169 
	$TEST_F
(
MaüoLogicD—thTe¡
, 
ChdDÛsNÙD›
) {

1170 
boŞ
 
æag
 = 
çl£
;

1171 
çùÜy_
->
	`S‘P¬am‘”s
(
Œue
, 
D—thTe¡
::
EXECUTE_TEST
, 0,rue);

1172 
	`EXPECT_DEATH
(
æag
 = 
Œue
, "");

1173 
	`EXPECT_TRUE
(
æag
);

1174 
	`EXPECT_EQ
(1, 
çùÜy_
->
	`AssumeRŞeC®ls
());

1175 
	`EXPECT_EQ
(0, 
çùÜy_
->
	`Wa™C®ls
());

1176 
	`EXPECT_EQ
(0U, 
çùÜy_
->
	`Pas£dC®ls
());

1182 
	`ASSERT_EQ
(2U, 
çùÜy_
->
	`AbÜtC®ls
());

1183 
	`EXPECT_EQ
(
D—thTe¡
::
TEST_DID_NOT_DIE
,

1184 
çùÜy_
->
	`AbÜtArgum’t
(0));

1185 
	`EXPECT_EQ
(
D—thTe¡
::
TEST_ENCOUNTERED_RETURN_STATEMENT
,

1186 
çùÜy_
->
	`AbÜtArgum’t
(1));

1187 
	`EXPECT_TRUE
(
çùÜy_
->
	`Te¡D–‘ed
());

1188 
	}
}

1192 
	$TEST
(
SucûssRegi¡¿tiÚD—thTe¡
, 
NoSucûssP¬t
) {

1193 
	`EXPECT_DEATH
(
	`_ex™
(1), "");

1194 
	`EXPECT_EQ
(0, 
	`G‘Un™Te¡Im¶
()->
	`cu¼’t_‹¡_»suÉ
()->
	`tÙ®_·¹_couÁ
());

1195 
	}
}

1197 
	$TEST
(
SŒ—mšgAs£¹iÚsD—thTe¡
, 
D—thTe¡
) {

1198 
	`EXPECT_DEATH
(
	`_ex™
(1), "") << "unexpected failure";

1199 
	`ASSERT_DEATH
(
	`_ex™
(1), "") << "unexpected failure";

1200 
	`EXPECT_NONFATAL_FAILURE
({

1201 
	`EXPECT_DEATH
(
	`_ex™
(0), "") << "expected failure";

1203 
	`EXPECT_FATAL_FAILURE
({

1204 
	`ASSERT_DEATH
(
	`_ex™
(0), "") << "expected failure";

1206 
	}
}

1210 
	$TEST
(
G‘La¡E¼noDesütiÚ
, 
G‘La¡E¼noDesütiÚWÜks
) {

1211 
”ºo
 = 
ENOENT
;

1212 
	`EXPECT_STRNE
("", 
	`G‘La¡E¼noDesütiÚ
().
	`c_¡r
());

1213 
”ºo
 = 0;

1214 
	`EXPECT_STREQ
("", 
	`G‘La¡E¼noDesütiÚ
().
	`c_¡r
());

1215 
	}
}

1217 #ià
GTEST_OS_WINDOWS


1218 
	$TEST
(
AutoHªdËTe¡
, 
AutoHªdËWÜks
) {

1219 
HANDLE
 
hªdË
 = ::
	`C»©eEv’t
(
NULL
, 
FALSE
, FALSE, NULL);

1220 
	`ASSERT_NE
(
INVALID_HANDLE_VALUE
, 
hªdË
);

1223 
‹¡šg
::
š‹º®
::
AutoHªdË
 
	`auto_hªdË
(
hªdË
);

1224 
	`EXPECT_EQ
(
hªdË
, 
auto_hªdË
.
	`G‘
());

1228 
auto_hªdË
.
	`Re£t
();

1229 
	`EXPECT_EQ
(
INVALID_HANDLE_VALUE
, 
auto_hªdË
.
	`G‘
());

1233 
hªdË
 = ::
	`C»©eEv’t
(
NULL
, 
FALSE
, FALSE, NULL);

1234 
	`ASSERT_NE
(
INVALID_HANDLE_VALUE
, 
hªdË
);

1235 
auto_hªdË
.
	`Re£t
(
hªdË
);

1236 
	`EXPECT_EQ
(
hªdË
, 
auto_hªdË
.
	`G‘
());

1239 
‹¡šg
::
š‹º®
::
AutoHªdË
 
auto_hªdË2
;

1240 
	`EXPECT_EQ
(
INVALID_HANDLE_VALUE
, 
auto_hªdË2
.
	`G‘
());

1241 
	}
}

1244 #ià
GTEST_OS_WINDOWS


1245 
	t__št64
 
	tBigge¡P¬§bË
;

1246 sigÃd 
	t__št64
 
	tBigge¡SigÃdP¬§bË
;

1248 
	tBigge¡P¬§bË
;

1249 sigÃd 
	tBigge¡SigÃdP¬§bË
;

1254 cÚ¡ 
Bigge¡P¬§bË
 
	gkBigge¡P¬§bËMax
 = 
ULLONG_MAX
;

1255 cÚ¡ 
Bigge¡SigÃdP¬§bË
 
	gkBigge¡SigÃdP¬§bËMax
 = 
LLONG_MAX
;

1257 
	$TEST
(
P¬£N©u¿lNumb”Te¡
, 
RejeùsInv®idFÜm©
) {

1258 
Bigge¡P¬§bË
 
»suÉ
 = 0;

1261 
	`EXPECT_FALSE
(
	`P¬£N©u¿lNumb”
("nÚ-numb” sŒšg", &
»suÉ
));

1264 
	`EXPECT_FALSE
(
	`P¬£N©u¿lNumb”
(" 123", &
»suÉ
));

1267 
	`EXPECT_FALSE
(
	`P¬£N©u¿lNumb”
("-123", &
»suÉ
));

1270 
	`EXPECT_FALSE
(
	`P¬£N©u¿lNumb”
("+123", &
»suÉ
));

1271 
”ºo
 = 0;

1272 
	}
}

1274 
	$TEST
(
P¬£N©u¿lNumb”Te¡
, 
RejeùsOv”æownNumb”s
) {

1275 
Bigge¡P¬§bË
 
»suÉ
 = 0;

1277 
	`EXPECT_FALSE
(
	`P¬£N©u¿lNumb”
("99999999999999999999999", &
»suÉ
));

1279 sigÃd 
ch¬_»suÉ
 = 0;

1280 
	`EXPECT_FALSE
(
	`P¬£N©u¿lNumb”
("200", &
ch¬_»suÉ
));

1281 
”ºo
 = 0;

1282 
	}
}

1284 
	$TEST
(
P¬£N©u¿lNumb”Te¡
, 
Acû±sV®idNumb”s
) {

1285 
Bigge¡P¬§bË
 
»suÉ
 = 0;

1287 
»suÉ
 = 0;

1288 
	`ASSERT_TRUE
(
	`P¬£N©u¿lNumb”
("123", &
»suÉ
));

1289 
	`EXPECT_EQ
(123U, 
»suÉ
);

1292 
»suÉ
 = 1;

1293 
	`ASSERT_TRUE
(
	`P¬£N©u¿lNumb”
("0", &
»suÉ
));

1294 
	`EXPECT_EQ
(0U, 
»suÉ
);

1296 
»suÉ
 = 1;

1297 
	`ASSERT_TRUE
(
	`P¬£N©u¿lNumb”
("00000", &
»suÉ
));

1298 
	`EXPECT_EQ
(0U, 
»suÉ
);

1299 
	}
}

1301 
	$TEST
(
P¬£N©u¿lNumb”Te¡
, 
Acû±sTy³Lim™s
) {

1302 
Mes§ge
 
msg
;

1303 
msg
 << 
kBigge¡P¬§bËMax
;

1305 
Bigge¡P¬§bË
 
»suÉ
 = 0;

1306 
	`EXPECT_TRUE
(
	`P¬£N©u¿lNumb”
(
msg
.
	`G‘SŒšg
(), &
»suÉ
));

1307 
	`EXPECT_EQ
(
kBigge¡P¬§bËMax
, 
»suÉ
);

1309 
Mes§ge
 
msg2
;

1310 
msg2
 << 
kBigge¡SigÃdP¬§bËMax
;

1312 
Bigge¡SigÃdP¬§bË
 
sigÃd_»suÉ
 = 0;

1313 
	`EXPECT_TRUE
(
	`P¬£N©u¿lNumb”
(
msg2
.
	`G‘SŒšg
(), &
sigÃd_»suÉ
));

1314 
	`EXPECT_EQ
(
kBigge¡SigÃdP¬§bËMax
, 
sigÃd_»suÉ
);

1316 
Mes§ge
 
msg3
;

1317 
msg3
 << 
INT_MAX
;

1319 
št_»suÉ
 = 0;

1320 
	`EXPECT_TRUE
(
	`P¬£N©u¿lNumb”
(
msg3
.
	`G‘SŒšg
(), &
št_»suÉ
));

1321 
	`EXPECT_EQ
(
INT_MAX
, 
št_»suÉ
);

1323 
Mes§ge
 
msg4
;

1324 
msg4
 << 
UINT_MAX
;

1326 
ušt_»suÉ
 = 0;

1327 
	`EXPECT_TRUE
(
	`P¬£N©u¿lNumb”
(
msg4
.
	`G‘SŒšg
(), &
ušt_»suÉ
));

1328 
	`EXPECT_EQ
(
UINT_MAX
, 
ušt_»suÉ
);

1329 
	}
}

1331 
	$TEST
(
P¬£N©u¿lNumb”Te¡
, 
WÜksFÜShÜ‹rIÁeg”s
) {

1332 
shÜt_»suÉ
 = 0;

1333 
	`ASSERT_TRUE
(
	`P¬£N©u¿lNumb”
("123", &
shÜt_»suÉ
));

1334 
	`EXPECT_EQ
(123, 
shÜt_»suÉ
);

1336 sigÃd 
ch¬_»suÉ
 = 0;

1337 
	`ASSERT_TRUE
(
	`P¬£N©u¿lNumb”
("123", &
ch¬_»suÉ
));

1338 
	`EXPECT_EQ
(123, 
ch¬_»suÉ
);

1339 
	}
}

1341 #ià
GTEST_OS_WINDOWS


1342 
	$TEST
(
EnvœÚm’tTe¡
, 
HªdËF™sIÁoSizeT
) {

1343 
	`ASSERT_TRUE
((
HANDLE
è<ğ(
size_t
));

1344 
	}
}

1349 
	$TEST
(
CÚd™iÚ®D—thMaüosD—thTe¡
, 
Ex³ùsD—thWh’D—thTe¡sAvaabË
) {

1350 
	`EXPECT_DEATH_IF_SUPPORTED
(
	`D›Inside
("CondDeathTestExpectMacro"),

1352 
	`ASSERT_DEATH_IF_SUPPORTED
(
	`D›Inside
("CondDeathTestAssertMacro"),

1356 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_DEATH_IF_SUPPORTED
(;, ""), "");

1357 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_DEATH_IF_SUPPORTED
(;, ""), "");

1358 
	}
}

1360 
	$TEST
(
InD—thTe¡ChdD—thTe¡
, 
R•ÜtsD—thTe¡CÜ»ùlyInFa¡StyË
) {

1361 
‹¡šg
::
	`GTEST_FLAG
(
d—th_‹¡_¡yË
) = "fast";

1362 
	`EXPECT_FALSE
(
	`InD—thTe¡Chd
());

1363 
	`EXPECT_DEATH
({

1364 
	`årštf
(
¡d”r
, 
	`InD—thTe¡Chd
() ? "Inside" : "Outside");

1365 
	`fæush
(
¡d”r
);

1366 
	`_ex™
(1);

1368 
	}
}

1370 
	$TEST
(
InD—thTe¡ChdD—thTe¡
, 
R•ÜtsD—thTe¡CÜ»ùlyInTh»adSaãStyË
) {

1371 
‹¡šg
::
	`GTEST_FLAG
(
d—th_‹¡_¡yË
) = "threadsafe";

1372 
	`EXPECT_FALSE
(
	`InD—thTe¡Chd
());

1373 
	`EXPECT_DEATH
({

1374 
	`årštf
(
¡d”r
, 
	`InD—thTe¡Chd
() ? "Inside" : "Outside");

1375 
	`fæush
(
¡d”r
);

1376 
	`_ex™
(1);

1378 
	}
}

1380 
	$D›W™hMes§ge
(cÚ¡ * 
mes§ge
) {

1381 
	`åuts
(
mes§ge
, 
¡d”r
);

1382 
	`fæush
(
¡d”r
);

1383 
	`_ex™
(1);

1384 
	}
}

1386 
	$TEST
(
M©ch”D—thTe¡
, 
DÛsNÙB»akB¬eRegexM©chšg
) {

1389 #ià
GTEST_USES_POSIX_RE


1390 
	`EXPECT_DEATH
(
	`D›W™hMes§ge
("O, I die, Horatio."), "I d[aeiou]e");

1392 
	`EXPECT_DEATH
(
	`D›W™hMes§ge
("O, I die, Horatio."), "I di?e");

1394 
	}
}

1396 
	$TEST
(
M©ch”D—thTe¡
, 
MÚomÜphicM©ch”M©ches
) {

1397 
	`EXPECT_DEATH
(
	`D›W™hMes§ge
("Behind O, I‡m slain!"),

1398 
M©ch”
<cÚ¡ 
¡d
::
¡ršg
&>(
	`CÚšsRegex
("I‡m slain")));

1399 
	}
}

1401 
	$TEST
(
M©ch”D—thTe¡
, 
MÚomÜphicM©ch”DÛsNÙM©ch
) {

1402 
	`EXPECT_NONFATAL_FAILURE
(

1403 
	`EXPECT_DEATH
(

1404 
	`D›W™hMes§ge
("Behind O, I‡m slain!"),

1405 
M©ch”
<cÚ¡ 
¡d
::
¡ršg
&>(
	`CÚšsRegex
("Ow, I‡m slain"))),

1407 
	}
}

1409 
	$TEST
(
M©ch”D—thTe¡
, 
PŞymÜphicM©ch”M©ches
) {

1410 
	`EXPECT_DEATH
(
	`D›W™hMes§ge
("The„est is silence."),

1411 
	`CÚšsRegex
("rest is silence"));

1412 
	}
}

1414 
	$TEST
(
M©ch”D—thTe¡
, 
PŞymÜphicM©ch”DÛsNÙM©ch
) {

1415 
	`EXPECT_NONFATAL_FAILURE
(

1416 
	`EXPECT_DEATH
(
	`D›W™hMes§ge
("The„est is silence."),

1417 
	`CÚšsRegex
("rest is science")),

1419 
	}
}

1425 
	gÇme¥aû
 {

1427 
usšg
 
	g‹¡šg
::
š‹º®
::
C­tu»Std”r
;

1428 
usšg
 
	g‹¡šg
::
š‹º®
::
G‘C­tu»dStd”r
;

1433 
TEST
(
CÚd™iÚ®D—thMaüosTe¡
, 
W¬nsWh’D—thTe¡sNÙAvaabË
) {

1436 
C­tu»Std”r
();

1437 
EXPECT_DEATH_IF_SUPPORTED
(;, "");

1438 
	g¡d
::
¡ršg
 
ouut
 = 
G‘C­tu»dStd”r
();

1439 
ASSERT_TRUE
(
NULL
 !ğ
¡r¡r
(
ouut
.
c_¡r
(),

1441 
ASSERT_TRUE
(
NULL
 !ğ
¡r¡r
(
ouut
.
c_¡r
(), ";"));

1444 
C­tu»Std”r
();

1445 
EXPECT_DEATH_IF_SUPPORTED
(;, "") << "streamed message";

1446 
	gouut
 = 
G‘C­tu»dStd”r
();

1447 
ASSERT_TRUE
(
NULL
 =ğ
¡r¡r
(
ouut
.
c_¡r
(), "streamed message"));

1449 
C­tu»Std”r
();

1450 
ASSERT_DEATH_IF_SUPPORTED
(;, "");

1451 
	gouut
 = 
G‘C­tu»dStd”r
();

1452 
ASSERT_TRUE
(
NULL
 !ğ
¡r¡r
(
ouut
.
c_¡r
(),

1454 
ASSERT_TRUE
(
NULL
 !ğ
¡r¡r
(
ouut
.
c_¡r
(), ";"));

1456 
C­tu»Std”r
();

1457 
ASSERT_DEATH_IF_SUPPORTED
(;, "") << "streamed message";

1458 
	gouut
 = 
G‘C­tu»dStd”r
();

1459 
ASSERT_TRUE
(
NULL
 =ğ
¡r¡r
(
ouut
.
c_¡r
(), "streamed message"));

1462 
FuncW™hAs£¹
(* 
n
) {

1463 
ASSERT_DEATH_IF_SUPPORTED
(;, "");

1464 (*
	gn
)++;

1469 
TEST
(
CÚd™iÚ®D—thMaüosTe¡
, 
As£¹D—tDÛsNÙR‘uºhIfUnsuµÜ‹d
) {

1470 
	gn
 = 0;

1471 
FuncW™hAs£¹
(&
n
);

1472 
EXPECT_EQ
(1, 
n
);

1479 
	gÇme¥aû
 {

1482 #ifdeà
__GNUC__


1483 #´agm¨
GCC
 
dŸgno¡ic
 
push


1484 #´agm¨
GCC
 
dŸgno¡ic
 
ignÜed
 "-Wdangling-else"

1485 #´agm¨
GCC
 
dŸgno¡ic
 
ignÜed
 "-Wempty-body"

1486 #´agm¨
GCC
 
dŸgno¡ic
 
ignÜed
 "-Wpragmas"

1493 
TEST
(
CÚd™iÚ®D—thMaüosSyÁaxD—thTe¡
, 
SšgËS‹m’t
) {

1494 ià(
AlwaysF®£
())

1496 
ASSERT_DEATH_IF_SUPPORTED
(, "");

1498 ià(
AlwaysTrue
())

1499 
EXPECT_DEATH_IF_SUPPORTED
(
_ex™
(1), "");

1505 ià(
AlwaysF®£
())

1506 
ASSERT_DEATH_IF_SUPPORTED
(, "") << "did‚ot die";

1508 ià(
AlwaysF®£
())

1511 
EXPECT_DEATH_IF_SUPPORTED
(
_ex™
(1), "") << 1 << 2 << 3;

1513 #ifdeà
__GNUC__


1514 #´agm¨
GCC
 
dŸgno¡ic
 
pİ


1519 
TEST
(
CÚd™iÚ®D—thMaüosSyÁaxD—thTe¡
, 
Sw™chS‹m’t
) {

1522 
GTEST_DISABLE_MSC_WARNINGS_PUSH_
(4065)

1526 
ASSERT_DEATH_IF_SUPPORTED
(
_ex™
(1), "")

1531 
EXPECT_DEATH_IF_SUPPORTED
(
_ex™
(1), "") << "exit in switch case";

1533 
GTEST_DISABLE_MSC_WARNINGS_POP_
()

1538 
TEST
(
NÙAD—thTe¡
, 
Te¡
) {

1539 
SUCCEED
();

	@third_party/googletest/googletest/test/googletest-death-test_ex_test.cc

33 
	~"g‹¡/g‹¡-d—th-‹¡.h
"

34 
	~"g‹¡/g‹¡.h
"

36 #ià
GTEST_HAS_DEATH_TEST


38 #ià
GTEST_HAS_SEH


39 
	~<wšdows.h
>

42 
	~"g‹¡/g‹¡-¥i.h
"

44 #ià
GTEST_HAS_EXCEPTIONS


46 
	~<exû±iÚ
>

50 
	$TEST
(
CxxExû±iÚD—thTe¡
, 
Exû±iÚIsFau»
) {

51 
Œy
 {

52 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_DEATH
(
throw
 1, ""), "threw‡nƒxception");

53 } 
	`ÿtch
 (...) {

54 
	`FAIL
() << "Anƒxceptionƒscaped‡ deathest macro invocation "

56 << (
‹¡šg
::
	`GTEST_FLAG
(
ÿtch_exû±iÚs
) ? "enabled" : "disabled");

58 
	}
}

60 şas 
	cTe¡Exû±iÚ
 : 
public
 
¡d
::
exû±iÚ
 {

61 
public
:

62 cÚ¡ * 
	$wh©
(ècÚ¡ 
nÛxû±
 
ov”ride
 {  "exceptional message"; }

63 
	}
};

65 
	$TEST
(
CxxExû±iÚD—thTe¡
, 
PrštsMes§geFÜStdExû±iÚs
) {

67 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_DEATH
(
throw
 
	`Te¡Exû±iÚ
(), ""),

70 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_DEATH
(
throw
 
	`Te¡Exû±iÚ
(), ""),

71 
__FILE__
);

72 
	}
}

75 #ià
GTEST_HAS_SEH


79 
	$TEST
(
SehExû±iÚD—sTe¡
, 
C©chExû±iÚsDÛsNÙIÁ”ã»
) {

80 
	`EXPECT_DEATH
(
	`Rai£Exû±iÚ
(42, 0x0, 0, 
NULL
), "")

82 << (
‹¡šg
::
	`GTEST_FLAG
(
ÿtch_exû±iÚs
) ? "enabled" : "disabled");

83 
	}
}

88 
	$maš
(
¬gc
, ** 
¬gv
) {

89 
‹¡šg
::
	`In™GoogËTe¡
(&
¬gc
, 
¬gv
);

90 
‹¡šg
::
	`GTEST_FLAG
(
ÿtch_exû±iÚs
èğ
GTEST_ENABLE_CATCH_EXCEPTIONS_
 != 0;

91  
	`RUN_ALL_TESTS
();

92 
	}
}

	@third_party/googletest/googletest/test/googletest-env-var-test_.cc

34 
	~<io¡»am
>

36 
	~"g‹¡/g‹¡.h
"

37 
	~"¤c/g‹¡-š‹º®-šl.h
"

39 
	gusšg
 ::
¡d
::
cout
;

41 
Çme¥aû
 
	g‹¡šg
 {

46 
TEST
(
GTe¡EnvV¬Te¡
, 
Dummy
) {

49 
PrštFÏg
(cÚ¡ * 
æag
) {

50 ià(
¡rcmp
(
æag
, "break_on_failure") == 0) {

51 
cout
 << 
GTEST_FLAG
(
b»ak_Ú_çu»
);

55 ià(
¡rcmp
(
æag
, "catch_exceptions") == 0) {

56 
cout
 << 
GTEST_FLAG
(
ÿtch_exû±iÚs
);

60 ià(
¡rcmp
(
æag
, "color") == 0) {

61 
cout
 << 
GTEST_FLAG
(
cŞÜ
);

65 ià(
¡rcmp
(
æag
, "death_test_style") == 0) {

66 
cout
 << 
GTEST_FLAG
(
d—th_‹¡_¡yË
);

70 ià(
¡rcmp
(
æag
, "death_test_use_fork") == 0) {

71 
cout
 << 
GTEST_FLAG
(
d—th_‹¡_u£_fÜk
);

75 ià(
¡rcmp
(
æag
, "fail_fast") == 0) {

76 
cout
 << 
GTEST_FLAG
(
ç_ç¡
);

80 ià(
¡rcmp
(
æag
, "filter") == 0) {

81 
cout
 << 
GTEST_FLAG
(
f‹r
);

85 ià(
¡rcmp
(
æag
, "output") == 0) {

86 
cout
 << 
GTEST_FLAG
(
ouut
);

90 ià(
¡rcmp
(
æag
, "brief") == 0) {

91 
cout
 << 
GTEST_FLAG
(
br›f
);

95 ià(
¡rcmp
(
æag
, "print_time") == 0) {

96 
cout
 << 
GTEST_FLAG
(
´št_time
);

100 ià(
¡rcmp
(
æag
, "repeat") == 0) {

101 
cout
 << 
GTEST_FLAG
(
»³©
);

105 ià(
¡rcmp
(
æag
, "stack_trace_depth") == 0) {

106 
cout
 << 
GTEST_FLAG
(
¡ack_Œaû_d•th
);

110 ià(
¡rcmp
(
æag
, "throw_on_failure") == 0) {

111 
cout
 << 
GTEST_FLAG
(
throw_Ú_çu»
);

115 
	gcout
 << "Inv®id fÏg‚am" << 
	gæag


117 
ex™
(1);

122 
	$maš
(
¬gc
, ** 
¬gv
) {

123 
‹¡šg
::
	`In™GoogËTe¡
(&
¬gc
, 
¬gv
);

125 ià(
¬gc
 != 2) {

126 
cout
 << "Usage: googletest-env-var-test_ NAME_OF_FLAG\n";

130 
‹¡šg
::
	`PrštFÏg
(
¬gv
[1]);

132 
	}
}

	@third_party/googletest/googletest/test/googletest-failfast-unittest_.cc

40 
	~"g‹¡/g‹¡.h
"

42 
	gÇme¥aû
 {

46 şas 
	cHasFixtu»Te¡
 : 
public
 
‹¡šg
::
Te¡
 {};

48 
	$TEST_F
(
HasFixtu»Te¡
, 
Te¡0
è{
	}
}

50 
	$TEST_F
(
HasFixtu»Te¡
, 
Te¡1
è{ 
	`FAIL
(è<< "Ex³ùed fau»."; 
	}
}

52 
	$TEST_F
(
HasFixtu»Te¡
, 
Te¡2
è{ 
	`FAIL
(è<< "Ex³ùed fau»."; 
	}
}

54 
	$TEST_F
(
HasFixtu»Te¡
, 
Te¡3
è{ 
	`FAIL
(è<< "Ex³ùed fau»."; 
	}
}

56 
	$TEST_F
(
HasFixtu»Te¡
, 
Te¡4
è{ 
	`FAIL
(è<< "Ex³ùed fau»."; 
	}
}

60 
	$TEST
(
HasSim¶eTe¡
, 
Te¡0
è{
	}
}

62 
	$TEST
(
HasSim¶eTe¡
, 
Te¡1
è{ 
	`FAIL
(è<< "Ex³ùed fau»."; 
	}
}

64 
	$TEST
(
HasSim¶eTe¡
, 
Te¡2
è{ 
	`FAIL
(è<< "Ex³ùed fau»."; 
	}
}

66 
	$TEST
(
HasSim¶eTe¡
, 
Te¡3
è{ 
	`FAIL
(è<< "Ex³ùed fau»."; 
	}
}

68 
	$TEST
(
HasSim¶eTe¡
, 
Te¡4
è{ 
	`FAIL
(è<< "Ex³ùed fau»."; 
	}
}

72 
	$TEST
(
HasDi§bËdTe¡
, 
Te¡0
è{
	}
}

74 
	$TEST
(
HasDi§bËdTe¡
, 
DISABLED_Te¡1
è{ 
	`FAIL
(è<< "Ex³ùed fau»."; 
	}
}

76 
	$TEST
(
HasDi§bËdTe¡
, 
Te¡2
è{ 
	`FAIL
(è<< "Ex³ùed fau»."; 
	}
}

78 
	$TEST
(
HasDi§bËdTe¡
, 
Te¡3
è{ 
	`FAIL
(è<< "Ex³ùed fau»."; 
	}
}

80 
	$TEST
(
HasDi§bËdTe¡
, 
Te¡4
è{ 
	`FAIL
(è<< "Ex³ùed fau»."; 
	}
}

84 
	$TEST
(
HasD—thTe¡
, 
Te¡0
è{ 
	`EXPECT_DEATH_IF_SUPPORTED
(
	`ex™
(1), ".*"); 
	}
}

86 
	$TEST
(
HasD—thTe¡
, 
Te¡1
) {

87 
	`EXPECT_DEATH_IF_SUPPORTED
(
	`FAIL
() << "Expected failure.", ".*");

88 
	}
}

90 
	$TEST
(
HasD—thTe¡
, 
Te¡2
) {

91 
	`EXPECT_DEATH_IF_SUPPORTED
(
	`FAIL
() << "Expected failure.", ".*");

92 
	}
}

94 
	$TEST
(
HasD—thTe¡
, 
Te¡3
) {

95 
	`EXPECT_DEATH_IF_SUPPORTED
(
	`FAIL
() << "Expected failure.", ".*");

96 
	}
}

98 
	$TEST
(
HasD—thTe¡
, 
Te¡4
) {

99 
	`EXPECT_DEATH_IF_SUPPORTED
(
	`FAIL
() << "Expected failure.", ".*");

100 
	}
}

104 
	$TEST
(
DISABLED_HasDi§bËdSu™e
, 
Te¡0
è{
	}
}

106 
	$TEST
(
DISABLED_HasDi§bËdSu™e
, 
Te¡1
è{ 
	`FAIL
(è<< "Ex³ùed fau»."; 
	}
}

108 
	$TEST
(
DISABLED_HasDi§bËdSu™e
, 
Te¡2
è{ 
	`FAIL
(è<< "Ex³ùed fau»."; 
	}
}

110 
	$TEST
(
DISABLED_HasDi§bËdSu™e
, 
Te¡3
è{ 
	`FAIL
(è<< "Ex³ùed fau»."; 
	}
}

112 
	$TEST
(
DISABLED_HasDi§bËdSu™e
, 
Te¡4
è{ 
	`FAIL
(è<< "Ex³ùed fau»."; 
	}
}

116 
şass
 
	gHasP¬am‘”sTe¡
 : 
public
 
‹¡šg
::
Te¡W™hP¬am
<> {};

118 
	$TEST_P
(
HasP¬am‘”sTe¡
, 
Te¡1
è{ 
	`FAIL
(è<< "Ex³ùed fau»."; 
	}
}

120 
	$TEST_P
(
HasP¬am‘”sTe¡
, 
Te¡2
è{ 
	`FAIL
(è<< "Ex³ùed fau»."; 
	}
}

122 
INSTANTIATE_TEST_SUITE_P
(
HasP¬am‘”sSu™e
, 
HasP¬am‘”sTe¡
,

123 
‹¡šg
::
V®ues
(1, 2));

125 şas 
	cMyTe¡Li¡’”
 : 
public
 ::
‹¡šg
::
Em±yTe¡Ev’tLi¡’”
 {

126 
OnTe¡Su™eS¹
(cÚ¡ ::
‹¡šg
::
Te¡Su™e
& 
‹¡_su™e
è
ov”ride
 {

127 
´štf
("W¬š OnTe¡Su™eS¹ oà%s.\n", 
‹¡_su™e
.
Çme
());

130 
OnTe¡S¹
(cÚ¡ ::
‹¡šg
::
Te¡Info
& 
‹¡_šfo
è
ov”ride
 {

131 
´štf
("W¬š OnTe¡S¹ oà%s.%s.\n", 
‹¡_šfo
.
‹¡_su™e_Çme
(),

132 
‹¡_šfo
.
Çme
());

135 
OnTe¡P¬tResuÉ
(

136 cÚ¡ ::
‹¡šg
::
Te¡P¬tResuÉ
& 
‹¡_·¹_»suÉ
è
ov”ride
 {

137 
´štf
("W¬š OnTe¡P¬tResuÉ %s:%d.\n", 
‹¡_·¹_»suÉ
.
fe_Çme
(),

138 
‹¡_·¹_»suÉ
.
lše_numb”
());

141 
OnTe¡End
(cÚ¡ ::
‹¡šg
::
Te¡Info
& 
‹¡_šfo
è
ov”ride
 {

142 
´štf
("W¬š OnTe¡End oà%s.%s.\n", 
‹¡_šfo
.
‹¡_su™e_Çme
(),

143 
‹¡_šfo
.
Çme
());

146 
OnTe¡Su™eEnd
(cÚ¡ ::
‹¡šg
::
Te¡Su™e
& 
‹¡_su™e
è
ov”ride
 {

147 
´štf
("W¬š OnTe¡Su™eEnd oà%s.\n", 
‹¡_su™e
.
Çme
());

151 
	$TEST
(
HasSkTe¡
, 
Te¡0
è{ 
	`SUCCEED
(è<< "Ex³ùed sucûss."; 
	}
}

153 
	$TEST
(
HasSkTe¡
, 
Te¡1
è{ 
	`GTEST_SKIP
(è<< "Ex³ùed sk."; 
	}
}

155 
	$TEST
(
HasSkTe¡
, 
Te¡2
è{ 
	`FAIL
(è<< "Ex³ùed fau»."; 
	}
}

157 
	$TEST
(
HasSkTe¡
, 
Te¡3
è{ 
	`FAIL
(è<< "Ex³ùed fau»."; 
	}
}

159 
	$TEST
(
HasSkTe¡
, 
Te¡4
è{ 
	`FAIL
(è<< "Ex³ùed fau»."; 
	}
}

163 
	$maš
(
¬gc
, **
¬gv
) {

164 ::
‹¡šg
::
	`In™GoogËTe¡
(&
¬gc
, 
¬gv
);

165 ::
‹¡šg
::
Un™Te¡
::
	`G‘In¡ªû
()->
	`li¡’”s
().
	`Aµ’d
(
Ãw
 
	`MyTe¡Li¡’”
());

166  
	`RUN_ALL_TESTS
();

167 
	}
}

	@third_party/googletest/googletest/test/googletest-filepath-test.cc

38 
	~"g‹¡/š‹º®/g‹¡-f•©h.h
"

39 
	~"g‹¡/g‹¡.h
"

40 
	~"¤c/g‹¡-š‹º®-šl.h
"

42 #ià
GTEST_OS_WINDOWS_MOBILE


43 
	~<wšdows.h
>

44 #–ià
GTEST_OS_WINDOWS


45 
	~<dœeù.h
>

48 
Çme¥aû
 
	g‹¡šg
 {

49 
Çme¥aû
 
	gš‹º®
 {

50 
	gÇme¥aû
 {

52 #ià
GTEST_OS_WINDOWS_MOBILE


55 
»move
(cÚ¡ * 
·th
) {

56 
LPCWSTR
 
	gw·th
 = 
SŒšg
::
AnsiToUtf16
(
·th
);

57 
	g»t
 = 
D–‘eFe
(
w·th
) ? 0 : -1;

58 
	gd–‘e
 [] 
	gw·th
;

59  
	g»t
;

62 
_rmdœ
(cÚ¡ * 
·th
) {

63 
FeP©h
 
f•©h
(
·th
);

64 
LPCWSTR
 
	gw·th
 = 
SŒšg
::
AnsiToUtf16
(

65 
f•©h
.
RemoveT¿šgP©hS•¬©Ü
().
c_¡r
());

66 
	g»t
 = 
RemoveDœeùÜy
(
w·th
) ? 0 : -1;

67 
	gd–‘e
 [] 
	gw·th
;

68  
	g»t
;

73 
TEST
(
G‘Cu¼’tDœTe¡
, 
R‘uºsCu¼’tDœ
) {

74 cÚ¡ 
FeP©h
 
	gÜigš®_dœ
 = FeP©h::
G‘Cu¼’tDœ
();

75 
EXPECT_FALSE
(
Üigš®_dœ
.
IsEm±y
());

77 
	gposix
::
ChDœ
(
GTEST_PATH_SEP_
);

78 cÚ¡ 
FeP©h
 
	gcwd
 = FeP©h::
G‘Cu¼’tDœ
();

79 
	gposix
::
ChDœ
(
Üigš®_dœ
.
c_¡r
());

81 #ià
GTEST_OS_WINDOWS
 || 
GTEST_OS_OS2


84 cÚ¡ * cÚ¡ 
	gcwd_w™hout_drive
 = 
¡rchr
(
cwd
.
c_¡r
(), ':');

85 
ASSERT_TRUE
(
cwd_w™hout_drive
 !ğ
NULL
);

86 
EXPECT_STREQ
(
GTEST_PATH_SEP_
, 
cwd_w™hout_drive
 + 1);

90 
EXPECT_EQ
(
GTEST_PATH_SEP_
, 
cwd
.
¡ršg
());

97 
TEST
(
IsEm±yTe¡
, 
R‘uºsTrueFÜEm±yP©h
) {

98 
EXPECT_TRUE
(
FeP©h
("").
IsEm±y
());

101 
TEST
(
IsEm±yTe¡
, 
R‘uºsF®£FÜNÚEm±yP©h
) {

102 
EXPECT_FALSE
(
FeP©h
("a").
IsEm±y
());

103 
EXPECT_FALSE
(
FeP©h
(".").
IsEm±y
());

104 
EXPECT_FALSE
(
FeP©h
("a/b").
IsEm±y
());

105 
EXPECT_FALSE
(
FeP©h
("a\\b\\").
IsEm±y
());

109 
TEST
(
RemoveDœeùÜyNameTe¡
, 
Wh’Em±yName
) {

110 
EXPECT_EQ
("", 
FeP©h
("").
RemoveDœeùÜyName
().
¡ršg
());

114 
TEST
(
RemoveDœeùÜyNameTe¡
, 
ButNoDœeùÜy
) {

115 
EXPECT_EQ
("afile",

116 
FeP©h
("afe").
RemoveDœeùÜyName
().
¡ršg
());

120 
TEST
(
RemoveDœeùÜyNameTe¡
, 
RoÙFeShouldGiveFeName
) {

121 
EXPECT_EQ
("afile",

122 
FeP©h
(
GTEST_PATH_SEP_
 "afe").
RemoveDœeùÜyName
().
¡ršg
());

126 
TEST
(
RemoveDœeùÜyNameTe¡
, 
Wh”eTh”eIsNoFeName
) {

127 
EXPECT_EQ
("",

128 
FeP©h
("adœ" 
GTEST_PATH_SEP_
).
RemoveDœeùÜyName
().
¡ršg
());

132 
TEST
(
RemoveDœeùÜyNameTe¡
, 
ShouldGiveFeName
) {

133 
EXPECT_EQ
("afile",

134 
FeP©h
("adœ" 
GTEST_PATH_SEP_
 "afe").
RemoveDœeùÜyName
().
¡ršg
());

138 
TEST
(
RemoveDœeùÜyNameTe¡
, 
ShouldAlsoGiveFeName
) {

139 
EXPECT_EQ
("afile",

140 
FeP©h
("adœ" 
GTEST_PATH_SEP_
 "subdir" GTEST_PATH_SEP_ "afile")

141 .
RemoveDœeùÜyName
().
¡ršg
());

144 #ià
GTEST_HAS_ALT_PATH_SEP_


150 
TEST
(
RemoveDœeùÜyNameTe¡
, 
RoÙFeShouldGiveFeNameFÜAÉ”Ç‹S•¬©Ü
) {

151 
EXPECT_EQ
("afe", 
FeP©h
("/afe").
RemoveDœeùÜyName
().
¡ršg
());

155 
TEST
(
RemoveDœeùÜyNameTe¡
, 
Wh”eTh”eIsNoFeNameFÜAÉ”Ç‹S•¬©Ü
) {

156 
EXPECT_EQ
("", 
FeP©h
("adœ/").
RemoveDœeùÜyName
().
¡ršg
());

160 
TEST
(
RemoveDœeùÜyNameTe¡
, 
ShouldGiveFeNameFÜAÉ”Ç‹S•¬©Ü
) {

161 
EXPECT_EQ
("afe", 
FeP©h
("adœ/afe").
RemoveDœeùÜyName
().
¡ršg
());

165 
TEST
(
RemoveDœeùÜyNameTe¡
, 
ShouldAlsoGiveFeNameFÜAÉ”Ç‹S•¬©Ü
) {

166 
EXPECT_EQ
("afile",

167 
FeP©h
("adœ/subdœ/afe").
RemoveDœeùÜyName
().
¡ršg
());

173 
TEST
(
RemoveFeNameTe¡
, 
Em±yName
) {

174 #ià
GTEST_OS_WINDOWS_MOBILE


176 
EXPECT_EQ
(
GTEST_PATH_SEP_
, 
FeP©h
("").
RemoveFeName
().
¡ršg
());

178 
EXPECT_EQ
("." 
GTEST_PATH_SEP_
, 
FeP©h
("").
RemoveFeName
().
¡ršg
());

183 
TEST
(
RemoveFeNameTe¡
, 
ButNoFe
) {

184 
EXPECT_EQ
("adœ" 
GTEST_PATH_SEP_
,

185 
FeP©h
("adœ" 
GTEST_PATH_SEP_
).
RemoveFeName
().
¡ršg
());

189 
TEST
(
RemoveFeNameTe¡
, 
GivesDœName
) {

190 
EXPECT_EQ
("adœ" 
GTEST_PATH_SEP_
,

191 
FeP©h
("adœ" 
GTEST_PATH_SEP_
 "afe").
RemoveFeName
().
¡ršg
());

195 
TEST
(
RemoveFeNameTe¡
, 
GivesDœAndSubDœName
) {

196 
EXPECT_EQ
("adœ" 
GTEST_PATH_SEP_
 "subdir" GTEST_PATH_SEP_,

197 
FeP©h
("adœ" 
GTEST_PATH_SEP_
 "subdir" GTEST_PATH_SEP_ "afile")

198 .
RemoveFeName
().
¡ršg
());

202 
TEST
(
RemoveFeNameTe¡
, 
GivesRoÙDœ
) {

203 
EXPECT_EQ
(
GTEST_PATH_SEP_
,

204 
FeP©h
(
GTEST_PATH_SEP_
 "afe").
RemoveFeName
().
¡ršg
());

207 #ià
GTEST_HAS_ALT_PATH_SEP_


213 
TEST
(
RemoveFeNameTe¡
, 
ButNoFeFÜAÉ”Ç‹S•¬©Ü
) {

214 
EXPECT_EQ
("adœ" 
GTEST_PATH_SEP_
,

215 
FeP©h
("adœ/").
RemoveFeName
().
¡ršg
());

219 
TEST
(
RemoveFeNameTe¡
, 
GivesDœNameFÜAÉ”Ç‹S•¬©Ü
) {

220 
EXPECT_EQ
("adœ" 
GTEST_PATH_SEP_
,

221 
FeP©h
("adœ/afe").
RemoveFeName
().
¡ršg
());

225 
TEST
(
RemoveFeNameTe¡
, 
GivesDœAndSubDœNameFÜAÉ”Ç‹S•¬©Ü
) {

226 
EXPECT_EQ
("adœ" 
GTEST_PATH_SEP_
 "subdir" GTEST_PATH_SEP_,

227 
FeP©h
("adœ/subdœ/afe").
RemoveFeName
().
¡ršg
());

231 
TEST
(
RemoveFeNameTe¡
, 
GivesRoÙDœFÜAÉ”Ç‹S•¬©Ü
) {

232 
EXPECT_EQ
(
GTEST_PATH_SEP_
, 
FeP©h
("/afe").
RemoveFeName
().
¡ršg
());

237 
TEST
(
MakeFeNameTe¡
, 
G’”©eWh’Numb”IsZ”o
) {

238 
FeP©h
 
	gaùu®
 = FeP©h::
MakeFeName
(FilePath("foo"), FilePath("bar"),

240 
EXPECT_EQ
("foo" 
GTEST_PATH_SEP_
 "b¬.xml", 
aùu®
.
¡ršg
());

243 
TEST
(
MakeFeNameTe¡
, 
G’”©eFeNameNumb”GtZ”o
) {

244 
FeP©h
 
	gaùu®
 = FeP©h::
MakeFeName
(FilePath("foo"), FilePath("bar"),

246 
EXPECT_EQ
("foo" 
GTEST_PATH_SEP_
 "b¬_12.xml", 
aùu®
.
¡ršg
());

249 
TEST
(
MakeFeNameTe¡
, 
G’”©eFeNameW™hSÏshNumb”IsZ”o
) {

250 
FeP©h
 
	gaùu®
 = FeP©h::
MakeFeName
(FeP©h("foo" 
GTEST_PATH_SEP_
),

251 
FeP©h
("bar"), 0, "xml");

252 
EXPECT_EQ
("foo" 
GTEST_PATH_SEP_
 "b¬.xml", 
aùu®
.
¡ršg
());

255 
TEST
(
MakeFeNameTe¡
, 
G’”©eFeNameW™hSÏshNumb”GtZ”o
) {

256 
FeP©h
 
	gaùu®
 = FeP©h::
MakeFeName
(FeP©h("foo" 
GTEST_PATH_SEP_
),

257 
FeP©h
("bar"), 12, "xml");

258 
EXPECT_EQ
("foo" 
GTEST_PATH_SEP_
 "b¬_12.xml", 
aùu®
.
¡ršg
());

261 
TEST
(
MakeFeNameTe¡
, 
G’”©eWh’Numb”IsZ”oAndDœIsEm±y
) {

262 
FeP©h
 
	gaùu®
 = FeP©h::
MakeFeName
(FilePath(""), FilePath("bar"),

264 
EXPECT_EQ
("b¬.xml", 
aùu®
.
¡ršg
());

267 
TEST
(
MakeFeNameTe¡
, 
G’”©eWh’Numb”IsNÙZ”oAndDœIsEm±y
) {

268 
FeP©h
 
	gaùu®
 = FeP©h::
MakeFeName
(FilePath(""), FilePath("bar"),

270 
EXPECT_EQ
("b¬_14.xml", 
aùu®
.
¡ršg
());

273 
TEST
(
CÚÿtP©hsTe¡
, 
WÜksWh’DœDÛsNÙEndW™hP©hS•
) {

274 
FeP©h
 
	gaùu®
 = FeP©h::
CÚÿtP©hs
(FilePath("foo"),

275 
FeP©h
("bar.xml"));

276 
EXPECT_EQ
("foo" 
GTEST_PATH_SEP_
 "b¬.xml", 
aùu®
.
¡ršg
());

279 
TEST
(
CÚÿtP©hsTe¡
, 
WÜksWh’P©h1EndsW™hP©hS•
) {

280 
FeP©h
 
	gaùu®
 = FeP©h::
CÚÿtP©hs
(FeP©h("foo" 
GTEST_PATH_SEP_
),

281 
FeP©h
("bar.xml"));

282 
EXPECT_EQ
("foo" 
GTEST_PATH_SEP_
 "b¬.xml", 
aùu®
.
¡ršg
());

285 
TEST
(
CÚÿtP©hsTe¡
, 
P©h1BešgEm±y
) {

286 
FeP©h
 
	gaùu®
 = FeP©h::
CÚÿtP©hs
(FilePath(""),

287 
FeP©h
("bar.xml"));

288 
EXPECT_EQ
("b¬.xml", 
aùu®
.
¡ršg
());

291 
TEST
(
CÚÿtP©hsTe¡
, 
P©h2BešgEm±y
) {

292 
FeP©h
 
	gaùu®
 = FeP©h::
CÚÿtP©hs
(FilePath("foo"), FilePath(""));

293 
EXPECT_EQ
("foo" 
GTEST_PATH_SEP_
, 
aùu®
.
¡ršg
());

296 
TEST
(
CÚÿtP©hsTe¡
, 
BÙhP©hBešgEm±y
) {

297 
FeP©h
 
	gaùu®
 = FeP©h::
CÚÿtP©hs
(FilePath(""),

298 
FeP©h
(""));

299 
EXPECT_EQ
("", 
aùu®
.
¡ršg
());

302 
TEST
(
CÚÿtP©hsTe¡
, 
P©h1CÚšsP©hS•
) {

303 
FeP©h
 
	gaùu®
 = FeP©h::
CÚÿtP©hs
(FeP©h("foo" 
GTEST_PATH_SEP_
 "bar"),

304 
FeP©h
("foobar.xml"));

305 
EXPECT_EQ
("foo" 
GTEST_PATH_SEP_
 "bar" GTEST_PATH_SEP_ "foobar.xml",

306 
aùu®
.
¡ršg
());

309 
TEST
(
CÚÿtP©hsTe¡
, 
P©h2CÚšsP©hS•
) {

310 
FeP©h
 
	gaùu®
 = FeP©h::
CÚÿtP©hs
(

311 
FeP©h
("foo" 
GTEST_PATH_SEP_
),

312 
FeP©h
("b¬" 
GTEST_PATH_SEP_
 "bar.xml"));

313 
EXPECT_EQ
("foo" 
GTEST_PATH_SEP_
 "bar" GTEST_PATH_SEP_ "bar.xml",

314 
aùu®
.
¡ršg
());

317 
TEST
(
CÚÿtP©hsTe¡
, 
P©h2EndsW™hP©hS•
) {

318 
FeP©h
 
	gaùu®
 = FeP©h::
CÚÿtP©hs
(FilePath("foo"),

319 
FeP©h
("b¬" 
GTEST_PATH_SEP_
));

320 
EXPECT_EQ
("foo" 
GTEST_PATH_SEP_
 "b¬" GTEST_PATH_SEP_, 
aùu®
.
¡ršg
());

324 
TEST
(
RemoveT¿šgP©hS•¬©ÜTe¡
, 
Em±ySŒšg
) {

325 
EXPECT_EQ
("", 
FeP©h
("").
RemoveT¿šgP©hS•¬©Ü
().
¡ršg
());

329 
TEST
(
RemoveT¿šgP©hS•¬©ÜTe¡
, 
FeNoSÏshSŒšg
) {

330 
EXPECT_EQ
("foo", 
FeP©h
("foo").
RemoveT¿šgP©hS•¬©Ü
().
¡ršg
());

334 
TEST
(
RemoveT¿šgP©hS•¬©ÜTe¡
, 
ShouldRemoveT¿šgS•¬©Ü
) {

335 
EXPECT_EQ
("foo",

336 
FeP©h
("foo" 
GTEST_PATH_SEP_
).
RemoveT¿šgP©hS•¬©Ü
().
¡ršg
());

337 #ià
GTEST_HAS_ALT_PATH_SEP_


338 
EXPECT_EQ
("foo", 
FeP©h
("foo/").
RemoveT¿šgP©hS•¬©Ü
().
¡ršg
());

343 
TEST
(
RemoveT¿šgP©hS•¬©ÜTe¡
, 
ShouldRemoveLa¡S•¬©Ü
) {

344 
EXPECT_EQ
("foo" 
GTEST_PATH_SEP_
 "bar",

345 
FeP©h
("foo" 
GTEST_PATH_SEP_
 "bar" GTEST_PATH_SEP_)

346 .
RemoveT¿šgP©hS•¬©Ü
().
¡ršg
());

350 
TEST
(
RemoveT¿šgP©hS•¬©ÜTe¡
, 
ShouldR‘uºUnmodif›d
) {

351 
EXPECT_EQ
("foo" 
GTEST_PATH_SEP_
 "bar",

352 
FeP©h
("foo" 
GTEST_PATH_SEP_
 "bar")

353 .
RemoveT¿šgP©hS•¬©Ü
().
¡ršg
());

356 
TEST
(
DœeùÜyTe¡
, 
RoÙDœeùÜyExi¡s
) {

357 #ià
GTEST_OS_WINDOWS


358 
	gcu¼’t_drive
[
_MAX_PATH
];

359 
	gcu¼’t_drive
[0] = 
¡©ic_ÿ¡
<>(
_g‘drive
() + 'A' - 1);

360 
	gcu¼’t_drive
[1] = ':';

361 
	gcu¼’t_drive
[2] = '\\';

362 
	gcu¼’t_drive
[3] = '\0';

363 
EXPECT_TRUE
(
FeP©h
(
cu¼’t_drive
).
DœeùÜyExi¡s
());

365 
EXPECT_TRUE
(
FeP©h
("/").
DœeùÜyExi¡s
());

369 #ià
GTEST_OS_WINDOWS


370 
TEST
(
DœeùÜyTe¡
, 
RoÙOfWrÚgDriveDÛsNÙExi¡s
) {

371 cÚ¡ 
	g§ved_drive_
 = 
_g‘drive
();

373 
	gdrive
 = 'Z'; drive >= 'A'; drive--)

374 ià(
_chdrive
(
drive
 - 'A' + 1) == -1) {

375 
nÚ_drive
[
_MAX_PATH
];

376 
	gnÚ_drive
[0] = 
drive
;

377 
	gnÚ_drive
[1] = ':';

378 
	gnÚ_drive
[2] = '\\';

379 
	gnÚ_drive
[3] = '\0';

380 
EXPECT_FALSE
(
FeP©h
(
nÚ_drive
).
DœeùÜyExi¡s
());

383 
_chdrive
(
§ved_drive_
);

387 #ià!
GTEST_OS_WINDOWS_MOBILE


389 
TEST
(
DœeùÜyTe¡
, 
Em±yP©hDœeùÜyDÛsNÙExi¡
) {

390 
EXPECT_FALSE
(
FeP©h
("").
DœeùÜyExi¡s
());

394 
TEST
(
DœeùÜyTe¡
, 
Cu¼’tDœeùÜyExi¡s
) {

395 #ià
GTEST_OS_WINDOWS


396 #iâdeà
_WIN32_CE


398 
EXPECT_TRUE
(
FeP©h
(".").
DœeùÜyExi¡s
());

399 
EXPECT_TRUE
(
FeP©h
(".\\").
DœeùÜyExi¡s
());

403 
EXPECT_TRUE
(
FeP©h
(".").
DœeùÜyExi¡s
());

404 
EXPECT_TRUE
(
FeP©h
("./").
DœeùÜyExi¡s
());

409 
TEST
(
NÜm®izeTe¡
, 
MuÉËCÚ£cutiveS•­¬©ÜsInMid¡ršg
) {

410 
EXPECT_EQ
("foo" 
GTEST_PATH_SEP_
 "bar",

411 
FeP©h
("foo" 
GTEST_PATH_SEP_
 "b¬").
¡ršg
());

412 
EXPECT_EQ
("foo" 
GTEST_PATH_SEP_
 "bar",

413 
FeP©h
("foo" 
GTEST_PATH_SEP_
 GTEST_PATH_SEP_ "b¬").
¡ršg
());

414 
EXPECT_EQ
("foo" 
GTEST_PATH_SEP_
 "bar",

415 
FeP©h
("foo" 
GTEST_PATH_SEP_
 GTEST_PATH_SEP_

416 
GTEST_PATH_SEP_
 "b¬").
¡ršg
());

420 
TEST
(
NÜm®izeTe¡
, 
MuÉËCÚ£cutiveS•­¬©ÜsAtSŒšgS¹
) {

421 
EXPECT_EQ
(
GTEST_PATH_SEP_
 "bar",

422 
FeP©h
(
GTEST_PATH_SEP_
 "b¬").
¡ršg
());

423 
EXPECT_EQ
(
GTEST_PATH_SEP_
 "bar",

424 
FeP©h
(
GTEST_PATH_SEP_
 GTEST_PATH_SEP_ "b¬").
¡ršg
());

425 
EXPECT_EQ
(
GTEST_PATH_SEP_
 "bar",

426 
FeP©h
(
GTEST_PATH_SEP_
 GTEST_PATH_SEP_ GTEST_PATH_SEP_ "b¬").
¡ršg
());

430 
TEST
(
NÜm®izeTe¡
, 
MuÉËCÚ£cutiveS•­¬©ÜsAtSŒšgEnd
) {

431 
EXPECT_EQ
("foo" 
GTEST_PATH_SEP_
,

432 
FeP©h
("foo" 
GTEST_PATH_SEP_
).
¡ršg
());

433 
EXPECT_EQ
("foo" 
GTEST_PATH_SEP_
,

434 
FeP©h
("foo" 
GTEST_PATH_SEP_
 GTEST_PATH_SEP_).
¡ršg
());

435 
EXPECT_EQ
("foo" 
GTEST_PATH_SEP_
,

436 
FeP©h
("foo" 
GTEST_PATH_SEP_
 GTEST_PATH_SEP_ GTEST_PATH_SEP_).
¡ršg
());

439 #ià
GTEST_HAS_ALT_PATH_SEP_


444 
TEST
(
NÜm®izeTe¡
, 
MixAÉ”Ç‹S•¬©ÜAtSŒšgEnd
) {

445 
EXPECT_EQ
("foo" 
GTEST_PATH_SEP_
,

446 
FeP©h
("foo/").
¡ršg
());

447 
EXPECT_EQ
("foo" 
GTEST_PATH_SEP_
,

448 
FeP©h
("foo" 
GTEST_PATH_SEP_
 "/").
¡ršg
());

449 
EXPECT_EQ
("foo" 
GTEST_PATH_SEP_
,

450 
FeP©h
("foo//" 
GTEST_PATH_SEP_
).
¡ršg
());

455 
TEST
(
Assignm’tO³¿tÜTe¡
, 
DeçuÉAssigÃdToNÚDeçuÉ
) {

456 
FeP©h
 
	gdeçuÉ_·th
;

457 
FeP©h
 
nÚ_deçuÉ_·th
("path");

458 
	gnÚ_deçuÉ_·th
 = 
deçuÉ_·th
;

459 
EXPECT_EQ
("", 
nÚ_deçuÉ_·th
.
¡ršg
());

460 
EXPECT_EQ
("", 
deçuÉ_·th
.
¡ršg
());

463 
TEST
(
Assignm’tO³¿tÜTe¡
, 
NÚDeçuÉAssigÃdToDeçuÉ
) {

464 
FeP©h
 
nÚ_deçuÉ_·th
("path");

465 
FeP©h
 
	gdeçuÉ_·th
;

466 
	gdeçuÉ_·th
 = 
nÚ_deçuÉ_·th
;

467 
EXPECT_EQ
("·th", 
deçuÉ_·th
.
¡ršg
());

468 
EXPECT_EQ
("·th", 
nÚ_deçuÉ_·th
.
¡ršg
());

471 
TEST
(
Assignm’tO³¿tÜTe¡
, 
CÚ¡AssigÃdToNÚCÚ¡
) {

472 cÚ¡ 
FeP©h
 
cÚ¡_deçuÉ_·th
("const_path");

473 
FeP©h
 
nÚ_deçuÉ_·th
("path");

474 
	gnÚ_deçuÉ_·th
 = 
cÚ¡_deçuÉ_·th
;

475 
EXPECT_EQ
("cÚ¡_·th", 
nÚ_deçuÉ_·th
.
¡ršg
());

478 şas 
	cDœeùÜyC»©iÚTe¡
 : 
public
 
Te¡
 {

479 
´Ùeùed
:

480 
S‘Up
(è
ov”ride
 {

481 
‹¡d©a_·th_
.
S‘
(
FeP©h
(

482 
TempDœ
(è+ 
G‘Cu¼’tExecubËName
().
¡ršg
() +

483 "_dœeùÜy_ü—tiÚ" 
GTEST_PATH_SEP_
 "test" GTEST_PATH_SEP_));

484 
	g‹¡d©a_fe_
.
S‘
(
‹¡d©a_·th_
.
RemoveT¿šgP©hS•¬©Ü
());

486 
	gunique_fe0_
.
S‘
(
FeP©h
::
MakeFeName
(
‹¡d©a_·th_
, FilePath("unique"),

488 
	gunique_fe1_
.
S‘
(
FeP©h
::
MakeFeName
(
‹¡d©a_·th_
, FilePath("unique"),

491 
»move
(
‹¡d©a_fe_
.
c_¡r
());

492 
»move
(
unique_fe0_
.
c_¡r
());

493 
»move
(
unique_fe1_
.
c_¡r
());

494 
	gposix
::
RmDœ
(
‹¡d©a_·th_
.
c_¡r
());

497 
T—rDown
(è
	gov”ride
 {

498 
»move
(
‹¡d©a_fe_
.
c_¡r
());

499 
»move
(
unique_fe0_
.
c_¡r
());

500 
»move
(
unique_fe1_
.
c_¡r
());

501 
	gposix
::
RmDœ
(
‹¡d©a_·th_
.
c_¡r
());

504 
C»©eTextFe
(cÚ¡ * 
f’ame
) {

505 
FILE
* 
	gf
 = 
posix
::
FO³n
(
f’ame
, "w");

506 
årštf
(
f
, "text\n");

507 
fşo£
(
f
);

513 
FeP©h
 
	g‹¡d©a_·th_
;

514 
FeP©h
 
	g‹¡d©a_fe_
;

515 
FeP©h
 
	gunique_fe0_
;

516 
FeP©h
 
	gunique_fe1_
;

519 
TEST_F
(
DœeùÜyC»©iÚTe¡
, 
C»©eDœeùÜ›sRecursiv–y
) {

520 
EXPECT_FALSE
(
‹¡d©a_·th_
.
DœeùÜyExi¡s
()è<< 
	g‹¡d©a_·th_
.
¡ršg
();

521 
EXPECT_TRUE
(
‹¡d©a_·th_
.
C»©eDœeùÜ›sRecursiv–y
());

522 
EXPECT_TRUE
(
‹¡d©a_·th_
.
DœeùÜyExi¡s
());

525 
TEST_F
(
DœeùÜyC»©iÚTe¡
, 
C»©eDœeùÜ›sFÜAÌ—dyExi¡šgP©h
) {

526 
EXPECT_FALSE
(
‹¡d©a_·th_
.
DœeùÜyExi¡s
()è<< 
	g‹¡d©a_·th_
.
¡ršg
();

527 
EXPECT_TRUE
(
‹¡d©a_·th_
.
C»©eDœeùÜ›sRecursiv–y
());

529 
EXPECT_TRUE
(
‹¡d©a_·th_
.
C»©eDœeùÜ›sRecursiv–y
());

532 
TEST_F
(
DœeùÜyC»©iÚTe¡
, 
C»©eDœeùÜ›sAndUniqueF’ame
) {

533 
FeP©h
 
fe_·th
(FeP©h::
G’”©eUniqueFeName
(
‹¡d©a_·th_
,

534 
FeP©h
("unique"), "txt"));

535 
EXPECT_EQ
(
unique_fe0_
.
¡ršg
(), 
fe_·th
.string());

536 
EXPECT_FALSE
(
fe_·th
.
FeOrDœeùÜyExi¡s
());

538 
	g‹¡d©a_·th_
.
C»©eDœeùÜ›sRecursiv–y
();

539 
EXPECT_FALSE
(
fe_·th
.
FeOrDœeùÜyExi¡s
());

540 
C»©eTextFe
(
fe_·th
.
c_¡r
());

541 
EXPECT_TRUE
(
fe_·th
.
FeOrDœeùÜyExi¡s
());

543 
FeP©h
 
fe_·th2
(FeP©h::
G’”©eUniqueFeName
(
‹¡d©a_·th_
,

544 
FeP©h
("unique"), "txt"));

545 
EXPECT_EQ
(
unique_fe1_
.
¡ršg
(), 
fe_·th2
.string());

546 
EXPECT_FALSE
(
fe_·th2
.
FeOrDœeùÜyExi¡s
());

547 
C»©eTextFe
(
fe_·th2
.
c_¡r
());

548 
EXPECT_TRUE
(
fe_·th2
.
FeOrDœeùÜyExi¡s
());

551 
TEST_F
(
DœeùÜyC»©iÚTe¡
, 
C»©eDœeùÜ›sFa
) {

553 
C»©eTextFe
(
‹¡d©a_fe_
.
c_¡r
());

554 
EXPECT_TRUE
(
‹¡d©a_fe_
.
FeOrDœeùÜyExi¡s
());

555 
EXPECT_FALSE
(
‹¡d©a_fe_
.
DœeùÜyExi¡s
());

556 
EXPECT_FALSE
(
‹¡d©a_fe_
.
C»©eDœeùÜ›sRecursiv–y
());

559 
TEST
(
NoDœeùÜyC»©iÚTe¡
, 
C»©eNoDœeùÜ›sFÜDeçuÉXmlFe
) {

560 cÚ¡ 
FeP©h
 
‹¡_d‘a_xml
("test_detail.xml");

561 
EXPECT_FALSE
(
‹¡_d‘a_xml
.
C»©eDœeùÜ›sRecursiv–y
());

564 
TEST
(
FeP©hTe¡
, 
DeçuÉCÚ¡ruùÜ
) {

565 
FeP©h
 
	gå
;

566 
EXPECT_EQ
("", 
å
.
¡ršg
());

569 
TEST
(
FeP©hTe¡
, 
Ch¬AndCİyCÚ¡ruùÜs
) {

570 cÚ¡ 
FeP©h
 
å
("spicy");

571 
EXPECT_EQ
("¥icy", 
å
.
¡ršg
());

573 cÚ¡ 
FeP©h
 
å_cİy
(
å
);

574 
EXPECT_EQ
("¥icy", 
å_cİy
.
¡ršg
());

577 
TEST
(
FeP©hTe¡
, 
SŒšgCÚ¡ruùÜ
) {

578 cÚ¡ 
FeP©h
 
å
(
¡d
::
¡ršg
("cider"));

579 
EXPECT_EQ
("cid”", 
å
.
¡ršg
());

582 
TEST
(
FeP©hTe¡
, 
S‘
) {

583 cÚ¡ 
FeP©h
 
­¶e
("apple");

584 
FeP©h
 
mac
("mac");

585 
	gmac
.
S‘
(
­¶e
);

586 
EXPECT_EQ
("­¶e", 
mac
.
¡ršg
());

587 
EXPECT_EQ
("­¶e", 
­¶e
.
¡ršg
());

590 
TEST
(
FeP©hTe¡
, 
ToSŒšg
) {

591 cÚ¡ 
FeP©h
 
fe
("drink");

592 
EXPECT_EQ
("dršk", 
fe
.
¡ršg
());

595 
TEST
(
FeP©hTe¡
, 
RemoveEx‹nsiÚ
) {

596 
EXPECT_EQ
("­p", 
FeP©h
("­p.cc").
RemoveEx‹nsiÚ
("cc").
¡ršg
());

597 
EXPECT_EQ
("­p", 
FeP©h
("­p.exe").
RemoveEx‹nsiÚ
("exe").
¡ršg
());

598 
EXPECT_EQ
("APP", 
FeP©h
("APP.EXE").
RemoveEx‹nsiÚ
("exe").
¡ršg
());

601 
TEST
(
FeP©hTe¡
, 
RemoveEx‹nsiÚWh’Th”eIsNoEx‹nsiÚ
) {

602 
EXPECT_EQ
("­p", 
FeP©h
("­p").
RemoveEx‹nsiÚ
("exe").
¡ršg
());

605 
TEST
(
FeP©hTe¡
, 
IsDœeùÜy
) {

606 
EXPECT_FALSE
(
FeP©h
("cŞa").
IsDœeùÜy
());

607 
EXPECT_TRUE
(
FeP©h
("kßÏ" 
GTEST_PATH_SEP_
).
IsDœeùÜy
());

608 #ià
GTEST_HAS_ALT_PATH_SEP_


609 
EXPECT_TRUE
(
FeP©h
("kßÏ/").
IsDœeùÜy
());

613 
TEST
(
FeP©hTe¡
, 
IsAbsŞu‹P©h
) {

614 
EXPECT_FALSE
(
FeP©h
("is" 
GTEST_PATH_SEP_
 "»Ïtive").
IsAbsŞu‹P©h
());

615 
EXPECT_FALSE
(
FeP©h
("").
IsAbsŞu‹P©h
());

616 #ià
GTEST_OS_WINDOWS


617 
EXPECT_TRUE
(
FeP©h
("c:\\" 
GTEST_PATH_SEP_
 "is_not"

618 
GTEST_PATH_SEP_
 "»Ïtive").
IsAbsŞu‹P©h
());

619 
EXPECT_FALSE
(
FeP©h
("c:foo" 
GTEST_PATH_SEP_
 "b¬").
IsAbsŞu‹P©h
());

620 
EXPECT_TRUE
(
FeP©h
("c:/" 
GTEST_PATH_SEP_
 "is_not"

621 
GTEST_PATH_SEP_
 "»Ïtive").
IsAbsŞu‹P©h
());

623 
EXPECT_TRUE
(
FeP©h
(
GTEST_PATH_SEP_
 "is_not" GTEST_PATH_SEP_ "relative")

624 .
IsAbsŞu‹P©h
());

628 
TEST
(
FeP©hTe¡
, 
IsRoÙDœeùÜy
) {

629 #ià
GTEST_OS_WINDOWS


630 
EXPECT_TRUE
(
FeP©h
("a:\\").
IsRoÙDœeùÜy
());

631 
EXPECT_TRUE
(
FeP©h
("Z:/").
IsRoÙDœeùÜy
());

632 
EXPECT_TRUE
(
FeP©h
("e://").
IsRoÙDœeùÜy
());

633 
EXPECT_FALSE
(
FeP©h
("").
IsRoÙDœeùÜy
());

634 
EXPECT_FALSE
(
FeP©h
("b:").
IsRoÙDœeùÜy
());

635 
EXPECT_FALSE
(
FeP©h
("b:a").
IsRoÙDœeùÜy
());

636 
EXPECT_FALSE
(
FeP©h
("8:/").
IsRoÙDœeùÜy
());

637 
EXPECT_FALSE
(
FeP©h
("c|/").
IsRoÙDœeùÜy
());

639 
EXPECT_TRUE
(
FeP©h
("/").
IsRoÙDœeùÜy
());

640 
EXPECT_TRUE
(
FeP©h
("//").
IsRoÙDœeùÜy
());

641 
EXPECT_FALSE
(
FeP©h
("").
IsRoÙDœeùÜy
());

642 
EXPECT_FALSE
(
FeP©h
("\\").
IsRoÙDœeùÜy
());

643 
EXPECT_FALSE
(
FeP©h
("/x").
IsRoÙDœeùÜy
());

	@third_party/googletest/googletest/test/googletest-filter-unittest_.cc

40 
	~"g‹¡/g‹¡.h
"

42 
	gÇme¥aû
 {

46 şas 
	cFooTe¡
 : 
public
 
‹¡šg
::
Te¡
 {

49 
	$TEST_F
(
FooTe¡
, 
Abc
) {

50 
	}
}

52 
	$TEST_F
(
FooTe¡
, 
Xyz
) {

53 
	`FAIL
() << "Expected failure.";

54 
	}
}

58 
	$TEST
(
B¬Te¡
, 
Te¡OÃ
) {

59 
	}
}

61 
	$TEST
(
B¬Te¡
, 
Te¡Two
) {

62 
	}
}

64 
	$TEST
(
B¬Te¡
, 
Te¡Th»e
) {

65 
	}
}

67 
	$TEST
(
B¬Te¡
, 
DISABLED_Te¡Four
) {

68 
	`FAIL
() << "Expected failure.";

69 
	}
}

71 
	$TEST
(
B¬Te¡
, 
DISABLED_Te¡Five
) {

72 
	`FAIL
() << "Expected failure.";

73 
	}
}

77 
	$TEST
(
BazTe¡
, 
Te¡OÃ
) {

78 
	`FAIL
() << "Expected failure.";

79 
	}
}

81 
	$TEST
(
BazTe¡
, 
Te¡A
) {

82 
	}
}

84 
	$TEST
(
BazTe¡
, 
Te¡B
) {

85 
	}
}

87 
	$TEST
(
BazTe¡
, 
DISABLED_Te¡C
) {

88 
	`FAIL
() << "Expected failure.";

89 
	}
}

93 
	$TEST
(
HasD—thTe¡
, 
Te¡1
) {

94 
	`EXPECT_DEATH_IF_SUPPORTED
(
	`ex™
(1), ".*");

95 
	}
}

99 
	$TEST
(
HasD—thTe¡
, 
Te¡2
) {

100 
	`EXPECT_DEATH_IF_SUPPORTED
(
	`ex™
(1), ".*");

101 
	}
}

105 
	$TEST
(
DISABLED_Foob¬Te¡
, 
Te¡1
) {

106 
	`FAIL
() << "Expected failure.";

107 
	}
}

109 
	$TEST
(
DISABLED_Foob¬Te¡
, 
DISABLED_Te¡2
) {

110 
	`FAIL
() << "Expected failure.";

111 
	}
}

115 
	$TEST
(
DISABLED_Foob¬bazTe¡
, 
Te¡A
) {

116 
	`FAIL
() << "Expected failure.";

117 
	}
}

119 
şass
 
	gP¬amTe¡
 : 
public
 
‹¡šg
::
Te¡W™hP¬am
<> {

122 
	$TEST_P
(
P¬amTe¡
, 
Te¡X
) {

123 
	}
}

125 
	$TEST_P
(
P¬amTe¡
, 
Te¡Y
) {

126 
	}
}

128 
INSTANTIATE_TEST_SUITE_P
(
SeqP
, 
P¬amTe¡
, 
‹¡šg
::
V®ues
(1, 2));

129 
INSTANTIATE_TEST_SUITE_P
(
SeqQ
, 
P¬amTe¡
, 
‹¡šg
::
V®ues
(5, 6));

133 
	$maš
(
¬gc
, **
¬gv
) {

134 ::
‹¡šg
::
	`In™GoogËTe¡
(&
¬gc
, 
¬gv
);

136  
	`RUN_ALL_TESTS
();

137 
	}
}

	@third_party/googletest/googletest/test/googletest-global-environment-unittest_.cc

35 
	~"g‹¡/g‹¡.h
"

37 
	gÇme¥aû
 {

40 şas 
	cFašgEnvœÚm’t
 
	gfš®
 : 
public
 ::
‹¡šg
::
EnvœÚm’t
 {

41 
public
:

42 
S‘Up
(è
ov”ride
 { 
FAIL
() << "Cannedƒnvironment setupƒrror"; }

46 auto* cÚ¡ 
	gg_’vœÚm’t_
 =

47 ::
‹¡šg
::
AddGlob®Te¡EnvœÚm’t
(
Ãw
 
FašgEnvœÚm’t
);

50 
	$TEST
(
SomeTe¡
, 
DÛsFoo
è{ 
	`FAIL
(è<< "UÃx³ùed c®l"; 
	}
}

54 
	$maš
(
¬gc
, ** 
¬gv
) {

55 ::
‹¡šg
::
	`In™GoogËTe¡
(&
¬gc
, 
¬gv
);

57  
	`RUN_ALL_TESTS
();

58 
	}
}

	@third_party/googletest/googletest/test/googletest-list-tests-unittest_.cc

40 
	~"g‹¡/g‹¡.h
"

43 
	$TEST
(
Foo
, 
B¬1
) {

44 
	}
}

46 
	$TEST
(
Foo
, 
B¬2
) {

47 
	}
}

49 
	$TEST
(
Foo
, 
DISABLED_B¬3
) {

50 
	}
}

52 
	$TEST
(
Abc
, 
Xyz
) {

53 
	}
}

55 
	$TEST
(
Abc
, 
Def
) {

56 
	}
}

58 
	$TEST
(
FooB¬
, 
Baz
) {

59 
	}
}

61 şas 
	cFooTe¡
 : 
public
 
‹¡šg
::
Te¡
 {

64 
	$TEST_F
(
FooTe¡
, 
Te¡1
) {

65 
	}
}

67 
	$TEST_F
(
FooTe¡
, 
DISABLED_Te¡2
) {

68 
	}
}

70 
	$TEST_F
(
FooTe¡
, 
Te¡3
) {

71 
	}
}

73 
	$TEST
(
FooD—thTe¡
, 
Te¡1
) {

74 
	}
}

78 şas 
	cMyTy³
 {

79 
	mpublic
:

80 
ex¶ic™
 
	$MyTy³
(cÚ¡ 
¡d
::
¡ršg
& 
a_v®ue
è: 
	$v®ue_
(
a_v®ue
) {}

82 cÚ¡ 
¡d
::
¡ršg
& 
	$v®ue
(ècÚ¡ {  
v®ue_
; 
	}
}

84 
	g´iv©e
:

85 
¡d
::
¡ršg
 
v®ue_
;

89 
	$PrštTo
(cÚ¡ 
MyTy³
& 
x
, 
¡d
::
o¡»am
* 
os
) {

90 *
os
 << 
x
.
	`v®ue
();

91 
	}
}

93 
şass
 
	gV®ueP¬amTe¡
 : 
public
 
‹¡šg
::
Te¡W™hP¬am
<
MyTy³
> {

96 
	$TEST_P
(
V®ueP¬amTe¡
, 
Te¡A
) {

97 
	}
}

99 
	$TEST_P
(
V®ueP¬amTe¡
, 
Te¡B
) {

100 
	}
}

102 
INSTANTIATE_TEST_SUITE_P
(

103 
MyIn¡ªtŸtiÚ
, 
V®ueP¬amTe¡
,

104 
‹¡šg
::
V®ues
(
MyTy³
("one†ine"),

105 
MyTy³
("two\nlines"),

106 
MyTy³
("a very\nloooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooong†ine")));

112 şas 
	cV”yLoooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooogName
 {

115 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

116 şas 
	cTy³dTe¡
 : 
public
 
‹¡šg
::
Te¡
 {

119 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
	gkSize
>

120 şas 
	cMyA¼ay
 {

123 
	g‹¡šg
::
	tTy³s
<
	tV”yLoooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooogName
,

124 *, 
	tMyA¼ay
<
	tboŞ
, 42> > 
	tMyTy³s
;

126 
TYPED_TEST_SUITE
(
Ty³dTe¡
, 
MyTy³s
);

128 
	$TYPED_TEST
(
Ty³dTe¡
, 
Te¡A
) {

129 
	}
}

131 
	$TYPED_TEST
(
Ty³dTe¡
, 
Te¡B
) {

132 
	}
}

136 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

137 şas 
	cTy³P¬amTe¡
 : 
public
 
‹¡šg
::
Te¡
 {

140 
TYPED_TEST_SUITE_P
(
Ty³P¬amTe¡
);

142 
	$TYPED_TEST_P
(
Ty³P¬amTe¡
, 
Te¡A
) {

143 
	}
}

145 
	$TYPED_TEST_P
(
Ty³P¬amTe¡
, 
Te¡B
) {

146 
	}
}

148 
REGISTER_TYPED_TEST_SUITE_P
(
Ty³P¬amTe¡
, 
Te¡A
, 
Te¡B
);

150 
INSTANTIATE_TYPED_TEST_SUITE_P
(
My
, 
Ty³P¬amTe¡
, 
MyTy³s
);

152 
	$maš
(
¬gc
, **
¬gv
) {

153 ::
‹¡šg
::
	`In™GoogËTe¡
(&
¬gc
, 
¬gv
);

155  
	`RUN_ALL_TESTS
();

156 
	}
}

	@third_party/googletest/googletest/test/googletest-listener-test.cc

35 
	~<veùÜ
>

37 
	~"g‹¡/g‹¡.h
"

38 
	~"g‹¡/š‹º®/cu¡om/g‹¡.h
"

40 
	gusšg
 ::
‹¡šg
::
AddGlob®Te¡EnvœÚm’t
;

41 
	gusšg
 ::
‹¡šg
::
EnvœÚm’t
;

42 
	gusšg
 ::
‹¡šg
::
In™GoogËTe¡
;

43 
	gusšg
 ::
‹¡šg
::
Te¡
;

44 
	gusšg
 ::
‹¡šg
::
Te¡Su™e
;

45 
	gusšg
 ::
‹¡šg
::
Te¡Ev’tLi¡’”
;

46 
	gusšg
 ::
‹¡šg
::
Te¡Info
;

47 
	gusšg
 ::
‹¡šg
::
Te¡P¬tResuÉ
;

48 
	gusšg
 ::
‹¡šg
::
Un™Te¡
;

51 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
>* 
g_ev’ts
 = 
nuÎ±r
;

53 
Çme¥aû
 
	g‹¡šg
 {

54 
Çme¥aû
 
	gš‹º®
 {

56 şas 
	cEv’tRecÜdšgLi¡’”
 : 
public
 
Te¡Ev’tLi¡’”
 {

57 
public
:

58 
ex¶ic™
 
Ev’tRecÜdšgLi¡’”
(cÚ¡ * 
Çme
è: 
Çme_
(name) {}

60 
´Ùeùed
:

61 
OnTe¡Prog¿mS¹
(cÚ¡ 
Un™Te¡
& ) 
ov”ride
 {

62 
g_ev’ts
->
push_back
(
G‘FuÎM‘hodName
("OnTestProgramStart"));

65 
OnTe¡I‹¿tiÚS¹
(cÚ¡ 
Un™Te¡
& ,

66 
™”©iÚ
è
	gov”ride
 {

67 
Mes§ge
 
	gmes§ge
;

68 
	gmes§ge
 << 
G‘FuÎM‘hodName
("OnTestIterationStart")

69 << "(" << 
	g™”©iÚ
 << ")";

70 
	gg_ev’ts
->
push_back
(
mes§ge
.
G‘SŒšg
());

73 
OnEnvœÚm’tsS‘UpS¹
(cÚ¡ 
Un™Te¡
& ) 
	gov”ride
 {

74 
	gg_ev’ts
->
push_back
(
G‘FuÎM‘hodName
("OnEnvironmentsSetUpStart"));

77 
OnEnvœÚm’tsS‘UpEnd
(cÚ¡ 
Un™Te¡
& ) 
	gov”ride
 {

78 
	gg_ev’ts
->
push_back
(
G‘FuÎM‘hodName
("OnEnvironmentsSetUpEnd"));

80 #iâdeà
GTEST_REMOVE_LEGACY_TEST_CASEAPI_


81 
OnTe¡Ca£S¹
(cÚ¡ 
Te¡Ca£
& ) 
	gov”ride
 {

82 
	gg_ev’ts
->
push_back
(
G‘FuÎM‘hodName
("OnTestCaseStart"));

86 
OnTe¡S¹
(cÚ¡ 
Te¡Info
& ) 
	gov”ride
 {

87 
	gg_ev’ts
->
push_back
(
G‘FuÎM‘hodName
("OnTestStart"));

90 
OnTe¡P¬tResuÉ
(cÚ¡ 
Te¡P¬tResuÉ
& ) 
	gov”ride
 {

91 
	gg_ev’ts
->
push_back
(
G‘FuÎM‘hodName
("OnTestPartResult"));

94 
OnTe¡End
(cÚ¡ 
Te¡Info
& ) 
	gov”ride
 {

95 
	gg_ev’ts
->
push_back
(
G‘FuÎM‘hodName
("OnTestEnd"));

98 #iâdeà
GTEST_REMOVE_LEGACY_TEST_CASEAPI_


99 
OnTe¡Ca£End
(cÚ¡ 
Te¡Ca£
& ) 
	gov”ride
 {

100 
	gg_ev’ts
->
push_back
(
G‘FuÎM‘hodName
("OnTestCaseEnd"));

104 
OnEnvœÚm’tsT—rDownS¹
(cÚ¡ 
Un™Te¡
& ) 
	gov”ride
 {

105 
	gg_ev’ts
->
push_back
(
G‘FuÎM‘hodName
("OnEnvironmentsTearDownStart"));

108 
OnEnvœÚm’tsT—rDownEnd
(cÚ¡ 
Un™Te¡
& ) 
	gov”ride
 {

109 
	gg_ev’ts
->
push_back
(
G‘FuÎM‘hodName
("OnEnvironmentsTearDownEnd"));

112 
OnTe¡I‹¿tiÚEnd
(cÚ¡ 
Un™Te¡
& ,

113 
™”©iÚ
è
	gov”ride
 {

114 
Mes§ge
 
	gmes§ge
;

115 
	gmes§ge
 << 
G‘FuÎM‘hodName
("OnTestIterationEnd")

116 << "(" << 
	g™”©iÚ
 << ")";

117 
	gg_ev’ts
->
push_back
(
mes§ge
.
G‘SŒšg
());

120 
OnTe¡Prog¿mEnd
(cÚ¡ 
Un™Te¡
& ) 
	gov”ride
 {

121 
	gg_ev’ts
->
push_back
(
G‘FuÎM‘hodName
("OnTestProgramEnd"));

124 
	g´iv©e
:

125 
¡d
::
¡ršg
 
G‘FuÎM‘hodName
(cÚ¡ * 
Çme
) {

126  
Çme_
 + "." + 
Çme
;

129 
	g¡d
::
¡ršg
 
Çme_
;

133 şas 
	cEv’tRecÜdšgLi¡’”2
 : 
public
 
Te¡Ev’tLi¡’”
 {

134 
public
:

135 
ex¶ic™
 
Ev’tRecÜdšgLi¡’”2
(cÚ¡ * 
Çme
è: 
Çme_
(name) {}

137 
´Ùeùed
:

138 
OnTe¡Prog¿mS¹
(cÚ¡ 
Un™Te¡
& ) 
ov”ride
 {

139 
g_ev’ts
->
push_back
(
G‘FuÎM‘hodName
("OnTestProgramStart"));

142 
OnTe¡I‹¿tiÚS¹
(cÚ¡ 
Un™Te¡
& ,

143 
™”©iÚ
è
	gov”ride
 {

144 
Mes§ge
 
	gmes§ge
;

145 
	gmes§ge
 << 
G‘FuÎM‘hodName
("OnTe¡I‹¿tiÚS¹"è<< "(" << 
	g™”©iÚ


147 
	gg_ev’ts
->
push_back
(
mes§ge
.
G‘SŒšg
());

150 
OnEnvœÚm’tsS‘UpS¹
(cÚ¡ 
Un™Te¡
& ) 
	gov”ride
 {

151 
	gg_ev’ts
->
push_back
(
G‘FuÎM‘hodName
("OnEnvironmentsSetUpStart"));

154 
OnEnvœÚm’tsS‘UpEnd
(cÚ¡ 
Un™Te¡
& ) 
	gov”ride
 {

155 
	gg_ev’ts
->
push_back
(
G‘FuÎM‘hodName
("OnEnvironmentsSetUpEnd"));

158 
OnTe¡Su™eS¹
(cÚ¡ 
Te¡Su™e
& ) 
	gov”ride
 {

159 
	gg_ev’ts
->
push_back
(
G‘FuÎM‘hodName
("OnTestSuiteStart"));

162 
OnTe¡S¹
(cÚ¡ 
Te¡Info
& ) 
	gov”ride
 {

163 
	gg_ev’ts
->
push_back
(
G‘FuÎM‘hodName
("OnTestStart"));

166 
OnTe¡P¬tResuÉ
(cÚ¡ 
Te¡P¬tResuÉ
& ) 
	gov”ride
 {

167 
	gg_ev’ts
->
push_back
(
G‘FuÎM‘hodName
("OnTestPartResult"));

170 
OnTe¡End
(cÚ¡ 
Te¡Info
& ) 
	gov”ride
 {

171 
	gg_ev’ts
->
push_back
(
G‘FuÎM‘hodName
("OnTestEnd"));

174 
OnTe¡Su™eEnd
(cÚ¡ 
Te¡Su™e
& ) 
	gov”ride
 {

175 
	gg_ev’ts
->
push_back
(
G‘FuÎM‘hodName
("OnTestSuiteEnd"));

178 
OnEnvœÚm’tsT—rDownS¹
(cÚ¡ 
Un™Te¡
& ) 
	gov”ride
 {

179 
	gg_ev’ts
->
push_back
(
G‘FuÎM‘hodName
("OnEnvironmentsTearDownStart"));

182 
OnEnvœÚm’tsT—rDownEnd
(cÚ¡ 
Un™Te¡
& ) 
	gov”ride
 {

183 
	gg_ev’ts
->
push_back
(
G‘FuÎM‘hodName
("OnEnvironmentsTearDownEnd"));

186 
OnTe¡I‹¿tiÚEnd
(cÚ¡ 
Un™Te¡
& ,

187 
™”©iÚ
è
	gov”ride
 {

188 
Mes§ge
 
	gmes§ge
;

189 
	gmes§ge
 << 
G‘FuÎM‘hodName
("OnTe¡I‹¿tiÚEnd"è<< "(" << 
	g™”©iÚ


191 
	gg_ev’ts
->
push_back
(
mes§ge
.
G‘SŒšg
());

194 
OnTe¡Prog¿mEnd
(cÚ¡ 
Un™Te¡
& ) 
	gov”ride
 {

195 
	gg_ev’ts
->
push_back
(
G‘FuÎM‘hodName
("OnTestProgramEnd"));

198 
	g´iv©e
:

199 
¡d
::
¡ršg
 
G‘FuÎM‘hodName
(cÚ¡ * 
Çme
è{  
Çme_
 + "." +‚ame; }

201 
	g¡d
::
¡ršg
 
Çme_
;

204 şas 
	cEnvœÚm’tInvoÿtiÚC©ch”
 : 
public
 
EnvœÚm’t
 {

205 
´Ùeùed
:

206 
S‘Up
(è
ov”ride
 { 
g_ev’ts
->
push_back
("Environment::SetUp"); }

208 
T—rDown
(è
	gov”ride
 { 
	gg_ev’ts
->
push_back
("Environment::TearDown"); }

211 şas 
	cLi¡’”Te¡
 : 
public
 
Te¡
 {

212 
´Ùeùed
:

213 
S‘UpTe¡Su™e
() {

214 
g_ev’ts
->
push_back
("ListenerTest::SetUpTestSuite");

217 
T—rDownTe¡Su™e
() {

218 
	gg_ev’ts
->
push_back
("ListenerTest::TearDownTestSuite");

221 
S‘Up
(è
	gov”ride
 { 
	gg_ev’ts
->
push_back
("ListenerTest::SetUp"); }

223 
T—rDown
(è
	gov”ride
 { 
	gg_ev’ts
->
push_back
("ListenerTest::TearDown"); }

226 
TEST_F
(
Li¡’”Te¡
, 
DÛsFoo
) {

229 
	gg_ev’ts
->
push_back
("ListenerTest::* Test Body");

230 
SUCCEED
();

233 
TEST_F
(
Li¡’”Te¡
, 
DÛsB¬
) {

234 
	gg_ev’ts
->
push_back
("ListenerTest::* Test Body");

235 
SUCCEED
();

242 
	gusšg
 ::
‹¡šg
::
š‹º®
::
EnvœÚm’tInvoÿtiÚC©ch”
;

243 
	gusšg
 ::
‹¡šg
::
š‹º®
::
Ev’tRecÜdšgLi¡’”
;

244 
	gusšg
 ::
‹¡šg
::
š‹º®
::
Ev’tRecÜdšgLi¡’”2
;

246 
V”ifyResuÉs
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
>& 
d©a
,

247 cÚ¡ * cÚ¡* 
ex³ùed_d©a
,

248 
size_t
 
ex³ùed_d©a_size
) {

249 cÚ¡ 
size_t
 
	gaùu®_size
 = 
d©a
.
size
();

252 
EXPECT_EQ
(
ex³ùed_d©a_size
, 
aùu®_size
);

255 cÚ¡ 
size_t
 
	gshÜ‹r_size
 = 
ex³ùed_d©a_size
 <ğ
aùu®_size
 ?

256 
ex³ùed_d©a_size
 : 
aùu®_size
;

257 
size_t
 
	gi
 = 0;

258 ; 
	gi
 < 
	gshÜ‹r_size
; ++i) {

259 
ASSERT_STREQ
(
ex³ùed_d©a
[
i
], 
d©a
[i].
c_¡r
())

260 << "©…os™iÚ " << 
	gi
;

264 ; 
	gi
 < 
	gaùu®_size
; ++i) {

265 
´štf
(" Actualƒvent #%lu: %s\n",

266 
¡©ic_ÿ¡
<>(
i
), 
d©a
[i].
c_¡r
());

270 
	$maš
(
¬gc
, **
¬gv
) {

271 
¡d
::
veùÜ
<¡d::
¡ršg
> 
ev’ts
;

272 
g_ev’ts
 = &
ev’ts
;

273 
	`In™GoogËTe¡
(&
¬gc
, 
¬gv
);

275 
Un™Te¡
::
	`G‘In¡ªû
()->
	`li¡’”s
().
	`Aµ’d
(

276 
Ãw
 
	`Ev’tRecÜdšgLi¡’”
("1st"));

277 
Un™Te¡
::
	`G‘In¡ªû
()->
	`li¡’”s
().
	`Aµ’d
(

278 
Ãw
 
	`Ev’tRecÜdšgLi¡’”
("2nd"));

279 
Un™Te¡
::
	`G‘In¡ªû
()->
	`li¡’”s
().
	`Aµ’d
(

280 
Ãw
 
	`Ev’tRecÜdšgLi¡’”2
("3rd"));

282 
	`AddGlob®Te¡EnvœÚm’t
(
Ãw
 
EnvœÚm’tInvoÿtiÚC©ch”
);

284 
	`GTEST_CHECK_
(
ev’ts
.
	`size
() == 0)

287 ::
‹¡šg
::
	`GTEST_FLAG
(
»³©
) = 2;

288 
»t_v®
 = 
	`RUN_ALL_TESTS
();

290 #iâdeà
GTEST_REMOVE_LEGACY_TEST_CASEAPI_


293 cÚ¡ * cÚ¡ 
ex³ùed_ev’ts
[] = {"1st.OnTestProgramStart",

404 cÚ¡ * cÚ¡ 
ex³ùed_ev’ts
[] = {"1st.OnTestProgramStart",

508 
	`V”ifyResuÉs
(
ev’ts
,

509 
ex³ùed_ev’ts
,

510 (
ex³ùed_ev’ts
)/(expected_events[0]));

514 ià(
Un™Te¡
::
	`G‘In¡ªû
()->
	`Faed
())

515 
»t_v®
 = 1;

517  
»t_v®
;

518 
	}
}

	@third_party/googletest/googletest/test/googletest-message-test.cc

33 
	~"g‹¡/g‹¡-mes§ge.h
"

35 
	~"g‹¡/g‹¡.h
"

37 
	gÇme¥aû
 {

39 
	gusšg
 ::
‹¡šg
::
Mes§ge
;

44 
TEST
(
Mes§geTe¡
, 
DeçuÉCÚ¡ruùÜ
) {

45 cÚ¡ 
Mes§ge
 
	gmsg
;

46 
EXPECT_EQ
("", 
msg
.
G‘SŒšg
());

50 
TEST
(
Mes§geTe¡
, 
CİyCÚ¡ruùÜ
) {

51 cÚ¡ 
Mes§ge
 
msg1
("Hello");

52 cÚ¡ 
Mes§ge
 
msg2
(
msg1
);

53 
EXPECT_EQ
("H–lo", 
msg2
.
G‘SŒšg
());

57 
TEST
(
Mes§geTe¡
, 
CÚ¡ruùsFromCSŒšg
) {

58 
Mes§ge
 
msg
("Hello");

59 
EXPECT_EQ
("H–lo", 
msg
.
G‘SŒšg
());

63 
TEST
(
Mes§geTe¡
, 
SŒ—msFlßt
) {

64 cÚ¡ 
	g¡d
::
¡ršg
 
s
 = (
Mes§ge
(è<< 1.23456F << " " << 2.34567F).
G‘SŒšg
();

66 
EXPECT_PRED_FORMAT2
(
‹¡šg
::
IsSub¡ršg
, "1.234560", 
s
.
c_¡r
());

67 
EXPECT_PRED_FORMAT2
(
‹¡šg
::
IsSub¡ršg
, " 2.345669", 
s
.
c_¡r
());

71 
TEST
(
Mes§geTe¡
, 
SŒ—msDoubË
) {

72 cÚ¡ 
	g¡d
::
¡ršg
 
s
 = (
Mes§ge
() << 1260570880.4555497 << " "

73 << 1260572265.1954534).
G‘SŒšg
();

75 
EXPECT_PRED_FORMAT2
(
‹¡šg
::
IsSub¡ršg
, "1260570880.45", 
s
.
c_¡r
());

76 
EXPECT_PRED_FORMAT2
(
‹¡šg
::
IsSub¡ršg
, " 1260572265.19", 
s
.
c_¡r
());

80 
TEST
(
Mes§geTe¡
, 
SŒ—msPoš‹r
) {

81 
	gn
 = 0;

82 * 
	gp
 = &
n
;

83 
EXPECT_NE
("ÒuÎ)", (
Mes§ge
(è<< 
p
).
G‘SŒšg
());

87 
TEST
(
Mes§geTe¡
, 
SŒ—msNuÎPoš‹r
) {

88 * 
	gp
 = 
nuÎ±r
;

89 
EXPECT_EQ
("ÒuÎ)", (
Mes§ge
(è<< 
p
).
G‘SŒšg
());

93 
TEST
(
Mes§geTe¡
, 
SŒ—msCSŒšg
) {

94 
EXPECT_EQ
("Foo", (
Mes§ge
(è<< "Foo").
G‘SŒšg
());

98 
TEST
(
Mes§geTe¡
, 
SŒ—msNuÎCSŒšg
) {

99 * 
	gp
 = 
nuÎ±r
;

100 
EXPECT_EQ
("ÒuÎ)", (
Mes§ge
(è<< 
p
).
G‘SŒšg
());

104 
TEST
(
Mes§geTe¡
, 
SŒ—msSŒšg
) {

105 cÚ¡ ::
¡d
::
¡ršg
 
¡r
("Hello");

106 
EXPECT_EQ
("H–lo", (
Mes§ge
(è<< 
¡r
).
G‘SŒšg
());

110 
TEST
(
Mes§geTe¡
, 
SŒ—msSŒšgW™hEmbeddedNUL
) {

111 cÚ¡ 
	gch¬_¬¿y_w™h_nul
[] =

113 cÚ¡ ::
¡d
::
¡ršg
 
¡ršg_w™h_nul
(
ch¬_¬¿y_w™h_nul
,

114 (
ch¬_¬¿y_w™h_nul
) - 1);

115 
EXPECT_EQ
("Here's‡ NUL\\0‡nd some more string",

116 (
Mes§ge
(è<< 
¡ršg_w™h_nul
).
G‘SŒšg
());

120 
TEST
(
Mes§geTe¡
, 
SŒ—msNULCh¬
) {

121 
EXPECT_EQ
("\\0", (
Mes§ge
(è<< '\0').
G‘SŒšg
());

125 
TEST
(
Mes§geTe¡
, 
SŒ—msIÁ
) {

126 
EXPECT_EQ
("123", (
Mes§ge
(è<< 123).
G‘SŒšg
());

131 
TEST
(
Mes§geTe¡
, 
SŒ—msBasicIoMª
) {

132 
EXPECT_EQ
("Line 1.\nA NUL char \\0 in†ine 2.",

133 (
Mes§ge
(è<< "Lš1." << 
¡d
::
’dl


134 << "A NUL ch¬ " << 
¡d
::
’ds
 << std::
æush


135 << " iÀlš2.").
G‘SŒšg
());

139 
TEST
(
Mes§geTe¡
, 
G‘SŒšg
) {

140 
Mes§ge
 
	gmsg
;

141 
	gmsg
 << 1 << "†amb";

142 
EXPECT_EQ
("1†amb", 
msg
.
G‘SŒšg
());

146 
TEST
(
Mes§geTe¡
, 
SŒ—msToOSŒ—m
) {

147 
Mes§ge
 
msg
("Hello");

148 ::
¡d
::
¡ršg¡»am
 
ss
;

149 
	gss
 << 
	gmsg
;

150 
EXPECT_EQ
("H–lo", 
‹¡šg
::
š‹º®
::
SŒšgSŒ—mToSŒšg
(&
ss
));

154 
TEST
(
Mes§geTe¡
, 
DÛsNÙTakeUpMuchSckS·û
) {

155 
EXPECT_LE
((
Mes§ge
), 16U);

	@third_party/googletest/googletest/test/googletest-options-test.cc

39 
	~"g‹¡/g‹¡.h
"

41 #ià
GTEST_OS_WINDOWS_MOBILE


42 
	~<wšdows.h
>

43 #–ià
GTEST_OS_WINDOWS


44 
	~<dœeù.h
>

45 #–ià
GTEST_OS_OS2


47 
	~<¡ršgs.h
>

50 
	~"¤c/g‹¡-š‹º®-šl.h
"

52 
Çme¥aû
 
	g‹¡šg
 {

53 
Çme¥aû
 
	gš‹º®
 {

54 
	gÇme¥aû
 {

57 
FeP©h
 
G‘AbsŞu‹P©hOf
(cÚ¡ FeP©h& 
»Ïtive_·th
) {

58  
	gFeP©h
::
CÚÿtP©hs
(
FeP©h
::
G‘Cu¼’tDœ
(), 
»Ïtive_·th
);

63 
TEST
(
XmlOuutTe¡
, 
G‘OuutFÜm©DeçuÉ
) {

64 
GTEST_FLAG
(
ouut
) = "";

65 
EXPECT_STREQ
("", 
Un™Te¡O±iÚs
::
G‘OuutFÜm©
().
c_¡r
());

68 
TEST
(
XmlOuutTe¡
, 
G‘OuutFÜm©
) {

69 
GTEST_FLAG
(
ouut
) = "xml:filename";

70 
EXPECT_STREQ
("xml", 
Un™Te¡O±iÚs
::
G‘OuutFÜm©
().
c_¡r
());

73 
TEST
(
XmlOuutTe¡
, 
G‘OuutFeDeçuÉ
) {

74 
GTEST_FLAG
(
ouut
) = "";

75 
EXPECT_EQ
(
G‘AbsŞu‹P©hOf
(
FeP©h
("‹¡_d‘a.xml")).
¡ršg
(),

76 
Un™Te¡O±iÚs
::
G‘AbsŞu‹P©hToOuutFe
());

79 
TEST
(
XmlOuutTe¡
, 
G‘OuutFeSšgËFe
) {

80 
GTEST_FLAG
(
ouut
) = "xml:filename.abc";

81 
EXPECT_EQ
(
G‘AbsŞu‹P©hOf
(
FeP©h
("f’ame.abc")).
¡ršg
(),

82 
Un™Te¡O±iÚs
::
G‘AbsŞu‹P©hToOuutFe
());

85 
TEST
(
XmlOuutTe¡
, 
G‘OuutFeFromDœeùÜyP©h
) {

86 
GTEST_FLAG
(
ouut
èğ"xml:·th" 
GTEST_PATH_SEP_
;

87 cÚ¡ 
	g¡d
::
¡ršg
 
ex³ùed_ouut_fe
 =

88 
G‘AbsŞu‹P©hOf
(

89 
FeP©h
(
¡d
::
¡ršg
("·th"è+ 
GTEST_PATH_SEP_
 +

90 
G‘Cu¼’tExecubËName
().
¡ršg
() + ".xml")).string();

91 cÚ¡ 
	g¡d
::
¡ršg
& 
ouut_fe
 =

92 
Un™Te¡O±iÚs
::
G‘AbsŞu‹P©hToOuutFe
();

93 #ià
GTEST_OS_WINDOWS


94 
EXPECT_STRCASEEQ
(
ex³ùed_ouut_fe
.
c_¡r
(), 
ouut_fe
.c_str());

96 
EXPECT_EQ
(
ex³ùed_ouut_fe
, 
ouut_fe
.
c_¡r
());

100 
TEST
(
OuutFeH–³rsTe¡
, 
G‘Cu¼’tExecubËName
) {

101 cÚ¡ 
	g¡d
::
¡ršg
 
exe_¡r
 = 
G‘Cu¼’tExecubËName
().string();

102 #ià
GTEST_OS_WINDOWS


103 cÚ¡ 
boŞ
 
	gsucûss
 =

104 
_¡rcmpi
("googË‹¡-İtiÚs-‹¡", 
exe_¡r
.
c_¡r
()) == 0 ||

105 
_¡rcmpi
("g‹¡-İtiÚs-ex_‹¡", 
exe_¡r
.
c_¡r
()) == 0 ||

106 
_¡rcmpi
("g‹¡_®l_‹¡", 
exe_¡r
.
c_¡r
()) == 0 ||

107 
_¡rcmpi
("g‹¡_dÎ_‹¡", 
exe_¡r
.
c_¡r
()) == 0;

108 #–ià
GTEST_OS_OS2


109 cÚ¡ 
boŞ
 
	gsucûss
 =

110 
¡rÿ£cmp
("googË‹¡-İtiÚs-‹¡", 
exe_¡r
.
c_¡r
()) == 0 ||

111 
¡rÿ£cmp
("g‹¡-İtiÚs-ex_‹¡", 
exe_¡r
.
c_¡r
()) == 0 ||

112 
¡rÿ£cmp
("g‹¡_®l_‹¡", 
exe_¡r
.
c_¡r
()) == 0 ||

113 
¡rÿ£cmp
("g‹¡_dÎ_‹¡", 
exe_¡r
.
c_¡r
()) == 0;

114 #–ià
GTEST_OS_FUCHSIA


115 cÚ¡ 
boŞ
 
	gsucûss
 = 
exe_¡r
 == "app";

117 cÚ¡ 
boŞ
 
	gsucûss
 =

118 
exe_¡r
 == "googletest-options-test" ||

119 
exe_¡r
 == "gtest_all_test" ||

120 
exe_¡r
 == "lt-gtest_all_test" ||

121 
exe_¡r
 == "gtest_dll_test";

123 ià(!
	gsucûss
)

124 
FAIL
(è<< "G‘Cu¼’tExecubËName(è»tuº " << 
	gexe_¡r
;

127 #ià!
GTEST_OS_FUCHSIA


129 şas 
	cXmlOuutChªgeDœTe¡
 : 
public
 
Te¡
 {

130 
´Ùeùed
:

131 
S‘Up
(è
ov”ride
 {

132 
Üigš®_wÜkšg_dœ_
 = 
FeP©h
::
G‘Cu¼’tDœ
();

133 
	gposix
::
ChDœ
("..");

135 
EXPECT_NE
(
Üigš®_wÜkšg_dœ_
.
¡ršg
(),

136 
FeP©h
::
G‘Cu¼’tDœ
().
¡ršg
());

139 
T—rDown
(è
	gov”ride
 {

140 
	gposix
::
ChDœ
(
Üigš®_wÜkšg_dœ_
.
¡ršg
().
c_¡r
());

143 
FeP©h
 
	gÜigš®_wÜkšg_dœ_
;

146 
TEST_F
(
XmlOuutChªgeDœTe¡
, 
P»£rveOrigš®WÜkšgDœW™hDeçuÉ
) {

147 
GTEST_FLAG
(
ouut
) = "";

148 
EXPECT_EQ
(
FeP©h
::
CÚÿtP©hs
(
Üigš®_wÜkšg_dœ_
,

149 
FeP©h
("‹¡_d‘a.xml")).
¡ršg
(),

150 
Un™Te¡O±iÚs
::
G‘AbsŞu‹P©hToOuutFe
());

153 
TEST_F
(
XmlOuutChªgeDœTe¡
, 
P»£rveOrigš®WÜkšgDœW™hDeçuÉXML
) {

154 
GTEST_FLAG
(
ouut
) = "xml";

155 
EXPECT_EQ
(
FeP©h
::
CÚÿtP©hs
(
Üigš®_wÜkšg_dœ_
,

156 
FeP©h
("‹¡_d‘a.xml")).
¡ršg
(),

157 
Un™Te¡O±iÚs
::
G‘AbsŞu‹P©hToOuutFe
());

160 
TEST_F
(
XmlOuutChªgeDœTe¡
, 
P»£rveOrigš®WÜkšgDœW™hR–©iveFe
) {

161 
GTEST_FLAG
(
ouut
) = "xml:filename.abc";

162 
EXPECT_EQ
(
FeP©h
::
CÚÿtP©hs
(
Üigš®_wÜkšg_dœ_
,

163 
FeP©h
("f’ame.abc")).
¡ršg
(),

164 
Un™Te¡O±iÚs
::
G‘AbsŞu‹P©hToOuutFe
());

167 
TEST_F
(
XmlOuutChªgeDœTe¡
, 
P»£rveOrigš®WÜkšgDœW™hR–©iveP©h
) {

168 
GTEST_FLAG
(
ouut
èğ"xml:·th" 
GTEST_PATH_SEP_
;

169 cÚ¡ 
	g¡d
::
¡ršg
 
ex³ùed_ouut_fe
 =

170 
FeP©h
::
CÚÿtP©hs
(

171 
Üigš®_wÜkšg_dœ_
,

172 
FeP©h
(
¡d
::
¡ršg
("·th"è+ 
GTEST_PATH_SEP_
 +

173 
G‘Cu¼’tExecubËName
().
¡ršg
() + ".xml")).string();

174 cÚ¡ 
	g¡d
::
¡ršg
& 
ouut_fe
 =

175 
Un™Te¡O±iÚs
::
G‘AbsŞu‹P©hToOuutFe
();

176 #ià
GTEST_OS_WINDOWS


177 
EXPECT_STRCASEEQ
(
ex³ùed_ouut_fe
.
c_¡r
(), 
ouut_fe
.c_str());

179 
EXPECT_EQ
(
ex³ùed_ouut_fe
, 
ouut_fe
.
c_¡r
());

183 
TEST_F
(
XmlOuutChªgeDœTe¡
, 
P»£rveOrigš®WÜkšgDœW™hAbsŞu‹Fe
) {

184 #ià
GTEST_OS_WINDOWS


185 
GTEST_FLAG
(
ouut
) = "xml:c:\\tmp\\filename.abc";

186 
EXPECT_EQ
(
FeP©h
("c:\\tmp\\f’ame.abc").
¡ršg
(),

187 
Un™Te¡O±iÚs
::
G‘AbsŞu‹P©hToOuutFe
());

189 
GTEST_FLAG
(
ouut
) ="xml:/tmp/filename.abc";

190 
EXPECT_EQ
(
FeP©h
("/tmp/f’ame.abc").
¡ršg
(),

191 
Un™Te¡O±iÚs
::
G‘AbsŞu‹P©hToOuutFe
());

195 
TEST_F
(
XmlOuutChªgeDœTe¡
, 
P»£rveOrigš®WÜkšgDœW™hAbsŞu‹P©h
) {

196 #ià
GTEST_OS_WINDOWS


197 cÚ¡ 
	g¡d
::
¡ršg
 
·th
 = "c:\\tmp\\";

199 cÚ¡ 
	g¡d
::
¡ršg
 
·th
 = "/tmp/";

202 
GTEST_FLAG
(
ouut
èğ"xml:" + 
·th
;

203 cÚ¡ 
	g¡d
::
¡ršg
 
ex³ùed_ouut_fe
 =

204 
·th
 + 
G‘Cu¼’tExecubËName
().
¡ršg
() + ".xml";

205 cÚ¡ 
	g¡d
::
¡ršg
& 
ouut_fe
 =

206 
Un™Te¡O±iÚs
::
G‘AbsŞu‹P©hToOuutFe
();

208 #ià
GTEST_OS_WINDOWS


209 
EXPECT_STRCASEEQ
(
ex³ùed_ouut_fe
.
c_¡r
(), 
ouut_fe
.c_str());

211 
EXPECT_EQ
(
ex³ùed_ouut_fe
, 
ouut_fe
.
c_¡r
());

	@third_party/googletest/googletest/test/googletest-output-test_.cc

36 
	~"g‹¡/g‹¡-¥i.h
"

37 
	~"g‹¡/g‹¡.h
"

38 
	~"¤c/g‹¡-š‹º®-šl.h
"

40 
	~<¡dlib.h
>

42 #ià
_MSC_VER


43 
	$GTEST_DISABLE_MSC_WARNINGS_PUSH_
(4127 )

46 #ià
GTEST_IS_THREADSAFE


47 
usšg
 
‹¡šg
::
ScİedFakeTe¡P¬tResuÉR•Ü‹r
;

48 
usšg
 
‹¡šg
::
Te¡P¬tResuÉA¼ay
;

50 
usšg
 
‹¡šg
::
š‹º®
::
NÙifiÿtiÚ
;

51 
usšg
 
‹¡šg
::
š‹º®
::
Th»adW™hP¬am
;

54 
Çme¥aû
 
posix
 = ::
‹¡šg
::
š‹º®
::posix;

59 
	$Te¡Eq1
(
x
) {

60 
	`ASSERT_EQ
(1, 
x
);

61 
	}
}

65 
	$TryTe¡Subroutše
() {

67 
	`Te¡Eq1
(2);

73 ià(
‹¡šg
::
Te¡
::
	`HasF©®Fau»
()) ;

76 
	`FAIL
() << "This should‚ever be„eached.";

77 
	}
}

79 
	$TEST
(
PassšgTe¡
, 
PassšgTe¡1
) {

80 
	}
}

82 
	$TEST
(
PassšgTe¡
, 
PassšgTe¡2
) {

83 
	}
}

87 
şass
 
	gFašgP¬amTe¡
 : 
public
 
‹¡šg
::
Te¡W™hP¬am
<> {};

89 
	$TEST_P
(
FašgP¬amTe¡
, 
Fas
) {

90 
	`EXPECT_EQ
(1, 
	`G‘P¬am
());

91 
	}
}

95 
INSTANTIATE_TEST_SUITE_P
(
PrštšgFašgP¬ams
,

96 
FašgP¬amTe¡
,

97 
‹¡šg
::
V®ues
(2));

101 
şass
 
	gEm±yBa£ÇmeP¬amIn¡
 : 
public
 
‹¡šg
::
Te¡W™hP¬am
<> {};

103 
	$TEST_P
(
Em±yBa£ÇmeP¬amIn¡
, 
Pas£s
è{ 
	`EXPECT_EQ
(1, 
	`G‘P¬am
()); 
	}
}

105 
INSTANTIATE_TEST_SUITE_P
(, 
Em±yBa£ÇmeP¬amIn¡
, 
‹¡šg
::
V®ues
(1));

107 cÚ¡ 
	gkGŞd’SŒšg
[] = "\"Line\0 1\"\nLine 2";

109 
	$TEST
(
NÚçlFau»Te¡
, 
Esÿ³sSŒšgO³¿nds
) {

110 
¡d
::
¡ršg
 
aùu®
 = "actual \"string\"";

111 
	`EXPECT_EQ
(
kGŞd’SŒšg
, 
aùu®
);

113 cÚ¡ * 
gŞd’
 = 
kGŞd’SŒšg
;

114 
	`EXPECT_EQ
(
gŞd’
, 
aùu®
);

115 
	}
}

117 
	$TEST
(
NÚçlFau»Te¡
, 
DiffFÜLÚgSŒšgs
) {

118 
¡d
::
¡ršg
 
	`gŞd’_¡r
(
kGŞd’SŒšg
, (kGoldenString) - 1);

119 
	`EXPECT_EQ
(
gŞd’_¡r
, "Line 2");

120 
	}
}

123 
	$TEST
(
F©®Fau»Te¡
, 
F©®Fau»InSubroutše
) {

124 
	`´štf
("(expecting‡ failurehat x should be 1)\n");

126 
	`TryTe¡Subroutše
();

127 
	}
}

130 
	$TEST
(
F©®Fau»Te¡
, 
F©®Fau»InNe¡edSubroutše
) {

131 
	`´štf
("(expecting‡ failurehat x should be 1)\n");

134 
	`TryTe¡Subroutše
();

140 ià(
	`HasF©®Fau»
()) ;

143 
	`FAIL
() << "This should‚ever be„eached.";

144 
	}
}

147 
	$TEST
(
F©®Fau»Te¡
, 
NÚçlFau»InSubroutše
) {

148 
	`´štf
("(expecting‡ failure on false)\n");

149 
	`EXPECT_TRUE
(
çl£
);

150 
	`ASSERT_FALSE
(
	`HasF©®Fau»
());

151 
	}
}

154 
	$TEST
(
LoggšgTe¡
, 
IÁ”ËavšgLoggšgAndAs£¹iÚs
) {

155 cÚ¡ 
a
[4] = {

159 
	`´štf
("(expecting 2 failures on (3) >= (a[i]))\n");

160 
i
 = 0; i < 
¡©ic_ÿ¡
<>((
a
)/(*a)); i++) {

161 
	`´štf
("˜=ğ%d\n", 
i
);

162 
	`EXPECT_GE
(3, 
a
[
i
]);

164 
	}
}

169 
	$SubW™houtT¿û
(
n
) {

170 
	`EXPECT_EQ
(1, 
n
);

171 
	`ASSERT_EQ
(2, 
n
);

172 
	}
}

175 
	$SubW™hT¿û
(
n
) {

176 
	`SCOPED_TRACE
(
‹¡šg
::
	`Mes§ge
(è<< "Àğ" << 
n
);

178 
	`SubW™houtT¿û
(
n
);

179 
	}
}

181 
	$TEST
(
SCOPED_TRACETe¡
, 
Acû±edV®ues
) {

182 
	`SCOPED_TRACE
("literal string");

183 
	`SCOPED_TRACE
(
¡d
::
	`¡ršg
("std::string"));

184 
	`SCOPED_TRACE
(1337);

185 cÚ¡ * 
nuÎ_v®ue
 = 
nuÎ±r
;

186 
	`SCOPED_TRACE
(
nuÎ_v®ue
);

188 
	`ADD_FAILURE
() << "Just checkinghat‡llhese values work fine.";

189 
	}
}

192 
	$TEST
(
SCOPED_TRACETe¡
, 
ObeysScİes
) {

193 
	`´štf
("(expectedo fail)\n");

196 
	`ADD_FAILURE
() << "This failure isƒxpected,‡nd shouldn't have‡race.";

199 
	`SCOPED_TRACE
("Expectedrace");

202 
	`ADD_FAILURE
() << "This failure isƒxpected,‡nd should have‡race.";

207 
	`ADD_FAILURE
() << "This failure isƒxpected,‡nd shouldn't have‡race.";

208 
	}
}

211 
	$TEST
(
SCOPED_TRACETe¡
, 
WÜksInLoİ
) {

212 
	`´štf
("(expectedo fail)\n");

214 
i
 = 1; i <= 2; i++) {

215 
	`SCOPED_TRACE
(
‹¡šg
::
	`Mes§ge
(è<< "˜ğ" << 
i
);

217 
	`SubW™houtT¿û
(
i
);

219 
	}
}

222 
	$TEST
(
SCOPED_TRACETe¡
, 
WÜksInSubroutše
) {

223 
	`´štf
("(expectedo fail)\n");

225 
	`SubW™hT¿û
(1);

226 
	`SubW™hT¿û
(2);

227 
	}
}

230 
	$TEST
(
SCOPED_TRACETe¡
, 
CªBeNe¡ed
) {

231 
	`´štf
("(expectedo fail)\n");

233 
	`SCOPED_TRACE
("");

235 
	`SubW™hT¿û
(2);

236 
	}
}

239 
	$TEST
(
SCOPED_TRACETe¡
, 
CªBeR•—‹d
) {

240 
	`´štf
("(expectedo fail)\n");

242 
	`SCOPED_TRACE
("A");

243 
	`ADD_FAILURE
()

246 
	`SCOPED_TRACE
("B");

247 
	`ADD_FAILURE
()

251 
	`SCOPED_TRACE
("C");

252 
	`ADD_FAILURE
() << "This failure isƒxpected,‡nd should "

256 
	`SCOPED_TRACE
("D");

257 
	`ADD_FAILURE
() << "This failure isƒxpected,‡nd should "

259 
	}
}

261 #ià
GTEST_IS_THREADSAFE


291 
	sCheckPošts
 {

292 
NÙifiÿtiÚ
 
	mn1
;

293 
NÙifiÿtiÚ
 
	mn2
;

294 
NÙifiÿtiÚ
 
	mn3
;

297 
	$Th»adW™hScİedT¿û
(
CheckPošts
* 
check_pošts
) {

299 
	`SCOPED_TRACE
("Trace B");

300 
	`ADD_FAILURE
()

302 
check_pošts
->
n1
.
	`NÙify
();

303 
check_pošts
->
n2
.
	`Wa™FÜNÙifiÿtiÚ
();

305 
	`ADD_FAILURE
()

308 
	`ADD_FAILURE
()

310 
check_pošts
->
n3
.
	`NÙify
();

311 
	}
}

313 
	$TEST
(
SCOPED_TRACETe¡
, 
WÜksCÚcu¼’y
) {

314 
	`´štf
("(expecting 6 failures)\n");

316 
CheckPošts
 
check_pošts
;

317 
Th»adW™hP¬am
<
CheckPošts
*> 
	`th»ad
(&
Th»adW™hScİedT¿û
, &
check_pošts
,

318 
nuÎ±r
);

319 
check_pošts
.
n1
.
	`Wa™FÜNÙifiÿtiÚ
();

322 
	`SCOPED_TRACE
("Trace A");

323 
	`ADD_FAILURE
()

325 
check_pošts
.
n2
.
	`NÙify
();

326 
check_pošts
.
n3
.
	`Wa™FÜNÙifiÿtiÚ
();

328 
	`ADD_FAILURE
()

331 
	`ADD_FAILURE
()

333 
th»ad
.
	`Još
();

334 
	}
}

339 
	$TEST
(
ScİedT¿ûTe¡
, 
W™hEx¶ic™FeAndLše
) {

340 
‹¡šg
::
ScİedT¿û
 
	`Œaû
("explicit_file.cc", 123, "expectedrace message");

341 
	`ADD_FAILURE
() << "Checkhatherace is‡ttachedo‡…articular†ocation.";

342 
	}
}

344 
	$TEST
(
Di§bËdTe¡sW¬nšgTe¡
,

345 
DISABLED_AlsoRunDi§bËdTe¡sFÏgSuµ»s£sW¬nšg
) {

350 
	}
}

355 
	$AdHocTe¡
() {

356 
	`´štf
("The‚on-test…art ofhe code isƒxpectedo have 2 failures.\n\n");

357 
	`EXPECT_TRUE
(
çl£
);

358 
	`EXPECT_EQ
(2, 3);

359 
	}
}

362 
	$RunAÎTe¡s
() {

363 
	`AdHocTe¡
();

364  
	`RUN_ALL_TESTS
();

365 
	}
}

368 şas 
	cNÚF©®Fau»InFixtu»CÚ¡ruùÜTe¡
 : 
public
 
‹¡šg
::
Te¡
 {

369 
´Ùeùed
:

370 
	$NÚF©®Fau»InFixtu»CÚ¡ruùÜTe¡
() {

371 
	`´štf
("(expecting 5 failures)\n");

372 
	`ADD_FAILURE
() << "Expected failure #1, inheest fixture c'tor.";

375 ~
	$NÚF©®Fau»InFixtu»CÚ¡ruùÜTe¡
(è
ov”ride
 {

376 
	`ADD_FAILURE
() << "Expected failure #5, inheest fixture d'tor.";

377 
	}
}

379 
	$S‘Up
(è
ov”ride
 { 
	`ADD_FAILURE
(è<< "Ex³ùed fau» #2, iÀS‘Up()."; 
	}
}

381 
	$T—rDown
(è
ov”ride
 {

382 
	`ADD_FAILURE
() << "Expected failure #4, in TearDown.";

383 
	}
}

386 
	$TEST_F
(
NÚF©®Fau»InFixtu»CÚ¡ruùÜTe¡
, 
Fau»InCÚ¡ruùÜ
) {

387 
	`ADD_FAILURE
() << "Expected failure #3, inheest body.";

388 
	}
}

391 şas 
	cF©®Fau»InFixtu»CÚ¡ruùÜTe¡
 : 
public
 
‹¡šg
::
Te¡
 {

392 
´Ùeùed
:

393 
	$F©®Fau»InFixtu»CÚ¡ruùÜTe¡
() {

394 
	`´štf
("(expecting 2 failures)\n");

395 
	`In™
();

398 ~
	$F©®Fau»InFixtu»CÚ¡ruùÜTe¡
(è
ov”ride
 {

399 
	`ADD_FAILURE
() << "Expected failure #2, inheest fixture d'tor.";

400 
	}
}

402 
	$S‘Up
(è
ov”ride
 {

403 
	`ADD_FAILURE
() << "UNEXPECTED failure in SetUp(). "

406 
	}
}

408 
	$T—rDown
(è
ov”ride
 {

409 
	`ADD_FAILURE
() << "UNEXPECTED failure in TearDown(). "

412 
	}
}

414 
	g´iv©e
:

415 
	$In™
() {

416 
	`FAIL
() << "Expected failure #1, inheest fixture c'tor.";

417 
	}
}

420 
	$TEST_F
(
F©®Fau»InFixtu»CÚ¡ruùÜTe¡
, 
Fau»InCÚ¡ruùÜ
) {

421 
	`ADD_FAILURE
() << "UNEXPECTED failure inheest body. "

424 
	}
}

427 şas 
	cNÚF©®Fau»InS‘UpTe¡
 : 
public
 
‹¡šg
::
Te¡
 {

428 
´Ùeùed
:

429 ~
	$NÚF©®Fau»InS‘UpTe¡
(è
ov”ride
 { 
	`Deš™
(); }

431 
	$S‘Up
(è
ov”ride
 {

432 
	`´štf
("(expecting 4 failures)\n");

433 
	`ADD_FAILURE
() << "Expected failure #1, in SetUp().";

434 
	}
}

436 
	$T—rDown
(è
ov”ride
 { 
	`FAIL
(è<< "Ex³ùed fau» #3, iÀT—rDown()."; 
	}
}

438 
	g´iv©e
:

439 
	$Deš™
() {

440 
	`FAIL
() << "Expected failure #4, inheest fixture d'tor.";

441 
	}
}

444 
	$TEST_F
(
NÚF©®Fau»InS‘UpTe¡
, 
Fau»InS‘Up
) {

445 
	`FAIL
() << "Expected failure #2, inheest function.";

446 
	}
}

449 şas 
	cF©®Fau»InS‘UpTe¡
 : 
public
 
‹¡šg
::
Te¡
 {

450 
´Ùeùed
:

451 ~
	$F©®Fau»InS‘UpTe¡
(è
ov”ride
 { 
	`Deš™
(); }

453 
	$S‘Up
(è
ov”ride
 {

454 
	`´štf
("(expecting 3 failures)\n");

455 
	`FAIL
() << "Expected failure #1, in SetUp().";

456 
	}
}

458 
	$T—rDown
(è
ov”ride
 { 
	`FAIL
(è<< "Ex³ùed fau» #2, iÀT—rDown()."; 
	}
}

460 
	g´iv©e
:

461 
	$Deš™
() {

462 
	`FAIL
() << "Expected failure #3, inheest fixture d'tor.";

463 
	}
}

466 
	$TEST_F
(
F©®Fau»InS‘UpTe¡
, 
Fau»InS‘Up
) {

467 
	`FAIL
() << "UNEXPECTED failure inheest function. "

469 
	}
}

471 
	$TEST
(
AddFau»AtTe¡
, 
Mes§geCÚšsS³cif›dFeAndLšeNumb”
) {

472 
	`ADD_FAILURE_AT
("foo.cc", 42) << "Expected‚onfatal failure in foo.cc";

473 
	}
}

475 
	$TEST
(
G‹¡FaAtTe¡
, 
Mes§geCÚšsS³cif›dFeAndLšeNumb”
) {

476 
	`GTEST_FAIL_AT
("foo.cc", 42) << "Expected fatal failure in foo.cc";

477 
	}
}

489 
Çme¥aû
 
	gfoo
 {

491 şas 
	cMixedUpTe¡Su™eTe¡
 : 
public
 
‹¡šg
::
Te¡
 {

494 
	$TEST_F
(
MixedUpTe¡Su™eTe¡
, 
Fœ¡Te¡FromName¥aûFoo
è{
	}
}

495 
	$TEST_F
(
MixedUpTe¡Su™eTe¡
, 
SecÚdTe¡FromName¥aûFoo
è{
	}
}

497 şas 
	cMixedUpTe¡Su™eW™hSameTe¡NameTe¡
 : 
public
 
‹¡šg
::
Te¡
 {

500 
	$TEST_F
(
MixedUpTe¡Su™eW™hSameTe¡NameTe¡
,

501 
TheSecÚdTe¡W™hThisNameShouldFa
è{
	}
}

505 
Çme¥aû
 
	gb¬
 {

507 şas 
	cMixedUpTe¡Su™eTe¡
 : 
public
 
‹¡šg
::
Te¡
 {

512 
	$TEST_F
(
MixedUpTe¡Su™eTe¡
, 
ThisShouldFa
è{
	}
}

513 
	$TEST_F
(
MixedUpTe¡Su™eTe¡
, 
ThisShouldFaToo
è{
	}
}

515 şas 
	cMixedUpTe¡Su™eW™hSameTe¡NameTe¡
 : 
public
 
‹¡šg
::
Te¡
 {

520 
	$TEST_F
(
MixedUpTe¡Su™eW™hSameTe¡NameTe¡
,

521 
TheSecÚdTe¡W™hThisNameShouldFa
è{
	}
}

530 şas 
	cTEST_F_befÜe_TEST_š_§me_‹¡_ÿ£
 : 
public
 
‹¡šg
::
Te¡
 {

533 
	$TEST_F
(
TEST_F_befÜe_TEST_š_§me_‹¡_ÿ£
, 
DefšedUsšgTEST_F
è{
	}
}

537 
	$TEST
(
TEST_F_befÜe_TEST_š_§me_‹¡_ÿ£
, 
DefšedUsšgTESTAndShouldFa
è{
	}
}

539 şas 
	cTEST_befÜe_TEST_F_š_§me_‹¡_ÿ£
 : 
public
 
‹¡šg
::
Te¡
 {

542 
	$TEST
(
TEST_befÜe_TEST_F_š_§me_‹¡_ÿ£
, 
DefšedUsšgTEST
è{
	}
}

546 
	$TEST_F
(
TEST_befÜe_TEST_F_š_§me_‹¡_ÿ£
, 
DefšedUsšgTEST_FAndShouldFa
) {

547 
	}
}

550 
	gglob®_š‹g”
 = 0;

553 
	$TEST
(
Ex³ùNÚçlFau»Te¡
, 
CªReã»nûGlob®V¬ŸbËs
) {

554 
glob®_š‹g”
 = 0;

555 
	`EXPECT_NONFATAL_FAILURE
({

556 
	`EXPECT_EQ
(1, 
glob®_š‹g”
) << "Expected‚on-fatal failure.";

558 
	}
}

562 
	$TEST
(
Ex³ùNÚçlFau»Te¡
, 
CªReã»nûLoÿlV¬ŸbËs
) {

563 
m
 = 0;

564 
n
;

565 
n
 = 1;

566 
	`EXPECT_NONFATAL_FAILURE
({

567 
	`EXPECT_EQ
(
m
, 
n
) << "Expected‚on-fatal failure.";

569 
	}
}

573 
	$TEST
(
Ex³ùNÚçlFau»Te¡
, 
SucûedsWh’Th”eIsOÃNÚçlFau»
) {

574 
	`EXPECT_NONFATAL_FAILURE
({

575 
	`ADD_FAILURE
() << "Expected‚on-fatal failure.";

577 
	}
}

581 
	$TEST
(
Ex³ùNÚçlFau»Te¡
, 
FasWh’Th”eIsNoNÚçlFau»
) {

582 
	`´štf
("(expecting‡ failure)\n");

583 
	`EXPECT_NONFATAL_FAILURE
({

585 
	}
}

589 
	$TEST
(
Ex³ùNÚçlFau»Te¡
, 
FasWh’Th”eA»TwoNÚçlFau»s
) {

590 
	`´štf
("(expecting‡ failure)\n");

591 
	`EXPECT_NONFATAL_FAILURE
({

592 
	`ADD_FAILURE
() << "Expected‚on-fatal failure 1.";

593 
	`ADD_FAILURE
() << "Expected‚on-fatal failure 2.";

595 
	}
}

599 
	$TEST
(
Ex³ùNÚçlFau»Te¡
, 
FasWh’Th”eIsOÃF©®Fau»
) {

600 
	`´štf
("(expecting‡ failure)\n");

601 
	`EXPECT_NONFATAL_FAILURE
({

602 
	`FAIL
() << "Expected fatal failure.";

604 
	}
}

608 
	$TEST
(
Ex³ùNÚçlFau»Te¡
, 
FasWh’S‹m’tR‘uºs
) {

609 
	`´štf
("(expecting‡ failure)\n");

610 
	`EXPECT_NONFATAL_FAILURE
({

613 
	}
}

615 #ià
GTEST_HAS_EXCEPTIONS


619 
	$TEST
(
Ex³ùNÚçlFau»Te¡
, 
FasWh’S‹m’tThrows
) {

620 
	`´štf
("(expecting‡ failure)\n");

621 
Œy
 {

622 
	`EXPECT_NONFATAL_FAILURE
({

623 
throw
 0;

625 } 
	`ÿtch
() {

627 
	}
}

632 
	$TEST
(
Ex³ùF©®Fau»Te¡
, 
CªReã»nûGlob®V¬ŸbËs
) {

633 
glob®_š‹g”
 = 0;

634 
	`EXPECT_FATAL_FAILURE
({

635 
	`ASSERT_EQ
(1, 
glob®_š‹g”
) << "Expected fatal failure.";

637 
	}
}

641 
	$TEST
(
Ex³ùF©®Fau»Te¡
, 
CªReã»nûLoÿlSticV¬ŸbËs
) {

642 
n
;

643 
n
 = 1;

644 
	`EXPECT_FATAL_FAILURE
({

645 
	`ASSERT_EQ
(0, 
n
) << "Expected fatal failure.";

647 
	}
}

651 
	$TEST
(
Ex³ùF©®Fau»Te¡
, 
SucûedsWh’Th”eIsOÃF©®Fau»
) {

652 
	`EXPECT_FATAL_FAILURE
({

653 
	`FAIL
() << "Expected fatal failure.";

655 
	}
}

659 
	$TEST
(
Ex³ùF©®Fau»Te¡
, 
FasWh’Th”eIsNoF©®Fau»
) {

660 
	`´štf
("(expecting‡ failure)\n");

661 
	`EXPECT_FATAL_FAILURE
({

663 
	}
}

666 
	$F©®Fau»
() {

667 
	`FAIL
() << "Expected fatal failure.";

668 
	}
}

672 
	$TEST
(
Ex³ùF©®Fau»Te¡
, 
FasWh’Th”eA»TwoF©®Fau»s
) {

673 
	`´štf
("(expecting‡ failure)\n");

674 
	`EXPECT_FATAL_FAILURE
({

675 
	`F©®Fau»
();

676 
	`F©®Fau»
();

678 
	}
}

682 
	$TEST
(
Ex³ùF©®Fau»Te¡
, 
FasWh’Th”eIsOÃNÚçlFau»
) {

683 
	`´štf
("(expecting‡ failure)\n");

684 
	`EXPECT_FATAL_FAILURE
({

685 
	`ADD_FAILURE
() << "Expected‚on-fatal failure.";

687 
	}
}

691 
	$TEST
(
Ex³ùF©®Fau»Te¡
, 
FasWh’S‹m’tR‘uºs
) {

692 
	`´štf
("(expecting‡ failure)\n");

693 
	`EXPECT_FATAL_FAILURE
({

696 
	}
}

698 #ià
GTEST_HAS_EXCEPTIONS


702 
	$TEST
(
Ex³ùF©®Fau»Te¡
, 
FasWh’S‹m’tThrows
) {

703 
	`´štf
("(expecting‡ failure)\n");

704 
Œy
 {

705 
	`EXPECT_FATAL_FAILURE
({

706 
throw
 0;

708 } 
	`ÿtch
() {

710 
	}
}

716 
	g¡d
::
¡ršg
 
P¬amNameFunc
(cÚ¡ 
‹¡šg
::
Te¡P¬amInfo
<
¡d
::¡ršg>& 
šfo
) {

717  
šfo
.
·¿m
;

720 
şass
 
	gP¬amTe¡
 : 
public
 
‹¡šg
::
Te¡W™hP¬am
<
¡d
::
¡ršg
> {

723 
	$TEST_P
(
P¬amTe¡
, 
Sucûss
) {

724 
	`EXPECT_EQ
("a", 
	`G‘P¬am
());

725 
	}
}

727 
	$TEST_P
(
P¬amTe¡
, 
Fau»
) {

728 
	`EXPECT_EQ
("b", 
	`G‘P¬am
()) << "Expected failure";

729 
	}
}

731 
INSTANTIATE_TEST_SUITE_P
(
PrštšgSŒšgs
,

732 
P¬amTe¡
,

733 
‹¡šg
::
V®ues
(
¡d
::
¡ršg
("a")),

734 
P¬amNameFunc
);

737 
usšg
 
	gNoTe¡s
 = 
P¬amTe¡
;

738 
INSTANTIATE_TEST_SUITE_P
(
ThisIsOdd
, 
NoTe¡s
, ::
‹¡šg
::
V®ues
("Hello"));

741 
şass
 
	gD‘eùNÙIn¡ªtŸ‹dTe¡
 : 
public
 
‹¡šg
::
Te¡W™hP¬am
<> {};

742 
	$TEST_P
(
D‘eùNÙIn¡ªtŸ‹dTe¡
, 
U£d
è{ 
	}
}

747 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

748 şas 
	cTy³dTe¡
 : 
public
 
‹¡šg
::
Te¡
 {

751 
TYPED_TEST_SUITE
(
Ty³dTe¡
, 
‹¡šg
::
Ty³s
<>);

753 
	$TYPED_TEST
(
Ty³dTe¡
, 
Sucûss
) {

754 
	`EXPECT_EQ
(0, 
	`Ty³P¬am
());

755 
	}
}

757 
	$TYPED_TEST
(
Ty³dTe¡
, 
Fau»
) {

758 
	`EXPECT_EQ
(1, 
	`Ty³P¬am
()) << "Expected failure";

759 
	}
}

761 
	g‹¡šg
::
	tTy³s
<, > 
	tTy³sFÜTe¡W™hNames
;

763 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

764 şas 
	cTy³dTe¡W™hNames
 : 
public
 
‹¡šg
::
Te¡
 {};

766 şas 
	cTy³dTe¡Names
 {

767 
	mpublic
:

768 
‹m¶©e
 <
ty³Çme
 
T
>

769 
¡d
::
¡ršg
 
	$G‘Name
(
i
) {

770 ià(
¡d
::
is_§me
<
T
, >::
v®ue
)

771  
¡d
::
	`¡ršg
("ch¬"è+ ::
‹¡šg
::
	`PrštToSŒšg
(
i
);

772 ià(
¡d
::
is_§me
<
T
, >::
v®ue
)

773  
¡d
::
	`¡ršg
("št"è+ ::
‹¡šg
::
	`PrštToSŒšg
(
i
);

775 
	}
};

777 
TYPED_TEST_SUITE
(
Ty³dTe¡W™hNames
, 
Ty³sFÜTe¡W™hNames
, 
Ty³dTe¡Names
);

779 
	$TYPED_TEST
(
Ty³dTe¡W™hNames
, 
Sucûss
è{
	}
}

781 
	$TYPED_TEST
(
Ty³dTe¡W™hNames
, 
Fau»
è{ 
	`FAIL
(); 
	}
}

783 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

784 şas 
	cTy³dTe¡P
 : 
public
 
‹¡šg
::
Te¡
 {

787 
TYPED_TEST_SUITE_P
(
Ty³dTe¡P
);

789 
	$TYPED_TEST_P
(
Ty³dTe¡P
, 
Sucûss
) {

790 
	`EXPECT_EQ
(0U, 
	`Ty³P¬am
());

791 
	}
}

793 
	$TYPED_TEST_P
(
Ty³dTe¡P
, 
Fau»
) {

794 
	`EXPECT_EQ
(1U, 
	`Ty³P¬am
()) << "Expected failure";

795 
	}
}

797 
REGISTER_TYPED_TEST_SUITE_P
(
Ty³dTe¡P
, 
Sucûss
, 
Fau»
);

799 
	g‹¡šg
::
	tTy³s
<, > 
	tUnsigÃdTy³s
;

800 
INSTANTIATE_TYPED_TEST_SUITE_P
(
UnsigÃd
, 
Ty³dTe¡P
, 
UnsigÃdTy³s
);

802 şas 
	cTy³dTe¡PNames
 {

803 
	mpublic
:

804 
‹m¶©e
 <
ty³Çme
 
T
>

805 
¡d
::
¡ršg
 
	$G‘Name
(
i
) {

806 ià(
¡d
::
is_§me
<
T
, >::
v®ue
) {

807  
¡d
::
	`¡ršg
("unsigÃdCh¬"è+ ::
‹¡šg
::
	`PrštToSŒšg
(
i
);

809 ià(
¡d
::
is_§me
<
T
, >::
v®ue
) {

810  
¡d
::
	`¡ršg
("unsigÃdIÁ"è+ ::
‹¡šg
::
	`PrštToSŒšg
(
i
);

813 
	}
};

815 
INSTANTIATE_TYPED_TEST_SUITE_P
(
UnsigÃdCu¡omName
, 
Ty³dTe¡P
, 
UnsigÃdTy³s
,

816 
Ty³dTe¡PNames
);

818 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

819 şas 
	cD‘eùNÙIn¡ªtŸ‹dTy³sTe¡
 : 
public
 
‹¡šg
::
Te¡
 {};

820 
TYPED_TEST_SUITE_P
(
D‘eùNÙIn¡ªtŸ‹dTy³sTe¡
);

821 
	$TYPED_TEST_P
(
D‘eùNÙIn¡ªtŸ‹dTy³sTe¡
, 
U£d
) {

822 
Ty³P¬am
 
š¡ªtŸ‹
;

823 ()
š¡ªtŸ‹
;

824 
	}
}

825 
REGISTER_TYPED_TEST_SUITE_P
(
D‘eùNÙIn¡ªtŸ‹dTy³sTe¡
, 
U£d
);

833 #ià
GTEST_HAS_DEATH_TEST


838 
	$TEST
(
AD—thTe¡
, 
ShouldRunFœ¡
) {

839 
	}
}

844 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

845 şas 
	cATy³dD—thTe¡
 : 
public
 
‹¡šg
::
Te¡
 {

848 
	g‹¡šg
::
	tTy³s
<, > 
	tNum”icTy³s
;

849 
TYPED_TEST_SUITE
(
ATy³dD—thTe¡
, 
Num”icTy³s
);

851 
	$TYPED_TEST
(
ATy³dD—thTe¡
, 
ShouldRunFœ¡
) {

852 
	}
}

858 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

859 şas 
	cATy³P¬amD—thTe¡
 : 
public
 
‹¡šg
::
Te¡
 {

862 
TYPED_TEST_SUITE_P
(
ATy³P¬amD—thTe¡
);

864 
	$TYPED_TEST_P
(
ATy³P¬amD—thTe¡
, 
ShouldRunFœ¡
) {

865 
	}
}

867 
REGISTER_TYPED_TEST_SUITE_P
(
ATy³P¬amD—thTe¡
, 
ShouldRunFœ¡
);

869 
INSTANTIATE_TYPED_TEST_SUITE_P
(
My
, 
ATy³P¬amD—thTe¡
, 
Num”icTy³s
);

875 şas 
	cEx³ùFau»Te¡
 : 
public
 
‹¡šg
::
Te¡
 {

876 
public
:

877 
	eFau»Mode
 {

878 
FATAL_FAILURE
,

879 
	mNONFATAL_FAILURE


881 
	$AddFau»
(
Fau»Mode
 
çu»
) {

882 ià(
çu»
 =ğ
FATAL_FAILURE
) {

883 
	`FAIL
() << "Expected fatal failure.";

885 
	`ADD_FAILURE
() << "Expected‚on-fatal failure.";

887 
	}
}

890 
	$TEST_F
(
Ex³ùFau»Te¡
, 
Ex³ùF©®Fau»
) {

892 
	`´štf
("(expecting 1 failure)\n");

893 
	`EXPECT_FATAL_FAILURE
(
	`SUCCEED
(), "Expected fatal failure.");

895 
	`´štf
("(expecting 1 failure)\n");

896 
	`EXPECT_FATAL_FAILURE
(
	`AddFau»
(
NONFATAL_FAILURE
), "Expected‚on-fatal "

899 
	`´štf
("(expecting 1 failure)\n");

900 
	`EXPECT_FATAL_FAILURE
(
	`AddFau»
(
FATAL_FAILURE
), "Some other fatal failure "

902 
	}
}

904 
	$TEST_F
(
Ex³ùFau»Te¡
, 
Ex³ùNÚF©®Fau»
) {

906 
	`´štf
("(expecting 1 failure)\n");

907 
	`EXPECT_NONFATAL_FAILURE
(
	`SUCCEED
(), "Expected‚on-fatal failure.");

909 
	`´štf
("(expecting 1 failure)\n");

910 
	`EXPECT_NONFATAL_FAILURE
(
	`AddFau»
(
FATAL_FAILURE
), "Expected fatal failure.");

912 
	`´štf
("(expecting 1 failure)\n");

913 
	`EXPECT_NONFATAL_FAILURE
(
	`AddFau»
(
NONFATAL_FAILURE
), "Some other‚on-fatal "

915 
	}
}

917 #ià
GTEST_IS_THREADSAFE


919 şas 
	cEx³ùFau»W™hTh»adsTe¡
 : 
public
 
Ex³ùFau»Te¡
 {

920 
´Ùeùed
:

921 
	$AddFau»InOth”Th»ad
(
Fau»Mode
 
çu»
) {

922 
Th»adW™hP¬am
<
Fau»Mode
> 
	`th»ad
(&
AddFau»
, 
çu»
, 
nuÎ±r
);

923 
th»ad
.
	`Još
();

925 
	}
};

927 
	$TEST_F
(
Ex³ùFau»W™hTh»adsTe¡
, 
Ex³ùF©®Fau»
) {

929 
	`´štf
("(expecting 2 failures)\n");

930 
	`EXPECT_FATAL_FAILURE
(
	`AddFau»InOth”Th»ad
(
FATAL_FAILURE
),

932 
	}
}

934 
	$TEST_F
(
Ex³ùFau»W™hTh»adsTe¡
, 
Ex³ùNÚF©®Fau»
) {

936 
	`´štf
("(expecting 2 failures)\n");

937 
	`EXPECT_NONFATAL_FAILURE
(
	`AddFau»InOth”Th»ad
(
NONFATAL_FAILURE
),

939 
	}
}

941 
Ex³ùFau»W™hTh»adsTe¡
 
	tScİedFakeTe¡P¬tResuÉR•Ü‹rTe¡
;

945 
	$TEST_F
(
ScİedFakeTe¡P¬tResuÉR•Ü‹rTe¡
, 
IÁ”û±OÆyCu¼’tTh»ad
) {

946 
	`´štf
("(expecting 2 failures)\n");

947 
Te¡P¬tResuÉA¼ay
 
»suÉs
;

949 
ScİedFakeTe¡P¬tResuÉR•Ü‹r
 
	`»pÜ‹r
(

950 
ScİedFakeTe¡P¬tResuÉR•Ü‹r
::
INTERCEPT_ONLY_CURRENT_THREAD
,

951 &
»suÉs
);

952 
	`AddFau»InOth”Th»ad
(
FATAL_FAILURE
);

953 
	`AddFau»InOth”Th»ad
(
NONFATAL_FAILURE
);

956 
	`EXPECT_EQ
(0, 
»suÉs
.
	`size
()) << "This shouldn't fail.";

957 
	}
}

961 
	$TEST_F
(
Ex³ùFau»Te¡
, 
Ex³ùF©®Fau»OnAÎTh»ads
) {

963 
	`´štf
("(expecting 1 failure)\n");

964 
	`EXPECT_FATAL_FAILURE_ON_ALL_THREADS
(
	`SUCCEED
(), "Expected fatal failure.");

966 
	`´štf
("(expecting 1 failure)\n");

967 
	`EXPECT_FATAL_FAILURE_ON_ALL_THREADS
(
	`AddFau»
(
NONFATAL_FAILURE
),

970 
	`´štf
("(expecting 1 failure)\n");

971 
	`EXPECT_FATAL_FAILURE_ON_ALL_THREADS
(
	`AddFau»
(
FATAL_FAILURE
),

973 
	}
}

975 
	$TEST_F
(
Ex³ùFau»Te¡
, 
Ex³ùNÚF©®Fau»OnAÎTh»ads
) {

977 
	`´štf
("(expecting 1 failure)\n");

978 
	`EXPECT_NONFATAL_FAILURE_ON_ALL_THREADS
(
	`SUCCEED
(), "Expected‚on-fatal "

981 
	`´štf
("(expecting 1 failure)\n");

982 
	`EXPECT_NONFATAL_FAILURE_ON_ALL_THREADS
(
	`AddFau»
(
FATAL_FAILURE
),

985 
	`´štf
("(expecting 1 failure)\n");

986 
	`EXPECT_NONFATAL_FAILURE_ON_ALL_THREADS
(
	`AddFau»
(
NONFATAL_FAILURE
),

988 
	}
}

990 şas 
	cDyÇmicFixtu»
 : 
public
 
‹¡šg
::
Te¡
 {

991 
´Ùeùed
:

992 
	$DyÇmicFixtu»
(è{ 
	`´štf
("DynamicFixture()\n"); }

993 ~
	$DyÇmicFixtu»
(è
ov”ride
 { 
	`´štf
("~DyÇmicFixtu»()\n"); 
	}
}

994 
	$S‘Up
(è
ov”ride
 { 
	`´štf
("DyÇmicFixtu»::S‘Up\n"); 
	}
}

995 
	$T—rDown
(è
ov”ride
 { 
	`´štf
("DyÇmicFixtu»::T—rDown\n"); 
	}
}

997 
	$S‘UpTe¡Su™e
(è{ 
	`´štf
("DyÇmicFixtu»::S‘UpTe¡Su™e\n"); 
	}
}

998 
	$T—rDownTe¡Su™e
() {

999 
	`´štf
("DynamicFixture::TearDownTestSuite\n");

1000 
	}
}

1003 
	g‹m¶©e
 <
boŞ
 
	gPass
>

1004 şas 
	cDyÇmicTe¡
 : 
public
 
DyÇmicFixtu»
 {

1005 
public
:

1006 
	$Te¡Body
(è
ov”ride
 { 
	`EXPECT_TRUE
(
Pass
); }

1007 
	}
};

1009 autØ
	gdyÇmic_‹¡
 = (

1011 
‹¡šg
::
Regi¡”Te¡
(

1012 "DyÇmicFixtu»", "DyÇmicTe¡Pass", 
nuÎ±r
,‚uÎ±r, 
__FILE__
,

1013 
__LINE__
, [](è-> 
DyÇmicFixtu»
* {  
Ãw
 
DyÇmicTe¡
<
Œue
>; }),

1014 
	g‹¡šg
::
Regi¡”Te¡
(

1015 "DyÇmicFixtu»", "DyÇmicTe¡Fa", 
nuÎ±r
,‚uÎ±r, 
__FILE__
,

1016 
__LINE__
, [](è-> 
DyÇmicFixtu»
* {  
Ãw
 
DyÇmicTe¡
<
çl£
>; }),

1019 
	g‹¡šg
::
Regi¡”Te¡
(

1020 "DyÇmicFixtu»AnÙh”Name", "DyÇmicTe¡Pass", 
nuÎ±r
,‚ullptr,

1021 
__FILE__
, 
__LINE__
,

1022 [](è-> 
DyÇmicFixtu»
* {  
Ãw
 
DyÇmicTe¡
<
Œue
>; }),

1025 
	g‹¡šg
::
Regi¡”Te¡
(

1026 "BadDyÇmicFixtu»1", "Fixtu»Ba£", 
nuÎ±r
,‚uÎ±r, 
__FILE__
,

1027 
__LINE__
, [](è-> 
DyÇmicFixtu»
* {  
Ãw
 
DyÇmicTe¡
<
Œue
>; }),

1028 
	g‹¡šg
::
Regi¡”Te¡
(

1029 "BadDyÇmicFixtu»1", "Te¡Ba£", 
nuÎ±r
,‚uÎ±r, 
__FILE__
, 
__LINE__
,

1030 [](è-> 
‹¡šg
::
Te¡
* {  
Ãw
 
DyÇmicTe¡
<
Œue
>; }),

1034 
	g‹¡šg
::
Regi¡”Te¡
(

1035 "BadDyÇmicFixtu»2", "Fixtu»Ba£", 
nuÎ±r
,‚uÎ±r, 
__FILE__
,

1036 
__LINE__
, [](è-> 
DyÇmicFixtu»
* {  
Ãw
 
DyÇmicTe¡
<
Œue
>; }),

1037 
	g‹¡šg
::
Regi¡”Te¡
("BadDyÇmicFixtu»2", "D”ived", 
nuÎ±r
,‚ullptr,

1038 
__FILE__
, 
__LINE__
,

1039 [](è{  
Ãw
 
DyÇmicTe¡
<
Œue
>; }));

1043 şas 
	cFooEnvœÚm’t
 : 
public
 
‹¡šg
::
EnvœÚm’t
 {

1044 
public
:

1045 
	$S‘Up
(è
ov”ride
 { 
	`´štf
("%s", "FooEnvironment::SetUp() called.\n"); }

1047 
	$T—rDown
(è
ov”ride
 {

1048 
	`´štf
("%s", "FooEnvironment::TearDown() called.\n");

1049 
	`FAIL
() << "Expected fatal failure.";

1050 
	}
}

1053 şas 
	cB¬EnvœÚm’t
 : 
public
 
‹¡šg
::
EnvœÚm’t
 {

1054 
public
:

1055 
	$S‘Up
(è
ov”ride
 { 
	`´štf
("%s", "BarEnvironment::SetUp() called.\n"); }

1057 
	$T—rDown
(è
ov”ride
 {

1058 
	`´štf
("%s", "BarEnvironment::TearDown() called.\n");

1059 
	`ADD_FAILURE
() << "Expected‚on-fatal failure.";

1060 
	}
}

1068 
	$maš
(
¬gc
, **
¬gv
) {

1069 
‹¡šg
::
	`GTEST_FLAG
(
´št_time
èğ
çl£
;

1078 
‹¡šg
::
	`In™GoogËTe¡
(&
¬gc
, 
¬gv
);

1079 
boŞ
 
š‹º®_sk_’vœÚm’t_ªd_ad_hoc_‹¡s
 =

1080 
¡d
::
	`couÁ
(
¬gv
,‡rgv + 
¬gc
,

1081 
¡d
::
	`¡ršg
("internal_skip_environment_and_ad_hoc_tests")) > 0;

1083 #ià
GTEST_HAS_DEATH_TEST


1084 ià(
‹¡šg
::
š‹º®
::
	`GTEST_FLAG
(
š‹º®_run_d—th_‹¡
) != "") {

1087 #ià
GTEST_OS_WINDOWS


1088 
posix
::
	`FReİ’
("nul:", "w", 
¡dout
);

1090 
posix
::
	`FReİ’
("/dev/nuÎ", "w", 
¡dout
);

1092  
	`RUN_ALL_TESTS
();

1096 ià(
š‹º®_sk_’vœÚm’t_ªd_ad_hoc_‹¡s
)

1097  
	`RUN_ALL_TESTS
();

1102 
‹¡šg
::
	`AddGlob®Te¡EnvœÚm’t
(
Ãw
 
FooEnvœÚm’t
);

1103 
‹¡šg
::
	`AddGlob®Te¡EnvœÚm’t
(
Ãw
 
B¬EnvœÚm’t
);

1104 #ià
_MSC_VER


1105 
	`GTEST_DISABLE_MSC_WARNINGS_POP_
()

1107  
	`RunAÎTe¡s
();

1108 
	}
}

	@third_party/googletest/googletest/test/googletest-param-test-invalid-name1-test_.cc

31 
	~"g‹¡/g‹¡.h
"

33 
	gÇme¥aû
 {

34 
şass
 
	gDummyTe¡
 : 
public
 ::
‹¡šg
::
Te¡W™hP¬am
<const *> {};

36 
TEST_P
(
DummyTe¡
, 
Dummy
) {

39 
INSTANTIATE_TEST_SUITE_P
(
Inv®idTe¡Name
,

40 
DummyTe¡
,

41 ::
‹¡šg
::
V®ues
("InvalidWithQuotes"),

42 ::
‹¡šg
::
PrštToSŒšgP¬amName
());

46 
	$maš
(
¬gc
, *
¬gv
[]) {

47 
‹¡šg
::
	`In™GoogËTe¡
(&
¬gc
, 
¬gv
);

48  
	`RUN_ALL_TESTS
();

49 
	}
}

	@third_party/googletest/googletest/test/googletest-param-test-invalid-name2-test_.cc

31 
	~"g‹¡/g‹¡.h
"

33 
	gÇme¥aû
 {

34 
şass
 
	gDummyTe¡
 : 
public
 ::
‹¡šg
::
Te¡W™hP¬am
<const *> {};

36 
	g¡d
::
¡ršg
 
SŒšgP¬amTe¡Suffix
(

37 cÚ¡ 
‹¡šg
::
Te¡P¬amInfo
<cÚ¡ *>& 
šfo
) {

38  
¡d
::
¡ršg
(
šfo
.
·¿m
);

41 
TEST_P
(
DummyTe¡
, 
Dummy
) {

44 
INSTANTIATE_TEST_SUITE_P
(
Du¶iÿ‹Te¡Names
,

45 
DummyTe¡
,

46 ::
‹¡šg
::
V®ues
("a", "b", "a", "c"),

47 
SŒšgP¬amTe¡Suffix
);

50 
	$maš
(
¬gc
, *
¬gv
[]) {

51 
‹¡šg
::
	`In™GoogËTe¡
(&
¬gc
, 
¬gv
);

52  
	`RUN_ALL_TESTS
();

53 
	}
}

	@third_party/googletest/googletest/test/googletest-param-test-test.cc

35 
	~"g‹¡/g‹¡.h
"

37 
	~<®gÜ™hm
>

38 
	~<io¡»am
>

39 
	~<li¡
>

40 
	~<£t
>

41 
	~<s¡»am
>

42 
	~<¡ršg
>

43 
	~<veùÜ
>

45 
	~"¤c/g‹¡-š‹º®-šl.h
"

46 
	~"‹¡/googË‹¡-·¿m-‹¡-‹¡.h
"

48 
	gusšg
 ::
¡d
::
veùÜ
;

49 
	gusšg
 ::
¡d
::
sÜt
;

51 
	gusšg
 ::
‹¡šg
::
AddGlob®Te¡EnvœÚm’t
;

52 
	gusšg
 ::
‹¡šg
::
BoŞ
;

53 
	gusšg
 ::
‹¡šg
::
Combše
;

54 
	gusšg
 ::
‹¡šg
::
Mes§ge
;

55 
	gusšg
 ::
‹¡šg
::
Rªge
;

56 
	gusšg
 ::
‹¡šg
::
Te¡W™hP¬am
;

57 
	gusšg
 ::
‹¡šg
::
V®ues
;

58 
	gusšg
 ::
‹¡šg
::
V®uesIn
;

60 
	gusšg
 ::
‹¡šg
::
š‹º®
::
P¬amG’”©Ü
;

61 
	gusšg
 ::
‹¡šg
::
š‹º®
::
Un™Te¡O±iÚs
;

69 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

70 ::
¡d
::
¡ršg
 
	$PrštV®ue
(cÚ¡ 
T
& 
v®ue
) {

71  
‹¡šg
::
	`PrštToSŒšg
(
v®ue
);

72 
	}
}

77 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
size_t
 
	gN
>

78 
V”ifyG’”©Ü
(cÚ¡ 
P¬amG’”©Ü
<
T
>& 
g’”©Ü
,

79 cÚ¡ 
T
 (&
ex³ùed_v®ues
)[
N
]) {

80 
ty³Çme
 
	gP¬amG’”©Ü
<
	gT
>::
™”©Ü
 
™
 = 
g’”©Ü
.
begš
();

81 
size_t
 
	gi
 = 0; i < 
	gN
; ++i) {

82 
ASSERT_FALSE
(
™
 =ğ
g’”©Ü
.
’d
())

83 << "Aˆ–em’ˆ" << 
i
 << " when‡ccessing via‡n iterator "

87 
EXPECT_TRUE
(
ex³ùed_v®ues
[
i
] =ğ*
™
)

88 << "wh”˜i " << 
i


89 << ",ƒx³ùed_v®ues[i] i " << 
PrštV®ue
(
ex³ùed_v®ues
[
i
])

90 << ", *™ i " << 
PrštV®ue
(*
™
)

92 ++
	g™
;

94 
EXPECT_TRUE
(
™
 =ğ
g’”©Ü
.
’d
())

102 
	g™
 = 
g’”©Ü
.
begš
();

103 
size_t
 
	gi
 = 0; i < 
	gN
; ++i) {

104 
ASSERT_FALSE
(
™
 =ğ
g’”©Ü
.
’d
())

105 << "Aˆ–em’ˆ" << 
i
 << " when‡ccessing via‡n iterator "

107 
EXPECT_TRUE
(
ex³ùed_v®ues
[
i
] =ğ*
™
)

108 << "wh”˜i " << 
i


109 << ",ƒx³ùed_v®ues[i] i " << 
PrštV®ue
(
ex³ùed_v®ues
[
i
])

110 << ", *™ i " << 
PrštV®ue
(*
™
)

112 ++
	g™
;

114 
EXPECT_TRUE
(
™
 =ğ
g’”©Ü
.
’d
())

119 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

120 
V”ifyG’”©ÜIsEm±y
(cÚ¡ 
P¬amG’”©Ü
<
T
>& 
g’”©Ü
) {

121 
ty³Çme
 
	gP¬amG’”©Ü
<
	gT
>::
™”©Ü
 
™
 = 
g’”©Ü
.
begš
();

122 
EXPECT_TRUE
(
™
 =ğ
g’”©Ü
.
’d
());

124 
	g™
 = 
g’”©Ü
.
begš
();

125 
EXPECT_TRUE
(
™
 =ğ
g’”©Ü
.
’d
());

137 
	$TEST
(
I‹¿tÜTe¡
, 
P¬amI‹¿tÜCÚfÜmsToFÜw¬dI‹¿tÜCÚû±
) {

138 cÚ¡ 
P¬amG’”©Ü
<> 
g’
 = 
	`Rªge
(0, 10);

139 
P¬amG’”©Ü
<>::
™”©Ü
 
™
 = 
g’
.
	`begš
();

142 
P¬amG’”©Ü
<>::
™”©Ü
 
™2
 = 
™
;

143 
	`EXPECT_TRUE
(*
™
 =ğ*
™2
) << "Initialized iterators must…ointohe "

147 ++
™
;

148 
	`EXPECT_FALSE
(*
™
 =ğ*
™2
);

149 
™2
 = 
™
;

150 
	`EXPECT_TRUE
(*
™
 =ğ*
™2
) << "Assigned iterators must…ointohe "

154 
	`EXPECT_EQ
(&
™
, &(++it)) << "Result ofhe…refix operator++ must be "

159 
Üigš®_v®ue
 = *
™
;

161 
	`EXPECT_EQ
(
Üigš®_v®ue
, *(
™
++));

165 
™2
 = 
™
;

166 ++
™
;

167 ++
™2
;

168 
	`EXPECT_TRUE
(*
™
 =ğ*
™2
);

169 
	}
}

172 
	$TEST
(
RªgeTe¡
, 
IÁRªgeW™hDeçuÉS‹p
) {

173 cÚ¡ 
P¬amG’”©Ü
<> 
g’
 = 
	`Rªge
(0, 3);

174 cÚ¡ 
ex³ùed_v®ues
[] = {0, 1, 2};

175 
	`V”ifyG’”©Ü
(
g’
, 
ex³ùed_v®ues
);

176 
	}
}

180 
	$TEST
(
RªgeTe¡
, 
IÁRªgeSšgËV®ue
) {

181 cÚ¡ 
P¬amG’”©Ü
<> 
g’
 = 
	`Rªge
(0, 1);

182 cÚ¡ 
ex³ùed_v®ues
[] = {0};

183 
	`V”ifyG’”©Ü
(
g’
, 
ex³ùed_v®ues
);

184 
	}
}

188 
	$TEST
(
RªgeTe¡
, 
IÁRªgeEm±y
) {

189 cÚ¡ 
P¬amG’”©Ü
<> 
g’
 = 
	`Rªge
(0, 0);

190 
	`V”ifyG’”©ÜIsEm±y
(
g’
);

191 
	}
}

195 
	$TEST
(
RªgeTe¡
, 
IÁRªgeW™hCu¡omS‹p
) {

196 cÚ¡ 
P¬amG’”©Ü
<> 
g’
 = 
	`Rªge
(0, 9, 3);

197 cÚ¡ 
ex³ùed_v®ues
[] = {0, 3, 6};

198 
	`V”ifyG’”©Ü
(
g’
, 
ex³ùed_v®ues
);

199 
	}
}

205 
	$TEST
(
RªgeTe¡
, 
IÁRªgeW™hCu¡omS‹pOv”Uµ”Bound
) {

206 cÚ¡ 
P¬amG’”©Ü
<> 
g’
 = 
	`Rªge
(0, 4, 3);

207 cÚ¡ 
ex³ùed_v®ues
[] = {0, 3};

208 
	`V”ifyG’”©Ü
(
g’
, 
ex³ùed_v®ues
);

209 
	}
}

213 şas 
	cDogAdd”
 {

214 
	mpublic
:

215 
ex¶ic™
 
	$DogAdd”
(cÚ¡ * 
a_v®ue
è: 
	$v®ue_
(
a_v®ue
) {}

216 
	$DogAdd”
(cÚ¡ 
DogAdd”
& 
Ùh”
è: 
	`v®ue_
(Ùh”.
v®ue_
.
	$c_¡r
()è{
	}
}

218 
DogAdd”
 
İ”©Ü
=(cÚ¡ DogAdd”& 
Ùh”
) {

219 ià(
this
 !ğ&
Ùh”
)

220 
v®ue_
 = 
Ùh”
.value_;

221  *
	gthis
;

223 
DogAdd”
 
	gİ”©Ü
+(cÚ¡ 
	gDogAdd”
& 
	gÙh”
) const {

224 
Mes§ge
 
	gmsg
;

225 
	gmsg
 << 
	gv®ue_
.
c_¡r
(è<< 
	gÙh”
.value_.c_str();

226  
DogAdd”
(
msg
.
G‘SŒšg
().
c_¡r
());

228 
boŞ
 
	gİ”©Ü
<(cÚ¡ 
	gDogAdd”
& 
	gÙh”
) const {

229  
	gv®ue_
 < 
	gÙh”
.value_;

231 cÚ¡ 
	g¡d
::
¡ršg
& 
	$v®ue
(ècÚ¡ {  
v®ue_
; 
	}
}

233 
	g´iv©e
:

234 
¡d
::
¡ršg
 
v®ue_
;

237 
	$TEST
(
RªgeTe¡
, 
WÜksW™hACu¡omTy³
) {

238 cÚ¡ 
P¬amG’”©Ü
<
DogAdd”
> 
g’
 =

239 
	`Rªge
(
	`DogAdd”
("cat"), DogAdder("catdogdog"), DogAdder("dog"));

240 
P¬amG’”©Ü
<
DogAdd”
>::
™”©Ü
 
™
 = 
g’
.
	`begš
();

242 
	`ASSERT_FALSE
(
™
 =ğ
g’
.
	`’d
());

243 
	`EXPECT_STREQ
("ÿt", 
™
->
	`v®ue
().
	`c_¡r
());

245 
	`ASSERT_FALSE
(++
™
 =ğ
g’
.
	`’d
());

246 
	`EXPECT_STREQ
("ÿtdog", 
™
->
	`v®ue
().
	`c_¡r
());

248 
	`EXPECT_TRUE
(++
™
 =ğ
g’
.
	`’d
());

249 
	}
}

251 şas 
	cIÁW¿µ”
 {

252 
	mpublic
:

253 
ex¶ic™
 
	$IÁW¿µ”
(
a_v®ue
è: 
	$v®ue_
(
a_v®ue
) {}

254 
	$IÁW¿µ”
(cÚ¡ 
IÁW¿µ”
& 
Ùh”
è: 
	$v®ue_
(
Ùh”
.
v®ue_
è{
	}
}

256 
IÁW¿µ”
 
İ”©Ü
=(cÚ¡ IÁW¿µ”& 
Ùh”
) {

257 
v®ue_
 = 
Ùh”
.value_;

258  *
	gthis
;

261 
IÁW¿µ”
 
	gİ”©Ü
+(
	gÙh”
ècÚ¡ {  IÁW¿µ”(
v®ue_
 + 
Ùh”
); }

262 
boŞ
 
	gİ”©Ü
<(cÚ¡ 
	gIÁW¿µ”
& 
	gÙh”
) const {

263  
	gv®ue_
 < 
	gÙh”
.value_;

265 
	$v®ue
(ècÚ¡ {  
v®ue_
; 
	}
}

267 
	g´iv©e
:

268 
v®ue_
;

271 
	$TEST
(
RªgeTe¡
, 
WÜksW™hACu¡omTy³W™hDifã»ÁInüem’tTy³
) {

272 cÚ¡ 
P¬amG’”©Ü
<
IÁW¿µ”
> 
g’
 = 
	`Rªge
(
	`IÁW¿µ”
(0), IntWrapper(2));

273 
P¬amG’”©Ü
<
IÁW¿µ”
>::
™”©Ü
 
™
 = 
g’
.
	`begš
();

275 
	`ASSERT_FALSE
(
™
 =ğ
g’
.
	`’d
());

276 
	`EXPECT_EQ
(0, 
™
->
	`v®ue
());

278 
	`ASSERT_FALSE
(++
™
 =ğ
g’
.
	`’d
());

279 
	`EXPECT_EQ
(1, 
™
->
	`v®ue
());

281 
	`EXPECT_TRUE
(++
™
 =ğ
g’
.
	`’d
());

282 
	}
}

286 
	$TEST
(
V®uesInTe¡
, 
V®uesInA¼ay
) {

287 
¬¿y
[] = {3, 5, 8};

288 cÚ¡ 
P¬amG’”©Ü
<> 
g’
 = 
	`V®uesIn
(
¬¿y
);

289 
	`V”ifyG’”©Ü
(
g’
, 
¬¿y
);

290 
	}
}

294 
	$TEST
(
V®uesInTe¡
, 
V®uesInCÚ¡A¼ay
) {

295 cÚ¡ 
¬¿y
[] = {3, 5, 8};

296 cÚ¡ 
P¬amG’”©Ü
<> 
g’
 = 
	`V®uesIn
(
¬¿y
);

297 
	`V”ifyG’”©Ü
(
g’
, 
¬¿y
);

298 
	}
}

302 
	$TEST
(
V®uesInTe¡
, 
V®uesInSšgËEËm’tA¼ay
) {

303 
¬¿y
[] = {42};

304 cÚ¡ 
P¬amG’”©Ü
<> 
g’
 = 
	`V®uesIn
(
¬¿y
);

305 
	`V”ifyG’”©Ü
(
g’
, 
¬¿y
);

306 
	}
}

310 
	$TEST
(
V®uesInTe¡
, 
V®uesInVeùÜ
) {

311 ::
¡d
::
	tveùÜ
<> 
	tCÚš”Ty³
;

312 
CÚš”Ty³
 
v®ues
;

313 
v®ues
.
	`push_back
(3);

314 
v®ues
.
	`push_back
(5);

315 
v®ues
.
	`push_back
(8);

316 cÚ¡ 
P¬amG’”©Ü
<> 
g’
 = 
	`V®uesIn
(
v®ues
);

318 cÚ¡ 
ex³ùed_v®ues
[] = {3, 5, 8};

319 
	`V”ifyG’”©Ü
(
g’
, 
ex³ùed_v®ues
);

320 
	}
}

323 
	$TEST
(
V®uesInTe¡
, 
V®uesInI‹¿tÜRªge
) {

324 ::
¡d
::
	tveùÜ
<> 
	tCÚš”Ty³
;

325 
CÚš”Ty³
 
v®ues
;

326 
v®ues
.
	`push_back
(3);

327 
v®ues
.
	`push_back
(5);

328 
v®ues
.
	`push_back
(8);

329 cÚ¡ 
P¬amG’”©Ü
<> 
g’
 = 
	`V®uesIn
(
v®ues
.
	`begš
(), v®ues.
	`’d
());

331 cÚ¡ 
ex³ùed_v®ues
[] = {3, 5, 8};

332 
	`V”ifyG’”©Ü
(
g’
, 
ex³ùed_v®ues
);

333 
	}
}

337 
	$TEST
(
V®uesInTe¡
, 
V®uesInSšgËEËm’tI‹¿tÜRªge
) {

338 ::
¡d
::
	tveùÜ
<> 
	tCÚš”Ty³
;

339 
CÚš”Ty³
 
v®ues
;

340 
v®ues
.
	`push_back
(42);

341 cÚ¡ 
P¬amG’”©Ü
<> 
g’
 = 
	`V®uesIn
(
v®ues
.
	`begš
(), v®ues.
	`’d
());

343 cÚ¡ 
ex³ùed_v®ues
[] = {42};

344 
	`V”ifyG’”©Ü
(
g’
, 
ex³ùed_v®ues
);

345 
	}
}

349 
	$TEST
(
V®uesInTe¡
, 
V®uesInEm±yI‹¿tÜRªge
) {

350 ::
¡d
::
	tveùÜ
<> 
	tCÚš”Ty³
;

351 
CÚš”Ty³
 
v®ues
;

352 cÚ¡ 
P¬amG’”©Ü
<> 
g’
 = 
	`V®uesIn
(
v®ues
.
	`begš
(), v®ues.
	`’d
());

354 
	`V”ifyG’”©ÜIsEm±y
(
g’
);

355 
	}
}

358 
	$TEST
(
V®uesTe¡
, 
V®uesWÜks
) {

359 cÚ¡ 
P¬amG’”©Ü
<> 
g’
 = 
	`V®ues
(3, 5, 8);

361 cÚ¡ 
ex³ùed_v®ues
[] = {3, 5, 8};

362 
	`V”ifyG’”©Ü
(
g’
, 
ex³ùed_v®ues
);

363 
	}
}

367 
	$TEST
(
V®uesTe¡
, 
V®uesWÜksFÜV®uesOfCom·tibËTy³s
) {

368 cÚ¡ 
P¬amG’”©Ü
<> 
g’
 = 
	`V®ues
(3, 5.0f, 8.0);

370 cÚ¡ 
ex³ùed_v®ues
[] = {3.0, 5.0, 8.0};

371 
	`V”ifyG’”©Ü
(
g’
, 
ex³ùed_v®ues
);

372 
	}
}

374 
	$TEST
(
V®uesTe¡
, 
V®uesWÜksFÜMaxL’gthLi¡
) {

375 cÚ¡ 
P¬amG’”©Ü
<> 
g’
 = 
	`V®ues
(

382 cÚ¡ 
ex³ùed_v®ues
[] = {

388 
	`V”ifyG’”©Ü
(
g’
, 
ex³ùed_v®ues
);

389 
	}
}

393 
	$TEST
(
V®uesTe¡
, 
V®uesW™hSšgËP¬am‘”
) {

394 cÚ¡ 
P¬amG’”©Ü
<> 
g’
 = 
	`V®ues
(42);

396 cÚ¡ 
ex³ùed_v®ues
[] = {42};

397 
	`V”ifyG’”©Ü
(
g’
, 
ex³ùed_v®ues
);

398 
	}
}

401 
	$TEST
(
BoŞTe¡
, 
BoŞWÜks
) {

402 cÚ¡ 
P¬amG’”©Ü
<
boŞ
> 
g’
 = 
	`BoŞ
();

404 cÚ¡ 
boŞ
 
ex³ùed_v®ues
[] = {
çl£
, 
Œue
};

405 
	`V”ifyG’”©Ü
(
g’
, 
ex³ùed_v®ues
);

406 
	}
}

409 
	$TEST
(
CombšeTe¡
, 
CombšeW™hTwoP¬am‘”s
) {

410 cÚ¡ * 
foo
 = "foo";

411 cÚ¡ * 
b¬
 = "bar";

412 cÚ¡ 
P¬amG’”©Ü
<
¡d
::
tu¶e
<cÚ¡ *, > > 
g’
 =

413 
	`Combše
(
	`V®ues
(
foo
, 
b¬
), Values(3, 4));

415 
¡d
::
tu¶e
<cÚ¡ *, > 
ex³ùed_v®ues
[] = {

416 
¡d
::
	`make_tu¶e
(
foo
, 3), std::make_tu¶e(foo, 4), std::make_tu¶e(
b¬
, 3),

417 
¡d
::
	`make_tu¶e
(
b¬
, 4)};

418 
	`V”ifyG’”©Ü
(
g’
, 
ex³ùed_v®ues
);

419 
	}
}

422 
	$TEST
(
CombšeTe¡
, 
CombšeW™hTh»eP¬am‘”s
) {

423 cÚ¡ 
P¬amG’”©Ü
<
¡d
::
tu¶e
<, , > > 
g’
 =

424 
	`Combše
(
	`V®ues
(0, 1), Values(3, 4), Values(5, 6));

425 
¡d
::
tu¶e
<, , > 
ex³ùed_v®ues
[] = {

426 
¡d
::
	`make_tu¶e
(0, 3, 5), std::make_tuple(0, 3, 6),

427 
¡d
::
	`make_tu¶e
(0, 4, 5), std::make_tuple(0, 4, 6),

428 
¡d
::
	`make_tu¶e
(1, 3, 5), std::make_tuple(1, 3, 6),

429 
¡d
::
	`make_tu¶e
(1, 4, 5), std::make_tuple(1, 4, 6)};

430 
	`V”ifyG’”©Ü
(
g’
, 
ex³ùed_v®ues
);

431 
	}
}

436 
	$TEST
(
CombšeTe¡
, 
CombšeW™hFœ¡P¬am‘”SšgËV®ue
) {

437 cÚ¡ 
P¬amG’”©Ü
<
¡d
::
tu¶e
<, > > 
g’
 =

438 
	`Combše
(
	`V®ues
(42), Values(0, 1));

440 
¡d
::
tu¶e
<, > 
ex³ùed_v®ues
[] = {¡d::
	`make_tu¶e
(42, 0),

441 
¡d
::
	`make_tu¶e
(42, 1)};

442 
	`V”ifyG’”©Ü
(
g’
, 
ex³ùed_v®ues
);

443 
	}
}

448 
	$TEST
(
CombšeTe¡
, 
CombšeW™hSecÚdP¬am‘”SšgËV®ue
) {

449 cÚ¡ 
P¬amG’”©Ü
<
¡d
::
tu¶e
<, > > 
g’
 =

450 
	`Combše
(
	`V®ues
(0, 1), Values(42));

452 
¡d
::
tu¶e
<, > 
ex³ùed_v®ues
[] = {¡d::
	`make_tu¶e
(0, 42),

453 
¡d
::
	`make_tu¶e
(1, 42)};

454 
	`V”ifyG’”©Ü
(
g’
, 
ex³ùed_v®ues
);

455 
	}
}

459 
	$TEST
(
CombšeTe¡
, 
CombšeW™hFœ¡P¬am‘”Em±yRªge
) {

460 cÚ¡ 
P¬amG’”©Ü
<
¡d
::
tu¶e
<, > > 
g’
 =

461 
	`Combše
(
	`Rªge
(0, 0), 
	`V®ues
(0, 1));

462 
	`V”ifyG’”©ÜIsEm±y
(
g’
);

463 
	}
}

467 
	$TEST
(
CombšeTe¡
, 
CombšeW™hSecÚdP¬am‘”Em±yRªge
) {

468 cÚ¡ 
P¬amG’”©Ü
<
¡d
::
tu¶e
<, > > 
g’
 =

469 
	`Combše
(
	`V®ues
(0, 1), 
	`Rªge
(1, 1));

470 
	`V”ifyG’”©ÜIsEm±y
(
g’
);

471 
	}
}

475 
	$TEST
(
CombšeTe¡
, 
CombšeW™hMaxNumb”OfP¬am‘”s
) {

476 cÚ¡ * 
foo
 = "foo";

477 cÚ¡ * 
b¬
 = "bar";

478 cÚ¡ 
P¬amG’”©Ü
<

479 
¡d
::
tu¶e
<const *, , , , , , , , , > >

480 
g’
 =

481 
	`Combše
(
	`V®ues
(
foo
, 
b¬
), Values(1), Values(2), Values(3), Values(4),

482 
	`V®ues
(5), Values(6), Values(7), Values(8), Values(9));

484 
¡d
::
tu¶e
<const *, , , , , , , , , >

485 
ex³ùed_v®ues
[] = {
¡d
::
	`make_tu¶e
(
foo
, 1, 2, 3, 4, 5, 6, 7, 8, 9),

486 
¡d
::
	`make_tu¶e
(
b¬
, 1, 2, 3, 4, 5, 6, 7, 8, 9)};

487 
	`V”ifyG’”©Ü
(
g’
, 
ex³ùed_v®ues
);

488 
	}
}

490 şas 
	cNÚDeçuÉCÚ¡ruùAssignSŒšg
 {

491 
	mpublic
:

492 
	$NÚDeçuÉCÚ¡ruùAssignSŒšg
(cÚ¡ 
¡d
::
¡ršg
& 
s
è: 
	$¡r_
(
s
) {}

493 
	`NÚDeçuÉCÚ¡ruùAssignSŒšg
(èğ
d–‘e
;

494 
	`NÚDeçuÉCÚ¡ruùAssignSŒšg
(cÚ¡ 
NÚDeçuÉCÚ¡ruùAssignSŒšg
&) =

496 
NÚDeçuÉCÚ¡ruùAssignSŒšg
& 
İ”©Ü
=(

497 cÚ¡ 
NÚDeçuÉCÚ¡ruùAssignSŒšg
&èğ
d–‘e
;

498 ~
	`NÚDeçuÉCÚ¡ruùAssignSŒšg
() = ;

500 cÚ¡ 
¡d
::
¡ršg
& 
	$¡r
(ècÚ¡ {  
¡r_
; 
	}
}

502 
	g´iv©e
:

503 
¡d
::
¡ršg
 
¡r_
;

506 
	$TEST
(
CombšeTe¡
, 
NÚDeçuÉCÚ¡ruùAssign
) {

507 cÚ¡ 
P¬amG’”©Ü
<
¡d
::
tu¶e
<, 
NÚDeçuÉCÚ¡ruùAssignSŒšg
> > 
g’
 =

508 
	`Combše
(
	`V®ues
(0, 1), V®ues(
	`NÚDeçuÉCÚ¡ruùAssignSŒšg
("A"),

509 
	`NÚDeçuÉCÚ¡ruùAssignSŒšg
("B")));

511 
P¬amG’”©Ü
<
¡d
::
tu¶e
<, 
NÚDeçuÉCÚ¡ruùAssignSŒšg
> >::
™”©Ü


512 
™
 = 
g’
.
	`begš
();

514 
	`EXPECT_EQ
(0, 
¡d
::
g‘
<0>(*
™
));

515 
	`EXPECT_EQ
("A", 
¡d
::
g‘
<1>(*
™
).
	`¡r
());

516 ++
™
;

518 
	`EXPECT_EQ
(0, 
¡d
::
g‘
<0>(*
™
));

519 
	`EXPECT_EQ
("B", 
¡d
::
g‘
<1>(*
™
).
	`¡r
());

520 ++
™
;

522 
	`EXPECT_EQ
(1, 
¡d
::
g‘
<0>(*
™
));

523 
	`EXPECT_EQ
("A", 
¡d
::
g‘
<1>(*
™
).
	`¡r
());

524 ++
™
;

526 
	`EXPECT_EQ
(1, 
¡d
::
g‘
<0>(*
™
));

527 
	`EXPECT_EQ
("B", 
¡d
::
g‘
<1>(*
™
).
	`¡r
());

528 ++
™
;

530 
	`EXPECT_TRUE
(
™
 =ğ
g’
.
	`’d
());

531 
	}
}

536 
	$TEST
(
P¬amG’”©ÜTe¡
, 
Assignm’tWÜks
) {

537 
P¬amG’”©Ü
<> 
g’
 = 
	`V®ues
(1, 2);

538 cÚ¡ 
P¬amG’”©Ü
<> 
g’2
 = 
	`V®ues
(3, 4);

539 
g’
 = 
g’2
;

541 cÚ¡ 
ex³ùed_v®ues
[] = {3, 4};

542 
	`V”ifyG’”©Ü
(
g’
, 
ex³ùed_v®ues
);

543 
	}
}

554 
	g‹m¶©e
 <
	gkEx³ùedC®ls
>

555 şas 
	cTe¡G’”©iÚEnvœÚm’t
 : 
public
 ::
‹¡šg
::
EnvœÚm’t
 {

556 
public
:

557 
Te¡G’”©iÚEnvœÚm’t
* 
	$In¡ªû
() {

558 
Te¡G’”©iÚEnvœÚm’t
* 
š¡ªû
 = 
Ãw
 TestGenerationEnvironment;

559  
š¡ªû
;

562 
	$Fixtu»CÚ¡ruùÜExecu‹d
(è{ 
fixtu»_cÚ¡ruùÜ_couÁ_
++; 
	}
}

563 
	$S‘UpExecu‹d
(è{ 
£t_up_couÁ_
++; 
	}
}

564 
	$T—rDownExecu‹d
(è{ 
‹¬_down_couÁ_
++; 
	}
}

565 
	$Te¡BodyExecu‹d
(è{ 
‹¡_body_couÁ_
++; 
	}
}

567 
	$T—rDown
(è
ov”ride
 {

570 
boŞ
 
³rfÜm_check
 = 
çl£
;

572 
i
 = 0; i < 
kEx³ùedC®ls
; ++i) {

573 
Mes§ge
 
msg
;

574 
msg
 << "Te¡sEx·ndedAndRun/" << 
i
;

575 ià(
Un™Te¡O±iÚs
::
	`F‹rM©chesTe¡
(

577 
msg
.
	`G‘SŒšg
().
	`c_¡r
())) {

578 
³rfÜm_check
 = 
Œue
;

581 ià(
³rfÜm_check
) {

582 
	`EXPECT_EQ
(
kEx³ùedC®ls
, 
fixtu»_cÚ¡ruùÜ_couÁ_
)

585 
	`EXPECT_EQ
(
kEx³ùedC®ls
, 
£t_up_couÁ_
)

588 
	`EXPECT_EQ
(
kEx³ùedC®ls
, 
‹¬_down_couÁ_
)

591 
	`EXPECT_EQ
(
kEx³ùedC®ls
, 
‹¡_body_couÁ_
)

595 
	}
}

597 
	g´iv©e
:

598 
	$Te¡G’”©iÚEnvœÚm’t
(è: 
	`fixtu»_cÚ¡ruùÜ_couÁ_
(0), 
	`£t_up_couÁ_
(0),

599 
	`‹¬_down_couÁ_
(0), 
	$‹¡_body_couÁ_
(0è{
	}
}

601 
	gfixtu»_cÚ¡ruùÜ_couÁ_
;

602 
	g£t_up_couÁ_
;

603 
	g‹¬_down_couÁ_
;

604 
	g‹¡_body_couÁ_
;

606 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
Te¡G’”©iÚEnvœÚm’t
);

609 cÚ¡ 
	g‹¡_g’”©iÚ_·¿ms
[] = {36, 42, 72};

611 
şass
 
	gTe¡G’”©iÚTe¡
 : 
public
 
Te¡W™hP¬am
<> {

612 
public
:

614 
PARAMETER_COUNT
 =

615 (
‹¡_g’”©iÚ_·¿ms
)/(test_generation_params[0])

618 
	gTe¡G’”©iÚEnvœÚm’t
<
	tPARAMETER_COUNT
> 
	tEnvœÚm’t
;

620 
Te¡G’”©iÚTe¡
() {

621 
	gEnvœÚm’t
::
In¡ªû
()->
Fixtu»CÚ¡ruùÜExecu‹d
();

622 
	gcu¼’t_·¿m‘”_
 = 
G‘P¬am
();

624 
S‘Up
(è
	gov”ride
 {

625 
	gEnvœÚm’t
::
In¡ªû
()->
S‘UpExecu‹d
();

626 
EXPECT_EQ
(
cu¼’t_·¿m‘”_
, 
G‘P¬am
());

628 
T—rDown
(è
	gov”ride
 {

629 
	gEnvœÚm’t
::
In¡ªû
()->
T—rDownExecu‹d
();

630 
EXPECT_EQ
(
cu¼’t_·¿m‘”_
, 
G‘P¬am
());

633 
S‘UpTe¡Su™e
() {

634 
boŞ
 
	g®l_‹¡s_š_‹¡_ÿ£_£Ëùed
 = 
Œue
;

636 
	gi
 = 0; i < 
	gPARAMETER_COUNT
; ++i) {

637 
Mes§ge
 
	g‹¡_Çme
;

638 
	g‹¡_Çme
 << "Te¡sEx·ndedAndRun/" << 
	gi
;

639 iàĞ!
	gUn™Te¡O±iÚs
::
F‹rM©chesTe¡
(

641 
‹¡_Çme
.
G‘SŒšg
())) {

642 
	g®l_‹¡s_š_‹¡_ÿ£_£Ëùed
 = 
çl£
;

645 
EXPECT_TRUE
(
®l_‹¡s_š_‹¡_ÿ£_£Ëùed
)

651 
	gcŞËùed_·¿m‘”s_
.
ş—r
();

654 
T—rDownTe¡Su™e
() {

655 
	gveùÜ
<> 
ex³ùed_v®ues
(
‹¡_g’”©iÚ_·¿ms
,

656 
‹¡_g’”©iÚ_·¿ms
 + 
PARAMETER_COUNT
);

660 
sÜt
(
ex³ùed_v®ues
.
begš
(),ƒx³ùed_v®ues.
’d
());

661 
sÜt
(
cŞËùed_·¿m‘”s_
.
begš
(), cŞËùed_·¿m‘”s_.
’d
());

663 
EXPECT_TRUE
(
cŞËùed_·¿m‘”s_
 =ğ
ex³ùed_v®ues
);

666 
	g´Ùeùed
:

667 
cu¼’t_·¿m‘”_
;

668 
	gveùÜ
<> 
	gcŞËùed_·¿m‘”s_
;

670 
	g´iv©e
:

671 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
Te¡G’”©iÚTe¡
);

673 
	gveùÜ
<> 
	gTe¡G’”©iÚTe¡
::
cŞËùed_·¿m‘”s_
;

675 
	$TEST_P
(
Te¡G’”©iÚTe¡
, 
Te¡sEx·ndedAndRun
) {

676 
EnvœÚm’t
::
	`In¡ªû
()->
	`Te¡BodyExecu‹d
();

677 
	`EXPECT_EQ
(
cu¼’t_·¿m‘”_
, 
	`G‘P¬am
());

678 
cŞËùed_·¿m‘”s_
.
	`push_back
(
	`G‘P¬am
());

679 
	}
}

680 
INSTANTIATE_TEST_SUITE_P
(
Te¡Ex·nsiÚModuË
, 
Te¡G’”©iÚTe¡
,

681 
V®uesIn
(
‹¡_g’”©iÚ_·¿ms
));

693 
şass
 
	gG’”©ÜEv®u©iÚTe¡
 : 
public
 
Te¡W™hP¬am
<> {

694 
public
:

695 
·¿m_v®ue
(è{  
·¿m_v®ue_
; }

696 
£t_·¿m_v®ue
(
·¿m_v®ue
è{ 
	g·¿m_v®ue_
 =…aram_value; }

698 
	g´iv©e
:

699 
·¿m_v®ue_
;

701 
	gG’”©ÜEv®u©iÚTe¡
::
·¿m_v®ue_
 = 0;

703 
	$TEST_P
(
G’”©ÜEv®u©iÚTe¡
, 
G’”©ÜsEv®u©edInMaš
) {

704 
	`EXPECT_EQ
(1, 
	`G‘P¬am
());

705 
	}
}

706 
INSTANTIATE_TEST_SUITE_P
(
G’Ev®ModuË
, 
G’”©ÜEv®u©iÚTe¡
,

707 
V®ues
(
G’”©ÜEv®u©iÚTe¡
::
·¿m_v®ue
()));

711 
P¬amG’”©Ü
<> 
ex‹º_g’
;

712 
şass
 
	gEx‹º®G’”©ÜTe¡
 : 
public
 
Te¡W™hP¬am
<> {};

713 
	$TEST_P
(
Ex‹º®G’”©ÜTe¡
, 
Ex‹º®G’”©Ü
) {

716 
	`EXPECT_EQ
(
	`G‘P¬am
(), 33);

717 
	}
}

718 
INSTANTIATE_TEST_SUITE_P
(
Ex‹º®G’”©ÜModuË
, 
Ex‹º®G’”©ÜTe¡
,

719 
ex‹º_g’
);

725 
	$TEST_P
(
Ex‹º®In¡ªtŸtiÚTe¡
, 
IsMuÉËOf33
) {

726 
	`EXPECT_EQ
(0, 
	`G‘P¬am
() % 33);

727 
	}
}

731 
şass
 
	gMuÉËIn¡ªtŸtiÚTe¡
 : 
public
 
Te¡W™hP¬am
<> {};

732 
	$TEST_P
(
MuÉËIn¡ªtŸtiÚTe¡
, 
AÎowsMuÉËIn¡ªûs
) {

733 
	}
}

734 
INSTANTIATE_TEST_SUITE_P
(
Sequ’û1
, 
MuÉËIn¡ªtŸtiÚTe¡
, 
V®ues
(1, 2));

735 
INSTANTIATE_TEST_SUITE_P
(
Sequ’û2
, 
MuÉËIn¡ªtŸtiÚTe¡
, 
Rªge
(3, 5));

742 
	$TEST_P
(
In¡ªtŸtiÚInMuÉËT¿n¦©iÚUn™sTe¡
, 
IsMuÉËOf42
) {

743 
	`EXPECT_EQ
(0, 
	`G‘P¬am
() % 42);

744 
	}
}

745 
INSTANTIATE_TEST_SUITE_P
(
Sequ’û1
, 
In¡ªtŸtiÚInMuÉËT¿n¦©iÚUn™sTe¡
,

746 
V®ues
(42, 42 * 2));

750 
şass
 
	gS•¬©eIn¡ªûTe¡
 : 
public
 
Te¡W™hP¬am
<> {

751 
public
:

752 
S•¬©eIn¡ªûTe¡
(è: 
couÁ_
(0) {}

754 
T—rDownTe¡Su™e
() {

755 
EXPECT_GE
(
glob®_couÁ_
, 2)

762 
	g´Ùeùed
:

763 
couÁ_
;

764 
	gglob®_couÁ_
;

766 
	gS•¬©eIn¡ªûTe¡
::
glob®_couÁ_
 = 0;

768 
	$TEST_P
(
S•¬©eIn¡ªûTe¡
, 
Te¡sRunInS•¬©eIn¡ªûs
) {

769 
	`EXPECT_EQ
(0, 
couÁ_
++);

770 
glob®_couÁ_
++;

771 
	}
}

772 
INSTANTIATE_TEST_SUITE_P
(
FourEËmSequ’û
, 
S•¬©eIn¡ªûTe¡
, 
Rªge
(1, 4));

779 
şass
 
	gNamšgTe¡
 : 
public
 
Te¡W™hP¬am
<> {};

781 
	$TEST_P
(
NamšgTe¡
, 
Te¡sR•ÜtCÜ»ùNamesAndP¬am‘”s
) {

782 cÚ¡ ::
‹¡šg
::
Te¡Info
* cÚ¡ 
‹¡_šfo
 =

783 ::
‹¡šg
::
Un™Te¡
::
	`G‘In¡ªû
()->
	`cu¼’t_‹¡_šfo
();

785 
	`EXPECT_STREQ
("Z”oToFiveSequ’û/NamšgTe¡", 
‹¡_šfo
->
	`‹¡_su™e_Çme
());

787 
Mes§ge
 
šdex_¡»am
;

788 
šdex_¡»am
 << "Te¡sR•ÜtCÜ»ùNamesAndP¬am‘”s/" << 
	`G‘P¬am
();

789 
	`EXPECT_STREQ
(
šdex_¡»am
.
	`G‘SŒšg
().
	`c_¡r
(), 
‹¡_šfo
->
	`Çme
());

791 
	`EXPECT_EQ
(::
‹¡šg
::
	`PrštToSŒšg
(
	`G‘P¬am
()), 
‹¡_šfo
->
	`v®ue_·¿m
());

792 
	}
}

794 
INSTANTIATE_TEST_SUITE_P
(
Z”oToFiveSequ’û
, 
NamšgTe¡
, 
Rªge
(0, 5));

797 
şass
 
	gMaüoNamšgTe¡
 : 
public
 
Te¡W™hP¬am
<> {};

799 
	#PREFIX_WITH_FOO
(
‹¡_Çme
è
Foo
##
	)
test_name

800 
	#PREFIX_WITH_MACRO
(
‹¡_Çme
è
Maüo
##
	)
test_name

802 
TEST_P
(
PREFIX_WITH_MACRO
(
NamšgTe¡
), 
	$PREFIX_WITH_FOO
(
SomeTe¡Name
)) {

803 cÚ¡ ::
‹¡šg
::
Te¡Info
* cÚ¡ 
‹¡_šfo
 =

804 ::
‹¡šg
::
Un™Te¡
::
	`G‘In¡ªû
()->
	`cu¼’t_‹¡_šfo
();

806 
	`EXPECT_STREQ
("FÜtyTwo/MaüoNamšgTe¡", 
‹¡_šfo
->
	`‹¡_su™e_Çme
());

807 
	`EXPECT_STREQ
("FooSomeTe¡Name/0", 
‹¡_šfo
->
	`Çme
());

808 
	}
}

810 
INSTANTIATE_TEST_SUITE_P
(
FÜtyTwo
, 
MaüoNamšgTe¡
, 
V®ues
(42));

813 şas 
	cMaüoNamšgTe¡NÚP¬am‘rized
 : 
public
 ::
‹¡šg
::
Te¡
 {};

815 
TEST_F
(
PREFIX_WITH_MACRO
(
NamšgTe¡NÚP¬am‘rized
),

816 
	$PREFIX_WITH_FOO
(
SomeTe¡Name
)) {

817 cÚ¡ ::
‹¡šg
::
Te¡Info
* cÚ¡ 
‹¡_šfo
 =

818 ::
‹¡šg
::
Un™Te¡
::
	`G‘In¡ªû
()->
	`cu¼’t_‹¡_šfo
();

820 
	`EXPECT_STREQ
("MaüoNamšgTe¡NÚP¬am‘rized", 
‹¡_šfo
->
	`‹¡_su™e_Çme
());

821 
	`EXPECT_STREQ
("FooSomeTe¡Name", 
‹¡_šfo
->
	`Çme
());

822 
	}
}

824 
	$TEST
(
MaüoNamešg
, 
LookupNames
) {

825 
¡d
::
£t
<¡d::
¡ršg
> 
know_su™e_Çmes
, 
know_‹¡_Çmes
;

827 autØ
šs
 = 
‹¡šg
::
Un™Te¡
::
	`G‘In¡ªû
();

828 
ts
 = 0;

829 cÚ¡ 
‹¡šg
::
Te¡Su™e
* 
su™e
 = 
šs
->
	`G‘Te¡Su™e
(
ts
++)) {

830 
know_su™e_Çmes
.
	`š£¹
(
su™e
->
	`Çme
());

832 
ti
 = 0;

833 cÚ¡ 
‹¡šg
::
Te¡Info
* 
šfo
 = 
su™e
->
	`G‘Te¡Info
(
ti
++)) {

834 
know_‹¡_Çmes
.
	`š£¹
(
¡d
::
	`¡ršg
(
su™e
->
	`Çme
()è+ "." + 
šfo
->name());

839 
	`EXPECT_NE
(

840 
know_su™e_Çmes
.
	`fšd
("FortyTwo/MacroNamingTest"),

841 
know_su™e_Çmes
.
	`’d
());

842 
	`EXPECT_NE
(

843 
know_su™e_Çmes
.
	`fšd
("MacroNamingTestNonParametrized"),

844 
know_su™e_Çmes
.
	`’d
());

846 
	`EXPECT_NE
(

847 
know_‹¡_Çmes
.
	`fšd
("FortyTwo/MacroNamingTest.FooSomeTestName/0"),

848 
know_‹¡_Çmes
.
	`’d
());

849 
	`EXPECT_NE
(

850 
know_‹¡_Çmes
.
	`fšd
("MacroNamingTestNonParametrized.FooSomeTestName"),

851 
know_‹¡_Çmes
.
	`’d
());

852 
	}
}

858 
şass
 
	gCu¡omFunùÜNamšgTe¡
 : 
public
 
Te¡W™hP¬am
<
¡d
::
¡ršg
> {};

859 
	$TEST_P
(
Cu¡omFunùÜNamšgTe¡
, 
Cu¡omTe¡Names
è{
	}
}

861 
	sCu¡omP¬amNameFunùÜ
 {

862 
	m¡d
::
¡ršg
 
İ”©Ü
()(cÚ¡ ::
‹¡šg
::
Te¡P¬amInfo
<
¡d
::¡ršg>& 
šf
) {

863  
šf
.
·¿m
;

867 
INSTANTIATE_TEST_SUITE_P
(
Cu¡omP¬amNameFunùÜ
, 
Cu¡omFunùÜNamšgTe¡
,

868 
V®ues
(
¡d
::
¡ršg
("FunctorName")),

869 
Cu¡omP¬amNameFunùÜ
());

871 
INSTANTIATE_TEST_SUITE_P
(
AÎAÎowedCh¬aù”s
, 
Cu¡omFunùÜNamšgTe¡
,

872 
V®ues
("abcdefghijklmnopqrstuvwxyz",

874 
Cu¡omP¬amNameFunùÜ
());

876 
šlše
 
	g¡d
::
¡ršg
 
Cu¡omP¬amNameFunùiÚ
(

877 cÚ¡ ::
‹¡šg
::
Te¡P¬amInfo
<
¡d
::
¡ršg
>& 
šf
) {

878  
šf
.
·¿m
;

881 
şass
 
	gCu¡omFunùiÚNamšgTe¡
 : 
public
 
Te¡W™hP¬am
<
¡d
::
¡ršg
> {};

882 
	$TEST_P
(
Cu¡omFunùiÚNamšgTe¡
, 
Cu¡omTe¡Names
è{
	}
}

884 
INSTANTIATE_TEST_SUITE_P
(
Cu¡omP¬amNameFunùiÚ
, 
Cu¡omFunùiÚNamšgTe¡
,

885 
V®ues
(
¡d
::
¡ršg
("FunctionName")),

886 
Cu¡omP¬amNameFunùiÚ
);

888 
INSTANTIATE_TEST_SUITE_P
(
Cu¡omP¬amNameFunùiÚP
, 
Cu¡omFunùiÚNamšgTe¡
,

889 
V®ues
(
¡d
::
¡ršg
("FunctionNameP")),

890 &
Cu¡omP¬amNameFunùiÚ
);

894 
şass
 
	gCu¡omLambdaNamšgTe¡
 : 
public
 
Te¡W™hP¬am
<
¡d
::
¡ršg
> {};

895 
	$TEST_P
(
Cu¡omLambdaNamšgTe¡
, 
Cu¡omTe¡Names
è{
	}
}

897 
INSTANTIATE_TEST_SUITE_P
(
Cu¡omP¬amNameLambda
, 
Cu¡omLambdaNamšgTe¡
,

898 
V®ues
(
¡d
::
¡ršg
("LambdaName")),

899 [](cÚ¡ ::
‹¡šg
::
Te¡P¬amInfo
<
¡d
::
¡ršg
>& 
šf
) {

900  
šf
.
·¿m
;

903 
	$TEST
(
Cu¡omNamšgTe¡
, 
CheckNameRegi¡ry
) {

904 ::
‹¡šg
::
Un™Te¡
* 
un™_‹¡
 = ::‹¡šg::Un™Te¡::
	`G‘In¡ªû
();

905 
¡d
::
£t
<¡d::
¡ršg
> 
‹¡_Çmes
;

906 
su™e_num
 = 0; su™e_num < 
un™_‹¡
->
	`tÙ®_‹¡_su™e_couÁ
();

907 ++
su™e_num
) {

908 cÚ¡ ::
‹¡šg
::
Te¡Su™e
* 
‹¡_su™e
 = 
un™_‹¡
->
	`G‘Te¡Su™e
(
su™e_num
);

909 
‹¡_num
 = 0;e¡_num < 
‹¡_su™e
->
	`tÙ®_‹¡_couÁ
();

910 ++
‹¡_num
) {

911 cÚ¡ ::
‹¡šg
::
Te¡Info
* 
‹¡_šfo
 = 
‹¡_su™e
->
	`G‘Te¡Info
(
‹¡_num
);

912 
‹¡_Çmes
.
	`š£¹
(
¡d
::
	`¡ršg
(
‹¡_šfo
->
	`Çme
()));

915 
	`EXPECT_EQ
(1u, 
‹¡_Çmes
.
	`couÁ
("CustomTestNames/FunctorName"));

916 
	`EXPECT_EQ
(1u, 
‹¡_Çmes
.
	`couÁ
("CustomTestNames/FunctionName"));

917 
	`EXPECT_EQ
(1u, 
‹¡_Çmes
.
	`couÁ
("CustomTestNames/FunctionNameP"));

918 
	`EXPECT_EQ
(1u, 
‹¡_Çmes
.
	`couÁ
("CustomTestNames/LambdaName"));

919 
	}
}

923 
şass
 
	gCu¡omIÁeg”NamšgTe¡
 : 
public
 
Te¡W™hP¬am
<> {};

925 
	$TEST_P
(
Cu¡omIÁeg”NamšgTe¡
, 
Te¡sR•ÜtCÜ»ùNames
) {

926 cÚ¡ ::
‹¡šg
::
Te¡Info
* cÚ¡ 
‹¡_šfo
 =

927 ::
‹¡šg
::
Un™Te¡
::
	`G‘In¡ªû
()->
	`cu¼’t_‹¡_šfo
();

928 
Mes§ge
 
‹¡_Çme_¡»am
;

929 
‹¡_Çme_¡»am
 << "Te¡sR•ÜtCÜ»ùNames/" << 
	`G‘P¬am
();

930 
	`EXPECT_STREQ
(
‹¡_Çme_¡»am
.
	`G‘SŒšg
().
	`c_¡r
(), 
‹¡_šfo
->
	`Çme
());

931 
	}
}

933 
INSTANTIATE_TEST_SUITE_P
(
PrštToSŒšg
, 
Cu¡omIÁeg”NamšgTe¡
, 
Rªge
(0, 5),

934 ::
‹¡šg
::
PrštToSŒšgP¬amName
());

938 
	sCu¡omSŒuù
 {

939 
ex¶ic™
 
Cu¡omSŒuù
(
v®ue
è: 
x
(value) {}

940 
x
;

943 
	g¡d
::
o¡»am
& 
İ”©Ü
<<(
¡d
::o¡»am& 
¡»am
, cÚ¡ 
	gCu¡omSŒuù
& 
	gv®
) {

944 
	g¡»am
 << 
	gv®
.
	gx
;

945  
	g¡»am
;

948 
şass
 
	gCu¡omSŒuùNamšgTe¡
 : 
public
 
Te¡W™hP¬am
<
Cu¡omSŒuù
> {};

950 
	$TEST_P
(
Cu¡omSŒuùNamšgTe¡
, 
Te¡sR•ÜtCÜ»ùNames
) {

951 cÚ¡ ::
‹¡šg
::
Te¡Info
* cÚ¡ 
‹¡_šfo
 =

952 ::
‹¡šg
::
Un™Te¡
::
	`G‘In¡ªû
()->
	`cu¼’t_‹¡_šfo
();

953 
Mes§ge
 
‹¡_Çme_¡»am
;

954 
‹¡_Çme_¡»am
 << "Te¡sR•ÜtCÜ»ùNames/" << 
	`G‘P¬am
();

955 
	`EXPECT_STREQ
(
‹¡_Çme_¡»am
.
	`G‘SŒšg
().
	`c_¡r
(), 
‹¡_šfo
->
	`Çme
());

956 
	}
}

958 
INSTANTIATE_TEST_SUITE_P
(
PrštToSŒšg
, 
Cu¡omSŒuùNamšgTe¡
,

959 
V®ues
(
Cu¡omSŒuù
(0), CustomStruct(1)),

960 ::
‹¡šg
::
PrštToSŒšgP¬amName
());

964 
	sS‹fulNamšgFunùÜ
 {

965 
S‹fulNamšgFunùÜ
(è: 
sum
(0) {}

966 
¡d
::
¡ršg
 
İ”©Ü
()(cÚ¡ ::
‹¡šg
::
Te¡P¬amInfo
<>& 
šfo
) {

967 
v®ue
 = 
šfo
.
·¿m
 + 
sum
;

968 
	msum
 +ğ
šfo
.
·¿m
;

969  ::
‹¡šg
::
PrštToSŒšg
(
v®ue
);

971 
	msum
;

974 
şass
 
	gS‹fulNamšgTe¡
 : 
public
 ::
‹¡šg
::
Te¡W™hP¬am
<> {

975 
´Ùeùed
:

976 
S‹fulNamšgTe¡
(è: 
sum_
(0) {}

977 
sum_
;

980 
	$TEST_P
(
S‹fulNamšgTe¡
, 
Te¡sR•ÜtCÜ»ùNames
) {

981 cÚ¡ ::
‹¡šg
::
Te¡Info
* cÚ¡ 
‹¡_šfo
 =

982 ::
‹¡šg
::
Un™Te¡
::
	`G‘In¡ªû
()->
	`cu¼’t_‹¡_šfo
();

983 
sum_
 +ğ
	`G‘P¬am
();

984 
Mes§ge
 
‹¡_Çme_¡»am
;

985 
‹¡_Çme_¡»am
 << "Te¡sR•ÜtCÜ»ùNames/" << 
sum_
;

986 
	`EXPECT_STREQ
(
‹¡_Çme_¡»am
.
	`G‘SŒšg
().
	`c_¡r
(), 
‹¡_šfo
->
	`Çme
());

987 
	}
}

989 
INSTANTIATE_TEST_SUITE_P
(
S‹fulNamšgFunùÜ
, 
S‹fulNamšgTe¡
, 
Rªge
(0, 5),

990 
S‹fulNamšgFunùÜ
());

996 şas 
	cUn¡»amabË
 {

997 
	mpublic
:

998 
ex¶ic™
 
	$Un¡»amabË
(
v®ue
è: 
	$v®ue_
(
v®ue
) {}

1000 cÚ¡ & 
	$dummy_v®ue
(ècÚ¡ {  
v®ue_
; 
	}
}

1002 
	g´iv©e
:

1003 
v®ue_
;

1006 
şass
 
	gComm’tTe¡
 : 
public
 
Te¡W™hP¬am
<
Un¡»amabË
> {};

1008 
	$TEST_P
(
Comm’tTe¡
, 
Te¡sCÜ»ùlyR•ÜtUn¡»amabËP¬ams
) {

1009 cÚ¡ ::
‹¡šg
::
Te¡Info
* cÚ¡ 
‹¡_šfo
 =

1010 ::
‹¡šg
::
Un™Te¡
::
	`G‘In¡ªû
()->
	`cu¼’t_‹¡_šfo
();

1012 
	`EXPECT_EQ
(::
‹¡šg
::
	`PrštToSŒšg
(
	`G‘P¬am
()), 
‹¡_šfo
->
	`v®ue_·¿m
());

1013 
	}
}

1015 
INSTANTIATE_TEST_SUITE_P
(
In¡ªtŸtiÚW™hComm’ts
, 
Comm’tTe¡
,

1016 
V®ues
(
Un¡»amabË
(1)));

1022 şas 
	cNÚP¬am‘”izedBa£Te¡
 : 
public
 ::
‹¡šg
::
Te¡
 {

1023 
public
:

1024 
	$NÚP¬am‘”izedBa£Te¡
(è: 
	$n_
(17) { }

1025 
´Ùeùed
:

1026 
n_
;

1027 
	}
};

1029 
şass
 
	gP¬am‘”izedD”ivedTe¡
 : 
public
 
NÚP¬am‘”izedBa£Te¡
,

1030 
	gpublic
 ::
‹¡šg
::
W™hP¬amIÁ”çû
<> {

1031 
´Ùeùed
:

1032 
P¬am‘”izedD”ivedTe¡
(è: 
couÁ_
(0) { }

1033 
couÁ_
;

1034 
	gglob®_couÁ_
;

1037 
	gP¬am‘”izedD”ivedTe¡
::
glob®_couÁ_
 = 0;

1039 
	$TEST_F
(
NÚP¬am‘”izedBa£Te¡
, 
Fixtu»IsIn™Ÿlized
) {

1040 
	`EXPECT_EQ
(17, 
n_
);

1041 
	}
}

1043 
	$TEST_P
(
P¬am‘”izedD”ivedTe¡
, 
S“sSequ’û
) {

1044 
	`EXPECT_EQ
(17, 
n_
);

1045 
	`EXPECT_EQ
(0, 
couÁ_
++);

1046 
	`EXPECT_EQ
(
	`G‘P¬am
(), 
glob®_couÁ_
++);

1047 
	}
}

1049 
şass
 
	gP¬am‘”izedD—thTe¡
 : 
public
 ::
‹¡šg
::
Te¡W™hP¬am
<> { };

1051 
	$TEST_F
(
P¬am‘”izedD—thTe¡
, 
G‘P¬amD›sFromTe¡F
) {

1052 
	`EXPECT_DEATH_IF_SUPPORTED
(
	`G‘P¬am
(),

1054 
	}
}

1056 
INSTANTIATE_TEST_SUITE_P
(
RªgeZ”oToFive
, 
P¬am‘”izedD”ivedTe¡
,

1057 
Rªge
(0, 5));

1060 
	eMyEnums
 {

1061 
	mENUM1
 = 1,

1062 
	mENUM2
 = 3,

1063 
	mENUM3
 = 8,

1066 
şass
 
	gMyEnumTe¡
 : 
public
 
‹¡šg
::
Te¡W™hP¬am
<
MyEnums
> {};

1068 
	$TEST_P
(
MyEnumTe¡
, 
ChecksP¬amMÜeThªZ”o
è{ 
	`EXPECT_GE
(10, 
	`G‘P¬am
()); 
	}
}

1069 
INSTANTIATE_TEST_SUITE_P
(
MyEnumTe¡s
, 
MyEnumTe¡
,

1070 ::
‹¡šg
::
V®ues
(
ENUM1
, 
ENUM2
, 0));

1072 
Çme¥aû
 
	gwÜks_h”e
 {

1074 
şass
 
	gNÙU£dTe¡
 : 
public
 
‹¡šg
::
Te¡W™hP¬am
<> {};

1078 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

1079 şas 
	cNÙU£dTy³Te¡
 : 
public
 
‹¡šg
::
Te¡
 {};

1080 
TYPED_TEST_SUITE_P
(
NÙU£dTy³Te¡
);

1083 
şass
 
	gNÙIn¡ªtŸ‹dTe¡
 : 
public
 
‹¡šg
::
Te¡W™hP¬am
<> {};

1085 
GTEST_ALLOW_UNINSTANTIATED_PARAMETERIZED_TEST
(
NÙIn¡ªtŸ‹dTe¡
);

1087 
	$TEST_P
(
NÙIn¡ªtŸ‹dTe¡
, 
U£d
è{ 
	}
}

1089 
usšg
 
	gOth”Name
 = 
NÙIn¡ªtŸ‹dTe¡
;

1090 
GTEST_ALLOW_UNINSTANTIATED_PARAMETERIZED_TEST
(
Oth”Name
);

1091 
	$TEST_P
(
Oth”Name
, 
U£d
è{ 
	}
}

1094 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

1095 şas 
	cNÙIn¡ªtŸ‹dTy³Te¡
 : 
public
 
‹¡šg
::
Te¡
 {};

1096 
TYPED_TEST_SUITE_P
(
NÙIn¡ªtŸ‹dTy³Te¡
);

1098 
GTEST_ALLOW_UNINSTANTIATED_PARAMETERIZED_TEST
(
NÙIn¡ªtŸ‹dTy³Te¡
);

1100 
	$TYPED_TEST_P
(
NÙIn¡ªtŸ‹dTy³Te¡
, 
U£d
è{ 
	}
}

1101 
REGISTER_TYPED_TEST_SUITE_P
(
NÙIn¡ªtŸ‹dTy³Te¡
, 
U£d
);

1104 
	$maš
(
¬gc
, **
¬gv
) {

1106 
	`AddGlob®Te¡EnvœÚm’t
(
Te¡G’”©iÚTe¡
::
EnvœÚm’t
::
	`In¡ªû
());

1109 
G’”©ÜEv®u©iÚTe¡
::
	`£t_·¿m_v®ue
(1);

1111 ::
‹¡šg
::
	`In™GoogËTe¡
(&
¬gc
, 
¬gv
);

1116 
G’”©ÜEv®u©iÚTe¡
::
	`£t_·¿m_v®ue
(2);

1118  
	`RUN_ALL_TESTS
();

1119 
	}
}

	@third_party/googletest/googletest/test/googletest-param-test-test.h

35 #iâdeà
GOOGLETEST_TEST_GOOGLETEST_PARAM_TEST_TEST_H_


36 
	#GOOGLETEST_TEST_GOOGLETEST_PARAM_TEST_TEST_H_


	)

38 
	~"g‹¡/g‹¡.h
"

42 
şass
 
	gEx‹º®In¡ªtŸtiÚTe¡
 : 
public
 ::
‹¡šg
::
Te¡W™hP¬am
<> {

47 
şass
 
	gIn¡ªtŸtiÚInMuÉËT¿n¦©iÚUn™sTe¡


48 : 
public
 ::
‹¡šg
::
Te¡W™hP¬am
<> {

	@third_party/googletest/googletest/test/googletest-param-test2-test.cc

34 
	~"g‹¡/g‹¡.h
"

35 
	~"‹¡/googË‹¡-·¿m-‹¡-‹¡.h
"

37 
	gusšg
 ::
‹¡šg
::
V®ues
;

38 
	gusšg
 ::
‹¡šg
::
š‹º®
::
P¬amG’”©Ü
;

43 
	gP¬amG’”©Ü
<> 
	gex‹º_g’
 = 
V®ues
(33);

49 
INSTANTIATE_TEST_SUITE_P
(
MuÉËsOf33
,

50 
Ex‹º®In¡ªtŸtiÚTe¡
,

51 
V®ues
(33, 66));

58 
INSTANTIATE_TEST_SUITE_P
(
Sequ’û2
,

59 
In¡ªtŸtiÚInMuÉËT¿n¦©iÚUn™sTe¡
,

60 
V®ues
(42*3, 42*4, 42*5));

	@third_party/googletest/googletest/test/googletest-port-test.cc

31 
	~<¡dio.h
>

33 
	~"g‹¡/š‹º®/g‹¡-pÜt.h
"

35 #ià
GTEST_OS_MAC


36 
	~<time.h
>

39 
	~<li¡
>

40 
	~<memÜy
>

41 
	~<ut™y
>

42 
	~<veùÜ
>

44 
	~"g‹¡/g‹¡.h
"

45 
	~"g‹¡/g‹¡-¥i.h
"

46 
	~"¤c/g‹¡-š‹º®-šl.h
"

48 
usšg
 
	g¡d
::
make_·œ
;

49 
usšg
 
	g¡d
::
·œ
;

51 
Çme¥aû
 
	g‹¡šg
 {

52 
Çme¥aû
 
	gš‹º®
 {

54 
TEST
(
IsXDig™Te¡
, 
WÜksFÜN¬rowAscii
) {

55 
EXPECT_TRUE
(
IsXDig™
('0'));

56 
EXPECT_TRUE
(
IsXDig™
('9'));

57 
EXPECT_TRUE
(
IsXDig™
('A'));

58 
EXPECT_TRUE
(
IsXDig™
('F'));

59 
EXPECT_TRUE
(
IsXDig™
('a'));

60 
EXPECT_TRUE
(
IsXDig™
('f'));

62 
EXPECT_FALSE
(
IsXDig™
('-'));

63 
EXPECT_FALSE
(
IsXDig™
('g'));

64 
EXPECT_FALSE
(
IsXDig™
('G'));

67 
TEST
(
IsXDig™Te¡
, 
R‘uºsF®£FÜN¬rowNÚAscii
) {

68 
EXPECT_FALSE
(
IsXDig™
(
¡©ic_ÿ¡
<>('\x80')));

69 
EXPECT_FALSE
(
IsXDig™
(
¡©ic_ÿ¡
<>('0' | '\x80')));

72 
TEST
(
IsXDig™Te¡
, 
WÜksFÜWideAscii
) {

73 
EXPECT_TRUE
(
IsXDig™
(
L
'0'));

74 
EXPECT_TRUE
(
IsXDig™
(
L
'9'));

75 
EXPECT_TRUE
(
IsXDig™
(
L
'A'));

76 
EXPECT_TRUE
(
IsXDig™
(
L
'F'));

77 
EXPECT_TRUE
(
IsXDig™
(
L
'a'));

78 
EXPECT_TRUE
(
IsXDig™
(
L
'f'));

80 
EXPECT_FALSE
(
IsXDig™
(
L
'-'));

81 
EXPECT_FALSE
(
IsXDig™
(
L
'g'));

82 
EXPECT_FALSE
(
IsXDig™
(
L
'G'));

85 
TEST
(
IsXDig™Te¡
, 
R‘uºsF®£FÜWideNÚAscii
) {

86 
EXPECT_FALSE
(
IsXDig™
(
¡©ic_ÿ¡
<
wch¬_t
>(0x80)));

87 
EXPECT_FALSE
(
IsXDig™
(
¡©ic_ÿ¡
<
wch¬_t
>(
L
'0' | 0x80)));

88 
EXPECT_FALSE
(
IsXDig™
(
¡©ic_ÿ¡
<
wch¬_t
>(
L
'0' | 0x100)));

91 şas 
	cBa£
 {

92 
	gpublic
:

93 
Ba£
(è: 
memb”_
(0) {}

94 
ex¶ic™
 
Ba£
(
n
è: 
memb”_
(n) {}

95 
Ba£
(const Base&) = ;

96 
	gBa£
& 
	gİ”©Ü
=(cÚ¡ 
Ba£
&) = ;

97 
	gvœtu®
 ~
Ba£
() {}

98 
memb”
(è{  
	gmemb”_
; }

100 
	g´iv©e
:

101 
memb”_
;

104 şas 
	cD”ived
 : 
public
 
Ba£
 {

105 
public
:

106 
ex¶ic™
 
D”ived
(
n
è: 
Ba£
(n) {}

109 
TEST
(
Im¶ic™Ca¡Te¡
, 
CÚv”tsPoš‹rs
) {

110 
D”ived
 
d”ived
(0);

111 
EXPECT_TRUE
(&
d”ived
 =ğ::
‹¡šg
::
š‹º®
::
Im¶ic™Ca¡_
<
Ba£
*>(&derived));

114 
TEST
(
Im¶ic™Ca¡Te¡
, 
CªU£Inh”™ªû
) {

115 
D”ived
 
d”ived
(1);

116 
Ba£
 
	gba£
 = ::
‹¡šg
::
š‹º®
::
Im¶ic™Ca¡_
<Ba£>(
d”ived
);

117 
EXPECT_EQ
(
d”ived
.
memb”
(), 
ba£
.member());

120 şas 
	cCa¡abË
 {

121 
	gpublic
:

122 
ex¶ic™
 
Ca¡abË
(
boŞ
* 
cÚv”‹d
è: 
cÚv”‹d_
(converted) {}

123 
İ”©Ü
 
Ba£
() {

124 *
cÚv”‹d_
 = 
Œue
;

125  
Ba£
();

128 
	g´iv©e
:

129 
boŞ
* 
cÚv”‹d_
;

132 
TEST
(
Im¶ic™Ca¡Te¡
, 
CªU£NÚCÚ¡Ca¡O³¿tÜ
) {

133 
boŞ
 
	gcÚv”‹d
 = 
çl£
;

134 
Ca¡abË
 
ÿ¡abË
(&
cÚv”‹d
);

135 
Ba£
 
	gba£
 = ::
‹¡šg
::
š‹º®
::
Im¶ic™Ca¡_
<Ba£>(
ÿ¡abË
);

136 
EXPECT_TRUE
(
cÚv”‹d
);

139 şas 
	cCÚ¡Ca¡abË
 {

140 
	gpublic
:

141 
ex¶ic™
 
CÚ¡Ca¡abË
(
boŞ
* 
cÚv”‹d
è: 
cÚv”‹d_
(converted) {}

142 
İ”©Ü
 
Ba£
() const {

143 *
cÚv”‹d_
 = 
Œue
;

144  
Ba£
();

147 
	g´iv©e
:

148 
boŞ
* 
cÚv”‹d_
;

151 
TEST
(
Im¶ic™Ca¡Te¡
, 
CªU£CÚ¡Ca¡O³¿tÜOnCÚ¡V®ues
) {

152 
boŞ
 
	gcÚv”‹d
 = 
çl£
;

153 cÚ¡ 
CÚ¡Ca¡abË
 
cÚ¡_ÿ¡abË
(&
cÚv”‹d
);

154 
Ba£
 
	gba£
 = ::
‹¡šg
::
š‹º®
::
Im¶ic™Ca¡_
<Ba£>(
cÚ¡_ÿ¡abË
);

155 
EXPECT_TRUE
(
cÚv”‹d
);

158 şas 
	cCÚ¡AndNÚCÚ¡Ca¡abË
 {

159 
	gpublic
:

160 
CÚ¡AndNÚCÚ¡Ca¡abË
(
boŞ
* 
cÚv”‹d
, boŞ* 
cÚ¡_cÚv”‹d
)

161 : 
cÚv”‹d_
(
cÚv”‹d
), 
cÚ¡_cÚv”‹d_
(
cÚ¡_cÚv”‹d
) {}

162 
İ”©Ü
 
Ba£
() {

163 *
	gcÚv”‹d_
 = 
Œue
;

164  
Ba£
();

166 
İ”©Ü
 
Ba£
() const {

167 *
	gcÚ¡_cÚv”‹d_
 = 
Œue
;

168  
Ba£
();

171 
	g´iv©e
:

172 
boŞ
* 
cÚv”‹d_
;

173 
boŞ
* 
	gcÚ¡_cÚv”‹d_
;

176 
TEST
(
Im¶ic™Ca¡Te¡
, 
CªS–eùB‘w“nCÚ¡AndNÚCÚ¡Ca¤AµrİrŸ‹ly
) {

177 
boŞ
 
	gcÚv”‹d
 = 
çl£
;

178 
boŞ
 
	gcÚ¡_cÚv”‹d
 = 
çl£
;

179 
CÚ¡AndNÚCÚ¡Ca¡abË
 
ÿ¡abË
(&
cÚv”‹d
, &
cÚ¡_cÚv”‹d
);

180 
Ba£
 
	gba£
 = ::
‹¡šg
::
š‹º®
::
Im¶ic™Ca¡_
<Ba£>(
ÿ¡abË
);

181 
EXPECT_TRUE
(
cÚv”‹d
);

182 
EXPECT_FALSE
(
cÚ¡_cÚv”‹d
);

184 
	gcÚv”‹d
 = 
çl£
;

185 
	gcÚ¡_cÚv”‹d
 = 
çl£
;

186 cÚ¡ 
CÚ¡AndNÚCÚ¡Ca¡abË
 
cÚ¡_ÿ¡abË
(&
cÚv”‹d
, &
cÚ¡_cÚv”‹d
);

187 
	gba£
 = ::
‹¡šg
::
š‹º®
::
Im¶ic™Ca¡_
<
Ba£
>(
cÚ¡_ÿ¡abË
);

188 
EXPECT_FALSE
(
cÚv”‹d
);

189 
EXPECT_TRUE
(
cÚ¡_cÚv”‹d
);

192 şas 
	cTo
 {

193 
	gpublic
:

194 
To
(
boŞ
* 
cÚv”‹d
è{ *cÚv”‹d = 
Œue
; }

197 
TEST
(
Im¶ic™Ca¡Te¡
, 
CªU£Im¶ic™CÚ¡ruùÜ
) {

198 
boŞ
 
	gcÚv”‹d
 = 
çl£
;

199 
To
 
	gto
 = ::
‹¡šg
::
š‹º®
::
Im¶ic™Ca¡_
<To>(&
cÚv”‹d
);

200 ()
	gto
;

201 
EXPECT_TRUE
(
cÚv”‹d
);

205 #ifdeà
__GNUC__


206 #´agm¨
GCC
 
dŸgno¡ic
 
push


207 #´agm¨
GCC
 
dŸgno¡ic
 
ignÜed
 "-Wdangling-else"

208 #´agm¨
GCC
 
dŸgno¡ic
 
ignÜed
 "-Wempty-body"

209 #´agm¨
GCC
 
dŸgno¡ic
 
ignÜed
 "-Wpragmas"

211 
TEST
(
G‹¡CheckSyÁaxTe¡
, 
BehavesLikeASšgËS‹m’t
) {

212 ià(
AlwaysF®£
())

213 
GTEST_CHECK_
(
çl£
) << "This should‚ever beƒxecuted; "

216 ià(
AlwaysTrue
())

217 
GTEST_CHECK_
(
Œue
);

221 ià(
AlwaysF®£
())

224 
GTEST_CHECK_
(
Œue
) << "";

226 #ifdeà
__GNUC__


227 #´agm¨
GCC
 
dŸgno¡ic
 
pİ


230 
TEST
(
G‹¡CheckSyÁaxTe¡
, 
WÜksW™hSw™ch
) {

235 
GTEST_CHECK_
(
Œue
);

240 
GTEST_CHECK_
(
Œue
) << "Check failed in switch case";

244 
TEST
(
FÜm©FeLoÿtiÚTe¡
, 
FÜm©sFeLoÿtiÚ
) {

245 
EXPECT_PRED_FORMAT2
(
IsSub¡ršg
, "foo.cc", 
FÜm©FeLoÿtiÚ
("foo.cc", 42));

246 
EXPECT_PRED_FORMAT2
(
IsSub¡ršg
, "42", 
FÜm©FeLoÿtiÚ
("foo.cc", 42));

249 
TEST
(
FÜm©FeLoÿtiÚTe¡
, 
FÜm©sUnknownFe
) {

250 
EXPECT_PRED_FORMAT2
(
IsSub¡ršg
, "unknown file",

251 
FÜm©FeLoÿtiÚ
(
nuÎ±r
, 42));

252 
EXPECT_PRED_FORMAT2
(
IsSub¡ršg
, "42", 
FÜm©FeLoÿtiÚ
(
nuÎ±r
, 42));

255 
TEST
(
FÜm©FeLoÿtiÚTe¡
, 
FÜm©sUknownLše
) {

256 
EXPECT_EQ
("foo.cc:", 
FÜm©FeLoÿtiÚ
("foo.cc", -1));

259 
TEST
(
FÜm©FeLoÿtiÚTe¡
, 
FÜm©sUknownFeAndLše
) {

260 
EXPECT_EQ
("unknowÀfe:", 
FÜm©FeLoÿtiÚ
(
nuÎ±r
, -1));

264 
TEST
(
FÜm©Comp”Ind•’d’tFeLoÿtiÚTe¡
, 
FÜm©sFeLoÿtiÚ
) {

265 
EXPECT_EQ
("foo.cc:42", 
FÜm©Comp”Ind•’d’tFeLoÿtiÚ
("foo.cc", 42));

268 
TEST
(
FÜm©Comp”Ind•’d’tFeLoÿtiÚTe¡
, 
FÜm©sUknownFe
) {

269 
EXPECT_EQ
("unknown file:42",

270 
FÜm©Comp”Ind•’d’tFeLoÿtiÚ
(
nuÎ±r
, 42));

273 
TEST
(
FÜm©Comp”Ind•’d’tFeLoÿtiÚTe¡
, 
FÜm©sUknownLše
) {

274 
EXPECT_EQ
("foo.cc", 
FÜm©Comp”Ind•’d’tFeLoÿtiÚ
("foo.cc", -1));

277 
TEST
(
FÜm©Comp”Ind•’d’tFeLoÿtiÚTe¡
, 
FÜm©sUknownFeAndLše
) {

278 
EXPECT_EQ
("unknowÀfe", 
FÜm©Comp”Ind•’d’tFeLoÿtiÚ
(
nuÎ±r
, -1));

281 #ià
GTEST_OS_LINUX
 || 
GTEST_OS_MAC
 || 
GTEST_OS_QNX
 || 
GTEST_OS_FUCHSIA
 || \

282 
	gGTEST_OS_DRAGONFLY
 || 
	gGTEST_OS_FREEBSD
 || 
	gGTEST_OS_GNU_KFREEBSD
 || \

283 
	gGTEST_OS_NETBSD
 || 
GTEST_OS_OPENBSD


284 * 
Th»adFunc
(* 
d©a
) {

285 
	gš‹º®
::
Mu‹x
* 
mu‹x
 = 
¡©ic_ÿ¡
<
š‹º®
::Mu‹x*>(
d©a
);

286 
	gmu‹x
->
Lock
();

287 
	gmu‹x
->
UÆock
();

288  
	gnuÎ±r
;

291 
TEST
(
G‘Th»adCouÁTe¡
, 
R‘uºsCÜ»ùV®ue
) {

292 cÚ¡ 
size_t
 
	g¡¬tšg_couÁ
 = 
G‘Th»adCouÁ
();

293 
±h»ad_t
 
	gth»ad_id
;

295 
	gš‹º®
::
Mu‹x
 
mu‹x
;

297 
	gš‹º®
::
Mu‹xLock
 
lock
(&
mu‹x
);

298 
±h»ad_©Œ_t
 
	g©Œ
;

299 
ASSERT_EQ
(0, 
±h»ad_©Œ_š™
(&
©Œ
));

300 
ASSERT_EQ
(0, 
±h»ad_©Œ_£td‘ach¡©e
(&
©Œ
, 
PTHREAD_CREATE_JOINABLE
));

302 cÚ¡ 
	g¡©us
 = 
±h»ad_ü—‹
(&
th»ad_id
, &
©Œ
, &
Th»adFunc
, &
mu‹x
);

303 
ASSERT_EQ
(0, 
±h»ad_©Œ_de¡roy
(&
©Œ
));

304 
ASSERT_EQ
(0, 
¡©us
);

305 
EXPECT_EQ
(
¡¬tšg_couÁ
 + 1, 
G‘Th»adCouÁ
());

308 * 
	gdummy
;

309 
ASSERT_EQ
(0, 
±h»ad_još
(
th»ad_id
, &
dummy
));

314 
	gi
 = 0; i < 5; ++i) {

315 ià(
G‘Th»adCouÁ
(è=ğ
¡¬tšg_couÁ
)

318 
SË•Mli£cÚds
(100);

321 
EXPECT_EQ
(
¡¬tšg_couÁ
, 
G‘Th»adCouÁ
());

324 
TEST
(
G‘Th»adCouÁTe¡
, 
R‘uºsZ”oWh’UÇbËToCouÁTh»ads
) {

325 
EXPECT_EQ
(0U, 
G‘Th»adCouÁ
());

329 
TEST
(
G‹¡CheckD—thTe¡
, 
D›sW™hCÜ»ùOuutOnFau»
) {

330 cÚ¡ 
boŞ
 
	ga_çl£_cÚd™iÚ
 = 
çl£
;

331 cÚ¡ 
	g»gex
[] =

332 #ifdeà
_MSC_VER


334 #–ià
GTEST_USES_POSIX_RE


341 
EXPECT_DEATH_IF_SUPPORTED
(
GTEST_CHECK_
(
a_çl£_cÚd™iÚ
) << "Extra info",

342 
»gex
);

345 #ià
GTEST_HAS_DEATH_TEST


347 
TEST
(
G‹¡CheckD—thTe¡
, 
LivesS’yOnSucûss
) {

348 
EXPECT_EXIT
({

349 
GTEST_CHECK_
(
Œue
) << "Extra info";

350 ::
¡d
::
û¼
 << "Success\n";

351 
ex™
(0); },

352 ::
‹¡šg
::
Ex™edW™hCode
(0), "Success");

360 
TEST
(
RegexEngšeS–eùiÚTe¡
, 
S–eùsCÜ»ùRegexEngše
) {

361 #ià!
GTEST_USES_PCRE


362 #ià
GTEST_HAS_POSIX_RE


364 
EXPECT_TRUE
(
GTEST_USES_POSIX_RE
);

368 
EXPECT_TRUE
(
GTEST_USES_SIMPLE_RE
);

374 #ià
GTEST_USES_POSIX_RE


376 
	g‹m¶©e
 <
ty³Çme
 
	gSŒ
>

377 şas 
	cRETe¡
 : 
public
 ::
‹¡šg
::
Te¡
 {};

381 
	g‹¡šg
::
	tTy³s
< ::
	t¡d
::
	t¡ršg
, cÚ¡ *> 
	tSŒšgTy³s
;

383 
TYPED_TEST_SUITE
(
RETe¡
, 
SŒšgTy³s
);

386 
TYPED_TEST
(
RETe¡
, 
Im¶ic™CÚ¡ruùÜWÜks
) {

387 cÚ¡ 
RE
 
em±y
(
Ty³P¬am
(""));

388 
EXPECT_STREQ
("", 
em±y
.
·‰”n
());

390 cÚ¡ 
RE
 
sim¶e
(
Ty³P¬am
("hello"));

391 
EXPECT_STREQ
("h–lo", 
sim¶e
.
·‰”n
());

393 cÚ¡ 
RE
 
nÜm®
(
Ty³P¬am
(".*(\\w+)"));

394 
EXPECT_STREQ
(".*(\\w+)", 
nÜm®
.
·‰”n
());

398 
TYPED_TEST
(
RETe¡
, 
RejeùsInv®idRegex
) {

399 
EXPECT_NONFATAL_FAILURE
({

400 cÚ¡ 
RE
 
šv®id
(
Ty³P¬am
("?"));

405 
TYPED_TEST
(
RETe¡
, 
FuÎM©chWÜks
) {

406 cÚ¡ 
RE
 
em±y
(
Ty³P¬am
(""));

407 
EXPECT_TRUE
(
RE
::
FuÎM©ch
(
Ty³P¬am
(""), 
em±y
));

408 
EXPECT_FALSE
(
RE
::
FuÎM©ch
(
Ty³P¬am
("a"), 
em±y
));

410 cÚ¡ 
RE
 
»
(
Ty³P¬am
("a.*z"));

411 
EXPECT_TRUE
(
RE
::
FuÎM©ch
(
Ty³P¬am
("az"), 
»
));

412 
EXPECT_TRUE
(
RE
::
FuÎM©ch
(
Ty³P¬am
("axyz"), 
»
));

413 
EXPECT_FALSE
(
RE
::
FuÎM©ch
(
Ty³P¬am
("baz"), 
»
));

414 
EXPECT_FALSE
(
RE
::
FuÎM©ch
(
Ty³P¬am
("azy"), 
»
));

418 
TYPED_TEST
(
RETe¡
, 
P¬tŸlM©chWÜks
) {

419 cÚ¡ 
RE
 
em±y
(
Ty³P¬am
(""));

420 
EXPECT_TRUE
(
RE
::
P¬tŸlM©ch
(
Ty³P¬am
(""), 
em±y
));

421 
EXPECT_TRUE
(
RE
::
P¬tŸlM©ch
(
Ty³P¬am
("a"), 
em±y
));

423 cÚ¡ 
RE
 
»
(
Ty³P¬am
("a.*z"));

424 
EXPECT_TRUE
(
RE
::
P¬tŸlM©ch
(
Ty³P¬am
("az"), 
»
));

425 
EXPECT_TRUE
(
RE
::
P¬tŸlM©ch
(
Ty³P¬am
("axyz"), 
»
));

426 
EXPECT_TRUE
(
RE
::
P¬tŸlM©ch
(
Ty³P¬am
("baz"), 
»
));

427 
EXPECT_TRUE
(
RE
::
P¬tŸlM©ch
(
Ty³P¬am
("azy"), 
»
));

428 
EXPECT_FALSE
(
RE
::
P¬tŸlM©ch
(
Ty³P¬am
("zza"), 
»
));

431 #–ià
GTEST_USES_SIMPLE_RE


433 
TEST
(
IsInS‘Te¡
, 
NulCh¬IsNÙInAnyS‘
) {

434 
EXPECT_FALSE
(
IsInS‘
('\0', ""));

435 
EXPECT_FALSE
(
IsInS‘
('\0', "\0"));

436 
EXPECT_FALSE
(
IsInS‘
('\0', "a"));

439 
TEST
(
IsInS‘Te¡
, 
WÜksFÜNÚNulCh¬s
) {

440 
EXPECT_FALSE
(
IsInS‘
('a', "Ab"));

441 
EXPECT_FALSE
(
IsInS‘
('c', ""));

443 
EXPECT_TRUE
(
IsInS‘
('b', "bcd"));

444 
EXPECT_TRUE
(
IsInS‘
('b', "ab"));

447 
TEST
(
IsAsciiDig™Te¡
, 
IsF®£FÜNÚDig™
) {

448 
EXPECT_FALSE
(
IsAsciiDig™
('\0'));

449 
EXPECT_FALSE
(
IsAsciiDig™
(' '));

450 
EXPECT_FALSE
(
IsAsciiDig™
('+'));

451 
EXPECT_FALSE
(
IsAsciiDig™
('-'));

452 
EXPECT_FALSE
(
IsAsciiDig™
('.'));

453 
EXPECT_FALSE
(
IsAsciiDig™
('a'));

456 
TEST
(
IsAsciiDig™Te¡
, 
IsTrueFÜDig™
) {

457 
EXPECT_TRUE
(
IsAsciiDig™
('0'));

458 
EXPECT_TRUE
(
IsAsciiDig™
('1'));

459 
EXPECT_TRUE
(
IsAsciiDig™
('5'));

460 
EXPECT_TRUE
(
IsAsciiDig™
('9'));

463 
TEST
(
IsAsciiPunùTe¡
, 
IsF®£FÜNÚPunù
) {

464 
EXPECT_FALSE
(
IsAsciiPunù
('\0'));

465 
EXPECT_FALSE
(
IsAsciiPunù
(' '));

466 
EXPECT_FALSE
(
IsAsciiPunù
('\n'));

467 
EXPECT_FALSE
(
IsAsciiPunù
('a'));

468 
EXPECT_FALSE
(
IsAsciiPunù
('0'));

471 
TEST
(
IsAsciiPunùTe¡
, 
IsTrueFÜPunù
) {

472 cÚ¡ * 
	gp
 = "^-!\"#$%&'()*+,./:;<=>?@[\\]_`{|}~"; *p;…++) {

473 
EXPECT_PRED1
(
IsAsciiPunù
, *
p
);

477 
TEST
(
IsR•—tTe¡
, 
IsF®£FÜNÚR•—tCh¬
) {

478 
EXPECT_FALSE
(
IsR•—t
('\0'));

479 
EXPECT_FALSE
(
IsR•—t
(' '));

480 
EXPECT_FALSE
(
IsR•—t
('a'));

481 
EXPECT_FALSE
(
IsR•—t
('1'));

482 
EXPECT_FALSE
(
IsR•—t
('-'));

485 
TEST
(
IsR•—tTe¡
, 
IsTrueFÜR•—tCh¬
) {

486 
EXPECT_TRUE
(
IsR•—t
('?'));

487 
EXPECT_TRUE
(
IsR•—t
('*'));

488 
EXPECT_TRUE
(
IsR•—t
('+'));

491 
TEST
(
IsAsciiWh™eS·ûTe¡
, 
IsF®£FÜNÚWh™eS·û
) {

492 
EXPECT_FALSE
(
IsAsciiWh™eS·û
('\0'));

493 
EXPECT_FALSE
(
IsAsciiWh™eS·û
('a'));

494 
EXPECT_FALSE
(
IsAsciiWh™eS·û
('1'));

495 
EXPECT_FALSE
(
IsAsciiWh™eS·û
('+'));

496 
EXPECT_FALSE
(
IsAsciiWh™eS·û
('_'));

499 
TEST
(
IsAsciiWh™eS·ûTe¡
, 
IsTrueFÜWh™eS·û
) {

500 
EXPECT_TRUE
(
IsAsciiWh™eS·û
(' '));

501 
EXPECT_TRUE
(
IsAsciiWh™eS·û
('\n'));

502 
EXPECT_TRUE
(
IsAsciiWh™eS·û
('\r'));

503 
EXPECT_TRUE
(
IsAsciiWh™eS·û
('\t'));

504 
EXPECT_TRUE
(
IsAsciiWh™eS·û
('\v'));

505 
EXPECT_TRUE
(
IsAsciiWh™eS·û
('\f'));

508 
TEST
(
IsAsciiWÜdCh¬Te¡
, 
IsF®£FÜNÚWÜdCh¬
) {

509 
EXPECT_FALSE
(
IsAsciiWÜdCh¬
('\0'));

510 
EXPECT_FALSE
(
IsAsciiWÜdCh¬
('+'));

511 
EXPECT_FALSE
(
IsAsciiWÜdCh¬
('.'));

512 
EXPECT_FALSE
(
IsAsciiWÜdCh¬
(' '));

513 
EXPECT_FALSE
(
IsAsciiWÜdCh¬
('\n'));

516 
TEST
(
IsAsciiWÜdCh¬Te¡
, 
IsTrueFÜL‘‹r
) {

517 
EXPECT_TRUE
(
IsAsciiWÜdCh¬
('a'));

518 
EXPECT_TRUE
(
IsAsciiWÜdCh¬
('b'));

519 
EXPECT_TRUE
(
IsAsciiWÜdCh¬
('A'));

520 
EXPECT_TRUE
(
IsAsciiWÜdCh¬
('Z'));

523 
TEST
(
IsAsciiWÜdCh¬Te¡
, 
IsTrueFÜDig™
) {

524 
EXPECT_TRUE
(
IsAsciiWÜdCh¬
('0'));

525 
EXPECT_TRUE
(
IsAsciiWÜdCh¬
('1'));

526 
EXPECT_TRUE
(
IsAsciiWÜdCh¬
('7'));

527 
EXPECT_TRUE
(
IsAsciiWÜdCh¬
('9'));

530 
TEST
(
IsAsciiWÜdCh¬Te¡
, 
IsTrueFÜUnd”scÜe
) {

531 
EXPECT_TRUE
(
IsAsciiWÜdCh¬
('_'));

534 
TEST
(
IsV®idEsÿ³Te¡
, 
IsF®£FÜNÚPršbË
) {

535 
EXPECT_FALSE
(
IsV®idEsÿ³
('\0'));

536 
EXPECT_FALSE
(
IsV®idEsÿ³
('\007'));

539 
TEST
(
IsV®idEsÿ³Te¡
, 
IsF®£FÜDig™
) {

540 
EXPECT_FALSE
(
IsV®idEsÿ³
('0'));

541 
EXPECT_FALSE
(
IsV®idEsÿ³
('9'));

544 
TEST
(
IsV®idEsÿ³Te¡
, 
IsF®£FÜWh™eS·û
) {

545 
EXPECT_FALSE
(
IsV®idEsÿ³
(' '));

546 
EXPECT_FALSE
(
IsV®idEsÿ³
('\n'));

549 
TEST
(
IsV®idEsÿ³Te¡
, 
IsF®£FÜSomeL‘‹r
) {

550 
EXPECT_FALSE
(
IsV®idEsÿ³
('a'));

551 
EXPECT_FALSE
(
IsV®idEsÿ³
('Z'));

554 
TEST
(
IsV®idEsÿ³Te¡
, 
IsTrueFÜPunù
) {

555 
EXPECT_TRUE
(
IsV®idEsÿ³
('.'));

556 
EXPECT_TRUE
(
IsV®idEsÿ³
('-'));

557 
EXPECT_TRUE
(
IsV®idEsÿ³
('^'));

558 
EXPECT_TRUE
(
IsV®idEsÿ³
('$'));

559 
EXPECT_TRUE
(
IsV®idEsÿ³
('('));

560 
EXPECT_TRUE
(
IsV®idEsÿ³
(']'));

561 
EXPECT_TRUE
(
IsV®idEsÿ³
('{'));

562 
EXPECT_TRUE
(
IsV®idEsÿ³
('|'));

565 
TEST
(
IsV®idEsÿ³Te¡
, 
IsTrueFÜSomeL‘‹r
) {

566 
EXPECT_TRUE
(
IsV®idEsÿ³
('d'));

567 
EXPECT_TRUE
(
IsV®idEsÿ³
('D'));

568 
EXPECT_TRUE
(
IsV®idEsÿ³
('s'));

569 
EXPECT_TRUE
(
IsV®idEsÿ³
('S'));

570 
EXPECT_TRUE
(
IsV®idEsÿ³
('w'));

571 
EXPECT_TRUE
(
IsV®idEsÿ³
('W'));

574 
TEST
(
AtomM©chesCh¬Te¡
, 
Esÿ³dPunù
) {

575 
EXPECT_FALSE
(
AtomM©chesCh¬
(
Œue
, '\\', '\0'));

576 
EXPECT_FALSE
(
AtomM©chesCh¬
(
Œue
, '\\', ' '));

577 
EXPECT_FALSE
(
AtomM©chesCh¬
(
Œue
, '_', '.'));

578 
EXPECT_FALSE
(
AtomM©chesCh¬
(
Œue
, '.', 'a'));

580 
EXPECT_TRUE
(
AtomM©chesCh¬
(
Œue
, '\\', '\\'));

581 
EXPECT_TRUE
(
AtomM©chesCh¬
(
Œue
, '_', '_'));

582 
EXPECT_TRUE
(
AtomM©chesCh¬
(
Œue
, '+', '+'));

583 
EXPECT_TRUE
(
AtomM©chesCh¬
(
Œue
, '.', '.'));

586 
TEST
(
AtomM©chesCh¬Te¡
, 
Esÿ³d_d
) {

587 
EXPECT_FALSE
(
AtomM©chesCh¬
(
Œue
, 'd', '\0'));

588 
EXPECT_FALSE
(
AtomM©chesCh¬
(
Œue
, 'd', 'a'));

589 
EXPECT_FALSE
(
AtomM©chesCh¬
(
Œue
, 'd', '.'));

591 
EXPECT_TRUE
(
AtomM©chesCh¬
(
Œue
, 'd', '0'));

592 
EXPECT_TRUE
(
AtomM©chesCh¬
(
Œue
, 'd', '9'));

595 
TEST
(
AtomM©chesCh¬Te¡
, 
Esÿ³d_D
) {

596 
EXPECT_FALSE
(
AtomM©chesCh¬
(
Œue
, 'D', '0'));

597 
EXPECT_FALSE
(
AtomM©chesCh¬
(
Œue
, 'D', '9'));

599 
EXPECT_TRUE
(
AtomM©chesCh¬
(
Œue
, 'D', '\0'));

600 
EXPECT_TRUE
(
AtomM©chesCh¬
(
Œue
, 'D', 'a'));

601 
EXPECT_TRUE
(
AtomM©chesCh¬
(
Œue
, 'D', '-'));

604 
TEST
(
AtomM©chesCh¬Te¡
, 
Esÿ³d_s
) {

605 
EXPECT_FALSE
(
AtomM©chesCh¬
(
Œue
, 's', '\0'));

606 
EXPECT_FALSE
(
AtomM©chesCh¬
(
Œue
, 's', 'a'));

607 
EXPECT_FALSE
(
AtomM©chesCh¬
(
Œue
, 's', '.'));

608 
EXPECT_FALSE
(
AtomM©chesCh¬
(
Œue
, 's', '9'));

610 
EXPECT_TRUE
(
AtomM©chesCh¬
(
Œue
, 's', ' '));

611 
EXPECT_TRUE
(
AtomM©chesCh¬
(
Œue
, 's', '\n'));

612 
EXPECT_TRUE
(
AtomM©chesCh¬
(
Œue
, 's', '\t'));

615 
TEST
(
AtomM©chesCh¬Te¡
, 
Esÿ³d_S
) {

616 
EXPECT_FALSE
(
AtomM©chesCh¬
(
Œue
, 'S', ' '));

617 
EXPECT_FALSE
(
AtomM©chesCh¬
(
Œue
, 'S', '\r'));

619 
EXPECT_TRUE
(
AtomM©chesCh¬
(
Œue
, 'S', '\0'));

620 
EXPECT_TRUE
(
AtomM©chesCh¬
(
Œue
, 'S', 'a'));

621 
EXPECT_TRUE
(
AtomM©chesCh¬
(
Œue
, 'S', '9'));

624 
TEST
(
AtomM©chesCh¬Te¡
, 
Esÿ³d_w
) {

625 
EXPECT_FALSE
(
AtomM©chesCh¬
(
Œue
, 'w', '\0'));

626 
EXPECT_FALSE
(
AtomM©chesCh¬
(
Œue
, 'w', '+'));

627 
EXPECT_FALSE
(
AtomM©chesCh¬
(
Œue
, 'w', ' '));

628 
EXPECT_FALSE
(
AtomM©chesCh¬
(
Œue
, 'w', '\n'));

630 
EXPECT_TRUE
(
AtomM©chesCh¬
(
Œue
, 'w', '0'));

631 
EXPECT_TRUE
(
AtomM©chesCh¬
(
Œue
, 'w', 'b'));

632 
EXPECT_TRUE
(
AtomM©chesCh¬
(
Œue
, 'w', 'C'));

633 
EXPECT_TRUE
(
AtomM©chesCh¬
(
Œue
, 'w', '_'));

636 
TEST
(
AtomM©chesCh¬Te¡
, 
Esÿ³d_W
) {

637 
EXPECT_FALSE
(
AtomM©chesCh¬
(
Œue
, 'W', 'A'));

638 
EXPECT_FALSE
(
AtomM©chesCh¬
(
Œue
, 'W', 'b'));

639 
EXPECT_FALSE
(
AtomM©chesCh¬
(
Œue
, 'W', '9'));

640 
EXPECT_FALSE
(
AtomM©chesCh¬
(
Œue
, 'W', '_'));

642 
EXPECT_TRUE
(
AtomM©chesCh¬
(
Œue
, 'W', '\0'));

643 
EXPECT_TRUE
(
AtomM©chesCh¬
(
Œue
, 'W', '*'));

644 
EXPECT_TRUE
(
AtomM©chesCh¬
(
Œue
, 'W', '\n'));

647 
TEST
(
AtomM©chesCh¬Te¡
, 
Esÿ³dWh™eS·û
) {

648 
EXPECT_FALSE
(
AtomM©chesCh¬
(
Œue
, 'f', '\0'));

649 
EXPECT_FALSE
(
AtomM©chesCh¬
(
Œue
, 'f', '\n'));

650 
EXPECT_FALSE
(
AtomM©chesCh¬
(
Œue
, 'n', '\0'));

651 
EXPECT_FALSE
(
AtomM©chesCh¬
(
Œue
, 'n', '\r'));

652 
EXPECT_FALSE
(
AtomM©chesCh¬
(
Œue
, 'r', '\0'));

653 
EXPECT_FALSE
(
AtomM©chesCh¬
(
Œue
, 'r', 'a'));

654 
EXPECT_FALSE
(
AtomM©chesCh¬
(
Œue
, 't', '\0'));

655 
EXPECT_FALSE
(
AtomM©chesCh¬
(
Œue
, 't', 't'));

656 
EXPECT_FALSE
(
AtomM©chesCh¬
(
Œue
, 'v', '\0'));

657 
EXPECT_FALSE
(
AtomM©chesCh¬
(
Œue
, 'v', '\f'));

659 
EXPECT_TRUE
(
AtomM©chesCh¬
(
Œue
, 'f', '\f'));

660 
EXPECT_TRUE
(
AtomM©chesCh¬
(
Œue
, 'n', '\n'));

661 
EXPECT_TRUE
(
AtomM©chesCh¬
(
Œue
, 'r', '\r'));

662 
EXPECT_TRUE
(
AtomM©chesCh¬
(
Œue
, 't', '\t'));

663 
EXPECT_TRUE
(
AtomM©chesCh¬
(
Œue
, 'v', '\v'));

666 
TEST
(
AtomM©chesCh¬Te¡
, 
UÃsÿ³dDÙ
) {

667 
EXPECT_FALSE
(
AtomM©chesCh¬
(
çl£
, '.', '\n'));

669 
EXPECT_TRUE
(
AtomM©chesCh¬
(
çl£
, '.', '\0'));

670 
EXPECT_TRUE
(
AtomM©chesCh¬
(
çl£
, '.', '.'));

671 
EXPECT_TRUE
(
AtomM©chesCh¬
(
çl£
, '.', 'a'));

672 
EXPECT_TRUE
(
AtomM©chesCh¬
(
çl£
, '.', ' '));

675 
TEST
(
AtomM©chesCh¬Te¡
, 
UÃsÿ³dCh¬
) {

676 
EXPECT_FALSE
(
AtomM©chesCh¬
(
çl£
, 'a', '\0'));

677 
EXPECT_FALSE
(
AtomM©chesCh¬
(
çl£
, 'a', 'b'));

678 
EXPECT_FALSE
(
AtomM©chesCh¬
(
çl£
, '$', 'a'));

680 
EXPECT_TRUE
(
AtomM©chesCh¬
(
çl£
, '$', '$'));

681 
EXPECT_TRUE
(
AtomM©chesCh¬
(
çl£
, '5', '5'));

682 
EXPECT_TRUE
(
AtomM©chesCh¬
(
çl£
, 'Z', 'Z'));

685 
TEST
(
V®id©eRegexTe¡
, 
G’”©esFau»AndR‘uºsF®£FÜInv®id
) {

686 
EXPECT_NONFATAL_FAILURE
(
ASSERT_FALSE
(
V®id©eRegex
(
NULL
)),

688 
EXPECT_NONFATAL_FAILURE
(

689 
ASSERT_FALSE
(
V®id©eRegex
("a\\")),

691 
EXPECT_NONFATAL_FAILURE
(
ASSERT_FALSE
(
V®id©eRegex
("a\\")),

693 
EXPECT_NONFATAL_FAILURE
(
ASSERT_FALSE
(
V®id©eRegex
("\\n\\")),

695 
EXPECT_NONFATAL_FAILURE
(
ASSERT_FALSE
(
V®id©eRegex
("\\s\\hb")),

697 
EXPECT_NONFATAL_FAILURE
(
ASSERT_FALSE
(
V®id©eRegex
("^^")),

699 
EXPECT_NONFATAL_FAILURE
(
ASSERT_FALSE
(
V®id©eRegex
(".*^b")),

701 
EXPECT_NONFATAL_FAILURE
(
ASSERT_FALSE
(
V®id©eRegex
("$$")),

703 
EXPECT_NONFATAL_FAILURE
(
ASSERT_FALSE
(
V®id©eRegex
("^$a")),

705 
EXPECT_NONFATAL_FAILURE
(
ASSERT_FALSE
(
V®id©eRegex
("a(b")),

707 
EXPECT_NONFATAL_FAILURE
(
ASSERT_FALSE
(
V®id©eRegex
("ab)")),

709 
EXPECT_NONFATAL_FAILURE
(
ASSERT_FALSE
(
V®id©eRegex
("[ab")),

711 
EXPECT_NONFATAL_FAILURE
(
ASSERT_FALSE
(
V®id©eRegex
("a{2")),

713 
EXPECT_NONFATAL_FAILURE
(
ASSERT_FALSE
(
V®id©eRegex
("?")),

715 
EXPECT_NONFATAL_FAILURE
(
ASSERT_FALSE
(
V®id©eRegex
("^*")),

717 
EXPECT_NONFATAL_FAILURE
(
ASSERT_FALSE
(
V®id©eRegex
("5*+")),

721 
TEST
(
V®id©eRegexTe¡
, 
R‘uºsTrueFÜV®id
) {

722 
EXPECT_TRUE
(
V®id©eRegex
(""));

723 
EXPECT_TRUE
(
V®id©eRegex
("a"));

724 
EXPECT_TRUE
(
V®id©eRegex
(".*"));

725 
EXPECT_TRUE
(
V®id©eRegex
("^a_+"));

726 
EXPECT_TRUE
(
V®id©eRegex
("^a\\t\\&?"));

727 
EXPECT_TRUE
(
V®id©eRegex
("09*$"));

728 
EXPECT_TRUE
(
V®id©eRegex
("^Z$"));

729 
EXPECT_TRUE
(
V®id©eRegex
("a\\^Z\\$\\(\\)\\|\\[\\]\\{\\}"));

732 
TEST
(
M©chR•‘™iÚAndRegexAtH—dTe¡
, 
WÜksFÜZ”oOrOÃ
) {

733 
EXPECT_FALSE
(
M©chR•‘™iÚAndRegexAtH—d
(
çl£
, 'a', '?', "a", "ba"));

735 
EXPECT_FALSE
(
M©chR•‘™iÚAndRegexAtH—d
(
çl£
, 'a', '?', "b", "aab"));

738 
EXPECT_TRUE
(
M©chR•‘™iÚAndRegexAtH—d
(
çl£
, 'a', '?', "b", "ba"));

740 
EXPECT_TRUE
(
M©chR•‘™iÚAndRegexAtH—d
(
çl£
, 'a', '?', "b", "ab"));

741 
EXPECT_TRUE
(
M©chR•‘™iÚAndRegexAtH—d
(
çl£
, '#', '?', ".", "##"));

744 
TEST
(
M©chR•‘™iÚAndRegexAtH—dTe¡
, 
WÜksFÜZ”oOrMªy
) {

745 
EXPECT_FALSE
(
M©chR•‘™iÚAndRegexAtH—d
(
çl£
, '.', '*', "a$", "baab"));

748 
EXPECT_TRUE
(
M©chR•‘™iÚAndRegexAtH—d
(
çl£
, '.', '*', "b", "bc"));

750 
EXPECT_TRUE
(
M©chR•‘™iÚAndRegexAtH—d
(
çl£
, '.', '*', "b", "abc"));

752 
EXPECT_TRUE
(
M©chR•‘™iÚAndRegexAtH—d
(
Œue
, 'w', '*', "-", "ab_1-g"));

755 
TEST
(
M©chR•‘™iÚAndRegexAtH—dTe¡
, 
WÜksFÜOÃOrMªy
) {

756 
EXPECT_FALSE
(
M©chR•‘™iÚAndRegexAtH—d
(
çl£
, '.', '+', "a$", "baab"));

758 
EXPECT_FALSE
(
M©chR•‘™iÚAndRegexAtH—d
(
çl£
, '.', '+', "b", "bc"));

761 
EXPECT_TRUE
(
M©chR•‘™iÚAndRegexAtH—d
(
çl£
, '.', '+', "b", "abc"));

763 
EXPECT_TRUE
(
M©chR•‘™iÚAndRegexAtH—d
(
Œue
, 'w', '+', "-", "ab_1-g"));

766 
TEST
(
M©chRegexAtH—dTe¡
, 
R‘uºsTrueFÜEm±yRegex
) {

767 
EXPECT_TRUE
(
M©chRegexAtH—d
("", ""));

768 
EXPECT_TRUE
(
M©chRegexAtH—d
("", "ab"));

771 
TEST
(
M©chRegexAtH—dTe¡
, 
WÜksWh’DŞÏrIsInRegex
) {

772 
EXPECT_FALSE
(
M©chRegexAtH—d
("$", "a"));

774 
EXPECT_TRUE
(
M©chRegexAtH—d
("$", ""));

775 
EXPECT_TRUE
(
M©chRegexAtH—d
("a$", "a"));

778 
TEST
(
M©chRegexAtH—dTe¡
, 
WÜksWh’RegexS¹sW™hEsÿ³Sequ’û
) {

779 
EXPECT_FALSE
(
M©chRegexAtH—d
("\\w", "+"));

780 
EXPECT_FALSE
(
M©chRegexAtH—d
("\\W", "ab"));

782 
EXPECT_TRUE
(
M©chRegexAtH—d
("\\sa", "\nab"));

783 
EXPECT_TRUE
(
M©chRegexAtH—d
("\\d", "1a"));

786 
TEST
(
M©chRegexAtH—dTe¡
, 
WÜksWh’RegexS¹sW™hR•‘™iÚ
) {

787 
EXPECT_FALSE
(
M©chRegexAtH—d
(".+a", "abc"));

788 
EXPECT_FALSE
(
M©chRegexAtH—d
("a?b", "aab"));

790 
EXPECT_TRUE
(
M©chRegexAtH—d
(".*a", "bc12-ab"));

791 
EXPECT_TRUE
(
M©chRegexAtH—d
("a?b", "b"));

792 
EXPECT_TRUE
(
M©chRegexAtH—d
("a?b", "ab"));

795 
TEST
(
M©chRegexAtH—dTe¡
,

796 
WÜksWh’RegexS¹sW™hR•‘iÚOfEsÿ³Sequ’û
) {

797 
EXPECT_FALSE
(
M©chRegexAtH—d
("\\.+a", "abc"));

798 
EXPECT_FALSE
(
M©chRegexAtH—d
("\\s?b", " b"));

800 
EXPECT_TRUE
(
M©chRegexAtH—d
("\\(*a", "((((ab"));

801 
EXPECT_TRUE
(
M©chRegexAtH—d
("\\^?b", "^b"));

802 
EXPECT_TRUE
(
M©chRegexAtH—d
("\\\\?b", "b"));

803 
EXPECT_TRUE
(
M©chRegexAtH—d
("\\\\?b", "\\b"));

806 
TEST
(
M©chRegexAtH—dTe¡
, 
M©chesSequ’tŸÎy
) {

807 
EXPECT_FALSE
(
M©chRegexAtH—d
("ab.*c", "acabc"));

809 
EXPECT_TRUE
(
M©chRegexAtH—d
("ab.*c", "ab-fsc"));

812 
TEST
(
M©chRegexAnywh”eTe¡
, 
R‘uºsF®£Wh’SŒšgIsNuÎ
) {

813 
EXPECT_FALSE
(
M©chRegexAnywh”e
("", 
NULL
));

816 
TEST
(
M©chRegexAnywh”eTe¡
, 
WÜksWh’RegexS¹sW™hC¬‘
) {

817 
EXPECT_FALSE
(
M©chRegexAnywh”e
("^a", "ba"));

818 
EXPECT_FALSE
(
M©chRegexAnywh”e
("^$", "a"));

820 
EXPECT_TRUE
(
M©chRegexAnywh”e
("^a", "ab"));

821 
EXPECT_TRUE
(
M©chRegexAnywh”e
("^", "ab"));

822 
EXPECT_TRUE
(
M©chRegexAnywh”e
("^$", ""));

825 
TEST
(
M©chRegexAnywh”eTe¡
, 
R‘uºsF®£Wh’NoM©ch
) {

826 
EXPECT_FALSE
(
M©chRegexAnywh”e
("a", "bcde123"));

827 
EXPECT_FALSE
(
M©chRegexAnywh”e
("a.+a", "--aa88888888"));

830 
TEST
(
M©chRegexAnywh”eTe¡
, 
R‘uºsTrueWh’M©chšgP»fix
) {

831 
EXPECT_TRUE
(
M©chRegexAnywh”e
("\\w+", "ab1_ - 5"));

832 
EXPECT_TRUE
(
M©chRegexAnywh”e
(".*=", "="));

833 
EXPECT_TRUE
(
M©chRegexAnywh”e
("x.*ab?.*bc", "xaaabc"));

836 
TEST
(
M©chRegexAnywh”eTe¡
, 
R‘uºsTrueWh’M©chšgNÚP»fix
) {

837 
EXPECT_TRUE
(
M©chRegexAnywh”e
("\\w+", "$$$‡b1_ - 5"));

838 
EXPECT_TRUE
(
M©chRegexAnywh”e
("\\.+=", "= ...="));

842 
TEST
(
RETe¡
, 
Im¶ic™CÚ¡ruùÜWÜks
) {

843 cÚ¡ 
RE
 
em±y
("");

844 
EXPECT_STREQ
("", 
em±y
.
·‰”n
());

846 cÚ¡ 
RE
 
sim¶e
("hello");

847 
EXPECT_STREQ
("h–lo", 
sim¶e
.
·‰”n
());

851 
TEST
(
RETe¡
, 
RejeùsInv®idRegex
) {

852 
EXPECT_NONFATAL_FAILURE
({

853 cÚ¡ 
RE
 
nÜm®
(
NULL
);

856 
EXPECT_NONFATAL_FAILURE
({

857 cÚ¡ 
RE
 
nÜm®
(".*(\\w+");

860 
EXPECT_NONFATAL_FAILURE
({

861 cÚ¡ 
RE
 
šv®id
("^?");

866 
TEST
(
RETe¡
, 
FuÎM©chWÜks
) {

867 cÚ¡ 
RE
 
em±y
("");

868 
EXPECT_TRUE
(
RE
::
FuÎM©ch
("", 
em±y
));

869 
EXPECT_FALSE
(
RE
::
FuÎM©ch
("a", 
em±y
));

871 cÚ¡ 
RE
 
»1
("a");

872 
EXPECT_TRUE
(
RE
::
FuÎM©ch
("a", 
»1
));

874 cÚ¡ 
RE
 
»
("a.*z");

875 
EXPECT_TRUE
(
RE
::
FuÎM©ch
("az", 
»
));

876 
EXPECT_TRUE
(
RE
::
FuÎM©ch
("axyz", 
»
));

877 
EXPECT_FALSE
(
RE
::
FuÎM©ch
("baz", 
»
));

878 
EXPECT_FALSE
(
RE
::
FuÎM©ch
("azy", 
»
));

882 
TEST
(
RETe¡
, 
P¬tŸlM©chWÜks
) {

883 cÚ¡ 
RE
 
em±y
("");

884 
EXPECT_TRUE
(
RE
::
P¬tŸlM©ch
("", 
em±y
));

885 
EXPECT_TRUE
(
RE
::
P¬tŸlM©ch
("a", 
em±y
));

887 cÚ¡ 
RE
 
»
("a.*z");

888 
EXPECT_TRUE
(
RE
::
P¬tŸlM©ch
("az", 
»
));

889 
EXPECT_TRUE
(
RE
::
P¬tŸlM©ch
("axyz", 
»
));

890 
EXPECT_TRUE
(
RE
::
P¬tŸlM©ch
("baz", 
»
));

891 
EXPECT_TRUE
(
RE
::
P¬tŸlM©ch
("azy", 
»
));

892 
EXPECT_FALSE
(
RE
::
P¬tŸlM©ch
("zza", 
»
));

897 #ià!
GTEST_OS_WINDOWS_MOBILE


899 
TEST
(
C­tu»Te¡
, 
C­tu»sStdout
) {

900 
C­tu»Stdout
();

901 
årštf
(
¡dout
, "abc");

902 
EXPECT_STREQ
("abc", 
G‘C­tu»dStdout
().
c_¡r
());

904 
C­tu»Stdout
();

905 
årštf
(
¡dout
, "def%cghi", '\0');

906 
EXPECT_EQ
(::
¡d
::
¡ršg
("def\0ghi", 7), ::¡d::¡ršg(
G‘C­tu»dStdout
()));

909 
TEST
(
C­tu»Te¡
, 
C­tu»sStd”r
) {

910 
C­tu»Std”r
();

911 
årštf
(
¡d”r
, "jkl");

912 
EXPECT_STREQ
("jkl", 
G‘C­tu»dStd”r
().
c_¡r
());

914 
C­tu»Std”r
();

915 
årštf
(
¡d”r
, "jkl%cmno", '\0');

916 
EXPECT_EQ
(::
¡d
::
¡ršg
("jkl\0mno", 7), ::¡d::¡ršg(
G‘C­tu»dStd”r
()));

920 
TEST
(
C­tu»Te¡
, 
C­tu»sStdoutAndStd”r
) {

921 
C­tu»Stdout
();

922 
C­tu»Std”r
();

923 
årštf
(
¡dout
, "pqr");

924 
årštf
(
¡d”r
, "stu");

925 
EXPECT_STREQ
("pqr", 
G‘C­tu»dStdout
().
c_¡r
());

926 
EXPECT_STREQ
("¡u", 
G‘C­tu»dStd”r
().
c_¡r
());

929 
TEST
(
C­tu»D—thTe¡
, 
CªnÙR“Á”StdoutC­tu»
) {

930 
C­tu»Stdout
();

931 
EXPECT_DEATH_IF_SUPPORTED
(
C­tu»Stdout
(),

933 
G‘C­tu»dStdout
();

941 
TEST
(
Th»adLoÿlTe¡
, 
DeçuÉCÚ¡ruùÜIn™ŸlizesToDeçuÉV®ues
) {

942 
	gTh»adLoÿl
<> 
	gt1
;

943 
EXPECT_EQ
(0, 
t1
.
g‘
());

945 
	gTh»adLoÿl
<*> 
	gt2
;

946 
EXPECT_TRUE
(
t2
.
g‘
(è=ğ
nuÎ±r
);

949 
TEST
(
Th»adLoÿlTe¡
, 
SšgËP¬amCÚ¡ruùÜIn™ŸlizesToP¬am
) {

950 
	gTh»adLoÿl
<> 
t1
(123);

951 
EXPECT_EQ
(123, 
t1
.
g‘
());

953 
	gi
 = 0;

954 
	gTh»adLoÿl
<*> 
t2
(&
i
);

955 
EXPECT_EQ
(&
i
, 
t2
.
g‘
());

958 şas 
	cNoDeçuÉCÚŒuùÜ
 {

959 
	gpublic
:

960 
ex¶ic™
 
NoDeçuÉCÚŒuùÜ
(const *) {}

961 
NoDeçuÉCÚŒuùÜ
(const NoDefaultContructor&) {}

964 
TEST
(
Th»adLoÿlTe¡
, 
V®ueDeçuÉCÚŒuùÜIsNÙRequœedFÜP¬amV”siÚ
) {

965 
	gTh»adLoÿl
<
	gNoDeçuÉCÚŒuùÜ
> 
b¬
(
NoDeçuÉCÚŒuùÜ
("foo"));

966 
	gb¬
.
poš‹r
();

969 
TEST
(
Th»adLoÿlTe¡
, 
G‘AndPoš‹rR‘uºSameV®ue
) {

970 
	gTh»adLoÿl
<
	g¡d
::
¡ršg
> 
th»ad_loÿl_¡ršg
;

972 
EXPECT_EQ
(
th»ad_loÿl_¡ršg
.
poš‹r
(), &Ñh»ad_loÿl_¡ršg.
g‘
()));

975 
	gth»ad_loÿl_¡ršg
.
£t
("foo");

976 
EXPECT_EQ
(
th»ad_loÿl_¡ršg
.
poš‹r
(), &Ñh»ad_loÿl_¡ršg.
g‘
()));

979 
TEST
(
Th»adLoÿlTe¡
, 
Poš‹rAndCÚ¡Poš‹rR‘uºSameV®ue
) {

980 
	gTh»adLoÿl
<
	g¡d
::
¡ršg
> 
th»ad_loÿl_¡ršg
;

981 cÚ¡ 
	gTh»adLoÿl
<
	g¡d
::
¡ršg
>& 
cÚ¡_th»ad_loÿl_¡ršg
 =

982 
th»ad_loÿl_¡ršg
;

984 
EXPECT_EQ
(
th»ad_loÿl_¡ršg
.
poš‹r
(), 
cÚ¡_th»ad_loÿl_¡ršg
.pointer());

986 
	gth»ad_loÿl_¡ršg
.
£t
("foo");

987 
EXPECT_EQ
(
th»ad_loÿl_¡ršg
.
poš‹r
(), 
cÚ¡_th»ad_loÿl_¡ršg
.pointer());

990 #ià
GTEST_IS_THREADSAFE


992 
AddTwo
(* 
·¿m
è{ *
	g·¿m
 += 2; }

994 
TEST
(
Th»adW™hP¬amTe¡
, 
CÚ¡ruùÜExecu‹sTh»adFunc
) {

995 
	gi
 = 40;

996 
	gTh»adW™hP¬am
<*> 
th»ad
(&
AddTwo
, &
i
, 
nuÎ±r
);

997 
	gth»ad
.
Još
();

998 
EXPECT_EQ
(42, 
i
);

1001 
TEST
(
Mu‹xD—thTe¡
, 
As£¹H–dShouldAs£¹Wh’NÙLocked
) {

1004 
EXPECT_DEATH_IF_SUPPORTED
({

1005 
Mu‹x
 
m
;

1006 { 
Mu‹xLock
 
lock
(&
m
); }

1007 
m
.
As£¹H–d
();

1012 
TEST
(
Mu‹xTe¡
, 
As£¹H–dShouldNÙAs£¹Wh’Locked
) {

1013 
Mu‹x
 
	gm
;

1014 
Mu‹xLock
 
lock
(&
m
);

1015 
	gm
.
As£¹H–d
();

1018 şas 
	cAtomicCouÁ”W™hMu‹x
 {

1019 
	gpublic
:

1020 
ex¶ic™
 
AtomicCouÁ”W™hMu‹x
(
Mu‹x
* 
mu‹x
) :

1021 
v®ue_
(0), 
mu‹x_
(
mu‹x
), 
¿ndom_
(42) {}

1023 
Inüem’t
() {

1024 
Mu‹xLock
 
lock
(
mu‹x_
);

1025 
	g‹mp
 = 
v®ue_
;

1030 #ià
GTEST_HAS_PTHREAD


1034 
±h»ad_mu‹x_t
 
	gmemÜy_b¬r›r_mu‹x
;

1035 
GTEST_CHECK_POSIX_SUCCESS_
(

1036 
±h»ad_mu‹x_š™
(&
memÜy_b¬r›r_mu‹x
, 
nuÎ±r
));

1037 
GTEST_CHECK_POSIX_SUCCESS_
(
±h»ad_mu‹x_lock
(&
memÜy_b¬r›r_mu‹x
));

1039 
SË•Mli£cÚds
(
¡©ic_ÿ¡
<>(
¿ndom_
.
G’”©e
(30)));

1041 
GTEST_CHECK_POSIX_SUCCESS_
(
±h»ad_mu‹x_uÆock
(&
memÜy_b¬r›r_mu‹x
));

1042 
GTEST_CHECK_POSIX_SUCCESS_
(
±h»ad_mu‹x_de¡roy
(&
memÜy_b¬r›r_mu‹x
));

1043 #–ià
GTEST_OS_WINDOWS


1045 vŞ©
LONG
 
	gdummy
 = 0;

1046 ::
IÁ”lockedInüem’t
(&
dummy
);

1047 
SË•Mli£cÚds
(
¡©ic_ÿ¡
<>(
¿ndom_
.
G’”©e
(30)));

1048 ::
IÁ”lockedInüem’t
(&
dummy
);

1053 
	gv®ue_
 = 
‹mp
 + 1;

1055 
v®ue
(ècÚ¡ {  
	gv®ue_
; }

1057 
	g´iv©e
:

1058 vŞ©
v®ue_
;

1059 
Mu‹x
* cÚ¡ 
	gmu‹x_
;

1060 
Rªdom
 
	g¿ndom_
;

1063 
CouÁšgTh»adFunc
(
·œ
<
AtomicCouÁ”W™hMu‹x
*, > 
·¿m
) {

1064 
	gi
 = 0; i < 
	g·¿m
.
	g£cÚd
; ++i)

1065 
	g·¿m
.
	gfœ¡
->
Inüem’t
();

1069 
TEST
(
Mu‹xTe¡
, 
OÆyOÃTh»adCªLockAtATime
) {

1070 
Mu‹x
 
	gmu‹x
;

1071 
AtomicCouÁ”W™hMu‹x
 
locked_couÁ”
(&
mu‹x
);

1073 
	gTh»adW™hP¬am
<
	t·œ
<
	tAtomicCouÁ”W™hMu‹x
*, > > 
	tTh»adTy³
;

1074 cÚ¡ 
	gkCyşeCouÁ
 = 20;

1075 cÚ¡ 
	gkTh»adCouÁ
 = 7;

1076 
	g¡d
::
unique_±r
<
Th»adTy³
> 
couÁšg_th»ads
[
kTh»adCouÁ
];

1077 
NÙifiÿtiÚ
 
	gth»ads_ÿn_¡¬t
;

1080 
	gi
 = 0; i < 
	gkTh»adCouÁ
; ++i) {

1081 
	gcouÁšg_th»ads
[
i
].
»£t
(
Ãw
 
Th»adTy³
(&
CouÁšgTh»adFunc
,

1082 
make_·œ
(&
locked_couÁ”
,

1083 
kCyşeCouÁ
),

1084 &
th»ads_ÿn_¡¬t
));

1086 
	gth»ads_ÿn_¡¬t
.
NÙify
();

1087 
	gi
 = 0; i < 
	gkTh»adCouÁ
; ++i)

1088 
	gcouÁšg_th»ads
[
i
]->
Još
();

1094 
EXPECT_EQ
(
kCyşeCouÁ
 * 
kTh»adCouÁ
, 
locked_couÁ”
.
v®ue
());

1097 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

1098 
RunFromTh»ad
((
func
)(
T
), T 
·¿m
) {

1099 
	gTh»adW™hP¬am
<
	gT
> 
th»ad
(
func
, 
·¿m
, 
nuÎ±r
);

1100 
	gth»ad
.
Još
();

1103 
R‘r›veTh»adLoÿlV®ue
(

1104 
·œ
<
Th»adLoÿl
<
¡d
::
¡ršg
>*, std::¡ršg*> 
·¿m
) {

1105 *
·¿m
.
£cÚd
 =…¬am.
fœ¡
->
g‘
();

1108 
TEST
(
Th»adLoÿlTe¡
, 
P¬am‘”izedCÚ¡ruùÜS‘sDeçuÉ
) {

1109 
	gTh»adLoÿl
<
	g¡d
::
¡ršg
> 
th»ad_loÿl_¡ršg
("foo");

1110 
EXPECT_STREQ
("foo", 
th»ad_loÿl_¡ršg
.
g‘
().
c_¡r
());

1112 
	gth»ad_loÿl_¡ršg
.
£t
("bar");

1113 
EXPECT_STREQ
("b¬", 
th»ad_loÿl_¡ršg
.
g‘
().
c_¡r
());

1115 
	g¡d
::
¡ršg
 
»suÉ
;

1116 
RunFromTh»ad
(&
R‘r›veTh»adLoÿlV®ue
,

1117 
make_·œ
(&
th»ad_loÿl_¡ršg
, &
»suÉ
));

1118 
EXPECT_STREQ
("foo", 
»suÉ
.
c_¡r
());

1123 şas 
	cDe¡ruùÜC®l
 {

1124 
	gpublic
:

1125 
De¡ruùÜC®l
() {

1126 
švoked_
 = 
çl£
;

1127 #ià
GTEST_OS_WINDOWS


1128 
	gwa™_ev’t_
.
Re£t
(::
C»©eEv’t
(
NULL
, 
TRUE
, 
FALSE
, NULL));

1129 
GTEST_CHECK_
(
wa™_ev’t_
.
G‘
(è!ğ
NULL
);

1133 
boŞ
 
CheckDe¡royed
() const {

1134 #ià
GTEST_OS_WINDOWS


1135 ià(::
Wa™FÜSšgËObjeù
(
wa™_ev’t_
.
G‘
(), 1000è!ğ
WAIT_OBJECT_0
)

1136  
çl£
;

1138  
	gšvoked_
;

1141 
R•ÜtDe¡royed
() {

1142 
	gšvoked_
 = 
Œue
;

1143 #ià
GTEST_OS_WINDOWS


1144 ::
S‘Ev’t
(
wa™_ev’t_
.
G‘
());

1148 
	g¡d
::
veùÜ
<
De¡ruùÜC®l
*>& 
Li¡
(è{  *
li¡_
; }

1150 
Re£tLi¡
() {

1151 
size_t
 
	gi
 = 0; i < 
	gli¡_
->
size
(); ++i) {

1152 
d–‘e
 
	gli¡_
->
©
(
i
);

1154 
	gli¡_
->
ş—r
();

1157 
	g´iv©e
:

1158 
boŞ
 
švoked_
;

1159 #ià
GTEST_OS_WINDOWS


1160 
AutoHªdË
 
	gwa™_ev’t_
;

1162 
	g¡d
::
veùÜ
<
De¡ruùÜC®l
*>* cÚ¡ 
li¡_
;

1164 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
De¡ruùÜC®l
);

1167 
	g¡d
::
veùÜ
<
De¡ruùÜC®l
*>* cÚ¡ De¡ruùÜC®l::
li¡_
 =

1168 
Ãw
 
¡d
::
veùÜ
<
De¡ruùÜC®l
*>;

1172 şas 
	cDe¡ruùÜT¿ck”
 {

1173 
	gpublic
:

1174 
De¡ruùÜT¿ck”
(è: 
šdex_
(
G‘NewIndex
()) {}

1175 
De¡ruùÜT¿ck”
(const DestructorTracker& )

1176 : 
šdex_
(
G‘NewIndex
()) {}

1177 ~
De¡ruùÜT¿ck”
() {

1180 
De¡ruùÜC®l
::
Li¡
()[
šdex_
]->
R•ÜtDe¡royed
();

1183 
	g´iv©e
:

1184 
size_t
 
G‘NewIndex
() {

1185 
De¡ruùÜC®l
::
Li¡
().
push_back
(
Ãw
 DestructorCall);

1186  
	gDe¡ruùÜC®l
::
Li¡
().
size
() - 1;

1188 cÚ¡ 
size_t
 
	gšdex_
;

1191 
	gTh»adLoÿl
<
	tDe¡ruùÜT¿ck”
>* 
	tTh»adP¬am
;

1193 
C®lTh»adLoÿlG‘
(
Th»adP¬am
 
th»ad_loÿl_·¿m
) {

1194 
	gth»ad_loÿl_·¿m
->
g‘
();

1199 
TEST
(
Th»adLoÿlTe¡
, 
De¡roysMªagedObjeùFÜOwnTh»adWh’Dyšg
) {

1200 
	gDe¡ruùÜC®l
::
Re£tLi¡
();

1203 
	gTh»adLoÿl
<
	gDe¡ruùÜT¿ck”
> 
	gth»ad_loÿl_Œack”
;

1204 
ASSERT_EQ
(0U, 
De¡ruùÜC®l
::
Li¡
().
size
());

1207 
	gth»ad_loÿl_Œack”
.
g‘
();

1208 
ASSERT_EQ
(1U, 
De¡ruùÜC®l
::
Li¡
().
size
());

1209 
ASSERT_FALSE
(
De¡ruùÜC®l
::
Li¡
()[0]->
CheckDe¡royed
());

1213 
ASSERT_EQ
(1U, 
De¡ruùÜC®l
::
Li¡
().
size
());

1214 
EXPECT_TRUE
(
De¡ruùÜC®l
::
Li¡
()[0]->
CheckDe¡royed
());

1216 
	gDe¡ruùÜC®l
::
Re£tLi¡
();

1221 
TEST
(
Th»adLoÿlTe¡
, 
De¡roysMªagedObjeùAtTh»adEx™
) {

1222 
	gDe¡ruùÜC®l
::
Re£tLi¡
();

1225 
	gTh»adLoÿl
<
	gDe¡ruùÜT¿ck”
> 
	gth»ad_loÿl_Œack”
;

1226 
ASSERT_EQ
(0U, 
De¡ruùÜC®l
::
Li¡
().
size
());

1229 
	gTh»adW™hP¬am
<
	gTh»adP¬am
> 
th»ad
(&
C®lTh»adLoÿlG‘
,

1230 &
th»ad_loÿl_Œack”
, 
nuÎ±r
);

1231 
	gth»ad
.
Još
();

1235 
ASSERT_EQ
(1U, 
De¡ruùÜC®l
::
Li¡
().
size
());

1239 
ASSERT_EQ
(1U, 
De¡ruùÜC®l
::
Li¡
().
size
());

1240 
EXPECT_TRUE
(
De¡ruùÜC®l
::
Li¡
()[0]->
CheckDe¡royed
());

1242 
	gDe¡ruùÜC®l
::
Re£tLi¡
();

1245 
TEST
(
Th»adLoÿlTe¡
, 
Th»adLoÿlMutiÚsAfãùOÆyCu¼’tTh»ad
) {

1246 
	gTh»adLoÿl
<
	g¡d
::
¡ršg
> 
th»ad_loÿl_¡ršg
;

1247 
	gth»ad_loÿl_¡ršg
.
£t
("Foo");

1248 
EXPECT_STREQ
("Foo", 
th»ad_loÿl_¡ršg
.
g‘
().
c_¡r
());

1250 
	g¡d
::
¡ršg
 
»suÉ
;

1251 
RunFromTh»ad
(&
R‘r›veTh»adLoÿlV®ue
,

1252 
make_·œ
(&
th»ad_loÿl_¡ršg
, &
»suÉ
));

1253 
EXPECT_TRUE
(
»suÉ
.
em±y
());

1258 #ià
GTEST_OS_WINDOWS


1259 
TEST
(
WšdowsTy³sTe¡
, 
HANDLEIsVoidSr
) {

1260 
	gSticAs£¹Ty³Eq
<
	gHANDLE
, *>();

1263 #ià
GTEST_OS_WINDOWS_MINGW
 && !
defšed
(
__MINGW64_VERSION_MAJOR
)

1264 
TEST
(
WšdowsTy³sTe¡
, 
_CRITICAL_SECTIONIs_CRITICAL_SECTION
) {

1265 
	gSticAs£¹Ty³Eq
<
	gCRITICAL_SECTION
, 
	g_CRITICAL_SECTION
>();

1268 
TEST
(
WšdowsTy³sTe¡
, 
CRITICAL_SECTIONIs_RTL_CRITICAL_SECTION
) {

1269 
	gSticAs£¹Ty³Eq
<
	gCRITICAL_SECTION
, 
	g_RTL_CRITICAL_SECTION
>();

	@third_party/googletest/googletest/test/googletest-printers-test.cc

35 
	~<®gÜ™hm
>

36 
	~<cùy³
>

37 
	~<c¡dšt
>

38 
	~<c¡ršg
>

39 
	~<deque
>

40 
	~<fÜw¬d_li¡
>

41 
	~<lim™s
>

42 
	~<li¡
>

43 
	~<m­
>

44 
	~<memÜy
>

45 
	~<£t
>

46 
	~<s¡»am
>

47 
	~<¡ršg
>

48 
	~<unÜd”ed_m­
>

49 
	~<unÜd”ed_£t
>

50 
	~<ut™y
>

51 
	~<veùÜ
>

53 
	~"g‹¡/g‹¡-´š‹rs.h
"

54 
	~"g‹¡/g‹¡.h
"

59 
	eAnÚymousEnum
 {

60 
	mkAE1
 = -1,

61 
	mkAE2
 = 1

65 
	eEnumW™houtPrš‹r
 {

66 
	mkEWP1
 = -2,

67 
	mkEWP2
 = 42

71 
	eEnumW™hSŒ—mšg
 {

72 
	mkEWS1
 = 10

75 
	g¡d
::
o¡»am
& 
İ”©Ü
<<(
¡d
::o¡»am& 
os
, 
EnumW™hSŒ—mšg
 
	ge
) {

76  
	gos
 << (
	ge
 =ğ
kEWS1
 ? "kEWS1" : "invalid");

80 
	eEnumW™hPrštTo
 {

81 
	mkEWPT1
 = 1

84 
	$PrštTo
(
EnumW™hPrštTo
 
e
, 
¡d
::
o¡»am
* 
os
) {

85 *
os
 << (
e
 =ğ
kEWPT1
 ? "kEWPT1" : "invalid");

86 
	}
}

89 şas 
	cBigge¡IÁCÚv”tibË
 {

90 
	mpublic
:

91 
İ”©Ü
 ::
‹¡šg
::
š‹º®
::
	$Bigge¡IÁ
() const {  42; }

92 
	}
};

96 şas 
	cP¬’tCÏss
 {};

97 şas 
	cChdCÏssW™hSŒ—mO³¿tÜ
 : 
public
 
P¬’tCÏss
 {};

98 şas 
	cChdCÏssW™houtSŒ—mO³¿tÜ
 : 
public
 
P¬’tCÏss
 {};

99 
	gİ”©Ü
<<(
	g¡d
::
o¡»am
& 
os
, cÚ¡ 
	gP¬’tCÏss
&) {

100 
	gos
 << "ParentClass";

102 
	gİ”©Ü
<<(
	g¡d
::
o¡»am
& 
os
, cÚ¡ 
	gChdCÏssW™hSŒ—mO³¿tÜ
&) {

103 
	gos
 << "ChildClassWithStreamOperator";

107 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

108 şas 
	cUÅršbËTem¶©eInGlob®
 {

109 
	mpublic
:

110 
	$UÅršbËTem¶©eInGlob®
(è: 
	$v®ue_
() {}

111 
´iv©e
:

112 
T
 
v®ue_
;

113 
	}
};

116 şas 
	cSŒ—mabËInGlob®
 {

117 
	mpublic
:

118 
vœtu®
 ~
	$SŒ—mabËInGlob®
() {}

119 
	}
};

121 
šlše
 
	gİ”©Ü
<<(::
¡d
::
o¡»am
& 
os
, cÚ¡ 
	gSŒ—mabËInGlob®
& ) {

122 
	gos
 << "StreamableInGlobal";

125 
	gİ”©Ü
<<(::
¡d
::
o¡»am
& 
os
, cÚ¡ 
	gSŒ—mabËInGlob®
* ) {

126 
	gos
 << "StreamableInGlobal*";

129 
Çme¥aû
 
	gfoo
 {

132 şas 
	cUÅršbËInFoo
 {

133 
	gpublic
:

134 
UÅršbËInFoo
(è: 
z_
(0è{ 
memıy
(
xy_
, "\xEF\x12\x0\x0\x34\xAB\x0\x0", 8); }

135 
z
(ècÚ¡ {  
	gz_
; }

136 
	g´iv©e
:

137 
xy_
[8];

138 
	gz_
;

142 
	sPršbËVŸPrštTo
 {

143 
PršbËVŸPrštTo
(è: 
v®ue
() {}

144 
v®ue
;

147 
	$PrštTo
(cÚ¡ 
PršbËVŸPrštTo
& 
x
, ::
¡d
::
o¡»am
* 
os
) {

148 *
os
 << "PršbËVŸPrštTo: " << 
x
.
v®ue
;

149 
	}
}

152 
	sPoš‹rPršbË
 {

155 ::
¡d
::
o¡»am
& 
İ”©Ü
<<(::¡d::o¡»am& 
os
,

156 cÚ¡ 
	gPoš‹rPršbË
* ) {

157  
	gos
 << "PointerPrintable*";

161 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

162 şas 
	cPršbËVŸPrštToTem¶©e
 {

163 
	gpublic
:

164 
ex¶ic™
 
PršbËVŸPrštToTem¶©e
(cÚ¡ 
T
& 
a_v®ue
è: 
v®ue_
(a_value) {}

166 cÚ¡ 
T
& 
v®ue
(ècÚ¡ {  
v®ue_
; }

167 
	g´iv©e
:

168 
T
 
v®ue_
;

171 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

172 
PrštTo
(cÚ¡ 
PršbËVŸPrštToTem¶©e
<
T
>& 
x
, ::
¡d
::
o¡»am
* 
os
) {

173 *
os
 << "PršbËVŸPrštToTem¶©e: " << 
x
.
v®ue
();

177 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

178 şas 
	cSŒ—mabËTem¶©eInFoo
 {

179 
	gpublic
:

180 
SŒ—mabËTem¶©eInFoo
(è: 
v®ue_
() {}

182 cÚ¡ 
T
& 
v®ue
(ècÚ¡ {  
v®ue_
; }

183 
	g´iv©e
:

184 
T
 
v®ue_
;

187 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

188 
	gšlše
 ::
¡d
::
o¡»am
& 
İ”©Ü
<<(::¡d::o¡»am& 
os
,

189 cÚ¡ 
	gSŒ—mabËTem¶©eInFoo
<
	gT
>& 
	gx
) {

190  
	gos
 << "SŒ—mabËTem¶©eInFoo: " << 
	gx
.
v®ue
();

195 
	sTem¶©edSŒ—mabËInFoo
 {};

197 
	g‹m¶©e
 <
ty³Çme
 
	gOuutSŒ—m
>

198 
	gOuutSŒ—m
& 
	gİ”©Ü
<<(OuutSŒ—m& 
	gos
,

199 cÚ¡ 
	gTem¶©edSŒ—mabËInFoo
& ) {

200 
	gos
 << "TemplatedStreamableInFoo";

201  
	gos
;

207 şas 
	cP©hLike
 {

208 
	gpublic
:

209 
	s™”©Ü
 {

210 
P©hLike
 
	tv®ue_ty³
;

212 
	g™”©Ü
& 
	gİ”©Ü
++();

213 
	gP©hLike
& 
	gİ”©Ü
*();

216 
usšg
 
	gv®ue_ty³
 = ;

217 
usšg
 
	gcÚ¡_™”©Ü
 = 
™”©Ü
;

219 
P©hLike
() {}

221 
™”©Ü
 
begš
() const {  iterator(); }

222 
™”©Ü
 
’d
() const {  iterator(); }

224 
	gä›nd
 ::
¡d
::
o¡»am
& 
İ”©Ü
<<(::¡d::o¡»am& 
os
, cÚ¡ 
	gP©hLike
&) {

225  
	gos
 << "Streamable-PathLike";

231 
Çme¥aû
 
	g‹¡šg
 {

232 
	gÇme¥aû
 {

233 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

234 şas 
	cW¿µ”
 {

235 
	gpublic
:

236 
ex¶ic™
 
W¿µ”
(
T
&& 
v®ue
è: 
v®ue_
(
¡d
::
fÜw¬d
<T>(value)) {}

238 cÚ¡ 
T
& 
v®ue
(ècÚ¡ {  
v®ue_
; }

240 
	g´iv©e
:

241 
T
 
v®ue_
;

246 
Çme¥aû
 
	gš‹º®
 {

247 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

248 
şass
 
	gUniv”§lPrš‹r
<
	gW¿µ”
<
	gT
>> {

249 
	gpublic
:

250 
Pršt
(cÚ¡ 
W¿µ”
<
T
>& 
w
, ::
¡d
::
o¡»am
* 
os
) {

251 *
os
 << "Wrapper(";

252 
Univ”§lPršt
(
w
.
v®ue
(), 
os
);

253 *
	gos
 << ')';

259 
Çme¥aû
 
	gg‹¡_´š‹rs_‹¡
 {

261 
	gusšg
 ::
¡d
::
deque
;

262 
	gusšg
 ::
¡d
::
li¡
;

263 
	gusšg
 ::
¡d
::
make_·œ
;

264 
	gusšg
 ::
¡d
::
m­
;

265 
	gusšg
 ::
¡d
::
muÉim­
;

266 
	gusšg
 ::
¡d
::
muÉi£t
;

267 
	gusšg
 ::
¡d
::
·œ
;

268 
	gusšg
 ::
¡d
::
£t
;

269 
	gusšg
 ::
¡d
::
veùÜ
;

270 
	gusšg
 ::
‹¡šg
::
PrštToSŒšg
;

271 
	gusšg
 ::
‹¡šg
::
š‹º®
::
FÜm©FÜCom·risÚFau»Mes§ge
;

272 
	gusšg
 ::
‹¡šg
::
š‹º®
::
Im¶ic™Ca¡_
;

273 
	gusšg
 ::
‹¡šg
::
š‹º®
::
N©iveA¼ay
;

274 
	gusšg
 ::
‹¡šg
::
š‹º®
::
R–©iÚToSourûReã»nû
;

275 
	gusšg
 ::
‹¡šg
::
š‹º®
::
SŒšgs
;

276 
	gusšg
 ::
‹¡šg
::
š‹º®
::
Univ”§lPršt
;

277 
	gusšg
 ::
‹¡šg
::
š‹º®
::
Univ”§lPrš‹r
;

278 
	gusšg
 ::
‹¡šg
::
š‹º®
::
Univ”§lT”£Pršt
;

279 
	gusšg
 ::
‹¡šg
::
š‹º®
::
Univ”§lT”£PrštTu¶eF›ldsToSŒšgs
;

283 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

284 
	g¡d
::
¡ršg
 
Pršt
(cÚ¡ 
T
& 
v®ue
) {

285 ::
¡d
::
¡ršg¡»am
 
ss
;

286 
	gUniv”§lPrš‹r
<
	gT
>::
Pršt
(
v®ue
, &
ss
);

287  
	gss
.
¡r
();

293 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

294 
	g¡d
::
¡ršg
 
PrštByRef
(cÚ¡ 
T
& 
v®ue
) {

295 ::
¡d
::
¡ršg¡»am
 
ss
;

296 
	gUniv”§lPrš‹r
<
	gT
&>::
Pršt
(
v®ue
, &
ss
);

297  
	gss
.
¡r
();

302 
TEST
(
PrštEnumTe¡
, 
AnÚymousEnum
) {

303 
EXPECT_EQ
("-1", 
Pršt
(
kAE1
));

304 
EXPECT_EQ
("1", 
Pršt
(
kAE2
));

307 
TEST
(
PrštEnumTe¡
, 
EnumW™houtPrš‹r
) {

308 
EXPECT_EQ
("-2", 
Pršt
(
kEWP1
));

309 
EXPECT_EQ
("42", 
Pršt
(
kEWP2
));

312 
TEST
(
PrštEnumTe¡
, 
EnumW™hSŒ—mšg
) {

313 
EXPECT_EQ
("kEWS1", 
Pršt
(
kEWS1
));

314 
EXPECT_EQ
("šv®id", 
Pršt
(
¡©ic_ÿ¡
<
EnumW™hSŒ—mšg
>(0)));

317 
TEST
(
PrštEnumTe¡
, 
EnumW™hPrštTo
) {

318 
EXPECT_EQ
("kEWPT1", 
Pršt
(
kEWPT1
));

319 
EXPECT_EQ
("šv®id", 
Pršt
(
¡©ic_ÿ¡
<
EnumW™hPrštTo
>(0)));

324 
TEST
(
PrštCÏssTe¡
, 
Bigge¡IÁCÚv”tibË
) {

325 
EXPECT_EQ
("42", 
Pršt
(
Bigge¡IÁCÚv”tibË
()));

331 
TEST
(
PrštCh¬Te¡
, 
PÏšCh¬
) {

332 
EXPECT_EQ
("'\\0'", 
Pršt
('\0'));

333 
EXPECT_EQ
("'\\'' (39, 0x27)", 
Pršt
('\''));

334 
EXPECT_EQ
("'\"' (34, 0x22)", 
Pršt
('"'));

335 
EXPECT_EQ
("'?' (63, 0x3F)", 
Pršt
('?'));

336 
EXPECT_EQ
("'\\\\' (92, 0x5C)", 
Pršt
('\\'));

337 
EXPECT_EQ
("'\\a' (7)", 
Pršt
('\a'));

338 
EXPECT_EQ
("'\\b' (8)", 
Pršt
('\b'));

339 
EXPECT_EQ
("'\\f' (12, 0xC)", 
Pršt
('\f'));

340 
EXPECT_EQ
("'\\n' (10, 0xA)", 
Pršt
('\n'));

341 
EXPECT_EQ
("'\\r' (13, 0xD)", 
Pršt
('\r'));

342 
EXPECT_EQ
("'\\t' (9)", 
Pršt
('\t'));

343 
EXPECT_EQ
("'\\v' (11, 0xB)", 
Pršt
('\v'));

344 
EXPECT_EQ
("'\\x7F' (127)", 
Pršt
('\x7F'));

345 
EXPECT_EQ
("'\\xFF' (255)", 
Pršt
('\xFF'));

346 
EXPECT_EQ
("' ' (32, 0x20)", 
Pršt
(' '));

347 
EXPECT_EQ
("'a' (97, 0x61)", 
Pršt
('a'));

351 
TEST
(
PrštCh¬Te¡
, 
SigÃdCh¬
) {

352 
EXPECT_EQ
("'\\0'", 
Pršt
(
¡©ic_ÿ¡
<signed >('\0')));

353 
EXPECT_EQ
("'\\xCE' (-50)",

354 
Pršt
(
¡©ic_ÿ¡
<signed >(-50)));

358 
TEST
(
PrštCh¬Te¡
, 
UnsigÃdCh¬
) {

359 
EXPECT_EQ
("'\\0'", 
Pršt
(
¡©ic_ÿ¡
<>('\0')));

360 
EXPECT_EQ
("'b' (98, 0x62)",

361 
Pršt
(
¡©ic_ÿ¡
<>('b')));

364 
TEST
(
PrštCh¬Te¡
, 
Ch¬16
) {

365 
EXPECT_EQ
("U+0041", 
Pršt
(
u
'A'));

368 
TEST
(
PrštCh¬Te¡
, 
Ch¬32
) {

369 
EXPECT_EQ
("U+0041", 
Pršt
(
U
'A'));

372 #ifdeà
__ıp_ch¬8_t


373 
TEST
(
PrštCh¬Te¡
, 
Ch¬8
) {

374 
EXPECT_EQ
("U+0041", 
Pršt
(
u8
'A'));

381 
TEST
(
PrštButInTy³Te¡
, 
BoŞ
) {

382 
EXPECT_EQ
("çl£", 
Pršt
(
çl£
));

383 
EXPECT_EQ
("Œue", 
Pršt
(
Œue
));

387 
TEST
(
PrštButInTy³Te¡
, 
Wch¬_t
) {

388 
EXPECT_EQ
("L'\\0'", 
Pršt
(
L
'\0'));

389 
EXPECT_EQ
("L'\\'' (39, 0x27)", 
Pršt
(
L
'\''));

390 
EXPECT_EQ
("L'\"' (34, 0x22)", 
Pršt
(
L
'"'));

391 
EXPECT_EQ
("L'?' (63, 0x3F)", 
Pršt
(
L
'?'));

392 
EXPECT_EQ
("L'\\\\' (92, 0x5C)", 
Pršt
(
L
'\\'));

393 
EXPECT_EQ
("L'\\a' (7)", 
Pršt
(
L
'\a'));

394 
EXPECT_EQ
("L'\\b' (8)", 
Pršt
(
L
'\b'));

395 
EXPECT_EQ
("L'\\f' (12, 0xC)", 
Pršt
(
L
'\f'));

396 
EXPECT_EQ
("L'\\n' (10, 0xA)", 
Pršt
(
L
'\n'));

397 
EXPECT_EQ
("L'\\r' (13, 0xD)", 
Pršt
(
L
'\r'));

398 
EXPECT_EQ
("L'\\t' (9)", 
Pršt
(
L
'\t'));

399 
EXPECT_EQ
("L'\\v' (11, 0xB)", 
Pršt
(
L
'\v'));

400 
EXPECT_EQ
("L'\\x7F' (127)", 
Pršt
(
L
'\x7F'));

401 
EXPECT_EQ
("L'\\xFF' (255)", 
Pršt
(
L
'\xFF'));

402 
EXPECT_EQ
("L' ' (32, 0x20)", 
Pršt
(
L
' '));

403 
EXPECT_EQ
("L'a' (97, 0x61)", 
Pršt
(
L
'a'));

404 
EXPECT_EQ
("L'\\x576' (1398)", 
Pršt
(
¡©ic_ÿ¡
<
wch¬_t
>(0x576)));

405 
EXPECT_EQ
("L'\\xC74D' (51021)", 
Pršt
(
¡©ic_ÿ¡
<
wch¬_t
>(0xC74D)));

409 
TEST
(
PrštTy³SizeTe¡
, 
Wch¬_t
) {

410 
EXPECT_LT
((
wch¬_t
), (
št64_t
));

414 
TEST
(
PrštButInTy³Te¡
, 
IÁeg”
) {

415 
EXPECT_EQ
("'\\xFF' (255)", 
Pršt
(
¡©ic_ÿ¡
<>(255)));

416 
EXPECT_EQ
("'\\x80' (-128)", 
Pršt
(
¡©ic_ÿ¡
<signed >(-128)));

417 
EXPECT_EQ
("65535", 
Pršt
(
¡d
::
num”ic_lim™s
<
ušt16_t
>::
max
()));

418 
EXPECT_EQ
("-32768", 
Pršt
(
¡d
::
num”ic_lim™s
<
št16_t
>::
mš
()));

419 
EXPECT_EQ
("4294967295",

420 
Pršt
(
¡d
::
num”ic_lim™s
<
ušt32_t
>::
max
()));

421 
EXPECT_EQ
("-2147483648",

422 
Pršt
(
¡d
::
num”ic_lim™s
<
št32_t
>::
mš
()));

423 
EXPECT_EQ
("18446744073709551615",

424 
Pršt
(
¡d
::
num”ic_lim™s
<
ušt64_t
>::
max
()));

425 
EXPECT_EQ
("-9223372036854775808",

426 
Pršt
(
¡d
::
num”ic_lim™s
<
št64_t
>::
mš
()));

427 #ifdeà
__ıp_ch¬8_t


428 
EXPECT_EQ
("U+0000",

429 
Pršt
(
¡d
::
num”ic_lim™s
<
ch¬8_t
>::
mš
()));

430 
EXPECT_EQ
("U+00FF",

431 
Pršt
(
¡d
::
num”ic_lim™s
<
ch¬8_t
>::
max
()));

433 
EXPECT_EQ
("U+0000",

434 
Pršt
(
¡d
::
num”ic_lim™s
<
ch¬16_t
>::
mš
()));

435 
EXPECT_EQ
("U+FFFF",

436 
Pršt
(
¡d
::
num”ic_lim™s
<
ch¬16_t
>::
max
()));

437 
EXPECT_EQ
("U+0000",

438 
Pršt
(
¡d
::
num”ic_lim™s
<
ch¬32_t
>::
mš
()));

439 
EXPECT_EQ
("U+FFFFFFFF",

440 
Pršt
(
¡d
::
num”ic_lim™s
<
ch¬32_t
>::
max
()));

444 
TEST
(
PrštButInTy³Te¡
, 
Size_t
) {

445 
EXPECT_EQ
("1", 
Pršt
(('a')));

446 #ià!
GTEST_OS_WINDOWS


448 
EXPECT_EQ
("-2", 
Pršt
(
¡©ic_ÿ¡
<
ssize_t
>(-2)));

453 
TEST
(
PrštButInTy³Te¡
, 
FlßtšgPošts
) {

454 
EXPECT_EQ
("1.5", 
Pršt
(1.5f));

455 
EXPECT_EQ
("-2.5", 
Pršt
(-2.5));

461 
	g¡d
::
¡ršg
 
PrštPoš‹r
(cÚ¡ * 
p
) {

462 ::
¡d
::
¡ršg¡»am
 
ex³ùed_»suÉ_¡»am
;

463 
	gex³ùed_»suÉ_¡»am
 << 
	gp
;

464  
	gex³ùed_»suÉ_¡»am
.
¡r
();

470 
TEST
(
PrštCSŒšgTe¡
, 
CÚ¡
) {

471 cÚ¡ * 
	gp
 = "World";

472 
EXPECT_EQ
(
PrštPoš‹r
(
p
è+ "…oštšgØ\"WÜld\"", 
Pršt
(p));

476 
TEST
(
PrštCSŒšgTe¡
, 
NÚCÚ¡
) {

477 
	gp
[] = "Hi";

478 
EXPECT_EQ
(
PrštPoš‹r
(
p
) + "…ointingo \"Hi\"",

479 
Pršt
(
¡©ic_ÿ¡
<*>(
p
)));

483 
TEST
(
PrštCSŒšgTe¡
, 
NuÎ
) {

484 cÚ¡ * 
	gp
 = 
nuÎ±r
;

485 
EXPECT_EQ
("NULL", 
Pršt
(
p
));

489 
TEST
(
PrštCSŒšgTe¡
, 
Esÿ³sPrİ”ly
) {

490 cÚ¡ * 
	gp
 = "'\"?\\\a\b\f\n\r\t\v\x7F\xFF‡";

491 
EXPECT_EQ
(
PrštPoš‹r
(
p
) + "…ointingo \"'\\\"?\\\\\\a\\b\\f"

493 
Pršt
(
p
));

496 #ifdeà
__ıp_ch¬8_t


498 
TEST
(
PrštU8SŒšgTe¡
, 
CÚ¡
) {

499 cÚ¡ 
ch¬8_t
* 
	gp
 = 
u8
"ç•Œ";

500 
EXPECT_EQ
(
PrštPoš‹r
(
p
è+ "…oštšgØu8\"\\xE7\\x95\\x8C\"", 
Pršt
(p));

504 
TEST
(
PrštU8SŒšgTe¡
, 
NÚCÚ¡
) {

505 
ch¬8_t
 
	gp
[] = 
u8
"ä¸–";

506 
EXPECT_EQ
(
PrštPoš‹r
(
p
) + "…ointingo u8\"\\xE4\\xB8\\x96\"",

507 
Pršt
(
¡©ic_ÿ¡
<
ch¬8_t
*>(
p
)));

511 
TEST
(
PrštU8SŒšgTe¡
, 
NuÎ
) {

512 cÚ¡ 
ch¬8_t
* 
	gp
 = 
nuÎ±r
;

513 
EXPECT_EQ
("NULL", 
Pršt
(
p
));

517 
TEST
(
PrštU8SŒšgTe¡
, 
Esÿ³sPrİ”ly
) {

518 cÚ¡ 
ch¬8_t
* 
	gp
 = 
u8
"'\"?\\\a\b\f\n\r\t\v\x7F\xFF hello ä¸–ç•Œ";

519 
EXPECT_EQ
(
PrštPoš‹r
(
p
) +

522 
Pršt
(
p
));

527 
TEST
(
PrštU16SŒšgTe¡
, 
CÚ¡
) {

528 cÚ¡ 
ch¬16_t
* 
	gp
 = 
u
"ç•Œ";

529 
EXPECT_EQ
(
PrštPoš‹r
(
p
è+ "…oštšgØu\"\\x754C\"", 
Pršt
(p));

533 
TEST
(
PrštU16SŒšgTe¡
, 
NÚCÚ¡
) {

534 
ch¬16_t
 
	gp
[] = 
u
"ä¸–";

535 
EXPECT_EQ
(
PrštPoš‹r
(
p
) + "…ointingo u\"\\x4E16\"",

536 
Pršt
(
¡©ic_ÿ¡
<
ch¬16_t
*>(
p
)));

540 
TEST
(
PrštU16SŒšgTe¡
, 
NuÎ
) {

541 cÚ¡ 
ch¬16_t
* 
	gp
 = 
nuÎ±r
;

542 
EXPECT_EQ
("NULL", 
Pršt
(
p
));

546 
TEST
(
PrštU16SŒšgTe¡
, 
Esÿ³sPrİ”ly
) {

547 cÚ¡ 
ch¬16_t
* 
	gp
 = 
u
"'\"?\\\a\b\f\n\r\t\v\x7F\xFF hello ä¸–ç•Œ";

548 
EXPECT_EQ
(
PrštPoš‹r
(
p
) +

551 
Pršt
(
p
));

555 
TEST
(
PrštU32SŒšgTe¡
, 
CÚ¡
) {

556 cÚ¡ 
ch¬32_t
* 
	gp
 = 
U
"ğŸ—ºï¸";

557 
EXPECT_EQ
(
PrštPoš‹r
(
p
è+ "…oštšgØU\"\\x1F5FA\\xFE0F\"", 
Pršt
(p));

561 
TEST
(
PrštU32SŒšgTe¡
, 
NÚCÚ¡
) {

562 
ch¬32_t
 
	gp
[] = 
U
"ğŸŒŒ";

563 
EXPECT_EQ
(
PrštPoš‹r
(
p
) + "…ointingo U\"\\x1F30C\"",

564 
Pršt
(
¡©ic_ÿ¡
<
ch¬32_t
*>(
p
)));

568 
TEST
(
PrštU32SŒšgTe¡
, 
NuÎ
) {

569 cÚ¡ 
ch¬32_t
* 
	gp
 = 
nuÎ±r
;

570 
EXPECT_EQ
("NULL", 
Pršt
(
p
));

574 
TEST
(
PrštU32SŒšgTe¡
, 
Esÿ³sPrİ”ly
) {

575 cÚ¡ 
ch¬32_t
* 
	gp
 = 
U
"'\"?\\\a\b\f\n\r\t\v\x7F\xFF hello ğŸ—ºï¸";

576 
EXPECT_EQ
(
PrštPoš‹r
(
p
) +

579 
Pršt
(
p
));

588 #ià!
defšed
(
_MSC_VER
è|| defšed(
_NATIVE_WCHAR_T_DEFINED
)

591 
TEST
(
PrštWideCSŒšgTe¡
, 
CÚ¡
) {

592 cÚ¡ 
wch¬_t
* 
	gp
 = 
L
"World";

593 
EXPECT_EQ
(
PrštPoš‹r
(
p
è+ "…oštšgØL\"WÜld\"", 
Pršt
(p));

597 
TEST
(
PrštWideCSŒšgTe¡
, 
NÚCÚ¡
) {

598 
wch¬_t
 
	gp
[] = 
L
"Hi";

599 
EXPECT_EQ
(
PrštPoš‹r
(
p
) + "…ointingo L\"Hi\"",

600 
Pršt
(
¡©ic_ÿ¡
<
wch¬_t
*>(
p
)));

604 
TEST
(
PrštWideCSŒšgTe¡
, 
NuÎ
) {

605 cÚ¡ 
wch¬_t
* 
	gp
 = 
nuÎ±r
;

606 
EXPECT_EQ
("NULL", 
Pršt
(
p
));

610 
TEST
(
PrštWideCSŒšgTe¡
, 
Esÿ³sPrİ”ly
) {

611 cÚ¡ 
wch¬_t
 
	gs
[] = {'\'', '"', '?', '\\', '\a', '\b', '\f', '\n', '\r',

613 
EXPECT_EQ
(
PrštPoš‹r
(
s
) + "…ointingo L\"'\\\"?\\\\\\a\\b\\f"

615 
Pršt
(
¡©ic_ÿ¡
<cÚ¡ 
wch¬_t
*>(
s
)));

622 
TEST
(
PrštCh¬Poš‹rTe¡
, 
SigÃdCh¬
) {

623 sigÃd * 
	gp
 = 
»š‹½»t_ÿ¡
<signed *>(0x1234);

624 
EXPECT_EQ
(
PrštPoš‹r
(
p
), 
Pršt
(p));

625 
	gp
 = 
nuÎ±r
;

626 
EXPECT_EQ
("NULL", 
Pršt
(
p
));

630 
TEST
(
PrštCh¬Poš‹rTe¡
, 
CÚ¡SigÃdCh¬
) {

631 sigÃd * 
	gp
 = 
»š‹½»t_ÿ¡
<signed *>(0x1234);

632 
EXPECT_EQ
(
PrštPoš‹r
(
p
), 
Pršt
(p));

633 
	gp
 = 
nuÎ±r
;

634 
EXPECT_EQ
("NULL", 
Pršt
(
p
));

638 
TEST
(
PrštCh¬Poš‹rTe¡
, 
UnsigÃdCh¬
) {

639 * 
	gp
 = 
»š‹½»t_ÿ¡
<*>(0x1234);

640 
EXPECT_EQ
(
PrštPoš‹r
(
p
), 
Pršt
(p));

641 
	gp
 = 
nuÎ±r
;

642 
EXPECT_EQ
("NULL", 
Pršt
(
p
));

646 
TEST
(
PrštCh¬Poš‹rTe¡
, 
CÚ¡UnsigÃdCh¬
) {

647 cÚ¡ * 
	gp
 = 
»š‹½»t_ÿ¡
<const *>(0x1234);

648 
EXPECT_EQ
(
PrštPoš‹r
(
p
), 
Pršt
(p));

649 
	gp
 = 
nuÎ±r
;

650 
EXPECT_EQ
("NULL", 
Pršt
(
p
));

656 
TEST
(
PrštPoš‹rToButInTy³Te¡
, 
BoŞ
) {

657 
boŞ
* 
	gp
 = 
»š‹½»t_ÿ¡
<bool*>(0xABCD);

658 
EXPECT_EQ
(
PrštPoš‹r
(
p
), 
Pršt
(p));

659 
	gp
 = 
nuÎ±r
;

660 
EXPECT_EQ
("NULL", 
Pršt
(
p
));

664 
TEST
(
PrštPoš‹rToButInTy³Te¡
, 
Void
) {

665 * 
	gp
 = 
»š‹½»t_ÿ¡
<*>(0xABCD);

666 
EXPECT_EQ
(
PrštPoš‹r
(
p
), 
Pršt
(p));

667 
	gp
 = 
nuÎ±r
;

668 
EXPECT_EQ
("NULL", 
Pršt
(
p
));

672 
TEST
(
PrštPoš‹rToButInTy³Te¡
, 
CÚ¡Void
) {

673 cÚ¡ * 
	gp
 = 
»š‹½»t_ÿ¡
<const *>(0xABCD);

674 
EXPECT_EQ
(
PrštPoš‹r
(
p
), 
Pršt
(p));

675 
	gp
 = 
nuÎ±r
;

676 
EXPECT_EQ
("NULL", 
Pršt
(
p
));

680 
TEST
(
PrštPoš‹rToPoš‹rTe¡
, 
IÁPoš‹rPoš‹r
) {

681 ** 
	gp
 = 
»š‹½»t_ÿ¡
<**>(0xABCD);

682 
EXPECT_EQ
(
PrštPoš‹r
(
p
), 
Pršt
(p));

683 
	gp
 = 
nuÎ±r
;

684 
EXPECT_EQ
("NULL", 
Pršt
(
p
));

689 
MyFunùiÚ
() {}

691 
TEST
(
PrštPoš‹rTe¡
, 
NÚMemb”FunùiÚPoš‹r
) {

696 
EXPECT_EQ
(

697 
PrštPoš‹r
(
»š‹½»t_ÿ¡
<const *>(

698 
»š‹½»t_ÿ¡
<
š‹º®
::
Bigge¡IÁ
>(&
MyFunùiÚ
))),

699 
Pršt
(&
MyFunùiÚ
));

700 (*
	gp
)(
	gboŞ
èğ
NULL
;

701 
EXPECT_EQ
("NULL", 
Pršt
(
p
));

706 
	g‹m¶©e
 <
ty³Çme
 
	gSŒšgTy³
>

707 
As£¹iÚResuÉ
 
HasP»fix
(cÚ¡ 
SŒšgTy³
& 
¡r
, cÚ¡ SŒšgTy³& 
´efix
) {

708 ià(
	g¡r
.
fšd
(
´efix
, 0) == 0)

709  
As£¹iÚSucûss
();

711 cÚ¡ 
boŞ
 
	gis_wide_¡ršg
 = (
´efix
[0]) > 1;

712 cÚ¡ * cÚ¡ 
	gbegš_¡ršg_quÙe
 = 
is_wide_¡ršg
 ? "L\"" : "\"";

713  
As£¹iÚFau»
()

714 << 
	gbegš_¡ršg_quÙe
 << 
	g´efix
 << "\" is‚ot‡…refix of "

715 << 
	gbegš_¡ršg_quÙe
 << 
	g¡r
 << "\"\n";

723 
	sFoo
 {

724 
	gpublic
:

725 
vœtu®
 ~
Foo
() {}

726 
MyM‘hod
(
x
) {  x + 1; }

727 
vœtu®
 
MyVœtu®M‘hod
() {  'a'; }

729 
	gv®ue
;

732 
TEST
(
PrštPoš‹rTe¡
, 
Memb”V¬ŸbËPoš‹r
) {

733 
EXPECT_TRUE
(
HasP»fix
(
Pršt
(&
Foo
::
v®ue
),

734 
Pršt
((&
Foo
::
v®ue
)) + "-byte object "));

735 
	gFoo
::*
p
 = 
NULL
;

736 
EXPECT_TRUE
(
HasP»fix
(
Pršt
(
p
),

737 
Pršt
((
p
)) + "-byte object "));

744 
TEST
(
PrštPoš‹rTe¡
, 
Memb”FunùiÚPoš‹r
) {

745 
EXPECT_TRUE
(
HasP»fix
(
Pršt
(&
Foo
::
MyM‘hod
),

746 
Pršt
((&
Foo
::
MyM‘hod
)) + "-byte object "));

747 
EXPECT_TRUE
(

748 
HasP»fix
(
Pršt
(&
Foo
::
MyVœtu®M‘hod
),

749 
Pršt
(((&
Foo
::
MyVœtu®M‘hod
))) + "-byte object "));

750 (
	gFoo
::*
p
)(èğ
NULL
;

751 
EXPECT_TRUE
(
HasP»fix
(
Pršt
(
p
),

752 
Pršt
((
p
)) + "-byte object "));

759 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
size_t
 
	gN
>

760 
	g¡d
::
¡ršg
 
PrštA¼ayH–³r
(
T
 (&
a
)[
N
]) {

761  
Pršt
(
a
);

765 
TEST
(
PrštA¼ayTe¡
, 
OÃDim’siÚ®A¼ay
) {

766 
	ga
[5] = { 1, 2, 3, 4, 5 };

767 
EXPECT_EQ
("{ 1, 2, 3, 4, 5 }", 
PrštA¼ayH–³r
(
a
));

771 
TEST
(
PrštA¼ayTe¡
, 
TwoDim’siÚ®A¼ay
) {

772 
	ga
[2][5] = {

776 
EXPECT_EQ
("{ { 1, 2, 3, 4, 5 }, { 6, 7, 8, 9, 0 } }", 
PrštA¼ayH–³r
(
a
));

780 
TEST
(
PrštA¼ayTe¡
, 
CÚ¡A¼ay
) {

781 cÚ¡ 
boŞ
 
	ga
[1] = { 
çl£
 };

782 
EXPECT_EQ
("{ f®£ }", 
PrštA¼ayH–³r
(
a
));

786 
TEST
(
PrštA¼ayTe¡
, 
Ch¬A¼ayW™hNoT”mš©šgNul
) {

788 
	ga
[] = { 'H', '\0', 'i' };

789 
EXPECT_EQ
("\"H\\0i\" (nØ‹rmš©šg NUL)", 
PrštA¼ayH–³r
(
a
));

793 
TEST
(
PrštA¼ayTe¡
, 
Ch¬A¼ayW™hT”mš©šgNul
) {

794 cÚ¡ 
	ga
[] = "\0Hi";

795 
EXPECT_EQ
("\"\\0Hi\"", 
PrštA¼ayH–³r
(
a
));

798 #ifdeà
__ıp_ch¬8_t


800 
TEST
(
PrštA¼ayTe¡
, 
Ch¬8A¼ayW™hNoT”mš©šgNul
) {

802 cÚ¡ 
ch¬8_t
 
	ga
[] = {
u8
'H', u8'\0', u8'i'};

803 
EXPECT_EQ
("u8\"H\\0i\" (nØ‹rmš©šg NUL)", 
PrštA¼ayH–³r
(
a
));

807 
TEST
(
PrštA¼ayTe¡
, 
Ch¬8A¼ayW™hT”mš©šgNul
) {

808 cÚ¡ 
ch¬8_t
 
	ga
[] = 
u8
"\0ä¸–ç•Œ";

809 
EXPECT_EQ
(

811 
PrštA¼ayH–³r
(
a
));

816 
TEST
(
PrštA¼ayTe¡
, 
Ch¬16A¼ayW™hNoT”mš©šgNul
) {

818 cÚ¡ 
ch¬16_t
 
	ga
[] = {
u
'ã“', u'\0', u'ã‚“', u'ã«', u'ã¡', u'ã¯'};

819 
EXPECT_EQ
("u\"\\x3053\\0\\x3093\\x306B\\x3061\\x306F\" (noerminating NUL)",

820 
PrštA¼ayH–³r
(
a
));

824 
TEST
(
PrštA¼ayTe¡
, 
Ch¬16A¼ayW™hT”mš©šgNul
) {

825 cÚ¡ 
ch¬16_t
 
	ga
[] = 
u
"\0ã“ã‚“ã«ã¡ã¯";

826 
EXPECT_EQ
("u\"\\0\\x3053\\x3093\\x306B\\x3061\\x306F\"", 
PrštA¼ayH–³r
(
a
));

830 
TEST
(
PrštA¼ayTe¡
, 
Ch¬32A¼ayW™hNoT”mš©šgNul
) {

832 cÚ¡ 
ch¬32_t
 
	ga
[] = {
U
'ğŸ‘‹', U'\0', U'ğŸŒŒ'};

833 
EXPECT_EQ
("U\"\\x1F44B\\0\\x1F30C\" (noerminating NUL)",

834 
PrštA¼ayH–³r
(
a
));

838 
TEST
(
PrštA¼ayTe¡
, 
Ch¬32A¼ayW™hT”mš©šgNul
) {

839 cÚ¡ 
ch¬32_t
 
	ga
[] = 
U
"\0ğŸ‘‹ğŸŒŒ";

840 
EXPECT_EQ
("U\"\\0\\x1F44B\\x1F30C\"", 
PrštA¼ayH–³r
(
a
));

844 
TEST
(
PrštA¼ayTe¡
, 
WCh¬A¼ayW™hNoT”mš©šgNul
) {

846 cÚ¡ 
wch¬_t
 
	ga
[] = {
L
'H', L'\0', L'i'};

847 
EXPECT_EQ
("L\"H\\0i\" (nØ‹rmš©šg NUL)", 
PrštA¼ayH–³r
(
a
));

851 
TEST
(
PrštA¼ayTe¡
, 
WCh¬A¼ayW™hT”mš©šgNul
) {

852 cÚ¡ 
wch¬_t
 
	ga
[] = 
L
"\0Hi";

853 
EXPECT_EQ
("L\"\\0Hi\"", 
PrštA¼ayH–³r
(
a
));

857 
TEST
(
PrštA¼ayTe¡
, 
ObjeùA¼ay
) {

858 
	g¡d
::
¡ršg
 
a
[3] = {"Hi", "Hello", "Ni hao"};

859 
EXPECT_EQ
("{ \"Hi\", \"H–lo\", \"N˜hao\" }", 
PrštA¼ayH–³r
(
a
));

863 
TEST
(
PrštA¼ayTe¡
, 
BigA¼ay
) {

864 
	ga
[100] = { 1, 2, 3 };

865 
EXPECT_EQ
("{ 1, 2, 3, 0, 0, 0, 0, 0, ..., 0, 0, 0, 0, 0, 0, 0, 0 }",

866 
PrštA¼ayH–³r
(
a
));

872 
TEST
(
PrštSŒšgTe¡
, 
SŒšgInStdName¥aû
) {

873 cÚ¡ 
	gs
[] = "'\"?\\\a\b\f\n\0\r\t\v\x7F\xFF‡";

874 cÚ¡ ::
¡d
::
¡ršg
 
¡r
(
s
, (s));

875 
EXPECT_EQ
("\"'\\\"?\\\\\\a\\b\\f\\n\\0\\r\\t\\v\\x7F\\xFF‡\\0\"",

876 
Pršt
(
¡r
));

879 
TEST
(
PrštSŒšgTe¡
, 
SŒšgAmbiguousHex
) {

884 
EXPECT_EQ
("\"0\\x12\" \"3\"", 
Pršt
(::
¡d
::
¡ršg
("0\x12" "3")));

886 
EXPECT_EQ
("\"mm\\x6\" \"bªªas\"", 
Pršt
(::
¡d
::
¡ršg
("mm\x6" "bananas")));

888 
EXPECT_EQ
("\"NOM\\x6\" \"BANANA\"", 
Pršt
(::
¡d
::
¡ršg
("NOM\x6" "BANANA")));

890 
EXPECT_EQ
("\"!\\x5-!\"", 
Pršt
(::
¡d
::
¡ršg
("!\x5-!")));

894 #ià
GTEST_HAS_STD_WSTRING


896 
TEST
(
PrštWideSŒšgTe¡
, 
SŒšgInStdName¥aû
) {

897 cÚ¡ 
wch¬_t
 
	gs
[] = 
L
"'\"?\\\a\b\f\n\0\r\t\v\xD3\x576\x8D3\xC74D‡";

898 cÚ¡ ::
¡d
::
w¡ršg
 
¡r
(
s
, (s)/(
wch¬_t
));

899 
EXPECT_EQ
("L\"'\\\"?\\\\\\a\\b\\f\\n\\0\\r\\t\\v"

901 
Pršt
(
¡r
));

904 
TEST
(
PrštWideSŒšgTe¡
, 
SŒšgAmbiguousHex
) {

906 
EXPECT_EQ
("L\"0\\x12\" L\"3\"", 
Pršt
(::
¡d
::
w¡ršg
(
L
"0\x12" L"3")));

907 
EXPECT_EQ
("L\"mm\\x6\" L\"bananas\"",

908 
Pršt
(::
¡d
::
w¡ršg
(
L
"mm\x6" L"bananas")));

909 
EXPECT_EQ
("L\"NOM\\x6\" L\"BANANA\"",

910 
Pršt
(::
¡d
::
w¡ršg
(
L
"NOM\x6" L"BANANA")));

911 
EXPECT_EQ
("L\"!\\x5-!\"", 
Pršt
(::
¡d
::
w¡ršg
(
L
"!\x5-!")));

915 #ifdeà
__ıp_ch¬8_t


916 
TEST
(
PrštSŒšgTe¡
, 
U8SŒšg
) {

917 
	g¡d
::
u8¡ršg
 
¡r
 = 
u8
"Hello, ä¸–ç•Œ";

918 
EXPECT_EQ
(
¡r
, str);

919 
EXPECT_EQ
("u8\"H–lo, \\xE4\\xB8\\x96\\xE7\\x95\\x8C\"", 
Pršt
(
¡r
));

923 
TEST
(
PrštSŒšgTe¡
, 
U16SŒšg
) {

924 
	g¡d
::
u16¡ršg
 
¡r
 = 
u
"Hello, ä¸–ç•Œ";

925 
EXPECT_EQ
(
¡r
, str);

926 
EXPECT_EQ
("u\"H–lo, \\x4E16\\x754C\"", 
Pršt
(
¡r
));

929 
TEST
(
PrštSŒšgTe¡
, 
U32SŒšg
) {

930 
	g¡d
::
u32¡ršg
 
¡r
 = 
U
"Hello, ğŸ—ºï¸";

931 
EXPECT_EQ
(
¡r
, str);

932 
EXPECT_EQ
("U\"H–lo, \\x1F5FA\\xFE0F\"", 
Pršt
(
¡r
));

941 şas 
	cAÎowsG’”icSŒ—mšg
 {};

943 
	g‹m¶©e
 <
ty³Çme
 
	gCh¬
,y³Çm
	gCh¬T¿™s
>

944 
	g¡d
::
basic_o¡»am
<
Ch¬
, 
	gCh¬T¿™s
>& 
	gİ”©Ü
<<(

945 
	g¡d
::
basic_o¡»am
<
Ch¬
, 
	gCh¬T¿™s
>& 
	gos
,

946 cÚ¡ 
	gAÎowsG’”icSŒ—mšg
& ) {

947  
	gos
 << "AllowsGenericStreaming";

950 
TEST
(
PrštTy³W™hG’”icSŒ—mšgTe¡
, 
NÚTem¶©eTy³
) {

951 
AÎowsG’”icSŒ—mšg
 
	ga
;

952 
EXPECT_EQ
("AÎowsG’”icSŒ—mšg", 
Pršt
(
a
));

957 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

958 şas 
	cAÎowsG’”icSŒ—mšgTem¶©e
 {};

960 
	g‹m¶©e
 <
ty³Çme
 
	gCh¬
,y³Çm
	gCh¬T¿™s
,y³Çm
	gT
>

961 
	g¡d
::
basic_o¡»am
<
Ch¬
, 
	gCh¬T¿™s
>& 
	gİ”©Ü
<<(

962 
	g¡d
::
basic_o¡»am
<
Ch¬
, 
	gCh¬T¿™s
>& 
	gos
,

963 cÚ¡ 
	gAÎowsG’”icSŒ—mšgTem¶©e
<
	gT
>& ) {

964  
	gos
 << "AllowsGenericStreamingTemplate";

967 
TEST
(
PrštTy³W™hG’”icSŒ—mšgTe¡
, 
Tem¶©eTy³
) {

968 
	gAÎowsG’”icSŒ—mšgTem¶©e
<> 
	ga
;

969 
EXPECT_EQ
("AÎowsG’”icSŒ—mšgTem¶©e", 
Pršt
(
a
));

975 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

976 şas 
	cAÎowsG’”icSŒ—mšgAndIm¶ic™CÚv”siÚTem¶©e
 {

977 
	gpublic
:

978 
İ”©Ü
 
boŞ
(ècÚ¡ {  
çl£
; }

981 
	g‹m¶©e
 <
ty³Çme
 
	gCh¬
,y³Çm
	gCh¬T¿™s
,y³Çm
	gT
>

982 
	g¡d
::
basic_o¡»am
<
Ch¬
, 
	gCh¬T¿™s
>& 
	gİ”©Ü
<<(

983 
	g¡d
::
basic_o¡»am
<
Ch¬
, 
	gCh¬T¿™s
>& 
	gos
,

984 cÚ¡ 
	gAÎowsG’”icSŒ—mšgAndIm¶ic™CÚv”siÚTem¶©e
<
	gT
>& ) {

985  
	gos
 << "AllowsGenericStreamingAndImplicitConversionTemplate";

988 
TEST
(
PrštTy³W™hG’”icSŒ—mšgTe¡
, 
Ty³Im¶ic™lyCÚv”tibË
) {

989 
	gAÎowsG’”icSŒ—mšgAndIm¶ic™CÚv”siÚTem¶©e
<> 
	ga
;

990 
EXPECT_EQ
("AÎowsG’”icSŒ—mšgAndIm¶ic™CÚv”siÚTem¶©e", 
Pršt
(
a
));

993 #ià
GTEST_INTERNAL_HAS_STRING_VIEW


997 
TEST
(
PrštSŒšgV›wTe¡
, 
Sim¶eSŒšgV›w
) {

998 cÚ¡ 
	gš‹º®
::
SŒšgV›w
 
¥
 = "Hello";

999 
EXPECT_EQ
("\"H–lo\"", 
Pršt
(
¥
));

1002 
TEST
(
PrštSŒšgV›wTe¡
, 
UÅršbËCh¬aù”s
) {

1003 cÚ¡ 
	g¡r
[] = "NUL (\0)‡nd \r\t";

1004 cÚ¡ 
	gš‹º®
::
SŒšgV›w
 
¥
(
¡r
, (str) - 1);

1005 
EXPECT_EQ
("\"NUL (\\0èªd \\r\\t\"", 
Pršt
(
¥
));

1012 
TEST
(
PrštSCÚš”Te¡
, 
Em±yDeque
) {

1013 
	gdeque
<> 
	gem±y
;

1014 
EXPECT_EQ
("{}", 
Pršt
(
em±y
));

1017 
TEST
(
PrštSCÚš”Te¡
, 
NÚEm±yDeque
) {

1018 
	gdeque
<> 
	gnÚ_em±y
;

1019 
	gnÚ_em±y
.
push_back
(1);

1020 
	gnÚ_em±y
.
push_back
(3);

1021 
EXPECT_EQ
("{ 1, 3 }", 
Pršt
(
nÚ_em±y
));

1025 
TEST
(
PrštSCÚš”Te¡
, 
OÃEËm’tHashM­
) {

1026 ::
¡d
::
unÜd”ed_m­
<, > 
	gm­1
;

1027 
	gm­1
[1] = 'a';

1028 
EXPECT_EQ
("{ (1, 'a' (97, 0x61)è}", 
Pršt
(
m­1
));

1031 
TEST
(
PrštSCÚš”Te¡
, 
HashMuÉiM­
) {

1032 ::
¡d
::
unÜd”ed_muÉim­
<, 
	gboŞ
> 
	gm­1
;

1033 
	gm­1
.
š£¹
(
make_·œ
(5, 
Œue
));

1034 
	gm­1
.
š£¹
(
make_·œ
(5, 
çl£
));

1037 cÚ¡ 
	g¡d
::
¡ršg
 
»suÉ
 = 
Pršt
(
m­1
);

1038 
EXPECT_TRUE
(
»suÉ
 == "{ (5,rue), (5, false) }" ||

1039 
»suÉ
 == "{ (5, false), (5,rue) }")

1040 << " wh”Pršt(m­1è»tuº \"" << 
»suÉ
 << "\".";

1045 
TEST
(
PrštSCÚš”Te¡
, 
HashS‘
) {

1046 ::
¡d
::
unÜd”ed_£t
<> 
£t1
;

1047 
	g£t1
.
š£¹
(1);

1048 
EXPECT_EQ
("{ 1 }", 
Pršt
(
£t1
));

1051 
TEST
(
PrštSCÚš”Te¡
, 
HashMuÉiS‘
) {

1052 cÚ¡ 
	gkSize
 = 5;

1053 
	ga
[
kSize
] = { 1, 1, 2, 5, 1 };

1054 ::
¡d
::
unÜd”ed_muÉi£t
<> 
£t1
(
a
,‡ + 
kSize
);

1057 cÚ¡ 
	g¡d
::
¡ršg
 
»suÉ
 = 
Pršt
(
£t1
);

1058 cÚ¡ 
	g¡d
::
¡ršg
 
ex³ùed_·‰”n
 = "{ d, d, d, d, d }";

1062 
ASSERT_EQ
(
ex³ùed_·‰”n
.
Ëngth
(), 
»suÉ
.length());

1063 
	g¡d
::
veùÜ
<> 
numb”s
;

1064 
size_t
 
	gi
 = 0; i !ğ
»suÉ
.
Ëngth
(); i++) {

1065 ià(
	gex³ùed_·‰”n
[
i
] == 'd') {

1066 
ASSERT_NE
(
isdig™
(
¡©ic_ÿ¡
<>(
»suÉ
[
i
])), 0);

1067 
	gnumb”s
.
push_back
(
»suÉ
[
i
] - '0');

1069 
EXPECT_EQ
(
ex³ùed_·‰”n
[
i
], 
»suÉ
[i]) << " where„esult is "

1070 << 
	g»suÉ
;

1075 
	g¡d
::
sÜt
(
numb”s
.
begš
(),‚umb”s.
’d
());

1076 
	g¡d
::
sÜt
(
a
,‡ + 
kSize
);

1077 
EXPECT_TRUE
(
¡d
::
equ®
(
a
,‡ + 
kSize
, 
numb”s
.
begš
()));

1081 
TEST
(
PrštSCÚš”Te¡
, 
Li¡
) {

1082 cÚ¡ 
	g¡d
::
¡ršg
 
a
[] = {"hello", "world"};

1083 cÚ¡ 
	gli¡
<
	g¡d
::
¡ršg
> 
¡ršgs
(
a
,‡ + 2);

1084 
EXPECT_EQ
("{ \"h–lo\", \"wÜld\" }", 
Pršt
(
¡ršgs
));

1087 
TEST
(
PrštSCÚš”Te¡
, 
M­
) {

1088 
	gm­
<, 
	gboŞ
> 
	gm­1
;

1089 
	gm­1
[1] = 
Œue
;

1090 
	gm­1
[5] = 
çl£
;

1091 
	gm­1
[3] = 
Œue
;

1092 
EXPECT_EQ
("{ (1,rue), (3,rue), (5, f®£è}", 
Pršt
(
m­1
));

1095 
TEST
(
PrštSCÚš”Te¡
, 
MuÉiM­
) {

1096 
	gmuÉim­
<
	gboŞ
, > 
	gm­1
;

1103 
	gm­1
.
š£¹
(
·œ
<cÚ¡ 
boŞ
, >(
Œue
, 0));

1104 
	gm­1
.
š£¹
(
·œ
<cÚ¡ 
boŞ
, >(
Œue
, 1));

1105 
	gm­1
.
š£¹
(
·œ
<cÚ¡ 
boŞ
, >(
çl£
, 2));

1106 
EXPECT_EQ
("{ (çl£, 2), (Œue, 0), (Œue, 1è}", 
Pršt
(
m­1
));

1109 
TEST
(
PrštSCÚš”Te¡
, 
S‘
) {

1110 cÚ¡ 
	ga
[] = { 3, 0, 5 };

1111 
	g£t
<> 
£t1
(
a
,‡ + 3);

1112 
EXPECT_EQ
("{ 0, 3, 5 }", 
Pršt
(
£t1
));

1115 
TEST
(
PrštSCÚš”Te¡
, 
MuÉiS‘
) {

1116 cÚ¡ 
	ga
[] = { 1, 1, 2, 5, 1 };

1117 
	gmuÉi£t
<> 
£t1
(
a
,‡ + 5);

1118 
EXPECT_EQ
("{ 1, 1, 1, 2, 5 }", 
Pršt
(
£t1
));

1122 
TEST
(
PrštSCÚš”Te¡
, 
SšglyLškedLi¡
) {

1123 
	ga
[] = { 9, 2, 8 };

1124 cÚ¡ 
	g¡d
::
fÜw¬d_li¡
<> 
šts
(
a
,‡ + 3);

1125 
EXPECT_EQ
("{ 9, 2, 8 }", 
Pršt
(
šts
));

1128 
TEST
(
PrštSCÚš”Te¡
, 
Paœ
) {

1129 
	g·œ
<cÚ¡ 
	gboŞ
, > 
p
(
Œue
, 5);

1130 
EXPECT_EQ
("Ñrue, 5)", 
Pršt
(
p
));

1133 
TEST
(
PrštSCÚš”Te¡
, 
VeùÜ
) {

1134 
	gveùÜ
<> 
	gv
;

1135 
	gv
.
push_back
(1);

1136 
	gv
.
push_back
(2);

1137 
EXPECT_EQ
("{ 1, 2 }", 
Pršt
(
v
));

1140 
TEST
(
PrštSCÚš”Te¡
, 
LÚgSequ’û
) {

1141 cÚ¡ 
	ga
[100] = { 1, 2, 3 };

1142 cÚ¡ 
	gveùÜ
<> 
v
(
a
,‡ + 100);

1143 
EXPECT_EQ
("{ 1, 2, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, "

1144 "0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ... }", 
Pršt
(
v
));

1147 
TEST
(
PrštSCÚš”Te¡
, 
Ne¡edCÚš”
) {

1148 cÚ¡ 
	ga1
[] = { 1, 2 };

1149 cÚ¡ 
	ga2
[] = { 3, 4, 5 };

1150 cÚ¡ 
	gli¡
<> 
l1
(
a1
,‡1 + 2);

1151 cÚ¡ 
	gli¡
<> 
l2
(
a2
,‡2 + 3);

1153 
	gveùÜ
<
	gli¡
<> > 
	gv
;

1154 
	gv
.
push_back
(
l1
);

1155 
	gv
.
push_back
(
l2
);

1156 
EXPECT_EQ
("{ { 1, 2 }, { 3, 4, 5 } }", 
Pršt
(
v
));

1159 
TEST
(
PrštSCÚš”Te¡
, 
OÃDim’siÚ®N©iveA¼ay
) {

1160 cÚ¡ 
	ga
[3] = { 1, 2, 3 };

1161 
	gN©iveA¼ay
<> 
b
(
a
, 3, 
R–©iÚToSourûReã»nû
());

1162 
EXPECT_EQ
("{ 1, 2, 3 }", 
Pršt
(
b
));

1165 
TEST
(
PrštSCÚš”Te¡
, 
TwoDim’siÚ®N©iveA¼ay
) {

1166 cÚ¡ 
	ga
[2][3] = { { 1, 2, 3 }, { 4, 5, 6 } };

1167 
	gN©iveA¼ay
<[3]> 
b
(
a
, 2, 
R–©iÚToSourûReã»nû
());

1168 
EXPECT_EQ
("{ { 1, 2, 3 }, { 4, 5, 6 } }", 
Pršt
(
b
));

1173 
	s™”©Ü
 {

1174 
	gx
;

1177 
TEST
(
PrštSCÚš”Te¡
, 
I‹¿tÜ
) {

1178 
™”©Ü
 
	g™
 = {};

1179 
EXPECT_EQ
("1-by‹ objeù <00>", 
Pršt
(
™
));

1184 
	scÚ¡_™”©Ü
 {

1185 
	gx
;

1188 
TEST
(
PrštSCÚš”Te¡
, 
CÚ¡I‹¿tÜ
) {

1189 
cÚ¡_™”©Ü
 
	g™
 = {};

1190 
EXPECT_EQ
("1-by‹ objeù <00>", 
Pršt
(
™
));

1196 
TEST
(
PrštStdTu¶eTe¡
, 
V¬iousSizes
) {

1197 ::
¡d
::
tu¶e
<> 
t0
;

1198 
EXPECT_EQ
("()", 
Pršt
(
t0
));

1200 ::
¡d
::
tu¶e
<> 
t1
(5);

1201 
EXPECT_EQ
("(5)", 
Pršt
(
t1
));

1203 ::
¡d
::
tu¶e
<, 
	gboŞ
> 
t2
('a', 
Œue
);

1204 
EXPECT_EQ
("('a' (97, 0x61),rue)", 
Pršt
(
t2
));

1206 ::
¡d
::
tu¶e
<
boŞ
, , > 
t3
(
çl£
, 2, 3);

1207 
EXPECT_EQ
("(çl£, 2, 3)", 
Pršt
(
t3
));

1209 ::
¡d
::
tu¶e
<
boŞ
, , , > 
t4
(
çl£
, 2, 3, 4);

1210 
EXPECT_EQ
("(çl£, 2, 3, 4)", 
Pršt
(
t4
));

1212 cÚ¡ * cÚ¡ 
	g¡r
 = "8";

1213 ::
¡d
::
tu¶e
<
boŞ
, , , 
	gšt32_t
, 
	gšt64_t
, , ,

1214 cÚ¡ *, *, 
	g¡d
::
¡ršg
>

1215 
t10
(
çl£
, 'a', 
¡©ic_ÿ¡
<>(3), 4, 5, 1.5F, -2.5, 
¡r
,

1216 
nuÎ±r
, "10");

1217 
EXPECT_EQ
("(çl£, 'a' (97, 0x61), 3, 4, 5, 1.5, -2.5, " + 
PrštPoš‹r
(
¡r
) +

1219 
Pršt
(
t10
));

1223 
TEST
(
PrštStdTu¶eTe¡
, 
Ne¡edTu¶e
) {

1224 ::
¡d
::
tu¶e
< ::¡d::tu¶e<, 
	gboŞ
>, > 
Ã¡ed
(

1225 ::
¡d
::
make_tu¶e
(5, 
Œue
), 'a');

1226 
EXPECT_EQ
("((5,rue), 'a' (97, 0x61))", 
Pršt
(
Ã¡ed
));

1229 
TEST
(
PrštNuÎ±rT
, 
Basic
) {

1230 
EXPECT_EQ
("ÒuÎ±r)", 
Pršt
(
nuÎ±r
));

1233 
TEST
(
PrštReã»nûW¿µ”
, 
PršbË
) {

1234 
	gx
 = 5;

1235 
EXPECT_EQ
("@" + 
PrštPoš‹r
(&
x
è+ " 5", 
Pršt
(
¡d
::
»f
(x)));

1236 
EXPECT_EQ
("@" + 
PrštPoš‹r
(&
x
è+ " 5", 
Pršt
(
¡d
::
üef
(x)));

1239 
TEST
(
PrštReã»nûW¿µ”
, 
UÅršbË
) {

1240 ::
foo
::
UÅršbËInFoo
 
up
;

1241 
EXPECT_EQ
(

1242 "@" + 
PrštPoš‹r
(&
up
) +

1244 
Pršt
(
¡d
::
»f
(
up
)));

1245 
EXPECT_EQ
(

1246 "@" + 
PrštPoš‹r
(&
up
) +

1248 
Pršt
(
¡d
::
üef
(
up
)));

1254 
TEST
(
PrštUÅršbËTy³Te¡
, 
InGlob®Name¥aû
) {

1255 
EXPECT_EQ
("1-byte object <00>",

1256 
Pršt
(
UÅršbËTem¶©eInGlob®
<>()));

1260 
TEST
(
PrštUÅršbËTy³Te¡
, 
InU£rName¥aû
) {

1261 
EXPECT_EQ
("16-byte object <EF-12 00-00 34-AB 00-00 00-00 00-00 00-00 00-00>",

1262 
Pršt
(::
foo
::
UÅršbËInFoo
()));

1267 
	sBig
 {

1268 
Big
(è{ 
mem£t
(
¬¿y
, 0, (array)); }

1269 
	g¬¿y
[257];

1272 
TEST
(
PrštUÅr™abËTy³Te¡
, 
BigObjeù
) {

1273 
EXPECT_EQ
("257-byte object <00-00 00-00 00-00 00-00 00-00 00-00 "

1280 
Pršt
(
Big
()));

1286 
TEST
(
PrštSŒ—mabËTy³Te¡
, 
InGlob®Name¥aû
) {

1287 
SŒ—mabËInGlob®
 
	gx
;

1288 
EXPECT_EQ
("SŒ—mabËInGlob®", 
Pršt
(
x
));

1289 
EXPECT_EQ
("SŒ—mabËInGlob®*", 
Pršt
(&
x
));

1293 
TEST
(
PrštSŒ—mabËTy³Te¡
, 
Tem¶©eTy³InU£rName¥aû
) {

1294 
EXPECT_EQ
("StreamableTemplateInFoo: 0",

1295 
Pršt
(::
foo
::
SŒ—mabËTem¶©eInFoo
<>()));

1298 
TEST
(
PrštSŒ—mabËTy³Te¡
, 
Ty³InU£rName¥aûW™hTem¶©edSŒ—mO³¿tÜ
) {

1299 
EXPECT_EQ
("TemplatedStreamableInFoo",

1300 
Pršt
(::
foo
::
Tem¶©edSŒ—mabËInFoo
()));

1303 
TEST
(
PrštSŒ—mabËTy³Te¡
, 
SubşassU£sSu³rşassSŒ—mO³¿tÜ
) {

1304 
P¬’tCÏss
 
	g·»Á
;

1305 
ChdCÏssW™hSŒ—mO³¿tÜ
 
	gchd_¡»am
;

1306 
ChdCÏssW™houtSŒ—mO³¿tÜ
 
	gchd_no_¡»am
;

1307 
EXPECT_EQ
("P¬’tCÏss", 
Pršt
(
·»Á
));

1308 
EXPECT_EQ
("ChdCÏssW™hSŒ—mO³¿tÜ", 
Pršt
(
chd_¡»am
));

1309 
EXPECT_EQ
("P¬’tCÏss", 
Pršt
(
chd_no_¡»am
));

1314 
TEST
(
PrštSŒ—mabËTy³Te¡
, 
P©hLikeInU£rName¥aû
) {

1315 ::
foo
::
P©hLike
 
x
;

1316 
EXPECT_EQ
("SŒ—mabË-P©hLike", 
Pršt
(
x
));

1317 cÚ¡ ::
foo
::
P©hLike
 
cx
;

1318 
EXPECT_EQ
("SŒ—mabË-P©hLike", 
Pršt
(
cx
));

1322 
TEST
(
PrštPršbËTy³Te¡
, 
InU£rName¥aû
) {

1323 
EXPECT_EQ
("PrintableViaPrintTo: 0",

1324 
Pršt
(::
foo
::
PršbËVŸPrštTo
()));

1329 
TEST
(
PrštPršbËTy³Te¡
, 
Poš‹rInU£rName¥aû
) {

1330 ::
foo
::
Poš‹rPršbË
 
x
;

1331 
EXPECT_EQ
("Poš‹rPršbË*", 
Pršt
(&
x
));

1335 
TEST
(
PrštPršbËTy³Te¡
, 
Tem¶©eInU£rName¥aû
) {

1336 
EXPECT_EQ
("PrintableViaPrintToTemplate: 5",

1337 
Pršt
(::
foo
::
PršbËVŸPrštToTem¶©e
<>(5)));

1342 
TEST
(
PrštReã»nûTe¡
, 
PrštsAdd»ssAndV®ue
) {

1343 
	gn
 = 5;

1344 
EXPECT_EQ
("@" + 
PrštPoš‹r
(&
n
è+ " 5", 
PrštByRef
(n));

1346 
	ga
[2][3] = {

1350 
EXPECT_EQ
("@" + 
PrštPoš‹r
(
a
) + " { { 0, 1, 2 }, { 3, 4, 5 } }",

1351 
PrštByRef
(
a
));

1353 cÚ¡ ::
foo
::
UÅršbËInFoo
 
x
;

1354 
EXPECT_EQ
("@" + 
PrštPoš‹r
(&
x
) + " 16-byte object "

1356 
PrštByRef
(
x
));

1361 
TEST
(
PrštReã»nûTe¡
, 
HªdËsFunùiÚPoš‹r
) {

1362 (*
	gå
)(
	gn
èğ&
MyFunùiÚ
;

1363 cÚ¡ 
	g¡d
::
¡ršg
 
å_poš‹r_¡ršg
 =

1364 
PrštPoš‹r
(
»š‹½»t_ÿ¡
<cÚ¡ *>(&
å
));

1369 cÚ¡ 
	g¡d
::
¡ršg
 
å_¡ršg
 = 
PrštPoš‹r
(
»š‹½»t_ÿ¡
<const *>(

1370 
»š‹½»t_ÿ¡
<
š‹º®
::
Bigge¡IÁ
>(
å
)));

1371 
EXPECT_EQ
("@" + 
å_poš‹r_¡ršg
 + " " + 
å_¡ršg
,

1372 
PrštByRef
(
å
));

1377 
TEST
(
PrštReã»nûTe¡
, 
HªdËsMemb”FunùiÚPoš‹r
) {

1378 (
	gFoo
::*
p
)(
ch
èğ&
Foo
::
MyM‘hod
;

1379 
EXPECT_TRUE
(
HasP»fix
(

1380 
PrštByRef
(
p
),

1381 "@" + 
PrštPoš‹r
(
»š‹½»t_ÿ¡
<cÚ¡ *>(&
p
)) + " " +

1382 
Pršt
((
p
)) + "-byte object "));

1384 (
	gFoo
::*
p2
)(
n
èğ&
Foo
::
MyVœtu®M‘hod
;

1385 
EXPECT_TRUE
(
HasP»fix
(

1386 
PrštByRef
(
p2
),

1387 "@" + 
PrštPoš‹r
(
»š‹½»t_ÿ¡
<cÚ¡ *>(&
p2
)) + " " +

1388 
Pršt
((
p2
)) + "-byte object "));

1393 
TEST
(
PrštReã»nûTe¡
, 
HªdËsMemb”V¬ŸbËPoš‹r
) {

1394 
	gFoo
::*
p
 = &
Foo
::
v®ue
;

1395 
EXPECT_TRUE
(
HasP»fix
(

1396 
PrštByRef
(
p
),

1397 "@" + 
PrštPoš‹r
(&
p
è+ " " + 
Pršt
((p)) + "-byte object "));

1405 
TEST
(
FÜm©FÜCom·risÚFau»Mes§geTe¡
, 
WÜksFÜSÿÏr
) {

1406 
EXPECT_STREQ
("123",

1407 
FÜm©FÜCom·risÚFau»Mes§ge
(123, 124).
c_¡r
());

1411 
TEST
(
FÜm©FÜCom·risÚFau»Mes§geTe¡
, 
WÜksFÜNÚCh¬Poš‹r
) {

1412 
	gn
 = 0;

1413 
EXPECT_EQ
(
PrštPoš‹r
(&
n
),

1414 
FÜm©FÜCom·risÚFau»Mes§ge
(&
n
, &n).
c_¡r
());

1418 
TEST
(
FÜm©FÜCom·risÚFau»Mes§geTe¡
, 
FÜm©sNÚCh¬A¼ayAsPoš‹r
) {

1421 
	gn
[] = { 1, 2, 3 };

1422 
EXPECT_EQ
(
PrštPoš‹r
(
n
),

1423 
FÜm©FÜCom·risÚFau»Mes§ge
(
n
,‚).
c_¡r
());

1431 
TEST
(
FÜm©FÜCom·risÚFau»Mes§geTe¡
, 
WÜksFÜCh¬Poš‹rVsPoš‹r
) {

1438 cÚ¡ * 
	gs
 = "hello";

1439 
EXPECT_EQ
(
PrštPoš‹r
(
s
),

1440 
FÜm©FÜCom·risÚFau»Mes§ge
(
s
, s).
c_¡r
());

1443 
	gch
 = 'a';

1444 
EXPECT_EQ
(
PrštPoš‹r
(&
ch
),

1445 
FÜm©FÜCom·risÚFau»Mes§ge
(&
ch
, &ch).
c_¡r
());

1449 
TEST
(
FÜm©FÜCom·risÚFau»Mes§geTe¡
, 
WÜksFÜWCh¬Poš‹rVsPoš‹r
) {

1456 cÚ¡ 
wch¬_t
* 
	gs
 = 
L
"hello";

1457 
EXPECT_EQ
(
PrštPoš‹r
(
s
),

1458 
FÜm©FÜCom·risÚFau»Mes§ge
(
s
, s).
c_¡r
());

1461 
wch¬_t
 
	gch
 = 
L
'a';

1462 
EXPECT_EQ
(
PrštPoš‹r
(&
ch
),

1463 
FÜm©FÜCom·risÚFau»Mes§ge
(&
ch
, &ch).
c_¡r
());

1470 
TEST
(
FÜm©FÜCom·risÚFau»Mes§geTe¡
, 
WÜksFÜCh¬Poš‹rVsStdSŒšg
) {

1471 cÚ¡ * 
	gs
 = "hello \"world";

1472 
EXPECT_STREQ
("\"hello \\\"world\"",

1473 
FÜm©FÜCom·risÚFau»Mes§ge
(
s
, ::
¡d
::
¡ršg
()).
c_¡r
());

1476 
	g¡r
[] = "hi\1";

1477 * 
	gp
 = 
¡r
;

1478 
EXPECT_STREQ
("\"hi\\x1\"",

1479 
FÜm©FÜCom·risÚFau»Mes§ge
(
p
, ::
¡d
::
¡ršg
()).
c_¡r
());

1482 #ià
GTEST_HAS_STD_WSTRING


1484 
TEST
(
FÜm©FÜCom·risÚFau»Mes§geTe¡
, 
WÜksFÜWCh¬Poš‹rVsStdWSŒšg
) {

1485 cÚ¡ 
wch¬_t
* 
	gs
 = 
L
"hi \"world";

1486 
EXPECT_STREQ
("L\"hi \\\"world\"",

1487 
FÜm©FÜCom·risÚFau»Mes§ge
(
s
, ::
¡d
::
w¡ršg
()).
c_¡r
());

1490 
wch¬_t
 
	g¡r
[] = 
L
"hi\1";

1491 
wch¬_t
* 
	gp
 = 
¡r
;

1492 
EXPECT_STREQ
("L\"hi\\x1\"",

1493 
FÜm©FÜCom·risÚFau»Mes§ge
(
p
, ::
¡d
::
w¡ršg
()).
c_¡r
());

1502 
TEST
(
FÜm©FÜCom·risÚFau»Mes§geTe¡
, 
WÜksFÜCh¬A¼ayVsPoš‹r
) {

1503 
	g¡r
[] = "hi \"world\"";

1504 * 
	gp
 = 
nuÎ±r
;

1505 
EXPECT_EQ
(
PrštPoš‹r
(
¡r
),

1506 
FÜm©FÜCom·risÚFau»Mes§ge
(
¡r
, 
p
).
c_¡r
());

1510 
TEST
(
FÜm©FÜCom·risÚFau»Mes§geTe¡
, 
WÜksFÜCh¬A¼ayVsCh¬A¼ay
) {

1511 cÚ¡ 
	g¡r
[] = "hi \"world\"";

1512 
EXPECT_EQ
(
PrštPoš‹r
(
¡r
),

1513 
FÜm©FÜCom·risÚFau»Mes§ge
(
¡r
, sŒ).
c_¡r
());

1517 
TEST
(
FÜm©FÜCom·risÚFau»Mes§geTe¡
, 
WÜksFÜWCh¬A¼ayVsPoš‹r
) {

1518 
wch¬_t
 
	g¡r
[] = 
L
"hi \"world\"";

1519 
wch¬_t
* 
	gp
 = 
nuÎ±r
;

1520 
EXPECT_EQ
(
PrštPoš‹r
(
¡r
),

1521 
FÜm©FÜCom·risÚFau»Mes§ge
(
¡r
, 
p
).
c_¡r
());

1525 
TEST
(
FÜm©FÜCom·risÚFau»Mes§geTe¡
, 
WÜksFÜWCh¬A¼ayVsWCh¬A¼ay
) {

1526 cÚ¡ 
wch¬_t
 
	g¡r
[] = 
L
"hi \"world\"";

1527 
EXPECT_EQ
(
PrštPoš‹r
(
¡r
),

1528 
FÜm©FÜCom·risÚFau»Mes§ge
(
¡r
, sŒ).
c_¡r
());

1535 
TEST
(
FÜm©FÜCom·risÚFau»Mes§geTe¡
, 
WÜksFÜCh¬A¼ayVsStdSŒšg
) {

1536 cÚ¡ 
	g¡r
[] = "hi \"world\"";

1537 
EXPECT_STREQ
("\"hi \\\"world\\\"\"",

1538 
FÜm©FÜCom·risÚFau»Mes§ge
(
¡r
, ::
¡d
::
¡ršg
()).
c_¡r
());

1541 #ià
GTEST_HAS_STD_WSTRING


1543 
TEST
(
FÜm©FÜCom·risÚFau»Mes§geTe¡
, 
WÜksFÜWCh¬A¼ayVsStdWSŒšg
) {

1544 cÚ¡ 
wch¬_t
 
	g¡r
[] = 
L
"hi \"w\0rld\"";

1545 
EXPECT_STREQ
(

1548 
FÜm©FÜCom·risÚFau»Mes§ge
(
¡r
, ::
¡d
::
w¡ršg
()).
c_¡r
());

1555 
	#EXPECT_PRINT_TO_STRING_
(
v®ue
, 
ex³ùed_¡ršg
) \

1556 
	`EXPECT_TRUE
(
	`PrštToSŒšg
(
v®ue
è=ğ(
ex³ùed_¡ršg
)) \

1557 << " wh”" #v®u"…ršt a " << (
	`PrštToSŒšg
(
v®ue
))

	)

1559 
TEST
(
PrštToSŒšgTe¡
, 
WÜksFÜSÿÏr
) {

1560 
EXPECT_PRINT_TO_STRING_
(123, "123");

1563 
TEST
(
PrštToSŒšgTe¡
, 
WÜksFÜPoš‹rToCÚ¡Ch¬
) {

1564 cÚ¡ * 
	gp
 = "hello";

1565 
EXPECT_PRINT_TO_STRING_
(
p
, "\"hello\"");

1568 
TEST
(
PrštToSŒšgTe¡
, 
WÜksFÜPoš‹rToNÚCÚ¡Ch¬
) {

1569 
	gs
[] = "hello";

1570 * 
	gp
 = 
s
;

1571 
EXPECT_PRINT_TO_STRING_
(
p
, "\"hello\"");

1574 
TEST
(
PrštToSŒšgTe¡
, 
Esÿ³sFÜPoš‹rToCÚ¡Ch¬
) {

1575 cÚ¡ * 
	gp
 = "hello\n";

1576 
EXPECT_PRINT_TO_STRING_
(
p
, "\"hello\\n\"");

1579 
TEST
(
PrštToSŒšgTe¡
, 
Esÿ³sFÜPoš‹rToNÚCÚ¡Ch¬
) {

1580 
	gs
[] = "hello\1";

1581 * 
	gp
 = 
s
;

1582 
EXPECT_PRINT_TO_STRING_
(
p
, "\"hello\\x1\"");

1585 
TEST
(
PrštToSŒšgTe¡
, 
WÜksFÜA¼ay
) {

1586 
	gn
[3] = { 1, 2, 3 };

1587 
EXPECT_PRINT_TO_STRING_
(
n
, "{ 1, 2, 3 }");

1590 
TEST
(
PrštToSŒšgTe¡
, 
WÜksFÜCh¬A¼ay
) {

1591 
	gs
[] = "hello";

1592 
EXPECT_PRINT_TO_STRING_
(
s
, "\"hello\"");

1595 
TEST
(
PrštToSŒšgTe¡
, 
WÜksFÜCh¬A¼ayW™hEmbeddedNul
) {

1596 cÚ¡ 
	g¡r_w™h_nul
[] = "hello\0 world";

1597 
EXPECT_PRINT_TO_STRING_
(
¡r_w™h_nul
, "\"hello\\0 world\"");

1599 
	gmubË_¡r_w™h_nul
[] = "hello\0 world";

1600 
EXPECT_PRINT_TO_STRING_
(
mubË_¡r_w™h_nul
, "\"hello\\0 world\"");

1603 
TEST
(
PrštToSŒšgTe¡
, 
CÚšsNÚL©š
) {

1605 
	g¡d
::
¡ršg
 
nÚ_ascii_¡r
 = ::
¡d
::string("ì˜¤ì „ 4:30");

1606 
EXPECT_PRINT_TO_STRING_
(
nÚ_ascii_¡r
,

1609 
	gnÚ_ascii_¡r
 = ::
¡d
::
¡ršg
("From Ã¤ â€” áº‘");

1610 
EXPECT_PRINT_TO_STRING_
(
nÚ_ascii_¡r
,

1615 
TEST
(
IsV®idUTF8Te¡
, 
IÎFÜmedUTF8
) {

1620 cÚ¡ *cÚ¡ 
	gkTe¡d©a
[][2] = {

1670 
	gi
 = 0; i < ((
	gkTe¡d©a
)/(kTestdata[0])); ++i) {

1671 
EXPECT_PRINT_TO_STRING_
(
kTe¡d©a
[
i
][0], kTestdata[i][1]);

1675 #undeà
EXPECT_PRINT_TO_STRING_


1677 
TEST
(
Univ”§lT”£PrštTe¡
, 
WÜksFÜNÚReã»nû
) {

1678 ::
¡d
::
¡ršg¡»am
 
ss
;

1679 
Univ”§lT”£Pršt
(123, &
ss
);

1680 
EXPECT_EQ
("123", 
ss
.
¡r
());

1683 
TEST
(
Univ”§lT”£PrštTe¡
, 
WÜksFÜReã»nû
) {

1684 cÚ¡ & 
	gn
 = 123;

1685 ::
¡d
::
¡ršg¡»am
 
ss
;

1686 
Univ”§lT”£Pršt
(
n
, &
ss
);

1687 
EXPECT_EQ
("123", 
ss
.
¡r
());

1690 
TEST
(
Univ”§lT”£PrštTe¡
, 
WÜksFÜCSŒšg
) {

1691 cÚ¡ * 
	gs1
 = "abc";

1692 ::
¡d
::
¡ršg¡»am
 
ss1
;

1693 
Univ”§lT”£Pršt
(
s1
, &
ss1
);

1694 
EXPECT_EQ
("\"abc\"", 
ss1
.
¡r
());

1696 * 
	gs2
 = 
cÚ¡_ÿ¡
<*>(
s1
);

1697 ::
¡d
::
¡ršg¡»am
 
ss2
;

1698 
Univ”§lT”£Pršt
(
s2
, &
ss2
);

1699 
EXPECT_EQ
("\"abc\"", 
ss2
.
¡r
());

1701 cÚ¡ * 
	gs3
 = 
nuÎ±r
;

1702 ::
¡d
::
¡ršg¡»am
 
ss3
;

1703 
Univ”§lT”£Pršt
(
s3
, &
ss3
);

1704 
EXPECT_EQ
("NULL", 
ss3
.
¡r
());

1707 
TEST
(
Univ”§lPrštTe¡
, 
WÜksFÜNÚReã»nû
) {

1708 ::
¡d
::
¡ršg¡»am
 
ss
;

1709 
Univ”§lPršt
(123, &
ss
);

1710 
EXPECT_EQ
("123", 
ss
.
¡r
());

1713 
TEST
(
Univ”§lPrštTe¡
, 
WÜksFÜReã»nû
) {

1714 cÚ¡ & 
	gn
 = 123;

1715 ::
¡d
::
¡ršg¡»am
 
ss
;

1716 
Univ”§lPršt
(
n
, &
ss
);

1717 
EXPECT_EQ
("123", 
ss
.
¡r
());

1720 
TEST
(
Univ”§lPrštTe¡
, 
WÜksFÜPaœW™hCÚ¡
) {

1721 
	g¡d
::
·œ
<cÚ¡ 
W¿µ”
<
¡d
::
¡ršg
>, > 
p
(Wrapper<std::string>("abc"), 1);

1722 ::
¡d
::
¡ršg¡»am
 
ss
;

1723 
Univ”§lPršt
(
p
, &
ss
);

1724 
EXPECT_EQ
("(W¿µ”(\"abc\"), 1)", 
ss
.
¡r
());

1727 
TEST
(
Univ”§lPrštTe¡
, 
WÜksFÜCSŒšg
) {

1728 cÚ¡ * 
	gs1
 = "abc";

1729 ::
¡d
::
¡ršg¡»am
 
ss1
;

1730 
Univ”§lPršt
(
s1
, &
ss1
);

1731 
EXPECT_EQ
(
PrštPoš‹r
(
s1
è+ "…oštšgØ\"abc\"", 
¡d
::
¡ršg
(
ss1
.
¡r
()));

1733 * 
	gs2
 = 
cÚ¡_ÿ¡
<*>(
s1
);

1734 ::
¡d
::
¡ršg¡»am
 
ss2
;

1735 
Univ”§lPršt
(
s2
, &
ss2
);

1736 
EXPECT_EQ
(
PrštPoš‹r
(
s2
è+ "…oštšgØ\"abc\"", 
¡d
::
¡ršg
(
ss2
.
¡r
()));

1738 cÚ¡ * 
	gs3
 = 
nuÎ±r
;

1739 ::
¡d
::
¡ršg¡»am
 
ss3
;

1740 
Univ”§lPršt
(
s3
, &
ss3
);

1741 
EXPECT_EQ
("NULL", 
ss3
.
¡r
());

1744 
TEST
(
Univ”§lPrštTe¡
, 
WÜksFÜCh¬A¼ay
) {

1745 cÚ¡ 
	g¡r
[] = "\"Line\0 1\"\nLine 2";

1746 ::
¡d
::
¡ršg¡»am
 
ss1
;

1747 
Univ”§lPršt
(
¡r
, &
ss1
);

1748 
EXPECT_EQ
("\"\\\"Lše\\0 1\\\"\\nLš2\"", 
ss1
.
¡r
());

1750 cÚ¡ 
	gmubË_¡r
[] = "\"Line\0 1\"\nLine 2";

1751 ::
¡d
::
¡ršg¡»am
 
ss2
;

1752 
Univ”§lPršt
(
mubË_¡r
, &
ss2
);

1753 
EXPECT_EQ
("\"\\\"Lše\\0 1\\\"\\nLš2\"", 
ss2
.
¡r
());

1756 
TEST
(
Univ”§lPrštTe¡
, 
Incom¶‘eTy³
) {

1757 
	gIncom¶‘e
;

1758 
	gsome_objeù
 = 0;

1759 
EXPECT_EQ
("(incompleteype)",

1760 
PrštToSŒšg
(
»š‹½»t_ÿ¡
<
Incom¶‘e
&>(
some_objeù
)));

1763 
TEST
(
Univ”§lPrštTe¡
, 
Sm¬tPoš‹rs
) {

1764 
EXPECT_EQ
("ÒuÎ±r)", 
PrštToSŒšg
(
¡d
::
unique_±r
<>()));

1765 
	g¡d
::
unique_±r
<> 
p
(
Ãw
 (17));

1766 
EXPECT_EQ
("ÕŒ = " + 
PrštPoš‹r
(
p
.
g‘
()) + ", value = 17)",

1767 
PrštToSŒšg
(
p
));

1768 
	g¡d
::
unique_±r
<[]> 
p2
(
Ãw
 [2]);

1769 
EXPECT_EQ
("(" + 
PrštPoš‹r
(
p2
.
g‘
()è+ ")", 
PrštToSŒšg
(p2));

1771 
EXPECT_EQ
("ÒuÎ±r)", 
PrštToSŒšg
(
¡d
::
sh¬ed_±r
<>()));

1772 
	g¡d
::
sh¬ed_±r
<> 
p3
(
Ãw
 (1979));

1773 
EXPECT_EQ
("ÕŒ = " + 
PrštPoš‹r
(
p3
.
g‘
()) + ", value = 1979)",

1774 
PrštToSŒšg
(
p3
));

1775 #ià
__ıp_lib_sh¬ed_±r_¬¿ys
 >= 201611L

1776 
	g¡d
::
sh¬ed_±r
<[]> 
p4
(
Ãw
 [2]);

1777 
EXPECT_EQ
("(" + 
PrštPoš‹r
(
p4
.
g‘
()è+ ")", 
PrštToSŒšg
(p4));

1781 
EXPECT_EQ
("ÒuÎ±r)", 
PrštToSŒšg
(
¡d
::
unique_±r
<>()));

1782 
EXPECT_EQ
("ÒuÎ±r)", 
PrštToSŒšg
(
¡d
::
unique_±r
<const >()));

1783 
EXPECT_EQ
("ÒuÎ±r)", 
PrštToSŒšg
(
¡d
::
unique_±r
<volatile >()));

1784 
EXPECT_EQ
("ÒuÎ±r)", 
PrštToSŒšg
(
¡d
::
unique_±r
<volatile const >()));

1785 
EXPECT_EQ
("ÒuÎ±r)", 
PrštToSŒšg
(
¡d
::
unique_±r
<[]>()));

1786 
EXPECT_EQ
("ÒuÎ±r)", 
PrštToSŒšg
(
¡d
::
unique_±r
<const []>()));

1787 
EXPECT_EQ
("ÒuÎ±r)", 
PrštToSŒšg
(
¡d
::
unique_±r
<volatile []>()));

1788 
EXPECT_EQ
("(nullptr)",

1789 
PrštToSŒšg
(
¡d
::
unique_±r
<volatile const []>()));

1790 
EXPECT_EQ
("ÒuÎ±r)", 
PrštToSŒšg
(
¡d
::
sh¬ed_±r
<>()));

1791 
EXPECT_EQ
("ÒuÎ±r)", 
PrštToSŒšg
(
¡d
::
sh¬ed_±r
<const >()));

1792 
EXPECT_EQ
("ÒuÎ±r)", 
PrštToSŒšg
(
¡d
::
sh¬ed_±r
<volatile >()));

1793 
EXPECT_EQ
("ÒuÎ±r)", 
PrštToSŒšg
(
¡d
::
sh¬ed_±r
<volatile const >()));

1794 #ià
__ıp_lib_sh¬ed_±r_¬¿ys
 >= 201611L

1795 
EXPECT_EQ
("ÒuÎ±r)", 
PrštToSŒšg
(
¡d
::
sh¬ed_±r
<[]>()));

1796 
EXPECT_EQ
("ÒuÎ±r)", 
PrštToSŒšg
(
¡d
::
sh¬ed_±r
<const []>()));

1797 
EXPECT_EQ
("ÒuÎ±r)", 
PrštToSŒšg
(
¡d
::
sh¬ed_±r
<volatile []>()));

1798 
EXPECT_EQ
("(nullptr)",

1799 
PrštToSŒšg
(
¡d
::
sh¬ed_±r
<volatile const []>()));

1803 
EXPECT_EQ
("ÒuÎ±r)", 
PrštToSŒšg
(
¡d
::
unique_±r
<, (*)(*)>(

1804 
nuÎ±r
,‚ullptr)));

1805 
EXPECT_EQ
("(" + 
PrštPoš‹r
(
p
.
g‘
()) + ")",

1806 
PrštToSŒšg
(

1807 
¡d
::
unique_±r
<, (*)(*)>(
p
.
g‘
(), [](*) {})));

1808 
EXPECT_EQ
("ÒuÎ±r)", 
PrštToSŒšg
(
¡d
::
sh¬ed_±r
<>()));

1809 
EXPECT_EQ
("(" + 
PrštPoš‹r
(
p
.
g‘
()) + ")",

1810 
PrštToSŒšg
(
¡d
::
sh¬ed_±r
<>(
p
.
g‘
(), [](*) {})));

1813 
TEST
(
Univ”§lT”£PrštTu¶eF›ldsToSŒšgsTe¡W™hStd
, 
PrštsEm±yTu¶e
) {

1814 
SŒšgs
 
	g»suÉ
 = 
Univ”§lT”£PrštTu¶eF›ldsToSŒšgs
(::
¡d
::
make_tu¶e
());

1815 
EXPECT_EQ
(0u, 
»suÉ
.
size
());

1818 
TEST
(
Univ”§lT”£PrštTu¶eF›ldsToSŒšgsTe¡W™hStd
, 
PrštsOÃTu¶e
) {

1819 
SŒšgs
 
	g»suÉ
 = 
Univ”§lT”£PrštTu¶eF›ldsToSŒšgs
(

1820 ::
¡d
::
make_tu¶e
(1));

1821 
ASSERT_EQ
(1u, 
»suÉ
.
size
());

1822 
EXPECT_EQ
("1", 
»suÉ
[0]);

1825 
TEST
(
Univ”§lT”£PrštTu¶eF›ldsToSŒšgsTe¡W™hStd
, 
PrštsTwoTu¶e
) {

1826 
SŒšgs
 
	g»suÉ
 = 
Univ”§lT”£PrštTu¶eF›ldsToSŒšgs
(

1827 ::
¡d
::
make_tu¶e
(1, 'a'));

1828 
ASSERT_EQ
(2u, 
»suÉ
.
size
());

1829 
EXPECT_EQ
("1", 
»suÉ
[0]);

1830 
EXPECT_EQ
("'a' (97, 0x61)", 
»suÉ
[1]);

1833 
TEST
(
Univ”§lT”£PrštTu¶eF›ldsToSŒšgsTe¡W™hStd
, 
PrštsT”£ly
) {

1834 cÚ¡ 
	gn
 = 1;

1835 
SŒšgs
 
	g»suÉ
 = 
Univ”§lT”£PrštTu¶eF›ldsToSŒšgs
(

1836 ::
¡d
::
tu¶e
<cÚ¡ &, cÚ¡ *>(
n
, "a"));

1837 
ASSERT_EQ
(2u, 
»suÉ
.
size
());

1838 
EXPECT_EQ
("1", 
»suÉ
[0]);

1839 
EXPECT_EQ
("\"a\"", 
»suÉ
[1]);

1842 #ià
GTEST_INTERNAL_HAS_ANY


1843 şas 
	cPrštAnyTe¡
 : 
public
 ::
‹¡šg
::
Te¡
 {

1844 
´Ùeùed
:

1845 
‹m¶©e
 <
ty³Çme
 
T
>

1846 
¡d
::
¡ršg
 
Ex³ùedTy³Name
() {

1847 #ià
GTEST_HAS_RTTI


1848  
š‹º®
::
G‘Ty³Name
<
T
>();

1855 
TEST_F
(
PrštAnyTe¡
, 
Em±y
) {

1856 
	gš‹º®
::
Any
 
ªy
;

1857 
EXPECT_EQ
("nØv®ue", 
PrštToSŒšg
(
ªy
));

1860 
TEST_F
(
PrštAnyTe¡
, 
NÚEm±y
) {

1861 
	gš‹º®
::
Any
 
ªy
;

1862 
cÚ¡ex´
 
	gv®1
 = 10;

1863 cÚ¡ 
	g¡d
::
¡ršg
 
v®2
 = "content";

1865 
	gªy
 = 
v®1
;

1866 
EXPECT_EQ
("v®uoàty³ " + 
Ex³ùedTy³Name
<>(), 
PrštToSŒšg
(
ªy
));

1868 
	gªy
 = 
v®2
;

1869 
EXPECT_EQ
("v®uoàty³ " + 
Ex³ùedTy³Name
<
¡d
::
¡ršg
>(),

1870 
PrštToSŒšg
(
ªy
));

1874 #ià
GTEST_INTERNAL_HAS_OPTIONAL


1875 
TEST
(
PrštO±iÚ®Te¡
, 
Basic
) {

1876 
	gš‹º®
::
O±iÚ®
<> 
v®ue
;

1877 
EXPECT_EQ
("ÒuÎİt)", 
PrštToSŒšg
(
v®ue
));

1878 
	gv®ue
 = {7};

1879 
EXPECT_EQ
("(7)", 
PrštToSŒšg
(
v®ue
));

1880 
EXPECT_EQ
("(1.1)", 
PrštToSŒšg
(
š‹º®
::
O±iÚ®
<>{1.1}));

1881 
EXPECT_EQ
("(\"A\")", 
PrštToSŒšg
(
š‹º®
::
O±iÚ®
<
¡d
::
¡ršg
>{"A"}));

1885 #ià
GTEST_INTERNAL_HAS_VARIANT


1886 
	sNÚPršbË
 {

1887 
	gcÚ‹Ás
 = 17;

1890 
TEST
(
PrštOÃofTe¡
, 
Basic
) {

1891 
usšg
 
	gTy³
 = 
š‹º®
::
V¬ŸÁ
<, 
	gSŒ—mabËInGlob®
, 
	gNÚPršbË
>;

1892 
EXPECT_EQ
("('št(šdex = 0)' w™h v®u7)", 
PrštToSŒšg
(
Ty³
(7)));

1893 
EXPECT_EQ
("('StreamableInGlobal(index = 1)' with value StreamableInGlobal)",

1894 
PrštToSŒšg
(
Ty³
(
SŒ—mabËInGlob®
{})));

1895 
EXPECT_EQ
(

1898 
PrštToSŒšg
(
Ty³
(
NÚPršbË
{})));

1901 
	gÇme¥aû
 {

1902 
şass
 
	g¡ršg_»f
;

1907 şas 
	c¡ršg_±r
 {

1908 
	gpublic
:

1909 
¡ršg_±r
(cÚ¡ * 
d©a
, 
size_t
 
size
è: 
d©a_
(d©a), 
size_
(size) {}

1911 
	g¡ršg_±r
& 
	gİ”©Ü
++(è
	gnÛxû±
 {

1912 
	gd©a_
 +ğ
size_
;

1913  *
	gthis
;

1916 
¡ršg_»f
 
	gİ”©Ü
*(ècÚ¡ 
	gnÛxû±
;

1918 
	g´iv©e
:

1919 cÚ¡ * 
d©a_
;

1920 
size_t
 
	gsize_
;

1926 şas 
	c¡ršg_»f
 {

1927 
	gpublic
:

1928 
¡ršg_»f
(cÚ¡ * 
d©a
, 
size_t
 
size
è: 
d©a_
(d©a), 
size_
(size) {}

1930 
¡ršg_±r
 
	gİ”©Ü
&(ècÚ¡ 
	gnÛxû±
 {  {
	gd©a_
, 
	gsize_
}; }

1932 
boŞ
 
	gİ”©Ü
==(cÚ¡ * 
s
ècÚ¡ 
nÛxû±
 {

1933 ià(
size_
 > 0 && 
d©a_
[size_ - 1] != 0) {

1934  
¡d
::
¡ršg
(
d©a_
, 
size_
è=ğ¡d::¡ršg(
s
);

1936  
	g¡d
::
¡ršg
(
d©a_
è=ğ
¡d
::¡ršg(
s
);

1940 
	g´iv©e
:

1941 cÚ¡ * 
d©a_
;

1942 
size_t
 
	gsize_
;

1945 
¡ršg_»f
 
	g¡ršg_±r
::
İ”©Ü
*(ècÚ¡ 
nÛxû±
 {  {
d©a_
, 
	gsize_
}; }

1947 
TEST
(
¡ršg_»f
, 
com·»
) {

1948 cÚ¡ * 
	gs
 = "alex\0davidjohn\0";

1949 
¡ršg_±r
 
±r
(
s
, 5);

1950 
EXPECT_EQ
(*
±r
, "alex");

1951 
EXPECT_TRUE
(*
±r
 == "alex");

1952 ++
	g±r
;

1953 
EXPECT_EQ
(*
±r
, "david");

1954 
EXPECT_TRUE
(*
±r
 == "david");

1955 ++
	g±r
;

1956 
EXPECT_EQ
(*
±r
, "john");

	@third_party/googletest/googletest/test/googletest-setuptestsuite-test_.cc

31 
	~"g‹¡/g‹¡.h
"

33 şas 
	cS‘upFaTe¡
 : 
public
 ::
‹¡šg
::
Te¡
 {

34 
´Ùeùed
:

35 
	$S‘UpTe¡Su™e
() {

36 
	`ASSERT_EQ
("", "SET_UP_FAIL");

38 
	}
};

40 
	$TEST_F
(
S‘upFaTe¡
, 
NoİPassšgTe¡
è{
	}
}

42 şas 
	cT—rDownFaTe¡
 : 
public
 ::
‹¡šg
::
Te¡
 {

43 
´Ùeùed
:

44 
	$T—rDownTe¡Su™e
() {

45 
	`ASSERT_EQ
("", "TEAR_DOWN_FAIL");

47 
	}
};

49 
	$TEST_F
(
T—rDownFaTe¡
, 
NoİPassšgTe¡
è{
	}
}

	@third_party/googletest/googletest/test/googletest-shuffle-test_.cc

33 
	~"g‹¡/g‹¡.h
"

35 
	gÇme¥aû
 {

37 
	gusšg
 ::
‹¡šg
::
Em±yTe¡Ev’tLi¡’”
;

38 
	gusšg
 ::
‹¡šg
::
In™GoogËTe¡
;

39 
	gusšg
 ::
‹¡šg
::
Mes§ge
;

40 
	gusšg
 ::
‹¡šg
::
Te¡
;

41 
	gusšg
 ::
‹¡šg
::
Te¡Ev’tLi¡’”s
;

42 
	gusšg
 ::
‹¡šg
::
Te¡Info
;

43 
	gusšg
 ::
‹¡šg
::
Un™Te¡
;

48 şas 
	cA
 : 
public
 
Te¡
 {};

49 
	$TEST_F
(
A
, Aè{
	}
}

50 
	$TEST_F
(
A
, 
B
è{
	}
}

52 
	$TEST
(
AD—thTe¡
, 
A
è{
	}
}

53 
	$TEST
(
AD—thTe¡
, 
B
è{
	}
}

54 
	$TEST
(
AD—thTe¡
, 
C
è{
	}
}

56 
	$TEST
(
B
, 
A
è{
	}
}

57 
	$TEST
(
B
, Bè{
	}
}

58 
	$TEST
(
B
, 
C
è{
	}
}

59 
	$TEST
(
B
, 
DISABLED_D
è{
	}
}

60 
	$TEST
(
B
, 
DISABLED_E
è{
	}
}

62 
	$TEST
(
BD—thTe¡
, 
A
è{
	}
}

63 
	$TEST
(
BD—thTe¡
, 
B
è{
	}
}

65 
	$TEST
(
C
, 
A
è{
	}
}

66 
	$TEST
(
C
, 
B
è{
	}
}

67 
	$TEST
(
C
, Cè{
	}
}

68 
	$TEST
(
C
, 
DISABLED_D
è{
	}
}

70 
	$TEST
(
CD—thTe¡
, 
A
è{
	}
}

72 
	$TEST
(
DISABLED_D
, 
A
è{
	}
}

73 
	$TEST
(
DISABLED_D
, 
DISABLED_B
è{
	}
}

77 şas 
	cTe¡NamePrš‹r
 : 
public
 
Em±yTe¡Ev’tLi¡’”
 {

78 
public
:

79 
OnTe¡I‹¿tiÚS¹
(cÚ¡ 
Un™Te¡
& ,

80 è
	gov”ride
 {

81 
´štf
("----\n");

84 
OnTe¡S¹
(cÚ¡ 
Te¡Info
& 
‹¡_šfo
è
	gov”ride
 {

85 
´štf
("%s.%s\n", 
‹¡_šfo
.
‹¡_su™e_Çme
(),e¡_šfo.
Çme
());

91 
	$maš
(
¬gc
, **
¬gv
) {

92 
	`In™GoogËTe¡
(&
¬gc
, 
¬gv
);

96 
Te¡Ev’tLi¡’”s
& 
li¡’”s
 = 
Un™Te¡
::
	`G‘In¡ªû
()->
	`li¡’”s
();

97 
d–‘e
 
li¡’”s
.
	`R–—£
Öi¡’”s.
	`deçuÉ_»suÉ_´š‹r
());

98 
li¡’”s
.
	`Aµ’d
(
Ãw
 
Te¡NamePrš‹r
);

100  
	`RUN_ALL_TESTS
();

101 
	}
}

	@third_party/googletest/googletest/test/googletest-test-part-test.cc

30 
	~"g‹¡/g‹¡-‹¡-·¹.h
"

32 
	~"g‹¡/g‹¡.h
"

34 
usšg
 
	g‹¡šg
::
Mes§ge
;

35 
usšg
 
	g‹¡šg
::
Te¡
;

36 
usšg
 
	g‹¡šg
::
Te¡P¬tResuÉ
;

37 
usšg
 
	g‹¡šg
::
Te¡P¬tResuÉA¼ay
;

39 
	gÇme¥aû
 {

44 şas 
	cTe¡P¬tResuÉTe¡
 : 
public
 
Te¡
 {

45 
´Ùeùed
:

46 
Te¡P¬tResuÉTe¡
()

47 : 
r1_
(
Te¡P¬tResuÉ
::
kSucûss
, "foo/bar.cc", 10, "Success!"),

48 
r2_
(
Te¡P¬tResuÉ
::
kNÚF©®Fau»
, "foo/bar.cc", -1, "Failure!"),

49 
r3_
(
Te¡P¬tResuÉ
::
kF©®Fau»
, 
nuÎ±r
, -1, "Failure!"),

50 
r4_
(
Te¡P¬tResuÉ
::
kSk
, "foo/bar.cc", 2, "Skipped!") {}

52 
Te¡P¬tResuÉ
 
	gr1_
, 
	gr2_
, 
	gr3_
, 
	gr4_
;

56 
	$TEST_F
(
Te¡P¬tResuÉTe¡
, 
CÚ¡ruùÜWÜks
) {

57 
Mes§ge
 
mes§ge
;

58 
mes§ge
 << "something iserribly wrong";

59 
mes§ge
 << 
¡©ic_ÿ¡
<cÚ¡ *>(
‹¡šg
::
š‹º®
::
kSckT¿ûM¬k”
);

60 
mes§ge
 << "some unimportant stackrace";

62 cÚ¡ 
Te¡P¬tResuÉ
 
	`»suÉ
(Te¡P¬tResuÉ::
kNÚF©®Fau»
,

65 
mes§ge
.
	`G‘SŒšg
().
	`c_¡r
());

67 
	`EXPECT_EQ
(
Te¡P¬tResuÉ
::
kNÚF©®Fau»
, 
»suÉ
.
	`ty³
());

68 
	`EXPECT_STREQ
("some_fe.cc", 
»suÉ
.
	`fe_Çme
());

69 
	`EXPECT_EQ
(42, 
»suÉ
.
	`lše_numb”
());

70 
	`EXPECT_STREQ
(
mes§ge
.
	`G‘SŒšg
().
	`c_¡r
(), 
»suÉ
.
	`mes§ge
());

71 
	`EXPECT_STREQ
("som‘hšg i ‹¼ibly wrÚg", 
»suÉ
.
	`summ¬y
());

72 
	}
}

74 
	$TEST_F
(
Te¡P¬tResuÉTe¡
, 
ResuÉAcûssÜsWÜk
) {

75 cÚ¡ 
Te¡P¬tResuÉ
 
	`sucûss
(Te¡P¬tResuÉ::
kSucûss
,

79 
	`EXPECT_TRUE
(
sucûss
.
	`·s£d
());

80 
	`EXPECT_FALSE
(
sucûss
.
	`çed
());

81 
	`EXPECT_FALSE
(
sucûss
.
	`nÚçÎy_çed
());

82 
	`EXPECT_FALSE
(
sucûss
.
	`çÎy_çed
());

83 
	`EXPECT_FALSE
(
sucûss
.
	`sk³d
());

85 cÚ¡ 
Te¡P¬tResuÉ
 
	`nÚçl_çu»
(Te¡P¬tResuÉ::
kNÚF©®Fau»
,

89 
	`EXPECT_FALSE
(
nÚçl_çu»
.
	`·s£d
());

90 
	`EXPECT_TRUE
(
nÚçl_çu»
.
	`çed
());

91 
	`EXPECT_TRUE
(
nÚçl_çu»
.
	`nÚçÎy_çed
());

92 
	`EXPECT_FALSE
(
nÚçl_çu»
.
	`çÎy_çed
());

93 
	`EXPECT_FALSE
(
nÚçl_çu»
.
	`sk³d
());

95 cÚ¡ 
Te¡P¬tResuÉ
 
	`çl_çu»
(Te¡P¬tResuÉ::
kF©®Fau»
,

99 
	`EXPECT_FALSE
(
çl_çu»
.
	`·s£d
());

100 
	`EXPECT_TRUE
(
çl_çu»
.
	`çed
());

101 
	`EXPECT_FALSE
(
çl_çu»
.
	`nÚçÎy_çed
());

102 
	`EXPECT_TRUE
(
çl_çu»
.
	`çÎy_çed
());

103 
	`EXPECT_FALSE
(
çl_çu»
.
	`sk³d
());

105 cÚ¡ 
Te¡P¬tResuÉ
 
	`sk
(Te¡P¬tResuÉ::
kSk
, "file.cc", 42, "message");

106 
	`EXPECT_FALSE
(
sk
.
	`·s£d
());

107 
	`EXPECT_FALSE
(
sk
.
	`çed
());

108 
	`EXPECT_FALSE
(
sk
.
	`nÚçÎy_çed
());

109 
	`EXPECT_FALSE
(
sk
.
	`çÎy_çed
());

110 
	`EXPECT_TRUE
(
sk
.
	`sk³d
());

111 
	}
}

114 
	$TEST_F
(
Te¡P¬tResuÉTe¡
, 
ty³
) {

115 
	`EXPECT_EQ
(
Te¡P¬tResuÉ
::
kSucûss
, 
r1_
.
	`ty³
());

116 
	`EXPECT_EQ
(
Te¡P¬tResuÉ
::
kNÚF©®Fau»
, 
r2_
.
	`ty³
());

117 
	`EXPECT_EQ
(
Te¡P¬tResuÉ
::
kF©®Fau»
, 
r3_
.
	`ty³
());

118 
	`EXPECT_EQ
(
Te¡P¬tResuÉ
::
kSk
, 
r4_
.
	`ty³
());

119 
	}
}

122 
	$TEST_F
(
Te¡P¬tResuÉTe¡
, 
fe_Çme
) {

123 
	`EXPECT_STREQ
("foo/b¬.cc", 
r1_
.
	`fe_Çme
());

124 
	`EXPECT_STREQ
(
nuÎ±r
, 
r3_
.
	`fe_Çme
());

125 
	`EXPECT_STREQ
("foo/b¬.cc", 
r4_
.
	`fe_Çme
());

126 
	}
}

129 
	$TEST_F
(
Te¡P¬tResuÉTe¡
, 
lše_numb”
) {

130 
	`EXPECT_EQ
(10, 
r1_
.
	`lše_numb”
());

131 
	`EXPECT_EQ
(-1, 
r2_
.
	`lše_numb”
());

132 
	`EXPECT_EQ
(2, 
r4_
.
	`lše_numb”
());

133 
	}
}

136 
	$TEST_F
(
Te¡P¬tResuÉTe¡
, 
mes§ge
) {

137 
	`EXPECT_STREQ
("Sucûss!", 
r1_
.
	`mes§ge
());

138 
	`EXPECT_STREQ
("Sk³d!", 
r4_
.
	`mes§ge
());

139 
	}
}

142 
	$TEST_F
(
Te¡P¬tResuÉTe¡
, 
Pas£d
) {

143 
	`EXPECT_TRUE
(
r1_
.
	`·s£d
());

144 
	`EXPECT_FALSE
(
r2_
.
	`·s£d
());

145 
	`EXPECT_FALSE
(
r3_
.
	`·s£d
());

146 
	`EXPECT_FALSE
(
r4_
.
	`·s£d
());

147 
	}
}

150 
	$TEST_F
(
Te¡P¬tResuÉTe¡
, 
Faed
) {

151 
	`EXPECT_FALSE
(
r1_
.
	`çed
());

152 
	`EXPECT_TRUE
(
r2_
.
	`çed
());

153 
	`EXPECT_TRUE
(
r3_
.
	`çed
());

154 
	`EXPECT_FALSE
(
r4_
.
	`çed
());

155 
	}
}

158 
	$TEST_F
(
Te¡P¬tResuÉTe¡
, 
Sk³d
) {

159 
	`EXPECT_FALSE
(
r1_
.
	`sk³d
());

160 
	`EXPECT_FALSE
(
r2_
.
	`sk³d
());

161 
	`EXPECT_FALSE
(
r3_
.
	`sk³d
());

162 
	`EXPECT_TRUE
(
r4_
.
	`sk³d
());

163 
	}
}

166 
	$TEST_F
(
Te¡P¬tResuÉTe¡
, 
F©®lyFaed
) {

167 
	`EXPECT_FALSE
(
r1_
.
	`çÎy_çed
());

168 
	`EXPECT_FALSE
(
r2_
.
	`çÎy_çed
());

169 
	`EXPECT_TRUE
(
r3_
.
	`çÎy_çed
());

170 
	`EXPECT_FALSE
(
r4_
.
	`çÎy_çed
());

171 
	}
}

174 
	$TEST_F
(
Te¡P¬tResuÉTe¡
, 
NÚçÎyFaed
) {

175 
	`EXPECT_FALSE
(
r1_
.
	`nÚçÎy_çed
());

176 
	`EXPECT_TRUE
(
r2_
.
	`nÚçÎy_çed
());

177 
	`EXPECT_FALSE
(
r3_
.
	`nÚçÎy_çed
());

178 
	`EXPECT_FALSE
(
r4_
.
	`nÚçÎy_çed
());

179 
	}
}

183 şas 
	cTe¡P¬tResuÉA¼ayTe¡
 : 
public
 
Te¡
 {

184 
´Ùeùed
:

185 
Te¡P¬tResuÉA¼ayTe¡
()

186 : 
r1_
(
Te¡P¬tResuÉ
::
kNÚF©®Fau»
, "foo/bar.cc", -1, "Failure 1"),

187 
r2_
(
Te¡P¬tResuÉ
::
kF©®Fau»
, "foo/bar.cc", -1, "Failure 2") {}

189 cÚ¡ 
Te¡P¬tResuÉ
 
	gr1_
, 
	gr2_
;

193 
	$TEST_F
(
Te¡P¬tResuÉA¼ayTe¡
, 
In™ŸlSizeIsZ”o
) {

194 
Te¡P¬tResuÉA¼ay
 
»suÉs
;

195 
	`EXPECT_EQ
(0, 
»suÉs
.
	`size
());

196 
	}
}

200 
	$TEST_F
(
Te¡P¬tResuÉA¼ayTe¡
, 
CÚšsGiv’ResuÉAá”Aµ’d
) {

201 
Te¡P¬tResuÉA¼ay
 
»suÉs
;

202 
»suÉs
.
	`Aµ’d
(
r1_
);

203 
	`EXPECT_EQ
(1, 
»suÉs
.
	`size
());

204 
	`EXPECT_STREQ
("Fau» 1", 
»suÉs
.
	`G‘Te¡P¬tResuÉ
(0).
	`mes§ge
());

205 
	}
}

209 
	$TEST_F
(
Te¡P¬tResuÉA¼ayTe¡
, 
CÚšsGiv’ResuÉsAá”TwoAµ’ds
) {

210 
Te¡P¬tResuÉA¼ay
 
»suÉs
;

211 
»suÉs
.
	`Aµ’d
(
r1_
);

212 
»suÉs
.
	`Aµ’d
(
r2_
);

213 
	`EXPECT_EQ
(2, 
»suÉs
.
	`size
());

214 
	`EXPECT_STREQ
("Fau» 1", 
»suÉs
.
	`G‘Te¡P¬tResuÉ
(0).
	`mes§ge
());

215 
	`EXPECT_STREQ
("Fau» 2", 
»suÉs
.
	`G‘Te¡P¬tResuÉ
(1).
	`mes§ge
());

216 
	}
}

218 
Te¡P¬tResuÉA¼ayTe¡
 
	tTe¡P¬tResuÉA¼ayD—thTe¡
;

222 
	$TEST_F
(
Te¡P¬tResuÉA¼ayD—thTe¡
, 
D›sWh’IndexIsOutOfBound
) {

223 
Te¡P¬tResuÉA¼ay
 
»suÉs
;

224 
»suÉs
.
	`Aµ’d
(
r1_
);

226 
	`EXPECT_DEATH_IF_SUPPORTED
(
»suÉs
.
	`G‘Te¡P¬tResuÉ
(-1), "");

227 
	`EXPECT_DEATH_IF_SUPPORTED
(
»suÉs
.
	`G‘Te¡P¬tResuÉ
(1), "");

228 
	}
}

	@third_party/googletest/googletest/test/googletest-throw-on-failure-test_.cc

37 
	~"g‹¡/g‹¡.h
"

39 
	~<¡dio.h
>

40 
	~<¡dlib.h
>

41 
	~<exû±iÚ
>

46 
	$T”mš©eHªdËr
() {

47 
	`årštf
(
¡d”r
, "%s\n", "Unhandled C++ƒxceptionerminatinghe…rogram.");

48 
	`fæush
(
nuÎ±r
);

49 
	`ex™
(1);

50 
	}
}

52 
	$maš
(
¬gc
, ** 
¬gv
) {

53 #ià
GTEST_HAS_EXCEPTIONS


54 
¡d
::
	`£t_‹rmš©e
(&
T”mš©eHªdËr
);

56 
‹¡šg
::
	`In™GoogËTe¡
(&
¬gc
, 
¬gv
);

66 
	`EXPECT_EQ
(2, 3);

71 
	}
}

	@third_party/googletest/googletest/test/googletest-uninitialized-test_.cc

31 
	~"g‹¡/g‹¡.h
"

33 
	$TEST
(
DummyTe¡
, 
Dummy
) {

38 
	}
}

40 
	$maš
() {

41  
	`RUN_ALL_TESTS
();

42 
	}
}

	@third_party/googletest/googletest/test/gtest-typed-test2_test.cc

31 
	~<veùÜ
>

33 
	~"‹¡/g‹¡-ty³d-‹¡_‹¡.h
"

34 
	~"g‹¡/g‹¡.h
"

39 
INSTANTIATE_TYPED_TEST_SUITE_P
(
VeùÜ
, 
CÚš”Te¡
,

40 
‹¡šg
::
Ty³s
<
¡d
::
veùÜ
<> >);

	@third_party/googletest/googletest/test/gtest-typed-test_test.cc

31 
	~"‹¡/g‹¡-ty³d-‹¡_‹¡.h
"

33 
	~<£t
>

34 
	~<ty³_Œa™s
>

35 
	~<veùÜ
>

37 
	~"g‹¡/g‹¡.h
"

39 #ià
_MSC_VER


40 
	$GTEST_DISABLE_MSC_WARNINGS_PUSH_
(4127 )

43 
usšg
 
‹¡šg
::
Te¡
;

48 
‹m¶©e
 <
ty³Çme
 
T
>

49 şas 
	cCommÚTe¡
 : 
public
 
Te¡
 {

52 
public
:

53 
	$S‘UpTe¡Su™e
() {

54 
sh¬ed_
 = 
Ãw
 
	`T
(5);

57 
	$T—rDownTe¡Su™e
() {

58 
d–‘e
 
sh¬ed_
;

59 
sh¬ed_
 = 
nuÎ±r
;

60 
	}
}

64 
	g´Ùeùed
:

67 
¡d
::
	tveùÜ
<
	tT
> 
	tVeùÜ
;

68 
	g¡d
::
	t£t
<> 
	tIÁS‘
;

70 
	$CommÚTe¡
(è: 
	$v®ue_
(1è{
	}
}

72 ~
	$CommÚTe¡
(è
ov”ride
 { 
	`EXPECT_EQ
(3, 
v®ue_
); 
	}
}

74 
	$S‘Up
(è
ov”ride
 {

75 
	`EXPECT_EQ
(1, 
v®ue_
);

76 
v®ue_
++;

77 
	}
}

79 
	$T—rDown
(è
ov”ride
 {

80 
	`EXPECT_EQ
(2, 
v®ue_
);

81 
v®ue_
++;

82 
	}
}

84 
T
 
	gv®ue_
;

85 
T
* 
	gsh¬ed_
;

88 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

89 
T
* 
	gCommÚTe¡
<
	gT
>::
sh¬ed_
 = 
nuÎ±r
;

91 
usšg
 
	g‹¡šg
::
Ty³s
;

96 
	gTy³s
<, > 
	tTwoTy³s
;

97 
TYPED_TEST_SUITE
(
CommÚTe¡
, 
TwoTy³s
);

99 
	$TYPED_TEST
(
CommÚTe¡
, 
V®uesA»CÜ»ù
) {

102 
	`EXPECT_EQ
(5, *
Te¡Fixtu»
::
sh¬ed_
);

106 
ty³Çme
 
Te¡Fixtu»
::
VeùÜ
 
em±y
;

107 
	`EXPECT_EQ
(0U, 
em±y
.
	`size
());

109 
ty³Çme
 
Te¡Fixtu»
::
IÁS‘
 
em±y2
;

110 
	`EXPECT_EQ
(0U, 
em±y2
.
	`size
());

114 
	`EXPECT_EQ
(2, 
this
->
v®ue_
);

115 
	}
}

119 
	$TYPED_TEST
(
CommÚTe¡
, 
V®uesA»StlCÜ»ù
) {

122 
	`ASSERT_TRUE
(
this
->
sh¬ed_
 !ğ
nuÎ±r
);

123 
	`EXPECT_EQ
(5, *
this
->
sh¬ed_
);

126 
	`EXPECT_EQ
(
¡©ic_ÿ¡
<
Ty³P¬am
>(2), 
this
->
v®ue_
);

127 
	}
}

132 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

133 şas 
	cTy³dTe¡1
 : 
public
 
Te¡
 {

138 
TYPED_TEST_SUITE
(
Ty³dTe¡1
, );

139 
	$TYPED_TEST
(
Ty³dTe¡1
, 
A
è{
	}
}

141 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

142 şas 
	cTy³dTe¡2
 : 
public
 
Te¡
 {

147 
TYPED_TEST_SUITE
(
Ty³dTe¡2
, 
Ty³s
<>);

151 
	$TYPED_TEST
(
Ty³dTe¡2
, 
A
è{
	}
}

155 
Çme¥aû
 
	glib¿ry1
 {

157 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

158 şas 
	cNum”icTe¡
 : 
public
 
Te¡
 {

161 
	gTy³s
<, > 
	tNum”icTy³s
;

162 
TYPED_TEST_SUITE
(
Num”icTe¡
, 
Num”icTy³s
);

164 
	$TYPED_TEST
(
Num”icTe¡
, 
DeçuÉIsZ”o
) {

165 
	`EXPECT_EQ
(0, 
	`Ty³P¬am
());

166 
	}
}

171 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

172 şas 
	cTy³dTe¡W™hNames
 : 
public
 
Te¡
 {};

174 şas 
	cTy³dTe¡Names
 {

175 
	mpublic
:

176 
‹m¶©e
 <
ty³Çme
 
T
>

177 
¡d
::
¡ršg
 
	$G‘Name
(
i
) {

178 ià(
¡d
::
is_§me
<
T
, >::
v®ue
) {

179  
¡d
::
	`¡ršg
("ch¬"è+ ::
‹¡šg
::
	`PrštToSŒšg
(
i
);

181 ià(
¡d
::
is_§me
<
T
, >::
v®ue
) {

182  
¡d
::
	`¡ršg
("št"è+ ::
‹¡šg
::
	`PrštToSŒšg
(
i
);

185 
	}
};

187 
TYPED_TEST_SUITE
(
Ty³dTe¡W™hNames
, 
TwoTy³s
, 
Ty³dTe¡Names
);

189 
	$TYPED_TEST
(
Ty³dTe¡W™hNames
, 
Te¡Su™eName
) {

190 ià(
¡d
::
is_§me
<
Ty³P¬am
, >::
v®ue
) {

191 
	`EXPECT_STREQ
(::
‹¡šg
::
Un™Te¡
::
	`G‘In¡ªû
()

192 ->
	`cu¼’t_‹¡_šfo
()

193 ->
	`‹¡_su™e_Çme
(),

196 ià(
¡d
::
is_§me
<
Ty³P¬am
, >::
v®ue
) {

197 
	`EXPECT_STREQ
(::
‹¡šg
::
Un™Te¡
::
	`G‘In¡ªû
()

198 ->
	`cu¼’t_‹¡_šfo
()

199 ->
	`‹¡_su™e_Çme
(),

202 
	}
}

204 
usšg
 
	g‹¡šg
::
Ty³s
;

205 
usšg
 
	g‹¡šg
::
š‹º®
::
Ty³dTe¡Su™ePS‹
;

209 şas 
	cTy³dTe¡Su™ePS‹Te¡
 : 
public
 
Te¡
 {

210 
´Ùeùed
:

211 
	$S‘Up
(è
ov”ride
 {

212 
¡©e_
.
	`AddTe¡Name
("foo.cc", 0, "FooTest", "A");

213 
¡©e_
.
	`AddTe¡Name
("foo.cc", 0, "FooTest", "B");

214 
¡©e_
.
	`AddTe¡Name
("foo.cc", 0, "FooTest", "C");

217 
Ty³dTe¡Su™ePS‹
 
¡©e_
;

218 
	}
};

220 
	$TEST_F
(
Ty³dTe¡Su™ePS‹Te¡
, 
SucûedsFÜM©chšgLi¡
) {

221 cÚ¡ * 
‹¡s
 = "A, B, C";

222 
	`EXPECT_EQ
(
‹¡s
,

223 
¡©e_
.
	`V”ifyRegi¡”edTe¡Names
("Su™e", "foo.cc", 1, 
‹¡s
));

224 
	}
}

228 
	$TEST_F
(
Ty³dTe¡Su™ePS‹Te¡
, 
IgnÜesOrd”AndS·ûs
) {

229 cÚ¡ * 
‹¡s
 = "A,C, B";

230 
	`EXPECT_EQ
(
‹¡s
,

231 
¡©e_
.
	`V”ifyRegi¡”edTe¡Names
("Su™e", "foo.cc", 1, 
‹¡s
));

232 
	}
}

234 
usšg
 
	gTy³dTe¡Su™ePS‹D—thTe¡
 = 
Ty³dTe¡Su™ePS‹Te¡
;

236 
	$TEST_F
(
Ty³dTe¡Su™ePS‹D—thTe¡
, 
D‘eùsDu¶iÿ‹s
) {

237 
	`EXPECT_DEATH_IF_SUPPORTED
(

238 
¡©e_
.
	`V”ifyRegi¡”edTe¡Names
("Suite", "foo.cc", 1, "A, B, A, C"),

240 
	}
}

242 
	$TEST_F
(
Ty³dTe¡Su™ePS‹D—thTe¡
, 
D‘eùsExŒaTe¡
) {

243 
	`EXPECT_DEATH_IF_SUPPORTED
(

244 
¡©e_
.
	`V”ifyRegi¡”edTe¡Names
("Suite", "foo.cc", 1, "A, B, C, D"),

246 
	}
}

248 
	$TEST_F
(
Ty³dTe¡Su™ePS‹D—thTe¡
, 
D‘eùsMis£dTe¡
) {

249 
	`EXPECT_DEATH_IF_SUPPORTED
(

250 
¡©e_
.
	`V”ifyRegi¡”edTe¡Names
("Suite", "foo.cc", 1, "A, C"),

252 
	}
}

256 
	$TEST_F
(
Ty³dTe¡Su™ePS‹D—thTe¡
, 
D‘eùsTe¡Aá”Regi¡¿tiÚ
) {

257 
¡©e_
.
	`V”ifyRegi¡”edTe¡Names
("Suite", "foo.cc", 1, "A, B, C");

258 
	`EXPECT_DEATH_IF_SUPPORTED
(

259 
¡©e_
.
	`AddTe¡Name
("foo.cc", 2, "FooTest", "D"),

262 
	}
}

267 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

268 
şass
 
	gD”ivedTe¡
 : 
public
 
CommÚTe¡
<
T
> {

271 
TYPED_TEST_SUITE_P
(
D”ivedTe¡
);

273 
	$TYPED_TEST_P
(
D”ivedTe¡
, 
V®uesA»CÜ»ù
) {

276 
	`EXPECT_EQ
(5, *
Te¡Fixtu»
::
sh¬ed_
);

280 
	`EXPECT_EQ
(2, 
this
->
v®ue_
);

281 
	}
}

285 
	$TYPED_TEST_P
(
D”ivedTe¡
, 
V®uesA»StlCÜ»ù
) {

288 
	`ASSERT_TRUE
(
this
->
sh¬ed_
 !ğ
nuÎ±r
);

289 
	`EXPECT_EQ
(5, *
this
->
sh¬ed_
);

290 
	`EXPECT_EQ
(2, 
this
->
v®ue_
);

291 
	}
}

293 
REGISTER_TYPED_TEST_SUITE_P
(
D”ivedTe¡
,

294 
V®uesA»CÜ»ù
, 
V®uesA»StlCÜ»ù
);

296 
	gTy³s
<, > 
	tMyTwoTy³s
;

297 
INSTANTIATE_TYPED_TEST_SUITE_P
(
My
, 
D”ivedTe¡
, 
MyTwoTy³s
);

301 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

302 şas 
	cTy³P¬am‘rizedTe¡W™hNames
 : 
public
 
Te¡
 {};

304 
TYPED_TEST_SUITE_P
(
Ty³P¬am‘rizedTe¡W™hNames
);

306 
	$TYPED_TEST_P
(
Ty³P¬am‘rizedTe¡W™hNames
, 
Te¡Su™eName
) {

307 ià(
¡d
::
is_§me
<
Ty³P¬am
, >::
v®ue
) {

308 
	`EXPECT_STREQ
(::
‹¡šg
::
Un™Te¡
::
	`G‘In¡ªû
()

309 ->
	`cu¼’t_‹¡_šfo
()

310 ->
	`‹¡_su™e_Çme
(),

313 ià(
¡d
::
is_§me
<
Ty³P¬am
, >::
v®ue
) {

314 
	`EXPECT_STREQ
(::
‹¡šg
::
Un™Te¡
::
	`G‘In¡ªû
()

315 ->
	`cu¼’t_‹¡_šfo
()

316 ->
	`‹¡_su™e_Çme
(),

319 
	}
}

321 
REGISTER_TYPED_TEST_SUITE_P
(
Ty³P¬am‘rizedTe¡W™hNames
, 
Te¡Su™eName
);

323 şas 
	cTy³P¬am‘rizedTe¡Names
 {

324 
	mpublic
:

325 
‹m¶©e
 <
ty³Çme
 
T
>

326 
¡d
::
¡ršg
 
	$G‘Name
(
i
) {

327 ià(
¡d
::
is_§me
<
T
, >::
v®ue
) {

328  
¡d
::
	`¡ršg
("·rCh¬"è+ ::
‹¡šg
::
	`PrštToSŒšg
(
i
);

330 ià(
¡d
::
is_§me
<
T
, >::
v®ue
) {

331  
¡d
::
	`¡ršg
("·rIÁ"è+ ::
‹¡šg
::
	`PrštToSŒšg
(
i
);

334 
	}
};

336 
INSTANTIATE_TYPED_TEST_SUITE_P
(
Cu¡omName
, 
Ty³P¬am‘rizedTe¡W™hNames
,

337 
TwoTy³s
, 
Ty³P¬am‘rizedTe¡Names
);

342 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

343 şas 
	cTy³dTe¡P1
 : 
public
 
Te¡
 {

346 
TYPED_TEST_SUITE_P
(
Ty³dTe¡P1
);

350 
usšg
 
	gIÁAá”Ty³dTe¡Su™eP
 = ;

352 
	$TYPED_TEST_P
(
Ty³dTe¡P1
, 
A
è{
	}
}

353 
	$TYPED_TEST_P
(
Ty³dTe¡P1
, 
B
è{
	}
}

357 
usšg
 
	gIÁBefÜeRegi¡”Ty³dTe¡Su™eP
 = ;

359 
REGISTER_TYPED_TEST_SUITE_P
(
Ty³dTe¡P1
, 
A
, 
B
);

361 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

362 şas 
	cTy³dTe¡P2
 : 
public
 
Te¡
 {

365 
TYPED_TEST_SUITE_P
(
Ty³dTe¡P2
);

369 
	$TYPED_TEST_P
(
Ty³dTe¡P2
, 
A
è{
	}
}

371 
REGISTER_TYPED_TEST_SUITE_P
(
Ty³dTe¡P2
, 
A
);

375 
IÁAá”Ty³dTe¡Su™eP
 
	gaá”
 = 0;

376 
IÁBefÜeRegi¡”Ty³dTe¡Su™eP
 
	gbefÜe
 = 0;

380 
INSTANTIATE_TYPED_TEST_SUITE_P
(
IÁ
, 
Ty³dTe¡P1
, );

381 
INSTANTIATE_TYPED_TEST_SUITE_P
(
IÁ
, 
Ty³dTe¡P2
, 
Ty³s
<>);

385 
INSTANTIATE_TYPED_TEST_SUITE_P
(
DoubË
, 
Ty³dTe¡P2
, 
Ty³s
<>);

390 
	gTy³s
<
	t¡d
::
	tveùÜ
<>, std::
	t£t
<> > 
	tMyCÚš”s
;

391 
INSTANTIATE_TYPED_TEST_SUITE_P
(
My
, 
CÚš”Te¡
, 
MyCÚš”s
);

396 
Çme¥aû
 
	glib¿ry2
 {

398 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

399 şas 
	cNum”icTe¡
 : 
public
 
Te¡
 {

402 
TYPED_TEST_SUITE_P
(
Num”icTe¡
);

404 
	$TYPED_TEST_P
(
Num”icTe¡
, 
DeçuÉIsZ”o
) {

405 
	`EXPECT_EQ
(0, 
	`Ty³P¬am
());

406 
	}
}

408 
	$TYPED_TEST_P
(
Num”icTe¡
, 
Z”oIsLessThªOÃ
) {

409 
	`EXPECT_LT
(
	`Ty³P¬am
(0), TypeParam(1));

410 
	}
}

412 
REGISTER_TYPED_TEST_SUITE_P
(
Num”icTe¡
,

413 
DeçuÉIsZ”o
, 
Z”oIsLessThªOÃ
);

414 
	gTy³s
<, > 
	tNum”icTy³s
;

415 
INSTANTIATE_TYPED_TEST_SUITE_P
(
My
, 
Num”icTe¡
, 
Num”icTy³s
);

417 cÚ¡ * 
	$G‘Te¡Name
() {

418  
‹¡šg
::
Un™Te¡
::
	`G‘In¡ªû
()->
	`cu¼’t_‹¡_šfo
()->
	`Çme
();

419 
	}
}

421 
	g‹m¶©e
 <
ty³Çme
 
	gT
> cÏs 
	cTrimmedTe¡
 : 
public
 
Te¡
 { };

422 
TYPED_TEST_SUITE_P
(
TrimmedTe¡
);

423 
	$TYPED_TEST_P
(
TrimmedTe¡
, 
Te¡1
è{ 
	`EXPECT_STREQ
("Te¡1", 
	`G‘Te¡Name
()); 
	}
}

424 
	$TYPED_TEST_P
(
TrimmedTe¡
, 
Te¡2
è{ 
	`EXPECT_STREQ
("Te¡2", 
	`G‘Te¡Name
()); 
	}
}

425 
	$TYPED_TEST_P
(
TrimmedTe¡
, 
Te¡3
è{ 
	`EXPECT_STREQ
("Te¡3", 
	`G‘Te¡Name
()); 
	}
}

426 
	$TYPED_TEST_P
(
TrimmedTe¡
, 
Te¡4
è{ 
	`EXPECT_STREQ
("Te¡4", 
	`G‘Te¡Name
()); 
	}
}

427 
	$TYPED_TEST_P
(
TrimmedTe¡
, 
Te¡5
è{ 
	`EXPECT_STREQ
("Te¡5", 
	`G‘Te¡Name
()); 
	}
}

428 
REGISTER_TYPED_TEST_SUITE_P
(

429 
TrimmedTe¡
,

430 
Te¡1
, 
Te¡2
,
Te¡3
 , 
Te¡4
 ,
Te¡5
 );

431 
	g‹m¶©e
 <
ty³Çme
 
	gT1
,y³Çm
	gT2
> 
	sMyPaœ
 {};

433 
	gTy³s
<, , 
	tMyPaœ
<, > > 
	tTrimTy³s
;

434 
INSTANTIATE_TYPED_TEST_SUITE_P
(
My
, 
TrimmedTe¡
, 
TrimTy³s
);

	@third_party/googletest/googletest/test/gtest-typed-test_test.h

30 #iâdeà
GOOGLETEST_TEST_GTEST_TYPED_TEST_TEST_H_


31 
	#GOOGLETEST_TEST_GTEST_TYPED_TEST_TEST_H_


	)

33 
	~"g‹¡/g‹¡.h
"

35 
usšg
 
	g‹¡šg
::
Te¡
;

42 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

43 şas 
	cCÚš”Te¡
 : 
public
 
Te¡
 {

46 
TYPED_TEST_SUITE_P
(
CÚš”Te¡
);

48 
	$TYPED_TEST_P
(
CÚš”Te¡
, 
CªBeDeçuÉCÚ¡ruùed
) {

49 
Ty³P¬am
 
cÚš”
;

50 
	}
}

52 
	$TYPED_TEST_P
(
CÚš”Te¡
, 
In™ŸlSizeIsZ”o
) {

53 
Ty³P¬am
 
cÚš”
;

54 
	`EXPECT_EQ
(0U, 
cÚš”
.
	`size
());

55 
	}
}

57 
REGISTER_TYPED_TEST_SUITE_P
(
CÚš”Te¡
,

58 
CªBeDeçuÉCÚ¡ruùed
, 
In™ŸlSizeIsZ”o
);

	@third_party/googletest/googletest/test/gtest-unittest-api_test.cc

35 
	~"g‹¡/g‹¡.h
"

37 
	~<¡ršg.h
>

38 
	~<®gÜ™hm
>

40 
	gusšg
 ::
‹¡šg
::
In™GoogËTe¡
;

42 
Çme¥aû
 
	g‹¡šg
 {

43 
Çme¥aû
 
	gš‹º®
 {

45 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

46 
	sLessByName
 {

47 
boŞ
 
İ”©Ü
()(cÚ¡ 
T
* 
	ga
, cÚ¡ T* 
	gb
) {

48  
¡rcmp
(
a
->
Çme
(), 
b
->name()) < 0;

52 şas 
	cUn™Te¡H–³r
 {

53 
	gpublic
:

56 
Te¡Su™e
 cÚ¡** 
G‘SÜ‹dTe¡Su™es
() {

57 
Un™Te¡
& 
un™_‹¡
 = *Un™Te¡::
G‘In¡ªû
();

58 autØcÚ¡** cÚ¡ 
	g‹¡_su™es
 = 
Ãw
 cÚ¡ 
Te¡Su™e
*[
¡©ic_ÿ¡
<
size_t
>(

59 
un™_‹¡
.
tÙ®_‹¡_su™e_couÁ
())];

61 
	gi
 = 0; i < 
	gun™_‹¡
.
tÙ®_‹¡_su™e_couÁ
(); ++i)

62 
	g‹¡_su™es
[
i
] = 
un™_‹¡
.
G‘Te¡Su™e
(i);

64 
	g¡d
::
sÜt
(
‹¡_su™es
,

65 
‹¡_su™es
 + 
un™_‹¡
.
tÙ®_‹¡_su™e_couÁ
(),

66 
LessByName
<
Te¡Su™e
>());

67  
	g‹¡_su™es
;

72 cÚ¡ 
Te¡Su™e
* 
FšdTe¡Su™e
(cÚ¡ * 
Çme
) {

73 
	gUn™Te¡
& 
	gun™_‹¡
 = *
Un™Te¡
::
G‘In¡ªû
();

74 
	gi
 = 0; i < 
	gun™_‹¡
.
tÙ®_‹¡_su™e_couÁ
(); ++i) {

75 cÚ¡ 
Te¡Su™e
* 
	g‹¡_su™e
 = 
un™_‹¡
.
G‘Te¡Su™e
(
i
);

76 ià(0 =ğ
¡rcmp
(
‹¡_su™e
->
Çme
(),‚ame))

77  
	g‹¡_su™e
;

79  
	gnuÎ±r
;

85 
Te¡Info
 cÚ¡** 
G‘SÜ‹dTe¡s
(cÚ¡ 
Te¡Su™e
* 
‹¡_su™e
) {

86 
Te¡Info
 cÚ¡** cÚ¡ 
	g‹¡s
 = 
Ãw
 cÚ¡ Te¡Info*[
¡©ic_ÿ¡
<
size_t
>(

87 
‹¡_su™e
->
tÙ®_‹¡_couÁ
())];

89 
	gi
 = 0; i < 
	g‹¡_su™e
->
tÙ®_‹¡_couÁ
(); ++i)

90 
	g‹¡s
[
i
] = 
‹¡_su™e
->
G‘Te¡Info
(i);

92 
	g¡d
::
sÜt
(
‹¡s
,e¡ + 
‹¡_su™e
->
tÙ®_‹¡_couÁ
(),

93 
LessByName
<
Te¡Info
>());

94  
	g‹¡s
;

98 
	g‹m¶©e
 <
ty³Çme
 
	gT
> cÏs 
	cTe¡Su™eW™hComm’tTe¡
 : 
public
 
Te¡
 {};

99 
TYPED_TEST_SUITE
(
Te¡Su™eW™hComm’tTe¡
, 
Ty³s
<>);

100 
TYPED_TEST
(
Te¡Su™eW™hComm’tTe¡
, 
Dummy
) {}

102 cÚ¡ 
	gkTy³dTe¡Su™es
 = 1;

103 cÚ¡ 
	gkTy³dTe¡s
 = 1;

108 
TEST
(
ApiTe¡
, 
Un™Te¡ImmubËAcûssÜsWÜk
) {

109 
Un™Te¡
* 
	gun™_‹¡
 = Un™Te¡::
G‘In¡ªû
();

111 
ASSERT_EQ
(2 + 
kTy³dTe¡Su™es
, 
un™_‹¡
->
tÙ®_‹¡_su™e_couÁ
());

112 
EXPECT_EQ
(1 + 
kTy³dTe¡Su™es
, 
un™_‹¡
->
‹¡_su™e_to_run_couÁ
());

113 
EXPECT_EQ
(2, 
un™_‹¡
->
di§bËd_‹¡_couÁ
());

114 
EXPECT_EQ
(5 + 
kTy³dTe¡s
, 
un™_‹¡
->
tÙ®_‹¡_couÁ
());

115 
EXPECT_EQ
(3 + 
kTy³dTe¡s
, 
un™_‹¡
->
‹¡_to_run_couÁ
());

117 cÚ¡ 
Te¡Su™e
** cÚ¡ 
	g‹¡_su™es
 = 
Un™Te¡H–³r
::
G‘SÜ‹dTe¡Su™es
();

119 
EXPECT_STREQ
("ApiTe¡", 
‹¡_su™es
[0]->
Çme
());

120 
EXPECT_STREQ
("DISABLED_Te¡", 
‹¡_su™es
[1]->
Çme
());

121 
EXPECT_STREQ
("Te¡Su™eW™hComm’tTe¡/0", 
‹¡_su™es
[2]->
Çme
());

123 
	gd–‘e
[] 
	g‹¡_su™es
;

129 
RecÜdPrİ”ty
("key", "value");

132 
As£¹iÚResuÉ
 
IsNuÎ
(cÚ¡ * 
¡r
) {

133 ià(
	g¡r
 !ğ
nuÎ±r
) {

134  
‹¡šg
::
As£¹iÚFau»
(è<< "¬gum’ˆi " << 
¡r
;

136  
As£¹iÚSucûss
();

139 
TEST
(
ApiTe¡
, 
Te¡Su™eImmubËAcûssÜsWÜk
) {

140 cÚ¡ 
Te¡Su™e
* 
	g‹¡_su™e
 = 
Un™Te¡H–³r
::
FšdTe¡Su™e
("ApiTest");

141 
ASSERT_TRUE
(
‹¡_su™e
 !ğ
nuÎ±r
);

143 
EXPECT_STREQ
("ApiTe¡", 
‹¡_su™e
->
Çme
());

144 
EXPECT_TRUE
(
IsNuÎ
(
‹¡_su™e
->
ty³_·¿m
()));

145 
EXPECT_TRUE
(
‹¡_su™e
->
should_run
());

146 
EXPECT_EQ
(1, 
‹¡_su™e
->
di§bËd_‹¡_couÁ
());

147 
EXPECT_EQ
(3, 
‹¡_su™e
->
‹¡_to_run_couÁ
());

148 
ASSERT_EQ
(4, 
‹¡_su™e
->
tÙ®_‹¡_couÁ
());

150 cÚ¡ 
Te¡Info
** 
	g‹¡s
 = 
Un™Te¡H–³r
::
G‘SÜ‹dTe¡s
(
‹¡_su™e
);

152 
EXPECT_STREQ
("DISABLED_Dummy1", 
‹¡s
[0]->
Çme
());

153 
EXPECT_STREQ
("ApiTe¡", 
‹¡s
[0]->
‹¡_su™e_Çme
());

154 
EXPECT_TRUE
(
IsNuÎ
(
‹¡s
[0]->
v®ue_·¿m
()));

155 
EXPECT_TRUE
(
IsNuÎ
(
‹¡s
[0]->
ty³_·¿m
()));

156 
EXPECT_FALSE
(
‹¡s
[0]->
should_run
());

158 
EXPECT_STREQ
("Te¡Su™eDi§bËdAcûssÜsWÜk", 
‹¡s
[1]->
Çme
());

159 
EXPECT_STREQ
("ApiTe¡", 
‹¡s
[1]->
‹¡_su™e_Çme
());

160 
EXPECT_TRUE
(
IsNuÎ
(
‹¡s
[1]->
v®ue_·¿m
()));

161 
EXPECT_TRUE
(
IsNuÎ
(
‹¡s
[1]->
ty³_·¿m
()));

162 
EXPECT_TRUE
(
‹¡s
[1]->
should_run
());

164 
EXPECT_STREQ
("Te¡Su™eImmubËAcûssÜsWÜk", 
‹¡s
[2]->
Çme
());

165 
EXPECT_STREQ
("ApiTe¡", 
‹¡s
[2]->
‹¡_su™e_Çme
());

166 
EXPECT_TRUE
(
IsNuÎ
(
‹¡s
[2]->
v®ue_·¿m
()));

167 
EXPECT_TRUE
(
IsNuÎ
(
‹¡s
[2]->
ty³_·¿m
()));

168 
EXPECT_TRUE
(
‹¡s
[2]->
should_run
());

170 
EXPECT_STREQ
("Un™Te¡ImmubËAcûssÜsWÜk", 
‹¡s
[3]->
Çme
());

171 
EXPECT_STREQ
("ApiTe¡", 
‹¡s
[3]->
‹¡_su™e_Çme
());

172 
EXPECT_TRUE
(
IsNuÎ
(
‹¡s
[3]->
v®ue_·¿m
()));

173 
EXPECT_TRUE
(
IsNuÎ
(
‹¡s
[3]->
ty³_·¿m
()));

174 
EXPECT_TRUE
(
‹¡s
[3]->
should_run
());

176 
	gd–‘e
[] 
	g‹¡s
;

177 
	g‹¡s
 = 
nuÎ±r
;

179 
	g‹¡_su™e
 = 
Un™Te¡H–³r
::
FšdTe¡Su™e
("TestSuiteWithCommentTest/0");

180 
ASSERT_TRUE
(
‹¡_su™e
 !ğ
nuÎ±r
);

182 
EXPECT_STREQ
("Te¡Su™eW™hComm’tTe¡/0", 
‹¡_su™e
->
Çme
());

183 
EXPECT_STREQ
(
G‘Ty³Name
<
Ty³s
<>>().
c_¡r
(), 
‹¡_su™e
->
ty³_·¿m
());

184 
EXPECT_TRUE
(
‹¡_su™e
->
should_run
());

185 
EXPECT_EQ
(0, 
‹¡_su™e
->
di§bËd_‹¡_couÁ
());

186 
EXPECT_EQ
(1, 
‹¡_su™e
->
‹¡_to_run_couÁ
());

187 
ASSERT_EQ
(1, 
‹¡_su™e
->
tÙ®_‹¡_couÁ
());

189 
	g‹¡s
 = 
Un™Te¡H–³r
::
G‘SÜ‹dTe¡s
(
‹¡_su™e
);

191 
EXPECT_STREQ
("Dummy", 
‹¡s
[0]->
Çme
());

192 
EXPECT_STREQ
("Te¡Su™eW™hComm’tTe¡/0", 
‹¡s
[0]->
‹¡_su™e_Çme
());

193 
EXPECT_TRUE
(
IsNuÎ
(
‹¡s
[0]->
v®ue_·¿m
()));

194 
EXPECT_STREQ
(
G‘Ty³Name
<
Ty³s
<>>().
c_¡r
(), 
‹¡s
[0]->
ty³_·¿m
());

195 
EXPECT_TRUE
(
‹¡s
[0]->
should_run
());

197 
	gd–‘e
[] 
	g‹¡s
;

200 
TEST
(
ApiTe¡
, 
Te¡Su™eDi§bËdAcûssÜsWÜk
) {

201 cÚ¡ 
Te¡Su™e
* 
	g‹¡_su™e
 = 
Un™Te¡H–³r
::
FšdTe¡Su™e
("DISABLED_Test");

202 
ASSERT_TRUE
(
‹¡_su™e
 !ğ
nuÎ±r
);

204 
EXPECT_STREQ
("DISABLED_Te¡", 
‹¡_su™e
->
Çme
());

205 
EXPECT_TRUE
(
IsNuÎ
(
‹¡_su™e
->
ty³_·¿m
()));

206 
EXPECT_FALSE
(
‹¡_su™e
->
should_run
());

207 
EXPECT_EQ
(1, 
‹¡_su™e
->
di§bËd_‹¡_couÁ
());

208 
EXPECT_EQ
(0, 
‹¡_su™e
->
‹¡_to_run_couÁ
());

209 
ASSERT_EQ
(1, 
‹¡_su™e
->
tÙ®_‹¡_couÁ
());

211 cÚ¡ 
Te¡Info
* cÚ¡ 
	g‹¡_šfo
 = 
‹¡_su™e
->
G‘Te¡Info
(0);

212 
EXPECT_STREQ
("Dummy2", 
‹¡_šfo
->
Çme
());

213 
EXPECT_STREQ
("DISABLED_Te¡", 
‹¡_šfo
->
‹¡_su™e_Çme
());

214 
EXPECT_TRUE
(
IsNuÎ
(
‹¡_šfo
->
v®ue_·¿m
()));

215 
EXPECT_TRUE
(
IsNuÎ
(
‹¡_šfo
->
ty³_·¿m
()));

216 
EXPECT_FALSE
(
‹¡_šfo
->
should_run
());

221 
TEST
(
ApiTe¡
, 
DISABLED_Dummy1
) {}

222 
TEST
(
DISABLED_Te¡
, 
Dummy2
) {}

224 şas 
	cFš®SucûssCheck”
 : 
public
 
EnvœÚm’t
 {

225 
´Ùeùed
:

226 
T—rDown
(è
ov”ride
 {

227 
Un™Te¡
* 
un™_‹¡
 = Un™Te¡::
G‘In¡ªû
();

229 
EXPECT_EQ
(1 + 
kTy³dTe¡Su™es
, 
un™_‹¡
->
sucûssful_‹¡_su™e_couÁ
());

230 
EXPECT_EQ
(3 + 
kTy³dTe¡s
, 
un™_‹¡
->
sucûssful_‹¡_couÁ
());

231 
EXPECT_EQ
(0, 
un™_‹¡
->
çed_‹¡_su™e_couÁ
());

232 
EXPECT_EQ
(0, 
un™_‹¡
->
çed_‹¡_couÁ
());

233 
EXPECT_TRUE
(
un™_‹¡
->
Pas£d
());

234 
EXPECT_FALSE
(
un™_‹¡
->
Faed
());

235 
ASSERT_EQ
(2 + 
kTy³dTe¡Su™es
, 
un™_‹¡
->
tÙ®_‹¡_su™e_couÁ
());

237 cÚ¡ 
Te¡Su™e
** cÚ¡ 
	g‹¡_su™es
 = 
Un™Te¡H–³r
::
G‘SÜ‹dTe¡Su™es
();

239 
EXPECT_STREQ
("ApiTe¡", 
‹¡_su™es
[0]->
Çme
());

240 
EXPECT_TRUE
(
IsNuÎ
(
‹¡_su™es
[0]->
ty³_·¿m
()));

241 
EXPECT_TRUE
(
‹¡_su™es
[0]->
should_run
());

242 
EXPECT_EQ
(1, 
‹¡_su™es
[0]->
di§bËd_‹¡_couÁ
());

243 
ASSERT_EQ
(4, 
‹¡_su™es
[0]->
tÙ®_‹¡_couÁ
());

244 
EXPECT_EQ
(3, 
‹¡_su™es
[0]->
sucûssful_‹¡_couÁ
());

245 
EXPECT_EQ
(0, 
‹¡_su™es
[0]->
çed_‹¡_couÁ
());

246 
EXPECT_TRUE
(
‹¡_su™es
[0]->
Pas£d
());

247 
EXPECT_FALSE
(
‹¡_su™es
[0]->
Faed
());

249 
EXPECT_STREQ
("DISABLED_Te¡", 
‹¡_su™es
[1]->
Çme
());

250 
EXPECT_TRUE
(
IsNuÎ
(
‹¡_su™es
[1]->
ty³_·¿m
()));

251 
EXPECT_FALSE
(
‹¡_su™es
[1]->
should_run
());

252 
EXPECT_EQ
(1, 
‹¡_su™es
[1]->
di§bËd_‹¡_couÁ
());

253 
ASSERT_EQ
(1, 
‹¡_su™es
[1]->
tÙ®_‹¡_couÁ
());

254 
EXPECT_EQ
(0, 
‹¡_su™es
[1]->
sucûssful_‹¡_couÁ
());

255 
EXPECT_EQ
(0, 
‹¡_su™es
[1]->
çed_‹¡_couÁ
());

257 
EXPECT_STREQ
("Te¡Su™eW™hComm’tTe¡/0", 
‹¡_su™es
[2]->
Çme
());

258 
EXPECT_STREQ
(
G‘Ty³Name
<
Ty³s
<>>().
c_¡r
(),

259 
‹¡_su™es
[2]->
ty³_·¿m
());

260 
EXPECT_TRUE
(
‹¡_su™es
[2]->
should_run
());

261 
EXPECT_EQ
(0, 
‹¡_su™es
[2]->
di§bËd_‹¡_couÁ
());

262 
ASSERT_EQ
(1, 
‹¡_su™es
[2]->
tÙ®_‹¡_couÁ
());

263 
EXPECT_EQ
(1, 
‹¡_su™es
[2]->
sucûssful_‹¡_couÁ
());

264 
EXPECT_EQ
(0, 
‹¡_su™es
[2]->
çed_‹¡_couÁ
());

265 
EXPECT_TRUE
(
‹¡_su™es
[2]->
Pas£d
());

266 
EXPECT_FALSE
(
‹¡_su™es
[2]->
Faed
());

268 cÚ¡ 
Te¡Su™e
* 
	g‹¡_su™e
 = 
Un™Te¡H–³r
::
FšdTe¡Su™e
("ApiTest");

269 cÚ¡ 
Te¡Info
** 
	g‹¡s
 = 
Un™Te¡H–³r
::
G‘SÜ‹dTe¡s
(
‹¡_su™e
);

270 
EXPECT_STREQ
("DISABLED_Dummy1", 
‹¡s
[0]->
Çme
());

271 
EXPECT_STREQ
("ApiTe¡", 
‹¡s
[0]->
‹¡_su™e_Çme
());

272 
EXPECT_FALSE
(
‹¡s
[0]->
should_run
());

274 
EXPECT_STREQ
("Te¡Su™eDi§bËdAcûssÜsWÜk", 
‹¡s
[1]->
Çme
());

275 
EXPECT_STREQ
("ApiTe¡", 
‹¡s
[1]->
‹¡_su™e_Çme
());

276 
EXPECT_TRUE
(
IsNuÎ
(
‹¡s
[1]->
v®ue_·¿m
()));

277 
EXPECT_TRUE
(
IsNuÎ
(
‹¡s
[1]->
ty³_·¿m
()));

278 
EXPECT_TRUE
(
‹¡s
[1]->
should_run
());

279 
EXPECT_TRUE
(
‹¡s
[1]->
»suÉ
()->
Pas£d
());

280 
EXPECT_EQ
(0, 
‹¡s
[1]->
»suÉ
()->
‹¡_´İ”ty_couÁ
());

282 
EXPECT_STREQ
("Te¡Su™eImmubËAcûssÜsWÜk", 
‹¡s
[2]->
Çme
());

283 
EXPECT_STREQ
("ApiTe¡", 
‹¡s
[2]->
‹¡_su™e_Çme
());

284 
EXPECT_TRUE
(
IsNuÎ
(
‹¡s
[2]->
v®ue_·¿m
()));

285 
EXPECT_TRUE
(
IsNuÎ
(
‹¡s
[2]->
ty³_·¿m
()));

286 
EXPECT_TRUE
(
‹¡s
[2]->
should_run
());

287 
EXPECT_TRUE
(
‹¡s
[2]->
»suÉ
()->
Pas£d
());

288 
EXPECT_EQ
(0, 
‹¡s
[2]->
»suÉ
()->
‹¡_´İ”ty_couÁ
());

290 
EXPECT_STREQ
("Un™Te¡ImmubËAcûssÜsWÜk", 
‹¡s
[3]->
Çme
());

291 
EXPECT_STREQ
("ApiTe¡", 
‹¡s
[3]->
‹¡_su™e_Çme
());

292 
EXPECT_TRUE
(
IsNuÎ
(
‹¡s
[3]->
v®ue_·¿m
()));

293 
EXPECT_TRUE
(
IsNuÎ
(
‹¡s
[3]->
ty³_·¿m
()));

294 
EXPECT_TRUE
(
‹¡s
[3]->
should_run
());

295 
EXPECT_TRUE
(
‹¡s
[3]->
»suÉ
()->
Pas£d
());

296 
EXPECT_EQ
(1, 
‹¡s
[3]->
»suÉ
()->
‹¡_´İ”ty_couÁ
());

297 cÚ¡ 
	gTe¡Prİ”ty
& 
	g´İ”ty
 = 
‹¡s
[3]->
»suÉ
()->
G‘Te¡Prİ”ty
(0);

298 
EXPECT_STREQ
("key", 
´İ”ty
.
key
());

299 
EXPECT_STREQ
("v®ue", 
´İ”ty
.
v®ue
());

301 
	gd–‘e
[] 
	g‹¡s
;

303 
	g‹¡_su™e
 = 
Un™Te¡H–³r
::
FšdTe¡Su™e
("TestSuiteWithCommentTest/0");

304 
	g‹¡s
 = 
Un™Te¡H–³r
::
G‘SÜ‹dTe¡s
(
‹¡_su™e
);

306 
EXPECT_STREQ
("Dummy", 
‹¡s
[0]->
Çme
());

307 
EXPECT_STREQ
("Te¡Su™eW™hComm’tTe¡/0", 
‹¡s
[0]->
‹¡_su™e_Çme
());

308 
EXPECT_TRUE
(
IsNuÎ
(
‹¡s
[0]->
v®ue_·¿m
()));

309 
EXPECT_STREQ
(
G‘Ty³Name
<
Ty³s
<>>().
c_¡r
(), 
‹¡s
[0]->
ty³_·¿m
());

310 
EXPECT_TRUE
(
‹¡s
[0]->
should_run
());

311 
EXPECT_TRUE
(
‹¡s
[0]->
»suÉ
()->
Pas£d
());

312 
EXPECT_EQ
(0, 
‹¡s
[0]->
»suÉ
()->
‹¡_´İ”ty_couÁ
());

314 
	gd–‘e
[] 
	g‹¡s
;

315 
	gd–‘e
[] 
	g‹¡_su™es
;

322 
	$maš
(
¬gc
, **
¬gv
) {

323 
	`In™GoogËTe¡
(&
¬gc
, 
¬gv
);

325 
	`AddGlob®Te¡EnvœÚm’t
(
Ãw
 
‹¡šg
::
š‹º®
::
	`Fš®SucûssCheck”
());

327  
	`RUN_ALL_TESTS
();

328 
	}
}

	@third_party/googletest/googletest/test/gtest_all_test.cc

35 
	~"‹¡/googË‹¡-f•©h-‹¡.cc
"

36 
	~"‹¡/googË‹¡-mes§ge-‹¡.cc
"

37 
	~"‹¡/googË‹¡-İtiÚs-‹¡.cc
"

38 
	~"‹¡/googË‹¡-pÜt-‹¡.cc
"

39 
	~"‹¡/googË‹¡-‹¡-·¹-‹¡.cc
"

40 
	~"‹¡/g‹¡-ty³d-‹¡2_‹¡.cc
"

41 
	~"‹¡/g‹¡-ty³d-‹¡_‹¡.cc
"

42 
	~"‹¡/g‹¡_´ed_im¶_un™‹¡.cc
"

43 
	~"‹¡/g‹¡_´od_‹¡.cc
"

44 
	~"‹¡/g‹¡_sk_‹¡.cc
"

45 
	~"‹¡/g‹¡_un™‹¡.cc
"

46 
	~"‹¡/´oduùiÚ.cc
"

	@third_party/googletest/googletest/test/gtest_assert_by_exception_test.cc

33 
	~"g‹¡/g‹¡.h
"

35 
	~<¡dlib.h
>

36 
	~<¡dio.h
>

37 
	~<¡ršg.h
>

38 
	~<¡dexû±
>

40 şas 
	cThrowLi¡’”
 : 
public
 
‹¡šg
::
Em±yTe¡Ev’tLi¡’”
 {

41 
	$OnTe¡P¬tResuÉ
(cÚ¡ 
‹¡šg
::
Te¡P¬tResuÉ
& 
»suÉ
è
ov”ride
 {

42 ià(
»suÉ
.
	`ty³
(è=ğ
‹¡šg
::
Te¡P¬tResuÉ
::
kF©®Fau»
) {

43 
throw
 
‹¡šg
::
	`As£¹iÚExû±iÚ
(
»suÉ
);

46 
	}
};

52 
	$Fa
(cÚ¡ * 
msg
) {

53 
	`´štf
("FAILURE: %s\n", 
msg
);

54 
	`fæush
(
¡dout
);

55 
	`ex™
(1);

56 
	}
}

58 
	$As£¹F®£
() {

59 
	`ASSERT_EQ
(2, 3) << "Expected failure";

60 
	}
}

64 
	$TEST
(
Te¡
, Test) {

66 
Œy
 {

67 
	`EXPECT_EQ
(3, 3);

68 } 
	`ÿtch
(...) {

69 
	`Fa
("A successful‡ssertion wrongfullyhrew.");

73 
Œy
 {

74 
	`EXPECT_EQ
(3, 4);

75 } 
	`ÿtch
(...) {

76 
	`Fa
("A failed‚on-fatal‡ssertion wrongfullyhrew.");

80 
Œy
 {

81 
	`As£¹F®£
();

82 } 
	`ÿtch
(cÚ¡ 
‹¡šg
::
As£¹iÚExû±iÚ
& 
e
) {

83 ià(
	`¡r¡r
(
e
.
	`wh©
(), "Ex³ùed fau»"è!ğ
nuÎ±r
è
throw
;

85 
	`´štf
("%s",

89 
	`Fa
(
e
.
	`wh©
());

90 } 
	`ÿtch
(...) {

91 
	`Fa
("A failed‡ssertionhrewhe wrongype ofƒxception.");

93 
	`Fa
("A failed‡ssertion should'vehrown but didn't.");

94 
	}
}

96 
	gkTe¡FÜCÚtšušgTe¡
 = 0;

98 
	$TEST
(
Te¡
, 
Te¡2
) {

99 
kTe¡FÜCÚtšušgTe¡
 = 1;

100 
	}
}

102 
	$maš
(
¬gc
, ** 
¬gv
) {

103 
‹¡šg
::
	`In™GoogËTe¡
(&
¬gc
, 
¬gv
);

104 
‹¡šg
::
Un™Te¡
::
	`G‘In¡ªû
()->
	`li¡’”s
().
	`Aµ’d
(
Ãw
 
ThrowLi¡’”
);

106 
»suÉ
 = 
	`RUN_ALL_TESTS
();

107 ià(
»suÉ
 == 0) {

108 
	`´štf
("RUN_ALL_TESTS„‘uºed %d\n", 
»suÉ
);

109 
	`Fa
("Expected failure instead.");

112 ià(
kTe¡FÜCÚtšušgTe¡
 == 0) {

113 
	`Fa
("Should have continued with otherests, but did‚ot.");

116 
	}
}

	@third_party/googletest/googletest/test/gtest_environment_test.cc

33 
	~<¡dlib.h
>

34 
	~<¡dio.h
>

35 
	~"g‹¡/g‹¡.h
"

36 
	~"¤c/g‹¡-š‹º®-šl.h
"

38 
Çme¥aû
 
	g‹¡šg
 {

39 
GTEST_DECLARE_¡ršg_
(
f‹r
);

42 
	gÇme¥aû
 {

44 
	eFau»Ty³
 {

45 
	gNO_FAILURE
, 
	gNON_FATAL_FAILURE
, 
	gFATAL_FAILURE


49 şas 
	cMyEnvœÚm’t
 : 
public
 
‹¡šg
::
EnvœÚm’t
 {

50 
public
:

51 
MyEnvœÚm’t
(è{ 
Re£t
(); }

56 
S‘Up
(è
	gov”ride
 {

57 
	g£t_up_was_run_
 = 
Œue
;

59 
	gçu»_š_£t_up_
) {

60 
	gNON_FATAL_FAILURE
:

61 
ADD_FAILURE
() << "Expected‚on-fatal failure in global set-up.";

63 
	gFATAL_FAILURE
:

64 
FAIL
() << "Expected fatal failure in global set-up.";

72 
T—rDown
(è
	gov”ride
 {

73 
	g‹¬_down_was_run_
 = 
Œue
;

74 
ADD_FAILURE
() << "Expected‚on-fatal failure in globalear-down.";

78 
Re£t
() {

79 
	gçu»_š_£t_up_
 = 
NO_FAILURE
;

80 
	g£t_up_was_run_
 = 
çl£
;

81 
	g‹¬_down_was_run_
 = 
çl£
;

86 
£t_çu»_š_£t_up
(
Fau»Ty³
 
ty³
) {

87 
	gçu»_š_£t_up_
 = 
ty³
;

91 
boŞ
 
£t_up_was_run
(ècÚ¡ {  
	g£t_up_was_run_
; }

94 
boŞ
 
‹¬_down_was_run
(ècÚ¡ {  
	g‹¬_down_was_run_
; }

96 
	g´iv©e
:

97 
Fau»Ty³
 
çu»_š_£t_up_
;

98 
boŞ
 
	g£t_up_was_run_
;

99 
boŞ
 
	g‹¬_down_was_run_
;

103 
boŞ
 
	g‹¡_was_run
;

107 
	$TEST
(
FooTe¡
, 
B¬
) {

108 
‹¡_was_run
 = 
Œue
;

109 
	}
}

112 
	$Check
(
boŞ
 
cÚd™iÚ
, cÚ¡ * 
msg
) {

113 ià(!
cÚd™iÚ
) {

114 
	`´štf
("FAILED: %s\n", 
msg
);

115 
‹¡šg
::
š‹º®
::
posix
::
	`AbÜt
();

117 
	}
}

123 
	$RunAÎTe¡s
(
MyEnvœÚm’t
* 
’v
, 
Fau»Ty³
 
çu»
) {

124 
’v
->
	`Re£t
();

125 
’v
->
	`£t_çu»_š_£t_up
(
çu»
);

126 
‹¡_was_run
 = 
çl£
;

127 
‹¡šg
::
š‹º®
::
	`G‘Un™Te¡Im¶
()->
	`CË¬AdHocTe¡ResuÉ
();

128  
	`RUN_ALL_TESTS
();

129 
	}
}

133 
	$maš
(
¬gc
, **
¬gv
) {

134 
‹¡šg
::
	`In™GoogËTe¡
(&
¬gc
, 
¬gv
);

138 
MyEnvœÚm’t
* cÚ¡ 
’v
 = 
Ãw
 MyEnvironment;

139 
	`Check
(
‹¡šg
::
	`AddGlob®Te¡EnvœÚm’t
(
’v
) ==ƒnv,

144 
	`Check
(
	`RunAÎTe¡s
(
’v
, 
NO_FAILURE
) != 0,

147 
	`Check
(
‹¡_was_run
,

150 
	`Check
(
’v
->
	`‹¬_down_was_run
(),

155 
	`Check
(
	`RunAÎTe¡s
(
’v
, 
NON_FATAL_FAILURE
) != 0,

158 
	`Check
(
‹¡_was_run
,

161 
	`Check
(
’v
->
	`‹¬_down_was_run
(),

166 
	`Check
(
	`RunAÎTe¡s
(
’v
, 
FATAL_FAILURE
) != 0,

169 
	`Check
(!
‹¡_was_run
,

172 
	`Check
(
’v
->
	`‹¬_down_was_run
(),

177 
‹¡šg
::
	`GTEST_FLAG
(
f‹r
) = "-*";

178 
	`Check
(
	`RunAÎTe¡s
(
’v
, 
NO_FAILURE
) == 0,

180 
	`Check
(!
’v
->
	`£t_up_was_run
(),

182 
	`Check
(!
’v
->
	`‹¬_down_was_run
(),

186 
	`´štf
("PASS\n");

188 
	}
}

	@third_party/googletest/googletest/test/gtest_help_test_.cc

34 
	~"g‹¡/g‹¡.h
"

39 
	$TEST
(
H–pFÏgTe¡
, 
ShouldNÙBeRun
) {

40 
	`ASSERT_TRUE
(
çl£
) << "Tests shouldn't be„un when --help is specified.";

41 
	}
}

43 #ià
GTEST_HAS_DEATH_TEST


44 
	$TEST
(
D—thTe¡
, 
U£dByPythÚSütToD‘eùSuµÜtFÜD—thTe¡sInThisBš¬y
è{
	}
}

	@third_party/googletest/googletest/test/gtest_list_output_unittest_.cc

41 
	~"g‹¡/g‹¡.h
"

43 
	$TEST
(
FooTe¡
, 
Te¡1
è{
	}
}

45 
	$TEST
(
FooTe¡
, 
Te¡2
è{
	}
}

47 şas 
	cFooTe¡Fixtu»
 : 
public
 ::
‹¡šg
::
Te¡
 {};

48 
	$TEST_F
(
FooTe¡Fixtu»
, 
Te¡3
è{
	}
}

49 
	$TEST_F
(
FooTe¡Fixtu»
, 
Te¡4
è{
	}
}

51 
şass
 
	gV®ueP¬amTe¡
 : 
public
 ::
‹¡šg
::
Te¡W™hP¬am
<> {};

52 
	$TEST_P
(
V®ueP¬amTe¡
, 
Te¡5
è{
	}
}

53 
	$TEST_P
(
V®ueP¬amTe¡
, 
Te¡6
è{
	}
}

54 
INSTANTIATE_TEST_SUITE_P
(
V®ueP¬am
, 
V®ueP¬amTe¡
, ::
‹¡šg
::
V®ues
(33, 42));

56 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

57 şas 
	cTy³dTe¡
 : 
public
 ::
‹¡šg
::
Te¡
 {};

58 
	g‹¡šg
::
	tTy³s
<, 
	tboŞ
> 
	tTy³dTe¡Ty³s
;

59 
TYPED_TEST_SUITE
(
Ty³dTe¡
, 
Ty³dTe¡Ty³s
);

60 
	$TYPED_TEST
(
Ty³dTe¡
, 
Te¡7
è{
	}
}

61 
	$TYPED_TEST
(
Ty³dTe¡
, 
Te¡8
è{
	}
}

63 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

64 şas 
	cTy³P¬am‘”izedTe¡Su™e
 : 
public
 ::
‹¡šg
::
Te¡
 {};

65 
TYPED_TEST_SUITE_P
(
Ty³P¬am‘”izedTe¡Su™e
);

66 
	$TYPED_TEST_P
(
Ty³P¬am‘”izedTe¡Su™e
, 
Te¡9
è{
	}
}

67 
	$TYPED_TEST_P
(
Ty³P¬am‘”izedTe¡Su™e
, 
Te¡10
è{
	}
}

68 
REGISTER_TYPED_TEST_SUITE_P
(
Ty³P¬am‘”izedTe¡Su™e
, 
Te¡9
, 
Te¡10
);

69 
	g‹¡šg
::
	tTy³s
<, 
	tboŞ
> 
	tTy³P¬am‘”izedTe¡Su™eTy³s
;

70 
INSTANTIATE_TYPED_TEST_SUITE_P
(
SšgË
, 
Ty³P¬am‘”izedTe¡Su™e
,

71 
Ty³P¬am‘”izedTe¡Su™eTy³s
);

73 
	$maš
(
¬gc
, **
¬gv
) {

74 ::
‹¡šg
::
	`In™GoogËTe¡
(&
¬gc
, 
¬gv
);

76  
	`RUN_ALL_TESTS
();

77 
	}
}

	@third_party/googletest/googletest/test/gtest_main_unittest.cc

31 
	~"g‹¡/g‹¡.h
"

36 
	gÇme¥aû
 {

38 
TEST
(
GTe¡MašTe¡
, 
ShouldSucûed
) {

	@third_party/googletest/googletest/test/gtest_no_test_unittest.cc

33 
	~"g‹¡/g‹¡.h
"

35 
	$maš
(
¬gc
, **
¬gv
) {

36 
‹¡šg
::
	`In™GoogËTe¡
(&
¬gc
, 
¬gv
);

50 
	`EXPECT_EQ
(1, 2);

53  
	`RUN_ALL_TESTS
() ? 0 : 1;

54 
	}
}

	@third_party/googletest/googletest/test/gtest_pred_impl_unittest.cc

50 
	~<io¡»am
>

52 
	~"g‹¡/g‹¡.h
"

53 
	~"g‹¡/g‹¡-¥i.h
"

56 
	sBoŞ
 {

57 
ex¶ic™
 
BoŞ
(
v®
è: 
v®ue
(val != 0) {}

59 
boŞ
 
İ”©Ü
>(
n
ècÚ¡ {  
v®ue
 > 
BoŞ
(n).value; }

61 
BoŞ
 
	mİ”©Ü
+(cÚ¡ 
	mBoŞ
& 
	mrhs
ècÚ¡ {  BoŞ(
v®ue
 + 
rhs
.value); }

63 
boŞ
 
	mİ”©Ü
==(cÚ¡ 
BoŞ
& 
rhs
ècÚ¡ {  
v®ue
 ==„hs.value; }

65 
boŞ
 
	mv®ue
;

69 
	g¡d
::
o¡»am
& 
İ”©Ü
<<(
¡d
::o¡»am& 
os
, cÚ¡ 
	gBoŞ
& 
	gx
) {

70  
	gos
 << (
	gx
.
	gv®ue
 ? "true" : "false");

76 
	g‹m¶©e
 <
ty³Çme
 
	gT1
>

77 
boŞ
 
	$P»dFunùiÚ1
(
T1
 
v1
) {

78  
v1
 > 0;

79 
	}
}

83 
boŞ
 
	$P»dFunùiÚ1IÁ
(
v1
) {

84  
v1
 > 0;

85 
	}
}

86 
boŞ
 
	$P»dFunùiÚ1BoŞ
(
BoŞ
 
v1
) {

87  
v1
 > 0;

88 
	}
}

91 
	sP»dFunùÜ1
 {

92 
	m‹m¶©e
 <
ty³Çme
 
	mT1
>

93 
boŞ
 
İ”©Ü
()(cÚ¡ 
	mT1
& 
	mv1
) {

94  
	mv1
 > 0;

99 
	g‹m¶©e
 <
ty³Çme
 
	gT1
>

100 
	g‹¡šg
::
As£¹iÚResuÉ
 
	$P»dFÜm©FunùiÚ1
(cÚ¡ * 
e1
,

101 cÚ¡ 
T1
& 
v1
) {

102 ià(
	`P»dFunùiÚ1
(
v1
))

103  
‹¡šg
::
	`As£¹iÚSucûss
();

105  
‹¡šg
::
	`As£¹iÚFau»
()

106 << 
e1


108 << 
v1
 << ".";

109 
	}
}

112 
	sP»dFÜm©FunùÜ1
 {

113 
	m‹m¶©e
 <
ty³Çme
 
	mT1
>

114 
	m‹¡šg
::
As£¹iÚResuÉ
 
İ”©Ü
()(cÚ¡ * 
e1
,

115 cÚ¡ 
	mT1
& 
	mv1
) const {

116  
P»dFÜm©FunùiÚ1
(
e1
, 
v1
);

122 şas 
	cP»diÿ‹1Te¡
 : 
public
 
‹¡šg
::
Te¡
 {

123 
´Ùeùed
:

124 
	$S‘Up
(è
ov”ride
 {

125 
ex³ùed_to_fšish_
 = 
Œue
;

126 
fšished_
 = 
çl£
;

127 
n1_
 = 0;

130 
	$T—rDown
(è
ov”ride
 {

133 
	`EXPECT_EQ
(1, 
n1_
) <<

138 ià(
ex³ùed_to_fšish_
 && !
fšished_
) {

139 
	`FAIL
() << "The…redicate‡ssertion unexpactedly‡bortedheest.";

140 } ià(!
ex³ùed_to_fšish_
 && 
fšished_
) {

141 
	`FAIL
() << "The failed…redicate‡ssertion didn't‡bortheest "

144 
	}
}

147 
boŞ
 
	gex³ùed_to_fšish_
;

150 
boŞ
 
	gfšished_
;

152 
	gn1_
;

155 
boŞ
 
	gP»diÿ‹1Te¡
::
ex³ùed_to_fšish_
;

156 
boŞ
 
	gP»diÿ‹1Te¡
::
fšished_
;

157 
	gP»diÿ‹1Te¡
::
n1_
;

159 
P»diÿ‹1Te¡
 
	tEXPECT_PRED_FORMAT1Te¡
;

160 
P»diÿ‹1Te¡
 
	tASSERT_PRED_FORMAT1Te¡
;

161 
P»diÿ‹1Te¡
 
	tEXPECT_PRED1Te¡
;

162 
P»diÿ‹1Te¡
 
	tASSERT_PRED1Te¡
;

166 
	$TEST_F
(
EXPECT_PRED1Te¡
, 
FunùiÚOnButInTy³Sucûss
) {

167 
	`EXPECT_PRED1
(
P»dFunùiÚ1IÁ
,

168 ++
n1_
);

169 
fšished_
 = 
Œue
;

170 
	}
}

174 
	$TEST_F
(
EXPECT_PRED1Te¡
, 
FunùiÚOnU£rTy³Sucûss
) {

175 
	`EXPECT_PRED1
(
P»dFunùiÚ1BoŞ
,

176 
	`BoŞ
(++
n1_
));

177 
fšished_
 = 
Œue
;

178 
	}
}

182 
	$TEST_F
(
EXPECT_PRED1Te¡
, 
FunùÜOnButInTy³Sucûss
) {

183 
	`EXPECT_PRED1
(
	`P»dFunùÜ1
(),

184 ++
n1_
);

185 
fšished_
 = 
Œue
;

186 
	}
}

190 
	$TEST_F
(
EXPECT_PRED1Te¡
, 
FunùÜOnU£rTy³Sucûss
) {

191 
	`EXPECT_PRED1
(
	`P»dFunùÜ1
(),

192 
	`BoŞ
(++
n1_
));

193 
fšished_
 = 
Œue
;

194 
	}
}

198 
	$TEST_F
(
EXPECT_PRED1Te¡
, 
FunùiÚOnButInTy³Fau»
) {

199 
	`EXPECT_NONFATAL_FAILURE
({

200 
	`EXPECT_PRED1
(
P»dFunùiÚ1IÁ
,

201 
n1_
++);

202 
fšished_
 = 
Œue
;

204 
	}
}

208 
	$TEST_F
(
EXPECT_PRED1Te¡
, 
FunùiÚOnU£rTy³Fau»
) {

209 
	`EXPECT_NONFATAL_FAILURE
({

210 
	`EXPECT_PRED1
(
P»dFunùiÚ1BoŞ
,

211 
	`BoŞ
(
n1_
++));

212 
fšished_
 = 
Œue
;

214 
	}
}

218 
	$TEST_F
(
EXPECT_PRED1Te¡
, 
FunùÜOnButInTy³Fau»
) {

219 
	`EXPECT_NONFATAL_FAILURE
({

220 
	`EXPECT_PRED1
(
	`P»dFunùÜ1
(),

221 
n1_
++);

222 
fšished_
 = 
Œue
;

224 
	}
}

228 
	$TEST_F
(
EXPECT_PRED1Te¡
, 
FunùÜOnU£rTy³Fau»
) {

229 
	`EXPECT_NONFATAL_FAILURE
({

230 
	`EXPECT_PRED1
(
	`P»dFunùÜ1
(),

231 
	`BoŞ
(
n1_
++));

232 
fšished_
 = 
Œue
;

234 
	}
}

238 
	$TEST_F
(
ASSERT_PRED1Te¡
, 
FunùiÚOnButInTy³Sucûss
) {

239 
	`ASSERT_PRED1
(
P»dFunùiÚ1IÁ
,

240 ++
n1_
);

241 
fšished_
 = 
Œue
;

242 
	}
}

246 
	$TEST_F
(
ASSERT_PRED1Te¡
, 
FunùiÚOnU£rTy³Sucûss
) {

247 
	`ASSERT_PRED1
(
P»dFunùiÚ1BoŞ
,

248 
	`BoŞ
(++
n1_
));

249 
fšished_
 = 
Œue
;

250 
	}
}

254 
	$TEST_F
(
ASSERT_PRED1Te¡
, 
FunùÜOnButInTy³Sucûss
) {

255 
	`ASSERT_PRED1
(
	`P»dFunùÜ1
(),

256 ++
n1_
);

257 
fšished_
 = 
Œue
;

258 
	}
}

262 
	$TEST_F
(
ASSERT_PRED1Te¡
, 
FunùÜOnU£rTy³Sucûss
) {

263 
	`ASSERT_PRED1
(
	`P»dFunùÜ1
(),

264 
	`BoŞ
(++
n1_
));

265 
fšished_
 = 
Œue
;

266 
	}
}

270 
	$TEST_F
(
ASSERT_PRED1Te¡
, 
FunùiÚOnButInTy³Fau»
) {

271 
ex³ùed_to_fšish_
 = 
çl£
;

272 
	`EXPECT_FATAL_FAILURE
({

273 
	`ASSERT_PRED1
(
P»dFunùiÚ1IÁ
,

274 
n1_
++);

275 
fšished_
 = 
Œue
;

277 
	}
}

281 
	$TEST_F
(
ASSERT_PRED1Te¡
, 
FunùiÚOnU£rTy³Fau»
) {

282 
ex³ùed_to_fšish_
 = 
çl£
;

283 
	`EXPECT_FATAL_FAILURE
({

284 
	`ASSERT_PRED1
(
P»dFunùiÚ1BoŞ
,

285 
	`BoŞ
(
n1_
++));

286 
fšished_
 = 
Œue
;

288 
	}
}

292 
	$TEST_F
(
ASSERT_PRED1Te¡
, 
FunùÜOnButInTy³Fau»
) {

293 
ex³ùed_to_fšish_
 = 
çl£
;

294 
	`EXPECT_FATAL_FAILURE
({

295 
	`ASSERT_PRED1
(
	`P»dFunùÜ1
(),

296 
n1_
++);

297 
fšished_
 = 
Œue
;

299 
	}
}

303 
	$TEST_F
(
ASSERT_PRED1Te¡
, 
FunùÜOnU£rTy³Fau»
) {

304 
ex³ùed_to_fšish_
 = 
çl£
;

305 
	`EXPECT_FATAL_FAILURE
({

306 
	`ASSERT_PRED1
(
	`P»dFunùÜ1
(),

307 
	`BoŞ
(
n1_
++));

308 
fšished_
 = 
Œue
;

310 
	}
}

314 
	$TEST_F
(
EXPECT_PRED_FORMAT1Te¡
, 
FunùiÚOnButInTy³Sucûss
) {

315 
	`EXPECT_PRED_FORMAT1
(
P»dFÜm©FunùiÚ1
,

316 ++
n1_
);

317 
fšished_
 = 
Œue
;

318 
	}
}

322 
	$TEST_F
(
EXPECT_PRED_FORMAT1Te¡
, 
FunùiÚOnU£rTy³Sucûss
) {

323 
	`EXPECT_PRED_FORMAT1
(
P»dFÜm©FunùiÚ1
,

324 
	`BoŞ
(++
n1_
));

325 
fšished_
 = 
Œue
;

326 
	}
}

330 
	$TEST_F
(
EXPECT_PRED_FORMAT1Te¡
, 
FunùÜOnButInTy³Sucûss
) {

331 
	`EXPECT_PRED_FORMAT1
(
	`P»dFÜm©FunùÜ1
(),

332 ++
n1_
);

333 
fšished_
 = 
Œue
;

334 
	}
}

338 
	$TEST_F
(
EXPECT_PRED_FORMAT1Te¡
, 
FunùÜOnU£rTy³Sucûss
) {

339 
	`EXPECT_PRED_FORMAT1
(
	`P»dFÜm©FunùÜ1
(),

340 
	`BoŞ
(++
n1_
));

341 
fšished_
 = 
Œue
;

342 
	}
}

346 
	$TEST_F
(
EXPECT_PRED_FORMAT1Te¡
, 
FunùiÚOnButInTy³Fau»
) {

347 
	`EXPECT_NONFATAL_FAILURE
({

348 
	`EXPECT_PRED_FORMAT1
(
P»dFÜm©FunùiÚ1
,

349 
n1_
++);

350 
fšished_
 = 
Œue
;

352 
	}
}

356 
	$TEST_F
(
EXPECT_PRED_FORMAT1Te¡
, 
FunùiÚOnU£rTy³Fau»
) {

357 
	`EXPECT_NONFATAL_FAILURE
({

358 
	`EXPECT_PRED_FORMAT1
(
P»dFÜm©FunùiÚ1
,

359 
	`BoŞ
(
n1_
++));

360 
fšished_
 = 
Œue
;

362 
	}
}

366 
	$TEST_F
(
EXPECT_PRED_FORMAT1Te¡
, 
FunùÜOnButInTy³Fau»
) {

367 
	`EXPECT_NONFATAL_FAILURE
({

368 
	`EXPECT_PRED_FORMAT1
(
	`P»dFÜm©FunùÜ1
(),

369 
n1_
++);

370 
fšished_
 = 
Œue
;

372 
	}
}

376 
	$TEST_F
(
EXPECT_PRED_FORMAT1Te¡
, 
FunùÜOnU£rTy³Fau»
) {

377 
	`EXPECT_NONFATAL_FAILURE
({

378 
	`EXPECT_PRED_FORMAT1
(
	`P»dFÜm©FunùÜ1
(),

379 
	`BoŞ
(
n1_
++));

380 
fšished_
 = 
Œue
;

382 
	}
}

386 
	$TEST_F
(
ASSERT_PRED_FORMAT1Te¡
, 
FunùiÚOnButInTy³Sucûss
) {

387 
	`ASSERT_PRED_FORMAT1
(
P»dFÜm©FunùiÚ1
,

388 ++
n1_
);

389 
fšished_
 = 
Œue
;

390 
	}
}

394 
	$TEST_F
(
ASSERT_PRED_FORMAT1Te¡
, 
FunùiÚOnU£rTy³Sucûss
) {

395 
	`ASSERT_PRED_FORMAT1
(
P»dFÜm©FunùiÚ1
,

396 
	`BoŞ
(++
n1_
));

397 
fšished_
 = 
Œue
;

398 
	}
}

402 
	$TEST_F
(
ASSERT_PRED_FORMAT1Te¡
, 
FunùÜOnButInTy³Sucûss
) {

403 
	`ASSERT_PRED_FORMAT1
(
	`P»dFÜm©FunùÜ1
(),

404 ++
n1_
);

405 
fšished_
 = 
Œue
;

406 
	}
}

410 
	$TEST_F
(
ASSERT_PRED_FORMAT1Te¡
, 
FunùÜOnU£rTy³Sucûss
) {

411 
	`ASSERT_PRED_FORMAT1
(
	`P»dFÜm©FunùÜ1
(),

412 
	`BoŞ
(++
n1_
));

413 
fšished_
 = 
Œue
;

414 
	}
}

418 
	$TEST_F
(
ASSERT_PRED_FORMAT1Te¡
, 
FunùiÚOnButInTy³Fau»
) {

419 
ex³ùed_to_fšish_
 = 
çl£
;

420 
	`EXPECT_FATAL_FAILURE
({

421 
	`ASSERT_PRED_FORMAT1
(
P»dFÜm©FunùiÚ1
,

422 
n1_
++);

423 
fšished_
 = 
Œue
;

425 
	}
}

429 
	$TEST_F
(
ASSERT_PRED_FORMAT1Te¡
, 
FunùiÚOnU£rTy³Fau»
) {

430 
ex³ùed_to_fšish_
 = 
çl£
;

431 
	`EXPECT_FATAL_FAILURE
({

432 
	`ASSERT_PRED_FORMAT1
(
P»dFÜm©FunùiÚ1
,

433 
	`BoŞ
(
n1_
++));

434 
fšished_
 = 
Œue
;

436 
	}
}

440 
	$TEST_F
(
ASSERT_PRED_FORMAT1Te¡
, 
FunùÜOnButInTy³Fau»
) {

441 
ex³ùed_to_fšish_
 = 
çl£
;

442 
	`EXPECT_FATAL_FAILURE
({

443 
	`ASSERT_PRED_FORMAT1
(
	`P»dFÜm©FunùÜ1
(),

444 
n1_
++);

445 
fšished_
 = 
Œue
;

447 
	}
}

451 
	$TEST_F
(
ASSERT_PRED_FORMAT1Te¡
, 
FunùÜOnU£rTy³Fau»
) {

452 
ex³ùed_to_fšish_
 = 
çl£
;

453 
	`EXPECT_FATAL_FAILURE
({

454 
	`ASSERT_PRED_FORMAT1
(
	`P»dFÜm©FunùÜ1
(),

455 
	`BoŞ
(
n1_
++));

456 
fšished_
 = 
Œue
;

458 
	}
}

462 
	g‹m¶©e
 <
ty³Çme
 
	gT1
,y³Çm
	gT2
>

463 
boŞ
 
	$P»dFunùiÚ2
(
T1
 
v1
, 
T2
 
v2
) {

464  
v1
 + 
v2
 > 0;

465 
	}
}

469 
boŞ
 
	$P»dFunùiÚ2IÁ
(
v1
, 
v2
) {

470  
v1
 + 
v2
 > 0;

471 
	}
}

472 
boŞ
 
	$P»dFunùiÚ2BoŞ
(
BoŞ
 
v1
, BoŞ 
v2
) {

473  
v1
 + 
v2
 > 0;

474 
	}
}

477 
	sP»dFunùÜ2
 {

478 
	m‹m¶©e
 <
ty³Çme
 
	mT1
,y³Çm
	mT2
>

479 
boŞ
 
İ”©Ü
()(cÚ¡ 
	mT1
& 
	mv1
,

480 cÚ¡ 
	mT2
& 
	mv2
) {

481  
	mv1
 + 
	mv2
 > 0;

486 
	g‹m¶©e
 <
ty³Çme
 
	gT1
,y³Çm
	gT2
>

487 
	g‹¡šg
::
As£¹iÚResuÉ
 
	$P»dFÜm©FunùiÚ2
(cÚ¡ * 
e1
,

488 cÚ¡ * 
e2
,

489 cÚ¡ 
T1
& 
v1
,

490 cÚ¡ 
T2
& 
v2
) {

491 ià(
	`P»dFunùiÚ2
(
v1
, 
v2
))

492  
‹¡šg
::
	`As£¹iÚSucûss
();

494  
‹¡šg
::
	`As£¹iÚFau»
()

495 << 
e1
 << " + " << 
e2


497 << 
v1
 + 
v2
 << ".";

498 
	}
}

501 
	sP»dFÜm©FunùÜ2
 {

502 
	m‹m¶©e
 <
ty³Çme
 
	mT1
,y³Çm
	mT2
>

503 
	m‹¡šg
::
As£¹iÚResuÉ
 
İ”©Ü
()(cÚ¡ * 
e1
,

504 cÚ¡ * 
	me2
,

505 cÚ¡ 
	mT1
& 
	mv1
,

506 cÚ¡ 
	mT2
& 
	mv2
) const {

507  
P»dFÜm©FunùiÚ2
(
e1
, 
e2
, 
v1
, 
v2
);

513 şas 
	cP»diÿ‹2Te¡
 : 
public
 
‹¡šg
::
Te¡
 {

514 
´Ùeùed
:

515 
	$S‘Up
(è
ov”ride
 {

516 
ex³ùed_to_fšish_
 = 
Œue
;

517 
fšished_
 = 
çl£
;

518 
n1_
 = 
n2_
 = 0;

521 
	$T—rDown
(è
ov”ride
 {

524 
	`EXPECT_EQ
(1, 
n1_
) <<

527 
	`EXPECT_EQ
(1, 
n2_
) <<

532 ià(
ex³ùed_to_fšish_
 && !
fšished_
) {

533 
	`FAIL
() << "The…redicate‡ssertion unexpactedly‡bortedheest.";

534 } ià(!
ex³ùed_to_fšish_
 && 
fšished_
) {

535 
	`FAIL
() << "The failed…redicate‡ssertion didn't‡bortheest "

538 
	}
}

541 
boŞ
 
	gex³ùed_to_fšish_
;

544 
boŞ
 
	gfšished_
;

546 
	gn1_
;

547 
	gn2_
;

550 
boŞ
 
	gP»diÿ‹2Te¡
::
ex³ùed_to_fšish_
;

551 
boŞ
 
	gP»diÿ‹2Te¡
::
fšished_
;

552 
	gP»diÿ‹2Te¡
::
n1_
;

553 
	gP»diÿ‹2Te¡
::
n2_
;

555 
P»diÿ‹2Te¡
 
	tEXPECT_PRED_FORMAT2Te¡
;

556 
P»diÿ‹2Te¡
 
	tASSERT_PRED_FORMAT2Te¡
;

557 
P»diÿ‹2Te¡
 
	tEXPECT_PRED2Te¡
;

558 
P»diÿ‹2Te¡
 
	tASSERT_PRED2Te¡
;

562 
	$TEST_F
(
EXPECT_PRED2Te¡
, 
FunùiÚOnButInTy³Sucûss
) {

563 
	`EXPECT_PRED2
(
P»dFunùiÚ2IÁ
,

564 ++
n1_
,

565 ++
n2_
);

566 
fšished_
 = 
Œue
;

567 
	}
}

571 
	$TEST_F
(
EXPECT_PRED2Te¡
, 
FunùiÚOnU£rTy³Sucûss
) {

572 
	`EXPECT_PRED2
(
P»dFunùiÚ2BoŞ
,

573 
	`BoŞ
(++
n1_
),

574 
	`BoŞ
(++
n2_
));

575 
fšished_
 = 
Œue
;

576 
	}
}

580 
	$TEST_F
(
EXPECT_PRED2Te¡
, 
FunùÜOnButInTy³Sucûss
) {

581 
	`EXPECT_PRED2
(
	`P»dFunùÜ2
(),

582 ++
n1_
,

583 ++
n2_
);

584 
fšished_
 = 
Œue
;

585 
	}
}

589 
	$TEST_F
(
EXPECT_PRED2Te¡
, 
FunùÜOnU£rTy³Sucûss
) {

590 
	`EXPECT_PRED2
(
	`P»dFunùÜ2
(),

591 
	`BoŞ
(++
n1_
),

592 
	`BoŞ
(++
n2_
));

593 
fšished_
 = 
Œue
;

594 
	}
}

598 
	$TEST_F
(
EXPECT_PRED2Te¡
, 
FunùiÚOnButInTy³Fau»
) {

599 
	`EXPECT_NONFATAL_FAILURE
({

600 
	`EXPECT_PRED2
(
P»dFunùiÚ2IÁ
,

601 
n1_
++,

602 
n2_
++);

603 
fšished_
 = 
Œue
;

605 
	}
}

609 
	$TEST_F
(
EXPECT_PRED2Te¡
, 
FunùiÚOnU£rTy³Fau»
) {

610 
	`EXPECT_NONFATAL_FAILURE
({

611 
	`EXPECT_PRED2
(
P»dFunùiÚ2BoŞ
,

612 
	`BoŞ
(
n1_
++),

613 
	`BoŞ
(
n2_
++));

614 
fšished_
 = 
Œue
;

616 
	}
}

620 
	$TEST_F
(
EXPECT_PRED2Te¡
, 
FunùÜOnButInTy³Fau»
) {

621 
	`EXPECT_NONFATAL_FAILURE
({

622 
	`EXPECT_PRED2
(
	`P»dFunùÜ2
(),

623 
n1_
++,

624 
n2_
++);

625 
fšished_
 = 
Œue
;

627 
	}
}

631 
	$TEST_F
(
EXPECT_PRED2Te¡
, 
FunùÜOnU£rTy³Fau»
) {

632 
	`EXPECT_NONFATAL_FAILURE
({

633 
	`EXPECT_PRED2
(
	`P»dFunùÜ2
(),

634 
	`BoŞ
(
n1_
++),

635 
	`BoŞ
(
n2_
++));

636 
fšished_
 = 
Œue
;

638 
	}
}

642 
	$TEST_F
(
ASSERT_PRED2Te¡
, 
FunùiÚOnButInTy³Sucûss
) {

643 
	`ASSERT_PRED2
(
P»dFunùiÚ2IÁ
,

644 ++
n1_
,

645 ++
n2_
);

646 
fšished_
 = 
Œue
;

647 
	}
}

651 
	$TEST_F
(
ASSERT_PRED2Te¡
, 
FunùiÚOnU£rTy³Sucûss
) {

652 
	`ASSERT_PRED2
(
P»dFunùiÚ2BoŞ
,

653 
	`BoŞ
(++
n1_
),

654 
	`BoŞ
(++
n2_
));

655 
fšished_
 = 
Œue
;

656 
	}
}

660 
	$TEST_F
(
ASSERT_PRED2Te¡
, 
FunùÜOnButInTy³Sucûss
) {

661 
	`ASSERT_PRED2
(
	`P»dFunùÜ2
(),

662 ++
n1_
,

663 ++
n2_
);

664 
fšished_
 = 
Œue
;

665 
	}
}

669 
	$TEST_F
(
ASSERT_PRED2Te¡
, 
FunùÜOnU£rTy³Sucûss
) {

670 
	`ASSERT_PRED2
(
	`P»dFunùÜ2
(),

671 
	`BoŞ
(++
n1_
),

672 
	`BoŞ
(++
n2_
));

673 
fšished_
 = 
Œue
;

674 
	}
}

678 
	$TEST_F
(
ASSERT_PRED2Te¡
, 
FunùiÚOnButInTy³Fau»
) {

679 
ex³ùed_to_fšish_
 = 
çl£
;

680 
	`EXPECT_FATAL_FAILURE
({

681 
	`ASSERT_PRED2
(
P»dFunùiÚ2IÁ
,

682 
n1_
++,

683 
n2_
++);

684 
fšished_
 = 
Œue
;

686 
	}
}

690 
	$TEST_F
(
ASSERT_PRED2Te¡
, 
FunùiÚOnU£rTy³Fau»
) {

691 
ex³ùed_to_fšish_
 = 
çl£
;

692 
	`EXPECT_FATAL_FAILURE
({

693 
	`ASSERT_PRED2
(
P»dFunùiÚ2BoŞ
,

694 
	`BoŞ
(
n1_
++),

695 
	`BoŞ
(
n2_
++));

696 
fšished_
 = 
Œue
;

698 
	}
}

702 
	$TEST_F
(
ASSERT_PRED2Te¡
, 
FunùÜOnButInTy³Fau»
) {

703 
ex³ùed_to_fšish_
 = 
çl£
;

704 
	`EXPECT_FATAL_FAILURE
({

705 
	`ASSERT_PRED2
(
	`P»dFunùÜ2
(),

706 
n1_
++,

707 
n2_
++);

708 
fšished_
 = 
Œue
;

710 
	}
}

714 
	$TEST_F
(
ASSERT_PRED2Te¡
, 
FunùÜOnU£rTy³Fau»
) {

715 
ex³ùed_to_fšish_
 = 
çl£
;

716 
	`EXPECT_FATAL_FAILURE
({

717 
	`ASSERT_PRED2
(
	`P»dFunùÜ2
(),

718 
	`BoŞ
(
n1_
++),

719 
	`BoŞ
(
n2_
++));

720 
fšished_
 = 
Œue
;

722 
	}
}

726 
	$TEST_F
(
EXPECT_PRED_FORMAT2Te¡
, 
FunùiÚOnButInTy³Sucûss
) {

727 
	`EXPECT_PRED_FORMAT2
(
P»dFÜm©FunùiÚ2
,

728 ++
n1_
,

729 ++
n2_
);

730 
fšished_
 = 
Œue
;

731 
	}
}

735 
	$TEST_F
(
EXPECT_PRED_FORMAT2Te¡
, 
FunùiÚOnU£rTy³Sucûss
) {

736 
	`EXPECT_PRED_FORMAT2
(
P»dFÜm©FunùiÚ2
,

737 
	`BoŞ
(++
n1_
),

738 
	`BoŞ
(++
n2_
));

739 
fšished_
 = 
Œue
;

740 
	}
}

744 
	$TEST_F
(
EXPECT_PRED_FORMAT2Te¡
, 
FunùÜOnButInTy³Sucûss
) {

745 
	`EXPECT_PRED_FORMAT2
(
	`P»dFÜm©FunùÜ2
(),

746 ++
n1_
,

747 ++
n2_
);

748 
fšished_
 = 
Œue
;

749 
	}
}

753 
	$TEST_F
(
EXPECT_PRED_FORMAT2Te¡
, 
FunùÜOnU£rTy³Sucûss
) {

754 
	`EXPECT_PRED_FORMAT2
(
	`P»dFÜm©FunùÜ2
(),

755 
	`BoŞ
(++
n1_
),

756 
	`BoŞ
(++
n2_
));

757 
fšished_
 = 
Œue
;

758 
	}
}

762 
	$TEST_F
(
EXPECT_PRED_FORMAT2Te¡
, 
FunùiÚOnButInTy³Fau»
) {

763 
	`EXPECT_NONFATAL_FAILURE
({

764 
	`EXPECT_PRED_FORMAT2
(
P»dFÜm©FunùiÚ2
,

765 
n1_
++,

766 
n2_
++);

767 
fšished_
 = 
Œue
;

769 
	}
}

773 
	$TEST_F
(
EXPECT_PRED_FORMAT2Te¡
, 
FunùiÚOnU£rTy³Fau»
) {

774 
	`EXPECT_NONFATAL_FAILURE
({

775 
	`EXPECT_PRED_FORMAT2
(
P»dFÜm©FunùiÚ2
,

776 
	`BoŞ
(
n1_
++),

777 
	`BoŞ
(
n2_
++));

778 
fšished_
 = 
Œue
;

780 
	}
}

784 
	$TEST_F
(
EXPECT_PRED_FORMAT2Te¡
, 
FunùÜOnButInTy³Fau»
) {

785 
	`EXPECT_NONFATAL_FAILURE
({

786 
	`EXPECT_PRED_FORMAT2
(
	`P»dFÜm©FunùÜ2
(),

787 
n1_
++,

788 
n2_
++);

789 
fšished_
 = 
Œue
;

791 
	}
}

795 
	$TEST_F
(
EXPECT_PRED_FORMAT2Te¡
, 
FunùÜOnU£rTy³Fau»
) {

796 
	`EXPECT_NONFATAL_FAILURE
({

797 
	`EXPECT_PRED_FORMAT2
(
	`P»dFÜm©FunùÜ2
(),

798 
	`BoŞ
(
n1_
++),

799 
	`BoŞ
(
n2_
++));

800 
fšished_
 = 
Œue
;

802 
	}
}

806 
	$TEST_F
(
ASSERT_PRED_FORMAT2Te¡
, 
FunùiÚOnButInTy³Sucûss
) {

807 
	`ASSERT_PRED_FORMAT2
(
P»dFÜm©FunùiÚ2
,

808 ++
n1_
,

809 ++
n2_
);

810 
fšished_
 = 
Œue
;

811 
	}
}

815 
	$TEST_F
(
ASSERT_PRED_FORMAT2Te¡
, 
FunùiÚOnU£rTy³Sucûss
) {

816 
	`ASSERT_PRED_FORMAT2
(
P»dFÜm©FunùiÚ2
,

817 
	`BoŞ
(++
n1_
),

818 
	`BoŞ
(++
n2_
));

819 
fšished_
 = 
Œue
;

820 
	}
}

824 
	$TEST_F
(
ASSERT_PRED_FORMAT2Te¡
, 
FunùÜOnButInTy³Sucûss
) {

825 
	`ASSERT_PRED_FORMAT2
(
	`P»dFÜm©FunùÜ2
(),

826 ++
n1_
,

827 ++
n2_
);

828 
fšished_
 = 
Œue
;

829 
	}
}

833 
	$TEST_F
(
ASSERT_PRED_FORMAT2Te¡
, 
FunùÜOnU£rTy³Sucûss
) {

834 
	`ASSERT_PRED_FORMAT2
(
	`P»dFÜm©FunùÜ2
(),

835 
	`BoŞ
(++
n1_
),

836 
	`BoŞ
(++
n2_
));

837 
fšished_
 = 
Œue
;

838 
	}
}

842 
	$TEST_F
(
ASSERT_PRED_FORMAT2Te¡
, 
FunùiÚOnButInTy³Fau»
) {

843 
ex³ùed_to_fšish_
 = 
çl£
;

844 
	`EXPECT_FATAL_FAILURE
({

845 
	`ASSERT_PRED_FORMAT2
(
P»dFÜm©FunùiÚ2
,

846 
n1_
++,

847 
n2_
++);

848 
fšished_
 = 
Œue
;

850 
	}
}

854 
	$TEST_F
(
ASSERT_PRED_FORMAT2Te¡
, 
FunùiÚOnU£rTy³Fau»
) {

855 
ex³ùed_to_fšish_
 = 
çl£
;

856 
	`EXPECT_FATAL_FAILURE
({

857 
	`ASSERT_PRED_FORMAT2
(
P»dFÜm©FunùiÚ2
,

858 
	`BoŞ
(
n1_
++),

859 
	`BoŞ
(
n2_
++));

860 
fšished_
 = 
Œue
;

862 
	}
}

866 
	$TEST_F
(
ASSERT_PRED_FORMAT2Te¡
, 
FunùÜOnButInTy³Fau»
) {

867 
ex³ùed_to_fšish_
 = 
çl£
;

868 
	`EXPECT_FATAL_FAILURE
({

869 
	`ASSERT_PRED_FORMAT2
(
	`P»dFÜm©FunùÜ2
(),

870 
n1_
++,

871 
n2_
++);

872 
fšished_
 = 
Œue
;

874 
	}
}

878 
	$TEST_F
(
ASSERT_PRED_FORMAT2Te¡
, 
FunùÜOnU£rTy³Fau»
) {

879 
ex³ùed_to_fšish_
 = 
çl£
;

880 
	`EXPECT_FATAL_FAILURE
({

881 
	`ASSERT_PRED_FORMAT2
(
	`P»dFÜm©FunùÜ2
(),

882 
	`BoŞ
(
n1_
++),

883 
	`BoŞ
(
n2_
++));

884 
fšished_
 = 
Œue
;

886 
	}
}

890 
	g‹m¶©e
 <
ty³Çme
 
	gT1
,y³Çm
	gT2
,y³Çm
	gT3
>

891 
boŞ
 
	$P»dFunùiÚ3
(
T1
 
v1
, 
T2
 
v2
, 
T3
 
v3
) {

892  
v1
 + 
v2
 + 
v3
 > 0;

893 
	}
}

897 
boŞ
 
	$P»dFunùiÚ3IÁ
(
v1
, 
v2
, 
v3
) {

898  
v1
 + 
v2
 + 
v3
 > 0;

899 
	}
}

900 
boŞ
 
	$P»dFunùiÚ3BoŞ
(
BoŞ
 
v1
, BoŞ 
v2
, BoŞ 
v3
) {

901  
v1
 + 
v2
 + 
v3
 > 0;

902 
	}
}

905 
	sP»dFunùÜ3
 {

906 
	m‹m¶©e
 <
ty³Çme
 
	mT1
,y³Çm
	mT2
,y³Çm
	mT3
>

907 
boŞ
 
İ”©Ü
()(cÚ¡ 
	mT1
& 
	mv1
,

908 cÚ¡ 
	mT2
& 
	mv2
,

909 cÚ¡ 
	mT3
& 
	mv3
) {

910  
	mv1
 + 
	mv2
 + 
	mv3
 > 0;

915 
	g‹m¶©e
 <
ty³Çme
 
	gT1
,y³Çm
	gT2
,y³Çm
	gT3
>

916 
	g‹¡šg
::
As£¹iÚResuÉ
 
	$P»dFÜm©FunùiÚ3
(cÚ¡ * 
e1
,

917 cÚ¡ * 
e2
,

918 cÚ¡ * 
e3
,

919 cÚ¡ 
T1
& 
v1
,

920 cÚ¡ 
T2
& 
v2
,

921 cÚ¡ 
T3
& 
v3
) {

922 ià(
	`P»dFunùiÚ3
(
v1
, 
v2
, 
v3
))

923  
‹¡šg
::
	`As£¹iÚSucûss
();

925  
‹¡šg
::
	`As£¹iÚFau»
()

926 << 
e1
 << " + " << 
e2
 << " + " << 
e3


928 << 
v1
 + 
v2
 + 
v3
 << ".";

929 
	}
}

932 
	sP»dFÜm©FunùÜ3
 {

933 
	m‹m¶©e
 <
ty³Çme
 
	mT1
,y³Çm
	mT2
,y³Çm
	mT3
>

934 
	m‹¡šg
::
As£¹iÚResuÉ
 
İ”©Ü
()(cÚ¡ * 
e1
,

935 cÚ¡ * 
	me2
,

936 cÚ¡ * 
	me3
,

937 cÚ¡ 
	mT1
& 
	mv1
,

938 cÚ¡ 
	mT2
& 
	mv2
,

939 cÚ¡ 
	mT3
& 
	mv3
) const {

940  
P»dFÜm©FunùiÚ3
(
e1
, 
e2
, 
e3
, 
v1
, 
v2
, 
v3
);

946 şas 
	cP»diÿ‹3Te¡
 : 
public
 
‹¡šg
::
Te¡
 {

947 
´Ùeùed
:

948 
	$S‘Up
(è
ov”ride
 {

949 
ex³ùed_to_fšish_
 = 
Œue
;

950 
fšished_
 = 
çl£
;

951 
n1_
 = 
n2_
 = 
n3_
 = 0;

954 
	$T—rDown
(è
ov”ride
 {

957 
	`EXPECT_EQ
(1, 
n1_
) <<

960 
	`EXPECT_EQ
(1, 
n2_
) <<

963 
	`EXPECT_EQ
(1, 
n3_
) <<

968 ià(
ex³ùed_to_fšish_
 && !
fšished_
) {

969 
	`FAIL
() << "The…redicate‡ssertion unexpactedly‡bortedheest.";

970 } ià(!
ex³ùed_to_fšish_
 && 
fšished_
) {

971 
	`FAIL
() << "The failed…redicate‡ssertion didn't‡bortheest "

974 
	}
}

977 
boŞ
 
	gex³ùed_to_fšish_
;

980 
boŞ
 
	gfšished_
;

982 
	gn1_
;

983 
	gn2_
;

984 
	gn3_
;

987 
boŞ
 
	gP»diÿ‹3Te¡
::
ex³ùed_to_fšish_
;

988 
boŞ
 
	gP»diÿ‹3Te¡
::
fšished_
;

989 
	gP»diÿ‹3Te¡
::
n1_
;

990 
	gP»diÿ‹3Te¡
::
n2_
;

991 
	gP»diÿ‹3Te¡
::
n3_
;

993 
P»diÿ‹3Te¡
 
	tEXPECT_PRED_FORMAT3Te¡
;

994 
P»diÿ‹3Te¡
 
	tASSERT_PRED_FORMAT3Te¡
;

995 
P»diÿ‹3Te¡
 
	tEXPECT_PRED3Te¡
;

996 
P»diÿ‹3Te¡
 
	tASSERT_PRED3Te¡
;

1000 
	$TEST_F
(
EXPECT_PRED3Te¡
, 
FunùiÚOnButInTy³Sucûss
) {

1001 
	`EXPECT_PRED3
(
P»dFunùiÚ3IÁ
,

1002 ++
n1_
,

1003 ++
n2_
,

1004 ++
n3_
);

1005 
fšished_
 = 
Œue
;

1006 
	}
}

1010 
	$TEST_F
(
EXPECT_PRED3Te¡
, 
FunùiÚOnU£rTy³Sucûss
) {

1011 
	`EXPECT_PRED3
(
P»dFunùiÚ3BoŞ
,

1012 
	`BoŞ
(++
n1_
),

1013 
	`BoŞ
(++
n2_
),

1014 
	`BoŞ
(++
n3_
));

1015 
fšished_
 = 
Œue
;

1016 
	}
}

1020 
	$TEST_F
(
EXPECT_PRED3Te¡
, 
FunùÜOnButInTy³Sucûss
) {

1021 
	`EXPECT_PRED3
(
	`P»dFunùÜ3
(),

1022 ++
n1_
,

1023 ++
n2_
,

1024 ++
n3_
);

1025 
fšished_
 = 
Œue
;

1026 
	}
}

1030 
	$TEST_F
(
EXPECT_PRED3Te¡
, 
FunùÜOnU£rTy³Sucûss
) {

1031 
	`EXPECT_PRED3
(
	`P»dFunùÜ3
(),

1032 
	`BoŞ
(++
n1_
),

1033 
	`BoŞ
(++
n2_
),

1034 
	`BoŞ
(++
n3_
));

1035 
fšished_
 = 
Œue
;

1036 
	}
}

1040 
	$TEST_F
(
EXPECT_PRED3Te¡
, 
FunùiÚOnButInTy³Fau»
) {

1041 
	`EXPECT_NONFATAL_FAILURE
({

1042 
	`EXPECT_PRED3
(
P»dFunùiÚ3IÁ
,

1043 
n1_
++,

1044 
n2_
++,

1045 
n3_
++);

1046 
fšished_
 = 
Œue
;

1048 
	}
}

1052 
	$TEST_F
(
EXPECT_PRED3Te¡
, 
FunùiÚOnU£rTy³Fau»
) {

1053 
	`EXPECT_NONFATAL_FAILURE
({

1054 
	`EXPECT_PRED3
(
P»dFunùiÚ3BoŞ
,

1055 
	`BoŞ
(
n1_
++),

1056 
	`BoŞ
(
n2_
++),

1057 
	`BoŞ
(
n3_
++));

1058 
fšished_
 = 
Œue
;

1060 
	}
}

1064 
	$TEST_F
(
EXPECT_PRED3Te¡
, 
FunùÜOnButInTy³Fau»
) {

1065 
	`EXPECT_NONFATAL_FAILURE
({

1066 
	`EXPECT_PRED3
(
	`P»dFunùÜ3
(),

1067 
n1_
++,

1068 
n2_
++,

1069 
n3_
++);

1070 
fšished_
 = 
Œue
;

1072 
	}
}

1076 
	$TEST_F
(
EXPECT_PRED3Te¡
, 
FunùÜOnU£rTy³Fau»
) {

1077 
	`EXPECT_NONFATAL_FAILURE
({

1078 
	`EXPECT_PRED3
(
	`P»dFunùÜ3
(),

1079 
	`BoŞ
(
n1_
++),

1080 
	`BoŞ
(
n2_
++),

1081 
	`BoŞ
(
n3_
++));

1082 
fšished_
 = 
Œue
;

1084 
	}
}

1088 
	$TEST_F
(
ASSERT_PRED3Te¡
, 
FunùiÚOnButInTy³Sucûss
) {

1089 
	`ASSERT_PRED3
(
P»dFunùiÚ3IÁ
,

1090 ++
n1_
,

1091 ++
n2_
,

1092 ++
n3_
);

1093 
fšished_
 = 
Œue
;

1094 
	}
}

1098 
	$TEST_F
(
ASSERT_PRED3Te¡
, 
FunùiÚOnU£rTy³Sucûss
) {

1099 
	`ASSERT_PRED3
(
P»dFunùiÚ3BoŞ
,

1100 
	`BoŞ
(++
n1_
),

1101 
	`BoŞ
(++
n2_
),

1102 
	`BoŞ
(++
n3_
));

1103 
fšished_
 = 
Œue
;

1104 
	}
}

1108 
	$TEST_F
(
ASSERT_PRED3Te¡
, 
FunùÜOnButInTy³Sucûss
) {

1109 
	`ASSERT_PRED3
(
	`P»dFunùÜ3
(),

1110 ++
n1_
,

1111 ++
n2_
,

1112 ++
n3_
);

1113 
fšished_
 = 
Œue
;

1114 
	}
}

1118 
	$TEST_F
(
ASSERT_PRED3Te¡
, 
FunùÜOnU£rTy³Sucûss
) {

1119 
	`ASSERT_PRED3
(
	`P»dFunùÜ3
(),

1120 
	`BoŞ
(++
n1_
),

1121 
	`BoŞ
(++
n2_
),

1122 
	`BoŞ
(++
n3_
));

1123 
fšished_
 = 
Œue
;

1124 
	}
}

1128 
	$TEST_F
(
ASSERT_PRED3Te¡
, 
FunùiÚOnButInTy³Fau»
) {

1129 
ex³ùed_to_fšish_
 = 
çl£
;

1130 
	`EXPECT_FATAL_FAILURE
({

1131 
	`ASSERT_PRED3
(
P»dFunùiÚ3IÁ
,

1132 
n1_
++,

1133 
n2_
++,

1134 
n3_
++);

1135 
fšished_
 = 
Œue
;

1137 
	}
}

1141 
	$TEST_F
(
ASSERT_PRED3Te¡
, 
FunùiÚOnU£rTy³Fau»
) {

1142 
ex³ùed_to_fšish_
 = 
çl£
;

1143 
	`EXPECT_FATAL_FAILURE
({

1144 
	`ASSERT_PRED3
(
P»dFunùiÚ3BoŞ
,

1145 
	`BoŞ
(
n1_
++),

1146 
	`BoŞ
(
n2_
++),

1147 
	`BoŞ
(
n3_
++));

1148 
fšished_
 = 
Œue
;

1150 
	}
}

1154 
	$TEST_F
(
ASSERT_PRED3Te¡
, 
FunùÜOnButInTy³Fau»
) {

1155 
ex³ùed_to_fšish_
 = 
çl£
;

1156 
	`EXPECT_FATAL_FAILURE
({

1157 
	`ASSERT_PRED3
(
	`P»dFunùÜ3
(),

1158 
n1_
++,

1159 
n2_
++,

1160 
n3_
++);

1161 
fšished_
 = 
Œue
;

1163 
	}
}

1167 
	$TEST_F
(
ASSERT_PRED3Te¡
, 
FunùÜOnU£rTy³Fau»
) {

1168 
ex³ùed_to_fšish_
 = 
çl£
;

1169 
	`EXPECT_FATAL_FAILURE
({

1170 
	`ASSERT_PRED3
(
	`P»dFunùÜ3
(),

1171 
	`BoŞ
(
n1_
++),

1172 
	`BoŞ
(
n2_
++),

1173 
	`BoŞ
(
n3_
++));

1174 
fšished_
 = 
Œue
;

1176 
	}
}

1180 
	$TEST_F
(
EXPECT_PRED_FORMAT3Te¡
, 
FunùiÚOnButInTy³Sucûss
) {

1181 
	`EXPECT_PRED_FORMAT3
(
P»dFÜm©FunùiÚ3
,

1182 ++
n1_
,

1183 ++
n2_
,

1184 ++
n3_
);

1185 
fšished_
 = 
Œue
;

1186 
	}
}

1190 
	$TEST_F
(
EXPECT_PRED_FORMAT3Te¡
, 
FunùiÚOnU£rTy³Sucûss
) {

1191 
	`EXPECT_PRED_FORMAT3
(
P»dFÜm©FunùiÚ3
,

1192 
	`BoŞ
(++
n1_
),

1193 
	`BoŞ
(++
n2_
),

1194 
	`BoŞ
(++
n3_
));

1195 
fšished_
 = 
Œue
;

1196 
	}
}

1200 
	$TEST_F
(
EXPECT_PRED_FORMAT3Te¡
, 
FunùÜOnButInTy³Sucûss
) {

1201 
	`EXPECT_PRED_FORMAT3
(
	`P»dFÜm©FunùÜ3
(),

1202 ++
n1_
,

1203 ++
n2_
,

1204 ++
n3_
);

1205 
fšished_
 = 
Œue
;

1206 
	}
}

1210 
	$TEST_F
(
EXPECT_PRED_FORMAT3Te¡
, 
FunùÜOnU£rTy³Sucûss
) {

1211 
	`EXPECT_PRED_FORMAT3
(
	`P»dFÜm©FunùÜ3
(),

1212 
	`BoŞ
(++
n1_
),

1213 
	`BoŞ
(++
n2_
),

1214 
	`BoŞ
(++
n3_
));

1215 
fšished_
 = 
Œue
;

1216 
	}
}

1220 
	$TEST_F
(
EXPECT_PRED_FORMAT3Te¡
, 
FunùiÚOnButInTy³Fau»
) {

1221 
	`EXPECT_NONFATAL_FAILURE
({

1222 
	`EXPECT_PRED_FORMAT3
(
P»dFÜm©FunùiÚ3
,

1223 
n1_
++,

1224 
n2_
++,

1225 
n3_
++);

1226 
fšished_
 = 
Œue
;

1228 
	}
}

1232 
	$TEST_F
(
EXPECT_PRED_FORMAT3Te¡
, 
FunùiÚOnU£rTy³Fau»
) {

1233 
	`EXPECT_NONFATAL_FAILURE
({

1234 
	`EXPECT_PRED_FORMAT3
(
P»dFÜm©FunùiÚ3
,

1235 
	`BoŞ
(
n1_
++),

1236 
	`BoŞ
(
n2_
++),

1237 
	`BoŞ
(
n3_
++));

1238 
fšished_
 = 
Œue
;

1240 
	}
}

1244 
	$TEST_F
(
EXPECT_PRED_FORMAT3Te¡
, 
FunùÜOnButInTy³Fau»
) {

1245 
	`EXPECT_NONFATAL_FAILURE
({

1246 
	`EXPECT_PRED_FORMAT3
(
	`P»dFÜm©FunùÜ3
(),

1247 
n1_
++,

1248 
n2_
++,

1249 
n3_
++);

1250 
fšished_
 = 
Œue
;

1252 
	}
}

1256 
	$TEST_F
(
EXPECT_PRED_FORMAT3Te¡
, 
FunùÜOnU£rTy³Fau»
) {

1257 
	`EXPECT_NONFATAL_FAILURE
({

1258 
	`EXPECT_PRED_FORMAT3
(
	`P»dFÜm©FunùÜ3
(),

1259 
	`BoŞ
(
n1_
++),

1260 
	`BoŞ
(
n2_
++),

1261 
	`BoŞ
(
n3_
++));

1262 
fšished_
 = 
Œue
;

1264 
	}
}

1268 
	$TEST_F
(
ASSERT_PRED_FORMAT3Te¡
, 
FunùiÚOnButInTy³Sucûss
) {

1269 
	`ASSERT_PRED_FORMAT3
(
P»dFÜm©FunùiÚ3
,

1270 ++
n1_
,

1271 ++
n2_
,

1272 ++
n3_
);

1273 
fšished_
 = 
Œue
;

1274 
	}
}

1278 
	$TEST_F
(
ASSERT_PRED_FORMAT3Te¡
, 
FunùiÚOnU£rTy³Sucûss
) {

1279 
	`ASSERT_PRED_FORMAT3
(
P»dFÜm©FunùiÚ3
,

1280 
	`BoŞ
(++
n1_
),

1281 
	`BoŞ
(++
n2_
),

1282 
	`BoŞ
(++
n3_
));

1283 
fšished_
 = 
Œue
;

1284 
	}
}

1288 
	$TEST_F
(
ASSERT_PRED_FORMAT3Te¡
, 
FunùÜOnButInTy³Sucûss
) {

1289 
	`ASSERT_PRED_FORMAT3
(
	`P»dFÜm©FunùÜ3
(),

1290 ++
n1_
,

1291 ++
n2_
,

1292 ++
n3_
);

1293 
fšished_
 = 
Œue
;

1294 
	}
}

1298 
	$TEST_F
(
ASSERT_PRED_FORMAT3Te¡
, 
FunùÜOnU£rTy³Sucûss
) {

1299 
	`ASSERT_PRED_FORMAT3
(
	`P»dFÜm©FunùÜ3
(),

1300 
	`BoŞ
(++
n1_
),

1301 
	`BoŞ
(++
n2_
),

1302 
	`BoŞ
(++
n3_
));

1303 
fšished_
 = 
Œue
;

1304 
	}
}

1308 
	$TEST_F
(
ASSERT_PRED_FORMAT3Te¡
, 
FunùiÚOnButInTy³Fau»
) {

1309 
ex³ùed_to_fšish_
 = 
çl£
;

1310 
	`EXPECT_FATAL_FAILURE
({

1311 
	`ASSERT_PRED_FORMAT3
(
P»dFÜm©FunùiÚ3
,

1312 
n1_
++,

1313 
n2_
++,

1314 
n3_
++);

1315 
fšished_
 = 
Œue
;

1317 
	}
}

1321 
	$TEST_F
(
ASSERT_PRED_FORMAT3Te¡
, 
FunùiÚOnU£rTy³Fau»
) {

1322 
ex³ùed_to_fšish_
 = 
çl£
;

1323 
	`EXPECT_FATAL_FAILURE
({

1324 
	`ASSERT_PRED_FORMAT3
(
P»dFÜm©FunùiÚ3
,

1325 
	`BoŞ
(
n1_
++),

1326 
	`BoŞ
(
n2_
++),

1327 
	`BoŞ
(
n3_
++));

1328 
fšished_
 = 
Œue
;

1330 
	}
}

1334 
	$TEST_F
(
ASSERT_PRED_FORMAT3Te¡
, 
FunùÜOnButInTy³Fau»
) {

1335 
ex³ùed_to_fšish_
 = 
çl£
;

1336 
	`EXPECT_FATAL_FAILURE
({

1337 
	`ASSERT_PRED_FORMAT3
(
	`P»dFÜm©FunùÜ3
(),

1338 
n1_
++,

1339 
n2_
++,

1340 
n3_
++);

1341 
fšished_
 = 
Œue
;

1343 
	}
}

1347 
	$TEST_F
(
ASSERT_PRED_FORMAT3Te¡
, 
FunùÜOnU£rTy³Fau»
) {

1348 
ex³ùed_to_fšish_
 = 
çl£
;

1349 
	`EXPECT_FATAL_FAILURE
({

1350 
	`ASSERT_PRED_FORMAT3
(
	`P»dFÜm©FunùÜ3
(),

1351 
	`BoŞ
(
n1_
++),

1352 
	`BoŞ
(
n2_
++),

1353 
	`BoŞ
(
n3_
++));

1354 
fšished_
 = 
Œue
;

1356 
	}
}

1360 
	g‹m¶©e
 <
ty³Çme
 
	gT1
,y³Çm
	gT2
,y³Çm
	gT3
,y³Çm
	gT4
>

1361 
boŞ
 
	$P»dFunùiÚ4
(
T1
 
v1
, 
T2
 
v2
, 
T3
 
v3
, 
T4
 
v4
) {

1362  
v1
 + 
v2
 + 
v3
 + 
v4
 > 0;

1363 
	}
}

1367 
boŞ
 
	$P»dFunùiÚ4IÁ
(
v1
, 
v2
, 
v3
, 
v4
) {

1368  
v1
 + 
v2
 + 
v3
 + 
v4
 > 0;

1369 
	}
}

1370 
boŞ
 
	$P»dFunùiÚ4BoŞ
(
BoŞ
 
v1
, BoŞ 
v2
, BoŞ 
v3
, BoŞ 
v4
) {

1371  
v1
 + 
v2
 + 
v3
 + 
v4
 > 0;

1372 
	}
}

1375 
	sP»dFunùÜ4
 {

1376 
	m‹m¶©e
 <
ty³Çme
 
	mT1
,y³Çm
	mT2
,y³Çm
	mT3
,y³Çm
	mT4
>

1377 
boŞ
 
İ”©Ü
()(cÚ¡ 
	mT1
& 
	mv1
,

1378 cÚ¡ 
	mT2
& 
	mv2
,

1379 cÚ¡ 
	mT3
& 
	mv3
,

1380 cÚ¡ 
	mT4
& 
	mv4
) {

1381  
	mv1
 + 
	mv2
 + 
	mv3
 + 
	mv4
 > 0;

1386 
	g‹m¶©e
 <
ty³Çme
 
	gT1
,y³Çm
	gT2
,y³Çm
	gT3
,y³Çm
	gT4
>

1387 
	g‹¡šg
::
As£¹iÚResuÉ
 
	$P»dFÜm©FunùiÚ4
(cÚ¡ * 
e1
,

1388 cÚ¡ * 
e2
,

1389 cÚ¡ * 
e3
,

1390 cÚ¡ * 
e4
,

1391 cÚ¡ 
T1
& 
v1
,

1392 cÚ¡ 
T2
& 
v2
,

1393 cÚ¡ 
T3
& 
v3
,

1394 cÚ¡ 
T4
& 
v4
) {

1395 ià(
	`P»dFunùiÚ4
(
v1
, 
v2
, 
v3
, 
v4
))

1396  
‹¡šg
::
	`As£¹iÚSucûss
();

1398  
‹¡šg
::
	`As£¹iÚFau»
()

1399 << 
e1
 << " + " << 
e2
 << " + " << 
e3
 << " + " << 
e4


1401 << 
v1
 + 
v2
 + 
v3
 + 
v4
 << ".";

1402 
	}
}

1405 
	sP»dFÜm©FunùÜ4
 {

1406 
	m‹m¶©e
 <
ty³Çme
 
	mT1
,y³Çm
	mT2
,y³Çm
	mT3
,y³Çm
	mT4
>

1407 
	m‹¡šg
::
As£¹iÚResuÉ
 
İ”©Ü
()(cÚ¡ * 
e1
,

1408 cÚ¡ * 
	me2
,

1409 cÚ¡ * 
	me3
,

1410 cÚ¡ * 
	me4
,

1411 cÚ¡ 
	mT1
& 
	mv1
,

1412 cÚ¡ 
	mT2
& 
	mv2
,

1413 cÚ¡ 
	mT3
& 
	mv3
,

1414 cÚ¡ 
	mT4
& 
	mv4
) const {

1415  
P»dFÜm©FunùiÚ4
(
e1
, 
e2
, 
e3
, 
e4
, 
v1
, 
v2
, 
v3
, 
v4
);

1421 şas 
	cP»diÿ‹4Te¡
 : 
public
 
‹¡šg
::
Te¡
 {

1422 
´Ùeùed
:

1423 
	$S‘Up
(è
ov”ride
 {

1424 
ex³ùed_to_fšish_
 = 
Œue
;

1425 
fšished_
 = 
çl£
;

1426 
n1_
 = 
n2_
 = 
n3_
 = 
n4_
 = 0;

1429 
	$T—rDown
(è
ov”ride
 {

1432 
	`EXPECT_EQ
(1, 
n1_
) <<

1435 
	`EXPECT_EQ
(1, 
n2_
) <<

1438 
	`EXPECT_EQ
(1, 
n3_
) <<

1441 
	`EXPECT_EQ
(1, 
n4_
) <<

1446 ià(
ex³ùed_to_fšish_
 && !
fšished_
) {

1447 
	`FAIL
() << "The…redicate‡ssertion unexpactedly‡bortedheest.";

1448 } ià(!
ex³ùed_to_fšish_
 && 
fšished_
) {

1449 
	`FAIL
() << "The failed…redicate‡ssertion didn't‡bortheest "

1452 
	}
}

1455 
boŞ
 
	gex³ùed_to_fšish_
;

1458 
boŞ
 
	gfšished_
;

1460 
	gn1_
;

1461 
	gn2_
;

1462 
	gn3_
;

1463 
	gn4_
;

1466 
boŞ
 
	gP»diÿ‹4Te¡
::
ex³ùed_to_fšish_
;

1467 
boŞ
 
	gP»diÿ‹4Te¡
::
fšished_
;

1468 
	gP»diÿ‹4Te¡
::
n1_
;

1469 
	gP»diÿ‹4Te¡
::
n2_
;

1470 
	gP»diÿ‹4Te¡
::
n3_
;

1471 
	gP»diÿ‹4Te¡
::
n4_
;

1473 
P»diÿ‹4Te¡
 
	tEXPECT_PRED_FORMAT4Te¡
;

1474 
P»diÿ‹4Te¡
 
	tASSERT_PRED_FORMAT4Te¡
;

1475 
P»diÿ‹4Te¡
 
	tEXPECT_PRED4Te¡
;

1476 
P»diÿ‹4Te¡
 
	tASSERT_PRED4Te¡
;

1480 
	$TEST_F
(
EXPECT_PRED4Te¡
, 
FunùiÚOnButInTy³Sucûss
) {

1481 
	`EXPECT_PRED4
(
P»dFunùiÚ4IÁ
,

1482 ++
n1_
,

1483 ++
n2_
,

1484 ++
n3_
,

1485 ++
n4_
);

1486 
fšished_
 = 
Œue
;

1487 
	}
}

1491 
	$TEST_F
(
EXPECT_PRED4Te¡
, 
FunùiÚOnU£rTy³Sucûss
) {

1492 
	`EXPECT_PRED4
(
P»dFunùiÚ4BoŞ
,

1493 
	`BoŞ
(++
n1_
),

1494 
	`BoŞ
(++
n2_
),

1495 
	`BoŞ
(++
n3_
),

1496 
	`BoŞ
(++
n4_
));

1497 
fšished_
 = 
Œue
;

1498 
	}
}

1502 
	$TEST_F
(
EXPECT_PRED4Te¡
, 
FunùÜOnButInTy³Sucûss
) {

1503 
	`EXPECT_PRED4
(
	`P»dFunùÜ4
(),

1504 ++
n1_
,

1505 ++
n2_
,

1506 ++
n3_
,

1507 ++
n4_
);

1508 
fšished_
 = 
Œue
;

1509 
	}
}

1513 
	$TEST_F
(
EXPECT_PRED4Te¡
, 
FunùÜOnU£rTy³Sucûss
) {

1514 
	`EXPECT_PRED4
(
	`P»dFunùÜ4
(),

1515 
	`BoŞ
(++
n1_
),

1516 
	`BoŞ
(++
n2_
),

1517 
	`BoŞ
(++
n3_
),

1518 
	`BoŞ
(++
n4_
));

1519 
fšished_
 = 
Œue
;

1520 
	}
}

1524 
	$TEST_F
(
EXPECT_PRED4Te¡
, 
FunùiÚOnButInTy³Fau»
) {

1525 
	`EXPECT_NONFATAL_FAILURE
({

1526 
	`EXPECT_PRED4
(
P»dFunùiÚ4IÁ
,

1527 
n1_
++,

1528 
n2_
++,

1529 
n3_
++,

1530 
n4_
++);

1531 
fšished_
 = 
Œue
;

1533 
	}
}

1537 
	$TEST_F
(
EXPECT_PRED4Te¡
, 
FunùiÚOnU£rTy³Fau»
) {

1538 
	`EXPECT_NONFATAL_FAILURE
({

1539 
	`EXPECT_PRED4
(
P»dFunùiÚ4BoŞ
,

1540 
	`BoŞ
(
n1_
++),

1541 
	`BoŞ
(
n2_
++),

1542 
	`BoŞ
(
n3_
++),

1543 
	`BoŞ
(
n4_
++));

1544 
fšished_
 = 
Œue
;

1546 
	}
}

1550 
	$TEST_F
(
EXPECT_PRED4Te¡
, 
FunùÜOnButInTy³Fau»
) {

1551 
	`EXPECT_NONFATAL_FAILURE
({

1552 
	`EXPECT_PRED4
(
	`P»dFunùÜ4
(),

1553 
n1_
++,

1554 
n2_
++,

1555 
n3_
++,

1556 
n4_
++);

1557 
fšished_
 = 
Œue
;

1559 
	}
}

1563 
	$TEST_F
(
EXPECT_PRED4Te¡
, 
FunùÜOnU£rTy³Fau»
) {

1564 
	`EXPECT_NONFATAL_FAILURE
({

1565 
	`EXPECT_PRED4
(
	`P»dFunùÜ4
(),

1566 
	`BoŞ
(
n1_
++),

1567 
	`BoŞ
(
n2_
++),

1568 
	`BoŞ
(
n3_
++),

1569 
	`BoŞ
(
n4_
++));

1570 
fšished_
 = 
Œue
;

1572 
	}
}

1576 
	$TEST_F
(
ASSERT_PRED4Te¡
, 
FunùiÚOnButInTy³Sucûss
) {

1577 
	`ASSERT_PRED4
(
P»dFunùiÚ4IÁ
,

1578 ++
n1_
,

1579 ++
n2_
,

1580 ++
n3_
,

1581 ++
n4_
);

1582 
fšished_
 = 
Œue
;

1583 
	}
}

1587 
	$TEST_F
(
ASSERT_PRED4Te¡
, 
FunùiÚOnU£rTy³Sucûss
) {

1588 
	`ASSERT_PRED4
(
P»dFunùiÚ4BoŞ
,

1589 
	`BoŞ
(++
n1_
),

1590 
	`BoŞ
(++
n2_
),

1591 
	`BoŞ
(++
n3_
),

1592 
	`BoŞ
(++
n4_
));

1593 
fšished_
 = 
Œue
;

1594 
	}
}

1598 
	$TEST_F
(
ASSERT_PRED4Te¡
, 
FunùÜOnButInTy³Sucûss
) {

1599 
	`ASSERT_PRED4
(
	`P»dFunùÜ4
(),

1600 ++
n1_
,

1601 ++
n2_
,

1602 ++
n3_
,

1603 ++
n4_
);

1604 
fšished_
 = 
Œue
;

1605 
	}
}

1609 
	$TEST_F
(
ASSERT_PRED4Te¡
, 
FunùÜOnU£rTy³Sucûss
) {

1610 
	`ASSERT_PRED4
(
	`P»dFunùÜ4
(),

1611 
	`BoŞ
(++
n1_
),

1612 
	`BoŞ
(++
n2_
),

1613 
	`BoŞ
(++
n3_
),

1614 
	`BoŞ
(++
n4_
));

1615 
fšished_
 = 
Œue
;

1616 
	}
}

1620 
	$TEST_F
(
ASSERT_PRED4Te¡
, 
FunùiÚOnButInTy³Fau»
) {

1621 
ex³ùed_to_fšish_
 = 
çl£
;

1622 
	`EXPECT_FATAL_FAILURE
({

1623 
	`ASSERT_PRED4
(
P»dFunùiÚ4IÁ
,

1624 
n1_
++,

1625 
n2_
++,

1626 
n3_
++,

1627 
n4_
++);

1628 
fšished_
 = 
Œue
;

1630 
	}
}

1634 
	$TEST_F
(
ASSERT_PRED4Te¡
, 
FunùiÚOnU£rTy³Fau»
) {

1635 
ex³ùed_to_fšish_
 = 
çl£
;

1636 
	`EXPECT_FATAL_FAILURE
({

1637 
	`ASSERT_PRED4
(
P»dFunùiÚ4BoŞ
,

1638 
	`BoŞ
(
n1_
++),

1639 
	`BoŞ
(
n2_
++),

1640 
	`BoŞ
(
n3_
++),

1641 
	`BoŞ
(
n4_
++));

1642 
fšished_
 = 
Œue
;

1644 
	}
}

1648 
	$TEST_F
(
ASSERT_PRED4Te¡
, 
FunùÜOnButInTy³Fau»
) {

1649 
ex³ùed_to_fšish_
 = 
çl£
;

1650 
	`EXPECT_FATAL_FAILURE
({

1651 
	`ASSERT_PRED4
(
	`P»dFunùÜ4
(),

1652 
n1_
++,

1653 
n2_
++,

1654 
n3_
++,

1655 
n4_
++);

1656 
fšished_
 = 
Œue
;

1658 
	}
}

1662 
	$TEST_F
(
ASSERT_PRED4Te¡
, 
FunùÜOnU£rTy³Fau»
) {

1663 
ex³ùed_to_fšish_
 = 
çl£
;

1664 
	`EXPECT_FATAL_FAILURE
({

1665 
	`ASSERT_PRED4
(
	`P»dFunùÜ4
(),

1666 
	`BoŞ
(
n1_
++),

1667 
	`BoŞ
(
n2_
++),

1668 
	`BoŞ
(
n3_
++),

1669 
	`BoŞ
(
n4_
++));

1670 
fšished_
 = 
Œue
;

1672 
	}
}

1676 
	$TEST_F
(
EXPECT_PRED_FORMAT4Te¡
, 
FunùiÚOnButInTy³Sucûss
) {

1677 
	`EXPECT_PRED_FORMAT4
(
P»dFÜm©FunùiÚ4
,

1678 ++
n1_
,

1679 ++
n2_
,

1680 ++
n3_
,

1681 ++
n4_
);

1682 
fšished_
 = 
Œue
;

1683 
	}
}

1687 
	$TEST_F
(
EXPECT_PRED_FORMAT4Te¡
, 
FunùiÚOnU£rTy³Sucûss
) {

1688 
	`EXPECT_PRED_FORMAT4
(
P»dFÜm©FunùiÚ4
,

1689 
	`BoŞ
(++
n1_
),

1690 
	`BoŞ
(++
n2_
),

1691 
	`BoŞ
(++
n3_
),

1692 
	`BoŞ
(++
n4_
));

1693 
fšished_
 = 
Œue
;

1694 
	}
}

1698 
	$TEST_F
(
EXPECT_PRED_FORMAT4Te¡
, 
FunùÜOnButInTy³Sucûss
) {

1699 
	`EXPECT_PRED_FORMAT4
(
	`P»dFÜm©FunùÜ4
(),

1700 ++
n1_
,

1701 ++
n2_
,

1702 ++
n3_
,

1703 ++
n4_
);

1704 
fšished_
 = 
Œue
;

1705 
	}
}

1709 
	$TEST_F
(
EXPECT_PRED_FORMAT4Te¡
, 
FunùÜOnU£rTy³Sucûss
) {

1710 
	`EXPECT_PRED_FORMAT4
(
	`P»dFÜm©FunùÜ4
(),

1711 
	`BoŞ
(++
n1_
),

1712 
	`BoŞ
(++
n2_
),

1713 
	`BoŞ
(++
n3_
),

1714 
	`BoŞ
(++
n4_
));

1715 
fšished_
 = 
Œue
;

1716 
	}
}

1720 
	$TEST_F
(
EXPECT_PRED_FORMAT4Te¡
, 
FunùiÚOnButInTy³Fau»
) {

1721 
	`EXPECT_NONFATAL_FAILURE
({

1722 
	`EXPECT_PRED_FORMAT4
(
P»dFÜm©FunùiÚ4
,

1723 
n1_
++,

1724 
n2_
++,

1725 
n3_
++,

1726 
n4_
++);

1727 
fšished_
 = 
Œue
;

1729 
	}
}

1733 
	$TEST_F
(
EXPECT_PRED_FORMAT4Te¡
, 
FunùiÚOnU£rTy³Fau»
) {

1734 
	`EXPECT_NONFATAL_FAILURE
({

1735 
	`EXPECT_PRED_FORMAT4
(
P»dFÜm©FunùiÚ4
,

1736 
	`BoŞ
(
n1_
++),

1737 
	`BoŞ
(
n2_
++),

1738 
	`BoŞ
(
n3_
++),

1739 
	`BoŞ
(
n4_
++));

1740 
fšished_
 = 
Œue
;

1742 
	}
}

1746 
	$TEST_F
(
EXPECT_PRED_FORMAT4Te¡
, 
FunùÜOnButInTy³Fau»
) {

1747 
	`EXPECT_NONFATAL_FAILURE
({

1748 
	`EXPECT_PRED_FORMAT4
(
	`P»dFÜm©FunùÜ4
(),

1749 
n1_
++,

1750 
n2_
++,

1751 
n3_
++,

1752 
n4_
++);

1753 
fšished_
 = 
Œue
;

1755 
	}
}

1759 
	$TEST_F
(
EXPECT_PRED_FORMAT4Te¡
, 
FunùÜOnU£rTy³Fau»
) {

1760 
	`EXPECT_NONFATAL_FAILURE
({

1761 
	`EXPECT_PRED_FORMAT4
(
	`P»dFÜm©FunùÜ4
(),

1762 
	`BoŞ
(
n1_
++),

1763 
	`BoŞ
(
n2_
++),

1764 
	`BoŞ
(
n3_
++),

1765 
	`BoŞ
(
n4_
++));

1766 
fšished_
 = 
Œue
;

1768 
	}
}

1772 
	$TEST_F
(
ASSERT_PRED_FORMAT4Te¡
, 
FunùiÚOnButInTy³Sucûss
) {

1773 
	`ASSERT_PRED_FORMAT4
(
P»dFÜm©FunùiÚ4
,

1774 ++
n1_
,

1775 ++
n2_
,

1776 ++
n3_
,

1777 ++
n4_
);

1778 
fšished_
 = 
Œue
;

1779 
	}
}

1783 
	$TEST_F
(
ASSERT_PRED_FORMAT4Te¡
, 
FunùiÚOnU£rTy³Sucûss
) {

1784 
	`ASSERT_PRED_FORMAT4
(
P»dFÜm©FunùiÚ4
,

1785 
	`BoŞ
(++
n1_
),

1786 
	`BoŞ
(++
n2_
),

1787 
	`BoŞ
(++
n3_
),

1788 
	`BoŞ
(++
n4_
));

1789 
fšished_
 = 
Œue
;

1790 
	}
}

1794 
	$TEST_F
(
ASSERT_PRED_FORMAT4Te¡
, 
FunùÜOnButInTy³Sucûss
) {

1795 
	`ASSERT_PRED_FORMAT4
(
	`P»dFÜm©FunùÜ4
(),

1796 ++
n1_
,

1797 ++
n2_
,

1798 ++
n3_
,

1799 ++
n4_
);

1800 
fšished_
 = 
Œue
;

1801 
	}
}

1805 
	$TEST_F
(
ASSERT_PRED_FORMAT4Te¡
, 
FunùÜOnU£rTy³Sucûss
) {

1806 
	`ASSERT_PRED_FORMAT4
(
	`P»dFÜm©FunùÜ4
(),

1807 
	`BoŞ
(++
n1_
),

1808 
	`BoŞ
(++
n2_
),

1809 
	`BoŞ
(++
n3_
),

1810 
	`BoŞ
(++
n4_
));

1811 
fšished_
 = 
Œue
;

1812 
	}
}

1816 
	$TEST_F
(
ASSERT_PRED_FORMAT4Te¡
, 
FunùiÚOnButInTy³Fau»
) {

1817 
ex³ùed_to_fšish_
 = 
çl£
;

1818 
	`EXPECT_FATAL_FAILURE
({

1819 
	`ASSERT_PRED_FORMAT4
(
P»dFÜm©FunùiÚ4
,

1820 
n1_
++,

1821 
n2_
++,

1822 
n3_
++,

1823 
n4_
++);

1824 
fšished_
 = 
Œue
;

1826 
	}
}

1830 
	$TEST_F
(
ASSERT_PRED_FORMAT4Te¡
, 
FunùiÚOnU£rTy³Fau»
) {

1831 
ex³ùed_to_fšish_
 = 
çl£
;

1832 
	`EXPECT_FATAL_FAILURE
({

1833 
	`ASSERT_PRED_FORMAT4
(
P»dFÜm©FunùiÚ4
,

1834 
	`BoŞ
(
n1_
++),

1835 
	`BoŞ
(
n2_
++),

1836 
	`BoŞ
(
n3_
++),

1837 
	`BoŞ
(
n4_
++));

1838 
fšished_
 = 
Œue
;

1840 
	}
}

1844 
	$TEST_F
(
ASSERT_PRED_FORMAT4Te¡
, 
FunùÜOnButInTy³Fau»
) {

1845 
ex³ùed_to_fšish_
 = 
çl£
;

1846 
	`EXPECT_FATAL_FAILURE
({

1847 
	`ASSERT_PRED_FORMAT4
(
	`P»dFÜm©FunùÜ4
(),

1848 
n1_
++,

1849 
n2_
++,

1850 
n3_
++,

1851 
n4_
++);

1852 
fšished_
 = 
Œue
;

1854 
	}
}

1858 
	$TEST_F
(
ASSERT_PRED_FORMAT4Te¡
, 
FunùÜOnU£rTy³Fau»
) {

1859 
ex³ùed_to_fšish_
 = 
çl£
;

1860 
	`EXPECT_FATAL_FAILURE
({

1861 
	`ASSERT_PRED_FORMAT4
(
	`P»dFÜm©FunùÜ4
(),

1862 
	`BoŞ
(
n1_
++),

1863 
	`BoŞ
(
n2_
++),

1864 
	`BoŞ
(
n3_
++),

1865 
	`BoŞ
(
n4_
++));

1866 
fšished_
 = 
Œue
;

1868 
	}
}

1872 
	g‹m¶©e
 <
ty³Çme
 
	gT1
,y³Çm
	gT2
,y³Çm
	gT3
,y³Çm
	gT4
,y³Çm
	gT5
>

1873 
boŞ
 
	$P»dFunùiÚ5
(
T1
 
v1
, 
T2
 
v2
, 
T3
 
v3
, 
T4
 
v4
, 
T5
 
v5
) {

1874  
v1
 + 
v2
 + 
v3
 + 
v4
 + 
v5
 > 0;

1875 
	}
}

1879 
boŞ
 
	$P»dFunùiÚ5IÁ
(
v1
, 
v2
, 
v3
, 
v4
, 
v5
) {

1880  
v1
 + 
v2
 + 
v3
 + 
v4
 + 
v5
 > 0;

1881 
	}
}

1882 
boŞ
 
	$P»dFunùiÚ5BoŞ
(
BoŞ
 
v1
, BoŞ 
v2
, BoŞ 
v3
, BoŞ 
v4
, BoŞ 
v5
) {

1883  
v1
 + 
v2
 + 
v3
 + 
v4
 + 
v5
 > 0;

1884 
	}
}

1887 
	sP»dFunùÜ5
 {

1888 
	m‹m¶©e
 <
ty³Çme
 
	mT1
,y³Çm
	mT2
,y³Çm
	mT3
,y³Çm
	mT4
,y³Çm
	mT5
>

1889 
boŞ
 
İ”©Ü
()(cÚ¡ 
	mT1
& 
	mv1
,

1890 cÚ¡ 
	mT2
& 
	mv2
,

1891 cÚ¡ 
	mT3
& 
	mv3
,

1892 cÚ¡ 
	mT4
& 
	mv4
,

1893 cÚ¡ 
	mT5
& 
	mv5
) {

1894  
	mv1
 + 
	mv2
 + 
	mv3
 + 
	mv4
 + 
	mv5
 > 0;

1899 
	g‹m¶©e
 <
ty³Çme
 
	gT1
,y³Çm
	gT2
,y³Çm
	gT3
,y³Çm
	gT4
,y³Çm
	gT5
>

1900 
	g‹¡šg
::
As£¹iÚResuÉ
 
	$P»dFÜm©FunùiÚ5
(cÚ¡ * 
e1
,

1901 cÚ¡ * 
e2
,

1902 cÚ¡ * 
e3
,

1903 cÚ¡ * 
e4
,

1904 cÚ¡ * 
e5
,

1905 cÚ¡ 
T1
& 
v1
,

1906 cÚ¡ 
T2
& 
v2
,

1907 cÚ¡ 
T3
& 
v3
,

1908 cÚ¡ 
T4
& 
v4
,

1909 cÚ¡ 
T5
& 
v5
) {

1910 ià(
	`P»dFunùiÚ5
(
v1
, 
v2
, 
v3
, 
v4
, 
v5
))

1911  
‹¡šg
::
	`As£¹iÚSucûss
();

1913  
‹¡šg
::
	`As£¹iÚFau»
()

1914 << 
e1
 << " + " << 
e2
 << " + " << 
e3
 << " + " << 
e4
 << " + " << 
e5


1916 << 
v1
 + 
v2
 + 
v3
 + 
v4
 + 
v5
 << ".";

1917 
	}
}

1920 
	sP»dFÜm©FunùÜ5
 {

1921 
	m‹m¶©e
 <
ty³Çme
 
	mT1
,y³Çm
	mT2
,y³Çm
	mT3
,y³Çm
	mT4
,y³Çm
	mT5
>

1922 
	m‹¡šg
::
As£¹iÚResuÉ
 
İ”©Ü
()(cÚ¡ * 
e1
,

1923 cÚ¡ * 
	me2
,

1924 cÚ¡ * 
	me3
,

1925 cÚ¡ * 
	me4
,

1926 cÚ¡ * 
	me5
,

1927 cÚ¡ 
	mT1
& 
	mv1
,

1928 cÚ¡ 
	mT2
& 
	mv2
,

1929 cÚ¡ 
	mT3
& 
	mv3
,

1930 cÚ¡ 
	mT4
& 
	mv4
,

1931 cÚ¡ 
	mT5
& 
	mv5
) const {

1932  
P»dFÜm©FunùiÚ5
(
e1
, 
e2
, 
e3
, 
e4
, 
e5
, 
v1
, 
v2
, 
v3
, 
v4
, 
v5
);

1938 şas 
	cP»diÿ‹5Te¡
 : 
public
 
‹¡šg
::
Te¡
 {

1939 
´Ùeùed
:

1940 
	$S‘Up
(è
ov”ride
 {

1941 
ex³ùed_to_fšish_
 = 
Œue
;

1942 
fšished_
 = 
çl£
;

1943 
n1_
 = 
n2_
 = 
n3_
 = 
n4_
 = 
n5_
 = 0;

1946 
	$T—rDown
(è
ov”ride
 {

1949 
	`EXPECT_EQ
(1, 
n1_
) <<

1952 
	`EXPECT_EQ
(1, 
n2_
) <<

1955 
	`EXPECT_EQ
(1, 
n3_
) <<

1958 
	`EXPECT_EQ
(1, 
n4_
) <<

1961 
	`EXPECT_EQ
(1, 
n5_
) <<

1966 ià(
ex³ùed_to_fšish_
 && !
fšished_
) {

1967 
	`FAIL
() << "The…redicate‡ssertion unexpactedly‡bortedheest.";

1968 } ià(!
ex³ùed_to_fšish_
 && 
fšished_
) {

1969 
	`FAIL
() << "The failed…redicate‡ssertion didn't‡bortheest "

1972 
	}
}

1975 
boŞ
 
	gex³ùed_to_fšish_
;

1978 
boŞ
 
	gfšished_
;

1980 
	gn1_
;

1981 
	gn2_
;

1982 
	gn3_
;

1983 
	gn4_
;

1984 
	gn5_
;

1987 
boŞ
 
	gP»diÿ‹5Te¡
::
ex³ùed_to_fšish_
;

1988 
boŞ
 
	gP»diÿ‹5Te¡
::
fšished_
;

1989 
	gP»diÿ‹5Te¡
::
n1_
;

1990 
	gP»diÿ‹5Te¡
::
n2_
;

1991 
	gP»diÿ‹5Te¡
::
n3_
;

1992 
	gP»diÿ‹5Te¡
::
n4_
;

1993 
	gP»diÿ‹5Te¡
::
n5_
;

1995 
P»diÿ‹5Te¡
 
	tEXPECT_PRED_FORMAT5Te¡
;

1996 
P»diÿ‹5Te¡
 
	tASSERT_PRED_FORMAT5Te¡
;

1997 
P»diÿ‹5Te¡
 
	tEXPECT_PRED5Te¡
;

1998 
P»diÿ‹5Te¡
 
	tASSERT_PRED5Te¡
;

2002 
	$TEST_F
(
EXPECT_PRED5Te¡
, 
FunùiÚOnButInTy³Sucûss
) {

2003 
	`EXPECT_PRED5
(
P»dFunùiÚ5IÁ
,

2004 ++
n1_
,

2005 ++
n2_
,

2006 ++
n3_
,

2007 ++
n4_
,

2008 ++
n5_
);

2009 
fšished_
 = 
Œue
;

2010 
	}
}

2014 
	$TEST_F
(
EXPECT_PRED5Te¡
, 
FunùiÚOnU£rTy³Sucûss
) {

2015 
	`EXPECT_PRED5
(
P»dFunùiÚ5BoŞ
,

2016 
	`BoŞ
(++
n1_
),

2017 
	`BoŞ
(++
n2_
),

2018 
	`BoŞ
(++
n3_
),

2019 
	`BoŞ
(++
n4_
),

2020 
	`BoŞ
(++
n5_
));

2021 
fšished_
 = 
Œue
;

2022 
	}
}

2026 
	$TEST_F
(
EXPECT_PRED5Te¡
, 
FunùÜOnButInTy³Sucûss
) {

2027 
	`EXPECT_PRED5
(
	`P»dFunùÜ5
(),

2028 ++
n1_
,

2029 ++
n2_
,

2030 ++
n3_
,

2031 ++
n4_
,

2032 ++
n5_
);

2033 
fšished_
 = 
Œue
;

2034 
	}
}

2038 
	$TEST_F
(
EXPECT_PRED5Te¡
, 
FunùÜOnU£rTy³Sucûss
) {

2039 
	`EXPECT_PRED5
(
	`P»dFunùÜ5
(),

2040 
	`BoŞ
(++
n1_
),

2041 
	`BoŞ
(++
n2_
),

2042 
	`BoŞ
(++
n3_
),

2043 
	`BoŞ
(++
n4_
),

2044 
	`BoŞ
(++
n5_
));

2045 
fšished_
 = 
Œue
;

2046 
	}
}

2050 
	$TEST_F
(
EXPECT_PRED5Te¡
, 
FunùiÚOnButInTy³Fau»
) {

2051 
	`EXPECT_NONFATAL_FAILURE
({

2052 
	`EXPECT_PRED5
(
P»dFunùiÚ5IÁ
,

2053 
n1_
++,

2054 
n2_
++,

2055 
n3_
++,

2056 
n4_
++,

2057 
n5_
++);

2058 
fšished_
 = 
Œue
;

2060 
	}
}

2064 
	$TEST_F
(
EXPECT_PRED5Te¡
, 
FunùiÚOnU£rTy³Fau»
) {

2065 
	`EXPECT_NONFATAL_FAILURE
({

2066 
	`EXPECT_PRED5
(
P»dFunùiÚ5BoŞ
,

2067 
	`BoŞ
(
n1_
++),

2068 
	`BoŞ
(
n2_
++),

2069 
	`BoŞ
(
n3_
++),

2070 
	`BoŞ
(
n4_
++),

2071 
	`BoŞ
(
n5_
++));

2072 
fšished_
 = 
Œue
;

2074 
	}
}

2078 
	$TEST_F
(
EXPECT_PRED5Te¡
, 
FunùÜOnButInTy³Fau»
) {

2079 
	`EXPECT_NONFATAL_FAILURE
({

2080 
	`EXPECT_PRED5
(
	`P»dFunùÜ5
(),

2081 
n1_
++,

2082 
n2_
++,

2083 
n3_
++,

2084 
n4_
++,

2085 
n5_
++);

2086 
fšished_
 = 
Œue
;

2088 
	}
}

2092 
	$TEST_F
(
EXPECT_PRED5Te¡
, 
FunùÜOnU£rTy³Fau»
) {

2093 
	`EXPECT_NONFATAL_FAILURE
({

2094 
	`EXPECT_PRED5
(
	`P»dFunùÜ5
(),

2095 
	`BoŞ
(
n1_
++),

2096 
	`BoŞ
(
n2_
++),

2097 
	`BoŞ
(
n3_
++),

2098 
	`BoŞ
(
n4_
++),

2099 
	`BoŞ
(
n5_
++));

2100 
fšished_
 = 
Œue
;

2102 
	}
}

2106 
	$TEST_F
(
ASSERT_PRED5Te¡
, 
FunùiÚOnButInTy³Sucûss
) {

2107 
	`ASSERT_PRED5
(
P»dFunùiÚ5IÁ
,

2108 ++
n1_
,

2109 ++
n2_
,

2110 ++
n3_
,

2111 ++
n4_
,

2112 ++
n5_
);

2113 
fšished_
 = 
Œue
;

2114 
	}
}

2118 
	$TEST_F
(
ASSERT_PRED5Te¡
, 
FunùiÚOnU£rTy³Sucûss
) {

2119 
	`ASSERT_PRED5
(
P»dFunùiÚ5BoŞ
,

2120 
	`BoŞ
(++
n1_
),

2121 
	`BoŞ
(++
n2_
),

2122 
	`BoŞ
(++
n3_
),

2123 
	`BoŞ
(++
n4_
),

2124 
	`BoŞ
(++
n5_
));

2125 
fšished_
 = 
Œue
;

2126 
	}
}

2130 
	$TEST_F
(
ASSERT_PRED5Te¡
, 
FunùÜOnButInTy³Sucûss
) {

2131 
	`ASSERT_PRED5
(
	`P»dFunùÜ5
(),

2132 ++
n1_
,

2133 ++
n2_
,

2134 ++
n3_
,

2135 ++
n4_
,

2136 ++
n5_
);

2137 
fšished_
 = 
Œue
;

2138 
	}
}

2142 
	$TEST_F
(
ASSERT_PRED5Te¡
, 
FunùÜOnU£rTy³Sucûss
) {

2143 
	`ASSERT_PRED5
(
	`P»dFunùÜ5
(),

2144 
	`BoŞ
(++
n1_
),

2145 
	`BoŞ
(++
n2_
),

2146 
	`BoŞ
(++
n3_
),

2147 
	`BoŞ
(++
n4_
),

2148 
	`BoŞ
(++
n5_
));

2149 
fšished_
 = 
Œue
;

2150 
	}
}

2154 
	$TEST_F
(
ASSERT_PRED5Te¡
, 
FunùiÚOnButInTy³Fau»
) {

2155 
ex³ùed_to_fšish_
 = 
çl£
;

2156 
	`EXPECT_FATAL_FAILURE
({

2157 
	`ASSERT_PRED5
(
P»dFunùiÚ5IÁ
,

2158 
n1_
++,

2159 
n2_
++,

2160 
n3_
++,

2161 
n4_
++,

2162 
n5_
++);

2163 
fšished_
 = 
Œue
;

2165 
	}
}

2169 
	$TEST_F
(
ASSERT_PRED5Te¡
, 
FunùiÚOnU£rTy³Fau»
) {

2170 
ex³ùed_to_fšish_
 = 
çl£
;

2171 
	`EXPECT_FATAL_FAILURE
({

2172 
	`ASSERT_PRED5
(
P»dFunùiÚ5BoŞ
,

2173 
	`BoŞ
(
n1_
++),

2174 
	`BoŞ
(
n2_
++),

2175 
	`BoŞ
(
n3_
++),

2176 
	`BoŞ
(
n4_
++),

2177 
	`BoŞ
(
n5_
++));

2178 
fšished_
 = 
Œue
;

2180 
	}
}

2184 
	$TEST_F
(
ASSERT_PRED5Te¡
, 
FunùÜOnButInTy³Fau»
) {

2185 
ex³ùed_to_fšish_
 = 
çl£
;

2186 
	`EXPECT_FATAL_FAILURE
({

2187 
	`ASSERT_PRED5
(
	`P»dFunùÜ5
(),

2188 
n1_
++,

2189 
n2_
++,

2190 
n3_
++,

2191 
n4_
++,

2192 
n5_
++);

2193 
fšished_
 = 
Œue
;

2195 
	}
}

2199 
	$TEST_F
(
ASSERT_PRED5Te¡
, 
FunùÜOnU£rTy³Fau»
) {

2200 
ex³ùed_to_fšish_
 = 
çl£
;

2201 
	`EXPECT_FATAL_FAILURE
({

2202 
	`ASSERT_PRED5
(
	`P»dFunùÜ5
(),

2203 
	`BoŞ
(
n1_
++),

2204 
	`BoŞ
(
n2_
++),

2205 
	`BoŞ
(
n3_
++),

2206 
	`BoŞ
(
n4_
++),

2207 
	`BoŞ
(
n5_
++));

2208 
fšished_
 = 
Œue
;

2210 
	}
}

2214 
	$TEST_F
(
EXPECT_PRED_FORMAT5Te¡
, 
FunùiÚOnButInTy³Sucûss
) {

2215 
	`EXPECT_PRED_FORMAT5
(
P»dFÜm©FunùiÚ5
,

2216 ++
n1_
,

2217 ++
n2_
,

2218 ++
n3_
,

2219 ++
n4_
,

2220 ++
n5_
);

2221 
fšished_
 = 
Œue
;

2222 
	}
}

2226 
	$TEST_F
(
EXPECT_PRED_FORMAT5Te¡
, 
FunùiÚOnU£rTy³Sucûss
) {

2227 
	`EXPECT_PRED_FORMAT5
(
P»dFÜm©FunùiÚ5
,

2228 
	`BoŞ
(++
n1_
),

2229 
	`BoŞ
(++
n2_
),

2230 
	`BoŞ
(++
n3_
),

2231 
	`BoŞ
(++
n4_
),

2232 
	`BoŞ
(++
n5_
));

2233 
fšished_
 = 
Œue
;

2234 
	}
}

2238 
	$TEST_F
(
EXPECT_PRED_FORMAT5Te¡
, 
FunùÜOnButInTy³Sucûss
) {

2239 
	`EXPECT_PRED_FORMAT5
(
	`P»dFÜm©FunùÜ5
(),

2240 ++
n1_
,

2241 ++
n2_
,

2242 ++
n3_
,

2243 ++
n4_
,

2244 ++
n5_
);

2245 
fšished_
 = 
Œue
;

2246 
	}
}

2250 
	$TEST_F
(
EXPECT_PRED_FORMAT5Te¡
, 
FunùÜOnU£rTy³Sucûss
) {

2251 
	`EXPECT_PRED_FORMAT5
(
	`P»dFÜm©FunùÜ5
(),

2252 
	`BoŞ
(++
n1_
),

2253 
	`BoŞ
(++
n2_
),

2254 
	`BoŞ
(++
n3_
),

2255 
	`BoŞ
(++
n4_
),

2256 
	`BoŞ
(++
n5_
));

2257 
fšished_
 = 
Œue
;

2258 
	}
}

2262 
	$TEST_F
(
EXPECT_PRED_FORMAT5Te¡
, 
FunùiÚOnButInTy³Fau»
) {

2263 
	`EXPECT_NONFATAL_FAILURE
({

2264 
	`EXPECT_PRED_FORMAT5
(
P»dFÜm©FunùiÚ5
,

2265 
n1_
++,

2266 
n2_
++,

2267 
n3_
++,

2268 
n4_
++,

2269 
n5_
++);

2270 
fšished_
 = 
Œue
;

2272 
	}
}

2276 
	$TEST_F
(
EXPECT_PRED_FORMAT5Te¡
, 
FunùiÚOnU£rTy³Fau»
) {

2277 
	`EXPECT_NONFATAL_FAILURE
({

2278 
	`EXPECT_PRED_FORMAT5
(
P»dFÜm©FunùiÚ5
,

2279 
	`BoŞ
(
n1_
++),

2280 
	`BoŞ
(
n2_
++),

2281 
	`BoŞ
(
n3_
++),

2282 
	`BoŞ
(
n4_
++),

2283 
	`BoŞ
(
n5_
++));

2284 
fšished_
 = 
Œue
;

2286 
	}
}

2290 
	$TEST_F
(
EXPECT_PRED_FORMAT5Te¡
, 
FunùÜOnButInTy³Fau»
) {

2291 
	`EXPECT_NONFATAL_FAILURE
({

2292 
	`EXPECT_PRED_FORMAT5
(
	`P»dFÜm©FunùÜ5
(),

2293 
n1_
++,

2294 
n2_
++,

2295 
n3_
++,

2296 
n4_
++,

2297 
n5_
++);

2298 
fšished_
 = 
Œue
;

2300 
	}
}

2304 
	$TEST_F
(
EXPECT_PRED_FORMAT5Te¡
, 
FunùÜOnU£rTy³Fau»
) {

2305 
	`EXPECT_NONFATAL_FAILURE
({

2306 
	`EXPECT_PRED_FORMAT5
(
	`P»dFÜm©FunùÜ5
(),

2307 
	`BoŞ
(
n1_
++),

2308 
	`BoŞ
(
n2_
++),

2309 
	`BoŞ
(
n3_
++),

2310 
	`BoŞ
(
n4_
++),

2311 
	`BoŞ
(
n5_
++));

2312 
fšished_
 = 
Œue
;

2314 
	}
}

2318 
	$TEST_F
(
ASSERT_PRED_FORMAT5Te¡
, 
FunùiÚOnButInTy³Sucûss
) {

2319 
	`ASSERT_PRED_FORMAT5
(
P»dFÜm©FunùiÚ5
,

2320 ++
n1_
,

2321 ++
n2_
,

2322 ++
n3_
,

2323 ++
n4_
,

2324 ++
n5_
);

2325 
fšished_
 = 
Œue
;

2326 
	}
}

2330 
	$TEST_F
(
ASSERT_PRED_FORMAT5Te¡
, 
FunùiÚOnU£rTy³Sucûss
) {

2331 
	`ASSERT_PRED_FORMAT5
(
P»dFÜm©FunùiÚ5
,

2332 
	`BoŞ
(++
n1_
),

2333 
	`BoŞ
(++
n2_
),

2334 
	`BoŞ
(++
n3_
),

2335 
	`BoŞ
(++
n4_
),

2336 
	`BoŞ
(++
n5_
));

2337 
fšished_
 = 
Œue
;

2338 
	}
}

2342 
	$TEST_F
(
ASSERT_PRED_FORMAT5Te¡
, 
FunùÜOnButInTy³Sucûss
) {

2343 
	`ASSERT_PRED_FORMAT5
(
	`P»dFÜm©FunùÜ5
(),

2344 ++
n1_
,

2345 ++
n2_
,

2346 ++
n3_
,

2347 ++
n4_
,

2348 ++
n5_
);

2349 
fšished_
 = 
Œue
;

2350 
	}
}

2354 
	$TEST_F
(
ASSERT_PRED_FORMAT5Te¡
, 
FunùÜOnU£rTy³Sucûss
) {

2355 
	`ASSERT_PRED_FORMAT5
(
	`P»dFÜm©FunùÜ5
(),

2356 
	`BoŞ
(++
n1_
),

2357 
	`BoŞ
(++
n2_
),

2358 
	`BoŞ
(++
n3_
),

2359 
	`BoŞ
(++
n4_
),

2360 
	`BoŞ
(++
n5_
));

2361 
fšished_
 = 
Œue
;

2362 
	}
}

2366 
	$TEST_F
(
ASSERT_PRED_FORMAT5Te¡
, 
FunùiÚOnButInTy³Fau»
) {

2367 
ex³ùed_to_fšish_
 = 
çl£
;

2368 
	`EXPECT_FATAL_FAILURE
({

2369 
	`ASSERT_PRED_FORMAT5
(
P»dFÜm©FunùiÚ5
,

2370 
n1_
++,

2371 
n2_
++,

2372 
n3_
++,

2373 
n4_
++,

2374 
n5_
++);

2375 
fšished_
 = 
Œue
;

2377 
	}
}

2381 
	$TEST_F
(
ASSERT_PRED_FORMAT5Te¡
, 
FunùiÚOnU£rTy³Fau»
) {

2382 
ex³ùed_to_fšish_
 = 
çl£
;

2383 
	`EXPECT_FATAL_FAILURE
({

2384 
	`ASSERT_PRED_FORMAT5
(
P»dFÜm©FunùiÚ5
,

2385 
	`BoŞ
(
n1_
++),

2386 
	`BoŞ
(
n2_
++),

2387 
	`BoŞ
(
n3_
++),

2388 
	`BoŞ
(
n4_
++),

2389 
	`BoŞ
(
n5_
++));

2390 
fšished_
 = 
Œue
;

2392 
	}
}

2396 
	$TEST_F
(
ASSERT_PRED_FORMAT5Te¡
, 
FunùÜOnButInTy³Fau»
) {

2397 
ex³ùed_to_fšish_
 = 
çl£
;

2398 
	`EXPECT_FATAL_FAILURE
({

2399 
	`ASSERT_PRED_FORMAT5
(
	`P»dFÜm©FunùÜ5
(),

2400 
n1_
++,

2401 
n2_
++,

2402 
n3_
++,

2403 
n4_
++,

2404 
n5_
++);

2405 
fšished_
 = 
Œue
;

2407 
	}
}

2411 
	$TEST_F
(
ASSERT_PRED_FORMAT5Te¡
, 
FunùÜOnU£rTy³Fau»
) {

2412 
ex³ùed_to_fšish_
 = 
çl£
;

2413 
	`EXPECT_FATAL_FAILURE
({

2414 
	`ASSERT_PRED_FORMAT5
(
	`P»dFÜm©FunùÜ5
(),

2415 
	`BoŞ
(
n1_
++),

2416 
	`BoŞ
(
n2_
++),

2417 
	`BoŞ
(
n3_
++),

2418 
	`BoŞ
(
n4_
++),

2419 
	`BoŞ
(
n5_
++));

2420 
fšished_
 = 
Œue
;

2422 
	}
}

	@third_party/googletest/googletest/test/gtest_premature_exit_test.cc

34 
	~<¡dio.h
>

36 
	~"g‹¡/g‹¡.h
"

38 
	gusšg
 ::
‹¡šg
::
In™GoogËTe¡
;

39 
	gusšg
 ::
‹¡šg
::
Te¡
;

40 
	gusšg
 ::
‹¡šg
::
š‹º®
::
posix
::
G‘Env
;

41 
	gusšg
 ::
‹¡šg
::
š‹º®
::
posix
::
St
;

42 
	gusšg
 ::
‹¡šg
::
š‹º®
::
posix
::
StSŒuù
;

44 
	gÇme¥aû
 {

46 şas 
	cP»m©u»Ex™Te¡
 : 
public
 
Te¡
 {

47 
public
:

49 
boŞ
 
FeExi¡s
(cÚ¡ * 
f•©h
) {

50 
StSŒuù
 
¡©
;

51  
St
(
f•©h
, &
¡©
) == 0;

54 
	g´Ùeùed
:

55 
P»m©u»Ex™Te¡
() {

56 
´em©u»_ex™_fe_·th_
 = 
G‘Env
("TEST_PREMATURE_EXIT_FILE");

59 ià(
	g´em©u»_ex™_fe_·th_
 =ğ
nuÎ±r
) {

60 
´em©u»_ex™_fe_·th_
 = "";

65 
boŞ
 
P»m©u»Ex™FeExi¡s
() const {

66  
FeExi¡s
(
´em©u»_ex™_fe_·th_
);

69 cÚ¡ * 
	g´em©u»_ex™_fe_·th_
;

72 
P»m©u»Ex™Te¡
 
	tP»m©u»Ex™D—thTe¡
;

79 
	$TEST_F
(
P»m©u»Ex™D—thTe¡
, 
FeExi¡sDuršgExecutiÚOfD—thTe¡
) {

80 ià(*
´em©u»_ex™_fe_·th_
 == '\0') {

84 
	`EXPECT_DEATH_IF_SUPPORTED
({

89 ià(
	`P»m©u»Ex™FeExi¡s
()) {

90 
	`ex™
(1);

93 
	}
}

97 
	$TEST_F
(
P»m©u»Ex™Te¡
, 
P»m©u»Ex™FeExi¡sDuršgTe¡ExecutiÚ
) {

98 ià(*
´em©u»_ex™_fe_·th_
 == '\0') {

102 
	`EXPECT_TRUE
(
	`P»m©u»Ex™FeExi¡s
())

103 << " f" << 
´em©u»_ex™_fe_·th_


105 
	}
}

109 
	$maš
(
¬gc
, **
¬gv
) {

110 
	`In™GoogËTe¡
(&
¬gc
, 
¬gv
);

111 cÚ¡ 
ex™_code
 = 
	`RUN_ALL_TESTS
();

115 cÚ¡ * cÚ¡ 
f•©h
 = 
	`G‘Env
("TEST_PREMATURE_EXIT_FILE");

116 ià(
f•©h
 !ğ
nuÎ±r
 && *filepath != '\0') {

117 ià(
P»m©u»Ex™Te¡
::
	`FeExi¡s
(
f•©h
)) {

118 
	`´štf
(

120 
f•©h
);

125  
ex™_code
;

126 
	}
}

	@third_party/googletest/googletest/test/gtest_prod_test.cc

33 
	~"´oduùiÚ.h
"

34 
	~"g‹¡/g‹¡.h
"

38 
	$TEST
(
Priv©eCodeTe¡
, 
CªAcûssPriv©eMemb”s
) {

39 
Priv©eCode
 
a
;

40 
	`EXPECT_EQ
(0, 
a
.
x_
);

42 
a
.
	`£t_x
(1);

43 
	`EXPECT_EQ
(1, 
a
.
x_
);

44 
	}
}

46 
	g‹¡šg
::
	tTe¡
 
	tPriv©eCodeFixtu»Te¡
;

50 
	$TEST_F
(
Priv©eCodeFixtu»Te¡
, 
CªAcûssPriv©eMemb”s
) {

51 
Priv©eCode
 
a
;

52 
	`EXPECT_EQ
(0, 
a
.
x_
);

54 
a
.
	`£t_x
(2);

55 
	`EXPECT_EQ
(2, 
a
.
x_
);

56 
	}
}

	@third_party/googletest/googletest/test/gtest_repeat_test.cc

33 
	~<¡dlib.h
>

34 
	~<io¡»am
>

35 
	~"g‹¡/g‹¡.h
"

36 
	~"¤c/g‹¡-š‹º®-šl.h
"

38 
Çme¥aû
 
	g‹¡šg
 {

40 
GTEST_DECLARE_¡ršg_
(
d—th_‹¡_¡yË
);

41 
GTEST_DECLARE_¡ršg_
(
f‹r
);

42 
GTEST_DECLARE_št32_
(
»³©
);

46 
usšg
 
	g‹¡šg
::
GTEST_FLAG
(
d—th_‹¡_¡yË
);

47 
usšg
 
	g‹¡šg
::
GTEST_FLAG
(
f‹r
);

48 
usšg
 
	g‹¡šg
::
GTEST_FLAG
(
»³©
);

50 
	gÇme¥aû
 {

54 
	#GTEST_CHECK_INT_EQ_
(
ex³ùed
, 
aùu®
) \

56 cÚ¡ 
ex³ùed_v®
 = (
ex³ùed
);\

57 cÚ¡ 
aùu®_v®
 = (
aùu®
);\

58 ià(::
‹¡šg
::
š‹º®
::
	`IsTrue
(
ex³ùed_v®
 !ğ
aùu®_v®
)) {\

59 ::
¡d
::
cout
 << "Value of: " #actual "\n"\

60 << " Aùu®: " << 
aùu®_v®
 << "\n"\

62 << "Which is: " << 
ex³ùed_v®
 << "\n";\

63 ::
‹¡šg
::
š‹º®
::
posix
::
	`AbÜt
();\

65 } ::
‹¡šg
::
š‹º®
::
	`AlwaysF®£
())

	)

71 
	gg_’vœÚm’t_£t_up_couÁ
 = 0;

72 
	gg_’vœÚm’t_‹¬_down_couÁ
 = 0;

74 şas 
	cMyEnvœÚm’t
 : 
public
 
‹¡šg
::
EnvœÚm’t
 {

75 
public
:

76 
MyEnvœÚm’t
() {}

77 
S‘Up
(è
ov”ride
 { 
g_’vœÚm’t_£t_up_couÁ
++; }

78 
T—rDown
(è
	gov”ride
 { 
	gg_’vœÚm’t_‹¬_down_couÁ
++; }

83 
	gg_should_ç_couÁ
 = 0;

85 
	$TEST
(
FooTe¡
, 
ShouldFa
) {

86 
g_should_ç_couÁ
++;

87 
	`EXPECT_EQ
(0, 1) << "Expected failure.";

88 
	}
}

92 
	gg_should_·ss_couÁ
 = 0;

94 
	$TEST
(
FooTe¡
, 
ShouldPass
) {

95 
g_should_·ss_couÁ
++;

96 
	}
}

101 
	gg_d—th_‹¡_couÁ
 = 0;

103 
	$TEST
(
B¬D—thTe¡
, 
Th»adSaãAndFa¡
) {

104 
g_d—th_‹¡_couÁ
++;

106 
	`GTEST_FLAG
(
d—th_‹¡_¡yË
) = "threadsafe";

107 
	`EXPECT_DEATH_IF_SUPPORTED
(::
‹¡šg
::
š‹º®
::
posix
::
	`AbÜt
(), "");

109 
	`GTEST_FLAG
(
d—th_‹¡_¡yË
) = "fast";

110 
	`EXPECT_DEATH_IF_SUPPORTED
(::
‹¡šg
::
š‹º®
::
posix
::
	`AbÜt
(), "");

111 
	}
}

113 
	gg_·¿m_‹¡_couÁ
 = 0;

115 cÚ¡ 
	gkNumb”OfP¬amTe¡s
 = 10;

117 
şass
 
	gMyP¬amTe¡
 : 
public
 
‹¡šg
::
Te¡W™hP¬am
<> {};

119 
	$TEST_P
(
MyP¬amTe¡
, 
ShouldPass
) {

120 
	`GTEST_CHECK_INT_EQ_
(
g_·¿m_‹¡_couÁ
 % 
kNumb”OfP¬amTe¡s
, 
	`G‘P¬am
());

121 
g_·¿m_‹¡_couÁ
++;

122 
	}
}

123 
INSTANTIATE_TEST_SUITE_P
(
MyP¬amSequ’û
,

124 
MyP¬amTe¡
,

125 
‹¡šg
::
Rªge
(0, 
kNumb”OfP¬amTe¡s
));

128 
	$Re£tCouÁs
() {

129 
g_’vœÚm’t_£t_up_couÁ
 = 0;

130 
g_’vœÚm’t_‹¬_down_couÁ
 = 0;

131 
g_should_ç_couÁ
 = 0;

132 
g_should_·ss_couÁ
 = 0;

133 
g_d—th_‹¡_couÁ
 = 0;

134 
g_·¿m_‹¡_couÁ
 = 0;

135 
	}
}

138 
	$CheckCouÁs
(
ex³ùed
) {

139 
	`GTEST_CHECK_INT_EQ_
(
ex³ùed
, 
g_’vœÚm’t_£t_up_couÁ
);

140 
	`GTEST_CHECK_INT_EQ_
(
ex³ùed
, 
g_’vœÚm’t_‹¬_down_couÁ
);

141 
	`GTEST_CHECK_INT_EQ_
(
ex³ùed
, 
g_should_ç_couÁ
);

142 
	`GTEST_CHECK_INT_EQ_
(
ex³ùed
, 
g_should_·ss_couÁ
);

143 
	`GTEST_CHECK_INT_EQ_
(
ex³ùed
, 
g_d—th_‹¡_couÁ
);

144 
	`GTEST_CHECK_INT_EQ_
(
ex³ùed
 * 
kNumb”OfP¬amTe¡s
, 
g_·¿m_‹¡_couÁ
);

145 
	}
}

148 
	$Te¡R•—tUn¥ecif›d
() {

149 
	`Re£tCouÁs
();

150 
	`GTEST_CHECK_INT_EQ_
(1, 
	`RUN_ALL_TESTS
());

151 
	`CheckCouÁs
(1);

152 
	}
}

155 
	$Te¡R•—t
(
»³©
) {

156 
	`GTEST_FLAG
(
»³©
) =„epeat;

158 
	`Re£tCouÁs
();

159 
	`GTEST_CHECK_INT_EQ_
(
»³©
 > 0 ? 1 : 0, 
	`RUN_ALL_TESTS
());

160 
	`CheckCouÁs
(
»³©
);

161 
	}
}

165 
	$Te¡R•—tW™hEm±yF‹r
(
»³©
) {

166 
	`GTEST_FLAG
(
»³©
) =„epeat;

167 
	`GTEST_FLAG
(
f‹r
) = "None";

169 
	`Re£tCouÁs
();

170 
	`GTEST_CHECK_INT_EQ_
(0, 
	`RUN_ALL_TESTS
());

171 
	`CheckCouÁs
(0);

172 
	}
}

176 
	$Te¡R•—tW™hF‹rFÜSucûssfulTe¡s
(
»³©
) {

177 
	`GTEST_FLAG
(
»³©
) =„epeat;

178 
	`GTEST_FLAG
(
f‹r
) = "*-*ShouldFail";

180 
	`Re£tCouÁs
();

181 
	`GTEST_CHECK_INT_EQ_
(0, 
	`RUN_ALL_TESTS
());

182 
	`GTEST_CHECK_INT_EQ_
(
»³©
, 
g_’vœÚm’t_£t_up_couÁ
);

183 
	`GTEST_CHECK_INT_EQ_
(
»³©
, 
g_’vœÚm’t_‹¬_down_couÁ
);

184 
	`GTEST_CHECK_INT_EQ_
(0, 
g_should_ç_couÁ
);

185 
	`GTEST_CHECK_INT_EQ_
(
»³©
, 
g_should_·ss_couÁ
);

186 
	`GTEST_CHECK_INT_EQ_
(
»³©
, 
g_d—th_‹¡_couÁ
);

187 
	`GTEST_CHECK_INT_EQ_
(
»³©
 * 
kNumb”OfP¬amTe¡s
, 
g_·¿m_‹¡_couÁ
);

188 
	}
}

192 
	$Te¡R•—tW™hF‹rFÜFaedTe¡s
(
»³©
) {

193 
	`GTEST_FLAG
(
»³©
) =„epeat;

194 
	`GTEST_FLAG
(
f‹r
) = "*ShouldFail";

196 
	`Re£tCouÁs
();

197 
	`GTEST_CHECK_INT_EQ_
(1, 
	`RUN_ALL_TESTS
());

198 
	`GTEST_CHECK_INT_EQ_
(
»³©
, 
g_’vœÚm’t_£t_up_couÁ
);

199 
	`GTEST_CHECK_INT_EQ_
(
»³©
, 
g_’vœÚm’t_‹¬_down_couÁ
);

200 
	`GTEST_CHECK_INT_EQ_
(
»³©
, 
g_should_ç_couÁ
);

201 
	`GTEST_CHECK_INT_EQ_
(0, 
g_should_·ss_couÁ
);

202 
	`GTEST_CHECK_INT_EQ_
(0, 
g_d—th_‹¡_couÁ
);

203 
	`GTEST_CHECK_INT_EQ_
(0, 
g_·¿m_‹¡_couÁ
);

204 
	}
}

208 
	$maš
(
¬gc
, **
¬gv
) {

209 
‹¡šg
::
	`In™GoogËTe¡
(&
¬gc
, 
¬gv
);

211 
‹¡šg
::
	`AddGlob®Te¡EnvœÚm’t
(
Ãw
 
MyEnvœÚm’t
);

213 
	`Te¡R•—tUn¥ecif›d
();

214 
	`Te¡R•—t
(0);

215 
	`Te¡R•—t
(1);

216 
	`Te¡R•—t
(5);

218 
	`Te¡R•—tW™hEm±yF‹r
(2);

219 
	`Te¡R•—tW™hEm±yF‹r
(3);

221 
	`Te¡R•—tW™hF‹rFÜSucûssfulTe¡s
(3);

223 
	`Te¡R•—tW™hF‹rFÜFaedTe¡s
(4);

231 
	`´štf
("PASS\n");

233 
	}
}

	@third_party/googletest/googletest/test/gtest_skip_in_environment_setup_test.cc

33 
	~<io¡»am
>

34 
	~"g‹¡/g‹¡.h
"

36 şas 
	cS‘upEnvœÚm’t
 : 
public
 
‹¡šg
::
EnvœÚm’t
 {

37 
public
:

38 
	$S‘Up
(è
ov”ride
 { 
	`GTEST_SKIP
() << "Skippingheƒntireƒnvironment"; }

39 
	}
};

41 
	$TEST
(
Te¡
, 
AlwaysFas
è{ 
	`EXPECT_EQ
(
Œue
, 
çl£
); 
	}
}

43 
	$maš
(
¬gc
, **
¬gv
) {

44 
‹¡šg
::
	`In™GoogËTe¡
(&
¬gc
, 
¬gv
);

46 
‹¡šg
::
	`AddGlob®Te¡EnvœÚm’t
(
Ãw
 
	`S‘upEnvœÚm’t
());

48  
	`RUN_ALL_TESTS
();

49 
	}
}

	@third_party/googletest/googletest/test/gtest_skip_test.cc

33 
	~"g‹¡/g‹¡.h
"

35 
	gusšg
 ::
‹¡šg
::
Te¡
;

37 
	$TEST
(
SkTe¡
, 
DÛsSk
) {

38 
	`GTEST_SKIP
() << "skipping singleest";

39 
	`EXPECT_EQ
(0, 1);

40 
	}
}

42 şas 
	cFixtu»
 : 
public
 
Te¡
 {

43 
´Ùeùed
:

44 
	$S‘Up
(è
ov”ride
 {

45 
	`GTEST_SKIP
() << "skipping‡llests forhis fixture";

47 
	}
};

49 
	$TEST_F
(
Fixtu»
, 
SksOÃTe¡
) {

50 
	`EXPECT_EQ
(5, 7);

51 
	}
}

53 
	$TEST_F
(
Fixtu»
, 
SksAnÙh”Te¡
) {

54 
	`EXPECT_EQ
(99, 100);

55 
	}
}

	@third_party/googletest/googletest/test/gtest_sole_header_test.cc

34 
	~"g‹¡/g‹¡.h
"

36 
	gÇme¥aû
 {

38 
Subroutše
() {

39 
EXPECT_EQ
(42, 42);

42 
TEST
(
NoF©®Fau»Te¡
, 
Ex³ùNoF©®Fau»
) {

43 
EXPECT_NO_FATAL_FAILURE
(;);

44 
EXPECT_NO_FATAL_FAILURE
(
SUCCEED
());

45 
EXPECT_NO_FATAL_FAILURE
(
Subroutše
());

46 
EXPECT_NO_FATAL_FAILURE
({ 
SUCCEED
(); });

49 
TEST
(
NoF©®Fau»Te¡
, 
As£¹NoF©®Fau»
) {

50 
ASSERT_NO_FATAL_FAILURE
(;);

51 
ASSERT_NO_FATAL_FAILURE
(
SUCCEED
());

52 
ASSERT_NO_FATAL_FAILURE
(
Subroutše
());

53 
ASSERT_NO_FATAL_FAILURE
({ 
SUCCEED
(); });

	@third_party/googletest/googletest/test/gtest_stress_test.cc

34 
	~"g‹¡/g‹¡.h
"

36 
	~<veùÜ
>

38 
	~"¤c/g‹¡-š‹º®-šl.h
"

40 #ià
GTEST_IS_THREADSAFE


42 
Çme¥aû
 
	g‹¡šg
 {

43 
	gÇme¥aû
 {

45 
usšg
 
	gš‹º®
::
NÙifiÿtiÚ
;

46 
usšg
 
	gš‹º®
::
Te¡Prİ”tyKeyIs
;

47 
usšg
 
	gš‹º®
::
Th»adW™hP¬am
;

54 cÚ¡ 
	gkTh»adCouÁ
 = 50;

56 
	g¡d
::
¡ršg
 
IdToKey
(
id
, cÚ¡ * 
suffix
) {

57 
Mes§ge
 
	gkey
;

58 
	gkey
 << "key_" << 
	gid
 << "_" << 
	gsuffix
;

59  
	gkey
.
G‘SŒšg
();

62 
	g¡d
::
¡ršg
 
IdToSŒšg
(
id
) {

63 
Mes§ge
 
id_mes§ge
;

64 
	gid_mes§ge
 << 
	gid
;

65  
	gid_mes§ge
.
G‘SŒšg
();

68 
Ex³ùKeyAndV®ueW”eRecÜdedFÜId
(

69 cÚ¡ 
¡d
::
veùÜ
<
Te¡Prİ”ty
>& 
´İ”t›s
,

70 
id
, cÚ¡ * 
suffix
) {

71 
Te¡Prİ”tyKeyIs
 
m©ches_key
(
IdToKey
(
id
, 
suffix
).
c_¡r
());

72 cÚ¡ 
	g¡d
::
veùÜ
<
Te¡Prİ”ty
>::
cÚ¡_™”©Ü
 
´İ”ty
 =

73 
¡d
::
fšd_if
(
´İ”t›s
.
begš
(),…rİ”t›s.
’d
(), 
m©ches_key
);

74 
ASSERT_TRUE
(
´İ”ty
 !ğ
´İ”t›s
.
’d
())

75 << "ex³ùšg " << 
suffix
 << " v®ufÜ id " << 
id
;

76 
EXPECT_STREQ
(
IdToSŒšg
(
id
).
c_¡r
(), 
´İ”ty
->
v®ue
());

81 
MªyAs£¹s
(
id
) {

82 
GTEST_LOG_
(
INFO
è<< "Th»ad #" << 
	gid
 << "„unning...";

84 
SCOPED_TRACE
(
Mes§ge
(è<< "Th»ad #" << 
id
);

86 
	gi
 = 0; i < 
	gkTh»adCouÁ
; i++) {

87 
SCOPED_TRACE
(
Mes§ge
(è<< "I‹¿tiÚ #" << 
i
);

90 
EXPECT_TRUE
(
Œue
);

91 
ASSERT_FALSE
(
çl£
) << "This shouldn't fail.";

92 
EXPECT_STREQ
("a", "a");

93 
ASSERT_LE
(5, 6);

94 
EXPECT_EQ
(
i
, i) << "This shouldn't fail.";

98 
	gTe¡
::
RecÜdPrİ”ty
(
IdToKey
(
id
, "¡ršg").
c_¡r
(), 
IdToSŒšg
(id).c_str());

99 
	gTe¡
::
RecÜdPrİ”ty
(
IdToKey
(
id
, "št").
c_¡r
(), id);

100 
	gTe¡
::
RecÜdPrİ”ty
("sh¬ed_key", 
IdToSŒšg
(
id
).
c_¡r
());

105 
EXPECT_LT
(
i
, 0) << "This should‡lways fail.";

109 
CheckTe¡Fau»CouÁ
(
ex³ùed_çu»s
) {

110 cÚ¡ 
Te¡Info
* cÚ¡ 
	gšfo
 = 
Un™Te¡
::
G‘In¡ªû
()->
cu¼’t_‹¡_šfo
();

111 cÚ¡ 
Te¡ResuÉ
* cÚ¡ 
	g»suÉ
 = 
šfo
->
»suÉ
();

112 
GTEST_CHECK_
(
ex³ùed_çu»s
 =ğ
»suÉ
->
tÙ®_·¹_couÁ
())

113 << "Logged " << 
»suÉ
->
tÙ®_·¹_couÁ
() << " failures "

114 << " vs. " << 
ex³ùed_çu»s
 << "ƒxpected";

119 
TEST
(
SŒessTe¡
, 
CªU£ScİedT¿ûAndAs£¹iÚsInMªyTh»ads
) {

121 
	g¡d
::
unique_±r
<
Th»adW™hP¬am
<> > 
th»ads
[
kTh»adCouÁ
];

122 
NÙifiÿtiÚ
 
	gth»ads_ÿn_¡¬t
;

123 
	gi
 = 0; i !ğ
kTh»adCouÁ
; i++)

124 
	gth»ads
[
i
].
»£t
(
Ãw
 
Th»adW™hP¬am
<>(&
MªyAs£¹s
,

125 
i
,

126 &
th»ads_ÿn_¡¬t
));

128 
	gth»ads_ÿn_¡¬t
.
NÙify
();

131 
	gi
 = 0; i !ğ
kTh»adCouÁ
; i++)

132 
	gth»ads
[
i
]->
Još
();

136 cÚ¡ 
Te¡Info
* cÚ¡ 
	gšfo
 = 
Un™Te¡
::
G‘In¡ªû
()->
cu¼’t_‹¡_šfo
();

137 cÚ¡ 
Te¡ResuÉ
* cÚ¡ 
	g»suÉ
 = 
šfo
->
»suÉ
();

139 
	g¡d
::
veùÜ
<
Te¡Prİ”ty
> 
´İ”t›s
;

142 
	gi
 = 0; i < 
	g»suÉ
->
‹¡_´İ”ty_couÁ
(); ++i)

143 
	g´İ”t›s
.
push_back
(
»suÉ
->
G‘Te¡Prİ”ty
(
i
));

145 
EXPECT_EQ
(
kTh»adCouÁ
 * 2 + 1, 
»suÉ
->
‹¡_´İ”ty_couÁ
())

148 
	gi
 = 0; i < 
	gkTh»adCouÁ
; ++i) {

149 
Ex³ùKeyAndV®ueW”eRecÜdedFÜId
(
´İ”t›s
, 
i
, "string");

150 
Ex³ùKeyAndV®ueW”eRecÜdedFÜId
(
´İ”t›s
, 
i
, "int");

152 
CheckTe¡Fau»CouÁ
(
kTh»adCouÁ
*kThreadCount);

155 
FašgTh»ad
(
boŞ
 
is_çl
) {

156 ià(
	gis_çl
)

157 
FAIL
() << "Fatal failure in some otherhread. "

160 
ADD_FAILURE
() << "Non-fatal failure in some otherhread. "

164 
G’”©eF©®Fau»InAnÙh”Th»ad
(
boŞ
 
is_çl
) {

165 
	gTh»adW™hP¬am
<
	gboŞ
> 
th»ad
(&
FašgTh»ad
, 
is_çl
, 
nuÎ±r
);

166 
	gth»ad
.
Još
();

169 
TEST
(
NoF©®Fau»Te¡
, 
Ex³ùNoF©®Fau»IgnÜesFau»sInOth”Th»ads
) {

170 
EXPECT_NO_FATAL_FAILURE
(
G’”©eF©®Fau»InAnÙh”Th»ad
(
Œue
));

174 
CheckTe¡Fau»CouÁ
(1);

177 
As£¹NoF©®Fau»IgnÜesFau»sInOth”Th»ads
() {

178 
ASSERT_NO_FATAL_FAILURE
(
G’”©eF©®Fau»InAnÙh”Th»ad
(
Œue
));

180 
TEST
(
NoF©®Fau»Te¡
, 
As£¹NoF©®Fau»IgnÜesFau»sInOth”Th»ads
) {

182 
As£¹NoF©®Fau»IgnÜesFau»sInOth”Th»ads
();

186 
CheckTe¡Fau»CouÁ
(1);

189 
TEST
(
F©®Fau»Te¡
, 
Ex³ùF©®Fau»IgnÜesFau»sInOth”Th»ads
) {

192 
EXPECT_FATAL_FAILURE
(
G’”©eF©®Fau»InAnÙh”Th»ad
(
Œue
), "expected");

193 
CheckTe¡Fau»CouÁ
(2);

196 
TEST
(
F©®Fau»OnAÎTh»adsTe¡
, 
Ex³ùF©®Fau»OnAÎTh»ads
) {

199 
EXPECT_FATAL_FAILURE_ON_ALL_THREADS
(

200 
G’”©eF©®Fau»InAnÙh”Th»ad
(
Œue
), "expected");

201 
CheckTe¡Fau»CouÁ
(0);

204 
ADD_FAILURE
() << "This is‡nƒxpected‚on-fatal failure.";

207 
TEST
(
NÚF©®Fau»Te¡
, 
Ex³ùNÚF©®Fau»IgnÜesFau»sInOth”Th»ads
) {

210 
EXPECT_NONFATAL_FAILURE
(
G’”©eF©®Fau»InAnÙh”Th»ad
(
çl£
),

212 
CheckTe¡Fau»CouÁ
(2);

215 
TEST
(
NÚF©®Fau»OnAÎTh»adsTe¡
, 
Ex³ùNÚF©®Fau»OnAÎTh»ads
) {

218 
EXPECT_NONFATAL_FAILURE_ON_ALL_THREADS
(

219 
G’”©eF©®Fau»InAnÙh”Th»ad
(
çl£
), "expected");

220 
CheckTe¡Fau»CouÁ
(0);

223 
ADD_FAILURE
() << "This is‡nƒxpected‚on-fatal failure.";

229 
	$maš
(
¬gc
, **
¬gv
) {

230 
‹¡šg
::
	`In™GoogËTe¡
(&
¬gc
, 
¬gv
);

232 cÚ¡ 
»suÉ
 = 
	`RUN_ALL_TESTS
();

233 
	`GTEST_CHECK_
(
»suÉ
 == 1) << "RUN_ALL_TESTS() did‚ot fail‡sƒxpected";

235 
	`´štf
("\nPASS\n");

237 
	}
}

240 
	$TEST
(
SŒessTe¡
,

241 
DISABLED_Th»adSaãtyTe¡sA»Sk³dWh’GoogËTe¡IsNÙTh»adSaã
) {

242 
	}
}

244 
	$maš
(
¬gc
, **
¬gv
) {

245 
‹¡šg
::
	`In™GoogËTe¡
(&
¬gc
, 
¬gv
);

246  
	`RUN_ALL_TESTS
();

247 
	}
}

	@third_party/googletest/googletest/test/gtest_test_macro_stack_footprint_test.cc

38 
	~"g‹¡/g‹¡.h
"

41 
	#TEN_TESTS_
(
‹¡_ÿ£_Çme
) \

42 
	`TEST
(
‹¡_ÿ£_Çme
, 
T0
) {} \

43 
	`TEST
(
‹¡_ÿ£_Çme
, 
T1
) {} \

44 
	`TEST
(
‹¡_ÿ£_Çme
, 
T2
) {} \

45 
	`TEST
(
‹¡_ÿ£_Çme
, 
T3
) {} \

46 
	`TEST
(
‹¡_ÿ£_Çme
, 
T4
) {} \

47 
	`TEST
(
‹¡_ÿ£_Çme
, 
T5
) {} \

48 
	`TEST
(
‹¡_ÿ£_Çme
, 
T6
) {} \

49 
	`TEST
(
‹¡_ÿ£_Çme
, 
T7
) {} \

50 
	`TEST
(
‹¡_ÿ£_Çme
, 
T8
) {} \

51 
	`TEST
(
‹¡_ÿ£_Çme
, 
T9
è{}

	)

54 
	#HUNDRED_TESTS_
(
‹¡_ÿ£_Çme_´efix
) \

55 
	`TEN_TESTS_
(
‹¡_ÿ£_Çme_´efix
 ## 0) \

56 
	`TEN_TESTS_
(
‹¡_ÿ£_Çme_´efix
 ## 1) \

57 
	`TEN_TESTS_
(
‹¡_ÿ£_Çme_´efix
 ## 2) \

58 
	`TEN_TESTS_
(
‹¡_ÿ£_Çme_´efix
 ## 3) \

59 
	`TEN_TESTS_
(
‹¡_ÿ£_Çme_´efix
 ## 4) \

60 
	`TEN_TESTS_
(
‹¡_ÿ£_Çme_´efix
 ## 5) \

61 
	`TEN_TESTS_
(
‹¡_ÿ£_Çme_´efix
 ## 6) \

62 
	`TEN_TESTS_
(
‹¡_ÿ£_Çme_´efix
 ## 7) \

63 
	`TEN_TESTS_
(
‹¡_ÿ£_Çme_´efix
 ## 8) \

64 
	`TEN_TESTS_
(
‹¡_ÿ£_Çme_´efix
 ## 9)

	)

67 
	#THOUSAND_TESTS_
(
‹¡_ÿ£_Çme_´efix
) \

68 
	`HUNDRED_TESTS_
(
‹¡_ÿ£_Çme_´efix
 ## 0) \

69 
	`HUNDRED_TESTS_
(
‹¡_ÿ£_Çme_´efix
 ## 1) \

70 
	`HUNDRED_TESTS_
(
‹¡_ÿ£_Çme_´efix
 ## 2) \

71 
	`HUNDRED_TESTS_
(
‹¡_ÿ£_Çme_´efix
 ## 3) \

72 
	`HUNDRED_TESTS_
(
‹¡_ÿ£_Çme_´efix
 ## 4) \

73 
	`HUNDRED_TESTS_
(
‹¡_ÿ£_Çme_´efix
 ## 5) \

74 
	`HUNDRED_TESTS_
(
‹¡_ÿ£_Çme_´efix
 ## 6) \

75 
	`HUNDRED_TESTS_
(
‹¡_ÿ£_Çme_´efix
 ## 7) \

76 
	`HUNDRED_TESTS_
(
‹¡_ÿ£_Çme_´efix
 ## 8) \

77 
	`HUNDRED_TESTS_
(
‹¡_ÿ£_Çme_´efix
 ## 9)

	)

81 
	$THOUSAND_TESTS_
(
T
)

83 
	$maš
(
¬gc
, **
¬gv
) {

84 
‹¡šg
::
	`In™GoogËTe¡
(&
¬gc
, 
¬gv
);

89 
	}
}

	@third_party/googletest/googletest/test/gtest_testbridge_test_.cc

34 
	~"g‹¡/g‹¡.h
"

39 
	$TEST
(
Te¡F‹rTe¡
, 
Te¡Th©Sucûeds
è{
	}
}

41 
	$TEST
(
Te¡F‹rTe¡
, 
Te¡Th©Fas
) {

42 
	`ASSERT_TRUE
(
çl£
) << "Thisest should‚ever be„un.";

43 
	}
}

	@third_party/googletest/googletest/test/gtest_throw_on_failure_ex_test.cc

33 
	~"g‹¡/g‹¡.h
"

35 
	~<¡dlib.h
>

36 
	~<¡dio.h
>

37 
	~<¡ršg.h
>

38 
	~<¡dexû±
>

44 
	$Fa
(cÚ¡ * 
msg
) {

45 
	`´štf
("FAILURE: %s\n", 
msg
);

46 
	`fæush
(
¡dout
);

47 
	`ex™
(1);

48 
	}
}

52 
	$Te¡Fau»ThrowsRuÁimeE¼Ü
() {

53 
‹¡šg
::
	`GTEST_FLAG
(
throw_Ú_çu»
èğ
Œue
;

56 
Œy
 {

57 
	`EXPECT_EQ
(3, 3);

58 } 
	`ÿtch
(...) {

59 
	`Fa
("A successful‡ssertion wrongfullyhrew.");

63 
Œy
 {

64 
	`EXPECT_EQ
(2, 3) << "Expected failure";

65 } 
	`ÿtch
(cÚ¡ 
¡d
::
ruÁime_”rÜ
& 
e
) {

66 ià(
	`¡r¡r
(
e
.
	`wh©
(), "Ex³ùed fau»"è!ğ
nuÎ±r
) ;

68 
	`´štf
("%s",

72 
	`Fa
(
e
.
	`wh©
());

73 } 
	`ÿtch
(...) {

74 
	`Fa
("A failed‡ssertionhrewhe wrongype ofƒxception.");

76 
	`Fa
("A failed‡ssertion should'vehrown but didn't.");

77 
	}
}

79 
	$maš
(
¬gc
, ** 
¬gv
) {

80 
‹¡šg
::
	`In™GoogËTe¡
(&
¬gc
, 
¬gv
);

88 
	`Te¡Fau»ThrowsRuÁimeE¼Ü
();

90 
	}
}

	@third_party/googletest/googletest/test/gtest_unittest.cc

34 
	~"g‹¡/g‹¡.h
"

39 
	$TEST
(
CommªdLšeFÏgsTe¡
, 
CªBeAcûs£dInCodeOnûGTe¡HIsInşuded
) {

40 
boŞ
 
dummy
 = 
‹¡šg
::
	`GTEST_FLAG
(
®so_run_di§bËd_‹¡s
) ||

41 
‹¡šg
::
	`GTEST_FLAG
(
b»ak_Ú_çu»
) ||

42 
‹¡šg
::
	`GTEST_FLAG
(
ÿtch_exû±iÚs
) ||

43 
‹¡šg
::
	`GTEST_FLAG
(
cŞÜ
) != "unknown" ||

44 
‹¡šg
::
	`GTEST_FLAG
(
ç_ç¡
) ||

45 
‹¡šg
::
	`GTEST_FLAG
(
f‹r
) != "unknown" ||

46 
‹¡šg
::
	`GTEST_FLAG
(
li¡_‹¡s
) ||

47 
‹¡šg
::
	`GTEST_FLAG
(
ouut
) != "unknown" ||

48 
‹¡šg
::
	`GTEST_FLAG
(
br›f
è||e¡šg::GTEST_FLAG(
´št_time
) ||

49 
‹¡šg
::
	`GTEST_FLAG
(
¿ndom_£ed
) ||

50 
‹¡šg
::
	`GTEST_FLAG
(
»³©
) > 0 ||

51 
‹¡šg
::
	`GTEST_FLAG
(
show_š‹º®_¡ack_äames
) ||

52 
‹¡šg
::
	`GTEST_FLAG
(
shufæe
) ||

53 
‹¡šg
::
	`GTEST_FLAG
(
¡ack_Œaû_d•th
) > 0 ||

54 
‹¡šg
::
	`GTEST_FLAG
(
¡»am_»suÉ_to
) != "unknown" ||

55 
‹¡šg
::
	`GTEST_FLAG
(
throw_Ú_çu»
);

56 
	`EXPECT_TRUE
(
dummy
 || !dummy);

57 
	}
}

59 
	~<lim™s.h
>

60 
	~<¡dlib.h
>

61 
	~<¡ršg.h
>

62 
	~<time.h
>

64 
	~<c¡dšt
>

65 
	~<m­
>

66 
	~<o¡»am
>

67 
	~<¡ršg
>

68 
	~<ty³_Œa™s
>

69 
	~<unÜd”ed_£t
>

70 
	~<veùÜ
>

72 
	~"g‹¡/g‹¡-¥i.h
"

73 
	~"¤c/g‹¡-š‹º®-šl.h
"

75 
Çme¥aû
 
	g‹¡šg
 {

76 
Çme¥aû
 
	gš‹º®
 {

78 #ià
GTEST_CAN_STREAM_RESULTS_


80 şas 
	cSŒ—mšgLi¡’”Te¡
 : 
public
 
Te¡
 {

81 
public
:

82 şas 
	cFakeSock‘Wr™”
 : 
public
 
SŒ—mšgLi¡’”
::
Ab¡¿ùSock‘Wr™”
 {

83 
public
:

85 
S’d
(cÚ¡ 
¡d
::
¡ršg
& 
mes§ge
è
ov”ride
 { 
ouut_
 += message; }

87 
	g¡d
::
¡ršg
 
ouut_
;

90 
SŒ—mšgLi¡’”Te¡
()

91 : 
çke_sock_wr™”_
(
Ãw
 
FakeSock‘Wr™”
),

92 
¡»am”_
(
çke_sock_wr™”_
),

93 
‹¡_šfo_obj_
("FooTe¡", "B¬", 
nuÎ±r
,‚ullptr,

94 
CodeLoÿtiÚ
(
__FILE__
, 
__LINE__
), 
nuÎ±r
,‚ullptr) {}

96 
	g´Ùeùed
:

97 
¡d
::
¡ršg
* 
ouut
(è{  &(
çke_sock_wr™”_
->
ouut_
); }

99 
FakeSock‘Wr™”
* cÚ¡ 
	gçke_sock_wr™”_
;

100 
SŒ—mšgLi¡’”
 
	g¡»am”_
;

101 
Un™Te¡
 
	gun™_‹¡_
;

102 
Te¡Info
 
	g‹¡_šfo_obj_
;

105 
TEST_F
(
SŒ—mšgLi¡’”Te¡
, 
OnTe¡Prog¿mEnd
) {

106 *
ouut
() = "";

107 
	g¡»am”_
.
OnTe¡Prog¿mEnd
(
un™_‹¡_
);

108 
EXPECT_EQ
("ev’t=Te¡Prog¿mEnd&·s£d=1\n", *
ouut
());

111 
TEST_F
(
SŒ—mšgLi¡’”Te¡
, 
OnTe¡I‹¿tiÚEnd
) {

112 *
ouut
() = "";

113 
	g¡»am”_
.
OnTe¡I‹¿tiÚEnd
(
un™_‹¡_
, 42);

114 
EXPECT_EQ
("ev’t=Te¡I‹¿tiÚEnd&·s£d=1&–­£d_time=0ms\n", *
ouut
());

117 
TEST_F
(
SŒ—mšgLi¡’”Te¡
, 
OnTe¡Ca£S¹
) {

118 *
ouut
() = "";

119 
	g¡»am”_
.
OnTe¡Ca£S¹
(
Te¡Ca£
("FooTe¡", "B¬", 
nuÎ±r
,‚ullptr));

120 
EXPECT_EQ
("ev’t=Te¡Ca£S¹&Çme=FooTe¡\n", *
ouut
());

123 
TEST_F
(
SŒ—mšgLi¡’”Te¡
, 
OnTe¡Ca£End
) {

124 *
ouut
() = "";

125 
	g¡»am”_
.
OnTe¡Ca£End
(
Te¡Ca£
("FooTe¡", "B¬", 
nuÎ±r
,‚ullptr));

126 
EXPECT_EQ
("ev’t=Te¡Ca£End&·s£d=1&–­£d_time=0ms\n", *
ouut
());

129 
TEST_F
(
SŒ—mšgLi¡’”Te¡
, 
OnTe¡S¹
) {

130 *
ouut
() = "";

131 
	g¡»am”_
.
OnTe¡S¹
(
‹¡_šfo_obj_
);

132 
EXPECT_EQ
("ev’t=Te¡S¹&Çme=B¬\n", *
ouut
());

135 
TEST_F
(
SŒ—mšgLi¡’”Te¡
, 
OnTe¡End
) {

136 *
ouut
() = "";

137 
	g¡»am”_
.
OnTe¡End
(
‹¡_šfo_obj_
);

138 
EXPECT_EQ
("ev’t=Te¡End&·s£d=1&–­£d_time=0ms\n", *
ouut
());

141 
TEST_F
(
SŒ—mšgLi¡’”Te¡
, 
OnTe¡P¬tResuÉ
) {

142 *
ouut
() = "";

143 
	g¡»am”_
.
OnTe¡P¬tResuÉ
(
Te¡P¬tResuÉ
(

144 
Te¡P¬tResuÉ
::
kF©®Fau»
, "foo.cc", 42, "failed=\n&%"));

147 
EXPECT_EQ
(

149 *
ouut
());

156 şas 
	cTe¡Ev’tLi¡’”sAcûssÜ
 {

157 
	gpublic
:

158 
Te¡Ev’tLi¡’”
* 
G‘R•—‹r
(
Te¡Ev’tLi¡’”s
* 
li¡’”s
) {

159  
li¡’”s
->
»³©”
();

162 
S‘DeçuÉResuÉPrš‹r
(
Te¡Ev’tLi¡’”s
* 
li¡’”s
,

163 
Te¡Ev’tLi¡’”
* 
li¡’”
) {

164 
	gli¡’”s
->
S‘DeçuÉResuÉPrš‹r
(
li¡’”
);

166 
S‘DeçuÉXmlG’”©Ü
(
Te¡Ev’tLi¡’”s
* 
li¡’”s
,

167 
Te¡Ev’tLi¡’”
* 
li¡’”
) {

168 
	gli¡’”s
->
S‘DeçuÉXmlG’”©Ü
(
li¡’”
);

171 
boŞ
 
Ev’tFÜw¬dšgEÇbËd
(cÚ¡ 
Te¡Ev’tLi¡’”s
& 
li¡’”s
) {

172  
	gli¡’”s
.
Ev’tFÜw¬dšgEÇbËd
();

175 
Suµ»ssEv’tFÜw¬dšg
(
Te¡Ev’tLi¡’”s
* 
li¡’”s
) {

176 
	gli¡’”s
->
Suµ»ssEv’tFÜw¬dšg
();

180 şas 
	cUn™Te¡RecÜdPrİ”tyTe¡H–³r
 : 
public
 
Te¡
 {

181 
´Ùeùed
:

182 
Un™Te¡RecÜdPrİ”tyTe¡H–³r
() {}

185 
Un™Te¡RecÜdPrİ”ty
(cÚ¡ * 
key
, cÚ¡ 
¡d
::
¡ršg
& 
v®ue
) {

186 
un™_‹¡_
.
RecÜdPrİ”ty
(
key
, 
v®ue
);

189 
Un™Te¡
 
	gun™_‹¡_
;

195 
usšg
 
	g‹¡šg
::
As£¹iÚFau»
;

196 
usšg
 
	g‹¡šg
::
As£¹iÚResuÉ
;

197 
usšg
 
	g‹¡šg
::
As£¹iÚSucûss
;

198 
usšg
 
	g‹¡šg
::
DoubËLE
;

199 
usšg
 
	g‹¡šg
::
Em±yTe¡Ev’tLi¡’”
;

200 
usšg
 
	g‹¡šg
::
EnvœÚm’t
;

201 
usšg
 
	g‹¡šg
::
FlßtLE
;

202 
usšg
 
	g‹¡šg
::
GTEST_FLAG
(
®so_run_di§bËd_‹¡s
);

203 
usšg
 
	g‹¡šg
::
GTEST_FLAG
(
b»ak_Ú_çu»
);

204 
usšg
 
	g‹¡šg
::
GTEST_FLAG
(
ÿtch_exû±iÚs
);

205 
usšg
 
	g‹¡šg
::
GTEST_FLAG
(
cŞÜ
);

206 
usšg
 
	g‹¡šg
::
GTEST_FLAG
(
d—th_‹¡_u£_fÜk
);

207 
usšg
 
	g‹¡šg
::
GTEST_FLAG
(
ç_ç¡
);

208 
usšg
 
	g‹¡šg
::
GTEST_FLAG
(
f‹r
);

209 
usšg
 
	g‹¡šg
::
GTEST_FLAG
(
li¡_‹¡s
);

210 
usšg
 
	g‹¡šg
::
GTEST_FLAG
(
ouut
);

211 
usšg
 
	g‹¡šg
::
GTEST_FLAG
(
br›f
);

212 
usšg
 
	g‹¡šg
::
GTEST_FLAG
(
´št_time
);

213 
usšg
 
	g‹¡šg
::
GTEST_FLAG
(
¿ndom_£ed
);

214 
usšg
 
	g‹¡šg
::
GTEST_FLAG
(
»³©
);

215 
usšg
 
	g‹¡šg
::
GTEST_FLAG
(
show_š‹º®_¡ack_äames
);

216 
usšg
 
	g‹¡šg
::
GTEST_FLAG
(
shufæe
);

217 
usšg
 
	g‹¡šg
::
GTEST_FLAG
(
¡ack_Œaû_d•th
);

218 
usšg
 
	g‹¡šg
::
GTEST_FLAG
(
¡»am_»suÉ_to
);

219 
usšg
 
	g‹¡šg
::
GTEST_FLAG
(
throw_Ú_çu»
);

220 
usšg
 
	g‹¡šg
::
IsNÙSub¡ršg
;

221 
usšg
 
	g‹¡šg
::
IsSub¡ršg
;

222 
usšg
 
	g‹¡šg
::
kMaxSckT¿ûD•th
;

223 
usšg
 
	g‹¡šg
::
Mes§ge
;

224 
usšg
 
	g‹¡šg
::
ScİedFakeTe¡P¬tResuÉR•Ü‹r
;

225 
usšg
 
	g‹¡šg
::
SticAs£¹Ty³Eq
;

226 
usšg
 
	g‹¡šg
::
Te¡
;

227 
usšg
 
	g‹¡šg
::
Te¡Ev’tLi¡’”s
;

228 
usšg
 
	g‹¡šg
::
Te¡Info
;

229 
usšg
 
	g‹¡šg
::
Te¡P¬tResuÉ
;

230 
usšg
 
	g‹¡šg
::
Te¡P¬tResuÉA¼ay
;

231 
usšg
 
	g‹¡šg
::
Te¡Prİ”ty
;

232 
usšg
 
	g‹¡šg
::
Te¡ResuÉ
;

233 
usšg
 
	g‹¡šg
::
Te¡Su™e
;

234 
usšg
 
	g‹¡šg
::
TimeInMlis
;

235 
usšg
 
	g‹¡šg
::
Un™Te¡
;

236 
usšg
 
	g‹¡šg
::
š‹º®
::
AlwaysF®£
;

237 
usšg
 
	g‹¡šg
::
š‹º®
::
AlwaysTrue
;

238 
usšg
 
	g‹¡šg
::
š‹º®
::
Aµ’dU£rMes§ge
;

239 
usšg
 
	g‹¡šg
::
š‹º®
::
A¼ayAw¬eFšd
;

240 
usšg
 
	g‹¡šg
::
š‹º®
::
A¼ayEq
;

241 
usšg
 
	g‹¡šg
::
š‹º®
::
CodePoštToUtf8
;

242 
usšg
 
	g‹¡šg
::
š‹º®
::
CİyA¼ay
;

243 
usšg
 
	g‹¡šg
::
š‹º®
::
CouÁIf
;

244 
usšg
 
	g‹¡šg
::
š‹º®
::
EqFau»
;

245 
usšg
 
	g‹¡šg
::
š‹º®
::
FlßtšgPošt
;

246 
usšg
 
	g‹¡šg
::
š‹º®
::
FÜEach
;

247 
usšg
 
	g‹¡šg
::
š‹º®
::
FÜm©EpochTimeInMlisAsIso8601
;

248 
usšg
 
	g‹¡šg
::
š‹º®
::
FÜm©TimeInMlisAsSecÚds
;

249 
usšg
 
	g‹¡šg
::
š‹º®
::
G‘Cu¼’tOsSckT¿ûExû±Tİ
;

250 
usšg
 
	g‹¡šg
::
š‹º®
::
G‘EËm’tOr
;

251 
usšg
 
	g‹¡šg
::
š‹º®
::
G‘NextRªdomS“d
;

252 
usšg
 
	g‹¡šg
::
š‹º®
::
G‘RªdomS“dFromFÏg
;

253 
usšg
 
	g‹¡šg
::
š‹º®
::
G‘Te¡Ty³Id
;

254 
usšg
 
	g‹¡šg
::
š‹º®
::
G‘TimeInMlis
;

255 
usšg
 
	g‹¡šg
::
š‹º®
::
G‘Ty³Id
;

256 
usšg
 
	g‹¡šg
::
š‹º®
::
G‘Un™Te¡Im¶
;

257 
usšg
 
	g‹¡šg
::
š‹º®
::
GTe¡FÏgSav”
;

258 
usšg
 
	g‹¡šg
::
š‹º®
::
HasDebugSŒšgAndShÜtDebugSŒšg
;

259 
usšg
 
	g‹¡šg
::
š‹º®
::
IÁ32FromEnvOrD›
;

260 
usšg
 
	g‹¡šg
::
š‹º®
::
IsCÚš”
;

261 
usšg
 
	g‹¡šg
::
š‹º®
::
IsCÚš”Te¡
;

262 
usšg
 
	g‹¡šg
::
š‹º®
::
IsNÙCÚš”
;

263 
usšg
 
	g‹¡šg
::
š‹º®
::
kMaxRªdomS“d
;

264 
usšg
 
	g‹¡šg
::
š‹º®
::
kTe¡Ty³IdInGoogËTe¡
;

265 
usšg
 
	g‹¡šg
::
š‹º®
::
N©iveA¼ay
;

266 
usšg
 
	g‹¡šg
::
š‹º®
::
OsSckT¿ûG‘‹r
;

267 
usšg
 
	g‹¡šg
::
š‹º®
::
OsSckT¿ûG‘‹rIÁ”çû
;

268 
usšg
 
	g‹¡šg
::
š‹º®
::
P¬£IÁ32FÏg
;

269 
usšg
 
	g‹¡šg
::
š‹º®
::
R–©iÚToSourûCİy
;

270 
usšg
 
	g‹¡šg
::
š‹º®
::
R–©iÚToSourûReã»nû
;

271 
usšg
 
	g‹¡šg
::
š‹º®
::
ShouldRunTe¡OnSh¬d
;

272 
usšg
 
	g‹¡šg
::
š‹º®
::
ShouldSh¬d
;

273 
usšg
 
	g‹¡šg
::
š‹º®
::
ShouldU£CŞÜ
;

274 
usšg
 
	g‹¡šg
::
š‹º®
::
Shufæe
;

275 
usšg
 
	g‹¡šg
::
š‹º®
::
ShufæeRªge
;

276 
usšg
 
	g‹¡šg
::
š‹º®
::
SkP»fix
;

277 
usšg
 
	g‹¡šg
::
š‹º®
::
SŒ—mabËToSŒšg
;

278 
usšg
 
	g‹¡šg
::
š‹º®
::
SŒšg
;

279 
usšg
 
	g‹¡šg
::
š‹º®
::
Te¡Ev’tLi¡’”sAcûssÜ
;

280 
usšg
 
	g‹¡šg
::
š‹º®
::
Te¡ResuÉAcûssÜ
;

281 
usšg
 
	g‹¡šg
::
š‹º®
::
Un™Te¡Im¶
;

282 
usšg
 
	g‹¡šg
::
š‹º®
::
WideSŒšgToUtf8
;

283 
usšg
 
	g‹¡šg
::
š‹º®
::
ed™_di¡ªû
::
C®cuÏ‹O±im®Ed™s
;

284 
usšg
 
	g‹¡šg
::
š‹º®
::
ed™_di¡ªû
::
C»©eUnif›dDiff
;

285 
usšg
 
	g‹¡šg
::
š‹º®
::
ed™_di¡ªû
::
Ed™Ty³
;

287 #ià
GTEST_HAS_STREAM_REDIRECTION


288 
usšg
 
	g‹¡šg
::
š‹º®
::
C­tu»Stdout
;

289 
usšg
 
	g‹¡šg
::
š‹º®
::
G‘C­tu»dStdout
;

292 #ià
GTEST_IS_THREADSAFE


293 
usšg
 
	g‹¡šg
::
š‹º®
::
Th»adW™hP¬am
;

296 
şass
 
	gTe¡šgVeùÜ
 : 
public
 
¡d
::
veùÜ
<> {

299 ::
¡d
::
o¡»am
& 
İ”©Ü
<<(::¡d::o¡»am& 
os
,

300 cÚ¡ 
	gTe¡šgVeùÜ
& 
	gveùÜ
) {

301 
	gos
 << "{ ";

302 
size_t
 
	gi
 = 0; i < 
	gveùÜ
.
size
(); i++) {

303 
	gos
 << 
	gveùÜ
[
i
] << " ";

305 
	gos
 << "}";

306  
	gos
;

310 
	gÇme¥aû
 {

312 
TEST
(
G‘RªdomS“dFromFÏgTe¡
, 
HªdËsZ”o
) {

313 cÚ¡ 
	g£ed
 = 
G‘RªdomS“dFromFÏg
(0);

314 
EXPECT_LE
(1, 
£ed
);

315 
EXPECT_LE
(
£ed
, 
¡©ic_ÿ¡
<>(
kMaxRªdomS“d
));

318 
TEST
(
G‘RªdomS“dFromFÏgTe¡
, 
P»£rvesV®idS“d
) {

319 
EXPECT_EQ
(1, 
G‘RªdomS“dFromFÏg
(1));

320 
EXPECT_EQ
(2, 
G‘RªdomS“dFromFÏg
(2));

321 
EXPECT_EQ
(
kMaxRªdomS“d
 - 1, 
G‘RªdomS“dFromFÏg
(kMaxRandomSeed - 1));

322 
EXPECT_EQ
(
¡©ic_ÿ¡
<>(
kMaxRªdomS“d
),

323 
G‘RªdomS“dFromFÏg
(
kMaxRªdomS“d
));

326 
TEST
(
G‘RªdomS“dFromFÏgTe¡
, 
NÜm®izesInv®idS“d
) {

327 cÚ¡ 
	g£ed1
 = 
G‘RªdomS“dFromFÏg
(-1);

328 
EXPECT_LE
(1, 
£ed1
);

329 
EXPECT_LE
(
£ed1
, 
¡©ic_ÿ¡
<>(
kMaxRªdomS“d
));

331 cÚ¡ 
	g£ed2
 = 
G‘RªdomS“dFromFÏg
(
kMaxRªdomS“d
 + 1);

332 
EXPECT_LE
(1, 
£ed2
);

333 
EXPECT_LE
(
£ed2
, 
¡©ic_ÿ¡
<>(
kMaxRªdomS“d
));

336 
TEST
(
G‘NextRªdomS“dTe¡
, 
WÜksFÜV®idIÅut
) {

337 
EXPECT_EQ
(2, 
G‘NextRªdomS“d
(1));

338 
EXPECT_EQ
(3, 
G‘NextRªdomS“d
(2));

339 
EXPECT_EQ
(
¡©ic_ÿ¡
<>(
kMaxRªdomS“d
),

340 
G‘NextRªdomS“d
(
kMaxRªdomS“d
 - 1));

341 
EXPECT_EQ
(1, 
G‘NextRªdomS“d
(
kMaxRªdomS“d
));

349 
CË¬Cu¼’tTe¡P¬tResuÉs
() {

350 
	gTe¡ResuÉAcûssÜ
::
CË¬Te¡P¬tResuÉs
(

351 
G‘Un™Te¡Im¶
()->
cu¼’t_‹¡_»suÉ
());

356 
TEST
(
G‘Ty³IdTe¡
, 
R‘uºsSameV®ueFÜSameTy³
) {

357 
EXPECT_EQ
(
G‘Ty³Id
<>(), GetTypeId<>());

358 
EXPECT_EQ
(
G‘Ty³Id
<
Te¡
>(), GetTypeId<Test>());

361 şas 
	cSubCÏssOfTe¡
 : 
public
 
Te¡
 {};

362 şas 
	cAnÙh”SubCÏssOfTe¡
 : 
public
 
Te¡
 {};

364 
	$TEST
(
G‘Ty³IdTe¡
, 
R‘uºsDifã»ÁV®uesFÜDifã»ÁTy³s
) {

365 
	`EXPECT_NE
(
G‘Ty³Id
<>(), GetTypeId<const >());

366 
	`EXPECT_NE
(
G‘Ty³Id
<>(), GetTypeId<>());

367 
	`EXPECT_NE
(
G‘Ty³Id
<>(), 
	`G‘Te¡Ty³Id
());

368 
	`EXPECT_NE
(
G‘Ty³Id
<
SubCÏssOfTe¡
>(), 
	`G‘Te¡Ty³Id
());

369 
	`EXPECT_NE
(
G‘Ty³Id
<
AnÙh”SubCÏssOfTe¡
>(), 
	`G‘Te¡Ty³Id
());

370 
	`EXPECT_NE
(
G‘Ty³Id
<
AnÙh”SubCÏssOfTe¡
>(), G‘Ty³Id<
SubCÏssOfTe¡
>());

371 
	}
}

375 
	$TEST
(
G‘Te¡Ty³IdTe¡
, 
R‘uºsTheSameV®ueInsideOrOutsideOfGoogËTe¡
) {

376 
	`EXPECT_EQ
(
kTe¡Ty³IdInGoogËTe¡
, 
	`G‘Te¡Ty³Id
());

377 
	}
}

381 
	gusšg
 ::
‹¡šg
::
š‹º®
::
CªÚiÿlizeFÜStdLibV”siÚšg
;

383 
	$TEST
(
CªÚiÿlizeFÜStdLibV”siÚšg
, 
L—vesUnv”siÚedNamesUnchªged
) {

384 
	`EXPECT_EQ
("¡d::bšd", 
	`CªÚiÿlizeFÜStdLibV”siÚšg
("std::bind"));

385 
	`EXPECT_EQ
("¡d::_", 
	`CªÚiÿlizeFÜStdLibV”siÚšg
("std::_"));

386 
	`EXPECT_EQ
("¡d::__foo", 
	`CªÚiÿlizeFÜStdLibV”siÚšg
("std::__foo"));

387 
	`EXPECT_EQ
("g::__1::x", 
	`CªÚiÿlizeFÜStdLibV”siÚšg
("gtl::__1::x"));

388 
	`EXPECT_EQ
("__1::x", 
	`CªÚiÿlizeFÜStdLibV”siÚšg
("__1::x"));

389 
	`EXPECT_EQ
("::__1::x", 
	`CªÚiÿlizeFÜStdLibV”siÚšg
("::__1::x"));

390 
	}
}

392 
	$TEST
(
CªÚiÿlizeFÜStdLibV”siÚšg
, 
ElidesDoubËUnd”Names
) {

393 
	`EXPECT_EQ
("¡d::bšd", 
	`CªÚiÿlizeFÜStdLibV”siÚšg
("std::__1::bind"));

394 
	`EXPECT_EQ
("¡d::_", 
	`CªÚiÿlizeFÜStdLibV”siÚšg
("std::__1::_"));

396 
	`EXPECT_EQ
("¡d::bšd", 
	`CªÚiÿlizeFÜStdLibV”siÚšg
("std::__g::bind"));

397 
	`EXPECT_EQ
("¡d::_", 
	`CªÚiÿlizeFÜStdLibV”siÚšg
("std::__g::_"));

399 
	`EXPECT_EQ
("std::bind",

400 
	`CªÚiÿlizeFÜStdLibV”siÚšg
("std::__google::bind"));

401 
	`EXPECT_EQ
("¡d::_", 
	`CªÚiÿlizeFÜStdLibV”siÚšg
("std::__google::_"));

402 
	}
}

406 
	$TEST
(
FÜm©TimeInMlisAsSecÚdsTe¡
, 
FÜm©sZ”o
) {

407 
	`EXPECT_EQ
("0", 
	`FÜm©TimeInMlisAsSecÚds
(0));

408 
	}
}

410 
	$TEST
(
FÜm©TimeInMlisAsSecÚdsTe¡
, 
FÜm©sPos™iveNumb”
) {

411 
	`EXPECT_EQ
("0.003", 
	`FÜm©TimeInMlisAsSecÚds
(3));

412 
	`EXPECT_EQ
("0.01", 
	`FÜm©TimeInMlisAsSecÚds
(10));

413 
	`EXPECT_EQ
("0.2", 
	`FÜm©TimeInMlisAsSecÚds
(200));

414 
	`EXPECT_EQ
("1.2", 
	`FÜm©TimeInMlisAsSecÚds
(1200));

415 
	`EXPECT_EQ
("3", 
	`FÜm©TimeInMlisAsSecÚds
(3000));

416 
	}
}

418 
	$TEST
(
FÜm©TimeInMlisAsSecÚdsTe¡
, 
FÜm©sNeg©iveNumb”
) {

419 
	`EXPECT_EQ
("-0.003", 
	`FÜm©TimeInMlisAsSecÚds
(-3));

420 
	`EXPECT_EQ
("-0.01", 
	`FÜm©TimeInMlisAsSecÚds
(-10));

421 
	`EXPECT_EQ
("-0.2", 
	`FÜm©TimeInMlisAsSecÚds
(-200));

422 
	`EXPECT_EQ
("-1.2", 
	`FÜm©TimeInMlisAsSecÚds
(-1200));

423 
	`EXPECT_EQ
("-3", 
	`FÜm©TimeInMlisAsSecÚds
(-3000));

424 
	}
}

432 şas 
	cFÜm©EpochTimeInMlisAsIso8601Te¡
 : 
public
 
Te¡
 {

433 
public
:

437 cÚ¡ 
TimeInMlis
 
kMlisP”Sec
 = 1000;

439 
	g´iv©e
:

440 
S‘Up
(è
ov”ride
 {

441 
§ved_tz_
 = 
nuÎ±r
;

443 
GTEST_DISABLE_MSC_DEPRECATED_PUSH_
( )

444 ià(
g‘’v
("TZ"))

445 
	g§ved_tz_
 = 
¡rdup
(
g‘’v
("TZ"));

446 
GTEST_DISABLE_MSC_DEPRECATED_POP_
()

451 
S‘TimeZÚe
("UTC+00");

454 
T—rDown
(è
	gov”ride
 {

455 
S‘TimeZÚe
(
§ved_tz_
);

456 
ä“
(
cÚ¡_ÿ¡
<*>(
§ved_tz_
));

457 
	g§ved_tz_
 = 
nuÎ±r
;

460 
S‘TimeZÚe
(cÚ¡ * 
time_zÚe
) {

464 #ià
_MSC_VER
 || 
GTEST_OS_WINDOWS_MINGW


467 cÚ¡ 
	g¡d
::
¡ršg
 
’v_v¬
 =

468 
¡d
::
¡ršg
("TZ="è+ (
time_zÚe
 ?ime_zone : "");

469 
_pu‹nv
(
’v_v¬
.
c_¡r
());

470 
GTEST_DISABLE_MSC_WARNINGS_PUSH_
(4996 )

471 
tz£t
();

472 
GTEST_DISABLE_MSC_WARNINGS_POP_
()

474 ià(
	gtime_zÚe
) {

475 
£‹nv
(("TZ"), 
time_zÚe
, 1);

477 
un£‹nv
("TZ");

479 
tz£t
();

483 cÚ¡ * 
	g§ved_tz_
;

486 cÚ¡ 
TimeInMlis
 
	gFÜm©EpochTimeInMlisAsIso8601Te¡
::
kMlisP”Sec
;

488 
	$TEST_F
(
FÜm©EpochTimeInMlisAsIso8601Te¡
, 
PrštsTwoDig™Segm’ts
) {

489 
	`EXPECT_EQ
("2011-10-31T18:52:42.000",

490 
	`FÜm©EpochTimeInMlisAsIso8601
(1320087162 * 
kMlisP”Sec
));

491 
	}
}

493 
	$TEST_F
(
FÜm©EpochTimeInMlisAsIso8601Te¡
, 
InşudesMli£cÚdsAá”DÙ
) {

494 
	`EXPECT_EQ
(

496 
	`FÜm©EpochTimeInMlisAsIso8601
(1320087162 * 
kMlisP”Sec
 + 234));

497 
	}
}

499 
	$TEST_F
(
FÜm©EpochTimeInMlisAsIso8601Te¡
, 
PrštsL—dšgZ”Ûs
) {

500 
	`EXPECT_EQ
("2011-09-03T05:07:02.000",

501 
	`FÜm©EpochTimeInMlisAsIso8601
(1315026422 * 
kMlisP”Sec
));

502 
	}
}

504 
	$TEST_F
(
FÜm©EpochTimeInMlisAsIso8601Te¡
, 
Pršts24HourTime
) {

505 
	`EXPECT_EQ
("2011-09-28T17:08:22.000",

506 
	`FÜm©EpochTimeInMlisAsIso8601
(1317229702 * 
kMlisP”Sec
));

507 
	}
}

509 
	$TEST_F
(
FÜm©EpochTimeInMlisAsIso8601Te¡
, 
PrštsEpochS¹
) {

510 
	`EXPECT_EQ
("1970-01-01T00:00:00.000", 
	`FÜm©EpochTimeInMlisAsIso8601
(0));

511 
	}
}

513 #ifdeà
__BORLANDC__


515 #´agm¨
İtiÚ
 
push
 -
w
-
ccc
 -w-
rch


520 
	$TEST
(
NuÎL™”®Te¡
, 
LHSAÎowsNuÎL™”®s
) {

521 
	`EXPECT_EQ
(0, 
¡©ic_ÿ¡
<*>(
nuÎ±r
));

522 
	`ASSERT_EQ
(0, 
¡©ic_ÿ¡
<*>(
nuÎ±r
));

523 
	`EXPECT_EQ
(
NULL
, 
¡©ic_ÿ¡
<*>(
nuÎ±r
));

524 
	`ASSERT_EQ
(
NULL
, 
¡©ic_ÿ¡
<*>(
nuÎ±r
));

525 
	`EXPECT_EQ
(
nuÎ±r
, 
¡©ic_ÿ¡
<*>(nullptr));

526 
	`ASSERT_EQ
(
nuÎ±r
, 
¡©ic_ÿ¡
<*>(nullptr));

528 cÚ¡ * cÚ¡ 
p
 = 
nuÎ±r
;

529 
	`EXPECT_EQ
(0, 
p
);

530 
	`ASSERT_EQ
(0, 
p
);

531 
	`EXPECT_EQ
(
NULL
, 
p
);

532 
	`ASSERT_EQ
(
NULL
, 
p
);

533 
	`EXPECT_EQ
(
nuÎ±r
, 
p
);

534 
	`ASSERT_EQ
(
nuÎ±r
, 
p
);

535 
	}
}

537 
	sCÚv”tToAÎ
 {

538 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

539 
İ”©Ü
 
T
() const {

540  
T
();

544 
	sCÚv”tToPoš‹r
 {

545 
	g‹m¶©e
 <
şass
 
	gT
>

546 
İ”©Ü
 
	gT
*() const {

547  
	gnuÎ±r
;

551 
	sCÚv”tToAÎButNoPoš‹rs
 {

552 
	g‹m¶©e
 <
ty³Çme
 
	gT
,

553 
ty³Çme
 
	g¡d
::
’abË_if
<!
¡d
::
is_poš‹r
<
T
>::
v®ue
, >::
ty³
 = 0>

554 
İ”©Ü
 
T
() const {

555  
T
();

559 
	sMyTy³
 {};

560 
šlše
 
boŞ
 
	gİ”©Ü
==(
MyTy³
 cÚ¡&, MyTy³ cÚ¡&è{  
	gŒue
; }

562 
	$TEST
(
NuÎL™”®Te¡
, 
Im¶ic™CÚv”siÚ
) {

563 
	`EXPECT_EQ
(
CÚv”tToPoš‹r
{}, 
¡©ic_ÿ¡
<*>(
nuÎ±r
));

564 #ià!
	`defšed
(
__GNUC__
è|| defšed(
__şªg__
)

566 
	`EXPECT_EQ
(
CÚv”tToAÎ
{}, 
¡©ic_ÿ¡
<*>(
nuÎ±r
));

568 
	`EXPECT_EQ
(
CÚv”tToAÎ
{}, 
MyTy³
{});

569 
	`EXPECT_EQ
(
CÚv”tToAÎButNoPoš‹rs
{}, 
MyTy³
{});

570 
	}
}

572 #ifdeà
__şªg__


573 #´agm¨
şªg
 
dŸgno¡ic
 
push


574 #ià
__has_w¬nšg
("-Wzero-as-null-pointer-constant")

575 #´agm¨
şªg
 
dŸgno¡ic
 
”rÜ
 "-Wzero-as-null-pointer-constant"

579 
	$TEST
(
NuÎL™”®Te¡
, 
NoCÚv”siÚNoW¬nšg
) {

582 
	`EXPECT_EQ
(0, 0);

583 
	`ASSERT_EQ
(0, 0);

584 
	}
}

586 #ifdeà
__şªg__


587 #´agm¨
şªg
 
dŸgno¡ic
 
pİ


590 #ifdeà
__BORLANDC__


592 #´agm¨
İtiÚ
 
pİ


599 
	$TEST
(
CodePoštToUtf8Te¡
, 
CªEncodeNul
) {

600 
	`EXPECT_EQ
("", 
	`CodePoštToUtf8
(
L
'\0'));

601 
	}
}

604 
	$TEST
(
CodePoštToUtf8Te¡
, 
CªEncodeAscii
) {

605 
	`EXPECT_EQ
("a", 
	`CodePoštToUtf8
(
L
'a'));

606 
	`EXPECT_EQ
("Z", 
	`CodePoštToUtf8
(
L
'Z'));

607 
	`EXPECT_EQ
("&", 
	`CodePoštToUtf8
(
L
'&'));

608 
	`EXPECT_EQ
("\x7F", 
	`CodePoštToUtf8
(
L
'\x7F'));

609 
	}
}

613 
	$TEST
(
CodePoštToUtf8Te¡
, 
CªEncode8To11B™s
) {

615 
	`EXPECT_EQ
("\xC3\x93", 
	`CodePoštToUtf8
(
L
'\xD3'));

621 
	`EXPECT_EQ
("\xD5\xB6",

622 
	`CodePoštToUtf8
(
¡©ic_ÿ¡
<
wch¬_t
>(0x576)));

623 
	}
}

627 
	$TEST
(
CodePoštToUtf8Te¡
, 
CªEncode12To16B™s
) {

629 
	`EXPECT_EQ
("\xE0\xA3\x93",

630 
	`CodePoštToUtf8
(
¡©ic_ÿ¡
<
wch¬_t
>(0x8D3)));

633 
	`EXPECT_EQ
("\xEC\x9D\x8D",

634 
	`CodePoštToUtf8
(
¡©ic_ÿ¡
<
wch¬_t
>(0xC74D)));

635 
	}
}

637 #ià!
GTEST_WIDE_STRING_USES_UTF16_


644 
	$TEST
(
CodePoštToUtf8Te¡
, 
CªEncode17To21B™s
) {

646 
	`EXPECT_EQ
("\xF0\x90\xA3\x93", 
	`CodePoštToUtf8
(
L
'\x108D3'));

649 
	`EXPECT_EQ
("\xF0\x90\x90\x80", 
	`CodePoštToUtf8
(
L
'\x10400'));

652 
	`EXPECT_EQ
("\xF4\x88\x98\xB4", 
	`CodePoštToUtf8
(
L
'\x108634'));

653 
	}
}

656 
	$TEST
(
CodePoštToUtf8Te¡
, 
CªEncodeInv®idCodePošt
) {

657 
	`EXPECT_EQ
("(Inv®id Unicod0x1234ABCD)", 
	`CodePoštToUtf8
(
L
'\x1234ABCD'));

658 
	}
}

665 
	$TEST
(
WideSŒšgToUtf8Te¡
, 
CªEncodeNul
) {

666 
	`EXPECT_STREQ
("", 
	`WideSŒšgToUtf8
(
L
"", 0).
	`c_¡r
());

667 
	`EXPECT_STREQ
("", 
	`WideSŒšgToUtf8
(
L
"", -1).
	`c_¡r
());

668 
	}
}

671 
	$TEST
(
WideSŒšgToUtf8Te¡
, 
CªEncodeAscii
) {

672 
	`EXPECT_STREQ
("a", 
	`WideSŒšgToUtf8
(
L
"a", 1).
	`c_¡r
());

673 
	`EXPECT_STREQ
("ab", 
	`WideSŒšgToUtf8
(
L
"ab", 2).
	`c_¡r
());

674 
	`EXPECT_STREQ
("a", 
	`WideSŒšgToUtf8
(
L
"a", -1).
	`c_¡r
());

675 
	`EXPECT_STREQ
("ab", 
	`WideSŒšgToUtf8
(
L
"ab", -1).
	`c_¡r
());

676 
	}
}

680 
	$TEST
(
WideSŒšgToUtf8Te¡
, 
CªEncode8To11B™s
) {

682 
	`EXPECT_STREQ
("\xC3\x93", 
	`WideSŒšgToUtf8
(
L
"\xD3", 1).
	`c_¡r
());

683 
	`EXPECT_STREQ
("\xC3\x93", 
	`WideSŒšgToUtf8
(
L
"\xD3", -1).
	`c_¡r
());

686 cÚ¡ 
wch¬_t
 
s
[] = { 0x576, '\0' };

687 
	`EXPECT_STREQ
("\xD5\xB6", 
	`WideSŒšgToUtf8
(
s
, 1).
	`c_¡r
());

688 
	`EXPECT_STREQ
("\xD5\xB6", 
	`WideSŒšgToUtf8
(
s
, -1).
	`c_¡r
());

689 
	}
}

693 
	$TEST
(
WideSŒšgToUtf8Te¡
, 
CªEncode12To16B™s
) {

695 cÚ¡ 
wch¬_t
 
s1
[] = { 0x8D3, '\0' };

696 
	`EXPECT_STREQ
("\xE0\xA3\x93", 
	`WideSŒšgToUtf8
(
s1
, 1).
	`c_¡r
());

697 
	`EXPECT_STREQ
("\xE0\xA3\x93", 
	`WideSŒšgToUtf8
(
s1
, -1).
	`c_¡r
());

700 cÚ¡ 
wch¬_t
 
s2
[] = { 0xC74D, '\0' };

701 
	`EXPECT_STREQ
("\xEC\x9D\x8D", 
	`WideSŒšgToUtf8
(
s2
, 1).
	`c_¡r
());

702 
	`EXPECT_STREQ
("\xEC\x9D\x8D", 
	`WideSŒšgToUtf8
(
s2
, -1).
	`c_¡r
());

703 
	}
}

706 
	$TEST
(
WideSŒšgToUtf8Te¡
, 
StİsOnNulCh¬aù”
) {

707 
	`EXPECT_STREQ
("ABC", 
	`WideSŒšgToUtf8
(
L
"ABC\0XYZ", 100).
	`c_¡r
());

708 
	}
}

712 
	$TEST
(
WideSŒšgToUtf8Te¡
, 
StİsWh’L’gthLim™R—ched
) {

713 
	`EXPECT_STREQ
("ABC", 
	`WideSŒšgToUtf8
(
L
"ABCDEF", 3).
	`c_¡r
());

714 
	}
}

716 #ià!
GTEST_WIDE_STRING_USES_UTF16_


720 
	$TEST
(
WideSŒšgToUtf8Te¡
, 
CªEncode17To21B™s
) {

722 
	`EXPECT_STREQ
("\xF0\x90\xA3\x93", 
	`WideSŒšgToUtf8
(
L
"\x108D3", 1).
	`c_¡r
());

723 
	`EXPECT_STREQ
("\xF0\x90\xA3\x93", 
	`WideSŒšgToUtf8
(
L
"\x108D3", -1).
	`c_¡r
());

726 
	`EXPECT_STREQ
("\xF4\x88\x98\xB4", 
	`WideSŒšgToUtf8
(
L
"\x108634", 1).
	`c_¡r
());

727 
	`EXPECT_STREQ
("\xF4\x88\x98\xB4", 
	`WideSŒšgToUtf8
(
L
"\x108634", -1).
	`c_¡r
());

728 
	}
}

731 
	$TEST
(
WideSŒšgToUtf8Te¡
, 
CªEncodeInv®idCodePošt
) {

732 
	`EXPECT_STREQ
("(Invalid Unicode 0xABCDFF)",

733 
	`WideSŒšgToUtf8
(
L
"\xABCDFF", -1).
	`c_¡r
());

734 
	}
}

738 
	$TEST
(
WideSŒšgToUtf8Te¡
, 
CªEncodeV®idUtf16SU¼og©ePaœs
) {

739 cÚ¡ 
wch¬_t
 
s
[] = { 0xD801, 0xDC00, '\0' };

740 
	`EXPECT_STREQ
("\xF0\x90\x90\x80", 
	`WideSŒšgToUtf8
(
s
, -1).
	`c_¡r
());

741 
	}
}

745 
	$TEST
(
WideSŒšgToUtf8Te¡
, 
CªEncodeInv®idUtf16Su¼og©ePaœ
) {

747 cÚ¡ 
wch¬_t
 
s1
[] = { 0xD800, '\0' };

748 
	`EXPECT_STREQ
("\xED\xA0\x80", 
	`WideSŒšgToUtf8
(
s1
, -1).
	`c_¡r
());

750 cÚ¡ 
wch¬_t
 
s2
[] = { 0xD800, 'M', '\0' };

751 
	`EXPECT_STREQ
("\xED\xA0\x80M", 
	`WideSŒšgToUtf8
(
s2
, -1).
	`c_¡r
());

753 cÚ¡ 
wch¬_t
 
s3
[] = { 0xDC00, 'P', 'Q', 'R', '\0' };

754 
	`EXPECT_STREQ
("\xED\xB0\x80PQR", 
	`WideSŒšgToUtf8
(
s3
, -1).
	`c_¡r
());

755 
	}
}

759 #ià!
GTEST_WIDE_STRING_USES_UTF16_


760 
	$TEST
(
WideSŒšgToUtf8Te¡
, 
CÚÿ‹Ç‹sCod•oštsCÜ»ùly
) {

761 cÚ¡ 
wch¬_t
 
s
[] = { 0x108634, 0xC74D, '\n', 0x576, 0x8D3, 0x108634, '\0'};

762 
	`EXPECT_STREQ
(

769 
	`WideSŒšgToUtf8
(
s
, -1).
	`c_¡r
());

770 
	}
}

772 
	$TEST
(
WideSŒšgToUtf8Te¡
, 
CÚÿ‹Ç‹sCod•oštsCÜ»ùly
) {

773 cÚ¡ 
wch¬_t
 
s
[] = { 0xC74D, '\n', 0x576, 0x8D3, '\0'};

774 
	`EXPECT_STREQ
(

776 
	`WideSŒšgToUtf8
(
s
, -1).
	`c_¡r
());

777 
	}
}

782 
	$TEST
(
RªdomD—thTe¡
, 
G’”©esC¿shesOnInv®idRªge
) {

783 
‹¡šg
::
š‹º®
::
Rªdom
 
	`¿ndom
(42);

784 
	`EXPECT_DEATH_IF_SUPPORTED
(

785 
¿ndom
.
	`G’”©e
(0),

787 
	`EXPECT_DEATH_IF_SUPPORTED
(

788 
¿ndom
.
	`G’”©e
(
‹¡šg
::
š‹º®
::
Rªdom
::
kMaxRªge
 + 1),

791 
	}
}

793 
	$TEST
(
RªdomTe¡
, 
G’”©esNumb”sW™hšRªge
) {

794 
cÚ¡ex´
 
ušt32_t
 
kRªge
 = 10000;

795 
‹¡šg
::
š‹º®
::
Rªdom
 
	`¿ndom
(12345);

796 
i
 = 0; i < 10; i++) {

797 
	`EXPECT_LT
(
¿ndom
.
	`G’”©e
(
kRªge
), kRªgeè<< " fÜ i‹¿tiÚ " << 
i
;

800 
‹¡šg
::
š‹º®
::
Rªdom
 
	`¿ndom2
Ñe¡šg::š‹º®::Rªdom::
kMaxRªge
);

801 
i
 = 0; i < 10; i++) {

802 
	`EXPECT_LT
(
¿ndom2
.
	`G’”©e
(
kRªge
), kRªgeè<< " fÜ i‹¿tiÚ " << 
i
;

804 
	}
}

806 
	$TEST
(
RªdomTe¡
, 
R•—tsWh’Re£eded
) {

807 
cÚ¡ex´
 
kS“d
 = 123;

808 
cÚ¡ex´
 
kA¼aySize
 = 10;

809 
cÚ¡ex´
 
ušt32_t
 
kRªge
 = 10000;

810 
ušt32_t
 
v®ues
[
kA¼aySize
];

812 
‹¡šg
::
š‹º®
::
Rªdom
 
	`¿ndom
(
kS“d
);

813 
i
 = 0; i < 
kA¼aySize
; i++) {

814 
v®ues
[
i
] = 
¿ndom
.
	`G’”©e
(
kRªge
);

817 
¿ndom
.
	`Re£ed
(
kS“d
);

818 
i
 = 0; i < 
kA¼aySize
; i++) {

819 
	`EXPECT_EQ
(
v®ues
[
i
], 
¿ndom
.
	`G’”©e
(
kRªge
)) << " for iteration " << i;

821 
	}
}

827 
boŞ
 
	$IsPos™ive
(
n
è{ ‚ > 0; 
	}
}

829 
	$TEST
(
CÚš”Ut™yTe¡
, 
CouÁIf
) {

830 
¡d
::
veùÜ
<> 
v
;

831 
	`EXPECT_EQ
(0, 
	`CouÁIf
(
v
, 
IsPos™ive
));

833 
v
.
	`push_back
(-1);

834 
v
.
	`push_back
(0);

835 
	`EXPECT_EQ
(0, 
	`CouÁIf
(
v
, 
IsPos™ive
));

837 
v
.
	`push_back
(2);

838 
v
.
	`push_back
(-10);

839 
v
.
	`push_back
(10);

840 
	`EXPECT_EQ
(2, 
	`CouÁIf
(
v
, 
IsPos™ive
));

841 
	}
}

845 
	gg_sum
 = 0;

846 
	$AccumuÏ‹
(
n
è{ 
g_sum
 +ğn; 
	}
}

848 
	$TEST
(
CÚš”Ut™yTe¡
, 
FÜEach
) {

849 
¡d
::
veùÜ
<> 
v
;

850 
g_sum
 = 0;

851 
	`FÜEach
(
v
, 
AccumuÏ‹
);

852 
	`EXPECT_EQ
(0, 
g_sum
);

854 
g_sum
 = 0;

855 
v
.
	`push_back
(1);

856 
	`FÜEach
(
v
, 
AccumuÏ‹
);

857 
	`EXPECT_EQ
(1, 
g_sum
);

859 
g_sum
 = 0;

860 
v
.
	`push_back
(20);

861 
v
.
	`push_back
(300);

862 
	`FÜEach
(
v
, 
AccumuÏ‹
);

863 
	`EXPECT_EQ
(321, 
g_sum
);

864 
	}
}

867 
	$TEST
(
CÚš”Ut™yTe¡
, 
G‘EËm’tOr
) {

868 
¡d
::
veùÜ
<> 
a
;

869 
	`EXPECT_EQ
('x', 
	`G‘EËm’tOr
(
a
, 0, 'x'));

871 
a
.
	`push_back
('a');

872 
a
.
	`push_back
('b');

873 
	`EXPECT_EQ
('a', 
	`G‘EËm’tOr
(
a
, 0, 'x'));

874 
	`EXPECT_EQ
('b', 
	`G‘EËm’tOr
(
a
, 1, 'x'));

875 
	`EXPECT_EQ
('x', 
	`G‘EËm’tOr
(
a
, -2, 'x'));

876 
	`EXPECT_EQ
('x', 
	`G‘EËm’tOr
(
a
, 2, 'x'));

877 
	}
}

879 
	$TEST
(
CÚš”Ut™yD—thTe¡
, 
ShufæeRªge
) {

880 
¡d
::
veùÜ
<> 
a
;

881 
a
.
	`push_back
(0);

882 
a
.
	`push_back
(1);

883 
a
.
	`push_back
(2);

884 
‹¡šg
::
š‹º®
::
Rªdom
 
	`¿ndom
(1);

886 
	`EXPECT_DEATH_IF_SUPPORTED
(

887 
	`ShufæeRªge
(&
¿ndom
, -1, 1, &
a
),

889 
	`EXPECT_DEATH_IF_SUPPORTED
(

890 
	`ShufæeRªge
(&
¿ndom
, 4, 4, &
a
),

892 
	`EXPECT_DEATH_IF_SUPPORTED
(

893 
	`ShufæeRªge
(&
¿ndom
, 3, 2, &
a
),

895 
	`EXPECT_DEATH_IF_SUPPORTED
(

896 
	`ShufæeRªge
(&
¿ndom
, 3, 4, &
a
),

898 
	}
}

900 şas 
	cVeùÜShufæeTe¡
 : 
public
 
Te¡
 {

901 
´Ùeùed
:

902 cÚ¡ 
size_t
 
kVeùÜSize
 = 20;

904 
VeùÜShufæeTe¡
(è: 
¿ndom_
(1) {

905 
i
 = 0; 
	gi
 < 
	g¡©ic_ÿ¡
<>(
	gkVeùÜSize
); i++) {

906 
	gveùÜ_
.
push_back
(
i
);

910 
boŞ
 
VeùÜIsCÜru±
(cÚ¡ 
Te¡šgVeùÜ
& 
veùÜ
) {

911 ià(
	gkVeùÜSize
 !ğ
veùÜ
.
size
()) {

912  
Œue
;

915 
boŞ
 
	gfound_š_veùÜ
[
kVeùÜSize
] = { 
çl£
 };

916 
size_t
 
	gi
 = 0; i < 
	gveùÜ
.
size
(); i++) {

917 cÚ¡ 
	ge
 = 
veùÜ
[
i
];

918 ià(
	ge
 < 0 ||ƒ >ğ
¡©ic_ÿ¡
<>(
kVeùÜSize
è|| 
found_š_veùÜ
[
e
]) {

919  
Œue
;

921 
	gfound_š_veùÜ
[
e
] = 
Œue
;

926  
	gçl£
;

929 
boŞ
 
VeùÜIsNÙCÜru±
(cÚ¡ 
Te¡šgVeùÜ
& 
veùÜ
) {

930  !
VeùÜIsCÜru±
(
veùÜ
);

933 
boŞ
 
RªgeIsShufæed
(cÚ¡ 
Te¡šgVeùÜ
& 
veùÜ
, 
begš
, 
’d
) {

934 
	gi
 = 
begš
; i < 
	g’d
; i++) {

935 ià(
	gi
 !ğ
veùÜ
[
¡©ic_ÿ¡
<
size_t
>(
i
)]) {

936  
Œue
;

939  
	gçl£
;

942 
boŞ
 
RªgeIsUnshufæed
(

943 cÚ¡ 
Te¡šgVeùÜ
& 
veùÜ
, 
begš
, 
’d
) {

944  !
RªgeIsShufæed
(
veùÜ
, 
begš
, 
’d
);

947 
boŞ
 
VeùÜIsShufæed
(cÚ¡ 
Te¡šgVeùÜ
& 
veùÜ
) {

948  
RªgeIsShufæed
(
veùÜ
, 0, 
¡©ic_ÿ¡
<>(veùÜ.
size
()));

951 
boŞ
 
VeùÜIsUnshufæed
(cÚ¡ 
Te¡šgVeùÜ
& 
veùÜ
) {

952  !
VeùÜIsShufæed
(
veùÜ
);

955 
	g‹¡šg
::
š‹º®
::
Rªdom
 
¿ndom_
;

956 
Te¡šgVeùÜ
 
	gveùÜ_
;

959 cÚ¡ 
size_t
 
	gVeùÜShufæeTe¡
::
kVeùÜSize
;

961 
	$TEST_F
(
VeùÜShufæeTe¡
, 
HªdËsEm±yRªge
) {

963 
	`ShufæeRªge
(&
¿ndom_
, 0, 0, &
veùÜ_
);

964 
	`ASSERT_PRED1
(
VeùÜIsNÙCÜru±
, 
veùÜ_
);

965 
	`ASSERT_PRED1
(
VeùÜIsUnshufæed
, 
veùÜ_
);

968 
	`ShufæeRªge
(&
¿ndom_
, 
kVeùÜSize
/2, kVeùÜSize/2, &
veùÜ_
);

969 
	`ASSERT_PRED1
(
VeùÜIsNÙCÜru±
, 
veùÜ_
);

970 
	`ASSERT_PRED1
(
VeùÜIsUnshufæed
, 
veùÜ_
);

973 
	`ShufæeRªge
(&
¿ndom_
, 
kVeùÜSize
 - 1, kVeùÜSiz- 1, &
veùÜ_
);

974 
	`ASSERT_PRED1
(
VeùÜIsNÙCÜru±
, 
veùÜ_
);

975 
	`ASSERT_PRED1
(
VeùÜIsUnshufæed
, 
veùÜ_
);

978 
	`ShufæeRªge
(&
¿ndom_
, 
kVeùÜSize
, kVeùÜSize, &
veùÜ_
);

979 
	`ASSERT_PRED1
(
VeùÜIsNÙCÜru±
, 
veùÜ_
);

980 
	`ASSERT_PRED1
(
VeùÜIsUnshufæed
, 
veùÜ_
);

981 
	}
}

983 
	$TEST_F
(
VeùÜShufæeTe¡
, 
HªdËsRªgeOfSizeOÃ
) {

985 
	`ShufæeRªge
(&
¿ndom_
, 0, 1, &
veùÜ_
);

986 
	`ASSERT_PRED1
(
VeùÜIsNÙCÜru±
, 
veùÜ_
);

987 
	`ASSERT_PRED1
(
VeùÜIsUnshufæed
, 
veùÜ_
);

990 
	`ShufæeRªge
(&
¿ndom_
, 
kVeùÜSize
/2, kVeùÜSize/2 + 1, &
veùÜ_
);

991 
	`ASSERT_PRED1
(
VeùÜIsNÙCÜru±
, 
veùÜ_
);

992 
	`ASSERT_PRED1
(
VeùÜIsUnshufæed
, 
veùÜ_
);

995 
	`ShufæeRªge
(&
¿ndom_
, 
kVeùÜSize
 - 1, kVeùÜSize, &
veùÜ_
);

996 
	`ASSERT_PRED1
(
VeùÜIsNÙCÜru±
, 
veùÜ_
);

997 
	`ASSERT_PRED1
(
VeùÜIsUnshufæed
, 
veùÜ_
);

998 
	}
}

1003 
	$TEST_F
(
VeùÜShufæeTe¡
, 
ShufæesEÁœeVeùÜ
) {

1004 
	`Shufæe
(&
¿ndom_
, &
veùÜ_
);

1005 
	`ASSERT_PRED1
(
VeùÜIsNÙCÜru±
, 
veùÜ_
);

1006 
	`EXPECT_FALSE
(
	`VeùÜIsUnshufæed
(
veùÜ_
)) << vector_;

1010 
	`EXPECT_NE
(0, 
veùÜ_
[0]);

1011 
	`EXPECT_NE
(
¡©ic_ÿ¡
<>(
kVeùÜSize
 - 1), 
veùÜ_
[kVectorSize - 1]);

1012 
	}
}

1014 
	$TEST_F
(
VeùÜShufæeTe¡
, 
ShufæesS¹OfVeùÜ
) {

1015 cÚ¡ 
kRªgeSize
 = 
kVeùÜSize
/2;

1017 
	`ShufæeRªge
(&
¿ndom_
, 0, 
kRªgeSize
, &
veùÜ_
);

1019 
	`ASSERT_PRED1
(
VeùÜIsNÙCÜru±
, 
veùÜ_
);

1020 
	`EXPECT_PRED3
(
RªgeIsShufæed
, 
veùÜ_
, 0, 
kRªgeSize
);

1021 
	`EXPECT_PRED3
(
RªgeIsUnshufæed
, 
veùÜ_
, 
kRªgeSize
,

1022 
¡©ic_ÿ¡
<>(
kVeùÜSize
));

1023 
	}
}

1025 
	$TEST_F
(
VeùÜShufæeTe¡
, 
ShufæesEndOfVeùÜ
) {

1026 cÚ¡ 
kRªgeSize
 = 
kVeùÜSize
 / 2;

1027 
	`ShufæeRªge
(&
¿ndom_
, 
kRªgeSize
, 
kVeùÜSize
, &
veùÜ_
);

1029 
	`ASSERT_PRED1
(
VeùÜIsNÙCÜru±
, 
veùÜ_
);

1030 
	`EXPECT_PRED3
(
RªgeIsUnshufæed
, 
veùÜ_
, 0, 
kRªgeSize
);

1031 
	`EXPECT_PRED3
(
RªgeIsShufæed
, 
veùÜ_
, 
kRªgeSize
,

1032 
¡©ic_ÿ¡
<>(
kVeùÜSize
));

1033 
	}
}

1035 
	$TEST_F
(
VeùÜShufæeTe¡
, 
ShufæesMiddËOfVeùÜ
) {

1036 cÚ¡ 
kRªgeSize
 = 
¡©ic_ÿ¡
<>(
kVeùÜSize
) / 3;

1037 
	`ShufæeRªge
(&
¿ndom_
, 
kRªgeSize
, 2*kRªgeSize, &
veùÜ_
);

1039 
	`ASSERT_PRED1
(
VeùÜIsNÙCÜru±
, 
veùÜ_
);

1040 
	`EXPECT_PRED3
(
RªgeIsUnshufæed
, 
veùÜ_
, 0, 
kRªgeSize
);

1041 
	`EXPECT_PRED3
(
RªgeIsShufæed
, 
veùÜ_
, 
kRªgeSize
, 2*kRangeSize);

1042 
	`EXPECT_PRED3
(
RªgeIsUnshufæed
, 
veùÜ_
, 2 * 
kRªgeSize
,

1043 
¡©ic_ÿ¡
<>(
kVeùÜSize
));

1044 
	}
}

1046 
	$TEST_F
(
VeùÜShufæeTe¡
, 
ShufæesR•—bly
) {

1047 
Te¡šgVeùÜ
 
veùÜ2
;

1048 
size_t
 
i
 = 0; i < 
kVeùÜSize
; i++) {

1049 
veùÜ2
.
	`push_back
(
¡©ic_ÿ¡
<>(
i
));

1052 
¿ndom_
.
	`Re£ed
(1234);

1053 
	`Shufæe
(&
¿ndom_
, &
veùÜ_
);

1054 
¿ndom_
.
	`Re£ed
(1234);

1055 
	`Shufæe
(&
¿ndom_
, &
veùÜ2
);

1057 
	`ASSERT_PRED1
(
VeùÜIsNÙCÜru±
, 
veùÜ_
);

1058 
	`ASSERT_PRED1
(
VeùÜIsNÙCÜru±
, 
veùÜ2
);

1060 
size_t
 
i
 = 0; i < 
kVeùÜSize
; i++) {

1061 
	`EXPECT_EQ
(
veùÜ_
[
i
], 
veùÜ2
[i]) << " where i is " << i;

1063 
	}
}

1067 
	$TEST
(
As£¹H–³rTe¡
, 
As£¹H–³rIsSm®l
) {

1070 
	`EXPECT_LE
((
‹¡šg
::
š‹º®
::
As£¹H–³r
), (*));

1071 
	}
}

1074 
	$TEST
(
SŒšgTe¡
, 
EndsW™hCa£In£ns™ive
) {

1075 
	`EXPECT_TRUE
(
SŒšg
::
	`EndsW™hCa£In£ns™ive
("foobar", "BAR"));

1076 
	`EXPECT_TRUE
(
SŒšg
::
	`EndsW™hCa£In£ns™ive
("foobaR", "bar"));

1077 
	`EXPECT_TRUE
(
SŒšg
::
	`EndsW™hCa£In£ns™ive
("foobar", ""));

1078 
	`EXPECT_TRUE
(
SŒšg
::
	`EndsW™hCa£In£ns™ive
("", ""));

1080 
	`EXPECT_FALSE
(
SŒšg
::
	`EndsW™hCa£In£ns™ive
("Foobar", "foo"));

1081 
	`EXPECT_FALSE
(
SŒšg
::
	`EndsW™hCa£In£ns™ive
("foobar", "Foo"));

1082 
	`EXPECT_FALSE
(
SŒšg
::
	`EndsW™hCa£In£ns™ive
("", "foo"));

1083 
	}
}

1088 cÚ¡ 
wch¬_t
* cÚ¡ 
	gkNuÎ
 = 
nuÎ±r
;

1091 
	$TEST
(
SŒšgTe¡
, 
Ca£In£ns™iveWideCSŒšgEqu®s
) {

1092 
	`EXPECT_TRUE
(
SŒšg
::
	`Ca£In£ns™iveWideCSŒšgEqu®s
(
nuÎ±r
,‚ullptr));

1093 
	`EXPECT_FALSE
(
SŒšg
::
	`Ca£In£ns™iveWideCSŒšgEqu®s
(
kNuÎ
, 
L
""));

1094 
	`EXPECT_FALSE
(
SŒšg
::
	`Ca£In£ns™iveWideCSŒšgEqu®s
(
L
"", 
kNuÎ
));

1095 
	`EXPECT_FALSE
(
SŒšg
::
	`Ca£In£ns™iveWideCSŒšgEqu®s
(
kNuÎ
, 
L
"foobar"));

1096 
	`EXPECT_FALSE
(
SŒšg
::
	`Ca£In£ns™iveWideCSŒšgEqu®s
(
L
"foob¬", 
kNuÎ
));

1097 
	`EXPECT_TRUE
(
SŒšg
::
	`Ca£In£ns™iveWideCSŒšgEqu®s
(
L
"foobar", L"foobar"));

1098 
	`EXPECT_TRUE
(
SŒšg
::
	`Ca£In£ns™iveWideCSŒšgEqu®s
(
L
"foobar", L"FOOBAR"));

1099 
	`EXPECT_TRUE
(
SŒšg
::
	`Ca£In£ns™iveWideCSŒšgEqu®s
(
L
"FOOBAR", L"foobar"));

1100 
	}
}

1102 #ià
GTEST_OS_WINDOWS


1105 
	$TEST
(
SŒšgTe¡
, 
ShowWideCSŒšg
) {

1106 
	`EXPECT_STREQ
("(null)",

1107 
SŒšg
::
	`ShowWideCSŒšg
(
NULL
).
	`c_¡r
());

1108 
	`EXPECT_STREQ
("", 
SŒšg
::
	`ShowWideCSŒšg
(
L
"").
	`c_¡r
());

1109 
	`EXPECT_STREQ
("foo", 
SŒšg
::
	`ShowWideCSŒšg
(
L
"foo").
	`c_¡r
());

1110 
	}
}

1112 #ià
GTEST_OS_WINDOWS_MOBILE


1113 
	$TEST
(
SŒšgTe¡
, 
AnsiAndUtf16NuÎ
) {

1114 
	`EXPECT_EQ
(
NULL
, 
SŒšg
::
	`AnsiToUtf16
(NULL));

1115 
	`EXPECT_EQ
(
NULL
, 
SŒšg
::
	`Utf16ToAnsi
(NULL));

1116 
	}
}

1118 
	$TEST
(
SŒšgTe¡
, 
AnsiAndUtf16CÚv”tBasic
) {

1119 cÚ¡ * 
ªsi
 = 
SŒšg
::
	`Utf16ToAnsi
(
L
"str");

1120 
	`EXPECT_STREQ
("¡r", 
ªsi
);

1121 
d–‘e
 [] 
ªsi
;

1122 cÚ¡ 
WCHAR
* 
utf16
 = 
SŒšg
::
	`AnsiToUtf16
("str");

1123 
	`EXPECT_EQ
(0, 
	`wc¢cmp
(
L
"¡r", 
utf16
, 3));

1124 
d–‘e
 [] 
utf16
;

1125 
	}
}

1127 
	$TEST
(
SŒšgTe¡
, 
AnsiAndUtf16CÚv”tP©hCh¬s
) {

1128 cÚ¡ * 
ªsi
 = 
SŒšg
::
	`Utf16ToAnsi
(
L
".:\\ \"*?");

1129 
	`EXPECT_STREQ
(".:\\ \"*?", 
ªsi
);

1130 
d–‘e
 [] 
ªsi
;

1131 cÚ¡ 
WCHAR
* 
utf16
 = 
SŒšg
::
	`AnsiToUtf16
(".:\\ \"*?");

1132 
	`EXPECT_EQ
(0, 
	`wc¢cmp
(
L
".:\\ \"*?", 
utf16
, 3));

1133 
d–‘e
 [] 
utf16
;

1134 
	}
}

1140 
	$TEST
(
Te¡Prİ”tyTe¡
, 
SŒšgV®ue
) {

1141 
Te¡Prİ”ty
 
	`´İ”ty
("key", "1");

1142 
	`EXPECT_STREQ
("key", 
´İ”ty
.
	`key
());

1143 
	`EXPECT_STREQ
("1", 
´İ”ty
.
	`v®ue
());

1144 
	}
}

1147 
	$TEST
(
Te¡Prİ”tyTe¡
, 
R•ÏûSŒšgV®ue
) {

1148 
Te¡Prİ”ty
 
	`´İ”ty
("key", "1");

1149 
	`EXPECT_STREQ
("1", 
´İ”ty
.
	`v®ue
());

1150 
´İ”ty
.
	`S‘V®ue
("2");

1151 
	`EXPECT_STREQ
("2", 
´İ”ty
.
	`v®ue
());

1152 
	}
}

1157 
	$AddF©®Fau»
() {

1158 
	`FAIL
() << "Expected fatal failure.";

1159 
	}
}

1161 
	$AddNÚçlFau»
() {

1162 
	`ADD_FAILURE
() << "Expected‚on-fatal failure.";

1163 
	}
}

1165 şas 
	cScİedFakeTe¡P¬tResuÉR•Ü‹rTe¡
 : 
public
 
Te¡
 {

1166 
public
:

1167 
	eFau»Mode
 {

1168 
FATAL_FAILURE
,

1169 
	gNONFATAL_FAILURE


1171 
AddFau»
(
Fau»Mode
 
çu»
) {

1172 ià(
	gçu»
 =ğ
FATAL_FAILURE
) {

1173 
AddF©®Fau»
();

1175 
AddNÚçlFau»
();

1182 
	$TEST_F
(
ScİedFakeTe¡P¬tResuÉR•Ü‹rTe¡
, 
IÁ”û±sTe¡Fau»s
) {

1183 
Te¡P¬tResuÉA¼ay
 
»suÉs
;

1185 
ScİedFakeTe¡P¬tResuÉR•Ü‹r
 
	`»pÜ‹r
(

1186 
ScİedFakeTe¡P¬tResuÉR•Ü‹r
::
INTERCEPT_ONLY_CURRENT_THREAD
,

1187 &
»suÉs
);

1188 
	`AddFau»
(
NONFATAL_FAILURE
);

1189 
	`AddFau»
(
FATAL_FAILURE
);

1192 
	`EXPECT_EQ
(2, 
»suÉs
.
	`size
());

1193 
	`EXPECT_TRUE
(
»suÉs
.
	`G‘Te¡P¬tResuÉ
(0).
	`nÚçÎy_çed
());

1194 
	`EXPECT_TRUE
(
»suÉs
.
	`G‘Te¡P¬tResuÉ
(1).
	`çÎy_çed
());

1195 
	}
}

1197 
	$TEST_F
(
ScİedFakeTe¡P¬tResuÉR•Ü‹rTe¡
, 
D•»ÿ‹dCÚ¡ruùÜ
) {

1198 
Te¡P¬tResuÉA¼ay
 
»suÉs
;

1201 
ScİedFakeTe¡P¬tResuÉR•Ü‹r
 
	`»pÜ‹r
(&
»suÉs
);

1202 
	`AddFau»
(
NONFATAL_FAILURE
);

1204 
	`EXPECT_EQ
(1, 
»suÉs
.
	`size
());

1205 
	}
}

1207 #ià
GTEST_IS_THREADSAFE


1209 şas 
	cScİedFakeTe¡P¬tResuÉR•Ü‹rW™hTh»adsTe¡


1210 : 
public
 
ScİedFakeTe¡P¬tResuÉR•Ü‹rTe¡
 {

1211 
´Ùeùed
:

1212 
AddFau»InOth”Th»ad
(
Fau»Mode
 
çu»
) {

1213 
Th»adW™hP¬am
<
Fau»Mode
> 
th»ad
(&
AddFau»
, 
çu»
, 
nuÎ±r
);

1214 
	gth»ad
.
Još
();

1218 
	$TEST_F
(
ScİedFakeTe¡P¬tResuÉR•Ü‹rW™hTh»adsTe¡
,

1219 
IÁ”û±sTe¡Fau»sInAÎTh»ads
) {

1220 
Te¡P¬tResuÉA¼ay
 
»suÉs
;

1222 
ScİedFakeTe¡P¬tResuÉR•Ü‹r
 
	`»pÜ‹r
(

1223 
ScİedFakeTe¡P¬tResuÉR•Ü‹r
::
INTERCEPT_ALL_THREADS
, &
»suÉs
);

1224 
	`AddFau»
(
NONFATAL_FAILURE
);

1225 
	`AddFau»
(
FATAL_FAILURE
);

1226 
	`AddFau»InOth”Th»ad
(
NONFATAL_FAILURE
);

1227 
	`AddFau»InOth”Th»ad
(
FATAL_FAILURE
);

1230 
	`EXPECT_EQ
(4, 
»suÉs
.
	`size
());

1231 
	`EXPECT_TRUE
(
»suÉs
.
	`G‘Te¡P¬tResuÉ
(0).
	`nÚçÎy_çed
());

1232 
	`EXPECT_TRUE
(
»suÉs
.
	`G‘Te¡P¬tResuÉ
(1).
	`çÎy_çed
());

1233 
	`EXPECT_TRUE
(
»suÉs
.
	`G‘Te¡P¬tResuÉ
(2).
	`nÚçÎy_çed
());

1234 
	`EXPECT_TRUE
(
»suÉs
.
	`G‘Te¡P¬tResuÉ
(3).
	`çÎy_çed
());

1235 
	}
}

1243 
ScİedFakeTe¡P¬tResuÉR•Ü‹rTe¡
 
	tEx³ùF©®Fau»Te¡
;

1245 
	$TEST_F
(
Ex³ùF©®Fau»Te¡
, 
C©chesF©®F®iu»
) {

1246 
	`EXPECT_FATAL_FAILURE
(
	`AddF©®Fau»
(), "Expected fatal failure.");

1247 
	}
}

1249 
	$TEST_F
(
Ex³ùF©®Fau»Te¡
, 
Acû±sStdSŒšgObjeù
) {

1250 
	`EXPECT_FATAL_FAILURE
(
	`AddF©®Fau»
(),

1251 ::
¡d
::
	`¡ršg
("Expected fatal failure."));

1252 
	}
}

1254 
	$TEST_F
(
Ex³ùF©®Fau»Te¡
, 
C©chesF©®Fau»OnAÎTh»ads
) {

1257 
	`EXPECT_FATAL_FAILURE_ON_ALL_THREADS
(
	`AddF©®Fau»
(),

1259 
	}
}

1261 #ifdeà
__BORLANDC__


1263 #´agm¨
İtiÚ
 
push
 -
w
-
ccc


1269 
	$NÚVoidFunùiÚ
() {

1270 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_TRUE
(
çl£
), "");

1271 
	`EXPECT_FATAL_FAILURE_ON_ALL_THREADS
(
	`FAIL
(), "");

1273 
	}
}

1275 
	$TEST_F
(
Ex³ùF©®Fau»Te¡
, 
CªBeU£dInNÚVoidFunùiÚ
) {

1276 
	`NÚVoidFunùiÚ
();

1277 
	}
}

1282 
	$DÛsNÙAbÜtH–³r
(
boŞ
* 
abÜ‹d
) {

1283 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_TRUE
(
çl£
), "");

1284 
	`EXPECT_FATAL_FAILURE_ON_ALL_THREADS
(
	`FAIL
(), "");

1286 *
abÜ‹d
 = 
çl£
;

1287 
	}
}

1289 #ifdeà
__BORLANDC__


1291 #´agm¨
İtiÚ
 
pİ


1294 
	$TEST_F
(
Ex³ùF©®Fau»Te¡
, 
DÛsNÙAbÜt
) {

1295 
boŞ
 
abÜ‹d
 = 
Œue
;

1296 
	`DÛsNÙAbÜtH–³r
(&
abÜ‹d
);

1297 
	`EXPECT_FALSE
(
abÜ‹d
);

1298 
	}
}

1304 
	gglob®_v¬
 = 0;

1305 
	#GTEST_USE_UNPROTECTED_COMMA_
 
glob®_v¬
++, glob®_v¬++

	)

1307 
	$TEST_F
(
Ex³ùF©®Fau»Te¡
, 
Acû±sMaüoTh©Ex·ndsToUÅrÙeùedComma
) {

1308 #iâdeà
__BORLANDC__


1310 
	`EXPECT_FATAL_FAILURE
({

1311 
GTEST_USE_UNPROTECTED_COMMA_
;

1312 
	`AddF©®Fau»
();

1316 
	`EXPECT_FATAL_FAILURE_ON_ALL_THREADS
({

1317 
GTEST_USE_UNPROTECTED_COMMA_
;

1318 
	`AddF©®Fau»
();

1320 
	}
}

1324 
ScİedFakeTe¡P¬tResuÉR•Ü‹rTe¡
 
	tEx³ùNÚçlFau»Te¡
;

1326 
	$TEST_F
(
Ex³ùNÚçlFau»Te¡
, 
C©chesNÚçlFau»
) {

1327 
	`EXPECT_NONFATAL_FAILURE
(
	`AddNÚçlFau»
(),

1329 
	}
}

1331 
	$TEST_F
(
Ex³ùNÚçlFau»Te¡
, 
Acû±sStdSŒšgObjeù
) {

1332 
	`EXPECT_NONFATAL_FAILURE
(
	`AddNÚçlFau»
(),

1333 ::
¡d
::
	`¡ršg
("Expected‚on-fatal failure."));

1334 
	}
}

1336 
	$TEST_F
(
Ex³ùNÚçlFau»Te¡
, 
C©chesNÚçlFau»OnAÎTh»ads
) {

1339 
	`EXPECT_NONFATAL_FAILURE_ON_ALL_THREADS
(
	`AddNÚçlFau»
(),

1341 
	}
}

1346 
	$TEST_F
(
Ex³ùNÚçlFau»Te¡
, 
Acû±sMaüoTh©Ex·ndsToUÅrÙeùedComma
) {

1347 
	`EXPECT_NONFATAL_FAILURE
({

1348 
GTEST_USE_UNPROTECTED_COMMA_
;

1349 
	`AddNÚçlFau»
();

1352 
	`EXPECT_NONFATAL_FAILURE_ON_ALL_THREADS
({

1353 
GTEST_USE_UNPROTECTED_COMMA_
;

1354 
	`AddNÚçlFau»
();

1356 
	}
}

1358 #ià
GTEST_IS_THREADSAFE


1360 
ScİedFakeTe¡P¬tResuÉR•Ü‹rW™hTh»adsTe¡


1361 
	tEx³ùFau»W™hTh»adsTe¡
;

1363 
	$TEST_F
(
Ex³ùFau»W™hTh»adsTe¡
, 
Ex³ùF©®Fau»OnAÎTh»ads
) {

1364 
	`EXPECT_FATAL_FAILURE_ON_ALL_THREADS
(
	`AddFau»InOth”Th»ad
(
FATAL_FAILURE
),

1366 
	}
}

1368 
	$TEST_F
(
Ex³ùFau»W™hTh»adsTe¡
, 
Ex³ùNÚF©®Fau»OnAÎTh»ads
) {

1369 
	`EXPECT_NONFATAL_FAILURE_ON_ALL_THREADS
(

1370 
	`AddFau»InOth”Th»ad
(
NONFATAL_FAILURE
), "Expected‚on-fatal failure.");

1371 
	}
}

1377 
	$TEST
(
Te¡Prİ”tyTe¡
, 
CÚ¡ruùÜWÜks
) {

1378 cÚ¡ 
Te¡Prİ”ty
 
	`´İ”ty
("key", "value");

1379 
	`EXPECT_STREQ
("key", 
´İ”ty
.
	`key
());

1380 
	`EXPECT_STREQ
("v®ue", 
´İ”ty
.
	`v®ue
());

1381 
	}
}

1383 
	$TEST
(
Te¡Prİ”tyTe¡
, 
S‘V®ue
) {

1384 
Te¡Prİ”ty
 
	`´İ”ty
("key", "value_1");

1385 
	`EXPECT_STREQ
("key", 
´İ”ty
.
	`key
());

1386 
´İ”ty
.
	`S‘V®ue
("value_2");

1387 
	`EXPECT_STREQ
("key", 
´İ”ty
.
	`key
());

1388 
	`EXPECT_STREQ
("v®ue_2", 
´İ”ty
.
	`v®ue
());

1389 
	}
}

1394 şas 
	cTe¡ResuÉTe¡
 : 
public
 
Te¡
 {

1395 
´Ùeùed
:

1396 
¡d
::
	tveùÜ
<
	tTe¡P¬tResuÉ
> 
	tTPRVeùÜ
;

1399 
Te¡P¬tResuÉ
 * 
	g´1
, * 
	g´2
;

1402 
Te¡ResuÉ
 * 
	gr0
, * 
	gr1
, * 
	gr2
;

1404 
S‘Up
(è
	gov”ride
 {

1406 
	g´1
 = 
Ãw
 
Te¡P¬tResuÉ
(Te¡P¬tResuÉ::
kSucûss
,

1412 
	g´2
 = 
Ãw
 
Te¡P¬tResuÉ
(Te¡P¬tResuÉ::
kF©®Fau»
,

1418 
	gr0
 = 
Ãw
 
Te¡ResuÉ
();

1419 
	gr1
 = 
Ãw
 
Te¡ResuÉ
();

1420 
	gr2
 = 
Ãw
 
Te¡ResuÉ
();

1426 
TPRVeùÜ
* 
	g»suÉs1
 = 
cÚ¡_ÿ¡
<TPRVector*>(

1427 &
Te¡ResuÉAcûssÜ
::
‹¡_·¹_»suÉs
(*
r1
));

1428 
TPRVeùÜ
* 
	g»suÉs2
 = 
cÚ¡_ÿ¡
<TPRVector*>(

1429 &
Te¡ResuÉAcûssÜ
::
‹¡_·¹_»suÉs
(*
r2
));

1434 
	g»suÉs1
->
push_back
(*
´1
);

1437 
	g»suÉs2
->
push_back
(*
´1
);

1438 
	g»suÉs2
->
push_back
(*
´2
);

1441 
T—rDown
(è
	gov”ride
 {

1442 
d–‘e
 
	g´1
;

1443 
d–‘e
 
	g´2
;

1445 
d–‘e
 
	gr0
;

1446 
d–‘e
 
	gr1
;

1447 
d–‘e
 
	gr2
;

1451 
Com·»Te¡P¬tResuÉ
(cÚ¡ 
Te¡P¬tResuÉ
& 
ex³ùed
,

1452 cÚ¡ 
Te¡P¬tResuÉ
& 
aùu®
) {

1453 
EXPECT_EQ
(
ex³ùed
.
ty³
(), 
aùu®
.type());

1454 
EXPECT_STREQ
(
ex³ùed
.
fe_Çme
(), 
aùu®
.file_name());

1455 
EXPECT_EQ
(
ex³ùed
.
lše_numb”
(), 
aùu®
.line_number());

1456 
EXPECT_STREQ
(
ex³ùed
.
summ¬y
(), 
aùu®
.summary());

1457 
EXPECT_STREQ
(
ex³ùed
.
mes§ge
(), 
aùu®
.message());

1458 
EXPECT_EQ
(
ex³ùed
.
·s£d
(), 
aùu®
.passed());

1459 
EXPECT_EQ
(
ex³ùed
.
çed
(), 
aùu®
.failed());

1460 
EXPECT_EQ
(
ex³ùed
.
nÚçÎy_çed
(), 
aùu®
.nonfatally_failed());

1461 
EXPECT_EQ
(
ex³ùed
.
çÎy_çed
(), 
aùu®
.fatally_failed());

1466 
	$TEST_F
(
Te¡ResuÉTe¡
, 
tÙ®_·¹_couÁ
) {

1467 
	`ASSERT_EQ
(0, 
r0
->
	`tÙ®_·¹_couÁ
());

1468 
	`ASSERT_EQ
(1, 
r1
->
	`tÙ®_·¹_couÁ
());

1469 
	`ASSERT_EQ
(2, 
r2
->
	`tÙ®_·¹_couÁ
());

1470 
	}
}

1473 
	$TEST_F
(
Te¡ResuÉTe¡
, 
Pas£d
) {

1474 
	`ASSERT_TRUE
(
r0
->
	`Pas£d
());

1475 
	`ASSERT_TRUE
(
r1
->
	`Pas£d
());

1476 
	`ASSERT_FALSE
(
r2
->
	`Pas£d
());

1477 
	}
}

1480 
	$TEST_F
(
Te¡ResuÉTe¡
, 
Faed
) {

1481 
	`ASSERT_FALSE
(
r0
->
	`Faed
());

1482 
	`ASSERT_FALSE
(
r1
->
	`Faed
());

1483 
	`ASSERT_TRUE
(
r2
->
	`Faed
());

1484 
	}
}

1488 
Te¡ResuÉTe¡
 
	tTe¡ResuÉD—thTe¡
;

1490 
	$TEST_F
(
Te¡ResuÉD—thTe¡
, 
G‘Te¡P¬tResuÉ
) {

1491 
	`Com·»Te¡P¬tResuÉ
(*
´1
, 
r2
->
	`G‘Te¡P¬tResuÉ
(0));

1492 
	`Com·»Te¡P¬tResuÉ
(*
´2
, 
r2
->
	`G‘Te¡P¬tResuÉ
(1));

1493 
	`EXPECT_DEATH_IF_SUPPORTED
(
r2
->
	`G‘Te¡P¬tResuÉ
(2), "");

1494 
	`EXPECT_DEATH_IF_SUPPORTED
(
r2
->
	`G‘Te¡P¬tResuÉ
(-1), "");

1495 
	}
}

1498 
	$TEST
(
Te¡ResuÉPrİ”tyTe¡
, 
NoPrİ”t›sFoundWh’NÚeA»Added
) {

1499 
Te¡ResuÉ
 
‹¡_»suÉ
;

1500 
	`ASSERT_EQ
(0, 
‹¡_»suÉ
.
	`‹¡_´İ”ty_couÁ
());

1501 
	}
}

1504 
	$TEST
(
Te¡ResuÉPrİ”tyTe¡
, 
OÃPrİ”tyFoundWh’Added
) {

1505 
Te¡ResuÉ
 
‹¡_»suÉ
;

1506 
Te¡Prİ”ty
 
	`´İ”ty
("key_1", "1");

1507 
Te¡ResuÉAcûssÜ
::
	`RecÜdPrİ”ty
(&
‹¡_»suÉ
, "‹¡ÿ£", 
´İ”ty
);

1508 
	`ASSERT_EQ
(1, 
‹¡_»suÉ
.
	`‹¡_´İ”ty_couÁ
());

1509 cÚ¡ 
Te¡Prİ”ty
& 
aùu®_´İ”ty
 = 
‹¡_»suÉ
.
	`G‘Te¡Prİ”ty
(0);

1510 
	`EXPECT_STREQ
("key_1", 
aùu®_´İ”ty
.
	`key
());

1511 
	`EXPECT_STREQ
("1", 
aùu®_´İ”ty
.
	`v®ue
());

1512 
	}
}

1515 
	$TEST
(
Te¡ResuÉPrİ”tyTe¡
, 
MuÉËPrİ”t›sFoundWh’Added
) {

1516 
Te¡ResuÉ
 
‹¡_»suÉ
;

1517 
Te¡Prİ”ty
 
	`´İ”ty_1
("key_1", "1");

1518 
Te¡Prİ”ty
 
	`´İ”ty_2
("key_2", "2");

1519 
Te¡ResuÉAcûssÜ
::
	`RecÜdPrİ”ty
(&
‹¡_»suÉ
, "‹¡ÿ£", 
´İ”ty_1
);

1520 
Te¡ResuÉAcûssÜ
::
	`RecÜdPrİ”ty
(&
‹¡_»suÉ
, "‹¡ÿ£", 
´İ”ty_2
);

1521 
	`ASSERT_EQ
(2, 
‹¡_»suÉ
.
	`‹¡_´İ”ty_couÁ
());

1522 cÚ¡ 
Te¡Prİ”ty
& 
aùu®_´İ”ty_1
 = 
‹¡_»suÉ
.
	`G‘Te¡Prİ”ty
(0);

1523 
	`EXPECT_STREQ
("key_1", 
aùu®_´İ”ty_1
.
	`key
());

1524 
	`EXPECT_STREQ
("1", 
aùu®_´İ”ty_1
.
	`v®ue
());

1526 cÚ¡ 
Te¡Prİ”ty
& 
aùu®_´İ”ty_2
 = 
‹¡_»suÉ
.
	`G‘Te¡Prİ”ty
(1);

1527 
	`EXPECT_STREQ
("key_2", 
aùu®_´İ”ty_2
.
	`key
());

1528 
	`EXPECT_STREQ
("2", 
aùu®_´İ”ty_2
.
	`v®ue
());

1529 
	}
}

1532 
	$TEST
(
Te¡ResuÉPrİ”tyTe¡
, 
Ov”ridesV®uesFÜDu¶iÿ‹Keys
) {

1533 
Te¡ResuÉ
 
‹¡_»suÉ
;

1534 
Te¡Prİ”ty
 
	`´İ”ty_1_1
("key_1", "1");

1535 
Te¡Prİ”ty
 
	`´İ”ty_2_1
("key_2", "2");

1536 
Te¡Prİ”ty
 
	`´İ”ty_1_2
("key_1", "12");

1537 
Te¡Prİ”ty
 
	`´İ”ty_2_2
("key_2", "22");

1538 
Te¡ResuÉAcûssÜ
::
	`RecÜdPrİ”ty
(&
‹¡_»suÉ
, "‹¡ÿ£", 
´İ”ty_1_1
);

1539 
Te¡ResuÉAcûssÜ
::
	`RecÜdPrİ”ty
(&
‹¡_»suÉ
, "‹¡ÿ£", 
´İ”ty_2_1
);

1540 
Te¡ResuÉAcûssÜ
::
	`RecÜdPrİ”ty
(&
‹¡_»suÉ
, "‹¡ÿ£", 
´İ”ty_1_2
);

1541 
Te¡ResuÉAcûssÜ
::
	`RecÜdPrİ”ty
(&
‹¡_»suÉ
, "‹¡ÿ£", 
´İ”ty_2_2
);

1543 
	`ASSERT_EQ
(2, 
‹¡_»suÉ
.
	`‹¡_´İ”ty_couÁ
());

1544 cÚ¡ 
Te¡Prİ”ty
& 
aùu®_´İ”ty_1
 = 
‹¡_»suÉ
.
	`G‘Te¡Prİ”ty
(0);

1545 
	`EXPECT_STREQ
("key_1", 
aùu®_´İ”ty_1
.
	`key
());

1546 
	`EXPECT_STREQ
("12", 
aùu®_´İ”ty_1
.
	`v®ue
());

1548 cÚ¡ 
Te¡Prİ”ty
& 
aùu®_´İ”ty_2
 = 
‹¡_»suÉ
.
	`G‘Te¡Prİ”ty
(1);

1549 
	`EXPECT_STREQ
("key_2", 
aùu®_´İ”ty_2
.
	`key
());

1550 
	`EXPECT_STREQ
("22", 
aùu®_´İ”ty_2
.
	`v®ue
());

1551 
	}
}

1554 
	$TEST
(
Te¡ResuÉPrİ”tyTe¡
, 
G‘Te¡Prİ”ty
) {

1555 
Te¡ResuÉ
 
‹¡_»suÉ
;

1556 
Te¡Prİ”ty
 
	`´İ”ty_1
("key_1", "1");

1557 
Te¡Prİ”ty
 
	`´İ”ty_2
("key_2", "2");

1558 
Te¡Prİ”ty
 
	`´İ”ty_3
("key_3", "3");

1559 
Te¡ResuÉAcûssÜ
::
	`RecÜdPrİ”ty
(&
‹¡_»suÉ
, "‹¡ÿ£", 
´İ”ty_1
);

1560 
Te¡ResuÉAcûssÜ
::
	`RecÜdPrİ”ty
(&
‹¡_»suÉ
, "‹¡ÿ£", 
´İ”ty_2
);

1561 
Te¡ResuÉAcûssÜ
::
	`RecÜdPrİ”ty
(&
‹¡_»suÉ
, "‹¡ÿ£", 
´İ”ty_3
);

1563 cÚ¡ 
Te¡Prİ”ty
& 
ãtched_´İ”ty_1
 = 
‹¡_»suÉ
.
	`G‘Te¡Prİ”ty
(0);

1564 cÚ¡ 
Te¡Prİ”ty
& 
ãtched_´İ”ty_2
 = 
‹¡_»suÉ
.
	`G‘Te¡Prİ”ty
(1);

1565 cÚ¡ 
Te¡Prİ”ty
& 
ãtched_´İ”ty_3
 = 
‹¡_»suÉ
.
	`G‘Te¡Prİ”ty
(2);

1567 
	`EXPECT_STREQ
("key_1", 
ãtched_´İ”ty_1
.
	`key
());

1568 
	`EXPECT_STREQ
("1", 
ãtched_´İ”ty_1
.
	`v®ue
());

1570 
	`EXPECT_STREQ
("key_2", 
ãtched_´İ”ty_2
.
	`key
());

1571 
	`EXPECT_STREQ
("2", 
ãtched_´İ”ty_2
.
	`v®ue
());

1573 
	`EXPECT_STREQ
("key_3", 
ãtched_´İ”ty_3
.
	`key
());

1574 
	`EXPECT_STREQ
("3", 
ãtched_´İ”ty_3
.
	`v®ue
());

1576 
	`EXPECT_DEATH_IF_SUPPORTED
(
‹¡_»suÉ
.
	`G‘Te¡Prİ”ty
(3), "");

1577 
	`EXPECT_DEATH_IF_SUPPORTED
(
‹¡_»suÉ
.
	`G‘Te¡Prİ”ty
(-1), "");

1578 
	}
}

1592 şas 
	cGTe¡FÏgSav”Te¡
 : 
public
 
Te¡
 {

1593 
´Ùeùed
:

1597 
S‘UpTe¡Su™e
() {

1598 
§v”_
 = 
Ãw
 
GTe¡FÏgSav”
;

1600 
GTEST_FLAG
(
®so_run_di§bËd_‹¡s
èğ
çl£
;

1601 
GTEST_FLAG
(
b»ak_Ú_çu»
èğ
çl£
;

1602 
GTEST_FLAG
(
ÿtch_exû±iÚs
èğ
çl£
;

1603 
GTEST_FLAG
(
d—th_‹¡_u£_fÜk
èğ
çl£
;

1604 
GTEST_FLAG
(
cŞÜ
) = "auto";

1605 
GTEST_FLAG
(
ç_ç¡
èğ
çl£
;

1606 
GTEST_FLAG
(
f‹r
) = "";

1607 
GTEST_FLAG
(
li¡_‹¡s
èğ
çl£
;

1608 
GTEST_FLAG
(
ouut
) = "";

1609 
GTEST_FLAG
(
br›f
èğ
çl£
;

1610 
GTEST_FLAG
(
´št_time
èğ
Œue
;

1611 
GTEST_FLAG
(
¿ndom_£ed
) = 0;

1612 
GTEST_FLAG
(
»³©
) = 1;

1613 
GTEST_FLAG
(
shufæe
èğ
çl£
;

1614 
GTEST_FLAG
(
¡ack_Œaû_d•th
èğ
kMaxSckT¿ûD•th
;

1615 
GTEST_FLAG
(
¡»am_»suÉ_to
) = "";

1616 
GTEST_FLAG
(
throw_Ú_çu»
èğ
çl£
;

1621 
T—rDownTe¡Su™e
() {

1622 
d–‘e
 
	g§v”_
;

1623 
	g§v”_
 = 
nuÎ±r
;

1628 
V”ifyAndModifyFÏgs
() {

1629 
EXPECT_FALSE
(
GTEST_FLAG
(
®so_run_di§bËd_‹¡s
));

1630 
EXPECT_FALSE
(
GTEST_FLAG
(
b»ak_Ú_çu»
));

1631 
EXPECT_FALSE
(
GTEST_FLAG
(
ÿtch_exû±iÚs
));

1632 
EXPECT_STREQ
("auto", 
GTEST_FLAG
(
cŞÜ
).
c_¡r
());

1633 
EXPECT_FALSE
(
GTEST_FLAG
(
d—th_‹¡_u£_fÜk
));

1634 
EXPECT_FALSE
(
GTEST_FLAG
(
ç_ç¡
));

1635 
EXPECT_STREQ
("", 
GTEST_FLAG
(
f‹r
).
c_¡r
());

1636 
EXPECT_FALSE
(
GTEST_FLAG
(
li¡_‹¡s
));

1637 
EXPECT_STREQ
("", 
GTEST_FLAG
(
ouut
).
c_¡r
());

1638 
EXPECT_FALSE
(
GTEST_FLAG
(
br›f
));

1639 
EXPECT_TRUE
(
GTEST_FLAG
(
´št_time
));

1640 
EXPECT_EQ
(0, 
GTEST_FLAG
(
¿ndom_£ed
));

1641 
EXPECT_EQ
(1, 
GTEST_FLAG
(
»³©
));

1642 
EXPECT_FALSE
(
GTEST_FLAG
(
shufæe
));

1643 
EXPECT_EQ
(
kMaxSckT¿ûD•th
, 
GTEST_FLAG
(
¡ack_Œaû_d•th
));

1644 
EXPECT_STREQ
("", 
GTEST_FLAG
(
¡»am_»suÉ_to
).
c_¡r
());

1645 
EXPECT_FALSE
(
GTEST_FLAG
(
throw_Ú_çu»
));

1647 
GTEST_FLAG
(
®so_run_di§bËd_‹¡s
èğ
Œue
;

1648 
GTEST_FLAG
(
b»ak_Ú_çu»
èğ
Œue
;

1649 
GTEST_FLAG
(
ÿtch_exû±iÚs
èğ
Œue
;

1650 
GTEST_FLAG
(
cŞÜ
) = "no";

1651 
GTEST_FLAG
(
d—th_‹¡_u£_fÜk
èğ
Œue
;

1652 
GTEST_FLAG
(
ç_ç¡
èğ
Œue
;

1653 
GTEST_FLAG
(
f‹r
) = "abc";

1654 
GTEST_FLAG
(
li¡_‹¡s
èğ
Œue
;

1655 
GTEST_FLAG
(
ouut
) = "xml:foo.xml";

1656 
GTEST_FLAG
(
br›f
èğ
Œue
;

1657 
GTEST_FLAG
(
´št_time
èğ
çl£
;

1658 
GTEST_FLAG
(
¿ndom_£ed
) = 1;

1659 
GTEST_FLAG
(
»³©
) = 100;

1660 
GTEST_FLAG
(
shufæe
èğ
Œue
;

1661 
GTEST_FLAG
(
¡ack_Œaû_d•th
) = 1;

1662 
GTEST_FLAG
(
¡»am_»suÉ_to
) = "localhost:1234";

1663 
GTEST_FLAG
(
throw_Ú_çu»
èğ
Œue
;

1666 
	g´iv©e
:

1668 
GTe¡FÏgSav”
* 
§v”_
;

1671 
GTe¡FÏgSav”
* 
	gGTe¡FÏgSav”Te¡
::
§v”_
 = 
nuÎ±r
;

1677 
	$TEST_F
(
GTe¡FÏgSav”Te¡
, 
ModifyGTe¡FÏgs
) {

1678 
	`V”ifyAndModifyFÏgs
();

1679 
	}
}

1683 
	$TEST_F
(
GTe¡FÏgSav”Te¡
, 
V”ifyGTe¡FÏgs
) {

1684 
	`V”ifyAndModifyFÏgs
();

1685 
	}
}

1690 
	$S‘Env
(cÚ¡ * 
Çme
, cÚ¡ * 
v®ue
) {

1691 #ià
GTEST_OS_WINDOWS_MOBILE


1694 #–ià
	`defšed
(
__BORLANDC__
è|| defšed(
__SunOS_5_8
è|| defšed(
__SunOS_5_9
)

1698 
¡d
::
m­
<¡d::
¡ršg
, std::¡ršg*> 
added_’v
;

1702 
¡d
::
¡ršg
 *
´ev_’v
 = 
NULL
;

1703 ià(
added_’v
.
	`fšd
(
Çme
è!ğadded_’v.
	`’d
()) {

1704 
´ev_’v
 = 
added_’v
[
Çme
];

1706 
added_’v
[
Çme
] = 
Ãw
 
¡d
::
	`¡ršg
(

1707 (
	`Mes§ge
(è<< 
Çme
 << "=" << 
v®ue
).
	`G‘SŒšg
());

1712 
	`pu‹nv
(
cÚ¡_ÿ¡
<*>(
added_’v
[
Çme
]->
	`c_¡r
()));

1713 
d–‘e
 
´ev_’v
;

1714 #–ià
GTEST_OS_WINDOWS


1715 
	`_pu‹nv
((
	`Mes§ge
(è<< 
Çme
 << "=" << 
v®ue
).
	`G‘SŒšg
().
	`c_¡r
());

1717 ià(*
v®ue
 == '\0') {

1718 
	`un£‹nv
(
Çme
);

1720 
	`£‹nv
(
Çme
, 
v®ue
, 1);

1723 
	}
}

1725 #ià!
GTEST_OS_WINDOWS_MOBILE


1728 
usšg
 
	g‹¡šg
::
š‹º®
::
IÁ32FromGTe¡Env
;

1734 
	$TEST
(
IÁ32FromGTe¡EnvTe¡
, 
R‘uºsDeçuÉWh’V¬ŸbËIsNÙS‘
) {

1735 
	`S‘Env
(
GTEST_FLAG_PREFIX_UPPER_
 "TEMP", "");

1736 
	`EXPECT_EQ
(10, 
	`IÁ32FromGTe¡Env
("temp", 10));

1737 
	}
}

1739 #ià!
	$defšed
(
GTEST_GET_INT32_FROM_ENV_
)

1743 
	$TEST
(
IÁ32FromGTe¡EnvTe¡
, 
R‘uºsDeçuÉWh’V®ueOv”æows
) {

1744 
	`´štf
("(expecting 2 warnings)\n");

1746 
	`S‘Env
(
GTEST_FLAG_PREFIX_UPPER_
 "TEMP", "12345678987654321");

1747 
	`EXPECT_EQ
(20, 
	`IÁ32FromGTe¡Env
("temp", 20));

1749 
	`S‘Env
(
GTEST_FLAG_PREFIX_UPPER_
 "TEMP", "-12345678987654321");

1750 
	`EXPECT_EQ
(30, 
	`IÁ32FromGTe¡Env
("temp", 30));

1751 
	}
}

1755 
	$TEST
(
IÁ32FromGTe¡EnvTe¡
, 
R‘uºsDeçuÉWh’V®ueIsInv®id
) {

1756 
	`´štf
("(expecting 2 warnings)\n");

1758 
	`S‘Env
(
GTEST_FLAG_PREFIX_UPPER_
 "TEMP", "A1");

1759 
	`EXPECT_EQ
(40, 
	`IÁ32FromGTe¡Env
("temp", 40));

1761 
	`S‘Env
(
GTEST_FLAG_PREFIX_UPPER_
 "TEMP", "12X");

1762 
	`EXPECT_EQ
(50, 
	`IÁ32FromGTe¡Env
("temp", 50));

1763 
	}
}

1770 
	$TEST
(
IÁ32FromGTe¡EnvTe¡
, 
P¬£sAndR‘uºsV®idV®ue
) {

1771 
	`S‘Env
(
GTEST_FLAG_PREFIX_UPPER_
 "TEMP", "123");

1772 
	`EXPECT_EQ
(123, 
	`IÁ32FromGTe¡Env
("temp", 0));

1774 
	`S‘Env
(
GTEST_FLAG_PREFIX_UPPER_
 "TEMP", "-321");

1775 
	`EXPECT_EQ
(-321, 
	`IÁ32FromGTe¡Env
("temp", 0));

1776 
	}
}

1783 
	$TEST
(
P¬£IÁ32FÏgTe¡
, 
R‘uºsF®£FÜInv®idFÏg
) {

1784 
št32_t
 
v®ue
 = 123;

1785 
	`EXPECT_FALSE
(
	`P¬£IÁ32FÏg
("--a=100", "b", &
v®ue
));

1786 
	`EXPECT_EQ
(123, 
v®ue
);

1788 
	`EXPECT_FALSE
(
	`P¬£IÁ32FÏg
("a=100", "a", &
v®ue
));

1789 
	`EXPECT_EQ
(123, 
v®ue
);

1790 
	}
}

1794 
	$TEST
(
P¬£IÁ32FÏgTe¡
, 
R‘uºsDeçuÉWh’V®ueOv”æows
) {

1795 
	`´štf
("(expecting 2 warnings)\n");

1797 
št32_t
 
v®ue
 = 123;

1798 
	`EXPECT_FALSE
(
	`P¬£IÁ32FÏg
("--abc=12345678987654321", "abc", &
v®ue
));

1799 
	`EXPECT_EQ
(123, 
v®ue
);

1801 
	`EXPECT_FALSE
(
	`P¬£IÁ32FÏg
("--abc=-12345678987654321", "abc", &
v®ue
));

1802 
	`EXPECT_EQ
(123, 
v®ue
);

1803 
	}
}

1808 
	$TEST
(
P¬£IÁ32FÏgTe¡
, 
R‘uºsDeçuÉWh’V®ueIsInv®id
) {

1809 
	`´štf
("(expecting 2 warnings)\n");

1811 
št32_t
 
v®ue
 = 123;

1812 
	`EXPECT_FALSE
(
	`P¬£IÁ32FÏg
("--abc=A1", "abc", &
v®ue
));

1813 
	`EXPECT_EQ
(123, 
v®ue
);

1815 
	`EXPECT_FALSE
(
	`P¬£IÁ32FÏg
("--abc=12X", "abc", &
v®ue
));

1816 
	`EXPECT_EQ
(123, 
v®ue
);

1817 
	}
}

1822 
	$TEST
(
P¬£IÁ32FÏgTe¡
, 
P¬£sAndR‘uºsV®idV®ue
) {

1823 
št32_t
 
v®ue
 = 123;

1824 
	`EXPECT_TRUE
(
	`P¬£IÁ32FÏg
("--" 
GTEST_FLAG_PREFIX_
 "abc=456", "abc", &
v®ue
));

1825 
	`EXPECT_EQ
(456, 
v®ue
);

1827 
	`EXPECT_TRUE
(
	`P¬£IÁ32FÏg
("--" 
GTEST_FLAG_PREFIX_
 "abc=-789",

1828 "abc", &
v®ue
));

1829 
	`EXPECT_EQ
(-789, 
v®ue
);

1830 
	}
}

1835 #ià!
GTEST_OS_WINDOWS_MOBILE


1836 
	$TEST
(
IÁ32FromEnvOrD›Te¡
, 
P¬£sAndR‘uºsV®idV®ue
) {

1837 
	`EXPECT_EQ
(333, 
	`IÁ32FromEnvOrD›
(
GTEST_FLAG_PREFIX_UPPER_
 "UnsetVar", 333));

1838 
	`S‘Env
(
GTEST_FLAG_PREFIX_UPPER_
 "UnsetVar", "123");

1839 
	`EXPECT_EQ
(123, 
	`IÁ32FromEnvOrD›
(
GTEST_FLAG_PREFIX_UPPER_
 "UnsetVar", 333));

1840 
	`S‘Env
(
GTEST_FLAG_PREFIX_UPPER_
 "UnsetVar", "-123");

1841 
	`EXPECT_EQ
(-123, 
	`IÁ32FromEnvOrD›
(
GTEST_FLAG_PREFIX_UPPER_
 "UnsetVar", 333));

1842 
	}
}

1847 
	$TEST
(
IÁ32FromEnvOrD›D—thTe¡
, 
AbÜtsOnFau»
) {

1848 
	`S‘Env
(
GTEST_FLAG_PREFIX_UPPER_
 "VAR", "xxx");

1849 
	`EXPECT_DEATH_IF_SUPPORTED
(

1850 
	`IÁ32FromEnvOrD›
(
GTEST_FLAG_PREFIX_UPPER_
 "VAR", 123),

1852 
	}
}

1856 
	$TEST
(
IÁ32FromEnvOrD›D—thTe¡
, 
AbÜtsOnIÁ32Ov”æow
) {

1857 
	`S‘Env
(
GTEST_FLAG_PREFIX_UPPER_
 "VAR", "1234567891234567891234");

1858 
	`EXPECT_DEATH_IF_SUPPORTED
(

1859 
	`IÁ32FromEnvOrD›
(
GTEST_FLAG_PREFIX_UPPER_
 "VAR", 123),

1861 
	}
}

1865 
	$TEST
(
ShouldRunTe¡OnSh¬dTe¡
, 
IsP¬t™iÚWh’Th”eIsOÃSh¬d
) {

1866 
	`EXPECT_TRUE
(
	`ShouldRunTe¡OnSh¬d
(1, 0, 0));

1867 
	`EXPECT_TRUE
(
	`ShouldRunTe¡OnSh¬d
(1, 0, 1));

1868 
	`EXPECT_TRUE
(
	`ShouldRunTe¡OnSh¬d
(1, 0, 2));

1869 
	`EXPECT_TRUE
(
	`ShouldRunTe¡OnSh¬d
(1, 0, 3));

1870 
	`EXPECT_TRUE
(
	`ShouldRunTe¡OnSh¬d
(1, 0, 4));

1871 
	}
}

1873 şas 
	cShouldSh¬dTe¡
 : 
public
 
‹¡šg
::
Te¡
 {

1874 
´Ùeùed
:

1875 
S‘Up
(è
ov”ride
 {

1876 
šdex_v¬_
 = 
GTEST_FLAG_PREFIX_UPPER_
 "INDEX";

1877 
	gtÙ®_v¬_
 = 
GTEST_FLAG_PREFIX_UPPER_
 "TOTAL";

1880 
T—rDown
(è
	gov”ride
 {

1881 
S‘Env
(
šdex_v¬_
, "");

1882 
S‘Env
(
tÙ®_v¬_
, "");

1885 cÚ¡ * 
	gšdex_v¬_
;

1886 cÚ¡ * 
	gtÙ®_v¬_
;

1891 
	$TEST_F
(
ShouldSh¬dTe¡
, 
R‘uºsF®£Wh’Ne™h”EnvV¬IsS‘
) {

1892 
	`S‘Env
(
šdex_v¬_
, "");

1893 
	`S‘Env
(
tÙ®_v¬_
, "");

1895 
	`EXPECT_FALSE
(
	`ShouldSh¬d
(
tÙ®_v¬_
, 
šdex_v¬_
, 
çl£
));

1896 
	`EXPECT_FALSE
(
	`ShouldSh¬d
(
tÙ®_v¬_
, 
šdex_v¬_
, 
Œue
));

1897 
	}
}

1900 
	$TEST_F
(
ShouldSh¬dTe¡
, 
R‘uºsF®£Wh’TÙ®Sh¬dIsOÃ
) {

1901 
	`S‘Env
(
šdex_v¬_
, "0");

1902 
	`S‘Env
(
tÙ®_v¬_
, "1");

1903 
	`EXPECT_FALSE
(
	`ShouldSh¬d
(
tÙ®_v¬_
, 
šdex_v¬_
, 
çl£
));

1904 
	`EXPECT_FALSE
(
	`ShouldSh¬d
(
tÙ®_v¬_
, 
šdex_v¬_
, 
Œue
));

1905 
	}
}

1910 #ià!
GTEST_OS_WINDOWS_MOBILE


1911 
	$TEST_F
(
ShouldSh¬dTe¡
, 
WÜksWh’Sh¬dEnvV¬sA»V®id
) {

1912 
	`S‘Env
(
šdex_v¬_
, "4");

1913 
	`S‘Env
(
tÙ®_v¬_
, "22");

1914 
	`EXPECT_TRUE
(
	`ShouldSh¬d
(
tÙ®_v¬_
, 
šdex_v¬_
, 
çl£
));

1915 
	`EXPECT_FALSE
(
	`ShouldSh¬d
(
tÙ®_v¬_
, 
šdex_v¬_
, 
Œue
));

1917 
	`S‘Env
(
šdex_v¬_
, "8");

1918 
	`S‘Env
(
tÙ®_v¬_
, "9");

1919 
	`EXPECT_TRUE
(
	`ShouldSh¬d
(
tÙ®_v¬_
, 
šdex_v¬_
, 
çl£
));

1920 
	`EXPECT_FALSE
(
	`ShouldSh¬d
(
tÙ®_v¬_
, 
šdex_v¬_
, 
Œue
));

1922 
	`S‘Env
(
šdex_v¬_
, "0");

1923 
	`S‘Env
(
tÙ®_v¬_
, "9");

1924 
	`EXPECT_TRUE
(
	`ShouldSh¬d
(
tÙ®_v¬_
, 
šdex_v¬_
, 
çl£
));

1925 
	`EXPECT_FALSE
(
	`ShouldSh¬d
(
tÙ®_v¬_
, 
šdex_v¬_
, 
Œue
));

1926 
	}
}

1931 
ShouldSh¬dTe¡
 
	tShouldSh¬dD—thTe¡
;

1933 
	$TEST_F
(
ShouldSh¬dD—thTe¡
, 
AbÜtsWh’Sh¬dšgEnvV¬sA»Inv®id
) {

1934 
	`S‘Env
(
šdex_v¬_
, "4");

1935 
	`S‘Env
(
tÙ®_v¬_
, "4");

1936 
	`EXPECT_DEATH_IF_SUPPORTED
(
	`ShouldSh¬d
(
tÙ®_v¬_
, 
šdex_v¬_
, 
çl£
), ".*");

1938 
	`S‘Env
(
šdex_v¬_
, "4");

1939 
	`S‘Env
(
tÙ®_v¬_
, "-2");

1940 
	`EXPECT_DEATH_IF_SUPPORTED
(
	`ShouldSh¬d
(
tÙ®_v¬_
, 
šdex_v¬_
, 
çl£
), ".*");

1942 
	`S‘Env
(
šdex_v¬_
, "5");

1943 
	`S‘Env
(
tÙ®_v¬_
, "");

1944 
	`EXPECT_DEATH_IF_SUPPORTED
(
	`ShouldSh¬d
(
tÙ®_v¬_
, 
šdex_v¬_
, 
çl£
), ".*");

1946 
	`S‘Env
(
šdex_v¬_
, "");

1947 
	`S‘Env
(
tÙ®_v¬_
, "5");

1948 
	`EXPECT_DEATH_IF_SUPPORTED
(
	`ShouldSh¬d
(
tÙ®_v¬_
, 
šdex_v¬_
, 
çl£
), ".*");

1949 
	}
}

1953 
	$TEST
(
ShouldRunTe¡OnSh¬dTe¡
, 
IsP¬t™iÚWh’Th”eA»FiveSh¬ds
) {

1955 cÚ¡ 
num_‹¡s
 = 17;

1956 cÚ¡ 
num_sh¬ds
 = 5;

1959 
‹¡_id
 = 0;e¡_id < 
num_‹¡s
;est_id++) {

1960 
´ev_£Ëùed_sh¬d_šdex
 = -1;

1961 
sh¬d_šdex
 = 0; sh¬d_šdex < 
num_sh¬ds
; shard_index++) {

1962 ià(
	`ShouldRunTe¡OnSh¬d
(
num_sh¬ds
, 
sh¬d_šdex
, 
‹¡_id
)) {

1963 ià(
´ev_£Ëùed_sh¬d_šdex
 < 0) {

1964 
´ev_£Ëùed_sh¬d_šdex
 = 
sh¬d_šdex
;

1966 
	`ADD_FAILURE
(è<< "Sh¬d " << 
´ev_£Ëùed_sh¬d_šdex
 << "‡nd "

1967 << 
sh¬d_šdex
 << "‡» bÙh s–eùedØruÀ‹¡ " << 
‹¡_id
;

1975 
sh¬d_šdex
 = 0; sh¬d_šdex < 
num_sh¬ds
; shard_index++) {

1976 
num_‹¡s_Ú_sh¬d
 = 0;

1977 
‹¡_id
 = 0;e¡_id < 
num_‹¡s
;est_id++) {

1978 
num_‹¡s_Ú_sh¬d
 +=

1979 
	`ShouldRunTe¡OnSh¬d
(
num_sh¬ds
, 
sh¬d_šdex
, 
‹¡_id
);

1981 
	`EXPECT_GE
(
num_‹¡s_Ú_sh¬d
, 
num_‹¡s
 / 
num_sh¬ds
);

1983 
	}
}

1995 
	$TEST
(
Un™Te¡Te¡
, 
CªG‘Origš®WÜkšgDœ
) {

1996 
	`ASSERT_TRUE
(
Un™Te¡
::
	`G‘In¡ªû
()->
	`Üigš®_wÜkšg_dœ
(è!ğ
nuÎ±r
);

1997 
	`EXPECT_STRNE
(
Un™Te¡
::
	`G‘In¡ªû
()->
	`Üigš®_wÜkšg_dœ
(), "");

1998 
	}
}

2000 
	$TEST
(
Un™Te¡Te¡
, 
R‘uºsPÏusibËTime¡amp
) {

2001 
	`EXPECT_LT
(0, 
Un™Te¡
::
	`G‘In¡ªû
()->
	`¡¬t_time¡amp
());

2002 
	`EXPECT_LE
(
Un™Te¡
::
	`G‘In¡ªû
()->
	`¡¬t_time¡amp
(), 
	`G‘TimeInMlis
());

2003 
	}
}

2008 
	$Ex³ùNÚF©®Fau»RecÜdšgPrİ”tyW™hRe£rvedKey
(

2009 cÚ¡ 
Te¡ResuÉ
& 
‹¡_»suÉ
, cÚ¡ * 
key
) {

2010 
	`EXPECT_NONFATAL_FAILURE
(
Te¡
::
	`RecÜdPrİ”ty
(
key
, "1"), "Reserved key");

2011 
	`ASSERT_EQ
(0, 
‹¡_»suÉ
.
	`‹¡_´İ”ty_couÁ
()è<< "Prİ”ty fÜ key '" << 
key


2013 
	}
}

2015 
	$Ex³ùNÚF©®Fau»RecÜdšgPrİ”tyW™hRe£rvedKeyFÜCu¼’tTe¡
(

2016 cÚ¡ * 
key
) {

2017 cÚ¡ 
Te¡Info
* 
‹¡_šfo
 = 
Un™Te¡
::
	`G‘In¡ªû
()->
	`cu¼’t_‹¡_šfo
();

2018 
	`ASSERT_TRUE
(
‹¡_šfo
 !ğ
nuÎ±r
);

2019 
	`Ex³ùNÚF©®Fau»RecÜdšgPrİ”tyW™hRe£rvedKey
(*
‹¡_šfo
->
	`»suÉ
(),

2020 
key
);

2021 
	}
}

2023 
	$Ex³ùNÚF©®Fau»RecÜdšgPrİ”tyW™hRe£rvedKeyFÜCu¼’tTe¡Su™e
(

2024 cÚ¡ * 
key
) {

2025 cÚ¡ 
‹¡šg
::
Te¡Su™e
* 
‹¡_su™e
 =

2026 
Un™Te¡
::
	`G‘In¡ªû
()->
	`cu¼’t_‹¡_su™e
();

2027 
	`ASSERT_TRUE
(
‹¡_su™e
 !ğ
nuÎ±r
);

2028 
	`Ex³ùNÚF©®Fau»RecÜdšgPrİ”tyW™hRe£rvedKey
(

2029 
‹¡_su™e
->
	`ad_hoc_‹¡_»suÉ
(), 
key
);

2030 
	}
}

2032 
	$Ex³ùNÚF©®Fau»RecÜdšgPrİ”tyW™hRe£rvedKeyOutsideOfTe¡Su™e
(

2033 cÚ¡ * 
key
) {

2034 
	`Ex³ùNÚF©®Fau»RecÜdšgPrİ”tyW™hRe£rvedKey
(

2035 
Un™Te¡
::
	`G‘In¡ªû
()->
	`ad_hoc_‹¡_»suÉ
(), 
key
);

2036 
	}
}

2041 şas 
	cUn™Te¡RecÜdPrİ”tyTe¡
 :

2042 
public
 
‹¡šg
::
š‹º®
::
Un™Te¡RecÜdPrİ”tyTe¡H–³r
 {

2043 
public
:

2044 
S‘UpTe¡Su™e
() {

2045 
Ex³ùNÚF©®Fau»RecÜdšgPrİ”tyW™hRe£rvedKeyFÜCu¼’tTe¡Su™e
(

2047 
Ex³ùNÚF©®Fau»RecÜdšgPrİ”tyW™hRe£rvedKeyFÜCu¼’tTe¡Su™e
(

2049 
Ex³ùNÚF©®Fau»RecÜdšgPrİ”tyW™hRe£rvedKeyFÜCu¼’tTe¡Su™e
(

2051 
Ex³ùNÚF©®Fau»RecÜdšgPrİ”tyW™hRe£rvedKeyFÜCu¼’tTe¡Su™e
(

2053 
Ex³ùNÚF©®Fau»RecÜdšgPrİ”tyW™hRe£rvedKeyFÜCu¼’tTe¡Su™e
(

2055 
Ex³ùNÚF©®Fau»RecÜdšgPrİ”tyW™hRe£rvedKeyFÜCu¼’tTe¡Su™e
(

2058 
	gTe¡
::
RecÜdPrİ”ty
("test_case_key_1", "1");

2060 cÚ¡ 
	g‹¡šg
::
Te¡Su™e
* 
‹¡_su™e
 =

2061 
Un™Te¡
::
G‘In¡ªû
()->
cu¼’t_‹¡_su™e
();

2063 
ASSERT_TRUE
(
‹¡_su™e
 !ğ
nuÎ±r
);

2065 
ASSERT_EQ
(1, 
‹¡_su™e
->
ad_hoc_‹¡_»suÉ
().
‹¡_´İ”ty_couÁ
());

2066 
EXPECT_STREQ
("test_case_key_1",

2067 
‹¡_su™e
->
ad_hoc_‹¡_»suÉ
().
G‘Te¡Prİ”ty
(0).
key
());

2068 
EXPECT_STREQ
("1",

2069 
‹¡_su™e
->
ad_hoc_‹¡_»suÉ
().
G‘Te¡Prİ”ty
(0).
v®ue
());

2074 
	$TEST_F
(
Un™Te¡RecÜdPrİ”tyTe¡
, 
OÃPrİ”tyFoundWh’Added
) {

2075 
	`Un™Te¡RecÜdPrİ”ty
("key_1", "1");

2077 
	`ASSERT_EQ
(1, 
un™_‹¡_
.
	`ad_hoc_‹¡_»suÉ
().
	`‹¡_´İ”ty_couÁ
());

2079 
	`EXPECT_STREQ
("key_1",

2080 
un™_‹¡_
.
	`ad_hoc_‹¡_»suÉ
().
	`G‘Te¡Prİ”ty
(0).
	`key
());

2081 
	`EXPECT_STREQ
("1",

2082 
un™_‹¡_
.
	`ad_hoc_‹¡_»suÉ
().
	`G‘Te¡Prİ”ty
(0).
	`v®ue
());

2083 
	}
}

2086 
	$TEST_F
(
Un™Te¡RecÜdPrİ”tyTe¡
, 
MuÉËPrİ”t›sFoundWh’Added
) {

2087 
	`Un™Te¡RecÜdPrİ”ty
("key_1", "1");

2088 
	`Un™Te¡RecÜdPrİ”ty
("key_2", "2");

2090 
	`ASSERT_EQ
(2, 
un™_‹¡_
.
	`ad_hoc_‹¡_»suÉ
().
	`‹¡_´İ”ty_couÁ
());

2092 
	`EXPECT_STREQ
("key_1",

2093 
un™_‹¡_
.
	`ad_hoc_‹¡_»suÉ
().
	`G‘Te¡Prİ”ty
(0).
	`key
());

2094 
	`EXPECT_STREQ
("1", 
un™_‹¡_
.
	`ad_hoc_‹¡_»suÉ
().
	`G‘Te¡Prİ”ty
(0).
	`v®ue
());

2096 
	`EXPECT_STREQ
("key_2",

2097 
un™_‹¡_
.
	`ad_hoc_‹¡_»suÉ
().
	`G‘Te¡Prİ”ty
(1).
	`key
());

2098 
	`EXPECT_STREQ
("2", 
un™_‹¡_
.
	`ad_hoc_‹¡_»suÉ
().
	`G‘Te¡Prİ”ty
(1).
	`v®ue
());

2099 
	}
}

2102 
	$TEST_F
(
Un™Te¡RecÜdPrİ”tyTe¡
, 
Ov”ridesV®uesFÜDu¶iÿ‹Keys
) {

2103 
	`Un™Te¡RecÜdPrİ”ty
("key_1", "1");

2104 
	`Un™Te¡RecÜdPrİ”ty
("key_2", "2");

2105 
	`Un™Te¡RecÜdPrİ”ty
("key_1", "12");

2106 
	`Un™Te¡RecÜdPrİ”ty
("key_2", "22");

2108 
	`ASSERT_EQ
(2, 
un™_‹¡_
.
	`ad_hoc_‹¡_»suÉ
().
	`‹¡_´İ”ty_couÁ
());

2110 
	`EXPECT_STREQ
("key_1",

2111 
un™_‹¡_
.
	`ad_hoc_‹¡_»suÉ
().
	`G‘Te¡Prİ”ty
(0).
	`key
());

2112 
	`EXPECT_STREQ
("12",

2113 
un™_‹¡_
.
	`ad_hoc_‹¡_»suÉ
().
	`G‘Te¡Prİ”ty
(0).
	`v®ue
());

2115 
	`EXPECT_STREQ
("key_2",

2116 
un™_‹¡_
.
	`ad_hoc_‹¡_»suÉ
().
	`G‘Te¡Prİ”ty
(1).
	`key
());

2117 
	`EXPECT_STREQ
("22",

2118 
un™_‹¡_
.
	`ad_hoc_‹¡_»suÉ
().
	`G‘Te¡Prİ”ty
(1).
	`v®ue
());

2119 
	}
}

2121 
	$TEST_F
(
Un™Te¡RecÜdPrİ”tyTe¡
,

2122 
AddFau»InsideTe¡sWh’UsšgTe¡Su™eRe£rvedKeys
) {

2123 
	`Ex³ùNÚF©®Fau»RecÜdšgPrİ”tyW™hRe£rvedKeyFÜCu¼’tTe¡
(

2125 
	`Ex³ùNÚF©®Fau»RecÜdšgPrİ”tyW™hRe£rvedKeyFÜCu¼’tTe¡
(

2127 
	`Ex³ùNÚF©®Fau»RecÜdšgPrİ”tyW™hRe£rvedKeyFÜCu¼’tTe¡
(

2129 
	`Ex³ùNÚF©®Fau»RecÜdšgPrİ”tyW™hRe£rvedKeyFÜCu¼’tTe¡
(

2131 
	`Ex³ùNÚF©®Fau»RecÜdšgPrİ”tyW™hRe£rvedKeyFÜCu¼’tTe¡
(

2133 
	`Ex³ùNÚF©®Fau»RecÜdšgPrİ”tyW™hRe£rvedKeyFÜCu¼’tTe¡
(

2135 
	}
}

2137 
	$TEST_F
(
Un™Te¡RecÜdPrİ”tyTe¡
,

2138 
AddRecÜdW™hRe£rvedKeysG’”©esCÜ»ùPrİ”tyLi¡
) {

2139 
	`EXPECT_NONFATAL_FAILURE
(

2140 
Te¡
::
	`RecÜdPrİ”ty
("name", "1"),

2143 
	}
}

2145 şas 
	cUn™Te¡RecÜdPrİ”tyTe¡EnvœÚm’t
 : 
public
 
EnvœÚm’t
 {

2146 
public
:

2147 
T—rDown
(è
ov”ride
 {

2148 
Ex³ùNÚF©®Fau»RecÜdšgPrİ”tyW™hRe£rvedKeyOutsideOfTe¡Su™e
(

2150 
Ex³ùNÚF©®Fau»RecÜdšgPrİ”tyW™hRe£rvedKeyOutsideOfTe¡Su™e
(

2152 
Ex³ùNÚF©®Fau»RecÜdšgPrİ”tyW™hRe£rvedKeyOutsideOfTe¡Su™e
(

2154 
Ex³ùNÚF©®Fau»RecÜdšgPrİ”tyW™hRe£rvedKeyOutsideOfTe¡Su™e
(

2156 
Ex³ùNÚF©®Fau»RecÜdšgPrİ”tyW™hRe£rvedKeyOutsideOfTe¡Su™e
(

2158 
Ex³ùNÚF©®Fau»RecÜdšgPrİ”tyW™hRe£rvedKeyOutsideOfTe¡Su™e
(

2160 
Ex³ùNÚF©®Fau»RecÜdšgPrİ”tyW™hRe£rvedKeyOutsideOfTe¡Su™e
(

2162 
Ex³ùNÚF©®Fau»RecÜdšgPrİ”tyW™hRe£rvedKeyOutsideOfTe¡Su™e
(

2168 
EnvœÚm’t
* 
»cÜd_´İ”ty_’v
 
	gGTEST_ATTRIBUTE_UNUSED_
 =

2169 
AddGlob®Te¡EnvœÚm’t
(
Ãw
 
Un™Te¡RecÜdPrİ”tyTe¡EnvœÚm’t
);

2180 
boŞ
 
	$IsEv’
(
n
) {

2181  (
n
 % 2) == 0;

2182 
	}
}

2185 
	sIsEv’FunùÜ
 {

2186 
boŞ
 
İ”©Ü
()(
	gn
è{  
IsEv’
(
n
); }

2191 
As£¹iÚResuÉ
 
	$As£¹IsEv’
(cÚ¡ * 
ex´
, 
n
) {

2192 ià(
	`IsEv’
(
n
)) {

2193  
	`As£¹iÚSucûss
();

2196 
Mes§ge
 
msg
;

2197 
msg
 << 
ex´
 << "ƒv®u©e tØ" << 
n
 << ", which is‚otƒven.";

2198  
	`As£¹iÚFau»
(
msg
);

2199 
	}
}

2203 
As£¹iÚResuÉ
 
	$ResuÉIsEv’
(
n
) {

2204 ià(
	`IsEv’
(
n
))

2205  
	`As£¹iÚSucûss
(è<< 
n
 << " isƒven";

2207  
	`As£¹iÚFau»
(è<< 
n
 << " is odd";

2208 
	}
}

2213 
As£¹iÚResuÉ
 
	$ResuÉIsEv’NoEx¶ª©iÚ
(
n
) {

2214 ià(
	`IsEv’
(
n
))

2215  
	`As£¹iÚSucûss
();

2217  
	`As£¹iÚFau»
(è<< 
n
 << " is odd";

2218 
	}
}

2222 
	sAs£¹IsEv’FunùÜ
 {

2223 
As£¹iÚResuÉ
 
İ”©Ü
()(cÚ¡ * 
	gex´
, 
	gn
) {

2224  
As£¹IsEv’
(
ex´
, 
n
);

2229 
boŞ
 
	$SumIsEv’2
(
n1
, 
n2
) {

2230  
	`IsEv’
(
n1
 + 
n2
);

2231 
	}
}

2235 
	sSumIsEv’3FunùÜ
 {

2236 
boŞ
 
İ”©Ü
()(
	gn1
, 
	gn2
, 
	gn3
) {

2237  
IsEv’
(
n1
 + 
n2
 + 
n3
);

2243 
As£¹iÚResuÉ
 
	$As£¹SumIsEv’4
(

2244 cÚ¡ * 
e1
, cÚ¡ * 
e2
, cÚ¡ * 
e3
, cÚ¡ * 
e4
,

2245 
n1
, 
n2
, 
n3
, 
n4
) {

2246 cÚ¡ 
sum
 = 
n1
 + 
n2
 + 
n3
 + 
n4
;

2247 ià(
	`IsEv’
(
sum
)) {

2248  
	`As£¹iÚSucûss
();

2251 
Mes§ge
 
msg
;

2252 
msg
 << 
e1
 << " + " << 
e2
 << " + " << 
e3
 << " + " << 
e4


2253 << " (" << 
n1
 << " + " << 
n2
 << " + " << 
n3
 << " + " << 
n4


2254 << "èev®u©e tØ" << 
sum
 << ", which is‚otƒven.";

2255  
	`As£¹iÚFau»
(
msg
);

2256 
	}
}

2260 
	sAs£¹SumIsEv’5FunùÜ
 {

2261 
As£¹iÚResuÉ
 
İ”©Ü
()(

2262 cÚ¡ * 
	ge1
, cÚ¡ * 
	ge2
, cÚ¡ * 
	ge3
, cÚ¡ * 
	ge4
,

2263 cÚ¡ * 
	ge5
, 
	gn1
, 
	gn2
, 
	gn3
, 
	gn4
, 
	gn5
) {

2264 cÚ¡ 
	gsum
 = 
n1
 + 
n2
 + 
n3
 + 
n4
 + 
n5
;

2265 ià(
IsEv’
(
sum
)) {

2266  
As£¹iÚSucûss
();

2269 
Mes§ge
 
	gmsg
;

2270 
	gmsg
 << 
	ge1
 << " + " << 
	ge2
 << " + " << 
	ge3
 << " + " << 
	ge4
 << " + " << 
	ge5


2272 << 
	gn1
 << " + " << 
	gn2
 << " + " << 
	gn3
 << " + " << 
	gn4
 << " + " << 
	gn5


2273 << "èev®u©e tØ" << 
	gsum
 << ", which is‚otƒven.";

2274  
As£¹iÚFau»
(
msg
);

2282 
	$TEST
(
P»d1Te¡
, 
W™houtFÜm©
) {

2284 
	`EXPECT_PRED1
(
	`IsEv’FunùÜ
(), 2) << "This failure is UNEXPECTED!";

2285 
	`ASSERT_PRED1
(
IsEv’
, 4);

2288 
	`EXPECT_NONFATAL_FAILURE
({

2289 
	`EXPECT_PRED1
(
IsEv’
, 5) << "This failure isƒxpected.";

2291 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_PRED1
(
	`IsEv’FunùÜ
(), 5),

2293 
	}
}

2296 
	$TEST
(
P»d1Te¡
, 
W™hFÜm©
) {

2298 
	`EXPECT_PRED_FORMAT1
(
As£¹IsEv’
, 2);

2299 
	`ASSERT_PRED_FORMAT1
(
	`As£¹IsEv’FunùÜ
(), 4)

2303 cÚ¡ 
n
 = 5;

2304 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_PRED_FORMAT1
(
	`As£¹IsEv’FunùÜ
(), 
n
),

2306 
	`EXPECT_FATAL_FAILURE
({

2307 
	`ASSERT_PRED_FORMAT1
(
As£¹IsEv’
, 5) << "This failure isƒxpected.";

2309 
	}
}

2313 
	$TEST
(
P»d1Te¡
, 
SšgËEv®u©iÚOnFau»
) {

2315 
n
 = 0;

2316 
	`EXPECT_PRED1
(
IsEv’
, 
n
++);

2317 
	`EXPECT_EQ
(1, 
n
) << "The‡rgument is‚otƒvaluatedƒxactly once.";

2320 
	`EXPECT_FATAL_FAILURE
({

2321 
	`ASSERT_PRED_FORMAT1
(
	`As£¹IsEv’FunùÜ
(), 
n
++)

2324 
	`EXPECT_EQ
(2, 
n
) << "The‡rgument is‚otƒvaluatedƒxactly once.";

2325 
	}
}

2331 
	$TEST
(
P»dTe¡
, 
W™houtFÜm©
) {

2333 
	`ASSERT_PRED2
(
SumIsEv’2
, 2, 4) << "This failure is UNEXPECTED!";

2334 
	`EXPECT_PRED3
(
	`SumIsEv’3FunùÜ
(), 4, 6, 8);

2337 cÚ¡ 
n1
 = 1;

2338 cÚ¡ 
n2
 = 2;

2339 
	`EXPECT_NONFATAL_FAILURE
({

2340 
	`EXPECT_PRED2
(
SumIsEv’2
, 
n1
, 
n2
) << "This failure isƒxpected.";

2342 
	`EXPECT_FATAL_FAILURE
({

2343 
	`ASSERT_PRED3
(
	`SumIsEv’3FunùÜ
(), 1, 2, 4);

2345 
	}
}

2348 
	$TEST
(
P»dTe¡
, 
W™hFÜm©
) {

2350 
	`ASSERT_PRED_FORMAT4
(
As£¹SumIsEv’4
, 4, 6, 8, 10) <<

2352 
	`EXPECT_PRED_FORMAT5
(
	`As£¹SumIsEv’5FunùÜ
(), 2, 4, 6, 8, 10);

2355 cÚ¡ 
n1
 = 1;

2356 cÚ¡ 
n2
 = 2;

2357 cÚ¡ 
n3
 = 4;

2358 cÚ¡ 
n4
 = 6;

2359 
	`EXPECT_NONFATAL_FAILURE
({

2360 
	`EXPECT_PRED_FORMAT4
(
As£¹SumIsEv’4
, 
n1
, 
n2
, 
n3
, 
n4
);

2362 
	`EXPECT_FATAL_FAILURE
({

2363 
	`ASSERT_PRED_FORMAT5
(
	`As£¹SumIsEv’5FunùÜ
(), 1, 2, 4, 6, 8)

2366 
	}
}

2370 
	$TEST
(
P»dTe¡
, 
SšgËEv®u©iÚOnFau»
) {

2372 
n1
 = 0;

2373 
n2
 = 0;

2374 
	`EXPECT_PRED2
(
SumIsEv’2
, 
n1
++, 
n2
++);

2375 
	`EXPECT_EQ
(1, 
n1
) << "Argument 1 is‚otƒvaluatedƒxactly once.";

2376 
	`EXPECT_EQ
(1, 
n2
) << "Argument 2 is‚otƒvaluatedƒxactly once.";

2379 
n1
 = 
n2
 = 0;

2380 
n3
 = 0;

2381 
n4
 = 0;

2382 
n5
 = 0;

2383 
	`ASSERT_PRED_FORMAT5
(
	`As£¹SumIsEv’5FunùÜ
(),

2384 
n1
++, 
n2
++, 
n3
++, 
n4
++, 
n5
++)

2386 
	`EXPECT_EQ
(1, 
n1
) << "Argument 1 is‚otƒvaluatedƒxactly once.";

2387 
	`EXPECT_EQ
(1, 
n2
) << "Argument 2 is‚otƒvaluatedƒxactly once.";

2388 
	`EXPECT_EQ
(1, 
n3
) << "Argument 3 is‚otƒvaluatedƒxactly once.";

2389 
	`EXPECT_EQ
(1, 
n4
) << "Argument 4 is‚otƒvaluatedƒxactly once.";

2390 
	`EXPECT_EQ
(1, 
n5
) << "Argument 5 is‚otƒvaluatedƒxactly once.";

2393 
n1
 = 
n2
 = 
n3
 = 0;

2394 
	`EXPECT_NONFATAL_FAILURE
({

2395 
	`EXPECT_PRED3
(
	`SumIsEv’3FunùÜ
(), ++
n1
, 
n2
++, 
n3
++)

2398 
	`EXPECT_EQ
(1, 
n1
) << "Argument 1 is‚otƒvaluatedƒxactly once.";

2399 
	`EXPECT_EQ
(1, 
n2
) << "Argument 2 is‚otƒvaluatedƒxactly once.";

2400 
	`EXPECT_EQ
(1, 
n3
) << "Argument 3 is‚otƒvaluatedƒxactly once.";

2403 
n1
 = 
n2
 = 
n3
 = 
n4
 = 0;

2404 
	`EXPECT_NONFATAL_FAILURE
({

2405 
	`EXPECT_PRED_FORMAT4
(
As£¹SumIsEv’4
, ++
n1
, 
n2
++, 
n3
++, 
n4
++);

2407 
	`EXPECT_EQ
(1, 
n1
) << "Argument 1 is‚otƒvaluatedƒxactly once.";

2408 
	`EXPECT_EQ
(1, 
n2
) << "Argument 2 is‚otƒvaluatedƒxactly once.";

2409 
	`EXPECT_EQ
(1, 
n3
) << "Argument 3 is‚otƒvaluatedƒxactly once.";

2410 
	`EXPECT_EQ
(1, 
n4
) << "Argument 4 is‚otƒvaluatedƒxactly once.";

2411 
	}
}

2414 
	$TEST
(
P»dTe¡
, 
Ex³ùP»dEv®Fau»
) {

2415 
¡d
::
£t
<> 
£t_a
 = {2, 1, 3, 4, 5};

2416 
¡d
::
£t
<> 
£t_b
 = {0, 4, 8};

2417 cÚ¡‡utØ
com·»_£ts
 = [] (
¡d
::
£t
<>, std::£t<>è{  
çl£
; };

2418 
	`EXPECT_NONFATAL_FAILURE
(

2419 
	`EXPECT_PRED2
(
com·»_£ts
, 
£t_a
, 
£t_b
),

2422 
	}
}

2427 
boŞ
 
	$IsPos™ive
(
x
) {

2428  
x
 > 0;

2429 
	}
}

2431 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

2432 
boŞ
 
	$IsNeg©ive
(
T
 
x
) {

2433  
x
 < 0;

2434 
	}
}

2436 
	g‹m¶©e
 <
ty³Çme
 
	gT1
,y³Çm
	gT2
>

2437 
boŞ
 
	$G»©”Thª
(
T1
 
x1
, 
T2
 
x2
) {

2438  
x1
 > 
x2
;

2439 
	}
}

2443 
	$TEST
(
P»diÿ‹As£¹iÚTe¡
, 
Acû±sOv”lßdedFunùiÚ
) {

2445 
	`EXPECT_PRED1
((
	`boŞ
 (*)())(
IsPos™ive
), 5);

2446 
	`ASSERT_PRED1
((
	`boŞ
 (*)())(
IsPos™ive
), 6.0);

2447 
	}
}

2451 
	$TEST
(
P»diÿ‹As£¹iÚTe¡
, 
Acû±sTem¶©eFunùiÚ
) {

2452 
	`EXPECT_PRED1
(
IsNeg©ive
<>, -5);

2455 
	`ASSERT_PRED2
((
G»©”Thª
<, >), 5, 0);

2456 
	}
}

2462 
As£¹iÚResuÉ
 
	$IsPos™iveFÜm©
(cÚ¡ * , 
n
) {

2463  
n
 > 0 ? 
	`As£¹iÚSucûss
() :

2464 
	`As£¹iÚFau»
(
	`Mes§ge
() << "Failure");

2465 
	}
}

2467 
As£¹iÚResuÉ
 
	$IsPos™iveFÜm©
(cÚ¡ * , 
x
) {

2468  
x
 > 0 ? 
	`As£¹iÚSucûss
() :

2469 
	`As£¹iÚFau»
(
	`Mes§ge
() << "Failure");

2470 
	}
}

2472 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

2473 
As£¹iÚResuÉ
 
	$IsNeg©iveFÜm©
(cÚ¡ * , 
T
 
x
) {

2474  
x
 < 0 ? 
	`As£¹iÚSucûss
() :

2475 
	`As£¹iÚFau»
(
	`Mes§ge
() << "Failure");

2476 
	}
}

2478 
	g‹m¶©e
 <
ty³Çme
 
	gT1
,y³Çm
	gT2
>

2479 
As£¹iÚResuÉ
 
	$Equ®sFÜm©
(const * , const * ,

2480 cÚ¡ 
T1
& 
x1
, cÚ¡ 
T2
& 
x2
) {

2481  
x1
 =ğ
x2
 ? 
	`As£¹iÚSucûss
() :

2482 
	`As£¹iÚFau»
(
	`Mes§ge
() << "Failure");

2483 
	}
}

2487 
	$TEST
(
P»diÿ‹FÜm©As£¹iÚTe¡
, 
Acû±sOv”lßdedFunùiÚ
) {

2488 
	`EXPECT_PRED_FORMAT1
(
IsPos™iveFÜm©
, 5);

2489 
	`ASSERT_PRED_FORMAT1
(
IsPos™iveFÜm©
, 6.0);

2490 
	}
}

2494 
	$TEST
(
P»diÿ‹FÜm©As£¹iÚTe¡
, 
Acû±sTem¶©eFunùiÚ
) {

2495 
	`EXPECT_PRED_FORMAT1
(
IsNeg©iveFÜm©
, -5);

2496 
	`ASSERT_PRED_FORMAT2
(
Equ®sFÜm©
, 3, 3);

2497 
	}
}

2503 
	$TEST
(
SŒšgAs£¹iÚTe¡
, 
ASSERT_STREQ
) {

2504 cÚ¡ * cÚ¡ 
p1
 = "good";

2505 
	`ASSERT_STREQ
(
p1
,…1);

2508 cÚ¡ 
p2
[] = "good";

2509 
	`ASSERT_STREQ
(
p1
, 
p2
);

2511 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_STREQ
("bad", "good"),

2513 
	}
}

2516 
	$TEST
(
SŒšgAs£¹iÚTe¡
, 
ASSERT_STREQ_NuÎ
) {

2517 
	`ASSERT_STREQ
(
¡©ic_ÿ¡
<cÚ¡ *>(
nuÎ±r
),‚ullptr);

2518 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_STREQ
(
nuÎ±r
, "non-null"), "non-null");

2519 
	}
}

2522 
	$TEST
(
SŒšgAs£¹iÚTe¡
, 
ASSERT_STREQ_NuÎ2
) {

2523 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_STREQ
("nÚ-nuÎ", 
nuÎ±r
), "non-null");

2524 
	}
}

2527 
	$TEST
(
SŒšgAs£¹iÚTe¡
, 
ASSERT_STRNE
) {

2528 
	`ASSERT_STRNE
("hi", "Hi");

2529 
	`ASSERT_STRNE
("Hi", 
nuÎ±r
);

2530 
	`ASSERT_STRNE
(
nuÎ±r
, "Hi");

2531 
	`ASSERT_STRNE
("", 
nuÎ±r
);

2532 
	`ASSERT_STRNE
(
nuÎ±r
, "");

2533 
	`ASSERT_STRNE
("", "Hi");

2534 
	`ASSERT_STRNE
("Hi", "");

2535 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_STRNE
("Hi", "Hi"),

2537 
	}
}

2540 
	$TEST
(
SŒšgAs£¹iÚTe¡
, 
ASSERT_STRCASEEQ
) {

2541 
	`ASSERT_STRCASEEQ
("hi", "Hi");

2542 
	`ASSERT_STRCASEEQ
(
¡©ic_ÿ¡
<cÚ¡ *>(
nuÎ±r
),‚ullptr);

2544 
	`ASSERT_STRCASEEQ
("", "");

2545 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_STRCASEEQ
("Hi", "hi2"),

2547 
	}
}

2550 
	$TEST
(
SŒšgAs£¹iÚTe¡
, 
ASSERT_STRCASENE
) {

2551 
	`ASSERT_STRCASENE
("hi1", "Hi2");

2552 
	`ASSERT_STRCASENE
("Hi", 
nuÎ±r
);

2553 
	`ASSERT_STRCASENE
(
nuÎ±r
, "Hi");

2554 
	`ASSERT_STRCASENE
("", 
nuÎ±r
);

2555 
	`ASSERT_STRCASENE
(
nuÎ±r
, "");

2556 
	`ASSERT_STRCASENE
("", "Hi");

2557 
	`ASSERT_STRCASENE
("Hi", "");

2558 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_STRCASENE
("Hi", "hi"),

2560 
	}
}

2563 
	$TEST
(
SŒšgAs£¹iÚTe¡
, 
STREQ_Wide
) {

2565 
	`ASSERT_STREQ
(
¡©ic_ÿ¡
<cÚ¡ 
wch¬_t
*>(
nuÎ±r
),‚ullptr);

2568 
	`ASSERT_STREQ
(
L
"", L"");

2571 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_STREQ
(
L
"nÚ-nuÎ", 
nuÎ±r
), "non-null");

2574 
	`EXPECT_STREQ
(
L
"Hi", L"Hi");

2577 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_STREQ
(
L
"abc", L"Abc"),

2581 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_STREQ
(
L
"abc\x8119", L"abc\x8120"),

2585 
	`EXPECT_NONFATAL_FAILURE
({

2586 
	`EXPECT_STREQ
(
L
"abc\x8119", L"abc\x8121") << "Expected failure";

2588 
	}
}

2591 
	$TEST
(
SŒšgAs£¹iÚTe¡
, 
STRNE_Wide
) {

2593 
	`EXPECT_NONFATAL_FAILURE
(

2595 
	`EXPECT_STRNE
(
¡©ic_ÿ¡
<cÚ¡ 
wch¬_t
*>(
nuÎ±r
),‚ullptr);

2600 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_STRNE
(
L
"", L""),

2604 
	`ASSERT_STRNE
(
L
"nÚ-nuÎ", 
nuÎ±r
);

2607 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_STRNE
(
L
"Hi", L"Hi"),

2611 
	`EXPECT_STRNE
(
L
"abc", L"Abc");

2614 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_STRNE
(
L
"abc\x8119", L"abc\x8119"),

2618 
	`ASSERT_STRNE
(
L
"abc\x8119", L"abc\x8120") << "This shouldn't happen";

2619 
	}
}

2625 
	$TEST
(
IsSub¡ršgTe¡
, 
R‘uºsCÜ»ùResuÉFÜCSŒšg
) {

2626 
	`EXPECT_FALSE
(
	`IsSub¡ršg
("", "", 
nuÎ±r
, "a"));

2627 
	`EXPECT_FALSE
(
	`IsSub¡ršg
("", "", "b", 
nuÎ±r
));

2628 
	`EXPECT_FALSE
(
	`IsSub¡ršg
("", "", "needle", "haystack"));

2630 
	`EXPECT_TRUE
(
	`IsSub¡ršg
("", "", 
¡©ic_ÿ¡
<cÚ¡ *>(
nuÎ±r
),‚ullptr));

2631 
	`EXPECT_TRUE
(
	`IsSub¡ršg
("", "", "needle", "two‚eedles"));

2632 
	}
}

2636 
	$TEST
(
IsSub¡ršgTe¡
, 
R‘uºsCÜ»ùResuÉFÜWideCSŒšg
) {

2637 
	`EXPECT_FALSE
(
	`IsSub¡ršg
("", "", 
kNuÎ
, 
L
"a"));

2638 
	`EXPECT_FALSE
(
	`IsSub¡ršg
("", "", 
L
"b", 
kNuÎ
));

2639 
	`EXPECT_FALSE
(
	`IsSub¡ršg
("", "", 
L
"needle", L"haystack"));

2641 
	`EXPECT_TRUE
(

2642 
	`IsSub¡ršg
("", "", 
¡©ic_ÿ¡
<cÚ¡ 
wch¬_t
*>(
nuÎ±r
),‚ullptr));

2643 
	`EXPECT_TRUE
(
	`IsSub¡ršg
("", "", 
L
"needle", L"two‚eedles"));

2644 
	}
}

2648 
	$TEST
(
IsSub¡ršgTe¡
, 
G’”©esCÜ»ùMes§geFÜCSŒšg
) {

2649 
	`EXPECT_STREQ
("Value of:‚eedle_expr\n"

2653 
	`IsSub¡ršg
("needle_expr", "haystack_expr",

2654 "ÃedË", "hay¡ack").
	`çu»_mes§ge
());

2655 
	}
}

2659 
	$TEST
(
IsSub¡ršgTe¡
, 
R‘uºsCÜ»ùResuÉsFÜStdSŒšg
) {

2660 
	`EXPECT_TRUE
(
	`IsSub¡ršg
("", "", 
¡d
::
	`¡ršg
("hello"), "ahellob"));

2661 
	`EXPECT_FALSE
(
	`IsSub¡ršg
("", "", "h–lo", 
¡d
::
	`¡ršg
("world")));

2662 
	}
}

2664 #ià
GTEST_HAS_STD_WSTRING


2667 
	$TEST
(
IsSub¡ršgTe¡
, 
R‘uºsCÜ»ùResuÉFÜStdW¡ršg
) {

2668 
	`EXPECT_TRUE
(
	`IsSub¡ršg
("", "", ::
¡d
::
	`w¡ršg
(
L
"needle"), L"two‚eedles"));

2669 
	`EXPECT_FALSE
(
	`IsSub¡ršg
("", "", 
L
"ÃedË", ::
¡d
::
	`w¡ršg
(L"haystack")));

2670 
	}
}

2674 
	$TEST
(
IsSub¡ršgTe¡
, 
G’”©esCÜ»ùMes§geFÜW¡ršg
) {

2675 
	`EXPECT_STREQ
("Value of:‚eedle_expr\n"

2679 
	`IsSub¡ršg
(

2681 ::
¡d
::
	`w¡ršg
(
L
"ÃedË"), L"hay¡ack").
	`çu»_mes§ge
());

2682 
	}
}

2690 
	$TEST
(
IsNÙSub¡ršgTe¡
, 
R‘uºsCÜ»ùResuÉFÜCSŒšg
) {

2691 
	`EXPECT_TRUE
(
	`IsNÙSub¡ršg
("", "", "needle", "haystack"));

2692 
	`EXPECT_FALSE
(
	`IsNÙSub¡ršg
("", "", "needle", "two‚eedles"));

2693 
	}
}

2697 
	$TEST
(
IsNÙSub¡ršgTe¡
, 
R‘uºsCÜ»ùResuÉFÜWideCSŒšg
) {

2698 
	`EXPECT_TRUE
(
	`IsNÙSub¡ršg
("", "", 
L
"needle", L"haystack"));

2699 
	`EXPECT_FALSE
(
	`IsNÙSub¡ršg
("", "", 
L
"needle", L"two‚eedles"));

2700 
	}
}

2704 
	$TEST
(
IsNÙSub¡ršgTe¡
, 
G’”©esCÜ»ùMes§geFÜWideCSŒšg
) {

2705 
	`EXPECT_STREQ
("Value of:‚eedle_expr\n"

2709 
	`IsNÙSub¡ršg
(

2711 
L
"ÃedË", L"twØÃedËs").
	`çu»_mes§ge
());

2712 
	}
}

2716 
	$TEST
(
IsNÙSub¡ršgTe¡
, 
R‘uºsCÜ»ùResuÉsFÜStdSŒšg
) {

2717 
	`EXPECT_FALSE
(
	`IsNÙSub¡ršg
("", "", 
¡d
::
	`¡ršg
("hello"), "ahellob"));

2718 
	`EXPECT_TRUE
(
	`IsNÙSub¡ršg
("", "", "h–lo", 
¡d
::
	`¡ršg
("world")));

2719 
	}
}

2723 
	$TEST
(
IsNÙSub¡ršgTe¡
, 
G’”©esCÜ»ùMes§geFÜStdSŒšg
) {

2724 
	`EXPECT_STREQ
("Value of:‚eedle_expr\n"

2728 
	`IsNÙSub¡ršg
(

2730 ::
¡d
::
	`¡ršg
("ÃedË"), "twØÃedËs").
	`çu»_mes§ge
());

2731 
	}
}

2733 #ià
GTEST_HAS_STD_WSTRING


2737 
	$TEST
(
IsNÙSub¡ršgTe¡
, 
R‘uºsCÜ»ùResuÉFÜStdW¡ršg
) {

2738 
	`EXPECT_FALSE
(

2739 
	`IsNÙSub¡ršg
("", "", ::
¡d
::
	`w¡ršg
(
L
"needle"), L"two‚eedles"));

2740 
	`EXPECT_TRUE
(
	`IsNÙSub¡ršg
("", "", 
L
"ÃedË", ::
¡d
::
	`w¡ršg
(L"haystack")));

2741 
	}
}

2747 
	g‹m¶©e
 <
ty³Çme
 
	gRawTy³
>

2748 şas 
	cFlßtšgPoštTe¡
 : 
public
 
Te¡
 {

2749 
´Ùeùed
:

2751 
	sTe¡V®ues
 {

2752 
RawTy³
 
şo£_to_pos™ive_z”o
;

2753 
RawTy³
 
	gşo£_to_Ãg©ive_z”o
;

2754 
RawTy³
 
	gfu¹h”_äom_Ãg©ive_z”o
;

2756 
RawTy³
 
	gşo£_to_Úe
;

2757 
RawTy³
 
	gfu¹h”_äom_Úe
;

2759 
RawTy³
 
	gšfš™y
;

2760 
RawTy³
 
	gşo£_to_šfš™y
;

2761 
RawTy³
 
	gfu¹h”_äom_šfš™y
;

2763 
RawTy³
 
	gÇn1
;

2764 
RawTy³
 
	gÇn2
;

2767 
ty³Çme
 
	t‹¡šg
::
	tš‹º®
::
	tFlßtšgPošt
<
	tRawTy³
> 
	tFlßtšg
;

2768 
ty³Çme
 
	tFlßtšg
::
	tB™s
 Bits;

2770 
S‘Up
(è
	gov”ride
 {

2771 cÚ¡ 
ušt32_t
 
	gmax_uÍs
 = 
Flßtšg
::
kMaxUÍs
;

2774 cÚ¡ 
B™s
 
	gz”o_b™s
 = 
Flßtšg
(0).
b™s
();

2777 
	gv®ues_
.
	gşo£_to_pos™ive_z”o
 = 
Flßtšg
::
Reš‹½»tB™s
(

2778 
z”o_b™s
 + 
max_uÍs
/2);

2779 
	gv®ues_
.
	gşo£_to_Ãg©ive_z”o
 = -
Flßtšg
::
Reš‹½»tB™s
(

2780 
z”o_b™s
 + 
max_uÍs
 - max_ulps/2);

2781 
	gv®ues_
.
	gfu¹h”_äom_Ãg©ive_z”o
 = -
Flßtšg
::
Reš‹½»tB™s
(

2782 
z”o_b™s
 + 
max_uÍs
 + 1 - max_ulps/2);

2785 cÚ¡ 
B™s
 
	gÚe_b™s
 = 
Flßtšg
(1).
b™s
();

2788 
	gv®ues_
.
	gşo£_to_Úe
 = 
Flßtšg
::
Reš‹½»tB™s
(
Úe_b™s
 + 
max_uÍs
);

2789 
	gv®ues_
.
	gfu¹h”_äom_Úe
 = 
Flßtšg
::
Reš‹½»tB™s
(

2790 
Úe_b™s
 + 
max_uÍs
 + 1);

2793 
	gv®ues_
.
	gšfš™y
 = 
Flßtšg
::
Infš™y
();

2796 cÚ¡ 
B™s
 
	gšfš™y_b™s
 = 
Flßtšg
(
v®ues_
.
šfš™y
).
b™s
();

2799 
	gv®ues_
.
	gşo£_to_šfš™y
 = 
Flßtšg
::
Reš‹½»tB™s
(

2800 
šfš™y_b™s
 - 
max_uÍs
);

2801 
	gv®ues_
.
	gfu¹h”_äom_šfš™y
 = 
Flßtšg
::
Reš‹½»tB™s
(

2802 
šfš™y_b™s
 - 
max_uÍs
 - 1);

2807 
	gv®ues_
.
	gÇn1
 = 
Flßtšg
::
Reš‹½»tB™s
(Flßtšg::
kExpÚ’tB™Mask


2808 | (
¡©ic_ÿ¡
<
B™s
>(1è<< (
Flßtšg
::
kF¿ùiÚB™CouÁ
 - 1)) | 1);

2809 
	gv®ues_
.
	gÇn2
 = 
Flßtšg
::
Reš‹½»tB™s
(Flßtšg::
kExpÚ’tB™Mask


2810 | (
¡©ic_ÿ¡
<
B™s
>(1è<< (
Flßtšg
::
kF¿ùiÚB™CouÁ
 - 1)) | 200);

2813 
Te¡Size
() {

2814 
EXPECT_EQ
((
RawTy³
), (
B™s
));

2817 
Te¡V®ues
 
	gv®ues_
;

2820 
	g‹m¶©e
 <
ty³Çme
 
	gRawTy³
>

2821 
ty³Çme
 
	gFlßtšgPoštTe¡
<
	gRawTy³
>::
Te¡V®ues


2822 
FlßtšgPoštTe¡
<
RawTy³
>::
v®ues_
;

2825 
	gFlßtšgPoštTe¡
<> 
	tFlßtTe¡
;

2828 
	$TEST_F
(
FlßtTe¡
, 
Size
) {

2829 
	`Te¡Size
();

2830 
	}
}

2833 
	$TEST_F
(
FlßtTe¡
, 
Z”os
) {

2834 
	`EXPECT_FLOAT_EQ
(0.0, -0.0);

2835 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_FLOAT_EQ
(-0.0, 1.0),

2837 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_FLOAT_EQ
(0.0, 1.5),

2839 
	}
}

2846 
	$TEST_F
(
FlßtTe¡
, 
Almo¡Z”os
) {

2853 cÚ¡ 
FlßtTe¡
::
Te¡V®ues
& 
v
 = 
this
->
v®ues_
;

2855 
	`EXPECT_FLOAT_EQ
(0.0, 
v
.
şo£_to_pos™ive_z”o
);

2856 
	`EXPECT_FLOAT_EQ
(-0.0, 
v
.
şo£_to_Ãg©ive_z”o
);

2857 
	`EXPECT_FLOAT_EQ
(
v
.
şo£_to_pos™ive_z”o
, v.
şo£_to_Ãg©ive_z”o
);

2859 
	`EXPECT_FATAL_FAILURE
({

2860 
	`ASSERT_FLOAT_EQ
(
v
.
şo£_to_pos™ive_z”o
,

2861 
v
.
fu¹h”_äom_Ãg©ive_z”o
);

2863 
	}
}

2866 
	$TEST_F
(
FlßtTe¡
, 
Sm®lDiff
) {

2867 
	`EXPECT_FLOAT_EQ
(1.0, 
v®ues_
.
şo£_to_Úe
);

2868 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_FLOAT_EQ
(1.0, 
v®ues_
.
fu¹h”_äom_Úe
),

2870 
	}
}

2873 
	$TEST_F
(
FlßtTe¡
, 
L¬geDiff
) {

2874 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_FLOAT_EQ
(2.5, 3.0),

2876 
	}
}

2882 
	$TEST_F
(
FlßtTe¡
, 
Infš™y
) {

2883 
	`EXPECT_FLOAT_EQ
(
v®ues_
.
šfš™y
, v®ues_.
şo£_to_šfš™y
);

2884 
	`EXPECT_FLOAT_EQ
(-
v®ues_
.
šfš™y
, -v®ues_.
şo£_to_šfš™y
);

2885 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_FLOAT_EQ
(
v®ues_
.
šfš™y
, -values_.infinity),

2890 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_FLOAT_EQ
(
v®ues_
.
šfš™y
, v®ues_.
Çn1
),

2892 
	}
}

2895 
	$TEST_F
(
FlßtTe¡
, 
NaN
) {

2902 cÚ¡ 
FlßtTe¡
::
Te¡V®ues
& 
v
 = 
this
->
v®ues_
;

2904 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_FLOAT_EQ
(
v
.
Çn1
, v.nan1),

2906 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_FLOAT_EQ
(
v
.
Çn1
, v.
Çn2
),

2908 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_FLOAT_EQ
(1.0, 
v
.
Çn1
),

2911 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_FLOAT_EQ
(
v
.
Çn1
, v.
šfš™y
),

2913 
	}
}

2916 
	$TEST_F
(
FlßtTe¡
, 
Reæexive
) {

2917 
	`EXPECT_FLOAT_EQ
(0.0, 0.0);

2918 
	`EXPECT_FLOAT_EQ
(1.0, 1.0);

2919 
	`ASSERT_FLOAT_EQ
(
v®ues_
.
šfš™y
, values_.infinity);

2920 
	}
}

2923 
	$TEST_F
(
FlßtTe¡
, 
Commutive
) {

2925 
	`EXPECT_FLOAT_EQ
(
v®ues_
.
şo£_to_Úe
, 1.0);

2928 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_FLOAT_EQ
(
v®ues_
.
fu¹h”_äom_Úe
, 1.0),

2930 
	}
}

2933 
	$TEST_F
(
FlßtTe¡
, 
EXPECT_NEAR
) {

2934 
	`EXPECT_NEAR
(-1.0f, -1.1f, 0.2f);

2935 
	`EXPECT_NEAR
(2.0f, 3.0f, 1.0f);

2936 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_NEAR
(1.0f, 1.5f, 0.25f),

2939 
	}
}

2942 
	$TEST_F
(
FlßtTe¡
, 
ASSERT_NEAR
) {

2943 
	`ASSERT_NEAR
(-1.0f, -1.1f, 0.2f);

2944 
	`ASSERT_NEAR
(2.0f, 3.0f, 1.0f);

2945 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_NEAR
(1.0f, 1.5f, 0.25f),

2948 
	}
}

2951 
	$TEST_F
(
FlßtTe¡
, 
FlßtLESucûeds
) {

2952 
	`EXPECT_PRED_FORMAT2
(
FlßtLE
, 1.0f, 2.0f);

2953 
	`ASSERT_PRED_FORMAT2
(
FlßtLE
, 1.0f, 1.0f);

2956 
	`EXPECT_PRED_FORMAT2
(
FlßtLE
, 
v®ues_
.
şo£_to_pos™ive_z”o
, 0.0f);

2957 
	}
}

2960 
	$TEST_F
(
FlßtTe¡
, 
FlßtLEFas
) {

2962 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_PRED_FORMAT2
(
FlßtLE
, 2.0f, 1.0f),

2966 
	`EXPECT_NONFATAL_FAILURE
({

2967 
	`EXPECT_PRED_FORMAT2
(
FlßtLE
, 
v®ues_
.
fu¹h”_äom_Úe
, 1.0f);

2970 
	`EXPECT_NONFATAL_FAILURE
({

2971 
	`EXPECT_PRED_FORMAT2
(
FlßtLE
, 
v®ues_
.
Çn1
, v®ues_.
šfš™y
);

2973 
	`EXPECT_NONFATAL_FAILURE
({

2974 
	`EXPECT_PRED_FORMAT2
(
FlßtLE
, -
v®ues_
.
šfš™y
, v®ues_.
Çn1
);

2976 
	`EXPECT_FATAL_FAILURE
({

2977 
	`ASSERT_PRED_FORMAT2
(
FlßtLE
, 
v®ues_
.
Çn1
, values_.nan1);

2979 
	}
}

2982 
	gFlßtšgPoštTe¡
<> 
	tDoubËTe¡
;

2985 
	$TEST_F
(
DoubËTe¡
, 
Size
) {

2986 
	`Te¡Size
();

2987 
	}
}

2990 
	$TEST_F
(
DoubËTe¡
, 
Z”os
) {

2991 
	`EXPECT_DOUBLE_EQ
(0.0, -0.0);

2992 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_DOUBLE_EQ
(-0.0, 1.0),

2994 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_DOUBLE_EQ
(0.0, 1.0),

2996 
	}
}

3003 
	$TEST_F
(
DoubËTe¡
, 
Almo¡Z”os
) {

3010 cÚ¡ 
DoubËTe¡
::
Te¡V®ues
& 
v
 = 
this
->
v®ues_
;

3012 
	`EXPECT_DOUBLE_EQ
(0.0, 
v
.
şo£_to_pos™ive_z”o
);

3013 
	`EXPECT_DOUBLE_EQ
(-0.0, 
v
.
şo£_to_Ãg©ive_z”o
);

3014 
	`EXPECT_DOUBLE_EQ
(
v
.
şo£_to_pos™ive_z”o
, v.
şo£_to_Ãg©ive_z”o
);

3016 
	`EXPECT_FATAL_FAILURE
({

3017 
	`ASSERT_DOUBLE_EQ
(
v
.
şo£_to_pos™ive_z”o
,

3018 
v
.
fu¹h”_äom_Ãg©ive_z”o
);

3020 
	}
}

3023 
	$TEST_F
(
DoubËTe¡
, 
Sm®lDiff
) {

3024 
	`EXPECT_DOUBLE_EQ
(1.0, 
v®ues_
.
şo£_to_Úe
);

3025 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_DOUBLE_EQ
(1.0, 
v®ues_
.
fu¹h”_äom_Úe
),

3027 
	}
}

3030 
	$TEST_F
(
DoubËTe¡
, 
L¬geDiff
) {

3031 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_DOUBLE_EQ
(2.0, 3.0),

3033 
	}
}

3039 
	$TEST_F
(
DoubËTe¡
, 
Infš™y
) {

3040 
	`EXPECT_DOUBLE_EQ
(
v®ues_
.
šfš™y
, v®ues_.
şo£_to_šfš™y
);

3041 
	`EXPECT_DOUBLE_EQ
(-
v®ues_
.
šfš™y
, -v®ues_.
şo£_to_šfš™y
);

3042 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_DOUBLE_EQ
(
v®ues_
.
šfš™y
, -values_.infinity),

3047 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_DOUBLE_EQ
(
v®ues_
.
šfš™y
, v®ues_.
Çn1
),

3049 
	}
}

3052 
	$TEST_F
(
DoubËTe¡
, 
NaN
) {

3053 cÚ¡ 
DoubËTe¡
::
Te¡V®ues
& 
v
 = 
this
->
v®ues_
;

3056 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_DOUBLE_EQ
(
v
.
Çn1
, v.nan1),

3058 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_DOUBLE_EQ
(
v
.
Çn1
, v.
Çn2
), "v.nan2");

3059 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_DOUBLE_EQ
(1.0, 
v
.
Çn1
), "v.nan1");

3060 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_DOUBLE_EQ
(
v
.
Çn1
, v.
šfš™y
),

3062 
	}
}

3065 
	$TEST_F
(
DoubËTe¡
, 
Reæexive
) {

3066 
	`EXPECT_DOUBLE_EQ
(0.0, 0.0);

3067 
	`EXPECT_DOUBLE_EQ
(1.0, 1.0);

3068 
	`ASSERT_DOUBLE_EQ
(
v®ues_
.
šfš™y
, values_.infinity);

3069 
	}
}

3072 
	$TEST_F
(
DoubËTe¡
, 
Commutive
) {

3074 
	`EXPECT_DOUBLE_EQ
(
v®ues_
.
şo£_to_Úe
, 1.0);

3077 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_DOUBLE_EQ
(
v®ues_
.
fu¹h”_äom_Úe
, 1.0),

3079 
	}
}

3082 
	$TEST_F
(
DoubËTe¡
, 
EXPECT_NEAR
) {

3083 
	`EXPECT_NEAR
(-1.0, -1.1, 0.2);

3084 
	`EXPECT_NEAR
(2.0, 3.0, 1.0);

3085 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_NEAR
(1.0, 1.5, 0.25),

3090 
	`EXPECT_NONFATAL_FAILURE
(

3091 
	`EXPECT_NEAR
(4.2934311416234112e+18, 4.2934311416234107e+18, 1.0),

3095 
	}
}

3098 
	$TEST_F
(
DoubËTe¡
, 
ASSERT_NEAR
) {

3099 
	`ASSERT_NEAR
(-1.0, -1.1, 0.2);

3100 
	`ASSERT_NEAR
(2.0, 3.0, 1.0);

3101 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_NEAR
(1.0, 1.5, 0.25),

3104 
	}
}

3107 
	$TEST_F
(
DoubËTe¡
, 
DoubËLESucûeds
) {

3108 
	`EXPECT_PRED_FORMAT2
(
DoubËLE
, 1.0, 2.0);

3109 
	`ASSERT_PRED_FORMAT2
(
DoubËLE
, 1.0, 1.0);

3112 
	`EXPECT_PRED_FORMAT2
(
DoubËLE
, 
v®ues_
.
şo£_to_pos™ive_z”o
, 0.0);

3113 
	}
}

3116 
	$TEST_F
(
DoubËTe¡
, 
DoubËLEFas
) {

3118 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_PRED_FORMAT2
(
DoubËLE
, 2.0, 1.0),

3122 
	`EXPECT_NONFATAL_FAILURE
({

3123 
	`EXPECT_PRED_FORMAT2
(
DoubËLE
, 
v®ues_
.
fu¹h”_äom_Úe
, 1.0);

3126 
	`EXPECT_NONFATAL_FAILURE
({

3127 
	`EXPECT_PRED_FORMAT2
(
DoubËLE
, 
v®ues_
.
Çn1
, v®ues_.
šfš™y
);

3129 
	`EXPECT_NONFATAL_FAILURE
({

3130 
	`EXPECT_PRED_FORMAT2
(
DoubËLE
, -
v®ues_
.
šfš™y
, v®ues_.
Çn1
);

3132 
	`EXPECT_FATAL_FAILURE
({

3133 
	`ASSERT_PRED_FORMAT2
(
DoubËLE
, 
v®ues_
.
Çn1
, values_.nan1);

3135 
	}
}

3143 
	$TEST
(
Di§bËdTe¡
, 
DISABLED_Te¡ShouldNÙRun
) {

3144 
	`FAIL
() << "Unexpected failure: Disabledest should‚ot be„un.";

3145 
	}
}

3149 
	$TEST
(
Di§bËdTe¡
, 
NÙDISABLED_Te¡ShouldRun
) {

3150 
	`EXPECT_EQ
(1, 1);

3151 
	}
}

3155 
	$TEST
(
DISABLED_Te¡Su™e
, 
Te¡ShouldNÙRun
) {

3156 
	`FAIL
() << "Unexpected failure: Test in disabledest case should‚ot be„un.";

3157 
	}
}

3161 
	$TEST
(
DISABLED_Te¡Su™e
, 
DISABLED_Te¡ShouldNÙRun
) {

3162 
	`FAIL
() << "Unexpected failure: Test in disabledest case should‚ot be„un.";

3163 
	}
}

3167 şas 
	cDi§bËdTe¡sTe¡
 : 
public
 
Te¡
 {

3168 
´Ùeùed
:

3169 
S‘UpTe¡Su™e
() {

3170 
FAIL
() << "Unexpected failure: Allests disabled inest case. "

3174 
T—rDownTe¡Su™e
() {

3175 
FAIL
() << "Unexpected failure: Allests disabled inest case. "

3180 
	$TEST_F
(
Di§bËdTe¡sTe¡
, 
DISABLED_Te¡ShouldNÙRun_1
) {

3181 
	`FAIL
() << "Unexpected failure: Disabledest should‚ot be„un.";

3182 
	}
}

3184 
	$TEST_F
(
Di§bËdTe¡sTe¡
, 
DISABLED_Te¡ShouldNÙRun_2
) {

3185 
	`FAIL
() << "Unexpected failure: Disabledest should‚ot be„un.";

3186 
	}
}

3190 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

3191 şas 
	cTy³dTe¡
 : 
public
 
Te¡
 {

3194 
	g‹¡šg
::
	tTy³s
<, > 
	tNum”icTy³s
;

3195 
TYPED_TEST_SUITE
(
Ty³dTe¡
, 
Num”icTy³s
);

3197 
	$TYPED_TEST
(
Ty³dTe¡
, 
DISABLED_ShouldNÙRun
) {

3198 
	`FAIL
() << "Unexpected failure: Disabledypedest should‚ot„un.";

3199 
	}
}

3201 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

3202 şas 
	cDISABLED_Ty³dTe¡
 : 
public
 
Te¡
 {

3205 
TYPED_TEST_SUITE
(
DISABLED_Ty³dTe¡
, 
Num”icTy³s
);

3207 
	$TYPED_TEST
(
DISABLED_Ty³dTe¡
, 
ShouldNÙRun
) {

3208 
	`FAIL
() << "Unexpected failure: Disabledypedest should‚ot„un.";

3209 
	}
}

3213 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

3214 şas 
	cTy³dTe¡P
 : 
public
 
Te¡
 {

3217 
TYPED_TEST_SUITE_P
(
Ty³dTe¡P
);

3219 
	$TYPED_TEST_P
(
Ty³dTe¡P
, 
DISABLED_ShouldNÙRun
) {

3220 
	`FAIL
() << "Unexpected failure: "

3222 
	}
}

3224 
REGISTER_TYPED_TEST_SUITE_P
(
Ty³dTe¡P
, 
DISABLED_ShouldNÙRun
);

3226 
INSTANTIATE_TYPED_TEST_SUITE_P
(
My
, 
Ty³dTe¡P
, 
Num”icTy³s
);

3228 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

3229 şas 
	cDISABLED_Ty³dTe¡P
 : 
public
 
Te¡
 {

3232 
TYPED_TEST_SUITE_P
(
DISABLED_Ty³dTe¡P
);

3234 
	$TYPED_TEST_P
(
DISABLED_Ty³dTe¡P
, 
ShouldNÙRun
) {

3235 
	`FAIL
() << "Unexpected failure: "

3237 
	}
}

3239 
REGISTER_TYPED_TEST_SUITE_P
(
DISABLED_Ty³dTe¡P
, 
ShouldNÙRun
);

3241 
INSTANTIATE_TYPED_TEST_SUITE_P
(
My
, 
DISABLED_Ty³dTe¡P
, 
Num”icTy³s
);

3245 şas 
	cSšgËEv®u©iÚTe¡
 : 
public
 
Te¡
 {

3246 
public
:

3250 
Com·»AndInüem’tCh¬PŒs
() {

3251 
ASSERT_STREQ
(
p1_
++, 
p2_
++);

3256 
Com·»AndInüem’tIÁs
() {

3257 
ASSERT_NE
(
a_
++, 
b_
++);

3260 
	g´Ùeùed
:

3261 
SšgËEv®u©iÚTe¡
() {

3262 
p1_
 = 
s1_
;

3263 
	gp2_
 = 
s2_
;

3264 
	ga_
 = 0;

3265 
	gb_
 = 0;

3268 cÚ¡ * cÚ¡ 
	gs1_
;

3269 cÚ¡ * cÚ¡ 
	gs2_
;

3270 cÚ¡ * 
	gp1_
;

3271 cÚ¡ * 
	gp2_
;

3273 
	ga_
;

3274 
	gb_
;

3277 cÚ¡ * cÚ¡ 
	gSšgËEv®u©iÚTe¡
::
s1_
 = "01234";

3278 cÚ¡ * cÚ¡ 
	gSšgËEv®u©iÚTe¡
::
s2_
 = "abcde";

3279 cÚ¡ * 
	gSšgËEv®u©iÚTe¡
::
p1_
;

3280 cÚ¡ * 
	gSšgËEv®u©iÚTe¡
::
p2_
;

3281 
	gSšgËEv®u©iÚTe¡
::
a_
;

3282 
	gSšgËEv®u©iÚTe¡
::
b_
;

3286 
	$TEST_F
(
SšgËEv®u©iÚTe¡
, 
FaedASSERT_STREQ
) {

3287 
	`EXPECT_FATAL_FAILURE
(
SšgËEv®u©iÚTe¡
::
	`Com·»AndInüem’tCh¬PŒs
(),

3289 
	`EXPECT_EQ
(
s1_
 + 1, 
p1_
);

3290 
	`EXPECT_EQ
(
s2_
 + 1, 
p2_
);

3291 
	}
}

3294 
	$TEST_F
(
SšgËEv®u©iÚTe¡
, 
ASSERT_STR
) {

3296 
	`EXPECT_STRNE
(
p1_
++, 
p2_
++);

3297 
	`EXPECT_EQ
(
s1_
 + 1, 
p1_
);

3298 
	`EXPECT_EQ
(
s2_
 + 1, 
p2_
);

3301 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_STRCASEEQ
(
p1_
++, 
p2_
++),

3303 
	`EXPECT_EQ
(
s1_
 + 2, 
p1_
);

3304 
	`EXPECT_EQ
(
s2_
 + 2, 
p2_
);

3305 
	}
}

3309 
	$TEST_F
(
SšgËEv®u©iÚTe¡
, 
FaedASSERT_NE
) {

3310 
	`EXPECT_FATAL_FAILURE
(
SšgËEv®u©iÚTe¡
::
	`Com·»AndInüem’tIÁs
(),

3312 
	`EXPECT_EQ
(1, 
a_
);

3313 
	`EXPECT_EQ
(1, 
b_
);

3314 
	}
}

3317 
	$TEST_F
(
SšgËEv®u©iÚTe¡
, 
Oth”Ca£s
) {

3319 
	`EXPECT_TRUE
(0 =ğ
a_
++);

3320 
	`EXPECT_EQ
(1, 
a_
);

3323 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_TRUE
(-1 =ğ
a_
++), "-1 ==‡_++");

3324 
	`EXPECT_EQ
(2, 
a_
);

3327 
	`EXPECT_GT
(
a_
++, 
b_
++);

3328 
	`EXPECT_EQ
(3, 
a_
);

3329 
	`EXPECT_EQ
(1, 
b_
);

3332 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_LT
(
a_
++, 
b_
++), "(a_++) < (b_++)");

3333 
	`EXPECT_EQ
(4, 
a_
);

3334 
	`EXPECT_EQ
(2, 
b_
);

3337 
	`ASSERT_TRUE
(0 < 
a_
++);

3338 
	`EXPECT_EQ
(5, 
a_
);

3341 
	`ASSERT_GT
(
a_
++, 
b_
++);

3342 
	`EXPECT_EQ
(6, 
a_
);

3343 
	`EXPECT_EQ
(3, 
b_
);

3344 
	}
}

3346 #ià
GTEST_HAS_EXCEPTIONS


3348 #ià
GTEST_HAS_RTTI


3350 #ifdeà
_MSC_VER


3351 
	#ERROR_DESC
 "şas ¡d::ruÁime_”rÜ"

	)

3353 
	#ERROR_DESC
 "¡d::ruÁime_”rÜ"

	)

3358 
	#ERROR_DESC
 "ª std::exû±iÚ-d”ivedƒ¼Ü"

	)

3362 
	$ThrowAnIÁeg”
() {

3363 
throw
 1;

3364 
	}
}

3365 
	$ThrowRuÁimeE¼Ü
(cÚ¡ * 
wh©
) {

3366 
throw
 
¡d
::
	`ruÁime_”rÜ
(
wh©
);

3367 
	}
}

3370 
	$TEST_F
(
SšgËEv®u©iÚTe¡
, 
Exû±iÚTe¡s
) {

3372 
	`EXPECT_THROW
({

3373 
a_
++;

3374 
	`ThrowAnIÁeg”
();

3376 
	`EXPECT_EQ
(1, 
a_
);

3379 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_THROW
({

3380 
a_
++;

3381 
	`ThrowAnIÁeg”
();

3382 }, 
boŞ
), "throws‡ differentype");

3383 
	`EXPECT_EQ
(2, 
a_
);

3386 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_THROW
({

3387 
a_
++;

3388 
	`ThrowRuÁimeE¼Ü
("A description");

3389 }, 
boŞ
), "throw " 
ERROR_DESC
 " with description \"A description\"");

3390 
	`EXPECT_EQ
(3, 
a_
);

3393 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_THROW
(
a_
++, 
boŞ
), "throws‚othing");

3394 
	`EXPECT_EQ
(4, 
a_
);

3397 
	`EXPECT_NO_THROW
(
a_
++);

3398 
	`EXPECT_EQ
(5, 
a_
);

3401 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_NO_THROW
({

3402 
a_
++;

3403 
	`ThrowAnIÁeg”
();

3405 
	`EXPECT_EQ
(6, 
a_
);

3408 
	`EXPECT_ANY_THROW
({

3409 
a_
++;

3410 
	`ThrowAnIÁeg”
();

3412 
	`EXPECT_EQ
(7, 
a_
);

3415 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_ANY_THROW
(
a_
++), "it doesn't");

3416 
	`EXPECT_EQ
(8, 
a_
);

3417 
	}
}

3422 şas 
	cNoF©®Fau»Te¡
 : 
public
 
Te¡
 {

3423 
´Ùeùed
:

3424 
Sucûeds
() {}

3425 
FasNÚF©®
() {

3426 
ADD_FAILURE
() << "some‚on-fatal failure";

3428 
Fas
() {

3429 
FAIL
() << "some fatal failure";

3432 
DoAs£¹NoF©®Fau»OnFas
() {

3433 
ASSERT_NO_FATAL_FAILURE
(
Fas
());

3434 
ADD_FAILURE
() << "should‚ot„each here.";

3437 
DoEx³ùNoF©®Fau»OnFas
() {

3438 
EXPECT_NO_FATAL_FAILURE
(
Fas
());

3439 
ADD_FAILURE
() << "other failure";

3443 
	$TEST_F
(
NoF©®Fau»Te¡
, 
NoFau»
) {

3444 
	`EXPECT_NO_FATAL_FAILURE
(
	`Sucûeds
());

3445 
	`ASSERT_NO_FATAL_FAILURE
(
	`Sucûeds
());

3446 
	}
}

3448 
	$TEST_F
(
NoF©®Fau»Te¡
, 
NÚF©®IsNoFau»
) {

3449 
	`EXPECT_NONFATAL_FAILURE
(

3450 
	`EXPECT_NO_FATAL_FAILURE
(
	`FasNÚF©®
()),

3452 
	`EXPECT_NONFATAL_FAILURE
(

3453 
	`ASSERT_NO_FATAL_FAILURE
(
	`FasNÚF©®
()),

3455 
	}
}

3457 
	$TEST_F
(
NoF©®Fau»Te¡
, 
As£¹NoF©®Fau»OnF©®Fau»
) {

3458 
Te¡P¬tResuÉA¼ay
 
g‹¡_çu»s
;

3460 
ScİedFakeTe¡P¬tResuÉR•Ü‹r
 
	`g‹¡_»pÜ‹r
(&
g‹¡_çu»s
);

3461 
	`DoAs£¹NoF©®Fau»OnFas
();

3463 
	`ASSERT_EQ
(2, 
g‹¡_çu»s
.
	`size
());

3464 
	`EXPECT_EQ
(
Te¡P¬tResuÉ
::
kF©®Fau»
,

3465 
g‹¡_çu»s
.
	`G‘Te¡P¬tResuÉ
(0).
	`ty³
());

3466 
	`EXPECT_EQ
(
Te¡P¬tResuÉ
::
kF©®Fau»
,

3467 
g‹¡_çu»s
.
	`G‘Te¡P¬tResuÉ
(1).
	`ty³
());

3468 
	`EXPECT_PRED_FORMAT2
(
‹¡šg
::
IsSub¡ršg
, "some fatal failure",

3469 
g‹¡_çu»s
.
	`G‘Te¡P¬tResuÉ
(0).
	`mes§ge
());

3470 
	`EXPECT_PRED_FORMAT2
(
‹¡šg
::
IsSub¡ršg
, "it does",

3471 
g‹¡_çu»s
.
	`G‘Te¡P¬tResuÉ
(1).
	`mes§ge
());

3472 
	}
}

3474 
	$TEST_F
(
NoF©®Fau»Te¡
, 
Ex³ùNoF©®Fau»OnF©®Fau»
) {

3475 
Te¡P¬tResuÉA¼ay
 
g‹¡_çu»s
;

3477 
ScİedFakeTe¡P¬tResuÉR•Ü‹r
 
	`g‹¡_»pÜ‹r
(&
g‹¡_çu»s
);

3478 
	`DoEx³ùNoF©®Fau»OnFas
();

3480 
	`ASSERT_EQ
(3, 
g‹¡_çu»s
.
	`size
());

3481 
	`EXPECT_EQ
(
Te¡P¬tResuÉ
::
kF©®Fau»
,

3482 
g‹¡_çu»s
.
	`G‘Te¡P¬tResuÉ
(0).
	`ty³
());

3483 
	`EXPECT_EQ
(
Te¡P¬tResuÉ
::
kNÚF©®Fau»
,

3484 
g‹¡_çu»s
.
	`G‘Te¡P¬tResuÉ
(1).
	`ty³
());

3485 
	`EXPECT_EQ
(
Te¡P¬tResuÉ
::
kNÚF©®Fau»
,

3486 
g‹¡_çu»s
.
	`G‘Te¡P¬tResuÉ
(2).
	`ty³
());

3487 
	`EXPECT_PRED_FORMAT2
(
‹¡šg
::
IsSub¡ršg
, "some fatal failure",

3488 
g‹¡_çu»s
.
	`G‘Te¡P¬tResuÉ
(0).
	`mes§ge
());

3489 
	`EXPECT_PRED_FORMAT2
(
‹¡šg
::
IsSub¡ršg
, "it does",

3490 
g‹¡_çu»s
.
	`G‘Te¡P¬tResuÉ
(1).
	`mes§ge
());

3491 
	`EXPECT_PRED_FORMAT2
(
‹¡šg
::
IsSub¡ršg
, "other failure",

3492 
g‹¡_çu»s
.
	`G‘Te¡P¬tResuÉ
(2).
	`mes§ge
());

3493 
	}
}

3495 
	$TEST_F
(
NoF©®Fau»Te¡
, 
Mes§geIsSŒ—mabË
) {

3496 
Te¡P¬tResuÉA¼ay
 
g‹¡_çu»s
;

3498 
ScİedFakeTe¡P¬tResuÉR•Ü‹r
 
	`g‹¡_»pÜ‹r
(&
g‹¡_çu»s
);

3499 
	`EXPECT_NO_FATAL_FAILURE
(
	`FAIL
() << "foo") << "my message";

3501 
	`ASSERT_EQ
(2, 
g‹¡_çu»s
.
	`size
());

3502 
	`EXPECT_EQ
(
Te¡P¬tResuÉ
::
kNÚF©®Fau»
,

3503 
g‹¡_çu»s
.
	`G‘Te¡P¬tResuÉ
(0).
	`ty³
());

3504 
	`EXPECT_EQ
(
Te¡P¬tResuÉ
::
kNÚF©®Fau»
,

3505 
g‹¡_çu»s
.
	`G‘Te¡P¬tResuÉ
(1).
	`ty³
());

3506 
	`EXPECT_PRED_FORMAT2
(
‹¡šg
::
IsSub¡ršg
, "foo",

3507 
g‹¡_çu»s
.
	`G‘Te¡P¬tResuÉ
(0).
	`mes§ge
());

3508 
	`EXPECT_PRED_FORMAT2
(
‹¡šg
::
IsSub¡ršg
, "my message",

3509 
g‹¡_çu»s
.
	`G‘Te¡P¬tResuÉ
(1).
	`mes§ge
());

3510 
	}
}

3514 
	g¡d
::
¡ršg
 
Ed™sToSŒšg
(cÚ¡ 
¡d
::
veùÜ
<
Ed™Ty³
>& 
ed™s
) {

3515 
¡d
::
¡ršg
 
out
;

3516 
size_t
 
	gi
 = 0; i < 
	ged™s
.
size
(); ++i) {

3517 cÚ¡ 
	gkEd™s
[] = " +-/";

3518 
	gout
.
­³nd
(1, 
kEd™s
[
ed™s
[
i
]]);

3520  
	gout
;

3523 
	g¡d
::
veùÜ
<
size_t
> 
	$Ch¬sToIndiûs
(cÚ¡ 
¡d
::
¡ršg
& 
¡r
) {

3524 
¡d
::
veùÜ
<
size_t
> 
out
;

3525 
size_t
 
i
 = 0; i < 
¡r
.
	`size
(); ++i) {

3526 
out
.
	`push_back
(
¡©ic_ÿ¡
<
size_t
>(
¡r
[
i
]));

3528  
out
;

3529 
	}
}

3531 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> 
	$Ch¬sToLšes
(cÚ¡ 
¡d
::
¡ršg
& 
¡r
) {

3532 
¡d
::
veùÜ
<¡d::
¡ršg
> 
out
;

3533 
size_t
 
i
 = 0; i < 
¡r
.
	`size
(); ++i) {

3534 
out
.
	`push_back
(
¡r
.
	`sub¡r
(
i
, 1));

3536  
out
;

3537 
	}
}

3539 
	$TEST
(
Ed™Di¡ªû
, 
Te¡Su™es
) {

3540 
	sCa£
 {

3541 
lše
;

3542 cÚ¡ * 
Ëá
;

3543 cÚ¡ * 
right
;

3544 cÚ¡ * 
ex³ùed_ed™s
;

3545 cÚ¡ * 
ex³ùed_diff
;

3547 cÚ¡ 
Ca£
 
kCa£s
[] = {

3549 {
__LINE__
, "A", "A", " ", ""},

3550 {
__LINE__
, "ABCDE", "ABCDE", " ", ""},

3552 {
__LINE__
, "X", "XA", " +", "@@ +1,2 @@\n X\n+A\n"},

3553 {
__LINE__
, "X", "XABCD", " ++++", "@@ +1,5 @@\n X\n+A\n+B\n+C\n+D\n"},

3555 {
__LINE__
, "XA", "X", " -", "@@ -1,2 @@\n X\n-A\n"},

3556 {
__LINE__
, "XABCD", "X", " ----", "@@ -1,5 @@\n X\n-A\n-B\n-C\n-D\n"},

3558 {
__LINE__
, "A", "a", "/", "@@ -1,1 +1,1 @@\n-A\n+a\n"},

3559 {
__LINE__
, "ABCD", "abcd", "////",

3562 {
__LINE__
, "ABCDEFGH", "ABXEGH1", " -/ - +",

3564 {
__LINE__
, "AAAABCCCC", "ABABCDCDC", "- / + / ",

3566 {
__LINE__
, "ABCDE", "BCDCD", "- +/",

3568 {
__LINE__
, "ABCDEFGHIJKL", "BCDCDEFGJKLJK", "- ++ -- ++",

3572 cÚ¡ 
Ca£
* 
c
 = 
kCa£s
; c->
Ëá
; ++c) {

3573 
	`EXPECT_TRUE
(
c
->
ex³ùed_ed™s
 ==

3574 
	`Ed™sToSŒšg
(
	`C®cuÏ‹O±im®Ed™s
(
	`Ch¬sToIndiûs
(
c
->
Ëá
),

3575 
	`Ch¬sToIndiûs
(
c
->
right
))))

3576 << "Leá <" << 
c
->
Ëá
 << "> Righˆ<" << c->
right
 << "> Edits <"

3577 << 
	`Ed™sToSŒšg
(
	`C®cuÏ‹O±im®Ed™s
(

3578 
	`Ch¬sToIndiûs
(
c
->
Ëá
), Ch¬sToIndiûs(c->
right
))) << ">";

3579 
	`EXPECT_TRUE
(
c
->
ex³ùed_diff
 =ğ
	`C»©eUnif›dDiff
(
	`Ch¬sToLšes
(c->
Ëá
),

3580 
	`Ch¬sToLšes
(
c
->
right
)))

3581 << "Leá <" << 
c
->
Ëá
 << "> Righˆ<" << c->
right
 << "> Diff <"

3582 << 
	`C»©eUnif›dDiff
(
	`Ch¬sToLšes
(
c
->
Ëá
), Ch¬sToLšes(c->
right
))

3585 
	}
}

3588 
	$TEST
(
As£¹iÚTe¡
, 
EqFau»
) {

3589 cÚ¡ 
¡d
::
¡ršg
 
	`foo_v®
("5"), 
	`b¬_v®
("6");

3590 cÚ¡ 
¡d
::
¡ršg
 
	`msg1
(

3591 
	`EqFau»
("foo", "b¬", 
foo_v®
, 
b¬_v®
, 
çl£
)

3592 .
	`çu»_mes§ge
());

3593 
	`EXPECT_STREQ
(

3599 
msg1
.
	`c_¡r
());

3601 cÚ¡ 
¡d
::
¡ršg
 
	`msg2
(

3602 
	`EqFau»
("foo", "6", 
foo_v®
, 
b¬_v®
, 
çl£
)

3603 .
	`çu»_mes§ge
());

3604 
	`EXPECT_STREQ
(

3609 
msg2
.
	`c_¡r
());

3611 cÚ¡ 
¡d
::
¡ršg
 
	`msg3
(

3612 
	`EqFau»
("5", "b¬", 
foo_v®
, 
b¬_v®
, 
çl£
)

3613 .
	`çu»_mes§ge
());

3614 
	`EXPECT_STREQ
(

3619 
msg3
.
	`c_¡r
());

3621 cÚ¡ 
¡d
::
¡ršg
 
	`msg4
(

3622 
	`EqFau»
("5", "6", 
foo_v®
, 
b¬_v®
, 
çl£
).
	`çu»_mes§ge
());

3623 
	`EXPECT_STREQ
(

3627 
msg4
.
	`c_¡r
());

3629 cÚ¡ 
¡d
::
¡ršg
 
	`msg5
(

3630 
	`EqFau»
("foo", "bar",

3631 
¡d
::
	`¡ršg
("\"x\""), std::string("\"y\""),

3632 
Œue
).
	`çu»_mes§ge
());

3633 
	`EXPECT_STREQ
(

3640 
msg5
.
	`c_¡r
());

3641 
	}
}

3643 
	$TEST
(
As£¹iÚTe¡
, 
EqFau»W™hDiff
) {

3644 cÚ¡ 
¡d
::
¡ršg
 
	`Ëá
(

3646 cÚ¡ 
¡d
::
¡ršg
 
	`right
(

3648 cÚ¡ 
¡d
::
¡ršg
 
	`msg1
(

3649 
	`EqFau»
("Ëá", "right", 
Ëá
, 
right
, 
çl£
).
	`çu»_mes§ge
());

3650 
	`EXPECT_STREQ
(

3659 
msg1
.
	`c_¡r
());

3660 
	}
}

3663 
	$TEST
(
As£¹iÚTe¡
, 
Aµ’dU£rMes§ge
) {

3664 cÚ¡ 
¡d
::
¡ršg
 
	`foo
("foo");

3666 
Mes§ge
 
msg
;

3667 
	`EXPECT_STREQ
("foo",

3668 
	`Aµ’dU£rMes§ge
(
foo
, 
msg
).
	`c_¡r
());

3670 
msg
 << "bar";

3671 
	`EXPECT_STREQ
("foo\nbar",

3672 
	`Aµ’dU£rMes§ge
(
foo
, 
msg
).
	`c_¡r
());

3673 
	}
}

3675 #ifdeà
__BORLANDC__


3677 #´agm¨
İtiÚ
 
push
 -
w
-
ccc
 -w-
rch


3681 
	$TEST
(
As£¹iÚTe¡
, 
ASSERT_TRUE
) {

3682 
	`ASSERT_TRUE
(2 > 1);

3683 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_TRUE
(2 < 1),

3685 
	}
}

3688 
	$TEST
(
As£¹iÚTe¡
, 
As£¹TrueW™hAs£¹iÚResuÉ
) {

3689 
	`ASSERT_TRUE
(
	`ResuÉIsEv’
(2));

3690 #iâdeà
__BORLANDC__


3692 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_TRUE
(
	`ResuÉIsEv’
(3)),

3697 
	`ASSERT_TRUE
(
	`ResuÉIsEv’NoEx¶ª©iÚ
(2));

3698 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_TRUE
(
	`ResuÉIsEv’NoEx¶ª©iÚ
(3)),

3702 
	}
}

3705 
	$TEST
(
As£¹iÚTe¡
, 
ASSERT_FALSE
) {

3706 
	`ASSERT_FALSE
(2 < 1);

3707 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_FALSE
(2 > 1),

3711 
	}
}

3714 
	$TEST
(
As£¹iÚTe¡
, 
As£¹F®£W™hAs£¹iÚResuÉ
) {

3715 
	`ASSERT_FALSE
(
	`ResuÉIsEv’
(3));

3716 #iâdeà
__BORLANDC__


3718 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_FALSE
(
	`ResuÉIsEv’
(2)),

3723 
	`ASSERT_FALSE
(
	`ResuÉIsEv’NoEx¶ª©iÚ
(3));

3724 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_FALSE
(
	`ResuÉIsEv’NoEx¶ª©iÚ
(2)),

3728 
	}
}

3730 #ifdeà
__BORLANDC__


3732 #´agm¨
İtiÚ
 
pİ


3738 
	$TEST
(
Ex³ùTe¡
, 
ASSERT_EQ_DoubË
) {

3740 
	`ASSERT_EQ
(5.6, 5.6);

3743 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_EQ
(5.1, 5.2),

3745 
	}
}

3748 
	$TEST
(
As£¹iÚTe¡
, 
ASSERT_EQ
) {

3749 
	`ASSERT_EQ
(5, 2 + 3);

3750 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_EQ
(5, 2*3),

3755 
	}
}

3758 
	$TEST
(
As£¹iÚTe¡
, 
ASSERT_EQ_NULL
) {

3760 cÚ¡ * 
p
 = 
nuÎ±r
;

3761 
	`ASSERT_EQ
(
nuÎ±r
, 
p
);

3764 
n
 = 0;

3765 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_EQ
(
nuÎ±r
, &
n
), " &n\n Which is:");

3766 
	}
}

3772 
	$TEST
(
Ex³ùTe¡
, 
ASSERT_EQ_0
) {

3773 
n
 = 0;

3776 
	`ASSERT_EQ
(0, 
n
);

3779 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_EQ
(0, 5.6),

3781 
	}
}

3784 
	$TEST
(
As£¹iÚTe¡
, 
ASSERT_NE
) {

3785 
	`ASSERT_NE
(6, 7);

3786 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_NE
('a', 'a'),

3789 
	}
}

3792 
	$TEST
(
As£¹iÚTe¡
, 
ASSERT_LE
) {

3793 
	`ASSERT_LE
(2, 3);

3794 
	`ASSERT_LE
(2, 2);

3795 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_LE
(2, 0),

3797 
	}
}

3800 
	$TEST
(
As£¹iÚTe¡
, 
ASSERT_LT
) {

3801 
	`ASSERT_LT
(2, 3);

3802 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_LT
(2, 2),

3804 
	}
}

3807 
	$TEST
(
As£¹iÚTe¡
, 
ASSERT_GE
) {

3808 
	`ASSERT_GE
(2, 1);

3809 
	`ASSERT_GE
(2, 2);

3810 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_GE
(2, 3),

3812 
	}
}

3815 
	$TEST
(
As£¹iÚTe¡
, 
ASSERT_GT
) {

3816 
	`ASSERT_GT
(2, 1);

3817 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_GT
(2, 2),

3819 
	}
}

3821 #ià
GTEST_HAS_EXCEPTIONS


3823 
	$ThrowNÙhšg
(è{
	}
}

3826 
	$TEST
(
As£¹iÚTe¡
, 
ASSERT_THROW
) {

3827 
	`ASSERT_THROW
(
	`ThrowAnIÁeg”
(), );

3829 #iâdeà
__BORLANDC__


3832 
	`EXPECT_FATAL_FAILURE
(

3833 
	`ASSERT_THROW
(
	`ThrowAnIÁeg”
(), 
boŞ
),

3836 
	`EXPECT_FATAL_FAILURE
(

3837 
	`ASSERT_THROW
(
	`ThrowRuÁimeE¼Ü
("A desütiÚ"), 
¡d
::
logic_”rÜ
),

3840 "Aùu®: iˆthrow " 
ERROR_DESC
 " "

3844 
	`EXPECT_FATAL_FAILURE
(

3845 
	`ASSERT_THROW
(
	`ThrowNÙhšg
(), 
boŞ
),

3848 
	}
}

3851 
	$TEST
(
As£¹iÚTe¡
, 
ASSERT_NO_THROW
) {

3852 
	`ASSERT_NO_THROW
(
	`ThrowNÙhšg
());

3853 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_NO_THROW
(
	`ThrowAnIÁeg”
()),

3856 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_NO_THROW
(
	`ThrowRuÁimeE¼Ü
("A description")),

3859 "Aùu®: iˆthrow " 
ERROR_DESC
 " "

3861 
	}
}

3864 
	$TEST
(
As£¹iÚTe¡
, 
ASSERT_ANY_THROW
) {

3865 
	`ASSERT_ANY_THROW
(
	`ThrowAnIÁeg”
());

3866 
	`EXPECT_FATAL_FAILURE
(

3867 
	`ASSERT_ANY_THROW
(
	`ThrowNÙhšg
()),

3870 
	}
}

3876 
	$TEST
(
As£¹iÚTe¡
, 
As£¹P»ûd’û
) {

3877 
	`ASSERT_EQ
(1 < 2, 
Œue
);

3878 
boŞ
 
çl£_v®ue
 = 
çl£
;

3879 
	`ASSERT_EQ
(
Œue
 && 
çl£_v®ue
, 
çl£
);

3880 
	}
}

3883 
	$Te¡Eq1
(
x
) {

3884 
	`ASSERT_EQ
(1, 
x
);

3885 
	}
}

3888 
	$TEST
(
As£¹iÚTe¡
, 
NÚFixtu»Subroutše
) {

3889 
	`EXPECT_FATAL_FAILURE
(
	`Te¡Eq1
(2),

3891 
	}
}

3894 şas 
	cUncİyabË
 {

3895 
	gpublic
:

3896 
ex¶ic™
 
UncİyabË
(
a_v®ue
è: 
v®ue_
(a_value) {}

3898 
v®ue
(ècÚ¡ {  
v®ue_
; }

3899 
boŞ
 
	gİ”©Ü
==(cÚ¡ 
UncİyabË
& 
rhs
) const {

3900  
v®ue
(è=ğ
rhs
.value();

3902 
	g´iv©e
:

3905 
UncİyabË
(const Uncopyable&);

3907 
	gv®ue_
;

3910 ::
¡d
::
o¡»am
& 
İ”©Ü
<<(::¡d::o¡»am& 
os
, cÚ¡ 
	gUncİyabË
& 
	gv®ue
) {

3911  
	gos
 << 
	gv®ue
.
v®ue
();

3915 
boŞ
 
	$IsPos™iveUncİyabË
(cÚ¡ 
UncİyabË
& 
x
) {

3916  
x
.
	`v®ue
() > 0;

3917 
	}
}

3920 
	$Te¡As£¹NÚPos™ive
() {

3921 
UncİyabË
 
	`y
(-1);

3922 
	`ASSERT_PRED1
(
IsPos™iveUncİyabË
, 
y
);

3923 
	}
}

3925 
	$Te¡As£¹Equ®sUncİyabË
() {

3926 
UncİyabË
 
	`x
(5);

3927 
UncİyabË
 
	`y
(-1);

3928 
	`ASSERT_EQ
(
x
, 
y
);

3929 
	}
}

3932 
	$TEST
(
As£¹iÚTe¡
, 
As£¹WÜksW™hUncİyabËObjeù
) {

3933 
UncİyabË
 
	`x
(5);

3934 
	`ASSERT_PRED1
(
IsPos™iveUncİyabË
, 
x
);

3935 
	`ASSERT_EQ
(
x
, x);

3936 
	`EXPECT_FATAL_FAILURE
(
	`Te¡As£¹NÚPos™ive
(),

3938 
	`EXPECT_FATAL_FAILURE
(
	`Te¡As£¹Equ®sUncİyabË
(),

3941 
	}
}

3944 
	$TEST
(
As£¹iÚTe¡
, 
Ex³ùWÜksW™hUncİyabËObjeù
) {

3945 
UncİyabË
 
	`x
(5);

3946 
	`EXPECT_PRED1
(
IsPos™iveUncİyabË
, 
x
);

3947 
UncİyabË
 
	`y
(-1);

3948 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_PRED1
(
IsPos™iveUncİyabË
, 
y
),

3950 
	`EXPECT_EQ
(
x
, x);

3951 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_EQ
(
x
, 
y
),

3954 
	}
}

3956 
	eNamedEnum
 {

3957 
	gkE1
 = 0,

3958 
	gkE2
 = 1

3961 
	$TEST
(
As£¹iÚTe¡
, 
NamedEnum
) {

3962 
	`EXPECT_EQ
(
kE1
, kE1);

3963 
	`EXPECT_LT
(
kE1
, 
kE2
);

3964 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_EQ
(
kE1
, 
kE2
), "Which is: 0");

3965 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_EQ
(
kE1
, 
kE2
), "Which is: 1");

3966 
	}
}

3969 #ià!
defšed
(
__SUNPRO_CC
è&& !
	$defšed
(
__HP_aCC
)

3973 
kCa£A
 = -1,

3975 #ià
GTEST_OS_LINUX


3986 
kCa£B
 = 
‹¡šg
::
š‹º®
::
kMaxBigge¡IÁ
,

3990 
kCa£B
 = 
INT_MAX
,

3994 
kCa£C
 = 42

3995 
	}
};

3997 
	$TEST
(
As£¹iÚTe¡
, 
AnÚymousEnum
) {

3998 #ià
GTEST_OS_LINUX


4000 
	`EXPECT_EQ
(
¡©ic_ÿ¡
<>(
kCa£A
), stic_ÿ¡<>(
kCa£B
));

4004 
	`EXPECT_EQ
(
kCa£A
, kCaseA);

4005 
	`EXPECT_NE
(
kCa£A
, 
kCa£B
);

4006 
	`EXPECT_LT
(
kCa£A
, 
kCa£B
);

4007 
	`EXPECT_LE
(
kCa£A
, 
kCa£B
);

4008 
	`EXPECT_GT
(
kCa£B
, 
kCa£A
);

4009 
	`EXPECT_GE
(
kCa£A
, kCaseA);

4010 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_GE
(
kCa£A
, 
kCa£B
),

4012 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_GE
(
kCa£A
, 
kCa£C
),

4015 
	`ASSERT_EQ
(
kCa£A
, kCaseA);

4016 
	`ASSERT_NE
(
kCa£A
, 
kCa£B
);

4017 
	`ASSERT_LT
(
kCa£A
, 
kCa£B
);

4018 
	`ASSERT_LE
(
kCa£A
, 
kCa£B
);

4019 
	`ASSERT_GT
(
kCa£B
, 
kCa£A
);

4020 
	`ASSERT_GE
(
kCa£A
, kCaseA);

4022 #iâdeà
__BORLANDC__


4025 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_EQ
(
kCa£A
, 
kCa£B
),

4027 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_EQ
(
kCa£A
, 
kCa£C
),

4031 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_EQ
(
kCa£A
, 
kCa£C
),

4033 
	}
}

4037 #ià
GTEST_OS_WINDOWS


4039 
HRESULT
 
	$UÃx³ùedHRESULTFau»
() {

4040  
E_UNEXPECTED
;

4041 
	}
}

4043 
HRESULT
 
	$OkHRESULTSucûss
() {

4044  
S_OK
;

4045 
	}
}

4047 
HRESULT
 
	$F®£HRESULTSucûss
() {

4048  
S_FALSE
;

4049 
	}
}

4055 
	$TEST
(
HRESULTAs£¹iÚTe¡
, 
EXPECT_HRESULT_SUCCEEDED
) {

4056 
	`EXPECT_HRESULT_SUCCEEDED
(
S_OK
);

4057 
	`EXPECT_HRESULT_SUCCEEDED
(
S_FALSE
);

4059 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_HRESULT_SUCCEEDED
(
	`UÃx³ùedHRESULTFau»
()),

4062 
	}
}

4064 
	$TEST
(
HRESULTAs£¹iÚTe¡
, 
ASSERT_HRESULT_SUCCEEDED
) {

4065 
	`ASSERT_HRESULT_SUCCEEDED
(
S_OK
);

4066 
	`ASSERT_HRESULT_SUCCEEDED
(
S_FALSE
);

4068 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_HRESULT_SUCCEEDED
(
	`UÃx³ùedHRESULTFau»
()),

4071 
	}
}

4073 
	$TEST
(
HRESULTAs£¹iÚTe¡
, 
EXPECT_HRESULT_FAILED
) {

4074 
	`EXPECT_HRESULT_FAILED
(
E_UNEXPECTED
);

4076 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_HRESULT_FAILED
(
	`OkHRESULTSucûss
()),

4079 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_HRESULT_FAILED
(
	`F®£HRESULTSucûss
()),

4082 
	}
}

4084 
	$TEST
(
HRESULTAs£¹iÚTe¡
, 
ASSERT_HRESULT_FAILED
) {

4085 
	`ASSERT_HRESULT_FAILED
(
E_UNEXPECTED
);

4087 #iâdeà
__BORLANDC__


4090 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_HRESULT_FAILED
(
	`OkHRESULTSucûss
()),

4095 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_HRESULT_FAILED
(
	`F®£HRESULTSucûss
()),

4098 
	}
}

4101 
	$TEST
(
HRESULTAs£¹iÚTe¡
, 
SŒ—mšg
) {

4102 
	`EXPECT_HRESULT_SUCCEEDED
(
S_OK
) << "unexpected failure";

4103 
	`ASSERT_HRESULT_SUCCEEDED
(
S_OK
) << "unexpected failure";

4104 
	`EXPECT_HRESULT_FAILED
(
E_UNEXPECTED
) << "unexpected failure";

4105 
	`ASSERT_HRESULT_FAILED
(
E_UNEXPECTED
) << "unexpected failure";

4107 
	`EXPECT_NONFATAL_FAILURE
(

4108 
	`EXPECT_HRESULT_SUCCEEDED
(
E_UNEXPECTED
) << "expected failure",

4111 #iâdeà
__BORLANDC__


4114 
	`EXPECT_FATAL_FAILURE
(

4115 
	`ASSERT_HRESULT_SUCCEEDED
(
E_UNEXPECTED
) << "expected failure",

4119 
	`EXPECT_NONFATAL_FAILURE
(

4120 
	`EXPECT_HRESULT_FAILED
(
S_OK
) << "expected failure",

4123 
	`EXPECT_FATAL_FAILURE
(

4124 
	`ASSERT_HRESULT_FAILED
(
S_OK
) << "expected failure",

4126 
	}
}

4131 #ifdeà
__GNUC__


4132 #´agm¨
GCC
 
dŸgno¡ic
 
push


4133 #´agm¨
GCC
 
dŸgno¡ic
 
ignÜed
 "-Wdangling-else"

4134 #´agm¨
GCC
 
dŸgno¡ic
 
ignÜed
 "-Wempty-body"

4135 #´agm¨
GCC
 
dŸgno¡ic
 
ignÜed
 "-Wpragmas"

4138 
	$TEST
(
As£¹iÚSyÁaxTe¡
, 
BasicAs£¹iÚsBehavesLikeSšgËS‹m’t
) {

4139 ià(
	`AlwaysF®£
())

4140 
	`ASSERT_TRUE
(
çl£
) << "This should‚ever beƒxecuted; "

4143 ià(
	`AlwaysTrue
())

4144 
	`EXPECT_FALSE
(
çl£
);

4148 ià(
	`AlwaysF®£
())

4149 
	`ASSERT_LT
(1, 3);

4151 ià(
	`AlwaysF®£
())

4154 
	`EXPECT_GT
(3, 2) << "";

4155 
	}
}

4156 #ifdeà
__GNUC__


4157 #´agm¨
GCC
 
dŸgno¡ic
 
pİ


4160 #ià
GTEST_HAS_EXCEPTIONS


4163 
	$TEST
(
Ex³ùThrowTe¡
, 
DÛsNÙG’”©eUÄ—chabËCodeW¬nšg
) {

4164 
n
 = 0;

4166 
	`EXPECT_THROW
(
throw
 1, );

4167 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_THROW
(
n
++, ), "");

4168 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_THROW
(
throw
 1, const *), "");

4169 
	`EXPECT_NO_THROW
(
n
++);

4170 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_NO_THROW
(
throw
 1), "");

4171 
	`EXPECT_ANY_THROW
(
throw
 1);

4172 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_ANY_THROW
(
n
++), "");

4173 
	}
}

4175 
	$TEST
(
Ex³ùThrowTe¡
, 
DÛsNÙG’”©eDu¶iÿ‹C©chCÏu£W¬nšg
) {

4176 
	`EXPECT_THROW
(
throw
 
¡d
::
	`exû±iÚ
(), std::
exû±iÚ
);

4177 
	}
}

4180 #ifdeà
__GNUC__


4181 #´agm¨
GCC
 
dŸgno¡ic
 
push


4182 #´agm¨
GCC
 
dŸgno¡ic
 
ignÜed
 "-Wdangling-else"

4183 #´agm¨
GCC
 
dŸgno¡ic
 
ignÜed
 "-Wempty-body"

4184 #´agm¨
GCC
 
dŸgno¡ic
 
ignÜed
 "-Wpragmas"

4186 
	$TEST
(
As£¹iÚSyÁaxTe¡
, 
Exû±iÚAs£¹iÚsBehavesLikeSšgËS‹m’t
) {

4187 ià(
	`AlwaysF®£
())

4188 
	`EXPECT_THROW
(
	`ThrowNÙhšg
(), 
boŞ
);

4190 ià(
	`AlwaysTrue
())

4191 
	`EXPECT_THROW
(
	`ThrowAnIÁeg”
(), );

4195 ià(
	`AlwaysF®£
())

4196 
	`EXPECT_NO_THROW
(
	`ThrowAnIÁeg”
());

4198 ià(
	`AlwaysTrue
())

4199 
	`EXPECT_NO_THROW
(
	`ThrowNÙhšg
());

4203 ià(
	`AlwaysF®£
())

4204 
	`EXPECT_ANY_THROW
(
	`ThrowNÙhšg
());

4206 ià(
	`AlwaysTrue
())

4207 
	`EXPECT_ANY_THROW
(
	`ThrowAnIÁeg”
());

4210 
	}
}

4211 #ifdeà
__GNUC__


4212 #´agm¨
GCC
 
dŸgno¡ic
 
pİ


4218 #ifdeà
__GNUC__


4219 #´agm¨
GCC
 
dŸgno¡ic
 
push


4220 #´agm¨
GCC
 
dŸgno¡ic
 
ignÜed
 "-Wdangling-else"

4221 #´agm¨
GCC
 
dŸgno¡ic
 
ignÜed
 "-Wempty-body"

4222 #´agm¨
GCC
 
dŸgno¡ic
 
ignÜed
 "-Wpragmas"

4224 
	$TEST
(
As£¹iÚSyÁaxTe¡
, 
NoF©®Fau»As£¹iÚsBehavesLikeSšgËS‹m’t
) {

4225 ià(
	`AlwaysF®£
())

4226 
	`EXPECT_NO_FATAL_FAILURE
(
	`FAIL
()) << "This should‚ever beƒxecuted. "

4231 ià(
	`AlwaysF®£
())

4232 
	`ASSERT_NO_FATAL_FAILURE
(
	`FAIL
()) << "";

4236 ià(
	`AlwaysTrue
())

4237 
	`EXPECT_NO_FATAL_FAILURE
(
	`SUCCEED
());

4241 ià(
	`AlwaysF®£
())

4244 
	`ASSERT_NO_FATAL_FAILURE
(
	`SUCCEED
());

4245 
	}
}

4246 #ifdeà
__GNUC__


4247 #´agm¨
GCC
 
dŸgno¡ic
 
pİ


4251 
	$TEST
(
As£¹iÚSyÁaxTe¡
, 
WÜksW™hSw™ch
) {

4256 
	`ASSERT_TRUE
(
Œue
);

4261 
	`EXPECT_FALSE
(
çl£
) << "EXPECT_FALSE failed in switch case";

4268 
	`ASSERT_EQ
(1, 1) << "ASSERT_EQ failed in default switch handler";

4273 
	`EXPECT_NE
(1, 2);

4274 
	}
}

4276 #ià
GTEST_HAS_EXCEPTIONS


4278 
	$ThrowASŒšg
() {

4279 
throw
 "std::string";

4280 
	}
}

4284 
	$TEST
(
As£¹iÚSyÁaxTe¡
, 
WÜksW™hCÚ¡
) {

4285 
	`ASSERT_THROW
(
	`ThrowASŒšg
(), const *);

4287 
	`EXPECT_THROW
(
	`ThrowASŒšg
(), const *);

4288 
	}
}

4294 
Çme¥aû
 
	g‹¡šg
 {

4297 
TEST
(
SucûssfulAs£¹iÚTe¡
, 
SUCCEED
) {

4298 
SUCCEED
();

4299 
SUCCEED
() << "OK";

4300 
EXPECT_EQ
(2, 
G‘Un™Te¡Im¶
()->
cu¼’t_‹¡_»suÉ
()->
tÙ®_·¹_couÁ
());

4304 
TEST
(
SucûssfulAs£¹iÚTe¡
, 
EXPECT
) {

4305 
EXPECT_TRUE
(
Œue
);

4306 
EXPECT_EQ
(0, 
G‘Un™Te¡Im¶
()->
cu¼’t_‹¡_»suÉ
()->
tÙ®_·¹_couÁ
());

4310 
TEST
(
SucûssfulAs£¹iÚTe¡
, 
EXPECT_STR
) {

4311 
EXPECT_STREQ
("", "");

4312 
EXPECT_EQ
(0, 
G‘Un™Te¡Im¶
()->
cu¼’t_‹¡_»suÉ
()->
tÙ®_·¹_couÁ
());

4316 
TEST
(
SucûssfulAs£¹iÚTe¡
, 
ASSERT
) {

4317 
ASSERT_TRUE
(
Œue
);

4318 
EXPECT_EQ
(0, 
G‘Un™Te¡Im¶
()->
cu¼’t_‹¡_»suÉ
()->
tÙ®_·¹_couÁ
());

4322 
TEST
(
SucûssfulAs£¹iÚTe¡
, 
ASSERT_STR
) {

4323 
ASSERT_STREQ
("", "");

4324 
EXPECT_EQ
(0, 
G‘Un™Te¡Im¶
()->
cu¼’t_‹¡_»suÉ
()->
tÙ®_·¹_couÁ
());

4329 
	gÇme¥aû
 {

4333 
TEST
(
As£¹iÚW™hMes§geTe¡
, 
EXPECT
) {

4334 
EXPECT_EQ
(1, 1) << "This should succeed.";

4335 
EXPECT_NONFATAL_FAILURE
(
EXPECT_NE
(1, 1) << "Expected failure #1.",

4337 
EXPECT_LE
(1, 2) << "This should succeed.";

4338 
EXPECT_NONFATAL_FAILURE
(
EXPECT_LT
(1, 0) << "Expected failure #2.",

4340 
EXPECT_GE
(1, 0) << "This should succeed.";

4341 
EXPECT_NONFATAL_FAILURE
(
EXPECT_GT
(1, 2) << "Expected failure #3.",

4344 
EXPECT_STREQ
("1", "1") << "This should succeed.";

4345 
EXPECT_NONFATAL_FAILURE
(
EXPECT_STRNE
("1", "1") << "Expected failure #4.",

4347 
EXPECT_STRCASEEQ
("a", "A") << "This should succeed.";

4348 
EXPECT_NONFATAL_FAILURE
(
EXPECT_STRCASENE
("a", "A") << "Expected failure #5.",

4351 
EXPECT_FLOAT_EQ
(1, 1) << "This should succeed.";

4352 
EXPECT_NONFATAL_FAILURE
(
EXPECT_DOUBLE_EQ
(1, 1.2) << "Expected failure #6.",

4354 
EXPECT_NEAR
(1, 1.1, 0.2) << "This should succeed.";

4357 
TEST
(
As£¹iÚW™hMes§geTe¡
, 
ASSERT
) {

4358 
ASSERT_EQ
(1, 1) << "This should succeed.";

4359 
ASSERT_NE
(1, 2) << "This should succeed.";

4360 
ASSERT_LE
(1, 2) << "This should succeed.";

4361 
ASSERT_LT
(1, 2) << "This should succeed.";

4362 
ASSERT_GE
(1, 0) << "This should succeed.";

4363 
EXPECT_FATAL_FAILURE
(
ASSERT_GT
(1, 2) << "Expected failure.",

4367 
TEST
(
As£¹iÚW™hMes§geTe¡
, 
ASSERT_STR
) {

4368 
ASSERT_STREQ
("1", "1") << "This should succeed.";

4369 
ASSERT_STRNE
("1", "2") << "This should succeed.";

4370 
ASSERT_STRCASEEQ
("a", "A") << "This should succeed.";

4371 
EXPECT_FATAL_FAILURE
(
ASSERT_STRCASENE
("a", "A") << "Expected failure.",

4375 
TEST
(
As£¹iÚW™hMes§geTe¡
, 
ASSERT_FLOATING
) {

4376 
ASSERT_FLOAT_EQ
(1, 1) << "This should succeed.";

4377 
ASSERT_DOUBLE_EQ
(1, 1) << "This should succeed.";

4378 
EXPECT_FATAL_FAILURE
(
ASSERT_NEAR
(1, 1.2, 0.1) << "Expect failure.",

4383 
TEST
(
As£¹iÚW™hMes§geTe¡
, 
ASSERT_FALSE
) {

4384 
ASSERT_FALSE
(
çl£
) << "This shouldn't fail.";

4385 
EXPECT_FATAL_FAILURE
({

4386 
ASSERT_FALSE
(
Œue
) << "Expected failure: " << 2 << " > " << 1

4387 << "ƒv®u©e tØ" << 
Œue
;

4392 
TEST
(
As£¹iÚW™hMes§geTe¡
, 
FAIL
) {

4393 
EXPECT_FATAL_FAILURE
(
FAIL
() << 0,

4398 
TEST
(
As£¹iÚW™hMes§geTe¡
, 
SUCCEED
) {

4399 
SUCCEED
() << "Success == " << 1;

4403 
TEST
(
As£¹iÚW™hMes§geTe¡
, 
ASSERT_TRUE
) {

4404 
ASSERT_TRUE
(
Œue
) << "This should succeed.";

4405 
ASSERT_TRUE
(
Œue
è<< 
	gŒue
;

4406 
EXPECT_FATAL_FAILURE
(

4408 
ASSERT_TRUE
(
çl£
è<< 
¡©ic_ÿ¡
<cÚ¡ *>(
nuÎ±r
)

4409 << 
¡©ic_ÿ¡
<*>(
nuÎ±r
);

4414 #ià
GTEST_OS_WINDOWS


4416 
TEST
(
As£¹iÚW™hMes§geTe¡
, 
WideSŒšgMes§ge
) {

4417 
EXPECT_NONFATAL_FAILURE
({

4418 
EXPECT_TRUE
(
çl£
è<< 
L
"This failure isƒxpected.\x8119";

4420 
EXPECT_FATAL_FAILURE
({

4421 
ASSERT_EQ
(1, 2) << "This failure is "

4422 << 
L
"expectedoo.\x8120";

4428 
TEST
(
Ex³ùTe¡
, 
EXPECT_TRUE
) {

4429 
EXPECT_TRUE
(
Œue
) << "Intentional success";

4430 
EXPECT_NONFATAL_FAILURE
(
EXPECT_TRUE
(
çl£
) << "Intentional failure #1.",

4432 
EXPECT_NONFATAL_FAILURE
(
EXPECT_TRUE
(
çl£
) << "Intentional failure #2.",

4434 
EXPECT_TRUE
(2 > 1);

4435 
EXPECT_NONFATAL_FAILURE
(
EXPECT_TRUE
(2 < 1),

4439 
EXPECT_NONFATAL_FAILURE
(
EXPECT_TRUE
(2 > 3),

4444 
TEST
(
Ex³ùTe¡
, 
Ex³ùTrueW™hAs£¹iÚResuÉ
) {

4445 
EXPECT_TRUE
(
ResuÉIsEv’
(2));

4446 
EXPECT_NONFATAL_FAILURE
(
EXPECT_TRUE
(
ResuÉIsEv’
(3)),

4450 
EXPECT_TRUE
(
ResuÉIsEv’NoEx¶ª©iÚ
(2));

4451 
EXPECT_NONFATAL_FAILURE
(
EXPECT_TRUE
(
ResuÉIsEv’NoEx¶ª©iÚ
(3)),

4458 
TEST
(
Ex³ùTe¡
, 
EXPECT_FALSE
) {

4459 
EXPECT_FALSE
(2 < 1);

4460 
EXPECT_FALSE
(
çl£
) << "Intentional success";

4461 
EXPECT_NONFATAL_FAILURE
(
EXPECT_FALSE
(
Œue
) << "Intentional failure #1.",

4463 
EXPECT_NONFATAL_FAILURE
(
EXPECT_FALSE
(
Œue
) << "Intentional failure #2.",

4465 
EXPECT_NONFATAL_FAILURE
(
EXPECT_FALSE
(2 > 1),

4469 
EXPECT_NONFATAL_FAILURE
(
EXPECT_FALSE
(2 < 3),

4474 
TEST
(
Ex³ùTe¡
, 
Ex³ùF®£W™hAs£¹iÚResuÉ
) {

4475 
EXPECT_FALSE
(
ResuÉIsEv’
(3));

4476 
EXPECT_NONFATAL_FAILURE
(
EXPECT_FALSE
(
ResuÉIsEv’
(2)),

4480 
EXPECT_FALSE
(
ResuÉIsEv’NoEx¶ª©iÚ
(3));

4481 
EXPECT_NONFATAL_FAILURE
(
EXPECT_FALSE
(
ResuÉIsEv’NoEx¶ª©iÚ
(2)),

4487 #ifdeà
__BORLANDC__


4489 #´agm¨
İtiÚ
 
pİ


4493 
TEST
(
Ex³ùTe¡
, 
EXPECT_EQ
) {

4494 
EXPECT_EQ
(5, 2 + 3);

4495 
EXPECT_NONFATAL_FAILURE
(
EXPECT_EQ
(5, 2*3),

4500 
EXPECT_NONFATAL_FAILURE
(
EXPECT_EQ
(5, 2 - 3),

4507 
TEST
(
Ex³ùTe¡
, 
EXPECT_EQ_DoubË
) {

4509 
EXPECT_EQ
(5.6, 5.6);

4512 
EXPECT_NONFATAL_FAILURE
(
EXPECT_EQ
(5.1, 5.2),

4517 
TEST
(
Ex³ùTe¡
, 
EXPECT_EQ_NULL
) {

4519 cÚ¡ * 
	gp
 = 
nuÎ±r
;

4520 
EXPECT_EQ
(
nuÎ±r
, 
p
);

4523 
	gn
 = 0;

4524 
EXPECT_NONFATAL_FAILURE
(
EXPECT_EQ
(
nuÎ±r
, &
n
), " &n\n Which is:");

4531 
TEST
(
Ex³ùTe¡
, 
EXPECT_EQ_0
) {

4532 
	gn
 = 0;

4535 
EXPECT_EQ
(0, 
n
);

4538 
EXPECT_NONFATAL_FAILURE
(
EXPECT_EQ
(0, 5.6),

4543 
TEST
(
Ex³ùTe¡
, 
EXPECT_NE
) {

4544 
EXPECT_NE
(6, 7);

4546 
EXPECT_NONFATAL_FAILURE
(
EXPECT_NE
('a', 'a'),

4549 
EXPECT_NONFATAL_FAILURE
(
EXPECT_NE
(2, 2),

4551 * cÚ¡ 
	gp0
 = 
nuÎ±r
;

4552 
EXPECT_NONFATAL_FAILURE
(
EXPECT_NE
(
p0
,…0),

4558 * 
	gpv1
 = (*)0x1234;

4559 * cÚ¡ 
	gp1
 = 
»š‹½»t_ÿ¡
<*>(
pv1
);

4560 
EXPECT_NONFATAL_FAILURE
(
EXPECT_NE
(
p1
,…1),

4565 
TEST
(
Ex³ùTe¡
, 
EXPECT_LE
) {

4566 
EXPECT_LE
(2, 3);

4567 
EXPECT_LE
(2, 2);

4568 
EXPECT_NONFATAL_FAILURE
(
EXPECT_LE
(2, 0),

4570 
EXPECT_NONFATAL_FAILURE
(
EXPECT_LE
(1.1, 0.9),

4575 
TEST
(
Ex³ùTe¡
, 
EXPECT_LT
) {

4576 
EXPECT_LT
(2, 3);

4577 
EXPECT_NONFATAL_FAILURE
(
EXPECT_LT
(2, 2),

4579 
EXPECT_NONFATAL_FAILURE
(
EXPECT_LT
(2, 1),

4584 
TEST
(
Ex³ùTe¡
, 
EXPECT_GE
) {

4585 
EXPECT_GE
(2, 1);

4586 
EXPECT_GE
(2, 2);

4587 
EXPECT_NONFATAL_FAILURE
(
EXPECT_GE
(2, 3),

4589 
EXPECT_NONFATAL_FAILURE
(
EXPECT_GE
(0.9, 1.1),

4594 
TEST
(
Ex³ùTe¡
, 
EXPECT_GT
) {

4595 
EXPECT_GT
(2, 1);

4596 
EXPECT_NONFATAL_FAILURE
(
EXPECT_GT
(2, 2),

4598 
EXPECT_NONFATAL_FAILURE
(
EXPECT_GT
(2, 3),

4602 #ià
GTEST_HAS_EXCEPTIONS


4605 
TEST
(
Ex³ùTe¡
, 
EXPECT_THROW
) {

4606 
EXPECT_THROW
(
ThrowAnIÁeg”
(), );

4607 
EXPECT_NONFATAL_FAILURE
(
EXPECT_THROW
(
ThrowAnIÁeg”
(), 
boŞ
),

4610 
EXPECT_NONFATAL_FAILURE
(
EXPECT_THROW
(
ThrowRuÁimeE¼Ü
("A description"),

4611 
¡d
::
logic_”rÜ
),

4614 "Aùu®: iˆthrow " 
ERROR_DESC
 " "

4616 
EXPECT_NONFATAL_FAILURE
(

4617 
EXPECT_THROW
(
ThrowNÙhšg
(), 
boŞ
),

4623 
TEST
(
Ex³ùTe¡
, 
EXPECT_NO_THROW
) {

4624 
EXPECT_NO_THROW
(
ThrowNÙhšg
());

4625 
EXPECT_NONFATAL_FAILURE
(
EXPECT_NO_THROW
(
ThrowAnIÁeg”
()),

4628 
EXPECT_NONFATAL_FAILURE
(
EXPECT_NO_THROW
(
ThrowRuÁimeE¼Ü
("A description")),

4631 "Aùu®: iˆthrow " 
ERROR_DESC
 " "

4636 
TEST
(
Ex³ùTe¡
, 
EXPECT_ANY_THROW
) {

4637 
EXPECT_ANY_THROW
(
ThrowAnIÁeg”
());

4638 
EXPECT_NONFATAL_FAILURE
(

4639 
EXPECT_ANY_THROW
(
ThrowNÙhšg
()),

4647 
TEST
(
Ex³ùTe¡
, 
Ex³ùP»ûd’û
) {

4648 
EXPECT_EQ
(1 < 2, 
Œue
);

4649 
EXPECT_NONFATAL_FAILURE
(
EXPECT_EQ
(
Œue
,ru&& 
çl£
),

4657 
TEST
(
SŒ—mabËToSŒšgTe¡
, 
SÿÏr
) {

4658 
EXPECT_STREQ
("5", 
SŒ—mabËToSŒšg
(5).
c_¡r
());

4662 
TEST
(
SŒ—mabËToSŒšgTe¡
, 
Poš‹r
) {

4663 
	gn
 = 0;

4664 * 
	gp
 = &
n
;

4665 
EXPECT_STRNE
("ÒuÎ)", 
SŒ—mabËToSŒšg
(
p
).
c_¡r
());

4669 
TEST
(
SŒ—mabËToSŒšgTe¡
, 
NuÎPoš‹r
) {

4670 * 
	gp
 = 
nuÎ±r
;

4671 
EXPECT_STREQ
("ÒuÎ)", 
SŒ—mabËToSŒšg
(
p
).
c_¡r
());

4675 
TEST
(
SŒ—mabËToSŒšgTe¡
, 
CSŒšg
) {

4676 
EXPECT_STREQ
("Foo", 
SŒ—mabËToSŒšg
("Foo").
c_¡r
());

4680 
TEST
(
SŒ—mabËToSŒšgTe¡
, 
NuÎCSŒšg
) {

4681 * 
	gp
 = 
nuÎ±r
;

4682 
EXPECT_STREQ
("ÒuÎ)", 
SŒ—mabËToSŒšg
(
p
).
c_¡r
());

4688 
TEST
(
SŒ—mabËTe¡
, 
¡ršg
) {

4689 cÚ¡ 
	g¡d
::
¡ršg
 
¡r
(

4691 
EXPECT_FATAL_FAILURE
(
FAIL
(è<< 
¡r
,

4692 
¡r
.
c_¡r
());

4697 
TEST
(
SŒ—mabËTe¡
, 
¡ršgW™hEmbeddedNUL
) {

4698 cÚ¡ 
	gch¬_¬¿y_w™h_nul
[] =

4700 cÚ¡ 
	g¡d
::
¡ršg
 
¡ršg_w™h_nul
(
ch¬_¬¿y_w™h_nul
,

4701 (
ch¬_¬¿y_w™h_nul
)

4703 
EXPECT_FATAL_FAILURE
(
FAIL
(è<< 
¡ršg_w™h_nul
,

4708 
TEST
(
SŒ—mabËTe¡
, 
NULCh¬
) {

4709 
EXPECT_FATAL_FAILURE
({

4710 
FAIL
() << "A NUL" << '\0' << "‡nd some more string";

4715 
TEST
(
SŒ—mabËTe¡
, ) {

4716 
EXPECT_FATAL_FAILURE
(
FAIL
() << 900913,

4725 
TEST
(
SŒ—mabËTe¡
, 
NuÎCh¬PŒ
) {

4726 
EXPECT_FATAL_FAILURE
(
FAIL
(è<< 
¡©ic_ÿ¡
<cÚ¡ *>(
nuÎ±r
), "(null)");

4731 
TEST
(
SŒ—mabËTe¡
, 
BasicIoMª
) {

4732 
EXPECT_FATAL_FAILURE
({

4733 
FAIL
(è<< "Lš1." << 
¡d
::
’dl


4734 << "A NUL ch¬ " << 
¡d
::
’ds
 << std::
æush
 << " in†ine 2.";

4740 
AddFau»H–³r
(
boŞ
* 
abÜ‹d
) {

4741 *
	gabÜ‹d
 = 
Œue
;

4742 
ADD_FAILURE
() << "Intentional failure.";

4743 *
	gabÜ‹d
 = 
çl£
;

4747 
TEST
(
MaüoTe¡
, 
ADD_FAILURE
) {

4748 
boŞ
 
	gabÜ‹d
 = 
Œue
;

4749 
EXPECT_NONFATAL_FAILURE
(
AddFau»H–³r
(&
abÜ‹d
),

4751 
EXPECT_FALSE
(
abÜ‹d
);

4755 
TEST
(
MaüoTe¡
, 
ADD_FAILURE_AT
) {

4758 
EXPECT_NONFATAL_FAILURE
(
ADD_FAILURE_AT
("foo.cc", 42) << "Wrong!", "Wrong!");

4761 
EXPECT_NONFATAL_FAILURE
(
ADD_FAILURE_AT
("foo.cc", 42), "Failed");

4770 
TEST
(
MaüoTe¡
, 
FAIL
) {

4771 
EXPECT_FATAL_FAILURE
(
FAIL
(),

4773 
EXPECT_FATAL_FAILURE
(
FAIL
() << "Intentional failure.",

4778 
TEST
(
MaüoTe¡
, 
GTEST_FAIL_AT
) {

4781 
EXPECT_FATAL_FAILURE
(
GTEST_FAIL_AT
("foo.cc", 42) << "Wrong!", "Wrong!");

4784 
EXPECT_FATAL_FAILURE
(
GTEST_FAIL_AT
("foo.cc", 42), "Failed");

4791 
TEST
(
MaüoTe¡
, 
SUCCEED
) {

4792 
SUCCEED
();

4793 
SUCCEED
() << "Explicit success.";

4804 
TEST
(
EqAs£¹iÚTe¡
, 
BoŞ
) {

4805 
EXPECT_EQ
(
Œue
,rue);

4806 
EXPECT_FATAL_FAILURE
({

4807 
boŞ
 
çl£_v®ue
 = 
çl£
;

4808 
ASSERT_EQ
(
çl£_v®ue
, 
Œue
);

4813 
TEST
(
EqAs£¹iÚTe¡
, 
IÁ
) {

4814 
ASSERT_EQ
(32, 32);

4815 
EXPECT_NONFATAL_FAILURE
(
EXPECT_EQ
(32, 33),

4820 
TEST
(
EqAs£¹iÚTe¡
, 
Time_T
) {

4821 
EXPECT_EQ
(
¡©ic_ÿ¡
<
time_t
>(0),

4822 
¡©ic_ÿ¡
<
time_t
>(0));

4823 
EXPECT_FATAL_FAILURE
(
ASSERT_EQ
(
¡©ic_ÿ¡
<
time_t
>(0),

4824 
¡©ic_ÿ¡
<
time_t
>(1234)),

4829 
TEST
(
EqAs£¹iÚTe¡
, 
Ch¬
) {

4830 
ASSERT_EQ
('z', 'z');

4831 cÚ¡ 
	gch
 = 'b';

4832 
EXPECT_NONFATAL_FAILURE
(
EXPECT_EQ
('\0', 
ch
),

4834 
EXPECT_NONFATAL_FAILURE
(
EXPECT_EQ
('a', 
ch
),

4839 
TEST
(
EqAs£¹iÚTe¡
, 
WideCh¬
) {

4840 
EXPECT_EQ
(
L
'b', L'b');

4842 
EXPECT_NONFATAL_FAILURE
(
EXPECT_EQ
(
L
'\0', L'x'),

4849 
wch¬_t
 
	gwch¬
;

4850 
	gwch¬
 = 
L
'b';

4851 
EXPECT_NONFATAL_FAILURE
(
EXPECT_EQ
(
L
'a', 
wch¬
),

4853 
	gwch¬
 = 0x8119;

4854 
EXPECT_FATAL_FAILURE
(
ASSERT_EQ
(
¡©ic_ÿ¡
<
wch¬_t
>(0x8120), 
wch¬
),

4859 
TEST
(
EqAs£¹iÚTe¡
, 
StdSŒšg
) {

4862 
ASSERT_EQ
("Te¡", ::
¡d
::
¡ršg
("Test"));

4865 cÚ¡ ::
¡d
::
¡ršg
 
¡r1
("A * inhe middle");

4866 cÚ¡ ::
¡d
::
¡ršg
 
¡r2
(
¡r1
);

4867 
EXPECT_EQ
(
¡r1
, 
¡r2
);

4871 
EXPECT_NONFATAL_FAILURE
(
EXPECT_EQ
("Te¡", ::
¡d
::
¡ršg
("test")),

4875 * cÚ¡ 
	gp1
 = 
cÚ¡_ÿ¡
<*>("foo");

4876 
EXPECT_NONFATAL_FAILURE
(
EXPECT_EQ
(::
¡d
::
¡ršg
("b¬"), 
p1
),

4881 ::
¡d
::
¡ršg
 
¡r3
(
¡r1
);

4882 
	g¡r3
.
©
(2) = '\0';

4883 
EXPECT_FATAL_FAILURE
(
ASSERT_EQ
(
¡r1
, 
¡r3
),

4887 #ià
GTEST_HAS_STD_WSTRING


4890 
TEST
(
EqAs£¹iÚTe¡
, 
StdWideSŒšg
) {

4892 cÚ¡ ::
¡d
::
w¡ršg
 
w¡r1
(
L
"A * inhe middle");

4893 cÚ¡ ::
¡d
::
w¡ršg
 
w¡r2
(
w¡r1
);

4894 
ASSERT_EQ
(
w¡r1
, 
w¡r2
);

4898 cÚ¡ 
wch¬_t
 
	gkTe¡X8119
[] = { 'T', 'e', 's', 't', 0x8119, '\0' };

4899 
EXPECT_EQ
(::
¡d
::
w¡ršg
(
kTe¡X8119
), kTestX8119);

4903 cÚ¡ 
wch¬_t
 
	gkTe¡X8120
[] = { 'T', 'e', 's', 't', 0x8120, '\0' };

4904 
EXPECT_NONFATAL_FAILURE
({

4905 
EXPECT_EQ
(::
¡d
::
w¡ršg
(
kTe¡X8119
), 
kTe¡X8120
);

4910 ::
¡d
::
w¡ršg
 
w¡r3
(
w¡r1
);

4911 
	gw¡r3
.
©
(2èğ
L
'\0';

4912 
EXPECT_NONFATAL_FAILURE
(
EXPECT_EQ
(
w¡r1
, 
w¡r3
),

4917 
EXPECT_FATAL_FAILURE
({

4918 
ASSERT_EQ
(
cÚ¡_ÿ¡
<
wch¬_t
*>(
L
"foo"), ::
¡d
::
w¡ršg
(L"bar"));

4925 
TEST
(
EqAs£¹iÚTe¡
, 
Ch¬Poš‹r
) {

4926 * cÚ¡ 
	gp0
 = 
nuÎ±r
;

4931 * 
	gpv1
 = (*)0x1234;

4932 * 
	gpv2
 = (*)0xABC0;

4933 * cÚ¡ 
	gp1
 = 
»š‹½»t_ÿ¡
<*>(
pv1
);

4934 * cÚ¡ 
	gp2
 = 
»š‹½»t_ÿ¡
<*>(
pv2
);

4935 
ASSERT_EQ
(
p1
,…1);

4937 
EXPECT_NONFATAL_FAILURE
(
EXPECT_EQ
(
p0
, 
p2
),

4939 
EXPECT_NONFATAL_FAILURE
(
EXPECT_EQ
(
p1
, 
p2
),

4941 
EXPECT_FATAL_FAILURE
(
ASSERT_EQ
(
»š‹½»t_ÿ¡
<*>(0x1234),

4942 
»š‹½»t_ÿ¡
<*>(0xABC0)),

4947 
TEST
(
EqAs£¹iÚTe¡
, 
WideCh¬Poš‹r
) {

4948 
wch¬_t
* cÚ¡ 
	gp0
 = 
nuÎ±r
;

4953 * 
	gpv1
 = (*)0x1234;

4954 * 
	gpv2
 = (*)0xABC0;

4955 
wch¬_t
* cÚ¡ 
	gp1
 = 
»š‹½»t_ÿ¡
<wch¬_t*>(
pv1
);

4956 
wch¬_t
* cÚ¡ 
	gp2
 = 
»š‹½»t_ÿ¡
<wch¬_t*>(
pv2
);

4957 
EXPECT_EQ
(
p0
,…0);

4959 
EXPECT_NONFATAL_FAILURE
(
EXPECT_EQ
(
p0
, 
p2
),

4961 
EXPECT_NONFATAL_FAILURE
(
EXPECT_EQ
(
p1
, 
p2
),

4963 * 
	gpv3
 = (*)0x1234;

4964 * 
	gpv4
 = (*)0xABC0;

4965 cÚ¡ 
wch¬_t
* 
	gp3
 = 
»š‹½»t_ÿ¡
<cÚ¡ wch¬_t*>(
pv3
);

4966 cÚ¡ 
wch¬_t
* 
	gp4
 = 
»š‹½»t_ÿ¡
<cÚ¡ wch¬_t*>(
pv4
);

4967 
EXPECT_NONFATAL_FAILURE
(
EXPECT_EQ
(
p3
, 
p4
),

4972 
TEST
(
EqAs£¹iÚTe¡
, 
Oth”Poš‹r
) {

4973 
ASSERT_EQ
(
¡©ic_ÿ¡
<cÚ¡ *>(
nuÎ±r
), static_cast<const *>(nullptr));

4974 
EXPECT_FATAL_FAILURE
(
ASSERT_EQ
(
¡©ic_ÿ¡
<cÚ¡ *>(
nuÎ±r
),

4975 
»š‹½»t_ÿ¡
<const *>(0x1234)),

4980 şas 
	cUÅršbËCh¬
 {

4981 
	gpublic
:

4982 
ex¶ic™
 
UÅršbËCh¬
(
ch
è: 
ch¬_
(ch) {}

4984 
boŞ
 
İ”©Ü
==(cÚ¡ 
UÅršbËCh¬
& 
rhs
) const {

4985  
ch¬_
 =ğ
rhs
.char_;

4987 
boŞ
 
	gİ”©Ü
!=(cÚ¡ 
UÅršbËCh¬
& 
rhs
) const {

4988  
ch¬_
 !ğ
rhs
.char_;

4990 
boŞ
 
	gİ”©Ü
<(cÚ¡ 
	gUÅršbËCh¬
& 
	grhs
) const {

4991  
	gch¬_
 < 
	grhs
.char_;

4993 
boŞ
 
	gİ”©Ü
<=(cÚ¡ 
UÅršbËCh¬
& 
rhs
) const {

4994  
ch¬_
 <ğ
rhs
.char_;

4996 
boŞ
 
	gİ”©Ü
>(cÚ¡ 
	gUÅršbËCh¬
& 
	grhs
) const {

4997  
	gch¬_
 > 
	grhs
.char_;

4999 
boŞ
 
	gİ”©Ü
>=(cÚ¡ 
UÅršbËCh¬
& 
rhs
) const {

5000  
ch¬_
 >ğ
rhs
.char_;

5003 
	g´iv©e
:

5004 
ch¬_
;

5009 
	$TEST
(
Com·risÚAs£¹iÚTe¡
, 
Acû±sUÅršbËArgs
) {

5010 cÚ¡ 
UÅršbËCh¬
 
	`x
('x'), 
	`y
('y');

5011 
	`ASSERT_EQ
(
x
, x);

5012 
	`EXPECT_NE
(
x
, 
y
);

5013 
	`ASSERT_LT
(
x
, 
y
);

5014 
	`EXPECT_LE
(
x
, 
y
);

5015 
	`ASSERT_GT
(
y
, 
x
);

5016 
	`EXPECT_GE
(
x
, x);

5018 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_EQ
(
x
, 
y
), "1-byte object <78>");

5019 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_EQ
(
x
, 
y
), "1-byte object <79>");

5020 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_LT
(
y
, y), "1-byte object <79>");

5021 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_GT
(
x
, 
y
), "1-byte object <78>");

5022 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_GT
(
x
, 
y
), "1-byte object <79>");

5026 #iâdeà
__BORLANDC__


5028 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_NE
(
	`UÅršbËCh¬
('x'), UnprintableChar('x')),

5030 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_LE
(
	`UÅršbËCh¬
('y'), UnprintableChar('x')),

5033 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_LE
(
	`UÅršbËCh¬
('y'), UnprintableChar('x')),

5035 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_GE
(
	`UÅršbËCh¬
('x'), UnprintableChar('y')),

5037 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_GE
(
	`UÅršbËCh¬
('x'), UnprintableChar('y')),

5039 
	}
}

5045 şas 
	cFoo
 {

5046 
	gpublic
:

5047 
Foo
() {}

5049 
´iv©e
:

5050 
B¬
() const {  1; }

5054 
FRIEND_TEST
(
FRIEND_TEST_Te¡
, 
TEST
);

5055 
FRIEND_TEST
(
FRIEND_TEST_Te¡2
, 
TEST_F
);

5060 
	$TEST
(
FRIEND_TEST_Te¡
, 
TEST
) {

5061 
	`ASSERT_EQ
(1, 
	`Foo
().
	`B¬
());

5062 
	}
}

5065 şas 
	cFRIEND_TEST_Te¡2
 : 
public
 
Te¡
 {

5066 
´Ùeùed
:

5067 
Foo
 
foo
;

5072 
	$TEST_F
(
FRIEND_TEST_Te¡2
, 
TEST_F
) {

5073 
	`ASSERT_EQ
(1, 
foo
.
	`B¬
());

5074 
	}
}

5082 şas 
	cTe¡LiãCyşeTe¡
 : 
public
 
Te¡
 {

5083 
´Ùeùed
:

5086 
Te¡LiãCyşeTe¡
(è{ 
couÁ_
++; }

5090 ~
Te¡LiãCyşeTe¡
(è
	gov”ride
 { 
	gcouÁ_
--; }

5093 
couÁ
(ècÚ¡ {  
	gcouÁ_
; }

5095 
	g´iv©e
:

5096 
couÁ_
;

5099 
	gTe¡LiãCyşeTe¡
::
couÁ_
 = 0;

5102 
	$TEST_F
(
Te¡LiãCyşeTe¡
, 
Te¡1
) {

5105 
	`ASSERT_EQ
(1, 
	`couÁ
());

5106 
	}
}

5109 
	$TEST_F
(
Te¡LiãCyşeTe¡
, 
Te¡2
) {

5113 
	`ASSERT_EQ
(1, 
	`couÁ
());

5114 
	}
}

5120 
	$TEST
(
As£¹iÚResuÉTe¡
, 
CİyCÚ¡ruùÜWÜksWh’NÙO±im›d
) {

5123 
As£¹iÚResuÉ
 
r1
 = 
	`As£¹iÚSucûss
();

5124 
As£¹iÚResuÉ
 
r2
 = 
r1
;

5127 
r1
 << "abc";

5129 
As£¹iÚResuÉ
 
r3
 = 
r1
;

5130 
	`EXPECT_EQ
(
¡©ic_ÿ¡
<
boŞ
>(
r3
), stic_ÿ¡<boŞ>(
r1
));

5131 
	`EXPECT_STREQ
("abc", 
r1
.
	`mes§ge
());

5132 
	}
}

5136 
	$TEST
(
As£¹iÚResuÉTe¡
, 
CÚ¡ruùiÚWÜks
) {

5137 
As£¹iÚResuÉ
 
r1
 = 
	`As£¹iÚSucûss
();

5138 
	`EXPECT_TRUE
(
r1
);

5139 
	`EXPECT_STREQ
("", 
r1
.
	`mes§ge
());

5141 
As£¹iÚResuÉ
 
r2
 = 
	`As£¹iÚSucûss
() << "abc";

5142 
	`EXPECT_TRUE
(
r2
);

5143 
	`EXPECT_STREQ
("abc", 
r2
.
	`mes§ge
());

5145 
As£¹iÚResuÉ
 
r3
 = 
	`As£¹iÚFau»
();

5146 
	`EXPECT_FALSE
(
r3
);

5147 
	`EXPECT_STREQ
("", 
r3
.
	`mes§ge
());

5149 
As£¹iÚResuÉ
 
r4
 = 
	`As£¹iÚFau»
() << "def";

5150 
	`EXPECT_FALSE
(
r4
);

5151 
	`EXPECT_STREQ
("def", 
r4
.
	`mes§ge
());

5153 
As£¹iÚResuÉ
 
r5
 = 
	`As£¹iÚFau»
(
	`Mes§ge
() << "ghi");

5154 
	`EXPECT_FALSE
(
r5
);

5155 
	`EXPECT_STREQ
("ghi", 
r5
.
	`mes§ge
());

5156 
	}
}

5159 
	$TEST
(
As£¹iÚResuÉTe¡
, 
Neg©iÚWÜks
) {

5160 
As£¹iÚResuÉ
 
r1
 = 
	`As£¹iÚSucûss
() << "abc";

5161 
	`EXPECT_FALSE
(!
r1
);

5162 
	`EXPECT_STREQ
("abc", (!
r1
).
	`mes§ge
());

5164 
As£¹iÚResuÉ
 
r2
 = 
	`As£¹iÚFau»
() << "def";

5165 
	`EXPECT_TRUE
(!
r2
);

5166 
	`EXPECT_STREQ
("def", (!
r2
).
	`mes§ge
());

5167 
	}
}

5169 
	$TEST
(
As£¹iÚResuÉTe¡
, 
SŒ—mšgWÜks
) {

5170 
As£¹iÚResuÉ
 
r
 = 
	`As£¹iÚSucûss
();

5171 
r
 << "abc" << 'd' << 0 << 
Œue
;

5172 
	`EXPECT_STREQ
("abcd0Œue", 
r
.
	`mes§ge
());

5173 
	}
}

5175 
	$TEST
(
As£¹iÚResuÉTe¡
, 
CªSŒ—mO¡»amMªuÏtÜs
) {

5176 
As£¹iÚResuÉ
 
r
 = 
	`As£¹iÚSucûss
();

5177 
r
 << "D©a" << 
¡d
::
’dl
 << std::
æush
 << std::
’ds
 << "Will be visible";

5178 
	`EXPECT_STREQ
("D©a\n\\0WÈbvisibË", 
r
.
	`mes§ge
());

5179 
	}
}

5183 
	$TEST
(
As£¹iÚResuÉTe¡
, 
CÚ¡ruùibËFromCÚ‹xtu®lyCÚv”tibËToBoŞ
) {

5184 
	sEx¶ic™lyCÚv”tibËToBoŞ
 {

5185 
ex¶ic™
 
İ”©Ü
 
	`boŞ
(ècÚ¡ {  
v®ue
; }

5186 
boŞ
 
v®ue
;

5188 
Ex¶ic™lyCÚv”tibËToBoŞ
 
v1
 = {
çl£
};

5189 
Ex¶ic™lyCÚv”tibËToBoŞ
 
v2
 = {
Œue
};

5190 
	`EXPECT_FALSE
(
v1
);

5191 
	`EXPECT_TRUE
(
v2
);

5192 
	}
}

5194 
	sCÚv”tibËToAs£¹iÚResuÉ
 {

5195 
İ”©Ü
 
As£¹iÚResuÉ
(ècÚ¡ {  As£¹iÚResuÉ(
Œue
); }

5198 
	$TEST
(
As£¹iÚResuÉTe¡
, 
CÚ¡ruùibËFromIm¶ic™lyCÚv”tibË
) {

5199 
CÚv”tibËToAs£¹iÚResuÉ
 
obj
;

5200 
	`EXPECT_TRUE
(
obj
);

5201 
	}
}

5205 şas 
	cBa£
 {

5206 
	mpublic
:

5207 
ex¶ic™
 
	$Ba£
(
ª_x
è: 
	$x_
(
ª_x
) {}

5208 
	$x
(ècÚ¡ {  
x_
; 
	}
}

5209 
	g´iv©e
:

5210 
x_
;

5212 
	g¡d
::
o¡»am
& 
İ”©Ü
<<(
¡d
::o¡»am& 
os
,

5213 cÚ¡ 
	gBa£
& 
	gv®
) {

5214  
	gos
 << 
	gv®
.
x
();

5216 
	g¡d
::
o¡»am
& 
İ”©Ü
<<(
¡d
::o¡»am& 
os
,

5217 cÚ¡ 
Ba£
* 
	gpoš‹r
) {

5218  
	gos
 << "(" << 
	gpoš‹r
->
x
() << ")";

5221 
	$TEST
(
Mes§geTe¡
, 
CªSŒ—mU£rTy³InGlob®NameS·û
) {

5222 
Mes§ge
 
msg
;

5223 
Ba£
 
	`a
(1);

5225 
msg
 << 
a
 << &a;

5226 
	`EXPECT_STREQ
("1(1)", 
msg
.
	`G‘SŒšg
().
	`c_¡r
());

5227 
	}
}

5231 
	gÇme¥aû
 {

5232 şas 
	cMyTy³InUÂamedNameS·û
 : 
public
 
Ba£
 {

5233 
public
:

5234 
ex¶ic™
 
MyTy³InUÂamedNameS·û
(
ª_x
): 
Ba£
(an_x) {}

5236 
	g¡d
::
o¡»am
& 
İ”©Ü
<<(
¡d
::o¡»am& 
os
,

5237 cÚ¡ 
	gMyTy³InUÂamedNameS·û
& 
	gv®
) {

5238  
	gos
 << 
	gv®
.
x
();

5240 
	g¡d
::
o¡»am
& 
İ”©Ü
<<(
¡d
::o¡»am& 
os
,

5241 cÚ¡ 
MyTy³InUÂamedNameS·û
* 
	gpoš‹r
) {

5242  
	gos
 << "(" << 
	gpoš‹r
->
x
() << ")";

5246 
	$TEST
(
Mes§geTe¡
, 
CªSŒ—mU£rTy³InUÂamedNameS·û
) {

5247 
Mes§ge
 
msg
;

5248 
MyTy³InUÂamedNameS·û
 
	`a
(1);

5250 
msg
 << 
a
 << &a;

5251 
	`EXPECT_STREQ
("1(1)", 
msg
.
	`G‘SŒšg
().
	`c_¡r
());

5252 
	}
}

5256 
Çme¥aû
 
	gÇme¥aû1
 {

5257 şas 
	cMyTy³InNameS·û1
 : 
public
 
Ba£
 {

5258 
public
:

5259 
ex¶ic™
 
MyTy³InNameS·û1
(
ª_x
): 
Ba£
(an_x) {}

5261 
	g¡d
::
o¡»am
& 
İ”©Ü
<<(
¡d
::o¡»am& 
os
,

5262 cÚ¡ 
	gMyTy³InNameS·û1
& 
	gv®
) {

5263  
	gos
 << 
	gv®
.
x
();

5265 
	g¡d
::
o¡»am
& 
İ”©Ü
<<(
¡d
::o¡»am& 
os
,

5266 cÚ¡ 
MyTy³InNameS·û1
* 
	gpoš‹r
) {

5267  
	gos
 << "(" << 
	gpoš‹r
->
x
() << ")";

5271 
	$TEST
(
Mes§geTe¡
, 
CªSŒ—mU£rTy³InU£rNameS·û
) {

5272 
Mes§ge
 
msg
;

5273 
Çme¥aû1
::
MyTy³InNameS·û1
 
	`a
(1);

5275 
msg
 << 
a
 << &a;

5276 
	`EXPECT_STREQ
("1(1)", 
msg
.
	`G‘SŒšg
().
	`c_¡r
());

5277 
	}
}

5281 
Çme¥aû
 
	gÇme¥aû2
 {

5282 şas 
	cMyTy³InNameS·û2
 : 
public
 ::
Ba£
 {

5283 
public
:

5284 
ex¶ic™
 
MyTy³InNameS·û2
(
ª_x
): 
Ba£
(an_x) {}

5287 
	g¡d
::
o¡»am
& 
İ”©Ü
<<(
¡d
::o¡»am& 
os
,

5288 cÚ¡ 
	gÇme¥aû2
::
MyTy³InNameS·û2
& 
v®
) {

5289  
os
 << 
v®
.
x
();

5291 
	g¡d
::
o¡»am
& 
İ”©Ü
<<(
¡d
::o¡»am& 
os
,

5292 cÚ¡ 
	gÇme¥aû2
::
MyTy³InNameS·û2
* 
poš‹r
) {

5293  
os
 << "(" << 
poš‹r
->
x
() << ")";

5296 
	$TEST
(
Mes§geTe¡
, 
CªSŒ—mU£rTy³InU£rNameS·ûW™hSŒ—mO³¿tÜInGlob®
) {

5297 
Mes§ge
 
msg
;

5298 
Çme¥aû2
::
MyTy³InNameS·û2
 
	`a
(1);

5300 
msg
 << 
a
 << &a;

5301 
	`EXPECT_STREQ
("1(1)", 
msg
.
	`G‘SŒšg
().
	`c_¡r
());

5302 
	}
}

5305 
	$TEST
(
Mes§geTe¡
, 
NuÎPoš‹rs
) {

5306 
Mes§ge
 
msg
;

5307 * cÚ¡ 
p1
 = 
nuÎ±r
;

5308 * cÚ¡ 
p2
 = 
nuÎ±r
;

5309 * 
p3
 = 
nuÎ±r
;

5310 * 
p4
 = 
nuÎ±r
;

5311 
boŞ
* 
p5
 = 
nuÎ±r
;

5312 
Mes§ge
* 
p6
 = 
nuÎ±r
;

5314 
msg
 << 
p1
 << 
p2
 << 
p3
 << 
p4
 << 
p5
 << 
p6
;

5315 
	`ASSERT_STREQ
("(null)(null)(null)(null)(null)(null)",

5316 
msg
.
	`G‘SŒšg
().
	`c_¡r
());

5317 
	}
}

5320 
	$TEST
(
Mes§geTe¡
, 
WideSŒšgs
) {

5322 cÚ¡ 
wch¬_t
* 
cÚ¡_w¡r
 = 
nuÎ±r
;

5323 
	`EXPECT_STREQ
("(null)",

5324 (
	`Mes§ge
(è<< 
cÚ¡_w¡r
).
	`G‘SŒšg
().
	`c_¡r
());

5327 
wch¬_t
* 
w¡r
 = 
nuÎ±r
;

5328 
	`EXPECT_STREQ
("(null)",

5329 (
	`Mes§ge
(è<< 
w¡r
).
	`G‘SŒšg
().
	`c_¡r
());

5332 
cÚ¡_w¡r
 = 
L
"abc\x8119";

5333 
	`EXPECT_STREQ
("abc\xe8\x84\x99",

5334 (
	`Mes§ge
(è<< 
cÚ¡_w¡r
).
	`G‘SŒšg
().
	`c_¡r
());

5337 
w¡r
 = 
cÚ¡_ÿ¡
<
wch¬_t
*>(
cÚ¡_w¡r
);

5338 
	`EXPECT_STREQ
("abc\xe8\x84\x99",

5339 (
	`Mes§ge
(è<< 
w¡r
).
	`G‘SŒšg
().
	`c_¡r
());

5340 
	}
}

5344 
Çme¥aû
 
	g‹¡šg
 {

5348 şas 
	cTe¡InfoTe¡
 : 
public
 
Te¡
 {

5349 
´Ùeùed
:

5350 cÚ¡ 
Te¡Info
* 
G‘Te¡Info
(cÚ¡ * 
‹¡_Çme
) {

5351 cÚ¡ 
Te¡Su™e
* cÚ¡ 
‹¡_su™e
 =

5352 
G‘Un™Te¡Im¶
()->
G‘Te¡Su™e
("Te¡InfoTe¡", "", 
nuÎ±r
,‚ullptr);

5354 
	gi
 = 0; i < 
	g‹¡_su™e
->
tÙ®_‹¡_couÁ
(); ++i) {

5355 cÚ¡ 
Te¡Info
* cÚ¡ 
	g‹¡_šfo
 = 
‹¡_su™e
->
G‘Te¡Info
(
i
);

5356 ià(
¡rcmp
(
‹¡_Çme
, 
‹¡_šfo
->
Çme
()) == 0)

5357  
‹¡_šfo
;

5359  
	gnuÎ±r
;

5362 cÚ¡ 
Te¡ResuÉ
* 
G‘Te¡ResuÉ
(

5363 cÚ¡ 
Te¡Info
* 
‹¡_šfo
) {

5364  
	g‹¡_šfo
->
»suÉ
();

5369 
	$TEST_F
(
Te¡InfoTe¡
, 
Names
) {

5370 cÚ¡ 
Te¡Info
* cÚ¡ 
‹¡_šfo
 = 
	`G‘Te¡Info
("Names");

5372 
	`ASSERT_STREQ
("Te¡InfoTe¡", 
‹¡_šfo
->
	`‹¡_su™e_Çme
());

5373 
	`ASSERT_STREQ
("Names", 
‹¡_šfo
->
	`Çme
());

5374 
	}
}

5377 
	$TEST_F
(
Te¡InfoTe¡
, 
»suÉ
) {

5378 cÚ¡ 
Te¡Info
* cÚ¡ 
‹¡_šfo
 = 
	`G‘Te¡Info
("result");

5381 
	`ASSERT_EQ
(0, 
	`G‘Te¡ResuÉ
(
‹¡_šfo
)->
	`tÙ®_·¹_couÁ
());

5384 
	`ASSERT_EQ
(0, 
	`G‘Te¡ResuÉ
(
‹¡_šfo
)->
	`tÙ®_·¹_couÁ
());

5385 
	}
}

5387 
	#VERIFY_CODE_LOCATION
 \

5388 cÚ¡ 
ex³ùed_lše
 = 
__LINE__
 - 1; \

5389 cÚ¡ 
Te¡Info
* cÚ¡ 
‹¡_šfo
 = 
	`G‘Un™Te¡Im¶
()->
	`cu¼’t_‹¡_šfo
(); \

5390 
	`ASSERT_TRUE
(
‹¡_šfo
); \

5391 
	`EXPECT_STREQ
(
__FILE__
, 
‹¡_šfo
->
	`fe
()); \

5392 
	`EXPECT_EQ
(
ex³ùed_lše
, 
‹¡_šfo
->
	$lše
())

	)

5394 
	$TEST
(
CodeLoÿtiÚFÜTEST
, 
V”ify
) {

5395 
VERIFY_CODE_LOCATION
;

5396 
	}
}

5398 şas 
	cCodeLoÿtiÚFÜTESTF
 : 
public
 
Te¡
 {

5401 
	$TEST_F
(
CodeLoÿtiÚFÜTESTF
, 
V”ify
) {

5402 
VERIFY_CODE_LOCATION
;

5403 
	}
}

5405 
şass
 
	gCodeLoÿtiÚFÜTESTP
 : 
public
 
Te¡W™hP¬am
<> {

5408 
	$TEST_P
(
CodeLoÿtiÚFÜTESTP
, 
V”ify
) {

5409 
VERIFY_CODE_LOCATION
;

5410 
	}
}

5412 
INSTANTIATE_TEST_SUITE_P
(, 
CodeLoÿtiÚFÜTESTP
, 
V®ues
(0));

5414 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

5415 şas 
	cCodeLoÿtiÚFÜTYPEDTEST
 : 
public
 
Te¡
 {

5418 
TYPED_TEST_SUITE
(
CodeLoÿtiÚFÜTYPEDTEST
, );

5420 
	$TYPED_TEST
(
CodeLoÿtiÚFÜTYPEDTEST
, 
V”ify
) {

5421 
VERIFY_CODE_LOCATION
;

5422 
	}
}

5424 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

5425 şas 
	cCodeLoÿtiÚFÜTYPEDTESTP
 : 
public
 
Te¡
 {

5428 
TYPED_TEST_SUITE_P
(
CodeLoÿtiÚFÜTYPEDTESTP
);

5430 
	$TYPED_TEST_P
(
CodeLoÿtiÚFÜTYPEDTESTP
, 
V”ify
) {

5431 
VERIFY_CODE_LOCATION
;

5432 
	}
}

5434 
REGISTER_TYPED_TEST_SUITE_P
(
CodeLoÿtiÚFÜTYPEDTESTP
, 
V”ify
);

5436 
INSTANTIATE_TYPED_TEST_SUITE_P
(
My
, 
CodeLoÿtiÚFÜTYPEDTESTP
, );

5438 #undeà
VERIFY_CODE_LOCATION


5442 #iâdeà
GTEST_REMOVE_LEGACY_TEST_CASEAPI_


5443 şas 
	cS‘UpTe¡Ca£Te¡
 : 
public
 
Te¡
 {

5444 
´Ùeùed
:

5447 
S‘UpTe¡Ca£
() {

5448 
´štf
("Setting upheest case . . .\n");

5453 
	gsh¬ed_»sourû_
 = "123";

5456 
	gcouÁ”_
++;

5459 
EXPECT_EQ
(1, 
couÁ”_
);

5464 
T—rDownTe¡Ca£
() {

5465 
´štf
("Tearing downheest case . . .\n");

5468 
	gcouÁ”_
--;

5471 
EXPECT_EQ
(0, 
couÁ”_
);

5474 
	gsh¬ed_»sourû_
 = 
nuÎ±r
;

5478 
S‘Up
(è
	gov”ride
 {

5481 
EXPECT_EQ
(1, 
couÁ”_
);

5485 
	gcouÁ”_
;

5488 cÚ¡ * 
	gsh¬ed_»sourû_
;

5491 
	gS‘UpTe¡Ca£Te¡
::
couÁ”_
 = 0;

5492 cÚ¡ * 
	gS‘UpTe¡Ca£Te¡
::
sh¬ed_»sourû_
 = 
nuÎ±r
;

5495 
	$TEST_F
(
S‘UpTe¡Ca£Te¡
, 
Te¡1
è{ 
	`EXPECT_STRNE
(
nuÎ±r
, 
sh¬ed_»sourû_
); 
	}
}

5498 
	$TEST_F
(
S‘UpTe¡Ca£Te¡
, 
Te¡2
) {

5499 
	`EXPECT_STREQ
("123", 
sh¬ed_»sourû_
);

5500 
	}
}

5504 şas 
	cS‘UpTe¡Su™eTe¡
 : 
public
 
Te¡
 {

5505 
´Ùeùed
:

5508 
S‘UpTe¡Su™e
() {

5509 
´štf
("Setting upheest suite . . .\n");

5514 
	gsh¬ed_»sourû_
 = "123";

5517 
	gcouÁ”_
++;

5520 
EXPECT_EQ
(1, 
couÁ”_
);

5525 
T—rDownTe¡Su™e
() {

5526 
´štf
("Tearing downheest suite . . .\n");

5529 
	gcouÁ”_
--;

5532 
EXPECT_EQ
(0, 
couÁ”_
);

5535 
	gsh¬ed_»sourû_
 = 
nuÎ±r
;

5539 
S‘Up
(è
	gov”ride
 {

5542 
EXPECT_EQ
(1, 
couÁ”_
);

5546 
	gcouÁ”_
;

5549 cÚ¡ * 
	gsh¬ed_»sourû_
;

5552 
	gS‘UpTe¡Su™eTe¡
::
couÁ”_
 = 0;

5553 cÚ¡ * 
	gS‘UpTe¡Su™eTe¡
::
sh¬ed_»sourû_
 = 
nuÎ±r
;

5556 
	$TEST_F
(
S‘UpTe¡Su™eTe¡
, 
Te¡S‘upTe¡Su™e1
) {

5557 
	`EXPECT_STRNE
(
nuÎ±r
, 
sh¬ed_»sourû_
);

5558 
	}
}

5561 
	$TEST_F
(
S‘UpTe¡Su™eTe¡
, 
Te¡S‘upTe¡Su™e2
) {

5562 
	`EXPECT_STREQ
("123", 
sh¬ed_»sourû_
);

5563 
	}
}

5568 
	sFÏgs
 {

5570 
FÏgs
()

5571 : 
®so_run_di§bËd_‹¡s
(
çl£
),

5572 
b»ak_Ú_çu»
(
çl£
),

5573 
ÿtch_exû±iÚs
(
çl£
),

5574 
d—th_‹¡_u£_fÜk
(
çl£
),

5575 
ç_ç¡
(
çl£
),

5576 
f‹r
(""),

5577 
li¡_‹¡s
(
çl£
),

5578 
ouut
(""),

5579 
br›f
(
çl£
),

5580 
´št_time
(
Œue
),

5581 
¿ndom_£ed
(0),

5582 
»³©
(1),

5583 
shufæe
(
çl£
),

5584 
¡ack_Œaû_d•th
(
kMaxSckT¿ûD•th
),

5585 
¡»am_»suÉ_to
(""),

5586 
throw_Ú_çu»
(
çl£
) {}

5592 
FÏgs
 
AlsoRunDi§bËdTe¡s
(
boŞ
 
®so_run_di§bËd_‹¡s
) {

5593 
FÏgs
 
	gæags
;

5594 
	gæags
.
	g®so_run_di§bËd_‹¡s
 = 
®so_run_di§bËd_‹¡s
;

5595  
	gæags
;

5600 
FÏgs
 
B»akOnFau»
(
boŞ
 
b»ak_Ú_çu»
) {

5601 
FÏgs
 
	gæags
;

5602 
	gæags
.
	gb»ak_Ú_çu»
 = 
b»ak_Ú_çu»
;

5603  
	gæags
;

5608 
FÏgs
 
C©chExû±iÚs
(
boŞ
 
ÿtch_exû±iÚs
) {

5609 
FÏgs
 
	gæags
;

5610 
	gæags
.
	gÿtch_exû±iÚs
 = 
ÿtch_exû±iÚs
;

5611  
	gæags
;

5616 
FÏgs
 
D—thTe¡U£FÜk
(
boŞ
 
d—th_‹¡_u£_fÜk
) {

5617 
FÏgs
 
	gæags
;

5618 
	gæags
.
	gd—th_‹¡_u£_fÜk
 = 
d—th_‹¡_u£_fÜk
;

5619  
	gæags
;

5624 
FÏgs
 
FaFa¡
(
boŞ
 
ç_ç¡
) {

5625 
FÏgs
 
	gæags
;

5626 
	gæags
.
	gç_ç¡
 = 
ç_ç¡
;

5627  
	gæags
;

5632 
FÏgs
 
F‹r
(cÚ¡ * 
f‹r
) {

5633 
FÏgs
 
	gæags
;

5634 
	gæags
.
	gf‹r
 = 
f‹r
;

5635  
	gæags
;

5640 
FÏgs
 
Li¡Te¡s
(
boŞ
 
li¡_‹¡s
) {

5641 
FÏgs
 
	gæags
;

5642 
	gæags
.
	gli¡_‹¡s
 = 
li¡_‹¡s
;

5643  
	gæags
;

5648 
FÏgs
 
Ouut
(cÚ¡ * 
ouut
) {

5649 
FÏgs
 
	gæags
;

5650 
	gæags
.
	gouut
 = 
ouut
;

5651  
	gæags
;

5656 
FÏgs
 
Br›f
(
boŞ
 
br›f
) {

5657 
FÏgs
 
	gæags
;

5658 
	gæags
.
	gbr›f
 = 
br›f
;

5659  
	gæags
;

5664 
FÏgs
 
PrštTime
(
boŞ
 
´št_time
) {

5665 
FÏgs
 
	gæags
;

5666 
	gæags
.
	g´št_time
 = 
´št_time
;

5667  
	gæags
;

5672 
FÏgs
 
RªdomS“d
(
št32_t
 
¿ndom_£ed
) {

5673 
FÏgs
 
	gæags
;

5674 
	gæags
.
	g¿ndom_£ed
 = 
¿ndom_£ed
;

5675  
	gæags
;

5680 
FÏgs
 
R•—t
(
št32_t
 
»³©
) {

5681 
FÏgs
 
	gæags
;

5682 
	gæags
.
	g»³©
 = 
»³©
;

5683  
	gæags
;

5688 
FÏgs
 
Shufæe
(
boŞ
 
shufæe
) {

5689 
FÏgs
 
	gæags
;

5690 
	gæags
.
	gshufæe
 = 
shufæe
;

5691  
	gæags
;

5696 
FÏgs
 
SckT¿ûD•th
(
št32_t
 
¡ack_Œaû_d•th
) {

5697 
FÏgs
 
	gæags
;

5698 
	gæags
.
	g¡ack_Œaû_d•th
 = 
¡ack_Œaû_d•th
;

5699  
	gæags
;

5704 
FÏgs
 
SŒ—mResuÉTo
(cÚ¡ * 
¡»am_»suÉ_to
) {

5705 
FÏgs
 
	gæags
;

5706 
	gæags
.
	g¡»am_»suÉ_to
 = 
¡»am_»suÉ_to
;

5707  
	gæags
;

5712 
FÏgs
 
ThrowOnFau»
(
boŞ
 
throw_Ú_çu»
) {

5713 
FÏgs
 
	gæags
;

5714 
	gæags
.
	gthrow_Ú_çu»
 = 
throw_Ú_çu»
;

5715  
	gæags
;

5719 
boŞ
 
	g®so_run_di§bËd_‹¡s
;

5720 
boŞ
 
	gb»ak_Ú_çu»
;

5721 
boŞ
 
	gÿtch_exû±iÚs
;

5722 
boŞ
 
	gd—th_‹¡_u£_fÜk
;

5723 
boŞ
 
	gç_ç¡
;

5724 cÚ¡ * 
	gf‹r
;

5725 
boŞ
 
	gli¡_‹¡s
;

5726 cÚ¡ * 
	gouut
;

5727 
boŞ
 
	gbr›f
;

5728 
boŞ
 
	g´št_time
;

5729 
št32_t
 
	g¿ndom_£ed
;

5730 
št32_t
 
	g»³©
;

5731 
boŞ
 
	gshufæe
;

5732 
št32_t
 
	g¡ack_Œaû_d•th
;

5733 cÚ¡ * 
	g¡»am_»suÉ_to
;

5734 
boŞ
 
	gthrow_Ú_çu»
;

5738 şas 
	cP¬£FÏgsTe¡
 : 
public
 
Te¡
 {

5739 
´Ùeùed
:

5741 
S‘Up
(è
ov”ride
 {

5742 
GTEST_FLAG
(
®so_run_di§bËd_‹¡s
èğ
çl£
;

5743 
GTEST_FLAG
(
b»ak_Ú_çu»
èğ
çl£
;

5744 
GTEST_FLAG
(
ÿtch_exû±iÚs
èğ
çl£
;

5745 
GTEST_FLAG
(
d—th_‹¡_u£_fÜk
èğ
çl£
;

5746 
GTEST_FLAG
(
ç_ç¡
èğ
çl£
;

5747 
GTEST_FLAG
(
f‹r
) = "";

5748 
GTEST_FLAG
(
li¡_‹¡s
èğ
çl£
;

5749 
GTEST_FLAG
(
ouut
) = "";

5750 
GTEST_FLAG
(
br›f
èğ
çl£
;

5751 
GTEST_FLAG
(
´št_time
èğ
Œue
;

5752 
GTEST_FLAG
(
¿ndom_£ed
) = 0;

5753 
GTEST_FLAG
(
»³©
) = 1;

5754 
GTEST_FLAG
(
shufæe
èğ
çl£
;

5755 
GTEST_FLAG
(
¡ack_Œaû_d•th
èğ
kMaxSckT¿ûD•th
;

5756 
GTEST_FLAG
(
¡»am_»suÉ_to
) = "";

5757 
GTEST_FLAG
(
throw_Ú_çu»
èğ
çl£
;

5761 
	g‹m¶©e
 <
ty³Çme
 
	gCh¬Ty³
>

5762 
As£¹SŒšgA¼ayEq
(
size1
, 
Ch¬Ty³
** 
¬¿y1
, 
size2
,

5763 
Ch¬Ty³
** 
¬¿y2
) {

5764 
ASSERT_EQ
(
size1
, 
size2
) << " Array sizes different.";

5766 
	gi
 = 0; i !ğ
size1
; i++) {

5767 
ASSERT_STREQ
(
¬¿y1
[
i
], 
¬¿y2
[i]è<< " wh”˜=ğ" << 
	gi
;

5772 
CheckFÏgs
(cÚ¡ 
FÏgs
& 
ex³ùed
) {

5773 
EXPECT_EQ
(
ex³ùed
.
®so_run_di§bËd_‹¡s
,

5774 
GTEST_FLAG
(
®so_run_di§bËd_‹¡s
));

5775 
EXPECT_EQ
(
ex³ùed
.
b»ak_Ú_çu»
, 
GTEST_FLAG
(break_on_failure));

5776 
EXPECT_EQ
(
ex³ùed
.
ÿtch_exû±iÚs
, 
GTEST_FLAG
(catch_exceptions));

5777 
EXPECT_EQ
(
ex³ùed
.
d—th_‹¡_u£_fÜk
, 
GTEST_FLAG
(death_test_use_fork));

5778 
EXPECT_EQ
(
ex³ùed
.
ç_ç¡
, 
GTEST_FLAG
(fail_fast));

5779 
EXPECT_STREQ
(
ex³ùed
.
f‹r
, 
GTEST_FLAG
(f‹r).
c_¡r
());

5780 
EXPECT_EQ
(
ex³ùed
.
li¡_‹¡s
, 
GTEST_FLAG
(list_tests));

5781 
EXPECT_STREQ
(
ex³ùed
.
ouut
, 
GTEST_FLAG
(ouut).
c_¡r
());

5782 
EXPECT_EQ
(
ex³ùed
.
br›f
, 
GTEST_FLAG
(brief));

5783 
EXPECT_EQ
(
ex³ùed
.
´št_time
, 
GTEST_FLAG
(print_time));

5784 
EXPECT_EQ
(
ex³ùed
.
¿ndom_£ed
, 
GTEST_FLAG
(random_seed));

5785 
EXPECT_EQ
(
ex³ùed
.
»³©
, 
GTEST_FLAG
(repeat));

5786 
EXPECT_EQ
(
ex³ùed
.
shufæe
, 
GTEST_FLAG
(shuffle));

5787 
EXPECT_EQ
(
ex³ùed
.
¡ack_Œaû_d•th
, 
GTEST_FLAG
(stack_trace_depth));

5788 
EXPECT_STREQ
(
ex³ùed
.
¡»am_»suÉ_to
,

5789 
GTEST_FLAG
(
¡»am_»suÉ_to
).
c_¡r
());

5790 
EXPECT_EQ
(
ex³ùed
.
throw_Ú_çu»
, 
GTEST_FLAG
(throw_on_failure));

5796 
	g‹m¶©e
 <
ty³Çme
 
	gCh¬Ty³
>

5797 
Te¡P¬sšgFÏgs
(
¬gc1
, cÚ¡ 
Ch¬Ty³
** 
¬gv1
,

5798 
¬gc2
, cÚ¡ 
Ch¬Ty³
** 
¬gv2
,

5799 cÚ¡ 
FÏgs
& 
ex³ùed
, 
boŞ
 
should_´št_h–p
) {

5800 cÚ¡ 
boŞ
 
	g§ved_h–p_æag
 = ::
‹¡šg
::
š‹º®
::
g_h–p_æag
;

5801 ::
‹¡šg
::
š‹º®
::
g_h–p_æag
 = 
çl£
;

5803 #ià
GTEST_HAS_STREAM_REDIRECTION


5804 
C­tu»Stdout
();

5808 
	gš‹º®
::
P¬£GoogËTe¡FÏgsOÆy
(&
¬gc1
, 
cÚ¡_ÿ¡
<
Ch¬Ty³
**>(
¬gv1
));

5810 #ià
GTEST_HAS_STREAM_REDIRECTION


5811 cÚ¡ 
	g¡d
::
¡ršg
 
ÿ±u»d_¡dout
 = 
G‘C­tu»dStdout
();

5815 
CheckFÏgs
(
ex³ùed
);

5819 
As£¹SŒšgA¼ayEq
(
¬gc1
 + 1, 
¬gv1
, 
¬gc2
 + 1, 
¬gv2
);

5823 
EXPECT_EQ
(
should_´št_h–p
, ::
‹¡šg
::
š‹º®
::
g_h–p_æag
);

5825 #ià
GTEST_HAS_STREAM_REDIRECTION


5826 cÚ¡ * cÚ¡ 
	gex³ùed_h–p_äagm’t
 =

5828 ià(
	gshould_´št_h–p
) {

5829 
EXPECT_PRED_FORMAT2
(
IsSub¡ršg
, 
ex³ùed_h–p_äagm’t
, 
ÿ±u»d_¡dout
);

5831 
EXPECT_PRED_FORMAT2
(
IsNÙSub¡ršg
,

5832 
ex³ùed_h–p_äagm’t
, 
ÿ±u»d_¡dout
);

5836 ::
‹¡šg
::
š‹º®
::
g_h–p_æag
 = 
§ved_h–p_æag
;

5842 
	#GTEST_TEST_PARSING_FLAGS_
(
¬gv1
, 
¬gv2
, 
ex³ùed
, 
should_´št_h–p
) \

5843 
	`Te¡P¬sšgFÏgs
((
¬gv1
)/(*argv1) - 1,‡rgv1, \

5844 (
¬gv2
)/(*argv2) - 1,‡rgv2, \

5845 
ex³ùed
, 
should_´št_h–p
)

	)

5849 
	$TEST_F
(
P¬£FÏgsTe¡
, 
Em±y
) {

5850 cÚ¡ * 
¬gv
[] = {
nuÎ±r
};

5852 cÚ¡ * 
¬gv2
[] = {
nuÎ±r
};

5854 
	`GTEST_TEST_PARSING_FLAGS_
(
¬gv
, 
¬gv2
, 
	`FÏgs
(), 
çl£
);

5855 
	}
}

5858 
	$TEST_F
(
P¬£FÏgsTe¡
, 
NoFÏg
) {

5859 cÚ¡ * 
¬gv
[] = {"foo.exe", 
nuÎ±r
};

5861 cÚ¡ * 
¬gv2
[] = {"foo.exe", 
nuÎ±r
};

5863 
	`GTEST_TEST_PARSING_FLAGS_
(
¬gv
, 
¬gv2
, 
	`FÏgs
(), 
çl£
);

5864 
	}
}

5867 
	$TEST_F
(
P¬£FÏgsTe¡
, 
FaFa¡
) {

5868 cÚ¡ * 
¬gv
[] = {"foo.exe", "--g‹¡_ç_ç¡", 
nuÎ±r
};

5870 cÚ¡ * 
¬gv2
[] = {"foo.exe", 
nuÎ±r
};

5872 
	`GTEST_TEST_PARSING_FLAGS_
(
¬gv
, 
¬gv2
, 
FÏgs
::
	`FaFa¡
(
Œue
), 
çl£
);

5873 
	}
}

5876 
	$TEST_F
(
P¬£FÏgsTe¡
, 
F‹rBad
) {

5877 cÚ¡ * 
¬gv
[] = {"foo.exe", "--g‹¡_f‹r", 
nuÎ±r
};

5879 cÚ¡ * 
¬gv2
[] = {"foo.exe", "--g‹¡_f‹r", 
nuÎ±r
};

5881 
	`GTEST_TEST_PARSING_FLAGS_
(
¬gv
, 
¬gv2
, 
FÏgs
::
	`F‹r
(""), 
Œue
);

5882 
	}
}

5885 
	$TEST_F
(
P¬£FÏgsTe¡
, 
F‹rEm±y
) {

5886 cÚ¡ * 
¬gv
[] = {"foo.exe", "--g‹¡_f‹r=", 
nuÎ±r
};

5888 cÚ¡ * 
¬gv2
[] = {"foo.exe", 
nuÎ±r
};

5890 
	`GTEST_TEST_PARSING_FLAGS_
(
¬gv
, 
¬gv2
, 
FÏgs
::
	`F‹r
(""), 
çl£
);

5891 
	}
}

5894 
	$TEST_F
(
P¬£FÏgsTe¡
, 
F‹rNÚEm±y
) {

5895 cÚ¡ * 
¬gv
[] = {"foo.exe", "--g‹¡_f‹r÷bc", 
nuÎ±r
};

5897 cÚ¡ * 
¬gv2
[] = {"foo.exe", 
nuÎ±r
};

5899 
	`GTEST_TEST_PARSING_FLAGS_
(
¬gv
, 
¬gv2
, 
FÏgs
::
	`F‹r
("abc"), 
çl£
);

5900 
	}
}

5903 
	$TEST_F
(
P¬£FÏgsTe¡
, 
B»akOnFau»W™houtV®ue
) {

5904 cÚ¡ * 
¬gv
[] = {"foo.exe", "--g‹¡_b»ak_Ú_çu»", 
nuÎ±r
};

5906 cÚ¡ * 
¬gv2
[] = {"foo.exe", 
nuÎ±r
};

5908 
	`GTEST_TEST_PARSING_FLAGS_
(
¬gv
, 
¬gv2
, 
FÏgs
::
	`B»akOnFau»
(
Œue
), 
çl£
);

5909 
	}
}

5912 
	$TEST_F
(
P¬£FÏgsTe¡
, 
B»akOnFau»F®£_0
) {

5913 cÚ¡ * 
¬gv
[] = {"foo.exe", "--g‹¡_b»ak_Ú_çu»=0", 
nuÎ±r
};

5915 cÚ¡ * 
¬gv2
[] = {"foo.exe", 
nuÎ±r
};

5917 
	`GTEST_TEST_PARSING_FLAGS_
(
¬gv
, 
¬gv2
, 
FÏgs
::
	`B»akOnFau»
(
çl£
), false);

5918 
	}
}

5921 
	$TEST_F
(
P¬£FÏgsTe¡
, 
B»akOnFau»F®£_f
) {

5922 cÚ¡ * 
¬gv
[] = {"foo.exe", "--g‹¡_b»ak_Ú_çu»=f", 
nuÎ±r
};

5924 cÚ¡ * 
¬gv2
[] = {"foo.exe", 
nuÎ±r
};

5926 
	`GTEST_TEST_PARSING_FLAGS_
(
¬gv
, 
¬gv2
, 
FÏgs
::
	`B»akOnFau»
(
çl£
), false);

5927 
	}
}

5930 
	$TEST_F
(
P¬£FÏgsTe¡
, 
B»akOnFau»F®£_F
) {

5931 cÚ¡ * 
¬gv
[] = {"foo.exe", "--g‹¡_b»ak_Ú_çu»=F", 
nuÎ±r
};

5933 cÚ¡ * 
¬gv2
[] = {"foo.exe", 
nuÎ±r
};

5935 
	`GTEST_TEST_PARSING_FLAGS_
(
¬gv
, 
¬gv2
, 
FÏgs
::
	`B»akOnFau»
(
çl£
), false);

5936 
	}
}

5940 
	$TEST_F
(
P¬£FÏgsTe¡
, 
B»akOnFau»True
) {

5941 cÚ¡ * 
¬gv
[] = {"foo.exe", "--g‹¡_b»ak_Ú_çu»=1", 
nuÎ±r
};

5943 cÚ¡ * 
¬gv2
[] = {"foo.exe", 
nuÎ±r
};

5945 
	`GTEST_TEST_PARSING_FLAGS_
(
¬gv
, 
¬gv2
, 
FÏgs
::
	`B»akOnFau»
(
Œue
), 
çl£
);

5946 
	}
}

5949 
	$TEST_F
(
P¬£FÏgsTe¡
, 
C©chExû±iÚs
) {

5950 cÚ¡ * 
¬gv
[] = {"foo.exe", "--g‹¡_ÿtch_exû±iÚs", 
nuÎ±r
};

5952 cÚ¡ * 
¬gv2
[] = {"foo.exe", 
nuÎ±r
};

5954 
	`GTEST_TEST_PARSING_FLAGS_
(
¬gv
, 
¬gv2
, 
FÏgs
::
	`C©chExû±iÚs
(
Œue
), 
çl£
);

5955 
	}
}

5958 
	$TEST_F
(
P¬£FÏgsTe¡
, 
D—thTe¡U£FÜk
) {

5959 cÚ¡ * 
¬gv
[] = {"foo.exe", "--g‹¡_d—th_‹¡_u£_fÜk", 
nuÎ±r
};

5961 cÚ¡ * 
¬gv2
[] = {"foo.exe", 
nuÎ±r
};

5963 
	`GTEST_TEST_PARSING_FLAGS_
(
¬gv
, 
¬gv2
, 
FÏgs
::
	`D—thTe¡U£FÜk
(
Œue
), 
çl£
);

5964 
	}
}

5968 
	$TEST_F
(
P¬£FÏgsTe¡
, 
Du¶iÿ‹dFÏgs
) {

5969 cÚ¡ * 
¬gv
[] = {"foo.exe", "--gtest_filter=a", "--gtest_filter=b",

5970 
nuÎ±r
};

5972 cÚ¡ * 
¬gv2
[] = {"foo.exe", 
nuÎ±r
};

5974 
	`GTEST_TEST_PARSING_FLAGS_
(
¬gv
, 
¬gv2
, 
FÏgs
::
	`F‹r
("b"), 
çl£
);

5975 
	}
}

5978 
	$TEST_F
(
P¬£FÏgsTe¡
, 
UÄecognizedFÏg
) {

5979 cÚ¡ * 
¬gv
[] = {"foo.exe", "--gtest_break_on_failure",

5981 "--g‹¡_f‹r=b", 
nuÎ±r
};

5983 cÚ¡ * 
¬gv2
[] = {"foo.exe", "b¬", 
nuÎ±r
};

5985 
FÏgs
 
æags
;

5986 
æags
.
b»ak_Ú_çu»
 = 
Œue
;

5987 
æags
.
f‹r
 = "b";

5988 
	`GTEST_TEST_PARSING_FLAGS_
(
¬gv
, 
¬gv2
, 
æags
, 
çl£
);

5989 
	}
}

5992 
	$TEST_F
(
P¬£FÏgsTe¡
, 
Li¡Te¡sFÏg
) {

5993 cÚ¡ * 
¬gv
[] = {"foo.exe", "--g‹¡_li¡_‹¡s", 
nuÎ±r
};

5995 cÚ¡ * 
¬gv2
[] = {"foo.exe", 
nuÎ±r
};

5997 
	`GTEST_TEST_PARSING_FLAGS_
(
¬gv
, 
¬gv2
, 
FÏgs
::
	`Li¡Te¡s
(
Œue
), 
çl£
);

5998 
	}
}

6001 
	$TEST_F
(
P¬£FÏgsTe¡
, 
Li¡Te¡sTrue
) {

6002 cÚ¡ * 
¬gv
[] = {"foo.exe", "--g‹¡_li¡_‹¡s=1", 
nuÎ±r
};

6004 cÚ¡ * 
¬gv2
[] = {"foo.exe", 
nuÎ±r
};

6006 
	`GTEST_TEST_PARSING_FLAGS_
(
¬gv
, 
¬gv2
, 
FÏgs
::
	`Li¡Te¡s
(
Œue
), 
çl£
);

6007 
	}
}

6010 
	$TEST_F
(
P¬£FÏgsTe¡
, 
Li¡Te¡sF®£
) {

6011 cÚ¡ * 
¬gv
[] = {"foo.exe", "--g‹¡_li¡_‹¡s=0", 
nuÎ±r
};

6013 cÚ¡ * 
¬gv2
[] = {"foo.exe", 
nuÎ±r
};

6015 
	`GTEST_TEST_PARSING_FLAGS_
(
¬gv
, 
¬gv2
, 
FÏgs
::
	`Li¡Te¡s
(
çl£
), false);

6016 
	}
}

6019 
	$TEST_F
(
P¬£FÏgsTe¡
, 
Li¡Te¡sF®£_f
) {

6020 cÚ¡ * 
¬gv
[] = {"foo.exe", "--g‹¡_li¡_‹¡s=f", 
nuÎ±r
};

6022 cÚ¡ * 
¬gv2
[] = {"foo.exe", 
nuÎ±r
};

6024 
	`GTEST_TEST_PARSING_FLAGS_
(
¬gv
, 
¬gv2
, 
FÏgs
::
	`Li¡Te¡s
(
çl£
), false);

6025 
	}
}

6028 
	$TEST_F
(
P¬£FÏgsTe¡
, 
Li¡Te¡sF®£_F
) {

6029 cÚ¡ * 
¬gv
[] = {"foo.exe", "--g‹¡_li¡_‹¡s=F", 
nuÎ±r
};

6031 cÚ¡ * 
¬gv2
[] = {"foo.exe", 
nuÎ±r
};

6033 
	`GTEST_TEST_PARSING_FLAGS_
(
¬gv
, 
¬gv2
, 
FÏgs
::
	`Li¡Te¡s
(
çl£
), false);

6034 
	}
}

6037 
	$TEST_F
(
P¬£FÏgsTe¡
, 
OuutEm±y
) {

6038 cÚ¡ * 
¬gv
[] = {"foo.exe", "--g‹¡_ouut", 
nuÎ±r
};

6040 cÚ¡ * 
¬gv2
[] = {"foo.exe", "--g‹¡_ouut", 
nuÎ±r
};

6042 
	`GTEST_TEST_PARSING_FLAGS_
(
¬gv
, 
¬gv2
, 
	`FÏgs
(), 
Œue
);

6043 
	}
}

6046 
	$TEST_F
(
P¬£FÏgsTe¡
, 
OuutXml
) {

6047 cÚ¡ * 
¬gv
[] = {"foo.exe", "--g‹¡_ouut=xml", 
nuÎ±r
};

6049 cÚ¡ * 
¬gv2
[] = {"foo.exe", 
nuÎ±r
};

6051 
	`GTEST_TEST_PARSING_FLAGS_
(
¬gv
, 
¬gv2
, 
FÏgs
::
	`Ouut
("xml"), 
çl£
);

6052 
	}
}

6055 
	$TEST_F
(
P¬£FÏgsTe¡
, 
OuutXmlFe
) {

6056 cÚ¡ * 
¬gv
[] = {"foo.exe", "--g‹¡_ouut=xml:fe", 
nuÎ±r
};

6058 cÚ¡ * 
¬gv2
[] = {"foo.exe", 
nuÎ±r
};

6060 
	`GTEST_TEST_PARSING_FLAGS_
(
¬gv
, 
¬gv2
, 
FÏgs
::
	`Ouut
("xml:fe"), 
çl£
);

6061 
	}
}

6064 
	$TEST_F
(
P¬£FÏgsTe¡
, 
OuutXmlDœeùÜy
) {

6065 cÚ¡ * 
¬gv
[] = {"foo.exe", "--gtest_output=xml:directory/path/",

6066 
nuÎ±r
};

6068 cÚ¡ * 
¬gv2
[] = {"foo.exe", 
nuÎ±r
};

6070 
	`GTEST_TEST_PARSING_FLAGS_
(
¬gv
, 
¬gv2
,

6071 
FÏgs
::
	`Ouut
("xml:dœeùÜy/·th/"), 
çl£
);

6072 
	}
}

6075 
	$TEST_F
(
P¬£FÏgsTe¡
, 
Br›fFÏg
) {

6076 cÚ¡ * 
¬gv
[] = {"foo.exe", "--g‹¡_br›f", 
nuÎ±r
};

6078 cÚ¡ * 
¬gv2
[] = {"foo.exe", 
nuÎ±r
};

6080 
	`GTEST_TEST_PARSING_FLAGS_
(
¬gv
, 
¬gv2
, 
FÏgs
::
	`Br›f
(
Œue
), 
çl£
);

6081 
	}
}

6084 
	$TEST_F
(
P¬£FÏgsTe¡
, 
Br›fFÏgTrue
) {

6085 cÚ¡ * 
¬gv
[] = {"foo.exe", "--g‹¡_br›f=1", 
nuÎ±r
};

6087 cÚ¡ * 
¬gv2
[] = {"foo.exe", 
nuÎ±r
};

6089 
	`GTEST_TEST_PARSING_FLAGS_
(
¬gv
, 
¬gv2
, 
FÏgs
::
	`Br›f
(
Œue
), 
çl£
);

6090 
	}
}

6093 
	$TEST_F
(
P¬£FÏgsTe¡
, 
Br›fFÏgF®£
) {

6094 cÚ¡ * 
¬gv
[] = {"foo.exe", "--g‹¡_br›f=0", 
nuÎ±r
};

6096 cÚ¡ * 
¬gv2
[] = {"foo.exe", 
nuÎ±r
};

6098 
	`GTEST_TEST_PARSING_FLAGS_
(
¬gv
, 
¬gv2
, 
FÏgs
::
	`Br›f
(
çl£
), false);

6099 
	}
}

6102 
	$TEST_F
(
P¬£FÏgsTe¡
, 
PrštTimeFÏg
) {

6103 cÚ¡ * 
¬gv
[] = {"foo.exe", "--g‹¡_´št_time", 
nuÎ±r
};

6105 cÚ¡ * 
¬gv2
[] = {"foo.exe", 
nuÎ±r
};

6107 
	`GTEST_TEST_PARSING_FLAGS_
(
¬gv
, 
¬gv2
, 
FÏgs
::
	`PrštTime
(
Œue
), 
çl£
);

6108 
	}
}

6111 
	$TEST_F
(
P¬£FÏgsTe¡
, 
PrštTimeTrue
) {

6112 cÚ¡ * 
¬gv
[] = {"foo.exe", "--g‹¡_´št_time=1", 
nuÎ±r
};

6114 cÚ¡ * 
¬gv2
[] = {"foo.exe", 
nuÎ±r
};

6116 
	`GTEST_TEST_PARSING_FLAGS_
(
¬gv
, 
¬gv2
, 
FÏgs
::
	`PrštTime
(
Œue
), 
çl£
);

6117 
	}
}

6120 
	$TEST_F
(
P¬£FÏgsTe¡
, 
PrštTimeF®£
) {

6121 cÚ¡ * 
¬gv
[] = {"foo.exe", "--g‹¡_´št_time=0", 
nuÎ±r
};

6123 cÚ¡ * 
¬gv2
[] = {"foo.exe", 
nuÎ±r
};

6125 
	`GTEST_TEST_PARSING_FLAGS_
(
¬gv
, 
¬gv2
, 
FÏgs
::
	`PrštTime
(
çl£
), false);

6126 
	}
}

6129 
	$TEST_F
(
P¬£FÏgsTe¡
, 
PrštTimeF®£_f
) {

6130 cÚ¡ * 
¬gv
[] = {"foo.exe", "--g‹¡_´št_time=f", 
nuÎ±r
};

6132 cÚ¡ * 
¬gv2
[] = {"foo.exe", 
nuÎ±r
};

6134 
	`GTEST_TEST_PARSING_FLAGS_
(
¬gv
, 
¬gv2
, 
FÏgs
::
	`PrštTime
(
çl£
), false);

6135 
	}
}

6138 
	$TEST_F
(
P¬£FÏgsTe¡
, 
PrštTimeF®£_F
) {

6139 cÚ¡ * 
¬gv
[] = {"foo.exe", "--g‹¡_´št_time=F", 
nuÎ±r
};

6141 cÚ¡ * 
¬gv2
[] = {"foo.exe", 
nuÎ±r
};

6143 
	`GTEST_TEST_PARSING_FLAGS_
(
¬gv
, 
¬gv2
, 
FÏgs
::
	`PrštTime
(
çl£
), false);

6144 
	}
}

6147 
	$TEST_F
(
P¬£FÏgsTe¡
, 
RªdomS“d
) {

6148 cÚ¡ * 
¬gv
[] = {"foo.exe", "--g‹¡_¿ndom_£ed=1000", 
nuÎ±r
};

6150 cÚ¡ * 
¬gv2
[] = {"foo.exe", 
nuÎ±r
};

6152 
	`GTEST_TEST_PARSING_FLAGS_
(
¬gv
, 
¬gv2
, 
FÏgs
::
	`RªdomS“d
(1000), 
çl£
);

6153 
	}
}

6156 
	$TEST_F
(
P¬£FÏgsTe¡
, 
R•—t
) {

6157 cÚ¡ * 
¬gv
[] = {"foo.exe", "--g‹¡_»³©=1000", 
nuÎ±r
};

6159 cÚ¡ * 
¬gv2
[] = {"foo.exe", 
nuÎ±r
};

6161 
	`GTEST_TEST_PARSING_FLAGS_
(
¬gv
, 
¬gv2
, 
FÏgs
::
	`R•—t
(1000), 
çl£
);

6162 
	}
}

6165 
	$TEST_F
(
P¬£FÏgsTe¡
, 
AlsoRunDi§bËdTe¡sFÏg
) {

6166 cÚ¡ * 
¬gv
[] = {"foo.exe", "--g‹¡_®so_run_di§bËd_‹¡s", 
nuÎ±r
};

6168 cÚ¡ * 
¬gv2
[] = {"foo.exe", 
nuÎ±r
};

6170 
	`GTEST_TEST_PARSING_FLAGS_
(
¬gv
, 
¬gv2
, 
FÏgs
::
	`AlsoRunDi§bËdTe¡s
(
Œue
),

6171 
çl£
);

6172 
	}
}

6175 
	$TEST_F
(
P¬£FÏgsTe¡
, 
AlsoRunDi§bËdTe¡sTrue
) {

6176 cÚ¡ * 
¬gv
[] = {"foo.exe", "--gtest_also_run_disabled_tests=1",

6177 
nuÎ±r
};

6179 cÚ¡ * 
¬gv2
[] = {"foo.exe", 
nuÎ±r
};

6181 
	`GTEST_TEST_PARSING_FLAGS_
(
¬gv
, 
¬gv2
, 
FÏgs
::
	`AlsoRunDi§bËdTe¡s
(
Œue
),

6182 
çl£
);

6183 
	}
}

6186 
	$TEST_F
(
P¬£FÏgsTe¡
, 
AlsoRunDi§bËdTe¡sF®£
) {

6187 cÚ¡ * 
¬gv
[] = {"foo.exe", "--gtest_also_run_disabled_tests=0",

6188 
nuÎ±r
};

6190 cÚ¡ * 
¬gv2
[] = {"foo.exe", 
nuÎ±r
};

6192 
	`GTEST_TEST_PARSING_FLAGS_
(
¬gv
, 
¬gv2
, 
FÏgs
::
	`AlsoRunDi§bËdTe¡s
(
çl£
),

6193 
çl£
);

6194 
	}
}

6197 
	$TEST_F
(
P¬£FÏgsTe¡
, 
ShufæeW™houtV®ue
) {

6198 cÚ¡ * 
¬gv
[] = {"foo.exe", "--g‹¡_shufæe", 
nuÎ±r
};

6200 cÚ¡ * 
¬gv2
[] = {"foo.exe", 
nuÎ±r
};

6202 
	`GTEST_TEST_PARSING_FLAGS_
(
¬gv
, 
¬gv2
, 
FÏgs
::
	`Shufæe
(
Œue
), 
çl£
);

6203 
	}
}

6206 
	$TEST_F
(
P¬£FÏgsTe¡
, 
ShufæeF®£_0
) {

6207 cÚ¡ * 
¬gv
[] = {"foo.exe", "--g‹¡_shufæe=0", 
nuÎ±r
};

6209 cÚ¡ * 
¬gv2
[] = {"foo.exe", 
nuÎ±r
};

6211 
	`GTEST_TEST_PARSING_FLAGS_
(
¬gv
, 
¬gv2
, 
FÏgs
::
	`Shufæe
(
çl£
), false);

6212 
	}
}

6215 
	$TEST_F
(
P¬£FÏgsTe¡
, 
ShufæeTrue
) {

6216 cÚ¡ * 
¬gv
[] = {"foo.exe", "--g‹¡_shufæe=1", 
nuÎ±r
};

6218 cÚ¡ * 
¬gv2
[] = {"foo.exe", 
nuÎ±r
};

6220 
	`GTEST_TEST_PARSING_FLAGS_
(
¬gv
, 
¬gv2
, 
FÏgs
::
	`Shufæe
(
Œue
), 
çl£
);

6221 
	}
}

6224 
	$TEST_F
(
P¬£FÏgsTe¡
, 
SckT¿ûD•th
) {

6225 cÚ¡ * 
¬gv
[] = {"foo.exe", "--g‹¡_¡ack_Œaû_d•th=5", 
nuÎ±r
};

6227 cÚ¡ * 
¬gv2
[] = {"foo.exe", 
nuÎ±r
};

6229 
	`GTEST_TEST_PARSING_FLAGS_
(
¬gv
, 
¬gv2
, 
FÏgs
::
	`SckT¿ûD•th
(5), 
çl£
);

6230 
	}
}

6232 
	$TEST_F
(
P¬£FÏgsTe¡
, 
SŒ—mResuÉTo
) {

6233 cÚ¡ * 
¬gv
[] = {"foo.exe", "--gtest_stream_result_to=localhost:1234",

6234 
nuÎ±r
};

6236 cÚ¡ * 
¬gv2
[] = {"foo.exe", 
nuÎ±r
};

6238 
	`GTEST_TEST_PARSING_FLAGS_
(

6239 
¬gv
, 
¬gv2
, 
FÏgs
::
	`SŒ—mResuÉTo
("loÿlho¡:1234"), 
çl£
);

6240 
	}
}

6243 
	$TEST_F
(
P¬£FÏgsTe¡
, 
ThrowOnFau»W™houtV®ue
) {

6244 cÚ¡ * 
¬gv
[] = {"foo.exe", "--g‹¡_throw_Ú_çu»", 
nuÎ±r
};

6246 cÚ¡ * 
¬gv2
[] = {"foo.exe", 
nuÎ±r
};

6248 
	`GTEST_TEST_PARSING_FLAGS_
(
¬gv
, 
¬gv2
, 
FÏgs
::
	`ThrowOnFau»
(
Œue
), 
çl£
);

6249 
	}
}

6252 
	$TEST_F
(
P¬£FÏgsTe¡
, 
ThrowOnFau»F®£_0
) {

6253 cÚ¡ * 
¬gv
[] = {"foo.exe", "--g‹¡_throw_Ú_çu»=0", 
nuÎ±r
};

6255 cÚ¡ * 
¬gv2
[] = {"foo.exe", 
nuÎ±r
};

6257 
	`GTEST_TEST_PARSING_FLAGS_
(
¬gv
, 
¬gv2
, 
FÏgs
::
	`ThrowOnFau»
(
çl£
), false);

6258 
	}
}

6262 
	$TEST_F
(
P¬£FÏgsTe¡
, 
ThrowOnFau»True
) {

6263 cÚ¡ * 
¬gv
[] = {"foo.exe", "--g‹¡_throw_Ú_çu»=1", 
nuÎ±r
};

6265 cÚ¡ * 
¬gv2
[] = {"foo.exe", 
nuÎ±r
};

6267 
	`GTEST_TEST_PARSING_FLAGS_
(
¬gv
, 
¬gv2
, 
FÏgs
::
	`ThrowOnFau»
(
Œue
), 
çl£
);

6268 
	}
}

6270 #ià
GTEST_OS_WINDOWS


6272 
	$TEST_F
(
P¬£FÏgsTe¡
, 
WideSŒšgs
) {

6273 cÚ¡ 
wch¬_t
* 
¬gv
[] = {

6274 
L
"foo.exe",

6275 
L
"--gtest_filter=Foo*",

6276 
L
"--gtest_list_tests=1",

6277 
L
"--gtest_break_on_failure",

6278 
L
"--non_gtest_flag",

6279 
NULL


6282 cÚ¡ 
wch¬_t
* 
¬gv2
[] = {

6283 
L
"foo.exe",

6284 
L
"--non_gtest_flag",

6285 
NULL


6288 
FÏgs
 
ex³ùed_æags
;

6289 
ex³ùed_æags
.
b»ak_Ú_çu»
 = 
Œue
;

6290 
ex³ùed_æags
.
f‹r
 = "Foo*";

6291 
ex³ùed_æags
.
li¡_‹¡s
 = 
Œue
;

6293 
	`GTEST_TEST_PARSING_FLAGS_
(
¬gv
, 
¬gv2
, 
ex³ùed_æags
, 
çl£
);

6294 
	}
}

6297 #ià
GTEST_USE_OWN_FLAGFILE_FLAG_


6298 şas 
	cFÏgfeTe¡
 : 
public
 
P¬£FÏgsTe¡
 {

6299 
public
:

6300 
S‘Up
(è
ov”ride
 {

6301 
P¬£FÏgsTe¡
::
S‘Up
();

6303 
	g‹¡d©a_·th_
.
S‘
(
š‹º®
::
FeP©h
(

6304 
‹¡šg
::
TempDœ
(è+ 
š‹º®
::
G‘Cu¼’tExecubËName
().
¡ršg
() +

6306 
	g‹¡šg
::
š‹º®
::
posix
::
RmDœ
(
‹¡d©a_·th_
.
c_¡r
());

6307 
EXPECT_TRUE
(
‹¡d©a_·th_
.
C»©eFŞd”
());

6310 
T—rDown
(è
	gov”ride
 {

6311 
	g‹¡šg
::
š‹º®
::
posix
::
RmDœ
(
‹¡d©a_·th_
.
c_¡r
());

6312 
	gP¬£FÏgsTe¡
::
T—rDown
();

6315 
	gš‹º®
::
FeP©h
 
C»©eFÏgfe
(cÚ¡ * 
cÚ‹Ás
) {

6316 
š‹º®
::
FeP©h
 
fe_·th
(š‹º®::FeP©h::
G’”©eUniqueFeName
(

6317 
‹¡d©a_·th_
, 
š‹º®
::
FeP©h
("unique"), "txt"));

6318 
FILE
* 
	gf
 = 
‹¡šg
::
š‹º®
::
posix
::
FO³n
(
fe_·th
.
c_¡r
(), "w");

6319 
årštf
(
f
, "%s", 
cÚ‹Ás
);

6320 
fşo£
(
f
);

6321  
	gfe_·th
;

6324 
	g´iv©e
:

6325 
š‹º®
::
FeP©h
 
‹¡d©a_·th_
;

6329 
	$TEST_F
(
FÏgfeTe¡
, 
Em±y
) {

6330 
š‹º®
::
FeP©h
 
	`æagfe_·th
(
	`C»©eFÏgfe
(""));

6331 
¡d
::
¡ršg
 
æagfe_æag
 =

6332 
¡d
::
	`¡ršg
("--" 
GTEST_FLAG_PREFIX_
 "æagfe="è+ 
æagfe_·th
.
	`c_¡r
();

6334 cÚ¡ * 
¬gv
[] = {"foo.exe", 
æagfe_æag
.
	`c_¡r
(), 
nuÎ±r
};

6336 cÚ¡ * 
¬gv2
[] = {"foo.exe", 
nuÎ±r
};

6338 
	`GTEST_TEST_PARSING_FLAGS_
(
¬gv
, 
¬gv2
, 
	`FÏgs
(), 
çl£
);

6339 
	}
}

6342 
	$TEST_F
(
FÏgfeTe¡
, 
F‹rNÚEm±y
) {

6343 
š‹º®
::
FeP©h
 
	`æagfe_·th
(
	`C»©eFÏgfe
(

6344 "--" 
GTEST_FLAG_PREFIX_
 "filter=abc"));

6345 
¡d
::
¡ršg
 
æagfe_æag
 =

6346 
¡d
::
	`¡ršg
("--" 
GTEST_FLAG_PREFIX_
 "æagfe="è+ 
æagfe_·th
.
	`c_¡r
();

6348 cÚ¡ * 
¬gv
[] = {"foo.exe", 
æagfe_æag
.
	`c_¡r
(), 
nuÎ±r
};

6350 cÚ¡ * 
¬gv2
[] = {"foo.exe", 
nuÎ±r
};

6352 
	`GTEST_TEST_PARSING_FLAGS_
(
¬gv
, 
¬gv2
, 
FÏgs
::
	`F‹r
("abc"), 
çl£
);

6353 
	}
}

6356 
	$TEST_F
(
FÏgfeTe¡
, 
Sev”®FÏgs
) {

6357 
š‹º®
::
FeP©h
 
	`æagfe_·th
(
	`C»©eFÏgfe
(

6358 "--" 
GTEST_FLAG_PREFIX_
 "filter=abc\n"

6359 "--" 
GTEST_FLAG_PREFIX_
 "break_on_failure\n"

6360 "--" 
GTEST_FLAG_PREFIX_
 "list_tests"));

6361 
¡d
::
¡ršg
 
æagfe_æag
 =

6362 
¡d
::
	`¡ršg
("--" 
GTEST_FLAG_PREFIX_
 "æagfe="è+ 
æagfe_·th
.
	`c_¡r
();

6364 cÚ¡ * 
¬gv
[] = {"foo.exe", 
æagfe_æag
.
	`c_¡r
(), 
nuÎ±r
};

6366 cÚ¡ * 
¬gv2
[] = {"foo.exe", 
nuÎ±r
};

6368 
FÏgs
 
ex³ùed_æags
;

6369 
ex³ùed_æags
.
b»ak_Ú_çu»
 = 
Œue
;

6370 
ex³ùed_æags
.
f‹r
 = "abc";

6371 
ex³ùed_æags
.
li¡_‹¡s
 = 
Œue
;

6373 
	`GTEST_TEST_PARSING_FLAGS_
(
¬gv
, 
¬gv2
, 
ex³ùed_æags
, 
çl£
);

6374 
	}
}

6378 şas 
	cCu¼’tTe¡InfoTe¡
 : 
public
 
Te¡
 {

6379 
´Ùeùed
:

6382 
S‘UpTe¡Su™e
() {

6384 cÚ¡ 
Te¡Info
* 
‹¡_šfo
 =

6385 
Un™Te¡
::
G‘In¡ªû
()->
cu¼’t_‹¡_šfo
();

6386 
EXPECT_TRUE
(
‹¡_šfo
 =ğ
nuÎ±r
)

6392 
T—rDownTe¡Su™e
() {

6393 cÚ¡ 
Te¡Info
* 
	g‹¡_šfo
 =

6394 
Un™Te¡
::
G‘In¡ªû
()->
cu¼’t_‹¡_šfo
();

6395 
EXPECT_TRUE
(
‹¡_šfo
 =ğ
nuÎ±r
)

6402 
	$TEST_F
(
Cu¼’tTe¡InfoTe¡
, 
WÜksFÜFœ¡Te¡InATe¡Su™e
) {

6403 cÚ¡ 
Te¡Info
* 
‹¡_šfo
 =

6404 
Un™Te¡
::
	`G‘In¡ªû
()->
	`cu¼’t_‹¡_šfo
();

6405 
	`ASSERT_TRUE
(
nuÎ±r
 !ğ
‹¡_šfo
)

6407 
	`EXPECT_STREQ
("Cu¼’tTe¡InfoTe¡", 
‹¡_šfo
->
	`‹¡_su™e_Çme
())

6409 
	`EXPECT_STREQ
("WÜksFÜFœ¡Te¡InATe¡Su™e", 
‹¡_šfo
->
	`Çme
())

6411 
	}
}

6417 
	$TEST_F
(
Cu¼’tTe¡InfoTe¡
, 
WÜksFÜSecÚdTe¡InATe¡Su™e
) {

6418 cÚ¡ 
Te¡Info
* 
‹¡_šfo
 =

6419 
Un™Te¡
::
	`G‘In¡ªû
()->
	`cu¼’t_‹¡_šfo
();

6420 
	`ASSERT_TRUE
(
nuÎ±r
 !ğ
‹¡_šfo
)

6422 
	`EXPECT_STREQ
("Cu¼’tTe¡InfoTe¡", 
‹¡_šfo
->
	`‹¡_su™e_Çme
())

6424 
	`EXPECT_STREQ
("WÜksFÜSecÚdTe¡InATe¡Su™e", 
‹¡_šfo
->
	`Çme
())

6426 
	}
}

6433 
Çme¥aû
 
	gmy_Çme¥aû
 {

6434 
Çme¥aû
 
	g‹¡šg
 {

6438 şas 
	cTe¡
 {};

6442 şas 
	cMes§ge
 {};

6447 şas 
	cAs£¹iÚResuÉ
 {};

6450 
TEST
(
Ne¡edTe¡šgName¥aûTe¡
, 
Sucûss
) {

6451 
EXPECT_EQ
(1, 1) << "This shouldn't fail.";

6455 
TEST
(
Ne¡edTe¡šgName¥aûTe¡
, 
Fau»
) {

6456 
EXPECT_FATAL_FAILURE
(
FAIL
() << "This failure isƒxpected.",

6467 şas 
	cPrÙeùedFixtu»M‘hodsTe¡
 : 
public
 
Te¡
 {

6468 
´Ùeùed
:

6469 
	$S‘Up
(è
ov”ride
 { 
Te¡
::
	`S‘Up
(); }

6470 
	$T—rDown
(è
ov”ride
 { 
Te¡
::
	`T—rDown
(); 
	}
}

6475 
	$TEST
(
SŒ—mšgAs£¹iÚsTe¡
, 
UncÚd™iÚ®
) {

6476 
	`SUCCEED
() << "expected success";

6477 
	`EXPECT_NONFATAL_FAILURE
(
	`ADD_FAILURE
() << "expected failure",

6479 
	`EXPECT_FATAL_FAILURE
(
	`FAIL
() << "expected failure",

6481 
	}
}

6483 #ifdeà
__BORLANDC__


6485 #´agm¨
İtiÚ
 
push
 -
w
-
ccc
 -w-
rch


6488 
	$TEST
(
SŒ—mšgAs£¹iÚsTe¡
, 
Truth
) {

6489 
	`EXPECT_TRUE
(
Œue
) << "unexpected failure";

6490 
	`ASSERT_TRUE
(
Œue
) << "unexpected failure";

6491 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_TRUE
(
çl£
) << "expected failure",

6493 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_TRUE
(
çl£
) << "expected failure",

6495 
	}
}

6497 
	$TEST
(
SŒ—mšgAs£¹iÚsTe¡
, 
Truth2
) {

6498 
	`EXPECT_FALSE
(
çl£
) << "unexpected failure";

6499 
	`ASSERT_FALSE
(
çl£
) << "unexpected failure";

6500 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_FALSE
(
Œue
) << "expected failure",

6502 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_FALSE
(
Œue
) << "expected failure",

6504 
	}
}

6506 #ifdeà
__BORLANDC__


6508 #´agm¨
İtiÚ
 
pİ


6511 
	$TEST
(
SŒ—mšgAs£¹iÚsTe¡
, 
IÁeg”Equ®s
) {

6512 
	`EXPECT_EQ
(1, 1) << "unexpected failure";

6513 
	`ASSERT_EQ
(1, 1) << "unexpected failure";

6514 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_EQ
(1, 2) << "expected failure",

6516 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_EQ
(1, 2) << "expected failure",

6518 
	}
}

6520 
	$TEST
(
SŒ—mšgAs£¹iÚsTe¡
, 
IÁeg”LessThª
) {

6521 
	`EXPECT_LT
(1, 2) << "unexpected failure";

6522 
	`ASSERT_LT
(1, 2) << "unexpected failure";

6523 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_LT
(2, 1) << "expected failure",

6525 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_LT
(2, 1) << "expected failure",

6527 
	}
}

6529 
	$TEST
(
SŒ—mšgAs£¹iÚsTe¡
, 
SŒšgsEqu®
) {

6530 
	`EXPECT_STREQ
("foo", "foo") << "unexpected failure";

6531 
	`ASSERT_STREQ
("foo", "foo") << "unexpected failure";

6532 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_STREQ
("foo", "bar") << "expected failure",

6534 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_STREQ
("foo", "bar") << "expected failure",

6536 
	}
}

6538 
	$TEST
(
SŒ—mšgAs£¹iÚsTe¡
, 
SŒšgsNÙEqu®
) {

6539 
	`EXPECT_STRNE
("foo", "bar") << "unexpected failure";

6540 
	`ASSERT_STRNE
("foo", "bar") << "unexpected failure";

6541 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_STRNE
("foo", "foo") << "expected failure",

6543 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_STRNE
("foo", "foo") << "expected failure",

6545 
	}
}

6547 
	$TEST
(
SŒ—mšgAs£¹iÚsTe¡
, 
SŒšgsEqu®IgnÜšgCa£
) {

6548 
	`EXPECT_STRCASEEQ
("foo", "FOO") << "unexpected failure";

6549 
	`ASSERT_STRCASEEQ
("foo", "FOO") << "unexpected failure";

6550 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_STRCASEEQ
("foo", "bar") << "expected failure",

6552 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_STRCASEEQ
("foo", "bar") << "expected failure",

6554 
	}
}

6556 
	$TEST
(
SŒ—mšgAs£¹iÚsTe¡
, 
SŒšgNÙEqu®IgnÜšgCa£
) {

6557 
	`EXPECT_STRCASENE
("foo", "bar") << "unexpected failure";

6558 
	`ASSERT_STRCASENE
("foo", "bar") << "unexpected failure";

6559 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_STRCASENE
("foo", "FOO") << "expected failure",

6561 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_STRCASENE
("bar", "BAR") << "expected failure",

6563 
	}
}

6565 
	$TEST
(
SŒ—mšgAs£¹iÚsTe¡
, 
FlßtšgPoštEqu®s
) {

6566 
	`EXPECT_FLOAT_EQ
(1.0, 1.0) << "unexpected failure";

6567 
	`ASSERT_FLOAT_EQ
(1.0, 1.0) << "unexpected failure";

6568 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_FLOAT_EQ
(0.0, 1.0) << "expected failure",

6570 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_FLOAT_EQ
(0.0, 1.0) << "expected failure",

6572 
	}
}

6574 #ià
GTEST_HAS_EXCEPTIONS


6576 
	$TEST
(
SŒ—mšgAs£¹iÚsTe¡
, 
Throw
) {

6577 
	`EXPECT_THROW
(
	`ThrowAnIÁeg”
(), ) << "unexpected failure";

6578 
	`ASSERT_THROW
(
	`ThrowAnIÁeg”
(), ) << "unexpected failure";

6579 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_THROW
(
	`ThrowAnIÁeg”
(), 
boŞ
) <<

6581 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_THROW
(
	`ThrowAnIÁeg”
(), 
boŞ
) <<

6583 
	}
}

6585 
	$TEST
(
SŒ—mšgAs£¹iÚsTe¡
, 
NoThrow
) {

6586 
	`EXPECT_NO_THROW
(
	`ThrowNÙhšg
()) << "unexpected failure";

6587 
	`ASSERT_NO_THROW
(
	`ThrowNÙhšg
()) << "unexpected failure";

6588 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_NO_THROW
(
	`ThrowAnIÁeg”
()) <<

6590 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_NO_THROW
(
	`ThrowAnIÁeg”
()) <<

6592 
	}
}

6594 
	$TEST
(
SŒ—mšgAs£¹iÚsTe¡
, 
AnyThrow
) {

6595 
	`EXPECT_ANY_THROW
(
	`ThrowAnIÁeg”
()) << "unexpected failure";

6596 
	`ASSERT_ANY_THROW
(
	`ThrowAnIÁeg”
()) << "unexpected failure";

6597 
	`EXPECT_NONFATAL_FAILURE
(
	`EXPECT_ANY_THROW
(
	`ThrowNÙhšg
()) <<

6599 
	`EXPECT_FATAL_FAILURE
(
	`ASSERT_ANY_THROW
(
	`ThrowNÙhšg
()) <<

6601 
	}
}

6607 
	$TEST
(
CŞÜedOuutTe¡
, 
U£sCŞÜsWh’GTe¡CŞÜFÏgIsYes
) {

6608 
	`GTEST_FLAG
(
cŞÜ
) = "yes";

6610 
	`S‘Env
("TERM", "xterm");

6611 
	`EXPECT_TRUE
(
	`ShouldU£CŞÜ
(
Œue
));

6612 
	`EXPECT_TRUE
(
	`ShouldU£CŞÜ
(
çl£
));

6614 
	`S‘Env
("TERM", "dumb");

6615 
	`EXPECT_TRUE
(
	`ShouldU£CŞÜ
(
Œue
));

6616 
	`EXPECT_TRUE
(
	`ShouldU£CŞÜ
(
çl£
));

6617 
	}
}

6619 
	$TEST
(
CŞÜedOuutTe¡
, 
U£sCŞÜsWh’GTe¡CŞÜFÏgIsAlŸsOfYes
) {

6620 
	`S‘Env
("TERM", "dumb");

6622 
	`GTEST_FLAG
(
cŞÜ
) = "True";

6623 
	`EXPECT_TRUE
(
	`ShouldU£CŞÜ
(
çl£
));

6625 
	`GTEST_FLAG
(
cŞÜ
) = "t";

6626 
	`EXPECT_TRUE
(
	`ShouldU£CŞÜ
(
çl£
));

6628 
	`GTEST_FLAG
(
cŞÜ
) = "1";

6629 
	`EXPECT_TRUE
(
	`ShouldU£CŞÜ
(
çl£
));

6630 
	}
}

6632 
	$TEST
(
CŞÜedOuutTe¡
, 
U£sNoCŞÜWh’GTe¡CŞÜFÏgIsNo
) {

6633 
	`GTEST_FLAG
(
cŞÜ
) = "no";

6635 
	`S‘Env
("TERM", "xterm");

6636 
	`EXPECT_FALSE
(
	`ShouldU£CŞÜ
(
Œue
));

6637 
	`EXPECT_FALSE
(
	`ShouldU£CŞÜ
(
çl£
));

6639 
	`S‘Env
("TERM", "dumb");

6640 
	`EXPECT_FALSE
(
	`ShouldU£CŞÜ
(
Œue
));

6641 
	`EXPECT_FALSE
(
	`ShouldU£CŞÜ
(
çl£
));

6642 
	}
}

6644 
	$TEST
(
CŞÜedOuutTe¡
, 
U£sNoCŞÜWh’GTe¡CŞÜFÏgIsInv®id
) {

6645 
	`S‘Env
("TERM", "xterm");

6647 
	`GTEST_FLAG
(
cŞÜ
) = "F";

6648 
	`EXPECT_FALSE
(
	`ShouldU£CŞÜ
(
Œue
));

6650 
	`GTEST_FLAG
(
cŞÜ
) = "0";

6651 
	`EXPECT_FALSE
(
	`ShouldU£CŞÜ
(
Œue
));

6653 
	`GTEST_FLAG
(
cŞÜ
) = "unknown";

6654 
	`EXPECT_FALSE
(
	`ShouldU£CŞÜ
(
Œue
));

6655 
	}
}

6657 
	$TEST
(
CŞÜedOuutTe¡
, 
U£sCŞÜsWh’StdoutIsTty
) {

6658 
	`GTEST_FLAG
(
cŞÜ
) = "auto";

6660 
	`S‘Env
("TERM", "xterm");

6661 
	`EXPECT_FALSE
(
	`ShouldU£CŞÜ
(
çl£
));

6662 
	`EXPECT_TRUE
(
	`ShouldU£CŞÜ
(
Œue
));

6663 
	}
}

6665 
	$TEST
(
CŞÜedOuutTe¡
, 
U£sCŞÜsWh’T”mSuµÜtsCŞÜs
) {

6666 
	`GTEST_FLAG
(
cŞÜ
) = "auto";

6668 #ià
GTEST_OS_WINDOWS
 && !
GTEST_OS_WINDOWS_MINGW


6671 
	`S‘Env
("TERM", "dumb");

6672 
	`EXPECT_TRUE
(
	`ShouldU£CŞÜ
(
Œue
));

6674 
	`S‘Env
("TERM", "");

6675 
	`EXPECT_TRUE
(
	`ShouldU£CŞÜ
(
Œue
));

6677 
	`S‘Env
("TERM", "xterm");

6678 
	`EXPECT_TRUE
(
	`ShouldU£CŞÜ
(
Œue
));

6683 
	`S‘Env
("TERM", "dumb");

6684 
	`EXPECT_FALSE
(
	`ShouldU£CŞÜ
(
Œue
));

6686 
	`S‘Env
("TERM", "emacs");

6687 
	`EXPECT_FALSE
(
	`ShouldU£CŞÜ
(
Œue
));

6689 
	`S‘Env
("TERM", "vt100");

6690 
	`EXPECT_FALSE
(
	`ShouldU£CŞÜ
(
Œue
));

6692 
	`S‘Env
("TERM", "xterm-mono");

6693 
	`EXPECT_FALSE
(
	`ShouldU£CŞÜ
(
Œue
));

6695 
	`S‘Env
("TERM", "xterm");

6696 
	`EXPECT_TRUE
(
	`ShouldU£CŞÜ
(
Œue
));

6698 
	`S‘Env
("TERM", "xterm-color");

6699 
	`EXPECT_TRUE
(
	`ShouldU£CŞÜ
(
Œue
));

6701 
	`S‘Env
("TERM", "xterm-256color");

6702 
	`EXPECT_TRUE
(
	`ShouldU£CŞÜ
(
Œue
));

6704 
	`S‘Env
("TERM", "screen");

6705 
	`EXPECT_TRUE
(
	`ShouldU£CŞÜ
(
Œue
));

6707 
	`S‘Env
("TERM", "screen-256color");

6708 
	`EXPECT_TRUE
(
	`ShouldU£CŞÜ
(
Œue
));

6710 
	`S‘Env
("TERM", "tmux");

6711 
	`EXPECT_TRUE
(
	`ShouldU£CŞÜ
(
Œue
));

6713 
	`S‘Env
("TERM", "tmux-256color");

6714 
	`EXPECT_TRUE
(
	`ShouldU£CŞÜ
(
Œue
));

6716 
	`S‘Env
("TERM", "rxvt-unicode");

6717 
	`EXPECT_TRUE
(
	`ShouldU£CŞÜ
(
Œue
));

6719 
	`S‘Env
("TERM", "rxvt-unicode-256color");

6720 
	`EXPECT_TRUE
(
	`ShouldU£CŞÜ
(
Œue
));

6722 
	`S‘Env
("TERM", "linux");

6723 
	`EXPECT_TRUE
(
	`ShouldU£CŞÜ
(
Œue
));

6725 
	`S‘Env
("TERM", "cygwin");

6726 
	`EXPECT_TRUE
(
	`ShouldU£CŞÜ
(
Œue
));

6728 
	}
}

6732 
boŞ
 
dummy1
 
	gGTEST_ATTRIBUTE_UNUSED_
 = 
SticAs£¹Ty³Eq
<boŞ, 
	gboŞ
>();

6733 
boŞ
 
dummy2
 
	gGTEST_ATTRIBUTE_UNUSED_
 =

6734 
SticAs£¹Ty³Eq
<const , const >();

6738 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

6739 şas 
	cSticAs£¹Ty³EqTe¡H–³r
 {

6740 
	mpublic
:

6741 
	$SticAs£¹Ty³EqTe¡H–³r
(è{ 
SticAs£¹Ty³Eq
<
boŞ
, 
T
>(); }

6742 
	}
};

6744 
	$TEST
(
SticAs£¹Ty³EqTe¡
, 
WÜksInCÏss
) {

6745 
SticAs£¹Ty³EqTe¡H–³r
<
boŞ
>();

6746 
	}
}

6750 
	tIÁAlŸs
;

6752 
	$TEST
(
SticAs£¹Ty³EqTe¡
, 
CompesFÜEqu®Ty³s
) {

6753 
SticAs£¹Ty³Eq
<, 
IÁAlŸs
>();

6754 
SticAs£¹Ty³Eq
<*, 
IÁAlŸs
*>();

6755 
	}
}

6757 
	$TEST
(
HasNÚçlFau»Te¡
, 
R‘uºsF®£Wh’Th”eIsNoFau»
) {

6758 
	`EXPECT_FALSE
(
	`HasNÚçlFau»
());

6759 
	}
}

6761 
	$FaF©®ly
(è{ 
	`FAIL
(); 
	}
}

6763 
	$TEST
(
HasNÚçlFau»Te¡
, 
R‘uºsF®£Wh’Th”eIsOÆyF©®Fau»
) {

6764 
	`FaF©®ly
();

6765 cÚ¡ 
boŞ
 
has_nÚçl_çu»
 = 
	`HasNÚçlFau»
();

6766 
	`CË¬Cu¼’tTe¡P¬tResuÉs
();

6767 
	`EXPECT_FALSE
(
has_nÚçl_çu»
);

6768 
	}
}

6770 
	$TEST
(
HasNÚçlFau»Te¡
, 
R‘uºsTrueWh’Th”eIsNÚçlFau»
) {

6771 
	`ADD_FAILURE
();

6772 cÚ¡ 
boŞ
 
has_nÚçl_çu»
 = 
	`HasNÚçlFau»
();

6773 
	`CË¬Cu¼’tTe¡P¬tResuÉs
();

6774 
	`EXPECT_TRUE
(
has_nÚçl_çu»
);

6775 
	}
}

6777 
	$TEST
(
HasNÚçlFau»Te¡
, 
R‘uºsTrueWh’Th”eA»F©®AndNÚçlFau»s
) {

6778 
	`FaF©®ly
();

6779 
	`ADD_FAILURE
();

6780 cÚ¡ 
boŞ
 
has_nÚçl_çu»
 = 
	`HasNÚçlFau»
();

6781 
	`CË¬Cu¼’tTe¡P¬tResuÉs
();

6782 
	`EXPECT_TRUE
(
has_nÚçl_çu»
);

6783 
	}
}

6786 
boŞ
 
	$HasNÚçlFau»H–³r
() {

6787  
‹¡šg
::
Te¡
::
	`HasNÚçlFau»
();

6788 
	}
}

6790 
	$TEST
(
HasNÚçlFau»Te¡
, 
WÜksOutsideOfTe¡Body
) {

6791 
	`EXPECT_FALSE
(
	`HasNÚçlFau»H–³r
());

6792 
	}
}

6794 
	$TEST
(
HasNÚçlFau»Te¡
, 
WÜksOutsideOfTe¡Body2
) {

6795 
	`ADD_FAILURE
();

6796 cÚ¡ 
boŞ
 
has_nÚçl_çu»
 = 
	`HasNÚçlFau»H–³r
();

6797 
	`CË¬Cu¼’tTe¡P¬tResuÉs
();

6798 
	`EXPECT_TRUE
(
has_nÚçl_çu»
);

6799 
	}
}

6801 
	$TEST
(
HasFau»Te¡
, 
R‘uºsF®£Wh’Th”eIsNoFau»
) {

6802 
	`EXPECT_FALSE
(
	`HasFau»
());

6803 
	}
}

6805 
	$TEST
(
HasFau»Te¡
, 
R‘uºsTrueWh’Th”eIsF©®Fau»
) {

6806 
	`FaF©®ly
();

6807 cÚ¡ 
boŞ
 
has_çu»
 = 
	`HasFau»
();

6808 
	`CË¬Cu¼’tTe¡P¬tResuÉs
();

6809 
	`EXPECT_TRUE
(
has_çu»
);

6810 
	}
}

6812 
	$TEST
(
HasFau»Te¡
, 
R‘uºsTrueWh’Th”eIsNÚçlFau»
) {

6813 
	`ADD_FAILURE
();

6814 cÚ¡ 
boŞ
 
has_çu»
 = 
	`HasFau»
();

6815 
	`CË¬Cu¼’tTe¡P¬tResuÉs
();

6816 
	`EXPECT_TRUE
(
has_çu»
);

6817 
	}
}

6819 
	$TEST
(
HasFau»Te¡
, 
R‘uºsTrueWh’Th”eA»F©®AndNÚçlFau»s
) {

6820 
	`FaF©®ly
();

6821 
	`ADD_FAILURE
();

6822 cÚ¡ 
boŞ
 
has_çu»
 = 
	`HasFau»
();

6823 
	`CË¬Cu¼’tTe¡P¬tResuÉs
();

6824 
	`EXPECT_TRUE
(
has_çu»
);

6825 
	}
}

6828 
boŞ
 
	$HasFau»H–³r
(è{  
‹¡šg
::
Te¡
::
	`HasFau»
(); 
	}
}

6830 
	$TEST
(
HasFau»Te¡
, 
WÜksOutsideOfTe¡Body
) {

6831 
	`EXPECT_FALSE
(
	`HasFau»H–³r
());

6832 
	}
}

6834 
	$TEST
(
HasFau»Te¡
, 
WÜksOutsideOfTe¡Body2
) {

6835 
	`ADD_FAILURE
();

6836 cÚ¡ 
boŞ
 
has_çu»
 = 
	`HasFau»H–³r
();

6837 
	`CË¬Cu¼’tTe¡P¬tResuÉs
();

6838 
	`EXPECT_TRUE
(
has_çu»
);

6839 
	}
}

6841 şas 
	cTe¡Li¡’”
 : 
public
 
Em±yTe¡Ev’tLi¡’”
 {

6842 
public
:

6843 
	$Te¡Li¡’”
(è: 
	`Ú_¡¬t_couÁ”_
(
nuÎ±r
), 
	$is_de¡royed_
(
nuÎ±r
) {}

6844 
	$Te¡Li¡’”
(* 
Ú_¡¬t_couÁ”
, 
boŞ
* 
is_de¡royed
)

6845 : 
	`Ú_¡¬t_couÁ”_
(
Ú_¡¬t_couÁ”
),

6846 
	$is_de¡royed_
(
is_de¡royed
è{
	}
}

6848 ~
	$Te¡Li¡’”
(è
ov”ride
 {

6849 ià(
is_de¡royed_
)

6850 *
is_de¡royed_
 = 
Œue
;

6851 
	}
}

6853 
	g´Ùeùed
:

6854 
	$OnTe¡Prog¿mS¹
(cÚ¡ 
Un™Te¡
& ) 
ov”ride
 {

6855 ià(
Ú_¡¬t_couÁ”_
 !ğ
nuÎ±r
) (*on_start_counter_)++;

6856 
	}
}

6858 
	g´iv©e
:

6859 * 
Ú_¡¬t_couÁ”_
;

6860 
boŞ
* 
	gis_de¡royed_
;

6864 
	$TEST
(
Te¡Ev’tLi¡’”sTe¡
, 
CÚ¡ruùiÚWÜks
) {

6865 
Te¡Ev’tLi¡’”s
 
li¡’”s
;

6867 
	`EXPECT_TRUE
(
Te¡Ev’tLi¡’”sAcûssÜ
::
	`G‘R•—‹r
(&
li¡’”s
è!ğ
nuÎ±r
);

6868 
	`EXPECT_TRUE
(
li¡’”s
.
	`deçuÉ_»suÉ_´š‹r
(è=ğ
nuÎ±r
);

6869 
	`EXPECT_TRUE
(
li¡’”s
.
	`deçuÉ_xml_g’”©Ü
(è=ğ
nuÎ±r
);

6870 
	}
}

6874 
	$TEST
(
Te¡Ev’tLi¡’”sTe¡
, 
De¡ruùiÚWÜks
) {

6875 
boŞ
 
deçuÉ_»suÉ_´š‹r_is_de¡royed
 = 
çl£
;

6876 
boŞ
 
deçuÉ_xml_´š‹r_is_de¡royed
 = 
çl£
;

6877 
boŞ
 
exŒa_li¡’”_is_de¡royed
 = 
çl£
;

6878 
Te¡Li¡’”
* 
deçuÉ_»suÉ_´š‹r
 =

6879 
Ãw
 
	`Te¡Li¡’”
(
nuÎ±r
, &
deçuÉ_»suÉ_´š‹r_is_de¡royed
);

6880 
Te¡Li¡’”
* 
deçuÉ_xml_´š‹r
 =

6881 
Ãw
 
	`Te¡Li¡’”
(
nuÎ±r
, &
deçuÉ_xml_´š‹r_is_de¡royed
);

6882 
Te¡Li¡’”
* 
exŒa_li¡’”
 =

6883 
Ãw
 
	`Te¡Li¡’”
(
nuÎ±r
, &
exŒa_li¡’”_is_de¡royed
);

6886 
Te¡Ev’tLi¡’”s
 
li¡’”s
;

6887 
Te¡Ev’tLi¡’”sAcûssÜ
::
	`S‘DeçuÉResuÉPrš‹r
(&
li¡’”s
,

6888 
deçuÉ_»suÉ_´š‹r
);

6889 
Te¡Ev’tLi¡’”sAcûssÜ
::
	`S‘DeçuÉXmlG’”©Ü
(&
li¡’”s
,

6890 
deçuÉ_xml_´š‹r
);

6891 
li¡’”s
.
	`Aµ’d
(
exŒa_li¡’”
);

6893 
	`EXPECT_TRUE
(
deçuÉ_»suÉ_´š‹r_is_de¡royed
);

6894 
	`EXPECT_TRUE
(
deçuÉ_xml_´š‹r_is_de¡royed
);

6895 
	`EXPECT_TRUE
(
exŒa_li¡’”_is_de¡royed
);

6896 
	}
}

6900 
	$TEST
(
Te¡Ev’tLi¡’”sTe¡
, 
Aµ’d
) {

6901 
Ú_¡¬t_couÁ”
 = 0;

6902 
boŞ
 
is_de¡royed
 = 
çl£
;

6903 
Te¡Li¡’”
* 
li¡’”
 = 
Ãw
 
	`Te¡Li¡’”
(&
Ú_¡¬t_couÁ”
, &
is_de¡royed
);

6905 
Te¡Ev’tLi¡’”s
 
li¡’”s
;

6906 
li¡’”s
.
	`Aµ’d
(
li¡’”
);

6907 
Te¡Ev’tLi¡’”sAcûssÜ
::
	`G‘R•—‹r
(&
li¡’”s
)->
	`OnTe¡Prog¿mS¹
(

6908 *
Un™Te¡
::
	`G‘In¡ªû
());

6909 
	`EXPECT_EQ
(1, 
Ú_¡¬t_couÁ”
);

6911 
	`EXPECT_TRUE
(
is_de¡royed
);

6912 
	}
}

6917 şas 
	cSequ’ûTe¡šgLi¡’”
 : 
public
 
Em±yTe¡Ev’tLi¡’”
 {

6918 
public
:

6919 
Sequ’ûTe¡šgLi¡’”
(
¡d
::
veùÜ
<¡d::
¡ršg
>* veùÜ, cÚ¡ * 
id
)

6920 : 
veùÜ_
(
veùÜ
), 
	$id_
(
id
) {}

6922 
´Ùeùed
:

6923 
	$OnTe¡Prog¿mS¹
(cÚ¡ 
Un™Te¡
& ) 
ov”ride
 {

6924 
veùÜ_
->
	`push_back
(
	`G‘Ev’tDesütiÚ
("OnTestProgramStart"));

6925 
	}
}

6927 
	$OnTe¡Prog¿mEnd
(cÚ¡ 
Un™Te¡
& ) 
ov”ride
 {

6928 
veùÜ_
->
	`push_back
(
	`G‘Ev’tDesütiÚ
("OnTestProgramEnd"));

6929 
	}
}

6931 
	$OnTe¡I‹¿tiÚS¹
(cÚ¡ 
Un™Te¡
& ,

6932 è
ov”ride
 {

6933 
veùÜ_
->
	`push_back
(
	`G‘Ev’tDesütiÚ
("OnTestIterationStart"));

6934 
	}
}

6936 
	$OnTe¡I‹¿tiÚEnd
(cÚ¡ 
Un™Te¡
& ,

6937 è
ov”ride
 {

6938 
veùÜ_
->
	`push_back
(
	`G‘Ev’tDesütiÚ
("OnTestIterationEnd"));

6939 
	}
}

6941 
	g´iv©e
:

6942 
¡d
::
¡ršg
 
	$G‘Ev’tDesütiÚ
(cÚ¡ * 
m‘hod
) {

6943 
Mes§ge
 
mes§ge
;

6944 
mes§ge
 << 
id_
 << "." << 
m‘hod
;

6945  
mes§ge
.
	`G‘SŒšg
();

6946 
	}
}

6948 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
>* 
veùÜ_
;

6949 cÚ¡ * cÚ¡ 
	gid_
;

6951 
GTEST_DISALLOW_COPY_AND_ASSIGN_
(
Sequ’ûTe¡šgLi¡’”
);

6954 
	$TEST
(
Ev’tLi¡’”Te¡
, 
Aµ’dK“psOrd”
) {

6955 
¡d
::
veùÜ
<¡d::
¡ršg
> 
vec
;

6956 
Te¡Ev’tLi¡’”s
 
li¡’”s
;

6957 
li¡’”s
.
	`Aµ’d
(
Ãw
 
	`Sequ’ûTe¡šgLi¡’”
(&
vec
, "1st"));

6958 
li¡’”s
.
	`Aµ’d
(
Ãw
 
	`Sequ’ûTe¡šgLi¡’”
(&
vec
, "2nd"));

6959 
li¡’”s
.
	`Aµ’d
(
Ãw
 
	`Sequ’ûTe¡šgLi¡’”
(&
vec
, "3rd"));

6961 
Te¡Ev’tLi¡’”sAcûssÜ
::
	`G‘R•—‹r
(&
li¡’”s
)->
	`OnTe¡Prog¿mS¹
(

6962 *
Un™Te¡
::
	`G‘In¡ªû
());

6963 
	`ASSERT_EQ
(3U, 
vec
.
	`size
());

6964 
	`EXPECT_STREQ
("1¡.OnTe¡Prog¿mS¹", 
vec
[0].
	`c_¡r
());

6965 
	`EXPECT_STREQ
("2nd.OnTe¡Prog¿mS¹", 
vec
[1].
	`c_¡r
());

6966 
	`EXPECT_STREQ
("3rd.OnTe¡Prog¿mS¹", 
vec
[2].
	`c_¡r
());

6968 
vec
.
	`ş—r
();

6969 
Te¡Ev’tLi¡’”sAcûssÜ
::
	`G‘R•—‹r
(&
li¡’”s
)->
	`OnTe¡Prog¿mEnd
(

6970 *
Un™Te¡
::
	`G‘In¡ªû
());

6971 
	`ASSERT_EQ
(3U, 
vec
.
	`size
());

6972 
	`EXPECT_STREQ
("3rd.OnTe¡Prog¿mEnd", 
vec
[0].
	`c_¡r
());

6973 
	`EXPECT_STREQ
("2nd.OnTe¡Prog¿mEnd", 
vec
[1].
	`c_¡r
());

6974 
	`EXPECT_STREQ
("1¡.OnTe¡Prog¿mEnd", 
vec
[2].
	`c_¡r
());

6976 
vec
.
	`ş—r
();

6977 
Te¡Ev’tLi¡’”sAcûssÜ
::
	`G‘R•—‹r
(&
li¡’”s
)->
	`OnTe¡I‹¿tiÚS¹
(

6978 *
Un™Te¡
::
	`G‘In¡ªû
(), 0);

6979 
	`ASSERT_EQ
(3U, 
vec
.
	`size
());

6980 
	`EXPECT_STREQ
("1¡.OnTe¡I‹¿tiÚS¹", 
vec
[0].
	`c_¡r
());

6981 
	`EXPECT_STREQ
("2nd.OnTe¡I‹¿tiÚS¹", 
vec
[1].
	`c_¡r
());

6982 
	`EXPECT_STREQ
("3rd.OnTe¡I‹¿tiÚS¹", 
vec
[2].
	`c_¡r
());

6984 
vec
.
	`ş—r
();

6985 
Te¡Ev’tLi¡’”sAcûssÜ
::
	`G‘R•—‹r
(&
li¡’”s
)->
	`OnTe¡I‹¿tiÚEnd
(

6986 *
Un™Te¡
::
	`G‘In¡ªû
(), 0);

6987 
	`ASSERT_EQ
(3U, 
vec
.
	`size
());

6988 
	`EXPECT_STREQ
("3rd.OnTe¡I‹¿tiÚEnd", 
vec
[0].
	`c_¡r
());

6989 
	`EXPECT_STREQ
("2nd.OnTe¡I‹¿tiÚEnd", 
vec
[1].
	`c_¡r
());

6990 
	`EXPECT_STREQ
("1¡.OnTe¡I‹¿tiÚEnd", 
vec
[2].
	`c_¡r
());

6991 
	}
}

6995 
	$TEST
(
Te¡Ev’tLi¡’”sTe¡
, 
R–—£
) {

6996 
Ú_¡¬t_couÁ”
 = 0;

6997 
boŞ
 
is_de¡royed
 = 
çl£
;

7001 
Te¡Li¡’”
* 
li¡’”
 = 
Ãw
 
	`Te¡Li¡’”
(&
Ú_¡¬t_couÁ”
, &
is_de¡royed
);

7003 
Te¡Ev’tLi¡’”s
 
li¡’”s
;

7004 
li¡’”s
.
	`Aµ’d
(
li¡’”
);

7005 
	`EXPECT_EQ
(
li¡’”
, 
li¡’”s
.
	`R–—£
(listener));

7006 
Te¡Ev’tLi¡’”sAcûssÜ
::
	`G‘R•—‹r
(&
li¡’”s
)->
	`OnTe¡Prog¿mS¹
(

7007 *
Un™Te¡
::
	`G‘In¡ªû
());

7008 
	`EXPECT_TRUE
(
li¡’”s
.
	`R–—£
(
li¡’”
è=ğ
nuÎ±r
);

7010 
	`EXPECT_EQ
(0, 
Ú_¡¬t_couÁ”
);

7011 
	`EXPECT_FALSE
(
is_de¡royed
);

7012 
d–‘e
 
li¡’”
;

7013 
	}
}

7016 
	$TEST
(
Ev’tLi¡’”Te¡
, 
Suµ»ssEv’tFÜw¬dšg
) {

7017 
Ú_¡¬t_couÁ”
 = 0;

7018 
Te¡Li¡’”
* 
li¡’”
 = 
Ãw
 
	`Te¡Li¡’”
(&
Ú_¡¬t_couÁ”
, 
nuÎ±r
);

7020 
Te¡Ev’tLi¡’”s
 
li¡’”s
;

7021 
li¡’”s
.
	`Aµ’d
(
li¡’”
);

7022 
	`ASSERT_TRUE
(
Te¡Ev’tLi¡’”sAcûssÜ
::
	`Ev’tFÜw¬dšgEÇbËd
(
li¡’”s
));

7023 
Te¡Ev’tLi¡’”sAcûssÜ
::
	`Suµ»ssEv’tFÜw¬dšg
(&
li¡’”s
);

7024 
	`ASSERT_FALSE
(
Te¡Ev’tLi¡’”sAcûssÜ
::
	`Ev’tFÜw¬dšgEÇbËd
(
li¡’”s
));

7025 
Te¡Ev’tLi¡’”sAcûssÜ
::
	`G‘R•—‹r
(&
li¡’”s
)->
	`OnTe¡Prog¿mS¹
(

7026 *
Un™Te¡
::
	`G‘In¡ªû
());

7027 
	`EXPECT_EQ
(0, 
Ú_¡¬t_couÁ”
);

7028 
	}
}

7032 
	$TEST
(
Ev’tLi¡’”D—thTe¡
, 
Ev’tsNÙFÜw¬dedInD—thTe¡Sub´eûs£s
) {

7033 
	`EXPECT_DEATH_IF_SUPPORTED
({

7034 
	`GTEST_CHECK_
(
Te¡Ev’tLi¡’”sAcûssÜ
::
	`Ev’tFÜw¬dšgEÇbËd
(

7035 *
	`G‘Un™Te¡Im¶
()->
	`li¡’”s
())) << "expected failure";},

7037 
	}
}

7042 
	$TEST
(
Ev’tLi¡’”Te¡
, 
deçuÉ_»suÉ_´š‹r
) {

7043 
Ú_¡¬t_couÁ”
 = 0;

7044 
boŞ
 
is_de¡royed
 = 
çl£
;

7045 
Te¡Li¡’”
* 
li¡’”
 = 
Ãw
 
	`Te¡Li¡’”
(&
Ú_¡¬t_couÁ”
, &
is_de¡royed
);

7047 
Te¡Ev’tLi¡’”s
 
li¡’”s
;

7048 
Te¡Ev’tLi¡’”sAcûssÜ
::
	`S‘DeçuÉResuÉPrš‹r
(&
li¡’”s
, 
li¡’”
);

7050 
	`EXPECT_EQ
(
li¡’”
, 
li¡’”s
.
	`deçuÉ_»suÉ_´š‹r
());

7052 
Te¡Ev’tLi¡’”sAcûssÜ
::
	`G‘R•—‹r
(&
li¡’”s
)->
	`OnTe¡Prog¿mS¹
(

7053 *
Un™Te¡
::
	`G‘In¡ªû
());

7055 
	`EXPECT_EQ
(1, 
Ú_¡¬t_couÁ”
);

7059 
Te¡Ev’tLi¡’”sAcûssÜ
::
	`S‘DeçuÉResuÉPrš‹r
(&
li¡’”s
, 
nuÎ±r
);

7061 
	`EXPECT_TRUE
(
li¡’”s
.
	`deçuÉ_»suÉ_´š‹r
(è=ğ
nuÎ±r
);

7062 
	`EXPECT_TRUE
(
is_de¡royed
);

7066 
Te¡Ev’tLi¡’”sAcûssÜ
::
	`G‘R•—‹r
(&
li¡’”s
)->
	`OnTe¡Prog¿mS¹
(

7067 *
Un™Te¡
::
	`G‘In¡ªû
());

7068 
	`EXPECT_EQ
(1, 
Ú_¡¬t_couÁ”
);

7069 
	}
}

7073 
	$TEST
(
Ev’tLi¡’”Te¡
, 
RemovšgDeçuÉResuÉPrš‹rWÜks
) {

7074 
Ú_¡¬t_couÁ”
 = 0;

7075 
boŞ
 
is_de¡royed
 = 
çl£
;

7079 
Te¡Li¡’”
* 
li¡’”
 = 
Ãw
 
	`Te¡Li¡’”
(&
Ú_¡¬t_couÁ”
, &
is_de¡royed
);

7081 
Te¡Ev’tLi¡’”s
 
li¡’”s
;

7082 
Te¡Ev’tLi¡’”sAcûssÜ
::
	`S‘DeçuÉResuÉPrš‹r
(&
li¡’”s
, 
li¡’”
);

7084 
	`EXPECT_EQ
(
li¡’”
, 
li¡’”s
.
	`R–—£
(listener));

7085 
	`EXPECT_TRUE
(
li¡’”s
.
	`deçuÉ_»suÉ_´š‹r
(è=ğ
nuÎ±r
);

7086 
	`EXPECT_FALSE
(
is_de¡royed
);

7089 
Te¡Ev’tLi¡’”sAcûssÜ
::
	`G‘R•—‹r
(&
li¡’”s
)->
	`OnTe¡Prog¿mS¹
(

7090 *
Un™Te¡
::
	`G‘In¡ªû
());

7091 
	`EXPECT_EQ
(0, 
Ú_¡¬t_couÁ”
);

7094 
	`EXPECT_FALSE
(
is_de¡royed
);

7095 
d–‘e
 
li¡’”
;

7096 
	}
}

7101 
	$TEST
(
Ev’tLi¡’”Te¡
, 
deçuÉ_xml_g’”©Ü
) {

7102 
Ú_¡¬t_couÁ”
 = 0;

7103 
boŞ
 
is_de¡royed
 = 
çl£
;

7104 
Te¡Li¡’”
* 
li¡’”
 = 
Ãw
 
	`Te¡Li¡’”
(&
Ú_¡¬t_couÁ”
, &
is_de¡royed
);

7106 
Te¡Ev’tLi¡’”s
 
li¡’”s
;

7107 
Te¡Ev’tLi¡’”sAcûssÜ
::
	`S‘DeçuÉXmlG’”©Ü
(&
li¡’”s
, 
li¡’”
);

7109 
	`EXPECT_EQ
(
li¡’”
, 
li¡’”s
.
	`deçuÉ_xml_g’”©Ü
());

7111 
Te¡Ev’tLi¡’”sAcûssÜ
::
	`G‘R•—‹r
(&
li¡’”s
)->
	`OnTe¡Prog¿mS¹
(

7112 *
Un™Te¡
::
	`G‘In¡ªû
());

7114 
	`EXPECT_EQ
(1, 
Ú_¡¬t_couÁ”
);

7118 
Te¡Ev’tLi¡’”sAcûssÜ
::
	`S‘DeçuÉXmlG’”©Ü
(&
li¡’”s
, 
nuÎ±r
);

7120 
	`EXPECT_TRUE
(
li¡’”s
.
	`deçuÉ_xml_g’”©Ü
(è=ğ
nuÎ±r
);

7121 
	`EXPECT_TRUE
(
is_de¡royed
);

7125 
Te¡Ev’tLi¡’”sAcûssÜ
::
	`G‘R•—‹r
(&
li¡’”s
)->
	`OnTe¡Prog¿mS¹
(

7126 *
Un™Te¡
::
	`G‘In¡ªû
());

7127 
	`EXPECT_EQ
(1, 
Ú_¡¬t_couÁ”
);

7128 
	}
}

7132 
	$TEST
(
Ev’tLi¡’”Te¡
, 
RemovšgDeçuÉXmlG’”©ÜWÜks
) {

7133 
Ú_¡¬t_couÁ”
 = 0;

7134 
boŞ
 
is_de¡royed
 = 
çl£
;

7138 
Te¡Li¡’”
* 
li¡’”
 = 
Ãw
 
	`Te¡Li¡’”
(&
Ú_¡¬t_couÁ”
, &
is_de¡royed
);

7140 
Te¡Ev’tLi¡’”s
 
li¡’”s
;

7141 
Te¡Ev’tLi¡’”sAcûssÜ
::
	`S‘DeçuÉXmlG’”©Ü
(&
li¡’”s
, 
li¡’”
);

7143 
	`EXPECT_EQ
(
li¡’”
, 
li¡’”s
.
	`R–—£
(listener));

7144 
	`EXPECT_TRUE
(
li¡’”s
.
	`deçuÉ_xml_g’”©Ü
(è=ğ
nuÎ±r
);

7145 
	`EXPECT_FALSE
(
is_de¡royed
);

7148 
Te¡Ev’tLi¡’”sAcûssÜ
::
	`G‘R•—‹r
(&
li¡’”s
)->
	`OnTe¡Prog¿mS¹
(

7149 *
Un™Te¡
::
	`G‘In¡ªû
());

7150 
	`EXPECT_EQ
(0, 
Ú_¡¬t_couÁ”
);

7153 
	`EXPECT_FALSE
(
is_de¡royed
);

7154 
d–‘e
 
li¡’”
;

7155 
	}
}

7162 
	$GTEST_TEST
(
AÉ”ÇtiveNameTe¡
, 
WÜks
) {

7163 
	`GTEST_SUCCEED
() << "OK";

7166 
	`EXPECT_FATAL_FAILURE
(
	`GTEST_FAIL
() << "Anƒxpected failure",

7171 
	`GTEST_ASSERT_EQ
(0, 0);

7172 
	`EXPECT_FATAL_FAILURE
(
	`GTEST_ASSERT_EQ
(0, 1) << "Anƒxpected failure",

7174 
	`EXPECT_FATAL_FAILURE
(
	`GTEST_ASSERT_EQ
(1, 0) << "Anƒxpected failure",

7177 
	`GTEST_ASSERT_NE
(0, 1);

7178 
	`GTEST_ASSERT_NE
(1, 0);

7179 
	`EXPECT_FATAL_FAILURE
(
	`GTEST_ASSERT_NE
(0, 0) << "Anƒxpected failure",

7182 
	`GTEST_ASSERT_LE
(0, 0);

7183 
	`GTEST_ASSERT_LE
(0, 1);

7184 
	`EXPECT_FATAL_FAILURE
(
	`GTEST_ASSERT_LE
(1, 0) << "Anƒxpected failure",

7187 
	`GTEST_ASSERT_LT
(0, 1);

7188 
	`EXPECT_FATAL_FAILURE
(
	`GTEST_ASSERT_LT
(0, 0) << "Anƒxpected failure",

7190 
	`EXPECT_FATAL_FAILURE
(
	`GTEST_ASSERT_LT
(1, 0) << "Anƒxpected failure",

7193 
	`GTEST_ASSERT_GE
(0, 0);

7194 
	`GTEST_ASSERT_GE
(1, 0);

7195 
	`EXPECT_FATAL_FAILURE
(
	`GTEST_ASSERT_GE
(0, 1) << "Anƒxpected failure",

7198 
	`GTEST_ASSERT_GT
(1, 0);

7199 
	`EXPECT_FATAL_FAILURE
(
	`GTEST_ASSERT_GT
(0, 1) << "Anƒxpected failure",

7201 
	`EXPECT_FATAL_FAILURE
(
	`GTEST_ASSERT_GT
(1, 1) << "Anƒxpected failure",

7203 
	}
}

7208 şas 
	cCÚv”siÚH–³rBa£
 {};

7209 şas 
	cCÚv”siÚH–³rD”ived
 : 
public
 
CÚv”siÚH–³rBa£
 {};

7211 
	sHasDebugSŒšgM‘hods
 {

7212 
	m¡d
::
¡ršg
 
DebugSŒšg
() const {  ""; }

7213 
	m¡d
::
¡ršg
 
ShÜtDebugSŒšg
() const {  ""; }

7216 
	gInh”™sDebugSŒšgM‘hods
 : 
public
 
HasDebugSŒšgM‘hods
 {};

7218 
	sWrÚgTy³DebugSŒšgM‘hod
 {

7219 
	m¡d
::
¡ršg
 
DebugSŒšg
() const {  ""; }

7220 
ShÜtDebugSŒšg
() const {  1; }

7223 
	sNÙCÚ¡DebugSŒšgM‘hod
 {

7224 
	m¡d
::
¡ršg
 
DebugSŒšg
() {  ""; }

7225 
	m¡d
::
¡ršg
 
ShÜtDebugSŒšg
() const {  ""; }

7228 
	sMissšgDebugSŒšgM‘hod
 {

7229 
	m¡d
::
¡ršg
 
DebugSŒšg
() {  ""; }

7232 
	gIncom¶‘eTy³
;

7236 
	$TEST
(
HasDebugSŒšgAndShÜtDebugSŒšgTe¡
, 
V®ueIsCompeTimeCÚ¡ªt
) {

7237 
	`GTEST_COMPILE_ASSERT_
(

7238 
HasDebugSŒšgAndShÜtDebugSŒšg
<
HasDebugSŒšgM‘hods
>::
v®ue
,

7239 
cÚ¡_Œue
);

7240 
	`GTEST_COMPILE_ASSERT_
(

7241 
HasDebugSŒšgAndShÜtDebugSŒšg
<
Inh”™sDebugSŒšgM‘hods
>::
v®ue
,

7242 
cÚ¡_Œue
);

7243 
	`GTEST_COMPILE_ASSERT_
(
HasDebugSŒšgAndShÜtDebugSŒšg
<

7244 cÚ¡ 
Inh”™sDebugSŒšgM‘hods
>::
v®ue
,

7245 
cÚ¡_Œue
);

7246 
	`GTEST_COMPILE_ASSERT_
(

7247 !
HasDebugSŒšgAndShÜtDebugSŒšg
<
WrÚgTy³DebugSŒšgM‘hod
>::
v®ue
,

7248 
cÚ¡_çl£
);

7249 
	`GTEST_COMPILE_ASSERT_
(

7250 !
HasDebugSŒšgAndShÜtDebugSŒšg
<
NÙCÚ¡DebugSŒšgM‘hod
>::
v®ue
,

7251 
cÚ¡_çl£
);

7252 
	`GTEST_COMPILE_ASSERT_
(

7253 !
HasDebugSŒšgAndShÜtDebugSŒšg
<
MissšgDebugSŒšgM‘hod
>::
v®ue
,

7254 
cÚ¡_çl£
);

7255 
	`GTEST_COMPILE_ASSERT_
(

7256 !
HasDebugSŒšgAndShÜtDebugSŒšg
<
Incom¶‘eTy³
>::
v®ue
, 
cÚ¡_çl£
);

7257 
	`GTEST_COMPILE_ASSERT_
(!
HasDebugSŒšgAndShÜtDebugSŒšg
<>::
v®ue
,

7258 
cÚ¡_çl£
);

7259 
	}
}

7263 
	$TEST
(
HasDebugSŒšgAndShÜtDebugSŒšgTe¡
,

7264 
V®ueIsTrueWh’Ty³HasDebugSŒšgAndShÜtDebugSŒšg
) {

7265 
	`EXPECT_TRUE
(

7266 
HasDebugSŒšgAndShÜtDebugSŒšg
<
Inh”™sDebugSŒšgM‘hods
>::
v®ue
);

7267 
	}
}

7271 
	$TEST
(
HasDebugSŒšgAndShÜtDebugSŒšgTe¡
,

7272 
V®ueIsF®£Wh’Ty³IsNÙAPrÙocŞMes§ge
) {

7273 
	`EXPECT_FALSE
(
HasDebugSŒšgAndShÜtDebugSŒšg
<>::
v®ue
);

7274 
	`EXPECT_FALSE
(

7275 
HasDebugSŒšgAndShÜtDebugSŒšg
<cÚ¡ 
CÚv”siÚH–³rBa£
>::
v®ue
);

7276 
	}
}

7280 
	g‹m¶©e
 <
ty³Çme
 
	gT1
,y³Çm
	gT2
>

7281 
	$Te¡GTe¡RemoveReã»nûAndCÚ¡
() {

7282 
	`¡©ic_as£¹
(
¡d
::
is_§me
<
T1
, 
	`GTEST_REMOVE_REFERENCE_AND_CONST_
(
T2
)>::
v®ue
,

7284 
	}
}

7286 
	$TEST
(
RemoveReã»nûToCÚ¡Te¡
, 
WÜks
) {

7287 
Te¡GTe¡RemoveReã»nûAndCÚ¡
<, >();

7288 
Te¡GTe¡RemoveReã»nûAndCÚ¡
<, &>();

7289 
Te¡GTe¡RemoveReã»nûAndCÚ¡
<, const >();

7290 
Te¡GTe¡RemoveReã»nûAndCÚ¡
<, const &>();

7291 
Te¡GTe¡RemoveReã»nûAndCÚ¡
<const *, const *>();

7292 
	}
}

7296 
	g‹m¶©e
 <
ty³Çme
 
	gT1
,y³Çm
	gT2
>

7297 
	$Te¡GTe¡Reã»nûToCÚ¡
() {

7298 
	`¡©ic_as£¹
(
¡d
::
is_§me
<
T1
, 
	`GTEST_REFERENCE_TO_CONST_
(
T2
)>::
v®ue
,

7300 
	}
}

7302 
	$TEST
(
GTe¡Reã»nûToCÚ¡Te¡
, 
WÜks
) {

7303 
Te¡GTe¡Reã»nûToCÚ¡
<const &, >();

7304 
Te¡GTe¡Reã»nûToCÚ¡
<const &, const >();

7305 
Te¡GTe¡Reã»nûToCÚ¡
<const &, >();

7306 
Te¡GTe¡Reã»nûToCÚ¡
<cÚ¡ 
¡d
::
¡ršg
&, const std::string&>();

7307 
	}
}

7312 şas 
	cNÚCÚš”
 {};

7314 
	$TEST
(
IsCÚš”Te¡Te¡
, 
WÜksFÜNÚCÚš”
) {

7315 
	`EXPECT_EQ
((
IsNÙCÚš”
), (
IsCÚš”Te¡
<>(0)));

7316 
	`EXPECT_EQ
((
IsNÙCÚš”
), (
IsCÚš”Te¡
<[5]>(0)));

7317 
	`EXPECT_EQ
((
IsNÙCÚš”
), (
IsCÚš”Te¡
<
NÚCÚš”
>(0)));

7318 
	}
}

7320 
	$TEST
(
IsCÚš”Te¡Te¡
, 
WÜksFÜCÚš”
) {

7321 
	`EXPECT_EQ
((
IsCÚš”
),

7322 (
IsCÚš”Te¡
<
¡d
::
veùÜ
<
boŞ
> >(0)));

7323 
	`EXPECT_EQ
((
IsCÚš”
),

7324 (
IsCÚš”Te¡
<
¡d
::
m­
<, > >(0)));

7325 
	}
}

7327 
	sCÚ¡OÆyCÚš”W™hPoš‹rI‹¿tÜ
 {

7328 
usšg
 
	mcÚ¡_™”©Ü
 = *;

7329 
cÚ¡_™”©Ü
 
begš
() const;

7330 
cÚ¡_™”©Ü
 
’d
() const;

7333 
	sCÚ¡OÆyCÚš”W™hCÏssI‹¿tÜ
 {

7334 
	scÚ¡_™”©Ü
 {

7335 cÚ¡ & 
	mİ”©Ü
*() const;

7336 
	mcÚ¡_™”©Ü
& 
	mİ”©Ü
++( );

7338 
cÚ¡_™”©Ü
 
begš
() const;

7339 
cÚ¡_™”©Ü
 
’d
() const;

7342 
	$TEST
(
IsCÚš”Te¡Te¡
, 
CÚ¡OÆyCÚš”
) {

7343 
	`EXPECT_EQ
((
IsCÚš”
),

7344 (
IsCÚš”Te¡
<
CÚ¡OÆyCÚš”W™hPoš‹rI‹¿tÜ
>(0)));

7345 
	`EXPECT_EQ
((
IsCÚš”
),

7346 (
IsCÚš”Te¡
<
CÚ¡OÆyCÚš”W™hCÏssI‹¿tÜ
>(0)));

7347 
	}
}

7350 
	sAHashTabË
 {

7351 
	thash”
;

7353 
	sNÙR—ÎyAHashTabË
 {

7354 
	thash”
;

7355 
	t»v”£_™”©Ü
;

7357 
	$TEST
(
IsHashTabË
, 
Basic
) {

7358 
	`EXPECT_TRUE
(
‹¡šg
::
š‹º®
::
IsHashTabË
<
AHashTabË
>::
v®ue
);

7359 
	`EXPECT_FALSE
(
‹¡šg
::
š‹º®
::
IsHashTabË
<
NÙR—ÎyAHashTabË
>::
v®ue
);

7360 
	`EXPECT_FALSE
(
‹¡šg
::
š‹º®
::
IsHashTabË
<
¡d
::
veùÜ
<>>::
v®ue
);

7361 
	`EXPECT_TRUE
(
‹¡šg
::
š‹º®
::
IsHashTabË
<
¡d
::
unÜd”ed_£t
<>>::
v®ue
);

7362 
	}
}

7366 
	$TEST
(
A¼ayEqTe¡
, 
WÜksFÜDeg’”©edA¼ays
) {

7367 
	`EXPECT_TRUE
(
	`A¼ayEq
(5, 5L));

7368 
	`EXPECT_FALSE
(
	`A¼ayEq
('a', 0));

7369 
	}
}

7371 
	$TEST
(
A¼ayEqTe¡
, 
WÜksFÜOÃDim’siÚ®A¼ays
) {

7373 cÚ¡ 
a
[] = { 0, 1 };

7374 
b
[] = { 0, 1 };

7375 
	`EXPECT_TRUE
(
	`A¼ayEq
(
a
, 
b
));

7376 
	`EXPECT_TRUE
(
	`A¼ayEq
(
a
, 2, 
b
));

7378 
b
[0] = 2;

7379 
	`EXPECT_FALSE
(
	`A¼ayEq
(
a
, 
b
));

7380 
	`EXPECT_FALSE
(
	`A¼ayEq
(
a
, 1, 
b
));

7381 
	}
}

7383 
	$TEST
(
A¼ayEqTe¡
, 
WÜksFÜTwoDim’siÚ®A¼ays
) {

7384 cÚ¡ 
a
[][3] = { "hi", "lo" };

7385 cÚ¡ 
b
[][3] = { "hi", "lo" };

7386 cÚ¡ 
c
[][3] = { "hi", "li" };

7388 
	`EXPECT_TRUE
(
	`A¼ayEq
(
a
, 
b
));

7389 
	`EXPECT_TRUE
(
	`A¼ayEq
(
a
, 2, 
b
));

7391 
	`EXPECT_FALSE
(
	`A¼ayEq
(
a
, 
c
));

7392 
	`EXPECT_FALSE
(
	`A¼ayEq
(
a
, 2, 
c
));

7393 
	}
}

7397 
	$TEST
(
A¼ayAw¬eFšdTe¡
, 
WÜksFÜOÃDim’siÚ®A¼ay
) {

7398 cÚ¡ 
a
[] = "hello";

7399 
	`EXPECT_EQ
(
a
 + 4, 
	`A¼ayAw¬eFšd
(a,‡ + 5, 'o'));

7400 
	`EXPECT_EQ
(
a
 + 5, 
	`A¼ayAw¬eFšd
(a,‡ + 5, 'x'));

7401 
	}
}

7403 
	$TEST
(
A¼ayAw¬eFšdTe¡
, 
WÜksFÜTwoDim’siÚ®A¼ay
) {

7404 
a
[][2] = { { 0, 1 }, { 2, 3 }, { 4, 5 } };

7405 cÚ¡ 
b
[2] = { 2, 3 };

7406 
	`EXPECT_EQ
(
a
 + 1, 
	`A¼ayAw¬eFšd
×,‡ + 3, 
b
));

7408 cÚ¡ 
c
[2] = { 6, 7 };

7409 
	`EXPECT_EQ
(
a
 + 3, 
	`A¼ayAw¬eFšd
×,‡ + 3, 
c
));

7410 
	}
}

7414 
	$TEST
(
CİyA¼ayTe¡
, 
WÜksFÜDeg’”©edA¼ays
) {

7415 
n
 = 0;

7416 
	`CİyA¼ay
('a', &
n
);

7417 
	`EXPECT_EQ
('a', 
n
);

7418 
	}
}

7420 
	$TEST
(
CİyA¼ayTe¡
, 
WÜksFÜOÃDim’siÚ®A¼ays
) {

7421 cÚ¡ 
a
[3] = "hi";

7422 
b
[3];

7423 #iâdeà
__BORLANDC__


7424 
	`CİyA¼ay
(
a
, &
b
);

7425 
	`EXPECT_TRUE
(
	`A¼ayEq
(
a
, 
b
));

7428 
c
[3];

7429 
	`CİyA¼ay
(
a
, 3, 
c
);

7430 
	`EXPECT_TRUE
(
	`A¼ayEq
(
a
, 
c
));

7431 
	}
}

7433 
	$TEST
(
CİyA¼ayTe¡
, 
WÜksFÜTwoDim’siÚ®A¼ays
) {

7434 cÚ¡ 
a
[2][3] = { { 0, 1, 2 }, { 3, 4, 5 } };

7435 
b
[2][3];

7436 #iâdeà
__BORLANDC__


7437 
	`CİyA¼ay
(
a
, &
b
);

7438 
	`EXPECT_TRUE
(
	`A¼ayEq
(
a
, 
b
));

7441 
c
[2][3];

7442 
	`CİyA¼ay
(
a
, 2, 
c
);

7443 
	`EXPECT_TRUE
(
	`A¼ayEq
(
a
, 
c
));

7444 
	}
}

7448 
	$TEST
(
N©iveA¼ayTe¡
, 
CÚ¡ruùÜFromA¼ayWÜks
) {

7449 cÚ¡ 
a
[3] = { 0, 1, 2 };

7450 
N©iveA¼ay
<> 
	`Ç
(
a
, 3, 
	`R–©iÚToSourûReã»nû
());

7451 
	`EXPECT_EQ
(3U, 
Ç
.
	`size
());

7452 
	`EXPECT_EQ
(
a
, 
Ç
.
	`begš
());

7453 
	}
}

7455 
	$TEST
(
N©iveA¼ayTe¡
, 
C»©esAndD–‘esCİyOfA¼ayWh’AskedTo
) {

7456 
	tA¼ay
[2];

7457 
A¼ay
* 
a
 = 
Ãw
 Array[1];

7458 (*
a
)[0] = 0;

7459 (*
a
)[1] = 1;

7460 
N©iveA¼ay
<> 
	`Ç
(*
a
, 2, 
	`R–©iÚToSourûCİy
());

7461 
	`EXPECT_NE
(*
a
, 
Ç
.
	`begš
());

7462 
d–‘e
[] 
a
;

7463 
	`EXPECT_EQ
(0, 
Ç
.
	`begš
()[0]);

7464 
	`EXPECT_EQ
(1, 
Ç
.
	`begš
()[1]);

7468 
	}
}

7470 
	$TEST
(
N©iveA¼ayTe¡
, 
Ty³Memb”sA»CÜ»ù
) {

7471 
SticAs£¹Ty³Eq
<, 
N©iveA¼ay
<>::
v®ue_ty³
>();

7472 
SticAs£¹Ty³Eq
<[2], 
N©iveA¼ay
<[2]>::
v®ue_ty³
>();

7474 
SticAs£¹Ty³Eq
<cÚ¡ *, 
N©iveA¼ay
<>::
cÚ¡_™”©Ü
>();

7475 
SticAs£¹Ty³Eq
<cÚ¡ 
	`boŞ
(*)[2], 
N©iveA¼ay
<
boŞ
[2]>::
cÚ¡_™”©Ü
>();

7476 
	}
}

7478 
	$TEST
(
N©iveA¼ayTe¡
, 
M‘hodsWÜk
) {

7479 cÚ¡ 
a
[3] = { 0, 1, 2 };

7480 
N©iveA¼ay
<> 
	`Ç
(
a
, 3, 
	`R–©iÚToSourûCİy
());

7481 
	`ASSERT_EQ
(3U, 
Ç
.
	`size
());

7482 
	`EXPECT_EQ
(3, 
Ç
.
	`’d
(è-‚a.
	`begš
());

7484 
N©iveA¼ay
<>::
cÚ¡_™”©Ü
 
™
 = 
Ç
.
	`begš
();

7485 
	`EXPECT_EQ
(0, *
™
);

7486 ++
™
;

7487 
	`EXPECT_EQ
(1, *
™
);

7488 
™
++;

7489 
	`EXPECT_EQ
(2, *
™
);

7490 ++
™
;

7491 
	`EXPECT_EQ
(
Ç
.
	`’d
(), 
™
);

7493 
	`EXPECT_TRUE
(
Ç
 ==‚a);

7495 
N©iveA¼ay
<> 
	`Ç2
(
a
, 3, 
	`R–©iÚToSourûReã»nû
());

7496 
	`EXPECT_TRUE
(
Ç
 =ğ
Ç2
);

7498 cÚ¡ 
b1
[3] = { 0, 1, 1 };

7499 cÚ¡ 
b2
[4] = { 0, 1, 2, 3 };

7500 
	`EXPECT_FALSE
(
Ç
 =ğ
N©iveA¼ay
<>(
b1
, 3, 
	`R–©iÚToSourûReã»nû
()));

7501 
	`EXPECT_FALSE
(
Ç
 =ğ
N©iveA¼ay
<>(
b2
, 4, 
	`R–©iÚToSourûCİy
()));

7502 
	}
}

7504 
	$TEST
(
N©iveA¼ayTe¡
, 
WÜksFÜTwoDim’siÚ®A¼ay
) {

7505 cÚ¡ 
a
[2][3] = { "hi", "lo" };

7506 
N©iveA¼ay
<[3]> 
	`Ç
(
a
, 2, 
	`R–©iÚToSourûReã»nû
());

7507 
	`ASSERT_EQ
(2U, 
Ç
.
	`size
());

7508 
	`EXPECT_EQ
(
a
, 
Ç
.
	`begš
());

7509 
	}
}

7512 
	$TEST
(
IndexSequ’û
, 
MakeIndexSequ’û
) {

7513 
usšg
 
‹¡šg
::
š‹º®
::
IndexSequ’û
;

7514 
usšg
 
‹¡šg
::
š‹º®
::
MakeIndexSequ’û
;

7515 
	`EXPECT_TRUE
(

7516 (
¡d
::
is_§me
<
IndexSequ’û
<>, 
MakeIndexSequ’û
<0>::
ty³
>::
v®ue
));

7517 
	`EXPECT_TRUE
(

7518 (
¡d
::
is_§me
<
IndexSequ’û
<0>, 
MakeIndexSequ’û
<1>::
ty³
>::
v®ue
));

7519 
	`EXPECT_TRUE
(

7520 (
¡d
::
is_§me
<
IndexSequ’û
<0, 1>, 
MakeIndexSequ’û
<2>::
ty³
>::
v®ue
));

7521 
	`EXPECT_TRUE
((

7522 
¡d
::
is_§me
<
IndexSequ’û
<0, 1, 2>, 
MakeIndexSequ’û
<3>::
ty³
>::
v®ue
));

7523 
	`EXPECT_TRUE
(

7524 (
¡d
::
is_ba£_of
<
IndexSequ’û
<0, 1, 2>, 
MakeIndexSequ’û
<3>>::
v®ue
));

7525 
	}
}

7528 
	$TEST
(
EËmFromLi¡
, 
Basic
) {

7529 
usšg
 
‹¡šg
::
š‹º®
::
EËmFromLi¡
;

7530 
	`EXPECT_TRUE
(

7531 (
¡d
::
is_§me
<, 
EËmFromLi¡
<0, , , >::
ty³
>::
v®ue
));

7532 
	`EXPECT_TRUE
(

7533 (
¡d
::
is_§me
<, 
EËmFromLi¡
<1, , , >::
ty³
>::
v®ue
));

7534 
	`EXPECT_TRUE
(

7535 (
¡d
::
is_§me
<, 
EËmFromLi¡
<2, , , >::
ty³
>::
v®ue
));

7536 
	`EXPECT_TRUE
((

7537 
¡d
::
is_§me
<, 
EËmFromLi¡
<7, , , , , , , ,

7538 , , , , >::
ty³
>::
v®ue
));

7539 
	}
}

7542 
	$TEST
(
FÏtTu¶e
, 
Basic
) {

7543 
usšg
 
‹¡šg
::
š‹º®
::
FÏtTu¶e
;

7545 
FÏtTu¶e
<, , cÚ¡ *> 
tu¶e
 = {};

7546 
	`EXPECT_EQ
(0, 
tu¶e
.
G‘
<0>());

7547 
	`EXPECT_EQ
(0.0, 
tu¶e
.
G‘
<1>());

7548 
	`EXPECT_EQ
(
nuÎ±r
, 
tu¶e
.
G‘
<2>());

7550 
tu¶e
 = 
FÏtTu¶e
<, , const *>(

7551 
‹¡šg
::
š‹º®
::
FÏtTu¶eCÚ¡ruùTag
{}, 7, 3.2, "Foo");

7552 
	`EXPECT_EQ
(7, 
tu¶e
.
G‘
<0>());

7553 
	`EXPECT_EQ
(3.2, 
tu¶e
.
G‘
<1>());

7554 
	`EXPECT_EQ
(
¡d
::
	`¡ršg
("Foo"), 
tu¶e
.
G‘
<2>());

7556 
tu¶e
.
G‘
<1>() = 5.1;

7557 
	`EXPECT_EQ
(5.1, 
tu¶e
.
G‘
<1>());

7558 
	}
}

7560 
	gÇme¥aû
 {

7561 
	g¡d
::
¡ršg
 
AddIÁToSŒšg
(
i
, cÚ¡ 
¡d
::¡ršg& 
s
) {

7562  
s
 + 
¡d
::
to_¡ršg
(
i
);

7566 
	$TEST
(
FÏtTu¶e
, 
Aµly
) {

7567 
usšg
 
‹¡šg
::
š‹º®
::
FÏtTu¶e
;

7569 
FÏtTu¶e
<, 
¡d
::
¡ršg
> 
tu¶e
{
‹¡šg
::
š‹º®
::
FÏtTu¶eCÚ¡ruùTag
{},

7573 
	`EXPECT_TRUE
(
tu¶e
.
	`Aµly
([](
i
, cÚ¡ 
¡d
::
¡ršg
& 
s
è-> 
boŞ
 {

7574  
i
 =ğ
¡©ic_ÿ¡
<>(
s
.
	`size
());

7578 
	`EXPECT_EQ
(
tu¶e
.
	`Aµly
(
AddIÁToSŒšg
), "Hello5");

7581 
tu¶e
.
	`Aµly
([](& 
i
, 
¡d
::
¡ršg
& 
s
) {

7582 ++
i
;

7583 
s
 += s;

7585 
	`EXPECT_EQ
(
tu¶e
.
G‘
<0>(), 6);

7586 
	`EXPECT_EQ
(
tu¶e
.
G‘
<1>(), "HelloHello");

7587 
	}
}

7589 
	sCÚ¡ruùiÚCouÁšg
 {

7590 
CÚ¡ruùiÚCouÁšg
(è{ ++
	mdeçuÉ_ùÜ_ÿÎs
; }

7591 ~
CÚ¡ruùiÚCouÁšg
(è{ ++
	mdtÜ_ÿÎs
; }

7592 
CÚ¡ruùiÚCouÁšg
(cÚ¡ CÚ¡ruùiÚCouÁšg&è{ ++
	mcİy_ùÜ_ÿÎs
; }

7593 
CÚ¡ruùiÚCouÁšg
(CÚ¡ruùiÚCouÁšg&&è
	mnÛxû±
 { ++
	mmove_ùÜ_ÿÎs
; }

7594 
	mCÚ¡ruùiÚCouÁšg
& 
	mİ”©Ü
=(cÚ¡ 
CÚ¡ruùiÚCouÁšg
&) {

7595 ++
cİy_assignm’t_ÿÎs
;

7596  *
	mthis
;

7598 
	mCÚ¡ruùiÚCouÁšg
& 
	mİ”©Ü
=(
CÚ¡ruùiÚCouÁšg
&&è
nÛxû±
 {

7599 ++
move_assignm’t_ÿÎs
;

7600  *
	mthis
;

7603 
Re£t
() {

7604 
	mdeçuÉ_ùÜ_ÿÎs
 = 0;

7605 
	mdtÜ_ÿÎs
 = 0;

7606 
	mcİy_ùÜ_ÿÎs
 = 0;

7607 
	mmove_ùÜ_ÿÎs
 = 0;

7608 
	mcİy_assignm’t_ÿÎs
 = 0;

7609 
	mmove_assignm’t_ÿÎs
 = 0;

7612 
	mdeçuÉ_ùÜ_ÿÎs
;

7613 
	mdtÜ_ÿÎs
;

7614 
	mcİy_ùÜ_ÿÎs
;

7615 
	mmove_ùÜ_ÿÎs
;

7616 
	mcİy_assignm’t_ÿÎs
;

7617 
	mmove_assignm’t_ÿÎs
;

7620 
	gCÚ¡ruùiÚCouÁšg
::
deçuÉ_ùÜ_ÿÎs
 = 0;

7621 
	gCÚ¡ruùiÚCouÁšg
::
dtÜ_ÿÎs
 = 0;

7622 
	gCÚ¡ruùiÚCouÁšg
::
cİy_ùÜ_ÿÎs
 = 0;

7623 
	gCÚ¡ruùiÚCouÁšg
::
move_ùÜ_ÿÎs
 = 0;

7624 
	gCÚ¡ruùiÚCouÁšg
::
cİy_assignm’t_ÿÎs
 = 0;

7625 
	gCÚ¡ruùiÚCouÁšg
::
move_assignm’t_ÿÎs
 = 0;

7627 
	$TEST
(
FÏtTu¶e
, 
CÚ¡ruùÜC®ls
) {

7628 
usšg
 
‹¡šg
::
š‹º®
::
FÏtTu¶e
;

7631 
CÚ¡ruùiÚCouÁšg
::
	`Re£t
();

7632 { 
FÏtTu¶e
<
CÚ¡ruùiÚCouÁšg
> 
tu¶e
; }

7633 
	`EXPECT_EQ
(
CÚ¡ruùiÚCouÁšg
::
deçuÉ_ùÜ_ÿÎs
, 1);

7634 
	`EXPECT_EQ
(
CÚ¡ruùiÚCouÁšg
::
dtÜ_ÿÎs
, 1);

7635 
	`EXPECT_EQ
(
CÚ¡ruùiÚCouÁšg
::
cİy_ùÜ_ÿÎs
, 0);

7636 
	`EXPECT_EQ
(
CÚ¡ruùiÚCouÁšg
::
move_ùÜ_ÿÎs
, 0);

7637 
	`EXPECT_EQ
(
CÚ¡ruùiÚCouÁšg
::
cİy_assignm’t_ÿÎs
, 0);

7638 
	`EXPECT_EQ
(
CÚ¡ruùiÚCouÁšg
::
move_assignm’t_ÿÎs
, 0);

7641 
CÚ¡ruùiÚCouÁšg
::
	`Re£t
();

7643 
CÚ¡ruùiÚCouÁšg
 
–em
;

7644 
FÏtTu¶e
<
CÚ¡ruùiÚCouÁšg
> 
tu¶e
{

7645 
‹¡šg
::
š‹º®
::
FÏtTu¶eCÚ¡ruùTag
{}, 
–em
};

7647 
	`EXPECT_EQ
(
CÚ¡ruùiÚCouÁšg
::
deçuÉ_ùÜ_ÿÎs
, 1);

7648 
	`EXPECT_EQ
(
CÚ¡ruùiÚCouÁšg
::
dtÜ_ÿÎs
, 2);

7649 
	`EXPECT_EQ
(
CÚ¡ruùiÚCouÁšg
::
cİy_ùÜ_ÿÎs
, 1);

7650 
	`EXPECT_EQ
(
CÚ¡ruùiÚCouÁšg
::
move_ùÜ_ÿÎs
, 0);

7651 
	`EXPECT_EQ
(
CÚ¡ruùiÚCouÁšg
::
cİy_assignm’t_ÿÎs
, 0);

7652 
	`EXPECT_EQ
(
CÚ¡ruùiÚCouÁšg
::
move_assignm’t_ÿÎs
, 0);

7655 
CÚ¡ruùiÚCouÁšg
::
	`Re£t
();

7657 
FÏtTu¶e
<
CÚ¡ruùiÚCouÁšg
> 
tu¶e
{

7658 
‹¡šg
::
š‹º®
::
FÏtTu¶eCÚ¡ruùTag
{}, 
CÚ¡ruùiÚCouÁšg
{}};

7660 
	`EXPECT_EQ
(
CÚ¡ruùiÚCouÁšg
::
deçuÉ_ùÜ_ÿÎs
, 1);

7661 
	`EXPECT_EQ
(
CÚ¡ruùiÚCouÁšg
::
dtÜ_ÿÎs
, 2);

7662 
	`EXPECT_EQ
(
CÚ¡ruùiÚCouÁšg
::
cİy_ùÜ_ÿÎs
, 0);

7663 
	`EXPECT_EQ
(
CÚ¡ruùiÚCouÁšg
::
move_ùÜ_ÿÎs
, 1);

7664 
	`EXPECT_EQ
(
CÚ¡ruùiÚCouÁšg
::
cİy_assignm’t_ÿÎs
, 0);

7665 
	`EXPECT_EQ
(
CÚ¡ruùiÚCouÁšg
::
move_assignm’t_ÿÎs
, 0);

7670 
CÚ¡ruùiÚCouÁšg
::
	`Re£t
();

7672 
FÏtTu¶e
<
CÚ¡ruùiÚCouÁšg
> 
tu¶e
;

7673 
CÚ¡ruùiÚCouÁšg
 
–em
;

7674 
tu¶e
.
G‘
<0>(èğ
–em
;

7676 
	`EXPECT_EQ
(
CÚ¡ruùiÚCouÁšg
::
deçuÉ_ùÜ_ÿÎs
, 2);

7677 
	`EXPECT_EQ
(
CÚ¡ruùiÚCouÁšg
::
dtÜ_ÿÎs
, 2);

7678 
	`EXPECT_EQ
(
CÚ¡ruùiÚCouÁšg
::
cİy_ùÜ_ÿÎs
, 0);

7679 
	`EXPECT_EQ
(
CÚ¡ruùiÚCouÁšg
::
move_ùÜ_ÿÎs
, 0);

7680 
	`EXPECT_EQ
(
CÚ¡ruùiÚCouÁšg
::
cİy_assignm’t_ÿÎs
, 1);

7681 
	`EXPECT_EQ
(
CÚ¡ruùiÚCouÁšg
::
move_assignm’t_ÿÎs
, 0);

7686 
CÚ¡ruùiÚCouÁšg
::
	`Re£t
();

7688 
FÏtTu¶e
<
CÚ¡ruùiÚCouÁšg
> 
tu¶e
;

7689 
tu¶e
.
G‘
<0>(èğ
CÚ¡ruùiÚCouÁšg
{};

7691 
	`EXPECT_EQ
(
CÚ¡ruùiÚCouÁšg
::
deçuÉ_ùÜ_ÿÎs
, 2);

7692 
	`EXPECT_EQ
(
CÚ¡ruùiÚCouÁšg
::
dtÜ_ÿÎs
, 2);

7693 
	`EXPECT_EQ
(
CÚ¡ruùiÚCouÁšg
::
cİy_ùÜ_ÿÎs
, 0);

7694 
	`EXPECT_EQ
(
CÚ¡ruùiÚCouÁšg
::
move_ùÜ_ÿÎs
, 0);

7695 
	`EXPECT_EQ
(
CÚ¡ruùiÚCouÁšg
::
cİy_assignm’t_ÿÎs
, 0);

7696 
	`EXPECT_EQ
(
CÚ¡ruùiÚCouÁšg
::
move_assignm’t_ÿÎs
, 1);

7698 
CÚ¡ruùiÚCouÁšg
::
	`Re£t
();

7699 
	}
}

7701 
	$TEST
(
FÏtTu¶e
, 
MªyTy³s
) {

7702 
usšg
 
‹¡šg
::
š‹º®
::
FÏtTu¶e
;

7707 
	#GTEST_FLAT_TUPLE_INT8
 , , , , , , , ,

	)

7708 
	#GTEST_FLAT_TUPLE_INT16
 
GTEST_FLAT_TUPLE_INT8
 
	)
GTEST_FLAT_TUPLE_INT8

7709 
	#GTEST_FLAT_TUPLE_INT32
 
GTEST_FLAT_TUPLE_INT16
 
	)
GTEST_FLAT_TUPLE_INT16

7710 
	#GTEST_FLAT_TUPLE_INT64
 
GTEST_FLAT_TUPLE_INT32
 
	)
GTEST_FLAT_TUPLE_INT32

7711 
	#GTEST_FLAT_TUPLE_INT128
 
GTEST_FLAT_TUPLE_INT64
 
	)
GTEST_FLAT_TUPLE_INT64

7712 
	#GTEST_FLAT_TUPLE_INT256
 
GTEST_FLAT_TUPLE_INT128
 
	)
GTEST_FLAT_TUPLE_INT128

7716 
FÏtTu¶e
<
GTEST_FLAT_TUPLE_INT256
 > 
tu¶e
;

7718 
tu¶e
.
G‘
<0>() = 7;

7719 
tu¶e
.
G‘
<99>() = 17;

7720 
tu¶e
.
G‘
<256>() = 1000;

7721 
	`EXPECT_EQ
(7, 
tu¶e
.
G‘
<0>());

7722 
	`EXPECT_EQ
(17, 
tu¶e
.
G‘
<99>());

7723 
	`EXPECT_EQ
(1000, 
tu¶e
.
G‘
<256>());

7724 
	}
}

7728 
	$TEST
(
SkP»fixTe¡
, 
SksWh’P»fixM©ches
) {

7729 cÚ¡ * cÚ¡ 
¡r
 = "hello";

7731 cÚ¡ * 
p
 = 
¡r
;

7732 
	`EXPECT_TRUE
(
	`SkP»fix
("", &
p
));

7733 
	`EXPECT_EQ
(
¡r
, 
p
);

7735 
p
 = 
¡r
;

7736 
	`EXPECT_TRUE
(
	`SkP»fix
("h–l", &
p
));

7737 
	`EXPECT_EQ
(
¡r
 + 4, 
p
);

7738 
	}
}

7740 
	$TEST
(
SkP»fixTe¡
, 
DÛsNÙSkWh’P»fixDÛsNÙM©ch
) {

7741 cÚ¡ * cÚ¡ 
¡r
 = "world";

7743 cÚ¡ * 
p
 = 
¡r
;

7744 
	`EXPECT_FALSE
(
	`SkP»fix
("W", &
p
));

7745 
	`EXPECT_EQ
(
¡r
, 
p
);

7747 
p
 = 
¡r
;

7748 
	`EXPECT_FALSE
(
	`SkP»fix
("wÜld!", &
p
));

7749 
	`EXPECT_EQ
(
¡r
, 
p
);

7750 
	}
}

7753 
	$TEST
(
AdHocTe¡ResuÉTe¡
, 
AdHocTe¡ResuÉFÜUn™Te¡DÛsNÙShowFau»
) {

7754 cÚ¡ 
‹¡šg
::
Te¡ResuÉ
& 
‹¡_»suÉ
 =

7755 
‹¡šg
::
Un™Te¡
::
	`G‘In¡ªû
()->
	`ad_hoc_‹¡_»suÉ
();

7756 
	`EXPECT_FALSE
(
‹¡_»suÉ
.
	`Faed
());

7757 
	}
}

7759 şas 
	cDyÇmicUn™Te¡Fixtu»
 : 
public
 
‹¡šg
::
Te¡
 {};

7761 şas 
	cDyÇmicTe¡
 : 
public
 
DyÇmicUn™Te¡Fixtu»
 {

7762 
	$Te¡Body
(è
ov”ride
 { 
	`EXPECT_TRUE
(
Œue
); }

7763 
	}
};

7765 auto* 
	gdyÇmic_‹¡
 = 
‹¡šg
::
Regi¡”Te¡
(

7766 "DyÇmicUn™Te¡Fixtu»", "DyÇmicTe¡", "TYPE", "VALUE", 
__FILE__
,

7767 
__LINE__
, [](è-> 
DyÇmicUn™Te¡Fixtu»
* {  
Ãw
 
DyÇmicTe¡
; });

7769 
	$TEST
(
Regi¡”Te¡
, 
WasRegi¡”ed
) {

7770 auto* 
un™‹¡
 = 
‹¡šg
::
Un™Te¡
::
	`G‘In¡ªû
();

7771 
i
 = 0; i < 
un™‹¡
->
	`tÙ®_‹¡_su™e_couÁ
(); ++i) {

7772 auto* 
‹¡s
 = 
un™‹¡
->
	`G‘Te¡Su™e
(
i
);

7773 ià(
‹¡s
->
	`Çme
(è!ğ
¡d
::
	`¡ršg
("DynamicUnitTestFixture")) ;

7774 
j
 = 0; j < 
‹¡s
->
	`tÙ®_‹¡_couÁ
(); ++j) {

7775 ià(
‹¡s
->
	`G‘Te¡Info
(
j
)->
	`Çme
(è!ğ
¡d
::
	`¡ršg
("DynamicTest")) ;

7777 
	`EXPECT_STREQ
(
‹¡s
->
	`G‘Te¡Info
(
j
)->
	`v®ue_·¿m
(), "VALUE");

7778 
	`EXPECT_STREQ
(
‹¡s
->
	`G‘Te¡Info
(
j
)->
	`ty³_·¿m
(), "TYPE");

7783 
	`FAIL
() << "Didn't findheest!";

7784 
	}
}

	@third_party/googletest/googletest/test/gtest_xml_outfile1_test_.cc

33 
	~"g‹¡/g‹¡.h
"

35 şas 
	cPrİ”tyOÃ
 : 
public
 
‹¡šg
::
Te¡
 {

36 
´Ùeùed
:

37 
	$S‘Up
(è
ov”ride
 { 
	`RecÜdPrİ”ty
("SetUpProp", 1); }

38 
	$T—rDown
(è
ov”ride
 { 
	`RecÜdPrİ”ty
("T—rDownPrİ", 1); 
	}
}

41 
	$TEST_F
(
Prİ”tyOÃ
, 
Te¡SomePrİ”t›s
) {

42 
	`RecÜdPrİ”ty
("TestSomeProperty", 1);

43 
	}
}

	@third_party/googletest/googletest/test/gtest_xml_outfile2_test_.cc

33 
	~"g‹¡/g‹¡.h
"

35 şas 
	cPrİ”tyTwo
 : 
public
 
‹¡šg
::
Te¡
 {

36 
´Ùeùed
:

37 
	$S‘Up
(è
ov”ride
 { 
	`RecÜdPrİ”ty
("SetUpProp", 2); }

38 
	$T—rDown
(è
ov”ride
 { 
	`RecÜdPrİ”ty
("T—rDownPrİ", 2); 
	}
}

41 
	$TEST_F
(
Prİ”tyTwo
, 
Te¡SomePrİ”t›s
) {

42 
	`RecÜdPrİ”ty
("TestSomeProperty", 2);

43 
	}
}

	@third_party/googletest/googletest/test/gtest_xml_output_unittest_.cc

39 
	~"g‹¡/g‹¡.h
"

41 
	gusšg
 ::
‹¡šg
::
In™GoogËTe¡
;

42 
	gusšg
 ::
‹¡šg
::
Te¡Ev’tLi¡’”s
;

43 
	gusšg
 ::
‹¡šg
::
Te¡W™hP¬am
;

44 
	gusšg
 ::
‹¡šg
::
Un™Te¡
;

45 
	gusšg
 ::
‹¡šg
::
Te¡
;

46 
	gusšg
 ::
‹¡šg
::
V®ues
;

48 şas 
	cSucûssfulTe¡
 : 
public
 
Te¡
 {

51 
	$TEST_F
(
SucûssfulTe¡
, 
Sucûeds
) {

52 
	`SUCCEED
() << "This is‡ success.";

53 
	`ASSERT_EQ
(1, 1);

54 
	}
}

56 şas 
	cFaedTe¡
 : 
public
 
Te¡
 {

59 
	$TEST_F
(
FaedTe¡
, 
Fas
) {

60 
	`ASSERT_EQ
(1, 2);

61 
	}
}

63 şas 
	cDi§bËdTe¡
 : 
public
 
Te¡
 {

66 
	$TEST_F
(
Di§bËdTe¡
, 
DISABLED_‹¡_nÙ_run
) {

67 
	`FAIL
() << "Unexpected failure: Disabledest should‚ot be„un";

68 
	}
}

70 şas 
	cSk³dTe¡
 : 
public
 
Te¡
 {

73 
	$TEST_F
(
Sk³dTe¡
, 
Sk³d
) {

74 
	`GTEST_SKIP
();

75 
	}
}

77 
	$TEST_F
(
Sk³dTe¡
, 
Sk³dW™hMes§ge
) {

78 
	`GTEST_SKIP
() << "It is good…racticeoell why you skip‡est.";

79 
	}
}

81 
	$TEST_F
(
Sk³dTe¡
, 
Sk³dAá”Fau»
) {

82 
	`EXPECT_EQ
(1, 2);

83 
	`GTEST_SKIP
() << "It is good…racticeoell why you skip‡est.";

84 
	}
}

86 
	$TEST
(
MixedResuÉTe¡
, 
Sucûeds
) {

87 
	`EXPECT_EQ
(1, 1);

88 
	`ASSERT_EQ
(1, 1);

89 
	}
}

91 
	$TEST
(
MixedResuÉTe¡
, 
Fas
) {

92 
	`EXPECT_EQ
(1, 2);

93 
	`ASSERT_EQ
(2, 3);

94 
	}
}

96 
	$TEST
(
MixedResuÉTe¡
, 
DISABLED_‹¡
) {

97 
	`FAIL
() << "Unexpected failure: Disabledest should‚ot be„un";

98 
	}
}

100 
	$TEST
(
XmlQuÙšgTe¡
, 
OuutsCD©a
) {

101 
	`FAIL
() << "XML output: "

103 
	}
}

107 
	$TEST
(
Inv®idCh¬aù”sTe¡
, 
Inv®idCh¬aù”sInMes§ge
) {

108 
	`FAIL
() << "Invalid characters in brackets [\x1\x2]";

109 
	}
}

111 şas 
	cPrİ”tyRecÜdšgTe¡
 : 
public
 
Te¡
 {

112 
public
:

113 
	$S‘UpTe¡Su™e
(è{ 
	`RecÜdPrİ”ty
("SetUpTestSuite", "yes"); }

114 
	$T—rDownTe¡Su™e
() {

115 
	`RecÜdPrİ”ty
("TearDownTestSuite", "aye");

116 
	}
}

119 
	$TEST_F
(
Prİ”tyRecÜdšgTe¡
, 
OÃPrİ”ty
) {

120 
	`RecÜdPrİ”ty
("key_1", "1");

121 
	}
}

123 
	$TEST_F
(
Prİ”tyRecÜdšgTe¡
, 
IÁV®uedPrİ”ty
) {

124 
	`RecÜdPrİ”ty
("key_int", 1);

125 
	}
}

127 
	$TEST_F
(
Prİ”tyRecÜdšgTe¡
, 
Th»ePrİ”t›s
) {

128 
	`RecÜdPrİ”ty
("key_1", "1");

129 
	`RecÜdPrİ”ty
("key_2", "2");

130 
	`RecÜdPrİ”ty
("key_3", "3");

131 
	}
}

133 
	$TEST_F
(
Prİ”tyRecÜdšgTe¡
, 
TwoV®uesFÜOÃKeyU£sLa¡V®ue
) {

134 
	`RecÜdPrİ”ty
("key_1", "1");

135 
	`RecÜdPrİ”ty
("key_1", "2");

136 
	}
}

138 
	$TEST
(
NoFixtu»Te¡
, 
RecÜdPrİ”ty
) {

139 
	`RecÜdPrİ”ty
("key", "1");

140 
	}
}

142 
	$Ex‹º®Ut™yTh©C®lsRecÜdPrİ”ty
(cÚ¡ 
¡d
::
¡ršg
& 
key
, 
v®ue
) {

143 
‹¡šg
::
Te¡
::
	`RecÜdPrİ”ty
(
key
, 
v®ue
);

144 
	}
}

146 
	$Ex‹º®Ut™yTh©C®lsRecÜdPrİ”ty
(cÚ¡ 
¡d
::
¡ršg
& 
key
,

147 cÚ¡ 
¡d
::
¡ršg
& 
v®ue
) {

148 
‹¡šg
::
Te¡
::
	`RecÜdPrİ”ty
(
key
, 
v®ue
);

149 
	}
}

151 
	$TEST
(
NoFixtu»Te¡
, 
Ex‹º®Ut™yTh©C®lsRecÜdIÁV®uedPrİ”ty
) {

152 
	`Ex‹º®Ut™yTh©C®lsRecÜdPrİ”ty
("key_for_utility_int", 1);

153 
	}
}

155 
	$TEST
(
NoFixtu»Te¡
, 
Ex‹º®Ut™yTh©C®lsRecÜdSŒšgV®uedPrİ”ty
) {

156 
	`Ex‹º®Ut™yTh©C®lsRecÜdPrİ”ty
("key_for_utility_string", "1");

157 
	}
}

161 
şass
 
	gV®ueP¬amTe¡
 : 
public
 
Te¡W™hP¬am
<> {};

162 
	$TEST_P
(
V®ueP¬amTe¡
, 
HasV®ueP¬amA‰ribu‹
è{
	}
}

163 
	$TEST_P
(
V®ueP¬amTe¡
, 
AnÙh”Te¡Th©HasV®ueP¬amA‰ribu‹
è{
	}
}

164 
INSTANTIATE_TEST_SUITE_P
(
SšgË
, 
V®ueP¬amTe¡
, 
V®ues
(33, 42));

168 
	g‹m¶©e
 <
ty³Çme
 
	gT
> cÏs 
	cTy³dTe¡
 : 
public
 
Te¡
 {};

169 
	g‹¡šg
::
	tTy³s
<, > 
	tTy³dTe¡Ty³s
;

170 
TYPED_TEST_SUITE
(
Ty³dTe¡
, 
Ty³dTe¡Ty³s
);

171 
	$TYPED_TEST
(
Ty³dTe¡
, 
HasTy³P¬amA‰ribu‹
è{
	}
}

175 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

176 şas 
	cTy³P¬am‘”izedTe¡Su™e
 : 
public
 
Te¡
 {};

177 
TYPED_TEST_SUITE_P
(
Ty³P¬am‘”izedTe¡Su™e
);

178 
	$TYPED_TEST_P
(
Ty³P¬am‘”izedTe¡Su™e
, 
HasTy³P¬amA‰ribu‹
è{
	}
}

179 
REGISTER_TYPED_TEST_SUITE_P
(
Ty³P¬am‘”izedTe¡Su™e
, 
HasTy³P¬amA‰ribu‹
);

180 
	g‹¡šg
::
	tTy³s
<, > 
	tTy³P¬am‘”izedTe¡Su™eTy³s
;

181 
INSTANTIATE_TYPED_TEST_SUITE_P
(
SšgË
, 
Ty³P¬am‘”izedTe¡Su™e
,

182 
Ty³P¬am‘”izedTe¡Su™eTy³s
);

184 
	$maš
(
¬gc
, ** 
¬gv
) {

185 
	`In™GoogËTe¡
(&
¬gc
, 
¬gv
);

187 ià(
¬gc
 > 1 && 
	`¡rcmp
(
¬gv
[1], "--shut_down_xml") == 0) {

188 
Te¡Ev’tLi¡’”s
& 
li¡’”s
 = 
Un™Te¡
::
	`G‘In¡ªû
()->
	`li¡’”s
();

189 
d–‘e
 
li¡’”s
.
	`R–—£
Öi¡’”s.
	`deçuÉ_xml_g’”©Ü
());

191 
‹¡šg
::
Te¡
::
	`RecÜdPrİ”ty
("ad_hoc_property", "42");

192  
	`RUN_ALL_TESTS
();

193 
	}
}

	@third_party/googletest/googletest/test/production.cc

33 
	~"´oduùiÚ.h
"

35 
	gPriv©eCode
::
	$Priv©eCode
(è: 
	$x_
(0è{
	}
}

	@third_party/googletest/googletest/test/production.h

33 #iâdeà
GOOGLETEST_TEST_PRODUCTION_H_


34 
	#GOOGLETEST_TEST_PRODUCTION_H_


	)

36 
	~"g‹¡/g‹¡_´od.h
"

38 şas 
	cPriv©eCode
 {

39 
	mpublic
:

41 
FRIEND_TEST
(
Priv©eCodeTe¡
, 
CªAcûssPriv©eMemb”s
);

44 
FRIEND_TEST
(
Priv©eCodeFixtu»Te¡
, 
CªAcûssPriv©eMemb”s
);

46 
Priv©eCode
();

48 
	$x
(ècÚ¡ {  
x_
; }

49 
´iv©e
:

50 
	$£t_x
(
ª_x
è{ 
x_
 =‡n_x; 
	}
}

51 
	gx_
;

	@util/arena.cc

5 
	~"ut/¬’a.h
"

7 
Çme¥aû
 
	gËv–db
 {

9 cÚ¡ 
	gkBlockSize
 = 4096;

11 
	gA»Ç
::
A»Ç
()

12 : 
®loc_±r_
(
nuÎ±r
), 
®loc_by‹s_»maššg_
(0), 
memÜy_u§ge_
(0) {}

14 
	gA»Ç
::~
A»Ç
() {

15 
size_t
 
i
 = 0; 
	gi
 < 
	gblocks_
.
size
(); i++) {

16 
	gd–‘e
[] 
	gblocks_
[
i
];

20 * 
	gA»Ç
::
AÎoÿ‹F®lback
(
size_t
 
by‹s
) {

21 ià(
by‹s
 > 
kBlockSize
 / 4) {

24 * 
»suÉ
 = 
AÎoÿ‹NewBlock
(
by‹s
);

25  
	g»suÉ
;

29 
	g®loc_±r_
 = 
AÎoÿ‹NewBlock
(
kBlockSize
);

30 
	g®loc_by‹s_»maššg_
 = 
kBlockSize
;

32 * 
	g»suÉ
 = 
®loc_±r_
;

33 
	g®loc_±r_
 +ğ
by‹s
;

34 
	g®loc_by‹s_»maššg_
 -ğ
by‹s
;

35  
	g»suÉ
;

38 * 
	gA»Ç
::
AÎoÿ‹AligÃd
(
size_t
 
by‹s
) {

39 cÚ¡ 
®ign
 = ((*) > 8) ? (*) : 8;

40 
¡©ic_as£¹
((
®ign
 & (align - 1)) == 0,

42 
size_t
 
	gcu¼’t_mod
 = 
»š‹½»t_ÿ¡
<
ušŒ_t
>(
®loc_±r_
è& (
®ign
 - 1);

43 
size_t
 
	g¦İ
 = (
cu¼’t_mod
 =ğ0 ? 0 : 
®ign
 - current_mod);

44 
size_t
 
	gÃeded
 = 
by‹s
 + 
¦İ
;

45 * 
	g»suÉ
;

46 ià(
	gÃeded
 <ğ
®loc_by‹s_»maššg_
) {

47 
»suÉ
 = 
®loc_±r_
 + 
¦İ
;

48 
	g®loc_±r_
 +ğ
Ãeded
;

49 
	g®loc_by‹s_»maššg_
 -ğ
Ãeded
;

52 
	g»suÉ
 = 
AÎoÿ‹F®lback
(
by‹s
);

54 
as£¹
((
»š‹½»t_ÿ¡
<
ušŒ_t
>(
»suÉ
è& (
®ign
 - 1)) == 0);

55  
	g»suÉ
;

58 * 
	gA»Ç
::
AÎoÿ‹NewBlock
(
size_t
 
block_by‹s
) {

59 * 
»suÉ
 = 
Ãw
 [
block_by‹s
];

60 
	gblocks_
.
push_back
(
»suÉ
);

61 
	gmemÜy_u§ge_
.
ãtch_add
(
block_by‹s
 + (*),

62 
¡d
::
memÜy_Üd”_»Ïxed
);

63  
	g»suÉ
;

	@util/arena.h

5 #iâdeà
STORAGE_LEVELDB_UTIL_ARENA_H_


6 
	#STORAGE_LEVELDB_UTIL_ARENA_H_


	)

8 
	~<©omic
>

9 
	~<ÿs£¹
>

10 
	~<c¡ddef
>

11 
	~<c¡dšt
>

12 
	~<veùÜ
>

14 
Çme¥aû
 
	gËv–db
 {

16 şas 
	cA»Ç
 {

17 
	gpublic
:

18 
A»Ç
();

20 
A»Ç
(cÚ¡ A»Ç&èğ
d–‘e
;

21 
	gA»Ç
& 
	gİ”©Ü
=(cÚ¡ 
A»Ç
&èğ
d–‘e
;

23 ~
A»Ç
();

26 * 
AÎoÿ‹
(
size_t
 
by‹s
);

29 * 
AÎoÿ‹AligÃd
(
size_t
 
by‹s
);

33 
size_t
 
MemÜyU§ge
() const {

34  
	gmemÜy_u§ge_
.
lßd
(
¡d
::
memÜy_Üd”_»Ïxed
);

37 
	g´iv©e
:

38 * 
AÎoÿ‹F®lback
(
size_t
 
by‹s
);

39 * 
AÎoÿ‹NewBlock
(
size_t
 
block_by‹s
);

42 * 
	g®loc_±r_
;

43 
size_t
 
	g®loc_by‹s_»maššg_
;

46 
	g¡d
::
veùÜ
<*> 
blocks_
;

52 
	g¡d
::
©omic
<
size_t
> 
memÜy_u§ge_
;

55 
šlše
 * 
	gA»Ç
::
	$AÎoÿ‹
(
size_t
 
by‹s
) {

59 
	`as£¹
(
by‹s
 > 0);

60 ià(
by‹s
 <ğ
®loc_by‹s_»maššg_
) {

61 * 
»suÉ
 = 
®loc_±r_
;

62 
®loc_±r_
 +ğ
by‹s
;

63 
®loc_by‹s_»maššg_
 -ğ
by‹s
;

64  
»suÉ
;

66  
	`AÎoÿ‹F®lback
(
by‹s
);

67 
	}
}

	@util/arena_test.cc

5 
	~"ut/¬’a.h
"

7 
	~"g‹¡/g‹¡.h
"

8 
	~"ut/¿ndom.h
"

10 
Çme¥aû
 
	gËv–db
 {

12 
TEST
(
A»ÇTe¡
, 
Em±y
è{ 
A»Ç
 
	g¬’a
; }

14 
TEST
(
A»ÇTe¡
, 
Sim¶e
) {

15 
	g¡d
::
veùÜ
<
¡d
::
·œ
<
size_t
, *>> 
	g®loÿ‹d
;

16 
A»Ç
 
	g¬’a
;

17 cÚ¡ 
	gN
 = 100000;

18 
size_t
 
	gby‹s
 = 0;

19 
Rªdom
 
ºd
(301);

20 
	gi
 = 0; i < 
	gN
; i++) {

21 
size_t
 
	gs
;

22 ià(
	gi
 % (
	gN
 / 10) == 0) {

23 
s
 = 
i
;

25 
	gs
 = 
ºd
.
OÃIn
(4000)

26 ? 
ºd
.
UnifÜm
(6000)

27 : (
ºd
.
OÃIn
(10è?„nd.
UnifÜm
(100) :„nd.Uniform(20));

29 ià(
	gs
 == 0) {

31 
s
 = 1;

33 * 
	gr
;

34 ià(
	gºd
.
OÃIn
(10)) {

35 
	gr
 = 
¬’a
.
AÎoÿ‹AligÃd
(
s
);

37 
	gr
 = 
¬’a
.
AÎoÿ‹
(
s
);

40 
size_t
 
	gb
 = 0; b < 
	gs
; b++) {

42 
	gr
[
b
] = 
i
 % 256;

44 
	gby‹s
 +ğ
s
;

45 
	g®loÿ‹d
.
push_back
(
¡d
::
make_·œ
(
s
, 
r
));

46 
ASSERT_GE
(
¬’a
.
MemÜyU§ge
(), 
by‹s
);

47 ià(
	gi
 > 
	gN
 / 10) {

48 
ASSERT_LE
(
¬’a
.
MemÜyU§ge
(), 
by‹s
 * 1.10);

51 
size_t
 
	gi
 = 0; i < 
	g®loÿ‹d
.
size
(); i++) {

52 
size_t
 
	gnum_by‹s
 = 
®loÿ‹d
[
i
].
fœ¡
;

53 cÚ¡ * 
	gp
 = 
®loÿ‹d
[
i
].
£cÚd
;

54 
size_t
 
	gb
 = 0; b < 
	gnum_by‹s
; b++) {

56 
ASSERT_EQ
((
p
[
b
]è& 0xff, 
i
 % 256);

	@util/bloom.cc

5 
	~"Ëv–db/f‹r_pŞicy.h
"

7 
	~"Ëv–db/¦iû.h
"

8 
	~"ut/hash.h
"

10 
Çme¥aû
 
	gËv–db
 {

12 
	gÇme¥aû
 {

13 
ušt32_t
 
BloomHash
(cÚ¡ 
Sliû
& 
key
) {

14  
Hash
(
key
.
d©a
(), key.
size
(), 0xbc9f1d34);

17 şas 
	cBloomF‹rPŞicy
 : 
public
 
F‹rPŞicy
 {

18 
public
:

19 
ex¶ic™
 
BloomF‹rPŞicy
(
b™s_³r_key
è: 
b™s_³r_key_
(bits_per_key) {

21 
k_
 = 
¡©ic_ÿ¡
<
size_t
>(
b™s_³r_key
 * 0.69);

22 ià(
	gk_
 < 1) k_ = 1;

23 ià(
	gk_
 > 30) k_ = 30;

26 cÚ¡ * 
Name
(ècÚ¡ 
	gov”ride
 {  "leveldb.BuiltinBloomFilter2"; }

28 
C»©eF‹r
(cÚ¡ 
Sliû
* 
keys
, 
n
, 
¡d
::
¡ršg
* 
d¡
ècÚ¡ 
ov”ride
 {

30 
size_t
 
b™s
 = 
n
 * 
b™s_³r_key_
;

34 ià(
	gb™s
 < 64) bits = 64;

36 
size_t
 
	gby‹s
 = (
b™s
 + 7) / 8;

37 
	gb™s
 = 
by‹s
 * 8;

39 cÚ¡ 
size_t
 
	gš™_size
 = 
d¡
->
size
();

40 
	gd¡
->
»size
(
š™_size
 + 
by‹s
, 0);

41 
	gd¡
->
push_back
(
¡©ic_ÿ¡
<>(
k_
));

42 * 
	g¬¿y
 = &(*
d¡
)[
š™_size
];

43 
	gi
 = 0; i < 
	gn
; i++) {

46 
ušt32_t
 
	gh
 = 
BloomHash
(
keys
[
i
]);

47 cÚ¡ 
ušt32_t
 
	gd–
 = (
h
 >> 17) | (h << 15);

48 
size_t
 
	gj
 = 0; j < 
	gk_
; j++) {

49 cÚ¡ 
ušt32_t
 
	gb™pos
 = 
h
 % 
b™s
;

50 
	g¬¿y
[
b™pos
 / 8] |= (1 << (bitpos % 8));

51 
	gh
 +ğ
d–
;

56 
boŞ
 
KeyMayM©ch
(cÚ¡ 
Sliû
& 
key
, cÚ¡ Sliû& 
bloom_f‹r
ècÚ¡ 
	gov”ride
 {

57 cÚ¡ 
size_t
 
	gËn
 = 
bloom_f‹r
.
size
();

58 ià(
	gËn
 < 2è 
	gçl£
;

60 cÚ¡ * 
	g¬¿y
 = 
bloom_f‹r
.
d©a
();

61 cÚ¡ 
size_t
 
	gb™s
 = (
Ën
 - 1) * 8;

65 cÚ¡ 
size_t
 
	gk
 = 
¬¿y
[
Ën
 - 1];

66 ià(
	gk
 > 30) {

69  
	gŒue
;

72 
ušt32_t
 
	gh
 = 
BloomHash
(
key
);

73 cÚ¡ 
ušt32_t
 
	gd–
 = (
h
 >> 17) | (h << 15);

74 
size_t
 
	gj
 = 0; j < 
	gk
; j++) {

75 cÚ¡ 
ušt32_t
 
	gb™pos
 = 
h
 % 
b™s
;

76 ià((
	g¬¿y
[
b™pos
 / 8] & (1 << (
	gb™pos
 % 8))è=ğ0è 
çl£
;

77 
	gh
 +ğ
d–
;

79  
	gŒue
;

82 
	g´iv©e
:

83 
size_t
 
b™s_³r_key_
;

84 
size_t
 
	gk_
;

88 cÚ¡ 
F‹rPŞicy
* 
	$NewBloomF‹rPŞicy
(
b™s_³r_key
) {

89  
Ãw
 
	`BloomF‹rPŞicy
(
b™s_³r_key
);

90 
	}
}

	@util/bloom_test.cc

5 
	~"g‹¡/g‹¡.h
"

6 
	~"Ëv–db/f‹r_pŞicy.h
"

7 
	~"ut/codšg.h
"

8 
	~"ut/loggšg.h
"

9 
	~"ut/‹¡ut.h
"

11 
Çme¥aû
 
	gËv–db
 {

13 cÚ¡ 
	gkV”bo£
 = 1;

15 
Sliû
 
Key
(
i
, * 
bufãr
) {

16 
EncodeFixed32
(
bufãr
, 
i
);

17  
Sliû
(
bufãr
, (
ušt32_t
));

20 şas 
	cBloomTe¡
 : 
public
 
‹¡šg
::
Te¡
 {

21 
public
:

22 
BloomTe¡
(è: 
pŞicy_
(
NewBloomF‹rPŞicy
(10)) {}

24 ~
BloomTe¡
(è{ 
d–‘e
 
pŞicy_
; }

26 
Re£t
() {

27 
	gkeys_
.
ş—r
();

28 
	gf‹r_
.
ş—r
();

31 
Add
(cÚ¡ 
Sliû
& 
s
è{ 
	gkeys_
.
push_back
(s.
ToSŒšg
()); }

33 
Bud
() {

34 
	g¡d
::
veùÜ
<
Sliû
> 
key_¦iûs
;

35 
size_t
 
	gi
 = 0; i < 
	gkeys_
.
size
(); i++) {

36 
	gkey_¦iûs
.
push_back
(
Sliû
(
keys_
[
i
]));

38 
	gf‹r_
.
ş—r
();

39 
	gpŞicy_
->
C»©eF‹r
(&
key_¦iûs
[0], 
¡©ic_ÿ¡
<>(key_¦iûs.
size
()),

40 &
f‹r_
);

41 
	gkeys_
.
ş—r
();

42 ià(
	gkV”bo£
 >ğ2è
DumpF‹r
();

45 
size_t
 
F‹rSize
(ècÚ¡ {  
	gf‹r_
.
size
(); }

47 
DumpF‹r
() {

48 
	g¡d
::
årštf
(
¡d”r
, "F(");

49 
size_t
 
	gi
 = 0; i + 1 < 
	gf‹r_
.
size
(); i++) {

50 cÚ¡ 
	gc
 = 
¡©ic_ÿ¡
<>(
f‹r_
[
i
]);

51 
	gj
 = 0; j < 8; j++) {

52 
	g¡d
::
årštf
(
¡d”r
, "%c", (
c
 & (1 << 
j
)) ? '1' : '.');

55 
	g¡d
::
årštf
(
¡d”r
, ")\n");

58 
boŞ
 
M©ches
(cÚ¡ 
Sliû
& 
s
) {

59 ià(!
	gkeys_
.
em±y
()) {

60 
Bud
();

62  
	gpŞicy_
->
KeyMayM©ch
(
s
, 
f‹r_
);

65 
F®£Pos™iveR©e
() {

66 
	gbufãr
[()];

67 
	g»suÉ
 = 0;

68 
	gi
 = 0; i < 10000; i++) {

69 ià(
M©ches
(
Key
(
i
 + 1000000000, 
bufãr
))) {

70 
	g»suÉ
++;

73  
	g»suÉ
 / 10000.0;

76 
	g´iv©e
:

77 cÚ¡ 
F‹rPŞicy
* 
pŞicy_
;

78 
	g¡d
::
¡ršg
 
f‹r_
;

79 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> 
keys_
;

82 
	$TEST_F
(
BloomTe¡
, 
Em±yF‹r
) {

83 
	`ASSERT_TRUE
(!
	`M©ches
("hello"));

84 
	`ASSERT_TRUE
(!
	`M©ches
("world"));

85 
	}
}

87 
	$TEST_F
(
BloomTe¡
, 
Sm®l
) {

88 
	`Add
("hello");

89 
	`Add
("world");

90 
	`ASSERT_TRUE
(
	`M©ches
("hello"));

91 
	`ASSERT_TRUE
(
	`M©ches
("world"));

92 
	`ASSERT_TRUE
(!
	`M©ches
("x"));

93 
	`ASSERT_TRUE
(!
	`M©ches
("foo"));

94 
	}
}

96 
	$NextL’gth
(
Ëngth
) {

97 ià(
Ëngth
 < 10) {

98 
Ëngth
 += 1;

99 } ià(
Ëngth
 < 100) {

100 
Ëngth
 += 10;

101 } ià(
Ëngth
 < 1000) {

102 
Ëngth
 += 100;

104 
Ëngth
 += 1000;

106  
Ëngth
;

107 
	}
}

109 
	$TEST_F
(
BloomTe¡
, 
V¬yšgL’gths
) {

110 
bufãr
[()];

113 
medioüe_f‹rs
 = 0;

114 
good_f‹rs
 = 0;

116 
Ëngth
 = 1;†’gth <ğ10000;†’gth = 
	`NextL’gth
(length)) {

117 
	`Re£t
();

118 
i
 = 0; i < 
Ëngth
; i++) {

119 
	`Add
(
	`Key
(
i
, 
bufãr
));

121 
	`Bud
();

123 
	`ASSERT_LE
(
	`F‹rSize
(), 
¡©ic_ÿ¡
<
size_t
>((
Ëngth
 * 10 / 8) + 40))

124 << 
Ëngth
;

127 
i
 = 0; i < 
Ëngth
; i++) {

128 
	`ASSERT_TRUE
(
	`M©ches
(
	`Key
(
i
, 
bufãr
)))

129 << "L’gth " << 
Ëngth
 << "; key " << 
i
;

133 
¿‹
 = 
	`F®£Pos™iveR©e
();

134 ià(
kV”bo£
 >= 1) {

135 
¡d
::
	`årštf
(
¡d”r
,

137 
¿‹
 * 100.0, 
Ëngth
, 
¡©ic_ÿ¡
<>(
	`F‹rSize
()));

139 
	`ASSERT_LE
(
¿‹
, 0.02);

140 ià(
¿‹
 > 0.0125)

141 
medioüe_f‹rs
++;

143 
good_f‹rs
++;

145 ià(
kV”bo£
 >= 1) {

146 
¡d
::
	`årštf
(
¡d”r
, "F‹rs: %d good, %d medioüe\n", 
good_f‹rs
,

147 
medioüe_f‹rs
);

149 
	`ASSERT_LE
(
medioüe_f‹rs
, 
good_f‹rs
 / 5);

150 
	}
}

	@util/cache.cc

5 
	~"Ëv–db/ÿche.h
"

7 
	~<ÿs£¹
>

8 
	~<c¡dio
>

9 
	~<c¡dlib
>

11 
	~"pÜt/pÜt.h
"

12 
	~"pÜt/th»ad_ªnÙ©iÚs.h
"

13 
	~"ut/hash.h
"

14 
	~"ut/mu‹xlock.h
"

16 
Çme¥aû
 
	gËv–db
 {

18 
	gCache
::~
Cache
() {}

20 
Çme¥aû
 {

43 
	sLRUHªdË
 {

44 * 
v®ue
;

45 (*
	gd–‘”
)(cÚ¡ 
	gSliû
&, * 
	gv®ue
);

46 
LRUHªdË
* 
	gÃxt_hash
;

47 
LRUHªdË
* 
	gÃxt
;

48 
LRUHªdË
* 
	g´ev
;

49 
size_t
 
	gch¬ge
;

50 
size_t
 
	gkey_Ëngth
;

51 
boŞ
 
	gš_ÿche
;

52 
ušt32_t
 
	g»fs
;

53 
ušt32_t
 
	ghash
;

54 
	gkey_d©a
[1];

56 
Sliû
 
key
() const {

59 
as£¹
(
Ãxt
 !ğ
this
);

61  
Sliû
(
key_d©a
, 
key_Ëngth
);

70 şas 
	cHªdËTabË
 {

71 
	gpublic
:

72 
HªdËTabË
(è: 
Ëngth_
(0), 
–ems_
(0), 
li¡_
(
nuÎ±r
è{ 
Resize
(); }

73 ~
HªdËTabË
(è{ 
	gd–‘e
[] 
	gli¡_
; }

75 
LRUHªdË
* 
Lookup
(cÚ¡ 
Sliû
& 
key
, 
ušt32_t
 
hash
) {

76  *
FšdPoš‹r
(
key
, 
hash
);

79 
LRUHªdË
* 
In£¹
(LRUHªdË* 
h
) {

80 
LRUHªdË
** 
	g±r
 = 
FšdPoš‹r
(
h
->
key
(), h->
hash
);

81 
LRUHªdË
* 
	gŞd
 = *
±r
;

82 
	gh
->
	gÃxt_hash
 = (
Şd
 =ğ
nuÎ±r
 ?‚uÎ±¸: old->
Ãxt_hash
);

83 *
	g±r
 = 
h
;

84 ià(
	gŞd
 =ğ
nuÎ±r
) {

85 ++
–ems_
;

86 ià(
	g–ems_
 > 
	gËngth_
) {

89 
Resize
();

92  
	gŞd
;

95 
LRUHªdË
* 
Remove
(cÚ¡ 
Sliû
& 
key
, 
ušt32_t
 
hash
) {

96 
LRUHªdË
** 
	g±r
 = 
FšdPoš‹r
(
key
, 
hash
);

97 
LRUHªdË
* 
	g»suÉ
 = *
±r
;

98 ià(
	g»suÉ
 !ğ
nuÎ±r
) {

99 *
±r
 = 
»suÉ
->
Ãxt_hash
;

100 --
	g–ems_
;

102  
	g»suÉ
;

105 
	g´iv©e
:

108 
ušt32_t
 
Ëngth_
;

109 
ušt32_t
 
	g–ems_
;

110 
LRUHªdË
** 
	gli¡_
;

115 
LRUHªdË
** 
FšdPoš‹r
(cÚ¡ 
Sliû
& 
key
, 
ušt32_t
 
hash
) {

116 
LRUHªdË
** 
	g±r
 = &
li¡_
[
hash
 & (
Ëngth_
 - 1)];

117 *
	g±r
 !ğ
nuÎ±r
 && ((*
±r
)->
hash
 !ğhash || 
key
 != (*ptr)->key())) {

118 
±r
 = &(*±r)->
Ãxt_hash
;

120  
	g±r
;

123 
Resize
() {

124 
ušt32_t
 
	gÃw_Ëngth
 = 4;

125 
	gÃw_Ëngth
 < 
	g–ems_
) {

126 
	gÃw_Ëngth
 *= 2;

128 
LRUHªdË
** 
	gÃw_li¡
 = 
Ãw
 LRUHªdË*[
Ãw_Ëngth
];

129 
mem£t
(
Ãw_li¡
, 0, Òew_li¡[0]è* 
Ãw_Ëngth
);

130 
ušt32_t
 
	gcouÁ
 = 0;

131 
ušt32_t
 
	gi
 = 0; i < 
	gËngth_
; i++) {

132 
LRUHªdË
* 
	gh
 = 
li¡_
[
i
];

133 
	gh
 !ğ
nuÎ±r
) {

134 
LRUHªdË
* 
Ãxt
 = 
h
->
Ãxt_hash
;

135 
ušt32_t
 
	ghash
 = 
h
->
hash
;

136 
LRUHªdË
** 
	g±r
 = &
Ãw_li¡
[
hash
 & (
Ãw_Ëngth
 - 1)];

137 
	gh
->
	gÃxt_hash
 = *
±r
;

138 *
	g±r
 = 
h
;

139 
	gh
 = 
Ãxt
;

140 
	gcouÁ
++;

143 
as£¹
(
–ems_
 =ğ
couÁ
);

144 
	gd–‘e
[] 
	gli¡_
;

145 
	gli¡_
 = 
Ãw_li¡
;

146 
	gËngth_
 = 
Ãw_Ëngth
;

151 şas 
	cLRUCache
 {

152 
	gpublic
:

153 
LRUCache
();

154 ~
LRUCache
();

157 
S‘C­ac™y
(
size_t
 
ÿ·c™y
è{ 
	gÿ·c™y_
 = capacity; }

160 
	gCache
::
HªdË
* 
In£¹
(cÚ¡ 
Sliû
& 
key
, 
ušt32_t
 
hash
, * 
v®ue
,

161 
size_t
 
ch¬ge
,

162 (*
d–‘”
)(cÚ¡ 
Sliû
& 
key
, * 
v®ue
));

163 
	gCache
::
HªdË
* 
Lookup
(cÚ¡ 
Sliû
& 
key
, 
ušt32_t
 
hash
);

164 
R–—£
(
Cache
::
HªdË
* 
hªdË
);

165 
E¿£
(cÚ¡ 
Sliû
& 
key
, 
ušt32_t
 
hash
);

166 
PruÃ
();

167 
size_t
 
TÙ®Ch¬ge
() const {

168 
Mu‹xLock
 
l
(&
mu‹x_
);

169  
	gu§ge_
;

172 
	g´iv©e
:

173 
LRU_Remove
(
LRUHªdË
* 
e
);

174 
LRU_Aµ’d
(
LRUHªdË
* 
li¡
, LRUHªdË* 
e
);

175 
Ref
(
LRUHªdË
* 
e
);

176 
UÄef
(
LRUHªdË
* 
e
);

177 
boŞ
 
FšishE¿£
(
LRUHªdË
* 
e
è
EXCLUSIVE_LOCKS_REQUIRED
(
mu‹x_
);

180 
size_t
 
	gÿ·c™y_
;

183 
mubË
 
	gpÜt
::
Mu‹x
 
mu‹x_
;

184 
size_t
 
u§ge_
 
GUARDED_BY
(
mu‹x_
);

189 
LRUHªdË
 
Ìu_
 
GUARDED_BY
(
mu‹x_
);

193 
LRUHªdË
 
š_u£_
 
GUARDED_BY
(
mu‹x_
);

195 
HªdËTabË
 
bË_
 
GUARDED_BY
(
mu‹x_
);

198 
	gLRUCache
::
LRUCache
(è: 
ÿ·c™y_
(0), 
u§ge_
(0) {

200 
	gÌu_
.
	gÃxt
 = &
Ìu_
;

201 
	gÌu_
.
	g´ev
 = &
Ìu_
;

202 
	gš_u£_
.
	gÃxt
 = &
š_u£_
;

203 
	gš_u£_
.
	g´ev
 = &
š_u£_
;

206 
	gLRUCache
::~
LRUCache
() {

207 
as£¹
(
š_u£_
.
Ãxt
 == &in_use_);

208 
LRUHªdË
* 
	ge
 = 
Ìu_
.
Ãxt
;ƒ != &lru_;) {

209 
LRUHªdË
* 
	gÃxt
 = 
e
->
Ãxt
;

210 
as£¹
(
e
->
š_ÿche
);

211 
	ge
->
	gš_ÿche
 = 
çl£
;

212 
as£¹
(
e
->
»fs
 == 1);

213 
UÄef
(
e
);

214 
	ge
 = 
Ãxt
;

218 
	gLRUCache
::
Ref
(
LRUHªdË
* 
e
) {

219 ià(
e
->
»fs
 =ğ1 &&ƒ->
š_ÿche
) {

220 
LRU_Remove
(
e
);

221 
LRU_Aµ’d
(&
š_u£_
, 
e
);

223 
	ge
->
	g»fs
++;

226 
	gLRUCache
::
UÄef
(
LRUHªdË
* 
e
) {

227 
as£¹
(
e
->
»fs
 > 0);

228 
	ge
->
	g»fs
--;

229 ià(
	ge
->
	g»fs
 == 0) {

230 
as£¹
(!
e
->
š_ÿche
);

231 (*
	ge
->
	gd–‘”
)Ó->
key
(),ƒ->
	gv®ue
);

232 
ä“
(
e
);

233 } ià(
	ge
->
	gš_ÿche
 &&ƒ->
	g»fs
 == 1) {

235 
LRU_Remove
(
e
);

236 
LRU_Aµ’d
(&
Ìu_
, 
e
);

240 
	gLRUCache
::
LRU_Remove
(
LRUHªdË
* 
e
) {

241 
e
->
Ãxt
->
´ev
 =ƒ->prev;

242 
	ge
->
	g´ev
->
	gÃxt
 = 
e
->
Ãxt
;

245 
	gLRUCache
::
LRU_Aµ’d
(
LRUHªdË
* 
li¡
, LRUHªdË* 
e
) {

247 
	ge
->
	gÃxt
 = 
li¡
;

248 
	ge
->
	g´ev
 = 
li¡
->
´ev
;

249 
	ge
->
	g´ev
->
	gÃxt
 = 
e
;

250 
	ge
->
	gÃxt
->
	g´ev
 = 
e
;

253 
	gCache
::
HªdË
* 
LRUCache
::
Lookup
(cÚ¡ 
Sliû
& 
key
, 
ušt32_t
 
hash
) {

254 
Mu‹xLock
 
l
(&
mu‹x_
);

255 
LRUHªdË
* 
	ge
 = 
bË_
.
Lookup
(
key
, 
hash
);

256 ià(
	ge
 !ğ
nuÎ±r
) {

257 
Ref
(
e
);

259  
	g»š‹½»t_ÿ¡
<
	gCache
::
HªdË
*>(
e
);

262 
	gLRUCache
::
R–—£
(
Cache
::
HªdË
* 
hªdË
) {

263 
Mu‹xLock
 
l
(&
mu‹x_
);

264 
UÄef
(
»š‹½»t_ÿ¡
<
LRUHªdË
*>(
hªdË
));

267 
	gCache
::
HªdË
* 
LRUCache
::
In£¹
(cÚ¡ 
Sliû
& 
key
, 
ušt32_t
 
hash
, * 
v®ue
,

268 
size_t
 
ch¬ge
,

269 (*
d–‘”
)(cÚ¡ 
Sliû
& 
key
,

270 * 
v®ue
)) {

271 
Mu‹xLock
 
l
(&
mu‹x_
);

273 
LRUHªdË
* 
	ge
 =

274 
»š‹½»t_ÿ¡
<
LRUHªdË
*>(
m®loc
((LRUHªdËè- 1 + 
key
.
size
()));

275 
	ge
->
	gv®ue
 = 
v®ue
;

276 
	ge
->
	gd–‘”
 = 
d–‘”
;

277 
	ge
->
	gch¬ge
 = 
ch¬ge
;

278 
	ge
->
	gkey_Ëngth
 = 
key
.
size
();

279 
	ge
->
	ghash
 = 
hash
;

280 
	ge
->
	gš_ÿche
 = 
çl£
;

281 
	ge
->
	g»fs
 = 1;

282 
	g¡d
::
memıy
(
e
->
key_d©a
, 
key
.
d©a
(), key.
size
());

284 ià(
	gÿ·c™y_
 > 0) {

285 
	ge
->
	g»fs
++;

286 
	ge
->
	gš_ÿche
 = 
Œue
;

287 
LRU_Aµ’d
(&
š_u£_
, 
e
);

288 
	gu§ge_
 +ğ
ch¬ge
;

289 
FšishE¿£
(
bË_
.
In£¹
(
e
));

292 
	ge
->
	gÃxt
 = 
nuÎ±r
;

294 
	gu§ge_
 > 
	gÿ·c™y_
 && 
	gÌu_
.
	gÃxt
 !ğ&
Ìu_
) {

295 
LRUHªdË
* 
Şd
 = 
Ìu_
.
Ãxt
;

296 
as£¹
(
Şd
->
»fs
 == 1);

297 
boŞ
 
	g”a£d
 = 
FšishE¿£
(
bË_
.
Remove
(
Şd
->
key
(), old->
hash
));

298 ià(!
	g”a£d
) {

299 
as£¹
(
”a£d
);

303  
	g»š‹½»t_ÿ¡
<
	gCache
::
HªdË
*>(
e
);

308 
boŞ
 
	gLRUCache
::
FšishE¿£
(
LRUHªdË
* 
e
) {

309 ià(
e
 !ğ
nuÎ±r
) {

310 
as£¹
(
e
->
š_ÿche
);

311 
LRU_Remove
(
e
);

312 
	ge
->
	gš_ÿche
 = 
çl£
;

313 
	gu§ge_
 -ğ
e
->
ch¬ge
;

314 
UÄef
(
e
);

316  
	ge
 !ğ
nuÎ±r
;

319 
	gLRUCache
::
E¿£
(cÚ¡ 
Sliû
& 
key
, 
ušt32_t
 
hash
) {

320 
Mu‹xLock
 
l
(&
mu‹x_
);

321 
FšishE¿£
(
bË_
.
Remove
(
key
, 
hash
));

324 
	gLRUCache
::
PruÃ
() {

325 
Mu‹xLock
 
l
(&
mu‹x_
);

326 
	gÌu_
.
	gÃxt
 !ğ&
Ìu_
) {

327 
LRUHªdË
* 
e
 = 
Ìu_
.
Ãxt
;

328 
as£¹
(
e
->
»fs
 == 1);

329 
boŞ
 
	g”a£d
 = 
FšishE¿£
(
bË_
.
Remove
(
e
->
key
(),ƒ->
hash
));

330 ià(!
	g”a£d
) {

331 
as£¹
(
”a£d
);

336 cÚ¡ 
	gkNumSh¬dB™s
 = 4;

337 cÚ¡ 
	gkNumSh¬ds
 = 1 << 
kNumSh¬dB™s
;

339 şas 
	cSh¬dedLRUCache
 : 
public
 
Cache
 {

340 
´iv©e
:

341 
LRUCache
 
sh¬d_
[
kNumSh¬ds
];

342 
	gpÜt
::
Mu‹x
 
id_mu‹x_
;

343 
ušt64_t
 
	gÏ¡_id_
;

345 
šlše
 
ušt32_t
 
HashSliû
(cÚ¡ 
Sliû
& 
s
) {

346  
Hash
(
s
.
d©a
(), s.
size
(), 0);

349 
ušt32_t
 
Sh¬d
(ušt32_ˆ
hash
è{  
	ghash
 >> (32 - 
	gkNumSh¬dB™s
); }

351 
	gpublic
:

352 
ex¶ic™
 
Sh¬dedLRUCache
(
size_t
 
ÿ·c™y
è: 
Ï¡_id_
(0) {

353 cÚ¡ 
size_t
 
³r_sh¬d
 = (
ÿ·c™y
 + (
kNumSh¬ds
 - 1)) / kNumShards;

354 
	gs
 = 0; s < 
	gkNumSh¬ds
; s++) {

355 
	gsh¬d_
[
s
].
S‘C­ac™y
(
³r_sh¬d
);

358 ~
Sh¬dedLRUCache
(è
	gov”ride
 {}

359 
HªdË
* 
In£¹
(cÚ¡ 
Sliû
& 
key
, * 
v®ue
, 
size_t
 
ch¬ge
,

360 (*
d–‘”
)(cÚ¡ 
Sliû
& 
key
, * 
v®ue
)è
	gov”ride
 {

361 cÚ¡ 
ušt32_t
 
	ghash
 = 
HashSliû
(
key
);

362  
	gsh¬d_
[
Sh¬d
(
hash
)].
In£¹
(
key
, hash, 
v®ue
, 
ch¬ge
, 
d–‘”
);

364 
HªdË
* 
Lookup
(cÚ¡ 
Sliû
& 
key
è
	gov”ride
 {

365 cÚ¡ 
ušt32_t
 
	ghash
 = 
HashSliû
(
key
);

366  
	gsh¬d_
[
Sh¬d
(
hash
)].
Lookup
(
key
, hash);

368 
R–—£
(
HªdË
* 
hªdË
è
	gov”ride
 {

369 
LRUHªdË
* 
	gh
 = 
»š‹½»t_ÿ¡
<LRUHªdË*>(
hªdË
);

370 
	gsh¬d_
[
Sh¬d
(
h
->
hash
)].
R–—£
(
hªdË
);

372 
E¿£
(cÚ¡ 
Sliû
& 
key
è
	gov”ride
 {

373 cÚ¡ 
ušt32_t
 
	ghash
 = 
HashSliû
(
key
);

374 
	gsh¬d_
[
Sh¬d
(
hash
)].
E¿£
(
key
, hash);

376 * 
V®ue
(
HªdË
* 
hªdË
è
	gov”ride
 {

377  
	g»š‹½»t_ÿ¡
<
	gLRUHªdË
*>(
	ghªdË
)->
	gv®ue
;

379 
ušt64_t
 
NewId
(è
	gov”ride
 {

380 
Mu‹xLock
 
l
(&
id_mu‹x_
);

381  ++(
	gÏ¡_id_
);

383 
PruÃ
(è
	gov”ride
 {

384 
	gs
 = 0; s < 
	gkNumSh¬ds
; s++) {

385 
	gsh¬d_
[
s
].
PruÃ
();

388 
size_t
 
TÙ®Ch¬ge
(ècÚ¡ 
	gov”ride
 {

389 
size_t
 
	gtÙ®
 = 0;

390 
	gs
 = 0; s < 
	gkNumSh¬ds
; s++) {

391 
	gtÙ®
 +ğ
sh¬d_
[
s
].
TÙ®Ch¬ge
();

393  
	gtÙ®
;

399 
Cache
* 
	$NewLRUCache
(
size_t
 
ÿ·c™y
è{  
Ãw
 
	`Sh¬dedLRUCache
(ÿ·c™y); 
	}
}

	@util/cache_test.cc

5 
	~"Ëv–db/ÿche.h
"

7 
	~<veùÜ
>

9 
	~"g‹¡/g‹¡.h
"

10 
	~"ut/codšg.h
"

12 
Çme¥aû
 
	gËv–db
 {

15 
	g¡d
::
¡ršg
 
EncodeKey
(
k
) {

16 
¡d
::
¡ršg
 
»suÉ
;

17 
PutFixed32
(&
»suÉ
, 
k
);

18  
	g»suÉ
;

20 
DecodeKey
(cÚ¡ 
Sliû
& 
k
) {

21 
as£¹
(
k
.
size
() == 4);

22  
DecodeFixed32
(
k
.
d©a
());

24 * 
EncodeV®ue
(
ušŒ_t
 
v
è{  
	g»š‹½»t_ÿ¡
<*>(
	gv
); }

25 
DecodeV®ue
(* 
v
è{  
	g»š‹½»t_ÿ¡
<
	gušŒ_t
>(
	gv
); }

27 şas 
	cCacheTe¡
 : 
public
 
‹¡šg
::
Te¡
 {

28 
public
:

29 
D–‘”
(cÚ¡ 
Sliû
& 
key
, * 
v
) {

30 
	gcu¼’t_
->
	gd–‘ed_keys_
.
push_back
(
DecodeKey
(
key
));

31 
	gcu¼’t_
->
	gd–‘ed_v®ues_
.
push_back
(
DecodeV®ue
(
v
));

34 
cÚ¡ex´
 
	gkCacheSize
 = 1000;

35 
	g¡d
::
veùÜ
<> 
d–‘ed_keys_
;

36 
	g¡d
::
veùÜ
<> 
d–‘ed_v®ues_
;

37 
Cache
* 
	gÿche_
;

39 
CacheTe¡
(è: 
ÿche_
(
NewLRUCache
(
kCacheSize
)è{ 
cu¼’t_
 = 
this
; }

41 ~
CacheTe¡
(è{ 
d–‘e
 
	gÿche_
; }

43 
Lookup
(
key
) {

44 
	gCache
::
HªdË
* 
hªdË
 = 
ÿche_
->
Lookup
(
EncodeKey
(
key
));

45 cÚ¡ 
	gr
 = (
hªdË
 =ğ
nuÎ±r
è? -1 : 
DecodeV®ue
(
ÿche_
->
V®ue
(handle));

46 ià(
	ghªdË
 !ğ
nuÎ±r
) {

47 
ÿche_
->
R–—£
(
hªdË
);

49  
	gr
;

52 
In£¹
(
key
, 
v®ue
, 
ch¬ge
 = 1) {

53 
ÿche_
->
R–—£
(ÿche_->
In£¹
(
EncodeKey
(
key
), 
EncodeV®ue
(
v®ue
), 
ch¬ge
,

54 &
CacheTe¡
::
D–‘”
));

57 
	gCache
::
HªdË
* 
In£¹AndR‘uºHªdË
(
key
, 
v®ue
, 
ch¬ge
 = 1) {

58  
ÿche_
->
In£¹
(
EncodeKey
(
key
), 
EncodeV®ue
(
v®ue
), 
ch¬ge
,

59 &
CacheTe¡
::
D–‘”
);

62 
E¿£
(
key
è{ 
	gÿche_
->E¿£(
EncodeKey
(key)); }

63 
CacheTe¡
* 
	gcu¼’t_
;

65 
CacheTe¡
* 
	gCacheTe¡
::
cu¼’t_
;

67 
	$TEST_F
(
CacheTe¡
, 
H™AndMiss
) {

68 
	`ASSERT_EQ
(-1, 
	`Lookup
(100));

70 
	`In£¹
(100, 101);

71 
	`ASSERT_EQ
(101, 
	`Lookup
(100));

72 
	`ASSERT_EQ
(-1, 
	`Lookup
(200));

73 
	`ASSERT_EQ
(-1, 
	`Lookup
(300));

75 
	`In£¹
(200, 201);

76 
	`ASSERT_EQ
(101, 
	`Lookup
(100));

77 
	`ASSERT_EQ
(201, 
	`Lookup
(200));

78 
	`ASSERT_EQ
(-1, 
	`Lookup
(300));

80 
	`In£¹
(100, 102);

81 
	`ASSERT_EQ
(102, 
	`Lookup
(100));

82 
	`ASSERT_EQ
(201, 
	`Lookup
(200));

83 
	`ASSERT_EQ
(-1, 
	`Lookup
(300));

85 
	`ASSERT_EQ
(1, 
d–‘ed_keys_
.
	`size
());

86 
	`ASSERT_EQ
(100, 
d–‘ed_keys_
[0]);

87 
	`ASSERT_EQ
(101, 
d–‘ed_v®ues_
[0]);

88 
	}
}

90 
	$TEST_F
(
CacheTe¡
, 
E¿£
) {

91 
	`E¿£
(200);

92 
	`ASSERT_EQ
(0, 
d–‘ed_keys_
.
	`size
());

94 
	`In£¹
(100, 101);

95 
	`In£¹
(200, 201);

96 
	`E¿£
(100);

97 
	`ASSERT_EQ
(-1, 
	`Lookup
(100));

98 
	`ASSERT_EQ
(201, 
	`Lookup
(200));

99 
	`ASSERT_EQ
(1, 
d–‘ed_keys_
.
	`size
());

100 
	`ASSERT_EQ
(100, 
d–‘ed_keys_
[0]);

101 
	`ASSERT_EQ
(101, 
d–‘ed_v®ues_
[0]);

103 
	`E¿£
(100);

104 
	`ASSERT_EQ
(-1, 
	`Lookup
(100));

105 
	`ASSERT_EQ
(201, 
	`Lookup
(200));

106 
	`ASSERT_EQ
(1, 
d–‘ed_keys_
.
	`size
());

107 
	}
}

109 
	$TEST_F
(
CacheTe¡
, 
EÁr›sA»PšÃd
) {

110 
	`In£¹
(100, 101);

111 
Cache
::
HªdË
* 
h1
 = 
ÿche_
->
	`Lookup
(
	`EncodeKey
(100));

112 
	`ASSERT_EQ
(101, 
	`DecodeV®ue
(
ÿche_
->
	`V®ue
(
h1
)));

114 
	`In£¹
(100, 102);

115 
Cache
::
HªdË
* 
h2
 = 
ÿche_
->
	`Lookup
(
	`EncodeKey
(100));

116 
	`ASSERT_EQ
(102, 
	`DecodeV®ue
(
ÿche_
->
	`V®ue
(
h2
)));

117 
	`ASSERT_EQ
(0, 
d–‘ed_keys_
.
	`size
());

119 
ÿche_
->
	`R–—£
(
h1
);

120 
	`ASSERT_EQ
(1, 
d–‘ed_keys_
.
	`size
());

121 
	`ASSERT_EQ
(100, 
d–‘ed_keys_
[0]);

122 
	`ASSERT_EQ
(101, 
d–‘ed_v®ues_
[0]);

124 
	`E¿£
(100);

125 
	`ASSERT_EQ
(-1, 
	`Lookup
(100));

126 
	`ASSERT_EQ
(1, 
d–‘ed_keys_
.
	`size
());

128 
ÿche_
->
	`R–—£
(
h2
);

129 
	`ASSERT_EQ
(2, 
d–‘ed_keys_
.
	`size
());

130 
	`ASSERT_EQ
(100, 
d–‘ed_keys_
[1]);

131 
	`ASSERT_EQ
(102, 
d–‘ed_v®ues_
[1]);

132 
	}
}

134 
	$TEST_F
(
CacheTe¡
, 
EviùiÚPŞicy
) {

135 
	`In£¹
(100, 101);

136 
	`In£¹
(200, 201);

137 
	`In£¹
(300, 301);

138 
Cache
::
HªdË
* 
h
 = 
ÿche_
->
	`Lookup
(
	`EncodeKey
(300));

142 
i
 = 0; i < 
kCacheSize
 + 100; i++) {

143 
	`In£¹
(1000 + 
i
, 2000 + i);

144 
	`ASSERT_EQ
(2000 + 
i
, 
	`Lookup
(1000 + i));

145 
	`ASSERT_EQ
(101, 
	`Lookup
(100));

147 
	`ASSERT_EQ
(101, 
	`Lookup
(100));

148 
	`ASSERT_EQ
(-1, 
	`Lookup
(200));

149 
	`ASSERT_EQ
(301, 
	`Lookup
(300));

150 
ÿche_
->
	`R–—£
(
h
);

151 
	}
}

153 
	$TEST_F
(
CacheTe¡
, 
U£ExûedsCacheSize
) {

155 
¡d
::
veùÜ
<
Cache
::
HªdË
*> 
h
;

156 
i
 = 0; i < 
kCacheSize
 + 100; i++) {

157 
h
.
	`push_back
(
	`In£¹AndR‘uºHªdË
(1000 + 
i
, 2000 + i));

161 
i
 = 0; i < 
h
.
	`size
(); i++) {

162 
	`ASSERT_EQ
(2000 + 
i
, 
	`Lookup
(1000 + i));

165 
i
 = 0; i < 
h
.
	`size
(); i++) {

166 
ÿche_
->
	`R–—£
(
h
[
i
]);

168 
	}
}

170 
	$TEST_F
(
CacheTe¡
, 
H—vyEÁr›s
) {

174 cÚ¡ 
kLight
 = 1;

175 cÚ¡ 
kH—vy
 = 10;

176 
added
 = 0;

177 
šdex
 = 0;

178 
added
 < 2 * 
kCacheSize
) {

179 cÚ¡ 
weight
 = (
šdex
 & 1è? 
kLight
 : 
kH—vy
;

180 
	`In£¹
(
šdex
, 1000 + index, 
weight
);

181 
added
 +ğ
weight
;

182 
šdex
++;

185 
ÿched_weight
 = 0;

186 
i
 = 0; i < 
šdex
; i++) {

187 cÚ¡ 
weight
 = (
i
 & 1 ? 
kLight
 : 
kH—vy
);

188 
r
 = 
	`Lookup
(
i
);

189 ià(
r
 >= 0) {

190 
ÿched_weight
 +ğ
weight
;

191 
	`ASSERT_EQ
(1000 + 
i
, 
r
);

194 
	`ASSERT_LE
(
ÿched_weight
, 
kCacheSize
 + kCacheSize / 10);

195 
	}
}

197 
	$TEST_F
(
CacheTe¡
, 
NewId
) {

198 
ušt64_t
 
a
 = 
ÿche_
->
	`NewId
();

199 
ušt64_t
 
b
 = 
ÿche_
->
	`NewId
();

200 
	`ASSERT_NE
(
a
, 
b
);

201 
	}
}

203 
	$TEST_F
(
CacheTe¡
, 
PruÃ
) {

204 
	`In£¹
(1, 100);

205 
	`In£¹
(2, 200);

207 
Cache
::
HªdË
* 
hªdË
 = 
ÿche_
->
	`Lookup
(
	`EncodeKey
(1));

208 
	`ASSERT_TRUE
(
hªdË
);

209 
ÿche_
->
	`PruÃ
();

210 
ÿche_
->
	`R–—£
(
hªdË
);

212 
	`ASSERT_EQ
(100, 
	`Lookup
(1));

213 
	`ASSERT_EQ
(-1, 
	`Lookup
(2));

214 
	}
}

216 
	$TEST_F
(
CacheTe¡
, 
Z”oSizeCache
) {

217 
d–‘e
 
ÿche_
;

218 
ÿche_
 = 
	`NewLRUCache
(0);

220 
	`In£¹
(1, 100);

221 
	`ASSERT_EQ
(-1, 
	`Lookup
(1));

222 
	}
}

	@util/coding.cc

5 
	~"ut/codšg.h
"

7 
Çme¥aû
 
	gËv–db
 {

9 
PutFixed32
(
¡d
::
¡ršg
* 
d¡
, 
ušt32_t
 
v®ue
) {

10 
	gbuf
[(
v®ue
)];

11 
EncodeFixed32
(
buf
, 
v®ue
);

12 
	gd¡
->
­³nd
(
buf
, (buf));

15 
PutFixed64
(
¡d
::
¡ršg
* 
d¡
, 
ušt64_t
 
v®ue
) {

16 
	gbuf
[(
v®ue
)];

17 
EncodeFixed64
(
buf
, 
v®ue
);

18 
	gd¡
->
­³nd
(
buf
, (buf));

21 * 
EncodeV¬št32
(* 
d¡
, 
ušt32_t
 
v
) {

23 
ušt8_t
* 
	g±r
 = 
»š‹½»t_ÿ¡
<ušt8_t*>(
d¡
);

24 cÚ¡ 
	gB
 = 128;

25 ià(
	gv
 < (1 << 7)) {

26 *(
	g±r
++èğ
v
;

27 } ià(
	gv
 < (1 << 14)) {

28 *(
	g±r
++èğ
v
 | 
B
;

29 *(
	g±r
++èğ
v
 >> 7;

30 } ià(
	gv
 < (1 << 21)) {

31 *(
	g±r
++èğ
v
 | 
B
;

32 *(
	g±r
++èğ(
v
 >> 7è| 
B
;

33 *(
	g±r
++èğ
v
 >> 14;

34 } ià(
	gv
 < (1 << 28)) {

35 *(
	g±r
++èğ
v
 | 
B
;

36 *(
	g±r
++èğ(
v
 >> 7è| 
B
;

37 *(
	g±r
++èğ(
v
 >> 14è| 
B
;

38 *(
	g±r
++èğ
v
 >> 21;

40 *(
	g±r
++èğ
v
 | 
B
;

41 *(
	g±r
++èğ(
v
 >> 7è| 
B
;

42 *(
	g±r
++èğ(
v
 >> 14è| 
B
;

43 *(
	g±r
++èğ(
v
 >> 21è| 
B
;

44 *(
	g±r
++èğ
v
 >> 28;

46  
	g»š‹½»t_ÿ¡
<*>(
	g±r
);

49 
PutV¬št32
(
¡d
::
¡ršg
* 
d¡
, 
ušt32_t
 
v
) {

50 
	gbuf
[5];

51 * 
	g±r
 = 
EncodeV¬št32
(
buf
, 
v
);

52 
	gd¡
->
­³nd
(
buf
, 
±r
 - buf);

55 * 
EncodeV¬št64
(* 
d¡
, 
ušt64_t
 
v
) {

56 cÚ¡ 
	gB
 = 128;

57 
ušt8_t
* 
	g±r
 = 
»š‹½»t_ÿ¡
<ušt8_t*>(
d¡
);

58 
	gv
 >ğ
B
) {

59 *(
±r
++èğ
v
 | 
B
;

60 
	gv
 >>= 7;

62 *(
	g±r
++èğ
¡©ic_ÿ¡
<
ušt8_t
>(
v
);

63  
	g»š‹½»t_ÿ¡
<*>(
	g±r
);

66 
PutV¬št64
(
¡d
::
¡ršg
* 
d¡
, 
ušt64_t
 
v
) {

67 
	gbuf
[10];

68 * 
	g±r
 = 
EncodeV¬št64
(
buf
, 
v
);

69 
	gd¡
->
­³nd
(
buf
, 
±r
 - buf);

72 
PutL’gthP»fixedSliû
(
¡d
::
¡ršg
* 
d¡
, cÚ¡ 
Sliû
& 
v®ue
) {

73 
PutV¬št32
(
d¡
, 
v®ue
.
size
());

74 
	gd¡
->
­³nd
(
v®ue
.
d©a
(), v®ue.
size
());

77 
V¬štL’gth
(
ušt64_t
 
v
) {

78 
	gËn
 = 1;

79 
	gv
 >= 128) {

80 
v
 >>= 7;

81 
	gËn
++;

83  
	gËn
;

86 cÚ¡ * 
G‘V¬št32PŒF®lback
(cÚ¡ * 
p
, cÚ¡ * 
lim™
,

87 
ušt32_t
* 
v®ue
) {

88 
ušt32_t
 
	g»suÉ
 = 0;

89 
ušt32_t
 
	gshiá
 = 0; shiá <ğ28 && 
p
 < 
lim™
; shift += 7) {

90 
ušt32_t
 
by‹
 = *(
»š‹½»t_ÿ¡
<cÚ¡ 
ušt8_t
*>(
p
));

91 
	gp
++;

92 ià(
	gby‹
 & 128) {

94 
	g»suÉ
 |ğ((
by‹
 & 127è<< 
shiá
);

96 
	g»suÉ
 |ğ(
by‹
 << 
shiá
);

97 *
	gv®ue
 = 
»suÉ
;

98  
	g»š‹½»t_ÿ¡
<cÚ¡ *>(
	gp
);

101  
	gnuÎ±r
;

104 
boŞ
 
G‘V¬št32
(
Sliû
* 
šput
, 
ušt32_t
* 
v®ue
) {

105 cÚ¡ * 
	gp
 = 
šput
->
d©a
();

106 cÚ¡ * 
	glim™
 = 
p
 + 
šput
->
size
();

107 cÚ¡ * 
	gq
 = 
G‘V¬št32PŒ
(
p
, 
lim™
, 
v®ue
);

108 ià(
	gq
 =ğ
nuÎ±r
) {

109  
çl£
;

111 *
	gšput
 = 
Sliû
(
q
, 
lim™
 - q);

112  
	gŒue
;

116 cÚ¡ * 
G‘V¬št64PŒ
(cÚ¡ * 
p
, cÚ¡ * 
lim™
, 
ušt64_t
* 
v®ue
) {

117 
ušt64_t
 
	g»suÉ
 = 0;

118 
ušt32_t
 
	gshiá
 = 0; shiá <ğ63 && 
p
 < 
lim™
; shift += 7) {

119 
ušt64_t
 
by‹
 = *(
»š‹½»t_ÿ¡
<cÚ¡ 
ušt8_t
*>(
p
));

120 
	gp
++;

121 ià(
	gby‹
 & 128) {

123 
	g»suÉ
 |ğ((
by‹
 & 127è<< 
shiá
);

125 
	g»suÉ
 |ğ(
by‹
 << 
shiá
);

126 *
	gv®ue
 = 
»suÉ
;

127  
	g»š‹½»t_ÿ¡
<cÚ¡ *>(
	gp
);

130  
	gnuÎ±r
;

133 
boŞ
 
G‘V¬št64
(
Sliû
* 
šput
, 
ušt64_t
* 
v®ue
) {

134 cÚ¡ * 
	gp
 = 
šput
->
d©a
();

135 cÚ¡ * 
	glim™
 = 
p
 + 
šput
->
size
();

136 cÚ¡ * 
	gq
 = 
G‘V¬št64PŒ
(
p
, 
lim™
, 
v®ue
);

137 ià(
	gq
 =ğ
nuÎ±r
) {

138  
çl£
;

140 *
	gšput
 = 
Sliû
(
q
, 
lim™
 - q);

141  
	gŒue
;

145 
boŞ
 
G‘L’gthP»fixedSliû
(
Sliû
* 
šput
, Sliû* 
»suÉ
) {

146 
ušt32_t
 
	gËn
;

147 ià(
G‘V¬št32
(
šput
, &
Ën
è&& 
	gšput
->
size
() >=†en) {

148 *
»suÉ
 = 
Sliû
(
šput
->
d©a
(), 
Ën
);

149 
	gšput
->
»move_´efix
(
Ën
);

150  
	gŒue
;

152  
	gçl£
;

	@util/coding.h

10 #iâdeà
STORAGE_LEVELDB_UTIL_CODING_H_


11 
	#STORAGE_LEVELDB_UTIL_CODING_H_


	)

13 
	~<c¡dšt
>

14 
	~<c¡ršg
>

15 
	~<¡ršg
>

17 
	~"Ëv–db/¦iû.h
"

18 
	~"pÜt/pÜt.h
"

20 
Çme¥aû
 
	gËv–db
 {

23 
PutFixed32
(
¡d
::
¡ršg
* 
d¡
, 
ušt32_t
 
v®ue
);

24 
PutFixed64
(
¡d
::
¡ršg
* 
d¡
, 
ušt64_t
 
v®ue
);

25 
PutV¬št32
(
¡d
::
¡ršg
* 
d¡
, 
ušt32_t
 
v®ue
);

26 
PutV¬št64
(
¡d
::
¡ršg
* 
d¡
, 
ušt64_t
 
v®ue
);

27 
PutL’gthP»fixedSliû
(
¡d
::
¡ršg
* 
d¡
, cÚ¡ 
Sliû
& 
v®ue
);

31 
boŞ
 
G‘V¬št32
(
Sliû
* 
šput
, 
ušt32_t
* 
v®ue
);

32 
boŞ
 
G‘V¬št64
(
Sliû
* 
šput
, 
ušt64_t
* 
v®ue
);

33 
boŞ
 
G‘L’gthP»fixedSliû
(
Sliû
* 
šput
, Sliû* 
»suÉ
);

39 cÚ¡ * 
G‘V¬št32PŒ
(cÚ¡ * 
p
, cÚ¡ * 
lim™
, 
ušt32_t
* 
v
);

40 cÚ¡ * 
G‘V¬št64PŒ
(cÚ¡ * 
p
, cÚ¡ * 
lim™
, 
ušt64_t
* 
v
);

43 
V¬štL’gth
(
ušt64_t
 
v
);

48 * 
EncodeV¬št32
(* 
d¡
, 
ušt32_t
 
v®ue
);

49 * 
EncodeV¬št64
(* 
d¡
, 
ušt64_t
 
v®ue
);

54 
šlše
 
EncodeFixed32
(* 
d¡
, 
ušt32_t
 
v®ue
) {

55 
ušt8_t
* cÚ¡ 
	gbufãr
 = 
»š‹½»t_ÿ¡
<ušt8_t*>(
d¡
);

58 
	gbufãr
[0] = 
¡©ic_ÿ¡
<
ušt8_t
>(
v®ue
);

59 
	gbufãr
[1] = 
¡©ic_ÿ¡
<
ušt8_t
>(
v®ue
 >> 8);

60 
	gbufãr
[2] = 
¡©ic_ÿ¡
<
ušt8_t
>(
v®ue
 >> 16);

61 
	gbufãr
[3] = 
¡©ic_ÿ¡
<
ušt8_t
>(
v®ue
 >> 24);

64 
šlše
 
EncodeFixed64
(* 
d¡
, 
ušt64_t
 
v®ue
) {

65 
ušt8_t
* cÚ¡ 
	gbufãr
 = 
»š‹½»t_ÿ¡
<ušt8_t*>(
d¡
);

68 
	gbufãr
[0] = 
¡©ic_ÿ¡
<
ušt8_t
>(
v®ue
);

69 
	gbufãr
[1] = 
¡©ic_ÿ¡
<
ušt8_t
>(
v®ue
 >> 8);

70 
	gbufãr
[2] = 
¡©ic_ÿ¡
<
ušt8_t
>(
v®ue
 >> 16);

71 
	gbufãr
[3] = 
¡©ic_ÿ¡
<
ušt8_t
>(
v®ue
 >> 24);

72 
	gbufãr
[4] = 
¡©ic_ÿ¡
<
ušt8_t
>(
v®ue
 >> 32);

73 
	gbufãr
[5] = 
¡©ic_ÿ¡
<
ušt8_t
>(
v®ue
 >> 40);

74 
	gbufãr
[6] = 
¡©ic_ÿ¡
<
ušt8_t
>(
v®ue
 >> 48);

75 
	gbufãr
[7] = 
¡©ic_ÿ¡
<
ušt8_t
>(
v®ue
 >> 56);

81 
šlše
 
ušt32_t
 
DecodeFixed32
(cÚ¡ * 
±r
) {

82 cÚ¡ 
ušt8_t
* cÚ¡ 
	gbufãr
 = 
»š‹½»t_ÿ¡
<cÚ¡ ušt8_t*>(
±r
);

85  (
	g¡©ic_ÿ¡
<
	gušt32_t
>(
	gbufãr
[0])) |

86 (
	g¡©ic_ÿ¡
<
	gušt32_t
>(
	gbufãr
[1]) << 8) |

87 (
	g¡©ic_ÿ¡
<
	gušt32_t
>(
	gbufãr
[2]) << 16) |

88 (
	g¡©ic_ÿ¡
<
	gušt32_t
>(
	gbufãr
[3]) << 24);

91 
šlše
 
ušt64_t
 
DecodeFixed64
(cÚ¡ * 
±r
) {

92 cÚ¡ 
ušt8_t
* cÚ¡ 
	gbufãr
 = 
»š‹½»t_ÿ¡
<cÚ¡ ušt8_t*>(
±r
);

95  (
	g¡©ic_ÿ¡
<
	gušt64_t
>(
	gbufãr
[0])) |

96 (
	g¡©ic_ÿ¡
<
	gušt64_t
>(
	gbufãr
[1]) << 8) |

97 (
	g¡©ic_ÿ¡
<
	gušt64_t
>(
	gbufãr
[2]) << 16) |

98 (
	g¡©ic_ÿ¡
<
	gušt64_t
>(
	gbufãr
[3]) << 24) |

99 (
	g¡©ic_ÿ¡
<
	gušt64_t
>(
	gbufãr
[4]) << 32) |

100 (
	g¡©ic_ÿ¡
<
	gušt64_t
>(
	gbufãr
[5]) << 40) |

101 (
	g¡©ic_ÿ¡
<
	gušt64_t
>(
	gbufãr
[6]) << 48) |

102 (
	g¡©ic_ÿ¡
<
	gušt64_t
>(
	gbufãr
[7]) << 56);

106 cÚ¡ * 
G‘V¬št32PŒF®lback
(cÚ¡ * 
p
, cÚ¡ * 
lim™
,

107 
ušt32_t
* 
v®ue
);

108 
šlše
 cÚ¡ * 
G‘V¬št32PŒ
(cÚ¡ * 
p
, cÚ¡ * 
lim™
,

109 
ušt32_t
* 
v®ue
) {

110 ià(
	gp
 < 
	glim™
) {

111 
ušt32_t
 
	g»suÉ
 = *(
»š‹½»t_ÿ¡
<cÚ¡ 
ušt8_t
*>(
p
));

112 ià((
	g»suÉ
 & 128) == 0) {

113 *
v®ue
 = 
»suÉ
;

114  
	gp
 + 1;

117  
G‘V¬št32PŒF®lback
(
p
, 
lim™
, 
v®ue
);

	@util/coding_test.cc

5 
	~"ut/codšg.h
"

7 
	~<veùÜ
>

9 
	~"g‹¡/g‹¡.h
"

11 
Çme¥aû
 
	gËv–db
 {

13 
TEST
(
Codšg
, 
Fixed32
) {

14 
	g¡d
::
¡ršg
 
s
;

15 
ušt32_t
 
	gv
 = 0; v < 100000; v++) {

16 
PutFixed32
(&
s
, 
v
);

19 cÚ¡ * 
	gp
 = 
s
.
d©a
();

20 
ušt32_t
 
	gv
 = 0; v < 100000; v++) {

21 
ušt32_t
 
	gaùu®
 = 
DecodeFixed32
(
p
);

22 
ASSERT_EQ
(
v
, 
aùu®
);

23 
	gp
 +ğ(
ušt32_t
);

27 
TEST
(
Codšg
, 
Fixed64
) {

28 
	g¡d
::
¡ršg
 
s
;

29 
	gpow”
 = 0;…ower <= 63;…ower++) {

30 
ušt64_t
 
	gv
 = 
¡©ic_ÿ¡
<ušt64_t>(1è<< 
pow”
;

31 
PutFixed64
(&
s
, 
v
 - 1);

32 
PutFixed64
(&
s
, 
v
 + 0);

33 
PutFixed64
(&
s
, 
v
 + 1);

36 cÚ¡ * 
	gp
 = 
s
.
d©a
();

37 
	gpow”
 = 0;…ower <= 63;…ower++) {

38 
ušt64_t
 
	gv
 = 
¡©ic_ÿ¡
<ušt64_t>(1è<< 
pow”
;

39 
ušt64_t
 
	gaùu®
;

40 
	gaùu®
 = 
DecodeFixed64
(
p
);

41 
ASSERT_EQ
(
v
 - 1, 
aùu®
);

42 
	gp
 +ğ(
ušt64_t
);

44 
	gaùu®
 = 
DecodeFixed64
(
p
);

45 
ASSERT_EQ
(
v
 + 0, 
aùu®
);

46 
	gp
 +ğ(
ušt64_t
);

48 
	gaùu®
 = 
DecodeFixed64
(
p
);

49 
ASSERT_EQ
(
v
 + 1, 
aùu®
);

50 
	gp
 +ğ(
ušt64_t
);

55 
TEST
(
Codšg
, 
EncodšgOuut
) {

56 
	g¡d
::
¡ršg
 
d¡
;

57 
PutFixed32
(&
d¡
, 0x04030201);

58 
ASSERT_EQ
(4, 
d¡
.
size
());

59 
ASSERT_EQ
(0x01, 
¡©ic_ÿ¡
<>(
d¡
[0]));

60 
ASSERT_EQ
(0x02, 
¡©ic_ÿ¡
<>(
d¡
[1]));

61 
ASSERT_EQ
(0x03, 
¡©ic_ÿ¡
<>(
d¡
[2]));

62 
ASSERT_EQ
(0x04, 
¡©ic_ÿ¡
<>(
d¡
[3]));

64 
	gd¡
.
ş—r
();

65 
PutFixed64
(&
d¡
, 0x0807060504030201ull);

66 
ASSERT_EQ
(8, 
d¡
.
size
());

67 
ASSERT_EQ
(0x01, 
¡©ic_ÿ¡
<>(
d¡
[0]));

68 
ASSERT_EQ
(0x02, 
¡©ic_ÿ¡
<>(
d¡
[1]));

69 
ASSERT_EQ
(0x03, 
¡©ic_ÿ¡
<>(
d¡
[2]));

70 
ASSERT_EQ
(0x04, 
¡©ic_ÿ¡
<>(
d¡
[3]));

71 
ASSERT_EQ
(0x05, 
¡©ic_ÿ¡
<>(
d¡
[4]));

72 
ASSERT_EQ
(0x06, 
¡©ic_ÿ¡
<>(
d¡
[5]));

73 
ASSERT_EQ
(0x07, 
¡©ic_ÿ¡
<>(
d¡
[6]));

74 
ASSERT_EQ
(0x08, 
¡©ic_ÿ¡
<>(
d¡
[7]));

77 
TEST
(
Codšg
, 
V¬št32
) {

78 
	g¡d
::
¡ršg
 
s
;

79 
ušt32_t
 
	gi
 = 0; i < (32 * 32); i++) {

80 
ušt32_t
 
	gv
 = (
i
 / 32) << (i % 32);

81 
PutV¬št32
(&
s
, 
v
);

84 cÚ¡ * 
	gp
 = 
s
.
d©a
();

85 cÚ¡ * 
	glim™
 = 
p
 + 
s
.
size
();

86 
ušt32_t
 
	gi
 = 0; i < (32 * 32); i++) {

87 
ušt32_t
 
	gex³ùed
 = (
i
 / 32) << (i % 32);

88 
ušt32_t
 
	gaùu®
;

89 cÚ¡ * 
	g¡¬t
 = 
p
;

90 
	gp
 = 
G‘V¬št32PŒ
(
p
, 
lim™
, &
aùu®
);

91 
ASSERT_TRUE
(
p
 !ğ
nuÎ±r
);

92 
ASSERT_EQ
(
ex³ùed
, 
aùu®
);

93 
ASSERT_EQ
(
V¬štL’gth
(
aùu®
), 
p
 - 
¡¬t
);

95 
ASSERT_EQ
(
p
, 
s
.
d©a
(è+ s.
size
());

98 
TEST
(
Codšg
, 
V¬št64
) {

100 
	g¡d
::
veùÜ
<
ušt64_t
> 
v®ues
;

102 
	gv®ues
.
push_back
(0);

103 
	gv®ues
.
push_back
(100);

104 
	gv®ues
.
push_back
(~
¡©ic_ÿ¡
<
ušt64_t
>(0));

105 
	gv®ues
.
push_back
(~
¡©ic_ÿ¡
<
ušt64_t
>(0) - 1);

106 
ušt32_t
 
	gk
 = 0; k < 64; k++) {

108 cÚ¡ 
ušt64_t
 
	gpow”
 = 1uÎ << 
k
;

109 
	gv®ues
.
push_back
(
pow”
);

110 
	gv®ues
.
push_back
(
pow”
 - 1);

111 
	gv®ues
.
push_back
(
pow”
 + 1);

114 
	g¡d
::
¡ršg
 
s
;

115 
size_t
 
	gi
 = 0; i < 
	gv®ues
.
size
(); i++) {

116 
PutV¬št64
(&
s
, 
v®ues
[
i
]);

119 cÚ¡ * 
	gp
 = 
s
.
d©a
();

120 cÚ¡ * 
	glim™
 = 
p
 + 
s
.
size
();

121 
size_t
 
	gi
 = 0; i < 
	gv®ues
.
size
(); i++) {

122 
ASSERT_TRUE
(
p
 < 
lim™
);

123 
ušt64_t
 
	gaùu®
;

124 cÚ¡ * 
	g¡¬t
 = 
p
;

125 
	gp
 = 
G‘V¬št64PŒ
(
p
, 
lim™
, &
aùu®
);

126 
ASSERT_TRUE
(
p
 !ğ
nuÎ±r
);

127 
ASSERT_EQ
(
v®ues
[
i
], 
aùu®
);

128 
ASSERT_EQ
(
V¬štL’gth
(
aùu®
), 
p
 - 
¡¬t
);

130 
ASSERT_EQ
(
p
, 
lim™
);

133 
TEST
(
Codšg
, 
V¬št32Ov”æow
) {

134 
ušt32_t
 
	g»suÉ
;

135 
	g¡d
::
¡ršg
 
šput
("\x81\x82\x83\x84\x85\x11");

136 
ASSERT_TRUE
(
G‘V¬št32PŒ
(
šput
.
d©a
(), iÅut.d©a(è+ iÅut.
size
(),

137 &
»suÉ
è=ğ
nuÎ±r
);

140 
TEST
(
Codšg
, 
V¬št32TrunÿtiÚ
) {

141 
ušt32_t
 
	gÏrge_v®ue
 = (1u << 31) + 100;

142 
	g¡d
::
¡ršg
 
s
;

143 
PutV¬št32
(&
s
, 
Ïrge_v®ue
);

144 
ušt32_t
 
	g»suÉ
;

145 
size_t
 
	gËn
 = 0;†’ < 
	gs
.
size
() - 1;†en++) {

146 
ASSERT_TRUE
(
G‘V¬št32PŒ
(
s
.
d©a
(), s.d©a(è+ 
Ën
, &
»suÉ
è=ğ
nuÎ±r
);

148 
ASSERT_TRUE
(
G‘V¬št32PŒ
(
s
.
d©a
(), s.d©a(è+ s.
size
(), &
»suÉ
) !=

149 
nuÎ±r
);

150 
ASSERT_EQ
(
Ïrge_v®ue
, 
»suÉ
);

153 
TEST
(
Codšg
, 
V¬št64Ov”æow
) {

154 
ušt64_t
 
	g»suÉ
;

155 
	g¡d
::
¡ršg
 
šput
("\x81\x82\x83\x84\x85\x81\x82\x83\x84\x85\x11");

156 
ASSERT_TRUE
(
G‘V¬št64PŒ
(
šput
.
d©a
(), iÅut.d©a(è+ iÅut.
size
(),

157 &
»suÉ
è=ğ
nuÎ±r
);

160 
TEST
(
Codšg
, 
V¬št64TrunÿtiÚ
) {

161 
ušt64_t
 
	gÏrge_v®ue
 = (1ull << 63) + 100ull;

162 
	g¡d
::
¡ršg
 
s
;

163 
PutV¬št64
(&
s
, 
Ïrge_v®ue
);

164 
ušt64_t
 
	g»suÉ
;

165 
size_t
 
	gËn
 = 0;†’ < 
	gs
.
size
() - 1;†en++) {

166 
ASSERT_TRUE
(
G‘V¬št64PŒ
(
s
.
d©a
(), s.d©a(è+ 
Ën
, &
»suÉ
è=ğ
nuÎ±r
);

168 
ASSERT_TRUE
(
G‘V¬št64PŒ
(
s
.
d©a
(), s.d©a(è+ s.
size
(), &
»suÉ
) !=

169 
nuÎ±r
);

170 
ASSERT_EQ
(
Ïrge_v®ue
, 
»suÉ
);

173 
TEST
(
Codšg
, 
SŒšgs
) {

174 
	g¡d
::
¡ršg
 
s
;

175 
PutL’gthP»fixedSliû
(&
s
, 
Sliû
(""));

176 
PutL’gthP»fixedSliû
(&
s
, 
Sliû
("foo"));

177 
PutL’gthP»fixedSliû
(&
s
, 
Sliû
("bar"));

178 
PutL’gthP»fixedSliû
(&
s
, 
Sliû
(
¡d
::
¡ršg
(200, 'x')));

180 
Sliû
 
šput
(
s
);

181 
Sliû
 
	gv
;

182 
ASSERT_TRUE
(
G‘L’gthP»fixedSliû
(&
šput
, &
v
));

183 
ASSERT_EQ
("", 
v
.
ToSŒšg
());

184 
ASSERT_TRUE
(
G‘L’gthP»fixedSliû
(&
šput
, &
v
));

185 
ASSERT_EQ
("foo", 
v
.
ToSŒšg
());

186 
ASSERT_TRUE
(
G‘L’gthP»fixedSliû
(&
šput
, &
v
));

187 
ASSERT_EQ
("b¬", 
v
.
ToSŒšg
());

188 
ASSERT_TRUE
(
G‘L’gthP»fixedSliû
(&
šput
, &
v
));

189 
ASSERT_EQ
(
¡d
::
¡ršg
(200, 'x'), 
v
.
ToSŒšg
());

190 
ASSERT_EQ
("", 
šput
.
ToSŒšg
());

	@util/comparator.cc

5 
	~"Ëv–db/com·¿tÜ.h
"

7 
	~<®gÜ™hm
>

8 
	~<c¡dšt
>

9 
	~<¡ršg
>

10 
	~<ty³_Œa™s
>

12 
	~"Ëv–db/¦iû.h
"

13 
	~"ut/loggšg.h
"

14 
	~"ut/no_de¡ruùÜ.h
"

16 
Çme¥aû
 
	gËv–db
 {

18 
	gCom·¿tÜ
::~
Com·¿tÜ
() = ;

20 
	gÇme¥aû
 {

21 şas 
	cBy‹wi£Com·¿tÜIm¶
 : 
public
 
Com·¿tÜ
 {

22 
public
:

23 
By‹wi£Com·¿tÜIm¶
() = ;

25 cÚ¡ * 
Name
(ècÚ¡ 
	gov”ride
 {  "leveldb.BytewiseComparator"; }

27 
Com·»
(cÚ¡ 
Sliû
& 
a
, cÚ¡ Sliû& 
b
ècÚ¡ 
	gov”ride
 {

28  
	ga
.
com·»
(
b
);

31 
FšdShÜ‹¡S•¬©Ü
(
¡d
::
¡ršg
* 
¡¬t
,

32 cÚ¡ 
Sliû
& 
lim™
ècÚ¡ 
	gov”ride
 {

34 
size_t
 
	gmš_Ëngth
 = 
¡d
::
mš
(
¡¬t
->
size
(), 
lim™
.size());

35 
size_t
 
	gdiff_šdex
 = 0;

36 (
	gdiff_šdex
 < 
	gmš_Ëngth
) &&

37 ((*
	g¡¬t
)[
diff_šdex
] =ğ
lim™
[diff_index])) {

38 
diff_šdex
++;

41 ià(
	gdiff_šdex
 >ğ
mš_Ëngth
) {

44 
ušt8_t
 
diff_by‹
 = 
¡©ic_ÿ¡
<ušt8_t>((*
¡¬t
)[
diff_šdex
]);

45 ià(
	gdiff_by‹
 < 
	g¡©ic_ÿ¡
<
	gušt8_t
>(0xff) &&

46 
	gdiff_by‹
 + 1 < 
	g¡©ic_ÿ¡
<
	gušt8_t
>(
	glim™
[
diff_šdex
])) {

47 (*
	g¡¬t
)[
diff_šdex
]++;

48 
	g¡¬t
->
»size
(
diff_šdex
 + 1);

49 
as£¹
(
Com·»
(*
¡¬t
, 
lim™
) < 0);

54 
FšdShÜtSucûssÜ
(
¡d
::
¡ršg
* 
key
ècÚ¡ 
ov”ride
 {

56 
size_t
 
n
 = 
key
->
size
();

57 
size_t
 
	gi
 = 0; i < 
	gn
; i++) {

58 cÚ¡ 
ušt8_t
 
	gby‹
 = (*
key
)[
i
];

59 ià(
	gby‹
 !ğ
¡©ic_ÿ¡
<
ušt8_t
>(0xff)) {

60 (*
key
)[
i
] = 
by‹
 + 1;

61 
	gkey
->
»size
(
i
 + 1);

70 cÚ¡ 
Com·¿tÜ
* 
	$By‹wi£Com·¿tÜ
() {

71 
NoDe¡ruùÜ
<
By‹wi£Com·¿tÜIm¶
> 
sšgËtÚ
;

72  
sšgËtÚ
.
	`g‘
();

73 
	}
}

	@util/crc32c.cc

7 
	~"ut/üc32c.h
"

9 
	~<c¡ddef
>

10 
	~<c¡dšt
>

12 
	~"pÜt/pÜt.h
"

13 
	~"ut/codšg.h
"

15 
Çme¥aû
 
	gËv–db
 {

16 
Çme¥aû
 
	güc32c
 {

18 
	gÇme¥aû
 {

20 cÚ¡ 
ušt32_t
 
	gkBy‹Ex‹nsiÚTabË
[256] = {

65 cÚ¡ 
ušt32_t
 
	gkSŒideEx‹nsiÚTabË0
[256] = {

110 cÚ¡ 
ušt32_t
 
	gkSŒideEx‹nsiÚTabË1
[256] = {

155 cÚ¡ 
ušt32_t
 
	gkSŒideEx‹nsiÚTabË2
[256] = {

200 cÚ¡ 
ušt32_t
 
	gkSŒideEx‹nsiÚTabË3
[256] = {

246 
cÚ¡ex´
 cÚ¡ 
ušt32_t
 
	gkCRC32XÜ
 = 
¡©ic_ÿ¡
<uint32_t>(0xffffffffU);

249 
šlše
 
ušt32_t
 
R—dUšt32LE
(cÚ¡ 
ušt8_t
* 
bufãr
) {

250  
DecodeFixed32
(
»š‹½»t_ÿ¡
<cÚ¡ *>(
bufãr
));

256 
	g‹m¶©e
 <
	gN
>

257 
cÚ¡ex´
 
šlše
 cÚ¡ 
ušt8_t
* 
RoundUp
(cÚ¡ ušt8_t* 
poš‹r
) {

258  
	g»š‹½»t_ÿ¡
<
	gušt8_t
*>(

259 (
	g»š‹½»t_ÿ¡
<
	gušŒ_t
>(
	gpoš‹r
è+ (
	gN
 - 1)) &

260 ~
	g¡©ic_ÿ¡
<
	gušŒ_t
>(
	gN
 - 1));

267 
boŞ
 
CªAcûË¿‹CRC32C
() {

269 cÚ¡ 
	gkTe¡CRCBufãr
[] = "TestCRCBuffer";

270 cÚ¡ 
	gkBufSize
 = (
kTe¡CRCBufãr
) - 1;

271 cÚ¡ 
ušt32_t
 
	gkTe¡CRCV®ue
 = 0xdcbc59fa;

273  
	gpÜt
::
AcûË¿‹dCRC32C
(0, 
kTe¡CRCBufãr
, 
kBufSize
è=ğ
kTe¡CRCV®ue
;

276 
ušt32_t
 
Ex‹nd
(ušt32_ˆ
üc
, cÚ¡ * 
d©a
, 
size_t
 
n
) {

277 
boŞ
 
	gacûË¿‹
 = 
CªAcûË¿‹CRC32C
();

278 ià(
	gacûË¿‹
) {

279  
	gpÜt
::
AcûË¿‹dCRC32C
(
üc
, 
d©a
, 
n
);

282 cÚ¡ 
ušt8_t
* 
	gp
 = 
»š‹½»t_ÿ¡
<cÚ¡ ušt8_t*>(
d©a
);

283 cÚ¡ 
ušt8_t
* 
	ge
 = 
p
 + 
n
;

284 
ušt32_t
 
	gl
 = 
üc
 ^ 
kCRC32XÜ
;

287 
	#STEP1
 \

289 
c
 = (
l
 & 0xffè^ *
p
++; \

290 
l
 = 
kBy‹Ex‹nsiÚTabË
[
c
] ^ (l >> 8); \

291 } 0)

	)

294 
	#STEP4
(
s
) \

296 
üc
##
s
 = 
	`R—dUšt32LE
(
p
 + s * 4è^ 
kSŒideEx‹nsiÚTabË3
[crc##s & 0xff] ^ \

297 
kSŒideEx‹nsiÚTabË2
[(
üc
##
s
 >> 8) & 0xff] ^ \

298 
kSŒideEx‹nsiÚTabË1
[(
üc
##
s
 >> 16) & 0xff] ^ \

299 
kSŒideEx‹nsiÚTabË0
[
üc
##
s
 >> 24]; \

300 } 0)

	)

303 
	#STEP16
 \

305 
	`STEP4
(0); \

306 
	`STEP4
(1); \

307 
	`STEP4
(2); \

308 
	`STEP4
(3); \

309 
p
 += 16; \

310 } 0)

	)

313 
	#STEP4W
(
w
) \

315 
w
 ^ğ
l
; \

316 
size_t
 
i
 = 0; i < 4; ++i) { \

317 
w
 = (w >> 8è^ 
kBy‹Ex‹nsiÚTabË
[w & 0xff]; \

319 
l
 = 
w
; \

320 } 0)

	)

324 cÚ¡ 
ušt8_t
* 
	gx
 = 
RoundUp
<4>(
p
);

325 ià(
	gx
 <ğ
e
) {

327 
p
 !ğ
x
) {

328 
STEP1
;

332 ià((
	ge
 - 
	gp
) >= 16) {

334 
ušt32_t
 
üc0
 = 
R—dUšt32LE
(
p
 + 0 * 4è^ 
l
;

335 
ušt32_t
 
	güc1
 = 
R—dUšt32LE
(
p
 + 1 * 4);

336 
ušt32_t
 
	güc2
 = 
R—dUšt32LE
(
p
 + 2 * 4);

337 
ušt32_t
 
	güc3
 = 
R—dUšt32LE
(
p
 + 3 * 4);

338 
	gp
 += 16;

345 (
	ge
 - 
	gp
) >= 16) {

346 
STEP16
;

350 (
	ge
 - 
	gp
) >= 4) {

351 
STEP4
(0);

352 
ušt32_t
 
	gtmp
 = 
üc0
;

353 
	güc0
 = 
üc1
;

354 
	güc1
 = 
üc2
;

355 
	güc2
 = 
üc3
;

356 
	güc3
 = 
tmp
;

357 
	gp
 += 4;

361 
	gl
 = 0;

362 
STEP4W
(
üc0
);

363 
STEP4W
(
üc1
);

364 
STEP4W
(
üc2
);

365 
STEP4W
(
üc3
);

369 
	gp
 !ğ
e
) {

370 
STEP1
;

372 #undeà
STEP4W


373 #undeà
STEP16


374 #undeà
STEP4


375 #undeà
STEP1


376  
	gl
 ^ 
	gkCRC32XÜ
;

	@util/crc32c.h

5 #iâdeà
STORAGE_LEVELDB_UTIL_CRC32C_H_


6 
	#STORAGE_LEVELDB_UTIL_CRC32C_H_


	)

8 
	~<c¡ddef
>

9 
	~<c¡dšt
>

11 
Çme¥aû
 
	gËv–db
 {

12 
Çme¥aû
 
	güc32c
 {

17 
ušt32_t
 
Ex‹nd
(ušt32_ˆ
š™_üc
, cÚ¡ * 
d©a
, 
size_t
 
n
);

20 
šlše
 
ušt32_t
 
V®ue
(cÚ¡ * 
d©a
, 
size_t
 
n
è{  
Ex‹nd
(0, data,‚); }

22 cÚ¡ 
ušt32_t
 
	gkMaskD–
 = 0xa282ead8ul;

29 
šlše
 
ušt32_t
 
Mask
(ušt32_ˆ
üc
) {

31  ((
	güc
 >> 15è| (üø<< 17)è+ 
	gkMaskD–
;

35 
šlše
 
ušt32_t
 
Unmask
(ušt32_ˆ
masked_üc
) {

36 
ušt32_t
 
	grÙ
 = 
masked_üc
 - 
kMaskD–
;

37  ((
	grÙ
 >> 17) | (rot << 15));

	@util/crc32c_test.cc

5 
	~"ut/üc32c.h
"

7 
	~"g‹¡/g‹¡.h
"

9 
Çme¥aû
 
	gËv–db
 {

10 
Çme¥aû
 
	güc32c
 {

12 
TEST
(
CRC
, 
Snd¬dResuÉs
) {

14 
	gbuf
[32];

16 
mem£t
(
buf
, 0, (buf));

17 
ASSERT_EQ
(0x8a9136¯, 
V®ue
(
buf
, (buf)));

19 
mem£t
(
buf
, 0xff, (buf));

20 
ASSERT_EQ
(0x62a8ab43, 
V®ue
(
buf
, (buf)));

22 
	gi
 = 0; i < 32; i++) {

23 
	gbuf
[
i
] = i;

25 
ASSERT_EQ
(0x46dd794e, 
V®ue
(
buf
, (buf)));

27 
	gi
 = 0; i < 32; i++) {

28 
	gbuf
[
i
] = 31 - i;

30 
ASSERT_EQ
(0x113fdb5c, 
V®ue
(
buf
, (buf)));

32 
ušt8_t
 
	gd©a
[48] = {

38 
ASSERT_EQ
(0xd9963a56, 
V®ue
(
»š‹½»t_ÿ¡
<*>(
d©a
), (data)));

41 
TEST
(
CRC
, 
V®ues
è{ 
ASSERT_NE
(
V®ue
("a", 1), Value("foo", 3)); }

43 
TEST
(
CRC
, 
Ex‹nd
) {

44 
ASSERT_EQ
(
V®ue
("h–lØwÜld", 11), 
Ex‹nd
(Value("hello ", 6), "world", 5));

47 
TEST
(
CRC
, 
Mask
) {

48 
ušt32_t
 
	güc
 = 
V®ue
("foo", 3);

49 
ASSERT_NE
(
üc
, 
Mask
(crc));

50 
ASSERT_NE
(
üc
, 
Mask
(Mask(crc)));

51 
ASSERT_EQ
(
üc
, 
Unmask
(
Mask
(crc)));

52 
ASSERT_EQ
(
üc
, 
Unmask
(Unmask(
Mask
(Mask(crc)))));

	@util/env.cc

5 
	~"Ëv–db/’v.h
"

7 
	~<c¡d¬g
>

11 #ià
defšed
(
_WIN32
è&& defšed(
LEVELDB_DELETEFILE_UNDEFINED
)

12 #undeà
D–‘eFe


15 
Çme¥aû
 
	gËv–db
 {

17 
	gEnv
::
Env
() = ;

19 
	gEnv
::~
Env
() = ;

21 
Stus
 
	gEnv
::
NewAµ’dabËFe
(cÚ¡ 
¡d
::
¡ršg
& 
âame
, 
Wr™abËFe
** 
»suÉ
) {

22  
	gStus
::
NÙSuµÜ‹d
("NewAµ’dabËFe", 
âame
);

25 
Stus
 
	gEnv
::
RemoveDœ
(cÚ¡ 
¡d
::
¡ršg
& 
dœÇme
è{  
D–‘eDœ
(dirname); }

26 
Stus
 
	gEnv
::
D–‘eDœ
(cÚ¡ 
¡d
::
¡ršg
& 
dœÇme
è{  
RemoveDœ
(dirname); }

28 
Stus
 
	gEnv
::
RemoveFe
(cÚ¡ 
¡d
::
¡ršg
& 
âame
è{  
D–‘eFe
(fname); }

29 
Stus
 
	gEnv
::
D–‘eFe
(cÚ¡ 
¡d
::
¡ršg
& 
âame
è{  
RemoveFe
(fname); }

31 
	gSequ’tŸlFe
::~
Sequ’tŸlFe
() = ;

33 
	gRªdomAcûssFe
::~
RªdomAcûssFe
() = ;

35 
	gWr™abËFe
::~
Wr™abËFe
() = ;

37 
	gLogg”
::~
Logg”
() = ;

39 
	gFeLock
::~
FeLock
() = ;

41 
Log
(
Logg”
* 
šfo_log
, cÚ¡ * 
fÜm©
, ...) {

42 ià(
	gšfo_log
 !ğ
nuÎ±r
) {

43 
¡d
::
va_li¡
 
­
;

44 
va_¡¬t
(
­
, 
fÜm©
);

45 
	gšfo_log
->
Logv
(
fÜm©
, 
­
);

46 
va_’d
(
­
);

50 
Stus
 
DoWr™eSŒšgToFe
(
Env
* 
’v
, cÚ¡ 
Sliû
& 
d©a
,

51 cÚ¡ 
¡d
::
¡ršg
& 
âame
, 
boŞ
 
should_sync
) {

52 
Wr™abËFe
* 
	gfe
;

53 
Stus
 
	gs
 = 
’v
->
NewWr™abËFe
(
âame
, &
fe
);

54 ià(!
	gs
.
ok
()) {

55  
	gs
;

57 
	gs
 = 
fe
->
Aµ’d
(
d©a
);

58 ià(
	gs
.
ok
(è&& 
	gshould_sync
) {

59 
	gs
 = 
fe
->
Sync
();

61 ià(
	gs
.
ok
()) {

62 
	gs
 = 
fe
->
Clo£
();

64 
d–‘e
 
	gfe
;

65 ià(!
	gs
.
ok
()) {

66 
	g’v
->
RemoveFe
(
âame
);

68  
	gs
;

71 
Stus
 
Wr™eSŒšgToFe
(
Env
* 
’v
, cÚ¡ 
Sliû
& 
d©a
,

72 cÚ¡ 
¡d
::
¡ršg
& 
âame
) {

73  
DoWr™eSŒšgToFe
(
’v
, 
d©a
, 
âame
, 
çl£
);

76 
Stus
 
Wr™eSŒšgToFeSync
(
Env
* 
’v
, cÚ¡ 
Sliû
& 
d©a
,

77 cÚ¡ 
¡d
::
¡ršg
& 
âame
) {

78  
DoWr™eSŒšgToFe
(
’v
, 
d©a
, 
âame
, 
Œue
);

81 
Stus
 
R—dFeToSŒšg
(
Env
* 
’v
, cÚ¡ 
¡d
::
¡ršg
& 
âame
, std::¡ršg* 
d©a
) {

82 
d©a
->
ş—r
();

83 
Sequ’tŸlFe
* 
	gfe
;

84 
Stus
 
	gs
 = 
’v
->
NewSequ’tŸlFe
(
âame
, &
fe
);

85 ià(!
	gs
.
ok
()) {

86  
	gs
;

88 cÚ¡ 
	gkBufãrSize
 = 8192;

89 * 
	g¥aû
 = 
Ãw
 [
kBufãrSize
];

90 
	gŒue
) {

91 
Sliû
 
	gäagm’t
;

92 
	gs
 = 
fe
->
R—d
(
kBufãrSize
, &
äagm’t
, 
¥aû
);

93 ià(!
	gs
.
ok
()) {

96 
	gd©a
->
­³nd
(
äagm’t
.
d©a
(), f¿gm’t.
size
());

97 ià(
	gäagm’t
.
em±y
()) {

101 
	gd–‘e
[] 
	g¥aû
;

102 
d–‘e
 
	gfe
;

103  
	gs
;

106 
	gEnvW¿µ”
::~
EnvW¿µ”
() {}

	@util/env_posix.cc

5 
	~<dœ’t.h
>

6 
	~<fú.h
>

7 
	~<sys/mmª.h
>

8 #iâdeà
__FuchsŸ__


9 
	~<sys/»sourû.h
>

11 
	~<sys/¡©.h
>

12 
	~<sys/time.h
>

13 
	~<sys/ty³s.h
>

14 
	~<uni¡d.h
>

16 
	~<©omic
>

17 
	~<û¼no
>

18 
	~<c¡ddef
>

19 
	~<c¡dšt
>

20 
	~<c¡dio
>

21 
	~<c¡dlib
>

22 
	~<c¡ršg
>

23 
	~<lim™s
>

24 
	~<queue
>

25 
	~<£t
>

26 
	~<¡ršg
>

27 
	~<th»ad
>

28 
	~<ty³_Œa™s
>

29 
	~<ut™y
>

31 
	~"Ëv–db/’v.h
"

32 
	~"Ëv–db/¦iû.h
"

33 
	~"Ëv–db/¡©us.h
"

34 
	~"pÜt/pÜt.h
"

35 
	~"pÜt/th»ad_ªnÙ©iÚs.h
"

36 
	~"ut/’v_posix_‹¡_h–³r.h
"

37 
	~"ut/posix_logg”.h
"

39 
Çme¥aû
 
	gËv–db
 {

41 
	gÇme¥aû
 {

44 
	gg_İ’_»ad_Úly_fe_lim™
 = -1;

47 
cÚ¡ex´
 cÚ¡ 
	gkDeçuÉMm­Lim™
 = ((*) >= 8) ? 1000 : 0;

50 
	gg_mm­_lim™
 = 
kDeçuÉMm­Lim™
;

53 #ià
defšed
(
HAVE_O_CLOEXEC
)

54 
cÚ¡ex´
 cÚ¡ 
	gkO³nBa£FÏgs
 = 
O_CLOEXEC
;

56 
cÚ¡ex´
 cÚ¡ 
	gkO³nBa£FÏgs
 = 0;

59 
cÚ¡ex´
 cÚ¡ 
size_t
 
	gkWr™abËFeBufãrSize
 = 65536;

61 
Stus
 
PosixE¼Ü
(cÚ¡ 
¡d
::
¡ršg
& 
cÚ‹xt
, 
”rÜ_numb”
) {

62 ià(
	g”rÜ_numb”
 =ğ
ENOENT
) {

63  
Stus
::
NÙFound
(
cÚ‹xt
, 
¡d
::
¡»¼Ü
(
”rÜ_numb”
));

65  
	gStus
::
IOE¼Ü
(
cÚ‹xt
, 
¡d
::
¡»¼Ü
(
”rÜ_numb”
));

73 şas 
	cLim™”
 {

74 
	gpublic
:

76 
Lim™”
(
max_acquœes
)

78 #ià!
defšed
(
NDEBUG
)

79 
max_acquœes_
(
max_acquœes
),

81 
acquœes_®lowed_
(
max_acquœes
) {

82 
as£¹
(
max_acquœes
 >= 0);

85 
Lim™”
(cÚ¡ Lim™”&èğ
d–‘e
;

86 
Lim™”
 
	gİ”©Ü
=(cÚ¡ Lim™”&èğ
d–‘e
;

90 
boŞ
 
Acquœe
() {

91 
	gŞd_acquœes_®lowed
 =

92 
acquœes_®lowed_
.
ãtch_sub
(1, 
¡d
::
memÜy_Üd”_»Ïxed
);

94 ià(
	gŞd_acquœes_®lowed
 > 0è 
	gŒue
;

96 
	g´e_šüem’t_acquœes_®lowed
 =

97 
acquœes_®lowed_
.
ãtch_add
(1, 
¡d
::
memÜy_Üd”_»Ïxed
);

100 ()
	g´e_šüem’t_acquœes_®lowed
;

102 
as£¹
(
´e_šüem’t_acquœes_®lowed
 < 
max_acquœes_
);

104  
	gçl£
;

109 
R–—£
() {

110 
	gŞd_acquœes_®lowed
 =

111 
acquœes_®lowed_
.
ãtch_add
(1, 
¡d
::
memÜy_Üd”_»Ïxed
);

114 ()
	gŞd_acquœes_®lowed
;

116 
as£¹
(
Şd_acquœes_®lowed
 < 
max_acquœes_
);

119 
	g´iv©e
:

120 #ià!
defšed
(
NDEBUG
)

122 cÚ¡ 
max_acquœes_
;

129 
	g¡d
::
©omic
<> 
acquœes_®lowed_
;

136 şas 
	cPosixSequ’tŸlFe
 
	gfš®
 : 
public
 
Sequ’tŸlFe
 {

137 
public
:

138 
PosixSequ’tŸlFe
(
¡d
::
¡ršg
 
f’ame
, 
fd
)

139 : 
fd_
(
fd
), 
f’ame_
(
¡d
::
move
(
f’ame
)) {}

140 ~
PosixSequ’tŸlFe
(è
ov”ride
 { 
şo£
(
fd_
); }

142 
Stus
 
R—d
(
size_t
 
n
, 
Sliû
* 
»suÉ
, * 
sü©ch
è
	gov”ride
 {

143 
Stus
 
	g¡©us
;

144 
	gŒue
) {

145 ::
ssize_t
 
»ad_size
 = ::
»ad
(
fd_
, 
sü©ch
, 
n
);

146 ià(
	g»ad_size
 < 0) {

147 ià(
	g”ºo
 =ğ
EINTR
) {

150 
	g¡©us
 = 
PosixE¼Ü
(
f’ame_
, 
”ºo
);

153 *
	g»suÉ
 = 
Sliû
(
sü©ch
, 
»ad_size
);

156  
	g¡©us
;

159 
Stus
 
Sk
(
ušt64_t
 
n
è
	gov”ride
 {

160 ià(::
l£ek
(
fd_
, 
n
, 
SEEK_CUR
è=ğ
¡©ic_ÿ¡
<
off_t
>(-1)) {

161  
PosixE¼Ü
(
f’ame_
, 
”ºo
);

163  
	gStus
::
OK
();

166 
	g´iv©e
:

167 cÚ¡ 
fd_
;

168 cÚ¡ 
	g¡d
::
¡ršg
 
f’ame_
;

176 şas 
	cPosixRªdomAcûssFe
 
	gfš®
 : 
public
 
RªdomAcûssFe
 {

177 
public
:

180 
PosixRªdomAcûssFe
(
¡d
::
¡ršg
 
f’ame
, 
fd
, 
Lim™”
* 
fd_lim™”
)

181 : 
has_³rmª’t_fd_
(
fd_lim™”
->
Acquœe
()),

182 
fd_
(
has_³rmª’t_fd_
 ? 
fd
 : -1),

183 
fd_lim™”_
(
fd_lim™”
),

184 
f’ame_
(
¡d
::
move
(
f’ame
)) {

185 ià(!
has_³rmª’t_fd_
) {

186 
as£¹
(
fd_
 == -1);

187 ::
şo£
(
fd
);

191 ~
PosixRªdomAcûssFe
(è
	gov”ride
 {

192 ià(
	ghas_³rmª’t_fd_
) {

193 
as£¹
(
fd_
 != -1);

194 ::
şo£
(
fd_
);

195 
	gfd_lim™”_
->
R–—£
();

199 
Stus
 
R—d
(
ušt64_t
 
off£t
, 
size_t
 
n
, 
Sliû
* 
»suÉ
,

200 * 
sü©ch
ècÚ¡ 
	gov”ride
 {

201 
	gfd
 = 
fd_
;

202 ià(!
	ghas_³rmª’t_fd_
) {

203 
	gfd
 = ::
İ’
(
f’ame_
.
c_¡r
(), 
O_RDONLY
 | 
kO³nBa£FÏgs
);

204 ià(
	gfd
 < 0) {

205  
PosixE¼Ü
(
f’ame_
, 
”ºo
);

209 
as£¹
(
fd
 != -1);

211 
Stus
 
	g¡©us
;

212 
ssize_t
 
	g»ad_size
 = ::
´—d
(
fd
, 
sü©ch
, 
n
, 
¡©ic_ÿ¡
<
off_t
>(
off£t
));

213 *
	g»suÉ
 = 
Sliû
(
sü©ch
, (
»ad_size
 < 0) ? 0 :„ead_size);

214 ià(
	g»ad_size
 < 0) {

216 
	g¡©us
 = 
PosixE¼Ü
(
f’ame_
, 
”ºo
);

218 ià(!
	ghas_³rmª’t_fd_
) {

220 
as£¹
(
fd
 !ğ
fd_
);

221 ::
şo£
(
fd
);

223  
	g¡©us
;

226 
	g´iv©e
:

227 cÚ¡ 
boŞ
 
has_³rmª’t_fd_
;

228 cÚ¡ 
	gfd_
;

229 
Lim™”
* cÚ¡ 
	gfd_lim™”_
;

230 cÚ¡ 
	g¡d
::
¡ršg
 
f’ame_
;

238 şas 
	cPosixMm­R—dabËFe
 
	gfš®
 : 
public
 
RªdomAcûssFe
 {

239 
public
:

247 
PosixMm­R—dabËFe
(
¡d
::
¡ršg
 
f’ame
, * 
mm­_ba£
, 
size_t
 
Ëngth
,

248 
Lim™”
* 
mm­_lim™”
)

249 : 
mm­_ba£_
(
mm­_ba£
),

250 
Ëngth_
(
Ëngth
),

251 
mm­_lim™”_
(
mm­_lim™”
),

252 
f’ame_
(
¡d
::
move
(
f’ame
)) {}

254 ~
PosixMm­R—dabËFe
(è
ov”ride
 {

255 ::
munm­
(
¡©ic_ÿ¡
<*>(
mm­_ba£_
), 
Ëngth_
);

256 
	gmm­_lim™”_
->
R–—£
();

259 
Stus
 
R—d
(
ušt64_t
 
off£t
, 
size_t
 
n
, 
Sliû
* 
»suÉ
,

260 * 
sü©ch
ècÚ¡ 
	gov”ride
 {

261 ià(
	goff£t
 + 
	gn
 > 
	gËngth_
) {

262 *
	g»suÉ
 = 
Sliû
();

263  
PosixE¼Ü
(
f’ame_
, 
EINVAL
);

266 *
	g»suÉ
 = 
Sliû
(
mm­_ba£_
 + 
off£t
, 
n
);

267  
	gStus
::
OK
();

270 
	g´iv©e
:

271 * cÚ¡ 
mm­_ba£_
;

272 cÚ¡ 
size_t
 
	gËngth_
;

273 
Lim™”
* cÚ¡ 
	gmm­_lim™”_
;

274 cÚ¡ 
	g¡d
::
¡ršg
 
f’ame_
;

277 şas 
	cPosixWr™abËFe
 
	gfš®
 : 
public
 
Wr™abËFe
 {

278 
public
:

279 
PosixWr™abËFe
(
¡d
::
¡ršg
 
f’ame
, 
fd
)

280 : 
pos_
(0),

281 
fd_
(
fd
),

282 
is_mªiã¡_
(
IsMªiã¡
(
f’ame
)),

283 
f’ame_
(
¡d
::
move
(
f’ame
)),

284 
dœÇme_
(
DœÇme
(
f’ame_
)) {}

286 ~
PosixWr™abËFe
(è
	gov”ride
 {

287 ià(
	gfd_
 >= 0) {

289 
Clo£
();

293 
Stus
 
Aµ’d
(cÚ¡ 
Sliû
& 
d©a
è
	gov”ride
 {

294 
size_t
 
	gwr™e_size
 = 
d©a
.
size
();

295 cÚ¡ * 
	gwr™e_d©a
 = 
d©a
.data();

298 
size_t
 
	gcİy_size
 = 
¡d
::
mš
(
wr™e_size
, 
kWr™abËFeBufãrSize
 - 
pos_
);

299 
	g¡d
::
memıy
(
buf_
 + 
pos_
, 
wr™e_d©a
, 
cİy_size
);

300 
	gwr™e_d©a
 +ğ
cİy_size
;

301 
	gwr™e_size
 -ğ
cİy_size
;

302 
	gpos_
 +ğ
cİy_size
;

303 ià(
	gwr™e_size
 == 0) {

304  
Stus
::
OK
();

308 
Stus
 
	g¡©us
 = 
FlushBufãr
();

309 ià(!
	g¡©us
.
ok
()) {

310  
	g¡©us
;

314 ià(
	gwr™e_size
 < 
	gkWr™abËFeBufãrSize
) {

315 
	g¡d
::
memıy
(
buf_
, 
wr™e_d©a
, 
wr™e_size
);

316 
	gpos_
 = 
wr™e_size
;

317  
	gStus
::
OK
();

319  
Wr™eUnbufã»d
(
wr™e_d©a
, 
wr™e_size
);

322 
Stus
 
Clo£
(è
	gov”ride
 {

323 
Stus
 
	g¡©us
 = 
FlushBufãr
();

324 cÚ¡ 
	gşo£_»suÉ
 = ::
şo£
(
fd_
);

325 ià(
	gşo£_»suÉ
 < 0 && 
	g¡©us
.
ok
()) {

326 
	g¡©us
 = 
PosixE¼Ü
(
f’ame_
, 
”ºo
);

328 
	gfd_
 = -1;

329  
	g¡©us
;

332 
Stus
 
Flush
(è
	gov”ride
 {  
FlushBufãr
(); }

334 
Stus
 
Sync
(è
	gov”ride
 {

340 
Stus
 
	g¡©us
 = 
SyncDœIfMªiã¡
();

341 ià(!
	g¡©us
.
ok
()) {

342  
	g¡©us
;

345 
	g¡©us
 = 
FlushBufãr
();

346 ià(!
	g¡©us
.
ok
()) {

347  
	g¡©us
;

350  
SyncFd
(
fd_
, 
f’ame_
);

353 
	g´iv©e
:

354 
Stus
 
FlushBufãr
() {

355 
Stus
 
¡©us
 = 
Wr™eUnbufã»d
(
buf_
, 
pos_
);

356 
	gpos_
 = 0;

357  
	g¡©us
;

360 
Stus
 
Wr™eUnbufã»d
(cÚ¡ * 
d©a
, 
size_t
 
size
) {

361 
	gsize
 > 0) {

362 
ssize_t
 
	gwr™e_»suÉ
 = ::
wr™e
(
fd_
, 
d©a
, 
size
);

363 ià(
	gwr™e_»suÉ
 < 0) {

364 ià(
	g”ºo
 =ğ
EINTR
) {

367  
PosixE¼Ü
(
f’ame_
, 
”ºo
);

369 
	gd©a
 +ğ
wr™e_»suÉ
;

370 
	gsize
 -ğ
wr™e_»suÉ
;

372  
	gStus
::
OK
();

375 
Stus
 
SyncDœIfMªiã¡
() {

376 
Stus
 
	g¡©us
;

377 ià(!
	gis_mªiã¡_
) {

378  
	g¡©us
;

381 
	gfd
 = ::
İ’
(
dœÇme_
.
c_¡r
(), 
O_RDONLY
 | 
kO³nBa£FÏgs
);

382 ià(
	gfd
 < 0) {

383 
	g¡©us
 = 
PosixE¼Ü
(
dœÇme_
, 
”ºo
);

385 
	g¡©us
 = 
SyncFd
(
fd
, 
dœÇme_
);

386 ::
şo£
(
fd
);

388  
	g¡©us
;

397 
Stus
 
SyncFd
(
fd
, cÚ¡ 
¡d
::
¡ršg
& 
fd_·th
) {

398 #ià
HAVE_FULLFSYNC


403 ià(::
fú
(
fd
, 
F_FULLFSYNC
) == 0) {

404  
Stus
::
OK
();

408 #ià
HAVE_FDATASYNC


409 
boŞ
 
	gsync_sucûss
 = ::
fd©async
(
fd
) == 0;

411 
boŞ
 
	gsync_sucûss
 = ::
fsync
(
fd
) == 0;

414 ià(
	gsync_sucûss
) {

415  
	gStus
::
OK
();

417  
PosixE¼Ü
(
fd_·th
, 
”ºo
);

423 
	g¡d
::
¡ršg
 
DœÇme
(cÚ¡ 
¡d
::¡ršg& 
f’ame
) {

424 
¡d
::
¡ršg
::
size_ty³
 
£·¿tÜ_pos
 = 
f’ame
.
rfšd
('/');

425 ià(
	g£·¿tÜ_pos
 =ğ
¡d
::
¡ršg
::
Åos
) {

426  
¡d
::
¡ršg
(".");

430 
as£¹
(
f’ame
.
fšd
('/', 
£·¿tÜ_pos
 + 1è=ğ
¡d
::
¡ršg
::
Åos
);

432  
	gf’ame
.
sub¡r
(0, 
£·¿tÜ_pos
);

439 
Sliû
 
Ba£Çme
(cÚ¡ 
¡d
::
¡ršg
& 
f’ame
) {

440 
¡d
::
¡ršg
::
size_ty³
 
£·¿tÜ_pos
 = 
f’ame
.
rfšd
('/');

441 ià(
	g£·¿tÜ_pos
 =ğ
¡d
::
¡ršg
::
Åos
) {

442  
Sliû
(
f’ame
);

446 
as£¹
(
f’ame
.
fšd
('/', 
£·¿tÜ_pos
 + 1è=ğ
¡d
::
¡ršg
::
Åos
);

448  
Sliû
(
f’ame
.
d©a
(è+ 
£·¿tÜ_pos
 + 1,

449 
f’ame
.
Ëngth
(è- 
£·¿tÜ_pos
 - 1);

453 
boŞ
 
IsMªiã¡
(cÚ¡ 
¡d
::
¡ršg
& 
f’ame
) {

454  
Ba£Çme
(
f’ame
).
¡¬ts_w™h
("MANIFEST");

458 
	gbuf_
[
kWr™abËFeBufãrSize
];

459 
size_t
 
	gpos_
;

460 
	gfd_
;

462 cÚ¡ 
boŞ
 
	gis_mªiã¡_
;

463 cÚ¡ 
	g¡d
::
¡ršg
 
f’ame_
;

464 cÚ¡ 
	g¡d
::
¡ršg
 
dœÇme_
;

467 
LockOrUÆock
(
fd
, 
boŞ
 
lock
) {

468 
	g”ºo
 = 0;

469 ::
æock
 
fe_lock_šfo
;

470 
	g¡d
::
mem£t
(&
fe_lock_šfo
, 0, (file_lock_info));

471 
	gfe_lock_šfo
.
	gl_ty³
 = (
lock
 ? 
F_WRLCK
 : 
F_UNLCK
);

472 
	gfe_lock_šfo
.
	gl_wh’û
 = 
SEEK_SET
;

473 
	gfe_lock_šfo
.
	gl_¡¬t
 = 0;

474 
	gfe_lock_šfo
.
	gl_Ën
 = 0;

475  ::
fú
(
fd
, 
F_SETLK
, &
fe_lock_šfo
);

479 şas 
	cPosixFeLock
 : 
public
 
FeLock
 {

480 
public
:

481 
PosixFeLock
(
fd
, 
¡d
::
¡ršg
 
f’ame
)

482 : 
fd_
(
fd
), 
f’ame_
(
¡d
::
move
(
f’ame
)) {}

484 
fd
(ècÚ¡ {  
fd_
; }

485 cÚ¡ 
	g¡d
::
¡ršg
& 
f’ame
(ècÚ¡ {  
f’ame_
; }

487 
	g´iv©e
:

488 cÚ¡ 
fd_
;

489 cÚ¡ 
	g¡d
::
¡ršg
 
f’ame_
;

499 şas 
	cPosixLockTabË
 {

500 
	gpublic
:

501 
boŞ
 
In£¹
(cÚ¡ 
¡d
::
¡ršg
& 
âame
è
LOCKS_EXCLUDED
(
mu_
) {

502 
mu_
.
Lock
();

503 
boŞ
 
	gsucûeded
 = 
locked_fes_
.
š£¹
(
âame
).
£cÚd
;

504 
	gmu_
.
UÆock
();

505  
	gsucûeded
;

507 
Remove
(cÚ¡ 
¡d
::
¡ršg
& 
âame
è
LOCKS_EXCLUDED
(
mu_
) {

508 
mu_
.
Lock
();

509 
	glocked_fes_
.
”a£
(
âame
);

510 
	gmu_
.
UÆock
();

513 
	g´iv©e
:

514 
pÜt
::
Mu‹x
 
mu_
;

515 
	g¡d
::
£t
<
¡d
::
¡ršg
> 
locked_fes_
 
GUARDED_BY
(
mu_
);

518 şas 
	cPosixEnv
 : 
public
 
Env
 {

519 
public
:

520 
PosixEnv
();

521 ~
PosixEnv
(è
	gov”ride
 {

522 cÚ¡ 
	gmsg
[] =

524 
	g¡d
::
fwr™e
(
msg
, 1, (msg), 
¡d”r
);

525 
	g¡d
::
abÜt
();

528 
Stus
 
NewSequ’tŸlFe
(cÚ¡ 
¡d
::
¡ršg
& 
f’ame
,

529 
Sequ’tŸlFe
** 
»suÉ
è
	gov”ride
 {

530 
	gfd
 = ::
İ’
(
f’ame
.
c_¡r
(), 
O_RDONLY
 | 
kO³nBa£FÏgs
);

531 ià(
	gfd
 < 0) {

532 *
	g»suÉ
 = 
nuÎ±r
;

533  
PosixE¼Ü
(
f’ame
, 
”ºo
);

536 *
	g»suÉ
 = 
Ãw
 
PosixSequ’tŸlFe
(
f’ame
, 
fd
);

537  
	gStus
::
OK
();

540 
Stus
 
NewRªdomAcûssFe
(cÚ¡ 
¡d
::
¡ršg
& 
f’ame
,

541 
RªdomAcûssFe
** 
»suÉ
è
	gov”ride
 {

542 *
	g»suÉ
 = 
nuÎ±r
;

543 
	gfd
 = ::
İ’
(
f’ame
.
c_¡r
(), 
O_RDONLY
 | 
kO³nBa£FÏgs
);

544 ià(
	gfd
 < 0) {

545  
PosixE¼Ü
(
f’ame
, 
”ºo
);

548 ià(!
	gmm­_lim™”_
.
Acquœe
()) {

549 *
	g»suÉ
 = 
Ãw
 
PosixRªdomAcûssFe
(
f’ame
, 
fd
, &
fd_lim™”_
);

550  
	gStus
::
OK
();

553 
ušt64_t
 
	gfe_size
;

554 
Stus
 
	g¡©us
 = 
G‘FeSize
(
f’ame
, &
fe_size
);

555 ià(
	g¡©us
.
ok
()) {

556 * 
	gmm­_ba£
 =

557 ::
mm­
Ğ
nuÎ±r
, 
fe_size
, 
PROT_READ
, 
MAP_SHARED
, 
fd
, 0);

558 ià(
	gmm­_ba£
 !ğ
MAP_FAILED
) {

559 *
»suÉ
 = 
Ãw
 
PosixMm­R—dabËFe
(
f’ame
,

560 
»š‹½»t_ÿ¡
<*>(
mm­_ba£
),

561 
fe_size
, &
mm­_lim™”_
);

563 
	g¡©us
 = 
PosixE¼Ü
(
f’ame
, 
”ºo
);

566 ::
şo£
(
fd
);

567 ià(!
	g¡©us
.
ok
()) {

568 
	gmm­_lim™”_
.
R–—£
();

570  
	g¡©us
;

573 
Stus
 
NewWr™abËFe
(cÚ¡ 
¡d
::
¡ršg
& 
f’ame
,

574 
Wr™abËFe
** 
»suÉ
è
	gov”ride
 {

575 
	gfd
 = ::
İ’
(
f’ame
.
c_¡r
(),

576 
O_TRUNC
 | 
O_WRONLY
 | 
O_CREAT
 | 
kO³nBa£FÏgs
, 0644);

577 ià(
	gfd
 < 0) {

578 *
	g»suÉ
 = 
nuÎ±r
;

579  
PosixE¼Ü
(
f’ame
, 
”ºo
);

582 *
	g»suÉ
 = 
Ãw
 
PosixWr™abËFe
(
f’ame
, 
fd
);

583  
	gStus
::
OK
();

586 
Stus
 
NewAµ’dabËFe
(cÚ¡ 
¡d
::
¡ršg
& 
f’ame
,

587 
Wr™abËFe
** 
»suÉ
è
	gov”ride
 {

588 
	gfd
 = ::
İ’
(
f’ame
.
c_¡r
(),

589 
O_APPEND
 | 
O_WRONLY
 | 
O_CREAT
 | 
kO³nBa£FÏgs
, 0644);

590 ià(
	gfd
 < 0) {

591 *
	g»suÉ
 = 
nuÎ±r
;

592  
PosixE¼Ü
(
f’ame
, 
”ºo
);

595 *
	g»suÉ
 = 
Ãw
 
PosixWr™abËFe
(
f’ame
, 
fd
);

596  
	gStus
::
OK
();

599 
boŞ
 
FeExi¡s
(cÚ¡ 
¡d
::
¡ršg
& 
f’ame
è
ov”ride
 {

600  ::
acûss
(
f’ame
.
c_¡r
(), 
F_OK
) == 0;

603 
Stus
 
G‘Chd»n
(cÚ¡ 
¡d
::
¡ršg
& 
dœeùÜy_·th
,

604 
¡d
::
veùÜ
<¡d::
¡ršg
>* 
»suÉ
è
ov”ride
 {

605 
»suÉ
->
ş—r
();

606 ::
DIR
* 
dœ
 = ::
İ’dœ
(
dœeùÜy_·th
.
c_¡r
());

607 ià(
	gdœ
 =ğ
nuÎ±r
) {

608  
PosixE¼Ü
(
dœeùÜy_·th
, 
”ºo
);

610 ::
dœ’t
* 
’Œy
;

611 (
	g’Œy
 = ::
»addœ
(
dœ
)è!ğ
nuÎ±r
) {

612 
»suÉ
->
em¶aû_back
(
’Œy
->
d_Çme
);

614 ::
şo£dœ
(
dœ
);

615  
	gStus
::
OK
();

619 
Stus
 
RemoveFe
(cÚ¡ 
¡d
::
¡ršg
& 
f’ame
è
ov”ride
 {

620 ià(::
uÆšk
(
f’ame
.
c_¡r
()) != 0) {

621  
PosixE¼Ü
(
f’ame
, 
”ºo
);

623  
	gStus
::
OK
();

626 
Stus
 
C»©eDœ
(cÚ¡ 
¡d
::
¡ršg
& 
dœÇme
è
ov”ride
 {

627 ià(::
mkdœ
(
dœÇme
.
c_¡r
(), 0755) != 0) {

628  
PosixE¼Ü
(
dœÇme
, 
”ºo
);

630  
	gStus
::
OK
();

633 
Stus
 
RemoveDœ
(cÚ¡ 
¡d
::
¡ršg
& 
dœÇme
è
ov”ride
 {

634 ià(::
rmdœ
(
dœÇme
.
c_¡r
()) != 0) {

635  
PosixE¼Ü
(
dœÇme
, 
”ºo
);

637  
	gStus
::
OK
();

640 
Stus
 
G‘FeSize
(cÚ¡ 
¡d
::
¡ršg
& 
f’ame
, 
ušt64_t
* 
size
è
	gov”ride
 {

641 ::
¡©
 
fe_¡©
;

642 ià(::
¡©
(
f’ame
.
c_¡r
(), &
fe_¡©
) != 0) {

643 *
size
 = 0;

644  
PosixE¼Ü
(
f’ame
, 
”ºo
);

646 *
	gsize
 = 
fe_¡©
.
¡_size
;

647  
	gStus
::
OK
();

650 
Stus
 
R’ameFe
(cÚ¡ 
¡d
::
¡ršg
& 
äom
, cÚ¡ std::¡ršg& 
to
è
ov”ride
 {

651 ià(
¡d
::
»Çme
(
äom
.
c_¡r
(), 
to
.c_str()) != 0) {

652  
PosixE¼Ü
(
äom
, 
”ºo
);

654  
	gStus
::
OK
();

657 
Stus
 
LockFe
(cÚ¡ 
¡d
::
¡ršg
& 
f’ame
, 
FeLock
** 
lock
è
	gov”ride
 {

658 *
	glock
 = 
nuÎ±r
;

660 
	gfd
 = ::
İ’
(
f’ame
.
c_¡r
(), 
O_RDWR
 | 
O_CREAT
 | 
kO³nBa£FÏgs
, 0644);

661 ià(
	gfd
 < 0) {

662  
PosixE¼Ü
(
f’ame
, 
”ºo
);

665 ià(!
	glocks_
.
In£¹
(
f’ame
)) {

666 ::
şo£
(
fd
);

667  
	gStus
::
IOE¼Ü
("lock " + 
f’ame
, "already held by…rocess");

670 ià(
LockOrUÆock
(
fd
, 
Œue
) == -1) {

671 
lock_”ºo
 = 
”ºo
;

672 ::
şo£
(
fd
);

673 
	glocks_
.
Remove
(
f’ame
);

674  
PosixE¼Ü
("lock " + 
f’ame
, 
lock_”ºo
);

677 *
	glock
 = 
Ãw
 
PosixFeLock
(
fd
, 
f’ame
);

678  
	gStus
::
OK
();

681 
Stus
 
UÆockFe
(
FeLock
* 
lock
è
	gov”ride
 {

682 
PosixFeLock
* 
	gposix_fe_lock
 = 
¡©ic_ÿ¡
<PosixFeLock*>(
lock
);

683 ià(
LockOrUÆock
(
posix_fe_lock
->
fd
(), 
çl£
) == -1) {

684  
PosixE¼Ü
("uÆock " + 
posix_fe_lock
->
f’ame
(), 
”ºo
);

686 
	glocks_
.
Remove
(
posix_fe_lock
->
f’ame
());

687 ::
şo£
(
posix_fe_lock
->
fd
());

688 
d–‘e
 
	gposix_fe_lock
;

689  
	gStus
::
OK
();

692 
ScheduË
((*
background_wÜk_funùiÚ
)(* 
background_wÜk_¬g
),

693 * 
background_wÜk_¬g
è
	gov”ride
;

695 
S¹Th»ad
((*
th»ad_maš
)(* 
th»ad_maš_¬g
),

696 * 
th»ad_maš_¬g
è
	gov”ride
 {

697 
	g¡d
::
th»ad
 
Ãw_th»ad
(
th»ad_maš
, 
th»ad_maš_¬g
);

698 
	gÃw_th»ad
.
d‘ach
();

701 
Stus
 
G‘Te¡DœeùÜy
(
¡d
::
¡ršg
* 
»suÉ
è
ov”ride
 {

702 cÚ¡ * 
’v
 = 
¡d
::
g‘’v
("TEST_TMPDIR");

703 ià(
	g’v
 &&ƒnv[0] != '\0') {

704 *
»suÉ
 = 
’v
;

706 
	gbuf
[100];

707 
	g¡d
::
¢´štf
(
buf
, (buf), "/tmp/leveldbtest-%d",

708 
¡©ic_ÿ¡
<>(::
g‘euid
()));

709 *
	g»suÉ
 = 
buf
;

713 
C»©eDœ
(*
»suÉ
);

715  
	gStus
::
OK
();

718 
Stus
 
NewLogg”
(cÚ¡ 
¡d
::
¡ršg
& 
f’ame
, 
Logg”
** 
»suÉ
è
	gov”ride
 {

719 
	gfd
 = ::
İ’
(
f’ame
.
c_¡r
(),

720 
O_APPEND
 | 
O_WRONLY
 | 
O_CREAT
 | 
kO³nBa£FÏgs
, 0644);

721 ià(
	gfd
 < 0) {

722 *
	g»suÉ
 = 
nuÎ±r
;

723  
PosixE¼Ü
(
f’ame
, 
”ºo
);

726 
	g¡d
::
FILE
* 
å
 = ::
fdİ’
(
fd
, "w");

727 ià(
	gå
 =ğ
nuÎ±r
) {

728 ::
şo£
(
fd
);

729 *
	g»suÉ
 = 
nuÎ±r
;

730  
PosixE¼Ü
(
f’ame
, 
”ºo
);

732 *
	g»suÉ
 = 
Ãw
 
PosixLogg”
(
å
);

733  
	gStus
::
OK
();

737 
ušt64_t
 
NowMiüos
(è
	gov”ride
 {

738 
cÚ¡ex´
 
ušt64_t
 
	gkU£cÚdsP”SecÚd
 = 1000000;

739 ::
timev®
 
tv
;

740 ::
g‘timeofday
(&
tv
, 
nuÎ±r
);

741  
	g¡©ic_ÿ¡
<
	gušt64_t
>(
	gtv
.
	gtv_£c
è* 
	gkU£cÚdsP”SecÚd
 +v.
	gtv_u£c
;

744 
SË•FÜMiüo£cÚds
(
miüos
è
	gov”ride
 {

745 
	g¡d
::
this_th»ad
::
¦“p_fÜ
(
¡d
::
chrÚo
::
miüo£cÚds
(
miüos
));

748 
	g´iv©e
:

749 
BackgroundTh»adMaš
();

751 
BackgroundTh»adEÁryPošt
(
PosixEnv
* 
’v
) {

752 
	g’v
->
BackgroundTh»adMaš
();

761 
	sBackgroundWÜkI‹m
 {

762 
ex¶ic™
 
BackgroundWÜkI‹m
((*
funùiÚ
)(* 
¬g
), *‡rg)

763 : 
funùiÚ
(funùiÚ), 
¬g
(arg) {}

765 (*cÚ¡ 
	gfunùiÚ
)(*);

766 * cÚ¡ 
	g¬g
;

769 
	gpÜt
::
Mu‹x
 
background_wÜk_mu‹x_
;

770 
	gpÜt
::
CÚdV¬
 
background_wÜk_cv_
 
GUARDED_BY
(
background_wÜk_mu‹x_
);

771 
boŞ
 
¡¬‹d_background_th»ad_
 
GUARDED_BY
(
background_wÜk_mu‹x_
);

773 
	g¡d
::
queue
<
BackgroundWÜkI‹m
> 
background_wÜk_queue_


774 
GUARDED_BY
(
background_wÜk_mu‹x_
);

776 
PosixLockTabË
 
	glocks_
;

777 
Lim™”
 
	gmm­_lim™”_
;

778 
Lim™”
 
	gfd_lim™”_
;

782 
MaxMm­s
(è{  
	gg_mm­_lim™
; }

785 
MaxO³nFes
() {

786 ià(
	gg_İ’_»ad_Úly_fe_lim™
 >= 0) {

787  
g_İ’_»ad_Úly_fe_lim™
;

789 #ifdeà
__FuchsŸ__


791 
	gg_İ’_»ad_Úly_fe_lim™
 = 50;

793 ::
¾im™
 
¾im
;

794 ià(::
g‘¾im™
(
RLIMIT_NOFILE
, &
¾im
)) {

796 
	gg_İ’_»ad_Úly_fe_lim™
 = 50;

797 } ià(
	g¾im
.
	g¾im_cur
 =ğ
RLIM_INFINITY
) {

798 
g_İ’_»ad_Úly_fe_lim™
 = 
¡d
::
num”ic_lim™s
<>::
max
();

801 
	gg_İ’_»ad_Úly_fe_lim™
 = 
¾im
.
¾im_cur
 / 5;

804  
	gg_İ’_»ad_Úly_fe_lim™
;

809 
	gPosixEnv
::
	$PosixEnv
()

810 : 
	`background_wÜk_cv_
(&
background_wÜk_mu‹x_
),

811 
	`¡¬‹d_background_th»ad_
(
çl£
),

812 
	`mm­_lim™”_
(
	`MaxMm­s
()),

813 
	`fd_lim™”_
(
	$MaxO³nFes
()è{
	}
}

815 
	gPosixEnv
::
	$ScheduË
(

816 (*
background_wÜk_funùiÚ
)(* 
background_wÜk_¬g
),

817 * 
background_wÜk_¬g
) {

818 
background_wÜk_mu‹x_
.
	`Lock
();

821 ià(!
¡¬‹d_background_th»ad_
) {

822 
¡¬‹d_background_th»ad_
 = 
Œue
;

823 
¡d
::
th»ad
 
	`background_th»ad
(
PosixEnv
::
BackgroundTh»adEÁryPošt
, 
this
);

824 
background_th»ad
.
	`d‘ach
();

828 ià(
background_wÜk_queue_
.
	`em±y
()) {

829 
background_wÜk_cv_
.
	`SigÇl
();

832 
background_wÜk_queue_
.
	`em¶aû
(
background_wÜk_funùiÚ
, 
background_wÜk_¬g
);

833 
background_wÜk_mu‹x_
.
	`UÆock
();

834 
	}
}

836 
	gPosixEnv
::
	$BackgroundTh»adMaš
() {

837 
Œue
) {

838 
background_wÜk_mu‹x_
.
	`Lock
();

841 
background_wÜk_queue_
.
	`em±y
()) {

842 
background_wÜk_cv_
.
	`Wa™
();

845 
	`as£¹
(!
background_wÜk_queue_
.
	`em±y
());

846 autØ
background_wÜk_funùiÚ
 = 
background_wÜk_queue_
.
	`äÚt
().
funùiÚ
;

847 * 
background_wÜk_¬g
 = 
background_wÜk_queue_
.
	`äÚt
().
¬g
;

848 
background_wÜk_queue_
.
	`pİ
();

850 
background_wÜk_mu‹x_
.
	`UÆock
();

851 
	`background_wÜk_funùiÚ
(
background_wÜk_¬g
);

853 
	}
}

855 
	gÇme¥aû
 {

869 
	g‹m¶©e
 <
ty³Çme
 
	gEnvTy³
>

870 şas 
	cSšgËtÚEnv
 {

871 
	gpublic
:

872 
SšgËtÚEnv
() {

873 #ià!
defšed
(
NDEBUG
)

874 
’v_š™Ÿlized_
.
¡Üe
(
Œue
, 
¡d
::
memÜy_Üd”_»Ïxed
);

876 
¡©ic_as£¹
((
’v_¡Üage_
è>ğ(
EnvTy³
),

878 
¡©ic_as£¹
(
®ignof
(
deşty³
(
’v_¡Üage_
)è>ğ®ignof(
EnvTy³
),

880 
Ãw
 (&
’v_¡Üage_
è
EnvTy³
();

882 ~
SšgËtÚEnv
() = ;

884 
SšgËtÚEnv
(cÚ¡ SšgËtÚEnv&èğ
d–‘e
;

885 
	gSšgËtÚEnv
& 
	gİ”©Ü
=(cÚ¡ 
SšgËtÚEnv
&èğ
d–‘e
;

887 
Env
* 
’v
(è{  
	g»š‹½»t_ÿ¡
<
	gEnv
*>(&
	g’v_¡Üage_
); }

889 
As£¹EnvNÙIn™Ÿlized
() {

890 #ià!
defšed
(
NDEBUG
)

891 
as£¹
(!
’v_š™Ÿlized_
.
lßd
(
¡d
::
memÜy_Üd”_»Ïxed
));

895 
	g´iv©e
:

896 
ty³Çme
 
¡d
::
®igÃd_¡Üage
<(
EnvTy³
), 
®ignof
(EnvTy³)>::
ty³


897 
’v_¡Üage_
;

898 #ià!
defšed
(
NDEBUG
)

899 
	g¡d
::
©omic
<
boŞ
> 
’v_š™Ÿlized_
;

903 #ià!
defšed
(
NDEBUG
)

904 
	g‹m¶©e
 <
ty³Çme
 
	gEnvTy³
>

905 
	g¡d
::
©omic
<
boŞ
> 
SšgËtÚEnv
<
EnvTy³
>::
’v_š™Ÿlized_
;

908 
usšg
 
	gPosixDeçuÉEnv
 = 
SšgËtÚEnv
<
PosixEnv
>;

912 
	gEnvPosixTe¡H–³r
::
	$S‘R—dOÆyFDLim™
(
lim™
) {

913 
PosixDeçuÉEnv
::
	`As£¹EnvNÙIn™Ÿlized
();

914 
g_İ’_»ad_Úly_fe_lim™
 = 
lim™
;

915 
	}
}

917 
	gEnvPosixTe¡H–³r
::
	$S‘R—dOÆyMM­Lim™
(
lim™
) {

918 
PosixDeçuÉEnv
::
	`As£¹EnvNÙIn™Ÿlized
();

919 
g_mm­_lim™
 = 
lim™
;

920 
	}
}

922 
Env
* 
	gEnv
::
	$DeçuÉ
() {

923 
PosixDeçuÉEnv
 
’v_cÚš”
;

924  
’v_cÚš”
.
	`’v
();

925 
	}
}

	@util/env_posix_test.cc

5 
	~<sys/»sourû.h
>

6 
	~<sys/wa™.h
>

7 
	~<uni¡d.h
>

9 
	~<c¡dio
>

10 
	~<c¡dlib
>

11 
	~<c¡ršg
>

12 
	~<¡ršg
>

13 
	~<unÜd”ed_£t
>

14 
	~<veùÜ
>

16 
	~"g‹¡/g‹¡.h
"

17 
	~"Ëv–db/’v.h
"

18 
	~"pÜt/pÜt.h
"

19 
	~"ut/’v_posix_‹¡_h–³r.h
"

20 
	~"ut/‹¡ut.h
"

22 #ià
HAVE_O_CLOEXEC


24 
	gÇme¥aû
 {

28 
cÚ¡ex´
 
	gkTextClo£OnExecH–³rExecFaedCode
 = 61;

29 
cÚ¡ex´
 
	gkTextClo£OnExecH–³rDup2FaedCode
 = 62;

30 
cÚ¡ex´
 
	gkTextClo£OnExecH–³rFoundO³nFdCode
 = 63;

38 
	g¡d
::
veùÜ
<>* 
G‘ArgvZ”o
() {

39 
¡d
::
veùÜ
<> 
´og¿m_Çme
;

40  &
	g´og¿m_Çme
;

44 cÚ¡ 
	gkTe¡Clo£OnExecSw™ch
[] = "--test-close-on-exec-helper";

59 
Te¡Clo£OnExecH–³rMaš
(* 
pid_¬g
) {

60 
	gfd
 = 
¡d
::
©oi
(
pid_¬g
);

63 ià(::
dup2
(
fd
, fd) == fd) {

64 
¡d
::
årštf
(
¡d”r
, "UÃx³ùed o³Àfd %d\n", 
fd
);

65  
	gkTextClo£OnExecH–³rFoundO³nFdCode
;

68 ià(
	g”ºo
 !ğ
EBADF
) {

69 
¡d
::
årštf
(
¡d”r
, "Unexpectedƒrrno‡fter calling dup2 on fd %d: %s\n",

70 
fd
, 
¡d
::
¡»¼Ü
(
”ºo
));

71  
	gkTextClo£OnExecH–³rDup2FaedCode
;

79 
G‘MaxFeDesütÜ
(* 
»suÉ_fd
) {

81 ::
¾im™
 
fd_¾im™
;

82 
ASSERT_EQ
(0, ::
g‘¾im™
(
RLIMIT_NOFILE
, &
fd_¾im™
));

83 *
	g»suÉ_fd
 = 
fd_¾im™
.
¾im_cur
;

89 
G‘O³nFeDesütÜs
(
¡d
::
unÜd”ed_£t
<>* 
İ’_fds
) {

90 
max_fd
 = 0;

91 
G‘MaxFeDesütÜ
(&
max_fd
);

93 
	gfd
 = 0; fd < 
	gmax_fd
; ++fd) {

94 ià(::
dup2
(
fd
, fd) != fd) {

99 
ASSERT_EQ
(
EBADF
, 
”ºo
)

103 
	gİ’_fds
->
š£¹
(
fd
);

113 
G‘NewlyO³ÃdFeDesütÜ
(

114 cÚ¡ 
¡d
::
unÜd”ed_£t
<>& 
ba£lše_İ’_fds
, * 
»suÉ_fd
) {

115 
	g¡d
::
unÜd”ed_£t
<> 
İ’_fds
;

116 
G‘O³nFeDesütÜs
(&
İ’_fds
);

117 
	gfd
 : 
ba£lše_İ’_fds
) {

118 
ASSERT_EQ
(1, 
İ’_fds
.
couÁ
(
fd
))

120 
	gİ’_fds
.
”a£
(
fd
);

122 
ASSERT_EQ
(1, 
İ’_fds
.
size
())

124 *
	g»suÉ_fd
 = *
İ’_fds
.
begš
();

128 
CheckClo£OnExecDÛsNÙL—kFDs
(

129 cÚ¡ 
¡d
::
unÜd”ed_£t
<>& 
ba£lše_İ’_fds
) {

132 
sw™ch_bufãr
[(
kTe¡Clo£OnExecSw™ch
)];

133 
	g¡d
::
memıy
(
sw™ch_bufãr
, 
kTe¡Clo£OnExecSw™ch
,

134 (
kTe¡Clo£OnExecSw™ch
));

136 
	g´obed_fd
;

137 
G‘NewlyO³ÃdFeDesütÜ
(
ba£lše_İ’_fds
, &
´obed_fd
);

138 
	g¡d
::
¡ršg
 
fd_¡ršg
 = 
¡d
::
to_¡ršg
(
´obed_fd
);

139 
	g¡d
::
veùÜ
<> 
fd_bufãr
(
fd_¡ršg
.
begš
(), fd_¡ršg.
’d
());

140 
	gfd_bufãr
.
em¶aû_back
('\0');

144 * 
	gchd_¬gv
[] = {
G‘ArgvZ”o
()->
d©a
(), 
sw™ch_bufãr
, 
fd_bufãr
.data(),

145 
nuÎ±r
};

147 
cÚ¡ex´
 
	gkFÜkInChdProûssR‘uºV®ue
 = 0;

148 
	gchd_pid
 = 
fÜk
();

149 ià(
	gchd_pid
 =ğ
kFÜkInChdProûssR‘uºV®ue
) {

150 ::
execv
(
chd_¬gv
[0], child_argv);

151 
	g¡d
::
årštf
(
¡d”r
, "E¼Ü s·wnšg chd…roûss: %s\n", 
¡»¼Ü
(
”ºo
));

152 
	g¡d
::
ex™
(
kTextClo£OnExecH–³rExecFaedCode
);

155 
	gchd_¡©us
 = 0;

156 
ASSERT_EQ
(
chd_pid
, ::
wa™pid
(chd_pid, &
chd_¡©us
, 0));

157 
ASSERT_TRUE
(
WIFEXITED
(
chd_¡©us
))

159 
ASSERT_EQ
(0, 
WEXITSTATUS
(
chd_¡©us
))

167 
Çme¥aû
 
	gËv–db
 {

169 cÚ¡ 
	gkR—dOÆyFeLim™
 = 4;

170 cÚ¡ 
	gkMM­Lim™
 = 4;

172 şas 
	cEnvPosixTe¡
 : 
public
 
‹¡šg
::
Te¡
 {

173 
public
:

174 
S‘FeLim™s
(
»ad_Úly_fe_lim™
, 
mm­_lim™
) {

175 
	gEnvPosixTe¡H–³r
::
S‘R—dOÆyFDLim™
(
»ad_Úly_fe_lim™
);

176 
	gEnvPosixTe¡H–³r
::
S‘R—dOÆyMM­Lim™
(
mm­_lim™
);

179 
EnvPosixTe¡
(è: 
’v_
(
Env
::
DeçuÉ
()) {}

181 
Env
* 
’v_
;

184 
	$TEST_F
(
EnvPosixTe¡
, 
Te¡O³nOnR—d
) {

186 
¡d
::
¡ršg
 
‹¡_dœ
;

187 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`G‘Te¡DœeùÜy
(&
‹¡_dœ
));

188 
¡d
::
¡ršg
 
‹¡_fe
 = 
‹¡_dœ
 + "/open_on_read.txt";

190 
FILE
* 
f
 = 
¡d
::
	`fİ’
(
‹¡_fe
.
	`c_¡r
(), "we");

191 
	`ASSERT_TRUE
(
f
 !ğ
nuÎ±r
);

192 cÚ¡ 
kFeD©a
[] = "abcdefghijklmnopqrstuvwxyz";

193 
	`åuts
(
kFeD©a
, 
f
);

194 
¡d
::
	`fşo£
(
f
);

198 cÚ¡ 
kNumFes
 = 
kR—dOÆyFeLim™
 + 
kMM­Lim™
 + 5;

199 
Ëv–db
::
RªdomAcûssFe
* 
fes
[
kNumFes
] = {0};

200 
i
 = 0; i < 
kNumFes
; i++) {

201 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`NewRªdomAcûssFe
(
‹¡_fe
, &
fes
[
i
]));

203 
sü©ch
;

204 
Sliû
 
»ad_»suÉ
;

205 
i
 = 0; i < 
kNumFes
; i++) {

206 
	`ASSERT_LEVELDB_OK
(
fes
[
i
]->
	`R—d
(i, 1, &
»ad_»suÉ
, &
sü©ch
));

207 
	`ASSERT_EQ
(
kFeD©a
[
i
], 
»ad_»suÉ
[0]);

209 
i
 = 0; i < 
kNumFes
; i++) {

210 
d–‘e
 
fes
[
i
];

212 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`RemoveFe
(
‹¡_fe
));

213 
	}
}

215 #ià
HAVE_O_CLOEXEC


217 
	$TEST_F
(
EnvPosixTe¡
, 
Te¡Clo£OnExecSequ’tŸlFe
) {

218 
¡d
::
unÜd”ed_£t
<> 
İ’_fds
;

219 
	`G‘O³nFeDesütÜs
(&
İ’_fds
);

221 
¡d
::
¡ršg
 
‹¡_dœ
;

222 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`G‘Te¡DœeùÜy
(&
‹¡_dœ
));

223 
¡d
::
¡ršg
 
fe_·th
 = 
‹¡_dœ
 + "/close_on_exec_sequential.txt";

224 
	`ASSERT_LEVELDB_OK
(
	`Wr™eSŒšgToFe
(
’v_
, "0123456789", 
fe_·th
));

226 
Ëv–db
::
Sequ’tŸlFe
* 
fe
 = 
nuÎ±r
;

227 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`NewSequ’tŸlFe
(
fe_·th
, &
fe
));

228 
	`CheckClo£OnExecDÛsNÙL—kFDs
(
İ’_fds
);

229 
d–‘e
 
fe
;

231 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`RemoveFe
(
fe_·th
));

232 
	}
}

234 
	$TEST_F
(
EnvPosixTe¡
, 
Te¡Clo£OnExecRªdomAcûssFe
) {

235 
¡d
::
unÜd”ed_£t
<> 
İ’_fds
;

236 
	`G‘O³nFeDesütÜs
(&
İ’_fds
);

238 
¡d
::
¡ršg
 
‹¡_dœ
;

239 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`G‘Te¡DœeùÜy
(&
‹¡_dœ
));

240 
¡d
::
¡ršg
 
fe_·th
 = 
‹¡_dœ
 + "/close_on_exec_random_access.txt";

241 
	`ASSERT_LEVELDB_OK
(
	`Wr™eSŒšgToFe
(
’v_
, "0123456789", 
fe_·th
));

246 
Ëv–db
::
RªdomAcûssFe
* 
mm­³d_fes
[
kMM­Lim™
];

247 
i
 = 0; i < 
kMM­Lim™
; i++) {

248 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`NewRªdomAcûssFe
(
fe_·th
, &
mm­³d_fes
[
i
]));

251 
Ëv–db
::
RªdomAcûssFe
* 
fe
 = 
nuÎ±r
;

252 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`NewRªdomAcûssFe
(
fe_·th
, &
fe
));

253 
	`CheckClo£OnExecDÛsNÙL—kFDs
(
İ’_fds
);

254 
d–‘e
 
fe
;

256 
i
 = 0; i < 
kMM­Lim™
; i++) {

257 
d–‘e
 
mm­³d_fes
[
i
];

259 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`RemoveFe
(
fe_·th
));

260 
	}
}

262 
	$TEST_F
(
EnvPosixTe¡
, 
Te¡Clo£OnExecWr™abËFe
) {

263 
¡d
::
unÜd”ed_£t
<> 
İ’_fds
;

264 
	`G‘O³nFeDesütÜs
(&
İ’_fds
);

266 
¡d
::
¡ršg
 
‹¡_dœ
;

267 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`G‘Te¡DœeùÜy
(&
‹¡_dœ
));

268 
¡d
::
¡ršg
 
fe_·th
 = 
‹¡_dœ
 + "/close_on_exec_writable.txt";

269 
	`ASSERT_LEVELDB_OK
(
	`Wr™eSŒšgToFe
(
’v_
, "0123456789", 
fe_·th
));

271 
Ëv–db
::
Wr™abËFe
* 
fe
 = 
nuÎ±r
;

272 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`NewWr™abËFe
(
fe_·th
, &
fe
));

273 
	`CheckClo£OnExecDÛsNÙL—kFDs
(
İ’_fds
);

274 
d–‘e
 
fe
;

276 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`RemoveFe
(
fe_·th
));

277 
	}
}

279 
	$TEST_F
(
EnvPosixTe¡
, 
Te¡Clo£OnExecAµ’dabËFe
) {

280 
¡d
::
unÜd”ed_£t
<> 
İ’_fds
;

281 
	`G‘O³nFeDesütÜs
(&
İ’_fds
);

283 
¡d
::
¡ršg
 
‹¡_dœ
;

284 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`G‘Te¡DœeùÜy
(&
‹¡_dœ
));

285 
¡d
::
¡ršg
 
fe_·th
 = 
‹¡_dœ
 + "/close_on_exec_appendable.txt";

286 
	`ASSERT_LEVELDB_OK
(
	`Wr™eSŒšgToFe
(
’v_
, "0123456789", 
fe_·th
));

288 
Ëv–db
::
Wr™abËFe
* 
fe
 = 
nuÎ±r
;

289 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`NewAµ’dabËFe
(
fe_·th
, &
fe
));

290 
	`CheckClo£OnExecDÛsNÙL—kFDs
(
İ’_fds
);

291 
d–‘e
 
fe
;

293 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`RemoveFe
(
fe_·th
));

294 
	}
}

296 
	$TEST_F
(
EnvPosixTe¡
, 
Te¡Clo£OnExecLockFe
) {

297 
¡d
::
unÜd”ed_£t
<> 
İ’_fds
;

298 
	`G‘O³nFeDesütÜs
(&
İ’_fds
);

300 
¡d
::
¡ršg
 
‹¡_dœ
;

301 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`G‘Te¡DœeùÜy
(&
‹¡_dœ
));

302 
¡d
::
¡ršg
 
fe_·th
 = 
‹¡_dœ
 + "/close_on_exec_lock.txt";

303 
	`ASSERT_LEVELDB_OK
(
	`Wr™eSŒšgToFe
(
’v_
, "0123456789", 
fe_·th
));

305 
Ëv–db
::
FeLock
* 
lock
 = 
nuÎ±r
;

306 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`LockFe
(
fe_·th
, &
lock
));

307 
	`CheckClo£OnExecDÛsNÙL—kFDs
(
İ’_fds
);

308 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`UÆockFe
(
lock
));

310 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`RemoveFe
(
fe_·th
));

311 
	}
}

313 
	$TEST_F
(
EnvPosixTe¡
, 
Te¡Clo£OnExecLogg”
) {

314 
¡d
::
unÜd”ed_£t
<> 
İ’_fds
;

315 
	`G‘O³nFeDesütÜs
(&
İ’_fds
);

317 
¡d
::
¡ršg
 
‹¡_dœ
;

318 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`G‘Te¡DœeùÜy
(&
‹¡_dœ
));

319 
¡d
::
¡ršg
 
fe_·th
 = 
‹¡_dœ
 + "/close_on_exec_logger.txt";

320 
	`ASSERT_LEVELDB_OK
(
	`Wr™eSŒšgToFe
(
’v_
, "0123456789", 
fe_·th
));

322 
Ëv–db
::
Logg”
* 
fe
 = 
nuÎ±r
;

323 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`NewLogg”
(
fe_·th
, &
fe
));

324 
	`CheckClo£OnExecDÛsNÙL—kFDs
(
İ’_fds
);

325 
d–‘e
 
fe
;

327 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`RemoveFe
(
fe_·th
));

328 
	}
}

334 
	$maš
(
¬gc
, ** 
¬gv
) {

335 #ià
HAVE_O_CLOEXEC


337 
i
 = 1; i < 
¬gc
; ++i) {

338 ià(!
¡d
::
	`¡rcmp
(
¬gv
[
i
], 
kTe¡Clo£OnExecSw™ch
)) {

339  
	`Te¡Clo£OnExecH–³rMaš
(
¬gv
[
i
 + 1]);

344 
	`G‘ArgvZ”o
()->
	`assign
(
¬gv
[0],‡rgv[0] + 
¡d
::
	`¡¾’
(argv[0]) + 1);

348 
Ëv–db
::
EnvPosixTe¡
::
	`S‘FeLim™s
Öev–db::
kR—dOÆyFeLim™
,

349 
Ëv–db
::
kMM­Lim™
);

351 
‹¡šg
::
	`In™GoogËTe¡
(&
¬gc
, 
¬gv
);

352  
	`RUN_ALL_TESTS
();

353 
	}
}

	@util/env_posix_test_helper.h

5 #iâdeà
STORAGE_LEVELDB_UTIL_ENV_POSIX_TEST_HELPER_H_


6 
	#STORAGE_LEVELDB_UTIL_ENV_POSIX_TEST_HELPER_H_


	)

8 
Çme¥aû
 
	gËv–db
 {

10 
şass
 
	gEnvPosixTe¡
;

13 şas 
	cEnvPosixTe¡H–³r
 {

14 
	g´iv©e
:

15 
ä›nd
 
şass
 
EnvPosixTe¡
;

19 
S‘R—dOÆyFDLim™
(
lim™
);

23 
S‘R—dOÆyMM­Lim™
(
lim™
);

	@util/env_test.cc

5 
	~"Ëv–db/’v.h
"

7 
	~<®gÜ™hm
>

9 
	~"g‹¡/g‹¡.h
"

10 
	~"pÜt/pÜt.h
"

11 
	~"pÜt/th»ad_ªnÙ©iÚs.h
"

12 
	~"ut/mu‹xlock.h
"

13 
	~"ut/‹¡ut.h
"

15 
Çme¥aû
 
	gËv–db
 {

17 şas 
	cEnvTe¡
 : 
public
 
‹¡šg
::
Te¡
 {

18 
public
:

19 
EnvTe¡
(è: 
’v_
(
Env
::
DeçuÉ
()) {}

21 
Env
* 
’v_
;

24 
	$TEST_F
(
EnvTe¡
, 
R—dWr™e
) {

25 
Rªdom
 
	`ºd
(
‹¡
::
	`RªdomS“d
());

28 
¡d
::
¡ršg
 
‹¡_dœ
;

29 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`G‘Te¡DœeùÜy
(&
‹¡_dœ
));

30 
¡d
::
¡ršg
 
‹¡_fe_Çme
 = 
‹¡_dœ
 + "/open_on_read.txt";

31 
Wr™abËFe
* 
wr™abË_fe
;

32 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`NewWr™abËFe
(
‹¡_fe_Çme
, &
wr™abË_fe
));

35 cÚ¡ 
size_t
 
kD©aSize
 = 10 * 1048576;

36 
¡d
::
¡ršg
 
d©a
;

37 
d©a
.
	`size
(è< 
kD©aSize
) {

38 
Ën
 = 
ºd
.
	`Skewed
(18);

39 
¡d
::
¡ršg
 
r
;

40 
‹¡
::
	`RªdomSŒšg
(&
ºd
, 
Ën
, &
r
);

41 
	`ASSERT_LEVELDB_OK
(
wr™abË_fe
->
	`Aµ’d
(
r
));

42 
d©a
 +ğ
r
;

43 ià(
ºd
.
	`OÃIn
(10)) {

44 
	`ASSERT_LEVELDB_OK
(
wr™abË_fe
->
	`Flush
());

47 
	`ASSERT_LEVELDB_OK
(
wr™abË_fe
->
	`Sync
());

48 
	`ASSERT_LEVELDB_OK
(
wr™abË_fe
->
	`Clo£
());

49 
d–‘e
 
wr™abË_fe
;

52 
Sequ’tŸlFe
* 
£qu’tŸl_fe
;

53 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`NewSequ’tŸlFe
(
‹¡_fe_Çme
, &
£qu’tŸl_fe
));

54 
¡d
::
¡ršg
 
»ad_»suÉ
;

55 
¡d
::
¡ršg
 
sü©ch
;

56 
»ad_»suÉ
.
	`size
(è< 
d©a
.size()) {

57 
Ën
 = 
¡d
::
mš
<>(
ºd
.
	`Skewed
(18), 
d©a
.
	`size
(è- 
»ad_»suÉ
.size());

58 
sü©ch
.
	`»size
(
¡d
::
	`max
(
Ën
, 1));

59 
Sliû
 
»ad
;

60 
	`ASSERT_LEVELDB_OK
(
£qu’tŸl_fe
->
	`R—d
(
Ën
, &
»ad
, &
sü©ch
[0]));

61 ià(
Ën
 > 0) {

62 
	`ASSERT_GT
(
»ad
.
	`size
(), 0);

64 
	`ASSERT_LE
(
»ad
.
	`size
(), 
Ën
);

65 
»ad_»suÉ
.
	`­³nd
(
»ad
.
	`d©a
(),„—d.
	`size
());

67 
	`ASSERT_EQ
(
»ad_»suÉ
, 
d©a
);

68 
d–‘e
 
£qu’tŸl_fe
;

69 
	}
}

71 
	$TEST_F
(
EnvTe¡
, 
RunImmedŸ‹ly
) {

72 
	sRunS‹
 {

73 
pÜt
::
Mu‹x
 
mu
;

74 
pÜt
::
CÚdV¬
 
cv¬
{&
mu
};

75 
boŞ
 
ÿÎed
 = 
çl£
;

77 
	`Run
(* 
¬g
) {

78 
RunS‹
* 
¡©e
 = 
»š‹½»t_ÿ¡
<RunS‹*>(
¬g
);

79 
Mu‹xLock
 
	`l
(&
¡©e
->
mu
);

80 
	`ASSERT_EQ
(
¡©e
->
ÿÎed
, 
çl£
);

81 
¡©e
->
ÿÎed
 = 
Œue
;

82 
¡©e
->
cv¬
.
	`SigÇl
();

86 
RunS‹
 
¡©e
;

87 
’v_
->
	`ScheduË
(&
RunS‹
::
Run
, &
¡©e
);

89 
Mu‹xLock
 
	`l
(&
¡©e
.
mu
);

90 !
¡©e
.
ÿÎed
) {

91 
¡©e
.
cv¬
.
	`Wa™
();

93 
	}
}

95 
	$TEST_F
(
EnvTe¡
, 
RunMªy
) {

96 
	sRunS‹
 {

97 
pÜt
::
Mu‹x
 
mu
;

98 
pÜt
::
CÚdV¬
 
cv¬
{&
mu
};

99 
run_couÁ
 = 0;

102 
	sC®lback
 {

103 
RunS‹
* cÚ¡ 
¡©e_
;

104 
boŞ
 
run
 = 
çl£
;

106 
	`C®lback
(
RunS‹
* 
s
è: 
	`¡©e_
(s) {}

108 
	`Run
(* 
¬g
) {

109 
C®lback
* 
ÿÎback
 = 
»š‹½»t_ÿ¡
<C®lback*>(
¬g
);

110 
RunS‹
* 
¡©e
 = 
ÿÎback
->
¡©e_
;

112 
Mu‹xLock
 
	`l
(&
¡©e
->
mu
);

113 
¡©e
->
run_couÁ
++;

114 
ÿÎback
->
run
 = 
Œue
;

115 
¡©e
->
cv¬
.
	`SigÇl
();

119 
RunS‹
 
¡©e
;

120 
C®lback
 
	`ÿÎback1
(&
¡©e
);

121 
C®lback
 
	`ÿÎback2
(&
¡©e
);

122 
C®lback
 
	`ÿÎback3
(&
¡©e
);

123 
C®lback
 
	`ÿÎback4
(&
¡©e
);

124 
’v_
->
	`ScheduË
(&
C®lback
::
Run
, &
ÿÎback1
);

125 
’v_
->
	`ScheduË
(&
C®lback
::
Run
, &
ÿÎback2
);

126 
’v_
->
	`ScheduË
(&
C®lback
::
Run
, &
ÿÎback3
);

127 
’v_
->
	`ScheduË
(&
C®lback
::
Run
, &
ÿÎback4
);

129 
Mu‹xLock
 
	`l
(&
¡©e
.
mu
);

130 
¡©e
.
run_couÁ
 != 4) {

131 
¡©e
.
cv¬
.
	`Wa™
();

134 
	`ASSERT_TRUE
(
ÿÎback1
.
run
);

135 
	`ASSERT_TRUE
(
ÿÎback2
.
run
);

136 
	`ASSERT_TRUE
(
ÿÎback3
.
run
);

137 
	`ASSERT_TRUE
(
ÿÎback4
.
run
);

138 
	}
}

140 
	sS‹
 {

141 
	gpÜt
::
Mu‹x
 
mu
;

142 
	gpÜt
::
CÚdV¬
 
cv¬
{&
mu
};

144 
v®
 
GUARDED_BY
(
mu
);

145 
num_ruÂšg
 
GUARDED_BY
(
mu
);

147 
S‹
(
v®
, 
num_ruÂšg
) : val(val),‚um_running(num_running) {}

150 
	$Th»adBody
(* 
¬g
) {

151 
S‹
* 
s
 = 
»š‹½»t_ÿ¡
<S‹*>(
¬g
);

152 
s
->
mu
.
	`Lock
();

153 
s
->
v®
 += 1;

154 
s
->
num_ruÂšg
 -= 1;

155 
s
->
cv¬
.
	`SigÇl
();

156 
s
->
mu
.
	`UÆock
();

157 
	}
}

159 
	$TEST_F
(
EnvTe¡
, 
S¹Th»ad
) {

160 
S‹
 
	`¡©e
(0, 3);

161 
i
 = 0; i < 3; i++) {

162 
’v_
->
	`S¹Th»ad
(&
Th»adBody
, &
¡©e
);

165 
Mu‹xLock
 
	`l
(&
¡©e
.
mu
);

166 
¡©e
.
num_ruÂšg
 != 0) {

167 
¡©e
.
cv¬
.
	`Wa™
();

169 
	`ASSERT_EQ
(
¡©e
.
v®
, 3);

170 
	}
}

172 
	$TEST_F
(
EnvTe¡
, 
Te¡O³nNÚExi¡’tFe
) {

174 
¡d
::
¡ršg
 
‹¡_dœ
;

175 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`G‘Te¡DœeùÜy
(&
‹¡_dœ
));

177 
¡d
::
¡ršg
 
nÚ_exi¡’t_fe
 = 
‹¡_dœ
 + "/non_existent_file";

178 
	`ASSERT_TRUE
(!
’v_
->
	`FeExi¡s
(
nÚ_exi¡’t_fe
));

180 
RªdomAcûssFe
* 
¿ndom_acûss_fe
;

181 
Stus
 
¡©us
 =

182 
’v_
->
	`NewRªdomAcûssFe
(
nÚ_exi¡’t_fe
, &
¿ndom_acûss_fe
);

183 #ià
	`defšed
(
LEVELDB_PLATFORM_CHROMIUM
)

185 
	`ASSERT_TRUE
(
¡©us
.
	`IsIOE¼Ü
());

187 
	`ASSERT_TRUE
(
¡©us
.
	`IsNÙFound
());

190 
Sequ’tŸlFe
* 
£qu’tŸl_fe
;

191 
¡©us
 = 
’v_
->
	`NewSequ’tŸlFe
(
nÚ_exi¡’t_fe
, &
£qu’tŸl_fe
);

192 #ià
	`defšed
(
LEVELDB_PLATFORM_CHROMIUM
)

194 
	`ASSERT_TRUE
(
¡©us
.
	`IsIOE¼Ü
());

196 
	`ASSERT_TRUE
(
¡©us
.
	`IsNÙFound
());

198 
	}
}

200 
	$TEST_F
(
EnvTe¡
, 
Reİ’Wr™abËFe
) {

201 
¡d
::
¡ršg
 
‹¡_dœ
;

202 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`G‘Te¡DœeùÜy
(&
‹¡_dœ
));

203 
¡d
::
¡ršg
 
‹¡_fe_Çme
 = 
‹¡_dœ
 + "/reopen_writable_file.txt";

204 
’v_
->
	`RemoveFe
(
‹¡_fe_Çme
);

206 
Wr™abËFe
* 
wr™abË_fe
;

207 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`NewWr™abËFe
(
‹¡_fe_Çme
, &
wr™abË_fe
));

208 
¡d
::
¡ršg
 
	`d©a
("hello world!");

209 
	`ASSERT_LEVELDB_OK
(
wr™abË_fe
->
	`Aµ’d
(
d©a
));

210 
	`ASSERT_LEVELDB_OK
(
wr™abË_fe
->
	`Clo£
());

211 
d–‘e
 
wr™abË_fe
;

213 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`NewWr™abËFe
(
‹¡_fe_Çme
, &
wr™abË_fe
));

214 
d©a
 = "42";

215 
	`ASSERT_LEVELDB_OK
(
wr™abË_fe
->
	`Aµ’d
(
d©a
));

216 
	`ASSERT_LEVELDB_OK
(
wr™abË_fe
->
	`Clo£
());

217 
d–‘e
 
wr™abË_fe
;

219 
	`ASSERT_LEVELDB_OK
(
	`R—dFeToSŒšg
(
’v_
, 
‹¡_fe_Çme
, &
d©a
));

220 
	`ASSERT_EQ
(
¡d
::
	`¡ršg
("42"), 
d©a
);

221 
’v_
->
	`RemoveFe
(
‹¡_fe_Çme
);

222 
	}
}

224 
	$TEST_F
(
EnvTe¡
, 
Reİ’Aµ’dabËFe
) {

225 
¡d
::
¡ršg
 
‹¡_dœ
;

226 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`G‘Te¡DœeùÜy
(&
‹¡_dœ
));

227 
¡d
::
¡ršg
 
‹¡_fe_Çme
 = 
‹¡_dœ
 + "/reopen_appendable_file.txt";

228 
’v_
->
	`RemoveFe
(
‹¡_fe_Çme
);

230 
Wr™abËFe
* 
­³ndabË_fe
;

231 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`NewAµ’dabËFe
(
‹¡_fe_Çme
, &
­³ndabË_fe
));

232 
¡d
::
¡ršg
 
	`d©a
("hello world!");

233 
	`ASSERT_LEVELDB_OK
(
­³ndabË_fe
->
	`Aµ’d
(
d©a
));

234 
	`ASSERT_LEVELDB_OK
(
­³ndabË_fe
->
	`Clo£
());

235 
d–‘e
 
­³ndabË_fe
;

237 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`NewAµ’dabËFe
(
‹¡_fe_Çme
, &
­³ndabË_fe
));

238 
d©a
 = "42";

239 
	`ASSERT_LEVELDB_OK
(
­³ndabË_fe
->
	`Aµ’d
(
d©a
));

240 
	`ASSERT_LEVELDB_OK
(
­³ndabË_fe
->
	`Clo£
());

241 
d–‘e
 
­³ndabË_fe
;

243 
	`ASSERT_LEVELDB_OK
(
	`R—dFeToSŒšg
(
’v_
, 
‹¡_fe_Çme
, &
d©a
));

244 
	`ASSERT_EQ
(
¡d
::
	`¡ršg
("h–lØwÜld!42"), 
d©a
);

245 
’v_
->
	`RemoveFe
(
‹¡_fe_Çme
);

246 
	}
}

	@util/env_windows.cc

7 #iâdeà
NOMINMAX


8 
	#NOMINMAX


	)

10 
	~<wšdows.h
>

12 
	~<®gÜ™hm
>

13 
	~<©omic
>

14 
	~<chrÚo
>

15 
	~<cÚd™iÚ_v¬ŸbË
>

16 
	~<c¡ddef
>

17 
	~<c¡dšt
>

18 
	~<c¡dlib
>

19 
	~<c¡ršg
>

20 
	~<memÜy
>

21 
	~<mu‹x
>

22 
	~<queue
>

23 
	~<s¡»am
>

24 
	~<¡ršg
>

25 
	~<veùÜ
>

27 
	~"Ëv–db/’v.h
"

28 
	~"Ëv–db/¦iû.h
"

29 
	~"pÜt/pÜt.h
"

30 
	~"pÜt/th»ad_ªnÙ©iÚs.h
"

31 
	~"ut/’v_wšdows_‹¡_h–³r.h
"

32 
	~"ut/loggšg.h
"

33 
	~"ut/mu‹xlock.h
"

34 
	~"ut/wšdows_logg”.h
"

36 
Çme¥aû
 
	gËv–db
 {

38 
	gÇme¥aû
 {

40 
cÚ¡ex´
 cÚ¡ 
size_t
 
	gkWr™abËFeBufãrSize
 = 65536;

43 
cÚ¡ex´
 
	gkDeçuÉMm­Lim™
 = ((*) >= 8) ? 1000 : 0;

46 
	gg_mm­_lim™
 = 
kDeçuÉMm­Lim™
;

48 
	g¡d
::
¡ršg
 
G‘WšdowsE¼ÜMes§ge
(
DWORD
 
”rÜ_code
) {

49 
¡d
::
¡ršg
 
mes§ge
;

50 * 
	g”rÜ_‹xt
 = 
nuÎ±r
;

52 
size_t
 
	g”rÜ_‹xt_size
 = ::
FÜm©Mes§geA
(

53 
FORMAT_MESSAGE_FROM_SYSTEM
 | 
FORMAT_MESSAGE_ALLOCATE_BUFFER
 |

54 
FORMAT_MESSAGE_IGNORE_INSERTS
,

55 
nuÎ±r
, 
”rÜ_code
, 
MAKELANGID
(
LANG_NEUTRAL
, 
SUBLANG_DEFAULT
),

56 
»š‹½»t_ÿ¡
<*>(&
”rÜ_‹xt
), 0, 
nuÎ±r
);

57 ià(!
	g”rÜ_‹xt
) {

58  
	gmes§ge
;

60 
	gmes§ge
.
assign
(
”rÜ_‹xt
, 
”rÜ_‹xt_size
);

61 ::
LoÿlF»e
(
”rÜ_‹xt
);

62  
	gmes§ge
;

65 
Stus
 
WšdowsE¼Ü
(cÚ¡ 
¡d
::
¡ršg
& 
cÚ‹xt
, 
DWORD
 
”rÜ_code
) {

66 ià(
	g”rÜ_code
 =ğ
ERROR_FILE_NOT_FOUND
 || 
”rÜ_code
 =ğ
ERROR_PATH_NOT_FOUND
)

67  
Stus
::
NÙFound
(
cÚ‹xt
, 
G‘WšdowsE¼ÜMes§ge
(
”rÜ_code
));

68  
	gStus
::
IOE¼Ü
(
cÚ‹xt
, 
G‘WšdowsE¼ÜMes§ge
(
”rÜ_code
));

71 şas 
	cScİedHªdË
 {

72 
	gpublic
:

73 
ScİedHªdË
(
HANDLE
 
hªdË
è: 
hªdË_
(handle) {}

74 
ScİedHªdË
(cÚ¡ ScİedHªdË&èğ
d–‘e
;

75 
ScİedHªdË
(ScİedHªdË&& 
Ùh”
è
	gnÛxû±
 : 
hªdË_
(Ùh”.
R–—£
()) {}

76 ~
ScİedHªdË
(è{ 
Clo£
(); }

78 
	gScİedHªdË
& 
	gİ”©Ü
=(cÚ¡ 
ScİedHªdË
&èğ
d–‘e
;

80 
	gScİedHªdË
& 
	gİ”©Ü
=(
ScİedHªdË
&& 
rhs
è
nÛxû±
 {

81 ià(
this
 !ğ&
rhs
è
hªdË_
 =„hs.
R–—£
();

82  *
	gthis
;

85 
boŞ
 
Clo£
() {

86 ià(!
is_v®id
()) {

87  
	gŒue
;

89 
HANDLE
 
	gh
 = 
hªdË_
;

90 
	ghªdË_
 = 
INVALID_HANDLE_VALUE
;

91  ::
Clo£HªdË
(
h
);

94 
boŞ
 
is_v®id
() const {

95  
	ghªdË_
 !ğ
INVALID_HANDLE_VALUE
 && 
hªdË_
 !ğ
nuÎ±r
;

98 
HANDLE
 
g‘
(ècÚ¡ {  
	ghªdË_
; }

100 
HANDLE
 
R–—£
() {

101 
HANDLE
 
	gh
 = 
hªdË_
;

102 
	ghªdË_
 = 
INVALID_HANDLE_VALUE
;

103  
	gh
;

106 
	g´iv©e
:

107 
HANDLE
 
hªdË_
;

114 şas 
	cLim™”
 {

115 
	gpublic
:

117 
Lim™”
(
max_acquœes
)

119 #ià!
defšed
(
NDEBUG
)

120 
max_acquœes_
(
max_acquœes
),

122 
acquœes_®lowed_
(
max_acquœes
) {

123 
as£¹
(
max_acquœes
 >= 0);

126 
Lim™”
(cÚ¡ Lim™”&èğ
d–‘e
;

127 
Lim™”
 
	gİ”©Ü
=(cÚ¡ Lim™”&èğ
d–‘e
;

131 
boŞ
 
Acquœe
() {

132 
	gŞd_acquœes_®lowed
 =

133 
acquœes_®lowed_
.
ãtch_sub
(1, 
¡d
::
memÜy_Üd”_»Ïxed
);

135 ià(
	gŞd_acquœes_®lowed
 > 0è 
	gŒue
;

137 
	gacquœes_®lowed_
.
ãtch_add
(1, 
¡d
::
memÜy_Üd”_»Ïxed
);

138  
	gçl£
;

143 
R–—£
() {

144 
	gŞd_acquœes_®lowed
 =

145 
acquœes_®lowed_
.
ãtch_add
(1, 
¡d
::
memÜy_Üd”_»Ïxed
);

148 ()
	gŞd_acquœes_®lowed
;

150 
as£¹
(
Şd_acquœes_®lowed
 < 
max_acquœes_
);

153 
	g´iv©e
:

154 #ià!
defšed
(
NDEBUG
)

156 cÚ¡ 
max_acquœes_
;

163 
	g¡d
::
©omic
<> 
acquœes_®lowed_
;

166 şas 
	cWšdowsSequ’tŸlFe
 : 
public
 
Sequ’tŸlFe
 {

167 
public
:

168 
WšdowsSequ’tŸlFe
(
¡d
::
¡ršg
 
f’ame
, 
ScİedHªdË
 
hªdË
)

169 : 
hªdË_
(
¡d
::
move
(
hªdË
)), 
f’ame_
(¡d::move(
f’ame
)) {}

170 ~
WšdowsSequ’tŸlFe
(è
ov”ride
 {}

172 
Stus
 
R—d
(
size_t
 
n
, 
Sliû
* 
»suÉ
, * 
sü©ch
è
	gov”ride
 {

173 
DWORD
 
	gby‹s_»ad
;

177 
as£¹
(
n
 <ğ
¡d
::
num”ic_lim™s
<
DWORD
>::
max
());

178 ià(!::
R—dFe
(
hªdË_
.
g‘
(), 
sü©ch
, 
¡©ic_ÿ¡
<
DWORD
>(
n
), &
by‹s_»ad
,

179 
nuÎ±r
)) {

180  
WšdowsE¼Ü
(
f’ame_
, ::
G‘La¡E¼Ü
());

183 *
	g»suÉ
 = 
Sliû
(
sü©ch
, 
by‹s_»ad
);

184  
	gStus
::
OK
();

187 
Stus
 
Sk
(
ušt64_t
 
n
è
	gov”ride
 {

188 
LARGE_INTEGER
 
	gdi¡ªû
;

189 
	gdi¡ªû
.
	gQuadP¬t
 = 
n
;

190 ià(!::
S‘FePoš‹rEx
(
hªdË_
.
g‘
(), 
di¡ªû
, 
nuÎ±r
, 
FILE_CURRENT
)) {

191  
WšdowsE¼Ü
(
f’ame_
, ::
G‘La¡E¼Ü
());

193  
	gStus
::
OK
();

196 
	g´iv©e
:

197 cÚ¡ 
ScİedHªdË
 
hªdË_
;

198 cÚ¡ 
	g¡d
::
¡ršg
 
f’ame_
;

201 şas 
	cWšdowsRªdomAcûssFe
 : 
public
 
RªdomAcûssFe
 {

202 
public
:

203 
WšdowsRªdomAcûssFe
(
¡d
::
¡ršg
 
f’ame
, 
ScİedHªdË
 
hªdË
)

204 : 
hªdË_
(
¡d
::
move
(
hªdË
)), 
f’ame_
(¡d::move(
f’ame
)) {}

206 ~
WšdowsRªdomAcûssFe
(è
ov”ride
 = ;

208 
Stus
 
R—d
(
ušt64_t
 
off£t
, 
size_t
 
n
, 
Sliû
* 
»suÉ
,

209 * 
sü©ch
ècÚ¡ 
	gov”ride
 {

210 
DWORD
 
	gby‹s_»ad
 = 0;

211 
OVERLAPPED
 
	gov”Ïµed
 = {0};

213 
	gov”Ïµed
.
	gOff£tHigh
 = 
¡©ic_ÿ¡
<
DWORD
>(
off£t
 >> 32);

214 
	gov”Ïµed
.
	gOff£t
 = 
¡©ic_ÿ¡
<
DWORD
>(
off£t
);

215 ià(!::
R—dFe
(
hªdË_
.
g‘
(), 
sü©ch
, 
¡©ic_ÿ¡
<
DWORD
>(
n
), &
by‹s_»ad
,

216 &
ov”Ïµed
)) {

217 
DWORD
 
	g”rÜ_code
 = ::
G‘La¡E¼Ü
();

218 ià(
	g”rÜ_code
 !ğ
ERROR_HANDLE_EOF
) {

219 *
»suÉ
 = 
Sliû
(
sü©ch
, 0);

220  
	gStus
::
IOE¼Ü
(
f’ame_
, 
G‘WšdowsE¼ÜMes§ge
(
”rÜ_code
));

224 *
	g»suÉ
 = 
Sliû
(
sü©ch
, 
by‹s_»ad
);

225  
	gStus
::
OK
();

228 
	g´iv©e
:

229 cÚ¡ 
ScİedHªdË
 
hªdË_
;

230 cÚ¡ 
	g¡d
::
¡ršg
 
f’ame_
;

233 şas 
	cWšdowsMm­R—dabËFe
 : 
public
 
RªdomAcûssFe
 {

234 
public
:

236 
WšdowsMm­R—dabËFe
(
¡d
::
¡ršg
 
f’ame
, * 
mm­_ba£
, 
size_t
 
Ëngth
,

237 
Lim™”
* 
mm­_lim™”
)

238 : 
mm­_ba£_
(
mm­_ba£
),

239 
Ëngth_
(
Ëngth
),

240 
mm­_lim™”_
(
mm­_lim™”
),

241 
f’ame_
(
¡d
::
move
(
f’ame
)) {}

243 ~
WšdowsMm­R—dabËFe
(è
ov”ride
 {

244 ::
Unm­V›wOfFe
(
mm­_ba£_
);

245 
	gmm­_lim™”_
->
R–—£
();

248 
Stus
 
R—d
(
ušt64_t
 
off£t
, 
size_t
 
n
, 
Sliû
* 
»suÉ
,

249 * 
sü©ch
ècÚ¡ 
	gov”ride
 {

250 ià(
	goff£t
 + 
	gn
 > 
	gËngth_
) {

251 *
	g»suÉ
 = 
Sliû
();

252  
WšdowsE¼Ü
(
f’ame_
, 
ERROR_INVALID_PARAMETER
);

255 *
	g»suÉ
 = 
Sliû
(
mm­_ba£_
 + 
off£t
, 
n
);

256  
	gStus
::
OK
();

259 
	g´iv©e
:

260 * cÚ¡ 
mm­_ba£_
;

261 cÚ¡ 
size_t
 
	gËngth_
;

262 
Lim™”
* cÚ¡ 
	gmm­_lim™”_
;

263 cÚ¡ 
	g¡d
::
¡ršg
 
f’ame_
;

266 şas 
	cWšdowsWr™abËFe
 : 
public
 
Wr™abËFe
 {

267 
public
:

268 
WšdowsWr™abËFe
(
¡d
::
¡ršg
 
f’ame
, 
ScİedHªdË
 
hªdË
)

269 : 
pos_
(0), 
hªdË_
(
¡d
::
move
(
hªdË
)), 
f’ame_
(¡d::move(
f’ame
)) {}

271 ~
WšdowsWr™abËFe
(è
ov”ride
 = ;

273 
Stus
 
Aµ’d
(cÚ¡ 
Sliû
& 
d©a
è
	gov”ride
 {

274 
size_t
 
	gwr™e_size
 = 
d©a
.
size
();

275 cÚ¡ * 
	gwr™e_d©a
 = 
d©a
.data();

278 
size_t
 
	gcİy_size
 = 
¡d
::
mš
(
wr™e_size
, 
kWr™abËFeBufãrSize
 - 
pos_
);

279 
	g¡d
::
memıy
(
buf_
 + 
pos_
, 
wr™e_d©a
, 
cİy_size
);

280 
	gwr™e_d©a
 +ğ
cİy_size
;

281 
	gwr™e_size
 -ğ
cİy_size
;

282 
	gpos_
 +ğ
cİy_size
;

283 ià(
	gwr™e_size
 == 0) {

284  
Stus
::
OK
();

288 
Stus
 
	g¡©us
 = 
FlushBufãr
();

289 ià(!
	g¡©us
.
ok
()) {

290  
	g¡©us
;

294 ià(
	gwr™e_size
 < 
	gkWr™abËFeBufãrSize
) {

295 
	g¡d
::
memıy
(
buf_
, 
wr™e_d©a
, 
wr™e_size
);

296 
	gpos_
 = 
wr™e_size
;

297  
	gStus
::
OK
();

299  
Wr™eUnbufã»d
(
wr™e_d©a
, 
wr™e_size
);

302 
Stus
 
Clo£
(è
	gov”ride
 {

303 
Stus
 
	g¡©us
 = 
FlushBufãr
();

304 ià(!
	ghªdË_
.
Clo£
(è&& 
	g¡©us
.
ok
()) {

305 
	g¡©us
 = 
WšdowsE¼Ü
(
f’ame_
, ::
G‘La¡E¼Ü
());

307  
	g¡©us
;

310 
Stus
 
Flush
(è
	gov”ride
 {  
FlushBufãr
(); }

312 
Stus
 
Sync
(è
	gov”ride
 {

316 
Stus
 
	g¡©us
 = 
FlushBufãr
();

317 ià(!
	g¡©us
.
ok
()) {

318  
	g¡©us
;

321 ià(!::
FlushFeBufãrs
(
hªdË_
.
g‘
())) {

322  
Stus
::
IOE¼Ü
(
f’ame_
,

323 
G‘WšdowsE¼ÜMes§ge
(::
G‘La¡E¼Ü
()));

325  
	gStus
::
OK
();

328 
	g´iv©e
:

329 
Stus
 
FlushBufãr
() {

330 
Stus
 
¡©us
 = 
Wr™eUnbufã»d
(
buf_
, 
pos_
);

331 
	gpos_
 = 0;

332  
	g¡©us
;

335 
Stus
 
Wr™eUnbufã»d
(cÚ¡ * 
d©a
, 
size_t
 
size
) {

336 
DWORD
 
	gby‹s_wr™‹n
;

337 ià(!::
Wr™eFe
(
hªdË_
.
g‘
(), 
d©a
, 
¡©ic_ÿ¡
<
DWORD
>(
size
),

338 &
by‹s_wr™‹n
, 
nuÎ±r
)) {

339  
	gStus
::
IOE¼Ü
(
f’ame_
,

340 
G‘WšdowsE¼ÜMes§ge
(::
G‘La¡E¼Ü
()));

342  
	gStus
::
OK
();

346 
	gbuf_
[
kWr™abËFeBufãrSize
];

347 
size_t
 
	gpos_
;

349 
ScİedHªdË
 
	ghªdË_
;

350 cÚ¡ 
	g¡d
::
¡ršg
 
f’ame_
;

356 
boŞ
 
LockOrUÆock
(
HANDLE
 
hªdË
, boŞ 
lock
) {

357 ià(
	glock
) {

358  ::
LockFe
(
hªdË
,

360  
MAXDWORD
,

361  
MAXDWORD
);

363  ::
UÆockFe
(
hªdË
,

365  
MAXDWORD
,

366  
MAXDWORD
);

370 şas 
	cWšdowsFeLock
 : 
public
 
FeLock
 {

371 
public
:

372 
WšdowsFeLock
(
ScİedHªdË
 
hªdË
, 
¡d
::
¡ršg
 
f’ame
)

373 : 
hªdË_
(
¡d
::
move
(
hªdË
)), 
f’ame_
(¡d::move(
f’ame
)) {}

375 cÚ¡ 
ScİedHªdË
& 
hªdË
(ècÚ¡ {  
hªdË_
; }

376 cÚ¡ 
	g¡d
::
¡ršg
& 
f’ame
(ècÚ¡ {  
f’ame_
; }

378 
	g´iv©e
:

379 cÚ¡ 
ScİedHªdË
 
hªdË_
;

380 cÚ¡ 
	g¡d
::
¡ršg
 
f’ame_
;

383 şas 
	cWšdowsEnv
 : 
public
 
Env
 {

384 
public
:

385 
WšdowsEnv
();

386 ~
WšdowsEnv
(è
	gov”ride
 {

387 cÚ¡ 
	gmsg
[] =

389 
	g¡d
::
fwr™e
(
msg
, 1, (msg), 
¡d”r
);

390 
	g¡d
::
abÜt
();

393 
Stus
 
NewSequ’tŸlFe
(cÚ¡ 
¡d
::
¡ršg
& 
f’ame
,

394 
Sequ’tŸlFe
** 
»suÉ
è
	gov”ride
 {

395 *
	g»suÉ
 = 
nuÎ±r
;

396 
DWORD
 
	gdesœed_acûss
 = 
GENERIC_READ
;

397 
DWORD
 
	gsh¬e_mode
 = 
FILE_SHARE_READ
;

398 
ScİedHªdË
 
	ghªdË
 = ::
C»©eFeA
(

399 
f’ame
.
c_¡r
(), 
desœed_acûss
, 
sh¬e_mode
,

400  
nuÎ±r
, 
OPEN_EXISTING
, 
FILE_ATTRIBUTE_NORMAL
,

401  
nuÎ±r
);

402 ià(!
	ghªdË
.
is_v®id
()) {

403  
WšdowsE¼Ü
(
f’ame
, ::
G‘La¡E¼Ü
());

406 *
	g»suÉ
 = 
Ãw
 
WšdowsSequ’tŸlFe
(
f’ame
, 
¡d
::
move
(
hªdË
));

407  
	gStus
::
OK
();

410 
Stus
 
NewRªdomAcûssFe
(cÚ¡ 
¡d
::
¡ršg
& 
f’ame
,

411 
RªdomAcûssFe
** 
»suÉ
è
	gov”ride
 {

412 *
	g»suÉ
 = 
nuÎ±r
;

413 
DWORD
 
	gdesœed_acûss
 = 
GENERIC_READ
;

414 
DWORD
 
	gsh¬e_mode
 = 
FILE_SHARE_READ
;

415 
ScİedHªdË
 
	ghªdË
 =

416 ::
C»©eFeA
(
f’ame
.
c_¡r
(), 
desœed_acûss
, 
sh¬e_mode
,

417  
nuÎ±r
, 
OPEN_EXISTING
,

418 
FILE_ATTRIBUTE_READONLY
,

419  
nuÎ±r
);

420 ià(!
	ghªdË
.
is_v®id
()) {

421  
WšdowsE¼Ü
(
f’ame
, ::
G‘La¡E¼Ü
());

423 ià(!
	gmm­_lim™”_
.
Acquœe
()) {

424 *
	g»suÉ
 = 
Ãw
 
WšdowsRªdomAcûssFe
(
f’ame
, 
¡d
::
move
(
hªdË
));

425  
	gStus
::
OK
();

428 
LARGE_INTEGER
 
	gfe_size
;

429 
Stus
 
	g¡©us
;

430 ià(!::
G‘FeSizeEx
(
hªdË
.
g‘
(), &
fe_size
)) {

431 
	gmm­_lim™”_
.
R–—£
();

432  
WšdowsE¼Ü
(
f’ame
, ::
G‘La¡E¼Ü
());

435 
ScİedHªdË
 
	gm­pšg
 =

436 ::
C»©eFeM­pšgA
(
hªdË
.
g‘
(),

437  
nuÎ±r
, 
PAGE_READONLY
,

440  
nuÎ±r
);

441 ià(
	gm­pšg
.
is_v®id
()) {

442 * 
	gmm­_ba£
 = ::
M­V›wOfFe
(
m­pšg
.
g‘
(), 
FILE_MAP_READ
,

446 ià(
	gmm­_ba£
) {

447 *
	g»suÉ
 = 
Ãw
 
WšdowsMm­R—dabËFe
(

448 
f’ame
, 
»š‹½»t_ÿ¡
<*>(
mm­_ba£
),

449 
¡©ic_ÿ¡
<
size_t
>(
fe_size
.
QuadP¬t
), &
mm­_lim™”_
);

450  
	gStus
::
OK
();

453 
	gmm­_lim™”_
.
R–—£
();

454  
WšdowsE¼Ü
(
f’ame
, ::
G‘La¡E¼Ü
());

457 
Stus
 
NewWr™abËFe
(cÚ¡ 
¡d
::
¡ršg
& 
f’ame
,

458 
Wr™abËFe
** 
»suÉ
è
	gov”ride
 {

459 
DWORD
 
	gdesœed_acûss
 = 
GENERIC_WRITE
;

460 
DWORD
 
	gsh¬e_mode
 = 0;

461 
ScİedHªdË
 
	ghªdË
 = ::
C»©eFeA
(

462 
f’ame
.
c_¡r
(), 
desœed_acûss
, 
sh¬e_mode
,

463  
nuÎ±r
, 
CREATE_ALWAYS
, 
FILE_ATTRIBUTE_NORMAL
,

464  
nuÎ±r
);

465 ià(!
	ghªdË
.
is_v®id
()) {

466 *
	g»suÉ
 = 
nuÎ±r
;

467  
WšdowsE¼Ü
(
f’ame
, ::
G‘La¡E¼Ü
());

470 *
	g»suÉ
 = 
Ãw
 
WšdowsWr™abËFe
(
f’ame
, 
¡d
::
move
(
hªdË
));

471  
	gStus
::
OK
();

474 
Stus
 
NewAµ’dabËFe
(cÚ¡ 
¡d
::
¡ršg
& 
f’ame
,

475 
Wr™abËFe
** 
»suÉ
è
	gov”ride
 {

476 
DWORD
 
	gdesœed_acûss
 = 
FILE_APPEND_DATA
;

477 
DWORD
 
	gsh¬e_mode
 = 0;

478 
ScİedHªdË
 
	ghªdË
 = ::
C»©eFeA
(

479 
f’ame
.
c_¡r
(), 
desœed_acûss
, 
sh¬e_mode
,

480  
nuÎ±r
, 
OPEN_ALWAYS
, 
FILE_ATTRIBUTE_NORMAL
,

481  
nuÎ±r
);

482 ià(!
	ghªdË
.
is_v®id
()) {

483 *
	g»suÉ
 = 
nuÎ±r
;

484  
WšdowsE¼Ü
(
f’ame
, ::
G‘La¡E¼Ü
());

487 *
	g»suÉ
 = 
Ãw
 
WšdowsWr™abËFe
(
f’ame
, 
¡d
::
move
(
hªdË
));

488  
	gStus
::
OK
();

491 
boŞ
 
FeExi¡s
(cÚ¡ 
¡d
::
¡ršg
& 
f’ame
è
ov”ride
 {

492  
G‘FeA‰ribu‹sA
(
f’ame
.
c_¡r
()è!ğ
INVALID_FILE_ATTRIBUTES
;

495 
Stus
 
G‘Chd»n
(cÚ¡ 
¡d
::
¡ršg
& 
dœeùÜy_·th
,

496 
¡d
::
veùÜ
<¡d::
¡ršg
>* 
»suÉ
è
ov”ride
 {

497 cÚ¡ 
¡d
::
¡ršg
 
fšd_·‰”n
 = 
dœeùÜy_·th
 + "\\*";

498 
WIN32_FIND_DATAA
 
	gfšd_d©a
;

499 
HANDLE
 
	gdœ_hªdË
 = ::
FšdFœ¡FeA
(
fšd_·‰”n
.
c_¡r
(), &
fšd_d©a
);

500 ià(
	gdœ_hªdË
 =ğ
INVALID_HANDLE_VALUE
) {

501 
DWORD
 
Ï¡_”rÜ
 = ::
G‘La¡E¼Ü
();

502 ià(
	gÏ¡_”rÜ
 =ğ
ERROR_FILE_NOT_FOUND
) {

503  
Stus
::
OK
();

505  
WšdowsE¼Ü
(
dœeùÜy_·th
, 
Ï¡_”rÜ
);

508 
	gba£_Çme
[
_MAX_FNAME
];

509 
	gext
[
_MAX_EXT
];

511 ià(!
_¥l™·th_s
(
fšd_d©a
.
cFeName
, 
nuÎ±r
, 0,‚uÎ±r, 0, 
ba£_Çme
,

512 
ARRAYSIZE
(
ba£_Çme
), 
ext
, ARRAYSIZE(ext))) {

513 
	g»suÉ
->
em¶aû_back
(
¡d
::
¡ršg
(
ba£_Çme
è+ 
ext
);

515 } ::
FšdNextFeA
(
dœ_hªdË
, &
fšd_d©a
));

516 
DWORD
 
	gÏ¡_”rÜ
 = ::
G‘La¡E¼Ü
();

517 ::
FšdClo£
(
dœ_hªdË
);

518 ià(
	gÏ¡_”rÜ
 !ğ
ERROR_NO_MORE_FILES
) {

519  
WšdowsE¼Ü
(
dœeùÜy_·th
, 
Ï¡_”rÜ
);

521  
	gStus
::
OK
();

524 
Stus
 
RemoveFe
(cÚ¡ 
¡d
::
¡ršg
& 
f’ame
è
ov”ride
 {

525 ià(!::
D–‘eFeA
(
f’ame
.
c_¡r
())) {

526  
WšdowsE¼Ü
(
f’ame
, ::
G‘La¡E¼Ü
());

528  
	gStus
::
OK
();

531 
Stus
 
C»©eDœ
(cÚ¡ 
¡d
::
¡ršg
& 
dœÇme
è
ov”ride
 {

532 ià(!::
C»©eDœeùÜyA
(
dœÇme
.
c_¡r
(), 
nuÎ±r
)) {

533  
WšdowsE¼Ü
(
dœÇme
, ::
G‘La¡E¼Ü
());

535  
	gStus
::
OK
();

538 
Stus
 
RemoveDœ
(cÚ¡ 
¡d
::
¡ršg
& 
dœÇme
è
ov”ride
 {

539 ià(!::
RemoveDœeùÜyA
(
dœÇme
.
c_¡r
())) {

540  
WšdowsE¼Ü
(
dœÇme
, ::
G‘La¡E¼Ü
());

542  
	gStus
::
OK
();

545 
Stus
 
G‘FeSize
(cÚ¡ 
¡d
::
¡ršg
& 
f’ame
, 
ušt64_t
* 
size
è
	gov”ride
 {

546 
WIN32_FILE_ATTRIBUTE_DATA
 
	gfe_©Œibu‹s
;

547 ià(!::
G‘FeA‰ribu‹sExA
(
f’ame
.
c_¡r
(), 
G‘FeExInfoSnd¬d
,

548 &
fe_©Œibu‹s
)) {

549  
WšdowsE¼Ü
(
f’ame
, ::
G‘La¡E¼Ü
());

551 
ULARGE_INTEGER
 
	gfe_size
;

552 
	gfe_size
.
	gHighP¬t
 = 
fe_©Œibu‹s
.
nFeSizeHigh
;

553 
	gfe_size
.
	gLowP¬t
 = 
fe_©Œibu‹s
.
nFeSizeLow
;

554 *
	gsize
 = 
fe_size
.
QuadP¬t
;

555  
	gStus
::
OK
();

558 
Stus
 
R’ameFe
(cÚ¡ 
¡d
::
¡ršg
& 
äom
, cÚ¡ std::¡ršg& 
to
è
ov”ride
 {

561 ià(::
MoveFeA
(
äom
.
c_¡r
(), 
to
.c_str())) {

562  
	gStus
::
OK
();

564 
DWORD
 
	gmove_”rÜ
 = ::
G‘La¡E¼Ü
();

570 ià(::
R•ÏûFeA
(
to
.
c_¡r
(), 
äom
.c_¡r(), 
nuÎ±r
,

571 
REPLACEFILE_IGNORE_MERGE_ERRORS
,

572  
nuÎ±r
,‚ullptr)) {

573  
	gStus
::
OK
();

575 
DWORD
 
	g»¶aû_”rÜ
 = ::
G‘La¡E¼Ü
();

579 ià(
	g»¶aû_”rÜ
 =ğ
ERROR_FILE_NOT_FOUND
 ||

580 
»¶aû_”rÜ
 =ğ
ERROR_PATH_NOT_FOUND
) {

581  
WšdowsE¼Ü
(
äom
, 
move_”rÜ
);

583  
WšdowsE¼Ü
(
äom
, 
»¶aû_”rÜ
);

587 
Stus
 
LockFe
(cÚ¡ 
¡d
::
¡ršg
& 
f’ame
, 
FeLock
** 
lock
è
	gov”ride
 {

588 *
	glock
 = 
nuÎ±r
;

589 
Stus
 
	g»suÉ
;

590 
ScİedHªdË
 
	ghªdË
 = ::
C»©eFeA
(

591 
f’ame
.
c_¡r
(), 
GENERIC_READ
 | 
GENERIC_WRITE
, 
FILE_SHARE_READ
,

592  
nuÎ±r
, 
OPEN_ALWAYS
, 
FILE_ATTRIBUTE_NORMAL
,

593 
nuÎ±r
);

594 ià(!
	ghªdË
.
is_v®id
()) {

595 
	g»suÉ
 = 
WšdowsE¼Ü
(
f’ame
, ::
G‘La¡E¼Ü
());

596 } ià(!
LockOrUÆock
(
hªdË
.
g‘
(), 
Œue
)) {

597 
	g»suÉ
 = 
WšdowsE¼Ü
("lock " + 
f’ame
, ::
G‘La¡E¼Ü
());

599 *
	glock
 = 
Ãw
 
WšdowsFeLock
(
¡d
::
move
(
hªdË
), 
f’ame
);

601  
	g»suÉ
;

604 
Stus
 
UÆockFe
(
FeLock
* 
lock
è
	gov”ride
 {

605 
WšdowsFeLock
* 
	gwšdows_fe_lock
 =

606 
»š‹½»t_ÿ¡
<
WšdowsFeLock
*>(
lock
);

607 ià(!
LockOrUÆock
(
wšdows_fe_lock
->
hªdË
().
g‘
(), 
çl£
)) {

608  
WšdowsE¼Ü
("uÆock " + 
wšdows_fe_lock
->
f’ame
(),

609 ::
G‘La¡E¼Ü
());

611 
d–‘e
 
	gwšdows_fe_lock
;

612  
	gStus
::
OK
();

615 
ScheduË
((*
background_wÜk_funùiÚ
)(* 
background_wÜk_¬g
),

616 * 
background_wÜk_¬g
è
	gov”ride
;

618 
S¹Th»ad
((*
th»ad_maš
)(* 
th»ad_maš_¬g
),

619 * 
th»ad_maš_¬g
è
	gov”ride
 {

620 
	g¡d
::
th»ad
 
Ãw_th»ad
(
th»ad_maš
, 
th»ad_maš_¬g
);

621 
	gÃw_th»ad
.
d‘ach
();

624 
Stus
 
G‘Te¡DœeùÜy
(
¡d
::
¡ršg
* 
»suÉ
è
ov”ride
 {

625 cÚ¡ * 
’v
 = 
g‘’v
("TEST_TMPDIR");

626 ià(
	g’v
 &&ƒnv[0] != '\0') {

627 *
»suÉ
 = 
’v
;

628  
	gStus
::
OK
();

631 
	gtmp_·th
[
MAX_PATH
];

632 ià(!
G‘TempP©hA
(
ARRAYSIZE
(
tmp_·th
),mp_path)) {

633  
WšdowsE¼Ü
("G‘TempP©h", ::
G‘La¡E¼Ü
());

635 
	g¡d
::
¡ršg¡»am
 
ss
;

636 
	gss
 << 
	gtmp_·th
 << "Ëv–db‹¡-" << 
	g¡d
::
this_th»ad
::
g‘_id
();

637 *
	g»suÉ
 = 
ss
.
¡r
();

640 
C»©eDœ
(*
»suÉ
);

641  
	gStus
::
OK
();

644 
Stus
 
NewLogg”
(cÚ¡ 
¡d
::
¡ršg
& 
f’ame
, 
Logg”
** 
»suÉ
è
	gov”ride
 {

645 
	g¡d
::
FILE
* 
å
 = 
¡d
::
fİ’
(
f’ame
.
c_¡r
(), "wN");

646 ià(
	gå
 =ğ
nuÎ±r
) {

647 *
»suÉ
 = 
nuÎ±r
;

648  
WšdowsE¼Ü
(
f’ame
, ::
G‘La¡E¼Ü
());

650 *
	g»suÉ
 = 
Ãw
 
WšdowsLogg”
(
å
);

651  
	gStus
::
OK
();

655 
ušt64_t
 
NowMiüos
(è
	gov”ride
 {

659 
FILETIME
 
	gá
;

660 ::
G‘Sy¡emTimeAsFeTime
(&
á
);

663 
ušt64_t
 
	gnum_ticks
 =

664 (
¡©ic_ÿ¡
<
ušt64_t
>(
á
.
dwHighD©eTime
è<< 32è+ ft.
dwLowD©eTime
;

665  
	gnum_ticks
 / 10;

668 
SË•FÜMiüo£cÚds
(
miüos
è
	gov”ride
 {

669 
	g¡d
::
this_th»ad
::
¦“p_fÜ
(
¡d
::
chrÚo
::
miüo£cÚds
(
miüos
));

672 
	g´iv©e
:

673 
BackgroundTh»adMaš
();

675 
BackgroundTh»adEÁryPošt
(
WšdowsEnv
* 
’v
) {

676 
	g’v
->
BackgroundTh»adMaš
();

685 
	sBackgroundWÜkI‹m
 {

686 
ex¶ic™
 
BackgroundWÜkI‹m
((*
funùiÚ
)(* 
¬g
), *‡rg)

687 : 
funùiÚ
(funùiÚ), 
¬g
(arg) {}

689 (*cÚ¡ 
	gfunùiÚ
)(*);

690 * cÚ¡ 
	g¬g
;

693 
	gpÜt
::
Mu‹x
 
background_wÜk_mu‹x_
;

694 
	gpÜt
::
CÚdV¬
 
background_wÜk_cv_
 
GUARDED_BY
(
background_wÜk_mu‹x_
);

695 
boŞ
 
¡¬‹d_background_th»ad_
 
GUARDED_BY
(
background_wÜk_mu‹x_
);

697 
	g¡d
::
queue
<
BackgroundWÜkI‹m
> 
background_wÜk_queue_


698 
GUARDED_BY
(
background_wÜk_mu‹x_
);

700 
Lim™”
 
	gmm­_lim™”_
;

704 
MaxMm­s
(è{  
	gg_mm­_lim™
; }

706 
	gWšdowsEnv
::
WšdowsEnv
()

707 : 
background_wÜk_cv_
(&
background_wÜk_mu‹x_
),

708 
¡¬‹d_background_th»ad_
(
çl£
),

709 
mm­_lim™”_
(
MaxMm­s
()) {}

711 
	gWšdowsEnv
::
ScheduË
(

712 (*
background_wÜk_funùiÚ
)(* 
background_wÜk_¬g
),

713 * 
background_wÜk_¬g
) {

714 
	gbackground_wÜk_mu‹x_
.
Lock
();

717 ià(!
	g¡¬‹d_background_th»ad_
) {

718 
	g¡¬‹d_background_th»ad_
 = 
Œue
;

719 
	g¡d
::
th»ad
 
background_th»ad
(
WšdowsEnv
::
BackgroundTh»adEÁryPošt
, 
this
);

720 
	gbackground_th»ad
.
d‘ach
();

724 ià(
	gbackground_wÜk_queue_
.
em±y
()) {

725 
	gbackground_wÜk_cv_
.
SigÇl
();

728 
	gbackground_wÜk_queue_
.
em¶aû
(
background_wÜk_funùiÚ
, 
background_wÜk_¬g
);

729 
	gbackground_wÜk_mu‹x_
.
UÆock
();

732 
	gWšdowsEnv
::
BackgroundTh»adMaš
() {

733 
Œue
) {

734 
background_wÜk_mu‹x_
.
Lock
();

737 
	gbackground_wÜk_queue_
.
em±y
()) {

738 
	gbackground_wÜk_cv_
.
Wa™
();

741 
as£¹
(!
background_wÜk_queue_
.
em±y
());

742 autØ
	gbackground_wÜk_funùiÚ
 = 
background_wÜk_queue_
.
äÚt
().
funùiÚ
;

743 * 
	gbackground_wÜk_¬g
 = 
background_wÜk_queue_
.
äÚt
().
¬g
;

744 
	gbackground_wÜk_queue_
.
pİ
();

746 
	gbackground_wÜk_mu‹x_
.
UÆock
();

747 
background_wÜk_funùiÚ
(
background_wÜk_¬g
);

763 
	g‹m¶©e
 <
ty³Çme
 
	gEnvTy³
>

764 şas 
	cSšgËtÚEnv
 {

765 
	gpublic
:

766 
SšgËtÚEnv
() {

767 #ià!
defšed
(
NDEBUG
)

768 
’v_š™Ÿlized_
.
¡Üe
(
Œue
, 
¡d
::
memÜy_Üd”_»Ïxed
);

770 
¡©ic_as£¹
((
’v_¡Üage_
è>ğ(
EnvTy³
),

772 
¡©ic_as£¹
(
®ignof
(
deşty³
(
’v_¡Üage_
)è>ğ®ignof(
EnvTy³
),

774 
Ãw
 (&
’v_¡Üage_
è
EnvTy³
();

776 ~
SšgËtÚEnv
() = ;

778 
SšgËtÚEnv
(cÚ¡ SšgËtÚEnv&èğ
d–‘e
;

779 
	gSšgËtÚEnv
& 
	gİ”©Ü
=(cÚ¡ 
SšgËtÚEnv
&èğ
d–‘e
;

781 
Env
* 
’v
(è{  
	g»š‹½»t_ÿ¡
<
	gEnv
*>(&
	g’v_¡Üage_
); }

783 
As£¹EnvNÙIn™Ÿlized
() {

784 #ià!
defšed
(
NDEBUG
)

785 
as£¹
(!
’v_š™Ÿlized_
.
lßd
(
¡d
::
memÜy_Üd”_»Ïxed
));

789 
	g´iv©e
:

790 
ty³Çme
 
¡d
::
®igÃd_¡Üage
<(
EnvTy³
), 
®ignof
(EnvTy³)>::
ty³


791 
’v_¡Üage_
;

792 #ià!
defšed
(
NDEBUG
)

793 
	g¡d
::
©omic
<
boŞ
> 
’v_š™Ÿlized_
;

797 #ià!
defšed
(
NDEBUG
)

798 
	g‹m¶©e
 <
ty³Çme
 
	gEnvTy³
>

799 
	g¡d
::
©omic
<
boŞ
> 
SšgËtÚEnv
<
EnvTy³
>::
’v_š™Ÿlized_
;

802 
usšg
 
	gWšdowsDeçuÉEnv
 = 
SšgËtÚEnv
<
WšdowsEnv
>;

806 
	gEnvWšdowsTe¡H–³r
::
	$S‘R—dOÆyMM­Lim™
(
lim™
) {

807 
WšdowsDeçuÉEnv
::
	`As£¹EnvNÙIn™Ÿlized
();

808 
g_mm­_lim™
 = 
lim™
;

809 
	}
}

811 
Env
* 
	gEnv
::
	$DeçuÉ
() {

812 
WšdowsDeçuÉEnv
 
’v_cÚš”
;

813  
’v_cÚš”
.
	`’v
();

814 
	}
}

	@util/env_windows_test.cc

5 
	~"g‹¡/g‹¡.h
"

6 
	~"Ëv–db/’v.h
"

7 
	~"pÜt/pÜt.h
"

8 
	~"ut/’v_wšdows_‹¡_h–³r.h
"

9 
	~"ut/‹¡ut.h
"

11 
Çme¥aû
 
	gËv–db
 {

13 cÚ¡ 
	gkMM­Lim™
 = 4;

15 şas 
	cEnvWšdowsTe¡
 : 
public
 
‹¡šg
::
Te¡
 {

16 
public
:

17 
S‘FeLim™s
(
mm­_lim™
) {

18 
EnvWšdowsTe¡H–³r
::
S‘R—dOÆyMM­Lim™
(
mm­_lim™
);

21 
EnvWšdowsTe¡
(è: 
’v_
(
Env
::
DeçuÉ
()) {}

23 
Env
* 
’v_
;

26 
	$TEST_F
(
EnvWšdowsTe¡
, 
Te¡O³nOnR—d
) {

28 
¡d
::
¡ršg
 
‹¡_dœ
;

29 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`G‘Te¡DœeùÜy
(&
‹¡_dœ
));

30 
¡d
::
¡ršg
 
‹¡_fe
 = 
‹¡_dœ
 + "/open_on_read.txt";

32 
FILE
* 
f
 = 
¡d
::
	`fİ’
(
‹¡_fe
.
	`c_¡r
(), "w");

33 
	`ASSERT_TRUE
(
f
 !ğ
nuÎ±r
);

34 cÚ¡ 
kFeD©a
[] = "abcdefghijklmnopqrstuvwxyz";

35 
	`åuts
(
kFeD©a
, 
f
);

36 
¡d
::
	`fşo£
(
f
);

41 cÚ¡ 
kNumFes
 = 
kMM­Lim™
 + 5;

42 
Ëv–db
::
RªdomAcûssFe
* 
fes
[
kNumFes
] = {0};

43 
i
 = 0; i < 
kNumFes
; i++) {

44 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`NewRªdomAcûssFe
(
‹¡_fe
, &
fes
[
i
]));

46 
sü©ch
;

47 
Sliû
 
»ad_»suÉ
;

48 
i
 = 0; i < 
kNumFes
; i++) {

49 
	`ASSERT_LEVELDB_OK
(
fes
[
i
]->
	`R—d
(i, 1, &
»ad_»suÉ
, &
sü©ch
));

50 
	`ASSERT_EQ
(
kFeD©a
[
i
], 
»ad_»suÉ
[0]);

52 
i
 = 0; i < 
kNumFes
; i++) {

53 
d–‘e
 
fes
[
i
];

55 
	`ASSERT_LEVELDB_OK
(
’v_
->
	`RemoveFe
(
‹¡_fe
));

56 
	}
}

60 
	$maš
(
¬gc
, ** 
¬gv
) {

62 
Ëv–db
::
EnvWšdowsTe¡
::
	`S‘FeLim™s
Öev–db::
kMM­Lim™
);

63 
‹¡šg
::
	`In™GoogËTe¡
(&
¬gc
, 
¬gv
);

64  
	`RUN_ALL_TESTS
();

65 
	}
}

	@util/env_windows_test_helper.h

5 #iâdeà
STORAGE_LEVELDB_UTIL_ENV_WINDOWS_TEST_HELPER_H_


6 
	#STORAGE_LEVELDB_UTIL_ENV_WINDOWS_TEST_HELPER_H_


	)

8 
Çme¥aû
 
	gËv–db
 {

10 
şass
 
	gEnvWšdowsTe¡
;

13 şas 
	cEnvWšdowsTe¡H–³r
 {

14 
	g´iv©e
:

15 
ä›nd
 
şass
 
CÜru±iÚTe¡
;

16 
ä›nd
 
şass
 
	gEnvWšdowsTe¡
;

20 
S‘R—dOÆyMM­Lim™
(
lim™
);

	@util/filter_policy.cc

5 
	~"Ëv–db/f‹r_pŞicy.h
"

7 
Çme¥aû
 
	gËv–db
 {

9 
	gF‹rPŞicy
::~
F‹rPŞicy
() {}

	@util/hash.cc

5 
	~"ut/hash.h
"

7 
	~<c¡ršg
>

9 
	~"ut/codšg.h
"

14 #iâdeà
FALLTHROUGH_INTENDED


15 
	#FALLTHROUGH_INTENDED
 \

17 } 0)

	)

20 
Çme¥aû
 
	gËv–db
 {

22 
ušt32_t
 
Hash
(cÚ¡ * 
d©a
, 
size_t
 
n
, ušt32_ˆ
£ed
) {

24 cÚ¡ 
ušt32_t
 
	gm
 = 0xc6a4a793;

25 cÚ¡ 
ušt32_t
 
	gr
 = 24;

26 cÚ¡ * 
	glim™
 = 
d©a
 + 
n
;

27 
ušt32_t
 
	gh
 = 
£ed
 ^ (
n
 * 
m
);

30 
	gd©a
 + 4 <ğ
lim™
) {

31 
ušt32_t
 
w
 = 
DecodeFixed32
(
d©a
);

32 
	gd©a
 += 4;

33 
	gh
 +ğ
w
;

34 
	gh
 *ğ
m
;

35 
	gh
 ^ğ(
h
 >> 16);

39 
	glim™
 - 
	gd©a
) {

41 
h
 +ğ
¡©ic_ÿ¡
<
ušt8_t
>(
d©a
[2]) << 16;

42 
	gFALLTHROUGH_INTENDED
;

44 
h
 +ğ
¡©ic_ÿ¡
<
ušt8_t
>(
d©a
[1]) << 8;

45 
	gFALLTHROUGH_INTENDED
;

47 
h
 +ğ
¡©ic_ÿ¡
<
ušt8_t
>(
d©a
[0]);

48 
	gh
 *ğ
m
;

49 
	gh
 ^ğ(
h
 >> 
r
);

52  
	gh
;

	@util/hash.h

7 #iâdeà
STORAGE_LEVELDB_UTIL_HASH_H_


8 
	#STORAGE_LEVELDB_UTIL_HASH_H_


	)

10 
	~<c¡ddef
>

11 
	~<c¡dšt
>

13 
Çme¥aû
 
	gËv–db
 {

15 
ušt32_t
 
Hash
(cÚ¡ * 
d©a
, 
size_t
 
n
, ušt32_ˆ
£ed
);

	@util/hash_test.cc

5 
	~"ut/hash.h
"

7 
	~"g‹¡/g‹¡.h
"

9 
Çme¥aû
 
	gËv–db
 {

11 
TEST
(
HASH
, 
SigÃdUnsigÃdIssue
) {

12 cÚ¡ 
ušt8_t
 
	gd©a1
[1] = {0x62};

13 cÚ¡ 
ušt8_t
 
	gd©a2
[2] = {0xc3, 0x97};

14 cÚ¡ 
ušt8_t
 
	gd©a3
[3] = {0xe2, 0x99, 0xa5};

15 cÚ¡ 
ušt8_t
 
	gd©a4
[4] = {0xe1, 0x80, 0xb9, 0x32};

16 cÚ¡ 
ušt8_t
 
	gd©a5
[48] = {

23 
ASSERT_EQ
(
Hash
(0, 0, 0xbc9f1d34), 0xbc9f1d34);

24 
ASSERT_EQ
(

25 
Hash
(
»š‹½»t_ÿ¡
<cÚ¡ *>(
d©a1
), (data1), 0xbc9f1d34),

27 
ASSERT_EQ
(

28 
Hash
(
»š‹½»t_ÿ¡
<cÚ¡ *>(
d©a2
), (data2), 0xbc9f1d34),

30 
ASSERT_EQ
(

31 
Hash
(
»š‹½»t_ÿ¡
<cÚ¡ *>(
d©a3
), (data3), 0xbc9f1d34),

33 
ASSERT_EQ
(

34 
Hash
(
»š‹½»t_ÿ¡
<cÚ¡ *>(
d©a4
), (data4), 0xbc9f1d34),

36 
ASSERT_EQ
(

37 
Hash
(
»š‹½»t_ÿ¡
<cÚ¡ *>(
d©a5
), (data5), 0x12345678),

	@util/histogram.cc

5 
	~"ut/hi¡og¿m.h
"

7 
	~<cm©h
>

8 
	~<c¡dio
>

10 
	~"pÜt/pÜt.h
"

12 
Çme¥aû
 
	gËv–db
 {

14 cÚ¡ 
	gHi¡og¿m
::
kBuck‘Lim™
[
kNumBuck‘s
] = {

171 
	gHi¡og¿m
::
CË¬
() {

172 
mš_
 = 
kBuck‘Lim™
[
kNumBuck‘s
 - 1];

173 
	gmax_
 = 0;

174 
	gnum_
 = 0;

175 
	gsum_
 = 0;

176 
	gsum_squ¬es_
 = 0;

177 
	gi
 = 0; i < 
	gkNumBuck‘s
; i++) {

178 
	gbuck‘s_
[
i
] = 0;

182 
	gHi¡og¿m
::
Add
(
v®ue
) {

184 
b
 = 0;

185 
	gb
 < 
	gkNumBuck‘s
 - 1 && 
	gkBuck‘Lim™
[
b
] <ğ
v®ue
) {

186 
b
++;

188 
	gbuck‘s_
[
b
] += 1.0;

189 ià(
	gmš_
 > 
	gv®ue
èmš_ = 
v®ue
;

190 ià(
	gmax_
 < 
	gv®ue
èmax_ = 
v®ue
;

191 
	gnum_
++;

192 
	gsum_
 +ğ
v®ue
;

193 
	gsum_squ¬es_
 +ğ(
v®ue
 * value);

196 
	gHi¡og¿m
::
M”ge
(cÚ¡ 
Hi¡og¿m
& 
Ùh”
) {

197 ià(
Ùh”
.
mš_
 < min_) min_ = other.min_;

198 ià(
	gÙh”
.
	gmax_
 > max_èmax_ = 
Ùh”
.
max_
;

199 
	gnum_
 +ğ
Ùh”
.
num_
;

200 
	gsum_
 +ğ
Ùh”
.
sum_
;

201 
	gsum_squ¬es_
 +ğ
Ùh”
.
sum_squ¬es_
;

202 
	gb
 = 0; b < 
	gkNumBuck‘s
; b++) {

203 
	gbuck‘s_
[
b
] +ğ
Ùh”
.
buck‘s_
[b];

207 
	gHi¡og¿m
::
MedŸn
(ècÚ¡ {  
P”ûÁe
(50.0); }

209 
	gHi¡og¿m
::
P”ûÁe
(
p
) const {

210 
th»shŞd
 = 
num_
 * (
p
 / 100.0);

211 
	gsum
 = 0;

212 
	gb
 = 0; b < 
	gkNumBuck‘s
; b++) {

213 
	gsum
 +ğ
buck‘s_
[
b
];

214 ià(
	gsum
 >ğ
th»shŞd
) {

216 
Ëá_pošt
 = (
b
 =ğ0è? 0 : 
kBuck‘Lim™
[b - 1];

217 
	gright_pošt
 = 
kBuck‘Lim™
[
b
];

218 
	gËá_sum
 = 
sum
 - 
buck‘s_
[
b
];

219 
	gright_sum
 = 
sum
;

220 
	gpos
 = (
th»shŞd
 - 
Ëá_sum
è/ (
right_sum
 -†eft_sum);

221 
	gr
 = 
Ëá_pošt
 + (
right_pošt
 -†eá_poštè* 
pos
;

222 ià(
	gr
 < 
	gmš_
è¸ğ
mš_
;

223 ià(
	gr
 > 
	gmax_
è¸ğ
max_
;

224  
	gr
;

227  
	gmax_
;

230 
	gHi¡og¿m
::
Av”age
() const {

231 ià(
num_
 == 0.0)  0;

232  
	gsum_
 / 
	gnum_
;

235 
	gHi¡og¿m
::
Snd¬dDevŸtiÚ
() const {

236 ià(
num_
 == 0.0)  0;

237 
	gv¬Ÿnû
 = (
sum_squ¬es_
 * 
num_
 - 
sum_
 * sum_) / (num_ *‚um_);

238  
sq¹
(
v¬Ÿnû
);

241 
	g¡d
::
¡ršg
 
Hi¡og¿m
::
ToSŒšg
() const {

242 
¡d
::
¡ršg
 
r
;

243 
	gbuf
[200];

244 
	g¡d
::
¢´štf
(
buf
, (buf), "Count: %.0f Average: %.4f StdDev: %.2f\n",

245 
num_
, 
Av”age
(), 
Snd¬dDevŸtiÚ
());

246 
	gr
.
­³nd
(
buf
);

247 
	g¡d
::
¢´štf
(
buf
, (buf), "Min: %.4f Median: %.4f Max: %.4f\n",

248 (
num_
 =ğ0.0 ? 0.0 : 
mš_
), 
MedŸn
(), 
max_
);

249 
	gr
.
­³nd
(
buf
);

250 
	gr
.
­³nd
("------------------------------------------------------\n");

251 cÚ¡ 
	gmuÉ
 = 100.0 / 
num_
;

252 
	gsum
 = 0;

253 
	gb
 = 0; b < 
	gkNumBuck‘s
; b++) {

254 ià(
	gbuck‘s_
[
b
] <= 0.0) ;

255 
	gsum
 +ğ
buck‘s_
[
b
];

256 
	g¡d
::
¢´štf
(
buf
, (buf), "[ %7.0f, %7.0f ) %7.0f %7.3f%% %7.3f%% ",

257 ((
b
 =ğ0è? 0.0 : 
kBuck‘Lim™
[b - 1]),

258 
kBuck‘Lim™
[
b
],

259 
buck‘s_
[
b
],

260 
muÉ
 * 
buck‘s_
[
b
],

261 
muÉ
 * 
sum
);

262 
	gr
.
­³nd
(
buf
);

265 
	gm¬ks
 = 
¡©ic_ÿ¡
<>(20 * (
buck‘s_
[
b
] / 
num_
) + 0.5);

266 
	gr
.
­³nd
(
m¬ks
, '#');

267 
	gr
.
push_back
('\n');

269  
	gr
;

	@util/histogram.h

5 #iâdeà
STORAGE_LEVELDB_UTIL_HISTOGRAM_H_


6 
	#STORAGE_LEVELDB_UTIL_HISTOGRAM_H_


	)

8 
	~<¡ršg
>

10 
Çme¥aû
 
	gËv–db
 {

12 şas 
	cHi¡og¿m
 {

13 
	gpublic
:

14 
Hi¡og¿m
() {}

15 ~
Hi¡og¿m
() {}

17 
CË¬
();

18 
Add
(
v®ue
);

19 
M”ge
(cÚ¡ 
Hi¡og¿m
& 
Ùh”
);

21 
	g¡d
::
¡ršg
 
ToSŒšg
() const;

23 
	g´iv©e
:

24 ’um { 
kNumBuck‘s
 = 154 };

26 
MedŸn
() const;

27 
P”ûÁe
(
p
) const;

28 
Av”age
() const;

29 
Snd¬dDevŸtiÚ
() const;

31 cÚ¡ 
	gkBuck‘Lim™
[
kNumBuck‘s
];

33 
	gmš_
;

34 
	gmax_
;

35 
	gnum_
;

36 
	gsum_
;

37 
	gsum_squ¬es_
;

39 
	gbuck‘s_
[
kNumBuck‘s
];

	@util/logging.cc

5 
	~"ut/loggšg.h
"

7 
	~<c¡d¬g
>

8 
	~<c¡dio
>

9 
	~<c¡dlib
>

10 
	~<lim™s
>

12 
	~"Ëv–db/’v.h
"

13 
	~"Ëv–db/¦iû.h
"

15 
Çme¥aû
 
	gËv–db
 {

17 
Aµ’dNumb”To
(
¡d
::
¡ršg
* 
¡r
, 
ušt64_t
 
num
) {

18 
	gbuf
[30];

19 
	g¡d
::
¢´štf
(
buf
, (buf), "%Îu", 
¡©ic_ÿ¡
<>(
num
));

20 
	g¡r
->
­³nd
(
buf
);

23 
Aµ’dEsÿ³dSŒšgTo
(
¡d
::
¡ršg
* 
¡r
, cÚ¡ 
Sliû
& 
v®ue
) {

24 
size_t
 
	gi
 = 0; i < 
	gv®ue
.
size
(); i++) {

25 
	gc
 = 
v®ue
[
i
];

26 ià(
	gc
 >ğ' ' && 
c
 <= '~') {

27 
¡r
->
push_back
(
c
);

29 
	gbuf
[10];

30 
	g¡d
::
¢´štf
(
buf
, (buf), "\\x%02x",

31 
¡©ic_ÿ¡
<>(
c
) & 0xff);

32 
	g¡r
->
­³nd
(
buf
);

37 
	g¡d
::
¡ršg
 
Numb”ToSŒšg
(
ušt64_t
 
num
) {

38 
¡d
::
¡ršg
 
r
;

39 
Aµ’dNumb”To
(&
r
, 
num
);

40  
	gr
;

43 
	g¡d
::
¡ršg
 
Esÿ³SŒšg
(cÚ¡ 
Sliû
& 
v®ue
) {

44 
¡d
::
¡ršg
 
r
;

45 
Aµ’dEsÿ³dSŒšgTo
(&
r
, 
v®ue
);

46  
	gr
;

49 
boŞ
 
CÚsumeDecim®Numb”
(
Sliû
* 
š
, 
ušt64_t
* 
v®
) {

51 
cÚ¡ex´
 cÚ¡ 
ušt64_t
 
	gkMaxUšt64
 = 
¡d
::
num”ic_lim™s
<ušt64_t>::
max
();

52 
cÚ¡ex´
 cÚ¡ 
	gkLa¡Dig™OfMaxUšt64
 =

53 '0' + 
¡©ic_ÿ¡
<>(
kMaxUšt64
 % 10);

55 
ušt64_t
 
	gv®ue
 = 0;

58 cÚ¡ 
ušt8_t
* 
	g¡¬t
 = 
»š‹½»t_ÿ¡
<cÚ¡ ušt8_t*>(
š
->
d©a
());

60 cÚ¡ 
ušt8_t
* 
	g’d
 = 
¡¬t
 + 
š
->
size
();

61 cÚ¡ 
ušt8_t
* 
	gcu¼’t
 = 
¡¬t
;

62 ; 
	gcu¼’t
 !ğ
’d
; ++current) {

63 cÚ¡ 
ušt8_t
 
	gch
 = *
cu¼’t
;

64 ià(
	gch
 < '0' || ch > '9') ;

68 ià(
	gv®ue
 > 
	gkMaxUšt64
 / 10 ||

69 (
	gv®ue
 =ğ
kMaxUšt64
 / 10 && 
ch
 > 
kLa¡Dig™OfMaxUšt64
)) {

70  
çl£
;

73 
	gv®ue
 = (
v®ue
 * 10è+ (
ch
 - '0');

76 *
	gv®
 = 
v®ue
;

77 cÚ¡ 
size_t
 
	gdig™s_cÚsumed
 = 
cu¼’t
 - 
¡¬t
;

78 
	gš
->
»move_´efix
(
dig™s_cÚsumed
);

79  
	gdig™s_cÚsumed
 != 0;

	@util/logging.h

8 #iâdeà
STORAGE_LEVELDB_UTIL_LOGGING_H_


9 
	#STORAGE_LEVELDB_UTIL_LOGGING_H_


	)

11 
	~<c¡dšt
>

12 
	~<c¡dio
>

13 
	~<¡ršg
>

15 
	~"pÜt/pÜt.h
"

17 
Çme¥aû
 
	gËv–db
 {

19 
şass
 
	gSliû
;

20 
şass
 
	gWr™abËFe
;

23 
Aµ’dNumb”To
(
¡d
::
¡ršg
* 
¡r
, 
ušt64_t
 
num
);

27 
Aµ’dEsÿ³dSŒšgTo
(
¡d
::
¡ršg
* 
¡r
, cÚ¡ 
Sliû
& 
v®ue
);

30 
	g¡d
::
¡ršg
 
Numb”ToSŒšg
(
ušt64_t
 
num
);

34 
	g¡d
::
¡ršg
 
Esÿ³SŒšg
(cÚ¡ 
Sliû
& 
v®ue
);

40 
boŞ
 
CÚsumeDecim®Numb”
(
Sliû
* 
š
, 
ušt64_t
* 
v®
);

	@util/logging_test.cc

5 
	~"ut/loggšg.h
"

7 
	~<lim™s
>

8 
	~<¡ršg
>

10 
	~"g‹¡/g‹¡.h
"

11 
	~"Ëv–db/¦iû.h
"

13 
Çme¥aû
 
	gËv–db
 {

15 
TEST
(
Loggšg
, 
Numb”ToSŒšg
) {

16 
ASSERT_EQ
("0", 
Numb”ToSŒšg
(0));

17 
ASSERT_EQ
("1", 
Numb”ToSŒšg
(1));

18 
ASSERT_EQ
("9", 
Numb”ToSŒšg
(9));

20 
ASSERT_EQ
("10", 
Numb”ToSŒšg
(10));

21 
ASSERT_EQ
("11", 
Numb”ToSŒšg
(11));

22 
ASSERT_EQ
("19", 
Numb”ToSŒšg
(19));

23 
ASSERT_EQ
("99", 
Numb”ToSŒšg
(99));

25 
ASSERT_EQ
("100", 
Numb”ToSŒšg
(100));

26 
ASSERT_EQ
("109", 
Numb”ToSŒšg
(109));

27 
ASSERT_EQ
("190", 
Numb”ToSŒšg
(190));

28 
ASSERT_EQ
("123", 
Numb”ToSŒšg
(123));

29 
ASSERT_EQ
("12345678", 
Numb”ToSŒšg
(12345678));

31 
¡©ic_as£¹
(
¡d
::
num”ic_lim™s
<
ušt64_t
>::
max
() == 18446744073709551615U,

33 
ASSERT_EQ
("18446744073709551000", 
Numb”ToSŒšg
(18446744073709551000U));

34 
ASSERT_EQ
("18446744073709551600", 
Numb”ToSŒšg
(18446744073709551600U));

35 
ASSERT_EQ
("18446744073709551610", 
Numb”ToSŒšg
(18446744073709551610U));

36 
ASSERT_EQ
("18446744073709551614", 
Numb”ToSŒšg
(18446744073709551614U));

37 
ASSERT_EQ
("18446744073709551615", 
Numb”ToSŒšg
(18446744073709551615U));

40 
CÚsumeDecim®Numb”RoundŒTe¡
(
ušt64_t
 
numb”
,

41 cÚ¡ 
¡d
::
¡ršg
& 
·ddšg
 = "") {

42 
¡d
::
¡ršg
 
decim®_numb”
 = 
Numb”ToSŒšg
(
numb”
);

43 
	g¡d
::
¡ršg
 
šput_¡ršg
 = 
decim®_numb”
 + 
·ddšg
;

44 
Sliû
 
šput
(
šput_¡ršg
);

45 
Sliû
 
	gouut
 = 
šput
;

46 
ušt64_t
 
	g»suÉ
;

47 
ASSERT_TRUE
(
CÚsumeDecim®Numb”
(&
ouut
, &
»suÉ
));

48 
ASSERT_EQ
(
numb”
, 
»suÉ
);

49 
ASSERT_EQ
(
decim®_numb”
.
size
(), 
ouut
.
d©a
(è- 
šput
.data());

50 
ASSERT_EQ
(
·ddšg
.
size
(), 
ouut
.size());

53 
TEST
(
Loggšg
, 
CÚsumeDecim®Numb”RoundŒ
) {

54 
CÚsumeDecim®Numb”RoundŒTe¡
(0);

55 
CÚsumeDecim®Numb”RoundŒTe¡
(1);

56 
CÚsumeDecim®Numb”RoundŒTe¡
(9);

58 
CÚsumeDecim®Numb”RoundŒTe¡
(10);

59 
CÚsumeDecim®Numb”RoundŒTe¡
(11);

60 
CÚsumeDecim®Numb”RoundŒTe¡
(19);

61 
CÚsumeDecim®Numb”RoundŒTe¡
(99);

63 
CÚsumeDecim®Numb”RoundŒTe¡
(100);

64 
CÚsumeDecim®Numb”RoundŒTe¡
(109);

65 
CÚsumeDecim®Numb”RoundŒTe¡
(190);

66 
CÚsumeDecim®Numb”RoundŒTe¡
(123);

67 
ASSERT_EQ
("12345678", 
Numb”ToSŒšg
(12345678));

69 
ušt64_t
 
	gi
 = 0; i < 100; ++i) {

70 
ušt64_t
 
	gÏrge_numb”
 = 
¡d
::
num”ic_lim™s
<ušt64_t>::
max
(è- 
i
;

71 
CÚsumeDecim®Numb”RoundŒTe¡
(
Ïrge_numb”
);

75 
TEST
(
Loggšg
, 
CÚsumeDecim®Numb”RoundŒW™hPaddšg
) {

76 
CÚsumeDecim®Numb”RoundŒTe¡
(0, " ");

77 
CÚsumeDecim®Numb”RoundŒTe¡
(1, "abc");

78 
CÚsumeDecim®Numb”RoundŒTe¡
(9, "x");

80 
CÚsumeDecim®Numb”RoundŒTe¡
(10, "_");

81 
CÚsumeDecim®Numb”RoundŒTe¡
(11, 
¡d
::
¡ršg
("\0\0\0", 3));

82 
CÚsumeDecim®Numb”RoundŒTe¡
(19, "abc");

83 
CÚsumeDecim®Numb”RoundŒTe¡
(99, "padding");

85 
CÚsumeDecim®Numb”RoundŒTe¡
(100, " ");

87 
ušt64_t
 
	gi
 = 0; i < 100; ++i) {

88 
ušt64_t
 
	gÏrge_numb”
 = 
¡d
::
num”ic_lim™s
<ušt64_t>::
max
(è- 
i
;

89 
CÚsumeDecim®Numb”RoundŒTe¡
(
Ïrge_numb”
, "pad");

93 
CÚsumeDecim®Numb”Ov”æowTe¡
(cÚ¡ 
¡d
::
¡ršg
& 
šput_¡ršg
) {

94 
Sliû
 
šput
(
šput_¡ršg
);

95 
Sliû
 
	gouut
 = 
šput
;

96 
ušt64_t
 
	g»suÉ
;

97 
ASSERT_EQ
(
çl£
, 
CÚsumeDecim®Numb”
(&
ouut
, &
»suÉ
));

100 
TEST
(
Loggšg
, 
CÚsumeDecim®Numb”Ov”æow
) {

101 
¡©ic_as£¹
(
¡d
::
num”ic_lim™s
<
ušt64_t
>::
max
() == 18446744073709551615U,

103 
CÚsumeDecim®Numb”Ov”æowTe¡
("18446744073709551616");

104 
CÚsumeDecim®Numb”Ov”æowTe¡
("18446744073709551617");

105 
CÚsumeDecim®Numb”Ov”æowTe¡
("18446744073709551618");

106 
CÚsumeDecim®Numb”Ov”æowTe¡
("18446744073709551619");

107 
CÚsumeDecim®Numb”Ov”æowTe¡
("18446744073709551620");

108 
CÚsumeDecim®Numb”Ov”æowTe¡
("18446744073709551621");

109 
CÚsumeDecim®Numb”Ov”æowTe¡
("18446744073709551622");

110 
CÚsumeDecim®Numb”Ov”æowTe¡
("18446744073709551623");

111 
CÚsumeDecim®Numb”Ov”æowTe¡
("18446744073709551624");

112 
CÚsumeDecim®Numb”Ov”æowTe¡
("18446744073709551625");

113 
CÚsumeDecim®Numb”Ov”æowTe¡
("18446744073709551626");

115 
CÚsumeDecim®Numb”Ov”æowTe¡
("18446744073709551700");

117 
CÚsumeDecim®Numb”Ov”æowTe¡
("99999999999999999999");

120 
CÚsumeDecim®Numb”NoDig™sTe¡
(cÚ¡ 
¡d
::
¡ršg
& 
šput_¡ršg
) {

121 
Sliû
 
šput
(
šput_¡ršg
);

122 
Sliû
 
	gouut
 = 
šput
;

123 
ušt64_t
 
	g»suÉ
;

124 
ASSERT_EQ
(
çl£
, 
CÚsumeDecim®Numb”
(&
ouut
, &
»suÉ
));

125 
ASSERT_EQ
(
šput
.
d©a
(), 
ouut
.data());

126 
ASSERT_EQ
(
šput
.
size
(), 
ouut
.size());

129 
TEST
(
Loggšg
, 
CÚsumeDecim®Numb”NoDig™s
) {

130 
CÚsumeDecim®Numb”NoDig™sTe¡
("");

131 
CÚsumeDecim®Numb”NoDig™sTe¡
(" ");

132 
CÚsumeDecim®Numb”NoDig™sTe¡
("a");

133 
CÚsumeDecim®Numb”NoDig™sTe¡
(" 123");

134 
CÚsumeDecim®Numb”NoDig™sTe¡
("a123");

135 
CÚsumeDecim®Numb”NoDig™sTe¡
(
¡d
::
¡ršg
("\000123", 4));

136 
CÚsumeDecim®Numb”NoDig™sTe¡
(
¡d
::
¡ršg
("\177123", 4));

137 
CÚsumeDecim®Numb”NoDig™sTe¡
(
¡d
::
¡ršg
("\377123", 4));

	@util/mutexlock.h

5 #iâdeà
STORAGE_LEVELDB_UTIL_MUTEXLOCK_H_


6 
	#STORAGE_LEVELDB_UTIL_MUTEXLOCK_H_


	)

8 
	~"pÜt/pÜt.h
"

9 
	~"pÜt/th»ad_ªnÙ©iÚs.h
"

11 
Çme¥aû
 
	gËv–db
 {

23 şas 
	cSCOPED_LOCKABLE
 
	gMu‹xLock
 {

24 
	gpublic
:

25 
ex¶ic™
 
Mu‹xLock
(
pÜt
::
Mu‹x
* 
mu
è
EXCLUSIVE_LOCK_FUNCTION
(muè: 
mu_
(mu) {

26 
this
->
mu_
->
Lock
();

28 ~
Mu‹xLock
(è
UNLOCK_FUNCTION
(è{ 
	gthis
->
	gmu_
->
UÆock
(); }

30 
Mu‹xLock
(cÚ¡ Mu‹xLock&èğ
d–‘e
;

31 
	gMu‹xLock
& 
	gİ”©Ü
=(cÚ¡ 
Mu‹xLock
&èğ
d–‘e
;

33 
	g´iv©e
:

34 
pÜt
::
Mu‹x
* cÚ¡ 
mu_
;

	@util/no_destructor.h

5 #iâdeà
STORAGE_LEVELDB_UTIL_NO_DESTRUCTOR_H_


6 
	#STORAGE_LEVELDB_UTIL_NO_DESTRUCTOR_H_


	)

8 
	~<ty³_Œa™s
>

9 
	~<ut™y
>

11 
Çme¥aû
 
	gËv–db
 {

16 
	g‹m¶©e
 <
ty³Çme
 
	gIn¡ªûTy³
>

17 şas 
	cNoDe¡ruùÜ
 {

18 
	gpublic
:

19 
‹m¶©e
 <
ty³Çme
... 
CÚ¡ruùÜArgTy³s
>

20 
ex¶ic™
 
NoDe¡ruùÜ
(
CÚ¡ruùÜArgTy³s
&&... 
cÚ¡ruùÜ_¬gs
) {

21 
¡©ic_as£¹
((
š¡ªû_¡Üage_
è>ğ(
In¡ªûTy³
),

23 
¡©ic_as£¹
(

24 
®ignof
(
deşty³
(
š¡ªû_¡Üage_
)è>ğ®ignof(
In¡ªûTy³
),

26 
Ãw
 (&
š¡ªû_¡Üage_
)

27 
In¡ªûTy³
(
¡d
::
fÜw¬d
<
CÚ¡ruùÜArgTy³s
>(
cÚ¡ruùÜ_¬gs
)...);

30 ~
NoDe¡ruùÜ
() = ;

32 
NoDe¡ruùÜ
(cÚ¡ NoDe¡ruùÜ&èğ
d–‘e
;

33 
	gNoDe¡ruùÜ
& 
	gİ”©Ü
=(cÚ¡ 
NoDe¡ruùÜ
&èğ
d–‘e
;

35 
In¡ªûTy³
* 
g‘
() {

36  
	g»š‹½»t_ÿ¡
<
	gIn¡ªûTy³
*>(&
	gš¡ªû_¡Üage_
);

39 
	g´iv©e
:

40 
ty³Çme
 
¡d
::
®igÃd_¡Üage
<(
In¡ªûTy³
),

41 
®ignof
(
In¡ªûTy³
)>::
ty³
 
š¡ªû_¡Üage_
;

	@util/no_destructor_test.cc

5 
	~"ut/no_de¡ruùÜ.h
"

7 
	~<c¡dšt
>

8 
	~<c¡dlib
>

9 
	~<ut™y
>

11 
	~"g‹¡/g‹¡.h
"

13 
Çme¥aû
 
	gËv–db
 {

15 
	gÇme¥aû
 {

17 
	sDoNÙDe¡ruù
 {

18 
	gpublic
:

19 
DoNÙDe¡ruù
(
ušt32_t
 
a
, 
ušt64_t
 
b
) :‡(a), b(b) {}

20 ~
DoNÙDe¡ruù
(è{ 
	g¡d
::
abÜt
(); }

23 
ušt32_t
 
	ga
;

24 
ušt64_t
 
	gb
;

27 
cÚ¡ex´
 cÚ¡ 
ušt32_t
 
	gkGŞd’A
 = 0xdeadbeef;

28 
cÚ¡ex´
 cÚ¡ 
ušt64_t
 
	gkGŞd’B
 = 0xaabbccddeeffaabb;

32 
TEST
(
NoDe¡ruùÜTe¡
, 
SckIn¡ªû
) {

33 
	gNoDe¡ruùÜ
<
	gDoNÙDe¡ruù
> 
š¡ªû
(
kGŞd’A
, 
kGŞd’B
);

34 
ASSERT_EQ
(
kGŞd’A
, 
š¡ªû
.
g‘
()->
a
);

35 
ASSERT_EQ
(
kGŞd’B
, 
š¡ªû
.
g‘
()->
b
);

38 
TEST
(
NoDe¡ruùÜTe¡
, 
SticIn¡ªû
) {

39 
	gNoDe¡ruùÜ
<
	gDoNÙDe¡ruù
> 
š¡ªû
(
kGŞd’A
, 
kGŞd’B
);

40 
ASSERT_EQ
(
kGŞd’A
, 
š¡ªû
.
g‘
()->
a
);

41 
ASSERT_EQ
(
kGŞd’B
, 
š¡ªû
.
g‘
()->
b
);

	@util/options.cc

5 
	~"Ëv–db/İtiÚs.h
"

7 
	~"Ëv–db/com·¿tÜ.h
"

8 
	~"Ëv–db/’v.h
"

10 
Çme¥aû
 
	gËv–db
 {

12 
	gO±iÚs
::
O±iÚs
(è: 
com·¿tÜ
(
By‹wi£Com·¿tÜ
()), 
’v
(
Env
::
DeçuÉ
()) {}

	@util/posix_logger.h

8 #iâdeà
STORAGE_LEVELDB_UTIL_POSIX_LOGGER_H_


9 
	#STORAGE_LEVELDB_UTIL_POSIX_LOGGER_H_


	)

11 
	~<sys/time.h
>

13 
	~<ÿs£¹
>

14 
	~<c¡d¬g
>

15 
	~<c¡dio
>

16 
	~<ùime
>

17 
	~<s¡»am
>

18 
	~<th»ad
>

20 
	~"Ëv–db/’v.h
"

22 
Çme¥aû
 
	gËv–db
 {

24 şas 
	cPosixLogg”
 
	gfš®
 : 
public
 
Logg”
 {

25 
public
:

29 
ex¶ic™
 
PosixLogg”
(
¡d
::
FILE
* 
å
è: 
å_
(åè{ 
as£¹
(å !ğ
nuÎ±r
); }

31 ~
PosixLogg”
(è
	gov”ride
 { 
	g¡d
::
fşo£
(
å_
); }

33 
Logv
(cÚ¡ * 
fÜm©
, 
¡d
::
va_li¡
 
¬gum’ts
è
ov”ride
 {

35 ::
timev®
 
now_timev®
;

36 ::
g‘timeofday
(&
now_timev®
, 
nuÎ±r
);

37 cÚ¡ 
	g¡d
::
time_t
 
now_£cÚds
 = 
now_timev®
.
tv_£c
;

38 
	g¡d
::
tm
 
now_compÚ’ts
;

39 ::
loÿÉime_r
(&
now_£cÚds
, &
now_compÚ’ts
);

42 
cÚ¡ex´
 cÚ¡ 
	gkMaxTh»adIdSize
 = 32;

43 
	g¡d
::
o¡ršg¡»am
 
th»ad_¡»am
;

44 
	gth»ad_¡»am
 << 
	g¡d
::
this_th»ad
::
g‘_id
();

45 
	g¡d
::
¡ršg
 
th»ad_id
 = 
th»ad_¡»am
.
¡r
();

46 ià(
	gth»ad_id
.
size
(è> 
	gkMaxTh»adIdSize
) {

47 
	gth»ad_id
.
»size
(
kMaxTh»adIdSize
);

52 
cÚ¡ex´
 cÚ¡ 
	gkSckBufãrSize
 = 512;

53 
	g¡ack_bufãr
[
kSckBufãrSize
];

54 
¡©ic_as£¹
((
¡ack_bufãr
è=ğ
¡©ic_ÿ¡
<
size_t
>(
kSckBufãrSize
),

57 
	gdyÇmic_bufãr_size
 = 0;

58 
	g™”©iÚ
 = 0; iteration < 2; ++iteration) {

59 cÚ¡ 
	gbufãr_size
 =

60 (
™”©iÚ
 =ğ0è? 
kSckBufãrSize
 : 
dyÇmic_bufãr_size
;

61 * cÚ¡ 
	gbufãr
 =

62 (
™”©iÚ
 =ğ0è? 
¡ack_bufãr
 : 
Ãw
 [
dyÇmic_bufãr_size
];

65 
	gbufãr_off£t
 = 
¡d
::
¢´štf
(

66 
bufãr
, 
bufãr_size
, "%04d/%02d/%02d-%02d:%02d:%02d.%06d %s ",

67 
now_compÚ’ts
.
tm_y—r
 + 1900,‚ow_compÚ’ts.
tm_mÚ
 + 1,

68 
now_compÚ’ts
.
tm_mday
,‚ow_compÚ’ts.
tm_hour
,‚ow_compÚ’ts.
tm_mš
,

69 
now_compÚ’ts
.
tm_£c
, 
¡©ic_ÿ¡
<>(
now_timev®
.
tv_u£c
),

70 
th»ad_id
.
c_¡r
());

75 
as£¹
(
bufãr_off£t
 <ğ28 + 
kMaxTh»adIdSize
);

76 
¡©ic_as£¹
(28 + 
kMaxTh»adIdSize
 < 
kSckBufãrSize
,

78 
as£¹
(
bufãr_off£t
 < 
bufãr_size
);

81 
	g¡d
::
va_li¡
 
¬gum’ts_cİy
;

82 
va_cİy
(
¬gum’ts_cİy
, 
¬gum’ts
);

83 
	gbufãr_off£t
 +=

84 
¡d
::
v¢´štf
(
bufãr
 + 
bufãr_off£t
, 
bufãr_size
 - buffer_offset,

85 
fÜm©
, 
¬gum’ts_cİy
);

86 
va_’d
(
¬gum’ts_cİy
);

90 ià(
	gbufãr_off£t
 >ğ
bufãr_size
 - 1) {

92 ià(
™”©iÚ
 == 0) {

96 
dyÇmic_bufãr_size
 = 
bufãr_off£t
 + 2;

103 
as£¹
(
çl£
);

104 
	gbufãr_off£t
 = 
bufãr_size
 - 1;

108 ià(
	gbufãr
[
bufãr_off£t
 - 1] != '\n') {

109 
bufãr
[
bufãr_off£t
] = '\n';

110 ++
	gbufãr_off£t
;

113 
as£¹
(
bufãr_off£t
 <ğ
bufãr_size
);

114 
	g¡d
::
fwr™e
(
bufãr
, 1, 
bufãr_off£t
, 
å_
);

115 
	g¡d
::
fæush
(
å_
);

117 ià(
	g™”©iÚ
 != 0) {

118 
d–‘e
[] 
bufãr
;

124 
	g´iv©e
:

125 
¡d
::
FILE
* cÚ¡ 
å_
;

	@util/random.h

5 #iâdeà
STORAGE_LEVELDB_UTIL_RANDOM_H_


6 
	#STORAGE_LEVELDB_UTIL_RANDOM_H_


	)

8 
	~<c¡dšt
>

10 
Çme¥aû
 
	gËv–db
 {

15 şas 
	cRªdom
 {

16 
	g´iv©e
:

17 
ušt32_t
 
£ed_
;

19 
	gpublic
:

20 
ex¶ic™
 
Rªdom
(
ušt32_t
 
s
è: 
£ed_
(s & 0x7fffffffu) {

22 ià(
£ed_
 == 0 || seed_ == 2147483647L) {

23 
£ed_
 = 1;

26 
ušt32_t
 
Next
() {

27 cÚ¡ 
ušt32_t
 
	gM
 = 2147483647L;

28 cÚ¡ 
ušt64_t
 
	gA
 = 16807;

35 
ušt64_t
 
	g´oduù
 = 
£ed_
 * 
A
;

38 
	g£ed_
 = 
¡©ic_ÿ¡
<
ušt32_t
>((
´oduù
 >> 31è+ (´oduù & 
M
));

42 ià(
	g£ed_
 > 
	gM
) {

43 
	g£ed_
 -ğ
M
;

45  
	g£ed_
;

49 
ušt32_t
 
UnifÜm
(
n
è{  
Next
(è% 
	gn
; }

53 
boŞ
 
OÃIn
(
n
è{  (
Next
(è% 
	gn
) == 0; }

58 
ušt32_t
 
Skewed
(
max_log
è{  
UnifÜm
(1 << Uniform(max_log + 1)); }

	@util/status.cc

5 
	~"Ëv–db/¡©us.h
"

7 
	~<c¡dio
>

9 
	~"pÜt/pÜt.h
"

11 
Çme¥aû
 
	gËv–db
 {

13 cÚ¡ * 
	gStus
::
CİyS‹
(cÚ¡ * 
¡©e
) {

14 
ušt32_t
 
size
;

15 
	g¡d
::
memıy
(&
size
, 
¡©e
, (size));

16 * 
	g»suÉ
 = 
Ãw
 [
size
 + 5];

17 
	g¡d
::
memıy
(
»suÉ
, 
¡©e
, 
size
 + 5);

18  
	g»suÉ
;

21 
	gStus
::
Stus
(
Code
 
code
, cÚ¡ 
Sliû
& 
msg
, cÚ¡ Sliû& 
msg2
) {

22 
as£¹
(
code
 !ğ
kOk
);

23 cÚ¡ 
ušt32_t
 
	gËn1
 = 
¡©ic_ÿ¡
<ušt32_t>(
msg
.
size
());

24 cÚ¡ 
ušt32_t
 
	gËn2
 = 
¡©ic_ÿ¡
<ušt32_t>(
msg2
.
size
());

25 cÚ¡ 
ušt32_t
 
	gsize
 = 
Ën1
 + (
Ën2
 ? (2 +†en2) : 0);

26 * 
	g»suÉ
 = 
Ãw
 [
size
 + 5];

27 
	g¡d
::
memıy
(
»suÉ
, &
size
, (size));

28 
	g»suÉ
[4] = 
¡©ic_ÿ¡
<>(
code
);

29 
	g¡d
::
memıy
(
»suÉ
 + 5, 
msg
.
d©a
(), 
Ën1
);

30 ià(
	gËn2
) {

31 
	g»suÉ
[5 + 
Ën1
] = ':';

32 
	g»suÉ
[6 + 
Ën1
] = ' ';

33 
	g¡d
::
memıy
(
»suÉ
 + 7 + 
Ën1
, 
msg2
.
d©a
(), 
Ën2
);

35 
	g¡©e_
 = 
»suÉ
;

38 
	g¡d
::
¡ršg
 
Stus
::
ToSŒšg
() const {

39 ià(
¡©e_
 =ğ
nuÎ±r
) {

42 
	gtmp
[30];

43 cÚ¡ * 
	gty³
;

44 
code
()) {

45 
	gkOk
:

46 
ty³
 = "OK";

48 
	gkNÙFound
:

49 
ty³
 = "NotFound: ";

51 
	gkCÜru±iÚ
:

52 
ty³
 = "Corruption: ";

54 
	gkNÙSuµÜ‹d
:

55 
ty³
 = "Not implemented: ";

57 
	gkInv®idArgum’t
:

58 
ty³
 = "Invalid‡rgument: ";

60 
	gkIOE¼Ü
:

61 
ty³
 = "IOƒrror: ";

64 
¡d
::
¢´štf
(
tmp
, (tmp),

65 "UnknowÀcode(%d): ", 
¡©ic_ÿ¡
<>(
code
()));

66 
	gty³
 = 
tmp
;

69 
	g¡d
::
¡ršg
 
»suÉ
(
ty³
);

70 
ušt32_t
 
	gËngth
;

71 
	g¡d
::
memıy
(&
Ëngth
, 
¡©e_
, (length));

72 
	g»suÉ
.
­³nd
(
¡©e_
 + 5, 
Ëngth
);

73  
	g»suÉ
;

	@util/status_test.cc

5 
	~"Ëv–db/¡©us.h
"

7 
	~<ut™y
>

9 
	~"g‹¡/g‹¡.h
"

10 
	~"Ëv–db/¦iû.h
"

12 
Çme¥aû
 
	gËv–db
 {

14 
TEST
(
Stus
, 
MoveCÚ¡ruùÜ
) {

16 
Stus
 
	gok
 = Stus::
OK
();

17 
Stus
 
	gok2
 = 
¡d
::
move
(
ok
);

19 
ASSERT_TRUE
(
ok2
.
ok
());

23 
Stus
 
	g¡©us
 = Stus::
NÙFound
("custom NotFound status message");

24 
Stus
 
	g¡©us2
 = 
¡d
::
move
(
¡©us
);

26 
ASSERT_TRUE
(
¡©us2
.
IsNÙFound
());

27 
ASSERT_EQ
("NÙFound: cu¡om NÙFound stu mes§ge", 
¡©us2
.
ToSŒšg
());

31 
Stus
 
	g£lf_moved
 = Stus::
IOE¼Ü
("custom IOError status message");

34 
	gStus
& 
	g£lf_moved_»ã»nû
 = 
£lf_moved
;

35 
	g£lf_moved_»ã»nû
 = 
¡d
::
move
(
£lf_moved
);

	@util/testutil.cc

5 
	~"ut/‹¡ut.h
"

7 
	~<¡ršg
>

9 
	~"ut/¿ndom.h
"

11 
Çme¥aû
 
	gËv–db
 {

12 
Çme¥aû
 
	g‹¡
 {

14 
Sliû
 
RªdomSŒšg
(
Rªdom
* 
ºd
, 
Ën
, 
¡d
::
¡ršg
* 
d¡
) {

15 
d¡
->
»size
(
Ën
);

16 
	gi
 = 0; i < 
	gËn
; i++) {

17 (*
	gd¡
)[
i
] = 
¡©ic_ÿ¡
<>(' ' + 
ºd
->
UnifÜm
(95));

19  
Sliû
(*
d¡
);

22 
	g¡d
::
¡ršg
 
RªdomKey
(
Rªdom
* 
ºd
, 
Ën
) {

25 cÚ¡ 
	gkTe¡Ch¬s
[] = {'\0', '\1', 'a', 'b', 'c',

27 
	g¡d
::
¡ršg
 
»suÉ
;

28 
	gi
 = 0; i < 
	gËn
; i++) {

29 
	g»suÉ
 +ğ
kTe¡Ch¬s
[
ºd
->
UnifÜm
((kTestChars))];

31  
	g»suÉ
;

34 
Sliû
 
Com´essibËSŒšg
(
Rªdom
* 
ºd
, 
com´es£d_äaùiÚ
, 
size_t
 
Ën
,

35 
¡d
::
¡ršg
* 
d¡
) {

36 
¿w
 = 
¡©ic_ÿ¡
<>(
Ën
 * 
com´es£d_äaùiÚ
);

37 ià(
	g¿w
 < 1)„aw = 1;

38 
	g¡d
::
¡ršg
 
¿w_d©a
;

39 
RªdomSŒšg
(
ºd
, 
¿w
, &
¿w_d©a
);

42 
	gd¡
->
ş—r
();

43 
	gd¡
->
size
(è< 
	gËn
) {

44 
	gd¡
->
­³nd
(
¿w_d©a
);

46 
	gd¡
->
»size
(
Ën
);

47  
Sliû
(*
d¡
);

	@util/testutil.h

5 #iâdeà
STORAGE_LEVELDB_UTIL_TESTUTIL_H_


6 
	#STORAGE_LEVELDB_UTIL_TESTUTIL_H_


	)

8 
	~"gmock/gmock.h
"

9 
	~"g‹¡/g‹¡.h
"

10 
	~"h–³rs/mem’v/mem’v.h
"

11 
	~"Ëv–db/’v.h
"

12 
	~"Ëv–db/¦iû.h
"

13 
	~"ut/¿ndom.h
"

15 
Çme¥aû
 
	gËv–db
 {

16 
Çme¥aû
 
	g‹¡
 {

18 
MATCHER
(
IsOK
, ""è{  
	g¬g
.
ok
(); }

22 
	#EXPECT_LEVELDB_OK
(
ex´essiÚ
) \

23 
	`EXPECT_THAT
(
ex´essiÚ
, 
Ëv–db
::
‹¡
::
	`IsOK
())

	)

24 
	#ASSERT_LEVELDB_OK
(
ex´essiÚ
) \

25 
	`ASSERT_THAT
(
ex´essiÚ
, 
Ëv–db
::
‹¡
::
	`IsOK
())

	)

28 
šlše
 
RªdomS“d
() {

29  
	g‹¡šg
::
Un™Te¡
::
G‘In¡ªû
()->
¿ndom_£ed
();

34 
Sliû
 
RªdomSŒšg
(
Rªdom
* 
ºd
, 
Ën
, 
¡d
::
¡ršg
* 
d¡
);

38 
	g¡d
::
¡ršg
 
RªdomKey
(
Rªdom
* 
ºd
, 
Ën
);

43 
Sliû
 
Com´essibËSŒšg
(
Rªdom
* 
ºd
, 
com´es£d_äaùiÚ
, 
size_t
 
Ën
,

44 
¡d
::
¡ršg
* 
d¡
);

47 şas 
	cE¼ÜEnv
 : 
public
 
EnvW¿µ”
 {

48 
public
:

49 
boŞ
 
wr™abË_fe_”rÜ_
;

50 
	gnum_wr™abË_fe_”rÜs_
;

52 
E¼ÜEnv
()

53 : 
EnvW¿µ”
(
NewMemEnv
(
Env
::
DeçuÉ
())),

54 
wr™abË_fe_”rÜ_
(
çl£
),

55 
num_wr™abË_fe_”rÜs_
(0) {}

56 ~
E¼ÜEnv
(è
	gov”ride
 { 
d–‘e
 
rg‘
(); }

58 
Stus
 
NewWr™abËFe
(cÚ¡ 
¡d
::
¡ršg
& 
âame
,

59 
Wr™abËFe
** 
»suÉ
è
	gov”ride
 {

60 ià(
	gwr™abË_fe_”rÜ_
) {

61 ++
	gnum_wr™abË_fe_”rÜs_
;

62 *
	g»suÉ
 = 
nuÎ±r
;

63  
	gStus
::
IOE¼Ü
(
âame
, "fakeƒrror");

65  
rg‘
()->
NewWr™abËFe
(
âame
, 
»suÉ
);

68 
Stus
 
NewAµ’dabËFe
(cÚ¡ 
¡d
::
¡ršg
& 
âame
,

69 
Wr™abËFe
** 
»suÉ
è
	gov”ride
 {

70 ià(
	gwr™abË_fe_”rÜ_
) {

71 ++
	gnum_wr™abË_fe_”rÜs_
;

72 *
	g»suÉ
 = 
nuÎ±r
;

73  
	gStus
::
IOE¼Ü
(
âame
, "fakeƒrror");

75  
rg‘
()->
NewAµ’dabËFe
(
âame
, 
»suÉ
);

	@util/windows_logger.h

7 #iâdeà
STORAGE_LEVELDB_UTIL_WINDOWS_LOGGER_H_


8 
	#STORAGE_LEVELDB_UTIL_WINDOWS_LOGGER_H_


	)

10 
	~<ÿs£¹
>

11 
	~<c¡d¬g
>

12 
	~<c¡dio
>

13 
	~<ùime
>

14 
	~<s¡»am
>

15 
	~<th»ad
>

17 
	~"Ëv–db/’v.h
"

19 
Çme¥aû
 
	gËv–db
 {

21 şas 
	cWšdowsLogg”
 
	gfš®
 : 
public
 
Logg”
 {

22 
public
:

26 
ex¶ic™
 
WšdowsLogg”
(
¡d
::
FILE
* 
å
è: 
å_
(åè{ 
as£¹
(å !ğ
nuÎ±r
); }

28 ~
WšdowsLogg”
(è
	gov”ride
 { 
	g¡d
::
fşo£
(
å_
); }

30 
Logv
(cÚ¡ * 
fÜm©
, 
¡d
::
va_li¡
 
¬gum’ts
è
ov”ride
 {

32 
SYSTEMTIME
 
now_compÚ’ts
;

33 ::
G‘LoÿlTime
(&
now_compÚ’ts
);

36 
cÚ¡ex´
 cÚ¡ 
	gkMaxTh»adIdSize
 = 32;

37 
	g¡d
::
o¡ršg¡»am
 
th»ad_¡»am
;

38 
	gth»ad_¡»am
 << 
	g¡d
::
this_th»ad
::
g‘_id
();

39 
	g¡d
::
¡ršg
 
th»ad_id
 = 
th»ad_¡»am
.
¡r
();

40 ià(
	gth»ad_id
.
size
(è> 
	gkMaxTh»adIdSize
) {

41 
	gth»ad_id
.
»size
(
kMaxTh»adIdSize
);

46 
cÚ¡ex´
 cÚ¡ 
	gkSckBufãrSize
 = 512;

47 
	g¡ack_bufãr
[
kSckBufãrSize
];

48 
¡©ic_as£¹
((
¡ack_bufãr
è=ğ
¡©ic_ÿ¡
<
size_t
>(
kSckBufãrSize
),

51 
	gdyÇmic_bufãr_size
 = 0;

52 
	g™”©iÚ
 = 0; iteration < 2; ++iteration) {

53 cÚ¡ 
	gbufãr_size
 =

54 (
™”©iÚ
 =ğ0è? 
kSckBufãrSize
 : 
dyÇmic_bufãr_size
;

55 * cÚ¡ 
	gbufãr
 =

56 (
™”©iÚ
 =ğ0è? 
¡ack_bufãr
 : 
Ãw
 [
dyÇmic_bufãr_size
];

59 
	gbufãr_off£t
 = 
¡d
::
¢´štf
(

60 
bufãr
, 
bufãr_size
, "%04d/%02d/%02d-%02d:%02d:%02d.%06d %s ",

61 
now_compÚ’ts
.
wY—r
,‚ow_compÚ’ts.
wMÚth
,‚ow_compÚ’ts.
wDay
,

62 
now_compÚ’ts
.
wHour
,‚ow_compÚ’ts.
wMšu‹
,‚ow_compÚ’ts.
wSecÚd
,

63 
¡©ic_ÿ¡
<>(
now_compÚ’ts
.
wMli£cÚds
 * 1000),

64 
th»ad_id
.
c_¡r
());

69 
as£¹
(
bufãr_off£t
 <ğ28 + 
kMaxTh»adIdSize
);

70 
¡©ic_as£¹
(28 + 
kMaxTh»adIdSize
 < 
kSckBufãrSize
,

72 
as£¹
(
bufãr_off£t
 < 
bufãr_size
);

75 
	g¡d
::
va_li¡
 
¬gum’ts_cİy
;

76 
va_cİy
(
¬gum’ts_cİy
, 
¬gum’ts
);

77 
	gbufãr_off£t
 +=

78 
¡d
::
v¢´štf
(
bufãr
 + 
bufãr_off£t
, 
bufãr_size
 - buffer_offset,

79 
fÜm©
, 
¬gum’ts_cİy
);

80 
va_’d
(
¬gum’ts_cİy
);

84 ià(
	gbufãr_off£t
 >ğ
bufãr_size
 - 1) {

86 ià(
™”©iÚ
 == 0) {

90 
dyÇmic_bufãr_size
 = 
bufãr_off£t
 + 2;

97 
as£¹
(
çl£
);

98 
	gbufãr_off£t
 = 
bufãr_size
 - 1;

102 ià(
	gbufãr
[
bufãr_off£t
 - 1] != '\n') {

103 
bufãr
[
bufãr_off£t
] = '\n';

104 ++
	gbufãr_off£t
;

107 
as£¹
(
bufãr_off£t
 <ğ
bufãr_size
);

108 
	g¡d
::
fwr™e
(
bufãr
, 1, 
bufãr_off£t
, 
å_
);

109 
	g¡d
::
fæush
(
å_
);

111 ià(
	g™”©iÚ
 != 0) {

112 
d–‘e
[] 
bufãr
;

118 
	g´iv©e
:

119 
¡d
::
FILE
* cÚ¡ 
å_
;

	@/usr/include/arpa/inet.h

18 #iâdeà
_ARPA_INET_H


19 
	#_ARPA_INET_H
 1

	)

21 
	~<ã©u»s.h
>

22 
	~<Ãtš‘/š.h
>

25 #iâdeà
__sockËn_t_defšed


26 
__sockËn_t
 
	tsockËn_t
;

27 
	#__sockËn_t_defšed


	)

30 
__BEGIN_DECLS


34 
š_addr_t
 
	$š‘_addr
 (cÚ¡ *
__ı
è
__THROW
;

37 
š_addr_t
 
	$š‘_Êaof
 (
š_addr
 
__š
è
__THROW
;

41 
š_addr
 
	$š‘_mak—ddr
 (
š_addr_t
 
__Ãt
, in_addr_ˆ
__ho¡
)

42 
__THROW
;

45 
š_addr_t
 
	$š‘_Ãtof
 (
š_addr
 
__š
è
__THROW
;

49 
š_addr_t
 
	$š‘_ÃtwÜk
 (cÚ¡ *
__ı
è
__THROW
;

53 *
	$š‘_Áß
 (
š_addr
 
__š
è
__THROW
;

58 
	$š‘_±Ú
 (
__af
, cÚ¡ *
__»¡riù
 
__ı
,

59 *
__»¡riù
 
__buf
è
__THROW
;

64 cÚ¡ *
	$š‘_Áİ
 (
__af
, cÚ¡ *
__»¡riù
 
__ı
,

65 *
__»¡riù
 
__buf
, 
sockËn_t
 
__Ën
)

66 
__THROW
;

70 #ifdeà
__USE_MISC


73 
	$š‘_©Ú
 (cÚ¡ *
__ı
, 
š_addr
 *
__šp
è
__THROW
;

77 *
	$š‘_Ã
 (
š_addr_t
 
__Ãt
, *
__buf
, 
size_t
 
__Ën
è
__THROW


78 
	`__©Œibu‹_d•»ÿ‹d_msg__
 ("Use inet_ntop instead");

83 *
	$š‘_Ãt_Áİ
 (
__af
, cÚ¡ *
__ı
, 
__b™s
,

84 *
__buf
, 
size_t
 
__Ën
è
__THROW
;

89 
	$š‘_Ãt_±Ú
 (
__af
, cÚ¡ *
__ı
,

90 *
__buf
, 
size_t
 
__Ën
è
__THROW
;

95 
	$š‘_n§p_addr
 (cÚ¡ *
__ı
,

96 *
__buf
, 
__Ën
è
__THROW
;

100 *
	$š‘_n§p_Áß
 (
__Ën
, cÚ¡ *
__ı
,

101 *
__buf
è
__THROW
;

104 
__END_DECLS


	@/usr/include/assert.h

22 #ifdef 
_ASSERT_H


24 #undeà
_ASSERT_H


25 #undeà
as£¹


26 #undeà
__ASSERT_VOID_CAST


28 #ifdef 
__USE_GNU


29 #undeà
as£¹_³¼Ü


34 
	#_ASSERT_H
 1

	)

35 
	~<ã©u»s.h
>

37 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (2,95)

38 
	#__ASSERT_VOID_CAST
 
¡©ic_ÿ¡
<>

	)

40 
	#__ASSERT_VOID_CAST
 ()

	)

48 #ifdef 
NDEBUG


50 
	#as£¹
(
ex´
è(
	`__ASSERT_VOID_CAST
 (0))

	)

58 #ifdef 
__USE_GNU


59 
	#as£¹_³¼Ü
(
”ºum
è(
	`__ASSERT_VOID_CAST
 (0))

	)

64 #iâdeà
_ASSERT_H_DECLS


65 
	#_ASSERT_H_DECLS


	)

66 
__BEGIN_DECLS


69 
	$__as£¹_ç
 (cÚ¡ *
__as£¹iÚ
, cÚ¡ *
__fe
,

70 
__lše
, cÚ¡ *
__funùiÚ
)

71 
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

74 
	$__as£¹_³¼Ü_ç
 (
__”ºum
, cÚ¡ *
__fe
,

75 
__lše
, cÚ¡ *
__funùiÚ
)

76 
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

81 
	$__as£¹
 (cÚ¡ *
__as£¹iÚ
, cÚ¡ *
__fe
, 
__lše
)

82 
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

85 
__END_DECLS


91 #ià
defšed
 
__ılu¥lus


92 
	#as£¹
(
ex´
) \

93 (
¡©ic_ÿ¡
 <
boŞ
> (
ex´
) \

95 : 
	`__as£¹_ç
 (#ex´, 
__FILE__
, 
__LINE__
, 
__ASSERT_FUNCTION
))

	)

96 #–ià!
defšed
 
__GNUC__
 || defšed 
__STRICT_ANSI__


97 
	#as£¹
(
ex´
) \

98 ((
ex´
) \

99 ? 
	`__ASSERT_VOID_CAST
 (0) \

100 : 
	`__as£¹_ç
 (#ex´, 
__FILE__
, 
__LINE__
, 
__ASSERT_FUNCTION
))

	)

107 
	#as£¹
(
ex´
) \

108 ((è ((
ex´
è? 1 : 0), 
	`__ex‹nsiÚ__
 ({ \

109 ià(
ex´
) \

112 
	`__as£¹_ç
 (#ex´, 
__FILE__
, 
__LINE__
, 
__ASSERT_FUNCTION
); \

113 
	}
}))

	)

116 #ifdef 
__USE_GNU


117 
	#as£¹_³¼Ü
(
”ºum
) \

118 (!(
”ºum
) \

119 ? 
	`__ASSERT_VOID_CAST
 (0) \

120 : 
	`__as£¹_³¼Ü_ç
 ((
”ºum
), 
__FILE__
, 
__LINE__
, 
__ASSERT_FUNCTION
))

	)

128 #ià
defšed
 
__ılu¥lus
 ? 
__GNUC_PREREQ
 (2, 6) : __GNUC_PREREQ (2, 4)

129 
	#__ASSERT_FUNCTION
 
__ex‹nsiÚ__
 
__PRETTY_FUNCTION__


	)

131 #ià
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

132 
	#__ASSERT_FUNCTION
 
__func__


	)

134 
	#__ASSERT_FUNCTION
 ((cÚ¡ *è0)

	)

141 #ià
defšed
 
__USE_ISOC11
 && !defšed 
__ılu¥lus


142 #undeà
¡©ic_as£¹


143 
	#¡©ic_as£¹
 
_Stic_as£¹


	)

	@/usr/include/ctype.h

22 #iâdef 
_CTYPE_H


23 
	#_CTYPE_H
 1

	)

25 
	~<ã©u»s.h
>

26 
	~<b™s/ty³s.h
>

28 
	g__BEGIN_DECLS


30 #iâdeà
_ISb™


39 
	~<b™s/’dŸn.h
>

40 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


41 
	#_ISb™
(
b™
è(1 << (b™))

	)

43 
	#_ISb™
(
b™
è((b™è< 8 ? ((1 << (b™)è<< 8è: ((1 << (b™)è>> 8))

	)

48 
	m_ISuµ”
 = 
_ISb™
 (0),

49 
	m_ISlow”
 = 
_ISb™
 (1),

50 
	m_IS®pha
 = 
_ISb™
 (2),

51 
	m_ISdig™
 = 
_ISb™
 (3),

52 
	m_ISxdig™
 = 
_ISb™
 (4),

53 
	m_IS¥aû
 = 
_ISb™
 (5),

54 
	m_IS´št
 = 
_ISb™
 (6),

55 
	m_ISg¿ph
 = 
_ISb™
 (7),

56 
	m_ISbÏnk
 = 
_ISb™
 (8),

57 
	m_ISúŒl
 = 
_ISb™
 (9),

58 
	m_ISpunù
 = 
_ISb™
 (10),

59 
	m_IS®num
 = 
_ISb™
 (11)

79 cÚ¡ **
	$__ùy³_b_loc
 ()

80 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

81 cÚ¡ 
__št32_t
 **
	$__ùy³_tŞow”_loc
 ()

82 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

83 cÚ¡ 
__št32_t
 **
	$__ùy³_touµ”_loc
 ()

84 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

87 #iâdeà
__ılu¥lus


88 
	#__isùy³
(
c
, 
ty³
) \

89 ((*
	`__ùy³_b_loc
 ())[(è(
c
)] & (è
ty³
)

	)

90 #–ià
defšed
 
__USE_EXTERN_INLINES


91 
	#__isùy³_f
(
ty³
) \

92 
__ex‹º_šlše
 \

93 
is
##
	`ty³
 (
__c
è
__THROW
 \

95  (*
	`__ùy³_b_loc
 ())[(è(
__c
)] & (è
_IS
##
ty³
; \

96 
	}

	)
}

99 
	#__i§scii
(
c
è(((cè& ~0x7fè=ğ0è

	)

100 
	#__tßscii
(
c
è((cè& 0x7fè

	)

102 
	#__exùy³
(
Çme
è
	`Çme
 (è
__THROW


	)

108 
__exùy³
 (
i§Êum
);

109 
__exùy³
 (
i§Íha
);

110 
__exùy³
 (
isúŒl
);

111 
__exùy³
 (
isdig™
);

112 
__exùy³
 (
i¦ow”
);

113 
__exùy³
 (
isg¿ph
);

114 
__exùy³
 (
i¥ršt
);

115 
__exùy³
 (
i¥unù
);

116 
__exùy³
 (
is¥aû
);

117 
__exùy³
 (
isuµ”
);

118 
__exùy³
 (
isxdig™
);

122 
	$tŞow”
 (
__c
è
__THROW
;

125 
	$touµ”
 (
__c
è
__THROW
;

129 #ifdef 
__USE_ISOC99


130 
	`__exùy³
 (
isbÏnk
);

133 #ifdeà
__USE_GNU


135 
	$isùy³
 (
__c
, 
__mask
è
__THROW
;

138 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


142 
	$i§scii
 (
__c
è
__THROW
;

146 
	$tßscii
 (
__c
è
__THROW
;

150 
	`__exùy³
 (
_touµ”
);

151 
	`__exùy³
 (
_tŞow”
);

155 
	#__tobody
(
c
, 
f
, 
a
, 
¬gs
) \

156 (
__ex‹nsiÚ__
 \

157 ({ 
__»s
; \

158 ià( (
c
) > 1) \

160 ià(
	`__butš_cÚ¡ªt_p
 (
c
)) \

162 
__c
 = (
c
); \

163 
__»s
 = 
__c
 < -128 || __ø> 255 ? __ø: (
a
)[__c]; \

166 
__»s
 = 
f
 
¬gs
; \

169 
__»s
 = (
a
)[(è(
c
)]; \

170 
__»s
; 
	}
}))

	)

172 #ià!
defšed
 
__NO_CTYPE


173 #ifdeà
__isùy³_f


174 
	$__isùy³_f
 (
®num
)

175 
	$__isùy³_f
 (
®pha
)

176 
	$__isùy³_f
 (
úŒl
)

177 
	$__isùy³_f
 (
dig™
)

178 
	$__isùy³_f
 (
low”
)

179 
	$__isùy³_f
 (
g¿ph
)

180 
	$__isùy³_f
 (
´št
)

181 
	$__isùy³_f
 (
punù
)

182 
	$__isùy³_f
 (
¥aû
)

183 
	$__isùy³_f
 (
uµ”
)

184 
	$__isùy³_f
 (
xdig™
)

185 #ifdeà
__USE_ISOC99


186 
	$__isùy³_f
 (
bÏnk
)

188 #–ià
defšed
 
__isùy³


189 
	#i§Êum
(
c
è
	`__isùy³
((c), 
_IS®num
)

	)

190 
	#i§Íha
(
c
è
	`__isùy³
((c), 
_IS®pha
)

	)

191 
	#isúŒl
(
c
è
	`__isùy³
((c), 
_ISúŒl
)

	)

192 
	#isdig™
(
c
è
	`__isùy³
((c), 
_ISdig™
)

	)

193 
	#i¦ow”
(
c
è
	`__isùy³
((c), 
_ISlow”
)

	)

194 
	#isg¿ph
(
c
è
	`__isùy³
((c), 
_ISg¿ph
)

	)

195 
	#i¥ršt
(
c
è
	`__isùy³
((c), 
_IS´št
)

	)

196 
	#i¥unù
(
c
è
	`__isùy³
((c), 
_ISpunù
)

	)

197 
	#is¥aû
(
c
è
	`__isùy³
((c), 
_IS¥aû
)

	)

198 
	#isuµ”
(
c
è
	`__isùy³
((c), 
_ISuµ”
)

	)

199 
	#isxdig™
(
c
è
	`__isùy³
((c), 
_ISxdig™
)

	)

200 #ifdeà
__USE_ISOC99


201 
	#isbÏnk
(
c
è
	`__isùy³
((c), 
_ISbÏnk
)

	)

205 #ifdeà
__USE_EXTERN_INLINES


206 
__ex‹º_šlše
 

207 
	`__NTH
 (
	$tŞow”
 (
__c
))

209  
__c
 >ğ-128 && __ø< 256 ? (*
	`__ùy³_tŞow”_loc
 ())[__c] : __c;

210 
	}
}

212 
__ex‹º_šlše
 

213 
__NTH
 (
	$touµ”
 (
__c
))

215  
__c
 >ğ-128 && __ø< 256 ? (*
	`__ùy³_touµ”_loc
 ())[__c] : __c;

216 
	}
}

219 #ià
__GNUC__
 >ğ2 && 
defšed
 
__OPTIMIZE__
 && !defšed 
__ılu¥lus


220 
	#tŞow”
(
c
è
	`__tobody
 (c, 
tŞow”
, *
	`__ùy³_tŞow”_loc
 (), (c))

	)

221 
	#touµ”
(
c
è
	`__tobody
 (c, 
touµ”
, *
	`__ùy³_touµ”_loc
 (), (c))

	)

224 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


225 
	#i§scii
(
c
è
	`__i§scii
 (c)

	)

226 
	#tßscii
(
c
è
	`__tßscii
 (c)

	)

228 
	#_tŞow”
(
c
è((è(*
	`__ùy³_tŞow”_loc
 ())[(è(c)])

	)

229 
	#_touµ”
(
c
è((è(*
	`__ùy³_touµ”_loc
 ())[(è(c)])

	)

235 #ifdeà
__USE_XOPEN2K8


237 
	~<b™s/ty³s/loÿË_t.h
>

241 
	#__isùy³_l
(
c
, 
ty³
, 
loÿË
) \

242 ((
loÿË
)->
__ùy³_b
[(è(
c
)] & (è
ty³
)

	)

244 
	#__exùy³_l
(
Çme
) \

245 
	`Çme
 (, 
loÿË_t
è
__THROW


	)

251 
__exùy³_l
 (
i§Êum_l
);

252 
__exùy³_l
 (
i§Íha_l
);

253 
__exùy³_l
 (
isúŒl_l
);

254 
__exùy³_l
 (
isdig™_l
);

255 
__exùy³_l
 (
i¦ow”_l
);

256 
__exùy³_l
 (
isg¿ph_l
);

257 
__exùy³_l
 (
i¥ršt_l
);

258 
__exùy³_l
 (
i¥unù_l
);

259 
__exùy³_l
 (
is¥aû_l
);

260 
__exùy³_l
 (
isuµ”_l
);

261 
__exùy³_l
 (
isxdig™_l
);

263 
__exùy³_l
 (
isbÏnk_l
);

267 
	$__tŞow”_l
 (
__c
, 
loÿË_t
 
__l
è
__THROW
;

268 
	$tŞow”_l
 (
__c
, 
loÿË_t
 
__l
è
__THROW
;

271 
	$__touµ”_l
 (
__c
, 
loÿË_t
 
__l
è
__THROW
;

272 
	$touµ”_l
 (
__c
, 
loÿË_t
 
__l
è
__THROW
;

274 #ià
__GNUC__
 >ğ2 && 
defšed
 
__OPTIMIZE__
 && !defšed 
__ılu¥lus


275 
	#__tŞow”_l
(
c
, 
loÿË
) \

276 
	`__tobody
 (
c
, 
__tŞow”_l
, (
loÿË
)->
__ùy³_tŞow”
, (c,†oÿË))

	)

277 
	#__touµ”_l
(
c
, 
loÿË
) \

278 
	`__tobody
 (
c
, 
__touµ”_l
, (
loÿË
)->
__ùy³_touµ”
, (c,†oÿË))

	)

279 
	#tŞow”_l
(
c
, 
loÿË
è
	`__tŞow”_l
 ((c), (loÿË))

	)

280 
	#touµ”_l
(
c
, 
loÿË
è
	`__touµ”_l
 ((c), (loÿË))

	)

284 #iâdeà
__NO_CTYPE


285 
	#__i§Êum_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS®num
, (l))

	)

286 
	#__i§Íha_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS®pha
, (l))

	)

287 
	#__isúŒl_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISúŒl
, (l))

	)

288 
	#__isdig™_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISdig™
, (l))

	)

289 
	#__i¦ow”_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISlow”
, (l))

	)

290 
	#__isg¿ph_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISg¿ph
, (l))

	)

291 
	#__i¥ršt_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS´št
, (l))

	)

292 
	#__i¥unù_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISpunù
, (l))

	)

293 
	#__is¥aû_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS¥aû
, (l))

	)

294 
	#__isuµ”_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISuµ”
, (l))

	)

295 
	#__isxdig™_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISxdig™
, (l))

	)

297 
	#__isbÏnk_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISbÏnk
, (l))

	)

299 #ifdeà
__USE_MISC


300 
	#__i§scii_l
(
c
,
l
è(Ö), 
	`__i§scii
 (c))

	)

301 
	#__tßscii_l
(
c
,
l
è(Ö), 
	`__tßscii
 (c))

	)

304 
	#i§Êum_l
(
c
,
l
è
	`__i§Êum_l
 ((c), (l))

	)

305 
	#i§Íha_l
(
c
,
l
è
	`__i§Íha_l
 ((c), (l))

	)

306 
	#isúŒl_l
(
c
,
l
è
	`__isúŒl_l
 ((c), (l))

	)

307 
	#isdig™_l
(
c
,
l
è
	`__isdig™_l
 ((c), (l))

	)

308 
	#i¦ow”_l
(
c
,
l
è
	`__i¦ow”_l
 ((c), (l))

	)

309 
	#isg¿ph_l
(
c
,
l
è
	`__isg¿ph_l
 ((c), (l))

	)

310 
	#i¥ršt_l
(
c
,
l
è
	`__i¥ršt_l
 ((c), (l))

	)

311 
	#i¥unù_l
(
c
,
l
è
	`__i¥unù_l
 ((c), (l))

	)

312 
	#is¥aû_l
(
c
,
l
è
	`__is¥aû_l
 ((c), (l))

	)

313 
	#isuµ”_l
(
c
,
l
è
	`__isuµ”_l
 ((c), (l))

	)

314 
	#isxdig™_l
(
c
,
l
è
	`__isxdig™_l
 ((c), (l))

	)

316 
	#isbÏnk_l
(
c
,
l
è
	`__isbÏnk_l
 ((c), (l))

	)

318 #ifdeà
__USE_MISC


319 
	#i§scii_l
(
c
,
l
è
	`__i§scii_l
 ((c), (l))

	)

320 
	#tßscii_l
(
c
,
l
è
	`__tßscii_l
 ((c), (l))

	)

327 
__END_DECLS


	@/usr/include/dirent.h

22 #iâdef 
_DIRENT_H


23 
	#_DIRENT_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	g__BEGIN_DECLS


29 
	~<b™s/ty³s.h
>

31 #ifdeà
__USE_XOPEN


32 #iâdeà
__šo_t_defšed


33 #iâdeà
__USE_FILE_OFFSET64


34 
__šo_t
 
	tšo_t
;

36 
__šo64_t
 
	tšo_t
;

38 
	#__šo_t_defšed


	)

40 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__šo64_t_defšed


41 
__šo64_t
 
	tšo64_t
;

42 
	#__šo64_t_defšed


	)

61 
	~<b™s/dœ’t.h
>

63 #ià
defšed
 
__USE_MISC
 && !defšed 
d_f’o


64 
	#d_šo
 
d_f’o


	)

81 #ifdeà
_DIRENT_HAVE_D_NAMLEN


82 
	#_D_EXACT_NAMLEN
(
d
è((d)->
d_ÇmËn
)

	)

83 
	#_D_ALLOC_NAMLEN
(
d
è(
	`_D_EXACT_NAMLEN
 (dè+ 1)

	)

85 
	#_D_EXACT_NAMLEN
(
d
è(
	`¡¾’
 ((d)->
d_Çme
))

	)

86 #ifdeà
_DIRENT_HAVE_D_RECLEN


87 
	#_D_ALLOC_NAMLEN
(
d
è(((*è(dè+ (d)->
d_»ş’
è- &(d)->
d_Çme
[0])

	)

89 
	#_D_ALLOC_NAMLEN
(
d
è( (d)->
d_Çme
 > 1 ?  (d)->d_name \

90 : 
	`_D_EXACT_NAMLEN
 (
d
è+ 1)

	)

95 #ifdeà
__USE_MISC


99 
	mDT_UNKNOWN
 = 0,

100 
	#DT_UNKNOWN
 
DT_UNKNOWN


	)

101 
	mDT_FIFO
 = 1,

102 
	#DT_FIFO
 
DT_FIFO


	)

103 
	mDT_CHR
 = 2,

104 
	#DT_CHR
 
DT_CHR


	)

105 
	mDT_DIR
 = 4,

106 
	#DT_DIR
 
DT_DIR


	)

107 
	mDT_BLK
 = 6,

108 
	#DT_BLK
 
DT_BLK


	)

109 
	mDT_REG
 = 8,

110 
	#DT_REG
 
DT_REG


	)

111 
	mDT_LNK
 = 10,

112 
	#DT_LNK
 
DT_LNK


	)

113 
	mDT_SOCK
 = 12,

114 
	#DT_SOCK
 
DT_SOCK


	)

115 
	mDT_WHT
 = 14

116 
	#DT_WHT
 
DT_WHT


	)

120 
	#IFTODT
(
mode
è(((modeè& 0170000è>> 12)

	)

121 
	#DTTOIF
(
dœty³
è((dœty³è<< 12)

	)

127 
__dœ¡»am
 
	tDIR
;

134 
DIR
 *
	$İ’dœ
 (cÚ¡ *
__Çme
è
	`__nÚnuÎ
 ((1));

136 #ifdeà
__USE_XOPEN2K8


141 
DIR
 *
	`fdİ’dœ
 (
__fd
);

149 
	$şo£dœ
 (
DIR
 *
__dœp
è
	`__nÚnuÎ
 ((1));

161 #iâdeà
__USE_FILE_OFFSET64


162 
dœ’t
 *
	$»addœ
 (
DIR
 *
__dœp
è
	`__nÚnuÎ
 ((1));

164 #ifdeà
__REDIRECT


165 
dœ’t
 *
	`__REDIRECT
 (
»addœ
, (
DIR
 *
__dœp
), 
»addœ64
)

166 
	`__nÚnuÎ
 ((1));

168 
	#»addœ
 
»addœ64


	)

172 #ifdeà
__USE_LARGEFILE64


173 
dœ’t64
 *
	$»addœ64
 (
DIR
 *
__dœp
è
	`__nÚnuÎ
 ((1));

176 #ifdeà
__USE_POSIX


182 #iâdeà
__USE_FILE_OFFSET64


183 
	$»addœ_r
 (
DIR
 *
__»¡riù
 
__dœp
,

184 
dœ’t
 *
__»¡riù
 
__’Œy
,

185 
dœ’t
 **
__»¡riù
 
__»suÉ
)

186 
	`__nÚnuÎ
 ((1, 2, 3)è
__©Œibu‹_d•»ÿ‹d__
;

188 #ifdeà
__REDIRECT


189 
	`__REDIRECT
 (
»addœ_r
,

190 (
DIR
 *
__»¡riù
 
__dœp
,

191 
dœ’t
 *
__»¡riù
 
__’Œy
,

192 
dœ’t
 **
__»¡riù
 
__»suÉ
),

193 
»addœ64_r
)

194 
	`__nÚnuÎ
 ((1, 2, 3)è
__©Œibu‹_d•»ÿ‹d__
;

196 
	#»addœ_r
 
»addœ64_r


	)

200 #ifdeà
__USE_LARGEFILE64


201 
	$»addœ64_r
 (
DIR
 *
__»¡riù
 
__dœp
,

202 
dœ’t64
 *
__»¡riù
 
__’Œy
,

203 
dœ’t64
 **
__»¡riù
 
__»suÉ
)

204 
	`__nÚnuÎ
 ((1, 2, 3)è
__©Œibu‹_d•»ÿ‹d__
;

209 
	$»wšddœ
 (
DIR
 *
__dœp
è
__THROW
 
	`__nÚnuÎ
 ((1));

211 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


212 
	~<b™s/ty³s.h
>

215 
	$£ekdœ
 (
DIR
 *
__dœp
, 
__pos
è
__THROW
 
	`__nÚnuÎ
 ((1));

218 
	$‹Îdœ
 (
DIR
 *
__dœp
è
__THROW
 
	`__nÚnuÎ
 ((1));

221 #ifdeà
__USE_XOPEN2K8


224 
	$dœfd
 (
DIR
 *
__dœp
è
__THROW
 
	`__nÚnuÎ
 ((1));

226 #ià
defšed
 
__OPTIMIZE__
 && defšed 
_DIR_dœfd


227 
	#dœfd
(
dœp
è
	`_DIR_dœfd
 (dœp)

	)

230 #ifdeà
__USE_MISC


231 #iâdeà
MAXNAMLEN


233 
	~<b™s/posix1_lim.h
>

236 #ifdeà
NAME_MAX


237 
	#MAXNAMLEN
 
NAME_MAX


	)

239 
	#MAXNAMLEN
 255

	)

244 
	#__Ãed_size_t


	)

245 
	~<¡ddef.h
>

254 #iâdeà
__USE_FILE_OFFSET64


255 
	$sÿndœ
 (cÚ¡ *
__»¡riù
 
__dœ
,

256 
dœ’t
 ***
__»¡riù
 
__Çm–i¡
,

257 (*
__£ËùÜ
è(cÚ¡ 
dœ’t
 *),

258 (*
__cmp
è(cÚ¡ 
dœ’t
 **,

259 cÚ¡ 
dœ’t
 **))

260 
	`__nÚnuÎ
 ((1, 2));

262 #ifdeà
__REDIRECT


263 
	`__REDIRECT
 (
sÿndœ
,

264 (cÚ¡ *
__»¡riù
 
__dœ
,

265 
dœ’t
 ***
__»¡riù
 
__Çm–i¡
,

266 (*
__£ËùÜ
è(cÚ¡ 
dœ’t
 *),

267 (*
__cmp
è(cÚ¡ 
dœ’t
 **,

268 cÚ¡ 
dœ’t
 **)),

269 
sÿndœ64
è
	`__nÚnuÎ
 ((1, 2));

271 
	#sÿndœ
 
sÿndœ64


	)

275 #ià
defšed
 
__USE_GNU
 && defšed 
__USE_LARGEFILE64


278 
	$sÿndœ64
 (cÚ¡ *
__»¡riù
 
__dœ
,

279 
dœ’t64
 ***
__»¡riù
 
__Çm–i¡
,

280 (*
__£ËùÜ
è(cÚ¡ 
dœ’t64
 *),

281 (*
__cmp
è(cÚ¡ 
dœ’t64
 **,

282 cÚ¡ 
dœ’t64
 **))

283 
	`__nÚnuÎ
 ((1, 2));

286 #ifdeà
__USE_GNU


292 #iâdeà
__USE_FILE_OFFSET64


293 
	$sÿndœ©
 (
__dfd
, cÚ¡ *
__»¡riù
 
__dœ
,

294 
dœ’t
 ***
__»¡riù
 
__Çm–i¡
,

295 (*
__£ËùÜ
è(cÚ¡ 
dœ’t
 *),

296 (*
__cmp
è(cÚ¡ 
dœ’t
 **,

297 cÚ¡ 
dœ’t
 **))

298 
	`__nÚnuÎ
 ((2, 3));

300 #ifdeà
__REDIRECT


301 
	`__REDIRECT
 (
sÿndœ©
,

302 (
__dfd
, cÚ¡ *
__»¡riù
 
__dœ
,

303 
dœ’t
 ***
__»¡riù
 
__Çm–i¡
,

304 (*
__£ËùÜ
è(cÚ¡ 
dœ’t
 *),

305 (*
__cmp
è(cÚ¡ 
dœ’t
 **,

306 cÚ¡ 
dœ’t
 **)),

307 
sÿndœ©64
è
	`__nÚnuÎ
 ((2, 3));

309 
	#sÿndœ©
 
sÿndœ©64


	)

315 
	$sÿndœ©64
 (
__dfd
, cÚ¡ *
__»¡riù
 
__dœ
,

316 
dœ’t64
 ***
__»¡riù
 
__Çm–i¡
,

317 (*
__£ËùÜ
è(cÚ¡ 
dœ’t64
 *),

318 (*
__cmp
è(cÚ¡ 
dœ’t64
 **,

319 cÚ¡ 
dœ’t64
 **))

320 
	`__nÚnuÎ
 ((2, 3));

324 #iâdeà
__USE_FILE_OFFSET64


325 
	$®phasÜt
 (cÚ¡ 
dœ’t
 **
__e1
,

326 cÚ¡ 
dœ’t
 **
__e2
)

327 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

329 #ifdeà
__REDIRECT


330 
	`__REDIRECT_NTH
 (
®phasÜt
,

331 (cÚ¡ 
dœ’t
 **
__e1
,

332 cÚ¡ 
dœ’t
 **
__e2
),

333 
®phasÜt64
è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

335 
	#®phasÜt
 
®phasÜt64


	)

339 #ià
defšed
 
__USE_GNU
 && defšed 
__USE_LARGEFILE64


340 
	$®phasÜt64
 (cÚ¡ 
dœ’t64
 **
__e1
,

341 cÚ¡ 
dœ’t64
 **
__e2
)

342 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

347 #ifdeà
__USE_MISC


352 #iâdeà
__USE_FILE_OFFSET64


353 
__ssize_t
 
	$g‘dœ’Œ›s
 (
__fd
, *
__»¡riù
 
__buf
,

354 
size_t
 
__nby‹s
,

355 
__off_t
 *
__»¡riù
 
__ba£p
)

356 
__THROW
 
	`__nÚnuÎ
 ((2, 4));

358 #ifdeà
__REDIRECT


359 
__ssize_t
 
	`__REDIRECT_NTH
 (
g‘dœ’Œ›s
,

360 (
__fd
, *
__»¡riù
 
__buf
,

361 
size_t
 
__nby‹s
,

362 
__off64_t
 *
__»¡riù
 
__ba£p
),

363 
g‘dœ’Œ›s64
è
	`__nÚnuÎ
 ((2, 4));

365 
	#g‘dœ’Œ›s
 
g‘dœ’Œ›s64


	)

369 #ifdeà
__USE_LARGEFILE64


370 
__ssize_t
 
	$g‘dœ’Œ›s64
 (
__fd
, *
__»¡riù
 
__buf
,

371 
size_t
 
__nby‹s
,

372 
__off64_t
 *
__»¡riù
 
__ba£p
)

373 
__THROW
 
	`__nÚnuÎ
 ((2, 4));

377 #ifdeà
__USE_GNU


379 #iâdeà
__USE_FILE_OFFSET64


380 
	$v”siÚsÜt
 (cÚ¡ 
dœ’t
 **
__e1
,

381 cÚ¡ 
dœ’t
 **
__e2
)

382 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

384 #ifdeà
__REDIRECT


385 
	`__REDIRECT_NTH
 (
v”siÚsÜt
,

386 (cÚ¡ 
dœ’t
 **
__e1
,

387 cÚ¡ 
dœ’t
 **
__e2
),

388 
v”siÚsÜt64
)

389 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

391 
	#v”siÚsÜt
 
v”siÚsÜt64


	)

395 #ifdeà
__USE_LARGEFILE64


396 
	$v”siÚsÜt64
 (cÚ¡ 
dœ’t64
 **
__e1
,

397 cÚ¡ 
dœ’t64
 **
__e2
)

398 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

402 
__END_DECLS


404 
	~<b™s/dœ’t_ext.h
>

	@/usr/include/errno.h

22 #iâdef 
_ERRNO_H


23 
	#_ERRNO_H
 1

	)

25 
	~<ã©u»s.h
>

28 
	~<b™s/”ºo.h
>

32 #iâdeà
__ASSEMBLER__


34 
__BEGIN_DECLS


37 *
	$__”ºo_loÿtiÚ
 (è
__THROW
 
__©Œibu‹_cÚ¡__
;

38 
	#”ºo
 (*
	`__”ºo_loÿtiÚ
 ())

	)

40 #ifdeà
__USE_GNU


45 *
´og¿m_švoÿtiÚ_Çme
;

46 *
´og¿m_švoÿtiÚ_shÜt_Çme
;

48 
	~<b™s/ty³s/”rÜ_t.h
>

52 
__END_DECLS


	@/usr/include/fcntl.h

22 #iâdef 
_FCNTL_H


23 
	#_FCNTL_H
 1

	)

25 
	~<ã©u»s.h
>

28 
	g__BEGIN_DECLS


31 
	~<b™s/ty³s.h
>

35 
	~<b™s/fú.h
>

39 #ifdeà
__O_TMPFILE


40 
	#__OPEN_NEEDS_MODE
(
oæag
) \

41 (((
oæag
è& 
O_CREAT
è!ğ0 || ((oæagè& 
__O_TMPFILE
è=ğ__O_TMPFILE)

	)

43 
	#__OPEN_NEEDS_MODE
(
oæag
è(((oæagè& 
O_CREAT
è!ğ0)

	)

49 #iâdeà
__mode_t_defšed


50 
__mode_t
 
	tmode_t
;

51 
	#__mode_t_defšed


	)

54 #iâdeà
__off_t_defšed


55 #iâdeà
__USE_FILE_OFFSET64


56 
__off_t
 
	toff_t
;

58 
__off64_t
 
	toff_t
;

60 
	#__off_t_defšed


	)

63 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__off64_t_defšed


64 
__off64_t
 
	toff64_t
;

65 
	#__off64_t_defšed


	)

68 #iâdeà
__pid_t_defšed


69 
__pid_t
 
	tpid_t
;

70 
	#__pid_t_defšed


	)

74 #ifdeà
__USE_XOPEN2K8


75 
	~<b™s/ty³s/¡ruù_time¥ec.h
>

77 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


78 
	~<b™s/¡©.h
>

80 
	#S_IFMT
 
__S_IFMT


	)

81 
	#S_IFDIR
 
__S_IFDIR


	)

82 
	#S_IFCHR
 
__S_IFCHR


	)

83 
	#S_IFBLK
 
__S_IFBLK


	)

84 
	#S_IFREG
 
__S_IFREG


	)

85 #ifdeà
__S_IFIFO


86 
	#S_IFIFO
 
__S_IFIFO


	)

88 #ifdeà
__S_IFLNK


89 
	#S_IFLNK
 
__S_IFLNK


	)

91 #ià(
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8
è&& defšed 
__S_IFSOCK


92 
	#S_IFSOCK
 
__S_IFSOCK


	)

97 
	#S_ISUID
 
__S_ISUID


	)

98 
	#S_ISGID
 
__S_ISGID


	)

100 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


102 
	#S_ISVTX
 
__S_ISVTX


	)

105 
	#S_IRUSR
 
__S_IREAD


	)

106 
	#S_IWUSR
 
__S_IWRITE


	)

107 
	#S_IXUSR
 
__S_IEXEC


	)

109 
	#S_IRWXU
 (
__S_IREAD
|
__S_IWRITE
|
__S_IEXEC
)

	)

111 
	#S_IRGRP
 (
S_IRUSR
 >> 3è

	)

112 
	#S_IWGRP
 (
S_IWUSR
 >> 3è

	)

113 
	#S_IXGRP
 (
S_IXUSR
 >> 3è

	)

115 
	#S_IRWXG
 (
S_IRWXU
 >> 3)

	)

117 
	#S_IROTH
 (
S_IRGRP
 >> 3è

	)

118 
	#S_IWOTH
 (
S_IWGRP
 >> 3è

	)

119 
	#S_IXOTH
 (
S_IXGRP
 >> 3è

	)

121 
	#S_IRWXO
 (
S_IRWXG
 >> 3)

	)

124 #ifdef 
__USE_MISC


125 #iâdeà
R_OK


128 
	#R_OK
 4

	)

129 
	#W_OK
 2

	)

130 
	#X_OK
 1

	)

131 
	#F_OK
 0

	)

136 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


137 
	#SEEK_SET
 0

	)

138 
	#SEEK_CUR
 1

	)

139 
	#SEEK_END
 2

	)

147 #iâdeà
__USE_TIME_BITS64


148 #iâdeà
__USE_FILE_OFFSET64


149 
fú
 (
__fd
, 
__cmd
, ...);

151 #ifdeà
__REDIRECT


152 
__REDIRECT
 (
fú
, (
__fd
, 
__cmd
, ...), 
fú64
);

154 
	#fú
 
fú64


	)

157 #ifdeà
__USE_LARGEFILE64


158 
fú64
 (
__fd
, 
__cmd
, ...);

161 #ifdeà
__REDIRECT


162 
__REDIRECT_NTH
 (
fú
, (
__fd
, 
__»que¡
, ...),

163 
__fú_time64
);

164 
__REDIRECT_NTH
 (
fú64
, (
__fd
, 
__»que¡
, ...),

165 
__fú_time64
);

167 
	$__fú_time64
 (
__fd
, 
__»que¡
, ...è
__THROW
;

168 
	#fú64
 
__fú_time64


	)

169 
	#fú
 
__fú_time64


	)

180 #iâdeà
__USE_FILE_OFFSET64


181 
	$İ’
 (cÚ¡ *
__fe
, 
__oæag
, ...è
	`__nÚnuÎ
 ((1));

183 #ifdeà
__REDIRECT


184 
	`__REDIRECT
 (
İ’
, (cÚ¡ *
__fe
, 
__oæag
, ...), 
İ’64
)

185 
	`__nÚnuÎ
 ((1));

187 
	#İ’
 
İ’64


	)

190 #ifdeà
__USE_LARGEFILE64


191 
	$İ’64
 (cÚ¡ *
__fe
, 
__oæag
, ...è
	`__nÚnuÎ
 ((1));

194 #ifdeà
__USE_ATFILE


204 #iâdeà
__USE_FILE_OFFSET64


205 
	$İ’©
 (
__fd
, cÚ¡ *
__fe
, 
__oæag
, ...)

206 
	`__nÚnuÎ
 ((2));

208 #ifdeà
__REDIRECT


209 
	`__REDIRECT
 (
İ’©
, (
__fd
, cÚ¡ *
__fe
, 
__oæag
,

210 ...), 
İ’©64
è
	`__nÚnuÎ
 ((2));

212 
	#İ’©
 
İ’©64


	)

215 #ifdeà
__USE_LARGEFILE64


216 
	$İ’©64
 (
__fd
, cÚ¡ *
__fe
, 
__oæag
, ...)

217 
	`__nÚnuÎ
 ((2));

226 #iâdeà
__USE_FILE_OFFSET64


227 
	$ü—t
 (cÚ¡ *
__fe
, 
mode_t
 
__mode
è
	`__nÚnuÎ
 ((1));

229 #ifdeà
__REDIRECT


230 
	`__REDIRECT
 (
ü—t
, (cÚ¡ *
__fe
, 
mode_t
 
__mode
),

231 
ü—t64
è
	`__nÚnuÎ
 ((1));

233 
	#ü—t
 
ü—t64


	)

236 #ifdeà
__USE_LARGEFILE64


237 
	$ü—t64
 (cÚ¡ *
__fe
, 
mode_t
 
__mode
è
	`__nÚnuÎ
 ((1));

240 #ià!
defšed
 
F_LOCK
 && (defšed 
__USE_MISC
 || (defšed 
__USE_XOPEN_EXTENDED
 \

241 && !
defšed
 
__USE_POSIX
))

250 
	#F_ULOCK
 0

	)

251 
	#F_LOCK
 1

	)

252 
	#F_TLOCK
 2

	)

253 
	#F_TEST
 3

	)

255 #iâdeà
__USE_FILE_OFFSET64


256 
	`lockf
 (
__fd
, 
__cmd
, 
off_t
 
__Ën
);

258 #ifdeà
__REDIRECT


259 
	`__REDIRECT
 (
lockf
, (
__fd
, 
__cmd
, 
__off64_t
 
__Ën
), 
lockf64
);

261 
	#lockf
 
lockf64


	)

264 #ifdeà
__USE_LARGEFILE64


265 
	`lockf64
 (
__fd
, 
__cmd
, 
off64_t
 
__Ën
);

269 #ifdeà
__USE_XOPEN2K


272 #iâdeà
__USE_FILE_OFFSET64


273 
	$posix_çdvi£
 (
__fd
, 
off_t
 
__off£t
, off_ˆ
__Ën
,

274 
__advi£
è
__THROW
;

276 #ifdeà
__REDIRECT_NTH


277 
	`__REDIRECT_NTH
 (
posix_çdvi£
, (
__fd
, 
__off64_t
 
__off£t
,

278 
__off64_t
 
__Ën
, 
__advi£
),

279 
posix_çdvi£64
);

281 
	#posix_çdvi£
 
posix_çdvi£64


	)

284 #ifdeà
__USE_LARGEFILE64


285 
	$posix_çdvi£64
 (
__fd
, 
off64_t
 
__off£t
, off64_ˆ
__Ën
,

286 
__advi£
è
__THROW
;

294 #iâdeà
__USE_FILE_OFFSET64


295 
	`posix_çÎoÿ‹
 (
__fd
, 
off_t
 
__off£t
, off_ˆ
__Ën
);

297 #ifdeà
__REDIRECT


298 
	`__REDIRECT
 (
posix_çÎoÿ‹
, (
__fd
, 
__off64_t
 
__off£t
,

299 
__off64_t
 
__Ën
),

300 
posix_çÎoÿ‹64
);

302 
	#posix_çÎoÿ‹
 
posix_çÎoÿ‹64


	)

305 #ifdeà
__USE_LARGEFILE64


306 
	`posix_çÎoÿ‹64
 (
__fd
, 
off64_t
 
__off£t
, off64_ˆ
__Ën
);

312 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ
 \

313 && 
defšed
 
__va_¬g_·ck_Ën


314 
	~<b™s/fú2.h
>

317 
__END_DECLS


	@/usr/include/limits.h

22 #iâdeà
_LIBC_LIMITS_H_


23 
	#_LIBC_LIMITS_H_
 1

	)

25 
	#__GLIBC_INTERNAL_STARTING_HEADER_IMPLEMENTATION


	)

26 
	~<b™s/libc-h—d”-¡¬t.h
>

32 
	#MB_LEN_MAX
 16

	)

37 #ià!
defšed
 
__GNUC__
 || __GNUC__ < 2

42 #iâdeà
_LIMITS_H


43 
	#_LIMITS_H
 1

	)

45 
	~<b™s/wÜdsize.h
>

54 
	#CHAR_BIT
 8

	)

57 
	#SCHAR_MIN
 (-128)

	)

58 
	#SCHAR_MAX
 127

	)

61 
	#UCHAR_MAX
 255

	)

64 #ifdeà
__CHAR_UNSIGNED__


65 
	#CHAR_MIN
 0

	)

66 
	#CHAR_MAX
 
UCHAR_MAX


	)

68 
	#CHAR_MIN
 
SCHAR_MIN


	)

69 
	#CHAR_MAX
 
SCHAR_MAX


	)

73 
	#SHRT_MIN
 (-32768)

	)

74 
	#SHRT_MAX
 32767

	)

77 
	#USHRT_MAX
 65535

	)

80 
	#INT_MIN
 (-
INT_MAX
 - 1)

	)

81 
	#INT_MAX
 2147483647

	)

84 
	#UINT_MAX
 4294967295U

	)

87 #ià
__WORDSIZE
 == 64

88 
	#LONG_MAX
 9223372036854775807L

	)

90 
	#LONG_MAX
 2147483647L

	)

92 
	#LONG_MIN
 (-
LONG_MAX
 - 1L)

	)

95 #ià
__WORDSIZE
 == 64

96 
	#ULONG_MAX
 18446744073709551615UL

	)

98 
	#ULONG_MAX
 4294967295UL

	)

101 #ifdeà
__USE_ISOC99


104 
	#LLONG_MAX
 9223372036854775807LL

	)

105 
	#LLONG_MIN
 (-
LLONG_MAX
 - 1LL)

	)

108 
	#ULLONG_MAX
 18446744073709551615ULL

	)

122 #ià
defšed
 
__GNUC__
 && !defšed 
_GCC_LIMITS_H_


124 #šşude_Ãxˆ<
lim™s
.
h
>

130 #ià
defšed
 
__USE_ISOC99
 && defšed 
__GNUC__


131 #iâdeà
LLONG_MIN


132 
	#LLONG_MIN
 (-
LLONG_MAX
-1)

	)

134 #iâdeà
LLONG_MAX


135 
	#LLONG_MAX
 
__LONG_LONG_MAX__


	)

137 #iâdeà
ULLONG_MAX


138 
	#ULLONG_MAX
 (
LLONG_MAX
 * 2ULL + 1)

	)

145 #ià
__GLIBC_USE
 (
IEC_60559_BFP_EXT_C2X
)

146 #iâdeà
CHAR_WIDTH


147 
	#CHAR_WIDTH
 8

	)

149 #iâdeà
SCHAR_WIDTH


150 
	#SCHAR_WIDTH
 8

	)

152 #iâdeà
UCHAR_WIDTH


153 
	#UCHAR_WIDTH
 8

	)

155 #iâdeà
SHRT_WIDTH


156 
	#SHRT_WIDTH
 16

	)

158 #iâdeà
USHRT_WIDTH


159 
	#USHRT_WIDTH
 16

	)

161 #iâdeà
INT_WIDTH


162 
	#INT_WIDTH
 32

	)

164 #iâdeà
UINT_WIDTH


165 
	#UINT_WIDTH
 32

	)

167 #iâdeà
LONG_WIDTH


168 
	#LONG_WIDTH
 
__WORDSIZE


	)

170 #iâdeà
ULONG_WIDTH


171 
	#ULONG_WIDTH
 
__WORDSIZE


	)

173 #iâdeà
LLONG_WIDTH


174 
	#LLONG_WIDTH
 64

	)

176 #iâdeà
ULLONG_WIDTH


177 
	#ULLONG_WIDTH
 64

	)

184 #ià
__GLIBC_USE
 (
ISOC2X
)

185 #iâdeà
BOOL_MAX


186 
	#BOOL_MAX
 1

	)

188 #iâdeà
BOOL_WIDTH


189 
	#BOOL_WIDTH
 1

	)

193 #ifdef 
__USE_POSIX


195 
	~<b™s/posix1_lim.h
>

198 #ifdef 
__USE_POSIX2


199 
	~<b™s/posix2_lim.h
>

202 #ifdef 
__USE_XOPEN


203 
	~<b™s/xİ’_lim.h
>

	@/usr/include/math.h

23 #iâdef 
_MATH_H


24 
	#_MATH_H
 1

	)

26 
	#__GLIBC_INTERNAL_STARTING_HEADER_IMPLEMENTATION


	)

27 
	~<b™s/libc-h—d”-¡¬t.h
>

29 #ià
defšed
 
log
 && defšed 
__GNUC__


30 #w¬nšg 
A
 
maüo
 
ÿÎed
 
log
 
was
 
®»ady
 
defšed
 
wh’
 <
m©h
.
h
> wa 
šşuded
.

31 #w¬nšg 
This
 
wl
 
ÿu£
 
comp©iÚ
 
´obËms
.

34 
	g__BEGIN_DECLS


37 
	~<b™s/ty³s.h
>

40 
	~<b™s/m©h-veùÜ.h
>

43 
	~<b™s/æßŠ.h
>

47 #ià
__GNUC_PREREQ
 (3, 3)

48 
	#HUGE_VAL
 (
	`__butš_huge_v®
 ())

	)

55 
	#HUGE_VAL
 1e10000

	)

57 #ifdeà
__USE_ISOC99


58 #ià
__GNUC_PREREQ
 (3, 3)

59 
	#HUGE_VALF
 (
	`__butš_huge_v®f
 ())

	)

60 
	#HUGE_VALL
 (
	`__butš_huge_v®l
 ())

	)

62 
	#HUGE_VALF
 1e10000f

	)

63 
	#HUGE_VALL
 1e10000L

	)

66 #ià
__HAVE_FLOAT16
 && 
__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

67 
	#HUGE_VAL_F16
 (
	`__butš_huge_v®f16
 ())

	)

69 #ià
__HAVE_FLOAT32
 && 
__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

70 
	#HUGE_VAL_F32
 (
	`__butš_huge_v®f32
 ())

	)

72 #ià
__HAVE_FLOAT64
 && 
__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

73 
	#HUGE_VAL_F64
 (
	`__butš_huge_v®f64
 ())

	)

75 #ià
__HAVE_FLOAT128
 && 
__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

76 
	#HUGE_VAL_F128
 (
	`__butš_huge_v®f128
 ())

	)

78 #ià
__HAVE_FLOAT32X
 && 
__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

79 
	#HUGE_VAL_F32X
 (
	`__butš_huge_v®f32x
 ())

	)

81 #ià
__HAVE_FLOAT64X
 && 
__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

82 
	#HUGE_VAL_F64X
 (
	`__butš_huge_v®f64x
 ())

	)

84 #ià
__HAVE_FLOAT128X
 && 
__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

85 
	#HUGE_VAL_F128X
 (
	`__butš_huge_v®f128x
 ())

	)

88 #ifdeà
__USE_ISOC99


90 #ià
__GNUC_PREREQ
 (3, 3)

91 
	#INFINITY
 (
	`__butš_šff
 ())

	)

93 
	#INFINITY
 
HUGE_VALF


	)

97 #ià
__GNUC_PREREQ
 (3, 3)

98 
	#NAN
 (
	`__butš_Çnf
 (""))

	)

103 
	#NAN
 (0.0à/ 0.0f)

	)

107 #ià
__GLIBC_USE
 (
IEC_60559_BFP_EXT
)

109 #ià
__GNUC_PREREQ
 (3, 3)

110 
	#SNANF
 (
	`__butš_Çnsf
 (""))

	)

111 
	#SNAN
 (
	`__butš_Çns
 (""))

	)

112 
	#SNANL
 (
	`__butš_Çn¦
 (""))

	)

115 #ià(
__HAVE_FLOAT16
 \

116 && 
__GLIBC_USE
 (
IEC_60559_TYPES_EXT
) \

117 && (
defšed
 
	g__USE_GNU
 || !
	$__GLIBC_USE
 (
ISOC2X
)))

118 
	#SNANF16
 (
	`__butš_Çnsf16
 (""))

	)

120 #ià(
__HAVE_FLOAT32
 \

121 && 
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
) \

122 && (
defšed
 
__USE_GNU
 || !
	$__GLIBC_USE
 (
ISOC2X
)))

123 
	#SNANF32
 (
	`__butš_Çnsf32
 (""))

	)

125 #ià(
__HAVE_FLOAT64
 \

126 && 
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
) \

127 && (
defšed
 
__USE_GNU
 || !
	$__GLIBC_USE
 (
ISOC2X
)))

128 
	#SNANF64
 (
	`__butš_Çnsf64
 (""))

	)

130 #ià(
__HAVE_FLOAT128
 \

131 && 
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
) \

132 && (
defšed
 
__USE_GNU
 || !
	$__GLIBC_USE
 (
ISOC2X
)))

133 
	#SNANF128
 (
	`__butš_Çnsf128
 (""))

	)

135 #ià(
__HAVE_FLOAT32X
 \

136 && 
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
) \

137 && (
defšed
 
__USE_GNU
 || !
	$__GLIBC_USE
 (
ISOC2X
)))

138 
	#SNANF32X
 (
	`__butš_Çnsf32x
 (""))

	)

140 #ià(
__HAVE_FLOAT64X
 \

141 && 
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
) \

142 && (
defšed
 
__USE_GNU
 || !
	$__GLIBC_USE
 (
ISOC2X
)))

143 
	#SNANF64X
 (
	`__butš_Çnsf64x
 (""))

	)

145 #ià(
__HAVE_FLOAT128X
 \

146 && 
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
) \

147 && (
defšed
 
__USE_GNU
 || !
	$__GLIBC_USE
 (
ISOC2X
)))

148 
	#SNANF128X
 (
	`__butš_Çnsf128x
 (""))

	)

152 
	~<b™s/æt-ev®-m‘hod.h
>

154 #ifdeà
__USE_ISOC99


162 #ià
__GLIBC_FLT_EVAL_METHOD
 == 0 || __GLIBC_FLT_EVAL_METHOD == 16

163 
	tæßt_t
;

164 
	tdoubË_t
;

165 #–ià
__GLIBC_FLT_EVAL_METHOD
 == 1

166 
	tæßt_t
;

167 
	tdoubË_t
;

168 #–ià
__GLIBC_FLT_EVAL_METHOD
 == 2

169 
	tæßt_t
;

170 
	tdoubË_t
;

171 #–ià
__GLIBC_FLT_EVAL_METHOD
 == 32

172 
_Flßt32
 
	tæßt_t
;

173 
	tdoubË_t
;

174 #–ià
__GLIBC_FLT_EVAL_METHOD
 == 33

175 
_Flßt32x
 
	tæßt_t
;

176 
_Flßt32x
 
	tdoubË_t
;

177 #–ià
__GLIBC_FLT_EVAL_METHOD
 == 64

178 
_Flßt64
 
	tæßt_t
;

179 
_Flßt64
 
	tdoubË_t
;

180 #–ià
__GLIBC_FLT_EVAL_METHOD
 == 65

181 
_Flßt64x
 
	tæßt_t
;

182 
_Flßt64x
 
	tdoubË_t
;

183 #–ià
__GLIBC_FLT_EVAL_METHOD
 == 128

184 
_Flßt128
 
	tæßt_t
;

185 
_Flßt128
 
	tdoubË_t
;

186 #–ià
__GLIBC_FLT_EVAL_METHOD
 == 129

187 
_Flßt128x
 
	tæßt_t
;

188 
_Flßt128x
 
	tdoubË_t
;

204 
	~<b™s/å-logb.h
>

205 #ifdeà
__USE_ISOC99


206 #ià
__FP_LOGB0_IS_MIN


207 
	#FP_ILOGB0
 (-2147483647 - 1)

	)

209 
	#FP_ILOGB0
 (-2147483647)

	)

211 #ià
__FP_LOGBNAN_IS_MIN


212 
	#FP_ILOGBNAN
 (-2147483647 - 1)

	)

214 
	#FP_ILOGBNAN
 2147483647

	)

217 #ià
	`__GLIBC_USE
 (
IEC_60559_BFP_EXT_C2X
)

218 #ià
__WORDSIZE
 == 32

219 
	#__FP_LONG_MAX
 0x7fffffffL

	)

221 
	#__FP_LONG_MAX
 0x7fffffffffffffffL

	)

223 #ià
__FP_LOGB0_IS_MIN


224 
	#FP_LLOGB0
 (-
__FP_LONG_MAX
 - 1)

	)

226 
	#FP_LLOGB0
 (-
__FP_LONG_MAX
)

	)

228 #ià
__FP_LOGBNAN_IS_MIN


229 
	#FP_LLOGBNAN
 (-
__FP_LONG_MAX
 - 1)

	)

231 
	#FP_LLOGBNAN
 
__FP_LONG_MAX


	)

247 
	~<b™s/å-ç¡.h
>

249 #ià
	`__GLIBC_USE
 (
IEC_60559_BFP_EXT_C2X
)

253 
FP_INT_UPWARD
 =

254 
	#FP_INT_UPWARD
 0

	)

255 
FP_INT_UPWARD
,

256 
FP_INT_DOWNWARD
 =

257 
	#FP_INT_DOWNWARD
 1

	)

258 
FP_INT_DOWNWARD
,

259 
FP_INT_TOWARDZERO
 =

260 
	#FP_INT_TOWARDZERO
 2

	)

261 
FP_INT_TOWARDZERO
,

262 
FP_INT_TONEARESTFROMZERO
 =

263 
	#FP_INT_TONEARESTFROMZERO
 3

	)

264 
FP_INT_TONEARESTFROMZERO
,

265 
FP_INT_TONEAREST
 =

266 
	#FP_INT_TONEAREST
 4

	)

267 
FP_INT_TONEAREST
,

276 
	#__SIMD_DECL
(
funùiÚ
è
	`__CONCAT
 (
__DECL_SIMD_
, funùiÚ)

	)

278 
	#__MATHCALL_VEC
(
funùiÚ
, 
suffix
, 
¬gs
) \

279 
	`__SIMD_DECL
 (
	`__MATH_PRECNAME
 (
funùiÚ
, 
suffix
)) \

280 
	`__MATHCALL
 (
funùiÚ
, 
suffix
, 
¬gs
)

	)

282 
	#__MATHDECL_VEC
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
) \

283 
	`__SIMD_DECL
 (
	`__MATH_PRECNAME
 (
funùiÚ
, 
suffix
)) \

284 
	`__MATHDECL
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
)

	)

286 
	#__MATHCALL
(
funùiÚ
,
suffix
, 
¬gs
) \

287 
	`__MATHDECL
 (
_MdoubË_
,
funùiÚ
,
suffix
, 
¬gs
)

	)

288 
	#__MATHDECL
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
) \

289 
	`__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
); \

290 
	`__MATHDECL_1
(
ty³
, 
	`__CONCAT
(
__
,
funùiÚ
),
suffix
, 
¬gs
)

	)

291 
	#__MATHCALLX
(
funùiÚ
,
suffix
, 
¬gs
, 
©Œib
) \

292 
	`__MATHDECLX
 (
_MdoubË_
,
funùiÚ
,
suffix
, 
¬gs
, 
©Œib
)

	)

293 
	#__MATHDECLX
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
, 
©Œib
) \

294 
	`__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
è
	`__©Œibu‹__
 (
©Œib
); \

295 
	`__MATHDECL_1
(
ty³
, 
	`__CONCAT
(
__
,
funùiÚ
),
suffix
, 
¬gs
è
	`__©Œibu‹__
 (
©Œib
)

	)

296 
	#__MATHDECL_1_IMPL
(
ty³
, 
funùiÚ
, 
suffix
, 
¬gs
) \

297 
ty³
 
	`__MATH_PRECNAME
(
funùiÚ
,
suffix
è
¬gs
 
__THROW


	)

298 
	#__MATHDECL_1
(
ty³
, 
funùiÚ
, 
suffix
, 
¬gs
) \

299 
	`__MATHDECL_1_IMPL
(
ty³
, 
funùiÚ
, 
suffix
, 
¬gs
)

	)

302 
	#__MATHDECL_ALIAS
(
ty³
, 
funùiÚ
, 
suffix
, 
¬gs
, 
®Ÿs
) \

303 
	`__MATHDECL_1
(
ty³
, 
funùiÚ
, 
suffix
, 
¬gs
)

	)

305 
	#__MATHREDIR
(
ty³
, 
funùiÚ
, 
suffix
, 
¬gs
, 
to
) \

306 
ty³
 
	`__REDIRECT_NTH
 (
	`__MATH_PRECNAME
 (
funùiÚ
, 
suffix
), 
¬gs
, 
to
)

	)

308 
	#_MdoubË_
 

	)

309 
	#__MATH_PRECNAME
(
Çme
,
r
è
	`__CONCAT
Òame,r)

	)

310 
	#__MATH_DECLARING_DOUBLE
 1

	)

311 
	#__MATH_DECLARING_FLOATN
 0

	)

312 
	~<b™s/m©hÿÎs-h–³r-funùiÚs.h
>

313 
	~<b™s/m©hÿÎs.h
>

314 #undeà
_MdoubË_


315 #undeà
__MATH_PRECNAME


316 #undeà
__MATH_DECLARING_DOUBLE


317 #undeà
__MATH_DECLARING_FLOATN


319 #ifdeà
__USE_ISOC99


325 
	#_MdoubË_
 

	)

326 
	#__MATH_PRECNAME
(
Çme
,
r
èÇme##
f
##
	)
r

327 
	#__MATH_DECLARING_DOUBLE
 0

	)

328 
	#__MATH_DECLARING_FLOATN
 0

	)

329 
	~<b™s/m©hÿÎs-h–³r-funùiÚs.h
>

330 
	~<b™s/m©hÿÎs.h
>

331 #undeà
_MdoubË_


332 #undeà
__MATH_PRECNAME


333 #undeà
__MATH_DECLARING_DOUBLE


334 #undeà
__MATH_DECLARING_FLOATN


336 #ià!(
defšed
 
__NO_LONG_DOUBLE_MATH
 && defšed 
_LIBC
) \

337 || 
defšed
 
__LDBL_COMPAT
 \

338 || 
defšed
 
_LIBC_TEST


339 #ifdeà
__LDBL_COMPAT


341 #ifdeà
__USE_ISOC99


342 
	$__Ædbl_Ãx‰ow¬df
 (
__x
, 
__y
)

343 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

344 #ifdeà
__REDIRECT_NTH


345 
	`__REDIRECT_NTH
 (
Ãx‰ow¬df
, (
__x
, 
__y
),

346 
__Ædbl_Ãx‰ow¬df
)

347 
	`__©Œibu‹__
 ((
__cÚ¡__
));

348 
	`__REDIRECT_NTH
 (
Ãx‰ow¬d
, (
__x
, 
__y
),

349 
Ãxá”
è
	`__©Œibu‹__
 ((
__cÚ¡__
));

350 
	`__REDIRECT_NTH
 (
Ãx‰ow¬dl
,

351 (
__x
, 
__y
),

352 
Ãxá”
è
	`__©Œibu‹__
 ((
__cÚ¡__
));

356 #undeà
__MATHDECL_1


357 
	#__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
) \

358 
	`__MATHREDIR
(
ty³
, 
funùiÚ
, 
suffix
, 
¬gs
, 
	`__CONCAT
(funùiÚ,suffix))

	)

360 #–ià
__LDOUBLE_REDIRECTS_TO_FLOAT128_ABI
 == 1

361 #ifdeà
__REDIRECT_NTH


362 #ifdeà
__USE_ISOC99


363 
	`__REDIRECT_NTH
 (
Ãx‰ow¬df
, (
__x
, 
__y
),

364 
__Ãx‰ow¬df_to_›“128
)

365 
	`__©Œibu‹__
 ((
__cÚ¡__
));

366 
	`__REDIRECT_NTH
 (
Ãx‰ow¬d
, (
__x
, 
__y
),

367 
__Ãx‰ow¬d_to_›“128
)

368 
	`__©Œibu‹__
 ((
__cÚ¡__
));

370 
	#__d»m›“128
 
__»mašd”›“128


	)

371 
	#__gamma›“128
 
__lgamma›“128


	)

376 #undeà
__MATHDECL_1


377 #undeà
__MATHDECL_ALIAS


379 
	#__REDIRTO
(
funùiÚ
, 
suffix
) \

380 
__
 ## 
funùiÚ
 ## 
›“128
 ## 
suffix


	)

381 
	#__REDIRTO_ALT
(
funùiÚ
, 
suffix
) \

382 
__
 ## 
funùiÚ
 ## 
f128
 ## 
suffix


	)

384 
	#__MATHDECL_1
(
ty³
, 
funùiÚ
, 
suffix
, 
¬gs
) \

385 
	`__MATHREDIR
 (
ty³
, 
funùiÚ
, 
suffix
, 
¬gs
, 
	`__REDIRTO
 (funùiÚ, suffix))

	)

386 
	#__MATHDECL_ALIAS
(
ty³
, 
funùiÚ
, 
suffix
, 
¬gs
, 
®Ÿs
) \

387 
	`__MATHREDIR
 (
ty³
, 
funùiÚ
, 
suffix
, 
¬gs
, 
	`__REDIRTO_ALT
 (
®Ÿs
, suffix))

	)

393 
	#_MdoubË_
 

	)

394 
	#__MATH_PRECNAME
(
Çme
,
r
èÇme##
l
##
	)
r

395 
	#__MATH_DECLARING_DOUBLE
 0

	)

396 
	#__MATH_DECLARING_FLOATN
 0

	)

397 
	#__MATH_DECLARE_LDOUBLE
 1

	)

398 
	~<b™s/m©hÿÎs-h–³r-funùiÚs.h
>

399 
	~<b™s/m©hÿÎs.h
>

401 #undeà
_MdoubË_


402 #undeà
__MATH_PRECNAME


403 #undeà
__MATH_DECLARING_DOUBLE


404 #undeà
__MATH_DECLARING_FLOATN


406 #ià
defšed
 
__LDBL_COMPAT
 \

407 || 
__LDOUBLE_REDIRECTS_TO_FLOAT128_ABI
 == 1

408 #undeà
__REDIRTO


409 #undeà
__REDIRTO_ALT


410 #undeà
__MATHDECL_1


411 #undeà
__MATHDECL_ALIAS


412 
	#__MATHDECL_1
(
ty³
, 
funùiÚ
, 
suffix
, 
¬gs
) \

413 
	`__MATHDECL_1_IMPL
(
ty³
, 
funùiÚ
, 
suffix
, 
¬gs
)

	)

414 
	#__MATHDECL_ALIAS
(
ty³
, 
funùiÚ
, 
suffix
, 
¬gs
, 
®Ÿs
) \

415 
	`__MATHDECL_1
(
ty³
, 
funùiÚ
, 
suffix
, 
¬gs
)

	)

424 #ià
__HAVE_DISTINCT_FLOAT16
 || (
__HAVE_FLOAT16
 && !
defšed
 
_LIBC
)

425 
	#_MdoubË_
 
_Flßt16


	)

426 
	#__MATH_PRECNAME
(
Çme
,
r
èÇme##
f16
##
	)
r

427 
	#__MATH_DECLARING_DOUBLE
 0

	)

428 
	#__MATH_DECLARING_FLOATN
 1

	)

429 #ià
__HAVE_DISTINCT_FLOAT16


430 
	~<b™s/m©hÿÎs-h–³r-funùiÚs.h
>

432 #ià
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

433 
	~<b™s/m©hÿÎs.h
>

435 #undeà
_MdoubË_


436 #undeà
__MATH_PRECNAME


437 #undeà
__MATH_DECLARING_DOUBLE


438 #undeà
__MATH_DECLARING_FLOATN


441 #ià
__HAVE_DISTINCT_FLOAT32
 || (
__HAVE_FLOAT32
 && !
defšed
 
_LIBC
)

442 
	#_MdoubË_
 
_Flßt32


	)

443 
	#__MATH_PRECNAME
(
Çme
,
r
èÇme##
f32
##
	)
r

444 
	#__MATH_DECLARING_DOUBLE
 0

	)

445 
	#__MATH_DECLARING_FLOATN
 1

	)

446 #ià
__HAVE_DISTINCT_FLOAT32


447 
	~<b™s/m©hÿÎs-h–³r-funùiÚs.h
>

449 #ià
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

450 
	~<b™s/m©hÿÎs.h
>

452 #undeà
_MdoubË_


453 #undeà
__MATH_PRECNAME


454 #undeà
__MATH_DECLARING_DOUBLE


455 #undeà
__MATH_DECLARING_FLOATN


458 #ià
__HAVE_DISTINCT_FLOAT64
 || (
__HAVE_FLOAT64
 && !
defšed
 
_LIBC
)

459 
	#_MdoubË_
 
_Flßt64


	)

460 
	#__MATH_PRECNAME
(
Çme
,
r
èÇme##
f64
##
	)
r

461 
	#__MATH_DECLARING_DOUBLE
 0

	)

462 
	#__MATH_DECLARING_FLOATN
 1

	)

463 #ià
__HAVE_DISTINCT_FLOAT64


464 
	~<b™s/m©hÿÎs-h–³r-funùiÚs.h
>

466 #ià
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

467 
	~<b™s/m©hÿÎs.h
>

469 #undeà
_MdoubË_


470 #undeà
__MATH_PRECNAME


471 #undeà
__MATH_DECLARING_DOUBLE


472 #undeà
__MATH_DECLARING_FLOATN


475 #ià
__HAVE_DISTINCT_FLOAT128
 || (
__HAVE_FLOAT128
 && !
defšed
 
_LIBC
)

476 
	#_MdoubË_
 
_Flßt128


	)

477 
	#__MATH_PRECNAME
(
Çme
,
r
èÇme##
f128
##
	)
r

478 
	#__MATH_DECLARING_DOUBLE
 0

	)

479 
	#__MATH_DECLARING_FLOATN
 1

	)

480 #ià
__HAVE_DISTINCT_FLOAT128


481 
	~<b™s/m©hÿÎs-h–³r-funùiÚs.h
>

483 #ià
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

484 
	~<b™s/m©hÿÎs.h
>

486 #undeà
_MdoubË_


487 #undeà
__MATH_PRECNAME


488 #undeà
__MATH_DECLARING_DOUBLE


489 #undeà
__MATH_DECLARING_FLOATN


492 #ià
__HAVE_DISTINCT_FLOAT32X
 || (
__HAVE_FLOAT32X
 && !
defšed
 
_LIBC
)

493 
	#_MdoubË_
 
_Flßt32x


	)

494 
	#__MATH_PRECNAME
(
Çme
,
r
èÇme##
f32x
##
	)
r

495 
	#__MATH_DECLARING_DOUBLE
 0

	)

496 
	#__MATH_DECLARING_FLOATN
 1

	)

497 #ià
__HAVE_DISTINCT_FLOAT32X


498 
	~<b™s/m©hÿÎs-h–³r-funùiÚs.h
>

500 #ià
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

501 
	~<b™s/m©hÿÎs.h
>

503 #undeà
_MdoubË_


504 #undeà
__MATH_PRECNAME


505 #undeà
__MATH_DECLARING_DOUBLE


506 #undeà
__MATH_DECLARING_FLOATN


509 #ià
__HAVE_DISTINCT_FLOAT64X
 || (
__HAVE_FLOAT64X
 && !
defšed
 
_LIBC
)

510 
	#_MdoubË_
 
_Flßt64x


	)

511 
	#__MATH_PRECNAME
(
Çme
,
r
èÇme##
f64x
##
	)
r

512 
	#__MATH_DECLARING_DOUBLE
 0

	)

513 
	#__MATH_DECLARING_FLOATN
 1

	)

514 #ià
__HAVE_DISTINCT_FLOAT64X


515 
	~<b™s/m©hÿÎs-h–³r-funùiÚs.h
>

517 #ià
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

518 
	~<b™s/m©hÿÎs.h
>

520 #undeà
_MdoubË_


521 #undeà
__MATH_PRECNAME


522 #undeà
__MATH_DECLARING_DOUBLE


523 #undeà
__MATH_DECLARING_FLOATN


526 #ià
__HAVE_DISTINCT_FLOAT128X
 || (
__HAVE_FLOAT128X
 && !
defšed
 
_LIBC
)

527 
	#_MdoubË_
 
_Flßt128x


	)

528 
	#__MATH_PRECNAME
(
Çme
,
r
èÇme##
f128x
##
	)
r

529 
	#__MATH_DECLARING_DOUBLE
 0

	)

530 
	#__MATH_DECLARING_FLOATN
 1

	)

531 #ià
__HAVE_DISTINCT_FLOAT128X


532 
	~<b™s/m©hÿÎs-h–³r-funùiÚs.h
>

534 #ià
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

535 
	~<b™s/m©hÿÎs.h
>

537 #undeà
_MdoubË_


538 #undeà
__MATH_PRECNAME


539 #undeà
__MATH_DECLARING_DOUBLE


540 #undeà
__MATH_DECLARING_FLOATN


543 #undeà
__MATHDECL_1_IMPL


544 #undeà
__MATHDECL_1


545 #undeà
__MATHDECL_ALIAS


546 #undeà
__MATHDECL


547 #undeà
__MATHCALL


550 
	#__MATHCALL_NARROW_ARGS_1
 (
_M¬g_
 
__x
)

	)

551 
	#__MATHCALL_NARROW_ARGS_2
 (
_M¬g_
 
__x
, _M¬g_ 
__y
)

	)

552 
	#__MATHCALL_NARROW_ARGS_3
 (
_M¬g_
 
__x
, _M¬g_ 
__y
, _M¬g_ 
__z
)

	)

553 
	#__MATHCALL_NARROW_NORMAL
(
func
, 
Çrgs
) \

554 
_M»t_
 
func
 
__MATHCALL_NARROW_ARGS_
 ## 
Çrgs
 
__THROW


	)

555 
	#__MATHCALL_NARROW_REDIR
(
func
, 
»dœ
, 
Çrgs
) \

556 
_M»t_
 
	`__REDIRECT_NTH
 (
func
, 
__MATHCALL_NARROW_ARGS_
 ## 
Çrgs
, \

557 
»dœ
)

	)

558 
	#__MATHCALL_NARROW
(
func
, 
»dœ
, 
Çrgs
) \

559 
	`__MATHCALL_NARROW_NORMAL
 (
func
, 
Çrgs
)

	)

561 #ià
	`__GLIBC_USE
 (
IEC_60559_BFP_EXT_C2X
)

563 
	#_M»t_
 

	)

564 
	#_M¬g_
 

	)

565 
	#__MATHCALL_NAME
(
Çme
è
f
 ## 
	)
name

566 
	~<b™s/m©hÿÎs-Ç¼ow.h
>

567 #undeà
_M»t_


568 #undeà
_M¬g_


569 #undeà
__MATHCALL_NAME


571 
	#_M»t_
 

	)

572 
	#_M¬g_
 

	)

573 
	#__MATHCALL_NAME
(
Çme
è
f
 ##‚am## 
l


	)

574 #ifdeà
__LDBL_COMPAT


575 
	#__MATHCALL_REDIR_NAME
(
Çme
è
f
 ## 
	)
name

576 
	#__MATHCALL_REDIR_NAME2
(
Çme
è
f
 ## 
	)
name

577 #undeà
__MATHCALL_NARROW


578 
	#__MATHCALL_NARROW
(
func
, 
»dœ
, 
Çrgs
) \

579 
	`__MATHCALL_NARROW_REDIR
 (
func
, 
»dœ
, 
Çrgs
)

	)

580 #–ià
__LDOUBLE_REDIRECTS_TO_FLOAT128_ABI
 == 1

581 
	#__MATHCALL_REDIR_NAME
(
Çme
è
__
 ## 
f32
 ##‚am## 
›“128


	)

582 
	#__MATHCALL_REDIR_NAME2
(
Çme
è
__
 ## 
f32
 ##‚am## 
›“128


	)

583 #undeà
__MATHCALL_NARROW


584 
	#__MATHCALL_NARROW
(
func
, 
»dœ
, 
Çrgs
) \

585 
	`__MATHCALL_NARROW_REDIR
 (
func
, 
»dœ
, 
Çrgs
)

	)

587 
	~<b™s/m©hÿÎs-Ç¼ow.h
>

588 #undeà
_M»t_


589 #undeà
_M¬g_


590 #undeà
__MATHCALL_NAME


591 #ià
defšed
 
__LDBL_COMPAT
 \

592 || 
__LDOUBLE_REDIRECTS_TO_FLOAT128_ABI
 == 1

593 #undeà
__MATHCALL_REDIR_NAME


594 #undeà
__MATHCALL_REDIR_NAME2


595 #undeà
__MATHCALL_NARROW


596 
	#__MATHCALL_NARROW
(
func
, 
»dœ
, 
Çrgs
) \

597 
	`__MATHCALL_NARROW_NORMAL
 (
func
, 
Çrgs
)

	)

600 
	#_M»t_
 

	)

601 
	#_M¬g_
 

	)

602 
	#__MATHCALL_NAME
(
Çme
è
d
 ##‚am## 
l


	)

603 #ifdeà
__LDBL_COMPAT


604 
	#__MATHCALL_REDIR_NAME
(
Çme
è
__Ædbl_d
 ##‚am## 
l


	)

605 
	#__MATHCALL_REDIR_NAME2
(
Çme
è
	)
name

606 #undeà
__MATHCALL_NARROW


607 
	#__MATHCALL_NARROW
(
func
, 
»dœ
, 
Çrgs
) \

608 
	`__MATHCALL_NARROW_REDIR
 (
func
, 
»dœ
, 
Çrgs
)

	)

609 #–ià
__LDOUBLE_REDIRECTS_TO_FLOAT128_ABI
 == 1

610 
	#__MATHCALL_REDIR_NAME
(
Çme
è
__
 ## 
f64
 ##‚am## 
›“128


	)

611 
	#__MATHCALL_REDIR_NAME2
(
Çme
è
__
 ## 
f64
 ##‚am## 
›“128


	)

612 #undeà
__MATHCALL_NARROW


613 
	#__MATHCALL_NARROW
(
func
, 
»dœ
, 
Çrgs
) \

614 
	`__MATHCALL_NARROW_REDIR
 (
func
, 
»dœ
, 
Çrgs
)

	)

616 
	~<b™s/m©hÿÎs-Ç¼ow.h
>

617 #undeà
_M»t_


618 #undeà
_M¬g_


619 #undeà
__MATHCALL_NAME


620 #ià
defšed
 
__LDBL_COMPAT
 \

621 || 
__LDOUBLE_REDIRECTS_TO_FLOAT128_ABI
 == 1

622 #undeà
__MATHCALL_REDIR_NAME


623 #undeà
__MATHCALL_REDIR_NAME2


624 #undeà
__MATHCALL_NARROW


625 
	#__MATHCALL_NARROW
(
func
, 
»dœ
, 
Çrgs
) \

626 
	`__MATHCALL_NARROW_NORMAL
 (
func
, 
Çrgs
)

	)

631 #ià
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

633 #ià
__HAVE_FLOAT16
 && 
__HAVE_FLOAT32


634 
	#_M»t_
 
_Flßt16


	)

635 
	#_M¬g_
 
_Flßt32


	)

636 
	#__MATHCALL_NAME
(
Çme
è
f16
 ##‚am## 
f32


	)

637 
	~<b™s/m©hÿÎs-Ç¼ow.h
>

638 #undeà
_M»t_


639 #undeà
_M¬g_


640 #undeà
__MATHCALL_NAME


643 #ià
__HAVE_FLOAT16
 && 
__HAVE_FLOAT32X


644 
	#_M»t_
 
_Flßt16


	)

645 
	#_M¬g_
 
_Flßt32x


	)

646 
	#__MATHCALL_NAME
(
Çme
è
f16
 ##‚am## 
f32x


	)

647 
	~<b™s/m©hÿÎs-Ç¼ow.h
>

648 #undeà
_M»t_


649 #undeà
_M¬g_


650 #undeà
__MATHCALL_NAME


653 #ià
__HAVE_FLOAT16
 && 
__HAVE_FLOAT64


654 
	#_M»t_
 
_Flßt16


	)

655 
	#_M¬g_
 
_Flßt64


	)

656 
	#__MATHCALL_NAME
(
Çme
è
f16
 ##‚am## 
f64


	)

657 
	~<b™s/m©hÿÎs-Ç¼ow.h
>

658 #undeà
_M»t_


659 #undeà
_M¬g_


660 #undeà
__MATHCALL_NAME


663 #ià
__HAVE_FLOAT16
 && 
__HAVE_FLOAT64X


664 
	#_M»t_
 
_Flßt16


	)

665 
	#_M¬g_
 
_Flßt64x


	)

666 
	#__MATHCALL_NAME
(
Çme
è
f16
 ##‚am## 
f64x


	)

667 
	~<b™s/m©hÿÎs-Ç¼ow.h
>

668 #undeà
_M»t_


669 #undeà
_M¬g_


670 #undeà
__MATHCALL_NAME


673 #ià
__HAVE_FLOAT16
 && 
__HAVE_FLOAT128


674 
	#_M»t_
 
_Flßt16


	)

675 
	#_M¬g_
 
_Flßt128


	)

676 
	#__MATHCALL_NAME
(
Çme
è
f16
 ##‚am## 
f128


	)

677 
	~<b™s/m©hÿÎs-Ç¼ow.h
>

678 #undeà
_M»t_


679 #undeà
_M¬g_


680 #undeà
__MATHCALL_NAME


683 #ià
__HAVE_FLOAT16
 && 
__HAVE_FLOAT128X


684 
	#_M»t_
 
_Flßt16


	)

685 
	#_M¬g_
 
_Flßt128x


	)

686 
	#__MATHCALL_NAME
(
Çme
è
f16
 ##‚am## 
f128x


	)

687 
	~<b™s/m©hÿÎs-Ç¼ow.h
>

688 #undeà
_M»t_


689 #undeà
_M¬g_


690 #undeà
__MATHCALL_NAME


693 #ià
__HAVE_FLOAT32
 && 
__HAVE_FLOAT32X


694 
	#_M»t_
 
_Flßt32


	)

695 
	#_M¬g_
 
_Flßt32x


	)

696 
	#__MATHCALL_NAME
(
Çme
è
f32
 ##‚am## 
f32x


	)

697 
	~<b™s/m©hÿÎs-Ç¼ow.h
>

698 #undeà
_M»t_


699 #undeà
_M¬g_


700 #undeà
__MATHCALL_NAME


703 #ià
__HAVE_FLOAT32
 && 
__HAVE_FLOAT64


704 
	#_M»t_
 
_Flßt32


	)

705 
	#_M¬g_
 
_Flßt64


	)

706 
	#__MATHCALL_NAME
(
Çme
è
f32
 ##‚am## 
f64


	)

707 
	~<b™s/m©hÿÎs-Ç¼ow.h
>

708 #undeà
_M»t_


709 #undeà
_M¬g_


710 #undeà
__MATHCALL_NAME


713 #ià
__HAVE_FLOAT32
 && 
__HAVE_FLOAT64X


714 
	#_M»t_
 
_Flßt32


	)

715 
	#_M¬g_
 
_Flßt64x


	)

716 
	#__MATHCALL_NAME
(
Çme
è
f32
 ##‚am## 
f64x


	)

717 
	~<b™s/m©hÿÎs-Ç¼ow.h
>

718 #undeà
_M»t_


719 #undeà
_M¬g_


720 #undeà
__MATHCALL_NAME


723 #ià
__HAVE_FLOAT32
 && 
__HAVE_FLOAT128


724 
	#_M»t_
 
_Flßt32


	)

725 
	#_M¬g_
 
_Flßt128


	)

726 
	#__MATHCALL_NAME
(
Çme
è
f32
 ##‚am## 
f128


	)

727 
	~<b™s/m©hÿÎs-Ç¼ow.h
>

728 #undeà
_M»t_


729 #undeà
_M¬g_


730 #undeà
__MATHCALL_NAME


733 #ià
__HAVE_FLOAT32
 && 
__HAVE_FLOAT128X


734 
	#_M»t_
 
_Flßt32


	)

735 
	#_M¬g_
 
_Flßt128x


	)

736 
	#__MATHCALL_NAME
(
Çme
è
f32
 ##‚am## 
f128x


	)

737 
	~<b™s/m©hÿÎs-Ç¼ow.h
>

738 #undeà
_M»t_


739 #undeà
_M¬g_


740 #undeà
__MATHCALL_NAME


743 #ià
__HAVE_FLOAT32X
 && 
__HAVE_FLOAT64


744 
	#_M»t_
 
_Flßt32x


	)

745 
	#_M¬g_
 
_Flßt64


	)

746 
	#__MATHCALL_NAME
(
Çme
è
f32x
 ##‚am## 
f64


	)

747 
	~<b™s/m©hÿÎs-Ç¼ow.h
>

748 #undeà
_M»t_


749 #undeà
_M¬g_


750 #undeà
__MATHCALL_NAME


753 #ià
__HAVE_FLOAT32X
 && 
__HAVE_FLOAT64X


754 
	#_M»t_
 
_Flßt32x


	)

755 
	#_M¬g_
 
_Flßt64x


	)

756 
	#__MATHCALL_NAME
(
Çme
è
f32x
 ##‚am## 
f64x


	)

757 
	~<b™s/m©hÿÎs-Ç¼ow.h
>

758 #undeà
_M»t_


759 #undeà
_M¬g_


760 #undeà
__MATHCALL_NAME


763 #ià
__HAVE_FLOAT32X
 && 
__HAVE_FLOAT128


764 
	#_M»t_
 
_Flßt32x


	)

765 
	#_M¬g_
 
_Flßt128


	)

766 
	#__MATHCALL_NAME
(
Çme
è
f32x
 ##‚am## 
f128


	)

767 
	~<b™s/m©hÿÎs-Ç¼ow.h
>

768 #undeà
_M»t_


769 #undeà
_M¬g_


770 #undeà
__MATHCALL_NAME


773 #ià
__HAVE_FLOAT32X
 && 
__HAVE_FLOAT128X


774 
	#_M»t_
 
_Flßt32x


	)

775 
	#_M¬g_
 
_Flßt128x


	)

776 
	#__MATHCALL_NAME
(
Çme
è
f32x
 ##‚am## 
f128x


	)

777 
	~<b™s/m©hÿÎs-Ç¼ow.h
>

778 #undeà
_M»t_


779 #undeà
_M¬g_


780 #undeà
__MATHCALL_NAME


783 #ià
__HAVE_FLOAT64
 && 
__HAVE_FLOAT64X


784 
	#_M»t_
 
_Flßt64


	)

785 
	#_M¬g_
 
_Flßt64x


	)

786 
	#__MATHCALL_NAME
(
Çme
è
f64
 ##‚am## 
f64x


	)

787 
	~<b™s/m©hÿÎs-Ç¼ow.h
>

788 #undeà
_M»t_


789 #undeà
_M¬g_


790 #undeà
__MATHCALL_NAME


793 #ià
__HAVE_FLOAT64
 && 
__HAVE_FLOAT128


794 
	#_M»t_
 
_Flßt64


	)

795 
	#_M¬g_
 
_Flßt128


	)

796 
	#__MATHCALL_NAME
(
Çme
è
f64
 ##‚am## 
f128


	)

797 
	~<b™s/m©hÿÎs-Ç¼ow.h
>

798 #undeà
_M»t_


799 #undeà
_M¬g_


800 #undeà
__MATHCALL_NAME


803 #ià
__HAVE_FLOAT64
 && 
__HAVE_FLOAT128X


804 
	#_M»t_
 
_Flßt64


	)

805 
	#_M¬g_
 
_Flßt128x


	)

806 
	#__MATHCALL_NAME
(
Çme
è
f64
 ##‚am## 
f128x


	)

807 
	~<b™s/m©hÿÎs-Ç¼ow.h
>

808 #undeà
_M»t_


809 #undeà
_M¬g_


810 #undeà
__MATHCALL_NAME


813 #ià
__HAVE_FLOAT64X
 && 
__HAVE_FLOAT128


814 
	#_M»t_
 
_Flßt64x


	)

815 
	#_M¬g_
 
_Flßt128


	)

816 
	#__MATHCALL_NAME
(
Çme
è
f64x
 ##‚am## 
f128


	)

817 
	~<b™s/m©hÿÎs-Ç¼ow.h
>

818 #undeà
_M»t_


819 #undeà
_M¬g_


820 #undeà
__MATHCALL_NAME


823 #ià
__HAVE_FLOAT64X
 && 
__HAVE_FLOAT128X


824 
	#_M»t_
 
_Flßt64x


	)

825 
	#_M¬g_
 
_Flßt128x


	)

826 
	#__MATHCALL_NAME
(
Çme
è
f64x
 ##‚am## 
f128x


	)

827 
	~<b™s/m©hÿÎs-Ç¼ow.h
>

828 #undeà
_M»t_


829 #undeà
_M¬g_


830 #undeà
__MATHCALL_NAME


833 #ià
__HAVE_FLOAT128
 && 
__HAVE_FLOAT128X


834 
	#_M»t_
 
_Flßt128


	)

835 
	#_M¬g_
 
_Flßt128x


	)

836 
	#__MATHCALL_NAME
(
Çme
è
f128
 ##‚am## 
f128x


	)

837 
	~<b™s/m©hÿÎs-Ç¼ow.h
>

838 #undeà
_M»t_


839 #undeà
_M¬g_


840 #undeà
__MATHCALL_NAME


845 #undeà
__MATHCALL_NARROW_ARGS_1


846 #undeà
__MATHCALL_NARROW_ARGS_2


847 #undeà
__MATHCALL_NARROW_ARGS_3


848 #undeà
__MATHCALL_NARROW_NORMAL


849 #undeà
__MATHCALL_NARROW_REDIR


850 #undeà
__MATHCALL_NARROW


852 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


854 
signgam
;

857 #ià(
__HAVE_DISTINCT_FLOAT16
 \

858 || 
__HAVE_DISTINCT_FLOAT32
 \

859 || 
__HAVE_DISTINCT_FLOAT64
 \

860 || 
__HAVE_DISTINCT_FLOAT32X
 \

861 || 
__HAVE_DISTINCT_FLOAT64X
 \

862 || 
__HAVE_DISTINCT_FLOAT128X
)

875 #ifdeà
__NO_LONG_DOUBLE_MATH


876 #ià
__HAVE_DISTINCT_FLOAT128


879 
	#__MATH_TG
(
TG_ARG
, 
FUNC
, 
ARGS
) \

880 ( (
TG_ARG
è=ğ (è? 
FUNC
 ## 
f
 
ARGS
 : FUNC ARGS)

	)

881 #–ià
__HAVE_DISTINCT_FLOAT128


882 #ià
__HAVE_GENERIC_SELECTION


883 #ià
__HAVE_FLOATN_NOT_TYPEDEF
 && 
__HAVE_FLOAT32


884 
	#__MATH_TG_F32
(
FUNC
, 
ARGS
è
_Flßt32
: FUNC ## 
f
 ARGS,

	)

886 
	#__MATH_TG_F32
(
FUNC
, 
ARGS
)

	)

888 #ià
__HAVE_FLOATN_NOT_TYPEDEF
 && 
__HAVE_FLOAT64X


889 #ià
__HAVE_FLOAT64X_LONG_DOUBLE


890 
	#__MATH_TG_F64X
(
FUNC
, 
ARGS
è
_Flßt64x
: FUNC ## 
l
 ARGS,

	)

892 
	#__MATH_TG_F64X
(
FUNC
, 
ARGS
è
_Flßt64x
: FUNC ## 
f128
 ARGS,

	)

895 
	#__MATH_TG_F64X
(
FUNC
, 
ARGS
)

	)

897 
	#__MATH_TG
(
TG_ARG
, 
FUNC
, 
ARGS
) \

898 
	`_G’”ic
 ((
TG_ARG
), \

899 : 
FUNC
 ## 
f
 
ARGS
, \

900 
	`__MATH_TG_F32
 (
FUNC
, 
ARGS
) \

901 : 
FUNC
 
ARGS
, \

902 : 
FUNC
 ## 
l
 
ARGS
, \

903 
	`__MATH_TG_F64X
 (
FUNC
, 
ARGS
) \

904 
_Flßt128
: 
FUNC
 ## 
f128
 
ARGS
)

	)

906 #ià
__HAVE_FLOATN_NOT_TYPEDEF


909 
	#__MATH_TG
(
TG_ARG
, 
FUNC
, 
ARGS
) \

910 
__butš_choo£_ex´
 \

911 (
	`__butš_ty³s_com·tibË_p
 (
	`__ty³of
 (
TG_ARG
), ), \

912 
FUNC
 ## 
f
 
ARGS
, \

913 
__butš_choo£_ex´
 \

914 (
	`__butš_ty³s_com·tibË_p
 (
	`__ty³of
 (
TG_ARG
), ), \

915 
FUNC
 
ARGS
, \

916 
__butš_choo£_ex´
 \

917 (
	`__butš_ty³s_com·tibË_p
 (
	`__ty³of
 (
TG_ARG
), ), \

918 
FUNC
 ## 
l
 
ARGS
, \

919 
FUNC
 ## 
f128
 
ARGS
)))

	)

922 
	#__MATH_TG
(
TG_ARG
, 
FUNC
, 
ARGS
) \

923 ( (
TG_ARG
) ==  () \

924 ? 
FUNC
 ## 
f
 
ARGS
 \

925 :  (
TG_ARG
) ==  () \

926 ? 
FUNC
 
ARGS
 \

927 : 
FUNC
 ## 
l
 
ARGS
)

	)

931 #ifdeà
__USE_ISOC99


936 
FP_NAN
 =

937 
	#FP_NAN
 0

	)

938 
FP_NAN
,

939 
FP_INFINITE
 =

940 
	#FP_INFINITE
 1

	)

941 
FP_INFINITE
,

942 
FP_ZERO
 =

943 
	#FP_ZERO
 2

	)

944 
FP_ZERO
,

945 
FP_SUBNORMAL
 =

946 
	#FP_SUBNORMAL
 3

	)

947 
FP_SUBNORMAL
,

948 
FP_NORMAL
 =

949 
	#FP_NORMAL
 4

	)

950 
FP_NORMAL


958 #ià((
	`__GNUC_PREREQ
 (4,4è&& !
defšed
 
__SUPPORT_SNAN__
) \

959 || 
	`__glibc_şªg_´”eq
 (2,8)) \

960 && (!
defšed
 
__OPTIMIZE_SIZE__
 || defšed 
__ılu¥lus
)

967 
	#åşassify
(
x
è
	`__butš_åşassify
 (
FP_NAN
, 
FP_INFINITE
, \

968 
FP_NORMAL
, 
FP_SUBNORMAL
, 
FP_ZERO
, 
x
)

	)

970 
	#åşassify
(
x
è
	`__MATH_TG
 ((x), 
__åşassify
, (x))

	)

974 #ià
	`__GNUC_PREREQ
 (6,0è|| 
	`__glibc_şªg_´”eq
 (3,3)

975 
	#signb™
(
x
è
	`__butš_signb™
 (x)

	)

976 #–ià
defšed
 
__ılu¥lus


984 
	#signb™
(
x
è
	`__butš_signb™l
 (x)

	)

985 #–ià
	`__GNUC_PREREQ
 (4,0)

986 
	#signb™
(
x
è
	`__MATH_TG
 ((x), 
__butš_signb™
, (x))

	)

988 
	#signb™
(
x
è
	`__MATH_TG
 ((x), 
__signb™
, (x))

	)

992 #ià(
	`__GNUC_PREREQ
 (4,4è&& !
defšed
 
__SUPPORT_SNAN__
) \

993 || 
	$__glibc_şªg_´”eq
 (2,8)

994 
	#isfš™e
(
x
è
	`__butš_isfš™e
 (x)

	)

996 
	#isfš™e
(
x
è
	`__MATH_TG
 ((x), 
__fš™e
, (x))

	)

1000 #ià(
	`__GNUC_PREREQ
 (4,4è&& !
defšed
 
__SUPPORT_SNAN__
) \

1001 || 
	$__glibc_şªg_´”eq
 (2,8)

1002 
	#i¢Üm®
(
x
è
	`__butš_i¢Üm®
 (x)

	)

1004 
	#i¢Üm®
(
x
è(
	`åşassify
 (xè=ğ
FP_NORMAL
)

	)

1009 #ià(
	`__GNUC_PREREQ
 (4,4è&& !
defšed
 
__SUPPORT_SNAN__
) \

1010 || 
	$__glibc_şªg_´”eq
 (2,8)

1011 
	#i¢ª
(
x
è
	`__butš_i¢ª
 (x)

	)

1013 
	#i¢ª
(
x
è
	`__MATH_TG
 ((x), 
__i¢ª
, (x))

	)

1017 #ià
__HAVE_DISTINCT_FLOAT128
 && !
	`__GNUC_PREREQ
 (7,0) \

1018 && !
defšed
 
__SUPPORT_SNAN__
 && !defšed 
__ılu¥lus


1024 
	#isšf
(
x
) \

1025 (
	`__butš_ty³s_com·tibË_p
 (
	`__ty³of
 (
x
), 
_Flßt128
) \

1026 ? 
	`__isšff128
 (
x
è: 
	`__butš_isšf_sign
 (x))

	)

1027 #–ià(
	`__GNUC_PREREQ
 (4,4è&& !
defšed
 
__SUPPORT_SNAN__
) \

1028 || 
	$__glibc_şªg_´”eq
 (3,7)

1029 
	#isšf
(
x
è
	`__butš_isšf_sign
 (x)

	)

1031 
	#isšf
(
x
è
	`__MATH_TG
 ((x), 
__isšf
, (x))

	)

1035 
	#MATH_ERRNO
 1

	)

1036 
	#MATH_ERREXCEPT
 2

	)

1043 #ifdeà
__FAST_MATH__


1044 
	#m©h_”rhªdlšg
 0

	)

1045 #–ià
defšed
 
__NO_MATH_ERRNO__


1046 
	#m©h_”rhªdlšg
 (
MATH_ERREXCEPT
)

	)

1048 
	#m©h_”rhªdlšg
 (
MATH_ERRNO
 | 
MATH_ERREXCEPT
)

	)

1053 #ià
	`__GLIBC_USE
 (
IEC_60559_BFP_EXT_C2X
)

1054 
	~<b™s/isÿnÚiÿl.h
>

1057 #iâdeà
__ılu¥lus


1058 
	#issigÇlšg
(
x
è
	`__MATH_TG
 ((x), 
__issigÇlšg
, (x))

	)

1067 
šlše
 
	`issigÇlšg
 (
__v®
è{  
	`__issigÇlšgf
 (__val); }

1068 
šlše
 
	`issigÇlšg
 (
__v®
è{  
	`__issigÇlšg
 (__val); }

1069 
šlše
 

1070 
	`issigÇlšg
 (
__v®
)

1072 #ifdeà
__NO_LONG_DOUBLE_MATH


1073  
	`__issigÇlšg
 (
__v®
);

1075  
	`__issigÇlšgl
 (
__v®
);

1078 #ià
__HAVE_FLOAT128_UNLIKE_LDBL


1081 
šlše
 
	`issigÇlšg
 (
_Flßt128
 
__v®
è{  
	`__issigÇlšgf128
 (__val); }

1083 
	}
}

1087 
	#issubnÜm®
(
x
è(
	`åşassify
 (xè=ğ
FP_SUBNORMAL
)

	)

1090 #iâdeà
__ılu¥lus


1091 #ifdeà
__SUPPORT_SNAN__


1092 
	#isz”o
(
x
è(
	`åşassify
 (xè=ğ
FP_ZERO
)

	)

1094 
	#isz”o
(
x
è(((
	`__ty³of
 (x)è(x)è=ğ0)

	)

1098 #ifdeà
__SUPPORT_SNAN__


1099 
šlše
 

1100 
isz”o
 (
__v®
)

1102  
__åşassifyf
 (
__v®
è=ğ
FP_ZERO
;

1104 
šlše
 

1105 
isz”o
 (
__v®
)

1107  
__åşassify
 (
__v®
è=ğ
FP_ZERO
;

1109 
šlše
 

1110 
isz”o
 (
__v®
)

1112 #ifdeà
__NO_LONG_DOUBLE_MATH


1113  
__åşassify
 (
__v®
è=ğ
FP_ZERO
;

1115  
__åşassifyl
 (
__v®
è=ğ
FP_ZERO
;

1118 #ià
__HAVE_FLOAT128_UNLIKE_LDBL


1121 
šlše
 

1122 
isz”o
 (
_Flßt128
 
__v®
)

1124  
__åşassifyf128
 (
__v®
è=ğ
FP_ZERO
;

1128 
‹m¶©e
 <
şass
 
__T
> 
šlše
 
boŞ


1129 
isz”o
 (
__T
 
__v®
)

1131  
__v®
 == 0;

1138 #ifdeà
__USE_XOPEN


1140 
	#MAXFLOAT
 3.40282347e+38F

	)

1145 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


1146 
	#M_E
 2.7182818284590452354

	)

1147 
	#M_LOG2E
 1.4426950408889634074

	)

1148 
	#M_LOG10E
 0.43429448190325182765

	)

1149 
	#M_LN2
 0.69314718055994530942

	)

1150 
	#M_LN10
 2.30258509299404568402

	)

1151 
	#M_PI
 3.14159265358979323846

	)

1152 
	#M_PI_2
 1.57079632679489661923

	)

1153 
	#M_PI_4
 0.78539816339744830962

	)

1154 
	#M_1_PI
 0.31830988618379067154

	)

1155 
	#M_2_PI
 0.63661977236758134308

	)

1156 
	#M_2_SQRTPI
 1.12837916709551257390

	)

1157 
	#M_SQRT2
 1.41421356237309504880

	)

1158 
	#M_SQRT1_2
 0.70710678118654752440

	)

1162 #ifdeà
__USE_GNU


1163 
	#M_Ef
 2.7182818284590452354à

	)

1164 
	#M_LOG2Ef
 1.4426950408889634074à

	)

1165 
	#M_LOG10Ef
 0.43429448190325182765à

	)

1166 
	#M_LN2f
 0.69314718055994530942à

	)

1167 
	#M_LN10f
 2.30258509299404568402à

	)

1168 
	#M_PIf
 3.14159265358979323846à

	)

1169 
	#M_PI_2f
 1.57079632679489661923à

	)

1170 
	#M_PI_4f
 0.78539816339744830962à

	)

1171 
	#M_1_PIf
 0.31830988618379067154à

	)

1172 
	#M_2_PIf
 0.63661977236758134308à

	)

1173 
	#M_2_SQRTPIf
 1.12837916709551257390à

	)

1174 
	#M_SQRT2f
 1.41421356237309504880à

	)

1175 
	#M_SQRT1_2f
 0.70710678118654752440à

	)

1181 #ifdeà
__USE_GNU


1182 
	#M_El
 2.718281828459045235360287471352662498L

	)

1183 
	#M_LOG2El
 1.442695040888963407359924681001892137L

	)

1184 
	#M_LOG10El
 0.434294481903251827651128918916605082L

	)

1185 
	#M_LN2l
 0.693147180559945309417232121458176568L

	)

1186 
	#M_LN10l
 2.302585092994045684017991454684364208L

	)

1187 
	#M_PIl
 3.141592653589793238462643383279502884L

	)

1188 
	#M_PI_2l
 1.570796326794896619231321691639751442L

	)

1189 
	#M_PI_4l
 0.785398163397448309615660845819875721L

	)

1190 
	#M_1_PIl
 0.318309886183790671537767526745028724L

	)

1191 
	#M_2_PIl
 0.636619772367581343075535053490057448L

	)

1192 
	#M_2_SQRTPIl
 1.128379167095512573896158903121545172L

	)

1193 
	#M_SQRT2l
 1.414213562373095048801688724209698079L

	)

1194 
	#M_SQRT1_2l
 0.707106781186547524400844362104849039L

	)

1197 #ià
__HAVE_FLOAT16
 && 
defšed
 
__USE_GNU


1198 
	#M_Ef16
 
	`__f16
 (2.718281828459045235360287471352662498è

	)

1199 
	#M_LOG2Ef16
 
	`__f16
 (1.442695040888963407359924681001892137è

	)

1200 
	#M_LOG10Ef16
 
	`__f16
 (0.434294481903251827651128918916605082è

	)

1201 
	#M_LN2f16
 
	`__f16
 (0.693147180559945309417232121458176568è

	)

1202 
	#M_LN10f16
 
	`__f16
 (2.302585092994045684017991454684364208è

	)

1203 
	#M_PIf16
 
	`__f16
 (3.141592653589793238462643383279502884è

	)

1204 
	#M_PI_2f16
 
	`__f16
 (1.570796326794896619231321691639751442è

	)

1205 
	#M_PI_4f16
 
	`__f16
 (0.785398163397448309615660845819875721è

	)

1206 
	#M_1_PIf16
 
	`__f16
 (0.318309886183790671537767526745028724è

	)

1207 
	#M_2_PIf16
 
	`__f16
 (0.636619772367581343075535053490057448è

	)

1208 
	#M_2_SQRTPIf16
 
	`__f16
 (1.128379167095512573896158903121545172è

	)

1209 
	#M_SQRT2f16
 
	`__f16
 (1.414213562373095048801688724209698079è

	)

1210 
	#M_SQRT1_2f16
 
	`__f16
 (0.707106781186547524400844362104849039è

	)

1213 #ià
__HAVE_FLOAT32
 && 
defšed
 
__USE_GNU


1214 
	#M_Ef32
 
	`__f32
 (2.718281828459045235360287471352662498è

	)

1215 
	#M_LOG2Ef32
 
	`__f32
 (1.442695040888963407359924681001892137è

	)

1216 
	#M_LOG10Ef32
 
	`__f32
 (0.434294481903251827651128918916605082è

	)

1217 
	#M_LN2f32
 
	`__f32
 (0.693147180559945309417232121458176568è

	)

1218 
	#M_LN10f32
 
	`__f32
 (2.302585092994045684017991454684364208è

	)

1219 
	#M_PIf32
 
	`__f32
 (3.141592653589793238462643383279502884è

	)

1220 
	#M_PI_2f32
 
	`__f32
 (1.570796326794896619231321691639751442è

	)

1221 
	#M_PI_4f32
 
	`__f32
 (0.785398163397448309615660845819875721è

	)

1222 
	#M_1_PIf32
 
	`__f32
 (0.318309886183790671537767526745028724è

	)

1223 
	#M_2_PIf32
 
	`__f32
 (0.636619772367581343075535053490057448è

	)

1224 
	#M_2_SQRTPIf32
 
	`__f32
 (1.128379167095512573896158903121545172è

	)

1225 
	#M_SQRT2f32
 
	`__f32
 (1.414213562373095048801688724209698079è

	)

1226 
	#M_SQRT1_2f32
 
	`__f32
 (0.707106781186547524400844362104849039è

	)

1229 #ià
__HAVE_FLOAT64
 && 
defšed
 
__USE_GNU


1230 
	#M_Ef64
 
	`__f64
 (2.718281828459045235360287471352662498è

	)

1231 
	#M_LOG2Ef64
 
	`__f64
 (1.442695040888963407359924681001892137è

	)

1232 
	#M_LOG10Ef64
 
	`__f64
 (0.434294481903251827651128918916605082è

	)

1233 
	#M_LN2f64
 
	`__f64
 (0.693147180559945309417232121458176568è

	)

1234 
	#M_LN10f64
 
	`__f64
 (2.302585092994045684017991454684364208è

	)

1235 
	#M_PIf64
 
	`__f64
 (3.141592653589793238462643383279502884è

	)

1236 
	#M_PI_2f64
 
	`__f64
 (1.570796326794896619231321691639751442è

	)

1237 
	#M_PI_4f64
 
	`__f64
 (0.785398163397448309615660845819875721è

	)

1238 
	#M_1_PIf64
 
	`__f64
 (0.318309886183790671537767526745028724è

	)

1239 
	#M_2_PIf64
 
	`__f64
 (0.636619772367581343075535053490057448è

	)

1240 
	#M_2_SQRTPIf64
 
	`__f64
 (1.128379167095512573896158903121545172è

	)

1241 
	#M_SQRT2f64
 
	`__f64
 (1.414213562373095048801688724209698079è

	)

1242 
	#M_SQRT1_2f64
 
	`__f64
 (0.707106781186547524400844362104849039è

	)

1245 #ià
__HAVE_FLOAT128
 && 
defšed
 
__USE_GNU


1246 
	#M_Ef128
 
	`__f128
 (2.718281828459045235360287471352662498è

	)

1247 
	#M_LOG2Ef128
 
	`__f128
 (1.442695040888963407359924681001892137è

	)

1248 
	#M_LOG10Ef128
 
	`__f128
 (0.434294481903251827651128918916605082è

	)

1249 
	#M_LN2f128
 
	`__f128
 (0.693147180559945309417232121458176568è

	)

1250 
	#M_LN10f128
 
	`__f128
 (2.302585092994045684017991454684364208è

	)

1251 
	#M_PIf128
 
	`__f128
 (3.141592653589793238462643383279502884è

	)

1252 
	#M_PI_2f128
 
	`__f128
 (1.570796326794896619231321691639751442è

	)

1253 
	#M_PI_4f128
 
	`__f128
 (0.785398163397448309615660845819875721è

	)

1254 
	#M_1_PIf128
 
	`__f128
 (0.318309886183790671537767526745028724è

	)

1255 
	#M_2_PIf128
 
	`__f128
 (0.636619772367581343075535053490057448è

	)

1256 
	#M_2_SQRTPIf128
 
	`__f128
 (1.128379167095512573896158903121545172è

	)

1257 
	#M_SQRT2f128
 
	`__f128
 (1.414213562373095048801688724209698079è

	)

1258 
	#M_SQRT1_2f128
 
	`__f128
 (0.707106781186547524400844362104849039è

	)

1261 #ià
__HAVE_FLOAT32X
 && 
defšed
 
__USE_GNU


1262 
	#M_Ef32x
 
	`__f32x
 (2.718281828459045235360287471352662498è

	)

1263 
	#M_LOG2Ef32x
 
	`__f32x
 (1.442695040888963407359924681001892137è

	)

1264 
	#M_LOG10Ef32x
 
	`__f32x
 (0.434294481903251827651128918916605082è

	)

1265 
	#M_LN2f32x
 
	`__f32x
 (0.693147180559945309417232121458176568è

	)

1266 
	#M_LN10f32x
 
	`__f32x
 (2.302585092994045684017991454684364208è

	)

1267 
	#M_PIf32x
 
	`__f32x
 (3.141592653589793238462643383279502884è

	)

1268 
	#M_PI_2f32x
 
	`__f32x
 (1.570796326794896619231321691639751442è

	)

1269 
	#M_PI_4f32x
 
	`__f32x
 (0.785398163397448309615660845819875721è

	)

1270 
	#M_1_PIf32x
 
	`__f32x
 (0.318309886183790671537767526745028724è

	)

1271 
	#M_2_PIf32x
 
	`__f32x
 (0.636619772367581343075535053490057448è

	)

1272 
	#M_2_SQRTPIf32x
 
	`__f32x
 (1.128379167095512573896158903121545172è

	)

1273 
	#M_SQRT2f32x
 
	`__f32x
 (1.414213562373095048801688724209698079è

	)

1274 
	#M_SQRT1_2f32x
 
	`__f32x
 (0.707106781186547524400844362104849039è

	)

1277 #ià
__HAVE_FLOAT64X
 && 
defšed
 
__USE_GNU


1278 
	#M_Ef64x
 
	`__f64x
 (2.718281828459045235360287471352662498è

	)

1279 
	#M_LOG2Ef64x
 
	`__f64x
 (1.442695040888963407359924681001892137è

	)

1280 
	#M_LOG10Ef64x
 
	`__f64x
 (0.434294481903251827651128918916605082è

	)

1281 
	#M_LN2f64x
 
	`__f64x
 (0.693147180559945309417232121458176568è

	)

1282 
	#M_LN10f64x
 
	`__f64x
 (2.302585092994045684017991454684364208è

	)

1283 
	#M_PIf64x
 
	`__f64x
 (3.141592653589793238462643383279502884è

	)

1284 
	#M_PI_2f64x
 
	`__f64x
 (1.570796326794896619231321691639751442è

	)

1285 
	#M_PI_4f64x
 
	`__f64x
 (0.785398163397448309615660845819875721è

	)

1286 
	#M_1_PIf64x
 
	`__f64x
 (0.318309886183790671537767526745028724è

	)

1287 
	#M_2_PIf64x
 
	`__f64x
 (0.636619772367581343075535053490057448è

	)

1288 
	#M_2_SQRTPIf64x
 
	`__f64x
 (1.128379167095512573896158903121545172è

	)

1289 
	#M_SQRT2f64x
 
	`__f64x
 (1.414213562373095048801688724209698079è

	)

1290 
	#M_SQRT1_2f64x
 
	`__f64x
 (0.707106781186547524400844362104849039è

	)

1293 #ià
__HAVE_FLOAT128X
 && 
defšed
 
__USE_GNU


1297 #ifdeà
__USE_ISOC99


1298 #ià
__GNUC_PREREQ
 (3, 1)

1305 
	#isg»©”
(
x
, 
y
è
	`__butš_isg»©”
(x, y)

	)

1306 
	#isg»©”equ®
(
x
, 
y
è
	`__butš_isg»©”equ®
(x, y)

	)

1307 
	#i¦ess
(
x
, 
y
è
	`__butš_i¦ess
(x, y)

	)

1308 
	#i¦es£qu®
(
x
, 
y
è
	`__butš_i¦es£qu®
(x, y)

	)

1309 
	#i¦essg»©”
(
x
, 
y
è
	`__butš_i¦essg»©”
(x, y)

	)

1310 
	#isunÜd”ed
(
x
, 
y
è
	`__butš_isunÜd”ed
(x, y)

	)

1312 
	#isg»©”
(
x
, 
y
) \

1313 (
	`__ex‹nsiÚ__
 ({ 
	`__ty³of__
 (
x
è
__x
 = (x); __ty³of__ (
y
è
__y
 = (y); \

1314 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x > __y; }))

	)

1315 
	#isg»©”equ®
(
x
, 
y
) \

1316 (
	`__ex‹nsiÚ__
 ({ 
	`__ty³of__
 (
x
è
__x
 = (x); __ty³of__ (
y
è
__y
 = (y); \

1317 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x >ğ__y; }))

	)

1318 
	#i¦ess
(
x
, 
y
) \

1319 (
	`__ex‹nsiÚ__
 ({ 
	`__ty³of__
 (
x
è
__x
 = (x); __ty³of__ (
y
è
__y
 = (y); \

1320 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x < __y; }))

	)

1321 
	#i¦es£qu®
(
x
, 
y
) \

1322 (
	`__ex‹nsiÚ__
 ({ 
	`__ty³of__
 (
x
è
__x
 = (x); __ty³of__ (
y
è
__y
 = (y); \

1323 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x <ğ__y; }))

	)

1324 
	#i¦essg»©”
(
x
, 
y
) \

1325 (
	`__ex‹nsiÚ__
 ({ 
	`__ty³of__
 (
x
è
__x
 = (x); __ty³of__ (
y
è
__y
 = (y); \

1326 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x !ğ__y; }))

	)

1328 
	#isunÜd”ed
(
x
, 
y
) \

1329 (
	`__ex‹nsiÚ__
 ({ 
	`__ty³of__
 (
x
è
__u
 = (x); __ty³of__ (
y
è
__v
 = (y); \

1330 
__u
 !ğ
__v
 && (__u !ğ__u || __v !ğ__v); }))

	)

1334 #ià
__GLIBC_USE
 (
IEC_60559_BFP_EXT_C2X
)

1337 #ià
__FLT_EVAL_METHOD__
 == 2 || __FLT_EVAL_METHOD__ > 64

1338 
	#__MATH_EVAL_FMT2
(
x
, 
y
è((xè+ (yè+ 0.0L)

	)

1339 #–ià
__FLT_EVAL_METHOD__
 == 1 || __FLT_EVAL_METHOD__ > 32

1340 
	#__MATH_EVAL_FMT2
(
x
, 
y
è((xè+ (yè+ 0.0)

	)

1341 #–ià
__FLT_EVAL_METHOD__
 == 0 || __FLT_EVAL_METHOD__ == 32

1342 
	#__MATH_EVAL_FMT2
(
x
, 
y
è((xè+ (yè+ 0.0f)

	)

1344 
	#__MATH_EVAL_FMT2
(
x
, 
y
è((xè+ (y))

	)

1349 #ià!
defšed
 
__ılu¥lus
 || (__ılu¥lu < 201103L && !defšed 
__GNUC__
)

1350 
	#i£qsig
(
x
, 
y
) \

1351 
	`__MATH_TG
 (
	`__MATH_EVAL_FMT2
 (
x
, 
y
), 
__i£qsig
, ((x), (y)))

	)

1364 
‹m¶©e
<
ty³Çme
> 
__i£qsig_ty³
;

1366 
‹m¶©e
<> 
__i£qsig_ty³
<>

1368 
__ÿÎ
 (
__x
, 
__y
è
throw
 ()

1370  
__i£qsigf
 (
__x
, 
__y
);

1374 
‹m¶©e
<> 
__i£qsig_ty³
<>

1376 
__ÿÎ
 (
__x
, 
__y
è
throw
 ()

1378  
__i£qsig
 (
__x
, 
__y
);

1382 
‹m¶©e
<> 
__i£qsig_ty³
<>

1384 
__ÿÎ
 (
__x
, 
__y
è
throw
 ()

1386 #iâdeà
__NO_LONG_DOUBLE_MATH


1387  
__i£qsigl
 (
__x
, 
__y
);

1389  
__i£qsig
 (
__x
, 
__y
);

1394 #ià
__HAVE_FLOAT128_UNLIKE_LDBL


1397 
‹m¶©e
<> 
__i£qsig_ty³
<
_Flßt128
>

1399 
__ÿÎ
 (
_Flßt128
 
__x
, _Flßt128 
__y
è
throw
 ()

1401  
__i£qsigf128
 (
__x
, 
__y
);

1406 
‹m¶©e
<
ty³Çme
 
_T1
,y³Çm
_T2
>

1407 
šlše
 

1408 
i£qsig
 (
_T1
 
__x
, 
_T2
 
__y
è
throw
 ()

1410 #ià
__ılu¥lus
 >= 201103L

1411 
deşty³
 (
	t__MATH_EVAL_FMT2
 (
	t__x
, 
	t__y
)è
	t_T3
;

1413 
__ty³of
 (
	t__MATH_EVAL_FMT2
 (
	t__x
, 
	t__y
)è
	t_T3
;

1415  
__i£qsig_ty³
<
_T3
>::
__ÿÎ
 (
__x
, 
__y
);

1423 
__END_DECLS


	@/usr/include/netdb.h

22 #iâdef 
_NETDB_H


23 
	#_NETDB_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	~<Ãtš‘/š.h
>

28 
	~<b™s/¡dšt-ušŠ.h
>

29 #ifdeà
__USE_MISC


32 
	~<½c/Ãtdb.h
>

35 #ifdeà
__USE_GNU


36 
	~<b™s/ty³s/sigev’t_t.h
>

37 
	~<b™s/ty³s/¡ruù_time¥ec.h
>

40 
	~<b™s/Ãtdb.h
>

43 
	#_PATH_HEQUIV
 "/‘c/ho¡s.equiv"

	)

44 
	#_PATH_HOSTS
 "/‘c/ho¡s"

	)

45 
	#_PATH_NETWORKS
 "/‘c/ÃtwÜks"

	)

46 
	#_PATH_NSSWITCH_CONF
 "/‘c/nssw™ch.cÚf"

	)

47 
	#_PATH_PROTOCOLS
 "/‘c/´ÙocŞs"

	)

48 
	#_PATH_SERVICES
 "/‘c/£rviûs"

	)

51 
	g__BEGIN_DECLS


53 #ià
defšed
 
__USE_MISC
 || !defšed 
__USE_XOPEN2K8


56 
	#h_”ºo
 (*
	`__h_”ºo_loÿtiÚ
 ())

	)

59 *
	$__h_”ºo_loÿtiÚ
 (è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

63 
	#HOST_NOT_FOUND
 1

	)

64 
	#TRY_AGAIN
 2

	)

66 
	#NO_RECOVERY
 3

	)

68 
	#NO_DATA
 4

	)

71 #ifdeà
__USE_MISC


72 
	#NETDB_INTERNAL
 -1

	)

73 
	#NETDB_SUCCESS
 0

	)

74 
	#NO_ADDRESS
 
NO_DATA


	)

77 #ià
defšed
 
__USE_XOPEN2K
 || defšed 
__USE_XOPEN_EXTENDED


79 
	#IPPORT_RESERVED
 1024

	)

82 #ifdeà
__USE_GNU


84 
	#SCOPE_DELIMITER
 '%'

	)

87 #ifdeà
__USE_MISC


90 
	$h”rÜ
 (cÚ¡ *
__¡r
è
__THROW
;

93 cÚ¡ *
	$h¡»¼Ü
 (
__”r_num
è
__THROW
;

98 
	sho¡’t


100 *
h_Çme
;

101 **
h_®Ÿ£s
;

102 
h_add¹y³
;

103 
h_Ëngth
;

104 **
h_addr_li¡
;

105 #ifdeà
__USE_MISC


106 
	#h_addr
 
h_addr_li¡
[0]

	)

115 
	`£tho¡’t
 (
__¡ay_İ’
);

121 
	`’dho¡’t
 ();

128 
ho¡’t
 *
	`g‘ho¡’t
 ();

135 
ho¡’t
 *
	`g‘ho¡byaddr
 (cÚ¡ *
__addr
, 
__sockËn_t
 
__Ën
,

136 
__ty³
);

142 
ho¡’t
 *
	`g‘ho¡byÇme
 (cÚ¡ *
__Çme
);

144 #ifdeà
__USE_MISC


153 
ho¡’t
 *
	`g‘ho¡byÇme2
 (cÚ¡ *
__Çme
, 
__af
);

165 
	`g‘ho¡’t_r
 (
ho¡’t
 *
__»¡riù
 
__»suÉ_buf
,

166 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

167 
ho¡’t
 **
__»¡riù
 
__»suÉ
,

168 *
__»¡riù
 
__h_”ºİ
);

170 
	`g‘ho¡byaddr_r
 (cÚ¡ *
__»¡riù
 
__addr
, 
__sockËn_t
 
__Ën
,

171 
__ty³
,

172 
ho¡’t
 *
__»¡riù
 
__»suÉ_buf
,

173 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

174 
ho¡’t
 **
__»¡riù
 
__»suÉ
,

175 *
__»¡riù
 
__h_”ºİ
);

177 
	`g‘ho¡byÇme_r
 (cÚ¡ *
__»¡riù
 
__Çme
,

178 
ho¡’t
 *
__»¡riù
 
__»suÉ_buf
,

179 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

180 
ho¡’t
 **
__»¡riù
 
__»suÉ
,

181 *
__»¡riù
 
__h_”ºİ
);

183 
	`g‘ho¡byÇme2_r
 (cÚ¡ *
__»¡riù
 
__Çme
, 
__af
,

184 
ho¡’t
 *
__»¡riù
 
__»suÉ_buf
,

185 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

186 
ho¡’t
 **
__»¡riù
 
__»suÉ
,

187 *
__»¡riù
 
__h_”ºİ
);

196 
	`£Š‘’t
 (
__¡ay_İ’
);

202 
	`’dÃ‹Á
 ();

209 
Ã‹Á
 *
	`g‘Ã‹Á
 ();

216 
Ã‹Á
 *
	`g‘Ãtbyaddr
 (
ušt32_t
 
__Ãt
, 
__ty³
);

222 
Ã‹Á
 *
	`g‘ÃtbyÇme
 (cÚ¡ *
__Çme
);

224 #ifdef 
__USE_MISC


235 
	`g‘Ã‹Á_r
 (
Ã‹Á
 *
__»¡riù
 
__»suÉ_buf
,

236 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

237 
Ã‹Á
 **
__»¡riù
 
__»suÉ
,

238 *
__»¡riù
 
__h_”ºİ
);

240 
	`g‘Ãtbyaddr_r
 (
ušt32_t
 
__Ãt
, 
__ty³
,

241 
Ã‹Á
 *
__»¡riù
 
__»suÉ_buf
,

242 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

243 
Ã‹Á
 **
__»¡riù
 
__»suÉ
,

244 *
__»¡riù
 
__h_”ºİ
);

246 
	`g‘ÃtbyÇme_r
 (cÚ¡ *
__»¡riù
 
__Çme
,

247 
Ã‹Á
 *
__»¡riù
 
__»suÉ_buf
,

248 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

249 
Ã‹Á
 **
__»¡riù
 
__»suÉ
,

250 *
__»¡riù
 
__h_”ºİ
);

255 
	s£rv’t


257 *
s_Çme
;

258 **
s_®Ÿ£s
;

259 
s_pÜt
;

260 *
s_´Ùo
;

268 
	`£t£rv’t
 (
__¡ay_İ’
);

274 
	`’d£rv’t
 ();

281 
£rv’t
 *
	`g‘£rv’t
 ();

288 
£rv’t
 *
	`g‘£rvbyÇme
 (cÚ¡ *
__Çme
, cÚ¡ *
__´Ùo
);

295 
£rv’t
 *
	`g‘£rvbypÜt
 (
__pÜt
, cÚ¡ *
__´Ùo
);

298 #ifdef 
__USE_MISC


306 
	`g‘£rv’t_r
 (
£rv’t
 *
__»¡riù
 
__»suÉ_buf
,

307 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

308 
£rv’t
 **
__»¡riù
 
__»suÉ
);

310 
	`g‘£rvbyÇme_r
 (cÚ¡ *
__»¡riù
 
__Çme
,

311 cÚ¡ *
__»¡riù
 
__´Ùo
,

312 
£rv’t
 *
__»¡riù
 
__»suÉ_buf
,

313 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

314 
£rv’t
 **
__»¡riù
 
__»suÉ
);

316 
	`g‘£rvbypÜt_r
 (
__pÜt
, cÚ¡ *
__»¡riù
 
__´Ùo
,

317 
£rv’t
 *
__»¡riù
 
__»suÉ_buf
,

318 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

319 
£rv’t
 **
__»¡riù
 
__»suÉ
);

324 
	s´ÙÛÁ


326 *
p_Çme
;

327 **
p_®Ÿ£s
;

328 
p_´Ùo
;

336 
	`£rÙÛÁ
 (
__¡ay_İ’
);

342 
	`’d´ÙÛÁ
 ();

349 
´ÙÛÁ
 *
	`g‘´ÙÛÁ
 ();

355 
´ÙÛÁ
 *
	`g‘´ÙobyÇme
 (cÚ¡ *
__Çme
);

361 
´ÙÛÁ
 *
	`g‘´Ùobynumb”
 (
__´Ùo
);

364 #ifdef 
__USE_MISC


372 
	`g‘´ÙÛÁ_r
 (
´ÙÛÁ
 *
__»¡riù
 
__»suÉ_buf
,

373 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

374 
´ÙÛÁ
 **
__»¡riù
 
__»suÉ
);

376 
	`g‘´ÙobyÇme_r
 (cÚ¡ *
__»¡riù
 
__Çme
,

377 
´ÙÛÁ
 *
__»¡riù
 
__»suÉ_buf
,

378 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

379 
´ÙÛÁ
 **
__»¡riù
 
__»suÉ
);

381 
	`g‘´Ùobynumb”_r
 (
__´Ùo
,

382 
´ÙÛÁ
 *
__»¡riù
 
__»suÉ_buf
,

383 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

384 
´ÙÛÁ
 **
__»¡riù
 
__»suÉ
);

393 
	`£Š‘g»Á
 (cÚ¡ *
__Ãtgroup
);

401 
	`’dÃtg»Á
 ();

410 
	`g‘Ãtg»Á
 (**
__»¡riù
 
__ho¡p
,

411 **
__»¡riù
 
__u£½
,

412 **
__»¡riù
 
__domašp
);

421 
	`šÃtgr
 (cÚ¡ *
__Ãtgroup
, cÚ¡ *
__ho¡
,

422 cÚ¡ *
__u£r
, cÚ¡ *
__domaš
);

430 
	`g‘Ãtg»Á_r
 (**
__»¡riù
 
__ho¡p
,

431 **
__»¡riù
 
__u£½
,

432 **
__»¡riù
 
__domašp
,

433 *
__»¡riù
 
__bufãr
, 
size_t
 
__buæ’
);

437 #ifdeà
__USE_MISC


449 
	`rcmd
 (**
__»¡riù
 
__aho¡
, 
__½Üt
,

450 cÚ¡ *
__»¡riù
 
__locu£r
,

451 cÚ¡ *
__»¡riù
 
__»mu£r
,

452 cÚ¡ *
__»¡riù
 
__cmd
, *__»¡riù 
__fd2p
);

461 
	`rcmd_af
 (**
__»¡riù
 
__aho¡
, 
__½Üt
,

462 cÚ¡ *
__»¡riù
 
__locu£r
,

463 cÚ¡ *
__»¡riù
 
__»mu£r
,

464 cÚ¡ *
__»¡riù
 
__cmd
, *__»¡riù 
__fd2p
,

465 
§_çmy_t
 
__af
);

477 
	`»xec
 (**
__»¡riù
 
__aho¡
, 
__½Üt
,

478 cÚ¡ *
__»¡riù
 
__Çme
,

479 cÚ¡ *
__»¡riù
 
__·ss
,

480 cÚ¡ *
__»¡riù
 
__cmd
, *__»¡riù 
__fd2p
);

489 
	`»xec_af
 (**
__»¡riù
 
__aho¡
, 
__½Üt
,

490 cÚ¡ *
__»¡riù
 
__Çme
,

491 cÚ¡ *
__»¡riù
 
__·ss
,

492 cÚ¡ *
__»¡riù
 
__cmd
, *__»¡riù 
__fd2p
,

493 
§_çmy_t
 
__af
);

503 
	`ru£rok
 (cÚ¡ *
__rho¡
, 
__su£r
,

504 cÚ¡ *
__»mu£r
, cÚ¡ *
__locu£r
);

513 
	`ru£rok_af
 (cÚ¡ *
__rho¡
, 
__su£r
,

514 cÚ¡ *
__»mu£r
, cÚ¡ *
__locu£r
,

515 
§_çmy_t
 
__af
);

526 
	`œu£rok
 (
ušt32_t
 
__¿ddr
, 
__su£r
,

527 cÚ¡ *
__»mu£r
, cÚ¡ *
__locu£r
);

537 
	`œu£rok_af
 (cÚ¡ *
__¿ddr
, 
__su£r
,

538 cÚ¡ *
__»mu£r
, cÚ¡ *
__locu£r
,

539 
§_çmy_t
 
__af
);

549 
	`¼esvpÜt
 (*
__®pÜt
);

558 
	`¼esvpÜt_af
 (*
__®pÜt
, 
§_çmy_t
 
__af
);

563 #ifdeà
__USE_XOPEN2K


565 
	saddršfo


567 
ai_æags
;

568 
ai_çmy
;

569 
ai_sockty³
;

570 
ai_´ÙocŞ
;

571 
sockËn_t
 
ai_add¾’
;

572 
sockaddr
 *
ai_addr
;

573 *
ai_ÿnÚÇme
;

574 
addršfo
 *
ai_Ãxt
;

577 #ifdeà
__USE_GNU


579 
	sgaicb


581 cÚ¡ *
¬_Çme
;

582 cÚ¡ *
¬_£rviû
;

583 cÚ¡ 
addršfo
 *
¬_»que¡
;

584 
addršfo
 *
¬_»suÉ
;

586 
__»tuº
;

587 
__glibc_»£rved
[5];

591 
	#GAI_WAIT
 0

	)

592 
	#GAI_NOWAIT
 1

	)

596 
	#AI_PASSIVE
 0x0001

	)

597 
	#AI_CANONNAME
 0x0002

	)

598 
	#AI_NUMERICHOST
 0x0004

	)

599 
	#AI_V4MAPPED
 0x0008

	)

600 
	#AI_ALL
 0x0010

	)

601 
	#AI_ADDRCONFIG
 0x0020

	)

603 #ifdeà
__USE_GNU


604 
	#AI_IDN
 0x0040

	)

607 
	#AI_CANONIDN
 0x0080

	)

608 
	#AI_IDN_ALLOW_UNASSIGNED
 \

609 
	`__glibc_maüo_w¬nšg
 ("AI_IDN_ALLOW_UNASSIGNED i d•»ÿ‹d"è0x0100

	)

610 
	#AI_IDN_USE_STD3_ASCII_RULES
 \

611 
	`__glibc_maüo_w¬nšg
 ("AI_IDN_USE_STD3_ASCII_RULES i d•»ÿ‹d"è0x0200

	)

613 
	#AI_NUMERICSERV
 0x0400

	)

616 
	#EAI_BADFLAGS
 -1

	)

617 
	#EAI_NONAME
 -2

	)

618 
	#EAI_AGAIN
 -3

	)

619 
	#EAI_FAIL
 -4

	)

620 
	#EAI_FAMILY
 -6

	)

621 
	#EAI_SOCKTYPE
 -7

	)

622 
	#EAI_SERVICE
 -8

	)

623 
	#EAI_MEMORY
 -10

	)

624 
	#EAI_SYSTEM
 -11

	)

625 
	#EAI_OVERFLOW
 -12

	)

626 #ifdeà
__USE_GNU


627 
	#EAI_NODATA
 -5

	)

628 
	#EAI_ADDRFAMILY
 -9

	)

629 
	#EAI_INPROGRESS
 -100

	)

630 
	#EAI_CANCELED
 -101

	)

631 
	#EAI_NOTCANCELED
 -102

	)

632 
	#EAI_ALLDONE
 -103

	)

633 
	#EAI_INTR
 -104

	)

634 
	#EAI_IDN_ENCODE
 -105

	)

637 #ifdeà
__USE_MISC


638 
	#NI_MAXHOST
 1025

	)

639 
	#NI_MAXSERV
 32

	)

642 
	#NI_NUMERICHOST
 1

	)

643 
	#NI_NUMERICSERV
 2

	)

644 
	#NI_NOFQDN
 4

	)

645 
	#NI_NAMEREQD
 8

	)

646 
	#NI_DGRAM
 16

	)

647 #ifdeà
__USE_GNU


648 
	#NI_IDN
 32

	)

649 
	#NI_IDN_ALLOW_UNASSIGNED
 \

650 
	`__glibc_maüo_w¬nšg
 ("NI_IDN_ALLOW_UNASSIGNED i d•»ÿ‹d"è64

	)

651 
	#NI_IDN_USE_STD3_ASCII_RULES
 \

652 
	`__glibc_maüo_w¬nšg
 ("NI_IDN_USE_STD3_ASCII_RULES i d•»ÿ‹d"è128

	)

660 
	`g‘addršfo
 (cÚ¡ *
__»¡riù
 
__Çme
,

661 cÚ¡ *
__»¡riù
 
__£rviû
,

662 cÚ¡ 
addršfo
 *
__»¡riù
 
__»q
,

663 
addršfo
 **
__»¡riù
 
__·i
);

666 
	$ä“addršfo
 (
addršfo
 *
__ai
è
__THROW
;

669 cÚ¡ *
	$gai_¡»¼Ü
 (
__ecode
è
__THROW
;

675 
	`g‘Çmešfo
 (cÚ¡ 
sockaddr
 *
__»¡riù
 
__§
,

676 
sockËn_t
 
__§Ën
, *
__»¡riù
 
__ho¡
,

677 
sockËn_t
 
__ho¡Ën
, *
__»¡riù
 
__£rv
,

678 
sockËn_t
 
__£rvËn
, 
__æags
);

681 #ifdeà
__USE_GNU


690 
	`g‘addršfo_a
 (
__mode
, 
gaicb
 *
__li¡
[
__»¡riù_¬r
],

691 
__’t
, 
sigev’t
 *
__»¡riù
 
__sig
);

701 
	`gai_su¥’d
 (cÚ¡ 
gaicb
 *cÚ¡ 
__li¡
[], 
__’t
,

702 cÚ¡ 
time¥ec
 *
__timeout
);

704 #ifdeà
__USE_TIME_BITS64


705 #ià
	`defšed
(
__REDIRECT
)

706 
	`__REDIRECT
 (
gai_su¥’d
, (cÚ¡ 
gaicb
 *cÚ¡ 
__li¡
[],

707 
__’t
,

708 cÚ¡ 
time¥ec
 *
__timeout
),

709 
__gai_su¥’d_time64
);

711 
	#gai_su¥’d
 
__gai_su¥’d_time64


	)

716 
	$gai_”rÜ
 (
gaicb
 *
__»q
è
__THROW
;

719 
	$gai_ÿnûl
 (
gaicb
 *
__gaicbp
è
__THROW
;

722 
__END_DECLS


	@/usr/include/pthread.h

18 #iâdeà
_PTHREAD_H


19 
	#_PTHREAD_H
 1

	)

21 
	~<ã©u»s.h
>

22 
	~<sched.h
>

23 
	~<time.h
>

25 
	~<b™s/’dŸn.h
>

26 
	~<b™s/±h»adty³s.h
>

27 
	~<b™s/£tjmp.h
>

28 
	~<b™s/wÜdsize.h
>

29 
	~<b™s/ty³s/¡ruù_time¥ec.h
>

30 
	~<b™s/ty³s/__sig£t_t.h
>

31 
	~<b™s/ty³s/¡ruù___jmp_buf_g.h
>

32 #ifdeà
__USE_MISC


33 
	~<b™s/±h»ad_¡ack_mš-dyÇmic.h
>

39 
	mPTHREAD_CREATE_JOINABLE
,

40 
	#PTHREAD_CREATE_JOINABLE
 
PTHREAD_CREATE_JOINABLE


	)

41 
	mPTHREAD_CREATE_DETACHED


42 
	#PTHREAD_CREATE_DETACHED
 
PTHREAD_CREATE_DETACHED


	)

49 
	mPTHREAD_MUTEX_TIMED_NP
,

50 
	mPTHREAD_MUTEX_RECURSIVE_NP
,

51 
	mPTHREAD_MUTEX_ERRORCHECK_NP
,

52 
	mPTHREAD_MUTEX_ADAPTIVE_NP


53 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8


55 
	mPTHREAD_MUTEX_NORMAL
 = 
PTHREAD_MUTEX_TIMED_NP
,

56 
	mPTHREAD_MUTEX_RECURSIVE
 = 
PTHREAD_MUTEX_RECURSIVE_NP
,

57 
	mPTHREAD_MUTEX_ERRORCHECK
 = 
PTHREAD_MUTEX_ERRORCHECK_NP
,

58 
	mPTHREAD_MUTEX_DEFAULT
 = 
PTHREAD_MUTEX_NORMAL


60 #ifdeà
__USE_GNU


62 , 
	mPTHREAD_MUTEX_FAST_NP
 = 
PTHREAD_MUTEX_TIMED_NP


67 #ifdeà
__USE_XOPEN2K


71 
	mPTHREAD_MUTEX_STALLED
,

72 
	mPTHREAD_MUTEX_STALLED_NP
 = 
PTHREAD_MUTEX_STALLED
,

73 
	mPTHREAD_MUTEX_ROBUST
,

74 
	mPTHREAD_MUTEX_ROBUST_NP
 = 
PTHREAD_MUTEX_ROBUST


79 #ià
defšed
 
__USE_POSIX199506
 || defšed 
__USE_UNIX98


83 
	mPTHREAD_PRIO_NONE
,

84 
	mPTHREAD_PRIO_INHERIT
,

85 
	mPTHREAD_PRIO_PROTECT


90 
	#PTHREAD_MUTEX_INITIALIZER
 \

91 { { 
	`__PTHREAD_MUTEX_INITIALIZER
 (
PTHREAD_MUTEX_TIMED_NP
è} }

	)

92 #ifdeà
__USE_GNU


93 
	#PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
 \

94 { { 
	`__PTHREAD_MUTEX_INITIALIZER
 (
PTHREAD_MUTEX_RECURSIVE_NP
è} }

	)

95 
	#PTHREAD_ERRORCHECK_MUTEX_INITIALIZER_NP
 \

96 { { 
	`__PTHREAD_MUTEX_INITIALIZER
 (
PTHREAD_MUTEX_ERRORCHECK_NP
è} }

	)

97 
	#PTHREAD_ADAPTIVE_MUTEX_INITIALIZER_NP
 \

98 { { 
	`__PTHREAD_MUTEX_INITIALIZER
 (
PTHREAD_MUTEX_ADAPTIVE_NP
è} }

	)

103 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


106 
	mPTHREAD_RWLOCK_PREFER_READER_NP
,

107 
	mPTHREAD_RWLOCK_PREFER_WRITER_NP
,

108 
	mPTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
,

109 
	mPTHREAD_RWLOCK_DEFAULT_NP
 = 
PTHREAD_RWLOCK_PREFER_READER_NP


114 
	#PTHREAD_RWLOCK_INITIALIZER
 \

115 { { 
	`__PTHREAD_RWLOCK_INITIALIZER
 (
PTHREAD_RWLOCK_DEFAULT_NP
è} }

	)

116 #ifdeà
__USE_GNU


117 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

118 { { 
	`__PTHREAD_RWLOCK_INITIALIZER
 (
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
è} }

	)

126 
	mPTHREAD_INHERIT_SCHED
,

127 
	#PTHREAD_INHERIT_SCHED
 
PTHREAD_INHERIT_SCHED


	)

128 
	mPTHREAD_EXPLICIT_SCHED


129 
	#PTHREAD_EXPLICIT_SCHED
 
PTHREAD_EXPLICIT_SCHED


	)

136 
	mPTHREAD_SCOPE_SYSTEM
,

137 
	#PTHREAD_SCOPE_SYSTEM
 
PTHREAD_SCOPE_SYSTEM


	)

138 
	mPTHREAD_SCOPE_PROCESS


139 
	#PTHREAD_SCOPE_PROCESS
 
PTHREAD_SCOPE_PROCESS


	)

146 
	mPTHREAD_PROCESS_PRIVATE
,

147 
	#PTHREAD_PROCESS_PRIVATE
 
PTHREAD_PROCESS_PRIVATE


	)

148 
	mPTHREAD_PROCESS_SHARED


149 
	#PTHREAD_PROCESS_SHARED
 
PTHREAD_PROCESS_SHARED


	)

155 
	#PTHREAD_COND_INITIALIZER
 { { {0}, {0}, {0, 0}, {0, 0}, 0, 0, {0, 0} } }

	)

159 
	s_±h»ad_ş—nup_bufãr


161 (*
	m__routše
) (*);

162 *
	m__¬g
;

163 
	m__ÿnûÉy³
;

164 
_±h»ad_ş—nup_bufãr
 *
	m__´ev
;

170 
	mPTHREAD_CANCEL_ENABLE
,

171 
	#PTHREAD_CANCEL_ENABLE
 
PTHREAD_CANCEL_ENABLE


	)

172 
	mPTHREAD_CANCEL_DISABLE


173 
	#PTHREAD_CANCEL_DISABLE
 
PTHREAD_CANCEL_DISABLE


	)

177 
	mPTHREAD_CANCEL_DEFERRED
,

178 
	#PTHREAD_CANCEL_DEFERRED
 
PTHREAD_CANCEL_DEFERRED


	)

179 
	mPTHREAD_CANCEL_ASYNCHRONOUS


180 
	#PTHREAD_CANCEL_ASYNCHRONOUS
 
PTHREAD_CANCEL_ASYNCHRONOUS


	)

182 
	#PTHREAD_CANCELED
 ((*è-1)

	)

186 
	#PTHREAD_ONCE_INIT
 0

	)

189 #ifdeà
__USE_XOPEN2K


193 
	#PTHREAD_BARRIER_SERIAL_THREAD
 -1

	)

197 
__BEGIN_DECLS


202 
	$±h»ad_ü—‹
 (
±h»ad_t
 *
__»¡riù
 
__Ãwth»ad
,

203 cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

204 *(*
__¡¬t_routše
) (*),

205 *
__»¡riù
 
__¬g
è
__THROWNL
 
	`__nÚnuÎ
 ((1, 3));

211 
	$±h»ad_ex™
 (*
__»tv®
è
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

219 
	`±h»ad_još
 (
±h»ad_t
 
__th
, **
__th»ad_»tuº
);

221 #ifdeà
__USE_GNU


224 
	$±h»ad_Œyjoš_Å
 (
±h»ad_t
 
__th
, **
__th»ad_»tuº
è
__THROW
;

226 #iâdeà
__USE_TIME_BITS64


233 
	`±h»ad_timedjoš_Å
 (
±h»ad_t
 
__th
, **
__th»ad_»tuº
,

234 cÚ¡ 
time¥ec
 *
__ab¡ime
);

243 
	`±h»ad_şockjoš_Å
 (
±h»ad_t
 
__th
, **
__th»ad_»tuº
,

244 
şockid_t
 
__şockid
,

245 cÚ¡ 
time¥ec
 *
__ab¡ime
);

247 #ifdeà
__REDIRECT


248 
	`__REDIRECT
 (
±h»ad_timedjoš_Å
,

249 (
±h»ad_t
 
__th
, **
__th»ad_»tuº
,

250 cÚ¡ 
time¥ec
 *
__ab¡ime
),

251 
__±h»ad_timedjoš_Å64
);

253 
	`__REDIRECT
 (
±h»ad_şockjoš_Å
,

254 (
±h»ad_t
 
__th
, **
__th»ad_»tuº
,

255 
şockid_t
 
__şockid
,

256 cÚ¡ 
time¥ec
 *
__ab¡ime
),

257 
__±h»ad_şockjoš_Å64
);

259 
	#±h»ad_timedjoš_Å
 
__±h»ad_timedjoš_Å64


	)

260 
	#±h»ad_şockjoš_Å
 
__±h»ad_şockjoš_Å64


	)

269 
	$±h»ad_d‘ach
 (
±h»ad_t
 
__th
è
__THROW
;

273 
±h»ad_t
 
	$±h»ad_£lf
 (è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

276 
	$±h»ad_equ®
 (
±h»ad_t
 
__th»ad1
,…th»ad_ˆ
__th»ad2
)

277 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

285 
	$±h»ad_©Œ_š™
 (
±h»ad_©Œ_t
 *
__©Œ
è
__THROW
 
	`__nÚnuÎ
 ((1));

288 
	$±h»ad_©Œ_de¡roy
 (
±h»ad_©Œ_t
 *
__©Œ
)

289 
__THROW
 
	`__nÚnuÎ
 ((1));

292 
	$±h»ad_©Œ_g‘d‘ach¡©e
 (cÚ¡ 
±h»ad_©Œ_t
 *
__©Œ
,

293 *
__d‘ach¡©e
)

294 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

297 
	$±h»ad_©Œ_£td‘ach¡©e
 (
±h»ad_©Œ_t
 *
__©Œ
,

298 
__d‘ach¡©e
)

299 
__THROW
 
	`__nÚnuÎ
 ((1));

303 
	$±h»ad_©Œ_g‘gu¬dsize
 (cÚ¡ 
±h»ad_©Œ_t
 *
__©Œ
,

304 
size_t
 *
__gu¬dsize
)

305 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

308 
	$±h»ad_©Œ_£tgu¬dsize
 (
±h»ad_©Œ_t
 *
__©Œ
,

309 
size_t
 
__gu¬dsize
)

310 
__THROW
 
	`__nÚnuÎ
 ((1));

314 
	$±h»ad_©Œ_g‘sched·¿m
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

315 
sched_·¿m
 *
__»¡riù
 
__·¿m
)

316 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

319 
	$±h»ad_©Œ_£tsched·¿m
 (
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

320 cÚ¡ 
sched_·¿m
 *
__»¡riù


321 
__·¿m
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

324 
	$±h»ad_©Œ_g‘schedpŞicy
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù


325 
__©Œ
, *
__»¡riù
 
__pŞicy
)

326 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

329 
	$±h»ad_©Œ_£tschedpŞicy
 (
±h»ad_©Œ_t
 *
__©Œ
, 
__pŞicy
)

330 
__THROW
 
	`__nÚnuÎ
 ((1));

333 
	$±h»ad_©Œ_g‘šh”™sched
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù


334 
__©Œ
, *
__»¡riù
 
__šh”™
)

335 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

338 
	$±h»ad_©Œ_£tšh”™sched
 (
±h»ad_©Œ_t
 *
__©Œ
,

339 
__šh”™
)

340 
__THROW
 
	`__nÚnuÎ
 ((1));

344 
	$±h»ad_©Œ_g‘scİe
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

345 *
__»¡riù
 
__scİe
)

346 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

349 
	$±h»ad_©Œ_£tscİe
 (
±h»ad_©Œ_t
 *
__©Œ
, 
__scİe
)

350 
__THROW
 
	`__nÚnuÎ
 ((1));

353 
	$±h»ad_©Œ_g‘¡ackaddr
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù


354 
__©Œ
, **
__»¡riù
 
__¡ackaddr
)

355 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__©Œibu‹_d•»ÿ‹d__
;

361 
	$±h»ad_©Œ_£t¡ackaddr
 (
±h»ad_©Œ_t
 *
__©Œ
,

362 *
__¡ackaddr
)

363 
__THROW
 
	`__nÚnuÎ
 ((1)è
__©Œibu‹_d•»ÿ‹d__
;

366 
	$±h»ad_©Œ_g‘¡acksize
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù


367 
__©Œ
, 
size_t
 *
__»¡riù
 
__¡acksize
)

368 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

373 
	$±h»ad_©Œ_£t¡acksize
 (
±h»ad_©Œ_t
 *
__©Œ
,

374 
size_t
 
__¡acksize
)

375 
__THROW
 
	`__nÚnuÎ
 ((1));

377 #ifdeà
__USE_XOPEN2K


379 
	$±h»ad_©Œ_g‘¡ack
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

380 **
__»¡riù
 
__¡ackaddr
,

381 
size_t
 *
__»¡riù
 
__¡acksize
)

382 
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3));

387 
	$±h»ad_©Œ_£t¡ack
 (
±h»ad_©Œ_t
 *
__©Œ
, *
__¡ackaddr
,

388 
size_t
 
__¡acksize
è
__THROW
 
	`__nÚnuÎ
 ((1));

391 #ifdeà
__USE_GNU


394 
	$±h»ad_©Œ_£ffš™y_Å
 (
±h»ad_©Œ_t
 *
__©Œ
,

395 
size_t
 
__ıu£tsize
,

396 cÚ¡ 
ıu_£t_t
 *
__ıu£t
)

397 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

401 
	$±h»ad_©Œ_g‘affš™y_Å
 (cÚ¡ 
±h»ad_©Œ_t
 *
__©Œ
,

402 
size_t
 
__ıu£tsize
,

403 
ıu_£t_t
 *
__ıu£t
)

404 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

407 
	$±h»ad_g‘©Œ_deçuÉ_Å
 (
±h»ad_©Œ_t
 *
__©Œ
)

408 
__THROW
 
	`__nÚnuÎ
 ((1));

411 
	`±h»ad_©Œ_£tsigmask_Å
 (
±h»ad_©Œ_t
 *
__©Œ
,

412 cÚ¡ 
__sig£t_t
 *
sigmask
);

417 
	`±h»ad_©Œ_g‘sigmask_Å
 (cÚ¡ 
±h»ad_©Œ_t
 *
__©Œ
,

418 
__sig£t_t
 *
sigmask
);

422 
	#PTHREAD_ATTR_NO_SIGMASK_NP
 (-1)

	)

426 
	$±h»ad_£‰r_deçuÉ_Å
 (cÚ¡ 
±h»ad_©Œ_t
 *
__©Œ
)

427 
__THROW
 
	`__nÚnuÎ
 ((1));

432 
	$±h»ad_g‘©Œ_Å
 (
±h»ad_t
 
__th
, 
±h»ad_©Œ_t
 *
__©Œ
)

433 
__THROW
 
	`__nÚnuÎ
 ((2));

441 
	$±h»ad_£tsched·¿m
 (
±h»ad_t
 
__rg‘_th»ad
, 
__pŞicy
,

442 cÚ¡ 
sched_·¿m
 *
__·¿m
)

443 
__THROW
 
	`__nÚnuÎ
 ((3));

446 
	$±h»ad_g‘sched·¿m
 (
±h»ad_t
 
__rg‘_th»ad
,

447 *
__»¡riù
 
__pŞicy
,

448 
sched_·¿m
 *
__»¡riù
 
__·¿m
)

449 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

452 
	$±h»ad_£tsched´io
 (
±h»ad_t
 
__rg‘_th»ad
, 
__´io
)

453 
__THROW
;

456 #ifdeà
__USE_GNU


458 
	$±h»ad_g‘Çme_Å
 (
±h»ad_t
 
__rg‘_th»ad
, *
__buf
,

459 
size_t
 
__buæ’
)

460 
__THROW
 
	`__nÚnuÎ
 ((2));

463 
	$±h»ad_£Šame_Å
 (
±h»ad_t
 
__rg‘_th»ad
, cÚ¡ *
__Çme
)

464 
__THROW
 
	`__nÚnuÎ
 ((2));

468 #ifdeà
__USE_UNIX98


470 
	$±h»ad_g‘cÚcu¼’cy
 (è
__THROW
;

473 
	$±h»ad_£tcÚcu¼’cy
 (
__Ëv–
è
__THROW
;

476 #ifdeà
__USE_GNU


477 
	$±h»ad_y›ld
 (è
__THROW
;

478 #ifdeà
__REDIRECT_NTH


479 
	`__REDIRECT_NTH
 (
±h»ad_y›ld
, (), 
sched_y›ld
)

480 
	`__©Œibu‹_d•»ÿ‹d_msg__
 ("\
_yield is deprecated, use sched_yield instead");

483 
	#±h»ad_y›ld
 
sched_y›ld


	)

489 
	$±h»ad_£ffš™y_Å
 (
±h»ad_t
 
__th
, 
size_t
 
__ıu£tsize
,

490 cÚ¡ 
ıu_£t_t
 *
__ıu£t
)

491 
__THROW
 
	`__nÚnuÎ
 ((3));

494 
	$±h»ad_g‘affš™y_Å
 (
±h»ad_t
 
__th
, 
size_t
 
__ıu£tsize
,

495 
ıu_£t_t
 *
__ıu£t
)

496 
__THROW
 
	`__nÚnuÎ
 ((3));

509 
	$±h»ad_Úû
 (
±h»ad_Úû_t
 *
__Úû_cÚŒŞ
,

510 (*
__š™_routše
è()è
	`__nÚnuÎ
 ((1, 2));

521 
	`±h»ad_£tÿnûl¡©e
 (
__¡©e
, *
__Şd¡©e
);

525 
	`±h»ad_£tÿnûÉy³
 (
__ty³
, *
__Şdty³
);

528 
	`±h»ad_ÿnûl
 (
±h»ad_t
 
__th
);

533 
	`±h»ad_‹¡ÿnûl
 ();

538 
	s__ÿnûl_jmp_buf_g


540 
__jmp_buf
 
__ÿnûl_jmp_buf
;

541 
__mask_was_§ved
;

546 
__ÿnûl_jmp_buf_g
 
__ÿnûl_jmp_buf
[1];

547 *
__·d
[4];

548 } 
	t__±h»ad_unwšd_buf_t
 
	t__©Œibu‹__
 ((
	t__®igÃd__
));

551 #iâdeà
__ş—nup_fù_©Œibu‹


552 
	#__ş—nup_fù_©Œibu‹


	)

557 
	s__±h»ad_ş—nup_äame


559 (*
__ÿnûl_routše
) (*);

560 *
__ÿnûl_¬g
;

561 
__do_™
;

562 
__ÿnûl_ty³
;

565 #ià
defšed
 
__GNUC__
 && defšed 
__EXCEPTIONS


566 #ifdeà
__ılu¥lus


568 şas 
	c__±h»ad_ş—nup_şass


570 (*
__ÿnûl_routše
) (*);

571 *
__ÿnûl_¬g
;

572 
__do_™
;

573 
__ÿnûl_ty³
;

575 
public
:

576 
	$__±h»ad_ş—nup_şass
 ((*
__fù
è(*), *
__¬g
)

577 : 
	`__ÿnûl_routše
 (
__fù
), 
	`__ÿnûl_¬g
 (
__¬g
), 
	$__do_™
 (1) { }

578 ~
	$__±h»ad_ş—nup_şass
 (è{ ià(
__do_™
è
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); 
	}
}

579 
	$__£tdo™
 (
__Ãwv®
è{ 
__do_™
 = __Ãwv®; 
	}
}

580 
	$__deãr
 (è{ 
	`±h»ad_£tÿnûÉy³
 (
PTHREAD_CANCEL_DEFERRED
,

581 &
__ÿnûl_ty³
); 
	}
}

582 
	$__»¡Üe
 (ècÚ¡ { 
	`±h»ad_£tÿnûÉy³
 (
__ÿnûl_ty³
, 0); 
	}
}

592 
	#±h»ad_ş—nup_push
(
routše
, 
¬g
) \

594 
__±h»ad_ş—nup_şass
 
	`__şäame
 (
routše
, 
¬g
)

	)

598 
	#±h»ad_ş—nup_pİ
(
execu‹
) \

599 
__şäame
.
	`__£tdo™
 (
execu‹
); \

600 } 0)

	)

602 #ifdeà
__USE_GNU


606 
	#±h»ad_ş—nup_push_deãr_Å
(
routše
, 
¬g
) \

608 
__±h»ad_ş—nup_şass
 
	`__şäame
 (
routše
, 
¬g
); \

609 
__şäame
.
	`__deãr
 ()

	)

614 
	#±h»ad_ş—nup_pİ_»¡Üe_Å
(
execu‹
) \

615 
__şäame
.
	`__»¡Üe
 (); \

616 
__şäame
.
	`__£tdo™
 (
execu‹
); \

617 } 0)

	)

624 
__ex‹º_šlše
 

625 
	$__±h»ad_ş—nup_routše
 (
__±h»ad_ş—nup_äame
 *
__äame
)

627 ià(
__äame
->
__do_™
)

628 
__äame
->
	`__ÿnûl_routše
 (__äame->
__ÿnûl_¬g
);

629 
	}
}

638 
	#±h»ad_ş—nup_push
(
routše
, 
¬g
) \

640 
__±h»ad_ş—nup_äame
 
__şäame
 \

641 
	`__©Œibu‹__
 ((
	`__ş—nup__
 (
__±h»ad_ş—nup_routše
))) \

642 ğ{ .
__ÿnûl_routše
 = (
routše
), .
__ÿnûl_¬g
 = (
¬g
), \

643 .
__do_™
 = 1 };

	)

647 
	#±h»ad_ş—nup_pİ
(
execu‹
) \

648 
__şäame
.
__do_™
 = (
execu‹
); \

649 } 0)

	)

651 #ifdeà
__USE_GNU


655 
	#±h»ad_ş—nup_push_deãr_Å
(
routše
, 
¬g
) \

657 
__±h»ad_ş—nup_äame
 
__şäame
 \

658 
	`__©Œibu‹__
 ((
	`__ş—nup__
 (
__±h»ad_ş—nup_routše
))) \

659 ğ{ .
__ÿnûl_routše
 = (
routše
), .
__ÿnûl_¬g
 = (
¬g
), \

660 .
__do_™
 = 1 }; \

661 (è
	`±h»ad_£tÿnûÉy³
 (
PTHREAD_CANCEL_DEFERRED
, \

662 &
__şäame
.
__ÿnûl_ty³
)

	)

667 
	#±h»ad_ş—nup_pİ_»¡Üe_Å
(
execu‹
) \

668 (è
	`±h»ad_£tÿnûÉy³
 (
__şäame
.
__ÿnûl_ty³
, 
NULL
); \

669 
__şäame
.
__do_™
 = (
execu‹
); \

670 } 0)

	)

681 
	#±h»ad_ş—nup_push
(
routše
, 
¬g
) \

683 
__±h»ad_unwšd_buf_t
 
__ÿnûl_buf
; \

684 (*
__ÿnûl_routše
è(*èğ(
routše
); \

685 *
__ÿnûl_¬g
 = (
¬g
); \

686 
__nÙ_fœ¡_ÿÎ
 = 
	`__sig£tjmp_ÿnûl
 (
__ÿnûl_buf
.
__ÿnûl_jmp_buf
, \

688 ià(
	`__glibc_uÆik–y
 (
__nÙ_fœ¡_ÿÎ
)) \

690 
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); \

691 
	`__±h»ad_unwšd_Ãxt
 (&
__ÿnûl_buf
); \

695 
	`__±h»ad_»gi¡”_ÿnûl
 (&
__ÿnûl_buf
); \

696 dØ{

	)

697 
__±h»ad_»gi¡”_ÿnûl
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

698 
__ş—nup_fù_©Œibu‹
;

702 
	#±h»ad_ş—nup_pİ
(
execu‹
) \

705 
	`__±h»ad_uÄegi¡”_ÿnûl
 (&
__ÿnûl_buf
); \

706 ià(
execu‹
) \

707 
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); \

708 } 0)

	)

709 
	$__±h»ad_uÄegi¡”_ÿnûl
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

710 
__ş—nup_fù_©Œibu‹
;

712 #ifdeà
__USE_GNU


716 
	#±h»ad_ş—nup_push_deãr_Å
(
routše
, 
¬g
) \

718 
__±h»ad_unwšd_buf_t
 
__ÿnûl_buf
; \

719 (*
__ÿnûl_routše
è(*èğ(
routše
); \

720 *
__ÿnûl_¬g
 = (
¬g
); \

721 
__nÙ_fœ¡_ÿÎ
 = 
	`__sig£tjmp_ÿnûl
 (
__ÿnûl_buf
.
__ÿnûl_jmp_buf
, \

723 ià(
	`__glibc_uÆik–y
 (
__nÙ_fœ¡_ÿÎ
)) \

725 
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); \

726 
	`__±h»ad_unwšd_Ãxt
 (&
__ÿnûl_buf
); \

730 
	`__±h»ad_»gi¡”_ÿnûl_deãr
 (&
__ÿnûl_buf
); \

731 dØ{

	)

732 
	`__±h»ad_»gi¡”_ÿnûl_deãr
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

733 
__ş—nup_fù_©Œibu‹
;

738 
	#±h»ad_ş—nup_pİ_»¡Üe_Å
(
execu‹
) \

741 
	`__±h»ad_uÄegi¡”_ÿnûl_»¡Üe
 (&
__ÿnûl_buf
); \

742 ià(
execu‹
) \

743 
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); \

744 
	}
} 0)

	)

745 
	$__±h»ad_uÄegi¡”_ÿnûl_»¡Üe
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

746 
__ş—nup_fù_©Œibu‹
;

750 
	$__±h»ad_unwšd_Ãxt
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

751 
__ş—nup_fù_©Œibu‹
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
))

752 #iâdeà
SHARED


753 
	`__©Œibu‹__
 ((
__w—k__
))

765 #ià
	`__GNUC_PREREQ
 (11, 0)

766 
	`__REDIRECT_NTHNL
 (
__sig£tjmp_ÿnûl
,

767 (
__ÿnûl_jmp_buf_g
 
__’v
[1],

768 
__§vemask
),

769 
__sig£tjmp
è
__©Œibu‹_»tuºs_twiû__
;

771 
	#__sig£tjmp_ÿnûl
(
’v
, 
§vemask
) \

772 
	`__sig£tjmp
 ((
__jmp_buf_g
 *è(*è(
’v
), (
§vemask
))

	)

773 
	$__sig£tjmp
 (
__jmp_buf_g
 
__’v
[1],

774 
__§vemask
è
__THROWNL
;

781 
	$±h»ad_mu‹x_š™
 (
±h»ad_mu‹x_t
 *
__mu‹x
,

782 cÚ¡ 
±h»ad_mu‹x©Œ_t
 *
__mu‹x©Œ
)

783 
__THROW
 
	`__nÚnuÎ
 ((1));

786 
	$±h»ad_mu‹x_de¡roy
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

787 
__THROW
 
	`__nÚnuÎ
 ((1));

790 
	$±h»ad_mu‹x_Œylock
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

791 
__THROWNL
 
	`__nÚnuÎ
 ((1));

794 
	$±h»ad_mu‹x_lock
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

795 
__THROWNL
 
	`__nÚnuÎ
 ((1));

797 #ifdeà
__USE_XOPEN2K


799 #iâdeà
__USE_TIME_BITS64


800 
	$±h»ad_mu‹x_timedlock
 (
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
,

801 cÚ¡ 
time¥ec
 *
__»¡riù


802 
__ab¡ime
è
__THROWNL
 
	`__nÚnuÎ
 ((1, 2));

804 #ifdeà
__REDIRECT_NTHNL


805 
	`__REDIRECT_NTHNL
 (
±h»ad_mu‹x_timedlock
,

806 (
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
,

807 cÚ¡ 
time¥ec
 *
__»¡riù
 
__ab¡ime
),

808 
__±h»ad_mu‹x_timedlock64
è
	`__nÚnuÎ
 ((1, 2));

810 
	#±h»ad_mu‹x_timedlock
 
__±h»ad_mu‹x_timedlock64


	)

815 #ifdeà
__USE_GNU


816 #iâdeà
__USE_TIME_BITS64


817 
	$±h»ad_mu‹x_şocklock
 (
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
,

818 
şockid_t
 
__şockid
,

819 cÚ¡ 
time¥ec
 *
__»¡riù


820 
__ab¡ime
è
__THROWNL
 
	`__nÚnuÎ
 ((1, 3));

822 #ifdeà
__REDIRECT_NTHNL


823 
	`__REDIRECT_NTHNL
 (
±h»ad_mu‹x_şocklock
,

824 (
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
,

825 
şockid_t
 
__şockid
,

826 cÚ¡ 
time¥ec
 *
__»¡riù
 
__ab¡ime
),

827 
__±h»ad_mu‹x_şocklock64
è
	`__nÚnuÎ
 ((1, 3));

829 
	#±h»ad_mu‹x_şocklock
 
__±h»ad_mu‹x_şocklock64


	)

835 
	$±h»ad_mu‹x_uÆock
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

836 
__THROWNL
 
	`__nÚnuÎ
 ((1));

840 
	$±h»ad_mu‹x_g‘´ioûšg
 (cÚ¡ 
±h»ad_mu‹x_t
 *

841 
__»¡riù
 
__mu‹x
,

842 *
__»¡riù
 
__´ioûšg
)

843 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

847 
	$±h»ad_mu‹x_£rioûšg
 (
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
,

848 
__´ioûšg
,

849 *
__»¡riù
 
__Şd_ûšg
)

850 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

853 #ifdeà
__USE_XOPEN2K8


855 
	$±h»ad_mu‹x_cÚsi¡’t
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

856 
__THROW
 
	`__nÚnuÎ
 ((1));

857 #ifdeà
__USE_GNU


858 #ifdeà
__REDIRECT_NTH


859 
	`__REDIRECT_NTH
 (
±h»ad_mu‹x_cÚsi¡’t_Å
, (
±h»ad_mu‹x_t
 *),

860 
±h»ad_mu‹x_cÚsi¡’t
è
	`__nÚnuÎ
 ((1))

861 
	`__©Œibu‹_d•»ÿ‹d_msg__
 ("\
_mutex_consistent_np is deprecated, use…thread_mutex_consistent");

864 
	#±h»ad_mu‹x_cÚsi¡’t_Å
 
±h»ad_mu‹x_cÚsi¡’t


	)

874 
	$±h»ad_mu‹x©Œ_š™
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
)

875 
__THROW
 
	`__nÚnuÎ
 ((1));

878 
	$±h»ad_mu‹x©Œ_de¡roy
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
)

879 
__THROW
 
	`__nÚnuÎ
 ((1));

882 
	$±h»ad_mu‹x©Œ_g‘psh¬ed
 (cÚ¡ 
±h»ad_mu‹x©Œ_t
 *

883 
__»¡riù
 
__©Œ
,

884 *
__»¡riù
 
__psh¬ed
)

885 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

888 
	$±h»ad_mu‹x©Œ_£sh¬ed
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

889 
__psh¬ed
)

890 
__THROW
 
	`__nÚnuÎ
 ((1));

892 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8


894 
	$±h»ad_mu‹x©Œ_g‘ty³
 (cÚ¡ 
±h»ad_mu‹x©Œ_t
 *
__»¡riù


895 
__©Œ
, *
__»¡riù
 
__kšd
)

896 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

901 
	$±h»ad_mu‹x©Œ_£‰y³
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
, 
__kšd
)

902 
__THROW
 
	`__nÚnuÎ
 ((1));

906 
	$±h»ad_mu‹x©Œ_g‘´ÙocŞ
 (cÚ¡ 
±h»ad_mu‹x©Œ_t
 *

907 
__»¡riù
 
__©Œ
,

908 *
__»¡riù
 
__´ÙocŞ
)

909 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

913 
	$±h»ad_mu‹x©Œ_£rÙocŞ
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

914 
__´ÙocŞ
)

915 
__THROW
 
	`__nÚnuÎ
 ((1));

918 
	$±h»ad_mu‹x©Œ_g‘´ioûšg
 (cÚ¡ 
±h»ad_mu‹x©Œ_t
 *

919 
__»¡riù
 
__©Œ
,

920 *
__»¡riù
 
__´ioûšg
)

921 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

924 
	$±h»ad_mu‹x©Œ_£rioûšg
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

925 
__´ioûšg
)

926 
__THROW
 
	`__nÚnuÎ
 ((1));

928 #ifdeà
__USE_XOPEN2K


930 
	$±h»ad_mu‹x©Œ_g‘robu¡
 (cÚ¡ 
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

931 *
__robu¡Ãss
)

932 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

933 #ifdeà
__USE_GNU


934 #ifdeà
__REDIRECT_NTH


935 
	`__REDIRECT_NTH
 (
±h»ad_mu‹x©Œ_g‘robu¡_Å
,

936 (
±h»ad_mu‹x©Œ_t
 *, *),

937 
±h»ad_mu‹x©Œ_g‘robu¡
è
	`__nÚnuÎ
 ((1))

938 
	`__©Œibu‹_d•»ÿ‹d_msg__
 ("\
_mutexattr_getrobust_np is deprecated, use…thread_mutexattr_getrobust");

941 
	#±h»ad_mu‹x©Œ_g‘robu¡_Å
 
±h»ad_mu‹x©Œ_g‘robu¡


	)

946 
	$±h»ad_mu‹x©Œ_£Œobu¡
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

947 
__robu¡Ãss
)

948 
__THROW
 
	`__nÚnuÎ
 ((1));

949 #ifdeà
__USE_GNU


950 #ifdeà
__REDIRECT_NTH


951 
	`__REDIRECT_NTH
 (
±h»ad_mu‹x©Œ_£Œobu¡_Å
,

952 (
±h»ad_mu‹x©Œ_t
 *, ),

953 
±h»ad_mu‹x©Œ_£Œobu¡
è
	`__nÚnuÎ
 ((1))

954 
	`__©Œibu‹_d•»ÿ‹d_msg__
 ("\
_mutexattr_setrobust_np is deprecated, use…thread_mutexattr_setrobust");

957 
	#±h»ad_mu‹x©Œ_£Œobu¡_Å
 
±h»ad_mu‹x©Œ_£Œobu¡


	)

962 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


967 
	$±h»ad_rwlock_š™
 (
±h»ad_rwlock_t
 *
__»¡riù
 
__rwlock
,

968 cÚ¡ 
±h»ad_rwlock©Œ_t
 *
__»¡riù


969 
__©Œ
è
__THROW
 
	`__nÚnuÎ
 ((1));

972 
	$±h»ad_rwlock_de¡roy
 (
±h»ad_rwlock_t
 *
__rwlock
)

973 
__THROW
 
	`__nÚnuÎ
 ((1));

976 
	$±h»ad_rwlock_rdlock
 (
±h»ad_rwlock_t
 *
__rwlock
)

977 
__THROWNL
 
	`__nÚnuÎ
 ((1));

980 
	$±h»ad_rwlock_Œyrdlock
 (
±h»ad_rwlock_t
 *
__rwlock
)

981 
__THROWNL
 
	`__nÚnuÎ
 ((1));

983 #ifdeà
__USE_XOPEN2K


985 #iâdeà
__USE_TIME_BITS64


986 
	$±h»ad_rwlock_timedrdlock
 (
±h»ad_rwlock_t
 *
__»¡riù
 
__rwlock
,

987 cÚ¡ 
time¥ec
 *
__»¡riù


988 
__ab¡ime
è
__THROWNL
 
	`__nÚnuÎ
 ((1, 2));

990 #ifdeà
__REDIRECT_NTHNL


991 
	`__REDIRECT_NTHNL
 (
±h»ad_rwlock_timedrdlock
,

992 (
±h»ad_rwlock_t
 *
__»¡riù
 
__rwlock
,

993 cÚ¡ 
time¥ec
 *
__»¡riù
 
__ab¡ime
),

994 
__±h»ad_rwlock_timedrdlock64
)

995 
	`__nÚnuÎ
 ((1, 2));

997 
	#±h»ad_rwlock_timedrdlock
 
__±h»ad_rwlock_timedrdlock64


	)

1002 #ifdeà
__USE_GNU


1003 #iâdeà
__USE_TIME_BITS64


1004 
	$±h»ad_rwlock_şockrdlock
 (
±h»ad_rwlock_t
 *
__»¡riù
 
__rwlock
,

1005 
şockid_t
 
__şockid
,

1006 cÚ¡ 
time¥ec
 *
__»¡riù


1007 
__ab¡ime
è
__THROWNL
 
	`__nÚnuÎ
 ((1, 3));

1009 #ifdeà
__REDIRECT_NTHNL


1010 
	`__REDIRECT_NTHNL
 (
±h»ad_rwlock_şockrdlock
,

1011 (
±h»ad_rwlock_t
 *
__»¡riù
 
__rwlock
,

1012 
şockid_t
 
__şockid
,

1013 cÚ¡ 
time¥ec
 *
__»¡riù
 
__ab¡ime
),

1014 
__±h»ad_rwlock_şockrdlock64
)

1015 
	`__nÚnuÎ
 ((1, 3));

1017 
	#±h»ad_rwlock_şockrdlock
 
__±h»ad_rwlock_şockrdlock64


	)

1023 
	$±h»ad_rwlock_w¾ock
 (
±h»ad_rwlock_t
 *
__rwlock
)

1024 
__THROWNL
 
	`__nÚnuÎ
 ((1));

1027 
	$±h»ad_rwlock_Œyw¾ock
 (
±h»ad_rwlock_t
 *
__rwlock
)

1028 
__THROWNL
 
	`__nÚnuÎ
 ((1));

1030 #ifdeà
__USE_XOPEN2K


1032 #iâdeà
__USE_TIME_BITS64


1033 
	$±h»ad_rwlock_timedw¾ock
 (
±h»ad_rwlock_t
 *
__»¡riù
 
__rwlock
,

1034 cÚ¡ 
time¥ec
 *
__»¡riù


1035 
__ab¡ime
è
__THROWNL
 
	`__nÚnuÎ
 ((1, 2));

1037 #ifdeà
__REDIRECT_NTHNL


1038 
	`__REDIRECT_NTHNL
 (
±h»ad_rwlock_timedw¾ock
,

1039 (
±h»ad_rwlock_t
 *
__»¡riù
 
__rwlock
,

1040 cÚ¡ 
time¥ec
 *
__»¡riù
 
__ab¡ime
),

1041 
__±h»ad_rwlock_timedw¾ock64
)

1042 
	`__nÚnuÎ
 ((1, 2));

1044 
	#±h»ad_rwlock_timedw¾ock
 
__±h»ad_rwlock_timedw¾ock64


	)

1049 #ifdeà
__USE_GNU


1050 #iâdeà
__USE_TIME_BITS64


1051 
	$±h»ad_rwlock_şockw¾ock
 (
±h»ad_rwlock_t
 *
__»¡riù
 
__rwlock
,

1052 
şockid_t
 
__şockid
,

1053 cÚ¡ 
time¥ec
 *
__»¡riù


1054 
__ab¡ime
è
__THROWNL
 
	`__nÚnuÎ
 ((1, 3));

1057 #ifdeà
__REDIRECT_NTHNL


1058 
	`__REDIRECT_NTHNL
 (
±h»ad_rwlock_şockw¾ock
,

1059 (
±h»ad_rwlock_t
 *
__»¡riù
 
__rwlock
,

1060 
şockid_t
 
__şockid
,

1061 cÚ¡ 
time¥ec
 *
__»¡riù
 
__ab¡ime
),

1062 
__±h»ad_rwlock_şockw¾ock64
)

1063 
	`__nÚnuÎ
 ((1, 3));

1065 
	#±h»ad_rwlock_şockw¾ock
 
__±h»ad_rwlock_şockw¾ock64


	)

1071 
	$±h»ad_rwlock_uÆock
 (
±h»ad_rwlock_t
 *
__rwlock
)

1072 
__THROWNL
 
	`__nÚnuÎ
 ((1));

1078 
	$±h»ad_rwlock©Œ_š™
 (
±h»ad_rwlock©Œ_t
 *
__©Œ
)

1079 
__THROW
 
	`__nÚnuÎ
 ((1));

1082 
	$±h»ad_rwlock©Œ_de¡roy
 (
±h»ad_rwlock©Œ_t
 *
__©Œ
)

1083 
__THROW
 
	`__nÚnuÎ
 ((1));

1086 
	$±h»ad_rwlock©Œ_g‘psh¬ed
 (cÚ¡ 
±h»ad_rwlock©Œ_t
 *

1087 
__»¡riù
 
__©Œ
,

1088 *
__»¡riù
 
__psh¬ed
)

1089 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1092 
	$±h»ad_rwlock©Œ_£sh¬ed
 (
±h»ad_rwlock©Œ_t
 *
__©Œ
,

1093 
__psh¬ed
)

1094 
__THROW
 
	`__nÚnuÎ
 ((1));

1097 
	$±h»ad_rwlock©Œ_g‘kšd_Å
 (cÚ¡ 
±h»ad_rwlock©Œ_t
 *

1098 
__»¡riù
 
__©Œ
,

1099 *
__»¡riù
 
__´ef
)

1100 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1103 
	$±h»ad_rwlock©Œ_£tkšd_Å
 (
±h»ad_rwlock©Œ_t
 *
__©Œ
,

1104 
__´ef
è
__THROW
 
	`__nÚnuÎ
 ((1));

1112 
	$±h»ad_cÚd_š™
 (
±h»ad_cÚd_t
 *
__»¡riù
 
__cÚd
,

1113 cÚ¡ 
±h»ad_cÚd©Œ_t
 *
__»¡riù
 
__cÚd_©Œ
)

1114 
__THROW
 
	`__nÚnuÎ
 ((1));

1117 
	$±h»ad_cÚd_de¡roy
 (
±h»ad_cÚd_t
 *
__cÚd
)

1118 
__THROW
 
	`__nÚnuÎ
 ((1));

1121 
	$±h»ad_cÚd_sigÇl
 (
±h»ad_cÚd_t
 *
__cÚd
)

1122 
__THROWNL
 
	`__nÚnuÎ
 ((1));

1125 
	$±h»ad_cÚd_brßdÿ¡
 (
±h»ad_cÚd_t
 *
__cÚd
)

1126 
__THROWNL
 
	`__nÚnuÎ
 ((1));

1133 
	$±h»ad_cÚd_wa™
 (
±h»ad_cÚd_t
 *
__»¡riù
 
__cÚd
,

1134 
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
)

1135 
	`__nÚnuÎ
 ((1, 2));

1144 #iâdeà
__USE_TIME_BITS64


1145 
	$±h»ad_cÚd_timedwa™
 (
±h»ad_cÚd_t
 *
__»¡riù
 
__cÚd
,

1146 
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
,

1147 cÚ¡ 
time¥ec
 *
__»¡riù
 
__ab¡ime
)

1148 
	`__nÚnuÎ
 ((1, 2, 3));

1150 #ifdeà
__REDIRECT


1151 
	`__REDIRECT
 (
±h»ad_cÚd_timedwa™
,

1152 (
±h»ad_cÚd_t
 *
__»¡riù
 
__cÚd
,

1153 
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
,

1154 cÚ¡ 
time¥ec
 *
__»¡riù
 
__ab¡ime
),

1155 
__±h»ad_cÚd_timedwa™64
)

1156 
	`__nÚnuÎ
 ((1, 2, 3));

1158 
	#±h»ad_cÚd_timedwa™
 
__±h»ad_cÚd_timedwa™64


	)

1162 #ifdeà
__USE_GNU


1170 #iâdeà
__USE_TIME_BITS64


1171 
	$±h»ad_cÚd_şockwa™
 (
±h»ad_cÚd_t
 *
__»¡riù
 
__cÚd
,

1172 
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
,

1173 
__şockid_t
 
__şock_id
,

1174 cÚ¡ 
time¥ec
 *
__»¡riù
 
__ab¡ime
)

1175 
	`__nÚnuÎ
 ((1, 2, 4));

1177 #ifdeà
__REDIRECT


1178 
	`__REDIRECT
 (
±h»ad_cÚd_şockwa™
,

1179 (
±h»ad_cÚd_t
 *
__»¡riù
 
__cÚd
,

1180 
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
,

1181 
__şockid_t
 
__şock_id
,

1182 cÚ¡ 
time¥ec
 *
__»¡riù
 
__ab¡ime
),

1183 
__±h»ad_cÚd_şockwa™64
)

1184 
	`__nÚnuÎ
 ((1, 2, 4));

1186 
	#±h»ad_cÚd_şockwa™
 
__±h»ad_cÚd_şockwa™64


	)

1194 
	$±h»ad_cÚd©Œ_š™
 (
±h»ad_cÚd©Œ_t
 *
__©Œ
)

1195 
__THROW
 
	`__nÚnuÎ
 ((1));

1198 
	$±h»ad_cÚd©Œ_de¡roy
 (
±h»ad_cÚd©Œ_t
 *
__©Œ
)

1199 
__THROW
 
	`__nÚnuÎ
 ((1));

1202 
	$±h»ad_cÚd©Œ_g‘psh¬ed
 (cÚ¡ 
±h»ad_cÚd©Œ_t
 *

1203 
__»¡riù
 
__©Œ
,

1204 *
__»¡riù
 
__psh¬ed
)

1205 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1208 
	$±h»ad_cÚd©Œ_£sh¬ed
 (
±h»ad_cÚd©Œ_t
 *
__©Œ
,

1209 
__psh¬ed
è
__THROW
 
	`__nÚnuÎ
 ((1));

1211 #ifdeà
__USE_XOPEN2K


1213 
	$±h»ad_cÚd©Œ_g‘şock
 (cÚ¡ 
±h»ad_cÚd©Œ_t
 *

1214 
__»¡riù
 
__©Œ
,

1215 
__şockid_t
 *
__»¡riù
 
__şock_id
)

1216 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1219 
	$±h»ad_cÚd©Œ_£tşock
 (
±h»ad_cÚd©Œ_t
 *
__©Œ
,

1220 
__şockid_t
 
__şock_id
)

1221 
__THROW
 
	`__nÚnuÎ
 ((1));

1225 #ifdeà
__USE_XOPEN2K


1230 
	$±h»ad_¥š_š™
 (
±h»ad_¥šlock_t
 *
__lock
, 
__psh¬ed
)

1231 
__THROW
 
	`__nÚnuÎ
 ((1));

1234 
	$±h»ad_¥š_de¡roy
 (
±h»ad_¥šlock_t
 *
__lock
)

1235 
__THROW
 
	`__nÚnuÎ
 ((1));

1238 
	$±h»ad_¥š_lock
 (
±h»ad_¥šlock_t
 *
__lock
)

1239 
__THROWNL
 
	`__nÚnuÎ
 ((1));

1242 
	$±h»ad_¥š_Œylock
 (
±h»ad_¥šlock_t
 *
__lock
)

1243 
__THROWNL
 
	`__nÚnuÎ
 ((1));

1246 
	$±h»ad_¥š_uÆock
 (
±h»ad_¥šlock_t
 *
__lock
)

1247 
__THROWNL
 
	`__nÚnuÎ
 ((1));

1254 
	$±h»ad_b¬r›r_š™
 (
±h»ad_b¬r›r_t
 *
__»¡riù
 
__b¬r›r
,

1255 cÚ¡ 
±h»ad_b¬r›¿‰r_t
 *
__»¡riù


1256 
__©Œ
, 
__couÁ
)

1257 
__THROW
 
	`__nÚnuÎ
 ((1));

1260 
	$±h»ad_b¬r›r_de¡roy
 (
±h»ad_b¬r›r_t
 *
__b¬r›r
)

1261 
__THROW
 
	`__nÚnuÎ
 ((1));

1264 
	$±h»ad_b¬r›r_wa™
 (
±h»ad_b¬r›r_t
 *
__b¬r›r
)

1265 
__THROWNL
 
	`__nÚnuÎ
 ((1));

1269 
	$±h»ad_b¬r›¿‰r_š™
 (
±h»ad_b¬r›¿‰r_t
 *
__©Œ
)

1270 
__THROW
 
	`__nÚnuÎ
 ((1));

1273 
	$±h»ad_b¬r›¿‰r_de¡roy
 (
±h»ad_b¬r›¿‰r_t
 *
__©Œ
)

1274 
__THROW
 
	`__nÚnuÎ
 ((1));

1277 
	$±h»ad_b¬r›¿‰r_g‘psh¬ed
 (cÚ¡ 
±h»ad_b¬r›¿‰r_t
 *

1278 
__»¡riù
 
__©Œ
,

1279 *
__»¡riù
 
__psh¬ed
)

1280 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1283 
	$±h»ad_b¬r›¿‰r_£sh¬ed
 (
±h»ad_b¬r›¿‰r_t
 *
__©Œ
,

1284 
__psh¬ed
)

1285 
__THROW
 
	`__nÚnuÎ
 ((1));

1297 
	$±h»ad_key_ü—‹
 (
±h»ad_key_t
 *
__key
,

1298 (*
__de¡r_funùiÚ
) (*))

1299 
__THROW
 
	`__nÚnuÎ
 ((1));

1302 
	$±h»ad_key_d–‘e
 (
±h»ad_key_t
 
__key
è
__THROW
;

1305 *
	$±h»ad_g‘¥ecific
 (
±h»ad_key_t
 
__key
è
__THROW
;

1308 
	$±h»ad_£t¥ecific
 (
±h»ad_key_t
 
__key
,

1309 cÚ¡ *
__poš‹r
)

1310 
__THROW
 
	`__©Œ_acûss_nÚe
 (2);

1313 #ifdeà
__USE_XOPEN2K


1315 
	$±h»ad_g‘ıuşockid
 (
±h»ad_t
 
__th»ad_id
,

1316 
__şockid_t
 *
__şock_id
)

1317 
__THROW
 
	`__nÚnuÎ
 ((2));

1332 
	$±h»ad_©fÜk
 ((*
__´•¬e
) (),

1333 (*
__·»Á
) (),

1334 (*
__chd
è()è
__THROW
;

1337 #ifdeà
__USE_EXTERN_INLINES


1339 
__ex‹º_šlše
 

1340 
	`__NTH
 (
	$±h»ad_equ®
 (
±h»ad_t
 
__th»ad1
,…th»ad_ˆ
__th»ad2
))

1342  
__th»ad1
 =ğ
__th»ad2
;

1343 
	}
}

1346 
	g__END_DECLS


	@/usr/include/regex.h

20 #iâdeà
_REGEX_H


21 
	#_REGEX_H
 1

	)

23 
	~<sys/ty³s.h
>

26 #ifdeà
__ılu¥lus


32 #ifdeà
_GNU_SOURCE


33 
	#__USE_GNU
 1

	)

36 #ifdeà
_REGEX_LARGE_OFFSETS


45 
size_t
 
	t__»_size_t
;

49 
size_t
 
	t__»_lÚg_size_t
;

55 
	t__»_size_t
;

56 
	t__»_lÚg_size_t
;

64 
	ts_»g_t
;

65 
	taùive_»g_t
;

72 
	t»g_syÁax_t
;

74 #ifdeà
__USE_GNU


77 
	#RE_BACKSLASH_ESCAPE_IN_LISTS
 ((è1)

	)

82 
	#RE_BK_PLUS_QM
 (
RE_BACKSLASH_ESCAPE_IN_LISTS
 << 1)

	)

88 
	#RE_CHAR_CLASSES
 (
RE_BK_PLUS_QM
 << 1)

	)

102 
	#RE_CONTEXT_INDEP_ANCHORS
 (
RE_CHAR_CLASSES
 << 1)

	)

110 
	#RE_CONTEXT_INDEP_OPS
 (
RE_CONTEXT_INDEP_ANCHORS
 << 1)

	)

114 
	#RE_CONTEXT_INVALID_OPS
 (
RE_CONTEXT_INDEP_OPS
 << 1)

	)

118 
	#RE_DOT_NEWLINE
 (
RE_CONTEXT_INVALID_OPS
 << 1)

	)

122 
	#RE_DOT_NOT_NULL
 (
RE_DOT_NEWLINE
 << 1)

	)

126 
	#RE_HAT_LISTS_NOT_NEWLINE
 (
RE_DOT_NOT_NULL
 << 1)

	)

131 
	#RE_INTERVALS
 (
RE_HAT_LISTS_NOT_NEWLINE
 << 1)

	)

135 
	#RE_LIMITED_OPS
 (
RE_INTERVALS
 << 1)

	)

139 
	#RE_NEWLINE_ALT
 (
RE_LIMITED_OPS
 << 1)

	)

144 
	#RE_NO_BK_BRACES
 (
RE_NEWLINE_ALT
 << 1)

	)

148 
	#RE_NO_BK_PARENS
 (
RE_NO_BK_BRACES
 << 1)

	)

152 
	#RE_NO_BK_REFS
 (
RE_NO_BK_PARENS
 << 1)

	)

156 
	#RE_NO_BK_VBAR
 (
RE_NO_BK_REFS
 << 1)

	)

162 
	#RE_NO_EMPTY_RANGES
 (
RE_NO_BK_VBAR
 << 1)

	)

166 
	#RE_UNMATCHED_RIGHT_PAREN_ORD
 (
RE_NO_EMPTY_RANGES
 << 1)

	)

170 
	#RE_NO_POSIX_BACKTRACKING
 (
RE_UNMATCHED_RIGHT_PAREN_ORD
 << 1)

	)

174 
	#RE_NO_GNU_OPS
 (
RE_NO_POSIX_BACKTRACKING
 << 1)

	)

182 
	#RE_DEBUG
 (
RE_NO_GNU_OPS
 << 1)

	)

187 
	#RE_INVALID_INTERVAL_ORD
 (
RE_DEBUG
 << 1)

	)

191 
	#RE_ICASE
 (
RE_INVALID_INTERVAL_ORD
 << 1)

	)

196 
	#RE_CARET_ANCHORS_HERE
 (
RE_ICASE
 << 1)

	)

200 
	#RE_CONTEXT_INVALID_DUP
 (
RE_CARET_ANCHORS_HERE
 << 1)

	)

204 
	#RE_NO_SUB
 (
RE_CONTEXT_INVALID_DUP
 << 1)

	)

211 
»g_syÁax_t
 
»_syÁax_İtiÚs
;

213 #ifdeà
__USE_GNU


218 
	#RE_SYNTAX_EMACS
 0

	)

220 
	#RE_SYNTAX_AWK
 \

221 (
RE_BACKSLASH_ESCAPE_IN_LISTS
 | 
RE_DOT_NOT_NULL
 \

222 | 
RE_NO_BK_PARENS
 | 
RE_NO_BK_REFS
 \

223 | 
RE_NO_BK_VBAR
 | 
RE_NO_EMPTY_RANGES
 \

224 | 
RE_DOT_NEWLINE
 | 
RE_CONTEXT_INDEP_ANCHORS
 \

225 | 
RE_CHAR_CLASSES
 \

226 | 
RE_UNMATCHED_RIGHT_PAREN_ORD
 | 
RE_NO_GNU_OPS
)

	)

228 
	#RE_SYNTAX_GNU_AWK
 \

229 ((
RE_SYNTAX_POSIX_EXTENDED
 | 
RE_BACKSLASH_ESCAPE_IN_LISTS
 \

230 | 
RE_INVALID_INTERVAL_ORD
) \

231 & ~(
RE_DOT_NOT_NULL
 | 
RE_CONTEXT_INDEP_OPS
 \

232 | 
RE_CONTEXT_INVALID_OPS
 ))

	)

234 
	#RE_SYNTAX_POSIX_AWK
 \

235 (
RE_SYNTAX_POSIX_EXTENDED
 | 
RE_BACKSLASH_ESCAPE_IN_LISTS
 \

236 | 
RE_INTERVALS
 | 
RE_NO_GNU_OPS
 \

237 | 
RE_INVALID_INTERVAL_ORD
)

	)

239 
	#RE_SYNTAX_GREP
 \

240 ((
RE_SYNTAX_POSIX_BASIC
 | 
RE_NEWLINE_ALT
) \

241 & ~(
RE_CONTEXT_INVALID_DUP
 | 
RE_DOT_NOT_NULL
))

	)

243 
	#RE_SYNTAX_EGREP
 \

244 ((
RE_SYNTAX_POSIX_EXTENDED
 | 
RE_INVALID_INTERVAL_ORD
 | 
RE_NEWLINE_ALT
) \

245 & ~(
RE_CONTEXT_INVALID_OPS
 | 
RE_DOT_NOT_NULL
))

	)

248 
	#RE_SYNTAX_POSIX_EGREP
 \

249 
RE_SYNTAX_EGREP


	)

252 
	#RE_SYNTAX_ED
 
RE_SYNTAX_POSIX_BASIC


	)

254 
	#RE_SYNTAX_SED
 
RE_SYNTAX_POSIX_BASIC


	)

257 
	#_RE_SYNTAX_POSIX_COMMON
 \

258 (
RE_CHAR_CLASSES
 | 
RE_DOT_NEWLINE
 | 
RE_DOT_NOT_NULL
 \

259 | 
RE_INTERVALS
 | 
RE_NO_EMPTY_RANGES
)

	)

261 
	#RE_SYNTAX_POSIX_BASIC
 \

262 (
_RE_SYNTAX_POSIX_COMMON
 | 
RE_BK_PLUS_QM
 | 
RE_CONTEXT_INVALID_DUP
)

	)

267 
	#RE_SYNTAX_POSIX_MINIMAL_BASIC
 \

268 (
_RE_SYNTAX_POSIX_COMMON
 | 
RE_LIMITED_OPS
)

	)

270 
	#RE_SYNTAX_POSIX_EXTENDED
 \

271 (
_RE_SYNTAX_POSIX_COMMON
 | 
RE_CONTEXT_INDEP_ANCHORS
 \

272 | 
RE_CONTEXT_INDEP_OPS
 | 
RE_NO_BK_BRACES
 \

273 | 
RE_NO_BK_PARENS
 | 
RE_NO_BK_VBAR
 \

274 | 
RE_CONTEXT_INVALID_OPS
 | 
RE_UNMATCHED_RIGHT_PAREN_ORD
)

	)

278 
	#RE_SYNTAX_POSIX_MINIMAL_EXTENDED
 \

279 (
_RE_SYNTAX_POSIX_COMMON
 | 
RE_CONTEXT_INDEP_ANCHORS
 \

280 | 
RE_CONTEXT_INVALID_OPS
 | 
RE_NO_BK_BRACES
 \

281 | 
RE_NO_BK_PARENS
 | 
RE_NO_BK_REFS
 \

282 | 
RE_NO_BK_VBAR
 | 
RE_UNMATCHED_RIGHT_PAREN_ORD
)

	)

288 #ifdeà
_REGEX_INCLUDE_LIMITS_H


289 
	~<lim™s.h
>

291 #ifdeà
RE_DUP_MAX


292 #undeà
RE_DUP_MAX


302 
	#RE_DUP_MAX
 (0x7fff)

	)

310 
	#REG_EXTENDED
 1

	)

314 
	#REG_ICASE
 (1 << 1)

	)

319 
	#REG_NEWLINE
 (1 << 2)

	)

323 
	#REG_NOSUB
 (1 << 3)

	)

333 
	#REG_NOTBOL
 1

	)

336 
	#REG_NOTEOL
 (1 << 1)

	)

340 
	#REG_STARTEND
 (1 << 2)

	)

348 
	g_REG_ENOSYS
 = -1,

349 
	g_REG_NOERROR
 = 0,

350 
	g_REG_NOMATCH
,

354 
	g_REG_BADPAT
,

355 
	g_REG_ECOLLATE
,

356 
	g_REG_ECTYPE
,

357 
	g_REG_EESCAPE
,

358 
	g_REG_ESUBREG
,

359 
	g_REG_EBRACK
,

360 
	g_REG_EPAREN
,

361 
	g_REG_EBRACE
,

362 
	g_REG_BADBR
,

363 
	g_REG_ERANGE
,

364 
	g_REG_ESPACE
,

365 
	g_REG_BADRPT
,

368 
	g_REG_EEND
,

369 
	g_REG_ESIZE
,

370 
	g_REG_ERPAREN


371 } 
	t»g_”rcode_t
;

373 #ià
defšed
 
_XOPEN_SOURCE
 || defšed 
__USE_XOPEN2K


374 
	#REG_ENOSYS
 
_REG_ENOSYS


	)

376 
	#REG_NOERROR
 
_REG_NOERROR


	)

377 
	#REG_NOMATCH
 
_REG_NOMATCH


	)

378 
	#REG_BADPAT
 
_REG_BADPAT


	)

379 
	#REG_ECOLLATE
 
_REG_ECOLLATE


	)

380 
	#REG_ECTYPE
 
_REG_ECTYPE


	)

381 
	#REG_EESCAPE
 
_REG_EESCAPE


	)

382 
	#REG_ESUBREG
 
_REG_ESUBREG


	)

383 
	#REG_EBRACK
 
_REG_EBRACK


	)

384 
	#REG_EPAREN
 
_REG_EPAREN


	)

385 
	#REG_EBRACE
 
_REG_EBRACE


	)

386 
	#REG_BADBR
 
_REG_BADBR


	)

387 
	#REG_ERANGE
 
_REG_ERANGE


	)

388 
	#REG_ESPACE
 
_REG_ESPACE


	)

389 
	#REG_BADRPT
 
_REG_BADRPT


	)

390 
	#REG_EEND
 
_REG_EEND


	)

391 
	#REG_ESIZE
 
_REG_ESIZE


	)

392 
	#REG_ERPAREN
 
_REG_ERPAREN


	)

400 #iâdeà
RE_TRANSLATE_TYPE


401 
	#__RE_TRANSLATE_TYPE
 *

	)

402 #ifdeà
__USE_GNU


403 
	#RE_TRANSLATE_TYPE
 
__RE_TRANSLATE_TYPE


	)

407 #ifdeà
__USE_GNU


408 
	#__REPB_PREFIX
(
Çme
è
	)
name

410 
	#__REPB_PREFIX
(
Çme
è
__
##
	)
name

413 
	s»_·‰”n_bufãr


417 
»_dç_t
 *
__REPB_PREFIX
(
bufãr
);

420 
__»_lÚg_size_t
 
__REPB_PREFIX
(
®loÿ‹d
);

423 
__»_lÚg_size_t
 
__REPB_PREFIX
(
u£d
);

426 
»g_syÁax_t
 
__REPB_PREFIX
(
syÁax
);

431 *
__REPB_PREFIX
(
ç¡m­
);

437 
__RE_TRANSLATE_TYPE
 
__REPB_PREFIX
(
Œª¦©e
);

440 
size_t
 
	g»_nsub
;

446 
__REPB_PREFIX
(
ÿn_be_nuÎ
) : 1;

452 #ifdeà
__USE_GNU


453 
	#REGS_UNALLOCATED
 0

	)

454 
	#REGS_REALLOCATE
 1

	)

455 
	#REGS_FIXED
 2

	)

457 
__REPB_PREFIX
(
»gs_®loÿ‹d
) : 2;

461 
__REPB_PREFIX
(
ç¡m­_accu¿‹
) : 1;

465 
__REPB_PREFIX
(
no_sub
) : 1;

469 
__REPB_PREFIX
(
nÙ_bŞ
) : 1;

472 
__REPB_PREFIX
(
nÙ_eŞ
) : 1;

475 
__REPB_PREFIX
(
Ãwlše_ªchÜ
) : 1;

478 
»_·‰”n_bufãr
 
	t»gex_t
;

481 #ifdeà
_REGEX_LARGE_OFFSETS


486 
ssize_t
 
	t»goff_t
;

490 
	t»goff_t
;

494 #ifdeà
__USE_GNU


497 
	s»_»gi¡”s


499 
__»_size_t
 
	gnum_»gs
;

500 
»goff_t
 *
	g¡¬t
;

501 
»goff_t
 *
	g’d
;

508 #iâdeà
RE_NREGS


509 
	#RE_NREGS
 30

	)

519 
»goff_t
 
	grm_so
;

520 
»goff_t
 
	grm_eo
;

521 } 
	t»gm©ch_t
;

525 #iâdeà
_REGEX_NELTS


526 #ià(
defšed
 
__STDC_VERSION__
 && 199901L <= __STDC_VERSION__ \

527 && !
defšed
 
	g__STDC_NO_VLA__
)

528 
	#_REGEX_NELTS
(
n
è
	)
n

530 
	#_REGEX_NELTS
(
n
)

	)

534 #ià
defšed
 
__GNUC__
 && 4 < __GNUC__ + (6 <ğ
__GNUC_MINOR__
)

535 #´agm¨
GCC
 
dŸgno¡ic
 
push


536 #´agm¨
GCC
 
dŸgno¡ic
 
ignÜed
 "-Wvla"

539 #iâdeà
_A‰r_acûss_


540 #ifdeà
__©Œ_acûss


541 
	#_A‰r_acûss_
(
¬g
è
	`__©Œ_acûss
 (¬g)

	)

542 #–ià
defšed
 
__GNUC__
 && 10 <= __GNUC__

543 
	#_A‰r_acûss_
(
x
è
	`__©Œibu‹__
 ((
__acûss__
 x))

	)

545 
	#_A‰r_acûss_
(
x
)

	)

549 #ifdeà
__USE_GNU


552 
»g_syÁax_t
 
»_£t_syÁax
 (»g_syÁax_ˆ
__syÁax
);

562 cÚ¡ *
»_compe_·‰”n
 (cÚ¡ *
__·‰”n
, 
size_t
 
__Ëngth
,

563 
»_·‰”n_bufãr
 *
__bufãr
)

564 
_A‰r_acûss_
 ((
__»ad_Úly__
, 1, 2));

570 
»_compe_ç¡m­
 (
»_·‰”n_bufãr
 *
__bufãr
);

578 
»goff_t
 
»_£¬ch
 (
»_·‰”n_bufãr
 *
__bufãr
,

579 cÚ¡ *
__SŒšg
, 
»goff_t
 
__Ëngth
,

580 
»goff_t
 
__¡¬t
,„egoff_ˆ
__¿nge
,

581 
»_»gi¡”s
 *
__»gs
)

582 
_A‰r_acûss_
 ((
__»ad_Úly__
, 2, 3));

587 
»goff_t
 
»_£¬ch_2
 (
»_·‰”n_bufãr
 *
__bufãr
,

588 cÚ¡ *
__¡ršg1
, 
»goff_t
 
__Ëngth1
,

589 cÚ¡ *
__¡ršg2
, 
»goff_t
 
__Ëngth2
,

590 
»goff_t
 
__¡¬t
,„egoff_ˆ
__¿nge
,

591 
»_»gi¡”s
 *
__»gs
,

592 
»goff_t
 
__¡İ
)

593 
_A‰r_acûss_
 ((
__»ad_Úly__
, 2, 3))

594 
_A‰r_acûss_
 ((
__»ad_Úly__
, 4, 5));

599 
»goff_t
 
»_m©ch
 (
»_·‰”n_bufãr
 *
__bufãr
,

600 cÚ¡ *
__SŒšg
, 
»goff_t
 
__Ëngth
,

601 
»goff_t
 
__¡¬t
, 
»_»gi¡”s
 *
__»gs
)

602 
_A‰r_acûss_
 ((
__»ad_Úly__
, 2, 3));

606 
»goff_t
 
»_m©ch_2
 (
»_·‰”n_bufãr
 *
__bufãr
,

607 cÚ¡ *
__¡ršg1
, 
»goff_t
 
__Ëngth1
,

608 cÚ¡ *
__¡ršg2
, 
»goff_t
 
__Ëngth2
,

609 
»goff_t
 
__¡¬t
, 
»_»gi¡”s
 *
__»gs
,

610 
»goff_t
 
__¡İ
)

611 
_A‰r_acûss_
 ((
__»ad_Úly__
, 2, 3))

612 
_A‰r_acûss_
 ((
__»ad_Úly__
, 4, 5));

627 
»_£t_»gi¡”s
 (
»_·‰”n_bufãr
 *
__bufãr
,

628 
»_»gi¡”s
 *
__»gs
,

629 
__»_size_t
 
__num_»gs
,

630 
»goff_t
 *
__¡¬ts
,„egoff_ˆ*
__’ds
);

633 #ià
defšed
 
_REGEX_RE_COMP
 || (defšed 
_LIBC
 && defšed 
__USE_MISC
)

635 *
»_comp
 (const *);

636 
»_exec
 (const *);

645 #iâdeà
_Re¡riù_


646 #ià
defšed
 
__»¡riù
 \

647 || 2 < 
	g__GNUC__
 + (95 <ğ
__GNUC_MINOR__
) \

648 || 
__şªg_majÜ__
 >= 3

649 
	#_Re¡riù_
 
__»¡riù


	)

650 #–ià199901L <ğ
__STDC_VERSION__
 || 
defšed
 
»¡riù


651 
	#_Re¡riù_
 
»¡riù


	)

653 
	#_Re¡riù_


	)

661 #iâdeà
_Re¡riù_¬r_


662 #ifdeà
__»¡riù_¬r


663 
	#_Re¡riù_¬r_
 
__»¡riù_¬r


	)

664 #–ià((199901L <ğ
__STDC_VERSION__
 \

665 || 3 < 
__GNUC__
 + (1 <ğ
__GNUC_MINOR__
) \

666 || 
__şªg_majÜ__
 >= 3) \

667 && !
defšed
 
__ılu¥lus
)

668 
	#_Re¡riù_¬r_
 
_Re¡riù_


	)

670 
	#_Re¡riù_¬r_


	)

675 
»gcomp
 (
»gex_t
 *
_Re¡riù_
 
__´eg
,

676 cÚ¡ *
_Re¡riù_
 
__·‰”n
,

677 
__cæags
);

679 
»gexec
 (cÚ¡ 
»gex_t
 *
_Re¡riù_
 
__´eg
,

680 cÚ¡ *
_Re¡riù_
 
__SŒšg
, 
size_t
 
__nm©ch
,

681 
»gm©ch_t
 
__pm©ch
[
_Re¡riù_¬r_


682 
_REGEX_NELTS
 (
__nm©ch
)],

683 
__eæags
);

685 
size_t
 
»g”rÜ
 (
__”rcode
, cÚ¡ 
»gex_t
 *
_Re¡riù_
 
__´eg
,

686 *
_Re¡riù_
 
__”rbuf
, 
size_t
 
__”rbuf_size
)

687 
_A‰r_acûss_
 ((
__wr™e_Úly__
, 3, 4));

689 
»gä“
 (
»gex_t
 *
__´eg
);

691 #ià
defšed
 
__GNUC__
 && 4 < __GNUC__ + (6 <ğ
__GNUC_MINOR__
)

692 #´agm¨
GCC
 
dŸgno¡ic
 
pİ


695 #ifdeà
__ılu¥lus


	@/usr/include/sched.h

19 #iâdef 
_SCHED_H


20 
	#_SCHED_H
 1

	)

22 
	~<ã©u»s.h
>

25 
	~<b™s/ty³s.h
>

27 
	#__Ãed_size_t


	)

28 
	#__Ãed_NULL


	)

29 
	~<¡ddef.h
>

31 
	~<b™s/ty³s/time_t.h
>

32 
	~<b™s/ty³s/¡ruù_time¥ec.h
>

33 #iâdeà
__USE_XOPEN2K


34 
	~<time.h
>

37 #iâdeà
__pid_t_defšed


38 
__pid_t
 
	tpid_t
;

39 
	#__pid_t_defšed


	)

43 
	~<b™s/sched.h
>

44 
	~<b™s/ıu-£t.h
>

47 
	#sched_´iÜ™y
 
sched_´iÜ™y


	)

48 
	#__sched_´iÜ™y
 
sched_´iÜ™y


	)

51 
__BEGIN_DECLS


54 
	$sched_£¬am
 (
__pid_t
 
__pid
, cÚ¡ 
sched_·¿m
 *
__·¿m
)

55 
__THROW
;

58 
	$sched_g‘·¿m
 (
__pid_t
 
__pid
, 
sched_·¿m
 *
__·¿m
è
__THROW
;

61 
	$sched_£tscheduËr
 (
__pid_t
 
__pid
, 
__pŞicy
,

62 cÚ¡ 
sched_·¿m
 *
__·¿m
è
__THROW
;

65 
	$sched_g‘scheduËr
 (
__pid_t
 
__pid
è
__THROW
;

68 
	$sched_y›ld
 (è
__THROW
;

71 
	$sched_g‘_´iÜ™y_max
 (
__®gÜ™hm
è
__THROW
;

74 
	$sched_g‘_´iÜ™y_mš
 (
__®gÜ™hm
è
__THROW
;

77 #iâdeà
__USE_TIME_BITS64


78 
	$sched_¼_g‘_š‹rv®
 (
__pid_t
 
__pid
, 
time¥ec
 *
__t
è
__THROW
;

80 #ifdeà
__REDIRECT_NTH


81 
	`__REDIRECT_NTH
 (
sched_¼_g‘_š‹rv®
,

82 (
__pid_t
 
__pid
, 
time¥ec
 *
__t
),

83 
__sched_¼_g‘_š‹rv®64
);

85 
	#sched_¼_g‘_š‹rv®
 
__sched_¼_g‘_š‹rv®64


	)

89 #ifdeà
__USE_GNU


91 
	#CPU_SETSIZE
 
__CPU_SETSIZE


	)

92 
	#CPU_SET
(
ıu
, 
ıu£
è
	`__CPU_SET_S
 (ıu,  (
ıu_£t_t
), cpu£)

	)

93 
	#CPU_CLR
(
ıu
, 
ıu£
è
	`__CPU_CLR_S
 (ıu,  (
ıu_£t_t
), cpu£)

	)

94 
	#CPU_ISSET
(
ıu
, 
ıu£
è
	`__CPU_ISSET_S
 (ıu,  (
ıu_£t_t
), \

95 
ıu£
)

	)

96 
	#CPU_ZERO
(
ıu£
è
	`__CPU_ZERO_S
 ( (
ıu_£t_t
), cpu£)

	)

97 
	#CPU_COUNT
(
ıu£
è
	`__CPU_COUNT_S
 ( (
ıu_£t_t
), cpu£)

	)

99 
	#CPU_SET_S
(
ıu
, 
£tsize
, 
ıu£
è
	`__CPU_SET_S
 (ıu, s‘size, cpu£)

	)

100 
	#CPU_CLR_S
(
ıu
, 
£tsize
, 
ıu£
è
	`__CPU_CLR_S
 (ıu, s‘size, cpu£)

	)

101 
	#CPU_ISSET_S
(
ıu
, 
£tsize
, 
ıu£
è
	`__CPU_ISSET_S
 (cpu, setsize, \

102 
ıu£
)

	)

103 
	#CPU_ZERO_S
(
£tsize
, 
ıu£
è
	`__CPU_ZERO_S
 (£tsize, cpu£)

	)

104 
	#CPU_COUNT_S
(
£tsize
, 
ıu£
è
	`__CPU_COUNT_S
 (£tsize, cpu£)

	)

106 
	#CPU_EQUAL
(
ıu£1
, 
ıu£2
) \

107 
	`__CPU_EQUAL_S
 ( (
ıu_£t_t
), 
ıu£1
, 
ıu£2
)

	)

108 
	#CPU_EQUAL_S
(
£tsize
, 
ıu£1
, 
ıu£2
) \

109 
	`__CPU_EQUAL_S
 (
£tsize
, 
ıu£1
, 
ıu£2
)

	)

111 
	#CPU_AND
(
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

112 
	`__CPU_OP_S
 ( (
ıu_£t_t
), 
de¡£t
, 
¤c£t1
, 
¤c£t2
, &)

	)

113 
	#CPU_OR
(
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

114 
	`__CPU_OP_S
 ( (
ıu_£t_t
), 
de¡£t
, 
¤c£t1
, 
¤c£t2
, |)

	)

115 
	#CPU_XOR
(
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

116 
	`__CPU_OP_S
 ( (
ıu_£t_t
), 
de¡£t
, 
¤c£t1
, 
¤c£t2
, ^)

	)

117 
	#CPU_AND_S
(
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

118 
	`__CPU_OP_S
 (
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
, &)

	)

119 
	#CPU_OR_S
(
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

120 
	`__CPU_OP_S
 (
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
, |)

	)

121 
	#CPU_XOR_S
(
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

122 
	`__CPU_OP_S
 (
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
, ^)

	)

124 
	#CPU_ALLOC_SIZE
(
couÁ
è
	`__CPU_ALLOC_SIZE
 (couÁ)

	)

125 
	#CPU_ALLOC
(
couÁ
è
	`__CPU_ALLOC
 (couÁ)

	)

126 
	#CPU_FREE
(
ıu£t
è
	`__CPU_FREE
 (ıu£t)

	)

130 
	$sched_£ffš™y
 (
__pid_t
 
__pid
, 
size_t
 
__ıu£tsize
,

131 cÚ¡ 
ıu_£t_t
 *
__ıu£t
è
__THROW
;

134 
	$sched_g‘affš™y
 (
__pid_t
 
__pid
, 
size_t
 
__ıu£tsize
,

135 
ıu_£t_t
 *
__ıu£t
è
__THROW
;

138 
__END_DECLS


	@/usr/include/signal.h

22 #iâdef 
_SIGNAL_H


23 
	#_SIGNAL_H


	)

25 
	~<ã©u»s.h
>

27 
	g__BEGIN_DECLS


29 
	~<b™s/ty³s.h
>

30 
	~<b™s/signum-g’”ic.h
>

32 
	~<b™s/ty³s/sig_©omic_t.h
>

34 #ià
defšed
 
__USE_POSIX


35 
	~<b™s/ty³s/sig£t_t.h
>

38 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K


39 #iâdeà
__pid_t_defšed


40 
__pid_t
 
	tpid_t
;

41 
	#__pid_t_defšed


	)

43 #ifdeà
__USE_XOPEN


45 #iâdeà
__uid_t_defšed


46 
__uid_t
 
	tuid_t
;

47 
	#__uid_t_defšed


	)

51 #ifdeà
__USE_POSIX199309


53 
	~<b™s/ty³s/¡ruù_time¥ec.h
>

56 #ià
defšed
 
__USE_POSIX199309
 || defšed 
__USE_XOPEN_EXTENDED


57 
	~<b™s/ty³s/sigšfo_t.h
>

58 
	~<b™s/sigšfo-cÚ¡s.h
>

61 #ifdeà
__USE_MISC


62 
	~<b™s/ty³s/sigv®_t.h
>

65 #ifdeà
__USE_POSIX199309


66 
	~<b™s/ty³s/sigev’t_t.h
>

67 
	~<b™s/sigev’t-cÚ¡s.h
>

72 (*
	t__sighªdËr_t
) ();

77 
__sighªdËr_t
 
	$__sysv_sigÇl
 (
__sig
, 
__sighªdËr_t
 
__hªdËr
)

78 
__THROW
;

79 #ifdeà
__USE_GNU


80 
__sighªdËr_t
 
	$sysv_sigÇl
 (
__sig
, 
__sighªdËr_t
 
__hªdËr
)

81 
__THROW
;

87 #ifdeà
__USE_MISC


88 
__sighªdËr_t
 
	$sigÇl
 (
__sig
, 
__sighªdËr_t
 
__hªdËr
)

89 
__THROW
;

92 #ifdeà
__REDIRECT_NTH


93 
__sighªdËr_t
 
	`__REDIRECT_NTH
 (
sigÇl
,

94 (
__sig
, 
__sighªdËr_t
 
__hªdËr
),

95 
__sysv_sigÇl
);

97 
	#sigÇl
 
__sysv_sigÇl


	)

101 #ià
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8


104 
__sighªdËr_t
 
	$bsd_sigÇl
 (
__sig
, 
__sighªdËr_t
 
__hªdËr
)

105 
__THROW
;

111 #ifdeà
__USE_POSIX


112 
	$kl
 (
__pid_t
 
__pid
, 
__sig
è
__THROW
;

115 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


119 
	$kÍg
 (
__pid_t
 
__pg½
, 
__sig
è
__THROW
;

123 
	$¿i£
 (
__sig
è
__THROW
;

125 #ifdeà
__USE_MISC


127 
__sighªdËr_t
 
	$ssigÇl
 (
__sig
, 
__sighªdËr_t
 
__hªdËr
)

128 
__THROW
;

129 
	$gsigÇl
 (
__sig
è
__THROW
;

132 #ifdeà
__USE_XOPEN2K8


134 
	`psigÇl
 (
__sig
, cÚ¡ *
__s
);

137 
	`psigšfo
 (cÚ¡ 
sigšfo_t
 *
__pšfo
, cÚ¡ *
__s
);

149 #ifdeà
__USE_XOPEN_EXTENDED


150 #ifdeà
__GNUC__


151 
	$sig·u£
 (
__sig
è
	`__asm__
 ("__xpg_sigpause")

152 
	`__©Œibu‹_d•»ÿ‹d_msg__
 ("Usehe sigsuspend function instead");

154 
	`__sig·u£
 (
__sig_Ü_mask
, 
__is_sig
);

156 
	#sig·u£
(
sig
è
	`__sig·u£
 ((sig), 1)

	)

161 #ifdeà
__USE_MISC


168 
	#sigmask
(
sig
) \

169 
	`__glibc_maüo_w¬nšg
 ("sigmask is deprecated") \

170 (()(1u << ((
sig
è- 1)))

	)

173 
	$sigblock
 (
__mask
è
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

176 
	$sig£tmask
 (
__mask
è
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

179 
	$sigg‘mask
 (è
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

183 #ifdeà
__USE_MISC


184 
	#NSIG
 
_NSIG


	)

187 #ifdeà
__USE_GNU


188 
__sighªdËr_t
 
	tsighªdËr_t
;

192 #ifdeà
__USE_MISC


193 
__sighªdËr_t
 
	tsig_t
;

196 #ifdeà
__USE_POSIX


199 
	$sigem±y£t
 (
sig£t_t
 *
__£t
è
__THROW
 
	`__nÚnuÎ
 ((1));

202 
	$sigfl£t
 (
sig£t_t
 *
__£t
è
__THROW
 
	`__nÚnuÎ
 ((1));

205 
	$sigadd£t
 (
sig£t_t
 *
__£t
, 
__signo
è
__THROW
 
	`__nÚnuÎ
 ((1));

208 
	$sigd–£t
 (
sig£t_t
 *
__£t
, 
__signo
è
__THROW
 
	`__nÚnuÎ
 ((1));

211 
	$sigismemb”
 (cÚ¡ 
sig£t_t
 *
__£t
, 
__signo
)

212 
__THROW
 
	`__nÚnuÎ
 ((1));

214 #ifdeà
__USE_GNU


216 
	$sigi£m±y£t
 (cÚ¡ 
sig£t_t
 *
__£t
è
__THROW
 
	`__nÚnuÎ
 ((1));

219 
	$sigªd£t
 (
sig£t_t
 *
__£t
, cÚ¡ sig£t_ˆ*
__Ëá
,

220 cÚ¡ 
sig£t_t
 *
__right
è
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3));

223 
	$sigÜ£t
 (
sig£t_t
 *
__£t
, cÚ¡ sig£t_ˆ*
__Ëá
,

224 cÚ¡ 
sig£t_t
 *
__right
è
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3));

229 
	~<b™s/sigaùiÚ.h
>

232 
	$sig´ocmask
 (
__how
, cÚ¡ 
sig£t_t
 *
__»¡riù
 
__£t
,

233 
sig£t_t
 *
__»¡riù
 
__o£t
è
__THROW
;

240 
	$sigsu¥’d
 (cÚ¡ 
sig£t_t
 *
__£t
è
	`__nÚnuÎ
 ((1));

243 
	$sigaùiÚ
 (
__sig
, cÚ¡ 
sigaùiÚ
 *
__»¡riù
 
__aù
,

244 
sigaùiÚ
 *
__»¡riù
 
__ßù
è
__THROW
;

247 
	$sig³ndšg
 (
sig£t_t
 *
__£t
è
__THROW
 
	`__nÚnuÎ
 ((1));

250 #ifdeà
__USE_POSIX199506


255 
	$sigwa™
 (cÚ¡ 
sig£t_t
 *
__»¡riù
 
__£t
, *__»¡riù 
__sig
)

256 
	`__nÚnuÎ
 ((1, 2));

259 #ifdeà
__USE_POSIX199309


264 
	$sigwa™šfo
 (cÚ¡ 
sig£t_t
 *
__»¡riù
 
__£t
,

265 
sigšfo_t
 *
__»¡riù
 
__šfo
è
	`__nÚnuÎ
 ((1));

272 #iâdeà
__USE_TIME_BITS64


273 
	$sigtimedwa™
 (cÚ¡ 
sig£t_t
 *
__»¡riù
 
__£t
,

274 
sigšfo_t
 *
__»¡riù
 
__šfo
,

275 cÚ¡ 
time¥ec
 *
__»¡riù
 
__timeout
)

276 
	`__nÚnuÎ
 ((1));

278 #ifdeà
__REDIRECT


279 
	`__REDIRECT
 (
sigtimedwa™
,

280 (cÚ¡ 
sig£t_t
 *
__»¡riù
 
__£t
,

281 
sigšfo_t
 *
__»¡riù
 
__šfo
,

282 cÚ¡ 
time¥ec
 *
__»¡riù
 
__timeout
),

283 
__sigtimedwa™64
)

284 
	`__nÚnuÎ
 ((1));

286 
	#sigtimedwa™
 
__sigtimedwa™64


	)

292 
	$sigqueue
 (
__pid_t
 
__pid
, 
__sig
, cÚ¡ 
sigv®
 
__v®
)

293 
__THROW
;

298 #ifdeà
__USE_MISC


301 
	~<b™s/sigcÚ‹xt.h
>

304 
	$sig»tuº
 (
sigcÚ‹xt
 *
__sı
è
__THROW
;

309 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


310 
	#__Ãed_size_t


	)

311 
	~<¡ddef.h
>

313 
	~<b™s/ty³s/¡ack_t.h
>

314 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


316 
	~<sys/ucÚ‹xt.h
>

320 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_MISC


324 
	$sigš‹¼u±
 (
__sig
, 
__š‹¼u±
è
__THROW


325 
	`__©Œibu‹_d•»ÿ‹d_msg__
 ("Use sigaction with SA_RESTART instead");

327 
	~<b™s/sig¡ack.h
>

328 
	~<b™s/sig¡ksz.h
>

329 
	~<b™s/ss_æags.h
>

333 
	$sig®t¡ack
 (cÚ¡ 
¡ack_t
 *
__»¡riù
 
__ss
,

334 
¡ack_t
 *
__»¡riù
 
__oss
è
__THROW
;

337 #ià((
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

338 || 
defšed
 
__USE_MISC
)

339 
	~<b™s/ty³s/¡ruù_sig¡ack.h
>

342 #ià((
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K
) \

343 || 
defšed
 
__USE_MISC
)

347 
	$sig¡ack
 (
sig¡ack
 *
__ss
, sig¡ack *
__oss
)

348 
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

351 #ifdeà
__USE_XOPEN_EXTENDED


355 
	$sighŞd
 (
__sig
è
__THROW


356 
	`__©Œibu‹_d•»ÿ‹d_msg__
 ("Usehe sigprocmask function instead");

359 
	$sig»l£
 (
__sig
è
__THROW


360 
	`__©Œibu‹_d•»ÿ‹d_msg__
 ("Usehe sigprocmask function instead");

363 
	$sigignÜe
 (
__sig
è
__THROW


364 
	`__©Œibu‹_d•»ÿ‹d_msg__
 ("Usehe signal function instead");

367 
__sighªdËr_t
 
	$sig£t
 (
__sig
, 
__sighªdËr_t
 
__di¥
è
__THROW


368 
__©Œibu‹_d•»ÿ‹d_msg__


372 #ià
defšed
 
__USE_POSIX199506
 || defšed 
__USE_UNIX98


375 
	~<b™s/±h»adty³s.h
>

376 
	~<b™s/sigth»ad.h
>

383 
	$__libc_cu¼’t_sig¹mš
 (è
__THROW
;

385 
	$__libc_cu¼’t_sig¹max
 (è
__THROW
;

387 
	#SIGRTMIN
 (
	`__libc_cu¼’t_sig¹mš
 ())

	)

388 
	#SIGRTMAX
 (
	`__libc_cu¼’t_sig¹max
 ())

	)

391 
	~<b™s/sigÇl_ext.h
>

393 
__END_DECLS


	@/usr/include/spawn.h

19 #iâdef 
_SPAWN_H


20 
	#_SPAWN_H
 1

	)

22 
	~<ã©u»s.h
>

23 
	~<sched.h
>

24 
	~<sys/ty³s.h
>

25 
	~<b™s/ty³s/sig£t_t.h
>

31 
	m__æags
;

32 
pid_t
 
	m__pg½
;

33 
sig£t_t
 
	m__sd
;

34 
sig£t_t
 
	m__ss
;

35 
sched_·¿m
 
	m__¥
;

36 
	m__pŞicy
;

37 
	m__·d
[16];

38 } 
	tposix_¥awÇ‰r_t
;

45 
	m__®loÿ‹d
;

46 
	m__u£d
;

47 
__¥awn_aùiÚ
 *
	m__aùiÚs
;

48 
	m__·d
[16];

49 } 
	tposix_¥awn_fe_aùiÚs_t
;

53 
	#POSIX_SPAWN_RESETIDS
 0x01

	)

54 
	#POSIX_SPAWN_SETPGROUP
 0x02

	)

55 
	#POSIX_SPAWN_SETSIGDEF
 0x04

	)

56 
	#POSIX_SPAWN_SETSIGMASK
 0x08

	)

57 
	#POSIX_SPAWN_SETSCHEDPARAM
 0x10

	)

58 
	#POSIX_SPAWN_SETSCHEDULER
 0x20

	)

59 #ifdeà
__USE_GNU


60 
	#POSIX_SPAWN_USEVFORK
 0x40

	)

61 
	#POSIX_SPAWN_SETSID
 0x80

	)

65 
__BEGIN_DECLS


72 
	$posix_¥awn
 (
pid_t
 *
__»¡riù
 
__pid
,

73 cÚ¡ *
__»¡riù
 
__·th
,

74 cÚ¡ 
posix_¥awn_fe_aùiÚs_t
 *
__»¡riù


75 
__fe_aùiÚs
,

76 cÚ¡ 
posix_¥awÇ‰r_t
 *
__»¡riù
 
__©Œp
,

77 *cÚ¡ 
__¬gv
[
__»¡riù_¬r
],

78 *cÚ¡ 
__’vp
[
__»¡riù_¬r
])

79 
	`__nÚnuÎ
 ((2, 5));

85 
	$posix_¥awÅ
 (
pid_t
 *
__pid
, cÚ¡ *
__fe
,

86 cÚ¡ 
posix_¥awn_fe_aùiÚs_t
 *
__fe_aùiÚs
,

87 cÚ¡ 
posix_¥awÇ‰r_t
 *
__©Œp
,

88 *cÚ¡ 
__¬gv
[], *cÚ¡ 
__’vp
[])

89 
	`__nÚnuÎ
 ((2, 5));

93 
	$posix_¥awÇ‰r_š™
 (
posix_¥awÇ‰r_t
 *
__©Œ
)

94 
__THROW
 
	`__nÚnuÎ
 ((1));

97 
	$posix_¥awÇ‰r_de¡roy
 (
posix_¥awÇ‰r_t
 *
__©Œ
)

98 
__THROW
 
	`__nÚnuÎ
 ((1));

102 
	$posix_¥awÇ‰r_g‘sigdeçuÉ
 (cÚ¡ 
posix_¥awÇ‰r_t
 *

103 
__»¡riù
 
__©Œ
,

104 
sig£t_t
 *
__»¡riù
 
__sigdeçuÉ
)

105 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

108 
	$posix_¥awÇ‰r_£tsigdeçuÉ
 (
posix_¥awÇ‰r_t
 *
__»¡riù
 
__©Œ
,

109 cÚ¡ 
sig£t_t
 *
__»¡riù


110 
__sigdeçuÉ
)

111 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

114 
	$posix_¥awÇ‰r_g‘sigmask
 (cÚ¡ 
posix_¥awÇ‰r_t
 *
__»¡riù


115 
__©Œ
,

116 
sig£t_t
 *
__»¡riù
 
__sigmask
)

117 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

120 
	$posix_¥awÇ‰r_£tsigmask
 (
posix_¥awÇ‰r_t
 *
__»¡riù
 
__©Œ
,

121 cÚ¡ 
sig£t_t
 *
__»¡riù
 
__sigmask
)

122 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

125 
	$posix_¥awÇ‰r_g‘æags
 (cÚ¡ 
posix_¥awÇ‰r_t
 *
__»¡riù


126 
__©Œ
,

127 *
__»¡riù
 
__æags
)

128 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

131 
	$posix_¥awÇ‰r_£tæags
 (
posix_¥awÇ‰r_t
 *
_©Œ
,

132 
__æags
)

133 
__THROW
 
	`__nÚnuÎ
 ((1));

136 
	$posix_¥awÇ‰r_g‘pgroup
 (cÚ¡ 
posix_¥awÇ‰r_t
 *
__»¡riù


137 
__©Œ
, 
pid_t
 *
__»¡riù
 
__pgroup
)

138 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

141 
	$posix_¥awÇ‰r_£group
 (
posix_¥awÇ‰r_t
 *
__©Œ
,

142 
pid_t
 
__pgroup
)

143 
__THROW
 
	`__nÚnuÎ
 ((1));

146 
	$posix_¥awÇ‰r_g‘schedpŞicy
 (cÚ¡ 
posix_¥awÇ‰r_t
 *

147 
__»¡riù
 
__©Œ
,

148 *
__»¡riù
 
__schedpŞicy
)

149 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

152 
	$posix_¥awÇ‰r_£tschedpŞicy
 (
posix_¥awÇ‰r_t
 *
__©Œ
,

153 
__schedpŞicy
)

154 
__THROW
 
	`__nÚnuÎ
 ((1));

157 
	$posix_¥awÇ‰r_g‘sched·¿m
 (cÚ¡ 
posix_¥awÇ‰r_t
 *

158 
__»¡riù
 
__©Œ
,

159 
sched_·¿m
 *
__»¡riù


160 
__sched·¿m
)

161 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

164 
	$posix_¥awÇ‰r_£tsched·¿m
 (
posix_¥awÇ‰r_t
 *
__»¡riù
 
__©Œ
,

165 cÚ¡ 
sched_·¿m
 *

166 
__»¡riù
 
__sched·¿m
)

167 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

170 
	$posix_¥awn_fe_aùiÚs_š™
 (
posix_¥awn_fe_aùiÚs_t
 *

171 
__fe_aùiÚs
)

172 
__THROW
 
	`__nÚnuÎ
 ((1));

175 
	$posix_¥awn_fe_aùiÚs_de¡roy
 (
posix_¥awn_fe_aùiÚs_t
 *

176 
__fe_aùiÚs
)

177 
__THROW
 
	`__nÚnuÎ
 ((1));

181 
	$posix_¥awn_fe_aùiÚs_addİ’
 (
posix_¥awn_fe_aùiÚs_t
 *

182 
__»¡riù
 
__fe_aùiÚs
,

183 
__fd
,

184 cÚ¡ *
__»¡riù
 
__·th
,

185 
__oæag
, 
mode_t
 
__mode
)

186 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

190 
	$posix_¥awn_fe_aùiÚs_addşo£
 (
posix_¥awn_fe_aùiÚs_t
 *

191 
__fe_aùiÚs
, 
__fd
)

192 
__THROW
 
	`__nÚnuÎ
 ((1));

196 
	$posix_¥awn_fe_aùiÚs_adddup2
 (
posix_¥awn_fe_aùiÚs_t
 *

197 
__fe_aùiÚs
,

198 
__fd
, 
__Ãwfd
)

199 
__THROW
 
	`__nÚnuÎ
 ((1));

201 #ifdeà
__USE_GNU


204 
	$posix_¥awn_fe_aùiÚs_addchdœ_Å
 (
posix_¥awn_fe_aùiÚs_t
 *

205 
__»¡riù
 
__aùiÚs
,

206 cÚ¡ *
__»¡riù
 
__·th
)

207 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

212 
	$posix_¥awn_fe_aùiÚs_addfchdœ_Å
 (
posix_¥awn_fe_aùiÚs_t
 *,

213 
__fd
)

214 
__THROW
 
	`__nÚnuÎ
 ((1));

219 
	$posix_¥awn_fe_aùiÚs_addşo£äom_Å
 (
posix_¥awn_fe_aùiÚs_t
 *,

220 
__äom
)

221 
__THROW
 
	`__nÚnuÎ
 ((1));

226 
	$posix_¥awn_fe_aùiÚs_addtc£g½_Å
 (
posix_¥awn_fe_aùiÚs_t
 *,

227 
__tcfd
)

228 
__THROW
 
	`__nÚnuÎ
 ((1));

232 
__END_DECLS


	@/usr/include/stdint.h

22 #iâdeà
_STDINT_H


23 
	#_STDINT_H
 1

	)

25 
	#__GLIBC_INTERNAL_STARTING_HEADER_IMPLEMENTATION


	)

26 
	~<b™s/libc-h—d”-¡¬t.h
>

27 
	~<b™s/ty³s.h
>

28 
	~<b™s/wch¬.h
>

29 
	~<b™s/wÜdsize.h
>

34 
	~<b™s/¡dšt-šŠ.h
>

37 
	~<b™s/¡dšt-ušŠ.h
>

43 
__št_Ëa¡8_t
 
	tšt_Ëa¡8_t
;

44 
__št_Ëa¡16_t
 
	tšt_Ëa¡16_t
;

45 
__št_Ëa¡32_t
 
	tšt_Ëa¡32_t
;

46 
__št_Ëa¡64_t
 
	tšt_Ëa¡64_t
;

49 
__ušt_Ëa¡8_t
 
	tušt_Ëa¡8_t
;

50 
__ušt_Ëa¡16_t
 
	tušt_Ëa¡16_t
;

51 
__ušt_Ëa¡32_t
 
	tušt_Ëa¡32_t
;

52 
__ušt_Ëa¡64_t
 
	tušt_Ëa¡64_t
;

58 sigÃd 
	tšt_ç¡8_t
;

59 #ià
__WORDSIZE
 == 64

60 
	tšt_ç¡16_t
;

61 
	tšt_ç¡32_t
;

62 
	tšt_ç¡64_t
;

64 
	tšt_ç¡16_t
;

65 
	tšt_ç¡32_t
;

66 
__ex‹nsiÚ__


67 
	tšt_ç¡64_t
;

71 
	tušt_ç¡8_t
;

72 #ià
__WORDSIZE
 == 64

73 
	tušt_ç¡16_t
;

74 
	tušt_ç¡32_t
;

75 
	tušt_ç¡64_t
;

77 
	tušt_ç¡16_t
;

78 
	tušt_ç¡32_t
;

79 
__ex‹nsiÚ__


80 
	tušt_ç¡64_t
;

85 #ià
__WORDSIZE
 == 64

86 #iâdeà
__šŒ_t_defšed


87 
	tšŒ_t
;

88 
	#__šŒ_t_defšed


	)

90 
	tušŒ_t
;

92 #iâdeà
__šŒ_t_defšed


93 
	tšŒ_t
;

94 
	#__šŒ_t_defšed


	)

96 
	tušŒ_t
;

101 
__štmax_t
 
	tštmax_t
;

102 
__uštmax_t
 
	tuštmax_t
;

105 #ià
__WORDSIZE
 == 64

106 
	#__INT64_C
(
c
èø## 
L


	)

107 
	#__UINT64_C
(
c
èø## 
UL


	)

109 
	#__INT64_C
(
c
èø## 
LL


	)

110 
	#__UINT64_C
(
c
èø## 
ULL


	)

116 
	#INT8_MIN
 (-128)

	)

117 
	#INT16_MIN
 (-32767-1)

	)

118 
	#INT32_MIN
 (-2147483647-1)

	)

119 
	#INT64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

121 
	#INT8_MAX
 (127)

	)

122 
	#INT16_MAX
 (32767)

	)

123 
	#INT32_MAX
 (2147483647)

	)

124 
	#INT64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

127 
	#UINT8_MAX
 (255)

	)

128 
	#UINT16_MAX
 (65535)

	)

129 
	#UINT32_MAX
 (4294967295U)

	)

130 
	#UINT64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

134 
	#INT_LEAST8_MIN
 (-128)

	)

135 
	#INT_LEAST16_MIN
 (-32767-1)

	)

136 
	#INT_LEAST32_MIN
 (-2147483647-1)

	)

137 
	#INT_LEAST64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

139 
	#INT_LEAST8_MAX
 (127)

	)

140 
	#INT_LEAST16_MAX
 (32767)

	)

141 
	#INT_LEAST32_MAX
 (2147483647)

	)

142 
	#INT_LEAST64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

145 
	#UINT_LEAST8_MAX
 (255)

	)

146 
	#UINT_LEAST16_MAX
 (65535)

	)

147 
	#UINT_LEAST32_MAX
 (4294967295U)

	)

148 
	#UINT_LEAST64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

152 
	#INT_FAST8_MIN
 (-128)

	)

153 #ià
__WORDSIZE
 == 64

154 
	#INT_FAST16_MIN
 (-9223372036854775807L-1)

	)

155 
	#INT_FAST32_MIN
 (-9223372036854775807L-1)

	)

157 
	#INT_FAST16_MIN
 (-2147483647-1)

	)

158 
	#INT_FAST32_MIN
 (-2147483647-1)

	)

160 
	#INT_FAST64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

162 
	#INT_FAST8_MAX
 (127)

	)

163 #ià
__WORDSIZE
 == 64

164 
	#INT_FAST16_MAX
 (9223372036854775807L)

	)

165 
	#INT_FAST32_MAX
 (9223372036854775807L)

	)

167 
	#INT_FAST16_MAX
 (2147483647)

	)

168 
	#INT_FAST32_MAX
 (2147483647)

	)

170 
	#INT_FAST64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

173 
	#UINT_FAST8_MAX
 (255)

	)

174 #ià
__WORDSIZE
 == 64

175 
	#UINT_FAST16_MAX
 (18446744073709551615UL)

	)

176 
	#UINT_FAST32_MAX
 (18446744073709551615UL)

	)

178 
	#UINT_FAST16_MAX
 (4294967295U)

	)

179 
	#UINT_FAST32_MAX
 (4294967295U)

	)

181 
	#UINT_FAST64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

185 #ià
__WORDSIZE
 == 64

186 
	#INTPTR_MIN
 (-9223372036854775807L-1)

	)

187 
	#INTPTR_MAX
 (9223372036854775807L)

	)

188 
	#UINTPTR_MAX
 (18446744073709551615UL)

	)

190 
	#INTPTR_MIN
 (-2147483647-1)

	)

191 
	#INTPTR_MAX
 (2147483647)

	)

192 
	#UINTPTR_MAX
 (4294967295U)

	)

197 
	#INTMAX_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

199 
	#INTMAX_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

202 
	#UINTMAX_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

208 #ià
__WORDSIZE
 == 64

209 
	#PTRDIFF_MIN
 (-9223372036854775807L-1)

	)

210 
	#PTRDIFF_MAX
 (9223372036854775807L)

	)

212 #ià
__WORDSIZE32_PTRDIFF_LONG


213 
	#PTRDIFF_MIN
 (-2147483647L-1)

	)

214 
	#PTRDIFF_MAX
 (2147483647L)

	)

216 
	#PTRDIFF_MIN
 (-2147483647-1)

	)

217 
	#PTRDIFF_MAX
 (2147483647)

	)

222 
	#SIG_ATOMIC_MIN
 (-2147483647-1)

	)

223 
	#SIG_ATOMIC_MAX
 (2147483647)

	)

226 #ià
__WORDSIZE
 == 64

227 
	#SIZE_MAX
 (18446744073709551615UL)

	)

229 #ià
__WORDSIZE32_SIZE_ULONG


230 
	#SIZE_MAX
 (4294967295UL)

	)

232 
	#SIZE_MAX
 (4294967295U)

	)

237 #iâdeà
WCHAR_MIN


239 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

240 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

244 
	#WINT_MIN
 (0u)

	)

245 
	#WINT_MAX
 (4294967295u)

	)

248 
	#INT8_C
(
c
è
	)
c

249 
	#INT16_C
(
c
è
	)
c

250 
	#INT32_C
(
c
è
	)
c

251 #ià
__WORDSIZE
 == 64

252 
	#INT64_C
(
c
èø## 
L


	)

254 
	#INT64_C
(
c
èø## 
LL


	)

258 
	#UINT8_C
(
c
è
	)
c

259 
	#UINT16_C
(
c
è
	)
c

260 
	#UINT32_C
(
c
èø## 
U


	)

261 #ià
__WORDSIZE
 == 64

262 
	#UINT64_C
(
c
èø## 
UL


	)

264 
	#UINT64_C
(
c
èø## 
ULL


	)

268 #ià
__WORDSIZE
 == 64

269 
	#INTMAX_C
(
c
èø## 
L


	)

270 
	#UINTMAX_C
(
c
èø## 
UL


	)

272 
	#INTMAX_C
(
c
èø## 
LL


	)

273 
	#UINTMAX_C
(
c
èø## 
ULL


	)

276 #ià
__GLIBC_USE
 (
IEC_60559_BFP_EXT_C2X
)

278 
	#INT8_WIDTH
 8

	)

279 
	#UINT8_WIDTH
 8

	)

280 
	#INT16_WIDTH
 16

	)

281 
	#UINT16_WIDTH
 16

	)

282 
	#INT32_WIDTH
 32

	)

283 
	#UINT32_WIDTH
 32

	)

284 
	#INT64_WIDTH
 64

	)

285 
	#UINT64_WIDTH
 64

	)

287 
	#INT_LEAST8_WIDTH
 8

	)

288 
	#UINT_LEAST8_WIDTH
 8

	)

289 
	#INT_LEAST16_WIDTH
 16

	)

290 
	#UINT_LEAST16_WIDTH
 16

	)

291 
	#INT_LEAST32_WIDTH
 32

	)

292 
	#UINT_LEAST32_WIDTH
 32

	)

293 
	#INT_LEAST64_WIDTH
 64

	)

294 
	#UINT_LEAST64_WIDTH
 64

	)

296 
	#INT_FAST8_WIDTH
 8

	)

297 
	#UINT_FAST8_WIDTH
 8

	)

298 
	#INT_FAST16_WIDTH
 
__WORDSIZE


	)

299 
	#UINT_FAST16_WIDTH
 
__WORDSIZE


	)

300 
	#INT_FAST32_WIDTH
 
__WORDSIZE


	)

301 
	#UINT_FAST32_WIDTH
 
__WORDSIZE


	)

302 
	#INT_FAST64_WIDTH
 64

	)

303 
	#UINT_FAST64_WIDTH
 64

	)

305 
	#INTPTR_WIDTH
 
__WORDSIZE


	)

306 
	#UINTPTR_WIDTH
 
__WORDSIZE


	)

308 
	#INTMAX_WIDTH
 64

	)

309 
	#UINTMAX_WIDTH
 64

	)

311 
	#PTRDIFF_WIDTH
 
__WORDSIZE


	)

312 
	#SIG_ATOMIC_WIDTH
 32

	)

313 
	#SIZE_WIDTH
 
__WORDSIZE


	)

314 
	#WCHAR_WIDTH
 32

	)

315 
	#WINT_WIDTH
 32

	)

	@/usr/include/stdio.h

23 #iâdeà
_STDIO_H


24 
	#_STDIO_H
 1

	)

26 
	#__GLIBC_INTERNAL_STARTING_HEADER_IMPLEMENTATION


	)

27 
	~<b™s/libc-h—d”-¡¬t.h
>

29 
	g__BEGIN_DECLS


31 
	#__Ãed_size_t


	)

32 
	#__Ãed_NULL


	)

33 
	~<¡ddef.h
>

35 
	#__Ãed___va_li¡


	)

36 
	~<¡d¬g.h
>

38 
	~<b™s/ty³s.h
>

39 
	~<b™s/ty³s/__åos_t.h
>

40 
	~<b™s/ty³s/__åos64_t.h
>

41 
	~<b™s/ty³s/__FILE.h
>

42 
	~<b™s/ty³s/FILE.h
>

43 
	~<b™s/ty³s/¡ruù_FILE.h
>

45 #ifdeà
__USE_GNU


46 
	~<b™s/ty³s/cook›_io_funùiÚs_t.h
>

49 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


50 #ifdeà
__GNUC__


51 #iâdeà
_VA_LIST_DEFINED


52 
__gnuc_va_li¡
 
	tva_li¡
;

53 
	#_VA_LIST_DEFINED


	)

56 
	~<¡d¬g.h
>

60 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


61 #iâdeà
__off_t_defšed


62 #iâdeà
__USE_FILE_OFFSET64


63 
__off_t
 
	toff_t
;

65 
__off64_t
 
	toff_t
;

67 
	#__off_t_defšed


	)

69 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__off64_t_defšed


70 
__off64_t
 
	toff64_t
;

71 
	#__off64_t_defšed


	)

75 #ifdeà
__USE_XOPEN2K8


76 #iâdeà
__ssize_t_defšed


77 
__ssize_t
 
	tssize_t
;

78 
	#__ssize_t_defšed


	)

83 #iâdeà
__USE_FILE_OFFSET64


84 
__åos_t
 
	tåos_t
;

86 
__åos64_t
 
	tåos_t
;

88 #ifdeà
__USE_LARGEFILE64


89 
__åos64_t
 
	tåos64_t
;

93 
	#_IOFBF
 0

	)

94 
	#_IOLBF
 1

	)

95 
	#_IONBF
 2

	)

99 
	#BUFSIZ
 8192

	)

104 
	#EOF
 (-1)

	)

109 
	#SEEK_SET
 0

	)

110 
	#SEEK_CUR
 1

	)

111 
	#SEEK_END
 2

	)

112 #ifdeà
__USE_GNU


113 
	#SEEK_DATA
 3

	)

114 
	#SEEK_HOLE
 4

	)

118 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


120 
	#P_tmpdœ
 "/tmp"

	)

133 
	~<b™s/¡dio_lim.h
>

136 #ià
__GLIBC_USE
 (
ISOC2X
)

138 
	#_PRINTF_NAN_LEN_MAX
 4

	)

143 
FILE
 *
¡dš
;

144 
FILE
 *
¡dout
;

145 
FILE
 *
¡d”r
;

147 
	#¡dš
 
¡dš


	)

148 
	#¡dout
 
¡dout


	)

149 
	#¡d”r
 
¡d”r


	)

152 
	$»move
 (cÚ¡ *
__f’ame
è
__THROW
;

154 
	$»Çme
 (cÚ¡ *
__Şd
, cÚ¡ *
__Ãw
è
__THROW
;

156 #ifdeà
__USE_ATFILE


158 
	$»Çm—t
 (
__Şdfd
, cÚ¡ *
__Şd
, 
__Ãwfd
,

159 cÚ¡ *
__Ãw
è
__THROW
;

162 #ifdeà
__USE_GNU


164 
	#RENAME_NOREPLACE
 (1 << 0)

	)

165 
	#RENAME_EXCHANGE
 (1 << 1)

	)

166 
	#RENAME_WHITEOUT
 (1 << 2)

	)

170 
	$»Çm—t2
 (
__Şdfd
, cÚ¡ *
__Şd
, 
__Ãwfd
,

171 cÚ¡ *
__Ãw
, 
__æags
è
__THROW
;

178 
	`fşo£
 (
FILE
 *
__¡»am
);

180 #undeà
__©Œ_d—Îoc_fşo£


181 
	#__©Œ_d—Îoc_fşo£
 
	`__©Œ_d—Îoc
 (
fşo£
, 1)

	)

187 #iâdeà
__USE_FILE_OFFSET64


188 
FILE
 *
	$tmpfe
 ()

189 
__©Œibu‹_m®loc__
 
__©Œ_d—Îoc_fşo£
 
__wur
;

191 #ifdeà
__REDIRECT


192 
FILE
 *
	`__REDIRECT
 (
tmpfe
, (), 
tmpfe64
)

193 
__©Œibu‹_m®loc__
 
__©Œ_d—Îoc_fşo£
 
__wur
;

195 
	#tmpfe
 
tmpfe64


	)

199 #ifdeà
__USE_LARGEFILE64


200 
FILE
 *
	$tmpfe64
 ()

201 
__©Œibu‹_m®loc__
 
__©Œ_d—Îoc_fşo£
 
__wur
;

205 *
	$tm²am
 ([
L_tm²am
]è
__THROW
 
__wur
;

207 #ifdeà
__USE_MISC


210 *
	$tm²am_r
 (
__s
[
L_tm²am
]è
__THROW
 
__wur
;

214 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


222 *
	$‹m²am
 (cÚ¡ *
__dœ
, cÚ¡ *
__pfx
)

223 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
 
__©Œ_d—Îoc_ä“
;

230 
	`fæush
 (
FILE
 *
__¡»am
);

232 #ifdeà
__USE_MISC


239 
	`fæush_uÆocked
 (
FILE
 *
__¡»am
);

242 #ifdeà
__USE_GNU


249 
	`fşo£®l
 ();

253 #iâdeà
__USE_FILE_OFFSET64


258 
FILE
 *
	$fİ’
 (cÚ¡ *
__»¡riù
 
__f’ame
,

259 cÚ¡ *
__»¡riù
 
__modes
)

260 
__©Œibu‹_m®loc__
 
__©Œ_d—Îoc_fşo£
 
__wur
;

265 
FILE
 *
	$äeİ’
 (cÚ¡ *
__»¡riù
 
__f’ame
,

266 cÚ¡ *
__»¡riù
 
__modes
,

267 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

269 #ifdeà
__REDIRECT


270 
FILE
 *
	`__REDIRECT
 (
fİ’
, (cÚ¡ *
__»¡riù
 
__f’ame
,

271 cÚ¡ *
__»¡riù
 
__modes
), 
fİ’64
)

272 
__©Œibu‹_m®loc__
 
__©Œ_d—Îoc_fşo£
 
__wur
;

273 
FILE
 *
	`__REDIRECT
 (
äeİ’
, (cÚ¡ *
__»¡riù
 
__f’ame
,

274 cÚ¡ *
__»¡riù
 
__modes
,

275 
FILE
 *
__»¡riù
 
__¡»am
), 
äeİ’64
)

276 
__wur
;

278 
	#fİ’
 
fİ’64


	)

279 
	#äeİ’
 
äeİ’64


	)

282 #ifdeà
__USE_LARGEFILE64


283 
FILE
 *
	$fİ’64
 (cÚ¡ *
__»¡riù
 
__f’ame
,

284 cÚ¡ *
__»¡riù
 
__modes
)

285 
__©Œibu‹_m®loc__
 
__©Œ_d—Îoc_fşo£
 
__wur
;

286 
FILE
 *
	$äeİ’64
 (cÚ¡ *
__»¡riù
 
__f’ame
,

287 cÚ¡ *
__»¡riù
 
__modes
,

288 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

291 #ifdef 
__USE_POSIX


293 
FILE
 *
	$fdİ’
 (
__fd
, cÚ¡ *
__modes
è
__THROW


294 
__©Œibu‹_m®loc__
 
__©Œ_d—Îoc_fşo£
 
__wur
;

297 #ifdef 
__USE_GNU


300 
FILE
 *
	$fİ’cook›
 (*
__»¡riù
 
__magic_cook›
,

301 cÚ¡ *
__»¡riù
 
__modes
,

302 
cook›_io_funùiÚs_t
 
__io_funcs
è
__THROW


303 
__©Œibu‹_m®loc__
 
__©Œ_d—Îoc_fşo£
 
__wur
;

306 #ià
defšed
 
__USE_XOPEN2K8
 || 
	`__GLIBC_USE
 (
LIB_EXT2
)

308 
FILE
 *
	$fmemİ’
 (*
__s
, 
size_t
 
__Ën
, cÚ¡ *
__modes
)

309 
__THROW
 
__©Œibu‹_m®loc__
 
__©Œ_d—Îoc_fşo£
 
__wur
;

314 
FILE
 *
	$İ’_mem¡»am
 (**
__buæoc
, 
size_t
 *
__siz–oc
è
__THROW


315 
__©Œibu‹_m®loc__
 
__©Œ_d—Îoc_fşo£
 
__wur
;

317 #ifdeà
_WCHAR_H


321 
__FILE
 *
	$İ’_wmem¡»am
 (
wch¬_t
 **
__buæoc
, 
size_t
 *
__siz–oc
è
__THROW


322 
__©Œibu‹_m®loc__
 
__©Œ_d—Îoc_fşo£
;

328 
	$£tbuf
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
è
__THROW
;

332 
	$£tvbuf
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
,

333 
__modes
, 
size_t
 
__n
è
__THROW
;

335 #ifdef 
__USE_MISC


338 
	$£tbufãr
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
,

339 
size_t
 
__size
è
__THROW
;

342 
	$£šebuf
 (
FILE
 *
__¡»am
è
__THROW
;

350 
	`årštf
 (
FILE
 *
__»¡riù
 
__¡»am
,

351 cÚ¡ *
__»¡riù
 
__fÜm©
, ...);

356 
	`´štf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, ...);

358 
	$¥rštf
 (*
__»¡riù
 
__s
,

359 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__THROWNL
;

365 
	`vårštf
 (
FILE
 *
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__fÜm©
,

366 
__gnuc_va_li¡
 
__¬g
);

371 
	`v´štf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, 
__gnuc_va_li¡
 
__¬g
);

373 
	$v¥rštf
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__fÜm©
,

374 
__gnuc_va_li¡
 
__¬g
è
__THROWNL
;

376 #ià
defšed
 
__USE_ISOC99
 || defšed 
__USE_UNIX98


378 
	$¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__maxËn
,

379 cÚ¡ *
__»¡riù
 
__fÜm©
, ...)

380 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 4)));

382 
	$v¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__maxËn
,

383 cÚ¡ *
__»¡riù
 
__fÜm©
, 
__gnuc_va_li¡
 
__¬g
)

384 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 0)));

387 #ià
	`__GLIBC_USE
 (
LIB_EXT2
)

390 
	$va¥rštf
 (**
__»¡riù
 
__±r
, cÚ¡ *__»¡riù 
__f
,

391 
__gnuc_va_li¡
 
__¬g
)

392 
__THROWNL
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 0))è
__wur
;

393 
	$__a¥rštf
 (**
__»¡riù
 
__±r
,

394 cÚ¡ *
__»¡riù
 
__fmt
, ...)

395 
__THROWNL
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 3))è
__wur
;

396 
	$a¥rštf
 (**
__»¡riù
 
__±r
,

397 cÚ¡ *
__»¡riù
 
__fmt
, ...)

398 
__THROWNL
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 3))è
__wur
;

401 #ifdeà
__USE_XOPEN2K8


403 
	$vd´štf
 (
__fd
, cÚ¡ *
__»¡riù
 
__fmt
,

404 
__gnuc_va_li¡
 
__¬g
)

405 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 0)));

406 
	$d´štf
 (
__fd
, cÚ¡ *
__»¡riù
 
__fmt
, ...)

407 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 3)));

415 
	$fsÿnf
 (
FILE
 *
__»¡riù
 
__¡»am
,

416 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

421 
	$sÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

423 
	$ssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

424 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__THROW
;

430 
	~<b™s/æßŠ.h
>

431 #ià!
	`__GLIBC_USE
 (
DEPRECATED_SCANF
è&& !
defšed
 
__LDBL_COMPAT
 \

432 && 
__LDOUBLE_REDIRECTS_TO_FLOAT128_ABI
 == 0

433 #ifdeà
__REDIRECT


434 
	`__REDIRECT
 (
fsÿnf
, (
FILE
 *
__»¡riù
 
__¡»am
,

435 cÚ¡ *
__»¡riù
 
__fÜm©
, ...),

436 
__isoc99_fsÿnf
è
__wur
;

437 
	`__REDIRECT
 (
sÿnf
, (cÚ¡ *
__»¡riù
 
__fÜm©
, ...),

438 
__isoc99_sÿnf
è
__wur
;

439 
	`__REDIRECT_NTH
 (
ssÿnf
, (cÚ¡ *
__»¡riù
 
__s
,

440 cÚ¡ *
__»¡riù
 
__fÜm©
, ...),

441 
__isoc99_ssÿnf
);

443 
	$__isoc99_fsÿnf
 (
FILE
 *
__»¡riù
 
__¡»am
,

444 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

445 
	$__isoc99_sÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

446 
	$__isoc99_ssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

447 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__THROW
;

448 
	#fsÿnf
 
__isoc99_fsÿnf


	)

449 
	#sÿnf
 
__isoc99_sÿnf


	)

450 
	#ssÿnf
 
__isoc99_ssÿnf


	)

454 #ifdef 
__USE_ISOC99


459 
	$vfsÿnf
 (
FILE
 *
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__fÜm©
,

460 
__gnuc_va_li¡
 
__¬g
)

461 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 2, 0))è
__wur
;

467 
	$vsÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, 
__gnuc_va_li¡
 
__¬g
)

468 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 1, 0))è
__wur
;

471 
	$vssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

472 cÚ¡ *
__»¡riù
 
__fÜm©
, 
__gnuc_va_li¡
 
__¬g
)

473 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__sÿnf__
, 2, 0)));

476 #ià!
	`__GLIBC_USE
 (
DEPRECATED_SCANF
)

477 #ià
defšed
 
__REDIRECT
 && !defšed 
__LDBL_COMPAT
 \

478 && 
__LDOUBLE_REDIRECTS_TO_FLOAT128_ABI
 == 0

479 
	`__REDIRECT
 (
vfsÿnf
,

480 (
FILE
 *
__»¡riù
 
__s
,

481 cÚ¡ *
__»¡riù
 
__fÜm©
, 
__gnuc_va_li¡
 
__¬g
),

482 
__isoc99_vfsÿnf
)

483 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 2, 0))è
__wur
;

484 
	`__REDIRECT
 (
vsÿnf
, (cÚ¡ *
__»¡riù
 
__fÜm©
,

485 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vsÿnf
)

486 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 1, 0))è
__wur
;

487 
	`__REDIRECT_NTH
 (
vssÿnf
,

488 (cÚ¡ *
__»¡riù
 
__s
,

489 cÚ¡ *
__»¡riù
 
__fÜm©
,

490 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vssÿnf
)

491 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__sÿnf__
, 2, 0)));

492 #–ià!
defšed
 
__REDIRECT


493 
	$__isoc99_vfsÿnf
 (
FILE
 *
__»¡riù
 
__s
,

494 cÚ¡ *
__»¡riù
 
__fÜm©
,

495 
__gnuc_va_li¡
 
__¬g
è
__wur
;

496 
	$__isoc99_vsÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
,

497 
__gnuc_va_li¡
 
__¬g
è
__wur
;

498 
	$__isoc99_vssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

499 cÚ¡ *
__»¡riù
 
__fÜm©
,

500 
__gnuc_va_li¡
 
__¬g
è
__THROW
;

501 
	#vfsÿnf
 
__isoc99_vfsÿnf


	)

502 
	#vsÿnf
 
__isoc99_vsÿnf


	)

503 
	#vssÿnf
 
__isoc99_vssÿnf


	)

513 
	`fg‘c
 (
FILE
 *
__¡»am
);

514 
	`g‘c
 (
FILE
 *
__¡»am
);

520 
	`g‘ch¬
 ();

522 #ifdeà
__USE_POSIX199506


527 
	`g‘c_uÆocked
 (
FILE
 *
__¡»am
);

528 
	`g‘ch¬_uÆocked
 ();

531 #ifdeà
__USE_MISC


538 
	`fg‘c_uÆocked
 (
FILE
 *
__¡»am
);

549 
	`åutc
 (
__c
, 
FILE
 *
__¡»am
);

550 
	`putc
 (
__c
, 
FILE
 *
__¡»am
);

556 
	`putch¬
 (
__c
);

558 #ifdeà
__USE_MISC


565 
	`åutc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
);

568 #ifdeà
__USE_POSIX199506


573 
	`putc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
);

574 
	`putch¬_uÆocked
 (
__c
);

578 #ià
defšed
 
__USE_MISC
 \

579 || (
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
)

581 
	`g‘w
 (
FILE
 *
__¡»am
);

584 
	`putw
 (
__w
, 
FILE
 *
__¡»am
);

592 *
	$fg‘s
 (*
__»¡riù
 
__s
, 
__n
, 
FILE
 *__»¡riù 
__¡»am
)

593 
__wur
 
	`__fÜtif›d_©Œ_acûss
 (
__wr™e_Úly__
, 1, 2);

595 #ià
	`__GLIBC_USE
 (
DEPRECATED_GETS
)

605 *
	$g‘s
 (*
__s
è
__wur
 
__©Œibu‹_d•»ÿ‹d__
;

608 #ifdeà
__USE_GNU


615 *
	$fg‘s_uÆocked
 (*
__»¡riù
 
__s
, 
__n
,

616 
FILE
 *
__»¡riù
 
__¡»am
è
__wur


617 
	`__fÜtif›d_©Œ_acûss
 (
__wr™e_Úly__
, 1, 2);

621 #ià
defšed
 
__USE_XOPEN2K8
 || 
	`__GLIBC_USE
 (
LIB_EXT2
)

632 
__ssize_t
 
	$__g‘d–im
 (**
__»¡riù
 
__lš•Œ
,

633 
size_t
 *
__»¡riù
 
__n
, 
__d–im™”
,

634 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

635 
__ssize_t
 
	$g‘d–im
 (**
__»¡riù
 
__lš•Œ
,

636 
size_t
 *
__»¡riù
 
__n
, 
__d–im™”
,

637 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

645 
__ssize_t
 
	$g‘lše
 (**
__»¡riù
 
__lš•Œ
,

646 
size_t
 *
__»¡riù
 
__n
,

647 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

655 
	`åuts
 (cÚ¡ *
__»¡riù
 
__s
, 
FILE
 *__»¡riù 
__¡»am
);

661 
	`puts
 (cÚ¡ *
__s
);

668 
	`ung‘c
 (
__c
, 
FILE
 *
__¡»am
);

675 
size_t
 
	$ä—d
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

676 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

681 
size_t
 
	`fwr™e
 (cÚ¡ *
__»¡riù
 
__±r
, size_ˆ
__size
,

682 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__s
);

684 #ifdeà
__USE_GNU


691 
	`åuts_uÆocked
 (cÚ¡ *
__»¡riù
 
__s
,

692 
FILE
 *
__»¡riù
 
__¡»am
);

695 #ifdeà
__USE_MISC


702 
size_t
 
	$ä—d_uÆocked
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

703 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

704 
size_t
 
	`fwr™e_uÆocked
 (cÚ¡ *
__»¡riù
 
__±r
, size_ˆ
__size
,

705 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
);

713 
	`f£ek
 (
FILE
 *
__¡»am
, 
__off
, 
__wh’û
);

718 
	$á–l
 (
FILE
 *
__¡»am
è
__wur
;

723 
	`»wšd
 (
FILE
 *
__¡»am
);

730 #ià
defšed
 
__USE_LARGEFILE
 || defšed 
__USE_XOPEN2K


731 #iâdeà
__USE_FILE_OFFSET64


736 
	`f£eko
 (
FILE
 *
__¡»am
, 
__off_t
 
__off
, 
__wh’û
);

741 
__off_t
 
	$á–lo
 (
FILE
 *
__¡»am
è
__wur
;

743 #ifdeà
__REDIRECT


744 
	`__REDIRECT
 (
f£eko
,

745 (
FILE
 *
__¡»am
, 
__off64_t
 
__off
, 
__wh’û
),

746 
f£eko64
);

747 
__off64_t
 
	`__REDIRECT
 (
á–lo
, (
FILE
 *
__¡»am
), 
á–lo64
);

749 
	#f£eko
 
f£eko64


	)

750 
	#á–lo
 
á–lo64


	)

755 #iâdeà
__USE_FILE_OFFSET64


760 
	`fg‘pos
 (
FILE
 *
__»¡riù
 
__¡»am
, 
åos_t
 *__»¡riù 
__pos
);

765 
	`f£os
 (
FILE
 *
__¡»am
, cÚ¡ 
åos_t
 *
__pos
);

767 #ifdeà
__REDIRECT


768 
	`__REDIRECT
 (
fg‘pos
, (
FILE
 *
__»¡riù
 
__¡»am
,

769 
åos_t
 *
__»¡riù
 
__pos
), 
fg‘pos64
);

770 
	`__REDIRECT
 (
f£os
,

771 (
FILE
 *
__¡»am
, cÚ¡ 
åos_t
 *
__pos
), 
f£os64
);

773 
	#fg‘pos
 
fg‘pos64


	)

774 
	#f£os
 
f£os64


	)

778 #ifdeà
__USE_LARGEFILE64


779 
	`f£eko64
 (
FILE
 *
__¡»am
, 
__off64_t
 
__off
, 
__wh’û
);

780 
__off64_t
 
	$á–lo64
 (
FILE
 *
__¡»am
è
__wur
;

781 
	`fg‘pos64
 (
FILE
 *
__»¡riù
 
__¡»am
, 
åos64_t
 *__»¡riù 
__pos
);

782 
	`f£os64
 (
FILE
 *
__¡»am
, cÚ¡ 
åos64_t
 *
__pos
);

786 
	$ş—»¼
 (
FILE
 *
__¡»am
è
__THROW
;

788 
	$ãof
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

790 
	$ã¼Ü
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

792 #ifdeà
__USE_MISC


794 
	$ş—»¼_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
;

795 
	$ãof_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

796 
	$ã¼Ü_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

804 
	`³¼Ü
 (cÚ¡ *
__s
);

807 #ifdef 
__USE_POSIX


809 
	$f’o
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

812 #ifdeà
__USE_MISC


814 
	$f’o_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

818 #ifdeà
__USE_POSIX2


823 
	`pşo£
 (
FILE
 *
__¡»am
);

829 
FILE
 *
	$pİ’
 (cÚ¡ *
__commªd
, cÚ¡ *
__modes
)

830 
__©Œibu‹_m®loc__
 
	$__©Œ_d—Îoc
 (
pşo£
, 1è
__wur
;

835 #ifdef 
__USE_POSIX


837 *
	$ù”mid
 (*
__s
è
__THROW


838 
	`__©Œ_acûss
 ((
__wr™e_Úly__
, 1));

842 #ià(
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
è|| defšed 
__USE_GNU


844 *
	$cu£rid
 (*
__s
)

845 
	`__©Œ_acûss
 ((
__wr™e_Úly__
, 1));

849 #ifdef 
__USE_GNU


850 
ob¡ack
;

853 
	$ob¡ack_´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

854 cÚ¡ *
__»¡riù
 
__fÜm©
, ...)

855 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 3)));

856 
	$ob¡ack_v´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

857 cÚ¡ *
__»¡riù
 
__fÜm©
,

858 
__gnuc_va_li¡
 
__¬gs
)

859 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 0)));

863 #ifdeà
__USE_POSIX199506


867 
	$æockfe
 (
FILE
 *
__¡»am
è
__THROW
;

871 
	$árylockfe
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

874 
	$fuÆockfe
 (
FILE
 *
__¡»am
è
__THROW
;

877 #ià
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
 && !defšed 
__USE_GNU


880 
	~<b™s/g‘İt_posix.h
>

885 
	`__uæow
 (
FILE
 *);

886 
	`__ov”æow
 (
FILE
 *, );

890 #ifdeà
__USE_EXTERN_INLINES


891 
	~<b™s/¡dio.h
>

893 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


894 
	~<b™s/¡dio2.h
>

897 
	~<b™s/æßŠ.h
>

898 #ià
defšed
 
__LDBL_COMPAT
 || 
__LDOUBLE_REDIRECTS_TO_FLOAT128_ABI
 == 1

899 
	~<b™s/¡dio-ldbl.h
>

902 
__END_DECLS


	@/usr/include/stdlib.h

23 #iâdef 
_STDLIB_H


25 
	#__GLIBC_INTERNAL_STARTING_HEADER_IMPLEMENTATION


	)

26 
	~<b™s/libc-h—d”-¡¬t.h
>

29 
	#__Ãed_size_t


	)

30 
	#__Ãed_wch¬_t


	)

31 
	#__Ãed_NULL


	)

32 
	~<¡ddef.h
>

34 
	g__BEGIN_DECLS


36 
	#_STDLIB_H
 1

	)

38 #ià(
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8
è&& !defšed 
_SYS_WAIT_H


40 
	~<b™s/wa™æags.h
>

41 
	~<b™s/wa™¡©us.h
>

44 
	#WEXITSTATUS
(
¡©us
è
	`__WEXITSTATUS
 (¡©us)

	)

45 
	#WTERMSIG
(
¡©us
è
	`__WTERMSIG
 (¡©us)

	)

46 
	#WSTOPSIG
(
¡©us
è
	`__WSTOPSIG
 (¡©us)

	)

47 
	#WIFEXITED
(
¡©us
è
	`__WIFEXITED
 (¡©us)

	)

48 
	#WIFSIGNALED
(
¡©us
è
	`__WIFSIGNALED
 (¡©us)

	)

49 
	#WIFSTOPPED
(
¡©us
è
	`__WIFSTOPPED
 (¡©us)

	)

50 #ifdeà
__WIFCONTINUED


51 
	#WIFCONTINUED
(
¡©us
è
	`__WIFCONTINUED
 (¡©us)

	)

56 
	~<b™s/æßŠ.h
>

61 
	mquÙ
;

62 
	m»m
;

63 } 
	tdiv_t
;

66 #iâdeà
__ldiv_t_defšed


69 
	mquÙ
;

70 
	m»m
;

71 } 
	tldiv_t
;

72 
	#__ldiv_t_defšed
 1

	)

75 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__Îdiv_t_defšed


77 
__ex‹nsiÚ__
 struct

79 
	mquÙ
;

80 
	m»m
;

81 } 
	tÎdiv_t
;

82 
	#__Îdiv_t_defšed
 1

	)

87 
	#RAND_MAX
 2147483647

	)

92 
	#EXIT_FAILURE
 1

	)

93 
	#EXIT_SUCCESS
 0

	)

97 
	#MB_CUR_MAX
 (
	`__ùy³_g‘_mb_cur_max
 ())

	)

98 
size_t
 
	$__ùy³_g‘_mb_cur_max
 (è
__THROW
 
__wur
;

102 
	$©of
 (cÚ¡ *
__ÅŒ
)

103 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

105 
	$©oi
 (cÚ¡ *
__ÅŒ
)

106 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

108 
	$©Ş
 (cÚ¡ *
__ÅŒ
)

109 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

111 #ifdeà
__USE_ISOC99


113 
__ex‹nsiÚ__
 
	$©Şl
 (cÚ¡ *
__ÅŒ
)

114 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

118 
	$¡¹od
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

119 **
__»¡riù
 
__’d±r
)

120 
__THROW
 
	`__nÚnuÎ
 ((1));

122 #ifdef 
__USE_ISOC99


124 
	$¡¹of
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

125 **
__»¡riù
 
__’d±r
è
__THROW
 
	`__nÚnuÎ
 ((1));

127 
	$¡¹Şd
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

128 **
__»¡riù
 
__’d±r
)

129 
__THROW
 
	`__nÚnuÎ
 ((1));

134 #ià
__HAVE_FLOAT16
 && 
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

135 
_Flßt16
 
	$¡¹of16
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

136 **
__»¡riù
 
__’d±r
)

137 
__THROW
 
	`__nÚnuÎ
 ((1));

140 #ià
__HAVE_FLOAT32
 && 
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

141 
_Flßt32
 
	$¡¹of32
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

142 **
__»¡riù
 
__’d±r
)

143 
__THROW
 
	`__nÚnuÎ
 ((1));

146 #ià
__HAVE_FLOAT64
 && 
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

147 
_Flßt64
 
	$¡¹of64
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

148 **
__»¡riù
 
__’d±r
)

149 
__THROW
 
	`__nÚnuÎ
 ((1));

152 #ià
__HAVE_FLOAT128
 && 
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

153 
_Flßt128
 
	$¡¹of128
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

154 **
__»¡riù
 
__’d±r
)

155 
__THROW
 
	`__nÚnuÎ
 ((1));

158 #ià
__HAVE_FLOAT32X
 && 
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

159 
_Flßt32x
 
	$¡¹of32x
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

160 **
__»¡riù
 
__’d±r
)

161 
__THROW
 
	`__nÚnuÎ
 ((1));

164 #ià
__HAVE_FLOAT64X
 && 
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

165 
_Flßt64x
 
	$¡¹of64x
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

166 **
__»¡riù
 
__’d±r
)

167 
__THROW
 
	`__nÚnuÎ
 ((1));

170 #ià
__HAVE_FLOAT128X
 && 
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

171 
_Flßt128x
 
	$¡¹of128x
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

172 **
__»¡riù
 
__’d±r
)

173 
__THROW
 
	`__nÚnuÎ
 ((1));

177 
	$¡¹Ş
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

178 **
__»¡riù
 
__’d±r
, 
__ba£
)

179 
__THROW
 
	`__nÚnuÎ
 ((1));

181 
	$¡¹oul
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

182 **
__»¡riù
 
__’d±r
, 
__ba£
)

183 
__THROW
 
	`__nÚnuÎ
 ((1));

185 #ifdeà
__USE_MISC


187 
__ex‹nsiÚ__


188 
	$¡¹oq
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

189 **
__»¡riù
 
__’d±r
, 
__ba£
)

190 
__THROW
 
	`__nÚnuÎ
 ((1));

192 
__ex‹nsiÚ__


193 
	$¡¹ouq
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

194 **
__»¡riù
 
__’d±r
, 
__ba£
)

195 
__THROW
 
	`__nÚnuÎ
 ((1));

198 #ifdeà
__USE_ISOC99


200 
__ex‹nsiÚ__


201 
	$¡¹Şl
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

202 **
__»¡riù
 
__’d±r
, 
__ba£
)

203 
__THROW
 
	`__nÚnuÎ
 ((1));

205 
__ex‹nsiÚ__


206 
	$¡¹ouÎ
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

207 **
__»¡riù
 
__’d±r
, 
__ba£
)

208 
__THROW
 
	`__nÚnuÎ
 ((1));

212 #ià
	`__GLIBC_USE
 (
IEC_60559_BFP_EXT_C2X
)

213 
	$¡räomd
 (*
__de¡
, 
size_t
 
__size
, cÚ¡ *
__fÜm©
,

214 
__f
)

215 
__THROW
 
	`__nÚnuÎ
 ((3));

217 
	$¡räomf
 (*
__de¡
, 
size_t
 
__size
, cÚ¡ *
__fÜm©
,

218 
__f
)

219 
__THROW
 
	`__nÚnuÎ
 ((3));

221 
	$¡räoml
 (*
__de¡
, 
size_t
 
__size
, cÚ¡ *
__fÜm©
,

222 
__f
)

223 
__THROW
 
	`__nÚnuÎ
 ((3));

226 #ià
__HAVE_FLOAT16
 && 
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

227 
	$¡räomf16
 (*
__de¡
, 
size_t
 
__size
, cÚ¡ * 
__fÜm©
,

228 
_Flßt16
 
__f
)

229 
__THROW
 
	`__nÚnuÎ
 ((3));

232 #ià
__HAVE_FLOAT32
 && 
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

233 
	$¡räomf32
 (*
__de¡
, 
size_t
 
__size
, cÚ¡ * 
__fÜm©
,

234 
_Flßt32
 
__f
)

235 
__THROW
 
	`__nÚnuÎ
 ((3));

238 #ià
__HAVE_FLOAT64
 && 
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

239 
	$¡räomf64
 (*
__de¡
, 
size_t
 
__size
, cÚ¡ * 
__fÜm©
,

240 
_Flßt64
 
__f
)

241 
__THROW
 
	`__nÚnuÎ
 ((3));

244 #ià
__HAVE_FLOAT128
 && 
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

245 
	$¡räomf128
 (*
__de¡
, 
size_t
 
__size
, cÚ¡ * 
__fÜm©
,

246 
_Flßt128
 
__f
)

247 
__THROW
 
	`__nÚnuÎ
 ((3));

250 #ià
__HAVE_FLOAT32X
 && 
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

251 
	$¡räomf32x
 (*
__de¡
, 
size_t
 
__size
, cÚ¡ * 
__fÜm©
,

252 
_Flßt32x
 
__f
)

253 
__THROW
 
	`__nÚnuÎ
 ((3));

256 #ià
__HAVE_FLOAT64X
 && 
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

257 
	$¡räomf64x
 (*
__de¡
, 
size_t
 
__size
, cÚ¡ * 
__fÜm©
,

258 
_Flßt64x
 
__f
)

259 
__THROW
 
	`__nÚnuÎ
 ((3));

262 #ià
__HAVE_FLOAT128X
 && 
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

263 
	$¡räomf128x
 (*
__de¡
, 
size_t
 
__size
, cÚ¡ * 
__fÜm©
,

264 
_Flßt128x
 
__f
)

265 
__THROW
 
	`__nÚnuÎ
 ((3));

269 #ifdeà
__USE_GNU


273 
	~<b™s/ty³s/loÿË_t.h
>

275 
	$¡¹Ş_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

276 **
__»¡riù
 
__’d±r
, 
__ba£
,

277 
loÿË_t
 
__loc
è
__THROW
 
	`__nÚnuÎ
 ((1, 4));

279 
	$¡¹oul_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

280 **
__»¡riù
 
__’d±r
,

281 
__ba£
, 
loÿË_t
 
__loc
)

282 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

284 
__ex‹nsiÚ__


285 
	$¡¹Şl_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

286 **
__»¡riù
 
__’d±r
, 
__ba£
,

287 
loÿË_t
 
__loc
)

288 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

290 
__ex‹nsiÚ__


291 
	$¡¹ouÎ_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

292 **
__»¡riù
 
__’d±r
,

293 
__ba£
, 
loÿË_t
 
__loc
)

294 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

296 
	$¡¹od_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

297 **
__»¡riù
 
__’d±r
, 
loÿË_t
 
__loc
)

298 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

300 
	$¡¹of_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

301 **
__»¡riù
 
__’d±r
, 
loÿË_t
 
__loc
)

302 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

304 
	$¡¹Şd_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

305 **
__»¡riù
 
__’d±r
,

306 
loÿË_t
 
__loc
)

307 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

309 #ià
__HAVE_FLOAT16


310 
_Flßt16
 
	$¡¹of16_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

311 **
__»¡riù
 
__’d±r
,

312 
loÿË_t
 
__loc
)

313 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

316 #ià
__HAVE_FLOAT32


317 
_Flßt32
 
	$¡¹of32_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

318 **
__»¡riù
 
__’d±r
,

319 
loÿË_t
 
__loc
)

320 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

323 #ià
__HAVE_FLOAT64


324 
_Flßt64
 
	$¡¹of64_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

325 **
__»¡riù
 
__’d±r
,

326 
loÿË_t
 
__loc
)

327 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

330 #ià
__HAVE_FLOAT128


331 
_Flßt128
 
	$¡¹of128_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

332 **
__»¡riù
 
__’d±r
,

333 
loÿË_t
 
__loc
)

334 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

337 #ià
__HAVE_FLOAT32X


338 
_Flßt32x
 
	$¡¹of32x_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

339 **
__»¡riù
 
__’d±r
,

340 
loÿË_t
 
__loc
)

341 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

344 #ià
__HAVE_FLOAT64X


345 
_Flßt64x
 
	$¡¹of64x_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

346 **
__»¡riù
 
__’d±r
,

347 
loÿË_t
 
__loc
)

348 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

351 #ià
__HAVE_FLOAT128X


352 
_Flßt128x
 
	$¡¹of128x_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

353 **
__»¡riù
 
__’d±r
,

354 
loÿË_t
 
__loc
)

355 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

360 #ifdeà
__USE_EXTERN_INLINES


361 
__ex‹º_šlše
 

362 
	`__NTH
 (
	$©oi
 (cÚ¡ *
__ÅŒ
))

364  (è
	`¡¹Ş
 (
__ÅŒ
, (**è
NULL
, 10);

365 
	}
}

366 
__ex‹º_šlše
 

367 
__NTH
 (
	$©Ş
 (cÚ¡ *
__ÅŒ
))

369  
	`¡¹Ş
 (
__ÅŒ
, (**è
NULL
, 10);

370 
	}
}

372 #ifdeà
__USE_ISOC99


373 
__ex‹nsiÚ__
 
__ex‹º_šlše
 

374 
__NTH
 (
	$©Şl
 (cÚ¡ *
__ÅŒ
))

376  
	`¡¹Şl
 (
__ÅŒ
, (**è
NULL
, 10);

377 
	}
}

382 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


386 *
	$l64a
 (
__n
è
__THROW
 
__wur
;

389 
	$a64l
 (cÚ¡ *
__s
)

390 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

394 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


395 
	~<sys/ty³s.h
>

402 
	$¿ndom
 (è
__THROW
;

405 
	$¤ªdom
 (
__£ed
è
__THROW
;

411 *
	$š™¡©e
 (
__£ed
, *
__¡©ebuf
,

412 
size_t
 
__¡©–’
è
__THROW
 
	`__nÚnuÎ
 ((2));

416 *
	$£t¡©e
 (*
__¡©ebuf
è
__THROW
 
	`__nÚnuÎ
 ((1));

419 #ifdeà
__USE_MISC


424 
	s¿ndom_d©a


426 
št32_t
 *
åŒ
;

427 
št32_t
 *
½Œ
;

428 
št32_t
 *
¡©e
;

429 
¿nd_ty³
;

430 
¿nd_deg
;

431 
¿nd_£p
;

432 
št32_t
 *
’d_±r
;

435 
	$¿ndom_r
 (
¿ndom_d©a
 *
__»¡riù
 
__buf
,

436 
št32_t
 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

438 
	$¤ªdom_r
 (
__£ed
, 
¿ndom_d©a
 *
__buf
)

439 
__THROW
 
	`__nÚnuÎ
 ((2));

441 
	$š™¡©e_r
 (
__£ed
, *
__»¡riù
 
__¡©ebuf
,

442 
size_t
 
__¡©–’
,

443 
¿ndom_d©a
 *
__»¡riù
 
__buf
)

444 
__THROW
 
	`__nÚnuÎ
 ((2, 4));

446 
	$£t¡©e_r
 (*
__»¡riù
 
__¡©ebuf
,

447 
¿ndom_d©a
 *
__»¡riù
 
__buf
)

448 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

454 
	$¿nd
 (è
__THROW
;

456 
	$¤ªd
 (
__£ed
è
__THROW
;

458 #ifdeà
__USE_POSIX199506


460 
	$¿nd_r
 (*
__£ed
è
__THROW
;

464 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


468 
	$d¿nd48
 (è
__THROW
;

469 
	$”ªd48
 (
__xsubi
[3]è
__THROW
 
	`__nÚnuÎ
 ((1));

472 
	$Ìªd48
 (è
__THROW
;

473 
	$Äªd48
 (
__xsubi
[3])

474 
__THROW
 
	`__nÚnuÎ
 ((1));

477 
	$m¿nd48
 (è
__THROW
;

478 
	$j¿nd48
 (
__xsubi
[3])

479 
__THROW
 
	`__nÚnuÎ
 ((1));

482 
	$¤ªd48
 (
__£edv®
è
__THROW
;

483 *
	$£ed48
 (
__£ed16v
[3])

484 
__THROW
 
	`__nÚnuÎ
 ((1));

485 
	$lcÚg48
 (
__·¿m
[7]è
__THROW
 
	`__nÚnuÎ
 ((1));

487 #ifdeà
__USE_MISC


491 
	sd¿nd48_d©a


493 
__x
[3];

494 
__Şd_x
[3];

495 
__c
;

496 
__š™
;

497 
__ex‹nsiÚ__
 
__a
;

502 
	$d¿nd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

503 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

504 
	$”ªd48_r
 (
__xsubi
[3],

505 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

506 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

509 
	$Ìªd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

510 *
__»¡riù
 
__»suÉ
)

511 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

512 
	$Äªd48_r
 (
__xsubi
[3],

513 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

514 *
__»¡riù
 
__»suÉ
)

515 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

518 
	$m¿nd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

519 *
__»¡riù
 
__»suÉ
)

520 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

521 
	$j¿nd48_r
 (
__xsubi
[3],

522 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

523 *
__»¡riù
 
__»suÉ
)

524 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

527 
	$¤ªd48_r
 (
__£edv®
, 
d¿nd48_d©a
 *
__bufãr
)

528 
__THROW
 
	`__nÚnuÎ
 ((2));

530 
	$£ed48_r
 (
__£ed16v
[3],

531 
d¿nd48_d©a
 *
__bufãr
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

533 
	$lcÚg48_r
 (
__·¿m
[7],

534 
d¿nd48_d©a
 *
__bufãr
)

535 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

540 *
	$m®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__


541 
	`__©Œibu‹_®loc_size__
 ((1)è
__wur
;

543 *
	$ÿÎoc
 (
size_t
 
__nmemb
, size_ˆ
__size
)

544 
__THROW
 
__©Œibu‹_m®loc__
 
	`__©Œibu‹_®loc_size__
 ((1, 2)è
__wur
;

551 *
	$»®loc
 (*
__±r
, 
size_t
 
__size
)

552 
__THROW
 
__©Œibu‹_w¬n_unu£d_»suÉ__
 
	`__©Œibu‹_®loc_size__
 ((2));

555 
	$ä“
 (*
__±r
è
__THROW
;

557 #ifdeà
__USE_MISC


563 *
	$»®loÿ¼ay
 (*
__±r
, 
size_t
 
__nmemb
, size_ˆ
__size
)

564 
__THROW
 
__©Œibu‹_w¬n_unu£d_»suÉ__


565 
	`__©Œibu‹_®loc_size__
 ((2, 3))

566 
__©Œ_d—Îoc_ä“
;

569 *
	$»®loÿ¼ay
 (*
__±r
, 
size_t
 
__nmemb
, size_ˆ
__size
)

570 
__THROW
 
	`__©Œ_d—Îoc
 (
»®loÿ¼ay
, 1);

573 #ifdeà
__USE_MISC


574 
	~<®loÿ.h
>

577 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K
) \

578 || 
defšed
 
__USE_MISC


580 *
	$v®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__


581 
	`__©Œibu‹_®loc_size__
 ((1)è
__wur
;

584 #ifdeà
__USE_XOPEN2K


586 
	$posix_mem®ign
 (**
__mem±r
, 
size_t
 
__®ignm’t
, size_ˆ
__size
)

587 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

590 #ifdeà
__USE_ISOC11


592 *
	$®igÃd_®loc
 (
size_t
 
__®ignm’t
, size_ˆ
__size
)

593 
__THROW
 
__©Œibu‹_m®loc__
 
	`__©Œibu‹_®loc_®ign__
 ((1))

594 
	`__©Œibu‹_®loc_size__
 ((2)è
__wur
;

598 
	$abÜt
 (è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

602 
	$©ex™
 ((*
__func
è()è
__THROW
 
	`__nÚnuÎ
 ((1));

604 #ià
defšed
 
__USE_ISOC11
 || defšed 
__USE_ISOCXX11


606 #ifdeà
__ılu¥lus


607 "C++" 
	$©_quick_ex™
 ((*
__func
) ())

608 
__THROW
 
	`__asm
 ("©_quick_ex™"è
	`__nÚnuÎ
 ((1));

610 
	$©_quick_ex™
 ((*
__func
è()è
__THROW
 
	`__nÚnuÎ
 ((1));

614 #ifdef 
__USE_MISC


617 
	$Ú_ex™
 ((*
__func
è(
__¡©us
, *
__¬g
), *__arg)

618 
__THROW
 
	`__nÚnuÎ
 ((1));

624 
	$ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

626 #ià
defšed
 
__USE_ISOC11
 || defšed 
__USE_ISOCXX11


630 
	$quick_ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

633 #ifdeà
__USE_ISOC99


636 
	$_Ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

641 *
	$g‘’v
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

643 #ifdeà
__USE_GNU


646 *
	$£cu»_g‘’v
 (cÚ¡ *
__Çme
)

647 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

650 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


654 
	$pu‹nv
 (*
__¡ršg
è
__THROW
 
	`__nÚnuÎ
 ((1));

657 #ifdeà
__USE_XOPEN2K


660 
	$£‹nv
 (cÚ¡ *
__Çme
, cÚ¡ *
__v®ue
, 
__»¶aû
)

661 
__THROW
 
	`__nÚnuÎ
 ((2));

664 
	$un£‹nv
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1));

667 #ifdef 
__USE_MISC


671 
	$ş—»nv
 (è
__THROW
;

675 #ià
defšed
 
__USE_MISC
 \

676 || (
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
)

682 *
	$mk‹mp
 (*
__‹m¶©e
è
__THROW
 
	`__nÚnuÎ
 ((1));

685 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


694 #iâdeà
__USE_FILE_OFFSET64


695 
	$mk¡emp
 (*
__‹m¶©e
è
	`__nÚnuÎ
 ((1)è
__wur
;

697 #ifdeà
__REDIRECT


698 
	`__REDIRECT
 (
mk¡emp
, (*
__‹m¶©e
), 
mk¡emp64
)

699 
	`__nÚnuÎ
 ((1)è
__wur
;

701 
	#mk¡emp
 
mk¡emp64


	)

704 #ifdeà
__USE_LARGEFILE64


705 
	$mk¡emp64
 (*
__‹m¶©e
è
	`__nÚnuÎ
 ((1)è
__wur
;

709 #ifdeà
__USE_MISC


716 #iâdeà
__USE_FILE_OFFSET64


717 
	$mk¡emps
 (*
__‹m¶©e
, 
__suffixËn
è
	`__nÚnuÎ
 ((1)è
__wur
;

719 #ifdeà
__REDIRECT


720 
	`__REDIRECT
 (
mk¡emps
, (*
__‹m¶©e
, 
__suffixËn
),

721 
mk¡emps64
è
	`__nÚnuÎ
 ((1)è
__wur
;

723 
	#mk¡emps
 
mk¡emps64


	)

726 #ifdeà
__USE_LARGEFILE64


727 
	$mk¡emps64
 (*
__‹m¶©e
, 
__suffixËn
)

728 
	`__nÚnuÎ
 ((1)è
__wur
;

732 #ifdeà
__USE_XOPEN2K8


738 *
	$mkd‹mp
 (*
__‹m¶©e
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

741 #ifdeà
__USE_GNU


748 #iâdeà
__USE_FILE_OFFSET64


749 
	$mko¡emp
 (*
__‹m¶©e
, 
__æags
è
	`__nÚnuÎ
 ((1)è
__wur
;

751 #ifdeà
__REDIRECT


752 
	`__REDIRECT
 (
mko¡emp
, (*
__‹m¶©e
, 
__æags
), 
mko¡emp64
)

753 
	`__nÚnuÎ
 ((1)è
__wur
;

755 
	#mko¡emp
 
mko¡emp64


	)

758 #ifdeà
__USE_LARGEFILE64


759 
	$mko¡emp64
 (*
__‹m¶©e
, 
__æags
è
	`__nÚnuÎ
 ((1)è
__wur
;

768 #iâdeà
__USE_FILE_OFFSET64


769 
	$mko¡emps
 (*
__‹m¶©e
, 
__suffixËn
, 
__æags
)

770 
	`__nÚnuÎ
 ((1)è
__wur
;

772 #ifdeà
__REDIRECT


773 
	`__REDIRECT
 (
mko¡emps
, (*
__‹m¶©e
, 
__suffixËn
,

774 
__æags
), 
mko¡emps64
)

775 
	`__nÚnuÎ
 ((1)è
__wur
;

777 
	#mko¡emps
 
mko¡emps64


	)

780 #ifdeà
__USE_LARGEFILE64


781 
	$mko¡emps64
 (*
__‹m¶©e
, 
__suffixËn
, 
__æags
)

782 
	`__nÚnuÎ
 ((1)è
__wur
;

791 
	$sy¡em
 (cÚ¡ *
__commªd
è
__wur
;

794 #ifdef 
__USE_GNU


797 *
	$ÿnÚiÿlize_fe_Çme
 (cÚ¡ *
__Çme
)

798 
__THROW
 
	`__nÚnuÎ
 ((1)è
__©Œibu‹_m®loc__


799 
__©Œ_d—Îoc_ä“
 
__wur
;

802 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


808 *
	$»®·th
 (cÚ¡ *
__»¡riù
 
__Çme
,

809 *
__»¡riù
 
__»sŞved
è
__THROW
 
__wur
;

814 #iâdeà
__COMPAR_FN_T


815 
	#__COMPAR_FN_T


	)

816 (*
	t__com·r_â_t
) (const *, const *);

818 #ifdef 
__USE_GNU


819 
__com·r_â_t
 
	tcom·risÚ_â_t
;

822 #ifdeà
__USE_GNU


823 (*
	t__com·r_d_â_t
) (const *, const *, *);

828 *
	$b£¬ch
 (cÚ¡ *
__key
, cÚ¡ *
__ba£
,

829 
size_t
 
__nmemb
, size_ˆ
__size
, 
__com·r_â_t
 
__com·r
)

830 
	`__nÚnuÎ
 ((1, 2, 5)è
__wur
;

832 #ifdeà
__USE_EXTERN_INLINES


833 
	~<b™s/¡dlib-b£¬ch.h
>

838 
	$qsÜt
 (*
__ba£
, 
size_t
 
__nmemb
, size_ˆ
__size
,

839 
__com·r_â_t
 
__com·r
è
	`__nÚnuÎ
 ((1, 4));

840 #ifdeà
__USE_GNU


841 
	$qsÜt_r
 (*
__ba£
, 
size_t
 
__nmemb
, size_ˆ
__size
,

842 
__com·r_d_â_t
 
__com·r
, *
__¬g
)

843 
	`__nÚnuÎ
 ((1, 4));

848 
	$abs
 (
__x
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

849 
	$Ïbs
 (
__x
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

851 #ifdeà
__USE_ISOC99


852 
__ex‹nsiÚ__
 
	$Îabs
 (
__x
)

853 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

860 
div_t
 
	$div
 (
__num”
, 
__d’om
)

861 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

862 
ldiv_t
 
	$ldiv
 (
__num”
, 
__d’om
)

863 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

865 #ifdeà
__USE_ISOC99


866 
__ex‹nsiÚ__
 
Îdiv_t
 
	$Îdiv
 (
__num”
,

867 
__d’om
)

868 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

872 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

873 || 
defšed
 
__USE_MISC


880 *
	$ecvt
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

881 *
__»¡riù
 
__sign
è
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

886 *
	$fcvt
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

887 *
__»¡riù
 
__sign
è
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

892 *
	$gcvt
 (
__v®ue
, 
__ndig™
, *
__buf
)

893 
__THROW
 
	`__nÚnuÎ
 ((3)è
__wur
;

896 #ifdeà
__USE_MISC


898 *
	$qecvt
 (
__v®ue
, 
__ndig™
,

899 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
)

900 
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

901 *
	$qfcvt
 (
__v®ue
, 
__ndig™
,

902 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
)

903 
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

904 *
	$qgcvt
 (
__v®ue
, 
__ndig™
, *
__buf
)

905 
__THROW
 
	`__nÚnuÎ
 ((3)è
__wur
;

910 
	$ecvt_r
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

911 *
__»¡riù
 
__sign
, *__»¡riù 
__buf
,

912 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

913 
	$fcvt_r
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

914 *
__»¡riù
 
__sign
, *__»¡riù 
__buf
,

915 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

917 
	$qecvt_r
 (
__v®ue
, 
__ndig™
,

918 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
,

919 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

920 
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

921 
	$qfcvt_r
 (
__v®ue
, 
__ndig™
,

922 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
,

923 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

924 
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

930 
	$mbËn
 (cÚ¡ *
__s
, 
size_t
 
__n
è
__THROW
;

933 
	$mbtowc
 (
wch¬_t
 *
__»¡riù
 
__pwc
,

934 cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
è
__THROW
;

937 
	$wùomb
 (*
__s
, 
wch¬_t
 
__wch¬
è
__THROW
;

941 
size_t
 
	$mb¡owcs
 (
wch¬_t
 *
__»¡riù
 
__pwcs
,

942 cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
è
__THROW


943 
	`__©Œ_acûss
 ((
__»ad_Úly__
, 2));

945 
size_t
 
	$wc¡ombs
 (*
__»¡riù
 
__s
,

946 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__pwcs
, 
size_t
 
__n
)

947 
__THROW


948 
	$__fÜtif›d_©Œ_acûss
 (
__wr™e_Úly__
, 1, 3)

949 
	`__©Œ_acûss
 ((
__»ad_Úly__
, 2));

951 #ifdeà
__USE_MISC


956 
	$½m©ch
 (cÚ¡ *
__»¥Ú£
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

960 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


967 
	$g‘subİt
 (**
__»¡riù
 
__İtiÚp
,

968 *cÚ¡ *
__»¡riù
 
__tok’s
,

969 **
__»¡riù
 
__v®u•
)

970 
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3)è
__wur
;

976 #ifdeà
__USE_XOPEN2KXSI


978 
	$posix_İ’±
 (
__oæag
è
__wur
;

981 #ifdeà
__USE_XOPEN_EXTENDED


986 
	$g¿Á±
 (
__fd
è
__THROW
;

990 
	$uÆock±
 (
__fd
è
__THROW
;

995 *
	$±¢ame
 (
__fd
è
__THROW
 
__wur
;

998 #ifdeà
__USE_GNU


1002 
	$±¢ame_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
)

1003 
__THROW
 
	`__nÚnuÎ
 ((2)è
	`__fÜtif›d_©Œ_acûss
 (
__wr™e_Úly__
, 2, 3);

1006 
	`g‘±
 ();

1009 #ifdeà
__USE_MISC


1013 
	$g‘lßdavg
 (
__lßdavg
[], 
__ÃËm
)

1014 
__THROW
 
	`__nÚnuÎ
 ((1));

1017 #ià
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K


1020 
	$‰y¦Ù
 (è
__THROW
;

1023 
	~<b™s/¡dlib-æßt.h
>

1026 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


1027 
	~<b™s/¡dlib.h
>

1030 
	~<b™s/æßŠ.h
>

1031 #ià
defšed
 
__LDBL_COMPAT
 || 
__LDOUBLE_REDIRECTS_TO_FLOAT128_ABI
 == 1

1032 
	~<b™s/¡dlib-ldbl.h
>

1035 
__END_DECLS


	@/usr/include/string.h

22 #iâdef 
_STRING_H


23 
	#_STRING_H
 1

	)

25 
	#__GLIBC_INTERNAL_STARTING_HEADER_IMPLEMENTATION


	)

26 
	~<b™s/libc-h—d”-¡¬t.h
>

28 
	g__BEGIN_DECLS


31 
	#__Ãed_size_t


	)

32 
	#__Ãed_NULL


	)

33 
	~<¡ddef.h
>

36 #ià
defšed
 
__ılu¥lus
 && (
__GNUC_PREREQ
 (4, 4) \

37 || 
	$__glibc_şªg_´”eq
 (3, 5))

38 
	#__CORRECT_ISO_CPP_STRING_H_PROTO


	)

43 *
	$memıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

44 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

47 *
	$memmove
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
)

48 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

53 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN
 || 
	`__GLIBC_USE
 (
ISOC2X
)

54 *
	$memcıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

55 
__c
, 
size_t
 
__n
)

56 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
	`__©Œ_acûss
 ((
__wr™e_Úly__
, 1, 4));

61 *
	$mem£t
 (*
__s
, 
__c
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

64 
	$memcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

65 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

80 
	$__memcm³q
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

81 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

84 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


87 *
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

88 
__THROW
 
	`__asm
 ("memchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

89 cÚ¡ *
	`memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

90 
__THROW
 
	`__asm
 ("memchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

92 #ifdeà
__OPTIMIZE__


93 
__ex‹º_®ways_šlše
 *

94 
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
è
__THROW


96  
	`__butš_memchr
 (
__s
, 
__c
, 
__n
);

99 
__ex‹º_®ways_šlše
 const *

100 
	`memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
è
__THROW


102  
	`__butš_memchr
 (
__s
, 
__c
, 
__n
);

105 
	}
}

107 *
	$memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

108 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

111 #ifdeà
__USE_GNU


114 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


115 "C++" *
	$¿wmemchr
 (*
__s
, 
__c
)

116 
__THROW
 
	`__asm
 ("¿wmemchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

117 "C++" cÚ¡ *
	$¿wmemchr
 (cÚ¡ *
__s
, 
__c
)

118 
__THROW
 
	`__asm
 ("¿wmemchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

120 *
	$¿wmemchr
 (cÚ¡ *
__s
, 
__c
)

121 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

125 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


126 "C++" *
	$memrchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

127 
__THROW
 
	`__asm
 ("memrchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1))

128 
	`__©Œ_acûss
 ((
__»ad_Úly__
, 1, 3));

129 "C++" cÚ¡ *
	$memrchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

130 
__THROW
 
	`__asm
 ("memrchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1))

131 
	`__©Œ_acûss
 ((
__»ad_Úly__
, 1, 3));

133 *
	$memrchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

134 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1))

135 
	`__©Œ_acûss
 ((
__»ad_Úly__
, 1, 3));

141 *
	$¡rıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

142 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

144 *
	$¡ºıy
 (*
__»¡riù
 
__de¡
,

145 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

146 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

149 *
	$¡rÿt
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

150 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

152 *
	$¡ºÿt
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

153 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

156 
	$¡rcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

157 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

159 
	$¡ºcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

160 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

163 
	$¡rcŞl
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

164 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

166 
size_t
 
	$¡rxäm
 (*
__»¡riù
 
__de¡
,

167 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

168 
__THROW
 
	`__nÚnuÎ
 ((2)è
	`__©Œ_acûss
 ((
__wr™e_Úly__
, 1, 3));

170 #ifdeà
__USE_XOPEN2K8


172 
	~<b™s/ty³s/loÿË_t.h
>

175 
	$¡rcŞl_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
loÿË_t
 
__l
)

176 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 3));

179 
size_t
 
	$¡rxäm_l
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
,

180 
loÿË_t
 
__l
è
__THROW
 
	`__nÚnuÎ
 ((2, 4))

181 
	`__©Œ_acûss
 ((
__wr™e_Úly__
, 1, 3));

184 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8
 \

185 || 
	`__GLIBC_USE
 (
LIB_EXT2
è|| 
	$__GLIBC_USE
 (
ISOC2X
))

187 *
	$¡rdup
 (cÚ¡ *
__s
)

188 
__THROW
 
__©Œibu‹_m®loc__
 
	`__nÚnuÎ
 ((1));

194 #ià
defšed
 
__USE_XOPEN2K8
 || 
	`__GLIBC_USE
 (
LIB_EXT2
è|| __GLIBC_USE (
ISOC2X
)

195 *
	$¡ºdup
 (cÚ¡ *
__¡ršg
, 
size_t
 
__n
)

196 
__THROW
 
__©Œibu‹_m®loc__
 
	`__nÚnuÎ
 ((1));

199 #ià
defšed
 
__USE_GNU
 && defšed 
__GNUC__


201 
	#¡rdu·
(
s
) \

202 (
__ex‹nsiÚ__
 \

204 cÚ¡ *
__Şd
 = (
s
); \

205 
size_t
 
__Ën
 = 
	`¡¾’
 (
__Şd
) + 1; \

206 *
__Ãw
 = (*è
	`__butš_®loÿ
 (
__Ën
); \

207 (*è
	`memıy
 (
__Ãw
, 
__Şd
, 
__Ën
); \

208 
	}
}))

	)

211 
	#¡ºdu·
(
s
, 
n
) \

212 (
__ex‹nsiÚ__
 \

214 cÚ¡ *
__Şd
 = (
s
); \

215 
size_t
 
__Ën
 = 
	`¡ºËn
 (
__Şd
, (
n
)); \

216 *
__Ãw
 = (*è
	`__butš_®loÿ
 (
__Ën
 + 1); \

217 
__Ãw
[
__Ën
] = '\0'; \

218 (*è
	`memıy
 (
__Ãw
, 
__Şd
, 
__Ën
); \

219 }))

	)

223 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


226 *
¡rchr
 (*
__s
, 
__c
)

227 
__THROW
 
__asm
 ("¡rchr"è
__©Œibu‹_pu»__
 
__nÚnuÎ
 ((1));

228 cÚ¡ *
¡rchr
 (cÚ¡ *
__s
, 
__c
)

229 
__THROW
 
__asm
 ("¡rchr"è
__©Œibu‹_pu»__
 
__nÚnuÎ
 ((1));

231 #ifdeà
__OPTIMIZE__


232 
__ex‹º_®ways_šlše
 *

233 
¡rchr
 (*
__s
, 
__c
è
	g__THROW


235  
__butš_¡rchr
 (
__s
, 
__c
);

238 
__ex‹º_®ways_šlše
 const *

239 
¡rchr
 (cÚ¡ *
__s
, 
__c
è
	g__THROW


241  
__butš_¡rchr
 (
__s
, 
__c
);

246 *
	$¡rchr
 (cÚ¡ *
__s
, 
__c
)

247 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

250 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


253 *
	`¡¼chr
 (*
__s
, 
__c
)

254 
__THROW
 
	`__asm
 ("¡¼chr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

255 cÚ¡ *
	`¡¼chr
 (cÚ¡ *
__s
, 
__c
)

256 
__THROW
 
	`__asm
 ("¡¼chr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

258 #ifdeà
__OPTIMIZE__


259 
__ex‹º_®ways_šlše
 *

260 
	`¡¼chr
 (*
__s
, 
__c
è
__THROW


262  
	`__butš_¡¼chr
 (
__s
, 
__c
);

265 
__ex‹º_®ways_šlše
 const *

266 
	`¡¼chr
 (cÚ¡ *
__s
, 
__c
è
__THROW


268  
	`__butš_¡¼chr
 (
__s
, 
__c
);

271 
	}
}

273 *
	$¡¼chr
 (cÚ¡ *
__s
, 
__c
)

274 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

277 #ifdeà
__USE_GNU


280 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


281 "C++" *
	$¡rchºul
 (*
__s
, 
__c
)

282 
__THROW
 
	`__asm
 ("¡rchºul"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

283 "C++" cÚ¡ *
	$¡rchºul
 (cÚ¡ *
__s
, 
__c
)

284 
__THROW
 
	`__asm
 ("¡rchºul"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

286 *
	$¡rchºul
 (cÚ¡ *
__s
, 
__c
)

287 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

293 
size_t
 
	$¡rc¥n
 (cÚ¡ *
__s
, cÚ¡ *
__»jeù
)

294 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

297 
size_t
 
	$¡r¥n
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

298 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

300 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


303 *
	`¡½brk
 (*
__s
, cÚ¡ *
__acû±
)

304 
__THROW
 
	`__asm
 ("¡½brk"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

305 cÚ¡ *
	`¡½brk
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

306 
__THROW
 
	`__asm
 ("¡½brk"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

308 #ifdeà
__OPTIMIZE__


309 
__ex‹º_®ways_šlše
 *

310 
	`¡½brk
 (*
__s
, cÚ¡ *
__acû±
è
__THROW


312  
	`__butš_¡½brk
 (
__s
, 
__acû±
);

315 
__ex‹º_®ways_šlše
 const *

316 
	`¡½brk
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
è
__THROW


318  
	`__butš_¡½brk
 (
__s
, 
__acû±
);

321 
	}
}

323 *
	$¡½brk
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

324 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

327 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


330 *
	`¡r¡r
 (*
__hay¡ack
, cÚ¡ *
__ÃedË
)

331 
__THROW
 
	`__asm
 ("¡r¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

332 cÚ¡ *
	`¡r¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

333 
__THROW
 
	`__asm
 ("¡r¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

335 #ifdeà
__OPTIMIZE__


336 
__ex‹º_®ways_šlše
 *

337 
	`¡r¡r
 (*
__hay¡ack
, cÚ¡ *
__ÃedË
è
__THROW


339  
	`__butš_¡r¡r
 (
__hay¡ack
, 
__ÃedË
);

342 
__ex‹º_®ways_šlše
 const *

343 
	`¡r¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
è
__THROW


345  
	`__butš_¡r¡r
 (
__hay¡ack
, 
__ÃedË
);

348 
	}
}

350 *
	$¡r¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

351 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

356 *
	$¡¹ok
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__d–im
)

357 
__THROW
 
	`__nÚnuÎ
 ((2));

361 *
	$__¡¹ok_r
 (*
__»¡riù
 
__s
,

362 cÚ¡ *
__»¡riù
 
__d–im
,

363 **
__»¡riù
 
__§ve_±r
)

364 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

365 #ifdeà
__USE_POSIX


366 *
	$¡¹ok_r
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__d–im
,

367 **
__»¡riù
 
__§ve_±r
)

368 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

371 #ifdeà
__USE_GNU


373 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


374 "C++" *
	$¡rÿ£¡r
 (*
__hay¡ack
, cÚ¡ *
__ÃedË
)

375 
__THROW
 
	`__asm
 ("¡rÿ£¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

376 "C++" cÚ¡ *
	$¡rÿ£¡r
 (cÚ¡ *
__hay¡ack
,

377 cÚ¡ *
__ÃedË
)

378 
__THROW
 
	`__asm
 ("¡rÿ£¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

380 *
	$¡rÿ£¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

381 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

385 #ifdeà
__USE_GNU


389 *
	$memmem
 (cÚ¡ *
__hay¡ack
, 
size_t
 
__hay¡ackËn
,

390 cÚ¡ *
__ÃedË
, 
size_t
 
__ÃedËËn
)

391 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 3))

392 
	`__©Œ_acûss
 ((
__»ad_Úly__
, 1, 2))

393 
	`__©Œ_acûss
 ((
__»ad_Úly__
, 3, 4));

397 *
	$__mempıy
 (*
__»¡riù
 
__de¡
,

398 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

399 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

400 *
	$mempıy
 (*
__»¡riù
 
__de¡
,

401 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

402 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

407 
size_t
 
	$¡¾’
 (cÚ¡ *
__s
)

408 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

410 #ifdef 
__USE_XOPEN2K8


413 
size_t
 
	$¡ºËn
 (cÚ¡ *
__¡ršg
, 
size_t
 
__maxËn
)

414 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

419 *
	$¡»¼Ü
 (
__”ºum
è
__THROW
;

420 #ifdeà
__USE_XOPEN2K


428 #ià
defšed
 
__USE_XOPEN2K
 && !defšed 
__USE_GNU


431 #ifdeà
__REDIRECT_NTH


432 
	`__REDIRECT_NTH
 (
¡»¼Ü_r
,

433 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
),

434 
__xpg_¡»¼Ü_r
è
	`__nÚnuÎ
 ((2))

435 
	`__©Œ_acûss
 ((
__wr™e_Úly__
, 2, 3));

437 
	$__xpg_¡»¼Ü_r
 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
)

438 
__THROW
 
	`__nÚnuÎ
 ((2)è
	`__©Œ_acûss
 ((
__wr™e_Úly__
, 2, 3));

439 
	#¡»¼Ü_r
 
__xpg_¡»¼Ü_r


	)

444 *
	$¡»¼Ü_r
 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
)

445 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
 
	`__©Œ_acûss
 ((
__wr™e_Úly__
, 2, 3));

448 #ifdeà
__USE_GNU


450 cÚ¡ *
	$¡»¼Üdesc_Å
 (
__”r
è
__THROW
;

452 cÚ¡ *
	$¡»¼ÜÇme_Å
 (
__”r
è
__THROW
;

456 #ifdeà
__USE_XOPEN2K8


458 *
	$¡»¼Ü_l
 (
__”ºum
, 
loÿË_t
 
__l
è
__THROW
;

461 #ifdeà
__USE_MISC


462 
	~<¡ršgs.h
>

466 
	$ex¶ic™_bz”o
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1))

467 
	`__fÜtif›d_©Œ_acûss
 (
__wr™e_Úly__
, 1, 2);

471 *
	$¡r£p
 (**
__»¡riù
 
__¡ršgp
,

472 cÚ¡ *
__»¡riù
 
__d–im
)

473 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

476 #ifdef 
__USE_XOPEN2K8


478 *
	$¡rsigÇl
 (
__sig
è
__THROW
;

480 #ifdeà
__USE_GNU


482 cÚ¡ *
	$sigabb»v_Å
 (
__sig
è
__THROW
;

485 cÚ¡ *
	$sigdesü_Å
 (
__sig
è
__THROW
;

489 *
	$__¡pıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

490 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

491 *
	$¡pıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

492 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

496 *
	$__¡²ıy
 (*
__»¡riù
 
__de¡
,

497 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

498 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

499 *
	$¡²ıy
 (*
__»¡riù
 
__de¡
,

500 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

501 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

504 #ifdef 
__USE_GNU


506 
	$¡rv”scmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

507 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

510 *
	$¡räy
 (*
__¡ršg
è
__THROW
 
	`__nÚnuÎ
 ((1));

513 *
	$memäob
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1))

514 
	`__©Œ_acûss
 ((
__»ad_wr™e__
, 1, 2));

516 #iâdeà
ba£Çme


521 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


522 "C++" *
	$ba£Çme
 (*
__f’ame
)

523 
__THROW
 
	`__asm
 ("ba£Çme"è
	`__nÚnuÎ
 ((1));

524 "C++" cÚ¡ *
	$ba£Çme
 (cÚ¡ *
__f’ame
)

525 
__THROW
 
	`__asm
 ("ba£Çme"è
	`__nÚnuÎ
 ((1));

527 *
	$ba£Çme
 (cÚ¡ *
__f’ame
è
__THROW
 
	`__nÚnuÎ
 ((1));

532 #ià
	`__GNUC_PREREQ
 (3,4)

533 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


535 
	~<b™s/¡ršg_fÜtif›d.h
>

539 
__END_DECLS


	@/usr/include/strings.h

18 #iâdef 
_STRINGS_H


19 
	#_STRINGS_H
 1

	)

21 
	~<ã©u»s.h
>

22 
	#__Ãed_size_t


	)

23 
	~<¡ddef.h
>

26 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (4, 4)

27 
	#__CORRECT_ISO_CPP_STRINGS_H_PROTO


	)

30 
	g__BEGIN_DECLS


32 #ià
defšed
 
__USE_MISC
 || !defšed 
__USE_XOPEN2K8


34 
	$bcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

35 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

38 
	$bcİy
 (cÚ¡ *
__¤c
, *
__de¡
, 
size_t
 
__n
)

39 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

42 
	$bz”o
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

45 #ifdeà
__CORRECT_ISO_CPP_STRINGS_H_PROTO


48 *
	`šdex
 (*
__s
, 
__c
)

49 
__THROW
 
	`__asm
 ("šdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

50 cÚ¡ *
	`šdex
 (cÚ¡ *
__s
, 
__c
)

51 
__THROW
 
	`__asm
 ("šdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

53 #ià
defšed
 
__OPTIMIZE__


54 
__ex‹º_®ways_šlše
 *

55 
	`šdex
 (*
__s
, 
__c
è
__THROW


57  
	`__butš_šdex
 (
__s
, 
__c
);

60 
__ex‹º_®ways_šlše
 const *

61 
	`šdex
 (cÚ¡ *
__s
, 
__c
è
__THROW


63  
	`__butš_šdex
 (
__s
, 
__c
);

66 
	}
}

68 *
	$šdex
 (cÚ¡ *
__s
, 
__c
)

69 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

73 #ifdeà
__CORRECT_ISO_CPP_STRINGS_H_PROTO


76 *
	`ršdex
 (*
__s
, 
__c
)

77 
__THROW
 
	`__asm
 ("ršdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

78 cÚ¡ *
	`ršdex
 (cÚ¡ *
__s
, 
__c
)

79 
__THROW
 
	`__asm
 ("ršdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

81 #ià
defšed
 
__OPTIMIZE__


82 
__ex‹º_®ways_šlše
 *

83 
	`ršdex
 (*
__s
, 
__c
è
__THROW


85  
	`__butš_ršdex
 (
__s
, 
__c
);

88 
__ex‹º_®ways_šlše
 const *

89 
	`ršdex
 (cÚ¡ *
__s
, 
__c
è
__THROW


91  
	`__butš_ršdex
 (
__s
, 
__c
);

94 
	}
}

96 *
	$ršdex
 (cÚ¡ *
__s
, 
__c
)

97 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

101 #ià
defšed
 
__USE_MISC
 || !defšed 
__USE_XOPEN2K8
 || defšed 
__USE_XOPEN2K8XSI


104 
	$ffs
 (
__i
è
__THROW
 
__©Œibu‹_cÚ¡__
;

109 #ifdef 
__USE_MISC


110 
	$ff¦
 (
__l
è
__THROW
 
__©Œibu‹_cÚ¡__
;

111 
__ex‹nsiÚ__
 
	$ff¦l
 (
__Î
)

112 
__THROW
 
__©Œibu‹_cÚ¡__
;

116 
	$¡rÿ£cmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

117 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

120 
	$¡ºÿ£cmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

121 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

123 #ifdef 
__USE_XOPEN2K8


125 
	~<b™s/ty³s/loÿË_t.h
>

128 
	$¡rÿ£cmp_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
loÿË_t
 
__loc
)

129 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 3));

133 
	$¡ºÿ£cmp_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
,

134 
size_t
 
__n
, 
loÿË_t
 
__loc
)

135 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 4));

138 
__END_DECLS


140 #ià
	`__GNUC_PREREQ
 (3,4è&& 
__USE_FORTIFY_LEVEL
 > 0 \

141 && 
defšed
 
__fÜtify_funùiÚ


143 #ià
defšed
 
__USE_MISC
 || !defšed 
__USE_XOPEN2K8


144 
	~<b™s/¡ršgs_fÜtif›d.h
>

	@/usr/include/time.h

22 #iâdef 
_TIME_H


23 
	#_TIME_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	#__Ãed_size_t


	)

28 
	#__Ãed_NULL


	)

29 
	~<¡ddef.h
>

33 
	~<b™s/time.h
>

37 
	~<b™s/ty³s/şock_t.h
>

38 
	~<b™s/ty³s/time_t.h
>

39 
	~<b™s/ty³s/¡ruù_tm.h
>

41 #ià
defšed
 
__USE_POSIX199309
 || defšed 
__USE_ISOC11


42 
	~<b™s/ty³s/¡ruù_time¥ec.h
>

45 #ifdeà
__USE_POSIX199309


46 
	~<b™s/ty³s/şockid_t.h
>

47 
	~<b™s/ty³s/tim”_t.h
>

48 
	~<b™s/ty³s/¡ruù_™im”¥ec.h
>

49 
	gsigev’t
;

52 #ifdeà
__USE_XOPEN2K


53 #iâdeà
__pid_t_defšed


54 
__pid_t
 
	tpid_t
;

55 
	#__pid_t_defšed


	)

59 #ifdeà
__USE_XOPEN2K8


60 
	~<b™s/ty³s/loÿË_t.h
>

63 #ifdeà
__USE_ISOC11


65 
	#TIME_UTC
 1

	)

68 
__BEGIN_DECLS


72 
şock_t
 
	$şock
 (è
__THROW
;

74 #iâdeà
__USE_TIME_BITS64


76 
time_t
 
	$time
 (
time_t
 *
__tim”
è
__THROW
;

79 
	$difáime
 (
time_t
 
__time1
,ime_ˆ
__time0
)

80 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

83 
time_t
 
	$mktime
 (
tm
 *
__
è
__THROW
;

85 #ifdeà
__REDIRECT_NTH


86 
time_t
 
	`__REDIRECT_NTH
 (
time
, (time_ˆ*
__tim”
), 
__time64
);

87 
	`__REDIRECT_NTH
 (
difáime
, (
time_t
 
__time1
,ime_ˆ
__time0
),

88 
__difáime64
è
	`__©Œibu‹__
 ((
__cÚ¡__
));

89 
time_t
 
	`__REDIRECT_NTH
 (
mktime
, (
tm
 *
__
), 
__mktime64
);

91 
	#time
 
__time64


	)

92 
	#difáime
 
__difáime64


	)

93 
	#mktime
 
__mktime64


	)

100 
size_t
 
	$¡ráime
 (*
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

101 cÚ¡ *
__»¡riù
 
__fÜm©
,

102 cÚ¡ 
tm
 *
__»¡riù
 
__
è
__THROW
;

104 #ifdeà
__USE_XOPEN


107 *
	$¡½time
 (cÚ¡ *
__»¡riù
 
__s
,

108 cÚ¡ *
__»¡riù
 
__fmt
, 
tm
 *
__
)

109 
__THROW
;

112 #ifdeà
__USE_XOPEN2K8


116 
size_t
 
	$¡ráime_l
 (*
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

117 cÚ¡ *
__»¡riù
 
__fÜm©
,

118 cÚ¡ 
tm
 *
__»¡riù
 
__
,

119 
loÿË_t
 
__loc
è
__THROW
;

122 #ifdeà
__USE_GNU


123 *
	$¡½time_l
 (cÚ¡ *
__»¡riù
 
__s
,

124 cÚ¡ *
__»¡riù
 
__fmt
, 
tm
 *
__
,

125 
loÿË_t
 
__loc
è
__THROW
;

129 #iâdeà
__USE_TIME_BITS64


132 
tm
 *
	$gmtime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

136 
tm
 *
	$loÿÉime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

139 #ifdeà
__REDIRECT_NTH


140 
tm
*
	`__REDIRECT_NTH
 (
gmtime
, (cÚ¡ 
time_t
 *
__tim”
), 
__gmtime64
);

141 
tm
 *
	`__REDIRECT_NTH
 (
loÿÉime
, (cÚ¡ 
time_t
 *
__tim”
),

142 
__loÿÉime64
);

144 
	#gmtime
 
__gmtime64


	)

145 
	#loÿÉime
 
__loÿÉime64


	)

150 #ià
defšed
 
__USE_POSIX
 || 
	`__GLIBC_USE
 (
ISOC2X
)

151 #iâdeà
__USE_TIME_BITS64


154 
tm
 *
	$gmtime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

155 
tm
 *
__»¡riù
 
__
è
__THROW
;

159 
tm
 *
	$loÿÉime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

160 
tm
 *
__»¡riù
 
__
è
__THROW
;

162 #ifdeà
__REDIRECT_NTH


163 
tm
*
	`__REDIRECT_NTH
 (
gmtime_r
, (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

164 
tm
 *
__»¡riù
 
__
),

165 
__gmtime64_r
);

167 
tm
*
	`__REDIRECT_NTH
 (
loÿÉime_r
, (cÚ¡ 
time_t
 *
__»¡riù
 
__t
,

168 
tm
 *
__»¡riù
 
__
),

169 
__loÿÉime64_r
);

171 
	#gmtime_r
 
__gmtime64_r


	)

172 
	#loÿÉime_r
 
__loÿÉime_r


	)

179 *
	$asùime
 (cÚ¡ 
tm
 *
__
è
__THROW
;

182 #iâdeà
__USE_TIME_BITS64


183 *
	$ùime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

185 #ifdeà
__REDIRECT_NTH


186 *
	`__REDIRECT_NTH
 (
ùime
, (cÚ¡ 
time_t
 *
__tim”
), 
__ùime64
);

188 
	#ùime
 
__ùime64


	)

192 #ifdeà
__USE_POSIX


197 *
	$asùime_r
 (cÚ¡ 
tm
 *
__»¡riù
 
__
,

198 *
__»¡riù
 
__buf
è
__THROW
;

201 #iâdeà
__USE_TIME_BITS64


202 *
	$ùime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

203 *
__»¡riù
 
__buf
è
__THROW
;

205 #ifdeà
__REDIRECT_NTH


206 *
	`__REDIRECT_NTH
 (
ùime_r
, (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

207 *
__»¡riù
 
__buf
), 
__ùime64_r
);

209 
	#ùime_r
 
__ùime64_r


	)

217 *
__tzÇme
[2];

218 
__daylight
;

219 
__timezÚe
;

222 #ifdef 
__USE_POSIX


224 *
tzÇme
[2];

228 
	$tz£t
 (è
__THROW
;

231 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


232 
daylight
;

233 
timezÚe
;

239 
	#__i¦—p
(
y—r
) \

240 ((
y—r
è% 4 =ğ0 && ((y—rè% 100 !ğ0 || (y—rè% 400 =ğ0))

	)

243 #ifdeà
__USE_MISC


247 #iâdeà
__USE_TIME_BITS64


249 
time_t
 
	$timegm
 (
tm
 *
__
è
__THROW
;

251 
time_t
 
	$tim–oÿl
 (
tm
 *
__
è
__THROW
;

253 #ifdeà
__REDIRECT_NTH


254 
time_t
 
	`__REDIRECT_NTH
 (
timegm
, (
tm
 *
__
), 
__timegm64
);

255 
time_t
 
	`__REDIRECT_NTH
 (
tim–oÿl
, (
tm
 *
__
), 
__mktime64
);

257 
	#timegm
 
__timegm64


	)

262 
	$dysize
 (
__y—r
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

266 #ifdeà
__USE_POSIX199309


267 #iâdeà
__USE_TIME_BITS64


272 
	`Çno¦“p
 (cÚ¡ 
time¥ec
 *
__»que¡ed_time
,

273 
time¥ec
 *
__»maššg
);

276 
	$şock_g‘»s
 (
şockid_t
 
__şock_id
, 
time¥ec
 *
__»s
è
__THROW
;

279 
	$şock_g‘time
 (
şockid_t
 
__şock_id
, 
time¥ec
 *
__
è
__THROW
;

282 
	$şock_£‰ime
 (
şockid_t
 
__şock_id
, cÚ¡ 
time¥ec
 *
__
)

283 
__THROW
;

285 #ifdeà
__REDIRECT


286 
	`__REDIRECT
 (
Çno¦“p
, (cÚ¡ 
time¥ec
 *
__»que¡ed_time
,

287 
time¥ec
 *
__»maššg
),

288 
__Çno¦“p64
);

289 
	`__REDIRECT_NTH
 (
şock_g‘»s
, (
şockid_t
 
__şock_id
,

290 
time¥ec
 *
__»s
),

291 
__şock_g‘»s64
);

292 
	`__REDIRECT_NTH
 (
şock_g‘time
, (
şockid_t
 
__şock_id
, 

293 
time¥ec
 *
__
), 
__şock_g‘time64
);

294 
	`__REDIRECT_NTH
 (
şock_£‰ime
, (
şockid_t
 
__şock_id
, const 

295 
time¥ec
 *
__
), 
__şock_£‰ime64
);

297 
	#Çno¦“p
 
__Çno¦“p64


	)

298 
	#şock_g‘»s
 
__şock_g‘»s64


	)

299 
	#şock_g‘time
 
__şock_g‘time64


	)

300 
	#şock_£‰ime
 
__şock_£‰ime64


	)

305 #ifdeà
__USE_XOPEN2K


310 #iâdeà
__USE_TIME_BITS64


311 
	`şock_Çno¦“p
 (
şockid_t
 
__şock_id
, 
__æags
,

312 cÚ¡ 
time¥ec
 *
__»q
,

313 
time¥ec
 *
__»m
);

315 #ifdeà
__REDIRECT


316 
	`__REDIRECT
 (
şock_Çno¦“p
, (
şockid_t
 
__şock_id
, 
__æags
,

317 cÚ¡ 
time¥ec
 *
__»q
,

318 
time¥ec
 *
__»m
),

319 
__şock_Çno¦“p_time64
);

321 
	#şock_Çno¦“p
 
__şock_Çno¦“p_time64


	)

326 
	$şock_g‘ıuşockid
 (
pid_t
 
__pid
, 
şockid_t
 *
__şock_id
è
__THROW
;

331 
	$tim”_ü—‹
 (
şockid_t
 
__şock_id
,

332 
sigev’t
 *
__»¡riù
 
__evp
,

333 
tim”_t
 *
__»¡riù
 
__tim”id
è
__THROW
;

336 
	$tim”_d–‘e
 (
tim”_t
 
__tim”id
è
__THROW
;

339 #iâdeà
__USE_TIME_BITS64


340 
	$tim”_£‰ime
 (
tim”_t
 
__tim”id
, 
__æags
,

341 cÚ¡ 
™im”¥ec
 *
__»¡riù
 
__v®ue
,

342 
™im”¥ec
 *
__»¡riù
 
__ov®ue
è
__THROW
;

345 
	$tim”_g‘time
 (
tim”_t
 
__tim”id
, 
™im”¥ec
 *
__v®ue
)

346 
__THROW
;

348 #ifdeà
__REDIRECT_NTH


349 
	`__REDIRECT_NTH
 (
tim”_£‰ime
, (
tim”_t
 
__tim”id
, 
__æags
,

350 cÚ¡ 
™im”¥ec
 *
__»¡riù
 
__v®ue
,

351 
™im”¥ec
 *
__»¡riù
 
__ov®ue
),

352 
__tim”_£‰ime64
);

354 
	`__REDIRECT_NTH
 (
tim”_g‘time
, (
tim”_t
 
__tim”id
,

355 
™im”¥ec
 *
__v®ue
),

356 
__tim”_g‘time64
);

358 
	#tim”_£‰ime
 
__tim”_£‰ime64


	)

359 
	#tim”_g‘time
 
__tim”_g‘time64


	)

364 
	$tim”_g‘ov”run
 (
tim”_t
 
__tim”id
è
__THROW
;

368 #ifdeà
__USE_ISOC11


369 #iâdeà
__USE_TIME_BITS64


371 
	$time¥ec_g‘
 (
time¥ec
 *
__ts
, 
__ba£
)

372 
__THROW
 
	`__nÚnuÎ
 ((1));

374 #ifdeà
__REDIRECT_NTH


375 
	`__REDIRECT_NTH
 (
time¥ec_g‘
, (
time¥ec
 *
__ts
, 
__ba£
),

376 
__time¥ec_g‘64
è
	`__nÚnuÎ
 ((1));

378 
	#time¥ec_g‘
 
__time¥ec_g‘64


	)

384 #ià
	`__GLIBC_USE
 (
ISOC2X
)

385 #iâdeà
__USE_TIME_BITS64


387 
	$time¥ec_g‘»s
 (
time¥ec
 *
__ts
, 
__ba£
)

388 
__THROW
;

390 #ifdeà
__REDIRECT_NTH


391 
	`__REDIRECT_NTH
 (
time¥ec_g‘»s
, (
time¥ec
 *
__ts
,

392 
__ba£
),

393 
__time¥ec_g‘»s64
);

395 
	#time¥ec_g‘»s
 
__time¥ec_g‘»s64


	)

401 #ifdeà
__USE_XOPEN_EXTENDED


413 
g‘d©e_”r
;

422 
tm
 *
	`g‘d©e
 (cÚ¡ *
__¡ršg
);

425 #ifdeà
__USE_GNU


436 
	`g‘d©e_r
 (cÚ¡ *
__»¡riù
 
__¡ršg
,

437 
tm
 *
__»¡riù
 
__»sbuå
);

440 
__END_DECLS


	@/usr/include/unistd.h

22 #iâdef 
_UNISTD_H


23 
	#_UNISTD_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	g__BEGIN_DECLS


32 #ifdeà
__USE_XOPEN2K8


34 
	#_POSIX_VERSION
 200809L

	)

35 #–ià
defšed
 
__USE_XOPEN2K


37 
	#_POSIX_VERSION
 200112L

	)

38 #–ià
defšed
 
__USE_POSIX199506


40 
	#_POSIX_VERSION
 199506L

	)

41 #–ià
defšed
 
__USE_POSIX199309


43 
	#_POSIX_VERSION
 199309L

	)

46 
	#_POSIX_VERSION
 199009L

	)

52 #ifdeà
__USE_XOPEN2K8


53 
	#__POSIX2_THIS_VERSION
 200809L

	)

55 #–ià
defšed
 
__USE_XOPEN2K


57 
	#__POSIX2_THIS_VERSION
 200112L

	)

58 #–ià
defšed
 
__USE_POSIX199506


60 
	#__POSIX2_THIS_VERSION
 199506L

	)

63 
	#__POSIX2_THIS_VERSION
 199209L

	)

67 
	#_POSIX2_VERSION
 
__POSIX2_THIS_VERSION


	)

70 
	#_POSIX2_C_VERSION
 
__POSIX2_THIS_VERSION


	)

74 
	#_POSIX2_C_BIND
 
__POSIX2_THIS_VERSION


	)

78 
	#_POSIX2_C_DEV
 
__POSIX2_THIS_VERSION


	)

82 
	#_POSIX2_SW_DEV
 
__POSIX2_THIS_VERSION


	)

86 
	#_POSIX2_LOCALEDEF
 
__POSIX2_THIS_VERSION


	)

89 #ifdeà
__USE_XOPEN2K8


90 
	#_XOPEN_VERSION
 700

	)

91 #–ià
defšed
 
__USE_XOPEN2K


92 
	#_XOPEN_VERSION
 600

	)

93 #–ià
defšed
 
__USE_UNIX98


94 
	#_XOPEN_VERSION
 500

	)

96 
	#_XOPEN_VERSION
 4

	)

100 
	#_XOPEN_XCU_VERSION
 4

	)

103 
	#_XOPEN_XPG2
 1

	)

104 
	#_XOPEN_XPG3
 1

	)

105 
	#_XOPEN_XPG4
 1

	)

108 
	#_XOPEN_UNIX
 1

	)

112 
	#_XOPEN_ENH_I18N
 1

	)

115 
	#_XOPEN_LEGACY
 1

	)

202 
	~<b™s/posix_İt.h
>

205 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


206 
	~<b™s/’vœÚm’ts.h
>

210 
	#STDIN_FILENO
 0

	)

211 
	#STDOUT_FILENO
 1

	)

212 
	#STDERR_FILENO
 2

	)

217 
	~<b™s/ty³s.h
>

219 #iâdef 
__ssize_t_defšed


220 
__ssize_t
 
	tssize_t
;

221 
	#__ssize_t_defšed


	)

224 
	#__Ãed_size_t


	)

225 
	#__Ãed_NULL


	)

226 
	~<¡ddef.h
>

228 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K


231 #iâdeà
__gid_t_defšed


232 
__gid_t
 
	tgid_t
;

233 
	#__gid_t_defšed


	)

236 #iâdeà
__uid_t_defšed


237 
__uid_t
 
	tuid_t
;

238 
	#__uid_t_defšed


	)

241 #iâdeà
__off_t_defšed


242 #iâdeà
__USE_FILE_OFFSET64


243 
__off_t
 
	toff_t
;

245 
__off64_t
 
	toff_t
;

247 
	#__off_t_defšed


	)

249 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__off64_t_defšed


250 
__off64_t
 
	toff64_t
;

251 
	#__off64_t_defšed


	)

254 #iâdeà
__u£cÚds_t_defšed


255 
__u£cÚds_t
 
	tu£cÚds_t
;

256 
	#__u£cÚds_t_defšed


	)

259 #iâdeà
__pid_t_defšed


260 
__pid_t
 
	tpid_t
;

261 
	#__pid_t_defšed


	)

265 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


266 #iâdeà
__šŒ_t_defšed


267 
__šŒ_t
 
	tšŒ_t
;

268 
	#__šŒ_t_defšed


	)

272 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


273 #iâdeà
__sockËn_t_defšed


274 
__sockËn_t
 
	tsockËn_t
;

275 
	#__sockËn_t_defšed


	)

281 
	#R_OK
 4

	)

282 
	#W_OK
 2

	)

283 
	#X_OK
 1

	)

284 
	#F_OK
 0

	)

287 
	$acûss
 (cÚ¡ *
__Çme
, 
__ty³
è
__THROW
 
	`__nÚnuÎ
 ((1));

289 #ifdeà
__USE_GNU


292 
	$euidacûss
 (cÚ¡ *
__Çme
, 
__ty³
)

293 
__THROW
 
	`__nÚnuÎ
 ((1));

296 
	$—cûss
 (cÚ¡ *
__Çme
, 
__ty³
)

297 
__THROW
 
	`__nÚnuÎ
 ((1));

300 
	$execv—t
 (
__fd
, cÚ¡ *
__·th
, *cÚ¡ 
__¬gv
[],

301 *cÚ¡ 
__’vp
[], 
__æags
)

302 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

305 #ifdeà
__USE_ATFILE


309 
	$çcûs§t
 (
__fd
, cÚ¡ *
__fe
, 
__ty³
, 
__æag
)

310 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

315 #iâdef 
_STDIO_H


316 
	#SEEK_SET
 0

	)

317 
	#SEEK_CUR
 1

	)

318 
	#SEEK_END
 2

	)

319 #ifdeà
__USE_GNU


320 
	#SEEK_DATA
 3

	)

321 
	#SEEK_HOLE
 4

	)

325 #ià
defšed
 
__USE_MISC
 && !defšed 
L_SET


327 
	#L_SET
 
SEEK_SET


	)

328 
	#L_INCR
 
SEEK_CUR


	)

329 
	#L_XTND
 
SEEK_END


	)

338 #iâdeà
__USE_FILE_OFFSET64


339 
__off_t
 
	$l£ek
 (
__fd
, 
__off_t
 
__off£t
, 
__wh’û
è
__THROW
;

341 #ifdeà
__REDIRECT_NTH


342 
__off64_t
 
	`__REDIRECT_NTH
 (
l£ek
,

343 (
__fd
, 
__off64_t
 
__off£t
, 
__wh’û
),

344 
l£ek64
);

346 
	#l£ek
 
l£ek64


	)

349 #ifdeà
__USE_LARGEFILE64


350 
__off64_t
 
	$l£ek64
 (
__fd
, 
__off64_t
 
__off£t
, 
__wh’û
)

351 
__THROW
;

358 
	`şo£
 (
__fd
);

360 #ifdeà
__USE_MISC


363 
	$şo£äom
 (
__lowfd
è
__THROW
;

371 
ssize_t
 
	$»ad
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
è
__wur


372 
	`__fÜtif›d_©Œ_acûss
 (
__wr™e_Úly__
, 2, 3);

378 
ssize_t
 
	$wr™e
 (
__fd
, cÚ¡ *
__buf
, 
size_t
 
__n
è
__wur


379 
	`__©Œ_acûss
 ((
__»ad_Úly__
, 2, 3));

381 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8


382 #iâdeà
__USE_FILE_OFFSET64


389 
ssize_t
 
	$´—d
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

390 
__off_t
 
__off£t
è
__wur


391 
	`__fÜtif›d_©Œ_acûss
 (
__wr™e_Úly__
, 2, 3);

398 
ssize_t
 
	$pwr™e
 (
__fd
, cÚ¡ *
__buf
, 
size_t
 
__n
,

399 
__off_t
 
__off£t
è
__wur


400 
	`__©Œ_acûss
 ((
__»ad_Úly__
, 2, 3));

403 #ifdeà
__REDIRECT


404 
ssize_t
 
	`__REDIRECT
 (
´—d
, (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

405 
__off64_t
 
__off£t
),

406 
´—d64
è
__wur


407 
	`__fÜtif›d_©Œ_acûss
 (
__wr™e_Úly__
, 2, 3);

408 
ssize_t
 
	`__REDIRECT
 (
pwr™e
, (
__fd
, cÚ¡ *
__buf
,

409 
size_t
 
__nby‹s
, 
__off64_t
 
__off£t
),

410 
pwr™e64
è
__wur


411 
	`__©Œ_acûss
 ((
__»ad_Úly__
, 2, 3));

413 
	#´—d
 
´—d64


	)

414 
	#pwr™e
 
pwr™e64


	)

418 #ifdeà
__USE_LARGEFILE64


422 
ssize_t
 
	$´—d64
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

423 
__off64_t
 
__off£t
è
__wur


424 
	`__fÜtif›d_©Œ_acûss
 (
__wr™e_Úly__
, 2, 3);

427 
ssize_t
 
	$pwr™e64
 (
__fd
, cÚ¡ *
__buf
, 
size_t
 
__n
,

428 
__off64_t
 
__off£t
è
__wur


429 
	`__©Œ_acûss
 ((
__»ad_Úly__
, 2, 3));

437 
	$pe
 (
__pedes
[2]è
__THROW
 
__wur
;

439 #ifdeà
__USE_GNU


442 
	$pe2
 (
__pedes
[2], 
__æags
è
__THROW
 
__wur
;

452 
	$®¬m
 (
__£cÚds
è
__THROW
;

464 
	`¦“p
 (
__£cÚds
);

466 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

467 || 
defšed
 
__USE_MISC


472 
__u£cÚds_t
 
	$u®¬m
 (
__u£cÚds_t
 
__v®ue
, __u£cÚds_ˆ
__š‹rv®
)

473 
__THROW
;

480 
	`u¦“p
 (
__u£cÚds_t
 
__u£cÚds
);

489 
	`·u£
 ();

493 
	$chown
 (cÚ¡ *
__fe
, 
__uid_t
 
__owÃr
, 
__gid_t
 
__group
)

494 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

496 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


498 
	$fchown
 (
__fd
, 
__uid_t
 
__owÃr
, 
__gid_t
 
__group
è
__THROW
 
__wur
;

503 
	$lchown
 (cÚ¡ *
__fe
, 
__uid_t
 
__owÃr
, 
__gid_t
 
__group
)

504 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

508 #ifdeà
__USE_ATFILE


511 
	$fchowÇt
 (
__fd
, cÚ¡ *
__fe
, 
__uid_t
 
__owÃr
,

512 
__gid_t
 
__group
, 
__æag
)

513 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

517 
	$chdœ
 (cÚ¡ *
__·th
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

519 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


521 
	$fchdœ
 (
__fd
è
__THROW
 
__wur
;

531 *
	$g‘cwd
 (*
__buf
, 
size_t
 
__size
è
__THROW
 
__wur
;

533 #ifdef 
__USE_GNU


537 *
	$g‘_cu¼’t_dœ_Çme
 (è
__THROW
;

540 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

541 || 
defšed
 
__USE_MISC


545 *
	$g‘wd
 (*
__buf
)

546 
__THROW
 
	`__nÚnuÎ
 ((1)è
__©Œibu‹_d•»ÿ‹d__
 
__wur


547 
	`__©Œ_acûss
 ((
__wr™e_Úly__
, 1));

552 
	$dup
 (
__fd
è
__THROW
 
__wur
;

555 
	$dup2
 (
__fd
, 
__fd2
è
__THROW
;

557 #ifdeà
__USE_GNU


560 
	$dup3
 (
__fd
, 
__fd2
, 
__æags
è
__THROW
;

564 **
__’vœÚ
;

565 #ifdeà
__USE_GNU


566 **
’vœÚ
;

572 
	$execve
 (cÚ¡ *
__·th
, *cÚ¡ 
__¬gv
[],

573 *cÚ¡ 
__’vp
[]è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

575 #ifdeà
__USE_XOPEN2K8


578 
	$ãxecve
 (
__fd
, *cÚ¡ 
__¬gv
[], *cÚ¡ 
__’vp
[])

579 
__THROW
 
	`__nÚnuÎ
 ((2));

584 
	$execv
 (cÚ¡ *
__·th
, *cÚ¡ 
__¬gv
[])

585 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

589 
	$exeşe
 (cÚ¡ *
__·th
, cÚ¡ *
__¬g
, ...)

590 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

594 
	$exeş
 (cÚ¡ *
__·th
, cÚ¡ *
__¬g
, ...)

595 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

599 
	$execvp
 (cÚ¡ *
__fe
, *cÚ¡ 
__¬gv
[])

600 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

605 
	$exeşp
 (cÚ¡ *
__fe
, cÚ¡ *
__¬g
, ...)

606 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

608 #ifdeà
__USE_GNU


611 
	$execv³
 (cÚ¡ *
__fe
, *cÚ¡ 
__¬gv
[],

612 *cÚ¡ 
__’vp
[])

613 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

617 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


619 
	$niû
 (
__šc
è
__THROW
 
__wur
;

624 
	$_ex™
 (
__¡©us
è
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

630 
	~<b™s/cÚâame.h
>

633 
	$·thcÚf
 (cÚ¡ *
__·th
, 
__Çme
)

634 
__THROW
 
	`__nÚnuÎ
 ((1));

637 
	$å©hcÚf
 (
__fd
, 
__Çme
è
__THROW
;

640 
	$syscÚf
 (
__Çme
è
__THROW
;

642 #ifdef 
__USE_POSIX2


644 
size_t
 
	$cÚf¡r
 (
__Çme
, *
__buf
, 
size_t
 
__Ën
è
__THROW


645 
	`__fÜtif›d_©Œ_acûss
 (
__wr™e_Úly__
, 2, 3);

650 
__pid_t
 
	$g‘pid
 (è
__THROW
;

653 
__pid_t
 
	$g‘µid
 (è
__THROW
;

656 
__pid_t
 
	$g‘pg½
 (è
__THROW
;

659 
__pid_t
 
	$__g‘pgid
 (
__pid_t
 
__pid
è
__THROW
;

660 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


661 
__pid_t
 
	$g‘pgid
 (
__pid_t
 
__pid
è
__THROW
;

668 
	$£gid
 (
__pid_t
 
__pid
, __pid_ˆ
__pgid
è
__THROW
;

670 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


682 
	$£g½
 (è
__THROW
;

689 
__pid_t
 
	$£tsid
 (è
__THROW
;

691 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


693 
__pid_t
 
	$g‘sid
 (
__pid_t
 
__pid
è
__THROW
;

697 
__uid_t
 
	$g‘uid
 (è
__THROW
;

700 
__uid_t
 
	$g‘euid
 (è
__THROW
;

703 
__gid_t
 
	$g‘gid
 (è
__THROW
;

706 
__gid_t
 
	$g‘egid
 (è
__THROW
;

711 
	$g‘groups
 (
__size
, 
__gid_t
 
__li¡
[]è
__THROW
 
__wur


712 
	`__fÜtif›d_©Œ_acûss
 (
__wr™e_Úly__
, 2, 1);

713 #ifdef 
__USE_GNU


715 
	$group_memb”
 (
__gid_t
 
__gid
è
__THROW
;

722 
	$£tuid
 (
__uid_t
 
__uid
è
__THROW
 
__wur
;

724 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


727 
	$£Œeuid
 (
__uid_t
 
__ruid
, __uid_ˆ
__euid
è
__THROW
 
__wur
;

730 #ifdeà
__USE_XOPEN2K


732 
	$£‹uid
 (
__uid_t
 
__uid
è
__THROW
 
__wur
;

739 
	$£tgid
 (
__gid_t
 
__gid
è
__THROW
 
__wur
;

741 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


744 
	$£Œegid
 (
__gid_t
 
__rgid
, __gid_ˆ
__egid
è
__THROW
 
__wur
;

747 #ifdeà
__USE_XOPEN2K


749 
	$£‹gid
 (
__gid_t
 
__gid
è
__THROW
 
__wur
;

752 #ifdeà
__USE_GNU


755 
	$g‘»suid
 (
__uid_t
 *
__ruid
, __uid_ˆ*
__euid
, __uid_ˆ*
__suid
)

756 
__THROW
;

760 
	$g‘»sgid
 (
__gid_t
 *
__rgid
, __gid_ˆ*
__egid
, __gid_ˆ*
__sgid
)

761 
__THROW
;

765 
	$£Œesuid
 (
__uid_t
 
__ruid
, __uid_ˆ
__euid
, __uid_ˆ
__suid
)

766 
__THROW
 
__wur
;

770 
	$£Œesgid
 (
__gid_t
 
__rgid
, __gid_ˆ
__egid
, __gid_ˆ
__sgid
)

771 
__THROW
 
__wur
;

778 
__pid_t
 
	$fÜk
 (è
__THROWNL
;

780 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

781 || 
defšed
 
__USE_MISC


786 
__pid_t
 
	$vfÜk
 (è
__THROW
;

789 #ifdeà
__USE_GNU


793 
__pid_t
 
	$_FÜk
 (è
__THROW
;

799 *
	$‰yÇme
 (
__fd
è
__THROW
;

803 
	$‰yÇme_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
)

804 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur


805 
	`__fÜtif›d_©Œ_acûss
 (
__wr™e_Úly__
, 2, 3);

809 
	$i§‰y
 (
__fd
è
__THROW
;

811 #ifdeà
__USE_MISC


814 
	$‰y¦Ù
 (è
__THROW
;

819 
	$lšk
 (cÚ¡ *
__äom
, cÚ¡ *
__to
)

820 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

822 #ifdeà
__USE_ATFILE


825 
	$lšk©
 (
__äomfd
, cÚ¡ *
__äom
, 
__tofd
,

826 cÚ¡ *
__to
, 
__æags
)

827 
__THROW
 
	`__nÚnuÎ
 ((2, 4)è
__wur
;

830 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


832 
	$symlšk
 (cÚ¡ *
__äom
, cÚ¡ *
__to
)

833 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

838 
ssize_t
 
	$»adlšk
 (cÚ¡ *
__»¡riù
 
__·th
,

839 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

840 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur


841 
	`__fÜtif›d_©Œ_acûss
 (
__wr™e_Úly__
, 2, 3);

845 #ifdeà
__USE_ATFILE


847 
	$symlšk©
 (cÚ¡ *
__äom
, 
__tofd
,

848 cÚ¡ *
__to
è
__THROW
 
	`__nÚnuÎ
 ((1, 3)è
__wur
;

851 
ssize_t
 
	$»adlšk©
 (
__fd
, cÚ¡ *
__»¡riù
 
__·th
,

852 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

853 
__THROW
 
	`__nÚnuÎ
 ((2, 3)è
__wur


854 
	`__fÜtif›d_©Œ_acûss
 (
__wr™e_Úly__
, 3, 4);

858 
	$uÆšk
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1));

860 #ifdeà
__USE_ATFILE


862 
	$uÆšk©
 (
__fd
, cÚ¡ *
__Çme
, 
__æag
)

863 
__THROW
 
	`__nÚnuÎ
 ((2));

867 
	$rmdœ
 (cÚ¡ *
__·th
è
__THROW
 
	`__nÚnuÎ
 ((1));

871 
__pid_t
 
	$tcg‘pg½
 (
__fd
è
__THROW
;

874 
	$tc£g½
 (
__fd
, 
__pid_t
 
__pg½_id
è
__THROW
;

881 *
	`g‘logš
 ();

882 #ifdeà
__USE_POSIX199506


889 
	$g‘logš_r
 (*
__Çme
, 
size_t
 
__Çme_Ën
è
	`__nÚnuÎ
 ((1))

890 
	`__fÜtif›d_©Œ_acûss
 (
__wr™e_Úly__
, 1, 2);

893 #ifdef 
__USE_MISC


895 
	$£ogš
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1));

899 #ifdef 
__USE_POSIX2


903 
	~<b™s/g‘İt_posix.h
>

907 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


911 
	$g‘ho¡Çme
 (*
__Çme
, 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((1))

912 
	`__fÜtif›d_©Œ_acûss
 (
__wr™e_Úly__
, 1, 2);

916 #ià
defšed
 
__USE_MISC


919 
	$£tho¡Çme
 (cÚ¡ *
__Çme
, 
size_t
 
__Ën
)

920 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
 
	`__©Œ_acûss
 ((
__»ad_Úly__
, 1, 2));

924 
	$£tho¡id
 (
__id
è
__THROW
 
__wur
;

930 
	$g‘domašÇme
 (*
__Çme
, 
size_t
 
__Ën
)

931 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur


932 
	`__fÜtif›d_©Œ_acûss
 (
__wr™e_Úly__
, 1, 2);

933 
	$£tdomašÇme
 (cÚ¡ *
__Çme
, 
size_t
 
__Ën
)

934 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
 
	`__©Œ_acûss
 ((
__»ad_Úly__
, 1, 2));

939 
	$vhªgup
 (è
__THROW
;

942 
	$»voke
 (cÚ¡ *
__fe
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

950 
	$´of
 (*
__§m¶e_bufãr
, 
size_t
 
__size
,

951 
size_t
 
__off£t
, 
__sÿË
)

952 
__THROW
 
	`__nÚnuÎ
 ((1));

958 
	$acù
 (cÚ¡ *
__Çme
è
__THROW
;

962 *
	$g‘u£rsh–l
 (è
__THROW
;

963 
	$’du£rsh–l
 (è
__THROW
;

964 
	$£tu£rsh–l
 (è
__THROW
;

970 
	$d«mÚ
 (
__nochdœ
, 
__noşo£
è
__THROW
 
__wur
;

974 #ià
defšed
 
__USE_MISC
 || (defšed 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
)

977 
	$chroÙ
 (cÚ¡ *
__·th
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

981 *
	$g‘·ss
 (cÚ¡ *
__´om±
è
	`__nÚnuÎ
 ((1));

989 
	`fsync
 (
__fd
);

992 #ifdeà
__USE_GNU


995 
	$syncfs
 (
__fd
è
__THROW
;

999 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


1002 
	`g‘ho¡id
 ();

1005 
	$sync
 (è
__THROW
;

1008 #ià
defšed
 
__USE_MISC
 || !defšed 
__USE_XOPEN2K


1011 
	$g‘·gesize
 (è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

1016 
	$g‘dbËsize
 (è
__THROW
;

1022 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


1025 #iâdeà
__USE_FILE_OFFSET64


1026 
	$Œunÿ‹
 (cÚ¡ *
__fe
, 
__off_t
 
__Ëngth
)

1027 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

1029 #ifdeà
__REDIRECT_NTH


1030 
	`__REDIRECT_NTH
 (
Œunÿ‹
,

1031 (cÚ¡ *
__fe
, 
__off64_t
 
__Ëngth
),

1032 
Œunÿ‹64
è
	`__nÚnuÎ
 ((1)è
__wur
;

1034 
	#Œunÿ‹
 
Œunÿ‹64


	)

1037 #ifdeà
__USE_LARGEFILE64


1038 
	$Œunÿ‹64
 (cÚ¡ *
__fe
, 
__off64_t
 
__Ëngth
)

1039 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

1044 #ià
defšed
 
__USE_POSIX199309
 \

1045 || 
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


1048 #iâdeà
__USE_FILE_OFFSET64


1049 
	$árunÿ‹
 (
__fd
, 
__off_t
 
__Ëngth
è
__THROW
 
__wur
;

1051 #ifdeà
__REDIRECT_NTH


1052 
	`__REDIRECT_NTH
 (
árunÿ‹
, (
__fd
, 
__off64_t
 
__Ëngth
),

1053 
árunÿ‹64
è
__wur
;

1055 
	#árunÿ‹
 
árunÿ‹64


	)

1058 #ifdeà
__USE_LARGEFILE64


1059 
	$árunÿ‹64
 (
__fd
, 
__off64_t
 
__Ëngth
è
__THROW
 
__wur
;

1065 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K
) \

1066 || 
defšed
 
__USE_MISC


1070 
	$brk
 (*
__addr
è
__THROW
 
__wur
;

1076 *
	$sbrk
 (
šŒ_t
 
__d–
è
__THROW
;

1080 #ifdeà
__USE_MISC


1091 
	$sysÿÎ
 (
__sy¢o
, ...è
__THROW
;

1096 #ià(
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
è&& !defšed 
F_LOCK


1108 
	#F_ULOCK
 0

	)

1109 
	#F_LOCK
 1

	)

1110 
	#F_TLOCK
 2

	)

1111 
	#F_TEST
 3

	)

1113 #iâdeà
__USE_FILE_OFFSET64


1114 
	$lockf
 (
__fd
, 
__cmd
, 
__off_t
 
__Ën
è
__wur
;

1116 #ifdeà
__REDIRECT


1117 
	`__REDIRECT
 (
lockf
, (
__fd
, 
__cmd
, 
__off64_t
 
__Ën
),

1118 
lockf64
è
__wur
;

1120 
	#lockf
 
lockf64


	)

1123 #ifdeà
__USE_LARGEFILE64


1124 
	$lockf64
 (
__fd
, 
__cmd
, 
__off64_t
 
__Ën
è
__wur
;

1129 #ifdeà
__USE_GNU


1134 
	#TEMP_FAILURE_RETRY
(
ex´essiÚ
) \

1135 (
__ex‹nsiÚ__
 \

1136 ({ 
__»suÉ
; \

1137 dØ
__»suÉ
 = (è(
ex´essiÚ
); \

1138 
__»suÉ
 =ğ-1L && 
”ºo
 =ğ
EINTR
); \

1139 
__»suÉ
; 
	}
}))

	)

1142 
ssize_t
 
cİy_fe_¿nge
 (
__šfd
, 
__off64_t
 *
__pšoff
,

1143 
__outfd
, 
__off64_t
 *
__poutoff
,

1144 
size_t
 
__Ëngth
, 
__æags
);

1147 #ià
defšed
 
__USE_POSIX199309
 || defšed 
__USE_UNIX98


1150 
fd©async
 (
__fdes
);

1153 #ifdeà
__USE_MISC


1159 *
	$üy±
 (cÚ¡ *
__key
, cÚ¡ *
__§É
)

1160 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1163 #ifdef 
__USE_XOPEN


1168 
	$swab
 (cÚ¡ *
__»¡riù
 
__äom
, *__»¡riù 
__to
,

1169 
ssize_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1, 2))

1170 
	`__©Œ_acûss
 ((
__»ad_Úly__
, 1, 3))

1171 
	`__©Œ_acûss
 ((
__wr™e_Úly__
, 2, 3));

1178 #ià
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K


1180 *
	$ù”mid
 (*
__s
è
__THROW
;

1183 *
	`cu£rid
 (*
__s
);

1189 #ià
defšed
 
__USE_UNIX98
 && !defšed 
__USE_XOPEN2K


1190 
	$±h»ad_©fÜk
 ((*
__´•¬e
) (),

1191 (*
__·»Á
) (),

1192 (*
__chd
è()è
__THROW
;

1195 #ifdeà
__USE_MISC


1198 
	$g‘’Œİy
 (*
__bufãr
, 
size_t
 
__Ëngth
è
__wur


1199 
	`__©Œ_acûss
 ((
__wr™e_Úly__
, 1, 2));

1202 #ifdeà
__USE_GNU


1208 
	$şo£_¿nge
 (
__fd
, 
__max_fd
,

1209 
__æags
è
__THROW
;

1213 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


1214 
	~<b™s/uni¡d.h
>

1218 
	~<b™s/uni¡d_ext.h
>

1220 
__END_DECLS


	@/usr/include/wchar.h

23 #iâdeà
_WCHAR_H


24 
	#_WCHAR_H
 1

	)

26 
	#__GLIBC_INTERNAL_STARTING_HEADER_IMPLEMENTATION


	)

27 
	~<b™s/libc-h—d”-¡¬t.h
>

30 
	~<b™s/æßŠ.h
>

32 
	#__Ãed_size_t


	)

33 
	#__Ãed_wch¬_t


	)

34 
	#__Ãed_NULL


	)

35 
	~<¡ddef.h
>

37 
	#__Ãed___va_li¡


	)

38 
	~<¡d¬g.h
>

40 
	~<b™s/wch¬.h
>

41 
	~<b™s/ty³s/wšt_t.h
>

42 
	~<b™s/ty³s/mb¡©e_t.h
>

43 
	~<b™s/ty³s/__FILE.h
>

45 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


46 
	~<b™s/ty³s/FILE.h
>

48 #ifdeà
__USE_XOPEN2K8


49 
	~<b™s/ty³s/loÿË_t.h
>

53 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (4, 4)

54 
	#__CORRECT_ISO_CPP_WCHAR_H_PROTO


	)

57 #iâdeà
WCHAR_MIN


59 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

60 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

63 #iâdeà
WEOF


64 
	#WEOF
 (0xffffffffu)

	)

74 #ià(
defšed
 
__USE_XOPEN
 && !defšed 
__USE_GNU
 \

75 && !(
defšed
 
	g__USE_XOPEN2K
 && !defšed 
	g__USE_XOPEN2KXSI
))

76 
	~<b™s/wùy³-wch¬.h
>

79 
__BEGIN_DECLS


83 
	gtm
;

87 
wch¬_t
 *
	$wcsıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

88 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
)

89 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

92 
wch¬_t
 *
	$wc¢ıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

93 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

94 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

97 
wch¬_t
 *
	$wcsÿt
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

98 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
)

99 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

101 
wch¬_t
 *
	$wc¢ÿt
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

102 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

103 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

106 
	$wcscmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
)

107 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

109 
	$wc¢cmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
, 
size_t
 
__n
)

110 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

112 #ifdeà
__USE_XOPEN2K8


114 
	$wcsÿ£cmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
è
__THROW
;

117 
	$wc¢ÿ£cmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

118 
size_t
 
__n
è
__THROW
;

122 
	$wcsÿ£cmp_l
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

123 
loÿË_t
 
__loc
è
__THROW
;

125 
	$wc¢ÿ£cmp_l
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

126 
size_t
 
__n
, 
loÿË_t
 
__loc
è
__THROW
;

131 
	$wcscŞl
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
è
__THROW
;

135 
size_t
 
	$wcsxäm
 (
wch¬_t
 *
__»¡riù
 
__s1
,

136 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
è
__THROW
;

138 #ifdeà
__USE_XOPEN2K8


144 
	$wcscŞl_l
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

145 
loÿË_t
 
__loc
è
__THROW
;

150 
size_t
 
	$wcsxäm_l
 (
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

151 
size_t
 
__n
, 
loÿË_t
 
__loc
è
__THROW
;

154 
wch¬_t
 *
	$wcsdup
 (cÚ¡ 
wch¬_t
 *
__s
è
__THROW


155 
__©Œibu‹_m®loc__
 
__©Œ_d—Îoc_ä“
;

159 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


160 "C++" 
wch¬_t
 *
	$wcschr
 (
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

161 
__THROW
 
	`__asm
 ("wcschr"è
__©Œibu‹_pu»__
;

162 "C++" cÚ¡ 
wch¬_t
 *
	$wcschr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

163 
__THROW
 
	`__asm
 ("wcschr"è
__©Œibu‹_pu»__
;

165 
wch¬_t
 *
	$wcschr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

166 
__THROW
 
__©Œibu‹_pu»__
;

169 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


170 "C++" 
wch¬_t
 *
	$wc¤chr
 (
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

171 
__THROW
 
	`__asm
 ("wc¤chr"è
__©Œibu‹_pu»__
;

172 "C++" cÚ¡ 
wch¬_t
 *
	$wc¤chr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

173 
__THROW
 
	`__asm
 ("wc¤chr"è
__©Œibu‹_pu»__
;

175 
wch¬_t
 *
	$wc¤chr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

176 
__THROW
 
__©Œibu‹_pu»__
;

179 #ifdeà
__USE_GNU


182 
wch¬_t
 *
	$wcschºul
 (cÚ¡ 
wch¬_t
 *
__s
, wch¬_ˆ
__wc
)

183 
__THROW
 
__©Œibu‹_pu»__
;

188 
size_t
 
	$wcsc¥n
 (cÚ¡ 
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__»jeù
)

189 
__THROW
 
__©Œibu‹_pu»__
;

192 
size_t
 
	$wcs¥n
 (cÚ¡ 
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__acû±
)

193 
__THROW
 
__©Œibu‹_pu»__
;

195 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


196 "C++" 
wch¬_t
 *
	$wc¥brk
 (
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__acû±
)

197 
__THROW
 
	`__asm
 ("wc¥brk"è
__©Œibu‹_pu»__
;

198 "C++" cÚ¡ 
wch¬_t
 *
	$wc¥brk
 (cÚ¡ 
wch¬_t
 *
__wcs
,

199 cÚ¡ 
wch¬_t
 *
__acû±
)

200 
__THROW
 
	`__asm
 ("wc¥brk"è
__©Œibu‹_pu»__
;

202 
wch¬_t
 *
	$wc¥brk
 (cÚ¡ 
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__acû±
)

203 
__THROW
 
__©Œibu‹_pu»__
;

206 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


207 "C++" 
wch¬_t
 *
	$wcs¡r
 (
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

208 
__THROW
 
	`__asm
 ("wcs¡r"è
__©Œibu‹_pu»__
;

209 "C++" cÚ¡ 
wch¬_t
 *
	$wcs¡r
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
,

210 cÚ¡ 
wch¬_t
 *
__ÃedË
)

211 
__THROW
 
	`__asm
 ("wcs¡r"è
__©Œibu‹_pu»__
;

213 
wch¬_t
 *
	$wcs¡r
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

214 
__THROW
 
__©Œibu‹_pu»__
;

218 
wch¬_t
 *
	$wc¡ok
 (
wch¬_t
 *
__»¡riù
 
__s
,

219 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__d–im
,

220 
wch¬_t
 **
__»¡riù
 
__±r
è
__THROW
;

223 
size_t
 
	$wc¦’
 (cÚ¡ 
wch¬_t
 *
__s
è
__THROW
 
__©Œibu‹_pu»__
;

225 #ifdeà
__USE_XOPEN


227 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


228 "C++" 
wch¬_t
 *
	$wcswcs
 (
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

229 
__THROW
 
	`__asm
 ("wcswcs"è
__©Œibu‹_pu»__
;

230 "C++" cÚ¡ 
wch¬_t
 *
	$wcswcs
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
,

231 cÚ¡ 
wch¬_t
 *
__ÃedË
)

232 
__THROW
 
	`__asm
 ("wcswcs"è
__©Œibu‹_pu»__
;

234 
wch¬_t
 *
	$wcswcs
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

235 
__THROW
 
__©Œibu‹_pu»__
;

239 #ifdeà
__USE_XOPEN2K8


241 
size_t
 
	$wc¢Ën
 (cÚ¡ 
wch¬_t
 *
__s
, 
size_t
 
__maxËn
)

242 
__THROW
 
__©Œibu‹_pu»__
;

247 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


248 "C++" 
wch¬_t
 *
	$wmemchr
 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
)

249 
__THROW
 
	`__asm
 ("wmemchr"è
__©Œibu‹_pu»__
;

250 "C++" cÚ¡ 
wch¬_t
 *
	$wmemchr
 (cÚ¡ 
wch¬_t
 *
__s
, wch¬_ˆ
__c
,

251 
size_t
 
__n
)

252 
__THROW
 
	`__asm
 ("wmemchr"è
__©Œibu‹_pu»__
;

254 
wch¬_t
 *
	$wmemchr
 (cÚ¡ 
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
)

255 
__THROW
 
__©Œibu‹_pu»__
;

259 
	$wmemcmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
, 
size_t
 
__n
)

260 
__THROW
 
__©Œibu‹_pu»__
;

263 
wch¬_t
 *
	$wmemıy
 (
wch¬_t
 *
__»¡riù
 
__s1
,

264 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
è
__THROW
;

268 
wch¬_t
 *
	$wmemmove
 (
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
, 
size_t
 
__n
)

269 
__THROW
;

272 
wch¬_t
 *
	$wmem£t
 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
è
__THROW
;

274 #ifdeà
__USE_GNU


277 
wch¬_t
 *
	$wmempıy
 (
wch¬_t
 *
__»¡riù
 
__s1
,

278 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
)

279 
__THROW
;

285 
wšt_t
 
	$btowc
 (
__c
è
__THROW
;

289 
	$wùob
 (
wšt_t
 
__c
è
__THROW
;

293 
	$mbsš™
 (cÚ¡ 
mb¡©e_t
 *
__ps
è
__THROW
 
__©Œibu‹_pu»__
;

297 
size_t
 
	$mb¹owc
 (
wch¬_t
 *
__»¡riù
 
__pwc
,

298 cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

299 
mb¡©e_t
 *
__»¡riù
 
__p
è
__THROW
;

302 
size_t
 
	$wütomb
 (*
__»¡riù
 
__s
, 
wch¬_t
 
__wc
,

303 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

306 
size_t
 
	$__mb¾’
 (cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

307 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

308 
size_t
 
	$mb¾’
 (cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

309 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

311 #ifdeà
__USE_EXTERN_INLINES


317 
wšt_t
 
	$__btowc_®Ÿs
 (
__c
è
	`__asm
 ("btowc");

318 
__ex‹º_šlše
 
wšt_t


319 
	`__NTH
 (
	$btowc
 (
__c
))

320 {  (
	`__butš_cÚ¡ªt_p
 (
__c
) && __c >= '\0' && __c <= '\x7f'

321 ? (
wšt_t
è
__c
 : 
	`__btowc_®Ÿs
 (__c)); 
	}
}

323 
	$__wùob_®Ÿs
 (
wšt_t
 
__c
è
	`__asm
 ("wctob");

324 
__ex‹º_šlše
 

325 
	`__NTH
 (
	$wùob
 (
wšt_t
 
__wc
))

326 {  (
	`__butš_cÚ¡ªt_p
 (
__wc
è&& __wø>ğ
L
'\0' && __wc <= L'\x7f'

327 ? (è
__wc
 : 
	`__wùob_®Ÿs
 (__wc)); 
	}
}

329 
__ex‹º_šlše
 
size_t


330 
__NTH
 (
	$mb¾’
 (cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

331 
mb¡©e_t
 *
__»¡riù
 
__ps
))

332 {  (
__ps
 !ğ
NULL


333 ? 
	`mb¹owc
 (
NULL
, 
__s
, 
__n
, 
__ps
è: 
	`__mb¾’
 (__s, __n, NULL)); 
	}
}

338 
size_t
 
	$mb¤towcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

339 cÚ¡ **
__»¡riù
 
__¤c
, 
size_t
 
__Ën
,

340 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

344 
size_t
 
	$wc¤tombs
 (*
__»¡riù
 
__d¡
,

345 cÚ¡ 
wch¬_t
 **
__»¡riù
 
__¤c
, 
size_t
 
__Ën
,

346 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

349 #ifdef 
__USE_XOPEN2K8


352 
size_t
 
	$mb¢¹owcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

353 cÚ¡ **
__»¡riù
 
__¤c
, 
size_t
 
__nmc
,

354 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

358 
size_t
 
	$wc¢¹ombs
 (*
__»¡riù
 
__d¡
,

359 cÚ¡ 
wch¬_t
 **
__»¡riù
 
__¤c
,

360 
size_t
 
__nwc
, size_ˆ
__Ën
,

361 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

366 #ifdeà
__USE_XOPEN


368 
	$wcwidth
 (
wch¬_t
 
__c
è
__THROW
;

372 
	$wcswidth
 (cÚ¡ 
wch¬_t
 *
__s
, 
size_t
 
__n
è
__THROW
;

378 
	$wc¡od
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

379 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

381 #ifdeà
__USE_ISOC99


383 
	$wc¡of
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

384 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

385 
	$wc¡Şd
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

386 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

391 #ià
__HAVE_FLOAT16
 && 
defšed
 
__USE_GNU


392 
_Flßt16
 
	$wc¡of16
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

393 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

396 #ià
__HAVE_FLOAT32
 && 
defšed
 
__USE_GNU


397 
_Flßt32
 
	$wc¡of32
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

398 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

401 #ià
__HAVE_FLOAT64
 && 
defšed
 
__USE_GNU


402 
_Flßt64
 
	$wc¡of64
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

403 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

406 #ià
__HAVE_FLOAT128
 && 
defšed
 
__USE_GNU


407 
_Flßt128
 
	$wc¡of128
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

408 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

411 #ià
__HAVE_FLOAT32X
 && 
defšed
 
__USE_GNU


412 
_Flßt32x
 
	$wc¡of32x
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

413 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

416 #ià
__HAVE_FLOAT64X
 && 
defšed
 
__USE_GNU


417 
_Flßt64x
 
	$wc¡of64x
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

418 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

421 #ià
__HAVE_FLOAT128X
 && 
defšed
 
__USE_GNU


422 
_Flßt128x
 
	$wc¡of128x
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

423 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

429 
	$wc¡Ş
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

430 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
è
__THROW
;

434 
	$wc¡oul
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

435 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

436 
__THROW
;

438 #ifdeà
__USE_ISOC99


441 
__ex‹nsiÚ__


442 
	$wc¡Şl
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

443 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

444 
__THROW
;

448 
__ex‹nsiÚ__


449 
	$wc¡ouÎ
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

450 
wch¬_t
 **
__»¡riù
 
__’d±r
,

451 
__ba£
è
__THROW
;

454 #ifdeà
__USE_GNU


457 
__ex‹nsiÚ__


458 
	$wc¡oq
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

459 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

460 
__THROW
;

464 
__ex‹nsiÚ__


465 
	$wc¡ouq
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

466 
wch¬_t
 **
__»¡riù
 
__’d±r
,

467 
__ba£
è
__THROW
;

470 #ifdeà
__USE_GNU


474 
	$wc¡Ş_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

475 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
,

476 
loÿË_t
 
__loc
è
__THROW
;

478 
	$wc¡oul_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

479 
wch¬_t
 **
__»¡riù
 
__’d±r
,

480 
__ba£
, 
loÿË_t
 
__loc
è
__THROW
;

482 
__ex‹nsiÚ__


483 
	$wc¡Şl_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

484 
wch¬_t
 **
__»¡riù
 
__’d±r
,

485 
__ba£
, 
loÿË_t
 
__loc
è
__THROW
;

487 
__ex‹nsiÚ__


488 
	$wc¡ouÎ_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

489 
wch¬_t
 **
__»¡riù
 
__’d±r
,

490 
__ba£
, 
loÿË_t
 
__loc
)

491 
__THROW
;

493 
	$wc¡od_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

494 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
loÿË_t
 
__loc
)

495 
__THROW
;

497 
	$wc¡of_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

498 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
loÿË_t
 
__loc
)

499 
__THROW
;

501 
	$wc¡Şd_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

502 
wch¬_t
 **
__»¡riù
 
__’d±r
,

503 
loÿË_t
 
__loc
è
__THROW
;

505 #ià
__HAVE_FLOAT16


506 
_Flßt16
 
	$wc¡of16_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

507 
wch¬_t
 **
__»¡riù
 
__’d±r
,

508 
loÿË_t
 
__loc
è
__THROW
;

511 #ià
__HAVE_FLOAT32


512 
_Flßt32
 
	$wc¡of32_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

513 
wch¬_t
 **
__»¡riù
 
__’d±r
,

514 
loÿË_t
 
__loc
è
__THROW
;

517 #ià
__HAVE_FLOAT64


518 
_Flßt64
 
	$wc¡of64_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

519 
wch¬_t
 **
__»¡riù
 
__’d±r
,

520 
loÿË_t
 
__loc
è
__THROW
;

523 #ià
__HAVE_FLOAT128


524 
_Flßt128
 
	$wc¡of128_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

525 
wch¬_t
 **
__»¡riù
 
__’d±r
,

526 
loÿË_t
 
__loc
è
__THROW
;

529 #ià
__HAVE_FLOAT32X


530 
_Flßt32x
 
	$wc¡of32x_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

531 
wch¬_t
 **
__»¡riù
 
__’d±r
,

532 
loÿË_t
 
__loc
è
__THROW
;

535 #ià
__HAVE_FLOAT64X


536 
_Flßt64x
 
	$wc¡of64x_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

537 
wch¬_t
 **
__»¡riù
 
__’d±r
,

538 
loÿË_t
 
__loc
è
__THROW
;

541 #ià
__HAVE_FLOAT128X


542 
_Flßt128x
 
	$wc¡of128x_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

543 
wch¬_t
 **
__»¡riù
 
__’d±r
,

544 
loÿË_t
 
__loc
è
__THROW
;

549 #ifdeà
__USE_XOPEN2K8


552 
wch¬_t
 *
	$wııy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

553 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
è
__THROW
;

557 
wch¬_t
 *
	$wınıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

558 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

559 
__THROW
;

565 #ià
defšed
 
__USE_XOPEN2K8
 || 
	`__GLIBC_USE
 (
LIB_EXT2
)

566 #iâdeà
__©Œ_d—Îoc_fşo£


567 #ià
defšed
 
__has_butš


568 #ià
	`__has_butš
 (
__butš_fşo£
)

571 
	#__©Œ_d—Îoc_fşo£
 
	`__©Œ_d—Îoc
 (
__butš_fşo£
, 1)

	)

575 #iâdeà
__©Œ_d—Îoc_fşo£


576 
	#__©Œ_d—Îoc_fşo£


	)

581 
__FILE
 *
	$İ’_wmem¡»am
 (
wch¬_t
 **
__buæoc
, 
size_t
 *
__siz–oc
è
__THROW


582 
__©Œibu‹_m®loc__
 
__©Œ_d—Îoc_fşo£
;

585 #ià
defšed
 
__USE_ISOC95
 || defšed 
__USE_UNIX98


588 
	$fwide
 (
__FILE
 *
__å
, 
__mode
è
__THROW
;

595 
	`fw´štf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

596 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

602 
	`w´štf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

605 
	$sw´štf
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

606 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

607 
__THROW
 ;

613 
	`vfw´štf
 (
__FILE
 *
__»¡riù
 
__s
,

614 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

615 
__gnuc_va_li¡
 
__¬g
)

621 
	`vw´štf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

622 
__gnuc_va_li¡
 
__¬g
)

626 
	$vsw´štf
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

627 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

628 
__gnuc_va_li¡
 
__¬g
)

629 
__THROW
 ;

636 
	`fwsÿnf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

637 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

643 
	`wsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

646 
	$swsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

647 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

648 
__THROW
 ;

654 #ià!
	`__GLIBC_USE
 (
DEPRECATED_SCANF
è&& !
defšed
 
__LDBL_COMPAT
 \

655 && 
__LDOUBLE_REDIRECTS_TO_FLOAT128_ABI
 == 0

656 #ifdeà
__REDIRECT


657 
	`__REDIRECT
 (
fwsÿnf
, (
__FILE
 *
__»¡riù
 
__¡»am
,

658 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...),

659 
__isoc99_fwsÿnf
)

661 
	`__REDIRECT
 (
wsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...),

662 
__isoc99_wsÿnf
)

664 
	`__REDIRECT_NTH
 (
swsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

665 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

666 ...), 
__isoc99_swsÿnf
)

669 
	`__isoc99_fwsÿnf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

670 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...);

671 
	`__isoc99_wsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...);

672 
	$__isoc99_swsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

673 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

674 
__THROW
;

675 
	#fwsÿnf
 
__isoc99_fwsÿnf


	)

676 
	#wsÿnf
 
__isoc99_wsÿnf


	)

677 
	#swsÿnf
 
__isoc99_swsÿnf


	)

683 #ifdeà
__USE_ISOC99


688 
	`vfwsÿnf
 (
__FILE
 *
__»¡riù
 
__s
,

689 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

690 
__gnuc_va_li¡
 
__¬g
)

696 
	`vwsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

697 
__gnuc_va_li¡
 
__¬g
)

700 
	$vswsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

701 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

702 
__gnuc_va_li¡
 
__¬g
)

703 
__THROW
 ;

706 #ià!
	`__GLIBC_USE
 (
DEPRECATED_SCANF
) \

707 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

708 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
) \

709 && 
__LDOUBLE_REDIRECTS_TO_FLOAT128_ABI
 == 0

710 #ifdeà
__REDIRECT


711 
	`__REDIRECT
 (
vfwsÿnf
, (
__FILE
 *
__»¡riù
 
__s
,

712 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

713 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vfwsÿnf
)

715 
	`__REDIRECT
 (
vwsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

716 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vwsÿnf
)

718 
	`__REDIRECT_NTH
 (
vswsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

719 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

720 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vswsÿnf
)

723 
	`__isoc99_vfwsÿnf
 (
__FILE
 *
__»¡riù
 
__s
,

724 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

725 
__gnuc_va_li¡
 
__¬g
);

726 
	`__isoc99_vwsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

727 
__gnuc_va_li¡
 
__¬g
);

728 
	$__isoc99_vswsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

729 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

730 
__gnuc_va_li¡
 
__¬g
è
__THROW
;

731 
	#vfwsÿnf
 
__isoc99_vfwsÿnf


	)

732 
	#vwsÿnf
 
__isoc99_vwsÿnf


	)

733 
	#vswsÿnf
 
__isoc99_vswsÿnf


	)

744 
wšt_t
 
	`fg‘wc
 (
__FILE
 *
__¡»am
);

745 
wšt_t
 
	`g‘wc
 (
__FILE
 *
__¡»am
);

751 
wšt_t
 
	`g‘wch¬
 ();

758 
wšt_t
 
	`åutwc
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

759 
wšt_t
 
	`putwc
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

765 
wšt_t
 
	`putwch¬
 (
wch¬_t
 
__wc
);

773 
wch¬_t
 *
	`fg‘ws
 (wch¬_ˆ*
__»¡riù
 
__ws
, 
__n
,

774 
__FILE
 *
__»¡riù
 
__¡»am
);

780 
	`åutws
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ws
,

781 
__FILE
 *
__»¡riù
 
__¡»am
);

788 
wšt_t
 
	`ung‘wc
 (wšt_ˆ
__wc
, 
__FILE
 *
__¡»am
);

791 #ifdeà
__USE_GNU


799 
wšt_t
 
	`g‘wc_uÆocked
 (
__FILE
 *
__¡»am
);

800 
wšt_t
 
	`g‘wch¬_uÆocked
 ();

808 
wšt_t
 
	`fg‘wc_uÆocked
 (
__FILE
 *
__¡»am
);

816 
wšt_t
 
	`åutwc_uÆocked
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

825 
wšt_t
 
	`putwc_uÆocked
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

826 
wšt_t
 
	`putwch¬_uÆocked
 (
wch¬_t
 
__wc
);

835 
wch¬_t
 *
	`fg‘ws_uÆocked
 (wch¬_ˆ*
__»¡riù
 
__ws
, 
__n
,

836 
__FILE
 *
__»¡riù
 
__¡»am
);

844 
	`åutws_uÆocked
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ws
,

845 
__FILE
 *
__»¡riù
 
__¡»am
);

852 
size_t
 
	$wcsáime
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

853 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

854 cÚ¡ 
tm
 *
__»¡riù
 
__
è
__THROW
;

856 #ifdeà
__USE_GNU


859 
size_t
 
	$wcsáime_l
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

860 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

861 cÚ¡ 
tm
 *
__»¡riù
 
__
,

862 
loÿË_t
 
__loc
è
__THROW
;

866 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


867 
	~<b™s/wch¬2.h
>

870 
	~<b™s/æßŠ.h
>

871 #ià
defšed
 
__LDBL_COMPAT
 || 
__LDOUBLE_REDIRECTS_TO_FLOAT128_ABI
 == 1

872 
	~<b™s/wch¬-ldbl.h
>

875 
__END_DECLS


	@/usr/include/wctype.h

23 #iâdeà
_WCTYPE_H


24 
	#_WCTYPE_H
 1

	)

26 
	~<ã©u»s.h
>

27 
	~<b™s/ty³s.h
>

28 
	~<b™s/ty³s/wšt_t.h
>

32 #iâdeà
WEOF


33 
	#WEOF
 (0xffffffffu)

	)

38 
	~<b™s/wùy³-wch¬.h
>

44 
__BEGIN_DECLS


48 cÚ¡ 
	t__št32_t
 *
	twù¿ns_t
;

52 
wù¿ns_t
 
	$wù¿ns
 (cÚ¡ *
__´İ”ty
è
__THROW
;

55 
wšt_t
 
	$towù¿ns
 (
wšt_t
 
__wc
, 
wù¿ns_t
 
__desc
è
__THROW
;

57 #ifdeà
__USE_XOPEN2K8


59 
	~<b™s/ty³s/loÿË_t.h
>

63 
	$isw®num_l
 (
wšt_t
 
__wc
, 
loÿË_t
 
__loÿË
è
__THROW
;

69 
	$isw®pha_l
 (
wšt_t
 
__wc
, 
loÿË_t
 
__loÿË
è
__THROW
;

72 
	$iswúŒl_l
 (
wšt_t
 
__wc
, 
loÿË_t
 
__loÿË
è
__THROW
;

76 
	$iswdig™_l
 (
wšt_t
 
__wc
, 
loÿË_t
 
__loÿË
è
__THROW
;

80 
	$iswg¿ph_l
 (
wšt_t
 
__wc
, 
loÿË_t
 
__loÿË
è
__THROW
;

85 
	$iswlow”_l
 (
wšt_t
 
__wc
, 
loÿË_t
 
__loÿË
è
__THROW
;

88 
	$isw´št_l
 (
wšt_t
 
__wc
, 
loÿË_t
 
__loÿË
è
__THROW
;

93 
	$iswpunù_l
 (
wšt_t
 
__wc
, 
loÿË_t
 
__loÿË
è
__THROW
;

98 
	$isw¥aû_l
 (
wšt_t
 
__wc
, 
loÿË_t
 
__loÿË
è
__THROW
;

103 
	$iswuµ”_l
 (
wšt_t
 
__wc
, 
loÿË_t
 
__loÿË
è
__THROW
;

108 
	$iswxdig™_l
 (
wšt_t
 
__wc
, 
loÿË_t
 
__loÿË
è
__THROW
;

113 
	$iswbÏnk_l
 (
wšt_t
 
__wc
, 
loÿË_t
 
__loÿË
è
__THROW
;

117 
wùy³_t
 
	$wùy³_l
 (cÚ¡ *
__´İ”ty
, 
loÿË_t
 
__loÿË
)

118 
__THROW
;

122 
	$iswùy³_l
 (
wšt_t
 
__wc
, 
wùy³_t
 
__desc
, 
loÿË_t
 
__loÿË
)

123 
__THROW
;

130 
wšt_t
 
	$towlow”_l
 (
wšt_t
 
__wc
, 
loÿË_t
 
__loÿË
è
__THROW
;

133 
wšt_t
 
	$towuµ”_l
 (
wšt_t
 
__wc
, 
loÿË_t
 
__loÿË
è
__THROW
;

137 
wù¿ns_t
 
	$wù¿ns_l
 (cÚ¡ *
__´İ”ty
, 
loÿË_t
 
__loÿË
)

138 
__THROW
;

141 
wšt_t
 
	$towù¿ns_l
 (
wšt_t
 
__wc
, 
wù¿ns_t
 
__desc
,

142 
loÿË_t
 
__loÿË
è
__THROW
;

146 
__END_DECLS


	@/usr/include/alloca.h

18 #iâdef 
_ALLOCA_H


19 
	#_ALLOCA_H
 1

	)

21 
	~<ã©u»s.h
>

23 
	#__Ãed_size_t


	)

24 
	~<¡ddef.h
>

26 
	g__BEGIN_DECLS


29 #undeà
®loÿ


32 *
	$®loÿ
 (
size_t
 
__size
è
__THROW
;

34 #ifdef 
__GNUC__


35 
	#®loÿ
(
size
è
	`__butš_®loÿ
 (size)

	)

38 
__END_DECLS


	@/usr/include/features.h

18 #iâdef 
_FEATURES_H


19 
	#_FEATURES_H
 1

	)

126 #undeà
__USE_ISOC11


127 #undeà
__USE_ISOC99


128 #undeà
__USE_ISOC95


129 #undeà
__USE_ISOCXX11


130 #undeà
__USE_POSIX


131 #undeà
__USE_POSIX2


132 #undeà
__USE_POSIX199309


133 #undeà
__USE_POSIX199506


134 #undeà
__USE_XOPEN


135 #undeà
__USE_XOPEN_EXTENDED


136 #undeà
__USE_UNIX98


137 #undeà
__USE_XOPEN2K


138 #undeà
__USE_XOPEN2KXSI


139 #undeà
__USE_XOPEN2K8


140 #undeà
__USE_XOPEN2K8XSI


141 #undeà
__USE_LARGEFILE


142 #undeà
__USE_LARGEFILE64


143 #undeà
__USE_FILE_OFFSET64


144 #undeà
__USE_MISC


145 #undeà
__USE_ATFILE


146 #undeà
__USE_DYNAMIC_STACK_SIZE


147 #undeà
__USE_GNU


148 #undeà
__USE_FORTIFY_LEVEL


149 #undeà
__KERNEL_STRICT_NAMES


150 #undeà
__GLIBC_USE_ISOC2X


151 #undeà
__GLIBC_USE_DEPRECATED_GETS


152 #undeà
__GLIBC_USE_DEPRECATED_SCANF


156 #iâdeà
_LOOSE_KERNEL_NAMES


157 
	#__KERNEL_STRICT_NAMES


	)

167 #ià
defšed
 
__GNUC__
 && defšed 
__GNUC_MINOR__


168 
	#__GNUC_PREREQ
(
maj
, 
mš
) \

169 ((
__GNUC__
 << 16è+ 
__GNUC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

171 
	#__GNUC_PREREQ
(
maj
, 
mš
è0

	)

178 #ià
defšed
 
__şªg_majÜ__
 && defšed 
__şªg_mšÜ__


179 
	#__glibc_şªg_´”eq
(
maj
, 
mš
) \

180 ((
__şªg_majÜ__
 << 16è+ 
__şªg_mšÜ__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

182 
	#__glibc_şªg_´”eq
(
maj
, 
mš
è0

	)

186 
	#__GLIBC_USE
(
F
è
__GLIBC_USE_
 ## 
	)
F

192 #ià(
defšed
 
_BSD_SOURCE
 || defšed 
_SVID_SOURCE
) \

193 && !
defšed
 
	g_DEFAULT_SOURCE


195 #undeà
_DEFAULT_SOURCE


196 
	#_DEFAULT_SOURCE
 1

	)

200 #ifdeà
_GNU_SOURCE


201 #undeà
_ISOC95_SOURCE


202 
	#_ISOC95_SOURCE
 1

	)

203 #undeà
_ISOC99_SOURCE


204 
	#_ISOC99_SOURCE
 1

	)

205 #undeà
_ISOC11_SOURCE


206 
	#_ISOC11_SOURCE
 1

	)

207 #undeà
_ISOC2X_SOURCE


208 
	#_ISOC2X_SOURCE
 1

	)

209 #undeà
_POSIX_SOURCE


210 
	#_POSIX_SOURCE
 1

	)

211 #undeà
_POSIX_C_SOURCE


212 
	#_POSIX_C_SOURCE
 200809L

	)

213 #undeà
_XOPEN_SOURCE


214 
	#_XOPEN_SOURCE
 700

	)

215 #undeà
_XOPEN_SOURCE_EXTENDED


216 
	#_XOPEN_SOURCE_EXTENDED
 1

	)

217 #undeà
_LARGEFILE64_SOURCE


218 
	#_LARGEFILE64_SOURCE
 1

	)

219 #undeà
_DEFAULT_SOURCE


220 
	#_DEFAULT_SOURCE
 1

	)

221 #undeà
_ATFILE_SOURCE


222 
	#_ATFILE_SOURCE
 1

	)

223 #undeà
_DYNAMIC_STACK_SIZE_SOURCE


224 
	#_DYNAMIC_STACK_SIZE_SOURCE
 1

	)

229 #ià(
defšed
 
_DEFAULT_SOURCE
 \

230 || (!
defšed
 
	g__STRICT_ANSI__
 \

231 && !
defšed
 
	g_ISOC99_SOURCE
 && !defšed 
	g_ISOC11_SOURCE
 \

232 && !
defšed
 
	g_ISOC2X_SOURCE
 \

233 && !
defšed
 
	g_POSIX_SOURCE
 && !defšed 
	g_POSIX_C_SOURCE
 \

234 && !
defšed
 
	g_XOPEN_SOURCE
))

235 #undeà
_DEFAULT_SOURCE


236 
	#_DEFAULT_SOURCE
 1

	)

240 #ià(
defšed
 
_ISOC2X_SOURCE
 \

241 || (
defšed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ > 201710L))

242 
	#__GLIBC_USE_ISOC2X
 1

	)

244 
	#__GLIBC_USE_ISOC2X
 0

	)

248 #ià(
defšed
 
_ISOC11_SOURCE
 || defšed 
_ISOC2X_SOURCE
 \

249 || (
defšed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 201112L))

250 
	#__USE_ISOC11
 1

	)

254 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC11_SOURCE
 \

255 || 
defšed
 
_ISOC2X_SOURCE
 \

256 || (
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L))

257 
	#__USE_ISOC99
 1

	)

261 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC11_SOURCE
 \

262 || 
defšed
 
_ISOC2X_SOURCE
 \

263 || (
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199409L))

264 
	#__USE_ISOC95
 1

	)

267 #ifdeà
__ılu¥lus


269 #ià
__ılu¥lus
 >= 201703L

270 
	#__USE_ISOC11
 1

	)

274 #ià
__ılu¥lus
 >ğ201103L || 
defšed
 
__GXX_EXPERIMENTAL_CXX0X__


275 
	#__USE_ISOCXX11
 1

	)

276 
	#__USE_ISOC99
 1

	)

283 #ifdeà
_DEFAULT_SOURCE


284 #ià!
defšed
 
_POSIX_SOURCE
 && !defšed 
_POSIX_C_SOURCE


285 
	#__USE_POSIX_IMPLICITLY
 1

	)

287 #undeà
_POSIX_SOURCE


288 
	#_POSIX_SOURCE
 1

	)

289 #undeà
_POSIX_C_SOURCE


290 
	#_POSIX_C_SOURCE
 200809L

	)

293 #ià((!
defšed
 
__STRICT_ANSI__
 \

294 || (
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) >= 500)) \

295 && !
defšed
 
_POSIX_SOURCE
 && !defšed 
_POSIX_C_SOURCE
)

296 
	#_POSIX_SOURCE
 1

	)

297 #ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 500

298 
	#_POSIX_C_SOURCE
 2

	)

299 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 600

300 
	#_POSIX_C_SOURCE
 199506L

	)

301 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 700

302 
	#_POSIX_C_SOURCE
 200112L

	)

304 
	#_POSIX_C_SOURCE
 200809L

	)

306 
	#__USE_POSIX_IMPLICITLY
 1

	)

315 #ià((!
defšed
 
_POSIX_C_SOURCE
 || (_POSIX_C_SOURCE - 0) < 199506L) \

316 && (
defšed
 
_REENTRANT
 || defšed 
_THREAD_SAFE
))

317 
	#_POSIX_SOURCE
 1

	)

318 #undeà
_POSIX_C_SOURCE


319 
	#_POSIX_C_SOURCE
 199506L

	)

322 #ià(
defšed
 
_POSIX_SOURCE
 \

323 || (
defšed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >= 1) \

324 || 
defšed
 
_XOPEN_SOURCE
)

325 
	#__USE_POSIX
 1

	)

328 #ià
defšed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >ğ2 || defšed 
_XOPEN_SOURCE


329 
	#__USE_POSIX2
 1

	)

332 #ià
defšed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 199309L

333 
	#__USE_POSIX199309
 1

	)

336 #ià
defšed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 199506L

337 
	#__USE_POSIX199506
 1

	)

340 #ià
defšed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 200112L

341 
	#__USE_XOPEN2K
 1

	)

342 #undeà
__USE_ISOC95


343 
	#__USE_ISOC95
 1

	)

344 #undeà
__USE_ISOC99


345 
	#__USE_ISOC99
 1

	)

348 #ià
defšed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 200809L

349 
	#__USE_XOPEN2K8
 1

	)

350 #undeà
_ATFILE_SOURCE


351 
	#_ATFILE_SOURCE
 1

	)

354 #ifdef 
_XOPEN_SOURCE


355 
	#__USE_XOPEN
 1

	)

356 #ià(
_XOPEN_SOURCE
 - 0) >= 500

357 
	#__USE_XOPEN_EXTENDED
 1

	)

358 
	#__USE_UNIX98
 1

	)

359 #undeà
_LARGEFILE_SOURCE


360 
	#_LARGEFILE_SOURCE
 1

	)

361 #ià(
_XOPEN_SOURCE
 - 0) >= 600

362 #ià(
_XOPEN_SOURCE
 - 0) >= 700

363 
	#__USE_XOPEN2K8
 1

	)

364 
	#__USE_XOPEN2K8XSI
 1

	)

366 
	#__USE_XOPEN2K
 1

	)

367 
	#__USE_XOPEN2KXSI
 1

	)

368 #undeà
__USE_ISOC95


369 
	#__USE_ISOC95
 1

	)

370 #undeà
__USE_ISOC99


371 
	#__USE_ISOC99
 1

	)

374 #ifdeà
_XOPEN_SOURCE_EXTENDED


375 
	#__USE_XOPEN_EXTENDED
 1

	)

380 #ifdeà
_LARGEFILE_SOURCE


381 
	#__USE_LARGEFILE
 1

	)

384 #ifdeà
_LARGEFILE64_SOURCE


385 
	#__USE_LARGEFILE64
 1

	)

388 #ià
defšed
 
_FILE_OFFSET_BITS
 && _FILE_OFFSET_BITS == 64

389 
	#__USE_FILE_OFFSET64
 1

	)

392 
	~<ã©u»s-time64.h
>

394 #ià
defšed
 
_DEFAULT_SOURCE


395 
	#__USE_MISC
 1

	)

398 #ifdef 
_ATFILE_SOURCE


399 
	#__USE_ATFILE
 1

	)

402 #ifdef 
_DYNAMIC_STACK_SIZE_SOURCE


403 
	#__USE_DYNAMIC_STACK_SIZE
 1

	)

406 #ifdef 
_GNU_SOURCE


407 
	#__USE_GNU
 1

	)

410 #ià
defšed
 
_FORTIFY_SOURCE
 && _FORTIFY_SOURCE > 0

411 #ià!
defšed
 
__OPTIMIZE__
 || __OPTIMIZE__ <= 0

412 #–ià!
__GNUC_PREREQ
 (4, 1)

413 #–ià
_FORTIFY_SOURCE
 > 2 && (
__glibc_şªg_´”eq
 (9, 0) \

414 || 
	$__GNUC_PREREQ
 (12, 0))

416 #ià
_FORTIFY_SOURCE
 > 3

418 
	#__USE_FORTIFY_LEVEL
 3

	)

419 #–ià
_FORTIFY_SOURCE
 > 1

420 #ià
_FORTIFY_SOURCE
 > 2

422 
	#__USE_FORTIFY_LEVEL
 2

	)

424 
	#__USE_FORTIFY_LEVEL
 1

	)

427 #iâdeà
__USE_FORTIFY_LEVEL


428 
	#__USE_FORTIFY_LEVEL
 0

	)

435 #ià
defšed
 
__ılu¥lus
 ? __ılu¥lu >ğ201402L : defšed 
__USE_ISOC11


436 
	#__GLIBC_USE_DEPRECATED_GETS
 0

	)

438 
	#__GLIBC_USE_DEPRECATED_GETS
 1

	)

453 #ià(
defšed
 
__USE_GNU
 \

454 && (
defšed
 
__ılu¥lus
 \

455 ? (
__ılu¥lus
 < 201103L && !
defšed
 
__GXX_EXPERIMENTAL_CXX0X__
) \

456 : (!
defšed
 
__STDC_VERSION__
 || __STDC_VERSION__ < 199901L)))

457 
	#__GLIBC_USE_DEPRECATED_SCANF
 1

	)

459 
	#__GLIBC_USE_DEPRECATED_SCANF
 0

	)

464 
	~<¡dc-´edef.h
>

472 #undeà
__GNU_LIBRARY__


473 
	#__GNU_LIBRARY__
 6

	)

477 
	#__GLIBC__
 2

	)

478 
	#__GLIBC_MINOR__
 35

	)

480 
	#__GLIBC_PREREQ
(
maj
, 
mš
) \

481 ((
__GLIBC__
 << 16è+ 
__GLIBC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

484 #iâdeà
__ASSEMBLER__


485 #iâdeà
_SYS_CDEFS_H


486 
	~<sys/cdefs.h
>

491 #ià
defšed
 
__USE_FILE_OFFSET64
 && !defšed 
__REDIRECT


492 
	#__USE_LARGEFILE
 1

	)

493 
	#__USE_LARGEFILE64
 1

	)

499 #ià
	`__GNUC_PREREQ
 (2, 7è&& 
defšed
 
__OPTIMIZE__
 \

500 && !
defšed
 
__OPTIMIZE_SIZE__
 && !defšed 
__NO_INLINE__
 \

501 && 
defšed
 
__ex‹º_šlše


502 
	#__USE_EXTERN_INLINES
 1

	)

510 
	~<gnu/¡ubs.h
>

	@/usr/include/netinet/in.h

18 #iâdef 
_NETINET_IN_H


19 
	#_NETINET_IN_H
 1

	)

21 
	~<ã©u»s.h
>

22 
	~<b™s/¡dšt-ušŠ.h
>

23 
	~<sys/sock‘.h
>

24 
	~<b™s/ty³s.h
>

27 
__BEGIN_DECLS


30 
ušt32_t
 
	tš_addr_t
;

31 
	sš_addr


33 
š_addr_t
 
	ms_addr
;

37 
	~<b™s/š.h
>

42 
	mIPPROTO_IP
 = 0,

43 
	#IPPROTO_IP
 
IPPROTO_IP


	)

44 
	mIPPROTO_ICMP
 = 1,

45 
	#IPPROTO_ICMP
 
IPPROTO_ICMP


	)

46 
	mIPPROTO_IGMP
 = 2,

47 
	#IPPROTO_IGMP
 
IPPROTO_IGMP


	)

48 
	mIPPROTO_IPIP
 = 4,

49 
	#IPPROTO_IPIP
 
IPPROTO_IPIP


	)

50 
	mIPPROTO_TCP
 = 6,

51 
	#IPPROTO_TCP
 
IPPROTO_TCP


	)

52 
	mIPPROTO_EGP
 = 8,

53 
	#IPPROTO_EGP
 
IPPROTO_EGP


	)

54 
	mIPPROTO_PUP
 = 12,

55 
	#IPPROTO_PUP
 
IPPROTO_PUP


	)

56 
	mIPPROTO_UDP
 = 17,

57 
	#IPPROTO_UDP
 
IPPROTO_UDP


	)

58 
	mIPPROTO_IDP
 = 22,

59 
	#IPPROTO_IDP
 
IPPROTO_IDP


	)

60 
	mIPPROTO_TP
 = 29,

61 
	#IPPROTO_TP
 
IPPROTO_TP


	)

62 
	mIPPROTO_DCCP
 = 33,

63 
	#IPPROTO_DCCP
 
IPPROTO_DCCP


	)

64 
	mIPPROTO_IPV6
 = 41,

65 
	#IPPROTO_IPV6
 
IPPROTO_IPV6


	)

66 
	mIPPROTO_RSVP
 = 46,

67 
	#IPPROTO_RSVP
 
IPPROTO_RSVP


	)

68 
	mIPPROTO_GRE
 = 47,

69 
	#IPPROTO_GRE
 
IPPROTO_GRE


	)

70 
	mIPPROTO_ESP
 = 50,

71 
	#IPPROTO_ESP
 
IPPROTO_ESP


	)

72 
	mIPPROTO_AH
 = 51,

73 
	#IPPROTO_AH
 
IPPROTO_AH


	)

74 
	mIPPROTO_MTP
 = 92,

75 
	#IPPROTO_MTP
 
IPPROTO_MTP


	)

76 
	mIPPROTO_BEETPH
 = 94,

77 
	#IPPROTO_BEETPH
 
IPPROTO_BEETPH


	)

78 
	mIPPROTO_ENCAP
 = 98,

79 
	#IPPROTO_ENCAP
 
IPPROTO_ENCAP


	)

80 
	mIPPROTO_PIM
 = 103,

81 
	#IPPROTO_PIM
 
IPPROTO_PIM


	)

82 
	mIPPROTO_COMP
 = 108,

83 
	#IPPROTO_COMP
 
IPPROTO_COMP


	)

84 
	mIPPROTO_SCTP
 = 132,

85 
	#IPPROTO_SCTP
 
IPPROTO_SCTP


	)

86 
	mIPPROTO_UDPLITE
 = 136,

87 
	#IPPROTO_UDPLITE
 
IPPROTO_UDPLITE


	)

88 
	mIPPROTO_MPLS
 = 137,

89 
	#IPPROTO_MPLS
 
IPPROTO_MPLS


	)

90 
	mIPPROTO_ETHERNET
 = 143,

91 
	#IPPROTO_ETHERNET
 
IPPROTO_ETHERNET


	)

92 
	mIPPROTO_RAW
 = 255,

93 
	#IPPROTO_RAW
 
IPPROTO_RAW


	)

94 
	mIPPROTO_MPTCP
 = 262,

95 
	#IPPROTO_MPTCP
 
IPPROTO_MPTCP


	)

96 
	mIPPROTO_MAX


102 #ià!
__USE_KERNEL_IPV6_DEFS


105 
	mIPPROTO_HOPOPTS
 = 0,

106 
	#IPPROTO_HOPOPTS
 
IPPROTO_HOPOPTS


	)

107 
	mIPPROTO_ROUTING
 = 43,

108 
	#IPPROTO_ROUTING
 
IPPROTO_ROUTING


	)

109 
	mIPPROTO_FRAGMENT
 = 44,

110 
	#IPPROTO_FRAGMENT
 
IPPROTO_FRAGMENT


	)

111 
	mIPPROTO_ICMPV6
 = 58,

112 
	#IPPROTO_ICMPV6
 
IPPROTO_ICMPV6


	)

113 
	mIPPROTO_NONE
 = 59,

114 
	#IPPROTO_NONE
 
IPPROTO_NONE


	)

115 
	mIPPROTO_DSTOPTS
 = 60,

116 
	#IPPROTO_DSTOPTS
 
IPPROTO_DSTOPTS


	)

117 
	mIPPROTO_MH
 = 135

118 
	#IPPROTO_MH
 
IPPROTO_MH


	)

123 
ušt16_t
 
	tš_pÜt_t
;

128 
	mIPPORT_ECHO
 = 7,

129 
	mIPPORT_DISCARD
 = 9,

130 
	mIPPORT_SYSTAT
 = 11,

131 
	mIPPORT_DAYTIME
 = 13,

132 
	mIPPORT_NETSTAT
 = 15,

133 
	mIPPORT_FTP
 = 21,

134 
	mIPPORT_TELNET
 = 23,

135 
	mIPPORT_SMTP
 = 25,

136 
	mIPPORT_TIMESERVER
 = 37,

137 
	mIPPORT_NAMESERVER
 = 42,

138 
	mIPPORT_WHOIS
 = 43,

139 
	mIPPORT_MTP
 = 57,

141 
	mIPPORT_TFTP
 = 69,

142 
	mIPPORT_RJE
 = 77,

143 
	mIPPORT_FINGER
 = 79,

144 
	mIPPORT_TTYLINK
 = 87,

145 
	mIPPORT_SUPDUP
 = 95,

148 
	mIPPORT_EXECSERVER
 = 512,

149 
	mIPPORT_LOGINSERVER
 = 513,

150 
	mIPPORT_CMDSERVER
 = 514,

151 
	mIPPORT_EFSSERVER
 = 520,

154 
	mIPPORT_BIFFUDP
 = 512,

155 
	mIPPORT_WHOSERVER
 = 513,

156 
	mIPPORT_ROUTESERVER
 = 520,

159 
	mIPPORT_RESERVED
 = 1024,

162 
	mIPPORT_USERRESERVED
 = 5000

170 
	#IN_CLASSA
(
a
è((((
š_addr_t
)×)è& 0x80000000è=ğ0)

	)

171 
	#IN_CLASSA_NET
 0xff000000

	)

172 
	#IN_CLASSA_NSHIFT
 24

	)

173 
	#IN_CLASSA_HOST
 (0xfffffffà& ~
IN_CLASSA_NET
)

	)

174 
	#IN_CLASSA_MAX
 128

	)

176 
	#IN_CLASSB
(
a
è((((
š_addr_t
)×)è& 0xc0000000è=ğ0x80000000)

	)

177 
	#IN_CLASSB_NET
 0xffff0000

	)

178 
	#IN_CLASSB_NSHIFT
 16

	)

179 
	#IN_CLASSB_HOST
 (0xfffffffà& ~
IN_CLASSB_NET
)

	)

180 
	#IN_CLASSB_MAX
 65536

	)

182 
	#IN_CLASSC
(
a
è((((
š_addr_t
)×)è& 0xe0000000è=ğ0xc0000000)

	)

183 
	#IN_CLASSC_NET
 0xffffff00

	)

184 
	#IN_CLASSC_NSHIFT
 8

	)

185 
	#IN_CLASSC_HOST
 (0xfffffffà& ~
IN_CLASSC_NET
)

	)

187 
	#IN_CLASSD
(
a
è((((
š_addr_t
)×)è& 0xf0000000è=ğ0xe0000000)

	)

188 
	#IN_MULTICAST
(
a
è
	`IN_CLASSD
×)

	)

190 
	#IN_EXPERIMENTAL
(
a
è((((
š_addr_t
)×)è& 0xe0000000è=ğ0xe0000000)

	)

191 
	#IN_BADCLASS
(
a
è((((
š_addr_t
)×)è& 0xf0000000è=ğ0xf0000000)

	)

194 
	#INADDR_ANY
 ((
š_addr_t
è0x00000000)

	)

196 
	#INADDR_BROADCAST
 ((
š_addr_t
è0xffffffff)

	)

198 
	#INADDR_NONE
 ((
š_addr_t
è0xffffffff)

	)

201 
	#INADDR_DUMMY
 ((
š_addr_t
è0xc0000008)

	)

204 
	#IN_LOOPBACKNET
 127

	)

206 #iâdeà
INADDR_LOOPBACK


207 
	#INADDR_LOOPBACK
 ((
š_addr_t
è0x7f000001è

	)

211 
	#INADDR_UNSPEC_GROUP
 ((
š_addr_t
è0xe0000000è

	)

212 
	#INADDR_ALLHOSTS_GROUP
 ((
š_addr_t
è0xe0000001è

	)

213 
	#INADDR_ALLRTRS_GROUP
 ((
š_addr_t
è0xe0000002è

	)

214 
	#INADDR_ALLSNOOPERS_GROUP
 ((
š_addr_t
è0xe000006aè

	)

215 
	#INADDR_MAX_LOCAL_GROUP
 ((
š_addr_t
è0xe00000ffè

	)

217 #ià!
__USE_KERNEL_IPV6_DEFS


219 
	sš6_addr


223 
ušt8_t
 
	m__u6_addr8
[16];

224 
ušt16_t
 
	m__u6_addr16
[8];

225 
ušt32_t
 
	m__u6_addr32
[4];

226 } 
	m__š6_u
;

227 
	#s6_addr
 
__š6_u
.
__u6_addr8


	)

228 #ifdeà
__USE_MISC


229 
	#s6_addr16
 
__š6_u
.
__u6_addr16


	)

230 
	#s6_addr32
 
__š6_u
.
__u6_addr32


	)

235 cÚ¡ 
š6_addr
 
š6addr_ªy
;

236 cÚ¡ 
š6_addr
 
š6addr_loİback
;

237 
	#IN6ADDR_ANY_INIT
 { { { 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 } } }

	)

238 
	#IN6ADDR_LOOPBACK_INIT
 { { { 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1 } } }

	)

240 
	#INET_ADDRSTRLEN
 16

	)

241 
	#INET6_ADDRSTRLEN
 46

	)

245 
	ssockaddr_š


247 
__SOCKADDR_COMMON
 (
sš_
);

248 
š_pÜt_t
 
	msš_pÜt
;

249 
š_addr
 
	msš_addr
;

252 
	msš_z”o
[ (
sockaddr
)

253 - 
__SOCKADDR_COMMON_SIZE


254 -  (
š_pÜt_t
)

255 -  (
š_addr
)];

258 #ià!
__USE_KERNEL_IPV6_DEFS


260 
	ssockaddr_š6


262 
__SOCKADDR_COMMON
 (
sš6_
);

263 
š_pÜt_t
 
	msš6_pÜt
;

264 
ušt32_t
 
	msš6_æowšfo
;

265 
š6_addr
 
	msš6_addr
;

266 
ušt32_t
 
	msš6_scİe_id
;

270 #ifdeà
__USE_MISC


272 
	s_m»q


275 
š_addr
 
	mimr_muÉŸddr
;

278 
š_addr
 
	mimr_š‹rçû
;

281 
	s_m»q_sourû


284 
š_addr
 
	mimr_muÉŸddr
;

287 
š_addr
 
	mimr_š‹rçû
;

290 
š_addr
 
	mimr_sourûaddr
;

294 #ià!
__USE_KERNEL_IPV6_DEFS


296 
	sv6_m»q


299 
š6_addr
 
	mv6mr_muÉŸddr
;

302 
	mv6mr_š‹rçû
;

306 #ifdeà
__USE_MISC


308 
	sgroup_»q


311 
ušt32_t
 
	mgr_š‹rçû
;

314 
sockaddr_¡Üage
 
	mgr_group
;

317 
	sgroup_sourû_»q


320 
ušt32_t
 
	mg¤_š‹rçû
;

323 
sockaddr_¡Üage
 
	mg¤_group
;

326 
sockaddr_¡Üage
 
	mg¤_sourû
;

331 
	s_msf‹r


334 
š_addr
 
	mimsf_muÉŸddr
;

337 
š_addr
 
	mimsf_š‹rçû
;

340 
ušt32_t
 
	mimsf_fmode
;

343 
ušt32_t
 
	mimsf_num¤c
;

345 
š_addr
 
	mimsf_¦i¡
[1];

348 
	#IP_MSFILTER_SIZE
(
num¤c
è( (
_msf‹r
) \

349 -  (
š_addr
) \

350 + (
num¤c
è*  (
š_addr
))

	)

352 
	sgroup_f‹r


355 
ušt32_t
 
	mgf_š‹rçû
;

358 
sockaddr_¡Üage
 
	mgf_group
;

361 
ušt32_t
 
	mgf_fmode
;

364 
ušt32_t
 
	mgf_num¤c
;

366 
sockaddr_¡Üage
 
	mgf_¦i¡
[1];

369 
	#GROUP_FILTER_SIZE
(
num¤c
è( (
group_f‹r
) \

370 -  (
sockaddr_¡Üage
) \

371 + ((
num¤c
) \

372 *  (
sockaddr_¡Üage
)))

	)

382 
ušt32_t
 
	$Áohl
 (
ušt32_t
 
__ÃÚg
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

383 
ušt16_t
 
	$Áohs
 (
ušt16_t
 
__ÃtshÜt
)

384 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

385 
ušt32_t
 
	$htÚl
 (
ušt32_t
 
__ho¡lÚg
)

386 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

387 
ušt16_t
 
	$htÚs
 (
ušt16_t
 
__ho¡shÜt
)

388 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

390 
	~<’dŸn.h
>

393 
	~<b™s/by‹sw­.h
>

394 
	~<b™s/ušŠ-id’t™y.h
>

396 #ifdeà
__OPTIMIZE__


400 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


403 
	#Áohl
(
x
è
	`__ušt32_id’t™y
 (x)

	)

404 
	#Áohs
(
x
è
	`__ušt16_id’t™y
 (x)

	)

405 
	#htÚl
(
x
è
	`__ušt32_id’t™y
 (x)

	)

406 
	#htÚs
(
x
è
	`__ušt16_id’t™y
 (x)

	)

408 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


409 
	#Áohl
(
x
è
	`__bsw­_32
 (x)

	)

410 
	#Áohs
(
x
è
	`__bsw­_16
 (x)

	)

411 
	#htÚl
(
x
è
	`__bsw­_32
 (x)

	)

412 
	#htÚs
(
x
è
	`__bsw­_16
 (x)

	)

417 #ifdeà
__GNUC__


418 
	#IN6_IS_ADDR_UNSPECIFIED
(
a
) \

419 (
__ex‹nsiÚ__
 \

420 ({ cÚ¡ 
š6_addr
 *
__a
 = (cÚ¡ š6_add¸*è(
a
); \

421 
__a
->
__š6_u
.
__u6_addr32
[0] == 0 \

422 && 
__a
->
__š6_u
.
__u6_addr32
[1] == 0 \

423 && 
__a
->
__š6_u
.
__u6_addr32
[2] == 0 \

424 && 
__a
->
__š6_u
.
__u6_addr32
[3] =ğ0; 
	}
}))

	)

426 
	#IN6_IS_ADDR_LOOPBACK
(
a
) \

427 (
__ex‹nsiÚ__
 \

428 ({ cÚ¡ 
š6_addr
 *
__a
 = (cÚ¡ š6_add¸*è(
a
); \

429 
__a
->
__š6_u
.
__u6_addr32
[0] == 0 \

430 && 
__a
->
__š6_u
.
__u6_addr32
[1] == 0 \

431 && 
__a
->
__š6_u
.
__u6_addr32
[2] == 0 \

432 && 
__a
->
__š6_u
.
__u6_addr32
[3] =ğ
	`htÚl
 (1); }))

	)

434 
	#IN6_IS_ADDR_LINKLOCAL
(
a
) \

435 (
__ex‹nsiÚ__
 \

436 ({ cÚ¡ 
š6_addr
 *
__a
 = (cÚ¡ š6_add¸*è(
a
); \

437 (
__a
->
__š6_u
.
__u6_addr32
[0] & 
	`htÚl
 (0xffc00000)è=ğhtÚÈ(0xã800000); }))

	)

439 
	#IN6_IS_ADDR_SITELOCAL
(
a
) \

440 (
__ex‹nsiÚ__
 \

441 ({ cÚ¡ 
š6_addr
 *
__a
 = (cÚ¡ š6_add¸*è(
a
); \

442 (
__a
->
__š6_u
.
__u6_addr32
[0] & 
	`htÚl
 (0xffc00000)è=ğhtÚÈ(0xãc00000); }))

	)

444 
	#IN6_IS_ADDR_V4MAPPED
(
a
) \

445 (
__ex‹nsiÚ__
 \

446 ({ cÚ¡ 
š6_addr
 *
__a
 = (cÚ¡ š6_add¸*è(
a
); \

447 
__a
->
__š6_u
.
__u6_addr32
[0] == 0 \

448 && 
__a
->
__š6_u
.
__u6_addr32
[1] == 0 \

449 && 
__a
->
__š6_u
.
__u6_addr32
[2] =ğ
	`htÚl
 (0xffff); }))

	)

451 
	#IN6_IS_ADDR_V4COMPAT
(
a
) \

452 (
__ex‹nsiÚ__
 \

453 ({ cÚ¡ 
š6_addr
 *
__a
 = (cÚ¡ š6_add¸*è(
a
); \

454 
__a
->
__š6_u
.
__u6_addr32
[0] == 0 \

455 && 
__a
->
__š6_u
.
__u6_addr32
[1] == 0 \

456 && 
__a
->
__š6_u
.
__u6_addr32
[2] == 0 \

457 && 
	`Áohl
 (
__a
->
__š6_u
.
__u6_addr32
[3]è> 1; }))

	)

459 
	#IN6_ARE_ADDR_EQUAL
(
a
,
b
) \

460 (
__ex‹nsiÚ__
 \

461 ({ cÚ¡ 
š6_addr
 *
__a
 = (cÚ¡ š6_add¸*è(
a
); \

462 cÚ¡ 
š6_addr
 *
__b
 = (cÚ¡ š6_add¸*è(
b
); \

463 
__a
->
__š6_u
.
__u6_addr32
[0] =ğ
__b
->__in6_u.__u6_addr32[0] \

464 && 
__a
->
__š6_u
.
__u6_addr32
[1] =ğ
__b
->__in6_u.__u6_addr32[1] \

465 && 
__a
->
__š6_u
.
__u6_addr32
[2] =ğ
__b
->__in6_u.__u6_addr32[2] \

466 && 
__a
->
__š6_u
.
__u6_addr32
[3] =ğ
__b
->__š6_u.__u6_addr32[3]; }))

	)

468 
	#IN6_IS_ADDR_UNSPECIFIED
(
a
) \

469 (((cÚ¡ 
ušt32_t
 *è(
a
))[0] == 0 \

470 && ((cÚ¡ 
ušt32_t
 *è(
a
))[1] == 0 \

471 && ((cÚ¡ 
ušt32_t
 *è(
a
))[2] == 0 \

472 && ((cÚ¡ 
ušt32_t
 *è(
a
))[3] =ğ0)

	)

474 
	#IN6_IS_ADDR_LOOPBACK
(
a
) \

475 (((cÚ¡ 
ušt32_t
 *è(
a
))[0] == 0 \

476 && ((cÚ¡ 
ušt32_t
 *è(
a
))[1] == 0 \

477 && ((cÚ¡ 
ušt32_t
 *è(
a
))[2] == 0 \

478 && ((cÚ¡ 
ušt32_t
 *è(
a
))[3] =ğ
	`htÚl
 (1))

	)

480 
	#IN6_IS_ADDR_LINKLOCAL
(
a
) \

481 ((((cÚ¡ 
ušt32_t
 *è(
a
))[0] & 
	`htÚl
 (0xffc00000)) \

482 =ğ
	`htÚl
 (0xã800000))

	)

484 
	#IN6_IS_ADDR_SITELOCAL
(
a
) \

485 ((((cÚ¡ 
ušt32_t
 *è(
a
))[0] & 
	`htÚl
 (0xffc00000)) \

486 =ğ
	`htÚl
 (0xãc00000))

	)

488 
	#IN6_IS_ADDR_V4MAPPED
(
a
) \

489 ((((cÚ¡ 
ušt32_t
 *è(
a
))[0] == 0) \

490 && (((cÚ¡ 
ušt32_t
 *è(
a
))[1] == 0) \

491 && (((cÚ¡ 
ušt32_t
 *è(
a
))[2] =ğ
	`htÚl
 (0xffff)))

	)

493 
	#IN6_IS_ADDR_V4COMPAT
(
a
) \

494 ((((cÚ¡ 
ušt32_t
 *è(
a
))[0] == 0) \

495 && (((cÚ¡ 
ušt32_t
 *è(
a
))[1] == 0) \

496 && (((cÚ¡ 
ušt32_t
 *è(
a
))[2] == 0) \

497 && (
	`Áohl
 (((cÚ¡ 
ušt32_t
 *è(
a
))[3]è> 1))

	)

499 
	#IN6_ARE_ADDR_EQUAL
(
a
,
b
) \

500 ((((cÚ¡ 
ušt32_t
 *è(
a
))[0] =ğ((cÚ¡ ušt32_ˆ*è(
b
))[0]) \

501 && (((cÚ¡ 
ušt32_t
 *è(
a
))[1] =ğ((cÚ¡ ušt32_ˆ*è(
b
))[1]) \

502 && (((cÚ¡ 
ušt32_t
 *è(
a
))[2] =ğ((cÚ¡ ušt32_ˆ*è(
b
))[2]) \

503 && (((cÚ¡ 
ušt32_t
 *è(
a
))[3] =ğ((cÚ¡ ušt32_ˆ*è(
b
))[3]))

	)

506 
	#IN6_IS_ADDR_MULTICAST
(
a
è(((cÚ¡ 
ušt8_t
 *è×))[0] =ğ0xff)

	)

508 #ifdeà
__USE_MISC


510 
	$bšd»svpÜt
 (
__sockfd
, 
sockaddr_š
 *
__sock_š
è
__THROW
;

513 
	$bšd»svpÜt6
 (
__sockfd
, 
sockaddr_š6
 *
__sock_š
)

514 
__THROW
;

518 
	#IN6_IS_ADDR_MC_NODELOCAL
(
a
) \

519 (
	`IN6_IS_ADDR_MULTICAST
(
a
) \

520 && ((((cÚ¡ 
ušt8_t
 *è(
a
))[1] & 0xfè=ğ0x1))

	)

522 
	#IN6_IS_ADDR_MC_LINKLOCAL
(
a
) \

523 (
	`IN6_IS_ADDR_MULTICAST
(
a
) \

524 && ((((cÚ¡ 
ušt8_t
 *è(
a
))[1] & 0xfè=ğ0x2))

	)

526 
	#IN6_IS_ADDR_MC_SITELOCAL
(
a
) \

527 (
	`IN6_IS_ADDR_MULTICAST
(
a
) \

528 && ((((cÚ¡ 
ušt8_t
 *è(
a
))[1] & 0xfè=ğ0x5))

	)

530 
	#IN6_IS_ADDR_MC_ORGLOCAL
(
a
) \

531 (
	`IN6_IS_ADDR_MULTICAST
(
a
) \

532 && ((((cÚ¡ 
ušt8_t
 *è(
a
))[1] & 0xfè=ğ0x8))

	)

534 
	#IN6_IS_ADDR_MC_GLOBAL
(
a
) \

535 (
	`IN6_IS_ADDR_MULTICAST
(
a
) \

536 && ((((cÚ¡ 
ušt8_t
 *è(
a
))[1] & 0xfè=ğ0xe))

	)

539 #ifdeà
__USE_GNU


540 
cmsghdr
;

542 #ià!
__USE_KERNEL_IPV6_DEFS


544 
	sš6_pktšfo


546 
š6_addr
 
i6_addr
;

547 
i6_ifšdex
;

551 
	s6_mtušfo


553 
sockaddr_š6
 
6m_addr
;

554 
ušt32_t
 
6m_mtu
;

559 
	$š‘6_İtiÚ_¥aû
 (
__nby‹s
)

560 
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

561 
	$š‘6_İtiÚ_š™
 (*
__bp
, 
cmsghdr
 **
__cmsgp
,

562 
__ty³
è
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

563 
	$š‘6_İtiÚ_­³nd
 (
cmsghdr
 *
__cmsg
,

564 cÚ¡ 
ušt8_t
 *
__ty³p
, 
__muÉx
,

565 
__¶usy
è
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

566 
ušt8_t
 *
	$š‘6_İtiÚ_®loc
 (
cmsghdr
 *
__cmsg
, 
__d©®’
,

567 
__muÉx
, 
__¶usy
)

568 
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

569 
	$š‘6_İtiÚ_Ãxt
 (cÚ¡ 
cmsghdr
 *
__cmsg
,

570 
ušt8_t
 **
__Œp
)

571 
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

572 
	$š‘6_İtiÚ_fšd
 (cÚ¡ 
cmsghdr
 *
__cmsg
,

573 
ušt8_t
 **
__Œp
, 
__ty³
)

574 
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

578 
	$š‘6_İt_š™
 (*
__extbuf
, 
sockËn_t
 
__ex’
è
__THROW
;

579 
	$š‘6_İt_­³nd
 (*
__extbuf
, 
sockËn_t
 
__ex’
, 
__off£t
,

580 
ušt8_t
 
__ty³
, 
sockËn_t
 
__Ën
, ušt8_ˆ
__®ign
,

581 **
__d©abuå
è
__THROW
;

582 
	$š‘6_İt_fšish
 (*
__extbuf
, 
sockËn_t
 
__ex’
, 
__off£t
)

583 
__THROW
;

584 
	$š‘6_İt_£t_v®
 (*
__d©abuf
, 
__off£t
, *
__v®
,

585 
sockËn_t
 
__v®Ën
è
__THROW
;

586 
	$š‘6_İt_Ãxt
 (*
__extbuf
, 
sockËn_t
 
__ex’
, 
__off£t
,

587 
ušt8_t
 *
__ty³p
, 
sockËn_t
 *
__ËÅ
,

588 **
__d©abuå
è
__THROW
;

589 
	$š‘6_İt_fšd
 (*
__extbuf
, 
sockËn_t
 
__ex’
, 
__off£t
,

590 
ušt8_t
 
__ty³
, 
sockËn_t
 *
__ËÅ
,

591 **
__d©abuå
è
__THROW
;

592 
	$š‘6_İt_g‘_v®
 (*
__d©abuf
, 
__off£t
, *
__v®
,

593 
sockËn_t
 
__v®Ën
è
__THROW
;

597 
sockËn_t
 
	$š‘6_¹h_¥aû
 (
__ty³
, 
__£gm’ts
è
__THROW
;

598 *
	$š‘6_¹h_š™
 (*
__bp
, 
sockËn_t
 
__bp_Ën
, 
__ty³
,

599 
__£gm’ts
è
__THROW
;

600 
	$š‘6_¹h_add
 (*
__bp
, cÚ¡ 
š6_addr
 *
__addr
è
__THROW
;

601 
	$š‘6_¹h_»v”£
 (cÚ¡ *
__š
, *
__out
è
__THROW
;

602 
	$š‘6_¹h_£gm’ts
 (cÚ¡ *
__bp
è
__THROW
;

603 
š6_addr
 *
	$š‘6_¹h_g‘addr
 (cÚ¡ *
__bp
, 
__šdex
)

604 
__THROW
;

610 
	$g‘v4sourûf‹r
 (
__s
, 
š_addr
 
__š‹rçû_addr
,

611 
š_addr
 
__group
, 
ušt32_t
 *
__fmode
,

612 
ušt32_t
 *
__num¤c
, 
š_addr
 *
__¦i¡
)

613 
__THROW
;

616 
	$£tv4sourûf‹r
 (
__s
, 
š_addr
 
__š‹rçû_addr
,

617 
š_addr
 
__group
, 
ušt32_t
 
__fmode
,

618 
ušt32_t
 
__num¤c
,

619 cÚ¡ 
š_addr
 *
__¦i¡
)

620 
__THROW
;

624 
	$g‘sourûf‹r
 (
__s
, 
ušt32_t
 
__š‹rçû_addr
,

625 cÚ¡ 
sockaddr
 *
__group
,

626 
sockËn_t
 
__grou¶’
, 
ušt32_t
 *
__fmode
,

627 
ušt32_t
 *
__num¤c
,

628 
sockaddr_¡Üage
 *
__¦i¡
è
__THROW
;

631 
	$£tsourûf‹r
 (
__s
, 
ušt32_t
 
__š‹rçû_addr
,

632 cÚ¡ 
sockaddr
 *
__group
,

633 
sockËn_t
 
__grou¶’
, 
ušt32_t
 
__fmode
,

634 
ušt32_t
 
__num¤c
,

635 cÚ¡ 
sockaddr_¡Üage
 *
__¦i¡
è
__THROW
;

638 
__END_DECLS


	@/usr/include/rpc/netdb.h

36 #iâdeà
_RPC_NETDB_H


37 
	#_RPC_NETDB_H
 1

	)

39 
	~<ã©u»s.h
>

41 
	#__Ãed_size_t


	)

42 
	~<¡ddef.h
>

44 
__BEGIN_DECLS


46 
	s½ûÁ


48 *
	mr_Çme
;

49 **
	mr_®Ÿ£s
;

50 
	mr_numb”
;

53 
	$£ŒpûÁ
 (
__¡ayİ’
è
__THROW
;

54 
	$’d½ûÁ
 (è
__THROW
;

55 
½ûÁ
 *
	$g‘½cbyÇme
 (cÚ¡ *
__Çme
è
__THROW
;

56 
½ûÁ
 *
	$g‘½cbynumb”
 (
__numb”
è
__THROW
;

57 
½ûÁ
 *
	$g‘½ûÁ
 (è
__THROW
;

59 #ifdeà
__USE_MISC


60 
	$g‘½cbyÇme_r
 (cÚ¡ *
__Çme
, 
½ûÁ
 *
__»suÉ_buf
,

61 *
__bufãr
, 
size_t
 
__buæ’
,

62 
½ûÁ
 **
__»suÉ
è
__THROW
;

64 
	$g‘½cbynumb”_r
 (
__numb”
, 
½ûÁ
 *
__»suÉ_buf
,

65 *
__bufãr
, 
size_t
 
__buæ’
,

66 
½ûÁ
 **
__»suÉ
è
__THROW
;

68 
	$g‘½ûÁ_r
 (
½ûÁ
 *
__»suÉ_buf
, *
__bufãr
,

69 
size_t
 
__buæ’
, 
½ûÁ
 **
__»suÉ
è
__THROW
;

72 
__END_DECLS


	@/usr/include/endian.h

18 #iâdef 
_ENDIAN_H


19 
	#_ENDIAN_H
 1

	)

21 
	~<ã©u»s.h
>

24 
	~<b™s/’dŸn.h
>

26 #ifdeà
__USE_MISC


27 
	#LITTLE_ENDIAN
 
__LITTLE_ENDIAN


	)

28 
	#BIG_ENDIAN
 
__BIG_ENDIAN


	)

29 
	#PDP_ENDIAN
 
__PDP_ENDIAN


	)

30 
	#BYTE_ORDER
 
__BYTE_ORDER


	)

33 #ià
defšed
 
__USE_MISC
 && !defšed 
__ASSEMBLER__


35 
	~<b™s/by‹sw­.h
>

36 
	~<b™s/ušŠ-id’t™y.h
>

38 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


39 
	#htobe16
(
x
è
	`__bsw­_16
 (x)

	)

40 
	#htŞe16
(
x
è
	`__ušt16_id’t™y
 (x)

	)

41 
	#be16toh
(
x
è
	`__bsw­_16
 (x)

	)

42 
	#Ë16toh
(
x
è
	`__ušt16_id’t™y
 (x)

	)

44 
	#htobe32
(
x
è
	`__bsw­_32
 (x)

	)

45 
	#htŞe32
(
x
è
	`__ušt32_id’t™y
 (x)

	)

46 
	#be32toh
(
x
è
	`__bsw­_32
 (x)

	)

47 
	#Ë32toh
(
x
è
	`__ušt32_id’t™y
 (x)

	)

49 
	#htobe64
(
x
è
	`__bsw­_64
 (x)

	)

50 
	#htŞe64
(
x
è
	`__ušt64_id’t™y
 (x)

	)

51 
	#be64toh
(
x
è
	`__bsw­_64
 (x)

	)

52 
	#Ë64toh
(
x
è
	`__ušt64_id’t™y
 (x)

	)

55 
	#htobe16
(
x
è
	`__ušt16_id’t™y
 (x)

	)

56 
	#htŞe16
(
x
è
	`__bsw­_16
 (x)

	)

57 
	#be16toh
(
x
è
	`__ušt16_id’t™y
 (x)

	)

58 
	#Ë16toh
(
x
è
	`__bsw­_16
 (x)

	)

60 
	#htobe32
(
x
è
	`__ušt32_id’t™y
 (x)

	)

61 
	#htŞe32
(
x
è
	`__bsw­_32
 (x)

	)

62 
	#be32toh
(
x
è
	`__ušt32_id’t™y
 (x)

	)

63 
	#Ë32toh
(
x
è
	`__bsw­_32
 (x)

	)

65 
	#htobe64
(
x
è
	`__ušt64_id’t™y
 (x)

	)

66 
	#htŞe64
(
x
è
	`__bsw­_64
 (x)

	)

67 
	#be64toh
(
x
è
	`__ušt64_id’t™y
 (x)

	)

68 
	#Ë64toh
(
x
è
	`__bsw­_64
 (x)

	)

	@/usr/include/features-time64.h

20 
	~<b™s/wÜdsize.h
>

21 
	~<b™s/timesize.h
>

23 #ià
defšed
 
_TIME_BITS


24 #ià
_TIME_BITS
 == 64

25 #ià! 
defšed
 (
_FILE_OFFSET_BITS
) || _FILE_OFFSET_BITS != 64

27 #–ià
__TIMESIZE
 == 32

28 
	#__USE_TIME_BITS64
 1

	)

30 #–ià
_TIME_BITS
 == 32

31 #ià
__TIMESIZE
 > 32

35 #”rÜ 
Inv®id
 
_TIME_BITS
 
v®ue
 (
ÿn
 
Úly
 
be
 32 
Ü
 64-
b™
)

	@/usr/include/stdc-predef.h

18 #iâdef 
_STDC_PREDEF_H


19 
	#_STDC_PREDEF_H
 1

	)

36 #ifdeà
__GCC_IEC_559


37 #ià
__GCC_IEC_559
 > 0

38 
	#__STDC_IEC_559__
 1

	)

39 
	#__STDC_IEC_60559_BFP__
 201404L

	)

42 
	#__STDC_IEC_559__
 1

	)

43 
	#__STDC_IEC_60559_BFP__
 201404L

	)

46 #ifdeà
__GCC_IEC_559_COMPLEX


47 #ià
__GCC_IEC_559_COMPLEX
 > 0

48 
	#__STDC_IEC_559_COMPLEX__
 1

	)

49 
	#__STDC_IEC_60559_COMPLEX__
 201404L

	)

52 
	#__STDC_IEC_559_COMPLEX__
 1

	)

53 
	#__STDC_IEC_60559_COMPLEX__
 201404L

	)

62 
	#__STDC_ISO_10646__
 201706L

	)

	@
1
.
1
/usr/include
408
17376
benchmarks/db_bench.cc
benchmarks/db_bench_log.cc
benchmarks/db_bench_sqlite3.cc
benchmarks/db_bench_tree_db.cc
build/CMakeFiles/3.22.1/CompilerIdC/CMakeCCompilerId.c
build/CMakeFiles/3.22.1/CompilerIdCXX/CMakeCXXCompilerId.cpp
build/include/port/port_config.h
db/autocompact_test.cc
db/builder.cc
db/builder.h
db/c.cc
db/c_test.c
db/corruption_test.cc
db/db_impl.cc
db/db_impl.h
db/db_iter.cc
db/db_iter.h
db/db_test.cc
db/dbformat.cc
db/dbformat.h
db/dbformat_test.cc
db/dumpfile.cc
db/fault_injection_test.cc
db/filename.cc
db/filename.h
db/filename_test.cc
db/leveldbutil.cc
db/log_format.h
db/log_reader.cc
db/log_reader.h
db/log_test.cc
db/log_writer.cc
db/log_writer.h
db/memtable.cc
db/memtable.h
db/recovery_test.cc
db/repair.cc
db/skiplist.h
db/skiplist_test.cc
db/snapshot.h
db/table_cache.cc
db/table_cache.h
db/version_edit.cc
db/version_edit.h
db/version_edit_test.cc
db/version_set.cc
db/version_set.h
db/version_set_test.cc
db/write_batch.cc
db/write_batch_internal.h
db/write_batch_test.cc
helpers/memenv/memenv.cc
helpers/memenv/memenv.h
helpers/memenv/memenv_test.cc
include/leveldb/c.h
include/leveldb/cache.h
include/leveldb/comparator.h
include/leveldb/db.h
include/leveldb/dumpfile.h
include/leveldb/env.h
include/leveldb/export.h
include/leveldb/filter_policy.h
include/leveldb/iterator.h
include/leveldb/options.h
include/leveldb/slice.h
include/leveldb/status.h
include/leveldb/table.h
include/leveldb/table_builder.h
include/leveldb/write_batch.h
issues/issue178_test.cc
issues/issue200_test.cc
issues/issue320_test.cc
port/port.h
port/port_example.h
port/port_stdcxx.h
port/thread_annotations.h
table/block.cc
table/block.h
table/block_builder.cc
table/block_builder.h
table/filter_block.cc
table/filter_block.h
table/filter_block_test.cc
table/format.cc
table/format.h
table/iterator.cc
table/iterator_wrapper.h
table/merger.cc
table/merger.h
table/table.cc
table/table_builder.cc
table/table_test.cc
table/two_level_iterator.cc
table/two_level_iterator.h
third_party/benchmark/bindings/python/google_benchmark/benchmark.cc
third_party/benchmark/cmake/gnu_posix_regex.cpp
third_party/benchmark/cmake/posix_regex.cpp
third_party/benchmark/cmake/pthread_affinity.cpp
third_party/benchmark/cmake/std_regex.cpp
third_party/benchmark/cmake/steady_clock.cpp
third_party/benchmark/cmake/thread_safety_attributes.cpp
third_party/benchmark/include/benchmark/benchmark.h
third_party/benchmark/include/benchmark/export.h
third_party/benchmark/src/arraysize.h
third_party/benchmark/src/benchmark.cc
third_party/benchmark/src/benchmark_api_internal.cc
third_party/benchmark/src/benchmark_api_internal.h
third_party/benchmark/src/benchmark_main.cc
third_party/benchmark/src/benchmark_name.cc
third_party/benchmark/src/benchmark_register.cc
third_party/benchmark/src/benchmark_register.h
third_party/benchmark/src/benchmark_runner.cc
third_party/benchmark/src/benchmark_runner.h
third_party/benchmark/src/check.cc
third_party/benchmark/src/check.h
third_party/benchmark/src/colorprint.cc
third_party/benchmark/src/colorprint.h
third_party/benchmark/src/commandlineflags.cc
third_party/benchmark/src/commandlineflags.h
third_party/benchmark/src/complexity.cc
third_party/benchmark/src/complexity.h
third_party/benchmark/src/console_reporter.cc
third_party/benchmark/src/counter.cc
third_party/benchmark/src/counter.h
third_party/benchmark/src/csv_reporter.cc
third_party/benchmark/src/cycleclock.h
third_party/benchmark/src/internal_macros.h
third_party/benchmark/src/json_reporter.cc
third_party/benchmark/src/log.h
third_party/benchmark/src/mutex.h
third_party/benchmark/src/perf_counters.cc
third_party/benchmark/src/perf_counters.h
third_party/benchmark/src/re.h
third_party/benchmark/src/reporter.cc
third_party/benchmark/src/statistics.cc
third_party/benchmark/src/statistics.h
third_party/benchmark/src/string_util.cc
third_party/benchmark/src/string_util.h
third_party/benchmark/src/sysinfo.cc
third_party/benchmark/src/thread_manager.h
third_party/benchmark/src/thread_timer.h
third_party/benchmark/src/timers.cc
third_party/benchmark/src/timers.h
third_party/benchmark/test/args_product_test.cc
third_party/benchmark/test/basic_test.cc
third_party/benchmark/test/benchmark_gtest.cc
third_party/benchmark/test/benchmark_min_time_flag_iters_test.cc
third_party/benchmark/test/benchmark_min_time_flag_time_test.cc
third_party/benchmark/test/benchmark_name_gtest.cc
third_party/benchmark/test/benchmark_random_interleaving_gtest.cc
third_party/benchmark/test/benchmark_setup_teardown_test.cc
third_party/benchmark/test/benchmark_test.cc
third_party/benchmark/test/clobber_memory_assembly_test.cc
third_party/benchmark/test/commandlineflags_gtest.cc
third_party/benchmark/test/complexity_test.cc
third_party/benchmark/test/cxx03_test.cc
third_party/benchmark/test/diagnostics_test.cc
third_party/benchmark/test/display_aggregates_only_test.cc
third_party/benchmark/test/donotoptimize_assembly_test.cc
third_party/benchmark/test/donotoptimize_test.cc
third_party/benchmark/test/filter_test.cc
third_party/benchmark/test/fixture_test.cc
third_party/benchmark/test/internal_threading_test.cc
third_party/benchmark/test/link_main_test.cc
third_party/benchmark/test/map_test.cc
third_party/benchmark/test/memory_manager_test.cc
third_party/benchmark/test/min_time_parse_gtest.cc
third_party/benchmark/test/multiple_ranges_test.cc
third_party/benchmark/test/options_test.cc
third_party/benchmark/test/output_test.h
third_party/benchmark/test/output_test_helper.cc
third_party/benchmark/test/perf_counters_gtest.cc
third_party/benchmark/test/perf_counters_test.cc
third_party/benchmark/test/register_benchmark_test.cc
third_party/benchmark/test/repetitions_test.cc
third_party/benchmark/test/report_aggregates_only_test.cc
third_party/benchmark/test/reporter_output_test.cc
third_party/benchmark/test/skip_with_error_test.cc
third_party/benchmark/test/spec_arg_test.cc
third_party/benchmark/test/spec_arg_verbosity_test.cc
third_party/benchmark/test/state_assembly_test.cc
third_party/benchmark/test/statistics_gtest.cc
third_party/benchmark/test/string_util_gtest.cc
third_party/benchmark/test/templated_fixture_test.cc
third_party/benchmark/test/time_unit_gtest.cc
third_party/benchmark/test/user_counters_tabular_test.cc
third_party/benchmark/test/user_counters_test.cc
third_party/benchmark/test/user_counters_thousands_test.cc
third_party/googletest/googlemock/include/gmock/gmock-actions.h
third_party/googletest/googlemock/include/gmock/gmock-cardinalities.h
third_party/googletest/googlemock/include/gmock/gmock-function-mocker.h
third_party/googletest/googlemock/include/gmock/gmock-matchers.h
third_party/googletest/googlemock/include/gmock/gmock-more-actions.h
third_party/googletest/googlemock/include/gmock/gmock-more-matchers.h
third_party/googletest/googlemock/include/gmock/gmock-nice-strict.h
third_party/googletest/googlemock/include/gmock/gmock-spec-builders.h
third_party/googletest/googlemock/include/gmock/gmock.h
third_party/googletest/googlemock/include/gmock/internal/custom/gmock-generated-actions.h
third_party/googletest/googlemock/include/gmock/internal/custom/gmock-matchers.h
third_party/googletest/googlemock/include/gmock/internal/custom/gmock-port.h
third_party/googletest/googlemock/include/gmock/internal/gmock-internal-utils.h
third_party/googletest/googlemock/include/gmock/internal/gmock-port.h
third_party/googletest/googlemock/include/gmock/internal/gmock-pp.h
third_party/googletest/googlemock/src/gmock-all.cc
third_party/googletest/googlemock/src/gmock-cardinalities.cc
third_party/googletest/googlemock/src/gmock-internal-utils.cc
third_party/googletest/googlemock/src/gmock-matchers.cc
third_party/googletest/googlemock/src/gmock-spec-builders.cc
third_party/googletest/googlemock/src/gmock.cc
third_party/googletest/googlemock/src/gmock_main.cc
third_party/googletest/googlemock/test/gmock-actions_test.cc
third_party/googletest/googlemock/test/gmock-cardinalities_test.cc
third_party/googletest/googlemock/test/gmock-function-mocker_test.cc
third_party/googletest/googlemock/test/gmock-internal-utils_test.cc
third_party/googletest/googlemock/test/gmock-matchers_test.cc
third_party/googletest/googlemock/test/gmock-more-actions_test.cc
third_party/googletest/googlemock/test/gmock-nice-strict_test.cc
third_party/googletest/googlemock/test/gmock-port_test.cc
third_party/googletest/googlemock/test/gmock-pp-string_test.cc
third_party/googletest/googlemock/test/gmock-pp_test.cc
third_party/googletest/googlemock/test/gmock-spec-builders_test.cc
third_party/googletest/googlemock/test/gmock_all_test.cc
third_party/googletest/googlemock/test/gmock_ex_test.cc
third_party/googletest/googlemock/test/gmock_leak_test_.cc
third_party/googletest/googlemock/test/gmock_link2_test.cc
third_party/googletest/googlemock/test/gmock_link_test.cc
third_party/googletest/googlemock/test/gmock_link_test.h
third_party/googletest/googlemock/test/gmock_output_test_.cc
third_party/googletest/googlemock/test/gmock_stress_test.cc
third_party/googletest/googlemock/test/gmock_test.cc
third_party/googletest/googletest/include/gtest/gtest-death-test.h
third_party/googletest/googletest/include/gtest/gtest-matchers.h
third_party/googletest/googletest/include/gtest/gtest-message.h
third_party/googletest/googletest/include/gtest/gtest-param-test.h
third_party/googletest/googletest/include/gtest/gtest-printers.h
third_party/googletest/googletest/include/gtest/gtest-spi.h
third_party/googletest/googletest/include/gtest/gtest-test-part.h
third_party/googletest/googletest/include/gtest/gtest-typed-test.h
third_party/googletest/googletest/include/gtest/gtest.h
third_party/googletest/googletest/include/gtest/gtest_pred_impl.h
third_party/googletest/googletest/include/gtest/gtest_prod.h
third_party/googletest/googletest/include/gtest/internal/custom/gtest-port.h
third_party/googletest/googletest/include/gtest/internal/custom/gtest-printers.h
third_party/googletest/googletest/include/gtest/internal/custom/gtest.h
third_party/googletest/googletest/include/gtest/internal/gtest-death-test-internal.h
third_party/googletest/googletest/include/gtest/internal/gtest-filepath.h
third_party/googletest/googletest/include/gtest/internal/gtest-internal.h
third_party/googletest/googletest/include/gtest/internal/gtest-param-util.h
third_party/googletest/googletest/include/gtest/internal/gtest-port-arch.h
third_party/googletest/googletest/include/gtest/internal/gtest-port.h
third_party/googletest/googletest/include/gtest/internal/gtest-string.h
third_party/googletest/googletest/include/gtest/internal/gtest-type-util.h
third_party/googletest/googletest/samples/prime_tables.h
third_party/googletest/googletest/samples/sample1.cc
third_party/googletest/googletest/samples/sample1.h
third_party/googletest/googletest/samples/sample10_unittest.cc
third_party/googletest/googletest/samples/sample1_unittest.cc
third_party/googletest/googletest/samples/sample2.cc
third_party/googletest/googletest/samples/sample2.h
third_party/googletest/googletest/samples/sample2_unittest.cc
third_party/googletest/googletest/samples/sample3-inl.h
third_party/googletest/googletest/samples/sample3_unittest.cc
third_party/googletest/googletest/samples/sample4.cc
third_party/googletest/googletest/samples/sample4.h
third_party/googletest/googletest/samples/sample4_unittest.cc
third_party/googletest/googletest/samples/sample5_unittest.cc
third_party/googletest/googletest/samples/sample6_unittest.cc
third_party/googletest/googletest/samples/sample7_unittest.cc
third_party/googletest/googletest/samples/sample8_unittest.cc
third_party/googletest/googletest/samples/sample9_unittest.cc
third_party/googletest/googletest/src/gtest-all.cc
third_party/googletest/googletest/src/gtest-death-test.cc
third_party/googletest/googletest/src/gtest-filepath.cc
third_party/googletest/googletest/src/gtest-internal-inl.h
third_party/googletest/googletest/src/gtest-matchers.cc
third_party/googletest/googletest/src/gtest-port.cc
third_party/googletest/googletest/src/gtest-printers.cc
third_party/googletest/googletest/src/gtest-test-part.cc
third_party/googletest/googletest/src/gtest-typed-test.cc
third_party/googletest/googletest/src/gtest.cc
third_party/googletest/googletest/src/gtest_main.cc
third_party/googletest/googletest/test/googletest-break-on-failure-unittest_.cc
third_party/googletest/googletest/test/googletest-catch-exceptions-test_.cc
third_party/googletest/googletest/test/googletest-color-test_.cc
third_party/googletest/googletest/test/googletest-death-test-test.cc
third_party/googletest/googletest/test/googletest-death-test_ex_test.cc
third_party/googletest/googletest/test/googletest-env-var-test_.cc
third_party/googletest/googletest/test/googletest-failfast-unittest_.cc
third_party/googletest/googletest/test/googletest-filepath-test.cc
third_party/googletest/googletest/test/googletest-filter-unittest_.cc
third_party/googletest/googletest/test/googletest-global-environment-unittest_.cc
third_party/googletest/googletest/test/googletest-list-tests-unittest_.cc
third_party/googletest/googletest/test/googletest-listener-test.cc
third_party/googletest/googletest/test/googletest-message-test.cc
third_party/googletest/googletest/test/googletest-options-test.cc
third_party/googletest/googletest/test/googletest-output-test_.cc
third_party/googletest/googletest/test/googletest-param-test-invalid-name1-test_.cc
third_party/googletest/googletest/test/googletest-param-test-invalid-name2-test_.cc
third_party/googletest/googletest/test/googletest-param-test-test.cc
third_party/googletest/googletest/test/googletest-param-test-test.h
third_party/googletest/googletest/test/googletest-param-test2-test.cc
third_party/googletest/googletest/test/googletest-port-test.cc
third_party/googletest/googletest/test/googletest-printers-test.cc
third_party/googletest/googletest/test/googletest-setuptestsuite-test_.cc
third_party/googletest/googletest/test/googletest-shuffle-test_.cc
third_party/googletest/googletest/test/googletest-test-part-test.cc
third_party/googletest/googletest/test/googletest-throw-on-failure-test_.cc
third_party/googletest/googletest/test/googletest-uninitialized-test_.cc
third_party/googletest/googletest/test/gtest-typed-test2_test.cc
third_party/googletest/googletest/test/gtest-typed-test_test.cc
third_party/googletest/googletest/test/gtest-typed-test_test.h
third_party/googletest/googletest/test/gtest-unittest-api_test.cc
third_party/googletest/googletest/test/gtest_all_test.cc
third_party/googletest/googletest/test/gtest_assert_by_exception_test.cc
third_party/googletest/googletest/test/gtest_environment_test.cc
third_party/googletest/googletest/test/gtest_help_test_.cc
third_party/googletest/googletest/test/gtest_list_output_unittest_.cc
third_party/googletest/googletest/test/gtest_main_unittest.cc
third_party/googletest/googletest/test/gtest_no_test_unittest.cc
third_party/googletest/googletest/test/gtest_pred_impl_unittest.cc
third_party/googletest/googletest/test/gtest_premature_exit_test.cc
third_party/googletest/googletest/test/gtest_prod_test.cc
third_party/googletest/googletest/test/gtest_repeat_test.cc
third_party/googletest/googletest/test/gtest_skip_in_environment_setup_test.cc
third_party/googletest/googletest/test/gtest_skip_test.cc
third_party/googletest/googletest/test/gtest_sole_header_test.cc
third_party/googletest/googletest/test/gtest_stress_test.cc
third_party/googletest/googletest/test/gtest_test_macro_stack_footprint_test.cc
third_party/googletest/googletest/test/gtest_testbridge_test_.cc
third_party/googletest/googletest/test/gtest_throw_on_failure_ex_test.cc
third_party/googletest/googletest/test/gtest_unittest.cc
third_party/googletest/googletest/test/gtest_xml_outfile1_test_.cc
third_party/googletest/googletest/test/gtest_xml_outfile2_test_.cc
third_party/googletest/googletest/test/gtest_xml_output_unittest_.cc
third_party/googletest/googletest/test/production.cc
third_party/googletest/googletest/test/production.h
util/arena.cc
util/arena.h
util/arena_test.cc
util/bloom.cc
util/bloom_test.cc
util/cache.cc
util/cache_test.cc
util/coding.cc
util/coding.h
util/coding_test.cc
util/comparator.cc
util/crc32c.cc
util/crc32c.h
util/crc32c_test.cc
util/env.cc
util/env_posix.cc
util/env_posix_test.cc
util/env_posix_test_helper.h
util/env_test.cc
util/env_windows.cc
util/env_windows_test.cc
util/env_windows_test_helper.h
util/filter_policy.cc
util/hash.cc
util/hash.h
util/hash_test.cc
util/histogram.cc
util/histogram.h
util/logging.cc
util/logging.h
util/logging_test.cc
util/mutexlock.h
util/no_destructor.h
util/no_destructor_test.cc
util/options.cc
util/posix_logger.h
util/random.h
util/status.cc
util/status_test.cc
util/testutil.cc
util/testutil.h
util/windows_logger.h
/usr/include/arpa/inet.h
/usr/include/assert.h
/usr/include/ctype.h
/usr/include/dirent.h
/usr/include/errno.h
/usr/include/fcntl.h
/usr/include/limits.h
/usr/include/math.h
/usr/include/netdb.h
/usr/include/pthread.h
/usr/include/regex.h
/usr/include/sched.h
/usr/include/signal.h
/usr/include/spawn.h
/usr/include/stdint.h
/usr/include/stdio.h
/usr/include/stdlib.h
/usr/include/string.h
/usr/include/strings.h
/usr/include/time.h
/usr/include/unistd.h
/usr/include/wchar.h
/usr/include/wctype.h
/usr/include/alloca.h
/usr/include/features.h
/usr/include/netinet/in.h
/usr/include/rpc/netdb.h
/usr/include/endian.h
/usr/include/features-time64.h
/usr/include/stdc-predef.h
